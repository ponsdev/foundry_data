{"_id":"5zQS2hcak7CLlEel","name":"Hunter's Mark","permission":{"default":0,"devnIbfBHb74U9Zv":3},"type":"spell","data":{"description":{"value":"<p>You choose a creature you can see within range and mystically mark it as your quarry. Until the spell ends, you deal an extra 1d6 damage to the target whenever you hit it with a weapon attack, and you have advantage on any Wisdom (Perception) or Wisdom (Survival) check you make to find it. If the target drops to 0 hit points before this spell ends, you can use a bonus action on a subsequent turn of yours to mark a new creature.</p>\r\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 3rd or 4th level, you can maintain your concentration on the spell for up to 8 hours. When you use a spell slot of 5th level or higher, you can maintain your concentration on the spell for up to 24 hours.</p>","chat":"<p>You choose a creature you can see within range and mystically mark it as your quarry. Until the spell ends, you deal an extra 1d6 damage to the target whenever you hit it with a weapon attack, and you have advantage on any Wisdom (Perception) or Wisdom (Survival) check you make to find it. If the target drops to 0 hit points before this spell ends, you can use a bonus action on a subsequent turn of yours to mark a new creature.</p>\r\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 3rd or 4th level, you can maintain your concentration on the spell for up to 8 hours. When you use a spell slot of 5th level or higher, you can maintain your concentration on the spell for up to 24 hours.</p>","unidentified":""},"source":"","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":90,"long":90,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"1d6","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"div","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"none","formula":""},"attributes":{"spelldc":10}},"flags":{"tags":["Damage","Debuff"],"core":{"sourceId":"Compendium.shared.dndbspells.j6tBlhBmvG39XYQt"},"midi-qol":{"onUseMacroName":"ItemMacro"},"favtab":{"isFavorite":false},"itemacro":{"macro":{"_data":{"name":"Hunter's Mark","type":"script","scope":"global","command":"// Sample Hunters mark onUse macro\nif (args[0].hitTargets.length === 0) return;\nif (args[0].tag === \"OnUse\") {\n    // Sample Hunters mark\n    let target = args[0].hitTargets[0]._id;\n    let actorId = args[0].actor._id; // actor who cast the spell\n    actor = game.actors.get(actorId);\n    if (!actor || !target) {\n      console.error(\"Hunter's Mark: no token/target selected\");\n      return;\n    }\n    \n    // create an active effect, \n    //  one change showing the hunter's mark icon on the caster\n    //  the second setting the flag for the macro to be called when damaging an opponent\n    const effectData = {\n      changes: [\n        {key: \"flags.midi-qol.huntersMark\", mode: 5, value: target, priority: 20}, // who is marked\n        {key: \"flags.dnd5e.DamageBonusMacro\", mode: 0, value: `ItemMacro.${args[0].item.name}`, priority: 20}, // macro to apply the damage\n        {key: \"flags.midi-qol.concentration-data.targets\", mode: 2, value: {\"actorId\":  actorId, \"tokenId\": args[0].tokenId}, priority: 20}\n      ],\n      origin: args[0].uuid, //flag the effect as associated to the spell being cast\n      disabled: false,\n      duration: args[0].item.effects[0].duration,\n      icon: args[0].item.img,\n      label: args[0].item.name\n    }\n    await actor.createEmbeddedEntity(\"ActiveEffect\", effectData);\n} else if (args[0].tag === \"DamageBonus\") {\n    // only weapon attacks\n    if (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {};\n    let targetId = args[0].hitTargets[0]._id;\n    // only on the marked target\n    if (targetId !== getProperty(args[0].actor.flags, \"midi-qol.huntersMark\")) return {};\n    let damageType = args[0].item.data.damage.parts[0][1];\n    const diceMult = args[0].isCritical ? 2: 1;\n    return {damageRoll: `${diceMult}d6[${damageType}]`, flavor: \"Hunters Mark Damage\"}\n}","author":"devnIbfBHb74U9Zv"},"data":{"name":"Hunter's Mark","type":"script","scope":"global","command":"// Sample Hunters mark onUse macro\nif (args[0].hitTargets.length === 0) return;\nif (args[0].tag === \"OnUse\") {\n    // Sample Hunters mark\n    let target = args[0].hitTargets[0]._id;\n    let actorId = args[0].actor._id; // actor who cast the spell\n    actor = game.actors.get(actorId);\n    if (!actor || !target) {\n      console.error(\"Hunter's Mark: no token/target selected\");\n      return;\n    }\n    \n    // create an active effect, \n    //  one change showing the hunter's mark icon on the caster\n    //  the second setting the flag for the macro to be called when damaging an opponent\n    const effectData = {\n      changes: [\n        {key: \"flags.midi-qol.huntersMark\", mode: 5, value: target, priority: 20}, // who is marked\n        {key: \"flags.dnd5e.DamageBonusMacro\", mode: 0, value: `ItemMacro.${args[0].item.name}`, priority: 20}, // macro to apply the damage\n        {key: \"flags.midi-qol.concentration-data.targets\", mode: 2, value: {\"actorId\":  actorId, \"tokenId\": args[0].tokenId}, priority: 20}\n      ],\n      origin: args[0].uuid, //flag the effect as associated to the spell being cast\n      disabled: false,\n      duration: args[0].item.effects[0].duration,\n      icon: args[0].item.img,\n      label: args[0].item.name\n    }\n    await actor.createEmbeddedEntity(\"ActiveEffect\", effectData);\n} else if (args[0].tag === \"DamageBonus\") {\n    // only weapon attacks\n    if (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {};\n    let targetId = args[0].hitTargets[0]._id;\n    // only on the marked target\n    if (targetId !== getProperty(args[0].actor.flags, \"midi-qol.huntersMark\")) return {};\n    let damageType = args[0].item.data.damage.parts[0][1];\n    const diceMult = args[0].isCritical ? 2: 1;\n    return {damageRoll: `${diceMult}d6[${damageType}]`, flavor: \"Hunters Mark Damage\"}\n}","author":"devnIbfBHb74U9Zv"},"options":{},"apps":{},"compendium":null}}},"img":"systems/dnd5e/icons/spells/evil-eye-red-1.jpg","effects":[{"_id":"llblEaN06c7jITPQ","flags":{"dae":{"stackable":false,"specialDuration":[],"macroRepeat":"none","transfer":false},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null}},"changes":[],"disabled":false,"duration":{"startTime":null,"seconds":3600,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"systems/dnd5e/icons/spells/evil-eye-red-1.jpg","label":"Marked","origin":"Actor.DMTSWfQs8whM5FtE.OwnedItem.q2xqMce5S0Acg7BA","tint":"","transfer":false}]}
{"_id":"Dpc1nj3RGKO1AvWS","name":"Aura of Protection","permission":{"default":0,"ZDFhNjE2NDMyYTY1":3},"type":"feat","data":{"description":{"value":"<p>Starting at 6th level, whenever you or a friendly creature within 10 feet of you must make a saving throw, the creature gains a bonus to the saving throw equal to your Charisma modifier (with a minimum bonus of +1). You must be conscious to grant this bonus.</p>\n<p>&nbsp;At 18th level, the range of this aura increases to 30 feet.</p>\n<p>&nbsp;</p>\n<p>Requires Active Auras.</p>","chat":"","unidentified":""},"source":"PHB pg. 85","activation":{"type":"none","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":10,"long":30,"units":"ft"},"uses":{"value":0,"max":"0","per":"","type":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Paladin 6","recharge":{"value":null,"charged":false},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"properties":{},"attributes":{"spelldc":10}},"flags":{"dae":{"migrated":true,"activeEquipped":false,"alwaysActive":true},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":false},"core":{"sourceId":"Item.WiVleJLWZ5UXryDN"},"gm-notes":{},"exportSource":{"world":"testWorld","system":"dnd5e","coreVersion":"0.7.9","systemVersion":"1.2.3"}},"img":"systems/dnd5e/icons/skills/blue_13.jpg","effects":[{"_id":"9OFOAQENA1VYGc7T","flags":{"ActiveAuras":{"isAura":true,"inactive":false,"aura":"Allies","radius":10,"hidden":false,"height":false},"dae":{"stackable":false,"specialDuration":"None","transfer":true,"macroRepeat":"none"}},"changes":[{"key":"data.bonuses.abilities.save","value":"+@abilities.cha.mod","mode":0,"priority":20},{"key":"macro.tokenMagic","value":"magic-field","mode":0,"priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"systems/dnd5e/icons/skills/blue_13.jpg","label":"Aura of Protection","origin":"Actor.Y7foSiLRLo7ysFr9.OwnedItem.MyXtCPagugDlf6TQ","tint":"","transfer":true}]}
{"_id":"JJYhn1SqoMGGKUyO","name":"Invisibility","permission":{"default":0,"devnIbfBHb74U9Zv":3},"type":"spell","data":{"description":{"value":"<p>A creature you touch becomes invisible until the spell ends. Anything the target is wearing or carrying is invisible as long as it is on the target's person. The spell ends for a target that attacks or casts a spell.</p>\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 3rd level or higher, you can target one additional creature for each slot level above 2nd.</p>\n<p>&nbsp;</p>\n<p>* This verison of inviisbility uses conditional visibility and works with midi-qol concentration</p>","chat":"","unidentified":""},"source":"PHB pg. 254","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":null,"long":null,"units":"touch"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":2,"school":"ill","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"An eyelash encased in gum arabic","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"level","formula":""},"attributes":{"spelldc":10}},"flags":{"dae":{"activeEquipped":false,"alwaysActive":false},"midi-qol":{"onUseMacroName":""},"core":{"sourceId":"Item.MtbkgRT7nopCAnpB"},"favtab":{"isFavorite":false}},"img":"systems/dnd5e/icons/spells/fog-sky-2.jpg","effects":[{"_id":"GoUSbGdrl7G0I89N","flags":{"dae":{"stackable":false,"specialDuration":["1Attack"],"macroRepeat":"none","transfer":false},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null,"alignment":"","type":"","save":"","savedc":null}},"changes":[{"key":"macro.ConditionalVisibility","value":"invisible","mode":0,"priority":20},{"key":"flags.midi-qol.advantage.attack.all","value":"1","mode":0,"priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"systems/dnd5e/icons/spells/fog-sky-2.jpg","label":"Invisible","origin":"Actor.Y7foSiLRLo7ysFr9.OwnedItem.MtbkgRT7nopCAnpB","tint":"","transfer":false}]}
{"name":"Rakish Audacity","permission":{"default":0,"devnIbfBHb74U9Zv":3},"type":"feat","data":{"description":{"value":"<p>Beginning at 1st level, you know how to strike subtly and exploit a foe's distraction. Once per turn, you can deal an extra [[/r 1d6]] damage to one creature you hit with an attack if you have advantage on the attack roll. The attack must use a finesse or a ranged weapon.</p>\n<p>You don't need advantage on the attack roll if another enemy of the target is within 5 feet of it, that enemy isn't&nbsp;<a href=\"https://5e.tools/conditionsdiseases.html#incapacitated_phb\">incapacitated</a>, and you don't have disadvantage on the attack roll.</p>\n<p>The amount of the extra damage increases as you gain levels in this class, as shown in the Sneak Attack column of the Rogue table.</p>\n<p>&nbsp;</p>\n<p>V1.0</p>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"special","cost":0,"condition":""},"duration":{"value":24,"units":"hour"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Rogue 1","recharge":{"value":null,"charged":false},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"properties":{},"attributes":{"spelldc":10}},"flags":{"dae":{"activeEquipped":false,"alwaysActive":false},"exportSource":{"world":"storm-kings-thunder","system":"dnd5e","coreVersion":"0.7.9","systemVersion":"1.2.3"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"_data":{"name":"Rakish Audacity","type":"script","scope":"global","command":"if (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {}; // weapon attack\nif (args[0].hitTargets.length < 1) return;\nMidiQOL.warn(`Checking sneak attack for ${args[0].actor.name}`);\nif (args[0].item.data.actionType === \"mwak\" && !args[0].item.data.properties?.fin) \n  return {}; // ranged or finesse\ntoken = canvas.tokens.get(args[0].tokenId);\nactor = token.actor;\nconst rogueLevels = actor.getRollData().classes.rogue?.levels;\nif (!rogueLevels) {\n  MidiQOL.warn(\"Sneak Attack Damage: Trying to do sneak attack and not a rogue\");\n  return {}; // rogue only\n}\nlet target = canvas.tokens.get(args[0].hitTargets[0]._id);\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.sneakAttackTime\");\n  if (combatTime === lastTime) {\n   MidiQOL.warn(\"Sneak Attack Damage: Already done a sneak attack this turn\");\n   return {};\n  }\n}\nlet isSneak = args[0].advantage;\nlet foundEnemy = true; // used to flag if hostile or neutrals surround target\nif (!isSneak) {\n  foundEnemy = false;\n  let nearbyEnemy = canvas.tokens.placeables.filter(t => {\n    let nearby = (t.actor &&\n         t.actor?.id !== args[0].actor._id && // not me\n         t.id !== target.id && // not the target\n         t.actor?.data.data.attributes?.hp?.value > 0 && // not incapacitated\n         t.data.disposition !== target.data.disposition && // not an ally\n         MidiQOL.getDistance(t, target, false) <= 5 // close to the target\n     );\n\n    foundEnemy = foundEnemy || (nearby && t.data.disposition === -target.data.disposition)\n    return nearby;\n  });\n  isSneak = nearbyEnemy.length>0;\n}\nif (!isSneak) {    // rakish audactity checkNearby\n    let totalNearbyToMe = MidiQOL.findNearby(null, token, 5, 9).length;\n    let distanceToTarget = MidiQOL.getDistance(target,token, false);\n    const rakish = !args[0].disadvantage && totalNearbyToMe === 1 && distanceToTarget <= 5;\n    if (rakish) {\n        foundEnemy = true; // don't display the neutrals warning\n        isSneak = true;\n    }\n}\nif (!isSneak) {\n    MidiQOL.warn(`${args[0].name} Not a sneak attack`);\n    return {};\n}\n\nlet dialog = new Promise((resolve, reject) => {\n  new Dialog({\n  // localize this text\n  title: \"Conditional Damage\",\n  content: `<p>Use Sneak attack?</p>` + (!foundEnemy?\"<p> Only Nuetral creatures nearby</p>\":\"\"),\n  buttons: {\n      one: {\n          icon: '<i class=\"fas fa-check\"></i>',\n          label: \"Confirm\",\n          callback: () => resolve(true)\n      },\n      two: {\n          icon: '<i class=\"fas fa-times\"></i>',\n          label: \"Cancel\",\n          callback: () => {resolve(false)}\n      }\n  },\n  default: \"two\"\n  }).render(true);\n});\nlet useSneak = await dialog;\nif (!useSneak) return {}\nconst diceMult = args[0].isCritical ? 2: 1;\nconst baseDice = Math.ceil(rogueLevels/2);\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.sneakAttackTime\");\n  if (combatTime !== lastTime) {\n     setProperty(token.data.flags, \"midi-qol.sneakAttackTime\", combatTime)\n  }\n}\n\n// How to check that we've already done one this turn?\nreturn {damageRoll: `${baseDice * diceMult}d6`, flavor: \"Sneak Attack\"};","author":"devnIbfBHb74U9Zv"},"data":{"name":"Rakish Audacity","type":"script","scope":"global","command":"if (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {}; // weapon attack\nif (args[0].hitTargets.length < 1) return;\nMidiQOL.warn(`Checking sneak attack for ${args[0].actor.name}`);\nif (args[0].item.data.actionType === \"mwak\" && !args[0].item.data.properties?.fin) \n  return {}; // ranged or finesse\ntoken = canvas.tokens.get(args[0].tokenId);\nactor = token.actor;\nconst rogueLevels = actor.getRollData().classes.rogue?.levels;\nif (!rogueLevels) {\n  MidiQOL.warn(\"Sneak Attack Damage: Trying to do sneak attack and not a rogue\");\n  return {}; // rogue only\n}\nlet target = canvas.tokens.get(args[0].hitTargets[0]._id);\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.sneakAttackTime\");\n  if (combatTime === lastTime) {\n   MidiQOL.warn(\"Sneak Attack Damage: Already done a sneak attack this turn\");\n   return {};\n  }\n}\nlet isSneak = args[0].advantage;\nlet foundEnemy = true; // used to flag if hostile or neutrals surround target\nif (!isSneak) {\n  foundEnemy = false;\n  let nearbyEnemy = canvas.tokens.placeables.filter(t => {\n    let nearby = (t.actor &&\n         t.actor?.id !== args[0].actor._id && // not me\n         t.id !== target.id && // not the target\n         t.actor?.data.data.attributes?.hp?.value > 0 && // not incapacitated\n         t.data.disposition !== target.data.disposition && // not an ally\n         MidiQOL.getDistance(t, target, false) <= 5 // close to the target\n     );\n\n    foundEnemy = foundEnemy || (nearby && t.data.disposition === -target.data.disposition)\n    return nearby;\n  });\n  isSneak = nearbyEnemy.length>0;\n}\nif (!isSneak) {    // rakish audactity checkNearby\n    let totalNearbyToMe = MidiQOL.findNearby(null, token, 5, 9).length;\n    let distanceToTarget = MidiQOL.getDistance(target,token, false);\n    const rakish = !args[0].disadvantage && totalNearbyToMe === 1 && distanceToTarget <= 5;\n    if (rakish) {\n        foundEnemy = true; // don't display the neutrals warning\n        isSneak = true;\n    }\n}\nif (!isSneak) {\n    MidiQOL.warn(`${args[0].name} Not a sneak attack`);\n    return {};\n}\n\nlet dialog = new Promise((resolve, reject) => {\n  new Dialog({\n  // localize this text\n  title: \"Conditional Damage\",\n  content: `<p>Use Sneak attack?</p>` + (!foundEnemy?\"<p> Only Nuetral creatures nearby</p>\":\"\"),\n  buttons: {\n      one: {\n          icon: '<i class=\"fas fa-check\"></i>',\n          label: \"Confirm\",\n          callback: () => resolve(true)\n      },\n      two: {\n          icon: '<i class=\"fas fa-times\"></i>',\n          label: \"Cancel\",\n          callback: () => {resolve(false)}\n      }\n  },\n  default: \"two\"\n  }).render(true);\n});\nlet useSneak = await dialog;\nif (!useSneak) return {}\nconst diceMult = args[0].isCritical ? 2: 1;\nconst baseDice = Math.ceil(rogueLevels/2);\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.sneakAttackTime\");\n  if (combatTime !== lastTime) {\n     setProperty(token.data.flags, \"midi-qol.sneakAttackTime\", combatTime)\n  }\n}\n\n// How to check that we've already done one this turn?\nreturn {damageRoll: `${baseDice * diceMult}d6`, flavor: \"Sneak Attack\"};","author":"devnIbfBHb74U9Zv"},"options":{},"apps":{},"compendium":null}},"core":{"sourceId":"Item.FkeL8Qyuy8EE8oGD"},"favtab":{"isFavorite":false},"betterRolls5e":{"critRange":{"value":null,"type":"String"},"critDamage":{"value":"","type":"String"},"quickDesc":{"value":true,"altValue":true,"type":"Boolean"},"quickProperties":{"value":true,"altValue":true,"type":"Boolean"},"quickOther":{"value":true,"altValue":true,"type":"Boolean","context":""},"quickFlavor":{"value":true,"altValue":true,"type":"Boolean"},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickCharges":{"type":"Boolean","value":{"use":true,"resource":true,"charge":false},"altValue":{"use":true,"resource":true,"charge":false}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"midi-qol":{"onUseMacroName":""},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","hmAnim":"a1","color":"n1","dtvar":"dt1","explosion":false,"explodeVariant":"ev1","explodeColor":"ec1","explodeRadius":"0","explodeLoop":"1","selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false}},"img":"systems/dnd5e/icons/skills/violet_27.jpg","effects":[{"_id":"Ns5pHr7gcYPTJ7HU","flags":{"dae":{"stackable":false,"transfer":true,"specialDuration":["None"],"macroRepeat":"none"},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null,"alignment":"","type":"","save":"","savedc":null,"hostile":false,"onlyOnce":false,"time":"None"}},"changes":[{"key":"flags.dnd5e.DamageBonusMacro","value":"ItemMacro.Rakish Audacity","mode":0,"priority":20},{"key":"data.attributes.init.total","value":"@abilities.cha.mod","mode":2,"priority":20},{"key":"data.attributes.init.mod","value":"@abilities.cha.mod","mode":2,"priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"systems/dnd5e/icons/skills/violet_27.jpg","label":"Rakish Audacity","origin":"Actor.DMTSWfQs8whM5FtE.OwnedItem.qgNwoSwmcF8DkhNy","tint":"","transfer":true}],"_id":"JPmBscL7iyYfytWd"}
{"_id":"RiSXyE7Pdr5Yx9Wk","name":"Adamantium Chain Mail","permission":{"default":0,"devnIbfBHb74U9Zv":3},"type":"equipment","data":{"description":{"value":"<p>Made of interlocking metal rings, chain mail includes a layer of quilted fabric worn underneath the mail to prevent chafing and to cushion the impact of blows. The suit includes gauntlets.<br /><br />Adamantine armor causes all critical hits against the target to be normal hits.</p>","chat":"","unidentified":""},"source":"PHB pg. 145","quantity":1,"weight":55,"price":75,"attuned":false,"attunement":0,"equipped":true,"rarity":"Common","identified":true,"activation":{"type":"","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":0,"per":null},"consume":{"type":"","target":null,"amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"armor":{"value":16,"type":"heavy","dex":0},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"speed":{"value":null,"conditions":""},"strength":13,"stealth":true,"proficient":true,"attributes":{"spelldc":10}},"flags":{"core":{"sourceId":"Item.KkywD1kWzzhgJ2AY"},"dae":{"activeEquipped":true},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","hmAnim":"a1","color":"n1","dtvar":"dt1","explosion":false,"explodeVariant":"ev1","explodeColor":"ec1","explodeRadius":"0","explodeLoop":"1","selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false}},"img":"systems/dnd5e/icons/items/armor/scale.png","effects":[{"_id":"zvXyvHhZtbN3tysB","flags":{"dae":{"transfer":true,"armorEffect":true,"stackable":false,"macroRepeat":"none"},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null,"hostile":false,"onlyOnce":false,"time":"None"}},"changes":[{"key":"data.attributes.ac.value","value":16,"mode":5,"priority":4},{"key":"flags.midi-qol.fail.critical.all","value":"1","mode":1,"priority":20}],"disabled":true,"duration":{"startTime":null,"seconds":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"systems/dnd5e/icons/items/armor/scale.png","label":"AC=16","origin":"Actor.wMAY1jhtgIpGk6uo.OwnedItem.KkywD1kWzzhgJ2AY","tint":"","transfer":true}]}
{"_id":"S3S7loH9jwoX4nHT","name":"Rage","permission":{"default":0,"devnIbfBHb74U9Zv":3},"type":"feat","data":{"description":{"value":"<p>In battle, you fight with primal ferocity. On your turn, you can enter a rage as a bonus action.&nbsp;While raging, you gain the following benefits if you aren't wearing heavy armor:</p>\n<ul>\n<li>\n<p>You have advantage on Strength checks and Strength saving throws.</p>\n</li>\n<li>\n<p>When you make a melee weapon attack using Strength, you gain a bonus to the damage roll that increases as you gain levels as a barbarian, as shown in the Rage Damage column of the Barbarian table.</p>\n</li>\n<li>\n<p>You have resistance to bludgeoning, piercing, and slashing damage.</p>\n</li>\n</ul>\n<p>If you are able to cast spells, you can't cast them or concentrate on them while raging.&nbsp;</p>\n<p>Your rage lasts for 1 minute. It ends early if you are knocked unconscious or if your turn ends and you haven't attacked a hostile creature since your last turn or taken damage since then. You can also end your rage on your turn as a bonus action.&nbsp;</p>\n<p>Once you have raged the number of times shown for your barbarian level in the Rages column in the table below, you must finish a long rest before you can rage again.</p>\n<p><em style=\"box-sizing: border-box; user-select: text; color: #191813; font-size: 13px;\">**Foundry note: Note the limited uses is set to the base default of 2. Please manually adjust as required.</em></p>\n<table style=\"width: 286px; height: 170px;\" border=\"1\">\n<tbody>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\"><strong>Barbarian Level</strong></td>\n<td style=\"width: 68px; height: 17px;\"><strong>Rages</strong></td>\n<td style=\"width: 96px; height: 17px;\"><strong>Rage Damage</strong></td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\">1st</td>\n<td style=\"width: 68px; height: 17px;\">2</td>\n<td style=\"width: 96px; height: 17px;\">+2</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\">2nd</td>\n<td style=\"width: 68px; height: 17px;\">2</td>\n<td style=\"width: 96px; height: 17px;\">+2</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\">3rd</td>\n<td style=\"width: 68px; height: 17px;\">3</td>\n<td style=\"width: 96px; height: 17px;\">+2</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\">4th</td>\n<td style=\"width: 68px; height: 17px;\">3</td>\n<td style=\"width: 96px; height: 17px;\">+2</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\">5th</td>\n<td style=\"width: 68px; height: 17px;\">3</td>\n<td style=\"width: 96px; height: 17px;\">+2</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\">6th</td>\n<td style=\"width: 68px; height: 17px;\">4</td>\n<td style=\"width: 96px; height: 17px;\">+2</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\">7th</td>\n<td style=\"width: 68px; height: 17px;\">4</td>\n<td style=\"width: 96px; height: 17px;\">+2</td>\n</tr>\n<tr>\n<td style=\"width: 112px;\">8th</td>\n<td style=\"width: 68px;\">4</td>\n<td style=\"width: 96px;\">+2</td>\n</tr>\n<tr>\n<td style=\"width: 112px;\">9th</td>\n<td style=\"width: 68px;\">4</td>\n<td style=\"width: 96px;\">+3</td>\n</tr>\n<tr>\n<td style=\"width: 112px;\">10th</td>\n<td style=\"width: 68px;\">4</td>\n<td style=\"width: 96px;\">+3</td>\n</tr>\n<tr>\n<td style=\"width: 112px;\">11th</td>\n<td style=\"width: 68px;\">4</td>\n<td style=\"width: 96px;\">+3</td>\n</tr>\n<tr>\n<td style=\"width: 112px;\">12th</td>\n<td style=\"width: 68px;\">5</td>\n<td style=\"width: 96px;\">+3</td>\n</tr>\n<tr>\n<td style=\"width: 112px;\">13th</td>\n<td style=\"width: 68px;\">5</td>\n<td style=\"width: 96px;\">+3</td>\n</tr>\n<tr>\n<td style=\"width: 112px;\">14th</td>\n<td style=\"width: 68px;\">5</td>\n<td style=\"width: 96px;\">+3</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\">15th</td>\n<td style=\"width: 68px; height: 17px;\">5</td>\n<td style=\"width: 96px; height: 17px;\">+3</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\">16th</td>\n<td style=\"width: 68px; height: 17px;\">5</td>\n<td style=\"width: 96px; height: 17px;\">+4</td>\n</tr>\n<tr>\n<td style=\"width: 112px;\">17th</td>\n<td style=\"width: 68px;\">6</td>\n<td style=\"width: 96px;\">+4</td>\n</tr>\n<tr>\n<td style=\"width: 112px;\">18th</td>\n<td style=\"width: 68px;\">6</td>\n<td style=\"width: 96px;\">+4</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\">19th</td>\n<td style=\"width: 68px; height: 17px;\">6</td>\n<td style=\"width: 96px; height: 17px;\">+4</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 112px; height: 17px;\">20th</td>\n<td style=\"width: 68px; height: 17px;\">Unlimited</td>\n<td style=\"width: 96px; height: 17px;\">+4</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>","chat":"","unidentified":""},"source":"PHB pg. 48","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"2","per":"lr","type":"lr"},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Barbarian 1","recharge":{"value":null,"charged":false},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"properties":{"amm":false,"fin":false,"fir":false,"foc":false,"hvy":false,"lgt":false,"lod":false,"rch":false,"rel":false,"ret":false,"spc":false,"thr":false,"two":false,"ver":false}},"flags":{"core":{"sourceId":"Item.C2lYHOGH2UpEifk7"},"exportSource":{"world":"kobold-cauldron","system":"dnd5e","coreVersion":"0.7.7","systemVersion":"1.1.1"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"_data":{"name":"Rage","type":"script","scope":"global","command":"const levels = args[0].rollData.classes?.barbarian?.levels ?? 0;\nif (!levels) return {};\nif (!args[0].item) return {};\nconst tactor = canvas.tokens.get(args[0].tokenId).actor;\nconst item = tactor.items.get(args[0].item._id);\nconst rollMod = item.abilityMod;\nif (rollMod !== \"str\") return {};\nconst bonus = levels < 9 ? \"2\" : (levels < 16 ? \"3\" : \"4\");\nreturn {damageRoll: bonus, flavor: \"Rage Damage\"};","author":"devnIbfBHb74U9Zv"},"data":{"name":"Rage","type":"script","scope":"global","command":"const levels = args[0].rollData.classes?.barbarian?.levels ?? 0;\nif (!levels) return {};\nif (!args[0].item) return {};\nconst tactor = canvas.tokens.get(args[0].tokenId).actor;\nconst item = tactor.items.get(args[0].item._id);\nconst rollMod = item.abilityMod;\nif (rollMod !== \"str\") return {};\nconst bonus = levels < 9 ? \"2\" : (levels < 16 ? \"3\" : \"4\");\nreturn {damageRoll: bonus, flavor: \"Rage Damage\"};","author":"devnIbfBHb74U9Zv"},"options":{},"apps":{},"compendium":null}},"favtab":{"isFavorite":false}},"img":"systems/dnd5e/icons/skills/red_10.jpg","effects":[{"_id":"eWhL8hUr0c2ujDUm","flags":{"dae":{"stackable":false,"specialDuration":[],"macroRepeat":"none","transfer":false},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null}},"changes":[{"key":"data.traits.dr.value","value":"slashing","mode":2,"priority":20},{"key":"data.traits.dr.value","value":"piercing","mode":2,"priority":20},{"key":"data.traits.dr.value","value":"bludgeoning","mode":2,"priority":20},{"key":"flags.midi-qol.advantage.ability.save.str","value":"1","mode":0,"priority":20},{"key":"flags.midi-qol.advantage.ability.check.str","value":"1","mode":0,"priority":20},{"key":"flags.dnd5e.DamageBonusMacro","value":"ItemMacro.Rage","mode":0,"priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"rounds":10,"turns":null,"startRound":null,"startTurn":null},"icon":"systems/dnd5e/icons/skills/red_10.jpg","label":"Rage","origin":"Actor.DMTSWfQs8whM5FtE.OwnedItem.3YrB0pvLXwJXGGt2","tint":"","transfer":false}]}
{"name":"Nature's Ward","permission":{"default":0,"devnIbfBHb74U9Zv":3},"type":"feat","data":{"description":{"value":"<p>When you reach 10th level, you can't be charmed or frightened by elementals or fey, and you are immune to poison and disease.</p>","chat":"","unidentified":""},"source":"PHB pg. 69","activation":{"type":"","cost":0,"condition":""},"duration":{"value":"","units":""},"target":{"value":"","width":null,"units":"","type":""},"range":{"value":"","long":null,"units":""},"uses":{"value":0,"max":0,"per":null,"type":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Circle of the Land 10","recharge":{"value":null,"charged":false},"attributes":{"spelldc":10}},"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"}},"img":"systems/dnd5e/icons/skills/nature_02.jpg","effects":[{"_id":"RZ2jmcmhFX8uMrPN","flags":{"dae":{"stackable":false,"specialDuration":[],"macroRepeat":"none","transfer":true},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null,"alignment":"","type":"","save":"","savedc":null}},"changes":[{"key":"data.traits.ci.value","value":"diseased","mode":2,"priority":20},{"key":"data.traits.ci.value","value":"poisoned","mode":2,"priority":20},{"key":"data.traits.di.value","value":"poison","mode":2,"priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"systems/dnd5e/icons/skills/nature_02.jpg","label":"Nature's Ward","origin":"Item.UWivBxTGcLzlnY8G","tint":"","transfer":true}],"_id":"Td3v4mqUETTolcm0"}
{"_id":"bsSjL7k9wYycpHA8","name":"Banishment","permission":{"default":0,"devnIbfBHb74U9Zv":3},"type":"spell","data":{"description":{"value":"<p>You attempt to send one creature that you can see within range to another plane of existence. The target must succeed on a Charisma saving throw or be banished.</p>\n<p>If the target is native to the plane of existence you're on, you banish the target to a harmless demiplane. While there, the target is incapacitated. The target remains there until the spell ends, at which point the target reappears in the space it left or in the nearest unoccupied space if that space is occupied.</p>\n<p>If the target is native to a different plane of existence than the one you're on, the target is banished with a faint popping noise, returning to its home plane. If the spell ends before 1 minute has passed, the target reappears in the space it left or in the nearest unoccupied space if that space is occupied. Otherwise, the target doesn't return.</p>\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 5th level or higher, you can target one additional creature for each slot level above 4th.</p>","chat":"","unidentified":""},"source":"PHB pg. 217","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":60,"long":0,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"save","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"cha","dc":16,"scaling":"spell","value":""},"level":4,"school":"abj","components":{"value":"","vocal":true,"somatic":true,"material":true,"ritual":false,"concentration":true},"materials":{"value":"An item distasteful to the target","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"none","formula":""}},"flags":{"dynamiceffects":{"equipActive":true,"alwaysActive":false,"effects":[{"modSpecKey":"macro.execute","value":"Banishment @target","mode":"+","targetSpecific":false,"id":1,"itemId":"pz0vjFCdPtQkdKKQ","active":true,"_targets":[],"label":"Macro Execute"}]},"betterRolls5e":{"critRange":{"type":"String","value":null},"critDamage":{"type":"String","value":""},"quickDesc":{"type":"Boolean","value":true,"altValue":true},"quickAttack":{"type":"Boolean","value":true,"altValue":true},"quickSave":{"type":"Boolean","value":true,"altValue":true},"quickDamage":{"type":"Array","value":[],"altValue":[],"context":[]},"quickVersatile":{"type":"Boolean","value":false,"altValue":false},"quickProperties":{"type":"Boolean","value":true,"altValue":true},"quickCharges":{"type":"Boolean","value":{"use":false,"resource":false},"altValue":{"use":false,"resource":false}},"quickTemplate":{"type":"Boolean","value":true,"altValue":true},"quickOther":{"type":"Boolean","value":true,"altValue":true,"context":""},"quickFlavor":{"type":"Boolean","value":true,"altValue":true},"quickPrompt":{"type":"Boolean","value":false,"altValue":false}},"dae":{"alwaysActive":false,"activeEquipped":true},"core":{"sourceId":"Item.BcZKJ53HIIPkOPeD"},"midi-qol":{"onUseMacroName":""},"itemacro":{"macro":{"_data":{"name":"Banishment","type":"script","scope":"global","command":"let target = canvas.tokens.get(args[1]);\n\nif (args[0] === \"on\") {\n    await target.update({hidden : true});\n    await target.actor.setFlag('world','banishment', 1);\n    ChatMessage.create({content: target.name + \"  was banished\"})\n    \n}\nif(args[0]=== \"off\") {\n target.update({hidden : false})\n target;actor.unsetFlag(args[1], 'world', 'banishment');\n ChatMessage.create({content: target.name + \"  returned\"})\n}","author":"devnIbfBHb74U9Zv"},"data":{"name":"Banishment","type":"script","scope":"global","command":"let target = canvas.tokens.get(args[1]);\n\nif (args[0] === \"on\") {\n    await target.update({hidden : true});\n    await target.actor.setFlag('world','banishment', 1);\n    ChatMessage.create({content: target.name + \"  was banished\"})\n    \n}\nif(args[0]=== \"off\") {\n target.update({hidden : false})\n target;actor.unsetFlag(args[1], 'world', 'banishment');\n ChatMessage.create({content: target.name + \"  returned\"})\n}","author":"devnIbfBHb74U9Zv"},"options":{},"apps":{},"compendium":null}},"favtab":{"isFavorite":false}},"img":"systems/dnd5e/icons/spells/link-eerie-3.jpg","effects":[{"_id":"iufZU12yslQQSskX","flags":{"dae":{"transfer":false,"stackable":false,"specialDuration":[],"macroRepeat":"none"},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null}},"changes":[{"key":"macro.itemMacro","value":"@target","mode":0,"priority":0}],"disabled":false,"duration":{"startTime":null,"seconds":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"systems/dnd5e/icons/spells/link-eerie-3.jpg","label":"Banishment","origin":"Actor.DMTSWfQs8whM5FtE.OwnedItem.cPJGG9KDdaYy3RTU","tint":"","transfer":false}]}
{"_id":"c9OSXfLd170kf3hS","name":"Fleet of Foot","permission":{"default":0,"ZDFhNjE2NDMyYTY1":3},"type":"feat","data":{"description":{"value":"<h3><p><small><em>Race: Wood Elf</em></small></p><p><p>Your base walking speed increase<span>s to 35 feet.</span></p></p>","chat":"","unidentified":""},"source":"","activation":{"type":"","cost":0,"condition":""},"duration":{"value":"","units":""},"target":{"value":"","width":null,"units":"","type":""},"range":{"value":"","long":null,"units":""},"uses":{"value":0,"max":0,"per":null,"type":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Race: Wood Elf","recharge":{"value":null,"charged":false},"featType":{"value":"","_deprecated":true},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true},"attributes":{"spelldc":10}},"flags":{"core":{"sheetClass":"dnd5e.DynamicItemSheet5e"},"dynamiceffects":{"effects":[{"modSpecKey":"data.attributes.speed.value","value":"35 ft","mode":"=","id":0,"itemId":"","active":false}],"alwaysActive":true,"equipActive":false},"dae":{"alwaysActive":true,"activeEquipped":false},"favtab":{"isFavorite":false},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"}},"img":"systems/dnd5e/icons/items/equipment/boots-plain.jpg","effects":[{"_id":"xSoG3K2m1roXbzcS","flags":{"dae":{"transfer":true,"stackable":false,"specialDuration":[],"macroRepeat":"none"},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null}},"changes":[{"key":"data.attributes.movement.walk","value":35,"mode":4,"priority":5}],"disabled":false,"duration":{"startTime":null,"seconds":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"icons/svg/mystery-man.svg","label":"Fleet of Foot","origin":"Actor.ZaVJJWXkzU603fLE.OwnedItem.TtkLUp5AChMw5QLe","tint":"","transfer":true}]}
{"name":"Fey Ancestry","permission":{"default":0,"ZDFhNjE2NDMyYTY1":3},"type":"feat","data":{"description":{"value":"<p>You have advantage on saving throws against being charmed, and magic can’t put you to sleep.</p>","chat":"","unidentified":""},"source":"PHB pg. 23, 39","activation":{"type":"","cost":0,"condition":""},"duration":{"value":"","units":""},"target":{"value":"","width":null,"units":"","type":""},"range":{"value":"","long":null,"units":""},"uses":{"value":0,"max":0,"per":null,"type":""},"consume":{"type":"","target":null,"amount":null},"ability":"","actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"requirements":"Elf, Half-Elf","recharge":{"value":null,"charged":false},"featType":{"value":"ability","_deprecated":true,"type":"String","label":"Feat Type"},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true},"attributes":{"spelldc":10}},"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"}},"img":"systems/dnd5e/icons/skills/green_13.jpg","effects":[{"_id":"xztigTbGnhDHw7of","flags":{"dae":{"stackable":false,"specialDuration":[],"macroRepeat":"none","transfer":true},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null}},"changes":[{"key":"data.traits.ci.value","value":"unconscious","mode":2,"priority":20},{"key":"data.traits.languages.value","value":"elvish","mode":2,"priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"systems/dnd5e/icons/skills/green_13.jpg","label":"Fey Ancestry","origin":"Item.NpbMHuHRuBS3ntJA","tint":"","transfer":true}],"_id":"cP5iLvmJGafqZOKB"}
{"_id":"nGR8TphfRfiVRRQZ","name":"Divine Smite","permission":{"default":0,"nJT2hkF2wTojHXg6":3},"type":"spell","data":{"description":{"value":"<p>Starting at 2nd Level, when you hit a creature with a melee weapon Attack, you can expend one spell slot to deal radiant damage to the target, in addition to the weapon’s damage.</p>\n                                                                                                                <p>The extra damage is 2d8 for a 1st-level spell slot, plus 1d8 for each Spell Level higher than 1st, to a maximum of 5d8.</p>\n                                                                                                                <p>The damage increases by 1d8 if the target is an Undead or a fiend, to a maximum of 6d8.</p>\n                                                                                                                <p>&nbsp;</p>\n                                                                                                                <p>This item uses the \"item macro\" feature where the macro that does the rolling is bound to the item. If you want to edit the macro you need to have the item macros module installed, but it is not required to just use the item.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":5,"long":5,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"con","components":{"value":"","vocal":false,"somatic":false,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"always","prepared":false},"scaling":{"mode":"none","formula":""},"spellType":{"value":"","_deprecated":true},"time":{"value":"","_deprecated":true},"damageType":{"value":"","_deprecated":true},"concentration":{"value":null,"_deprecated":true},"ritual":{"value":null,"_deprecated":true},"prepared":{"value":null,"_deprecated":true},"attributes":{"spelldc":10}},"flags":{"dynamiceffects":{"effects":[{"modSpecKey":"macro.itemMacro","value":"@target @item.level @item","mode":"+","targetSpecific":false,"id":1,"itemId":"0u1wiqpT0znKtx4g","active":true,"_targets":[]},{"modSpecKey":"macro.tokenMagic","value":"fumes","mode":"+","targetSpecific":false,"id":2,"itemId":"0u1wiqpT0znKtx4g","active":true,"_targets":[],"label":"Macro TokenMagic"}],"equipActive":false,"alwaysActive":false},"betterRolls5e":{"quickDamage":{"context":{"0":""},"value":{"0":true},"altValue":{"0":true}},"critRange":{"value":""},"critDamage":{"value":""},"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickOther":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true},"quickVersatile":{"value":false,"altValue":false}},"favtab":{"isFavourite":true,"isFavorite":true},"itemacro":{"macro":{"_data":{"name":"Divine Smite","type":"script","scope":"global","command":"let target = canvas.tokens.get(args[0].hitTargets[0]?._id);\nlet improvedDivineSmite = args[0].actor.items.find(i=> i.name ===\"Improved Divine Smite\");\nlet numDice = 1 + args[0].spellLevel;\nif (improvedDivineSmite) numDice += 1;\nlet undead = [\"undead\", \"fiend\"].some(type => (target?.actor.data.data.details.type || \"\").toLowerCase().includes(type));\nif (undead) numDice += 1;\nif (args[0].isCritical) numDice = numDice * 2;\nlet damageRoll = new Roll(`${numDice}d8`).roll();\nif (args[0].isCritical) damageRoll = MidiQOL.doCritModify(damageRoll)\nnew MidiQOL.DamageOnlyWorkflow(actor, token, damageRoll.total, \"radiant\", target ? [target] : [], damageRoll, {flavor: \"Divine Smite - Damage Roll (Radiant)\", itemCardId: args[0].itemCardId})","author":"devnIbfBHb74U9Zv"},"data":{"name":"Divine Smite","type":"script","scope":"global","command":"let target = canvas.tokens.get(args[0].hitTargets[0]?._id);\nlet improvedDivineSmite = args[0].actor.items.find(i=> i.name ===\"Improved Divine Smite\");\nlet numDice = 1 + args[0].spellLevel;\nif (improvedDivineSmite) numDice += 1;\nlet undead = [\"undead\", \"fiend\"].some(type => (target?.actor.data.data.details.type || \"\").toLowerCase().includes(type));\nif (undead) numDice += 1;\nif (args[0].isCritical) numDice = numDice * 2;\nlet damageRoll = new Roll(`${numDice}d8`).roll();\nif (args[0].isCritical) damageRoll = MidiQOL.doCritModify(damageRoll)\nnew MidiQOL.DamageOnlyWorkflow(actor, token, damageRoll.total, \"radiant\", target ? [target] : [], damageRoll, {flavor: \"Divine Smite - Damage Roll (Radiant)\", itemCardId: args[0].itemCardId})","author":"devnIbfBHb74U9Zv"},"options":{},"apps":{},"compendium":null}},"mess":{"templateTexture":""},"dae":{"alwaysActive":false,"activeEquipped":false},"midi-qol":{"onUseMacroName":"ItemMacro"},"core":{"sourceId":"Item.pJKe8oNZdJSKtbcu"}},"img":"systems/dnd5e/icons/skills/light_05.jpg","effects":[]}
{"name":"Slayer's Prey","permission":{"default":0,"devnIbfBHb74U9Zv":3},"type":"feat","data":{"description":{"value":"","chat":"","unidentified":""},"source":"","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":1,"width":null,"units":"","type":"creature"},"range":{"value":90,"long":90,"units":"ft"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"1d6","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false},"attributes":{"spelldc":10}},"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"midi-qol":{"onUseMacroName":"ItemMacro"},"itemacro":{"macro":{"_data":{"name":"Slayer's Prey","type":"script","scope":"global","command":"// Sample Slayers prey\nif (args[0].hitTargets.length === 0) return;\nif (args[0].tag === \"OnUse\") {\n    let target = args[0].hitTargets[0]._id;\n    let actorId = args[0].actor._id; // actor who cast the spell\n    actor = game.actors.get(actorId);\n    if (!actor || !target) {\n      console.error(\"Slaters's Prey: no token/target selected\");\n      return;\n    }\n    \n    // First remove the old effects from the target and ourselves \n    let item = actor.items.get(args[0].id);\n\n    // have to remove the effect from old target if we are changing targets\n    let oldTarget = getProperty(actor.data, \"flags.midi-qol.slayersPrey\");\n    DAE.deleteActiveEffect(oldTarget, item.uuid)\n\n    // now remove it from ourselves\n    let effect = actor.effects.find(e=>e.data.origin===item.uuid);\n    console.error(\"Effect is \", effect)\n    if (effect) await actor.deleteEmbeddedEntity(\"ActiveEffect\", effect.id);\n\n    const effectData = {\n      changes: [\n        {key: \"flags.midi-qol.slayersPrey\", mode: 5, value: target, priority: 20}, // who is marked\n        {key: \"flags.dnd5e.DamageBonusMacro\", mode: 5, value: `ItemMacro.${args[0].item.name}`, priority: 20}, // macro to apply the damage\n      ],\n      origin: args[0].uuid, //flag the effect as associated to the spell being cast\n      disabled: false,\n      duration: args[0].item.effects[0].duration,\n      icon: args[0].item.img,\n      label: args[0].item.name\n    }\n    await actor.createEmbeddedEntity(\"ActiveEffect\", effectData);\n} else if (args[0].tag === \"DamageBonus\") {\n    if (args[0].hitTargets.length === 0) return;\n    let targetId = args[0].hitTargets[0]._id;\n    // only weapon attacks\n    if (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {};\n    // only on the marked target\n    if (targetId !== getProperty(args[0].actor.flags, \"midi-qol.slayersPrey\")) return {};\n    let damageType = args[0].item.data.damage.parts[0][1];\n    return {damageRoll: `1d6[${damageType}]`, flavor: \"Slayers Prey Damage\"}\n}","author":"devnIbfBHb74U9Zv"},"data":{"name":"Slayer's Prey","type":"script","scope":"global","command":"// Sample Slayers prey\nif (args[0].hitTargets.length === 0) return;\nif (args[0].tag === \"OnUse\") {\n    let target = args[0].hitTargets[0]._id;\n    let actorId = args[0].actor._id; // actor who cast the spell\n    actor = game.actors.get(actorId);\n    if (!actor || !target) {\n      console.error(\"Slaters's Prey: no token/target selected\");\n      return;\n    }\n    \n    // First remove the old effects from the target and ourselves \n    let item = actor.items.get(args[0].id);\n\n    // have to remove the effect from old target if we are changing targets\n    let oldTarget = getProperty(actor.data, \"flags.midi-qol.slayersPrey\");\n    DAE.deleteActiveEffect(oldTarget, item.uuid)\n\n    // now remove it from ourselves\n    let effect = actor.effects.find(e=>e.data.origin===item.uuid);\n    console.error(\"Effect is \", effect)\n    if (effect) await actor.deleteEmbeddedEntity(\"ActiveEffect\", effect.id);\n\n    const effectData = {\n      changes: [\n        {key: \"flags.midi-qol.slayersPrey\", mode: 5, value: target, priority: 20}, // who is marked\n        {key: \"flags.dnd5e.DamageBonusMacro\", mode: 5, value: `ItemMacro.${args[0].item.name}`, priority: 20}, // macro to apply the damage\n      ],\n      origin: args[0].uuid, //flag the effect as associated to the spell being cast\n      disabled: false,\n      duration: args[0].item.effects[0].duration,\n      icon: args[0].item.img,\n      label: args[0].item.name\n    }\n    await actor.createEmbeddedEntity(\"ActiveEffect\", effectData);\n} else if (args[0].tag === \"DamageBonus\") {\n    if (args[0].hitTargets.length === 0) return;\n    let targetId = args[0].hitTargets[0]._id;\n    // only weapon attacks\n    if (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {};\n    // only on the marked target\n    if (targetId !== getProperty(args[0].actor.flags, \"midi-qol.slayersPrey\")) return {};\n    let damageType = args[0].item.data.damage.parts[0][1];\n    return {damageRoll: `1d6[${damageType}]`, flavor: \"Slayers Prey Damage\"}\n}","author":"devnIbfBHb74U9Zv"},"options":{},"apps":{},"compendium":null}},"core":{"sourceId":"Item.gDJIoRL1J8BzIr3y"},"favtab":{"isFavorite":false}},"img":"systems/dnd5e/icons/skills/arrow_03.jpg","effects":[{"_id":"4YzIMnzXG4F9fNLa","flags":{"dae":{"stackable":false,"macroRepeat":"none","transfer":false},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null,"hostile":false,"onlyOnce":false,"time":"None"}},"changes":[],"disabled":false,"duration":{"startTime":null,"seconds":3600,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"systems/dnd5e/icons/skills/arrow_03.jpg","label":"Marked","origin":"Actor.bZz0UNijKQidTQEV.OwnedItem.gDJIoRL1J8BzIr3y","tint":"","transfer":false}],"_id":"ne6mykbkOEID7Gsa"}
{"_id":"uvRQayOyn61L6vOV","name":"Auto Sneak Attack","permission":{"default":0,"devnIbfBHb74U9Zv":3},"type":"feat","data":{"description":{"value":"<p>Adding this feature to an actor will cause Sneak Attack to be auto used at the first opportunity, rather than showing a confirmation dialog.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"action","cost":0,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":null,"long":null,"units":""},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"","recharge":{"value":null,"charged":false}},"flags":{"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"favtab":{"isFavorite":false},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","hmAnim":"a1","color":"n1","dtvar":"dt1","explosion":false,"explodeVariant":"ev1","explodeColor":"ec1","explodeRadius":"0","explodeLoop":"1","selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false}},"img":"systems/dnd5e/icons/skills/violet_27.jpg","effects":[{"_id":"B9dVucVVEOX26bAy","flags":{"dae":{"stackable":false,"specialDuration":[],"macroRepeat":"none","transfer":true},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"alignment":"","type":"","aura":"None","radius":null,"save":"","savedc":null}},"changes":[{"key":"flags.dae","value":"autoSneak 1","mode":0,"priority":10}],"disabled":false,"duration":{"startTime":null,"seconds":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"systems/dnd5e/icons/skills/violet_27.jpg","label":"Atuo Sneak Attack","origin":"Item.Dnn0xuVqFSATQipk","tint":"","transfer":true}]}
{"name":"Spiritual Weapon","permission":{"default":0,"ZDFhNjE2NDMyYTY1":3},"type":"spell","data":{"description":{"value":"<p>You create a floating, spectral weapon within range that lasts for the duration or until you cast this spell again. When you cast the spell, you can make a melee spell attack against a creature within 5 feet of the weapon. On a hit, the target takes force damage equal to 1d8 + your spellcasting ability modifier.</p>\n<p>As a bonus action on your turn, you can move the weapon up to 20 feet and repeat the attack against a creature within 5 feet of it.</p>\n<p>The weapon can take whatever form you choose. Clerics of deities who are associated with a particular weapon (as St. Cuthbert is known for his mace and Thor for his hammer) make this spell&rsquo;s effect resemble that weapon.</p>\n<p><strong>Higher Levels.</strong> When you cast this spell using a spell slot of 3rd level or higher, the damage increases by 1d8 for every two slot levels above the 2nd.</p>\n<p>&nbsp;</p>\n<p>This item is almost wholly a copy of the DAE SRD Spiritiual Weapon item with a few tweaks.</p>","chat":"","unidentified":""},"source":"PHB pg. 278","activation":{"type":"bonus","cost":1,"condition":""},"duration":{"value":1,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":60,"long":0,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":"0","chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":2,"school":"evo","components":{"value":"","vocal":true,"somatic":true,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"level","formula":"1d8"},"attributes":{"spelldc":10}},"flags":{"mess":{"templateTexture":""},"dynamiceffects":{"effects":[{"modSpecKey":"macro.execute","value":"Summon @token @unique \"Spiritual Weapon\" 100 100","mode":"+","targetSpecific":false,"id":1,"itemId":"cmSUbBVgNPdFYGWB","active":true,"_targets":[]}]},"dae":{"activeEquipped":false,"alwaysActive":false},"exportSource":{"world":"dev","system":"dnd5e","coreVersion":"0.7.9","systemVersion":"1.2.3"},"itemacro":{"macro":{"_data":{"name":"Spiritual Weapon","type":"script","scope":"global","command":"//DAE Macro Execute, Effect Value = \"Macro Name\" @target @item.level\nlet target = canvas.tokens.get(args[1])\nlet data = {}\nconst lastArg = args[args.length - 1];\nconst item = lastArg.efData.flags.dae.itemData;\n\n/**\n * Create Spiritual Weapon item in inventory\n */\nif (args[0] === \"on\") {\n  let damage = Math.floor((parseInt(args[2]) / 2));\n  let image = item.img;\n\n  let range = MeasuredTemplate.create({\n    t: \"circle\",\n    user: game.user._id,\n    x: target.x + canvas.grid.size / 2,\n    y: target.y + canvas.grid.size / 2,\n    direction: 0,\n    distance: 60,\n    borderColor: \"#FF0000\",\n    flags: {\n      DAESRD: {\n        SpiritualWeaponRange: {\n          ActorId: target.actor.id\n        }\n      }\n    }\n    //fillColor: \"#FF3366\",\n  });\n  range.then(result => {\n    let templateData = {\n      t: \"rect\",\n      user: game.user._id,\n      distance: 7,\n      direction: 45,\n      x: 0,\n      y: 0,\n      flags: {\n        DAESRD: {\n          SpiritualWeapon: {\n            ActorId: target.actor.id\n          }\n        }\n      },\n      fillColor: game.user.color\n    }\n    Hooks.once(\"createMeasuredTemplate\", deleteTemplates);\n\n    let template = new game.dnd5e.canvas.AbilityTemplate(templateData)\n    template.actorSheet = target.actor.sheet;\n    template.drawPreview()\n\n    async function deleteTemplates(scene, template) {\n      let removeTemplates = canvas.templates.placeables.filter(i => i.data.flags.DAESRD?.SpiritualWeaponRange?.ActorId === target.actor.id);\n      await canvas.templates.deleteMany([removeTemplates[0].id]);\n    };\n  })\n  await target.actor.createOwnedItem(\n    {\n      \"name\": \"Summoned Spiritual Weapon\",\n      \"type\": \"weapon\",\n      \"data\": {\n        \"equipped\": true,\n        \"identified\": true,\n        \"activation\": {\n          \"type\": \"bonus\",\n        },\n        \"target\": {\n          \"value\": 1,\n          \"width\": null,\n          \"type\": \"creature\"\n        },\n        \"range\": {\n          \"value\": 5,\n          \"units\": \"ft\"\n        },\n        \"ability\": \"\",\n        \"actionType\": \"msak\",\n        \"attackBonus\": \"0\",\n        \"chatFlavor\": \"\",\n        \"critical\": null,\n        \"damage\": {\n          \"parts\": [\n            [\n              `${damage}d8+@mod`,\n              \"force\"\n            ]\n          ],\n        },\n        \"weaponType\": \"simpleM\",\n        \"proficient\": true\n      },\n      \"flags\": {\n        \"DAESRD\": {\n          \"SpiritualWeapon\":\n            target.actor.id\n        }\n      },\n      \"img\": `${image}`,\n    },\n  );\n  ui.notifications.notify(\"Weapon created in your inventory\")\n\n}\n\n// Delete Spitirual Weapon and template\nif (args[0] === \"off\") {\n  let item = target.actor.items.find(i => i.data.flags?.DAESRD?.SpiritualWeapon === target.actor.id)\n  let template = canvas.templates.placeables.filter(i => i.data.flags.DAESRD?.SpiritualWeapon?.ActorId === target.actor.id)\n  await target.actor.deleteOwnedItem(item.id);\n  await canvas.templates.deleteMany(template[0].id)\n}","author":"devnIbfBHb74U9Zv"},"data":{"name":"Spiritual Weapon","type":"script","scope":"global","command":"//DAE Macro Execute, Effect Value = \"Macro Name\" @target @item.level\nlet target = canvas.tokens.get(args[1])\nlet data = {}\nconst lastArg = args[args.length - 1];\nconst item = lastArg.efData.flags.dae.itemData;\n\n/**\n * Create Spiritual Weapon item in inventory\n */\nif (args[0] === \"on\") {\n  let damage = Math.floor((parseInt(args[2]) / 2));\n  let image = item.img;\n\n  let range = MeasuredTemplate.create({\n    t: \"circle\",\n    user: game.user._id,\n    x: target.x + canvas.grid.size / 2,\n    y: target.y + canvas.grid.size / 2,\n    direction: 0,\n    distance: 60,\n    borderColor: \"#FF0000\",\n    flags: {\n      DAESRD: {\n        SpiritualWeaponRange: {\n          ActorId: target.actor.id\n        }\n      }\n    }\n    //fillColor: \"#FF3366\",\n  });\n  range.then(result => {\n    let templateData = {\n      t: \"rect\",\n      user: game.user._id,\n      distance: 7,\n      direction: 45,\n      x: 0,\n      y: 0,\n      flags: {\n        DAESRD: {\n          SpiritualWeapon: {\n            ActorId: target.actor.id\n          }\n        }\n      },\n      fillColor: game.user.color\n    }\n    Hooks.once(\"createMeasuredTemplate\", deleteTemplates);\n\n    let template = new game.dnd5e.canvas.AbilityTemplate(templateData)\n    template.actorSheet = target.actor.sheet;\n    template.drawPreview()\n\n    async function deleteTemplates(scene, template) {\n      let removeTemplates = canvas.templates.placeables.filter(i => i.data.flags.DAESRD?.SpiritualWeaponRange?.ActorId === target.actor.id);\n      await canvas.templates.deleteMany([removeTemplates[0].id]);\n    };\n  })\n  await target.actor.createOwnedItem(\n    {\n      \"name\": \"Summoned Spiritual Weapon\",\n      \"type\": \"weapon\",\n      \"data\": {\n        \"equipped\": true,\n        \"identified\": true,\n        \"activation\": {\n          \"type\": \"bonus\",\n        },\n        \"target\": {\n          \"value\": 1,\n          \"width\": null,\n          \"type\": \"creature\"\n        },\n        \"range\": {\n          \"value\": 5,\n          \"units\": \"ft\"\n        },\n        \"ability\": \"\",\n        \"actionType\": \"msak\",\n        \"attackBonus\": \"0\",\n        \"chatFlavor\": \"\",\n        \"critical\": null,\n        \"damage\": {\n          \"parts\": [\n            [\n              `${damage}d8+@mod`,\n              \"force\"\n            ]\n          ],\n        },\n        \"weaponType\": \"simpleM\",\n        \"proficient\": true\n      },\n      \"flags\": {\n        \"DAESRD\": {\n          \"SpiritualWeapon\":\n            target.actor.id\n        }\n      },\n      \"img\": `${image}`,\n    },\n  );\n  ui.notifications.notify(\"Weapon created in your inventory\")\n\n}\n\n// Delete Spitirual Weapon and template\nif (args[0] === \"off\") {\n  let item = target.actor.items.find(i => i.data.flags?.DAESRD?.SpiritualWeapon === target.actor.id)\n  let template = canvas.templates.placeables.filter(i => i.data.flags.DAESRD?.SpiritualWeapon?.ActorId === target.actor.id)\n  await target.actor.deleteOwnedItem(item.id);\n  await canvas.templates.deleteMany(template[0].id)\n}","author":"devnIbfBHb74U9Zv"},"options":{},"apps":{},"compendium":null}},"midi-qol":{"onUseMacroName":""},"core":{"sourceId":"Item.NFs3diiOivnj4bx0"}},"img":"systems/dnd5e/icons/spells/enchant-magenta-2.jpg","effects":[{"_id":"atMn9UEVkYDOK1KK","flags":{"dae":{"stackable":false,"specialDuration":["None"],"macroRepeat":"none","transfer":false},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null}},"changes":[{"key":"macro.itemMacro","value":"@target @spellLevel","mode":0,"priority":20}],"disabled":false,"duration":{"startTime":null,"seconds":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"systems/dnd5e/icons/spells/enchant-magenta-2.jpg","label":"Spiritual Weapon","tint":"","transfer":false}],"_id":"vjBcyPFUyv61RmgT"}
{"_id":"vrxCGZS3a7tLFhso","name":"Sneak Attack","permission":{"default":0,"devnIbfBHb74U9Zv":3},"type":"feat","data":{"description":{"value":"<p>Beginning at 1st level, you know how to strike subtly and exploit a foe's distraction. Once per turn, you can deal an extra [[/r 1d6]] damage to one creature you hit with an attack if you have advantage on the attack roll. The attack must use a finesse or a ranged weapon.</p>\n<p>You don't need advantage on the attack roll if another enemy of the target is within 5 feet of it, that enemy isn't&nbsp;<a href=\"https://5e.tools/conditionsdiseases.html#incapacitated_phb\">incapacitated</a>, and you don't have disadvantage on the attack roll.</p>\n<p>The amount of the extra damage increases as you gain levels in this class, as shown in the Sneak Attack column of the Rogue table.</p>\n<p>&nbsp;</p>\n<p>V1.0</p>","chat":"","unidentified":""},"source":"PHB","activation":{"type":"special","cost":0,"condition":""},"duration":{"value":24,"units":"hour"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":null,"max":"","per":""},"consume":{"type":"","target":"","amount":null},"ability":null,"actionType":"","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"requirements":"Rogue 1","recharge":{"value":null,"charged":false},"armor":{"value":10},"hp":{"value":0,"max":0,"dt":null,"conditions":""},"properties":{},"attributes":{"spelldc":10}},"flags":{"dae":{"activeEquipped":false,"alwaysActive":false},"exportSource":{"world":"storm-kings-thunder","system":"dnd5e","coreVersion":"0.7.9","systemVersion":"1.2.3"},"magicitems":{"enabled":false,"equipped":false,"attuned":false,"charges":"0","chargeType":"c1","destroy":false,"destroyFlavorText":"reaches 0 charges: it crumbles into ashes and is destroyed.","rechargeable":false,"recharge":"0","rechargeType":"t1","rechargeUnit":"r1","sorting":"l"},"itemacro":{"macro":{"_data":{"name":"Sneak Attack","type":"script","scope":"global","command":"// v1.0\nif (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {}; // weapon attack\nif (args[0].item.data.actionType === \"mwak\" && !args[0].item.data.properties?.fin) \n  return {}; // ranged or finesse\nif (args[0].hitTargets.length < 1) return {};\ntoken = canvas.tokens.get(args[0].tokenId);\nactor = token.actor;\nif (!actor || !token || args[0].hitTargets.length < 1) return {};\nconst rogueLevels = actor.getRollData().classes.rogue?.levels;\nif (!rogueLevels) {\n  MidiQOL.warn(\"Sneak Attack Damage: Trying to do sneak attack and not a rogue\");\n  return {}; // rogue only\n}\nlet target = canvas.tokens.get(args[0].hitTargets[0]._id);\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.sneakAttackTime\");\n  if (combatTime === lastTime) {\n   MidiQOL.warn(\"Sneak Attack Damage: Already done a sneak attack this turn\");\n   return {};\n  }\n}\nlet foundEnemy = true;\nlet isSneak = args[0].advantage;\nif (!isSneak) {\n  foundEnemy = false;\n  let nearbyEnemy = canvas.tokens.placeables.filter(t => {\n    let nearby = (t.actor &&\n         t.actor?.id !== args[0].actor._id && // not me\n         t.id !== target.id && // not the target\n         t.actor?.data.data.attributes?.hp?.value > 0 && // not incapacitated\n         t.data.disposition !== target.data.disposition && // not an ally\n         MidiQOL.getDistance(t, target, false) <= 5 // close to the target\n     );\n    foundEnemy = foundEnemy || (nearby && t.data.disposition === -target.data.disposition)\n    return nearby;\n  });\n  isSneak = nearbyEnemy.length > 0;\n}\nif (!isSneak) {\n  MidiQOL.warn(\"Sneak Attack Damage: No advantage/ally next to target\");\n  return {};\n}\nlet useSneak = actor.data.flags.dae?.autoSneak;\nif (!useSneak) {\n    let dialog = new Promise((resolve, reject) => {\n      new Dialog({\n      // localize this text\n      title: \"Conditional Damage\",\n      content: `<p>Use Sneak attack?</p>`+(!foundEnemy ? \"<p>Only Nuetral creatures nearby</p>\" : \"\"),\n      buttons: {\n          one: {\n              icon: '<i class=\"fas fa-check\"></i>',\n              label: \"Confirm\",\n              callback: () => resolve(true)\n          },\n          two: {\n              icon: '<i class=\"fas fa-times\"></i>',\n              label: \"Cancel\",\n              callback: () => {resolve(false)}\n          }\n      },\n      default: \"two\"\n      }).render(true);\n    });\n    useSneak = await dialog;\n}\nif (!useSneak) return {}\nconst diceMult = args[0].isCritical ? 2: 1;\nconst baseDice = Math.ceil(rogueLevels/2);\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.sneakAttackTime\");\n  if (combatTime !== lastTime) {\n     setProperty(token.data.flags, \"midi-qol.sneakAttackTime\", combatTime)\n  }\n}\n\n// How to check that we've already done one this turn?\nreturn {damageRoll: `${baseDice * diceMult}d6`, flavor: \"Sneak Attack\"};","author":"devnIbfBHb74U9Zv"},"data":{"name":"Sneak Attack","type":"script","scope":"global","command":"// v1.0\nif (![\"mwak\",\"rwak\"].includes(args[0].item.data.actionType)) return {}; // weapon attack\nif (args[0].item.data.actionType === \"mwak\" && !args[0].item.data.properties?.fin) \n  return {}; // ranged or finesse\nif (args[0].hitTargets.length < 1) return {};\ntoken = canvas.tokens.get(args[0].tokenId);\nactor = token.actor;\nif (!actor || !token || args[0].hitTargets.length < 1) return {};\nconst rogueLevels = actor.getRollData().classes.rogue?.levels;\nif (!rogueLevels) {\n  MidiQOL.warn(\"Sneak Attack Damage: Trying to do sneak attack and not a rogue\");\n  return {}; // rogue only\n}\nlet target = canvas.tokens.get(args[0].hitTargets[0]._id);\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.sneakAttackTime\");\n  if (combatTime === lastTime) {\n   MidiQOL.warn(\"Sneak Attack Damage: Already done a sneak attack this turn\");\n   return {};\n  }\n}\nlet foundEnemy = true;\nlet isSneak = args[0].advantage;\nif (!isSneak) {\n  foundEnemy = false;\n  let nearbyEnemy = canvas.tokens.placeables.filter(t => {\n    let nearby = (t.actor &&\n         t.actor?.id !== args[0].actor._id && // not me\n         t.id !== target.id && // not the target\n         t.actor?.data.data.attributes?.hp?.value > 0 && // not incapacitated\n         t.data.disposition !== target.data.disposition && // not an ally\n         MidiQOL.getDistance(t, target, false) <= 5 // close to the target\n     );\n    foundEnemy = foundEnemy || (nearby && t.data.disposition === -target.data.disposition)\n    return nearby;\n  });\n  isSneak = nearbyEnemy.length > 0;\n}\nif (!isSneak) {\n  MidiQOL.warn(\"Sneak Attack Damage: No advantage/ally next to target\");\n  return {};\n}\nlet useSneak = actor.data.flags.dae?.autoSneak;\nif (!useSneak) {\n    let dialog = new Promise((resolve, reject) => {\n      new Dialog({\n      // localize this text\n      title: \"Conditional Damage\",\n      content: `<p>Use Sneak attack?</p>`+(!foundEnemy ? \"<p>Only Nuetral creatures nearby</p>\" : \"\"),\n      buttons: {\n          one: {\n              icon: '<i class=\"fas fa-check\"></i>',\n              label: \"Confirm\",\n              callback: () => resolve(true)\n          },\n          two: {\n              icon: '<i class=\"fas fa-times\"></i>',\n              label: \"Cancel\",\n              callback: () => {resolve(false)}\n          }\n      },\n      default: \"two\"\n      }).render(true);\n    });\n    useSneak = await dialog;\n}\nif (!useSneak) return {}\nconst diceMult = args[0].isCritical ? 2: 1;\nconst baseDice = Math.ceil(rogueLevels/2);\nif (game.combat) {\n  let combatTime = game.combat.round + game.combat.turn /100;\n  let lastTime = getProperty(token.data.flags, \"midi-qol.sneakAttackTime\");\n  if (combatTime !== lastTime) {\n     setProperty(token.data.flags, \"midi-qol.sneakAttackTime\", combatTime)\n  }\n}\n\n// How to check that we've already done one this turn?\nreturn {damageRoll: `${baseDice * diceMult}d6`, flavor: \"Sneak Attack\"};","author":"devnIbfBHb74U9Zv"},"options":{},"apps":{},"compendium":null}},"betterRolls5e":{"critRange":{"value":null},"critDamage":{"value":""},"quickDesc":{"value":true,"altValue":true},"quickProperties":{"value":true,"altValue":true},"quickOther":{"value":true,"altValue":true},"quickFlavor":{"value":true,"altValue":true}},"core":{"sourceId":"Item.bhuz5hzr0YsHJd1N"},"favtab":{"isFavorite":false},"autoanimations":{"killAnim":false,"override":false,"animType":"t1","animName":"","hmAnim":"a1","color":"n1","dtvar":"dt1","explosion":false,"explodeVariant":"ev1","explodeColor":"ec1","explodeRadius":"0","explodeLoop":"1","selfRadius":"5","animTint":"#ffffff","auraOpacity":0.75,"ctaOption":false}},"img":"systems/dnd5e/icons/skills/violet_27.jpg","effects":[{"_id":"Ns5pHr7gcYPTJ7HU","flags":{"dae":{"stackable":false,"transfer":true,"specialDuration":["None"],"macroRepeat":"none"},"ActiveAuras":{"isAura":false,"ignoreSelf":false,"hidden":false,"height":false,"aura":"None","radius":null,"alignment":"","type":"","save":"","savedc":null}},"changes":[{"key":"flags.dnd5e.DamageBonusMacro","value":"ItemMacro.Sneak Attack","mode":0,"priority":30}],"disabled":false,"duration":{"startTime":null,"seconds":null,"rounds":null,"turns":null,"startRound":null,"startTurn":null},"icon":"systems/dnd5e/icons/skills/violet_27.jpg","label":"Sneak Attack","origin":"Actor.DMTSWfQs8whM5FtE.OwnedItem.Phll73Y1o1t6Park","tint":"","transfer":true}]}
