const _0x3a3d=['render','startingEquipment','606433ixIKzx','pCacheAndGet','_pHandleSaveClick_background','_foundryFormDataCharacteristics','skillProficiencies','MODULE_LOCATION','slice','_pLoadVetoolsSource','_compEquipment','ABIL_ABVS','_pLoad','_pRender_renderTabBackground','map','addClass','_pRender_renderTabClass','compClass','Importing\x20feats...','_pRender_renderTabFeats','_pRender_renderTabAbilities','consumeAmount','pLoad','abilityAbv','URL_TO_HASH_BUILDER','featureSourceTracker_','pRenderShop','_compRace','spellcastingAbility','isExpanded','_pPostLoad','pSetSpellItemIsPrepared','preparationMode','Imported\x20spells.','data','prop','_hasPrevTab','cbPostSave','feat_getActiveFeatIxProps','Importing\x20background...','classFeature','112597TbhAnR','feat_ixMaxAbility','compsSpellAdditionalSpellSubclass','_tabs','Imported\x20equipment.','/template/Charactermancer.handlebars','_foundrySelectedLevelIndices','Imported\x20background.','_pHandleSaveClick_','_pHandleSaveClick_pDoImportAdditionalSpells','_actor','proficienciesGained','_foundryStartingProficiencyMode','compsSpellSpells','_pHandleSaveClick_class','mergeMap','consumeType','_foundryIsSkipImportCharacteristics','getRace_','DATA_URL_FEATS','compFeat','size','startingProficiencies','background','btn-sm','length','createEmbeddedEntity','compRaceWeaponProficiencies','pGetWithCache','_foundryIsSkipCustomizeSkills','delete','$wrpTab','Build\x20cancelled.','Importing\x20equipment...','_foundryIsSkipCustomizeLanguagesTools','Background','class_getTotalLevels','compStatgen','toolProficiencies','_conInitialWithModifiers','Set\x20ability\x20scores.','$btnTab','copy','pInit','pPostLoadBrew','mutateForFilters','_pHandleSaveClick_feats','_pRender_renderTabRace','_cbPostSave','feats','_data','compsFeatWeaponProficiencies','Importing\x20spells...','compBackgroundLanguageProficiencies','_foundryIsSkipImportPreparedSpells','then','decorate','_getTab','mode','inherit','all','cls','pageFilter','_conFinalWithModifiers','Charactermancer','class_ixMax','Build\x20Complete','Importing\x20race...','bind','pGetFormData','_postProcessAllSelectedData','compBackgroundFeatures','compSpellAdditionalSpellRace','pGetSpellItem','keys','pRender','spell','additionalSpells','abilityChosen','_render_pRenderTabEquipmentShop','feat_ixMaxRace','get','1sVEmhp','DataSourceUrl','getValues','find','last','STR_SEE_CONSOLE','languageProficiencies','featMetas','<button\x20class=\x22btn\x20btn-5et\x20btn-default\x20w-100p\x22>Next</button>','max','_comp','compSpell','_pHandleSaveClick_spells','_featureSourceTracker','_doSwitchToNextTab','armorProficiencies','resist','_pGetSources','_cons_initTabs','isStreamerMode','items','_isLevelUp','subclasses','Select\x20Sources','getSubclass_','Custom\x20URL','_BREW_DIRS','subclassFeature','compsFeatToolProficiencies','progressWidget','OwnedItem','optionalfeature','subclass','conditionImmune','isCustomizeLanguagesTools','skills','state','_foundryChosenAbilityScoreIncrease','Starting\x20Equipment','ability','class','name','empty','equipmentItemEntries','_hasNextTab','compsClassFeatureOptionsSelect','compBackground','compsFeatLanguageProficiencies','doApplyProficiencyFormDataToActorUpdate','notifications','source','AdditionalSaveState','_render_loading','click','update','filterValuesSpellsCache','catch','MODE_MULTICLASS','currency','_foundryConFinal','<button\x20class=\x22btn\x20btn-5et\x20btn-default\x20w-100p\x22>Previous</button>','compRace','actor','subrace','pWaitForUserInput','background_ixBackground','pHandleButtonClick','custom','SKILL_TO_ATB_ABV','modalFilterClasses','hover','Build\x20failed!\x20','disabled','Feats','Equipment\x20Shop','feat','compsClassSkillProficiencies','setProgress','ActorCharactermancerSourceSelector_filter','368893esWzsy','compRaceSize','multiclassing','SRD','consumeTarget','567486wpctzq','_foundryHpIncreaseMode','namespace','pGetAllSpells','_setActiveTab','SOURCE_TYP_CUSTOM','_pHandleSaveClick_abilities','Importing\x20classes\x20and\x20subclasses...','compsClassHpIncreaseMode','compBackgroundSkillProficiencies','Building...','uses','DATA_URL_OPTIONALFEATURES','compRaceSkillProficiencies','addFauxOptionalFeatureFeatures','_pRender','forEach','_pHandleSaveClick_race','immune','<hr\x20class=\x22hr-1\x20w-100\x22>','getMaxWindowHeight','filterBox','<button\x20class=\x22btn\x20btn-5et\x20btn-primary\x22>Finalize</button>','compBackgroundLanguageToolProficiencies','SOURCE_TYP_OFFICIAL_ALL','ascSort','Abilities','split','485029zXSqkW','features','_pHandleSaveClick','compBackgroundCharacteristics','compBackgroundToolProficiencies','PG_SPELLS','122166AjiVve','pImportClass','filter','compsFeatSkillProficiencies','_compFeat','weaponProficiencies','Component','compRaceLanguageProficiencies','getTotals','Setting\x20ability\x20scores...','appendTo','_doSwitchToPrevTab','feat_ixMaxCustom','flat','getFormDataAsi','compRaceDamageVulnerability','_foundryAllFeatures','MODE_PRIMARY','_pHandleSaveClick_postSave','compRaceArmorProficiencies','entries','Spells','SOURCE_TYP_BREW','pImportEquipmentItemEntries','445991WGteHK','push','spells','compAbility','_compAbility','vulnerable','_pHandleSaveClick_pDoApplyOtherProficiencies','_render_pRenderTabEquipmentStarting','race','_foundryConInitial','compsClassLevelSelect','activateListeners','compEquipmentStartingDefault','_pHandleSaveClick_pDoApplySkills','Running\x20post-build\x20step...','set','class_getProps','isCancelled','feat_getProps','_pRender_pRenderTabSpells','_compBackground','pImportEntry','getClass_','5etools','Class','getCurrentAbilityScores','has','_compClass','compRaceToolProficiencies','isPrimary','_compSpell','pGetRaces','pGetUserBoolean','item','_foundryFormDataFeatures','filterBoxSpells'];const _0x2074=function(_0x42d2f1,_0x3d9a04){_0x42d2f1=_0x42d2f1-0x16b;let _0x3a3d0c=_0x3a3d[_0x42d2f1];return _0x3a3d0c;};const _0x2775b0=_0x2074;(function(_0x23d106,_0x499a76){const _0x2bcd1f=_0x2074;while(!![]){try{const _0x1f6988=parseInt(_0x2bcd1f(0x16f))+parseInt(_0x2bcd1f(0x297))+-parseInt(_0x2bcd1f(0x1a9))+-parseInt(_0x2bcd1f(0x191))+-parseInt(_0x2bcd1f(0x1cf))*parseInt(_0x2bcd1f(0x248))+parseInt(_0x2bcd1f(0x18b))+parseInt(_0x2bcd1f(0x1f6));if(_0x1f6988===_0x499a76)break;else _0x23d106['push'](_0x23d106['shift']());}catch(_0x32a6d6){_0x23d106['push'](_0x23d106['shift']());}}}(_0x3a3d,0x57bf7));import{SharedConsts}from'../shared/SharedConsts.js';import{Util}from'./Util.js';import{Config}from'./Config.js';import{Vetools}from'./Vetools.js';import{AppSourceSelectorMulti}from'./AppSourceSelectorMulti.js';import{ImportListRace}from'./ImportListRace.js';import{Charactermancer_Class_FeatureOptionsSelect,Charactermancer_Class_ProficiencyImportModeSelect,Charactermancer_Class_Util,PageFilterClassesFoundry}from'./UtilCharactermancerClass.js';import{ImportListClass}from'./ImportListClass.js';import{Charactermancer_StartingEquipment}from'./UtilCharactermancerEquipment.js';import{ImportListBackground}from'./ImportListBackground.js';import{DataConverterSpell}from'./DataConverterSpell.js';import{ImportListFeat}from'./ImportListFeat.js';import{UtilApplications}from'./UtilApplications.js';import{ActorCharactermancerRace}from'./ActorCharactermancerRace.js';import{ActorCharactermancerBaseComponent}from'./ActorCharactermancerUtil.js';import{ActorCharactermancerEquipment}from'./ActorCharactermancerEquipment.js';import{ActorCharactermancerBackground}from'./ActorCharactermancerBackground.js';import{ActorCharactermancerClass}from'./ActorCharactermancerClass.js';import{ActorCharactermancerFeat}from'./ActorCharactermancerFeat.js';import{ActorCharactermancerSpell}from'./ActorCharactermancerSpell.js';import{ActorCharactermancerAbility}from'./ActorCharactermancerAbility.js';import{UtilDataSource}from'./UtilDataSource.js';import{Charactermancer_FeatureSourceTracker,Charactermancer_Util}from'./UtilCharactermancer.js';import{Charactermancer_Race_Util}from'./UtilCharactermancerRace.js';import{DataConverter}from'./DataConverter.js';import{UtilActors}from'./UtilActors.js';class ActorCharactermancerSourceSelector extends AppSourceSelectorMulti{static async[_0x2775b0(0x28a)](_0xe8ce67,_0x41623f,_0x23dde9,_0x4a883a){const _0x2b9fd0=_0x2775b0,_0x14c11b=await this[_0x2b9fd0(0x259)](),_0x20f24c=new ActorCharactermancerSourceSelector({'title':_0x2b9fd0(0x25f),'filterNamespace':_0x2b9fd0(0x296),'savedSelectionKey':'ActorCharactermancerSourceSelector_savedSelection','sourcesToDisplay':_0x14c11b});_0x20f24c[_0x2b9fd0(0x1cd)](!![]);const _0x3cf012=await _0x20f24c[_0x2b9fd0(0x288)]();if(_0x3cf012==null)return;this[_0x2b9fd0(0x23c)](_0x3cf012);const _0x1bbfb4=new ActorCharactermancer({'actor':_0x41623f[_0x2b9fd0(0x286)],'data':_0x3cf012});_0x1bbfb4[_0x2b9fd0(0x1cd)](!![]);}static[_0x2775b0(0x23c)](_0x589a59){const _0x1a6baa=_0x2775b0;_0x589a59[_0x1a6baa(0x17f)]((_0x470904,_0x12d0f4)=>{const _0x490bff=_0x1a6baa;if(!_0x470904[_0x490bff(0x270)]||!_0x470904[_0x490bff(0x270)][_0x490bff(0x20f)])return;const _0x39cad7=_0x589a59[_0x490bff(0x1d5)](0x0,_0x12d0f4)[_0x490bff(0x193)](_0x17d591=>_0x17d591[_0x490bff(0x270)]);if(!_0x39cad7[_0x490bff(0x20f)])return;_0x470904['class']=_0x470904[_0x490bff(0x270)][_0x490bff(0x193)](_0x112375=>{const _0x43ef9e=_0x490bff,_0x2204c3=_0x39cad7[_0x43ef9e(0x24b)](_0x3b9bc9=>_0x3b9bc9[_0x43ef9e(0x270)]&&_0x3b9bc9[_0x43ef9e(0x270)]['find'](_0x12d217=>_0x112375['name']===_0x12d217[_0x43ef9e(0x271)]&&_0x112375[_0x43ef9e(0x27a)]===_0x12d217[_0x43ef9e(0x27a)]));if(!_0x2204c3)return!![];const _0x58adb9=_0x2204c3[_0x43ef9e(0x270)][_0x43ef9e(0x24b)](_0x57fc9d=>_0x112375[_0x43ef9e(0x271)]===_0x57fc9d['name']&&_0x112375[_0x43ef9e(0x27a)]===_0x57fc9d[_0x43ef9e(0x27a)]);return _0x58adb9[_0x43ef9e(0x25e)]=[..._0x58adb9[_0x43ef9e(0x25e)]||[],..._0x112375[_0x43ef9e(0x25e)]||[]],![];});});const _0x372675=_0x589a59['map'](_0x1e6603=>_0x1e6603[_0x1a6baa(0x270)]||[])['flat'](),_0x39c461=_0x589a59[_0x1a6baa(0x1db)](_0x5ebe9c=>_0x5ebe9c['optionalfeature']||[])[_0x1a6baa(0x19e)]();Charactermancer_Class_Util[_0x1a6baa(0x17d)](_0x372675,_0x39c461);}static async[_0x2775b0(0x259)](){const _0x9b9d76=_0x2775b0;return[new UtilDataSource['DataSourceSpecial'](Config[_0x9b9d76(0x247)]('ui',_0x9b9d76(0x25b))?_0x9b9d76(0x16d):'5etools',this[_0x9b9d76(0x1d6)][_0x9b9d76(0x23a)](this),{'cacheKey':_0x9b9d76(0x1c0),'filterTypes':[UtilDataSource[_0x9b9d76(0x187)]],'isDefault':!![],'pPostLoad':this['_pPostLoad'][_0x9b9d76(0x23a)](this,!![])}),new UtilDataSource[(_0x9b9d76(0x249))](_0x9b9d76(0x261),'',{'pPostLoad':this['_pPostLoad'][_0x9b9d76(0x23a)](this,![]),'filterTypes':[UtilDataSource[_0x9b9d76(0x174)]]}),new UtilDataSource['DataSourceFile']('Upload\x20File',{'pPostLoad':this[_0x9b9d76(0x1eb)][_0x9b9d76(0x23a)](this,![]),'filterTypes':[UtilDataSource[_0x9b9d76(0x174)]]}),...(await Vetools['pGetHomebrewSources'](...ActorCharactermancerSourceSelector[_0x9b9d76(0x262)]))['map'](({name:_0x2d0014,url:_0x1e920e})=>new UtilDataSource[(_0x9b9d76(0x249))](_0x2d0014,_0x1e920e,{'pPostLoad':this[_0x9b9d76(0x1eb)][_0x9b9d76(0x23a)](this,![]),'filterTypes':[UtilDataSource[_0x9b9d76(0x1a7)]]}))];}static async[_0x2775b0(0x1d6)](){const _0x16de75=_0x2775b0,_0xcb78f5={},[_0x38a24b,_0xbcc28f,_0x41b9d3,_0x428663,_0x30dfaa,_0x3252f6,_0x31abd6]=await Promise[_0x16de75(0x232)]([Vetools['pGetClasses'](),Vetools[_0x16de75(0x1c8)](),Vetools[_0x16de75(0x212)](Vetools['DATA_URL_BACKGROUNDS']),Vetools['pGetItems'](),Vetools[_0x16de75(0x172)](),Vetools['pGetWithCache'](Vetools[_0x16de75(0x209)]),Vetools[_0x16de75(0x212)](Vetools[_0x16de75(0x17b)])]);return Object['assign'](_0xcb78f5,_0x38a24b),_0xcb78f5['race']=_0xbcc28f['race'],_0xcb78f5[_0x16de75(0x20d)]=_0x41b9d3[_0x16de75(0x20d)],_0xcb78f5[_0x16de75(0x1ca)]=_0x428663[_0x16de75(0x1ca)],_0xcb78f5[_0x16de75(0x242)]=_0x30dfaa[_0x16de75(0x242)],_0xcb78f5[_0x16de75(0x293)]=_0x3252f6[_0x16de75(0x293)],_0xcb78f5['optionalfeature']=_0x31abd6[_0x16de75(0x267)],_0xcb78f5;}static async[_0x2775b0(0x1eb)](_0x322895,_0x567a3e){const _0x1e05fd=_0x2775b0;return _0x567a3e={..._0x567a3e},!_0x322895&&(_0x567a3e[_0x1e05fd(0x1b1)]||_0x567a3e[_0x1e05fd(0x287)])&&(_0x567a3e[_0x1e05fd(0x1b1)]=MiscUtil[_0x1e05fd(0x220)](_0x567a3e['race']),_0x567a3e[_0x1e05fd(0x1b1)]=await Charactermancer_Race_Util[_0x1e05fd(0x222)](_0x567a3e)),_0x567a3e[_0x1e05fd(0x270)]&&(_0x567a3e[_0x1e05fd(0x270)]=await PageFilterClassesFoundry['pPostLoad']({'class':_0x567a3e[_0x1e05fd(0x270)],'subclass':_0x567a3e[_0x1e05fd(0x268)],'classFeature':_0x567a3e[_0x1e05fd(0x1f5)],'subclassFeature':_0x567a3e[_0x1e05fd(0x263)]}),_0x567a3e['class']['forEach'](_0x3e88bc=>PageFilterClasses[_0x1e05fd(0x223)](_0x3e88bc))),_0x567a3e;}}ActorCharactermancerSourceSelector[_0x2775b0(0x262)]=['class',_0x2775b0(0x268),'race',_0x2775b0(0x287),_0x2775b0(0x1ca),'background',_0x2775b0(0x1ca),_0x2775b0(0x242),_0x2775b0(0x293),_0x2775b0(0x267)];class ActorCharactermancer extends Application{constructor(_0x673516){const _0x47381b=_0x2775b0;_0x673516=_0x673516||{},super({'title':_0x47381b(0x236),'template':SharedConsts[_0x47381b(0x1d4)]+_0x47381b(0x1fb),'width':Util['getMaxWindowWidth'](0x4b0),'height':Util[_0x47381b(0x183)](),'resizable':!![]});const _0x1374d1={};_0x673516['data'][_0x47381b(0x17f)](_0x4008b3=>{const _0xf57280=_0x47381b;Object[_0xf57280(0x1a5)](_0x4008b3)[_0xf57280(0x17f)](([_0x5e1325,_0x205a52])=>{const _0x23a60c=_0xf57280;if(!_0x205a52||!(_0x205a52 instanceof Array))return;if(_0x1374d1[_0x5e1325])_0x1374d1[_0x5e1325]=[..._0x1374d1[_0x5e1325],...MiscUtil['copy'](_0x205a52)];else _0x1374d1[_0x5e1325]=MiscUtil[_0x23a60c(0x220)](_0x205a52);});}),this[_0x47381b(0x252)]=new ActorCharactermancer[(_0x47381b(0x197))]({'actor':_0x673516[_0x47381b(0x286)],'data':_0x1374d1,'cbPostSave':this['close'][_0x47381b(0x23a)](this)});}[_0x2775b0(0x1b4)](_0x1f5753){const _0x260180=_0x2775b0;this[_0x260180(0x252)][_0x260180(0x1cd)](_0x1f5753);}}ActorCharactermancer['Component']=class extends ActorCharactermancerBaseComponent{constructor(_0x1b9dc9){const _0x4cf2c8=_0x2775b0;_0x1b9dc9=_0x1b9dc9||{},super(),TabUiUtil[_0x4cf2c8(0x22e)](this),this['_actor']=_0x1b9dc9['actor'],this[_0x4cf2c8(0x228)]=_0x1b9dc9[_0x4cf2c8(0x1ef)],this[_0x4cf2c8(0x226)]=_0x1b9dc9[_0x4cf2c8(0x1f2)],this[_0x4cf2c8(0x255)]=new Charactermancer_FeatureSourceTracker(),this[_0x4cf2c8(0x25d)]=Charactermancer_Util['getCurrentLevel'](this['_actor'])>0x0,this[_0x4cf2c8(0x1f9)]=null;const {tabClass:_0x2cf280,tabRace:_0x2fe260,tabAbilities:_0x4ec8c0,tabBackground:_0x566f75,tabEquipment:_0x4d1b15,tabShop:_0x3249bb,tabSpells:_0x6faa1d,tabFeats:_0x3e4787}=this[_0x4cf2c8(0x25a)]();this['_compClass']=new ActorCharactermancerClass({'actor':_0x1b9dc9['actor'],'data':_0x1b9dc9[_0x4cf2c8(0x1ef)],'parent':this,'tabClass':_0x2cf280}),this[_0x4cf2c8(0x1e8)]=new ActorCharactermancerRace({'actor':_0x1b9dc9[_0x4cf2c8(0x286)],'data':_0x1b9dc9['data'],'parent':this,'tabRace':_0x2fe260}),this[_0x4cf2c8(0x1ad)]=new ActorCharactermancerAbility({'actor':_0x1b9dc9['actor'],'data':_0x1b9dc9[_0x4cf2c8(0x1ef)],'parent':this,'tabAbilities':_0x4ec8c0}),this[_0x4cf2c8(0x1bd)]=new ActorCharactermancerBackground({'actor':_0x1b9dc9[_0x4cf2c8(0x286)],'data':_0x1b9dc9[_0x4cf2c8(0x1ef)],'parent':this,'tabBackground':_0x566f75}),this[_0x4cf2c8(0x1d7)]=new ActorCharactermancerEquipment({'actor':_0x1b9dc9[_0x4cf2c8(0x286)],'data':_0x1b9dc9['data'],'parent':this,'tabEquipment':_0x4d1b15,'tabShop':_0x3249bb}),this['_compSpell']=new ActorCharactermancerSpell({'actor':_0x1b9dc9[_0x4cf2c8(0x286)],'data':_0x1b9dc9[_0x4cf2c8(0x1ef)],'parent':this,'tabSpells':_0x6faa1d}),this['_compFeat']=new ActorCharactermancerFeat({'actor':_0x1b9dc9[_0x4cf2c8(0x286)],'data':_0x1b9dc9[_0x4cf2c8(0x1ef)],'parent':this,'tabFeats':_0x3e4787}),this[_0x4cf2c8(0x21d)]=null,this[_0x4cf2c8(0x235)]=null;}[_0x2775b0(0x25a)](){const _0x4bd0b0=_0x2775b0;this[_0x4bd0b0(0x25d)]?this[_0x4bd0b0(0x1f9)]=[_0x4bd0b0(0x1c1),_0x4bd0b0(0x189),_0x4bd0b0(0x1a6),_0x4bd0b0(0x291)][_0x4bd0b0(0x1db)]((_0x3df591,_0x31f219)=>this['_getTab'](_0x31f219,_0x3df591,'state',{'hasBorder':!![]})):this['_tabs']=['Class','Race',_0x4bd0b0(0x189),_0x4bd0b0(0x219),_0x4bd0b0(0x26e),_0x4bd0b0(0x292),_0x4bd0b0(0x1a6),_0x4bd0b0(0x291)]['map']((_0x1e1597,_0x18f7bc)=>this[_0x4bd0b0(0x22f)](_0x18f7bc,_0x1e1597,_0x4bd0b0(0x26c),{'hasBorder':!![]}));if(this['_isLevelUp']){const [_0x262255,_0x272434,_0x17b71c,_0x1ec603]=this[_0x4bd0b0(0x1f9)];return{'tabClass':_0x262255,'tabAbilities':_0x272434,'tabSpells':_0x17b71c,'tabFeats':_0x1ec603};}else{const [_0x89a7f4,_0x1e044d,_0x1ee20f,_0x26c9a5,_0x1b1154,_0x2faa42,_0x301b15,_0x407c71]=this[_0x4bd0b0(0x1f9)];return{'tabClass':_0x89a7f4,'tabRace':_0x1e044d,'tabAbilities':_0x1ee20f,'tabBackground':_0x26c9a5,'tabEquipment':_0x1b1154,'tabShop':_0x2faa42,'tabSpells':_0x301b15,'tabFeats':_0x407c71};}}get[_0x2775b0(0x1e6)](){return this['_featureSourceTracker'];}get[_0x2775b0(0x1de)](){return this['_compClass'];}get[_0x2775b0(0x285)](){const _0x330a77=_0x2775b0;return this[_0x330a77(0x1e8)];}get[_0x2775b0(0x276)](){const _0xee059d=_0x2775b0;return this[_0xee059d(0x1bd)];}get['compEquipment'](){const _0x5e1d46=_0x2775b0;return this[_0x5e1d46(0x1d7)];}get[_0x2775b0(0x253)](){const _0x15c856=_0x2775b0;return this[_0x15c856(0x1c7)];}get[_0x2775b0(0x20a)](){const _0x314013=_0x2775b0;return this[_0x314013(0x195)];}get[_0x2775b0(0x1ac)](){const _0x12a0cc=_0x2775b0;return this[_0x12a0cc(0x1ad)];}set['activeTab_'](_0x5c9b70){const _0x398ca3=_0x2775b0;this[_0x398ca3(0x173)](_0x5c9b70);}[_0x2775b0(0x1cd)](_0x105de8){const _0x38b966=_0x2775b0;this[_0x38b966(0x27c)](_0x105de8),this[_0x38b966(0x1d9)]()[_0x38b966(0x22d)](()=>this[_0x38b966(0x17e)](_0x105de8))[_0x38b966(0x280)](_0x5daf88=>{const _0x57627d=_0x38b966;ui[_0x57627d(0x279)]['error']('Failed\x20to\x20load!\x20'+VeCt[_0x57627d(0x24d)]);throw _0x5daf88;});}['_render_loading'](_0x1ad4ec){_0x1ad4ec['append']('<div\x20class=\x22flex-vh-center\x20w-100\x20h-100\x22><i>Loading...</i></div>');}async[_0x2775b0(0x1d9)](){const _0x34b425=_0x2775b0;await this['_compRace'][_0x34b425(0x1e3)](),await this[_0x34b425(0x1bd)][_0x34b425(0x1e3)](),await this[_0x34b425(0x1c4)][_0x34b425(0x1e3)](),await this['_compSpell'][_0x34b425(0x1e3)](),await this[_0x34b425(0x195)][_0x34b425(0x1e3)]();}async[_0x2775b0(0x17e)](_0x1ebdd4){const _0x459983=_0x2775b0;_0x1ebdd4[_0x459983(0x272)]();const _0x2cf093=$(_0x459983(0x284))['click'](()=>this[_0x459983(0x19c)](_0x459983(0x26c))),_0x1e72e7=$(_0x459983(0x250))[_0x459983(0x27d)](()=>this[_0x459983(0x256)](_0x459983(0x26c))),_0x4f89c0=()=>{const _0x2bd804=_0x459983;_0x2cf093[_0x2bd804(0x1f0)]('disabled',!this[_0x2bd804(0x1f1)](_0x2bd804(0x26c))),_0x1e72e7[_0x2bd804(0x1f0)]('disabled',!this[_0x2bd804(0x274)](_0x2bd804(0x26c)));};this['_addHookActiveTab']('state',_0x4f89c0),_0x4f89c0();const _0x58feee=$(_0x459983(0x185))[_0x459983(0x27d)](()=>{const _0x28b140=_0x459983;_0x58feee['prop'](_0x28b140(0x290),!![]);try{this[_0x28b140(0x18d)]();}finally{_0x58feee[_0x28b140(0x1f0)](_0x28b140(0x290),![]);}});$$`<div class="w-100 no-shrink ui-tab__wrp-tab-heads--border">
			${this[_0x459983(0x1f9)][_0x459983(0x1db)](_0x3aec52=>_0x3aec52[_0x459983(0x21f)][_0x459983(0x1dc)](_0x459983(0x20e)))}
		</div>`['appendTo'](_0x1ebdd4),this['_tabs'][_0x459983(0x17f)](_0x138809=>_0x138809[_0x459983(0x215)][_0x459983(0x19b)](_0x1ebdd4)),_0x1ebdd4['append'](_0x459983(0x182)),$$`<div class="w-100 no-shrink flex-h-right pr-3">
			<div class="flex-v-center btn-group">${_0x2cf093}${_0x1e72e7}</div>
			<div class="vr-2"></div>
			${_0x58feee}
		</div>`['appendTo'](_0x1ebdd4),this[_0x459983(0x1dd)](),this[_0x459983(0x225)](),this[_0x459983(0x1e1)](),this['_pRender_renderTabBackground'](),await this['_render_pRenderTabEquipmentStarting'](),await this['_render_pRenderTabEquipmentShop'](),await this[_0x459983(0x1bc)](),this[_0x459983(0x1e0)]();}[_0x2775b0(0x1dd)](){const _0x460fc0=_0x2775b0;this[_0x460fc0(0x1c4)][_0x460fc0(0x1cd)]();}['_pRender_renderTabRace'](){const _0x31027e=_0x2775b0;this[_0x31027e(0x1e8)][_0x31027e(0x1cd)]();}[_0x2775b0(0x1e1)](){const _0x55c488=_0x2775b0;this[_0x55c488(0x1ad)][_0x55c488(0x1cd)]();}[_0x2775b0(0x1da)](){const _0x5a37d0=_0x2775b0;this[_0x5a37d0(0x1bd)]['render']();}async[_0x2775b0(0x1b0)](){const _0x2bdded=_0x2775b0;await this[_0x2bdded(0x1d7)]['pRenderStarting']();}async[_0x2775b0(0x245)](){const _0x807153=_0x2775b0;await this['_compEquipment'][_0x807153(0x1e7)]();}async['_pRender_pRenderTabSpells'](){const _0x360fe8=_0x2775b0;await this[_0x360fe8(0x1c7)][_0x360fe8(0x241)]();}[_0x2775b0(0x1e0)](){const _0x543ee2=_0x2775b0;this[_0x543ee2(0x195)]['render']();}async['_pHandleSaveClick'](){const _0x1c4f15=_0x2775b0,_0x4d2491=await InputUiUtil[_0x1c4f15(0x1c9)]({'title':'Are\x20You\x20Sure?'});if(!_0x4d2491)return;const _0x2d4f6f=[this[_0x1c4f15(0x175)]['bind'](this),this[_0x1c4f15(0x25d)]?null:this[_0x1c4f15(0x180)][_0x1c4f15(0x23a)](this),this[_0x1c4f15(0x204)]['bind'](this),this[_0x1c4f15(0x25d)]?null:this[_0x1c4f15(0x1d1)][_0x1c4f15(0x23a)](this),this[_0x1c4f15(0x224)]['bind'](this),this[_0x1c4f15(0x254)][_0x1c4f15(0x23a)](this),this['_isLevelUp']?null:this['_pHandleSaveClick_equipment'][_0x1c4f15(0x23a)](this),this[_0x1c4f15(0x1a3)][_0x1c4f15(0x23a)](this)][_0x1c4f15(0x193)](Boolean),_0x3927d3=new UtilApplications['TaskRunner']({'titleInitial':_0x1c4f15(0x179),'titleComplete':_0x1c4f15(0x238),'totalTasks':_0x2d4f6f[_0x1c4f15(0x20f)]});await _0x3927d3[_0x1c4f15(0x221)]();const _0x3f6ca8={'_':0x0};try{await this[_0x1c4f15(0x1fe)](_0x2d4f6f,_0x3927d3,_0x3f6ca8);}catch(_0x48d3d8){_0x3927d3[_0x1c4f15(0x295)]({'message':_0x1c4f15(0x28f)+VeCt[_0x1c4f15(0x24d)],'count':_0x3f6ca8['_'],'isError':!![]});throw _0x48d3d8;}}async[_0x2775b0(0x1fe)](_0x325ba0,_0xad607d,_0x27d1d0){const _0x2fe6db=_0x2775b0,_0x548b68=new ActorCharactermancer[(_0x2fe6db(0x197))][(_0x2fe6db(0x27b))]({'progressWidget':_0xad607d,'ptrTaskProgress':_0x27d1d0});for(const _0x1702e9 of _0x325ba0)await _0x1702e9(_0x548b68);_0xad607d[_0x2fe6db(0x295)]({'message':'Build\x20complete!','count':_0x27d1d0['_']});}async[_0x2775b0(0x175)](_0x4bb316){const _0x270898=_0x2775b0,{progressWidget:_0x260073,ptrTaskProgress:_0x1d4337}=_0x4bb316;_0x260073[_0x270898(0x295)]({'message':_0x270898(0x19a),'count':++_0x1d4337['_']});if(_0x260073[_0x270898(0x1ba)])return _0x260073[_0x270898(0x295)]({'message':_0x270898(0x216)});if(this[_0x270898(0x25d)]){const {con:_0xd6253d}=Charactermancer_Util[_0x270898(0x1c2)](this['_actor']);this[_0x270898(0x21d)]=_0xd6253d;}const _0x1f8dbb=this[_0x270898(0x1ad)][_0x270898(0x21b)][_0x270898(0x199)](),_0x1dca0={'data':{'abilities':{...Parser[_0x270898(0x1d8)]['mergeMap'](_0x4d6849=>({[_0x4d6849]:{'value':_0x1f8dbb?.['totals']?.[_0x1f8dbb[_0x270898(0x230)]]?.[_0x4d6849]||0x0}}))}}};await this['_actor'][_0x270898(0x27e)](_0x1dca0);if(this[_0x270898(0x25d)]){const {con:_0x56d60c}=Charactermancer_Util[_0x270898(0x1c2)](this[_0x270898(0x200)]);this[_0x270898(0x235)]=_0x56d60c;}_0x260073[_0x270898(0x295)]({'message':_0x270898(0x21e),'count':_0x1d4337['_']});if(_0x260073['isCancelled'])return _0x260073[_0x270898(0x295)]({'message':_0x270898(0x216),'count':_0x1d4337['_']});}async[_0x2775b0(0x180)](_0x93012d){const _0x55fb43=_0x2775b0,{progressWidget:_0x172586,ptrTaskProgress:_0x400d55}=_0x93012d;_0x172586[_0x55fb43(0x295)]({'message':_0x55fb43(0x239),'count':++_0x400d55['_']});const _0x2c8f6b=this[_0x55fb43(0x1e8)][_0x55fb43(0x208)]();if(_0x2c8f6b){const _0x488475=new ImportListRace({'actor':this[_0x55fb43(0x200)]});await _0x488475[_0x55fb43(0x221)]();const _0xf07b36=MiscUtil[_0x55fb43(0x220)](_0x2c8f6b);delete _0xf07b36['ability'],delete _0xf07b36[_0x55fb43(0x227)],delete _0xf07b36[_0x55fb43(0x243)];if(this['_compRace'][_0x55fb43(0x16b)])_0xf07b36[_0x55fb43(0x20b)]=[(await this[_0x55fb43(0x1e8)][_0x55fb43(0x16b)][_0x55fb43(0x23b)]())[_0x55fb43(0x1ef)]];else delete _0xf07b36[_0x55fb43(0x20b)];await this['_pHandleSaveClick_pDoApplySkills'](this[_0x55fb43(0x1e8)][_0x55fb43(0x17c)],_0xf07b36,_0x55fb43(0x1d3)),await this[_0x55fb43(0x1af)](this[_0x55fb43(0x1e8)][_0x55fb43(0x198)],_0xf07b36,_0x55fb43(0x24e)),await this[_0x55fb43(0x1af)](this[_0x55fb43(0x1e8)][_0x55fb43(0x1c5)],_0xf07b36,_0x55fb43(0x21c)),await this[_0x55fb43(0x1af)](this[_0x55fb43(0x1e8)][_0x55fb43(0x1a4)],_0xf07b36,'armorProficiencies'),await this[_0x55fb43(0x1af)](this['_compRace'][_0x55fb43(0x211)],_0xf07b36,'weaponProficiencies'),delete _0xf07b36[_0x55fb43(0x181)];if(this['_compRace']['compRaceDamageImmunity']){const _0x1e449f=await this[_0x55fb43(0x1e8)]['compRaceDamageImmunity'][_0x55fb43(0x23b)](),_0x1c07c4=[];Object[_0x55fb43(0x1a5)](_0x1e449f[_0x55fb43(0x1ef)])[_0x55fb43(0x193)](([,_0x43222a])=>_0x43222a)[_0x55fb43(0x17f)](([_0x4e51cc])=>_0x1c07c4[_0x55fb43(0x1aa)](_0x4e51cc));if(_0x1c07c4[_0x55fb43(0x20f)])_0xf07b36[_0x55fb43(0x181)]=_0x1c07c4;}delete _0xf07b36['resist'];if(this[_0x55fb43(0x1e8)]['compRaceDamageResistance']){const _0x2d0cc4=await this[_0x55fb43(0x1e8)]['compRaceDamageResistance']['pGetFormData'](),_0x3db0b8=[];Object[_0x55fb43(0x1a5)](_0x2d0cc4[_0x55fb43(0x1ef)])[_0x55fb43(0x193)](([,_0x56cf0c])=>_0x56cf0c)[_0x55fb43(0x17f)](([_0x5df4d9])=>_0x3db0b8['push'](_0x5df4d9));if(_0x3db0b8['length'])_0xf07b36[_0x55fb43(0x258)]=_0x3db0b8;}delete _0xf07b36[_0x55fb43(0x1ae)];if(this['_compRace'][_0x55fb43(0x1a0)]){const _0x4697f7=await this[_0x55fb43(0x1e8)][_0x55fb43(0x1a0)][_0x55fb43(0x23b)](),_0x2701e9=[];Object['entries'](_0x4697f7[_0x55fb43(0x1ef)])[_0x55fb43(0x193)](([,_0x5dd460])=>_0x5dd460)[_0x55fb43(0x17f)](([_0x43c294])=>_0x2701e9[_0x55fb43(0x1aa)](_0x43c294));if(_0x2701e9[_0x55fb43(0x20f)])_0xf07b36[_0x55fb43(0x1ae)]=_0x2701e9;}delete _0xf07b36[_0x55fb43(0x269)];if(this[_0x55fb43(0x1e8)]['compRaceConditionImmunity']){const _0x4d2801=await this[_0x55fb43(0x1e8)]['compRaceConditionImmunity'][_0x55fb43(0x23b)](),_0x4cf45f=[];Object[_0x55fb43(0x1a5)](_0x4d2801[_0x55fb43(0x1ef)])[_0x55fb43(0x193)](([,_0x4ff8be])=>_0x4ff8be)[_0x55fb43(0x17f)](([_0x410796])=>_0x4cf45f['push'](_0x410796));if(_0x4cf45f[_0x55fb43(0x20f)])_0xf07b36[_0x55fb43(0x269)]=_0x4cf45f;}await _0x488475['pImportEntry'](_0xf07b36,{'isCharactermancer':!![]});}_0x172586[_0x55fb43(0x295)]({'message':'Imported\x20race.','count':_0x400d55['_']});if(_0x172586[_0x55fb43(0x1ba)])return _0x172586[_0x55fb43(0x295)]({'message':'Build\x20cancelled.','count':_0x400d55['_']});}async[_0x2775b0(0x204)](_0x3bb94c){const _0x264110=_0x2775b0,{progressWidget:_0x5c2064,ptrTaskProgress:_0x19287a}=_0x3bb94c;_0x5c2064[_0x264110(0x295)]({'message':_0x264110(0x176),'count':++_0x19287a['_']});const _0x2b093a=[];for(let _0x37ed03=0x0;_0x37ed03<this['_compClass'][_0x264110(0x26c)][_0x264110(0x237)]+0x1;++_0x37ed03){const {propIxClass:_0x2bec3b,propIxSubclass:_0x3729e5}=ActorCharactermancerBaseComponent[_0x264110(0x1b9)](_0x37ed03),_0x1c109c=this[_0x264110(0x1c4)][_0x264110(0x1bf)]({'propIxClass':_0x2bec3b});if(!_0x1c109c)continue;const _0x403ddc=this[_0x264110(0x1c4)][_0x264110(0x260)]({'cls':_0x1c109c,'propIxSubclass':_0x3729e5});_0x2b093a[_0x264110(0x1aa)]({'ix':_0x37ed03,'cls':_0x1c109c,'sc':_0x403ddc,'isPrimary':this[_0x264110(0x1c4)][_0x264110(0x26c)]['class_ixPrimaryClass']===_0x37ed03});}if(_0x2b093a['length']){_0x2b093a['sort']((_0x23ad2f,_0x20a5b7)=>SortUtil[_0x264110(0x188)](Number(_0x20a5b7[_0x264110(0x1c6)]),Number(_0x23ad2f[_0x264110(0x1c6)]))||SortUtil['ascSort'](_0x23ad2f[_0x264110(0x233)][_0x264110(0x271)],_0x20a5b7[_0x264110(0x233)]['name']));const _0x12d8c1=new ImportListClass({'actor':this[_0x264110(0x200)]});await _0x12d8c1[_0x264110(0x221)]();const _0x792fd8=this[_0x264110(0x1c4)][_0x264110(0x28d)][_0x264110(0x234)][_0x264110(0x184)][_0x264110(0x24a)]();for(let _0x4e33b8=0x0;_0x4e33b8<_0x2b093a[_0x264110(0x20f)];++_0x4e33b8){const {ix:_0x122fc9,cls:_0x243938,sc:_0x3542bc,isPrimary:_0x1e9deb}=_0x2b093a[_0x4e33b8],_0x440d9e=MiscUtil['copy'](_0x243938),_0x1fa225=_0x3542bc?MiscUtil['copy'](_0x3542bc):null;if(_0x1fa225)delete _0x1fa225[_0x264110(0x243)];if(_0x1fa225)_0x440d9e[_0x264110(0x25e)]=[_0x1fa225];else _0x440d9e[_0x264110(0x25e)]=[];_0x440d9e[_0x264110(0x202)]=_0x4e33b8===0x0?Charactermancer_Class_ProficiencyImportModeSelect[_0x264110(0x1a2)]:Charactermancer_Class_ProficiencyImportModeSelect[_0x264110(0x281)];if(this[_0x264110(0x1c4)][_0x264110(0x177)][_0x122fc9])_0x440d9e[_0x264110(0x170)]=await this[_0x264110(0x1c4)][_0x264110(0x177)][_0x122fc9][_0x264110(0x23b)]()['data'];_0x440d9e[_0x264110(0x1fc)]=await this['_compClass'][_0x264110(0x1b3)][_0x122fc9][_0x264110(0x23b)]()[_0x264110(0x1ef)],_0x440d9e['_foundryAllFeatures']=[];for(const _0x1f2ecd of this[_0x264110(0x1c4)][_0x264110(0x275)][_0x122fc9]){const _0x2acfa1=await _0x1f2ecd[_0x264110(0x23b)]();if(_0x2acfa1?.[_0x264110(0x1ef)]?.[_0x264110(0x18c)]?.[_0x264110(0x20f)])_0x440d9e[_0x264110(0x1a1)]['push'](..._0x2acfa1['data'][_0x264110(0x18c)]);const _0x569274={'data':{}};Charactermancer_Class_FeatureOptionsSelect[_0x264110(0x278)](this['_actor'],_0x569274,_0x2acfa1);if(Object[_0x264110(0x240)](_0x569274[_0x264110(0x1ef)])['length'])await this[_0x264110(0x200)][_0x264110(0x27e)](_0x569274);}this['_isLevelUp']&&(_0x440d9e[_0x264110(0x1b2)]=this[_0x264110(0x21d)],_0x440d9e[_0x264110(0x283)]=this[_0x264110(0x235)]);_0x440d9e[_0x264110(0x22c)]=!![];const _0x550e3b=_0x1e9deb?[_0x264110(0x20c),_0x264110(0x26b)]:[_0x264110(0x16c),_0x264110(0x201),_0x264110(0x26b)];await this[_0x264110(0x1b6)](this[_0x264110(0x1c4)][_0x264110(0x294)][_0x122fc9],_0x440d9e,..._0x550e3b),delete _0x440d9e[_0x264110(0x1ce)],await _0x12d8c1[_0x264110(0x192)](_0x440d9e,{'filterValues':_0x792fd8,'isCharactermancer':!![]});}}_0x5c2064[_0x264110(0x295)]({'message':'Imported\x20classes\x20and\x20subclasses.','count':_0x19287a['_']});if(_0x5c2064[_0x264110(0x1ba)])return _0x5c2064[_0x264110(0x295)]({'message':_0x264110(0x216),'count':_0x19287a['_']});}async[_0x2775b0(0x1d1)](_0x33be6a){const _0x193d3f=_0x2775b0,{progressWidget:_0x5b4ca7,ptrTaskProgress:_0x30fe35}=_0x33be6a;_0x5b4ca7[_0x193d3f(0x295)]({'message':_0x193d3f(0x1f4),'count':++_0x30fe35['_']});const _0x255175=this[_0x193d3f(0x228)][_0x193d3f(0x20d)][this['_compBackground'][_0x193d3f(0x26c)][_0x193d3f(0x289)]];if(_0x255175){const _0x1c8bf4=new ImportListBackground({'actor':this[_0x193d3f(0x200)]});await _0x1c8bf4[_0x193d3f(0x221)]();const _0xccb6c0=MiscUtil[_0x193d3f(0x220)](_0x255175);if(this[_0x193d3f(0x1bd)][_0x193d3f(0x23d)])_0xccb6c0[_0x193d3f(0x1cb)]=await this[_0x193d3f(0x1bd)][_0x193d3f(0x23d)][_0x193d3f(0x23b)]();else _0xccb6c0[_0x193d3f(0x1cb)]={'isFormComplete':!![]};_0xccb6c0[_0x193d3f(0x213)]=!![],_0xccb6c0[_0x193d3f(0x218)]=!![],await this[_0x193d3f(0x1b6)](this[_0x193d3f(0x1bd)][_0x193d3f(0x178)],_0xccb6c0,_0x193d3f(0x1d3)),await this[_0x193d3f(0x1af)](this[_0x193d3f(0x1bd)][_0x193d3f(0x26a)]?this[_0x193d3f(0x1bd)][_0x193d3f(0x186)]:this[_0x193d3f(0x1bd)][_0x193d3f(0x22b)],_0xccb6c0,_0x193d3f(0x24e)),await this[_0x193d3f(0x1af)](this[_0x193d3f(0x1bd)][_0x193d3f(0x26a)]?this[_0x193d3f(0x1bd)][_0x193d3f(0x186)]:this[_0x193d3f(0x1bd)][_0x193d3f(0x18f)],_0xccb6c0,_0x193d3f(0x21c)),this[_0x193d3f(0x1bd)]['compBackgroundCharacteristics']?_0xccb6c0[_0x193d3f(0x1d2)]=await this['_compBackground'][_0x193d3f(0x18e)][_0x193d3f(0x23b)]():_0xccb6c0[_0x193d3f(0x207)]=!![],delete _0xccb6c0[_0x193d3f(0x1ce)],await _0x1c8bf4[_0x193d3f(0x1be)](_0xccb6c0,{'isCharactermancer':!![]});}_0x5b4ca7[_0x193d3f(0x295)]({'message':_0x193d3f(0x1fd),'count':_0x30fe35['_']});if(_0x5b4ca7[_0x193d3f(0x1ba)])return _0x5b4ca7[_0x193d3f(0x295)]({'message':_0x193d3f(0x216),'count':_0x30fe35['_']});}async[_0x2775b0(0x224)](_0x385047){const _0x5678e6=_0x2775b0,{progressWidget:_0x2a0cb4,ptrTaskProgress:_0x3d5947}=_0x385047;_0x2a0cb4['setProgress']({'message':_0x5678e6(0x1df),'count':++_0x3d5947['_']}),_0x385047[_0x5678e6(0x24f)]=[];const _0x58f622=new Set(this['_compFeat'][_0x5678e6(0x1f3)]());for(let _0x102ec0=0x0;_0x102ec0<this[_0x5678e6(0x195)]['state'][_0x5678e6(0x1f7)]+0x1;++_0x102ec0){const {propIxFeat:_0x4351d2}=ActorCharactermancerBaseComponent[_0x5678e6(0x1bb)](_0x102ec0,_0x5678e6(0x26f));if(!_0x58f622[_0x5678e6(0x1c3)](_0x4351d2))continue;_0x385047[_0x5678e6(0x24f)][_0x5678e6(0x1aa)]({'propIxFeat':_0x4351d2,'namespace':_0x5678e6(0x26f),'ix':_0x102ec0});}for(let _0x43a68c=0x0;_0x43a68c<this[_0x5678e6(0x195)][_0x5678e6(0x26c)][_0x5678e6(0x246)]+0x1;++_0x43a68c){const {propIxFeat:_0x27177c}=ActorCharactermancerBaseComponent[_0x5678e6(0x1bb)](_0x43a68c,_0x5678e6(0x1b1));if(!_0x58f622[_0x5678e6(0x1c3)](_0x27177c))continue;_0x385047['featMetas'][_0x5678e6(0x1aa)]({'propIxFeat':_0x27177c,'namespace':'race','ix':_0x43a68c});}for(let _0x31bcaf=0x0;_0x31bcaf<this[_0x5678e6(0x195)][_0x5678e6(0x26c)][_0x5678e6(0x19d)]+0x1;++_0x31bcaf){const {propIxFeat:_0x270630}=ActorCharactermancerBaseComponent[_0x5678e6(0x1bb)](_0x31bcaf,_0x5678e6(0x28b));if(!_0x58f622[_0x5678e6(0x1c3)](_0x270630))continue;_0x385047[_0x5678e6(0x24f)][_0x5678e6(0x1aa)]({'propIxFeat':_0x270630,'namespace':'custom','ix':_0x31bcaf});}const _0x20b643=this[_0x5678e6(0x1ad)][_0x5678e6(0x21b)][_0x5678e6(0x19f)]();if(_0x385047['featMetas'][_0x5678e6(0x20f)]){const _0x31a8f1=new ImportListFeat({'actor':this[_0x5678e6(0x200)]});await _0x31a8f1[_0x5678e6(0x221)]();for(const _0x9c1ec5 of _0x385047['featMetas']){const _0xde394=this[_0x5678e6(0x228)][_0x5678e6(0x293)][this[_0x5678e6(0x195)]['state'][_0x9c1ec5['propIxFeat']]];if(!_0xde394)continue;const _0x323aa3=MiscUtil[_0x5678e6(0x220)](_0xde394);if(_0x20b643[_0x5678e6(0x227)][_0x9c1ec5[_0x5678e6(0x171)]]?.[_0x9c1ec5['ix']]){const _0x4941ce=_0x20b643[_0x5678e6(0x227)][_0x9c1ec5[_0x5678e6(0x171)]][_0x9c1ec5['ix']];_0x323aa3[_0x5678e6(0x26f)]=[_0x4941ce[_0x5678e6(0x244)]][_0x5678e6(0x193)](Boolean),_0x323aa3[_0x5678e6(0x26d)]=_0x323aa3[_0x5678e6(0x26f)][0x0]||{},Renderer[_0x5678e6(0x293)]['mergeAbilityIncrease'](_0x323aa3);}delete _0x323aa3['ability'],delete _0x323aa3[_0x5678e6(0x243)],await this['_pHandleSaveClick_pDoApplySkills'](this[_0x5678e6(0x195)][_0x5678e6(0x194)][_0x9c1ec5['ix']],_0x323aa3,_0x5678e6(0x1d3)),await this[_0x5678e6(0x1af)](this[_0x5678e6(0x195)][_0x5678e6(0x277)][_0x9c1ec5['ix']],_0x323aa3,'languageProficiencies'),await this[_0x5678e6(0x1af)](this[_0x5678e6(0x195)][_0x5678e6(0x264)][_0x9c1ec5['ix']],_0x323aa3,'toolProficiencies'),await this['_pHandleSaveClick_pDoApplyOtherProficiencies'](this[_0x5678e6(0x195)]['compsFeatArmorProficiencies'][_0x9c1ec5['ix']],_0x323aa3,_0x5678e6(0x257)),await this['_pHandleSaveClick_pDoApplyOtherProficiencies'](this[_0x5678e6(0x195)][_0x5678e6(0x229)][_0x9c1ec5['ix']],_0x323aa3,_0x5678e6(0x196)),await _0x31a8f1[_0x5678e6(0x1be)](_0x323aa3,{'isCharactermancer':!![]});}}_0x2a0cb4['setProgress']({'message':'Imported\x20feats.','count':_0x3d5947['_']});if(_0x2a0cb4['isCancelled'])return _0x2a0cb4[_0x5678e6(0x295)]({'message':'Build\x20cancelled.','count':_0x3d5947['_']});}async[_0x2775b0(0x254)](_0x147aca){const _0x11db0f=_0x2775b0,{progressWidget:_0x2cf1f8,ptrTaskProgress:_0x3e10f3}=_0x147aca;_0x2cf1f8['setProgress']({'message':_0x11db0f(0x22a),'count':++_0x3e10f3['_']});const _0x29c287=this[_0x11db0f(0x1c4)][_0x11db0f(0x21a)](),_0x396399=this[_0x11db0f(0x1c7)][_0x11db0f(0x27f)]||this['_compSpell'][_0x11db0f(0x1cc)][_0x11db0f(0x24a)]();for(let _0x493f5a=0x0;_0x493f5a<this['_compClass'][_0x11db0f(0x26c)][_0x11db0f(0x237)]+0x1;++_0x493f5a){const {propIxClass:_0x4060d7,propIxSubclass:_0x5f0422}=ActorCharactermancerBaseComponent[_0x11db0f(0x1b9)](_0x493f5a),_0x53d17b=this[_0x11db0f(0x1c4)][_0x11db0f(0x1bf)]({'propIxClass':_0x4060d7});if(!_0x53d17b)continue;const _0x304022=this[_0x11db0f(0x1c4)]['getSubclass_']({'cls':_0x53d17b,'propIxSubclass':_0x5f0422}),_0x2edbea=await this[_0x11db0f(0x1c4)]['compsClassLevelSelect'][_0x493f5a][_0x11db0f(0x23b)]()[_0x11db0f(0x1ef)],_0x2bddc0=Math[_0x11db0f(0x251)](..._0x2edbea)+0x1;if(this['_compSpell']['compsSpellSpells'][_0x493f5a]){const _0x33f54f=await this[_0x11db0f(0x1c7)][_0x11db0f(0x203)][_0x493f5a][_0x11db0f(0x23b)](_0x396399),_0xf58a4c=_0x33f54f?.[_0x11db0f(0x1ef)]?.[_0x11db0f(0x1ab)]||[];for(let _0x5c2ac1=0x0;_0x5c2ac1<_0xf58a4c[_0x11db0f(0x20f)];++_0x5c2ac1){const {spell:_0x27b58b,isPrepared:_0x5d37d3,isUpdateOnly:_0x28d951,existingItemId:_0xc9f285,preparationMode:_0x38f38c,usesCurrent:_0x45e168,usesMax:_0x98724,usesPer:_0x3d1055,castAtLevel:_0xab0dda}=_0xf58a4c[_0x5c2ac1];if(_0x28d951&&_0xc9f285){await DataConverterSpell[_0x11db0f(0x1ec)](this['_actor'][_0x11db0f(0x25c)][_0x11db0f(0x247)](_0xc9f285),_0x5d37d3);continue;}const _0x6f73c=await DataConverterSpell[_0x11db0f(0x23f)](_0x27b58b,{'isActorItem':!![],'isPrepared':_0x5d37d3,'casterLevel':_0x2bddc0,'abilityAbv':_0x53d17b[_0x11db0f(0x1e9)],'preparationMode':_0x38f38c,'usesCurrent':_0x45e168,'usesMax':_0x98724,'usesPer':_0x3d1055,'castAtLevel':_0xab0dda,'parentClassName':_0x53d17b[_0x11db0f(0x271)],'parentClassSource':_0x53d17b['source'],'parentSubclassName':_0x304022?.[_0x11db0f(0x271)],'parentSubclassSource':_0x304022?.[_0x11db0f(0x27a)]}),_0x4d570a=await this[_0x11db0f(0x200)][_0x11db0f(0x210)](_0x11db0f(0x266),_0x6f73c,{});}}if(!_0x304022)continue;if(this['_compSpell']['compsSpellAdditionalSpellSubclass'][_0x493f5a]){const _0x43375a=await this['_compSpell'][_0x11db0f(0x1f8)][_0x493f5a][_0x11db0f(0x23b)]();await this[_0x11db0f(0x1ff)]({'formData':_0x43375a,'targetLevel':_0x2bddc0,'abilityAbv':_0x304022['spellcastingAbility']||_0x53d17b[_0x11db0f(0x1e9)]});}}if(this['_compSpell'][_0x11db0f(0x23e)]){const _0x59f200=await this['_compSpell'][_0x11db0f(0x23e)][_0x11db0f(0x23b)]();await this[_0x11db0f(0x1ff)]({'formData':_0x59f200,'totalClassLevels':_0x29c287});}const _0x3e498d=this[_0x11db0f(0x1ad)][_0x11db0f(0x21b)]['getFormDataAsi']();for(const _0x52aa2f of _0x147aca[_0x11db0f(0x24f)]){const _0x5147ea=this['_compSpell']['compsSpellAdditionalSpellFeat'][_0x52aa2f[_0x11db0f(0x171)]][_0x52aa2f['ix']];if(_0x5147ea){let _0x43c16d=null;if(_0x3e498d[_0x11db0f(0x227)][_0x52aa2f[_0x11db0f(0x171)]]?.[_0x52aa2f['ix']]){const _0x1a6d88=_0x3e498d[_0x11db0f(0x227)][_0x52aa2f[_0x11db0f(0x171)]][_0x52aa2f['ix']];_0x43c16d=Object['keys'](_0x1a6d88[_0x11db0f(0x244)]||{})[0x0];}const _0x1b65c1=await _0x5147ea['pGetFormData']();await this[_0x11db0f(0x1ff)]({'formData':_0x1b65c1,'totalClassLevels':_0x29c287,'parentAbilityAbv':_0x43c16d});}}_0x2cf1f8['setProgress']({'message':_0x11db0f(0x1ee),'count':_0x3e10f3['_']});if(_0x2cf1f8[_0x11db0f(0x1ba)])return _0x2cf1f8['setProgress']({'message':_0x11db0f(0x216),'count':_0x3e10f3['_']});}async['_pHandleSaveClick_equipment'](_0x4f45c3){const _0x45f691=_0x2775b0,{progressWidget:_0x28b667,ptrTaskProgress:_0x32cf25}=_0x4f45c3;_0x28b667['setProgress']({'message':_0x45f691(0x217),'count':++_0x32cf25['_']});const _0x11131e=await this[_0x45f691(0x1d7)]['compEquipmentCurrency']['pGetFormData'](),_0x26c2cb=await this[_0x45f691(0x1d7)][_0x45f691(0x1b5)][_0x45f691(0x23b)](),_0x3ddeae=await this[_0x45f691(0x1d7)]['compEquipmentShopGold'][_0x45f691(0x23b)]();if(_0x11131e?.['data']?.[_0x45f691(0x282)])await Charactermancer_StartingEquipment['pUpdateActorCurrency'](this[_0x45f691(0x200)],_0x11131e);if(_0x26c2cb?.[_0x45f691(0x1ef)]?.[_0x45f691(0x273)])await Charactermancer_StartingEquipment[_0x45f691(0x1a8)](this[_0x45f691(0x200)],_0x26c2cb);if(_0x3ddeae?.['data']?.['equipmentItemEntries'])await Charactermancer_StartingEquipment[_0x45f691(0x1a8)](this['_actor'],_0x3ddeae);_0x28b667[_0x45f691(0x295)]({'message':_0x45f691(0x1fa),'count':_0x32cf25['_']});if(_0x28b667['isCancelled'])return _0x28b667[_0x45f691(0x295)]({'message':_0x45f691(0x216),'count':_0x32cf25['_']});}async[_0x2775b0(0x1b6)](_0x48dd5e,_0x5e85d9,..._0x104e68){const _0x3d286c=_0x2775b0;MiscUtil[_0x3d286c(0x214)](_0x5e85d9,..._0x104e68);if(_0x48dd5e){const _0x1b6f17=await _0x48dd5e[_0x3d286c(0x23b)](),_0x574cbc={};Object[_0x3d286c(0x240)](Parser[_0x3d286c(0x28c)])[_0x3d286c(0x193)](_0x13dc9d=>_0x1b6f17['data'][_0x13dc9d])[_0x3d286c(0x17f)](_0x34d30b=>_0x574cbc[_0x34d30b]=!![]),Object[_0x3d286c(0x240)](_0x574cbc)[_0x3d286c(0x20f)]&&MiscUtil['set'](_0x5e85d9,..._0x104e68,[_0x574cbc]);}}async[_0x2775b0(0x1af)](_0x210c59,_0x3988bd,..._0x31142d){const _0x4e2920=_0x2775b0,_0xc52982=_0x31142d[_0x4e2920(0x24c)]();MiscUtil[_0x4e2920(0x214)](_0x3988bd,..._0x31142d);if(!_0x210c59)return;const _0x3dd6f2=await _0x210c59[_0x4e2920(0x23b)](),_0x5d2d3e=_0x3dd6f2?.[_0x4e2920(0x1ef)]?.[_0xc52982];if(!_0x5d2d3e)return;const _0x26fc58=Object[_0x4e2920(0x1a5)](_0x5d2d3e)[_0x4e2920(0x205)](([_0x5eee03,_0x581362])=>({[_0x5eee03]:_0x581362}));if(Object['keys'](_0x26fc58)[_0x4e2920(0x20f)])MiscUtil[_0x4e2920(0x1b8)](_0x3988bd,..._0x31142d,[_0x26fc58]);}async['_pHandleSaveClick_pDoImportAdditionalSpells']({formData:_0x173b31,targetLevel:_0x4e46c1,abilityAbv:_0x601b13,parentAbilityAbv:_0x13c9b0}){const _0x54cfdd=_0x2775b0,_0xf2ca6b=_0x173b31?.[_0x54cfdd(0x1ef)]||[];_0x601b13=_0x173b31?.[_0x54cfdd(0x1e4)]||_0x601b13;if(_0x601b13===_0x54cfdd(0x231))_0x601b13=_0x13c9b0;for(const _0x2fb5f5 of _0xf2ca6b){if(_0x2fb5f5[_0x54cfdd(0x1ea)])continue;let [_0x29a824,_0x46bccd]=_0x2fb5f5['uid'][_0x54cfdd(0x18a)]('|');if(!_0x46bccd)_0x46bccd=SRC_PHB;const _0xc7a2c8=UrlUtil[_0x54cfdd(0x1e5)][UrlUtil[_0x54cfdd(0x190)]]({'name':_0x29a824,'source':_0x46bccd}),_0x23d5e1=await Renderer[_0x54cfdd(0x28e)][_0x54cfdd(0x1d0)](UrlUtil['PG_SPELLS'],_0x46bccd,_0xc7a2c8),_0x490961=await DataConverterSpell[_0x54cfdd(0x23f)](_0x23d5e1,{'isActorItem':!![],'isPrepared':_0x2fb5f5['isPrepared'],'preparationMode':_0x2fb5f5[_0x54cfdd(0x1ed)],'casterLevel':_0x4e46c1,'abilityAbv':_0x601b13,'usesCurrent':_0x2fb5f5[_0x54cfdd(0x17a)],'usesMax':_0x2fb5f5['uses'],'usesPer':_0x2fb5f5['usesPer'],'consumeType':_0x2fb5f5[_0x54cfdd(0x206)],'consumeAmount':_0x2fb5f5[_0x54cfdd(0x1e2)],'consumeTarget':_0x2fb5f5[_0x54cfdd(0x16e)]}),_0x597f1e=await this[_0x54cfdd(0x200)][_0x54cfdd(0x210)]('OwnedItem',_0x490961,{});}}async[_0x2775b0(0x1a3)](_0x2a3029){const _0x391779=_0x2775b0,{progressWidget:_0xa499a1,ptrTaskProgress:_0x23a8bd}=_0x2a3029;_0xa499a1[_0x391779(0x295)]({'message':_0x391779(0x1b7),'count':++_0x23a8bd['_']});if(this['_cbPostSave'])this[_0x391779(0x226)]();}},ActorCharactermancer[_0x2775b0(0x197)][_0x2775b0(0x27b)]=class{constructor({progressWidget:_0x5ce437,ptrTaskProgress:_0x13c8f3}){const _0x37d83e=_0x2775b0;this[_0x37d83e(0x265)]=_0x5ce437,this['ptrTaskProgress']=_0x13c8f3,this[_0x37d83e(0x24f)]=null;}};export{ActorCharactermancerSourceSelector,ActorCharactermancerBaseComponent};