const _0x161e=['Build\x20Complete','MODE_PRIMARY','_setActiveTab','_addHookActiveTab','proficienciesGained','armorProficiencies','1cVbDNc','_pLoad','pCacheAndGet','AdditionalSaveState','<button\x20class=\x22btn\x20btn-5et\x20btn-default\x20w-100p\x22>Next</button>','subclasses','ascSort','pRenderShop','_compSpell','pGetWithCache','resist','compsClassHpIncreaseMode','filterValuesSpellsCache','compRaceConditionImmunity','Importing\x20classes\x20and\x20subclasses...','compRaceSize','click','Running\x20post-build\x20step...','push','spell','MODULE_LOCATION','conditionImmune','_tabs','filterBox','_pRender_renderTabClass','getCurrentAbilityScores','compsClassLevelSelect','immune','SRD','skillProficiencies','activateListeners','compRaceSkillProficiencies','all','actor','_foundryIsSkipCustomizeSkills','5etools','/template/Charactermancer.handlebars','_pHandleSaveClick_pDoApplySkills','STR_SEE_CONSOLE','pUpdateActorCurrency','191gGXtHs','isCustomizeLanguagesTools','mode','<div\x20class=\x22flex-vh-center\x20w-100\x20h-100\x22><i>Loading...</i></div>','_pHandleSaveClick_race','max','_render_pRenderTabEquipmentShop','pWaitForUserInput','Class','notifications','map','spellcastingAbility','compsSpellAdditionalSpellFeat','compsSpellAdditionalSpellSubclass','DataSourceUrl','name','_pGetSources','toolProficiencies','length','compsFeatLanguageProficiencies','background','Custom\x20URL','_comp','Importing\x20equipment...','compEquipmentCurrency','compBackgroundLanguageProficiencies','additionalSpells','getTotals','_foundryIsSkipImportPreparedSpells','834743gblsVH','getValues','Imported\x20equipment.','Setting\x20ability\x20scores...','538937mPvXmM','subclass','mergeAbilityIncrease','compBackgroundFeatures','activeTab_','Equipment\x20Shop','featureSourceTracker_','set','bind','1bRHEDA','_render_loading','filterBoxSpells','last','_pRender_renderTabBackground','_pHandleSaveClick_class','_pLoadVetoolsSource','554xQWPwq','pageFilter','Building...','inherit','flat','compsFeatWeaponProficiencies','_cbPostSave','delete','sort','compsFeatToolProficiencies','TaskRunner','feat_ixMaxAbility','data','compSpellAdditionalSpellRace','_pHandleSaveClick_pDoImportAdditionalSpells','source','_postProcessAllSelectedData','_BREW_DIRS','progressWidget','featMetas','class','_pHandleSaveClick_pDoApplyOtherProficiencies','createEmbeddedEntity','state','compsClassSkillProficiencies','doApplyProficiencyFormDataToActorUpdate','pGetAllSpells','compSpell','Upload\x20File','render','pPostLoad','compsClassFeatureOptionsSelect','pRender','ActorCharactermancerSourceSelector_filter','_pRender_pRenderTabSpells','Importing\x20feats...','getClass_','<button\x20class=\x22btn\x20btn-5et\x20btn-default\x20w-100p\x22>Previous</button>','size','_pHandleSaveClick_background','_pPostLoad','filter','compBackgroundToolProficiencies','_conInitialWithModifiers','feat','pInit','compBackground','compAbility','_getTab','_foundryHpIncreaseMode','Imported\x20spells.','3rvhwGS','compRaceWeaponProficiencies','_conFinalWithModifiers','compRaceDamageVulnerability','_compRace','$wrpTab','startingProficiencies','skills','_pRender_renderTabAbilities','pGetUserBoolean','compEquipmentShopGold','_foundrySelectedLevelIndices','mutateForFilters','race','prop','DataSourceSpecial','_pHandleSaveClick_feats','class_ixPrimaryClass','compsFeatArmorProficiencies','URL_TO_HASH_BUILDER','_actor','Imported\x20classes\x20and\x20subclasses.','feat_ixMaxRace','item','DATA_URL_FEATS','_pRender','hover','_render_pRenderTabEquipmentStarting','spells','_hasPrevTab','_cons_initTabs','isPrepared','ability','Imported\x20race.','feats','ABIL_ABVS','pPostLoadBrew','namespace','isCancelled','vulnerable','_pHandleSaveClick_spells','518187nTyskq','mergeMap','compsFeatSkillProficiencies','classFeature','startingEquipment','Select\x20Sources','isPrimary','MODE_MULTICLASS','Background','propIxFeat','OwnedItem','_featureSourceTracker','pHandleButtonClick','abilityChosen','286919EpbZMa','optionalfeature','entries','Imported\x20background.','feat_getProps','pGetClasses','Spells','pGetFormData','pLoad','PG_SPELLS','feat_ixMaxCustom','btn-sm','append','compBackgroundCharacteristics','subrace','equipmentItemEntries','currency','_pHandleSaveClick_postSave','uses','items','compStatgen','1002288sSlhhf','_foundryChosenAbilityScoreIncrease','get','getFormDataAsi','disabled','keys','modalFilterClasses','has','totals','Build\x20complete!','_isLevelUp','compRaceDamageImmunity','740076IDZNUv','SOURCE_TYP_BREW','addFauxOptionalFeatureFeatures','_compAbility','cbPostSave','pGetRaces','pImportEquipmentItemEntries','find','background_ixBackground','error','close','class_getProps','Starting\x20Equipment','pImportEntry','pGetSpellItem','split','pGetItems','setProgress','_pRender_renderTabFeats','_compFeat','_compClass','class_ixMax','pRenderStarting','_foundryIsSkipCustomizeLanguagesTools','Component','_data','_compEquipment','_doSwitchToNextTab','compBackgroundSkillProficiencies','_foundryIsSkipImportCharacteristics','update','empty','_foundryAllFeatures','weaponProficiencies','compFeat','forEach','uid','_foundryFormDataFeatures','SKILL_TO_ATB_ABV','_pHandleSaveClick_abilities','getSubclass_','feat_getActiveFeatIxProps','compsSpellSpells','appendTo','Feats','<hr\x20class=\x22hr-1\x20w-100\x22>','_pRender_renderTabRace','class_getTotalLevels','languageProficiencies','pSetSpellItemIsPrepared','getMaxWindowWidth','assign','compRace','_foundryConFinal','Build\x20cancelled.','SOURCE_TYP_OFFICIAL_ALL','Charactermancer','Set\x20ability\x20scores.','_pHandleSaveClick_equipment','SOURCE_TYP_CUSTOM','_compBackground','getCurrentLevel','custom','compRaceToolProficiencies','copy','_pHandleSaveClick_','catch'];const _0x1bfc=function(_0x566121,_0x405e3f){_0x566121=_0x566121-0x11e;let _0x161ea9=_0x161e[_0x566121];return _0x161ea9;};const _0x6d3fa9=_0x1bfc;(function(_0x3d8e71,_0x86289){const _0x3bc182=_0x1bfc;while(!![]){try{const _0x2ad977=parseInt(_0x3bc182(0x1de))*-parseInt(_0x3bc182(0x1a7))+parseInt(_0x3bc182(0x160))+parseInt(_0x3bc182(0x1f3))+-parseInt(_0x3bc182(0x16d))*parseInt(_0x3bc182(0x164))+-parseInt(_0x3bc182(0x248))*-parseInt(_0x3bc182(0x1ff))+-parseInt(_0x3bc182(0x1d0))+parseInt(_0x3bc182(0x174))*-parseInt(_0x3bc182(0x143));if(_0x2ad977===_0x86289)break;else _0x3d8e71['push'](_0x3d8e71['shift']());}catch(_0x4c9d24){_0x3d8e71['push'](_0x3d8e71['shift']());}}}(_0x161e,0x871c4));import{SharedConsts}from'../shared/SharedConsts.js';import{Util}from'./Util.js';import{Config}from'./Config.js';import{Vetools}from'./Vetools.js';import{AppSourceSelectorMulti}from'./AppSourceSelectorMulti.js';import{ImportListRace}from'./ImportListRace.js';import{Charactermancer_Class_FeatureOptionsSelect,Charactermancer_Class_ProficiencyImportModeSelect,Charactermancer_Class_Util,PageFilterClassesFoundry}from'./UtilCharactermancerClass.js';import{ImportListClass}from'./ImportListClass.js';import{Charactermancer_StartingEquipment}from'./UtilCharactermancerEquipment.js';import{ImportListBackground}from'./ImportListBackground.js';import{DataConverterSpell}from'./DataConverterSpell.js';import{ImportListFeat}from'./ImportListFeat.js';import{UtilApplications}from'./UtilApplications.js';import{ActorCharactermancerRace}from'./ActorCharactermancerRace.js';import{ActorCharactermancerBaseComponent}from'./ActorCharactermancerUtil.js';import{ActorCharactermancerEquipment}from'./ActorCharactermancerEquipment.js';import{ActorCharactermancerBackground}from'./ActorCharactermancerBackground.js';import{ActorCharactermancerClass}from'./ActorCharactermancerClass.js';import{ActorCharactermancerFeat}from'./ActorCharactermancerFeat.js';import{ActorCharactermancerSpell}from'./ActorCharactermancerSpell.js';import{ActorCharactermancerAbility}from'./ActorCharactermancerAbility.js';import{UtilDataSource}from'./UtilDataSource.js';import{Charactermancer_FeatureSourceTracker,Charactermancer_Util}from'./UtilCharactermancer.js';import{Charactermancer_Race_Util}from'./UtilCharactermancerRace.js';import{DataConverter}from'./DataConverter.js';import{UtilActors}from'./UtilActors.js';class ActorCharactermancerSourceSelector extends AppSourceSelectorMulti{static async[_0x6d3fa9(0x1dc)](_0x1d8979,_0x684e4,_0x152f44,_0xb58a6c){const _0x2b04c5=_0x6d3fa9,_0x329f3e=await this[_0x2b04c5(0x153)](),_0x57f059=new ActorCharactermancerSourceSelector({'title':_0x2b04c5(0x1d5),'filterNamespace':_0x2b04c5(0x195),'savedSelectionKey':'ActorCharactermancerSourceSelector_savedSelection','sourcesToDisplay':_0x329f3e});_0x57f059['render'](!![]);const _0x4c2795=await _0x57f059[_0x2b04c5(0x14a)]();if(_0x4c2795==null)return;this[_0x2b04c5(0x184)](_0x4c2795);const _0x2ab77e=new ActorCharactermancer({'actor':_0x684e4[_0x2b04c5(0x13c)],'data':_0x4c2795});_0x2ab77e[_0x2b04c5(0x191)](!![]);}static[_0x6d3fa9(0x184)](_0x2e5617){const _0x149a6d=_0x6d3fa9;_0x2e5617[_0x149a6d(0x222)]((_0x452a3c,_0x6af5c4)=>{const _0x34bb17=_0x149a6d;if(!_0x452a3c[_0x34bb17(0x188)]||!_0x452a3c[_0x34bb17(0x188)][_0x34bb17(0x155)])return;const _0xaff73e=_0x2e5617['slice'](0x0,_0x6af5c4)[_0x34bb17(0x19d)](_0x3df591=>_0x3df591[_0x34bb17(0x188)]);if(!_0xaff73e[_0x34bb17(0x155)])return;_0x452a3c[_0x34bb17(0x188)]=_0x452a3c['class'][_0x34bb17(0x19d)](_0x449107=>{const _0x1b1093=_0x34bb17,_0x513943=_0xaff73e['find'](_0x3b9eb3=>_0x3b9eb3[_0x1b1093(0x188)]&&_0x3b9eb3['class'][_0x1b1093(0x206)](_0x27f0a0=>_0x449107[_0x1b1093(0x152)]===_0x27f0a0['name']&&_0x449107[_0x1b1093(0x183)]===_0x27f0a0[_0x1b1093(0x183)]));if(!_0x513943)return!![];const _0x3831a=_0x513943[_0x1b1093(0x188)][_0x1b1093(0x206)](_0x2a5a1c=>_0x449107[_0x1b1093(0x152)]===_0x2a5a1c[_0x1b1093(0x152)]&&_0x449107[_0x1b1093(0x183)]===_0x2a5a1c[_0x1b1093(0x183)]);return _0x3831a['subclasses']=[..._0x3831a['subclasses']||[],..._0x449107[_0x1b1093(0x120)]||[]],![];});});const _0xe40195=_0x2e5617[_0x149a6d(0x14d)](_0x1e30f7=>_0x1e30f7[_0x149a6d(0x188)]||[])[_0x149a6d(0x178)](),_0x40dfe2=_0x2e5617[_0x149a6d(0x14d)](_0x445a9e=>_0x445a9e[_0x149a6d(0x1df)]||[])[_0x149a6d(0x178)]();Charactermancer_Class_Util[_0x149a6d(0x201)](_0xe40195,_0x40dfe2);}static async[_0x6d3fa9(0x153)](){const _0x3ba759=_0x6d3fa9;return[new UtilDataSource[(_0x3ba759(0x1b6))](Config[_0x3ba759(0x1f5)]('ui','isStreamerMode')?_0x3ba759(0x137):_0x3ba759(0x13e),this['_pLoadVetoolsSource']['bind'](this),{'cacheKey':'5etools','filterTypes':[UtilDataSource[_0x3ba759(0x236)]],'isDefault':!![],'pPostLoad':this['_pPostLoad']['bind'](this,!![])}),new UtilDataSource['DataSourceUrl'](_0x3ba759(0x158),'',{'pPostLoad':this[_0x3ba759(0x19c)][_0x3ba759(0x16c)](this,![]),'filterTypes':[UtilDataSource[_0x3ba759(0x23a)]]}),new UtilDataSource['DataSourceFile'](_0x3ba759(0x190),{'pPostLoad':this[_0x3ba759(0x19c)][_0x3ba759(0x16c)](this,![]),'filterTypes':[UtilDataSource[_0x3ba759(0x23a)]]}),...(await Vetools['pGetHomebrewSources'](...ActorCharactermancerSourceSelector[_0x3ba759(0x185)]))[_0x3ba759(0x14d)](({name:_0x1855b0,url:_0x3ac108})=>new UtilDataSource[(_0x3ba759(0x151))](_0x1855b0,_0x3ac108,{'pPostLoad':this['_pPostLoad'][_0x3ba759(0x16c)](this,![]),'filterTypes':[UtilDataSource[_0x3ba759(0x200)]]}))];}static async[_0x6d3fa9(0x173)](){const _0xbc6aed=_0x6d3fa9,_0x4cac73={},[_0x4a9b39,_0xca0b70,_0x4163ca,_0x5aa80e,_0x5683ae,_0x4ea41e,_0x17a599]=await Promise[_0xbc6aed(0x13b)]([Vetools[_0xbc6aed(0x1e3)](),Vetools[_0xbc6aed(0x204)](),Vetools[_0xbc6aed(0x124)](Vetools['DATA_URL_BACKGROUNDS']),Vetools[_0xbc6aed(0x20f)](),Vetools[_0xbc6aed(0x18e)](),Vetools[_0xbc6aed(0x124)](Vetools[_0xbc6aed(0x1bf)]),Vetools[_0xbc6aed(0x124)](Vetools['DATA_URL_OPTIONALFEATURES'])]);return Object[_0xbc6aed(0x232)](_0x4cac73,_0x4a9b39),_0x4cac73[_0xbc6aed(0x1b4)]=_0xca0b70[_0xbc6aed(0x1b4)],_0x4cac73[_0xbc6aed(0x157)]=_0x4163ca['background'],_0x4cac73[_0xbc6aed(0x1be)]=_0x5aa80e[_0xbc6aed(0x1be)],_0x4cac73['spell']=_0x5683ae['spell'],_0x4cac73[_0xbc6aed(0x1a0)]=_0x4ea41e[_0xbc6aed(0x1a0)],_0x4cac73[_0xbc6aed(0x1df)]=_0x17a599['optionalfeature'],_0x4cac73;}static async[_0x6d3fa9(0x19c)](_0x4387af,_0x1016ad){const _0x444d5e=_0x6d3fa9;return _0x1016ad={..._0x1016ad},!_0x4387af&&(_0x1016ad['race']||_0x1016ad[_0x444d5e(0x1ec)])&&(_0x1016ad[_0x444d5e(0x1b4)]=MiscUtil['copy'](_0x1016ad[_0x444d5e(0x1b4)]),_0x1016ad[_0x444d5e(0x1b4)]=await Charactermancer_Race_Util[_0x444d5e(0x1cb)](_0x1016ad)),_0x1016ad['class']&&(_0x1016ad[_0x444d5e(0x188)]=await PageFilterClassesFoundry[_0x444d5e(0x192)]({'class':_0x1016ad[_0x444d5e(0x188)],'subclass':_0x1016ad[_0x444d5e(0x165)],'classFeature':_0x1016ad[_0x444d5e(0x1d3)],'subclassFeature':_0x1016ad['subclassFeature']}),_0x1016ad[_0x444d5e(0x188)][_0x444d5e(0x222)](_0x25fceb=>PageFilterClasses[_0x444d5e(0x1b3)](_0x25fceb))),_0x1016ad;}}ActorCharactermancerSourceSelector[_0x6d3fa9(0x185)]=[_0x6d3fa9(0x188),_0x6d3fa9(0x165),_0x6d3fa9(0x1b4),_0x6d3fa9(0x1ec),_0x6d3fa9(0x1be),_0x6d3fa9(0x157),_0x6d3fa9(0x1be),_0x6d3fa9(0x12e),_0x6d3fa9(0x1a0),_0x6d3fa9(0x1df)];class ActorCharactermancer extends Application{constructor(_0x5617e8){const _0x3f7f7b=_0x6d3fa9;_0x5617e8=_0x5617e8||{},super({'title':_0x3f7f7b(0x237),'template':SharedConsts[_0x3f7f7b(0x12f)]+_0x3f7f7b(0x13f),'width':Util[_0x3f7f7b(0x231)](0x4b0),'height':Util['getMaxWindowHeight'](),'resizable':!![]});const _0x1b916b={};_0x5617e8['data'][_0x3f7f7b(0x222)](_0xbf716d=>{const _0x369c5a=_0x3f7f7b;Object[_0x369c5a(0x1e0)](_0xbf716d)['forEach'](([_0x5efd0a,_0x4afbf9])=>{const _0x110087=_0x369c5a;if(!_0x4afbf9||!(_0x4afbf9 instanceof Array))return;if(_0x1b916b[_0x5efd0a])_0x1b916b[_0x5efd0a]=[..._0x1b916b[_0x5efd0a],...MiscUtil['copy'](_0x4afbf9)];else _0x1b916b[_0x5efd0a]=MiscUtil[_0x110087(0x23f)](_0x4afbf9);});}),this[_0x3f7f7b(0x159)]=new ActorCharactermancer[(_0x3f7f7b(0x217))]({'actor':_0x5617e8[_0x3f7f7b(0x13c)],'data':_0x1b916b,'cbPostSave':this[_0x3f7f7b(0x209)][_0x3f7f7b(0x16c)](this)});}[_0x6d3fa9(0x139)](_0x2b3566){const _0x3fb062=_0x6d3fa9;this[_0x3fb062(0x159)][_0x3fb062(0x191)](_0x2b3566);}}ActorCharactermancer['Component']=class extends ActorCharactermancerBaseComponent{constructor(_0x551a4d){const _0x14049e=_0x6d3fa9;_0x551a4d=_0x551a4d||{},super(),TabUiUtil['decorate'](this),this[_0x14049e(0x1bb)]=_0x551a4d[_0x14049e(0x13c)],this[_0x14049e(0x218)]=_0x551a4d['data'],this[_0x14049e(0x17a)]=_0x551a4d[_0x14049e(0x203)],this[_0x14049e(0x1db)]=new Charactermancer_FeatureSourceTracker(),this[_0x14049e(0x1fd)]=Charactermancer_Util[_0x14049e(0x23c)](this[_0x14049e(0x1bb)])>0x0,this['_tabs']=null;const {tabClass:_0xd26197,tabRace:_0x33b74c,tabAbilities:_0x419c11,tabBackground:_0xc083ec,tabEquipment:_0x480d36,tabShop:_0x31b0b5,tabSpells:_0x4bd477,tabFeats:_0x5a539f}=this['_cons_initTabs']();this[_0x14049e(0x213)]=new ActorCharactermancerClass({'actor':_0x551a4d[_0x14049e(0x13c)],'data':_0x551a4d[_0x14049e(0x180)],'parent':this,'tabClass':_0xd26197}),this[_0x14049e(0x1ab)]=new ActorCharactermancerRace({'actor':_0x551a4d['actor'],'data':_0x551a4d['data'],'parent':this,'tabRace':_0x33b74c}),this[_0x14049e(0x202)]=new ActorCharactermancerAbility({'actor':_0x551a4d['actor'],'data':_0x551a4d[_0x14049e(0x180)],'parent':this,'tabAbilities':_0x419c11}),this[_0x14049e(0x23b)]=new ActorCharactermancerBackground({'actor':_0x551a4d['actor'],'data':_0x551a4d['data'],'parent':this,'tabBackground':_0xc083ec}),this[_0x14049e(0x219)]=new ActorCharactermancerEquipment({'actor':_0x551a4d[_0x14049e(0x13c)],'data':_0x551a4d[_0x14049e(0x180)],'parent':this,'tabEquipment':_0x480d36,'tabShop':_0x31b0b5}),this['_compSpell']=new ActorCharactermancerSpell({'actor':_0x551a4d['actor'],'data':_0x551a4d[_0x14049e(0x180)],'parent':this,'tabSpells':_0x4bd477}),this['_compFeat']=new ActorCharactermancerFeat({'actor':_0x551a4d[_0x14049e(0x13c)],'data':_0x551a4d[_0x14049e(0x180)],'parent':this,'tabFeats':_0x5a539f}),this['_conInitialWithModifiers']=null,this[_0x14049e(0x1a9)]=null;}[_0x6d3fa9(0x1c5)](){const _0xbb5075=_0x6d3fa9;this[_0xbb5075(0x1fd)]?this[_0xbb5075(0x131)]=[_0xbb5075(0x14b),'Abilities','Spells',_0xbb5075(0x22b)][_0xbb5075(0x14d)]((_0x25505e,_0x28361e)=>this[_0xbb5075(0x1a4)](_0x28361e,_0x25505e,_0xbb5075(0x18b),{'hasBorder':!![]})):this['_tabs']=[_0xbb5075(0x14b),'Race','Abilities',_0xbb5075(0x1d8),_0xbb5075(0x20b),_0xbb5075(0x169),_0xbb5075(0x1e4),'Feats'][_0xbb5075(0x14d)]((_0x9ee694,_0x4fd282)=>this[_0xbb5075(0x1a4)](_0x4fd282,_0x9ee694,_0xbb5075(0x18b),{'hasBorder':!![]}));if(this[_0xbb5075(0x1fd)]){const [_0x137a70,_0x298101,_0x312e90,_0xe7ce39]=this[_0xbb5075(0x131)];return{'tabClass':_0x137a70,'tabAbilities':_0x298101,'tabSpells':_0x312e90,'tabFeats':_0xe7ce39};}else{const [_0xb2f84d,_0x24431a,_0x5bb2a2,_0x2f75d9,_0x4baa48,_0x1c001a,_0x46710f,_0xcd75bf]=this[_0xbb5075(0x131)];return{'tabClass':_0xb2f84d,'tabRace':_0x24431a,'tabAbilities':_0x5bb2a2,'tabBackground':_0x2f75d9,'tabEquipment':_0x4baa48,'tabShop':_0x1c001a,'tabSpells':_0x46710f,'tabFeats':_0xcd75bf};}}get[_0x6d3fa9(0x16a)](){const _0x1c3eb3=_0x6d3fa9;return this[_0x1c3eb3(0x1db)];}get['compClass'](){return this['_compClass'];}get[_0x6d3fa9(0x233)](){return this['_compRace'];}get[_0x6d3fa9(0x1a2)](){const _0x1a11eb=_0x6d3fa9;return this[_0x1a11eb(0x23b)];}get['compEquipment'](){return this['_compEquipment'];}get[_0x6d3fa9(0x18f)](){return this['_compSpell'];}get[_0x6d3fa9(0x221)](){return this['_compFeat'];}get[_0x6d3fa9(0x1a3)](){const _0x34a10d=_0x6d3fa9;return this[_0x34a10d(0x202)];}set[_0x6d3fa9(0x168)](_0x585ea8){const _0x21d63a=_0x6d3fa9;this[_0x21d63a(0x244)](_0x585ea8);}['render'](_0xd978a1){const _0x2df37b=_0x6d3fa9;this[_0x2df37b(0x16e)](_0xd978a1),this[_0x2df37b(0x249)]()['then'](()=>this[_0x2df37b(0x1c0)](_0xd978a1))[_0x2df37b(0x241)](_0x4fb8c0=>{const _0x305613=_0x2df37b;ui[_0x305613(0x14c)][_0x305613(0x208)]('Failed\x20to\x20load!\x20'+VeCt[_0x305613(0x141)]);throw _0x4fb8c0;});}['_render_loading'](_0x2768ae){const _0x388117=_0x6d3fa9;_0x2768ae[_0x388117(0x1ea)](_0x388117(0x146));}async[_0x6d3fa9(0x249)](){const _0x2bdeb3=_0x6d3fa9;await this['_compRace'][_0x2bdeb3(0x1e6)](),await this[_0x2bdeb3(0x23b)]['pLoad'](),await this[_0x2bdeb3(0x213)][_0x2bdeb3(0x1e6)](),await this[_0x2bdeb3(0x123)][_0x2bdeb3(0x1e6)](),await this[_0x2bdeb3(0x212)][_0x2bdeb3(0x1e6)]();}async[_0x6d3fa9(0x1c0)](_0x55b42d){const _0x58d447=_0x6d3fa9;_0x55b42d[_0x58d447(0x21e)]();const _0x324dcc=$(_0x58d447(0x199))[_0x58d447(0x12b)](()=>this['_doSwitchToPrevTab'](_0x58d447(0x18b))),_0x193501=$(_0x58d447(0x11f))[_0x58d447(0x12b)](()=>this[_0x58d447(0x21a)](_0x58d447(0x18b))),_0x1389bc=()=>{const _0x1e972f=_0x58d447;_0x324dcc['prop'](_0x1e972f(0x1f7),!this[_0x1e972f(0x1c4)]('state')),_0x193501['prop'](_0x1e972f(0x1f7),!this['_hasNextTab'](_0x1e972f(0x18b)));};this[_0x58d447(0x245)](_0x58d447(0x18b),_0x1389bc),_0x1389bc();const _0x1fe965=$('<button\x20class=\x22btn\x20btn-5et\x20btn-primary\x22>Finalize</button>')[_0x58d447(0x12b)](()=>{const _0x2fd30d=_0x58d447;_0x1fe965[_0x2fd30d(0x1b5)](_0x2fd30d(0x1f7),!![]);try{this['_pHandleSaveClick']();}finally{_0x1fe965[_0x2fd30d(0x1b5)](_0x2fd30d(0x1f7),![]);}});$$`<div class="w-100 no-shrink ui-tab__wrp-tab-heads--border">
			${this[_0x58d447(0x131)][_0x58d447(0x14d)](_0x202fe2=>_0x202fe2['$btnTab']['addClass'](_0x58d447(0x1e9)))}
		</div>`[_0x58d447(0x22a)](_0x55b42d),this[_0x58d447(0x131)]['forEach'](_0x4cfee5=>_0x4cfee5[_0x58d447(0x1ac)][_0x58d447(0x22a)](_0x55b42d)),_0x55b42d[_0x58d447(0x1ea)](_0x58d447(0x22c)),$$`<div class="w-100 no-shrink flex-h-right pr-3">
			<div class="flex-v-center btn-group">${_0x324dcc}${_0x193501}</div>
			<div class="vr-2"></div>
			${_0x1fe965}
		</div>`[_0x58d447(0x22a)](_0x55b42d),this[_0x58d447(0x133)](),this[_0x58d447(0x22d)](),this[_0x58d447(0x1af)](),this[_0x58d447(0x171)](),await this['_render_pRenderTabEquipmentStarting'](),await this[_0x58d447(0x149)](),await this[_0x58d447(0x196)](),this[_0x58d447(0x211)]();}[_0x6d3fa9(0x133)](){const _0x240134=_0x6d3fa9;this[_0x240134(0x213)][_0x240134(0x191)]();}[_0x6d3fa9(0x22d)](){const _0x5a4fd5=_0x6d3fa9;this[_0x5a4fd5(0x1ab)][_0x5a4fd5(0x191)]();}['_pRender_renderTabAbilities'](){const _0x500361=_0x6d3fa9;this[_0x500361(0x202)][_0x500361(0x191)]();}[_0x6d3fa9(0x171)](){const _0x5f5265=_0x6d3fa9;this[_0x5f5265(0x23b)][_0x5f5265(0x191)]();}async[_0x6d3fa9(0x1c2)](){const _0x256d20=_0x6d3fa9;await this['_compEquipment'][_0x256d20(0x215)]();}async[_0x6d3fa9(0x149)](){const _0x522372=_0x6d3fa9;await this['_compEquipment'][_0x522372(0x122)]();}async['_pRender_pRenderTabSpells'](){const _0xc602bd=_0x6d3fa9;await this[_0xc602bd(0x123)][_0xc602bd(0x194)]();}['_pRender_renderTabFeats'](){const _0x408c2f=_0x6d3fa9;this[_0x408c2f(0x212)][_0x408c2f(0x191)]();}async['_pHandleSaveClick'](){const _0xed647=_0x6d3fa9,_0x3b56da=await InputUiUtil[_0xed647(0x1b0)]({'title':'Are\x20You\x20Sure?'});if(!_0x3b56da)return;const _0x518e9a=[this[_0xed647(0x226)]['bind'](this),this[_0xed647(0x1fd)]?null:this['_pHandleSaveClick_race']['bind'](this),this[_0xed647(0x172)]['bind'](this),this[_0xed647(0x1fd)]?null:this[_0xed647(0x19b)][_0xed647(0x16c)](this),this[_0xed647(0x1b7)][_0xed647(0x16c)](this),this[_0xed647(0x1cf)][_0xed647(0x16c)](this),this[_0xed647(0x1fd)]?null:this[_0xed647(0x239)][_0xed647(0x16c)](this),this[_0xed647(0x1ef)]['bind'](this)][_0xed647(0x19d)](Boolean),_0x3db000=new UtilApplications[(_0xed647(0x17e))]({'titleInitial':_0xed647(0x176),'titleComplete':_0xed647(0x242),'totalTasks':_0x518e9a[_0xed647(0x155)]});await _0x3db000['pInit']();const _0x21fe94={'_':0x0};try{await this[_0xed647(0x240)](_0x518e9a,_0x3db000,_0x21fe94);}catch(_0x3d38f7){_0x3db000[_0xed647(0x210)]({'message':'Build\x20failed!\x20'+VeCt[_0xed647(0x141)],'count':_0x21fe94['_'],'isError':!![]});throw _0x3d38f7;}}async[_0x6d3fa9(0x240)](_0x4b2b52,_0x41599f,_0x5daaf2){const _0x425a4c=_0x6d3fa9,_0x4e2719=new ActorCharactermancer[(_0x425a4c(0x217))][(_0x425a4c(0x11e))]({'progressWidget':_0x41599f,'ptrTaskProgress':_0x5daaf2});for(const _0x50a3df of _0x4b2b52)await _0x50a3df(_0x4e2719);_0x41599f[_0x425a4c(0x210)]({'message':_0x425a4c(0x1fc),'count':_0x5daaf2['_']});}async[_0x6d3fa9(0x226)](_0x485738){const _0x3c4abe=_0x6d3fa9,{progressWidget:_0x2f87e9,ptrTaskProgress:_0x54a29a}=_0x485738;_0x2f87e9[_0x3c4abe(0x210)]({'message':_0x3c4abe(0x163),'count':++_0x54a29a['_']});if(_0x2f87e9['isCancelled'])return _0x2f87e9[_0x3c4abe(0x210)]({'message':_0x3c4abe(0x235)});if(this['_isLevelUp']){const {con:_0x383e29}=Charactermancer_Util['getCurrentAbilityScores'](this['_actor']);this['_conInitialWithModifiers']=_0x383e29;}const _0x5afc12=this[_0x3c4abe(0x202)][_0x3c4abe(0x1f2)][_0x3c4abe(0x15e)](),_0x32234f={'data':{'abilities':{...Parser[_0x3c4abe(0x1ca)][_0x3c4abe(0x1d1)](_0xfd4cd8=>({[_0xfd4cd8]:{'value':_0x5afc12?.[_0x3c4abe(0x1fb)]?.[_0x5afc12[_0x3c4abe(0x145)]]?.[_0xfd4cd8]||0x0}}))}}};await this[_0x3c4abe(0x1bb)][_0x3c4abe(0x21d)](_0x32234f);if(this[_0x3c4abe(0x1fd)]){const {con:_0x28d0fb}=Charactermancer_Util[_0x3c4abe(0x134)](this[_0x3c4abe(0x1bb)]);this[_0x3c4abe(0x1a9)]=_0x28d0fb;}_0x2f87e9[_0x3c4abe(0x210)]({'message':_0x3c4abe(0x238),'count':_0x54a29a['_']});if(_0x2f87e9[_0x3c4abe(0x1cd)])return _0x2f87e9[_0x3c4abe(0x210)]({'message':_0x3c4abe(0x235),'count':_0x54a29a['_']});}async[_0x6d3fa9(0x147)](_0x119fad){const _0x50acd5=_0x6d3fa9,{progressWidget:_0x19964e,ptrTaskProgress:_0x33fde5}=_0x119fad;_0x19964e[_0x50acd5(0x210)]({'message':'Importing\x20race...','count':++_0x33fde5['_']});const _0x585c2d=this[_0x50acd5(0x1ab)]['getRace_']();if(_0x585c2d){const _0x2d9130=new ImportListRace({'actor':this[_0x50acd5(0x1bb)]});await _0x2d9130[_0x50acd5(0x1a1)]();const _0x29e4a8=MiscUtil[_0x50acd5(0x23f)](_0x585c2d);delete _0x29e4a8[_0x50acd5(0x1c7)],delete _0x29e4a8[_0x50acd5(0x1c9)],delete _0x29e4a8[_0x50acd5(0x15d)];if(this[_0x50acd5(0x1ab)][_0x50acd5(0x12a)])_0x29e4a8[_0x50acd5(0x19a)]=[(await this[_0x50acd5(0x1ab)]['compRaceSize'][_0x50acd5(0x1e5)]())[_0x50acd5(0x180)]];else delete _0x29e4a8[_0x50acd5(0x19a)];await this['_pHandleSaveClick_pDoApplySkills'](this[_0x50acd5(0x1ab)][_0x50acd5(0x13a)],_0x29e4a8,_0x50acd5(0x138)),await this[_0x50acd5(0x189)](this[_0x50acd5(0x1ab)]['compRaceLanguageProficiencies'],_0x29e4a8,'languageProficiencies'),await this[_0x50acd5(0x189)](this['_compRace'][_0x50acd5(0x23e)],_0x29e4a8,_0x50acd5(0x154)),await this[_0x50acd5(0x189)](this[_0x50acd5(0x1ab)]['compRaceArmorProficiencies'],_0x29e4a8,_0x50acd5(0x247)),await this[_0x50acd5(0x189)](this['_compRace'][_0x50acd5(0x1a8)],_0x29e4a8,_0x50acd5(0x220)),delete _0x29e4a8[_0x50acd5(0x136)];if(this[_0x50acd5(0x1ab)][_0x50acd5(0x1fe)]){const _0x1a4118=await this['_compRace'][_0x50acd5(0x1fe)][_0x50acd5(0x1e5)](),_0xbe1ef1=[];Object['entries'](_0x1a4118[_0x50acd5(0x180)])[_0x50acd5(0x19d)](([,_0x2ad128])=>_0x2ad128)['forEach'](([_0x49c82b])=>_0xbe1ef1[_0x50acd5(0x12d)](_0x49c82b));if(_0xbe1ef1[_0x50acd5(0x155)])_0x29e4a8[_0x50acd5(0x136)]=_0xbe1ef1;}delete _0x29e4a8[_0x50acd5(0x125)];if(this[_0x50acd5(0x1ab)]['compRaceDamageResistance']){const _0x338f6f=await this['_compRace']['compRaceDamageResistance'][_0x50acd5(0x1e5)](),_0x2cc7f3=[];Object[_0x50acd5(0x1e0)](_0x338f6f['data'])[_0x50acd5(0x19d)](([,_0x1d622e])=>_0x1d622e)[_0x50acd5(0x222)](([_0x9d6811])=>_0x2cc7f3['push'](_0x9d6811));if(_0x2cc7f3['length'])_0x29e4a8[_0x50acd5(0x125)]=_0x2cc7f3;}delete _0x29e4a8[_0x50acd5(0x1ce)];if(this[_0x50acd5(0x1ab)][_0x50acd5(0x1aa)]){const _0x5bccf1=await this[_0x50acd5(0x1ab)][_0x50acd5(0x1aa)][_0x50acd5(0x1e5)](),_0x15a920=[];Object[_0x50acd5(0x1e0)](_0x5bccf1[_0x50acd5(0x180)])[_0x50acd5(0x19d)](([,_0x1fde86])=>_0x1fde86)[_0x50acd5(0x222)](([_0x50f49c])=>_0x15a920[_0x50acd5(0x12d)](_0x50f49c));if(_0x15a920[_0x50acd5(0x155)])_0x29e4a8[_0x50acd5(0x1ce)]=_0x15a920;}delete _0x29e4a8[_0x50acd5(0x130)];if(this[_0x50acd5(0x1ab)][_0x50acd5(0x128)]){const _0x18f2fd=await this[_0x50acd5(0x1ab)]['compRaceConditionImmunity'][_0x50acd5(0x1e5)](),_0x1327c4=[];Object[_0x50acd5(0x1e0)](_0x18f2fd['data'])[_0x50acd5(0x19d)](([,_0x3a8997])=>_0x3a8997)[_0x50acd5(0x222)](([_0x5676dc])=>_0x1327c4[_0x50acd5(0x12d)](_0x5676dc));if(_0x1327c4['length'])_0x29e4a8[_0x50acd5(0x130)]=_0x1327c4;}await _0x2d9130[_0x50acd5(0x20c)](_0x29e4a8,{'isCharactermancer':!![]});}_0x19964e[_0x50acd5(0x210)]({'message':_0x50acd5(0x1c8),'count':_0x33fde5['_']});if(_0x19964e[_0x50acd5(0x1cd)])return _0x19964e[_0x50acd5(0x210)]({'message':_0x50acd5(0x235),'count':_0x33fde5['_']});}async[_0x6d3fa9(0x172)](_0x434686){const _0x5b01ce=_0x6d3fa9,{progressWidget:_0x1dfda2,ptrTaskProgress:_0x4fb8b6}=_0x434686;_0x1dfda2[_0x5b01ce(0x210)]({'message':_0x5b01ce(0x129),'count':++_0x4fb8b6['_']});const _0xbe7d7d=[];for(let _0x814ed7=0x0;_0x814ed7<this[_0x5b01ce(0x213)]['state'][_0x5b01ce(0x214)]+0x1;++_0x814ed7){const {propIxClass:_0xc83630,propIxSubclass:_0xeb3306}=ActorCharactermancerBaseComponent[_0x5b01ce(0x20a)](_0x814ed7),_0x4f0e63=this[_0x5b01ce(0x213)][_0x5b01ce(0x198)]({'propIxClass':_0xc83630});if(!_0x4f0e63)continue;const _0x3be42c=this[_0x5b01ce(0x213)][_0x5b01ce(0x227)]({'cls':_0x4f0e63,'propIxSubclass':_0xeb3306});_0xbe7d7d[_0x5b01ce(0x12d)]({'ix':_0x814ed7,'cls':_0x4f0e63,'sc':_0x3be42c,'isPrimary':this[_0x5b01ce(0x213)][_0x5b01ce(0x18b)][_0x5b01ce(0x1b8)]===_0x814ed7});}if(_0xbe7d7d[_0x5b01ce(0x155)]){_0xbe7d7d[_0x5b01ce(0x17c)]((_0x1df7bb,_0x27981d)=>SortUtil['ascSort'](Number(_0x27981d[_0x5b01ce(0x1d6)]),Number(_0x1df7bb[_0x5b01ce(0x1d6)]))||SortUtil[_0x5b01ce(0x121)](_0x1df7bb['cls'][_0x5b01ce(0x152)],_0x27981d['cls']['name']));const _0x20be28=new ImportListClass({'actor':this[_0x5b01ce(0x1bb)]});await _0x20be28[_0x5b01ce(0x1a1)]();const _0x363672=this[_0x5b01ce(0x213)][_0x5b01ce(0x1f9)][_0x5b01ce(0x175)][_0x5b01ce(0x132)][_0x5b01ce(0x161)]();for(let _0x251de9=0x0;_0x251de9<_0xbe7d7d[_0x5b01ce(0x155)];++_0x251de9){const {ix:_0x51233f,cls:_0x21e46b,sc:_0x87070e,isPrimary:_0x479a53}=_0xbe7d7d[_0x251de9],_0xe77ad6=MiscUtil[_0x5b01ce(0x23f)](_0x21e46b),_0x1659b9=_0x87070e?MiscUtil[_0x5b01ce(0x23f)](_0x87070e):null;if(_0x1659b9)delete _0x1659b9[_0x5b01ce(0x15d)];if(_0x1659b9)_0xe77ad6['subclasses']=[_0x1659b9];else _0xe77ad6[_0x5b01ce(0x120)]=[];_0xe77ad6['_foundryStartingProficiencyMode']=_0x251de9===0x0?Charactermancer_Class_ProficiencyImportModeSelect[_0x5b01ce(0x243)]:Charactermancer_Class_ProficiencyImportModeSelect[_0x5b01ce(0x1d7)];if(this[_0x5b01ce(0x213)][_0x5b01ce(0x126)][_0x51233f])_0xe77ad6[_0x5b01ce(0x1a5)]=await this[_0x5b01ce(0x213)][_0x5b01ce(0x126)][_0x51233f]['pGetFormData']()['data'];_0xe77ad6[_0x5b01ce(0x1b2)]=await this[_0x5b01ce(0x213)][_0x5b01ce(0x135)][_0x51233f][_0x5b01ce(0x1e5)]()[_0x5b01ce(0x180)],_0xe77ad6[_0x5b01ce(0x21f)]=[];for(const _0x568754 of this['_compClass'][_0x5b01ce(0x193)][_0x51233f]){const _0x5dc035=await _0x568754[_0x5b01ce(0x1e5)]();if(_0x5dc035?.[_0x5b01ce(0x180)]?.['features']?.[_0x5b01ce(0x155)])_0xe77ad6[_0x5b01ce(0x21f)][_0x5b01ce(0x12d)](..._0x5dc035['data']['features']);const _0x5dcf6c={'data':{}};Charactermancer_Class_FeatureOptionsSelect[_0x5b01ce(0x18d)](this['_actor'],_0x5dcf6c,_0x5dc035);if(Object[_0x5b01ce(0x1f8)](_0x5dcf6c[_0x5b01ce(0x180)])[_0x5b01ce(0x155)])await this[_0x5b01ce(0x1bb)][_0x5b01ce(0x21d)](_0x5dcf6c);}this[_0x5b01ce(0x1fd)]&&(_0xe77ad6['_foundryConInitial']=this[_0x5b01ce(0x19f)],_0xe77ad6[_0x5b01ce(0x234)]=this['_conFinalWithModifiers']);_0xe77ad6[_0x5b01ce(0x15f)]=!![];const _0x4f7c62=_0x479a53?[_0x5b01ce(0x1ad),_0x5b01ce(0x1ae)]:['multiclassing',_0x5b01ce(0x246),_0x5b01ce(0x1ae)];await this[_0x5b01ce(0x140)](this[_0x5b01ce(0x213)][_0x5b01ce(0x18c)][_0x51233f],_0xe77ad6,..._0x4f7c62),delete _0xe77ad6[_0x5b01ce(0x1d4)],await _0x20be28['pImportClass'](_0xe77ad6,{'filterValues':_0x363672,'isCharactermancer':!![]});}}_0x1dfda2[_0x5b01ce(0x210)]({'message':_0x5b01ce(0x1bc),'count':_0x4fb8b6['_']});if(_0x1dfda2[_0x5b01ce(0x1cd)])return _0x1dfda2[_0x5b01ce(0x210)]({'message':_0x5b01ce(0x235),'count':_0x4fb8b6['_']});}async[_0x6d3fa9(0x19b)](_0x1d6dbc){const _0x29d325=_0x6d3fa9,{progressWidget:_0x2f4757,ptrTaskProgress:_0x377497}=_0x1d6dbc;_0x2f4757[_0x29d325(0x210)]({'message':'Importing\x20background...','count':++_0x377497['_']});const _0x4b82b5=this[_0x29d325(0x218)][_0x29d325(0x157)][this['_compBackground'][_0x29d325(0x18b)][_0x29d325(0x207)]];if(_0x4b82b5){const _0x3f2c04=new ImportListBackground({'actor':this['_actor']});await _0x3f2c04['pInit']();const _0x440edc=MiscUtil[_0x29d325(0x23f)](_0x4b82b5);if(this['_compBackground'][_0x29d325(0x167)])_0x440edc[_0x29d325(0x224)]=await this['_compBackground'][_0x29d325(0x167)][_0x29d325(0x1e5)]();else _0x440edc[_0x29d325(0x224)]={'isFormComplete':!![]};_0x440edc[_0x29d325(0x13d)]=!![],_0x440edc[_0x29d325(0x216)]=!![],await this['_pHandleSaveClick_pDoApplySkills'](this[_0x29d325(0x23b)][_0x29d325(0x21b)],_0x440edc,_0x29d325(0x138)),await this[_0x29d325(0x189)](this[_0x29d325(0x23b)]['isCustomizeLanguagesTools']?this[_0x29d325(0x23b)]['compBackgroundLanguageToolProficiencies']:this['_compBackground'][_0x29d325(0x15c)],_0x440edc,_0x29d325(0x22f)),await this['_pHandleSaveClick_pDoApplyOtherProficiencies'](this[_0x29d325(0x23b)][_0x29d325(0x144)]?this[_0x29d325(0x23b)]['compBackgroundLanguageToolProficiencies']:this[_0x29d325(0x23b)][_0x29d325(0x19e)],_0x440edc,_0x29d325(0x154)),this[_0x29d325(0x23b)][_0x29d325(0x1eb)]?_0x440edc['_foundryFormDataCharacteristics']=await this[_0x29d325(0x23b)][_0x29d325(0x1eb)][_0x29d325(0x1e5)]():_0x440edc[_0x29d325(0x21c)]=!![],delete _0x440edc[_0x29d325(0x1d4)],await _0x3f2c04[_0x29d325(0x20c)](_0x440edc,{'isCharactermancer':!![]});}_0x2f4757[_0x29d325(0x210)]({'message':_0x29d325(0x1e1),'count':_0x377497['_']});if(_0x2f4757['isCancelled'])return _0x2f4757['setProgress']({'message':'Build\x20cancelled.','count':_0x377497['_']});}async[_0x6d3fa9(0x1b7)](_0x1242a0){const _0x497f61=_0x6d3fa9,{progressWidget:_0x2436b4,ptrTaskProgress:_0xd6329d}=_0x1242a0;_0x2436b4[_0x497f61(0x210)]({'message':_0x497f61(0x197),'count':++_0xd6329d['_']}),_0x1242a0[_0x497f61(0x187)]=[];const _0x4deb3f=new Set(this[_0x497f61(0x212)][_0x497f61(0x228)]());for(let _0x46c593=0x0;_0x46c593<this[_0x497f61(0x212)][_0x497f61(0x18b)][_0x497f61(0x17f)]+0x1;++_0x46c593){const {propIxFeat:_0x939b40}=ActorCharactermancerBaseComponent[_0x497f61(0x1e2)](_0x46c593,_0x497f61(0x1c7));if(!_0x4deb3f[_0x497f61(0x1fa)](_0x939b40))continue;_0x1242a0[_0x497f61(0x187)]['push']({'propIxFeat':_0x939b40,'namespace':_0x497f61(0x1c7),'ix':_0x46c593});}for(let _0x224c6c=0x0;_0x224c6c<this['_compFeat'][_0x497f61(0x18b)][_0x497f61(0x1bd)]+0x1;++_0x224c6c){const {propIxFeat:_0xef0cb0}=ActorCharactermancerBaseComponent['feat_getProps'](_0x224c6c,'race');if(!_0x4deb3f[_0x497f61(0x1fa)](_0xef0cb0))continue;_0x1242a0[_0x497f61(0x187)]['push']({'propIxFeat':_0xef0cb0,'namespace':'race','ix':_0x224c6c});}for(let _0x55bdbe=0x0;_0x55bdbe<this[_0x497f61(0x212)]['state'][_0x497f61(0x1e8)]+0x1;++_0x55bdbe){const {propIxFeat:_0x2cb357}=ActorCharactermancerBaseComponent['feat_getProps'](_0x55bdbe,_0x497f61(0x23d));if(!_0x4deb3f[_0x497f61(0x1fa)](_0x2cb357))continue;_0x1242a0[_0x497f61(0x187)][_0x497f61(0x12d)]({'propIxFeat':_0x2cb357,'namespace':_0x497f61(0x23d),'ix':_0x55bdbe});}const _0x2f80a5=this[_0x497f61(0x202)][_0x497f61(0x1f2)][_0x497f61(0x1f6)]();if(_0x1242a0[_0x497f61(0x187)][_0x497f61(0x155)]){const _0x1962c5=new ImportListFeat({'actor':this['_actor']});await _0x1962c5[_0x497f61(0x1a1)]();for(const _0xe3ab52 of _0x1242a0['featMetas']){const _0x3d5d6b=this[_0x497f61(0x218)]['feat'][this[_0x497f61(0x212)][_0x497f61(0x18b)][_0xe3ab52[_0x497f61(0x1d9)]]];if(!_0x3d5d6b)continue;const _0xc076c=MiscUtil[_0x497f61(0x23f)](_0x3d5d6b);if(_0x2f80a5[_0x497f61(0x1c9)][_0xe3ab52[_0x497f61(0x1cc)]]?.[_0xe3ab52['ix']]){const _0xdef434=_0x2f80a5['feats'][_0xe3ab52[_0x497f61(0x1cc)]][_0xe3ab52['ix']];_0xc076c[_0x497f61(0x1c7)]=[_0xdef434[_0x497f61(0x1dd)]]['filter'](Boolean),_0xc076c[_0x497f61(0x1f4)]=_0xc076c[_0x497f61(0x1c7)][0x0]||{},Renderer['feat'][_0x497f61(0x166)](_0xc076c);}delete _0xc076c['ability'],delete _0xc076c[_0x497f61(0x15d)],await this[_0x497f61(0x140)](this[_0x497f61(0x212)][_0x497f61(0x1d2)][_0xe3ab52['ix']],_0xc076c,_0x497f61(0x138)),await this[_0x497f61(0x189)](this[_0x497f61(0x212)][_0x497f61(0x156)][_0xe3ab52['ix']],_0xc076c,_0x497f61(0x22f)),await this['_pHandleSaveClick_pDoApplyOtherProficiencies'](this[_0x497f61(0x212)][_0x497f61(0x17d)][_0xe3ab52['ix']],_0xc076c,_0x497f61(0x154)),await this[_0x497f61(0x189)](this['_compFeat'][_0x497f61(0x1b9)][_0xe3ab52['ix']],_0xc076c,'armorProficiencies'),await this['_pHandleSaveClick_pDoApplyOtherProficiencies'](this[_0x497f61(0x212)][_0x497f61(0x179)][_0xe3ab52['ix']],_0xc076c,_0x497f61(0x220)),await _0x1962c5[_0x497f61(0x20c)](_0xc076c,{'isCharactermancer':!![]});}}_0x2436b4[_0x497f61(0x210)]({'message':'Imported\x20feats.','count':_0xd6329d['_']});if(_0x2436b4[_0x497f61(0x1cd)])return _0x2436b4['setProgress']({'message':'Build\x20cancelled.','count':_0xd6329d['_']});}async['_pHandleSaveClick_spells'](_0x40593e){const _0xd62d53=_0x6d3fa9,{progressWidget:_0x393412,ptrTaskProgress:_0x29cfd2}=_0x40593e;_0x393412[_0xd62d53(0x210)]({'message':'Importing\x20spells...','count':++_0x29cfd2['_']});const _0x34d7f9=this[_0xd62d53(0x213)][_0xd62d53(0x22e)](),_0x5de38b=this['_compSpell'][_0xd62d53(0x127)]||this[_0xd62d53(0x123)][_0xd62d53(0x16f)][_0xd62d53(0x161)]();for(let _0x3dfa81=0x0;_0x3dfa81<this[_0xd62d53(0x213)][_0xd62d53(0x18b)][_0xd62d53(0x214)]+0x1;++_0x3dfa81){const {propIxClass:_0x4a39b8,propIxSubclass:_0x325970}=ActorCharactermancerBaseComponent[_0xd62d53(0x20a)](_0x3dfa81),_0x379c8d=this[_0xd62d53(0x213)][_0xd62d53(0x198)]({'propIxClass':_0x4a39b8});if(!_0x379c8d)continue;const _0x30dec2=this[_0xd62d53(0x213)]['getSubclass_']({'cls':_0x379c8d,'propIxSubclass':_0x325970}),_0x57ee36=await this[_0xd62d53(0x213)][_0xd62d53(0x135)][_0x3dfa81][_0xd62d53(0x1e5)]()[_0xd62d53(0x180)],_0x147c5e=Math[_0xd62d53(0x148)](..._0x57ee36)+0x1;if(this[_0xd62d53(0x123)][_0xd62d53(0x229)][_0x3dfa81]){const _0x57aa0a=await this[_0xd62d53(0x123)]['compsSpellSpells'][_0x3dfa81][_0xd62d53(0x1e5)](_0x5de38b),_0x35632e=_0x57aa0a?.['data']?.[_0xd62d53(0x1c3)]||[];for(let _0x1a2124=0x0;_0x1a2124<_0x35632e[_0xd62d53(0x155)];++_0x1a2124){const {spell:_0x5817d7,isPrepared:_0x1e2cf4,isUpdateOnly:_0x533453,existingItemId:_0x40a83b,preparationMode:_0x4ee495,usesCurrent:_0x17f2d2,usesMax:_0xf3d29e,usesPer:_0x461737,castAtLevel:_0x5d59e3}=_0x35632e[_0x1a2124];if(_0x533453&&_0x40a83b){await DataConverterSpell[_0xd62d53(0x230)](this[_0xd62d53(0x1bb)][_0xd62d53(0x1f1)][_0xd62d53(0x1f5)](_0x40a83b),_0x1e2cf4);continue;}const _0x533534=await DataConverterSpell[_0xd62d53(0x20d)](_0x5817d7,{'isActorItem':!![],'isPrepared':_0x1e2cf4,'casterLevel':_0x147c5e,'abilityAbv':_0x379c8d[_0xd62d53(0x14e)],'preparationMode':_0x4ee495,'usesCurrent':_0x17f2d2,'usesMax':_0xf3d29e,'usesPer':_0x461737,'castAtLevel':_0x5d59e3,'parentClassName':_0x379c8d[_0xd62d53(0x152)],'parentClassSource':_0x379c8d['source'],'parentSubclassName':_0x30dec2?.[_0xd62d53(0x152)],'parentSubclassSource':_0x30dec2?.[_0xd62d53(0x183)]}),_0x2fa681=await this[_0xd62d53(0x1bb)][_0xd62d53(0x18a)](_0xd62d53(0x1da),_0x533534,{});}}if(!_0x30dec2)continue;if(this['_compSpell'][_0xd62d53(0x150)][_0x3dfa81]){const _0x37288d=await this[_0xd62d53(0x123)][_0xd62d53(0x150)][_0x3dfa81][_0xd62d53(0x1e5)]();await this[_0xd62d53(0x182)]({'formData':_0x37288d,'targetLevel':_0x147c5e,'abilityAbv':_0x30dec2[_0xd62d53(0x14e)]||_0x379c8d[_0xd62d53(0x14e)]});}}if(this[_0xd62d53(0x123)][_0xd62d53(0x181)]){const _0x4f30ab=await this[_0xd62d53(0x123)][_0xd62d53(0x181)][_0xd62d53(0x1e5)]();await this[_0xd62d53(0x182)]({'formData':_0x4f30ab,'totalClassLevels':_0x34d7f9});}const _0x849c3c=this[_0xd62d53(0x202)][_0xd62d53(0x1f2)]['getFormDataAsi']();for(const _0x46ef27 of _0x40593e[_0xd62d53(0x187)]){const _0x3bbf58=this['_compSpell'][_0xd62d53(0x14f)][_0x46ef27[_0xd62d53(0x1cc)]][_0x46ef27['ix']];if(_0x3bbf58){let _0x63704b=null;if(_0x849c3c[_0xd62d53(0x1c9)][_0x46ef27[_0xd62d53(0x1cc)]]?.[_0x46ef27['ix']]){const _0x59d144=_0x849c3c[_0xd62d53(0x1c9)][_0x46ef27[_0xd62d53(0x1cc)]][_0x46ef27['ix']];_0x63704b=Object['keys'](_0x59d144['abilityChosen']||{})[0x0];}const _0x2ceeb4=await _0x3bbf58[_0xd62d53(0x1e5)]();await this['_pHandleSaveClick_pDoImportAdditionalSpells']({'formData':_0x2ceeb4,'totalClassLevels':_0x34d7f9,'parentAbilityAbv':_0x63704b});}}_0x393412[_0xd62d53(0x210)]({'message':_0xd62d53(0x1a6),'count':_0x29cfd2['_']});if(_0x393412['isCancelled'])return _0x393412[_0xd62d53(0x210)]({'message':_0xd62d53(0x235),'count':_0x29cfd2['_']});}async[_0x6d3fa9(0x239)](_0xcdee44){const _0x18f15c=_0x6d3fa9,{progressWidget:_0x11ded7,ptrTaskProgress:_0x3db74c}=_0xcdee44;_0x11ded7[_0x18f15c(0x210)]({'message':_0x18f15c(0x15a),'count':++_0x3db74c['_']});const _0x3705d9=await this[_0x18f15c(0x219)][_0x18f15c(0x15b)][_0x18f15c(0x1e5)](),_0x70860e=await this[_0x18f15c(0x219)]['compEquipmentStartingDefault'][_0x18f15c(0x1e5)](),_0x334ed9=await this['_compEquipment'][_0x18f15c(0x1b1)][_0x18f15c(0x1e5)]();if(_0x3705d9?.['data']?.[_0x18f15c(0x1ee)])await Charactermancer_StartingEquipment[_0x18f15c(0x142)](this[_0x18f15c(0x1bb)],_0x3705d9);if(_0x70860e?.[_0x18f15c(0x180)]?.[_0x18f15c(0x1ed)])await Charactermancer_StartingEquipment[_0x18f15c(0x205)](this[_0x18f15c(0x1bb)],_0x70860e);if(_0x334ed9?.[_0x18f15c(0x180)]?.[_0x18f15c(0x1ed)])await Charactermancer_StartingEquipment[_0x18f15c(0x205)](this[_0x18f15c(0x1bb)],_0x334ed9);_0x11ded7[_0x18f15c(0x210)]({'message':_0x18f15c(0x162),'count':_0x3db74c['_']});if(_0x11ded7['isCancelled'])return _0x11ded7[_0x18f15c(0x210)]({'message':_0x18f15c(0x235),'count':_0x3db74c['_']});}async[_0x6d3fa9(0x140)](_0x1faa39,_0x48fd39,..._0x19e9ac){const _0x21ea9a=_0x6d3fa9;MiscUtil['delete'](_0x48fd39,..._0x19e9ac);if(_0x1faa39){const _0x210e8e=await _0x1faa39[_0x21ea9a(0x1e5)](),_0x94246e={};Object['keys'](Parser[_0x21ea9a(0x225)])['filter'](_0x1ba3da=>_0x210e8e[_0x21ea9a(0x180)][_0x1ba3da])[_0x21ea9a(0x222)](_0x4c1d35=>_0x94246e[_0x4c1d35]=!![]),Object[_0x21ea9a(0x1f8)](_0x94246e)[_0x21ea9a(0x155)]&&MiscUtil[_0x21ea9a(0x16b)](_0x48fd39,..._0x19e9ac,[_0x94246e]);}}async[_0x6d3fa9(0x189)](_0x40c987,_0x3e7361,..._0x2b175a){const _0x4b95b6=_0x6d3fa9,_0x248a5d=_0x2b175a[_0x4b95b6(0x170)]();MiscUtil[_0x4b95b6(0x17b)](_0x3e7361,..._0x2b175a);if(!_0x40c987)return;const _0x1fdd76=await _0x40c987[_0x4b95b6(0x1e5)](),_0x373a18=_0x1fdd76?.[_0x4b95b6(0x180)]?.[_0x248a5d];if(!_0x373a18)return;const _0x19c9ce=Object[_0x4b95b6(0x1e0)](_0x373a18)[_0x4b95b6(0x1d1)](([_0x3e339a,_0x21f0ac])=>({[_0x3e339a]:_0x21f0ac}));if(Object[_0x4b95b6(0x1f8)](_0x19c9ce)[_0x4b95b6(0x155)])MiscUtil[_0x4b95b6(0x16b)](_0x3e7361,..._0x2b175a,[_0x19c9ce]);}async[_0x6d3fa9(0x182)]({formData:_0x1baed0,targetLevel:_0x99da5e,abilityAbv:_0x2f97ee,parentAbilityAbv:_0x1e8a8a}){const _0x4d8964=_0x6d3fa9,_0x5c9c0b=_0x1baed0?.[_0x4d8964(0x180)]||[];_0x2f97ee=_0x1baed0?.['abilityAbv']||_0x2f97ee;if(_0x2f97ee===_0x4d8964(0x177))_0x2f97ee=_0x1e8a8a;for(const _0x1c969d of _0x5c9c0b){if(_0x1c969d['isExpanded'])continue;let [_0x551c19,_0x193ec7]=_0x1c969d[_0x4d8964(0x223)][_0x4d8964(0x20e)]('|');if(!_0x193ec7)_0x193ec7=SRC_PHB;const _0x2dc19d=UrlUtil[_0x4d8964(0x1ba)][UrlUtil[_0x4d8964(0x1e7)]]({'name':_0x551c19,'source':_0x193ec7}),_0x178cf5=await Renderer[_0x4d8964(0x1c1)][_0x4d8964(0x24a)](UrlUtil['PG_SPELLS'],_0x193ec7,_0x2dc19d),_0x561cfe=await DataConverterSpell[_0x4d8964(0x20d)](_0x178cf5,{'isActorItem':!![],'isPrepared':_0x1c969d[_0x4d8964(0x1c6)],'preparationMode':_0x1c969d['preparationMode'],'casterLevel':_0x99da5e,'abilityAbv':_0x2f97ee,'usesCurrent':_0x1c969d[_0x4d8964(0x1f0)],'usesMax':_0x1c969d[_0x4d8964(0x1f0)],'usesPer':_0x1c969d['usesPer']}),_0x1651ef=await this[_0x4d8964(0x1bb)][_0x4d8964(0x18a)](_0x4d8964(0x1da),_0x561cfe,{});}}async[_0x6d3fa9(0x1ef)](_0x49dd87){const _0x1a9392=_0x6d3fa9,{progressWidget:_0x55b337,ptrTaskProgress:_0x492f78}=_0x49dd87;_0x55b337[_0x1a9392(0x210)]({'message':_0x1a9392(0x12c),'count':++_0x492f78['_']});if(this[_0x1a9392(0x17a)])this['_cbPostSave']();}},ActorCharactermancer['Component']['AdditionalSaveState']=class{constructor({progressWidget:_0xf0764e,ptrTaskProgress:_0x42cf5d}){const _0x44da39=_0x6d3fa9;this[_0x44da39(0x186)]=_0xf0764e,this['ptrTaskProgress']=_0x42cf5d,this['featMetas']=null;}};export{ActorCharactermancerSourceSelector,ActorCharactermancerBaseComponent};