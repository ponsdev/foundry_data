const _0x44ba=['dex_mod','source','spellLevelHigh','class_getMinMaxSpellLevel','getValues','_compsSpellAdditionalSpellFeat','cantrips\x20known','_spell_getApproximateNumberCol','actor','append','level','_changeSubclassTable','_getDefaultState','292aKvthc','_hk_onChangeSubclass_pRenderSpellTable_','spellsExpanded','pInitFilterBox','_actor','\x22\x20(originally\x20\x22','_compsSpellSpells','keys','spells','int','<div\x20class=\x22bold\x20mb-2\x22>Subclass\x20Spells\x20(','spellLevelLow','_parent','some','hideVe','_pLock','class','spell_','findIndex','_spell_isCasterClassAtLevel_additionalSpellsBlock','253425vMqyEe','forEach','_compSpellAdditionalSpellRace','_hk_onChangeSubclass_pRenderSpellTable','showVe','<button\x20class=\x22btn\x20btn-default\x20btn-xs\x20mr-1\x22\x20title=\x22Save\x20a\x20copy\x20of\x20the\x20current\x20filters,\x20to\x20use\x20when\x20filtering\x20spell\x20lists\x20during\x20import\x20of\x20&quot;prepared\x20spell&quot;\x20casters.\x20For\x20example,\x20if\x20you\x20want\x20your\x20Cleric\x27s\x20spell\x20list\x20to\x20include\x20only\x20PHB\x20spells,\x20you\x20would\x20filter\x20(using\x20the\x20interface\x20above)\x20for\x20PHB\x20spells,\x20then\x20click\x20this\x20button.\x20Note\x20that\x20all\x20the\x20spells\x20that\x20you\x20have\x20selected\x20as\x20learned\x20or\x20that\x20you\x20have\x20selected\x20as\x20prepared\x20will\x20be\x20imported\x20regardless.\x22>Set\x20Prepared\x20Spell\x20Filter</button>','custom','ixClass','_hk_shared_doCleanupClassSubclass','spellsKnownProgression','spellcastingAbility','_modalFilterSpells','bindTypingEnd','918724CkrMHm','spellsAlwaysPrepared','cantripProgression','<$level$>\x20','class_ixMax','feat','empty','compFeat','casterProgression','text','Unknown\x20variable\x20\x22','_hk_onChangeAbilityScores','$getBtnBool','spellsKnownProgressionFixedByLevel','toggleVe','getDefaultFormData','Could\x20not\x20evaluate\x20expression\x20\x22','classTableGroups','maxPrepared','class_totalLevels','compsSpellSpells','compClass','_hk_onChangeClass','spellsKnownProgressionFixedAllowLowerLevel','getCasterProgressionMeta','toLowerCase','max','includes','info','_spell_renderFeatSections','_compRace','exec','2nsMpGC','_spell_getMaxPreparedSpells','[+]','subclassSpells','html','wis_mod','$wrpTab','appendTo','subSubclassSpells','feat_getActiveFeatIxProps','_compsSpellSpellSlotLevelSelect','name','_spell_renderRaceSection','\x22)\x20as\x20a\x20number!','_spell_getExistingCasterMeta','ActorCharactermancer.spells','_spell_isClassCaster','<input\x20type=\x22search\x22\x20class=\x22search\x20w-100\x20form-control\x22\x20placeholder=\x22Find\x20spell...\x22>','getCurrentAbilityScores','additionalSpells','maxLearnedCantrips','class_getProps','pGetDereferencedClassData','val','_filterValuesSpellsCache','_spell_getApproximateSpellsKnownProgression','_filterBoxSpells','map','isIncludeUaEtcSpellLists','con_mod','getRace_','rows','_spell_pRenderFilterBox','stripTags',')</div>','filterValuesSpellsCache','str','ability_readonly_cntFeats','_spell_getLocks','_hk_onChangeSubclass','compRace','<button\x20class=\x22btn-5et\x20veapp__btn-list-reset\x22>Reset</button>','_spell_getApproximatePreparedFormula','totals','addHookBase','getExistingClassTotalLevels_','pPreloadHidden','state','[‒]','85729opxHrz','filter','compAbility','_spell_isCasterClassAtLevel','warn','spell','getClass_','_hk_shared_doRenderClassSubclass','hasSourceJson','_spell_getFixedLearnedProgression','mutateAndAddToFilters','_compsSpellAdditionalSpellSubclass','flat','spellsKnownProgressionFixed','full','expandedSpellsSubclass','_spell_handleFilterChange','fixedLearnedProgression','click','<h2\x20class=\x22m-0\x20b-0\x20py-1\x22></h2>','constructor','trim','spells\x20known','isAnyData','_spell_isCasterClassAtLevel_additionalSpells','class_pulseChange','replace','bind','1aSXlHK','con','handleFilterChange','curLevel','ActorCharactermancer.spells_page','_data','expandedSpellsRace','492851NAMHCV','pRender','_hk_onChangeLevel','feat_ixMaxAbility','_lastSearchTermSpells','notifications','floor','getRenderedClassTableFromDereferenced','subclassTableGroups','EVNT_VALCHANGE','_spell_renderClassSection','tabSpells','race','_pageFilterSpells','entries','render','alwaysPreparedSpellsRace','feat_getProps','3HnnTub','prepared','ability','getMaxCasterProgression','compsSpellAdditionalSpellSubclass','data','compSpellAdditionalSpellRace','cha','getAbilityModNumber','targetLevel','_state','addHookExpandedSpells','feat_ixMaxRace','543784mYeLJc','_spell_getApproximateCantripProgression','getSubclass_','CASTER_TYPE_TO_PROGRESSION','_mod$>','int_mod','parent','<div\x20class=\x22py-1\x20clickable\x20ve-muted\x22>[‒]</div>','_hk_shared_doInitClassSubclass','_spell_getMaxPreparedSpells_getAbilityScore','2671jnpAMY','<button\x20class=\x22btn\x20btn-5et\x22\x20title=\x22Toggle\x20Filter\x20Summary\x20Display\x22><span\x20class=\x22glyphicon\x20glyphicon-resize-small\x22></span></button>','keyup','known','getCasterProgression','/\x202\x20','colLabels','copy','638019gdIaSM','_spell_getMaxLearnedCantrips','spells_isIncludeUaEtcSpellLists','_spell_renderFeatSection'];const _0x3398=function(_0x22c704,_0x3ccfc0){_0x22c704=_0x22c704-0xce;let _0x44bae2=_0x44ba[_0x22c704];return _0x44bae2;};const _0x2db11e=_0x3398;(function(_0x3197ad,_0x43c9e3){const _0x4302ef=_0x3398;while(!![]){try{const _0x357cb5=parseInt(_0x4302ef(0x194))+parseInt(_0x4302ef(0x171))*parseInt(_0x4302ef(0xcf))+parseInt(_0x4302ef(0x120))+parseInt(_0x4302ef(0x18d))*parseInt(_0x4302ef(0xee))+parseInt(_0x4302ef(0x113))*-parseInt(_0x4302ef(0x140))+parseInt(_0x4302ef(0xe6))*-parseInt(_0x4302ef(0xff))+-parseInt(_0x4302ef(0xdc));if(_0x357cb5===_0x43c9e3)break;else _0x3197ad['push'](_0x3197ad['shift']());}catch(_0x432ec0){_0x3197ad['push'](_0x3197ad['shift']());}}}(_0x44ba,0x74437));import{ActorCharactermancerBaseComponent}from'./ActorCharactermancerUtil.js';import{Charactermancer_AdditionalSpellsSelect}from'./UtilCharactermancerAdditionalSpells.js';import{UtilActors}from'./UtilActors.js';import{LGT}from'./Util.js';import{Charactermancer_Class_Util}from'./UtilCharactermancerClass.js';import{Charactermancer_Spell}from'./UtilCharactermancerSpell.js';import{Charactermancer_Spell_SlotLevelSelect}from'./UtilCharactermancerSpellSlotLevelSelect.js';import{DataConverterClass}from'./DataConverterClass.js';import{ModalFilterSpellsFvtt}from'./UtilModalFilter.js';import{Charactermancer_Util}from'./UtilCharactermancer.js';class ActorCharactermancerSpell extends ActorCharactermancerBaseComponent{constructor(_0x216ce9){const _0x511e8d=_0x3398;_0x216ce9=_0x216ce9||{},super(),this[_0x511e8d(0x103)]=_0x216ce9[_0x511e8d(0xfa)],this['_data']=_0x216ce9[_0x511e8d(0xd4)],this[_0x511e8d(0x10b)]=_0x216ce9[_0x511e8d(0xe2)],this['_tabSpells']=_0x216ce9[_0x511e8d(0x19f)],this[_0x511e8d(0x1a1)]=new PageFilterSpells(),this[_0x511e8d(0x11e)]=new ModalFilterSpellsFvtt({'namespace':_0x511e8d(0x14f),'isRadio':!![],'allData':this[_0x511e8d(0x192)][_0x511e8d(0x176)]}),this['_filterValuesSpellsCache']=null,this[_0x511e8d(0x15a)]=null,this[_0x511e8d(0x198)]='',this[_0x511e8d(0x105)]=[],this[_0x511e8d(0x14a)]=[],this[_0x511e8d(0x115)]=null,this[_0x511e8d(0x17c)]=[],this['_compsSpellAdditionalSpellFeat']={'ability':[],'race':[],'custom':[]};}get[_0x2db11e(0x163)](){const _0x368606=_0x2db11e;return this[_0x368606(0x158)];}get['filterBoxSpells'](){const _0x1f7502=_0x2db11e;return this[_0x1f7502(0x15a)];}get[_0x2db11e(0x134)](){const _0x3d0d41=_0x2db11e;return this[_0x3d0d41(0x105)];}get[_0x2db11e(0xd5)](){const _0x309f37=_0x2db11e;return this[_0x309f37(0x115)];}get[_0x2db11e(0xd3)](){return this['_compsSpellAdditionalSpellSubclass'];}get['compsSpellAdditionalSpellFeat'](){const _0xdf4156=_0x2db11e;return this[_0xdf4156(0xf7)];}async['pLoad'](){const _0x1d1b72=_0x2db11e;await this['_modalFilterSpells'][_0x1d1b72(0x16e)]();}async[_0x2db11e(0x195)](){const _0x26b156=_0x2db11e,_0x2d2db5=this['_tabSpells']?.[_0x26b156(0x146)];if(!_0x2d2db5)return;const _0x46021f=$$`<div class="flex-col w-100 h-100 px-1 overflow-y-auto ve-grow veapp__bg-foundry smooth-scroll"></div>`,_0x449fa5=$$`<div class="flex-col w-100"></div>`,_0x1bf78b=$$`<div class="flex-col w-100 h-100"></div>`;await this['_spell_pRenderFilterBox'](_0x46021f);for(let _0x45e903=0x0;_0x45e903<this['_parent'][_0x26b156(0x135)]['state'][_0x26b156(0x124)]+0x1;++_0x45e903)this[_0x26b156(0x19e)](_0x46021f,_0x449fa5,_0x1bf78b,_0x45e903);const _0x484cff=()=>{const _0x5ac86c=_0x26b156;this['_spell_renderClassSection'](_0x46021f,_0x449fa5,_0x1bf78b,this[_0x5ac86c(0x10b)]['compClass'][_0x5ac86c(0x16f)][_0x5ac86c(0x124)]);};this[_0x26b156(0x10b)]['compClass']['addHookBase']('class_ixMax',_0x484cff),this[_0x26b156(0x14c)](_0x46021f),this[_0x26b156(0x13d)](_0x46021f,_0x1bf78b,_0x26b156(0x197),_0x26b156(0xd1)),this[_0x26b156(0x13d)](_0x46021f,_0x1bf78b,_0x26b156(0xdb),_0x26b156(0x1a0)),this[_0x26b156(0x13d)](_0x46021f,_0x1bf78b,'feat_ixMaxCustom','custom'),this[_0x26b156(0x181)](),$$`<div class="flex w-100 h-100">
			${_0x46021f}

			<div class="vr-1"></div>

			<div class="flex-col w-100 h-100 px-1 overflow-y-auto ve-grow veapp__bg-foundry smooth-scroll">
				${_0x449fa5}
				${_0x1bf78b}
			</div>
		</div>`['appendTo'](_0x2d2db5);}[_0x2db11e(0x13d)](_0xc0c90f,_0x4ee178,_0x2a8176,_0x585c2c){const _0x4fa4b9=_0x2db11e;let _0x4ba7c1=this[_0x4fa4b9(0x10b)][_0x4fa4b9(0x127)]['state'][_0x2a8176]+0x1;const _0x32d365=()=>{const _0x5514ea=_0x4fa4b9;for(let _0x3eeb8b=_0x4ba7c1;_0x3eeb8b<this[_0x5514ea(0x10b)][_0x5514ea(0x127)][_0x5514ea(0x16f)][_0x2a8176]+0x1;++_0x3eeb8b)this[_0x5514ea(0xf1)](_0xc0c90f,_0x4ee178,_0x3eeb8b,_0x585c2c);_0x4ba7c1=this[_0x5514ea(0x10b)][_0x5514ea(0x127)][_0x5514ea(0x16f)][_0x2a8176]+0x1;};this[_0x4fa4b9(0x10b)]['compFeat'][_0x4fa4b9(0x16c)](_0x2a8176,_0x32d365),_0x32d365();}[_0x2db11e(0xf1)](_0x2e0b37,_0x21fdbc,_0xe6e358,_0x1b0d2e){const _0x1c6fc1=_0x2db11e,{propIxFeat:_0x149cec}=ActorCharactermancerBaseComponent[_0x1c6fc1(0xce)](_0xe6e358,_0x1b0d2e),_0x4483e6=$$`<div class="flex-col"></div>`[_0x1c6fc1(0x10d)](),_0x1dee9e=()=>{const _0x5c5a8d=_0x1c6fc1,_0x94bc15=this[_0x5c5a8d(0x10b)]['compClass'][_0x5c5a8d(0x16d)](),_0x509e1b=this[_0x5c5a8d(0x10b)][_0x5c5a8d(0x135)][_0x5c5a8d(0x16f)][_0x5c5a8d(0x133)],_0x27c37f=this[_0x5c5a8d(0xf7)][_0x1b0d2e][_0xe6e358];if(_0x27c37f){_0x27c37f[_0x5c5a8d(0x190)]=_0x94bc15,_0x27c37f[_0x5c5a8d(0xd8)]=Math['max'](0x1,_0x509e1b);const {min:_0x6da9a7,max:_0xea5334}=this[_0x5c5a8d(0x10b)]['compClass'][_0x5c5a8d(0xf5)]();_0x27c37f[_0x5c5a8d(0x10a)]=_0x6da9a7,_0x27c37f[_0x5c5a8d(0xf4)]=_0xea5334;}};this['_parent'][_0x1c6fc1(0x135)][_0x1c6fc1(0x16c)](_0x1c6fc1(0x133),_0x1dee9e);const _0x2c5c3b=()=>{const _0x2be96e=_0x1c6fc1,_0x546e7c=this['_parent'][_0x2be96e(0x127)][_0x2be96e(0x149)]()[_0x2be96e(0x13b)](_0x149cec),_0x51ce37=_0x546e7c?this[_0x2be96e(0x192)]['feat'][this[_0x2be96e(0x10b)][_0x2be96e(0x127)]['state'][_0x149cec]]:null;let _0x60877e=![];if(_0x546e7c){if(_0x51ce37&&_0x51ce37[_0x2be96e(0x153)])_0x60877e=!![];}_0x2640da['toggleVe'](_0x60877e);};if(_0x1b0d2e===_0x1c6fc1(0xd1))this[_0x1c6fc1(0x10b)]['compAbility'][_0x1c6fc1(0x16c)](_0x1c6fc1(0x165),_0x2c5c3b);if(_0x1b0d2e===_0x1c6fc1(0x1a0))this[_0x1c6fc1(0x10b)][_0x1c6fc1(0x168)][_0x1c6fc1(0x16c)]('race_cntFeats',_0x2c5c3b);if(_0x1b0d2e===_0x1c6fc1(0x119))this[_0x1c6fc1(0x10b)]['compFeat']['addHookBase']('feat_cntFeatsCustom',_0x2c5c3b);const _0x2e2fb4=()=>{const _0x5ab7cb=_0x1c6fc1;_0x4483e6[_0x5ab7cb(0x126)]();const _0x45f8fb=(_0x1b0d2e==='ability'||_0x1b0d2e===_0x5ab7cb(0x1a0))&&!this[_0x5ab7cb(0x10b)][_0x5ab7cb(0x127)][_0x5ab7cb(0x149)]()['includes'](_0x149cec),_0x13a237=_0x45f8fb?null:this[_0x5ab7cb(0x192)][_0x5ab7cb(0x125)][this[_0x5ab7cb(0x10b)][_0x5ab7cb(0x127)]['state'][_0x149cec]];let _0x269784=![];_0x13a237&&_0x13a237[_0x5ab7cb(0x153)]?(_0x269784=!![],_0x4483e6[_0x5ab7cb(0x117)](),this[_0x5ab7cb(0xf7)][_0x1b0d2e][_0xe6e358]=new Charactermancer_AdditionalSpellsSelect({'spellDatas':this[_0x5ab7cb(0x192)][_0x5ab7cb(0x176)],'additionalSpells':_0x13a237[_0x5ab7cb(0x153)],'modalFilterSpells':this[_0x5ab7cb(0x11e)]}),this['_compsSpellAdditionalSpellFeat'][_0x1b0d2e][_0xe6e358][_0x5ab7cb(0x1a3)](_0x4483e6)):(_0x4483e6[_0x5ab7cb(0x10d)](),this[_0x5ab7cb(0xf7)][_0x1b0d2e][_0xe6e358]=null),_0x269784?(_0x2640da['showVe'](),_0x273aed[_0x5ab7cb(0x129)](_0x13a237[_0x5ab7cb(0x14b)])):_0x2640da['hideVe'](),_0x1dee9e(),_0x2c5c3b();};this[_0x1c6fc1(0x10b)][_0x1c6fc1(0x127)]['addHookBase'](_0x149cec,_0x2e2fb4);const _0x273aed=$(_0x1c6fc1(0x184)),_0x6920c4=$(_0x1c6fc1(0xe3))['click'](()=>{const _0x1744a7=_0x1c6fc1;_0x6920c4[_0x1744a7(0x129)](_0x6920c4[_0x1744a7(0x129)]()==='[+]'?'[‒]':_0x1744a7(0x142)),_0xfd8947['toggleVe']();}),_0xfd8947=$$`<div class="flex-col w-100">
			${_0x4483e6}
		</div>`,_0x2640da=$$`<div class="flex-col w-100 mb-2">
			<div class="split-v-center">
				${_0x273aed}
				${_0x6920c4}
			</div>

			${_0xfd8947}
		</div>`[_0x1c6fc1(0x10d)]()[_0x1c6fc1(0x147)](_0x2e0b37);_0x2e2fb4();}async[_0x2db11e(0x160)](_0x42f456){const _0x40bc4a=_0x2db11e,_0x86f8d1=$('<button\x20class=\x22btn-5et\x20veapp__btn-filter\x22>Filter</button>'),_0x3a14dd=$(_0x40bc4a(0xe7)),_0x26e283=$(_0x40bc4a(0x151)),_0x4365c3=$(_0x40bc4a(0x169))[_0x40bc4a(0x183)](()=>_0x26e283[_0x40bc4a(0x157)]('')[_0x40bc4a(0xe8)]()),_0x53d9b6=$('<div\x20class=\x22fltr__mini-view\x20btn-group\x22></div>'),_0x1d4ad5=$(_0x40bc4a(0x118))[_0x40bc4a(0x183)](()=>{const _0x22473b=_0x40bc4a;this[_0x22473b(0x158)]=this[_0x22473b(0x15a)]['getValues'](),ui[_0x22473b(0x199)][_0x22473b(0x13c)]('Set!');}),_0x19bbbe=ComponentUiUtil[_0x40bc4a(0x12c)](this,_0x40bc4a(0xf0),{'$ele':$('<button\x20class=\x22btn\x20btn-default\x20btn-xs\x22\x20title=\x22Include\x20spell\x20lists\x20defined\x20in\x20Unearthed\x20Arcana,\x20Plane\x20Shift,\x20and\x20other\x20semi-official\x20products\x20when\x20generating\x20the\x20list\x20of\x20spells\x20which\x20can\x20be\x20learned/prepared.\x22>Include\x20UA/etc.\x20Spell\x20Lists</button>')}),_0x2d3b27=()=>this[_0x40bc4a(0x105)]['filter'](Boolean)[_0x40bc4a(0x114)](_0x3b1033=>_0x3b1033[_0x40bc4a(0x15c)]=this[_0x40bc4a(0xd9)][_0x40bc4a(0xf0)]);this['_addHookBase'](_0x40bc4a(0xf0),_0x2d3b27),_0x2d3b27(),$$(_0x42f456)`
			<div class="flex-v-stretch input-group input-group--top no-shrink">
				${_0x86f8d1}
				${_0x3a14dd}
				${_0x26e283}
				${_0x4365c3}
			</div>
			${_0x53d9b6}
			<div class="flex-v-stretch input-group input-group--bottom mb-1 no-shrink">
				<button class="btn-5et w-100" disabled></button>
			</div>

			<div class="mb-1 flex-v-center">${_0x1d4ad5}${_0x19bbbe}</div>
		`,this['_filterBoxSpells']=await this['_pageFilterSpells'][_0x40bc4a(0x102)]({'$iptSearch':_0x26e283,'$btnReset':_0x4365c3,'$btnOpen':_0x86f8d1,'$btnToggleSummaryHidden':_0x3a14dd,'$wrpMiniPills':_0x53d9b6,'namespace':_0x40bc4a(0x191)}),this[_0x40bc4a(0x192)][_0x40bc4a(0x176)][_0x40bc4a(0x114)](_0x4dd649=>this[_0x40bc4a(0x1a1)][_0x40bc4a(0x17b)](_0x4dd649)),this[_0x40bc4a(0x15a)][_0x40bc4a(0x1a3)](),this['_filterValuesSpellsCache']=this[_0x40bc4a(0x15a)]['getValues'](),UiUtil[_0x40bc4a(0x11f)]({'$ipt':_0x26e283,'fnKeyup':()=>{const _0xbe9a72=_0x40bc4a,_0x45cc93=List['getCleanSearchTerm'](_0x26e283['val']());if(this['_lastSearchTermSpells']===_0x45cc93)return;this[_0xbe9a72(0x198)]=_0x45cc93,this[_0xbe9a72(0x105)][_0xbe9a72(0x172)](Boolean)[_0xbe9a72(0x114)](_0x3223e0=>_0x3223e0['handleSearch'](_0x45cc93));}}),this[_0x40bc4a(0x15a)]['on'](FilterBox[_0x40bc4a(0x19d)],this[_0x40bc4a(0x181)][_0x40bc4a(0x18c)](this));}[_0x2db11e(0x181)](){const _0x4a3dcd=_0x2db11e,_0x1fef47=this['_filterBoxSpells'][_0x4a3dcd(0xf6)]();this[_0x4a3dcd(0x105)]['filter'](Boolean)[_0x4a3dcd(0x114)](_0x28b9da=>_0x28b9da[_0x4a3dcd(0x18f)](_0x1fef47));}[_0x2db11e(0xef)](_0x32ae35,_0x2b2fb4,_0x554e6b){const _0xdc7b23=_0x2db11e;if(!_0x32ae35||_0x554e6b==null)return null;let _0xba1db9=_0x32ae35[_0xdc7b23(0x122)]||_0x2b2fb4?.['cantripProgression'];if(BrewUtil[_0xdc7b23(0x179)](_0x32ae35['source'])||_0x2b2fb4&&BrewUtil[_0xdc7b23(0x179)](_0x2b2fb4[_0xdc7b23(0xf3)]))_0xba1db9=_0xba1db9||this[_0xdc7b23(0x185)][_0xdc7b23(0xdd)](_0x32ae35,_0x2b2fb4);if(!_0xba1db9)return null;return _0xba1db9[_0x554e6b-0x1];}static[_0x2db11e(0xdd)](_0x3e2bcc,_0x2bd3ff){const _0x28dada=_0x2db11e;return this['_spell_getApproximateNumberCol'](_0x3e2bcc,_0x2bd3ff,_0x28dada(0xf8));}static[_0x2db11e(0x159)](_0x209ab7,_0x5e05e8){const _0x7c6154=_0x2db11e;return this[_0x7c6154(0xf9)](_0x209ab7,_0x5e05e8,_0x7c6154(0x187));}static[_0x2db11e(0xf9)](_0x5c3d19,_0xaaaf0e,_0xb65429){const _0x212590=_0x2db11e,_0x48a01d=(BrewUtil[_0x212590(0x179)](_0x5c3d19[_0x212590(0xf3)])?_0x5c3d19[_0x212590(0x131)]:null)||(_0xaaaf0e&&BrewUtil[_0x212590(0x179)](_0xaaaf0e[_0x212590(0xf3)])?_0xaaaf0e?.[_0x212590(0x19c)]:null);if(!_0x48a01d)return;for(const _0x4e0b9e of _0x48a01d){const _0x2b1c16=(_0x4e0b9e['colLabels']||[])[_0x212590(0x111)](_0x553b9c=>(''+_0x553b9c)[_0x212590(0x139)]()['includes'](_0xb65429));if(!~_0x2b1c16)continue;const _0x11ba66=(_0x4e0b9e[_0x212590(0x15f)]||[])[_0x212590(0x15b)](_0x2b30d1=>_0x2b30d1[_0x212590(0x172)]((_0x493844,_0x26921c)=>_0x26921c===_0x2b1c16))[_0x212590(0x17d)]();if(_0x11ba66['every'](_0x3ebd78=>!isNaN(_0x3ebd78)))return _0x11ba66[_0x212590(0x15b)](_0x1d92b9=>Number(_0x1d92b9));}}[_0x2db11e(0x17a)](_0x1fbf8c,_0x4360d1,_0x4166ca,_0x36303e,{isExistingClass:_0x366489}={}){const _0x29c28f=_0x2db11e;if(_0x36303e==null)return null;const _0x1673b6=DataConverterClass[_0x29c28f(0xd2)](_0x4360d1[_0x29c28f(0x128)],_0x4166ca?.[_0x29c28f(0x128)]);if(!_0x1673b6||!UtilActors[_0x29c28f(0xdf)][_0x1673b6])return null;const _0x3615ce=[...new Array(0x9)][_0x29c28f(0x15b)](()=>0x0);let _0x2438d3=![];const _0x34cb49=_0x366489?Charactermancer_Spell_SlotLevelSelect[_0x29c28f(0x12f)]({'targetLevel':_0x36303e,'casterProgression':_0x1673b6,'spellsKnownProgression':_0x4360d1?.[_0x29c28f(0x11c)]||_0x4166ca?.[_0x29c28f(0x11c)],'spellsKnownProgressionFixed':_0x4360d1?.[_0x29c28f(0x17e)]||_0x4166ca?.[_0x29c28f(0x17e)]}):this[_0x29c28f(0x14a)][_0x1fbf8c]?this[_0x29c28f(0x14a)][_0x1fbf8c]['getFormData']():null;if(_0x34cb49){_0x2438d3=_0x2438d3||_0x34cb49?.[_0x29c28f(0x188)];if(_0x34cb49?.['data'])_0x34cb49[_0x29c28f(0xd4)][_0x29c28f(0x114)]((_0x333523,_0x2807d5)=>_0x3615ce[_0x2807d5]+=_0x333523);}_0x4360d1[_0x29c28f(0x12d)]&&(_0x2438d3=!![],Object[_0x29c28f(0x1a2)](_0x4360d1[_0x29c28f(0x12d)])['forEach'](([_0x1d986b,_0x119818])=>{const _0x538f59=_0x29c28f;if(Number(_0x1d986b)>_0x36303e)return;Object['entries'](_0x119818)[_0x538f59(0x114)](([_0x2b0e6e,_0xfb8d98])=>{_0x2b0e6e=Number(_0x2b0e6e),_0x3615ce[_0x2b0e6e-0x1]+=_0xfb8d98;});}));if(!_0x2438d3)return null;return _0x3615ce;}[_0x2db11e(0x141)](_0x2e0936,_0x34f5df,_0x22ca31,{existingAbilityScores:_0x9c11ea}={}){const _0x226d5c=_0x2db11e;if(!_0x2e0936||_0x22ca31==null)return null;const _0x5def28=DataConverterClass[_0x226d5c(0xd2)](_0x2e0936[_0x226d5c(0x128)],_0x34f5df?.[_0x226d5c(0x128)]);if(!_0x5def28||!UtilActors['CASTER_TYPE_TO_PROGRESSION'][_0x5def28])return null;const _0x1359b2=UtilActors['CASTER_TYPE_TO_PROGRESSION'][_0x5def28][_0x22ca31-0x1];if(!_0x1359b2)return null;if(!_0x1359b2[_0x226d5c(0x10c)](Boolean))return null;let _0x2ec4b2=_0x2e0936['preparedSpells'];BrewUtil['hasSourceJson'](_0x2e0936[_0x226d5c(0xf3)])&&(_0x2ec4b2=_0x2ec4b2||this[_0x226d5c(0x185)][_0x226d5c(0x16a)](_0x2e0936,_0x34f5df));if(!_0x2ec4b2)return null;const _0x275f29=this[_0x226d5c(0x10b)]['compAbility']['getTotals'](),_0x382e5f=_0x2ec4b2[_0x226d5c(0x18b)](/<\$([^$]+)\$>/g,(..._0x2d1f12)=>{const _0x4aaef9=_0x226d5c;switch(_0x2d1f12[0x1]){case _0x4aaef9(0xfc):return _0x22ca31;case'str_mod':return this[_0x4aaef9(0x185)]['_spell_getMaxPreparedSpells_getAbilityScore']({'ability':_0x4aaef9(0x164),'totalsAsi':_0x275f29,'existingAbilityScores':_0x9c11ea});case _0x4aaef9(0xf2):return this[_0x4aaef9(0x185)][_0x4aaef9(0xe5)]({'ability':'dex','totalsAsi':_0x275f29,'existingAbilityScores':_0x9c11ea});case _0x4aaef9(0x15d):return this['constructor'][_0x4aaef9(0xe5)]({'ability':_0x4aaef9(0x18e),'totalsAsi':_0x275f29,'existingAbilityScores':_0x9c11ea});case _0x4aaef9(0xe1):return this[_0x4aaef9(0x185)][_0x4aaef9(0xe5)]({'ability':_0x4aaef9(0x108),'totalsAsi':_0x275f29,'existingAbilityScores':_0x9c11ea});case _0x4aaef9(0x145):return this[_0x4aaef9(0x185)][_0x4aaef9(0xe5)]({'ability':'wis','totalsAsi':_0x275f29,'existingAbilityScores':_0x9c11ea});case'cha_mod':return this[_0x4aaef9(0x185)]['_spell_getMaxPreparedSpells_getAbilityScore']({'ability':_0x4aaef9(0xd6),'totalsAsi':_0x275f29,'existingAbilityScores':_0x9c11ea});default:throw new Error(_0x4aaef9(0x12a)+_0x2d1f12[0x1]+'\x22');}}),_0x4b235b=eval(_0x382e5f);if(isNaN(_0x4b235b))return console[_0x226d5c(0x175)](...LGT,_0x226d5c(0x130)+_0x382e5f+_0x226d5c(0x104)+_0x2ec4b2+_0x226d5c(0x14d)),null;return Math[_0x226d5c(0x13a)](0x1,Math[_0x226d5c(0x19a)](_0x4b235b));}static[_0x2db11e(0xe5)]({totalsAsi:_0x2422f6,existingAbilityScores:_0x1ec8f5,ability:_0x3f7e24}){const _0x26bd63=_0x2db11e;if(_0x1ec8f5)return _0x1ec8f5[_0x3f7e24]||0x0;return Parser[_0x26bd63(0xd7)](_0x2422f6?.[_0x26bd63(0x16b)]?.[_0x2422f6['mode']]?.[_0x3f7e24]||0x0);}static[_0x2db11e(0x16a)](_0x5ad12e,_0x4de5b0){const _0x22c51e=_0x2db11e;if(!_0x5ad12e)return null;const _0x14c7a3=DataConverterClass[_0x22c51e(0xd2)](_0x5ad12e['casterProgression'],_0x4de5b0?.[_0x22c51e(0x128)]);if(!_0x14c7a3||!_0x5ad12e[_0x22c51e(0x131)]&&!_0x4de5b0?.['subclassTableGroups']||_0x14c7a3==='pact')return null;const _0x2ea4a0=[_0x5ad12e[_0x22c51e(0x131)],_0x4de5b0?.[_0x22c51e(0x19c)]][_0x22c51e(0x172)](Boolean)[_0x22c51e(0x10c)](_0x559aca=>{const _0x483629=_0x22c51e;_0x559aca[_0x483629(0x15b)](_0x1c84a1=>_0x1c84a1[_0x483629(0xec)]||[])[_0x483629(0x17d)]()[_0x483629(0x15b)](_0x50a271=>Renderer[_0x483629(0x161)]((''+_0x50a271)['trim']()))[_0x483629(0x10c)](_0x39f4e5=>{const _0x535e72=_0x483629,_0x36f21a=_0x39f4e5[_0x535e72(0x139)]()['split'](/[^a-z0-9]/g)['map'](_0x2c82c6=>_0x2c82c6[_0x535e72(0x186)]())[_0x535e72(0x172)](Boolean);return _0x36f21a['some'](_0x42471e=>_0x42471e===_0x535e72(0x176)||_0x42471e===_0x535e72(0x107))&&_0x36f21a[_0x535e72(0x10c)](_0x44b0bb=>_0x44b0bb===_0x535e72(0xe9));});});if(_0x2ea4a0)return null;return _0x22c51e(0x123)+(_0x14c7a3!==_0x22c51e(0x17f)?_0x22c51e(0xeb):'')+'+\x20'+(_0x5ad12e[_0x22c51e(0x11d)]?'<$'+_0x5ad12e[_0x22c51e(0x11d)]+_0x22c51e(0xe0):'5');}[_0x2db11e(0x19e)](_0xf38c1c,_0x467828,_0x200e89,_0x51bcc6){const _0x2eebf2=_0x2db11e,{propIxClass:_0x5b4aaf,propIxSubclass:_0x114a19,propTargetLevel:_0x1ab9cf}=ActorCharactermancerBaseComponent['class_getProps'](_0x51bcc6),_0x4cc2be=$('<h2\x20class=\x22m-0\x20b-0\x20py-1\x22></h2>'),_0x5d4ae4=$$`<div class="mb-1 ve-muted ve-small manc-sp__disp-prepared flex-v-center"></div>`,_0xae887d=$$`<div class="mb-1 flex-col"></div>`,_0x375799=$(_0x2eebf2(0x184)),_0x2bc3e0=$$`<div class="flex-col"></div>`,_0x22643e=$$`<div class="flex-col"></div>`['hideVe'](),_0x3eba6e=$$`<div class="flex-col"></div>`,_0x42f83c=$(_0x2eebf2(0xe3))['click'](()=>{const _0x15da5b=_0x2eebf2;_0x42f83c[_0x15da5b(0x129)](_0x42f83c[_0x15da5b(0x129)]()===_0x15da5b(0x142)?'[‒]':_0x15da5b(0x142)),_0xae887d[_0x15da5b(0x12e)](),_0xffe221[_0x15da5b(0x12e)]();}),_0xffe221=$$`<div class="flex-col w-100">
			${_0x2bc3e0}
			${_0x22643e}
		</div>`,_0x29405b=$$`<div class="flex-col mb-2">
			<div class="split-v-center">
				${_0x4cc2be}
				${_0x42f83c}
			</div>
			${_0x5d4ae4}
			${_0xae887d}

			${_0xffe221}
		</div>`[_0x2eebf2(0x147)](_0xf38c1c),_0x30b8e8=$(_0x2eebf2(0xe3))[_0x2eebf2(0x183)](()=>{const _0x43cc62=_0x2eebf2;_0x30b8e8[_0x43cc62(0x129)](_0x30b8e8[_0x43cc62(0x129)]()==='[+]'?_0x43cc62(0x170):_0x43cc62(0x142)),_0x3de01e['toggleVe']();}),_0x3de01e=$$`<div class="flex-col w-100">
			${_0x3eba6e}
		</div>`,_0x50d580=$$`<div class="flex-col w-100">
			<div class="split-v-center">
				${_0x375799}
				${_0x30b8e8}
			</div>

			${_0x3de01e}

			<hr class="hr-2">
		</div>`[_0x2eebf2(0x147)](_0x467828),_0x14b19=this[_0x2eebf2(0x136)][_0x2eebf2(0x18c)](this,_0x51bcc6,{'$dispClassNameLeft':_0x4cc2be,'$dispClassNameRight':_0x375799,'$stgSubclassAdditionalSpells':_0x22643e,'$wrpLeftInner':_0x29405b,'$wrpRightInner':_0x50d580,'$stgClassSpells':_0x2bc3e0,'$stgSpellsTable':_0x3eba6e,'$dispSpell':_0x200e89,'$wrpSlotLevelSelect':_0xae887d,'$wrpPreparedLearned':_0x5d4ae4}),_0x3ec66e=this[_0x2eebf2(0x167)][_0x2eebf2(0x18c)](this,_0x51bcc6,{'$dispClassNameLeft':_0x4cc2be,'$dispClassNameRight':_0x375799,'$stgSubclassAdditionalSpells':_0x22643e,'$wrpLeftInner':_0x29405b,'$wrpRightInner':_0x50d580,'$stgClassSpells':_0x2bc3e0,'$stgSpellsTable':_0x3eba6e,'$dispSpell':_0x200e89,'$wrpSlotLevelSelect':_0xae887d,'$wrpPreparedLearned':_0x5d4ae4}),_0x4f2b46=this['_hk_onChangeLevel'][_0x2eebf2(0x18c)](this,_0x51bcc6,{'$wrpLeftInner':_0x29405b,'$wrpRightInner':_0x50d580}),_0x4af182=this[_0x2eebf2(0x12b)][_0x2eebf2(0x18c)](this,_0x51bcc6);this[_0x2eebf2(0x10b)][_0x2eebf2(0x135)][_0x2eebf2(0x16c)](_0x5b4aaf,_0x14b19),this['_parent'][_0x2eebf2(0x135)][_0x2eebf2(0x16c)](_0x114a19,_0x3ec66e),this['_parent']['compClass'][_0x2eebf2(0x16c)](_0x1ab9cf,_0x4f2b46),this[_0x2eebf2(0x10b)][_0x2eebf2(0x173)]['addHookAbilityScores'](_0x4af182),_0x14b19();}['_spell_renderRaceSection'](_0x1b33d7){const _0x1504a5=_0x2db11e,_0x178774=$$`<div class="flex-col"></div>`[_0x1504a5(0x10d)](),_0x42f82b=()=>{const _0x5bde4b=_0x1504a5,_0x957923=this['_parent']['compClass'][_0x5bde4b(0x16d)](),_0x2abb6d=this[_0x5bde4b(0x10b)][_0x5bde4b(0x135)][_0x5bde4b(0x16f)][_0x5bde4b(0x133)];if(this[_0x5bde4b(0x115)]){this[_0x5bde4b(0x115)][_0x5bde4b(0x190)]=_0x957923,this[_0x5bde4b(0x115)][_0x5bde4b(0xd8)]=Math[_0x5bde4b(0x13a)](0x1,_0x2abb6d);const {min:_0x456f32,max:_0x3d9bbf}=this[_0x5bde4b(0x10b)]['compClass'][_0x5bde4b(0xf5)]();this['_compSpellAdditionalSpellRace']['spellLevelLow']=_0x456f32,this[_0x5bde4b(0x115)]['spellLevelHigh']=_0x3d9bbf;}};this[_0x1504a5(0x10b)]['compClass'][_0x1504a5(0x16c)](_0x1504a5(0x133),_0x42f82b),this[_0x1504a5(0x10b)][_0x1504a5(0x135)][_0x1504a5(0x16c)](_0x1504a5(0x18a),_0x42f82b);const _0x9f8313=()=>{const _0x287b2d=_0x1504a5;_0x178774[_0x287b2d(0x126)]();const _0x53388f=this[_0x287b2d(0x10b)][_0x287b2d(0x13e)][_0x287b2d(0x15e)]();let _0x281822=![];if(_0x53388f&&_0x53388f[_0x287b2d(0x153)]){_0x281822=!![],_0x178774['showVe'](),this['_compSpellAdditionalSpellRace']=new Charactermancer_AdditionalSpellsSelect({'spellDatas':this['_data'][_0x287b2d(0x176)],'additionalSpells':_0x53388f[_0x287b2d(0x153)],'modalFilterSpells':this['_modalFilterSpells']}),this[_0x287b2d(0x115)]['render'](_0x178774);const _0x5a3923=()=>this['_compsSpellSpells'][_0x287b2d(0x172)](Boolean)[_0x287b2d(0x114)](_0x35f215=>_0x35f215[_0x287b2d(0x1a4)]=MiscUtil['copy'](this[_0x287b2d(0x115)][_0x287b2d(0x121)]));this[_0x287b2d(0x115)]['addHookAlwaysPreparedSpells'](_0x5a3923),_0x5a3923();const _0x5e75f7=()=>this['_compsSpellSpells'][_0x287b2d(0x172)](Boolean)[_0x287b2d(0x114)](_0x1b7212=>_0x1b7212[_0x287b2d(0x193)]=MiscUtil[_0x287b2d(0xed)](this[_0x287b2d(0x115)][_0x287b2d(0x101)]));this[_0x287b2d(0x115)][_0x287b2d(0xda)](_0x5e75f7),_0x5e75f7();}else _0x178774['hideVe'](),this[_0x287b2d(0x115)]=null,this[_0x287b2d(0x105)][_0x287b2d(0x172)](Boolean)[_0x287b2d(0x114)](_0x2419bf=>_0x2419bf[_0x287b2d(0x193)]=[]);_0x53388f&&_0x281822?(_0x48a0a0['showVe'](),_0x194516['text'](_0x53388f[_0x287b2d(0x14b)])):_0x48a0a0[_0x287b2d(0x10d)](),_0x42f82b();};this['_parent']['compRace'][_0x1504a5(0x16c)]('race_ixRace',_0x9f8313);const _0x194516=$(_0x1504a5(0x184)),_0xe36009=$(_0x1504a5(0xe3))['click'](()=>{const _0x1db0d8=_0x1504a5;_0xe36009[_0x1db0d8(0x129)](_0xe36009[_0x1db0d8(0x129)]()===_0x1db0d8(0x142)?_0x1db0d8(0x170):'[+]'),_0x238bba['toggleVe']();}),_0x238bba=$$`<div class="flex-col w-100">
			${_0x178774}
		</div>`,_0x48a0a0=$$`<div class="flex-col w-100 mb-2">
			<div class="split-v-center">
				${_0x194516}
				${_0xe36009}
			</div>

			${_0x238bba}
		</div>`[_0x1504a5(0x10d)]()[_0x1504a5(0x147)](_0x1b33d7);_0x9f8313();}['_hk_onChangeClass'](_0x37af77,{$stgClassSpells:_0x3c013c,$stgSpellsTable:_0x403e8d,$dispClassNameLeft:_0x229e34,$dispClassNameRight:_0xe24926,$stgSubclassAdditionalSpells:_0x56d6ae,$wrpLeftInner:_0x534209,$wrpRightInner:_0x273e3a,$dispSpell:_0x58aa9a,$wrpSlotLevelSelect:_0x2413f7,$wrpPreparedLearned:_0x451188}){const _0x2315b2=_0x2db11e,{propIxClass:_0x253e30,propIxSubclass:_0x4fd44,propTargetLevel:_0x3f585}=ActorCharactermancerBaseComponent['class_getProps'](_0x37af77),_0x4ff760=this['_parent'][_0x2315b2(0x135)][_0x2315b2(0x177)]({'propIxClass':_0x253e30}),_0x14e0d7=this[_0x2315b2(0x10b)]['compClass'][_0x2315b2(0xde)]({'cls':_0x4ff760,'propIxSubclass':_0x4fd44});if(!_0x4ff760||!this[_0x2315b2(0x185)][_0x2315b2(0x150)](_0x4ff760,_0x14e0d7)){this[_0x2315b2(0x11b)]({'$stgClassSpells':_0x3c013c,'$stgSpellsTable':_0x403e8d,'$wrpLeftInner':_0x534209,'$wrpRightInner':_0x273e3a,'ix':_0x37af77});return;}_0x3c013c[_0x2315b2(0x126)](),_0x403e8d[_0x2315b2(0x126)](),this[_0x2315b2(0xe4)]({'ix':_0x37af77,'cls':_0x4ff760,'sc':_0x14e0d7,'$wrpPreparedLearned':_0x451188,'propTargetLevel':_0x3f585}),this[_0x2315b2(0x167)](_0x37af77,{'$dispClassNameLeft':_0x229e34,'$dispClassNameRight':_0xe24926,'$stgClassSpells':_0x3c013c,'$stgSpellsTable':_0x403e8d,'$stgSubclassAdditionalSpells':_0x56d6ae,'$wrpLeftInner':_0x534209,'$wrpRightInner':_0x273e3a}),this[_0x2315b2(0x178)]({'ix':_0x37af77,'$stgClassSpells':_0x3c013c,'$stgSpellsTable':_0x403e8d,'$dispSpell':_0x58aa9a,'$wrpSlotLevelSelect':_0x2413f7});}[_0x2db11e(0x11b)]({$stgClassSpells:_0x7af207,$stgSpellsTable:_0x3ee527,$wrpLeftInner:_0x463a74,$wrpRightInner:_0x394b4f,ix:_0x35583d}){const _0x499663=_0x2db11e;_0x7af207[_0x499663(0x126)](),_0x3ee527[_0x499663(0x126)](),_0x463a74[_0x499663(0x10d)](),_0x394b4f[_0x499663(0x10d)](),this[_0x499663(0x105)][_0x35583d]=null,this['_compsSpellSpellSlotLevelSelect'][_0x35583d]=null;}[_0x2db11e(0xe4)]({ix:_0x34c4a2,cls:_0x1bfaf9,sc:_0x1294fa,$wrpPreparedLearned:_0x3e013f,propTargetLevel:_0x597537}){const _0x531f76=_0x2db11e,_0x359e42=this[_0x531f76(0x10b)]['compClass']['existingClassMetas'][_0x34c4a2];this[_0x531f76(0x105)][_0x34c4a2]=new Charactermancer_Spell({'actor':this[_0x531f76(0x103)],'existingClass':_0x359e42?this[_0x531f76(0x192)][_0x531f76(0x10f)][_0x359e42[_0x531f76(0x11a)]]:null,'existingCasterMeta':this[_0x531f76(0x14e)]({'ix':_0x34c4a2,'cls':_0x1bfaf9,'sc':_0x1294fa,'existingClassMeta':_0x359e42}),'spellDatas':this[_0x531f76(0x192)][_0x531f76(0x176)],'className':_0x1bfaf9[_0x531f76(0x14b)],'classSource':_0x1bfaf9[_0x531f76(0xf3)],'brewClassSpells':_0x1bfaf9['classSpells'],'subclassName':_0x1294fa?.[_0x531f76(0x14b)],'subclassSource':_0x1294fa?.[_0x531f76(0xf3)],'brewSubclassSpells':_0x1294fa?.[_0x531f76(0x143)],'brewSubSubclassSpells':_0x1294fa?.[_0x531f76(0x148)],'pageFilter':this[_0x531f76(0x1a1)],'$wrpPreparedLearned':_0x3e013f}),this[_0x531f76(0x14a)][_0x34c4a2]=new Charactermancer_Spell_SlotLevelSelect(_0x1bfaf9['name']);const _0x32c3b0=()=>{const _0x2b6da2=_0x531f76,_0xfded5=this[_0x2b6da2(0x10b)]['compClass'][_0x2b6da2(0x16f)][_0x597537];if(this[_0x2b6da2(0x105)][_0x34c4a2])this[_0x2b6da2(0x105)][_0x34c4a2][_0x2b6da2(0x182)]=this[_0x2b6da2(0x17a)](_0x34c4a2,_0x1bfaf9,_0x1294fa,_0xfded5);};this[_0x531f76(0x14a)][_0x34c4a2]['addHookPulseFixedLearnedProgression'](_0x32c3b0),_0x32c3b0();}['_hk_shared_doRenderClassSubclass']({ix:_0x23bc6f,$stgClassSpells:_0xc02aac,$stgSpellsTable:_0x5e4927,$dispSpell:_0xd6c1b9,$wrpSlotLevelSelect:_0x4dcb85}){const _0x2958f6=_0x2db11e;this['_compsSpellSpells'][_0x23bc6f][_0x2958f6(0x1a3)](_0xc02aac,_0xd6c1b9),this[_0x2958f6(0x14a)][_0x23bc6f][_0x2958f6(0x1a3)](_0x4dcb85);const _0x1ffc60=this[_0x2958f6(0x15a)]['getValues']();this['_compsSpellSpells'][_0x23bc6f][_0x2958f6(0x18f)](_0x1ffc60);if(this[_0x2958f6(0x115)])this[_0x2958f6(0x105)][_0x23bc6f][_0x2958f6(0x193)]=MiscUtil[_0x2958f6(0xed)](this['_compSpellAdditionalSpellRace']['spellsExpanded']);}[_0x2db11e(0x12b)](_0x2661cf){const _0x3088b4=_0x2db11e,{propIxClass:_0x3d922a,propTargetLevel:_0x4c2e30,propIxSubclass:_0x6f1579}=ActorCharactermancerBaseComponent[_0x3088b4(0x155)](_0x2661cf),_0x558c77=this['_parent'][_0x3088b4(0x135)]['getClass_']({'propIxClass':_0x3d922a}),_0x2ab222=this[_0x3088b4(0x10b)][_0x3088b4(0x135)][_0x3088b4(0xde)]({'cls':_0x558c77,'propIxSubclass':_0x6f1579}),_0x377c49=this[_0x3088b4(0x10b)][_0x3088b4(0x135)]['state'][_0x4c2e30];if(this[_0x3088b4(0x105)][_0x2661cf])this[_0x3088b4(0x105)][_0x2661cf][_0x3088b4(0x132)]=this[_0x3088b4(0x141)](_0x558c77,_0x2ab222,_0x377c49);}[_0x2db11e(0x167)](_0xf8155d,{$stgClassSpells:_0x541e66,$stgSpellsTable:_0x180416,$dispClassNameLeft:_0x2e031e,$dispClassNameRight:_0x174e6d,$stgSubclassAdditionalSpells:_0x5dae55,$wrpLeftInner:_0x46c0fe,$wrpRightInner:_0x2268b7,$wrpPreparedLearned:_0x17cdea,$dispSpell:_0x4119ed,$wrpSlotLevelSelect:_0x378d97}){const _0x108ddf=_0x2db11e,{propIxClass:_0x3ba49a,propIxSubclass:_0x473856,propTargetLevel:_0x2abb0f}=ActorCharactermancerBaseComponent[_0x108ddf(0x155)](_0xf8155d),_0x435abe=this[_0x108ddf(0x10b)][_0x108ddf(0x135)][_0x108ddf(0x177)]({'propIxClass':_0x3ba49a}),_0x448d43=this[_0x108ddf(0x10b)][_0x108ddf(0x135)][_0x108ddf(0xde)]({'cls':_0x435abe,'propIxSubclass':_0x473856}),_0x40781a=_0x435abe?''+_0x435abe[_0x108ddf(0x14b)]+(_0x448d43?'\x20('+_0x448d43[_0x108ddf(0x14b)]+')':''):'';_0x2e031e['text'](_0x40781a),_0x174e6d[_0x108ddf(0x129)](_0x40781a),this[_0x108ddf(0x116)](_0xf8155d,{'cls':_0x435abe,'sc':_0x448d43,'$stgSpellsTable':_0x180416});const _0x27df4a=this[_0x108ddf(0x185)][_0x108ddf(0x150)](_0x435abe,_0x448d43),_0x33d779=_0x27df4a&&!this[_0x108ddf(0x105)][_0xf8155d];if(!_0x27df4a&&this[_0x108ddf(0x105)][_0xf8155d]){this[_0x108ddf(0x11b)]({'$stgClassSpells':_0x541e66,'$stgSpellsTable':_0x180416,'$wrpLeftInner':_0x46c0fe,'$wrpRightInner':_0x2268b7,'ix':_0xf8155d});return;}else _0x33d779&&this[_0x108ddf(0xe4)]({'ix':_0xf8155d,'cls':_0x435abe,'sc':_0x448d43,'$wrpPreparedLearned':_0x17cdea,'propTargetLevel':_0x2abb0f});_0x5dae55['empty']();if(_0x448d43&&_0x448d43['additionalSpells']){_0x5dae55['showVe']()[_0x108ddf(0xfb)](_0x108ddf(0x109)+_0x448d43[_0x108ddf(0x14b)]+_0x108ddf(0x162)),this[_0x108ddf(0x17c)][_0xf8155d]=new Charactermancer_AdditionalSpellsSelect({'spellDatas':this[_0x108ddf(0x192)]['spell'],'additionalSpells':_0x448d43[_0x108ddf(0x153)],'modalFilterSpells':this['_modalFilterSpells']}),this[_0x108ddf(0x17c)][_0xf8155d]['render'](_0x5dae55);const _0x1b06b9=()=>{const _0x1055d0=_0x108ddf;if(this[_0x1055d0(0x105)][_0xf8155d])this[_0x1055d0(0x105)][_0xf8155d]['alwaysPreparedSpellsSubclass']=MiscUtil['copy'](this[_0x1055d0(0x17c)][_0xf8155d]['spellsAlwaysPrepared']);};this[_0x108ddf(0x17c)][_0xf8155d]['addHookAlwaysPreparedSpells'](_0x1b06b9);const _0x33ca00=()=>{const _0x3fa0a5=_0x108ddf;if(this[_0x3fa0a5(0x105)][_0xf8155d])this[_0x3fa0a5(0x105)][_0xf8155d][_0x3fa0a5(0x180)]=MiscUtil[_0x3fa0a5(0xed)](this[_0x3fa0a5(0x17c)][_0xf8155d][_0x3fa0a5(0x101)]);};this['_compsSpellAdditionalSpellSubclass'][_0xf8155d]['addHookExpandedSpells'](_0x33ca00);}else _0x5dae55[_0x108ddf(0x10d)](),this[_0x108ddf(0x17c)][_0xf8155d]=null;this[_0x108ddf(0x196)](_0xf8155d,{'$wrpLeftInner':_0x46c0fe,'$wrpRightInner':_0x2268b7});const _0x2701e9=DataConverterClass['getMaxCasterProgression'](_0x435abe?.[_0x108ddf(0x128)],_0x448d43?.[_0x108ddf(0x128)]);if(this[_0x108ddf(0x105)][_0xf8155d])this['_compsSpellSpells'][_0xf8155d][_0x108ddf(0x128)]=_0x2701e9;if(this[_0x108ddf(0x14a)][_0xf8155d])this[_0x108ddf(0x14a)][_0xf8155d][_0x108ddf(0x128)]=_0x2701e9;if(this[_0x108ddf(0x105)][_0xf8155d]&&this[_0x108ddf(0x17c)][_0xf8155d])this[_0x108ddf(0x105)][_0xf8155d][_0x108ddf(0x180)]=MiscUtil[_0x108ddf(0xed)](this[_0x108ddf(0x17c)][_0xf8155d][_0x108ddf(0x101)]);else{if(this[_0x108ddf(0x105)][_0xf8155d])this[_0x108ddf(0x105)][_0xf8155d][_0x108ddf(0x180)]=[];}if(_0x33d779)this[_0x108ddf(0x178)]({'ix':_0xf8155d,'$stgClassSpells':_0x541e66,'$dispSpell':_0x4119ed,'$wrpSlotLevelSelect':_0x378d97});}async['_hk_onChangeSubclass_pRenderSpellTable'](_0x9fbb19,{cls:_0x53df4f,sc:_0x23d620,$stgSpellsTable:_0x451e46}){const _0x645da7=_0x2db11e,{lockChangeSubclassTable:_0x8c65d7}=this[_0x645da7(0x185)]['_spell_getLocks'](_0x9fbb19);try{await this[_0x645da7(0x10e)](_0x8c65d7),await this[_0x645da7(0x100)](_0x9fbb19,{'cls':_0x53df4f,'sc':_0x23d620,'$stgSpellsTable':_0x451e46});}finally{this['_unlock'](_0x8c65d7);}}async[_0x2db11e(0x100)](_0x14647f,{cls:_0x47f1b5,sc:_0x288ebb,$stgSpellsTable:_0x5c1b4c}){const _0x1994d5=_0x2db11e,_0xfbd5e3=_0x47f1b5?await DataUtil[_0x1994d5(0x10f)][_0x1994d5(0x156)](_0x47f1b5):null,_0x44673e=_0x288ebb?await DataUtil[_0x1994d5(0x10f)]['pGetDereferencedSubclassData'](_0x288ebb):null,_0x1399c7=DataConverterClass[_0x1994d5(0x19b)](_0xfbd5e3,_0x44673e,{'isSpellsOnly':!![]});_0x5c1b4c[_0x1994d5(0x144)]('')['fastSetHtml'](_0x1399c7);}static[_0x2db11e(0x166)](_0x2cb7e9){const _0x4225aa=_0x2db11e;return{'lockChangeSubclassTable':_0x4225aa(0x110)+_0x2cb7e9+_0x4225aa(0xfd)};}[_0x2db11e(0x196)](_0x5dc4d0,{$wrpLeftInner:_0x18982a,$wrpRightInner:_0x265b67}){const _0x4da31c=_0x2db11e,{propIxClass:_0x48a660,propIxSubclass:_0x58ded8,propCurLevel:_0x5b8c89,propTargetLevel:_0x2e940b}=ActorCharactermancerBaseComponent[_0x4da31c(0x155)](_0x5dc4d0),_0x17372a=this[_0x4da31c(0x10b)][_0x4da31c(0x135)][_0x4da31c(0x177)]({'propIxClass':_0x48a660}),_0x56b16a=this[_0x4da31c(0x10b)][_0x4da31c(0x135)]['getSubclass_']({'cls':_0x17372a,'propIxSubclass':_0x58ded8}),_0x139ab1=this['_parent'][_0x4da31c(0x135)][_0x4da31c(0x16f)][_0x5b8c89]??0x0,_0x5614d1=this['_parent']['compClass'][_0x4da31c(0x16f)][_0x2e940b],_0x186b84=DataConverterClass['getMaxCasterProgression'](_0x17372a?.[_0x4da31c(0x128)],_0x56b16a?.[_0x4da31c(0x128)]),_0x218f6e=Charactermancer_Util[_0x4da31c(0x138)]({'casterProgression':_0x186b84,'curLevel':_0x139ab1,'targetLevel':_0x5614d1});if(this[_0x4da31c(0x105)][_0x5dc4d0]){if(_0x218f6e){const {spellLevelLow:_0x400075,spellLevelHigh:_0x16e3d6}=_0x218f6e;this[_0x4da31c(0x105)][_0x5dc4d0][_0x4da31c(0x10a)]=_0x400075,this[_0x4da31c(0x105)][_0x5dc4d0][_0x4da31c(0xf4)]=_0x16e3d6;}else this[_0x4da31c(0x105)][_0x5dc4d0][_0x4da31c(0x10a)]=null,this[_0x4da31c(0x105)][_0x5dc4d0][_0x4da31c(0xf4)]=null;this['_compsSpellSpells'][_0x5dc4d0][_0x4da31c(0x154)]=this[_0x4da31c(0xef)](_0x17372a,_0x56b16a,_0x5614d1),this['_compsSpellSpells'][_0x5dc4d0]['fixedLearnedProgression']=this[_0x4da31c(0x17a)](_0x5dc4d0,_0x17372a,_0x56b16a,_0x5614d1),this['_compsSpellSpells'][_0x5dc4d0]['isIncludeUaEtcSpellLists']=this[_0x4da31c(0xd9)][_0x4da31c(0xf0)];}this[_0x4da31c(0x12b)](_0x5dc4d0);this[_0x4da31c(0x14a)][_0x5dc4d0]&&(this[_0x4da31c(0x14a)][_0x5dc4d0][_0x4da31c(0x190)]=_0x139ab1,this[_0x4da31c(0x14a)][_0x5dc4d0][_0x4da31c(0xd8)]=_0x5614d1,this[_0x4da31c(0x14a)][_0x5dc4d0][_0x4da31c(0x11c)]=_0x17372a?.[_0x4da31c(0x11c)]||_0x56b16a?.[_0x4da31c(0x11c)],this['_compsSpellSpellSlotLevelSelect'][_0x5dc4d0]['casterProgression']=_0x186b84,this[_0x4da31c(0x14a)][_0x5dc4d0][_0x4da31c(0x17e)]=_0x17372a?.[_0x4da31c(0x17e)]||_0x56b16a?.[_0x4da31c(0x17e)],this['_compsSpellSpellSlotLevelSelect'][_0x5dc4d0][_0x4da31c(0x137)]=_0x17372a?.[_0x4da31c(0x137)]||_0x56b16a?.[_0x4da31c(0x137)]);if(this[_0x4da31c(0x17c)][_0x5dc4d0]){this[_0x4da31c(0x17c)][_0x5dc4d0][_0x4da31c(0x190)]=_0x139ab1,this[_0x4da31c(0x17c)][_0x5dc4d0][_0x4da31c(0xd8)]=_0x5614d1;if(_0x218f6e){const {spellLevelLow:_0x2ac129,spellLevelHigh:_0x567d13}=_0x218f6e;this['_compsSpellAdditionalSpellSubclass'][_0x5dc4d0][_0x4da31c(0x10a)]=_0x2ac129,this[_0x4da31c(0x17c)][_0x5dc4d0][_0x4da31c(0xf4)]=_0x567d13;}else this[_0x4da31c(0x17c)][_0x5dc4d0][_0x4da31c(0x10a)]=null,this[_0x4da31c(0x17c)][_0x5dc4d0][_0x4da31c(0xf4)]=null;}if(_0x17372a){const _0x4667d0=this[_0x4da31c(0x185)]['_spell_isCasterClassAtLevel'](_0x17372a,_0x56b16a,_0x5614d1);_0x18982a[_0x4da31c(0x12e)](_0x4667d0);const _0x409a8a=this[_0x4da31c(0x185)]['_spell_isClassCaster'](_0x17372a,_0x56b16a);_0x265b67[_0x4da31c(0x12e)](_0x409a8a);}}static['_spell_isClassCaster'](_0x2d549c,_0x15d59f){const _0x515d4e=_0x2db11e;return _0x2d549c?.[_0x515d4e(0x128)]||_0x15d59f?.[_0x515d4e(0x128)]||_0x2d549c?.[_0x515d4e(0x153)]||_0x15d59f?.[_0x515d4e(0x153)];}static[_0x2db11e(0x174)](_0x34657b,_0x4e6661,_0x3bb05f){const _0x35f1f7=_0x2db11e;if(!this[_0x35f1f7(0x150)](_0x34657b,_0x4e6661))return![];if(_0x3bb05f==null)return![];const {casterProgression:_0x427eee}=Charactermancer_Class_Util[_0x35f1f7(0xea)](_0x34657b,_0x4e6661,{'targetLevel':_0x3bb05f}),_0x539882=UtilActors[_0x35f1f7(0xdf)][_0x427eee];if((_0x539882?.[_0x3bb05f-0x1]||[])[_0x35f1f7(0x10c)](Boolean))return!![];if(this['_spell_isCasterClassAtLevel_additionalSpells'](_0x34657b?.[_0x35f1f7(0x153)],_0x3bb05f))return!![];if(this[_0x35f1f7(0x189)](_0x4e6661?.[_0x35f1f7(0x153)],_0x3bb05f))return!![];return![];}static[_0x2db11e(0x189)](_0x3e129f,_0x426dec){const _0x2447e4=_0x2db11e;if(!_0x3e129f)return![];if(_0x426dec==null)return![];return _0x3e129f[_0x2447e4(0x10c)](_0x459ddb=>this['_spell_isCasterClassAtLevel_additionalSpellsBlock'](_0x459ddb,_0x426dec));}static[_0x2db11e(0x112)](_0x345904,_0x264b80){const _0x33844b=_0x2db11e,_0x2dd4a4=Object[_0x33844b(0x106)](_0x345904);for(const _0x4972aa of _0x2dd4a4){switch(_0x4972aa){case'innate':case _0x33844b(0xd0):case'expanded':{const _0x5cf533=Object['keys'](_0x345904[_0x4972aa]||{})[_0x33844b(0x10c)](_0x185273=>{const _0x3714ff=_0x33844b,_0x1f4e5e=/^s(\d+)$/i[_0x3714ff(0x13f)](_0x185273);if(_0x1f4e5e)return![];if(isNaN(_0x185273))return![];return Number(_0x185273)<=_0x264b80;});if(_0x5cf533)return!![];}}}return![];}[_0x2db11e(0x14e)]({ix:_0x2c8190,cls:_0xdefd3,sc:_0x406c56,existingClassMeta:_0x356e8d}){const _0x2031ba=_0x2db11e;if(!_0x356e8d?.[_0x2031ba(0xfc)])return null;const _0x513177=DataConverterClass[_0x2031ba(0xd2)](_0xdefd3?.[_0x2031ba(0x128)],_0x406c56?.[_0x2031ba(0x128)]),_0x292e57=Charactermancer_Util['getCasterProgressionMeta']({'casterProgression':_0x513177,'curLevel':0x0,'targetLevel':_0x356e8d['level']});return{'maxLearnedCantrips':this[_0x2031ba(0xef)](_0xdefd3,_0x406c56,_0x356e8d[_0x2031ba(0xfc)]),'fixedLearnedProgression':this['_spell_getFixedLearnedProgression'](_0x2c8190,_0xdefd3,_0x406c56,_0x356e8d[_0x2031ba(0xfc)],{'isExistingClass':!![]}),'maxPreparedSpells':this[_0x2031ba(0x141)](_0xdefd3,_0x406c56,_0x356e8d['level'],{'existingAbilityScores':Charactermancer_Util[_0x2031ba(0x152)](this[_0x2031ba(0x103)])}),'spellLevelLow':_0x292e57?.['spellLevelLow'],'spellLevelLowHigh':_0x292e57?.[_0x2031ba(0xf4)]};}[_0x2db11e(0xfe)](){return{'spells_isIncludeUaEtcSpellLists':![]};}}export{ActorCharactermancerSpell};