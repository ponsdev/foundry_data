const _0x5af0=['checked','AppFilter','teardown','761DPZEzO','filter','actor','_pageFilter','render','find','_$iptSearch','addEventListener','_actor','getFltrSpellLevelStr','Material','_rows','MODULE_LOCATION','[name=btn-toggle-summary]','concentration','val','pInitFilterBox','_actorItems','filterBox','prop','getData','pHandleButtonClick','pCommitState','Ritual','pSetSpellItemIsPrepared','62119hfQkLJ','handleSelectClick','input','Verbal','131248ihQgvf','Concentration','639VrbwOn','Somatic','_$btnReset','click','forEach','initBtnSortHandlers','_filterBox','1319bDdMeF','then','_levelFilter','2OiBZEI','change','name','material','_handleFilterChange','toggleClass','Level','Spell\x20Prepared\x20Toggler','type','_list','components','ve-hidden','_pPopulateBoxOptions','close','ele','getMaxWindowHeight','1003dBBSaj','_activateListeners_pInitListAndFilters','data','map','addToFilters','reset','vocal','prepared','/template/ActorSpellPreparedToggler.handlebars','.search','level','[name=btn-filter]','621434KPnoru','_activateListeners_initBtnReset','ritual','spell','activateListeners','toDisplay','preparation','push','$dispModified','685347mbuJJJ','mode','_fMisc','visibleItems','resetNextState','setNextState','sortMetaFilter','EVNT_VALCHANGE','items','[data-name=\x22wrp-btns-sort\x22]','.act-sp-prep__disp-modified','bind','2696715HrnSDk','.fltr__mini-view','get'];const _0x2f19=function(_0x1eccc4,_0x3c9637){_0x1eccc4=_0x1eccc4-0x1c6;let _0x5af00f=_0x5af0[_0x1eccc4];return _0x5af00f;};const _0x24807a=_0x2f19;(function(_0x10cbdf,_0x47edfc){const _0x5435b8=_0x2f19;while(!![]){try{const _0x467890=parseInt(_0x5435b8(0x1c8))+parseInt(_0x5435b8(0x1d1))+-parseInt(_0x5435b8(0x202))*-parseInt(_0x5435b8(0x209))+parseInt(_0x5435b8(0x200))+parseInt(_0x5435b8(0x1fc))*parseInt(_0x5435b8(0x20c))+-parseInt(_0x5435b8(0x1e3))*-parseInt(_0x5435b8(0x21c))+-parseInt(_0x5435b8(0x1dd));if(_0x467890===_0x47edfc)break;else _0x10cbdf['push'](_0x10cbdf['shift']());}catch(_0x594f50){_0x10cbdf['push'](_0x10cbdf['shift']());}}}(_0x5af0,0x7327c));import{SharedConsts}from'../shared/SharedConsts.js';import{Util}from'./Util.js';import{AppFilter}from'./FilterApplications.js';import{DataConverterSpell}from'./DataConverterSpell.js';class ActorSpellPreparedToggler extends Application{static[_0x24807a(0x1f8)](_0xe1d783,_0x40ccbf,_0x18b7eb,_0x4c30d1){const _0x4f2b55=_0x24807a,_0x148d65=new ActorSpellPreparedToggler(_0x40ccbf[_0x4f2b55(0x1e5)]);_0x148d65[_0x4f2b55(0x1e7)](!![]);}constructor(_0x44b063){const _0x409bab=_0x24807a;super({'title':_0x409bab(0x213),'template':SharedConsts[_0x409bab(0x1ef)]+_0x409bab(0x224),'width':0x1e0,'height':Util[_0x409bab(0x21b)](),'resizable':!![]}),this['_actor']=_0x44b063,this[_0x409bab(0x1f4)]=this[_0x409bab(0x1eb)][_0x409bab(0x1d9)][_0x409bab(0x1e4)](_0x1416f9=>_0x1416f9[_0x409bab(0x214)]===_0x409bab(0x1cb)&&_0x1416f9['data']['data']['level']!==0x0&&_0x1416f9[_0x409bab(0x21e)][_0x409bab(0x21e)][_0x409bab(0x1ce)]&&_0x1416f9['data'][_0x409bab(0x21e)][_0x409bab(0x1ce)][_0x409bab(0x1d2)]===_0x409bab(0x223)),this['_pageFilter']=new ActorSpellPreparedToggler[(_0x409bab(0x1e1))](),this['_list']=null,this[_0x409bab(0x204)]=null,this['_$iptSearch']=null;}[_0x24807a(0x210)](){const _0x27df97=_0x24807a,_0x196a06=this[_0x27df97(0x1e6)]['filterBox']['getValues']();this['_list'][_0x27df97(0x1e4)](_0x345115=>this[_0x27df97(0x1e6)][_0x27df97(0x1cd)](_0x196a06,this['_rows'][_0x345115['ix']]));}[_0x24807a(0x1cc)](_0x5ef55f){const _0x196c86=_0x24807a;super[_0x196c86(0x1cc)](_0x5ef55f),this['_activateListeners_initBtnRun'](_0x5ef55f),this[_0x196c86(0x1c9)](_0x5ef55f),this[_0x196c86(0x21d)](_0x5ef55f);}['_activateListeners_initBtnRun'](_0x322444){_0x322444['find']('[name=\x22btn-run\x22]')['click'](async()=>{const _0x17ce41=_0x2f19;for(const _0x53c3d8 of this[_0x17ce41(0x215)][_0x17ce41(0x1d9)]){await _0x53c3d8[_0x17ce41(0x21e)][_0x17ce41(0x1f9)]();}});}[_0x24807a(0x1c9)](_0x428022){const _0x338a4c=_0x24807a;this[_0x338a4c(0x204)]=_0x428022[_0x338a4c(0x1e8)]('[name=\x22btn-reset\x22]')['click'](()=>{const _0x4f528b=_0x338a4c;_0x428022[_0x4f528b(0x1e8)]('.search')[_0x4f528b(0x1f2)]('');if(!this[_0x4f528b(0x215)])return;this['_list'][_0x4f528b(0x221)](),this[_0x4f528b(0x215)]['items'][_0x4f528b(0x206)](_0x1992d8=>_0x1992d8['data'][_0x4f528b(0x1d5)]());});}[_0x24807a(0x21d)](_0x1f96e9){const _0x726fa4=_0x24807a;this[_0x726fa4(0x1e9)]=_0x1f96e9[_0x726fa4(0x1e8)](_0x726fa4(0x225)),this[_0x726fa4(0x215)]=new List({'$iptSearch':this[_0x726fa4(0x1e9)],'$wrpList':_0x1f96e9[_0x726fa4(0x1e8)]('.veapp__list'),'isUseJquery':!![],'fnSort':PageFilterSpells['sortSpells']}),SortUtil[_0x726fa4(0x207)](_0x1f96e9[_0x726fa4(0x1e8)](_0x726fa4(0x1da)),this['_list']);const _0x20dc0a=_0x1f96e9['find']('[name=\x22cb-select-all\x22]')[_0x726fa4(0x20d)](()=>{const _0x6a0df5=_0x726fa4,_0x30d44b=_0x20dc0a[_0x6a0df5(0x1f6)](_0x6a0df5(0x1e0));this[_0x6a0df5(0x215)][_0x6a0df5(0x1d4)][_0x6a0df5(0x206)](_0x271e13=>_0x271e13[_0x6a0df5(0x21e)][_0x6a0df5(0x1d6)](_0x30d44b));});return this['_pageFilter'][_0x726fa4(0x1f3)]({'$iptSearch':this[_0x726fa4(0x1e9)],'$btnReset':this[_0x726fa4(0x204)],'$btnOpen':_0x1f96e9[_0x726fa4(0x1e8)](_0x726fa4(0x1c7)),'$btnToggleSummaryHidden':_0x1f96e9[_0x726fa4(0x1e8)](_0x726fa4(0x1f0)),'$wrpMiniPills':_0x1f96e9[_0x726fa4(0x1e8)](_0x726fa4(0x1de)),'namespace':'tool-actor-spell-prepared-toggler'})[_0x726fa4(0x20a)](()=>{const _0x444acb=_0x726fa4;this[_0x444acb(0x1ee)][_0x444acb(0x206)](_0x1c23d3=>this['_pageFilter'][_0x444acb(0x220)](_0x1c23d3)),this[_0x444acb(0x215)]['doAbsorbItems'](this[_0x444acb(0x1f4)],{'fnGetName':_0xf8d0e2=>_0xf8d0e2['name'],'fnGetValues':_0xef3931=>({'level':MiscUtil[_0x444acb(0x1df)](_0xef3931,'data',_0x444acb(0x21e),'level')||-0x1}),'fnGetData':_0x4fed3d=>{const _0x5b8ca2=_0x444acb,_0x446691=$(_0x4fed3d['ele']);return{'cbSel':_0x446691['find'](_0x5b8ca2(0x1fe))[0x0],'$dispModified':_0x446691[_0x5b8ca2(0x1e8)](_0x5b8ca2(0x1db))};},'fnBindListeners':(_0x3c0783,_0x36e66c)=>{const _0x3135b9=_0x444acb,_0x47c58a={'prepared':_0x36e66c['data']['data'][_0x3135b9(0x1ce)][_0x3135b9(0x223)]},_0x13a7dd=()=>{const _0x5990a0=_0x3135b9;_0x3c0783[_0x5990a0(0x21e)]['cbSel'][_0x5990a0(0x1e0)]=_0x47c58a[_0x5990a0(0x223)],_0x3c0783[_0x5990a0(0x21e)][_0x5990a0(0x1d0)][_0x5990a0(0x211)](_0x5990a0(0x217),_0x36e66c[_0x5990a0(0x21e)][_0x5990a0(0x21e)]['preparation'][_0x5990a0(0x223)]===_0x47c58a['prepared']);},_0x4dc1c2=_0x213ac7=>{const _0x2eea3f=_0x3135b9;_0x47c58a[_0x2eea3f(0x223)]=_0x213ac7,_0x13a7dd();},_0x4d628c=()=>{const _0x223e28=_0x3135b9;_0x47c58a['prepared']=_0x36e66c['data'][_0x223e28(0x21e)][_0x223e28(0x1ce)]['prepared'],_0x13a7dd();},_0x10f8f4=async()=>{const _0x2565a1=_0x3135b9;await DataConverterSpell[_0x2565a1(0x1fb)](_0x36e66c,_0x47c58a[_0x2565a1(0x223)]),_0x13a7dd();};_0x3c0783[_0x3135b9(0x21e)][_0x3135b9(0x1d6)]=_0x4dc1c2,_0x3c0783['data']['resetNextState']=_0x4d628c,_0x3c0783[_0x3135b9(0x21e)][_0x3135b9(0x1f9)]=_0x10f8f4,_0x3c0783[_0x3135b9(0x21a)][_0x3135b9(0x1ea)](_0x3135b9(0x205),_0x13b987=>{const _0x2ebcab=_0x3135b9;ListUiUtil[_0x2ebcab(0x1fd)](this[_0x2ebcab(0x215)],_0x3c0783,_0x13b987,{'isNoHighlightSelection':!![],'fnOnSelectionChange':(_0x35acd1,_0x5d94f8)=>_0x35acd1[_0x2ebcab(0x21e)][_0x2ebcab(0x1d6)](_0x5d94f8)});});}}),this[_0x444acb(0x215)]['init'](),this[_0x444acb(0x1e6)][_0x444acb(0x1f5)][_0x444acb(0x1e7)](),this['_pageFilter'][_0x444acb(0x1f5)]['on'](FilterBox[_0x444acb(0x1d8)],this['_handleFilterChange'][_0x444acb(0x1dc)](this)),this[_0x444acb(0x210)]();});}[_0x24807a(0x1f7)](){const _0x4bbd02=_0x24807a;return this[_0x4bbd02(0x1ee)]=this[_0x4bbd02(0x1f4)][_0x4bbd02(0x21f)]((_0x2b6cc0,_0x1e2455)=>({'name':_0x2b6cc0[_0x4bbd02(0x20e)],'isPrepared':_0x2b6cc0['data']['data']['preparation'][_0x4bbd02(0x223)],'level':MiscUtil[_0x4bbd02(0x1df)](_0x2b6cc0,_0x4bbd02(0x21e),_0x4bbd02(0x21e),_0x4bbd02(0x1c6))||-0x1,'concentration':!!MiscUtil[_0x4bbd02(0x1df)](_0x2b6cc0,_0x4bbd02(0x21e),_0x4bbd02(0x21e),'components',_0x4bbd02(0x1f1)),'v':!!MiscUtil[_0x4bbd02(0x1df)](_0x2b6cc0,'data',_0x4bbd02(0x21e),_0x4bbd02(0x216),_0x4bbd02(0x222)),'s':!!MiscUtil[_0x4bbd02(0x1df)](_0x2b6cc0,'data',_0x4bbd02(0x21e),_0x4bbd02(0x216),'somatic'),'m':!!MiscUtil['get'](_0x2b6cc0,_0x4bbd02(0x21e),_0x4bbd02(0x21e),'components',_0x4bbd02(0x20f)),'ritual':!!MiscUtil[_0x4bbd02(0x1df)](_0x2b6cc0,_0x4bbd02(0x21e),_0x4bbd02(0x21e),_0x4bbd02(0x216),_0x4bbd02(0x1ca)),'ix':_0x1e2455})),{...super['getData'](),'rows':this['_rows']};}['close'](..._0x18fd0c){const _0x2796d6=_0x24807a;return this[_0x2796d6(0x1e6)][_0x2796d6(0x1e2)](),super[_0x2796d6(0x219)](..._0x18fd0c);}}ActorSpellPreparedToggler[_0x24807a(0x1e1)]=class extends AppFilter{constructor(){const _0x31ab07=_0x24807a;super(),this['_levelFilter']=new Filter({'header':_0x31ab07(0x212),'items':[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9],'displayFn':_0x58dd89=>~_0x58dd89?PageFilterSpells[_0x31ab07(0x1ec)](_0x58dd89):'Unknown'}),this['_miscFilter']=new Filter({'header':'Components\x20&\x20Miscellaneous','items':[_0x31ab07(0x201),_0x31ab07(0x1ff),_0x31ab07(0x203),_0x31ab07(0x1ed),_0x31ab07(0x1fa)],'itemSortFn':PageFilterSpells[_0x31ab07(0x1d7)]});}['addToFilters'](_0x2c4b64,_0x9d8a5f){const _0x50bccc=_0x24807a;if(_0x9d8a5f)return;this[_0x50bccc(0x20b)]['addItem'](_0x2c4b64['level']),_0x2c4b64['_fMisc']=[];if(_0x2c4b64[_0x50bccc(0x1f1)])_0x2c4b64['_fMisc'][_0x50bccc(0x1cf)](_0x50bccc(0x201));if(_0x2c4b64['v'])_0x2c4b64['_fMisc'][_0x50bccc(0x1cf)](_0x50bccc(0x1ff));if(_0x2c4b64['s'])_0x2c4b64[_0x50bccc(0x1d3)][_0x50bccc(0x1cf)](_0x50bccc(0x203));if(_0x2c4b64['m'])_0x2c4b64['_fMisc']['push']('Material');if(_0x2c4b64[_0x50bccc(0x1ca)])_0x2c4b64[_0x50bccc(0x1d3)][_0x50bccc(0x1cf)](_0x50bccc(0x1fa));}async[_0x24807a(0x218)](_0x197424){_0x197424['filters']=[this['_levelFilter'],this['_miscFilter']];}['toDisplay'](_0x54afa3,_0x3e2e59){const _0x2be70d=_0x24807a;return this[_0x2be70d(0x208)][_0x2be70d(0x1cd)](_0x54afa3,_0x3e2e59[_0x2be70d(0x1c6)],_0x3e2e59[_0x2be70d(0x1d3)]);}};export{ActorSpellPreparedToggler};