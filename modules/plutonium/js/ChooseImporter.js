const _0x3b9a=['_pDoQuickOpen','pack','race','some','_MODE_ID_TABLES','_rowMetasMode','_actor','removeHook','items','spells','_activateListeners_initPredefinedMode','Optional\x20&\x20Variant\x20Rules','manifesturlWorld','Books','pDoQuickOpenUsingExistingSourceSelection','pGetFileOutputs','minimumRole','length','init','PG_VEHICLES','vehicleUpgrade','html','isDedupable','2257nVuJCM','click','isClosable','ChooseImporter_pack_','source','vehicle-upgrades','manifesturlModule','<button\x20class=\x22btn\x20btn-5et\x20imp-wiz__btn-tab-head\x20imp-wiz__btn-tab-head--left\x20w-50\x20ml-2\x20','7MsIgvZ','addHookAll','_INSTANCE_CACHE','vehicleupgrade','pInit','_modes','toggleVe','btn--active','entity','Packages','_getMode','_pFillUi_pFillSourceUi','hasDefaultSource','\x22>Import\x20to\x20Compendium</button>','conditions-diseases','handlePostClose','monster','_pFillUi_handleOpenClick_pGetUrlMeta','Failed\x20to\x20load\x20package\x20(worlds/modules)\x20index!\x20The\x20package\x20importer\x20may\x20not\x20function\x20correctly.\x20','getSaveableState','renderActorDirectory',':\x20Choose\x20Source','tables','_$panel3_tab1','</option>','userData','.imp__btn-open--sheet','renderActorSheet','condition','optional-and-variant-rules','Vehicle\x20Upgrades','_pFillUi','_comp','\x0a\x09\x09</select>','change','$getDirButton','off','prop','getImporter','Open\x20Importer','importerInstance','_pFillUi_pFillConfigUi','wizardTitleButtonOpenImporter','_$panel3WrpLoader','<input\x20class=\x22mr-1\x22\x20type=\x22radio\x22\x20name=\x22package-mode\x22\x20','_$panel2WrpList','ChooseImporter_is_pack_','deleteActor','</button>','getPod','_pGetUi_pCheckOpenCachedInstance','<button\x20class=\x22btn\x20btn-sm\x20btn-5et\x20pl-2\x20pr-1\x20imp-wiz__btn-package-archive\x20h-100\x22>','bind','pGetSources','_pFillUi_handleOpenClick_pGetSpecialMeta','Backgrounds','_trackUiHook','error','folderType','No\x20unlocked/compatible\x20compendiums\x20found\x20for\x20type\x20\x22','set','<div\x20class=\x22flex-col\x20w-100\x20h-100\x20pb-3\x22></div>','packs','Choose\x20','<h4\x20class=\x22imp-wiz__head-panel\x22>','_STORAGE_KEY_LAST_USED_MODE','_activateListeners_pHkMode','<div\x20class=\x22bold\x20veapp__msg-error\x22>Failed\x20to\x20load!</div>','getMaxWindowWidth','props','Please\x20select\x20an\x20import\x20mode\x20first!','warning','$pGetAddAppLoadingOverlay','.\x22\x20You\x20may\x20need\x20to\x20re-open\x20the\x20Wizard.','_activateListeners_fillPanel1','label','isFolderOnly','classes-subclasses','_MODE_ID_CREATURES','toLowerCase','checked','preventDefault','_$panel3WrpConfig',':\x20Choose\x20Source</h4>','_$panel1','PG_OBJECTS','_doSaveStateDebounced','isNonCacheableInstance','owner','namespace','_$panel3Head','_pFillUi_$pGetWrpConfigSettings','bringToFront','get','renderJournalDirectory','background','disabled\x20title=\x22No\x20world\x20available.\x22','remove','warn','adventures','_pFillUi_handleOpenClick_pGetFileMeta','metaOther','411450bLDTcW','_$stgUrl','empty','_pFillUi_$pGetWrpPackageImport','render','isDefault','isTemp','_getImportToPackKey','add','PG_PSIONICS','$btn','_packageIndex','Book','isRemainOpen','_getInstanceCacheKey','then','pPreRender','filter','_MODES','<button\x20class=\x22btn\x20btn-sm\x20btn-5et\x20pl-2\x20pr-1\x20imp-wiz__btn-quick\x20h-100\x22\x20title=\x22Open\x20Default\x20Importer\x22><i\x20class=\x22fas\x20fa-forward\x22></i></button>','notifications','role','activateListeners','_$getDirButtonQuick_getModeId','<button\x20class=\x22mt-auto\x20btn\x20btn-5et\x22\x20disabled>Import\x20Package</button>','_$panel3WrpTabs','gameProp','name','close','modeId','journal','_DEFAULT_STATE','feat','Feats','pImportManifesturlWorld','_uiHooks','page','_resetUiHooks','collection','_getFilterNamespace','Creatures','Supernatural\x20Gifts\x20&\x20Rewards','actor','isAlwaysCloseWindow','copy','pGetElements','_pPackageIndex','packageSource','Failed\x20to\x20load\x20importer!\x20','disabled\x20title=\x22No\x20module\x20available.\x22','item','getMergedPackageIndex','state','_getSourceSelectionKey','metadata','_appSourceSelector','_getDefaultState','predefinedMode','entries','active','STR_SEE_CONSOLE','addHook','reward','Adventure','isRadio','pHandleButtonClick','vehicles','_getSelectedImporterStorageKey','toggleClass','Configure\x20and\x20Import','push','_GAME_PROP_ACTORS','Import','pGet','rewards','cacheKey','<button\x20class=\x22mt-auto\x20btn\x20btn-5et\x22>','$row','find','__comp','_predefinedMode','PG_BESTIARY','Psionics','<button\x20class=\x22btn\x20btn-sm\x20btn-5et\x20w-100\x22>','_pHandleOpenImporter_pSaveLastUsed','_deferredHooks','metaExternalArchive','MODULE_LOCATION','catch','Other\x20Options\x20&\x20Features','variantrule','6546ErGNwS','_GAME_PROP_JOURNAL','_pInitImporter','val','Spells','insertBefore','_pDoSaveState','_$window','_getPackSelectionKey','13949ClawNX','_doAddButtonSheet','_$stgNone','join','_getButtonImportQuickTitle','Importer','_$panel3','<span\x20class=\x22fas\x20fa-atom\x22></span>\x20','[data-panel=\x221\x22]','_pInitSourceSelector','_pHandleOpenImporter','<span\x20class=\x22fas\x20fa-heart\x22></span>','pGetUrlOutputs','_GAME_PROP_TABLES','pImportManifesturlModule','cacheKeys','_importerPreRenderArgs','contents','\x20<i\x20class=\x22fas\x20fa-external-link-alt\x22></i></a>','4JDpBkj','_$panel3_tab2','61FWTfjA','_$panel3_btnImportPackage','psionic','backgrounds','pSyncStateFrom','pGetSelectedSources','_$panel2Head','objects','<button\x20class=\x22imp__btn-open\x20w-100\x20mx-0\x22>','262515KpbmTM','forEach','_GAME_PROP_ITEMS','23PVsiAC','$getCbBool','_isAlwaysCloseWindow','singleName','Configure\x20and\x20Import\x20','_getButtonImportHtml','handlePreClose','196645AfkBcc','Plutonium\x20','\x22>Import\x20to\x20Folder</button>','hasActor','disabled','text','url','PG_TABLES','content','_$stgSpecial','debounce','ixTabPanel3','Classes\x20&\x20Subclasses','PG_VARIANTRULES','PG_CONDITIONS_DISEASES','maximize','_pFillUi_handleOpenClick_pOpen','ChooseImporter_source_filter','ChooseImporter_source_','fnCheckRequirements','_$panel2','spell','[data-panel=\x223\x22]','getMaxWindowHeight','_$panel2WrpLoader','isFile','553364DtYXlf','_activateListeners_fillPanel2','_pGetImportListUserData','optionalfeature','_importer','pSet','_pGetUi_cacheInstance','\x20Source','wizardTitleWindow','constructor','instance','renderRollTableDirectory','/template/ChooseImporterForMode.handlebars','mode','_pFillUi_$getBtnOpenImporter','fromObject','_getButtonImportQuickHtml','hasPackages','showAndRender','append','map','includes','_activateListeners_fillPanel3','_$stgUpload','_MODE_ID_ITEMS','_MODE_ID_ADVENTURES'];const _0x47a0=function(_0xd6bcde,_0xd0bf3d){_0xd6bcde=_0xd6bcde-0x180;let _0x3b9a70=_0x3b9a[_0xd6bcde];return _0x3b9a70;};const _0x5829f8=_0x47a0;(function(_0x370b48,_0x3ae617){const _0x169af2=_0x47a0;while(!![]){try{const _0x266efa=-parseInt(_0x169af2(0x25a))+-parseInt(_0x169af2(0x239))*-parseInt(_0x169af2(0x218))+parseInt(_0x169af2(0x22d))*-parseInt(_0x169af2(0x20f))+parseInt(_0x169af2(0x1b4))+-parseInt(_0x169af2(0x236))+-parseInt(_0x169af2(0x28b))*parseInt(_0x169af2(0x293))+parseInt(_0x169af2(0x22b))*parseInt(_0x169af2(0x240));if(_0x266efa===_0x3ae617)break;else _0x370b48['push'](_0x370b48['shift']());}catch(_0x4c9869){_0x370b48['push'](_0x370b48['shift']());}}}(_0x3b9a,0x46481));import{SharedConsts}from'../shared/SharedConsts.js';import{ImportListFeat}from'./ImportListFeat.js';import{ImportListCreature}from'./ImportListCreature.js';import{ImportListSpell}from'./ImportListSpell.js';import{ImportListItem}from'./ImportListItem.js';import{ImportListRace}from'./ImportListRace.js';import{ImportListClass}from'./ImportListClass.js';import{ImportListBackground}from'./ImportListBackground.js';import{ImportListVariantRule}from'./ImportListVariantRule.js';import{ImportListRollableTable}from'./ImportListRollableTable.js';import{ImportListPsionic}from'./ImportListPsionic.js';import{ImportListOptionalFeature}from'./ImportListOptionalFeature.js';import{ImportListConditionDisease}from'./ImportListConditionDisease.js';import{ImportListVehicle}from'./ImportListVehicle.js';import{ImportListVehicleUpgrade}from'./ImportListVehicleUpgrade.js';import{ImportListObject}from'./ImportListObject.js';import{ImportListAdventure}from'./ImportListAdventure.js';import{ImportListBook}from'./ImportListBook.js';import{ImportListReward}from'./ImportListReward.js';import{UtilApplications}from'./UtilApplications.js';import{Config}from'./Config.js';import{LGT,Util}from'./Util.js';import{FolderPathBuilder}from'./FolderPathBuilder.js';import{AppSourceSelectorMulti}from'./AppSourceSelectorMulti.js';import{ImportSpecialPackages}from'./ImportSpecialPackages.js';import{UtilDataSource}from'./UtilDataSource.js';class ChooseImporter extends Application{static[_0x5829f8(0x286)](){const _0xb15cdf=_0x5829f8;Hooks['on'](_0xb15cdf(0x2ae),(_0x27b3f2,_0x315669,_0x1e22ee)=>ChooseImporter[_0xb15cdf(0x219)](_0x27b3f2,_0x315669,_0x1e22ee));}static[_0x5829f8(0x219)](_0x3884cf,_0x3456d9,_0x3209fd){const _0x2b8c7a=_0x5829f8;if(!_0x3209fd[_0x2b8c7a(0x1a6)])return;const _0x527e84=Config['get']('import',_0x2b8c7a(0x284));if(game['user'][_0x2b8c7a(0x1c9)]<_0x527e84)return;const _0x2b6ba7=_0x3884cf['element']['find']('.window-header');_0x2b6ba7['find'](_0x2b8c7a(0x2ad))[_0x2b8c7a(0x1af)](),$('<a\x20class=\x22imp__btn-open--sheet\x22><span\x20class=\x22fas\x20fa-atom\x22></span>\x20Import</a>')[_0x2b8c7a(0x28c)](_0x2cbbd6=>this[_0x2b8c7a(0x1f5)](_0x2cbbd6,_0x3884cf,_0x3456d9,_0x3209fd))[_0x2b8c7a(0x214)](_0x2b6ba7[_0x2b8c7a(0x202)]('.close'));}static[_0x5829f8(0x1f5)](_0x4e1d92,_0x4c751f,_0x4e4952,_0x1d8250){const _0x7c1d3f=_0x5829f8;_0x4e1d92['preventDefault']();const _0x4bc534=new ChooseImporter(_0x4c751f['actor']);_0x4bc534[_0x7c1d3f(0x1b8)](!![]);}static[_0x5829f8(0x2b6)](_0x330c2e){const _0x496bae=_0x5829f8;return $(_0x496bae(0x235)+this[_0x496bae(0x23e)]()+_0x496bae(0x2c3))['click'](_0x2787e8=>{const _0x48bfc2=_0x496bae;_0x2787e8[_0x48bfc2(0x19f)]();const _0xb6934d=new ChooseImporter();_0xb6934d[_0x48bfc2(0x1b8)](!![]);});}static['_getButtonImportHtml'](){const _0x4ae0b1=_0x5829f8;return _0x4ae0b1(0x21f)+(Config[_0x4ae0b1(0x1ab)]('ui','isStreamerMode')?'':_0x4ae0b1(0x241))+_0x4ae0b1(0x1fc);}static[_0x5829f8(0x26a)](){const _0x3cd5ff=_0x5829f8;return _0x3cd5ff(0x223);}static['_getButtonImportQuickTitle'](){return'Re-open\x20your\x20last-used\x20importer\x20for\x20this\x20directory.';}static['$getDirButtonQuick'](_0x405041){const _0x14afd6=_0x5829f8;return $('<button\x20class=\x22imp__btn-open\x20mx-0\x20w-initial\x22></button>')[_0x14afd6(0x289)](this[_0x14afd6(0x26a)]())['title'](this[_0x14afd6(0x21c)]())['click'](async _0x39019e=>{const _0x27f64f=_0x14afd6;_0x39019e[_0x27f64f(0x19f)]();const _0x700573=await StorageUtil[_0x27f64f(0x1fd)](ChooseImporter[_0x27f64f(0x18f)])||{},_0x275d7b=new ChooseImporter(null,{'modeId':this['_$getDirButtonQuick_getModeId'](_0x405041,_0x700573)});await _0x275d7b[_0x27f64f(0x282)]();});}static[_0x5829f8(0x1cb)](_0x4e385e,_0x227311){const _0x477185=_0x5829f8;switch(_0x4e385e){case _0x477185(0x2a7):return _0x227311?.[ChooseImporter[_0x477185(0x1fb)]]||ChooseImporter[_0x477185(0x19c)];case'renderItemDirectory':return _0x227311?.[ChooseImporter[_0x477185(0x238)]]||ChooseImporter[_0x477185(0x272)];case _0x477185(0x1ac):return _0x227311?.[ChooseImporter['_GAME_PROP_JOURNAL']]||ChooseImporter[_0x477185(0x273)];case _0x477185(0x265):return _0x227311?.[ChooseImporter[_0x477185(0x225)]]||ChooseImporter[_0x477185(0x278)];}}static[_0x5829f8(0x2b9)](_0x50caf1,_0x5327e2){const _0x4327f9=_0x5829f8;switch(_0x50caf1){case _0x4327f9(0x1d4):case UrlUtil['PG_FEATS']:return new ImportListFeat({'actor':_0x5327e2});case _0x4327f9(0x2a3):case UrlUtil[_0x4327f9(0x205)]:return new ImportListCreature({});case _0x4327f9(0x255):case UrlUtil['PG_SPELLS']:return new ImportListSpell({'actor':_0x5327e2});case _0x4327f9(0x1e6):case UrlUtil['PG_ITEMS']:return new ImportListItem({'actor':_0x5327e2});case _0x4327f9(0x276):case UrlUtil['PG_RACES']:return new ImportListRace({'actor':_0x5327e2});case _0x4327f9(0x1ad):case UrlUtil['PG_BACKGROUNDS']:return new ImportListBackground({'actor':_0x5327e2});case _0x4327f9(0x20e):case UrlUtil[_0x4327f9(0x24d)]:return new ImportListVariantRule({});case'table':case UrlUtil[_0x4327f9(0x247)]:return new ImportListRollableTable({});case _0x4327f9(0x22f):case UrlUtil[_0x4327f9(0x1bd)]:return new ImportListPsionic({'actor':_0x5327e2});case _0x4327f9(0x25d):case UrlUtil['PG_OPT_FEATURES']:return new ImportListOptionalFeature({'actor':_0x5327e2});case _0x4327f9(0x2af):case'disease':case UrlUtil[_0x4327f9(0x24e)]:return new ImportListConditionDisease({'actor':_0x5327e2});case _0x4327f9(0x1f2):case UrlUtil['PG_REWARDS']:return new ImportListReward({'actor':_0x5327e2});case'vehicle':case UrlUtil[_0x4327f9(0x287)]:return new ImportListVehicle({});case _0x4327f9(0x288):case _0x4327f9(0x296):return new ImportListVehicleUpgrade({});case'object':case UrlUtil[_0x4327f9(0x1a3)]:return new ImportListObject({});default:return null;}}constructor(_0x3c6739,_0x409aef){const _0x2ec073=_0x5829f8;_0x409aef=_0x409aef||{};const _0xf1640a=_0x409aef[_0x2ec073(0x267)]?Util[_0x2ec073(0x192)](0x3e8):Util[_0x2ec073(0x192)](0x4b0),_0x1c6e7e=_0x409aef[_0x2ec073(0x267)]?SharedConsts[_0x2ec073(0x20b)]+_0x2ec073(0x266):SharedConsts['MODULE_LOCATION']+'/template/ChooseImporter.handlebars';super({'width':_0xf1640a,'height':Util[_0x2ec073(0x257)](0x320),'title':MiscUtil[_0x2ec073(0x1ab)](_0x409aef[_0x2ec073(0x267)],_0x2ec073(0x262))||'Import\x20Wizard','template':_0x1c6e7e,'resizable':!![]}),this[_0x2ec073(0x27a)]=_0x3c6739,this[_0x2ec073(0x204)]=_0x409aef['mode'];if(!this['_predefinedMode']&&_0x409aef[_0x2ec073(0x1d1)])this[_0x2ec073(0x204)]=ChooseImporter['_MODES'][_0x2ec073(0x202)](_0x1e720f=>_0x1e720f['id']===_0x409aef[_0x2ec073(0x1d1)]);this['_namespace']=_0x409aef[_0x2ec073(0x1a7)]||'default',this[_0x2ec073(0x23b)]=!!_0x409aef[_0x2ec073(0x1df)],this['_isTemp']=!!_0x409aef[_0x2ec073(0x1ba)],this['_importerPreRenderArgs']=_0x409aef['importerPreRenderArgs'],this[_0x2ec073(0x203)]=BaseComponent[_0x2ec073(0x269)](ChooseImporter[_0x2ec073(0x1ec)]()),this[_0x2ec073(0x2b3)]=this[_0x2ec073(0x203)][_0x2ec073(0x2c4)](),this[_0x2ec073(0x298)]=[];if(this[_0x2ec073(0x204)])this[_0x2ec073(0x298)]=[this[_0x2ec073(0x204)]];this[_0x2ec073(0x209)]=[],this['_doSaveStateDebounced']=null,this[_0x2ec073(0x216)]=null,this[_0x2ec073(0x1a2)]=null,this[_0x2ec073(0x254)]=null,this[_0x2ec073(0x233)]=null,this[_0x2ec073(0x258)]=null,this['_$panel2WrpList']=null,this[_0x2ec073(0x21e)]=null,this[_0x2ec073(0x1a8)]=null,this['_$panel3WrpLoader']=null,this['_$panel3WrpTabs']=null,this[_0x2ec073(0x1a0)]=null,this[_0x2ec073(0x2aa)]=null,this[_0x2ec073(0x22c)]=null,this[_0x2ec073(0x22e)]=null,this[_0x2ec073(0x279)]=[],this[_0x2ec073(0x25e)]=null,this[_0x2ec073(0x1eb)]=null,this[_0x2ec073(0x21a)]=null,this[_0x2ec073(0x271)]=null,this[_0x2ec073(0x1b5)]=null,this[_0x2ec073(0x249)]=null,this[_0x2ec073(0x1bf)]=null,this['_pPackageIndex']=null,this[_0x2ec073(0x1d7)]={};}[_0x5829f8(0x186)](_0x3eda50,_0x3dc14f){const _0x14318c=_0x5829f8;(this['_uiHooks'][_0x3eda50]=this[_0x14318c(0x1d7)][_0x3eda50]||[])[_0x14318c(0x1fa)](_0x3dc14f);}['_resetUiHooks'](){const _0x2b9c48=_0x5829f8;Object[_0x2b9c48(0x1ee)](this[_0x2b9c48(0x1d7)])['forEach'](([_0x2d140a,_0x22036b])=>{const _0x38d7d3=_0x2b9c48;this['_comp'][_0x38d7d3(0x27b)](_0x2d140a,_0x22036b);}),this[_0x2b9c48(0x1d7)]={};}[_0x5829f8(0x215)](){const _0x15b08d=_0x5829f8;return StorageUtil[_0x15b08d(0x25f)](this['_getSelectedImporterStorageKey'](),this['__comp'][_0x15b08d(0x2a6)]());}[_0x5829f8(0x1ca)](_0x23d67d){const _0x3f9783=_0x5829f8;super[_0x3f9783(0x1ca)](_0x23d67d),this['_$window']=_0x23d67d;this[_0x3f9783(0x27a)]&&Hooks['once'](_0x3f9783(0x2c2),_0x41f6ea=>{const _0x38b67b=_0x3f9783;if(_0x41f6ea['id']===this['_actor']['id']){this[_0x38b67b(0x1d0)]();if(this['_importer'])this[_0x38b67b(0x25e)][_0x38b67b(0x1d0)]();}});if(!this[_0x3f9783(0x204)])this['_$panel1']=_0x23d67d[_0x3f9783(0x202)](_0x3f9783(0x220));this['_$panel2']=_0x23d67d[_0x3f9783(0x202)]('[data-panel=\x222\x22]'),this['_$panel3']=_0x23d67d[_0x3f9783(0x202)](_0x3f9783(0x256));if(!this['_predefinedMode'])this[_0x3f9783(0x198)](this[_0x3f9783(0x1a2)]);else this[_0x3f9783(0x27e)]();this[_0x3f9783(0x25b)](this['_$panel2']),this[_0x3f9783(0x270)](this[_0x3f9783(0x21e)]),this[_0x3f9783(0x1a4)]=MiscUtil[_0x3f9783(0x24a)](()=>this['_pDoSaveState'](),0x32),StorageUtil[_0x3f9783(0x1fd)](this[_0x3f9783(0x1f7)]())[_0x3f9783(0x1c3)](_0x14015e=>{const _0x234dee=_0x3f9783;if(_0x14015e){if(_0x14015e[_0x234dee(0x1e8)])_0x14015e[_0x234dee(0x1e8)][_0x234dee(0x1d1)]=_0x14015e[_0x234dee(0x1e8)][_0x234dee(0x1d1)]||this[_0x234dee(0x298)][0x0]['id'];else _0x14015e[_0x234dee(0x1e8)]={'modeId':this[_0x234dee(0x298)][0x0]['id']};this[_0x234dee(0x203)]['setStateFrom'](_0x14015e);}this[_0x234dee(0x209)][_0x234dee(0x237)](_0x57127a=>_0x57127a()),this[_0x234dee(0x209)]=[],this['_comp'][_0x234dee(0x294)](this[_0x234dee(0x1a4)]);});}[_0x5829f8(0x27e)](){const _0x1f0904=_0x5829f8;this[_0x1f0904(0x2b3)][_0x1f0904(0x1f1)](_0x1f0904(0x1d1),this[_0x1f0904(0x190)][_0x1f0904(0x182)](this)),this[_0x1f0904(0x209)][_0x1f0904(0x1fa)](this[_0x1f0904(0x190)][_0x1f0904(0x182)](this));}[_0x5829f8(0x198)](_0x59fb90){const _0x2fa451=_0x5829f8;this[_0x2fa451(0x298)]=ChooseImporter[_0x2fa451(0x1c6)][_0x2fa451(0x1c5)](_0x2a4410=>!_0x2a4410[_0x2fa451(0x253)]||_0x2a4410['fnCheckRequirements'](this[_0x2fa451(0x27a)])),this[_0x2fa451(0x279)]=this[_0x2fa451(0x298)]['map'](_0x37bda3=>{const _0x29a2d4=_0x2fa451,_0x56b847=$(_0x29a2d4(0x207)+_0x37bda3[_0x29a2d4(0x1cf)]+_0x29a2d4(0x2c3))[_0x29a2d4(0x28c)](()=>this['_comp'][_0x29a2d4(0x18a)](_0x29a2d4(0x1d1),_0x37bda3['id'])),_0x506640=_0x37bda3[_0x29a2d4(0x20a)]?$('<a\x20class=\x22btn\x20btn-sm\x20btn-5et\x20imp-wiz__btn-package-archive\x20no-underline\x22\x20rel=\x22noreferrer\x20noopener\x22\x20href=\x22'+_0x37bda3[_0x29a2d4(0x20a)][_0x29a2d4(0x246)]+'\x22>'+_0x37bda3[_0x29a2d4(0x20a)]['text']+_0x29a2d4(0x22a)):null,_0x29eb0f=_0x37bda3['metaOther']?$(_0x29a2d4(0x181)+_0x37bda3[_0x29a2d4(0x1b3)][_0x29a2d4(0x245)]+'</button>')[_0x29a2d4(0x28c)](()=>_0x37bda3[_0x29a2d4(0x1b3)]['pFn']()):null,_0xeb0e23=_0x37bda3[_0x29a2d4(0x29f)]?$(_0x29a2d4(0x1c7))['click'](()=>this[_0x29a2d4(0x274)](_0x37bda3)):null,_0x11fa28=$$`<div class="w-100 mb-1 flex-v-center input-group">
				${_0x56b847}
				${_0x506640}
				${_0x29eb0f}
				${_0xeb0e23}
			</div>`;return{'$btn':_0x56b847,'$row':_0x11fa28,'modeId':_0x37bda3['id']};}),this[_0x2fa451(0x2b3)][_0x2fa451(0x1f1)](_0x2fa451(0x1d1),this[_0x2fa451(0x190)]['bind'](this)),this[_0x2fa451(0x209)]['push'](this[_0x2fa451(0x190)][_0x2fa451(0x182)](this)),$$(_0x59fb90)`
			<h4 class="imp-wiz__head-panel">1: Choose Importer</h4>

			<div class="flex-col w-100 h-100 overflow-y-auto">
				${this[_0x2fa451(0x279)][_0x2fa451(0x26e)](_0x562edc=>_0x562edc[_0x2fa451(0x201)])}
			</div>
		`;}[_0x5829f8(0x29d)](){const _0x462eab=_0x5829f8;if(this[_0x462eab(0x204)])return this[_0x462eab(0x204)];const _0x2fea5a=this['_comp'][_0x462eab(0x1ab)](_0x462eab(0x1d1));return this[_0x462eab(0x298)]['find'](_0x6a0200=>_0x6a0200['id']===_0x2fea5a)||this[_0x462eab(0x298)][0x0];}async[_0x5829f8(0x190)](){const _0x18f051=_0x5829f8;if(!this[_0x18f051(0x233)]||!this[_0x18f051(0x1a8)])return;await this[_0x18f051(0x2b3)]['pLock'](_0x18f051(0x1d1));try{const _0x3bf68d=this[_0x18f051(0x29d)]();this[_0x18f051(0x279)][_0x18f051(0x237)](_0x3d9cb5=>_0x3d9cb5[_0x18f051(0x1be)][_0x18f051(0x1f8)](_0x18f051(0x29a),_0x3d9cb5[_0x18f051(0x1d1)]===_0x3bf68d['id'])),this[_0x18f051(0x233)][_0x18f051(0x245)]((this[_0x18f051(0x204)]?0x1:0x2)+_0x18f051(0x2a8)),this[_0x18f051(0x1a8)][_0x18f051(0x245)]((this['_predefinedMode']?0x2:0x3)+':\x20'+(MiscUtil[_0x18f051(0x1ab)](this[_0x18f051(0x204)],'wizardTitlePanel3')||_0x18f051(0x1f9)));const _0x11007a=await UtilApplications[_0x18f051(0x196)](this[_0x18f051(0x258)]),_0x572b6a=await UtilApplications[_0x18f051(0x196)](this[_0x18f051(0x2be)]);try{await this['_pInitImporter'](_0x3bf68d),await this[_0x18f051(0x2b2)](),this[_0x18f051(0x233)][_0x18f051(0x245)]((this[_0x18f051(0x204)]?0x1:0x2)+':\x20'+(_0x3bf68d[_0x18f051(0x23c)]?_0x18f051(0x18d)+_0x3bf68d['singleName']+_0x18f051(0x261):'Choose\x20Source\x20for\x20'+_0x3bf68d['name'])),this[_0x18f051(0x1a8)]['text']((this['_predefinedMode']?0x2:0x3)+':\x20'+(_0x3bf68d[_0x18f051(0x23c)]?'Configure\x20and\x20Import\x20'+_0x3bf68d[_0x18f051(0x23c)]:_0x18f051(0x23d)+_0x3bf68d[_0x18f051(0x1cf)])),this[_0x18f051(0x1cd)]['toggleVe'](_0x3bf68d[_0x18f051(0x26b)]);if(!_0x3bf68d[_0x18f051(0x26b)])this['_comp']['set']('ixTabPanel3',0x0);}catch(_0x4ab8d9){ui[_0x18f051(0x1c8)][_0x18f051(0x187)]('Failed\x20to\x20load\x20importer!\x20'+VeCt[_0x18f051(0x1f0)]);throw _0x4ab8d9;}finally{if(_0x11007a)_0x11007a[_0x18f051(0x1af)]();if(_0x572b6a)_0x572b6a[_0x18f051(0x1af)]();}}finally{this[_0x18f051(0x2b3)]['unlock'](_0x18f051(0x1d1));}}async['_pInitImporter'](_0x3f394d){const _0x4bf31f=_0x5829f8;_0x3f394d=_0x3f394d||this[_0x4bf31f(0x29d)](),this['_importer']=_0x3f394d[_0x4bf31f(0x21d)]?new _0x3f394d[(_0x4bf31f(0x21d))]({'actor':this[_0x4bf31f(0x27a)]}):_0x3f394d[_0x4bf31f(0x2bb)],await this[_0x4bf31f(0x25e)][_0x4bf31f(0x297)]();}[_0x5829f8(0x25b)](_0x414b01){const _0x3e1503=_0x5829f8;this[_0x3e1503(0x233)]=$(_0x3e1503(0x18e)+(this[_0x3e1503(0x204)]?0x1:0x2)+_0x3e1503(0x1a1)),this[_0x3e1503(0x2c0)]=$('<div\x20class=\x22flex-col\x20w-100\x20h-100\x22></div>'),this['_$panel2WrpLoader']=$$`<div class="flex-col w-100 h-100 overflow-y-auto">
			${this[_0x3e1503(0x2c0)]}
		</div>`,$$(_0x414b01)`
			${this[_0x3e1503(0x233)]}
			${this['_$panel2WrpLoader']}
		`;}[_0x5829f8(0x270)](_0x3ca01e){const _0x1ed9b3=_0x5829f8;this[_0x1ed9b3(0x1a8)]=$(_0x1ed9b3(0x18e)+(this[_0x1ed9b3(0x204)]?0x2:0x3)+':\x20Configure\x20and\x20Import</h4>'),this[_0x1ed9b3(0x1a0)]=$(_0x1ed9b3(0x18b)),this['_$panel3WrpLoader']=$$`<div class="flex-col w-100 h-100 overflow-y-auto">
			${this[_0x1ed9b3(0x1a0)]}
		</div>`,$$(_0x3ca01e)`
			${this[_0x1ed9b3(0x1a8)]}
			${this['_$panel3WrpLoader']}
		`;}['_getSelectedImporterStorageKey'](){const _0x281c63=_0x5829f8,_0x315be3=this[_0x281c63(0x204)]?_0x281c63(0x1ed):'chooseMode',_0x582939=this[_0x281c63(0x27a)]?_0x281c63(0x1de):'directory';return'chooseImporter_state_'+[_0x315be3,_0x582939][_0x281c63(0x21b)]('_');}static[_0x5829f8(0x1ec)](){const _0x13f193=_0x5829f8;return MiscUtil[_0x13f193(0x1e0)](ChooseImporter['_DEFAULT_STATE']);}async[_0x5829f8(0x2b2)](){const _0x1bb68c=_0x5829f8;this[_0x1bb68c(0x1d9)](),this[_0x1bb68c(0x2c0)][_0x1bb68c(0x1b6)](),this['_$panel3WrpConfig'][_0x1bb68c(0x1b6)](),await this[_0x1bb68c(0x29e)](),await this['_pFillUi_pFillConfigUi']();}async[_0x5829f8(0x221)](){const _0x4dc0b7=_0x5829f8,_0x1043aa=await this['_importer']['pGetSources']();this['_appSourceSelector']=new AppSourceSelectorMulti({'sourcesToDisplay':_0x1043aa,'savedSelectionKey':this[_0x4dc0b7(0x263)][_0x4dc0b7(0x1e9)](this['_importer']),'filterNamespace':this[_0x4dc0b7(0x1db)](),'isRadio':this[_0x4dc0b7(0x25e)][_0x4dc0b7(0x1f4)]});}async['_pFillUi_pFillSourceUi'](){const _0x284d4a=_0x5829f8;await this['_pInitSourceSelector']();const {$stgNone:_0x42b6f8,$stgUpload:_0x2a20db,$stgUrl:_0x26615f,$stgSpecial:_0x24bdc6}=await this[_0x284d4a(0x1eb)][_0x284d4a(0x1e1)](this[_0x284d4a(0x2c0)],_0x37662e=>{const _0xc6307d=_0x284d4a,_0x2540ac=this[_0xc6307d(0x29d)]();if(!_0x2540ac['hasPackages']||!_0x37662e['length'])return this['_comp'][_0xc6307d(0x18a)](_0xc6307d(0x1e3),null);const _0x530226=_0x37662e[0x0];this[_0xc6307d(0x2b3)]['set']('packageSource',(_0x530226['userData']||{})[_0xc6307d(0x28f)]||null);});this['_$stgNone']=_0x42b6f8,this['_$stgUpload']=_0x2a20db,this[_0x284d4a(0x1b5)]=_0x26615f,this[_0x284d4a(0x249)]=_0x24bdc6;}async[_0x5829f8(0x2bc)](){const _0x47d8b7=_0x5829f8,_0x4f2edf=await this[_0x47d8b7(0x1a9)](),_0x539ecd=this[_0x47d8b7(0x268)]();this[_0x47d8b7(0x2aa)]=$$`<div class="mb-1">Import From:</div>
			<div class="flex-col w-100 min-h-0 max-h-40 overflow-y-auto mb-1">
				${this[_0x47d8b7(0x21a)]}
				${this['_$stgUpload']}
				${this['_$stgUrl']}
				${this[_0x47d8b7(0x249)]}
			</div>
			${_0x4f2edf}
			${_0x539ecd}`;const _0x34e9f7=await this[_0x47d8b7(0x1b7)]();this['_$panel3_btnImportPackage']=this[_0x47d8b7(0x22e)]||$(_0x47d8b7(0x1cc)),this[_0x47d8b7(0x22c)]=$$`
			${_0x34e9f7}
			${this[_0x47d8b7(0x22e)]}`,this[_0x47d8b7(0x1cd)]=await this['_pFillUi_$pGetPanel3WrpTabs'](),$$(this['_$panel3WrpConfig'])`
			${this['_$panel3WrpTabs']}
			${this['_$panel3_tab1']}
			${this[_0x47d8b7(0x22c)]}
		`;}['_pFillUi_$pGetPanel3WrpTabs'](){const _0x2d64bd=_0x5829f8,_0x592157=$('<button\x20class=\x22btn\x20btn-default\x20w-50\x20btn-5et\x22>Actors/Items/Journal</button>')[_0x2d64bd(0x28c)](()=>this[_0x2d64bd(0x2b3)][_0x2d64bd(0x18a)](_0x2d64bd(0x24b),0x0)),_0x5d7514=$('<button\x20class=\x22btn\x20btn-default\x20w-50\x20btn-5et\x22>World/Module</button>')[_0x2d64bd(0x28c)](()=>this[_0x2d64bd(0x2b3)][_0x2d64bd(0x18a)](_0x2d64bd(0x24b),0x1)),_0x2e8a07=()=>{const _0xf4ab5d=_0x2d64bd,_0x3efa1d=Number(this[_0xf4ab5d(0x2b3)][_0xf4ab5d(0x1ab)](_0xf4ab5d(0x24b))||0x0);_0x592157[_0xf4ab5d(0x1f8)](_0xf4ab5d(0x1ef),_0x3efa1d===0x0),_0x5d7514[_0xf4ab5d(0x1f8)]('active',_0x3efa1d===0x1),this[_0xf4ab5d(0x2aa)]['toggleVe'](_0x3efa1d===0x0),this['_$panel3_tab2'][_0xf4ab5d(0x299)](_0x3efa1d===0x1);};return this['_comp'][_0x2d64bd(0x1f1)](_0x2d64bd(0x24b),_0x2e8a07),this[_0x2d64bd(0x186)](_0x2d64bd(0x24b),_0x2e8a07),_0x2e8a07(),$$`<div class="flex btn-group mb-2 w-100">${_0x592157}${_0x5d7514}</div>`;}async[_0x5829f8(0x1b7)](){const _0x462eb2=_0x5829f8,_0x270793=$('<div\x20class=\x22flex-col\x20h-100\x20w-100\x22></div>'),_0x31579d=await UtilApplications[_0x462eb2(0x196)](_0x270793);return this[_0x462eb2(0x1e2)]=this[_0x462eb2(0x1e2)]||(async()=>{const _0x5ba631=_0x462eb2;this[_0x5ba631(0x1bf)]=await ImportSpecialPackages[_0x5ba631(0x1e7)]();})(),this[_0x462eb2(0x1e2)][_0x462eb2(0x1c3)](()=>{const _0x4ee8b9=_0x462eb2;if(_0x31579d)_0x31579d['remove']();const _0x2b8b5b=()=>{const _0x1135c6=_0x47a0,_0x40b504=this['_comp'][_0x1135c6(0x1ab)](_0x1135c6(0x1e3))?this[_0x1135c6(0x2b3)]['get'](_0x1135c6(0x1e3))[_0x1135c6(0x19d)]():null,_0x4f8095=this[_0x1135c6(0x1bf)][_0x1135c6(0x202)](_0x3932e6=>(_0x3932e6[_0x1135c6(0x28f)]||'')[_0x1135c6(0x19d)]()===_0x40b504);if(_0x4f8095){const _0xa95d2a=!!_0x4f8095[_0x1135c6(0x291)],_0x596a5a=!!_0x4f8095['manifesturlWorld'],_0x243262=$(_0x1135c6(0x2bf)+(_0xa95d2a?'':_0x1135c6(0x1e5))+'\x20'+(_0xa95d2a?_0x1135c6(0x19e):'')+'>'),_0x453a5a=$(_0x1135c6(0x2bf)+(_0x596a5a?'':_0x1135c6(0x1ae))+'\x20'+(!_0xa95d2a&&_0x596a5a?_0x1135c6(0x19e):'')+'>');$$(_0x270793['empty']())`
						<div class="mb-1">Import As:</div>
						<label class="flex-v-center mb-1">
							<div class="flex-v-center col-3">${_0x243262}<b class="mr-1">Module</b></div>
							<div class="col-9">
								A resource which can be used in this and other worlds. Usually includes a selection of compendiums.
							</div>
						</label>
						<label class="flex-v-center">
							<div class="flex-v-center col-3">${_0x453a5a}<b class="mr-1">World</b></div>
							<div class="col-9">
								A complete world, ready to be run. This is imported as a new, separate world; your current world will not be affected.
							</div>
						</label>
					`,this['_$panel3_btnImportPackage'][_0x1135c6(0x2b8)]('disabled',![])[_0x1135c6(0x2b7)]('click')[_0x1135c6(0x28c)](async()=>{const _0x5571da=_0x1135c6,_0x2e32e2=_0x243262[_0x5571da(0x2b8)](_0x5571da(0x19e)),_0x2486ff=_0x453a5a[_0x5571da(0x2b8)](_0x5571da(0x19e));if(_0x2e32e2)await ImportSpecialPackages[_0x5571da(0x226)](_0x4f8095[_0x5571da(0x291)]);else{if(_0x2486ff)await ImportSpecialPackages[_0x5571da(0x1d6)](_0x4f8095[_0x5571da(0x280)]);else ui[_0x5571da(0x1c8)][_0x5571da(0x195)](_0x5571da(0x194));}});}else $$(_0x270793[_0x1135c6(0x1b6)]())`<div class="flex mb-1"><i>No world/module package found.</i></div>`,this[_0x1135c6(0x22e)]['prop'](_0x1135c6(0x244),!![])[_0x1135c6(0x2b7)](_0x1135c6(0x28c));};this['_comp'][_0x4ee8b9(0x1f1)](_0x4ee8b9(0x1e3),_0x2b8b5b),this['_trackUiHook'](_0x4ee8b9(0x1e3),_0x2b8b5b),_0x2b8b5b();})[_0x462eb2(0x20c)](_0x14058f=>{const _0x128729=_0x462eb2;_0x31579d[_0x128729(0x1af)](),_0x270793[_0x128729(0x26d)](_0x128729(0x191)),ui[_0x128729(0x1c8)][_0x128729(0x187)](_0x128729(0x2a5)+VeCt[_0x128729(0x1f0)]);throw _0x14058f;}),_0x270793;}async['_pFillUi_$pGetWrpConfigSettings'](){const _0x1d827a=_0x5829f8,_0x5de92e=ComponentUiUtil[_0x1d827a(0x23a)](this[_0x1d827a(0x203)],_0x1d827a(0x1c1)),_0x344180=$$`<div class="w-100 flex-col mb-1">
			${!this[_0x1d827a(0x23b)]?$$`<label class="w-100 mb-1 split-v-center" title="If this Import Wizard window should be kept open after clicking &quot;Open Importer&quot;">
				<div>Keep Window Open</div>${_0x5de92e}
			</label>`:''}
		</div>`;if(this['_actor']!=null||this['_isTemp'])return _0x344180;const _0x332360=$$`<div class="w-100 flex-col"></div>`,_0x6bd214=new FolderPathBuilder(this[_0x1d827a(0x25e)]);_0x6bd214[_0x1d827a(0x1b8)](_0x332360);if(this[_0x1d827a(0x25e)][_0x1d827a(0x19a)])return $$`<div class="flex-col w-100">
				${_0x344180}
				${_0x332360}
			</div>`;const _0x5303e1=game['packs'][_0x1d827a(0x1c5)](_0x1dc1ae=>!_0x1dc1ae['locked']&&_0x1dc1ae[_0x1d827a(0x1ea)][_0x1d827a(0x29b)]===this[_0x1d827a(0x25e)][_0x1d827a(0x188)]);let _0x267f2a=await StorageUtil[_0x1d827a(0x1fd)](this[_0x1d827a(0x263)]['_getImportToPackKey'](this[_0x1d827a(0x25e)]))||![];const _0x4910ff=()=>{const _0x44152d=_0x1d827a,_0x521a4a=_0x21bb3f['val']()==null?_0x5303e1['length']?_0x5303e1[0x0][_0x44152d(0x1da)]:null:_0x21bb3f['val']();return game[_0x44152d(0x18c)][_0x44152d(0x202)](_0x14251f=>_0x14251f['collection']===_0x521a4a);},_0x2ce215=_0x2bdac2=>{const _0x5c2e5a=_0x1d827a;_0x267f2a=_0x2bdac2;const _0x567e1e=_0x4910ff();if(!_0x567e1e&&_0x2bdac2){_0x2ce215(![]),ui['notifications'][_0x5c2e5a(0x1b0)](_0x5c2e5a(0x189)+this['_importer']['folderType']+_0x5c2e5a(0x197));return;}this[_0x5c2e5a(0x25e)]['pack']=_0x567e1e,_0x411124[_0x5c2e5a(0x1f8)]('btn--active',!_0x267f2a),_0x4a08c4['toggleClass'](_0x5c2e5a(0x29a),_0x267f2a),_0x38d73b[_0x5c2e5a(0x299)](!_0x267f2a),_0x4f4ab5['toggleVe'](_0x267f2a),this['_importer'][_0x5c2e5a(0x275)]=_0x267f2a?_0x4910ff():null,StorageUtil[_0x5c2e5a(0x25f)](this[_0x5c2e5a(0x263)]['_getImportToPackKey'](this[_0x5c2e5a(0x25e)]),_0x267f2a)[_0x5c2e5a(0x1c3)](null),StorageUtil[_0x5c2e5a(0x25f)](this[_0x5c2e5a(0x263)][_0x5c2e5a(0x217)](this[_0x5c2e5a(0x25e)]),_0x21bb3f[_0x5c2e5a(0x212)]())[_0x5c2e5a(0x1c3)](null);},_0x411124=$(_0x1d827a(0x292)+(_0x267f2a?'':_0x1d827a(0x29a))+_0x1d827a(0x242))[_0x1d827a(0x28c)](()=>_0x2ce215(![])),_0x4a08c4=$('<button\x20class=\x22btn\x20btn-5et\x20imp-wiz__btn-tab-head\x20imp-wiz__btn-tab-head--right\x20w-50\x20mr-2\x20'+(_0x267f2a?'':'btn--active')+_0x1d827a(0x2a0))[_0x1d827a(0x28c)](()=>_0x2ce215(!![])),_0x21bb3f=$('<select\x20class=\x22block\x20ve-foundry-button\x20m-0\x22>\x0a\x09\x09\x09'+_0x5303e1['map'](_0x42dc3a=>'<option\x20value=\x22'+_0x42dc3a['collection']+'\x22>'+_0x42dc3a[_0x1d827a(0x1ea)][_0x1d827a(0x199)]+_0x1d827a(0x2ab))[_0x1d827a(0x21b)]('')+_0x1d827a(0x2b4))[_0x1d827a(0x2b5)](()=>{_0x2ce215(_0x267f2a);}),_0x9bddef=await StorageUtil['pGet'](this['constructor'][_0x1d827a(0x217)](this[_0x1d827a(0x25e)]));if(_0x267f2a&&_0x5303e1[_0x1d827a(0x277)](_0x33fd75=>_0x33fd75[_0x1d827a(0x1da)]===_0x9bddef))_0x21bb3f['val'](_0x9bddef);else{if(_0x5303e1[_0x1d827a(0x285)])_0x21bb3f['val'](_0x5303e1[0x0][_0x1d827a(0x1da)]);}const _0x38d73b=$$`<div class="w-100 h-100 flex-col imp-wiz__tab-config py-1">
			${_0x332360}
		</div>`,_0x4f4ab5=$$`<div class="w-100 h-100 flex-col imp-wiz__tab-config py-1">
			<div class="mb-1">Compendium:</div>
			${_0x21bb3f}
		</div>`,_0x32387f=$$`<div class="flex-col w-100 min-h-0">
			${_0x344180}
			<div class="flex">${_0x411124}${_0x4a08c4}</div>
			${_0x38d73b}
			${_0x4f4ab5}
		</div>`;return _0x2ce215(_0x267f2a),_0x32387f;}async[_0x5829f8(0x274)](_0x43824a){const _0x22e9d1=_0x5829f8,_0x1bd9c5=_0x43824a[_0x22e9d1(0x21d)]?new _0x43824a[(_0x22e9d1(0x21d))]({'actor':this[_0x22e9d1(0x27a)]}):_0x43824a[_0x22e9d1(0x2bb)];await _0x1bd9c5[_0x22e9d1(0x297)]();const _0x59354e=await _0x1bd9c5[_0x22e9d1(0x183)](),_0xc76015=_0x59354e[_0x22e9d1(0x202)](_0x43ae73=>_0x43ae73[_0x22e9d1(0x1b9)]);if(!_0xc76015)return ui[_0x22e9d1(0x1c8)]['error']('No\x20default\x20source\x20to\x20import!\x20This\x20is\x20a\x20bug.');await this[_0x22e9d1(0x222)]([_0xc76015],_0x1bd9c5,_0x43824a);}async[_0x5829f8(0x282)](){const _0x3bf6cc=_0x5829f8;await this[_0x3bf6cc(0x211)](this['_getMode']()),await this[_0x3bf6cc(0x221)]();const _0x5121b8=await this[_0x3bf6cc(0x1eb)]['pGetSelectedSources']();if(!_0x5121b8[_0x3bf6cc(0x285)])return ui[_0x3bf6cc(0x1c8)][_0x3bf6cc(0x187)]('No\x20source\x20selected!');await this[_0x3bf6cc(0x222)](_0x5121b8);}[_0x5829f8(0x268)](){const _0x352a07=_0x5829f8;return $(_0x352a07(0x200)+(MiscUtil[_0x352a07(0x1ab)](this[_0x352a07(0x204)],_0x352a07(0x2bd))||_0x352a07(0x2ba))+_0x352a07(0x2c3))[_0x352a07(0x28c)](async()=>{const _0x3015b3=_0x352a07,_0x103cb9=await this[_0x3015b3(0x1eb)][_0x3015b3(0x232)]();if(!_0x103cb9[_0x3015b3(0x285)])return ui['notifications'][_0x3015b3(0x187)]('No\x20source\x20selected!');await this[_0x3015b3(0x222)](_0x103cb9);});}async[_0x5829f8(0x222)](_0x15b8a7,_0xf9800e=null,_0x449886=null){const _0x3e6c51=_0x5829f8;_0xf9800e=_0xf9800e||this[_0x3e6c51(0x25e)],_0x449886=_0x449886||this[_0x3e6c51(0x29d)](),await this[_0x3e6c51(0x208)](_0xf9800e,_0x449886);const _0x334b3f=await UtilApplications[_0x3e6c51(0x196)](this[_0x3e6c51(0x216)]),_0x1ca2e0=[],_0x37fea4=[];_0xf9800e[_0x3e6c51(0x2ac)]=await this[_0x3e6c51(0x263)][_0x3e6c51(0x25c)](_0x15b8a7,_0xf9800e);try{for(const _0x3e8f6e of _0x15b8a7){if(_0x3e8f6e[_0x3e6c51(0x259)]){const _0x4d2e9a=await this[_0x3e6c51(0x1b2)](_0xf9800e,_0x3e8f6e);_0x1ca2e0['push'](..._0x4d2e9a[_0x3e6c51(0x229)]),_0x37fea4[_0x3e6c51(0x1fa)](null);}else{if(_0x3e8f6e['url']!=null){const _0x1b999a=await this['_pFillUi_handleOpenClick_pGetUrlMeta'](_0xf9800e,_0x3e8f6e);_0x1ca2e0[_0x3e6c51(0x1fa)](..._0x1b999a[_0x3e6c51(0x229)]),_0x37fea4[_0x3e6c51(0x1fa)](..._0x1b999a[_0x3e6c51(0x227)]);}else{const _0x343634=await this['_pFillUi_handleOpenClick_pGetSpecialMeta'](_0xf9800e,_0x3e8f6e);_0x1ca2e0[_0x3e6c51(0x1fa)](..._0x343634[_0x3e6c51(0x229)]),_0x37fea4[_0x3e6c51(0x1fa)](..._0x343634['cacheKeys']);}}}}catch(_0x13ae35){ui[_0x3e6c51(0x1c8)][_0x3e6c51(0x187)](_0x3e6c51(0x1e4)+VeCt[_0x3e6c51(0x1f0)]);throw _0x13ae35;}finally{if(_0x334b3f)_0x334b3f[_0x3e6c51(0x1af)]();}const _0x5d37e3=_0x1ca2e0['length']===0x1?_0x1ca2e0[0x0]:_0x1ca2e0['flat'](),_0x49a5dc=new Set(),_0x1a2ab5=_0xf9800e[_0x3e6c51(0x28a)]&&_0xf9800e[_0x3e6c51(0x1d8)]?_0x5d37e3[_0x3e6c51(0x1c5)](_0x3e4591=>{const _0x57ba1d=_0x3e6c51,_0x54a7d8=UrlUtil['URL_TO_HASH_BUILDER'][_0xf9800e[_0x57ba1d(0x1d8)]];if(!_0x54a7d8)return!![];const _0x5812db=_0x54a7d8(_0x3e4591);if(_0x49a5dc['has'](_0x5812db))return![];return _0x49a5dc[_0x57ba1d(0x1bc)](_0x5812db),!![];}):_0x5d37e3,_0x15f9ee=_0x37fea4[_0x3e6c51(0x26f)](null)?null:_0x37fea4[_0x3e6c51(0x21b)]('__');await this[_0x3e6c51(0x250)](_0xf9800e,_0x1a2ab5,_0x15f9ee);}async[_0x5829f8(0x208)](_0x471211,_0xb47874){const _0x5074bc=_0x5829f8;if(!_0x471211||!_0xb47874)return;try{const _0x553644=MiscUtil[_0x5074bc(0x1e0)](await StorageUtil[_0x5074bc(0x1fd)](ChooseImporter[_0x5074bc(0x18f)])||{});_0x553644[_0x471211[_0x5074bc(0x1ce)]]=_0xb47874['id'],await StorageUtil['pSet'](ChooseImporter[_0x5074bc(0x18f)],_0x553644);}catch(_0x3a0b36){console['error'](...LGT,_0x3a0b36);}}static async[_0x5829f8(0x25c)](_0x3fcb9f,_0x388040){return _0x388040['pGetChooseImporterUserDataForSources'](_0x3fcb9f);}async[_0x5829f8(0x1b2)](_0xbfc662,_0x5238e5){const _0x118519=_0x5829f8;return UtilDataSource[_0x118519(0x283)](this[_0x118519(0x1eb)],_0x5238e5,_0xbfc662[_0x118519(0x193)]);}async[_0x5829f8(0x2a4)](_0x4112d6,_0x539d62){const _0x53da7a=_0x5829f8;return UtilDataSource[_0x53da7a(0x224)](this['_appSourceSelector'],_0x539d62,_0x4112d6[_0x53da7a(0x193)]);}async[_0x5829f8(0x184)](_0x5b65e7,_0x55b2f4){const _0x5c35ce=_0x5829f8;return UtilDataSource['pGetSpecialOutput'](_0x55b2f4,_0x5b65e7[_0x5c35ce(0x193)]);}async[_0x5829f8(0x250)](_0x287b1b,_0x3a0317,_0x149714){const _0x4b8519=_0x5829f8;if(_0x3a0317==null||_0x3a0317 instanceof Array&&!_0x3a0317[_0x4b8519(0x285)])return;const _0x1d5e06=await this['_pGetUi_pCheckOpenCachedInstance'](_0x287b1b,{'fnCheckHit':_0x2cca40=>_0x2cca40[_0x4b8519(0x1ff)]&&_0x2cca40['cacheKey']===_0x149714&&_0x2cca40[_0x4b8519(0x243)]===!!this['_actor']});if(_0x1d5e06){if(this[_0x4b8519(0x23b)]||!this[_0x4b8519(0x2b3)]['get']('isRemainOpen'))this[_0x4b8519(0x1d0)]();return;}if(this[_0x4b8519(0x23b)]||!this[_0x4b8519(0x2b3)]['get'](_0x4b8519(0x1c1)))this[_0x4b8519(0x1d0)]();_0x287b1b[_0x4b8519(0x248)]=_0x3a0317,await _0x287b1b[_0x4b8519(0x1c4)](this['_importerPreRenderArgs']),_0x287b1b[_0x4b8519(0x26c)](!![]),this[_0x4b8519(0x260)](_0x287b1b,{'cacheKey':_0x149714,'hasActor':!!this[_0x4b8519(0x27a)]});}async[_0x5829f8(0x180)](_0xc8f29f,{fnCheckHit:_0x4b4262}){const _0x28cdba=_0x5829f8,_0x20da27=this[_0x28cdba(0x1c2)](_0xc8f29f),_0x10cf39=ChooseImporter[_0x28cdba(0x295)][_0x20da27];if(!_0x10cf39)return![];if(!_0x4b4262(_0x10cf39))return delete ChooseImporter[_0x28cdba(0x295)][_0x20da27],_0x10cf39['instance']['isClosable']=!![],_0x10cf39[_0x28cdba(0x264)][_0x28cdba(0x1d0)](),![];return await _0x10cf39[_0x28cdba(0x264)][_0x28cdba(0x231)](_0xc8f29f),await _0x10cf39[_0x28cdba(0x264)][_0x28cdba(0x1c4)](this[_0x28cdba(0x228)]),_0x10cf39['instance'][_0x28cdba(0x1b8)](!![]),_0x10cf39[_0x28cdba(0x264)][_0x28cdba(0x24f)](),UtilApplications[_0x28cdba(0x1aa)](_0x10cf39[_0x28cdba(0x264)]),!![];}[_0x5829f8(0x260)](_0x3449b1,_0x4f1def){const _0x480f40=_0x5829f8,_0x7b4bbc=this[_0x480f40(0x1c2)](_0x3449b1);if(_0x3449b1[_0x480f40(0x1a5)]||_0x4f1def[_0x480f40(0x1ff)]==null)return;_0x3449b1[_0x480f40(0x28d)]=![],ChooseImporter['_INSTANCE_CACHE'][_0x7b4bbc]={..._0x4f1def,'instance':_0x3449b1};}static['_getSourceSelectionKey'](_0x426b7d){const _0x241c71=_0x5829f8;return _0x241c71(0x252)+(_0x426b7d['namespace']||_0x426b7d[_0x241c71(0x193)][_0x241c71(0x21b)]('_'));}static[_0x5829f8(0x1bb)](_0x2e52ab){const _0x5fc169=_0x5829f8;return _0x5fc169(0x2c1)+(_0x2e52ab[_0x5fc169(0x1a7)]||_0x2e52ab[_0x5fc169(0x193)][_0x5fc169(0x21b)]('_'));}static[_0x5829f8(0x217)](_0x1950e0){const _0x40c410=_0x5829f8;return _0x40c410(0x28e)+(_0x1950e0[_0x40c410(0x1a7)]||_0x1950e0[_0x40c410(0x193)]['join']('_'));}[_0x5829f8(0x1db)](){const _0xf09b8d=_0x5829f8;return _0xf09b8d(0x251);}[_0x5829f8(0x1c2)](_0x467253){const _0x476d8e=_0x5829f8,_0x473820=this[_0x476d8e(0x263)][_0x476d8e(0x1e9)](_0x467253);return[_0x473820,this['_namespace']]['join']('_');}async[_0x5829f8(0x1d0)](..._0x5e48d3){const _0x1a0a3f=_0x5829f8;if(this[_0x1a0a3f(0x1eb)])this[_0x1a0a3f(0x1eb)][_0x1a0a3f(0x23f)]();await super[_0x1a0a3f(0x1d0)](..._0x5e48d3);if(this[_0x1a0a3f(0x1eb)])this[_0x1a0a3f(0x1eb)][_0x1a0a3f(0x2a2)]();}}ChooseImporter[_0x5829f8(0x1d3)]={'modeId':_0x5829f8(0x1b1),'isRemainOpen':!![],'ixTabPanel3':0x0,'packageSource':null},ChooseImporter[_0x5829f8(0x18f)]='choose_importer_last_used_mode',ChooseImporter[_0x5829f8(0x1fb)]='actors',ChooseImporter[_0x5829f8(0x238)]=_0x5829f8(0x27c),ChooseImporter[_0x5829f8(0x210)]=_0x5829f8(0x1d2),ChooseImporter[_0x5829f8(0x225)]=_0x5829f8(0x2a9),ChooseImporter[_0x5829f8(0x19c)]='creatures',ChooseImporter[_0x5829f8(0x272)]='items',ChooseImporter[_0x5829f8(0x273)]=_0x5829f8(0x1b1),ChooseImporter[_0x5829f8(0x278)]=_0x5829f8(0x2a9),ChooseImporter[_0x5829f8(0x1c6)]=[{'id':ChooseImporter[_0x5829f8(0x273)],'name':'Adventures','singleName':_0x5829f8(0x1f3),'Importer':ImportListAdventure,'fnCheckRequirements':_0x15c90d=>_0x15c90d==null,'metaOther':{'text':_0x5829f8(0x29c),'pFn':async()=>{const _0x86e22e=_0x5829f8,_0x2480b0=new ImportSpecialPackages();await _0x2480b0[_0x86e22e(0x297)](),_0x2480b0[_0x86e22e(0x1b8)](!![]);}},'hasPackages':!![]},{'id':_0x5829f8(0x230),'name':_0x5829f8(0x185),'Importer':ImportListBackground,'hasDefaultSource':!![]},{'id':'books','name':_0x5829f8(0x281),'singleName':_0x5829f8(0x1c0),'Importer':ImportListBook,'fnCheckRequirements':_0x4bb3b4=>_0x4bb3b4==null,'hasPackages':!![]},{'id':_0x5829f8(0x19b),'name':_0x5829f8(0x24c),'Importer':ImportListClass,'hasDefaultSource':!![]},{'id':_0x5829f8(0x2a1),'name':'Conditions\x20&\x20Diseases','Importer':ImportListConditionDisease,'hasDefaultSource':!![]},{'id':ChooseImporter[_0x5829f8(0x19c)],'name':_0x5829f8(0x1dc),'Importer':ImportListCreature,'fnCheckRequirements':_0x28a689=>_0x28a689==null,'hasDefaultSource':!![]},{'id':'feats','name':_0x5829f8(0x1d5),'Importer':ImportListFeat,'hasDefaultSource':!![]},{'id':ChooseImporter['_MODE_ID_ITEMS'],'name':'Items','Importer':ImportListItem,'hasDefaultSource':!![]},{'id':_0x5829f8(0x2b0),'name':_0x5829f8(0x27f),'Importer':ImportListVariantRule,'fnCheckRequirements':_0x1959cb=>_0x1959cb==null,'hasDefaultSource':!![]},{'id':'other-options-and-features','name':_0x5829f8(0x20d),'Importer':ImportListOptionalFeature,'hasDefaultSource':!![]},{'id':'psionics','name':_0x5829f8(0x206),'Importer':ImportListPsionic,'hasDefaultSource':!![]},{'id':'races-and-subraces','name':'Races\x20&\x20Subraces','Importer':ImportListRace,'hasDefaultSource':!![]},{'id':_0x5829f8(0x27d),'name':_0x5829f8(0x213),'Importer':ImportListSpell,'hasDefaultSource':!![]},{'id':_0x5829f8(0x1fe),'name':_0x5829f8(0x1dd),'Importer':ImportListReward,'hasDefaultSource':!![]},{'id':ChooseImporter['_MODE_ID_TABLES'],'name':'Tables','Importer':ImportListRollableTable,'fnCheckRequirements':_0x5a24f7=>_0x5a24f7==null,'hasDefaultSource':!![]},{'id':_0x5829f8(0x1f6),'name':'Vehicles','Importer':ImportListVehicle,'fnCheckRequirements':_0x3f8bd4=>_0x3f8bd4==null,'hasDefaultSource':!![]},{'id':_0x5829f8(0x290),'name':_0x5829f8(0x2b1),'Importer':ImportListVehicleUpgrade,'hasDefaultSource':!![]},{'id':_0x5829f8(0x234),'name':'Objects','Importer':ImportListObject,'fnCheckRequirements':_0x5a7f62=>_0x5a7f62==null,'hasDefaultSource':!![]}],ChooseImporter[_0x5829f8(0x295)]={};export{ChooseImporter};