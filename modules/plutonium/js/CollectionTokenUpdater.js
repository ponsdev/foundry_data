const _0x3172=['get','Last\x20Name','pGetState','[\x22\x27]([^\x22\x27]*?)[\x22\x27]','isVisionActive','collection','hideVe','character','_$stageNameRegex','_pUpdateToken_populateResourcesUpdate','activateListeners','lightAlpha','Template','data','Continue','isNameParseSingleQuotes','_pUpdateToken','613137LrvSwc','_DEFAULTS','length','$getIptInt','error','map','_activateListeners_pInitListAndFilters','state','push','_activateListeners_initBtnRun','_activateListeners_initBtnEditTemplate','toTitleCase','entities','visionDim','...','nameRegexFormula','Regex','Quoted\x20Part\x20or\x20Last\x20Name','localize','sidebar','\x27([^\x27]*?)\x27','333182dXVECP','trim','_activateListeners_pDoLoadAndRender','barAttributeCharacter1','lightBright','Failed\x20to\x20update\x20','filter','pGetUserBoolean','_addHookAll','lightAngle','info','_pUpdateToken_populateNameUpdate','TOKEN.BarValues','actor','update','visionAngle','_mapEntitiesToRows','bar2','Please\x20select\x20something\x20to\x20update!','activate','fromObject','toku__form','displayName','type','exec','showVe','isUseSheetImage','barPermissions','isResourcesActive','pGet','vision','forEach','barAttributeNpc2','sightAngle','2IpkWcv','teardown','sort','isNameRegexIgnoreCase','Task','dimLight','_gameProp','2iowCzw','Failed\x20to\x20save!\x20','addClass','You\x20have\x20not\x20yet\x20configured\x20the\x20updater.\x20Are\x20you\x20sure\x20you\x20wish\x20to\x20proceed?','token','Quoted\x20Part\x20or\x20First\x20Name','split','keys','12JjVLkz','values','visionBright','namePermissions','lightOpacity','toObject','_getAllAvailableActorBarAttributes','pSet','localeCompare','_activateListeners_initBtnReset','24441dQzLEa','<input\x20class=\x22code\x20text-right\x22\x20type=\x22text\x22\x20placeholder=\x22(No\x20update)\x22>','collection_token_updater','empty','isHasVision','_$btnReset','$getSelEnum','_collectionName','_pUpdateToken_populateVisionUpdate','_$stageNameQuotes','entries','_getSelectedIds','notifications','find','name','(No\x20update)','\x22([^\x22]*?)\x22','dimSight','186601qodxtT','barAttributeCharacter2','toku__cb-head','_pageFilter','Updating\x20','Updated\x20Not\x20Configured','isNameActive','$getCbBool','Bulk\x20Prototype\x20Token\x20Editor','Quoted\x20Part\x20or\x20Full\x20Name','img','907501iPRFec','disposition','has','isNameParseDoubleQuotes','154762muaRtw','pRunTasks','IS_DEFAULT','Full\x20Name','<input\x20class=\x22code\x22\x20type=\x22text\x22>','i18n','getActorBarAttributes','close','ascSort','last','isDispositionActive','TOKEN.BarAttributes','bar1','_pUpdateToken_populateImageUpdate','124361qVSERd','join','NameUpdateMode','activateTab','brightSight','_STORAGE_KEY','_rows','$getIptStr','click','nameMode','model','Saved!','Prototype\x20Token\x20Updater\x20Configuration','_list','STR_SEE_CONSOLE','MODULE_LOCATION','Actor','First\x20Name','barAttributeNpc1','render','isImageActive','$getIptNumber','lightDim','Friendly','(None)','_pUpdateToken_populateDispositionUpdate','getData','flat','_sidebarTab'];const _0x44f6=function(_0x54e3c9,_0x2d4a1d){_0x54e3c9=_0x54e3c9-0x1d1;let _0x31724b=_0x3172[_0x54e3c9];return _0x31724b;};const _0x1a6f53=_0x44f6;(function(_0x2fc878,_0x3aa6aa){const _0x4b1bec=_0x44f6;while(!![]){try{const _0x5c8f3d=-parseInt(_0x4b1bec(0x277))+parseInt(_0x4b1bec(0x22c))*-parseInt(_0x4b1bec(0x208))+parseInt(_0x4b1bec(0x1df))+parseInt(_0x4b1bec(0x210))*parseInt(_0x4b1bec(0x21a))+parseInt(_0x4b1bec(0x249))+parseInt(_0x4b1bec(0x23b))*-parseInt(_0x4b1bec(0x201))+parseInt(_0x4b1bec(0x237));if(_0x5c8f3d===_0x3aa6aa)break;else _0x2fc878['push'](_0x2fc878['shift']());}catch(_0x3b70f6){_0x2fc878['push'](_0x2fc878['shift']());}}}(_0x3172,0x587e9));import{SharedConsts}from'../shared/SharedConsts.js';import{Util}from'./Util.js';import{AppFilterBasic}from'./FilterApplications.js';import{BaseCollectionTool}from'./BaseCollectionTool.js';import{UtilApplications}from'./UtilApplications.js';import{UtilActors}from'./UtilActors.js';class CollectionTokenUpdater extends BaseCollectionTool{constructor(){const _0x1d32c0=_0x44f6;super({'title':_0x1d32c0(0x234),'template':SharedConsts[_0x1d32c0(0x258)]+'/template/CollectionTokenUpdater.handlebars','width':0x3c0,'height':Util['getMaxWindowHeight'](),'resizable':!![]},_0x1d32c0(0x1ec)),this[_0x1d32c0(0x22f)]=new AppFilterBasic(),this[_0x1d32c0(0x256)]=null,this[_0x1d32c0(0x21f)]=null;}[_0x1a6f53(0x270)](_0x4cbb09){const _0x3f940f=_0x1a6f53;super[_0x3f940f(0x270)](_0x4cbb09),this[_0x3f940f(0x1d3)](_0x4cbb09),this[_0x3f940f(0x1d4)](_0x4cbb09),this[_0x3f940f(0x219)](_0x4cbb09),this[_0x3f940f(0x27d)](_0x4cbb09);}[_0x1a6f53(0x1d3)](_0x32b610){const _0x55b955=_0x1a6f53;_0x32b610[_0x55b955(0x227)]('[name=\x22btn-run\x22]')[_0x55b955(0x251)](async()=>{const _0x18b2b9=_0x55b955;if(!this[_0x18b2b9(0x256)])return;const _0x50665d=this[_0x18b2b9(0x225)]();if(!_0x50665d[_0x18b2b9(0x279)])return ui[_0x18b2b9(0x226)]['warn'](_0x18b2b9(0x1f1));const _0x2d340f=await CollectionTokenUpdater[_0x18b2b9(0x272)][_0x18b2b9(0x268)]();if(_0x2d340f[_0x18b2b9(0x23d)]){const _0x3948b9=await InputUiUtil[_0x18b2b9(0x1e6)]({'title':_0x18b2b9(0x231),'htmlDescription':_0x18b2b9(0x20b),'textNo':'Cancel','textYes':_0x18b2b9(0x274)});if(!_0x3948b9)return;}this[_0x18b2b9(0x242)](),ui[_0x18b2b9(0x1dd)][_0x18b2b9(0x24c)](this[_0x18b2b9(0x265)]);const _0x13e0a8=_0x50665d['map'](({id:_0xde539e,name:_0xc1357})=>new Util[(_0x18b2b9(0x205))](_0xc1357,()=>this['_pUpdateToken'](_0xde539e,_0x2d340f)));await UtilApplications[_0x18b2b9(0x23c)](_0x13e0a8,{'titleInitial':'Updating...','titleComplete':'Update\x20Complete','fnGetRowRunningText':_0x37b6d3=>_0x18b2b9(0x230)+_0x37b6d3+_0x18b2b9(0x1d8),'fnGetRowSuccessText':_0x419c08=>'Updated\x20'+_0x419c08+'.','fnGetRowErrorText':_0x471198=>_0x18b2b9(0x1e4)+_0x471198+'!\x20'+VeCt[_0x18b2b9(0x257)]}),game[this[_0x18b2b9(0x207)]][_0x18b2b9(0x25c)]();});}[_0x1a6f53(0x1d4)](_0xa374b8){const _0x49b153=_0x1a6f53;_0xa374b8[_0x49b153(0x227)]('[name=\x22btn-set-template\x22]')['click'](()=>{const _0x1a4cc6=_0x49b153,_0x2a91fe=new CollectionTokenUpdater['Template']();_0x2a91fe[_0x1a4cc6(0x25c)](!![]);});}[_0x1a6f53(0x263)](){const _0x577e54=_0x1a6f53;return this[_0x577e54(0x24f)]=this[_0x577e54(0x24f)]=this[_0x577e54(0x1ef)](),{...super[_0x577e54(0x263)](),'titleSearch':this[_0x577e54(0x221)]+'s','rows':this[_0x577e54(0x24f)]};}async[_0x1a6f53(0x276)](_0x89961c,_0x1d80fb){const _0x2c1525=_0x1a6f53,_0x2fc409=Actor[_0x2c1525(0x26b)][_0x2c1525(0x266)](_0x89961c);if(!_0x2fc409)return;const _0x13e955={};let _0x3b8748=![];_0x3b8748=this['_pUpdateToken_populateNameUpdate'](_0x2fc409,_0x1d80fb,_0x13e955)||_0x3b8748,_0x3b8748=this[_0x2c1525(0x262)](_0x2fc409,_0x1d80fb,_0x13e955)||_0x3b8748,_0x3b8748=this[_0x2c1525(0x248)](_0x2fc409,_0x1d80fb,_0x13e955)||_0x3b8748,_0x3b8748=this[_0x2c1525(0x26f)](_0x2fc409,_0x1d80fb,_0x13e955)||_0x3b8748,_0x3b8748=this[_0x2c1525(0x222)](_0x2fc409,_0x1d80fb,_0x13e955)||_0x3b8748;if(!_0x3b8748)return;_0x2fc409[_0x2c1525(0x1ed)]({'token':_0x13e955});}[_0x1a6f53(0x1ea)](_0x512c78,_0x276fce,_0x4ec7c6){const _0x48e40a=_0x1a6f53;if(!_0x276fce[_0x48e40a(0x232)])return![];let _0x20c7d1=![];const _0x8551b7=()=>_0x512c78[_0x48e40a(0x228)][_0x48e40a(0x20e)]('\x20')[0x0]['trim']()['replace'](/,;$/,'')[_0x48e40a(0x1e0)](),_0x570394=()=>_0x512c78[_0x48e40a(0x228)][_0x48e40a(0x20e)]('\x20')[_0x48e40a(0x244)]()['trim'](),_0x1d32c1=()=>{const _0x170f12=_0x48e40a,_0x12c323=_0x276fce[_0x170f12(0x23a)]&&_0x276fce[_0x170f12(0x275)]?_0x170f12(0x269):_0x276fce[_0x170f12(0x23a)]?_0x170f12(0x22a):_0x276fce['isNameParseSingleQuotes']?_0x170f12(0x1de):'^$',_0x25cbbf=new RegExp(_0x12c323)[_0x170f12(0x1f7)](_0x512c78[_0x170f12(0x228)]);if(!_0x25cbbf)return null;return _0x25cbbf[0x1][_0x170f12(0x1e0)]();};if(_0x276fce[_0x48e40a(0x252)]!=null){_0x20c7d1=!![];switch(_0x276fce['nameMode']){case'Full\x20Name':_0x4ec7c6[_0x48e40a(0x228)]=_0x512c78['name'];break;case _0x48e40a(0x25a):_0x4ec7c6[_0x48e40a(0x228)]=_0x8551b7();break;case _0x48e40a(0x267):_0x4ec7c6[_0x48e40a(0x228)]=_0x570394();break;case _0x48e40a(0x235):{const _0x21f4d1=_0x1d32c1();_0x4ec7c6['name']=_0x21f4d1||_0x512c78[_0x48e40a(0x228)];break;}case _0x48e40a(0x20d):{const _0x1dbdcc=_0x1d32c1();_0x4ec7c6[_0x48e40a(0x228)]=_0x1dbdcc||_0x8551b7();break;}case _0x48e40a(0x1db):{const _0x254f10=_0x1d32c1();_0x4ec7c6['name']=_0x254f10||_0x570394();break;}case _0x48e40a(0x1da):{const _0x57cd9d=new RegExp(_0x276fce[_0x48e40a(0x1d9)],_0x276fce[_0x48e40a(0x204)]?'i':'')[_0x48e40a(0x1f7)](_0x512c78[_0x48e40a(0x228)]);if(_0x57cd9d)_0x4ec7c6[_0x48e40a(0x228)]=_0x57cd9d[0x1];break;}}}return _0x276fce['namePermissions']!=null&&(_0x20c7d1=!![],_0x4ec7c6[_0x48e40a(0x1f5)]=_0x276fce[_0x48e40a(0x213)]),_0x20c7d1;}[_0x1a6f53(0x262)](_0x2f989e,_0x235d79,_0x1fd995){const _0x2e8841=_0x1a6f53;if(!_0x235d79[_0x2e8841(0x245)])return![];if(_0x235d79[_0x2e8841(0x238)]!=null)return _0x1fd995[_0x2e8841(0x238)]=_0x235d79[_0x2e8841(0x238)],!![];return![];}[_0x1a6f53(0x248)](_0x59504e,_0xb68cba,_0x5cb512){const _0x266e53=_0x1a6f53;if(!_0xb68cba[_0x266e53(0x25d)])return![];if(_0xb68cba[_0x266e53(0x1f9)])return _0x5cb512[_0x266e53(0x236)]=_0x59504e[_0x266e53(0x236)],!![];return![];}[_0x1a6f53(0x26f)](_0x1f305f,_0x44d799,_0xfcbf85){const _0x164811=_0x1a6f53;if(!_0x44d799[_0x164811(0x1fb)])return![];let _0x4cc1fc=![];return _0x44d799[_0x164811(0x1fa)]!=null&&(_0x4cc1fc=!![],_0xfcbf85['displayBars']=_0x44d799['barPermissions']),_0x1f305f[_0x164811(0x273)]['type']===_0x164811(0x26d)&&(_0x44d799['barAttributeCharacter1']!=null&&(_0x4cc1fc=!![],_0xfcbf85[_0x164811(0x247)]={'attribute':_0x44d799[_0x164811(0x1e2)]==='(None)'?null:_0x44d799['barAttributeCharacter1']}),_0x44d799['barAttributeCharacter2']!=null&&(_0x4cc1fc=!![],_0xfcbf85[_0x164811(0x1f0)]={'attribute':_0x44d799['barAttributeCharacter2']===_0x164811(0x261)?null:_0x44d799['barAttributeCharacter2']})),_0x1f305f[_0x164811(0x273)][_0x164811(0x1f6)]==='npc'&&(_0x44d799[_0x164811(0x25b)]!=null&&(_0x4cc1fc=!![],_0xfcbf85['bar1']={'attribute':_0x44d799[_0x164811(0x25b)]===_0x164811(0x261)?null:_0x44d799['barAttributeNpc1']}),_0x44d799[_0x164811(0x1ff)]!=null&&(_0x4cc1fc=!![],_0xfcbf85[_0x164811(0x1f0)]={'attribute':_0x44d799[_0x164811(0x1ff)]===_0x164811(0x261)?null:_0x44d799['barAttributeNpc2']})),_0x4cc1fc;}[_0x1a6f53(0x222)](_0x581f4e,_0x1b0ee,_0x463551){const _0x455ed3=_0x1a6f53;if(!_0x1b0ee['isVisionActive'])return![];let _0x57eb38=![];return _0x1b0ee[_0x455ed3(0x21e)]!=null&&(_0x581f4e[_0x455ed3(0x273)][_0x455ed3(0x20c)][_0x455ed3(0x1fd)]!==_0x1b0ee[_0x455ed3(0x21e)]&&(_0x463551[_0x455ed3(0x1fd)]=_0x1b0ee[_0x455ed3(0x21e)],_0x57eb38=!![])),_0x1b0ee[_0x455ed3(0x1d7)]!=null&&(_0x581f4e[_0x455ed3(0x273)][_0x455ed3(0x20c)]['dimSight']!==_0x1b0ee['visionDim']&&(_0x463551[_0x455ed3(0x22b)]=_0x1b0ee['visionDim'],_0x57eb38=!![])),_0x1b0ee['visionBright']!=null&&(_0x581f4e[_0x455ed3(0x273)]['token'][_0x455ed3(0x24d)]!==_0x1b0ee[_0x455ed3(0x212)]&&(_0x463551[_0x455ed3(0x24d)]=_0x1b0ee[_0x455ed3(0x212)],_0x57eb38=!![])),_0x1b0ee[_0x455ed3(0x1ee)]!=null&&(_0x581f4e[_0x455ed3(0x273)][_0x455ed3(0x20c)][_0x455ed3(0x200)]!==_0x1b0ee[_0x455ed3(0x1ee)]&&(_0x463551[_0x455ed3(0x200)]=_0x1b0ee[_0x455ed3(0x1ee)],_0x57eb38=!![])),_0x1b0ee['lightDim']!=null&&(_0x581f4e[_0x455ed3(0x273)]['token'][_0x455ed3(0x206)]!==_0x1b0ee[_0x455ed3(0x25f)]&&(_0x463551['dimLight']=_0x1b0ee[_0x455ed3(0x25f)],_0x57eb38=!![])),_0x1b0ee[_0x455ed3(0x1e3)]!=null&&(_0x581f4e['data'][_0x455ed3(0x20c)]['brightLight']!==_0x1b0ee[_0x455ed3(0x1e3)]&&(_0x463551['brightLight']=_0x1b0ee[_0x455ed3(0x1e3)],_0x57eb38=!![])),_0x1b0ee[_0x455ed3(0x1e8)]!=null&&(_0x581f4e['data'][_0x455ed3(0x20c)][_0x455ed3(0x1e8)]!==_0x1b0ee[_0x455ed3(0x1e8)]&&(_0x463551[_0x455ed3(0x1e8)]=_0x1b0ee['lightAngle'],_0x57eb38=!![])),_0x1b0ee['lightOpacity']!=null&&(_0x581f4e[_0x455ed3(0x273)][_0x455ed3(0x20c)][_0x455ed3(0x271)]!==_0x1b0ee['lightOpacity']&&(_0x463551[_0x455ed3(0x271)]=_0x1b0ee[_0x455ed3(0x214)],_0x57eb38=!![])),_0x57eb38;}['close'](..._0x4da5cc){const _0x16f975=_0x1a6f53;return this[_0x16f975(0x22f)][_0x16f975(0x202)](),super[_0x16f975(0x242)](..._0x4da5cc);}}CollectionTokenUpdater[_0x1a6f53(0x272)]=class extends Application{constructor(){const _0xc87c22=_0x1a6f53;super({'title':_0xc87c22(0x255),'template':SharedConsts[_0xc87c22(0x258)]+'/template/CollectionTokenUpdaterTemplate.handlebars','width':0x258,'height':0x320,'resizable':!![]});}[_0x1a6f53(0x270)](_0x36bb36){const _0x4abce0=_0x1a6f53;_0x36bb36[_0x4abce0(0x21d)](),this['_activateListeners_pDoLoadAndRender'](_0x36bb36);}static async['pGetState'](){const _0x5b1df8=_0x1a6f53,_0x1049b5=await StorageUtil[_0x5b1df8(0x1fc)](CollectionTokenUpdater['Template'][_0x5b1df8(0x24e)]);return _0x1049b5||CollectionTokenUpdater[_0x5b1df8(0x272)][_0x5b1df8(0x278)];}async[_0x1a6f53(0x1e1)](_0x37975a){const _0x5d9f58=_0x1a6f53,_0x311c53=await StorageUtil[_0x5d9f58(0x1fc)](CollectionTokenUpdater['Template'][_0x5d9f58(0x24e)]),_0x1d2616=BaseComponent[_0x5d9f58(0x1f3)](_0x311c53||CollectionTokenUpdater[_0x5d9f58(0x272)][_0x5d9f58(0x278)]),_0x10c7bb=_0x1d2616['getPod'](),_0xd3fcf6=()=>{const _0x1c280a=_0x5d9f58,_0x590275=_0x1d2616[_0x1c280a(0x215)]();delete _0x590275[_0x1c280a(0x23d)],StorageUtil[_0x1c280a(0x217)](CollectionTokenUpdater['Template']['_STORAGE_KEY'],_0x590275);},_0x196abb=MiscUtil['debounce'](_0xd3fcf6,0x64);_0x1d2616[_0x5d9f58(0x1e7)](_0x5d9f58(0x1d1),_0x196abb);const _0x455f49=ComponentUiUtil[_0x5d9f58(0x233)](_0x1d2616,'isNameActive'),_0x7677e3=ComponentUiUtil[_0x5d9f58(0x233)](_0x1d2616,_0x5d9f58(0x23a)),_0x3657d9=ComponentUiUtil[_0x5d9f58(0x233)](_0x1d2616,_0x5d9f58(0x275)),_0x5628bd=$$`<div class="flex-v-center toku__row">
			<label class="flex-v-center mr-2 ml-auto"><div class="mr-1">Accept Double Quotes</div>${_0x7677e3}</label>
			<label class="flex-v-center"><div class="mr-1">Accept Single Quotes</div>${_0x3657d9}</label>
		</div>`,_0x3397c4=ComponentUiUtil[_0x5d9f58(0x250)](_0x1d2616,_0x5d9f58(0x1d9),{'html':_0x5d9f58(0x23f)}),_0x30ff8c=ComponentUiUtil[_0x5d9f58(0x233)](_0x1d2616,_0x5d9f58(0x204)),_0x4d58b9=$$`<div class="flex-col w=100">
			<label class="flex-v-center flex-h-right toku__row">
				<div class="mr-2 help" title="The first capture group will be used, if the expression matches">Expression</div>${_0x3397c4}
			</label>

			<label class="flex-v-center flex-h-right toku__row">
				<div class="mr-1">Ignore Case</div>${_0x30ff8c}
			</label>
		</div>`,_0x1a1e55=[new CollectionTokenUpdater[(_0x5d9f58(0x272))][(_0x5d9f58(0x24b))]('Full\x20Name',_0x5628bd,_0x4d58b9),new CollectionTokenUpdater[(_0x5d9f58(0x272))][(_0x5d9f58(0x24b))]('First\x20Name',_0x5628bd,_0x4d58b9),new CollectionTokenUpdater['Template'][(_0x5d9f58(0x24b))](_0x5d9f58(0x267),_0x5628bd,_0x4d58b9),new CollectionTokenUpdater['Template'][(_0x5d9f58(0x24b))](_0x5d9f58(0x235),_0x5628bd,_0x4d58b9),new CollectionTokenUpdater[(_0x5d9f58(0x272))][(_0x5d9f58(0x24b))](_0x5d9f58(0x20d),_0x5628bd,_0x4d58b9),new CollectionTokenUpdater['Template']['NameUpdateMode'](_0x5d9f58(0x1db),_0x5628bd,_0x4d58b9),new CollectionTokenUpdater[(_0x5d9f58(0x272))][(_0x5d9f58(0x24b))](_0x5d9f58(0x1da),_0x5628bd,_0x4d58b9)],_0x1c16da=ComponentUiUtil[_0x5d9f58(0x220)](_0x1d2616,'nameMode',{'values':_0x1a1e55[_0x5d9f58(0x27c)](_0xc1a25c=>_0xc1a25c[_0x5d9f58(0x228)]),'isAllowNull':!![],'displayNullAs':'(No\x20update)'}),_0x5d4993=()=>{const _0x57f4af=_0x5d9f58,_0x1f2ece=_0x1a1e55[_0x57f4af(0x227)](_0x5d8bb5=>_0x10c7bb[_0x57f4af(0x266)](_0x57f4af(0x252))===_0x5d8bb5[_0x57f4af(0x228)]);if(_0x1f2ece)_0x1f2ece[_0x57f4af(0x1f2)]();else _0x5628bd[_0x57f4af(0x26c)](),_0x4d58b9[_0x57f4af(0x26c)]();};_0x1d2616['_addHookBase'](_0x5d9f58(0x252),_0x5d4993),_0x5d4993();const _0xaa1d9b={};Object[_0x5d9f58(0x224)](TOKEN_DISPLAY_MODES)[_0x5d9f58(0x203)](([_0x39636f,_0xe9d26f],[_0x5ded32,_0x3c8614])=>SortUtil[_0x5d9f58(0x243)](_0xe9d26f,_0x3c8614))[_0x5d9f58(0x1fe)](([_0x5084f5,_0x2f400a])=>_0xaa1d9b[_0x2f400a]=_0x5084f5[_0x5d9f58(0x20e)]('_')[_0x5d9f58(0x27c)](_0x35ca90=>_0x35ca90[_0x5d9f58(0x1d5)]())[_0x5d9f58(0x24a)]('\x20'));const _0xfd03a3=ComponentUiUtil[_0x5d9f58(0x220)](_0x1d2616,_0x5d9f58(0x213),{'values':Object[_0x5d9f58(0x20f)](_0xaa1d9b),'fnDisplay':_0x54c013=>_0xaa1d9b[_0x54c013],'isAllowNull':!![],'displayNullAs':_0x5d9f58(0x229)}),_0x5c74b3=ComponentUiUtil[_0x5d9f58(0x233)](_0x1d2616,_0x5d9f58(0x245)),_0x32b2a0=['Hostile','Neutral',_0x5d9f58(0x260)],_0x1b914c=ComponentUiUtil['$getSelEnum'](_0x1d2616,_0x5d9f58(0x238),{'values':[-0x1,0x0,0x1],'fnDisplay':_0x541049=>_0x32b2a0[_0x541049+0x1],'isAllowNull':!![],'displayNullAs':'(No\x20update)'}),_0x574651=ComponentUiUtil['$getCbBool'](_0x1d2616,_0x5d9f58(0x25d)),_0x28d071=ComponentUiUtil['$getCbBool'](_0x1d2616,_0x5d9f58(0x1f9)),_0x5427df=ComponentUiUtil[_0x5d9f58(0x233)](_0x1d2616,_0x5d9f58(0x1fb)),_0x1c69d3=ComponentUiUtil[_0x5d9f58(0x220)](_0x1d2616,_0x5d9f58(0x1fa),{'values':Object[_0x5d9f58(0x20f)](_0xaa1d9b),'fnDisplay':_0x19658e=>_0xaa1d9b[_0x19658e],'isAllowNull':!![],'displayNullAs':_0x5d9f58(0x229)}),_0x3fe1af=CollectionTokenUpdater['Template'][_0x5d9f58(0x216)](_0x5d9f58(0x26d)),_0x4f29b2=[_0x5d9f58(0x261),...Object['values'](_0x3fe1af)[_0x5d9f58(0x264)]()],_0x353722=CollectionTokenUpdater[_0x5d9f58(0x272)][_0x5d9f58(0x216)]('npc'),_0x353f1d=[_0x5d9f58(0x261),...Object[_0x5d9f58(0x211)](_0x353722)[_0x5d9f58(0x264)]()],_0x4ea2ab=ComponentUiUtil['$getSelEnum'](_0x1d2616,'barAttributeCharacter1',{'values':_0x4f29b2,'isAllowNull':!![],'displayNullAs':_0x5d9f58(0x229)}),_0xf3143=ComponentUiUtil[_0x5d9f58(0x220)](_0x1d2616,_0x5d9f58(0x22d),{'values':_0x4f29b2,'isAllowNull':!![],'displayNullAs':_0x5d9f58(0x229)}),_0xbdf1b6=ComponentUiUtil[_0x5d9f58(0x220)](_0x1d2616,_0x5d9f58(0x25b),{'values':_0x353f1d,'isAllowNull':!![],'displayNullAs':_0x5d9f58(0x229)}),_0x52ead8=ComponentUiUtil[_0x5d9f58(0x220)](_0x1d2616,'barAttributeNpc2',{'values':_0x353f1d,'isAllowNull':!![],'displayNullAs':_0x5d9f58(0x229)}),_0x32f3ff=ComponentUiUtil['$getCbBool'](_0x1d2616,_0x5d9f58(0x26a)),_0x235aef=ComponentUiUtil['$getCbBool'](_0x1d2616,'isHasVision'),_0x553c4f=ComponentUiUtil['$getIptInt'](_0x1d2616,'visionDim',null,{'min':0x0,'isAllowNull':!![],'html':_0x5d9f58(0x21b)}),_0x245190=ComponentUiUtil[_0x5d9f58(0x27a)](_0x1d2616,'visionBright',null,{'min':0x0,'isAllowNull':!![],'html':'<input\x20class=\x22code\x20text-right\x22\x20type=\x22text\x22\x20placeholder=\x22(No\x20update)\x22>'}),_0x194492=ComponentUiUtil['$getIptInt'](_0x1d2616,_0x5d9f58(0x1ee),null,{'min':0x0,'max':0x168,'isAllowNull':!![],'html':_0x5d9f58(0x21b)}),_0x28e77d=ComponentUiUtil[_0x5d9f58(0x27a)](_0x1d2616,'lightDim',null,{'min':0x0,'isAllowNull':!![],'html':_0x5d9f58(0x21b)}),_0xfa7080=ComponentUiUtil[_0x5d9f58(0x27a)](_0x1d2616,_0x5d9f58(0x1e3),null,{'min':0x0,'isAllowNull':!![],'html':_0x5d9f58(0x21b)}),_0x562ccc=ComponentUiUtil['$getIptInt'](_0x1d2616,_0x5d9f58(0x1e8),null,{'min':0x0,'max':0x168,'isAllowNull':!![],'html':_0x5d9f58(0x21b)}),_0x1eea92=ComponentUiUtil[_0x5d9f58(0x25e)](_0x1d2616,_0x5d9f58(0x214),null,{'min':0x0,'max':0x1,'isAllowNull':!![],'html':_0x5d9f58(0x21b)}),_0x146188=$('<button\x20class=\x22btn-5et\x20w-100\x22>Save</button>')[_0x5d9f58(0x251)](async()=>{const _0x40a4aa=_0x5d9f58;try{await _0xd3fcf6(),ui[_0x40a4aa(0x226)][_0x40a4aa(0x1e9)](_0x40a4aa(0x254));}catch(_0x8b4af){ui['notifications'][_0x40a4aa(0x27b)](_0x40a4aa(0x209)+VeCt[_0x40a4aa(0x257)]);throw _0x8b4af;}this[_0x40a4aa(0x242)]();});_0x37975a['addClass'](_0x5d9f58(0x1f4)),$$(_0x37975a)`
		<label class="split-v-center mb-1" title="Update Token Name">
			<div class="toku__sect-head">Name</div>
			${_0x455f49['addClass'](_0x5d9f58(0x22e))}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Update Mode</div>${_0x1c16da}</label>
			${_0x5628bd}
			${_0x4d58b9}
			<label class="my-1 split-v-center toku__row"><div>Display Name</div>${_0xfd03a3}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Disposition">
			<div class="toku__sect-head">Disposition</div>
			${_0x5c74b3[_0x5d9f58(0x20a)](_0x5d9f58(0x22e))}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Token Disposition</div>${_0x1b914c}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Image">
			<div class="toku__sect-head">Image</div>
			${_0x574651['addClass'](_0x5d9f58(0x22e))}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Use Sheet Image</div>${_0x28d071}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Resources">
			<div class="toku__sect-head">Resources</div>
			${_0x5427df[_0x5d9f58(0x20a)](_0x5d9f58(0x22e))}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Display Bars</div>${_0x1c69d3}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 1 Attribute (Characters)</div>${_0x4ea2ab}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 2 Attribute (Characters)</div>${_0xf3143}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 1 Attribute (NPCs)</div>${_0xbdf1b6}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 2 Attribute (NPCs)</div>${_0x52ead8}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Vision">
			<div class="toku__sect-head">Vision</div>
			${_0x32f3ff[_0x5d9f58(0x20a)](_0x5d9f58(0x22e))}
		</label>
		<div class="flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Has Vision</div>${_0x235aef}</label>
			<label class="my-1 split-v-center toku__row"><div>Dim Vision <span class="ve-muted ve-small">(Distance)</span></div>${_0x553c4f}</label>
			<label class="my-1 split-v-center toku__row"><div>Bright Vision <span class="ve-muted ve-small">(Distance)</span></div>${_0x245190}</label>
			<label class="my-1 split-v-center toku__row"><div>Sight Angle <span class="ve-muted ve-small">(Degrees)</span></div>${_0x194492}</label>
			<label class="my-1 split-v-center toku__row"><div>Emit Dim <span class="ve-muted ve-small">(Distance)</span></div>${_0x28e77d}</label>
			<label class="my-1 split-v-center toku__row"><div>Emit Bright <span class="ve-muted ve-small">(Distance)</span></div>${_0xfa7080}</label>
			<label class="my-1 split-v-center toku__row"><div>Emission Angle <span class="ve-muted ve-small">(Degrees)</span></div>${_0x562ccc}</label>
			<label class="my-1 split-v-center toku__row"><div>Light Opacity <span class="ve-muted ve-small">(0-1)</span></div>${_0x1eea92}</label>
		</div>

		<div class="mt-auto">
			${_0x146188}
		</div>
		`;}static['_getAllAvailableActorBarAttributes'](_0x814af2){const _0x538bf9=_0x1a6f53,_0x278f7e=Actor['collection'][_0x538bf9(0x1d6)][_0x538bf9(0x1e5)](_0x3bac4a=>_0x3bac4a[_0x538bf9(0x273)][_0x538bf9(0x1f6)]===_0x814af2);_0x278f7e['push']({'data':{'data':game['system'][_0x538bf9(0x253)][_0x538bf9(0x259)][_0x814af2]}});const _0x440694={},_0x1d8ee2={},_0x224eaa=[game[_0x538bf9(0x240)][_0x538bf9(0x1dc)](_0x538bf9(0x246)),game[_0x538bf9(0x240)][_0x538bf9(0x1dc)](_0x538bf9(0x1eb))];return _0x278f7e[_0x538bf9(0x1fe)](_0x2203ac=>{const _0x3a6b44=_0x538bf9,_0x566ff4=UtilActors[_0x3a6b44(0x241)](_0x2203ac);_0x224eaa[_0x3a6b44(0x1fe)](_0x1f0ded=>{const _0x2efa0c=_0x3a6b44;(_0x566ff4[_0x1f0ded]||[])[_0x2efa0c(0x1fe)](_0x20ed1e=>{const _0x1a0a7f=_0x2efa0c,_0x26fe2e=_0x1d8ee2[_0x1f0ded]=_0x1d8ee2[_0x1f0ded]||new Set();if(_0x26fe2e[_0x1a0a7f(0x239)](_0x20ed1e))return;_0x26fe2e['add'](_0x20ed1e),(_0x440694[_0x1f0ded]=_0x440694[_0x1f0ded]||[])[_0x1a0a7f(0x1d2)](_0x20ed1e);});});}),_0x224eaa[_0x538bf9(0x1fe)](_0x478085=>{const _0x204ef3=_0x538bf9;(_0x440694[_0x478085]||[])[_0x204ef3(0x203)]((_0xb775ed,_0x3271b2)=>_0xb775ed[_0x204ef3(0x218)](_0x3271b2));}),_0x440694;}},CollectionTokenUpdater['Template']['_STORAGE_KEY']=_0x1a6f53(0x21c),CollectionTokenUpdater[_0x1a6f53(0x272)][_0x1a6f53(0x278)]={'IS_DEFAULT':!![],'isNameActive':!![],'isDispositionActive':!![],'isImageActive':!![],'isResourcesActive':!![],'isVisionActive':!![],'isNameParseDoubleQuotes':!![],'isNameParseSingleQuotes':!![]},CollectionTokenUpdater[_0x1a6f53(0x272)][_0x1a6f53(0x24b)]=class{constructor(_0x46a209,_0xf919c8,_0x4326d2){const _0x3c59e6=_0x1a6f53;this['name']=_0x46a209,this[_0x3c59e6(0x223)]=_0xf919c8,this['_$stageNameRegex']=_0x4326d2;}[_0x1a6f53(0x1f2)](){const _0x402e1a=_0x1a6f53;switch(this[_0x402e1a(0x228)]){case _0x402e1a(0x23e):case _0x402e1a(0x25a):case _0x402e1a(0x267):this['_$stageNameQuotes'][_0x402e1a(0x26c)](),this[_0x402e1a(0x26e)][_0x402e1a(0x26c)]();break;case _0x402e1a(0x235):case'Quoted\x20Part\x20or\x20First\x20Name':case _0x402e1a(0x1db):this['_$stageNameQuotes']['showVe'](),this[_0x402e1a(0x26e)][_0x402e1a(0x26c)]();break;case _0x402e1a(0x1da):this[_0x402e1a(0x223)]['hideVe'](),this['_$stageNameRegex'][_0x402e1a(0x1f8)]();break;}}};export{CollectionTokenUpdater};