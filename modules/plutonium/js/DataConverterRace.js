const _0x2bc2=['MODULE_NAME','foundryRaceFeature','player','1783386GWiTae','raceName','push','pGetRaceFeatureItem','setFirstSection','getInvertedName','getNameWithSourcePart','625837pmeYCn','PG_RACES','source','_isMatchRaceFeature','ability','getSrdCompendiumEntity','<div><table\x20class=\x22summary\x20stripe-even\x22>\x0a\x09\x09\x09<tr>\x0a\x09\x09\x09\x09<th\x20class=\x22col-4\x20text-center\x22>Ability\x20Scores</th>\x0a\x09\x09\x09\x09<th\x20class=\x22col-4\x20text-center\x22>Size</th>\x0a\x09\x09\x09\x09<th\x20class=\x22col-4\x20text-center\x22>Speed</th>\x0a\x09\x09\x09</tr>\x0a\x09\x09\x09<tr>\x0a\x09\x09\x09\x09<td\x20class=\x22text-center\x22>','length','get','pHasRaceFeatureSideLoadedEffects','isStubRace','getCleanOriginalData','2NYMjff','504300PZXLQq','permissions','bind','98363AUITDg','getItemActorPassive','asText','isImportDescription','_pGetCompendiumFeatureImage','importRace','_pGetCompendiumImage','332968mwUavD','join','1GWTizq','effects','copy','getFauxRaceFeature','_baseSrd','Unknown\x20Race','_getRaceDescription','getRaceStub','_pGetFeatureAdditionalData','data.requirements','65458CWEJNl','pGetRaceSideData','_baseName','/media/icon/family-tree.svg','</td>\x0a\x09\x09\x09</tr>\x0a\x09\x09</table>\x0a\x09\x09','name','raceFeature','feat','raceSource','getSpeedString','STUB_RACE','isAddPermission','_getCompendiumFeatureAliases','srd','_pGetFeatureSideData','pGetAdditionalData_','_getCompendiumAliases','pGetSideData_','pGetCompendiumImage','pGetAdditionalEffectsRaw_','getAbilityData','getExpandedEffects','URL_TO_HASH_BUILDER','entries','render','permission','pGetRaceFeatureItemEffects','453137vgVpTh'];const _0x11dc=function(_0x21714f,_0x3215a3){_0x21714f=_0x21714f-0xe7;let _0x2bc27e=_0x2bc2[_0x21714f];return _0x2bc27e;};const _0x5144e6=_0x11dc;(function(_0x3cc28f,_0xd451ae){const _0x1ac268=_0x11dc;while(!![]){try{const _0x35c9cf=parseInt(_0x1ac268(0x127))+parseInt(_0x1ac268(0x104))+-parseInt(_0x1ac268(0x11d))*-parseInt(_0x1ac268(0x11b))+-parseInt(_0x1ac268(0x114))*-parseInt(_0x1ac268(0x110))+parseInt(_0x1ac268(0xf9))+parseInt(_0x1ac268(0x111))+-parseInt(_0x1ac268(0xfd));if(_0x35c9cf===_0xd451ae)break;else _0x3cc28f['push'](_0x3cc28f['shift']());}catch(_0x49e1d1){_0x3cc28f['push'](_0x3cc28f['shift']());}}}(_0x2bc2,0x60720));import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';import{UtilApplications}from'./UtilApplications.js';import{DataConverter}from'./DataConverter.js';import{Vetools}from'./Vetools.js';import{UtilActiveEffects}from'./UtilActiveEffects.js';import{UtilCompendium}from'./UtilCompendium.js';class DataConverterRace{static async['pGetRaceItem'](_0x42b93c,_0x25c280){const _0x264c50=_0x11dc;_0x25c280=_0x25c280||{};const _0x381f46=DataConverter[_0x264c50(0x10f)](_0x42b93c),_0x422a2a={'name':UtilApplications['getCleanEntityName'](DataConverter[_0x264c50(0x103)](_0x42b93c)),'type':_0x264c50(0x12e),'data':{'description':{'value':this[_0x264c50(0x123)](_0x42b93c),'chat':'','unidentified':''},'source':DataConverter['getSourceWithPagePart'](_0x42b93c),'damage':{'parts':[]},'activation':{'type':'','cost':0x0,'condition':''},'duration':{'value':null,'units':''},'target':{'value':null,'units':'','type':''},'range':{'value':null,'long':null,'units':''},'uses':{'value':0x0,'max':0x0,'per':null},'ability':null,'actionType':'','attackBonus':0x0,'chatFlavor':'','critical':null,'formula':'','save':{'ability':'','dc':null},'requirements':'','recharge':{'value':null,'charged':![]}},'flags':{[SharedConsts['MODULE_NAME']]:{'page':UrlUtil['PG_RACES'],'source':_0x42b93c[_0x264c50(0x106)],'hash':UrlUtil[_0x264c50(0xf4)][UrlUtil[_0x264c50(0x105)]](_0x42b93c),'data':{'race':_0x381f46},'filterValues':_0x25c280['filterValues']}},'effects':[],'img':await this[_0x264c50(0x11a)](_0x42b93c)};if(_0x25c280[_0x264c50(0xe9)])_0x422a2a[_0x264c50(0xf7)]={'default':Config['get'](_0x264c50(0x119),_0x264c50(0x112))};return _0x422a2a;}static[_0x5144e6(0x123)](_0x1e8581){const _0x502aa1=_0x5144e6;if(!Config[_0x502aa1(0x10c)](_0x502aa1(0x119),_0x502aa1(0x117)))return'';return _0x502aa1(0x10a)+Renderer[_0x502aa1(0xf2)](_0x1e8581[_0x502aa1(0x108)])[_0x502aa1(0x116)]+'</td>\x0a\x09\x09\x09\x09<td\x20class=\x22text-center\x22>'+(_0x1e8581['size']||[SZ_VARIES])['map'](_0x40132e=>Parser['sizeAbvToFull'](_0x40132e))[_0x502aa1(0x11c)]('/')+'</td>\x0a\x09\x09\x09\x09<td\x20class=\x22text-center\x22>'+Parser[_0x502aa1(0xe7)](_0x1e8581)+_0x502aa1(0x12b)+Renderer['get']()[_0x502aa1(0x101)](!![])[_0x502aa1(0xf6)]({'type':'entries','entries':_0x1e8581[_0x502aa1(0xf5)]},0x1)+'</div>';}static async['_pGetCompendiumImage'](_0x37f045){const _0x22f7af=_0x5144e6;return await UtilCompendium[_0x22f7af(0xf0)]('race',_0x37f045,{'fnGetAliases':this[_0x22f7af(0xee)]})||'modules/'+SharedConsts[_0x22f7af(0xfa)]+_0x22f7af(0x12a);}static[_0x5144e6(0xee)](_0x4c46a9){const _0x5bd675=_0x5144e6;if(!_0x4c46a9[_0x5bd675(0x12c)]&&!_0x4c46a9['_baseName'])return[];const _0x3ed9c8=[],_0x3a3d46=PageFilterRaces['getInvertedName'](_0x4c46a9['name']);if(_0x3a3d46&&_0x3a3d46!==_0x4c46a9[_0x5bd675(0x12c)])_0x3ed9c8[_0x5bd675(0xff)](_0x3a3d46);if(_0x4c46a9['_baseName'])_0x3ed9c8['push'](_0x4c46a9[_0x5bd675(0x129)]);return _0x3ed9c8;}static async[_0x5144e6(0x100)](_0x16c9d1,_0x3156ba,_0x44188f){const _0x443033=_0x5144e6,_0x3a5e21=await this[_0x443033(0x125)](_0x3156ba),_0x8e24e5=await UtilCompendium[_0x443033(0x109)](_0x443033(0x12d),_0x3156ba);return DataConverter[_0x443033(0x115)](_0x3156ba,{'mode':_0x443033(0xfc),'img':await this[_0x443033(0x118)](_0x16c9d1,_0x3156ba),'effects':MiscUtil['copy'](_0x8e24e5?.[_0x443033(0x11e)]||[]),'fvttType':_0x443033(0x12e),'source':_0x16c9d1['source'],'actor':_0x44188f['actor'],'additionalData':_0x3a5e21});}static[_0x5144e6(0x120)](_0x5ca564,_0x137024){const _0x1d08a6=_0x5144e6;return{'source':_0x5ca564[_0x1d08a6(0x106)],'raceName':_0x5ca564[_0x1d08a6(0x12c)],'raceSource':_0x5ca564[_0x1d08a6(0x106)],'srd':_0x5ca564[_0x1d08a6(0xeb)]||_0x5ca564[_0x1d08a6(0x121)],...MiscUtil[_0x1d08a6(0x11f)](_0x137024)};}static async['pMutActorUpdateRaceFeature'](_0x6afaa9,_0x20d9bb,_0x27239f,_0x44158b){const _0x128722=_0x5144e6,_0x2ed9da=await this[_0x128722(0xec)](_0x27239f);DataConverter['mutActorUpdate'](_0x6afaa9,_0x20d9bb,_0x27239f,{'sideData':_0x2ed9da});}static async[_0x5144e6(0xec)](_0x1b6d1a){const _0x248d47=_0x5144e6;return DataConverter[_0x248d47(0xef)](_0x1b6d1a,{'propBrew':_0x248d47(0xfb),'fnLoadJson':Vetools['pGetRaceSideData'],'propJson':_0x248d47(0x12d),'fnMatch':(_0x5e94ba,_0x366785)=>_0x366785[_0x248d47(0x12c)]===_0x5e94ba[_0x248d47(0x12c)]&&_0x366785['source']===_0x5e94ba[_0x248d47(0x106)]&&_0x366785[_0x248d47(0xfe)]===_0x5e94ba[_0x248d47(0xfe)]&&_0x366785[_0x248d47(0x12f)]===_0x5e94ba[_0x248d47(0x12f)]});}static async['_pGetFeatureAdditionalData'](_0x8955d0){const _0x26cc20=_0x5144e6;return DataConverter[_0x26cc20(0xed)](_0x8955d0,{'propBrew':'foundryRaceFeature','fnLoadJson':Vetools[_0x26cc20(0x128)],'propJson':'raceFeature','fnMatch':(_0x5fac34,_0x59c0d3)=>this[_0x26cc20(0x107)](_0x5fac34,_0x59c0d3)});}static[_0x5144e6(0x107)](_0x4adc02,_0x16c28b){const _0x54c2a8=_0x5144e6;return _0x16c28b[_0x54c2a8(0x12c)]===_0x4adc02[_0x54c2a8(0x12c)]&&_0x16c28b['source']===_0x4adc02[_0x54c2a8(0x106)]&&_0x16c28b['raceName']===_0x4adc02[_0x54c2a8(0xfe)]&&_0x16c28b[_0x54c2a8(0x12f)]===_0x4adc02['raceSource'];}static async['_pGetCompendiumFeatureImage'](_0x1ff596,_0x53024d){const _0x38aa9b=_0x5144e6,_0x51f8af=await UtilCompendium['pGetCompendiumImage']('raceFeature',_0x53024d,{'fnGetAliases':this[_0x38aa9b(0xea)][_0x38aa9b(0x113)](this,_0x1ff596),'deepKeys':[_0x38aa9b(0x126)]});if(_0x51f8af)return _0x51f8af;const _0x27d8c0=await this['_pGetCompendiumImage'](_0x1ff596);if(_0x27d8c0)return _0x27d8c0;return'modules/'+SharedConsts[_0x38aa9b(0xfa)]+_0x38aa9b(0x12a);}static[_0x5144e6(0xea)](_0x1569f5,_0x15f8c8){const _0x46b57b=_0x5144e6;if(!_0x1569f5['name']&&!_0x1569f5[_0x46b57b(0x129)])return[];if(!_0x15f8c8[_0x46b57b(0x12c)])return[];const _0x17bebf=[];_0x17bebf[_0x46b57b(0xff)]({'name':_0x15f8c8[_0x46b57b(0x12c)],'data.requirements':_0x1569f5[_0x46b57b(0x12c)]});const _0x309010=PageFilterRaces[_0x46b57b(0x102)](_0x1569f5['name']);return _0x309010&&_0x309010!==_0x1569f5[_0x46b57b(0x12c)]&&_0x17bebf['push']({'name':_0x15f8c8[_0x46b57b(0x12c)],'data.requirements':_0x309010}),_0x1569f5['_baseName']&&_0x17bebf[_0x46b57b(0xff)]({'name':_0x15f8c8[_0x46b57b(0x12c)],'data.requirements':_0x1569f5[_0x46b57b(0x129)]}),_0x17bebf;}static async[_0x5144e6(0x10d)](_0x43ad12,_0xabafb9){const _0x32a6da=_0x5144e6;return(await DataConverter[_0x32a6da(0xf1)](_0xabafb9,{'propBrew':_0x32a6da(0xfb),'fnLoadJson':Vetools[_0x32a6da(0x128)],'propJson':'raceFeature','fnMatch':(_0x562d3e,_0x5998fb)=>this['_isMatchRaceFeature'](_0x562d3e,_0x5998fb)}))?.[_0x32a6da(0x10b)]>0x0;}static async[_0x5144e6(0xf8)](_0x104db9,_0x3fc4c3,_0x27cc6e,_0xd8b2bd){const _0x560737=_0x5144e6,_0x5bcc68=await DataConverter['pGetAdditionalEffectsRaw_'](_0x27cc6e,{'propBrew':'foundryRaceFeature','fnLoadJson':Vetools[_0x560737(0x128)],'propJson':_0x560737(0x12d),'fnMatch':(_0x119c68,_0x22bd57)=>this[_0x560737(0x107)](_0x119c68,_0x22bd57)});return UtilActiveEffects[_0x560737(0xf3)](_0x104db9,_0xd8b2bd,_0x5bcc68||[],{'parentName':_0x3fc4c3[_0x560737(0x12c)]});}static[_0x5144e6(0x10e)](_0x5bb8c6){const _0x98514f=_0x5144e6;return _0x5bb8c6[_0x98514f(0x12c)]===DataConverterRace[_0x98514f(0xe8)][_0x98514f(0x12c)]&&_0x5bb8c6['source']===DataConverterRace[_0x98514f(0xe8)][_0x98514f(0x106)];}static[_0x5144e6(0x124)](){const _0x3e277=_0x5144e6;return MiscUtil[_0x3e277(0x11f)](DataConverterRace[_0x3e277(0xe8)]);}}DataConverterRace[_0x5144e6(0xe8)]={'name':_0x5144e6(0x122),'source':SRC_PHB};export{DataConverterRace};