const _0x3074=['483871jfEVdl','displayName','_importer','Failed\x20to\x20import\x20','keys','_defaultSource','_activateListeners_initConfigButtons','SOURCE_TYP_CUSTOM','split','_isActivatedTab','TASK_EXIT_SKIPPED_DUPLICATE','_tagCbMetas','_availableEntities','activateListeners','filter','data','_title','fnGetIndex','displayText','108998vJtLGq','IMPORTABLE_TAG_CREATURE','_content','_extractTag','_postLoadVetools','File\x20did\x20not\x20contain\x20importable\x20data—one\x20of\x20\x22','source','PG_TABLES','Importing...','_page','_pHandleRunButtonClick_pDoPreImport','prop','toLowerCase','bind','walk','DataSourceFile','_getDuplicateMeta','\x22\x20items\x20together!','values','hover','folder','tag','_activateListeners_initRunButton','journal','\x22\x20was\x20missing!','each','ascSortLower','_tag','sourceLong','_pLoad_doActivateTab','181587Lmyyjd','has','notifications','push','defaultSource','_fnGetUrl','File\x20did\x20not\x20contain\x20importable\x20data—could\x20not\x20link\x20any\x20\x22','pGetUserEnum','close','sidebar','Upload\x20File','href','PG_SPELLS','_availableInlineData','_pPostLoadOther','pInit','Tables','__prop','dataProp','_fnGetIndex','splitByTags','_brewDataProp','fnGetInlineData','[].data\x22\x20was\x20missing!','change','319057wQpwBA','sourceJsonToColor','_HOMEBREW_OTHER_DATA','body','name','_contentMetadata','/template/ImportListAdventureBook.handlebars','_getAdditionalContentForTag','498221dzuGnq','_titleSearch','isOverwrite','isRadio','URL_TO_HASH_BUILDER','DataSourceUrl','pImportEntry','pRunTasks','splitFirstSpace','432402twGFeQ','log','sources','Import\x20Complete','contents','STR_SEE_CONSOLE','sort','_fnGetInlineHash','entries','add','_registerImportableTag','Importing\x20','_pLoadInline','$cb','activateTab','_fnGetInlineData','@variantrule','sourceJsonToAbv','toTitleCase','hash','_pubDate','title','Task','SOURCE_TYP_BREW','_dataProp','colLabels','error','2llXPUa','Could\x20not\x20import—one\x20of\x20\x22','copy','getWalker','forEach','click','pGetSources','startsWith','1Gaedym','imported','[].contents\x22\x20and\x20\x22','2131yDMoqd','Failed\x20to\x20pre-process\x20data!\x20','importer','ImportableTag','Failed\x20to\x20build\x20journal\x20data!\x20','map','folderType','input[data-source]','_getData','Custom\x20URL','_pImportEntry_pGetFolderId','@creature','39JlSmDB','...','[name=\x22btn-run\x22]','find','_getExtractedGenericTag','get','table','_pHandleRunButtonClick_pDoMainImport','_getJournalDatas','Variant\x20Rules','checked','MODULE_LOCATION','_pHandleRunButtonClick','_activateListeners_initCheckboxes','importedId','brewDataProp','SOURCE_TYP_OFFICIAL_SINGLE','_pLoadGenericHash','style','\x22\x20and\x20\x22','slice','_displayName','page','head','SYM_AT','length','pGetHomebrewSources','isSkip','_IMPORTABLE_TAGS','@table','PG_BESTIARY','sourceJsonToFull','_TAG_WALKER_BLACKLIST','Choose\x20','_pImportEntry_pDoUpdateExistingDirectoryEntity','Imported\x20'];const _0x34a0=function(_0x4e9fd9,_0x5cc2b6){_0x4e9fd9=_0x4e9fd9-0x9c;let _0x30740d=_0x3074[_0x4e9fd9];return _0x30740d;};const _0x5b54f8=_0x34a0;(function(_0x4ea0fa,_0xa995ea){const _0x5f2216=_0x34a0;while(!![]){try{const _0x1bc29c=-parseInt(_0x5f2216(0xf7))*parseInt(_0x5f2216(0xeb))+parseInt(_0x5f2216(0xbc))+parseInt(_0x5f2216(0x11b))*-parseInt(_0x5f2216(0xe8))+-parseInt(_0x5f2216(0x14c))+parseInt(_0x5f2216(0xc5))+parseInt(_0x5f2216(0xb4))+parseInt(_0x5f2216(0x12e))*-parseInt(_0x5f2216(0xe0));if(_0x1bc29c===_0xa995ea)break;else _0x4ea0fa['push'](_0x4ea0fa['shift']());}catch(_0x1ab177){_0x4ea0fa['push'](_0x4ea0fa['shift']());}}}(_0x3074,0x451ed));import{ImportList}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Util,LGT}from'./Util.js';import{ImportListCreature}from'./ImportListCreature.js';import{ImportListSpell}from'./ImportListSpell.js';import{UtilApplications}from'./UtilApplications.js';import{ImportListItem}from'./ImportListItem.js';import{ImportListRollableTable}from'./ImportListRollableTable.js';import{DataConverter}from'./DataConverter.js';import{UtilDataSource}from'./UtilDataSource.js';import{ImportListVariantRule}from'./ImportListVariantRule.js';class ImportListAdventureBook extends ImportList{constructor(_0x1fcc7a,_0x26717f,_0x33dfa6,_0x394dce){const _0xad33d9=_0x34a0;super({'title':_0x1fcc7a[_0xad33d9(0xda)],'template':SharedConsts[_0xad33d9(0x102)]+_0xad33d9(0xba),'width':0x1e0,'height':Util['getMaxWindowHeight'](0x280),'resizable':!![]},_0x26717f,{..._0x33dfa6,'sidebarTab':'journal','gameProp':'journal','folderType':'JournalEntry','isNonCacheableInstance':!![]}),this[_0xad33d9(0xae)]=_0x394dce[_0xad33d9(0x12c)],this['_fnGetUrl']=_0x394dce['fnGetUrl'],this[_0xad33d9(0xdd)]=_0x394dce[_0xad33d9(0xad)],this[_0xad33d9(0xb0)]=_0x394dce[_0xad33d9(0x106)],this[_0xad33d9(0x12b)]=_0x394dce[_0xad33d9(0xda)],this[_0xad33d9(0x127)]=null,this[_0xad33d9(0xa8)]=null,this['_tagCbMetas']=null;}get[_0x5b54f8(0xbf)](){return!![];}async[_0x5b54f8(0xe6)](){const _0x11b1da=_0x5b54f8,_0x87a005=await this[_0x11b1da(0xae)](),_0x4a3780=_0x87a005[this[_0x11b1da(0xdd)]][_0x11b1da(0xcb)]((_0xed2f79,_0x157f81)=>SortUtil['ascSortDate'](_0x157f81['_pubDate'],_0xed2f79[_0x11b1da(0xd9)])||SortUtil[_0x11b1da(0x148)](_0xed2f79['name'],_0x157f81['name']));return[..._0x4a3780['map'](_0x589b1c=>new UtilDataSource[(_0x11b1da(0xc1))](_0x589b1c[_0x11b1da(0xb8)],this[_0x11b1da(0xa0)](_0x589b1c['id']),{'pPostLoad':this[_0x11b1da(0x132)][_0x11b1da(0x13b)](this),'userData':_0x589b1c,'filterTypes':[UtilDataSource[_0x11b1da(0x107)]]})),new UtilDataSource[(_0x11b1da(0xc1))](_0x11b1da(0xf4),'',{'pPostLoad':this[_0x11b1da(0xa9)][_0x11b1da(0x13b)](this),'filterTypes':[UtilDataSource['SOURCE_TYP_CUSTOM']]}),new UtilDataSource[(_0x11b1da(0x13d))](_0x11b1da(0xa5),{'pPostLoad':this[_0x11b1da(0xa9)][_0x11b1da(0x13b)](this),'filterTypes':[UtilDataSource[_0x11b1da(0x122)]]}),...(await Vetools[_0x11b1da(0x111)](this[_0x11b1da(0xdd)]))['map'](({name:_0x2c1998,url:_0x4d60cd})=>new UtilDataSource[(_0x11b1da(0xc1))](_0x2c1998,_0x4d60cd,{'pPostLoad':this[_0x11b1da(0xa9)][_0x11b1da(0x13b)](this),'filterTypes':[UtilDataSource[_0x11b1da(0xdc)]]}))];}[_0x5b54f8(0x132)](_0x14a864,_0x1ab6c6,_0x12e0e3){const _0x5080d7=_0x5b54f8;return _0x14a864=MiscUtil[_0x5080d7(0xe2)](_0x14a864),_0x14a864[_0x5080d7(0xb9)]=MiscUtil[_0x5080d7(0xe2)](_0x12e0e3),_0x14a864;}async['_pPostLoadOther'](_0x31b36d){const _0x4b4100=_0x5b54f8;if(!_0x31b36d[this[_0x4b4100(0xdd)]]||!_0x31b36d[this[_0x4b4100(0xb0)]])return ui[_0x4b4100(0x9d)][_0x4b4100(0xdf)](_0x4b4100(0x133)+this[_0x4b4100(0xdd)]+_0x4b4100(0x10a)+this[_0x4b4100(0xb0)]+_0x4b4100(0x146)),null;_0x31b36d=MiscUtil[_0x4b4100(0xe2)](_0x31b36d);const _0x281e52=_0x31b36d[this[_0x4b4100(0xdd)]][_0x4b4100(0xf0)](_0x1e0405=>{const _0x3f6ea5=_0x4b4100,_0x139bb1=_0x31b36d[this[_0x3f6ea5(0xb0)]][_0x3f6ea5(0xfa)](_0x25e008=>_0x25e008['id']===_0x1e0405['id']);if(!_0x139bb1)return null;return{'head':_0x1e0405,'body':_0x139bb1[_0x3f6ea5(0x12a)]};})[_0x4b4100(0x129)](Boolean);if(!_0x281e52['length'])return ui[_0x4b4100(0x9d)][_0x4b4100(0xdf)](_0x4b4100(0xa1)+this[_0x4b4100(0xdd)]+'\x22\x20and\x20\x22'+this[_0x4b4100(0xb0)]+_0x4b4100(0x13f)),null;let _0x497c7c;if(_0x281e52[_0x4b4100(0x110)]===0x1)_0x497c7c=_0x281e52[0x0];else{const _0x59c859=await InputUiUtil[_0x4b4100(0xa2)]({'values':_0x281e52[_0x4b4100(0xf0)](_0xdfd6b8=>_0xdfd6b8['head']['id']),'fnDisplay':_0x418e45=>{const _0x564b11=_0x4b4100,_0x156d86=_0x281e52[_0x564b11(0xfa)](_0x2632d5=>_0x2632d5[_0x564b11(0x10e)]['id']===_0x418e45);return _0x156d86[_0x564b11(0x10e)][_0x564b11(0xb8)]+'\x20('+Parser[_0x564b11(0xd6)](_0x156d86[_0x564b11(0x10e)][_0x564b11(0x134)])+')';},'title':_0x4b4100(0x118)+this['_title'],'default':0x0,'isAllowNull':![],'isResolveItem':!![]});if(_0x59c859==null)return null;_0x497c7c=_0x281e52[_0x4b4100(0xfa)](_0x3c2c23=>_0x3c2c23[_0x4b4100(0x10e)]['id']===_0x59c859);}const _0x4a9af2=MiscUtil['get'](_0x497c7c,'head',_0x4b4100(0xc9)),_0x104d0c=MiscUtil[_0x4b4100(0xfc)](_0x497c7c,_0x4b4100(0xb7));if(!_0x4a9af2||!_0x104d0c)return ui[_0x4b4100(0x9d)][_0x4b4100(0xdf)](_0x4b4100(0xe1)+this[_0x4b4100(0xdd)]+_0x4b4100(0xea)+this[_0x4b4100(0xb0)]+_0x4b4100(0xb2)),null;if(_0x4a9af2[_0x4b4100(0x110)]!==_0x104d0c[_0x4b4100(0x110)])return ui['notifications'][_0x4b4100(0xdf)]('Could\x20not\x20import—header\x20and\x20chapter\x20counts\x20differed!'),null;return{'_contentMetadata':_0x497c7c[_0x4b4100(0x10e)],'data':_0x497c7c['body']};}['getData'](){const _0x399830=_0x5b54f8;try{return this[_0x399830(0xf3)]();}catch(_0x35c9a8){ui[_0x399830(0x9d)]['error'](_0x399830(0xec)+VeCt[_0x399830(0xca)]);throw _0x35c9a8;}}['_getData'](){const _0x4e8ede=_0x5b54f8;this[_0x4e8ede(0x130)]=MiscUtil[_0x4e8ede(0xe2)](this[_0x4e8ede(0x130)]),this[_0x4e8ede(0x127)]={},this[_0x4e8ede(0xa8)]={};const _0x326e11=MiscUtil[_0x4e8ede(0xe3)]({'keyBlacklist':ImportListAdventureBook[_0x4e8ede(0x117)]}),_0x594a59={},_0x514f2a=this[_0x4e8ede(0x130)]['_contentMetadata'][_0x4e8ede(0x134)]||this[_0x4e8ede(0x130)][_0x4e8ede(0xb9)]['id'];Object[_0x4e8ede(0x140)](ImportListAdventureBook[_0x4e8ede(0x113)])[_0x4e8ede(0x129)](_0x5e790a=>_0x5e790a['fnGetInlineData'])[_0x4e8ede(0xe4)](_0x437e29=>{const _0x5de471=_0x4e8ede,_0x46a0ab={[this[_0x5de471(0xdd)]]:this[_0x5de471(0x130)][_0x5de471(0xb9)],[this[_0x5de471(0xb0)]]:{'data':this[_0x5de471(0x130)][_0x5de471(0x12a)]}},_0x4e17a1={'headProp':this[_0x5de471(0xdd)],'bodyProp':this['_brewDataProp']};this[_0x5de471(0xa8)][_0x437e29[_0x5de471(0x143)]]=_0x437e29['fnGetInlineData'](_0x46a0ab,_0x4e17a1)[_0x5de471(0xcb)]((_0xd0e835,_0x5615d7)=>{const _0x5f5a06=_0x5de471;return SortUtil['ascSortLower'](_0xd0e835[_0x5f5a06(0xb8)],_0x5615d7['name'])||SortUtil['ascSortLower'](Parser['sourceJsonToFull'](_0xd0e835[_0x5f5a06(0x134)]||_0x514f2a),Parser[_0x5f5a06(0x116)](_0x5615d7['source']||_0x514f2a));}),this[_0x5de471(0xa8)][_0x437e29['tag']][_0x5de471(0xe4)](_0x3fcb39=>{const _0x5634a4=_0x5de471,_0x3dcf2c=_0x437e29['fnGetInlineHash'](_0x3fcb39);(_0x594a59[_0x437e29[_0x5634a4(0x143)]]=_0x594a59[_0x437e29['tag']]||new Set())[_0x5634a4(0xce)](_0x3dcf2c);});}),this[_0x4e8ede(0x130)]['data']['forEach'](_0x11e4d8=>{const _0x289c3c=_0x4e8ede,_0x4395c9={'string':_0x52bc9c=>{const _0x2d8576=_0x34a0,_0x5155a0=Renderer[_0x2d8576(0xaf)](_0x52bc9c),_0x2a8259=_0x5155a0[_0x2d8576(0x110)];for(let _0x2148a8=0x0;_0x2148a8<_0x2a8259;++_0x2148a8){const _0x1fbaed=_0x5155a0[_0x2148a8];if(!_0x1fbaed)continue;if(!_0x1fbaed['startsWith']('{@'))continue;const [_0xaeb12,_0x4954c4]=Renderer[_0x2d8576(0xc4)](_0x1fbaed[_0x2d8576(0x10b)](0x1,-0x1)),_0x4eeb90=ImportListAdventureBook[_0x2d8576(0x113)][_0xaeb12];if(!_0x4eeb90)continue;const _0x230502=_0x4eeb90[_0x2d8576(0x131)](_0x4954c4);if(_0x594a59[_0xaeb12]&&_0x594a59[_0xaeb12][_0x2d8576(0x9c)](_0x230502[_0x2d8576(0xd8)]))continue;(this[_0x2d8576(0x127)][_0xaeb12]=this[_0x2d8576(0x127)][_0xaeb12]||{})[_0x230502[_0x2d8576(0x134)]]=this['_availableEntities'][_0xaeb12][_0x230502[_0x2d8576(0x134)]]||new Set(),this[_0x2d8576(0x127)][_0xaeb12][_0x230502['source']]['add'](_0x230502[_0x2d8576(0xd8)]);}return _0x52bc9c;}};_0x326e11[_0x289c3c(0x13c)](_0x11e4d8,_0x4395c9);}),Object[_0x4e8ede(0x140)](ImportListAdventureBook['_IMPORTABLE_TAGS'])[_0x4e8ede(0xe4)](_0x5e8c71=>{const _0x2e30af=_0x4e8ede,_0x13c678=this['_getAdditionalContentForTag'](_0x5e8c71[_0x2e30af(0x143)]);if(!_0x13c678?.[_0x2e30af(0x110)])return;_0x13c678[_0x2e30af(0xe4)](({source:_0x130197,hash:_0x387e64})=>{const _0x294500=_0x2e30af;_0x130197=_0x130197['toLowerCase']();const _0x268f3a=MiscUtil['getOrSet'](this[_0x294500(0x127)],_0x5e8c71[_0x294500(0x143)],_0x130197,new Set());_0x268f3a[_0x294500(0xce)](_0x387e64);});});const _0x25cb6=Object['keys'](ImportListAdventureBook['_IMPORTABLE_TAGS'])[_0x4e8ede(0xf0)](_0x2c12ee=>{const _0x2a4d42=_0x4e8ede,_0xd54a3e=ImportListAdventureBook[_0x2a4d42(0x113)][_0x2c12ee],_0x5f25f1=this[_0x2a4d42(0x127)][_0x2c12ee],_0x293549=this['_availableInlineData'][_0x2c12ee],_0x2e602b={'displayName':_0xd54a3e['displayName'],'tag':_0x2c12ee,'sources':[]};_0x5f25f1&&_0x2e602b[_0x2a4d42(0xc7)][_0x2a4d42(0x9e)](...Object[_0x2a4d42(0xcd)](_0x5f25f1)[_0x2a4d42(0xf0)](([_0x21a877,_0x5c72e4])=>{const _0x3757af=_0x2a4d42;return{'sourceLong':Parser['sourceJsonToFull'](_0x21a877),'sourceShort':Parser[_0x3757af(0xd6)](_0x21a877),'sourceClassName':Parser['sourceJsonToColor'](_0x21a877),'source':_0x21a877,'count':_0x5c72e4['size']};}));if(_0x293549&&_0x293549[_0x2a4d42(0x110)]){const _0x2e9934=_0x2e602b[_0x2a4d42(0xc7)][_0x2a4d42(0xfa)](_0x3446b2=>_0x3446b2[_0x2a4d42(0x134)][_0x2a4d42(0x13a)]()===_0x514f2a[_0x2a4d42(0x13a)]());if(_0x2e9934)_0x2e9934['count']+=_0x293549[_0x2a4d42(0x110)];else _0x2e602b[_0x2a4d42(0xc7)][_0x2a4d42(0x9e)]({'sourceLong':Parser[_0x2a4d42(0x116)](_0x514f2a),'sourceShort':Parser[_0x2a4d42(0xd6)](_0x514f2a),'sourceClassName':Parser[_0x2a4d42(0xb5)](_0x514f2a),'source':_0x514f2a,'count':_0x293549[_0x2a4d42(0x110)]});}return _0x2e602b[_0x2a4d42(0xc7)][_0x2a4d42(0xcb)]((_0x41d622,_0x4c72ba)=>SortUtil[_0x2a4d42(0x148)](_0x41d622[_0x2a4d42(0x14a)],_0x4c72ba[_0x2a4d42(0x14a)])),_0x2e602b;})['filter'](_0x2eee31=>_0x2eee31[_0x4e8ede(0xc7)][_0x4e8ede(0x110)]);return{'name':this['_content'][_0x4e8ede(0xb9)][_0x4e8ede(0xb8)],'titleSearch':this[_0x4e8ede(0xbd)],'tagSections':_0x25cb6};}[_0x5b54f8(0x128)](_0x2290b3){const _0x4c99fd=_0x5b54f8;this[_0x4c99fd(0x104)](_0x2290b3),this[_0x4c99fd(0x121)](_0x2290b3),this[_0x4c99fd(0x144)](_0x2290b3);}[_0x5b54f8(0x104)](_0x33719e){const _0xba7873=_0x5b54f8;this[_0xba7873(0x126)]={},_0x33719e[_0xba7873(0xfa)](_0xba7873(0xf2))[_0xba7873(0x147)]((_0x408bd1,_0x2c850f)=>{const _0x111978=_0xba7873,_0x7f961c=$(_0x2c850f),_0x2444b8=_0x7f961c[_0x111978(0x12a)]('tag'),_0x5d438c=_0x7f961c[_0x111978(0x12a)]('source');(this[_0x111978(0x126)][_0x2444b8]=this[_0x111978(0x126)][_0x2444b8]||[])['push']({'source':_0x5d438c,'$cb':_0x7f961c});});const _0x1222e7=_0x33719e[_0xba7873(0xfa)]('input[data-type=\x22all\x22]')[_0xba7873(0xf0)]((_0x1da8ae,_0x10abd0)=>{const _0x2c9b88=_0xba7873,_0x412876=$(_0x10abd0),_0x258777=_0x412876[_0x2c9b88(0x12a)](_0x2c9b88(0x143));return _0x412876[_0x2c9b88(0xb3)](()=>{const _0x57b319=_0x2c9b88,_0x4210c9=_0x412876[_0x57b319(0x139)](_0x57b319(0x101));this[_0x57b319(0x126)][_0x258777][_0x57b319(0xe4)](_0xa22326=>_0xa22326[_0x57b319(0xd2)]['prop']('checked',_0x4210c9));}),_0x412876;})[_0xba7873(0xfc)](),_0x2b6a6e=_0x33719e['find']('input[data-type=\x22god\x22]');_0x2b6a6e['change'](()=>{const _0x44eab6=_0xba7873,_0x2a827d=_0x2b6a6e[_0x44eab6(0x139)](_0x44eab6(0x101));_0x1222e7[_0x44eab6(0xe4)](_0x915eea=>_0x915eea[_0x44eab6(0x139)](_0x44eab6(0x101),_0x2a827d)[_0x44eab6(0xb3)]());});}[_0x5b54f8(0x121)](_0x162591){const _0x44a6de=_0x5b54f8;_0x162591[_0x44a6de(0xfa)]('button[data-type=\x22configure\x22]')[_0x44a6de(0x147)]((_0x4f9786,_0x5ab51c)=>{const _0x2ec3ef=_0x44a6de,_0xad8d46=$(_0x5ab51c),_0x5bb8e7=_0xad8d46['data'](_0x2ec3ef(0x143)),_0x40922b=ImportListAdventureBook[_0x2ec3ef(0x113)][_0x5bb8e7];_0xad8d46[_0x2ec3ef(0xe5)](async()=>{const _0x180b84=_0x2ec3ef;await _0x40922b[_0x180b84(0xed)][_0x180b84(0xaa)](),await _0x40922b[_0x180b84(0xed)]['pHandleEditFolderPathClick']();});});}[_0x5b54f8(0x144)](_0x59a8d6){const _0x2d5461=_0x5b54f8;_0x59a8d6[_0x2d5461(0xfa)](_0x2d5461(0xf9))['click'](async()=>this[_0x2d5461(0x103)]());}async[_0x5b54f8(0x103)](){const _0x15d253=_0x5b54f8;this[_0x15d253(0xa3)](),console[_0x15d253(0xc6)](...LGT,_0x15d253(0xd0)+this['_dataProp']+'\x20\x22'+this[_0x15d253(0x130)]['_contentMetadata']['name']+'\x22');const _0xaafd9e=await this[_0x15d253(0x138)]();await this[_0x15d253(0xfe)](_0xaafd9e);}async[_0x5b54f8(0x138)](){const _0x3d0dbe=_0x5b54f8,_0x30adc4={};Object[_0x3d0dbe(0xcd)](this[_0x3d0dbe(0x126)])[_0x3d0dbe(0xe4)](([_0xb09266,_0x58644e])=>{const _0x3e44db=_0x3d0dbe,_0x489be0=_0x58644e['filter'](_0x1e1cad=>_0x1e1cad[_0x3e44db(0xd2)]['prop']('checked'))[_0x3e44db(0xf0)](_0x5b06c7=>_0x5b06c7[_0x3e44db(0x134)]);if(!_0x489be0['length'])return;_0x30adc4[_0xb09266]=_0x489be0;});const _0x351ee4={};if(!Object[_0x3d0dbe(0x11f)](_0x30adc4)['length'])return _0x351ee4;const _0x12fc66=[];for(const [_0x5a632c,_0x59d61a]of Object[_0x3d0dbe(0xcd)](_0x30adc4)){const _0x307f36=_0x351ee4[_0x5a632c]={},_0x579fcf=ImportListAdventureBook[_0x3d0dbe(0x113)][_0x5a632c];for(const _0x581de4 of _0x59d61a){const _0x188480=[...MiscUtil[_0x3d0dbe(0xfc)](this[_0x3d0dbe(0x127)],_0x5a632c,_0x581de4)||[]];for(const _0x53e032 of _0x188480){const [_0xc6f1d8,_0x3490de]=_0x53e032[_0x3d0dbe(0x123)](HASH_LIST_SEP),_0x508763=decodeURIComponent(_0xc6f1d8)[_0x3d0dbe(0xd7)](),_0x27850e=Parser[_0x3d0dbe(0xd6)](_0x3490de);_0x12fc66[_0x3d0dbe(0x9e)](new Util[(_0x3d0dbe(0xdb))](_0x579fcf['displayName']+':\x20'+_0x508763+'\x20('+_0x27850e+')',()=>(async()=>{const {folderType:_0x532cd2,id:_0x407b0e}=await _0x579fcf['pLoadHash'](_0x53e032);(_0x307f36[_0x5a632c]=_0x307f36[_0x5a632c]||{})[_0x53e032]={'folderType':_0x532cd2,'importedId':_0x407b0e};})()));}const _0x20faa1=[...MiscUtil[_0x3d0dbe(0xfc)](this['_availableInlineData'],_0x5a632c)||[]];for(const _0x433587 of _0x20faa1){_0x12fc66['push'](new Util[(_0x3d0dbe(0xdb))](_0x579fcf[_0x3d0dbe(0x11c)]+':\x20'+_0x433587[_0x3d0dbe(0xb8)]+'\x20('+_0x433587[_0x3d0dbe(0x134)]+')',()=>(async()=>{const _0x390c5c=_0x3d0dbe;await _0x579fcf[_0x390c5c(0xd1)](_0x433587);})()));}}}return await UtilApplications[_0x3d0dbe(0xc3)](_0x12fc66,{'titleInitial':_0x3d0dbe(0x136),'titleComplete':_0x3d0dbe(0xc8),'fnGetRowRunningText':_0x5d7253=>_0x3d0dbe(0xd0)+_0x5d7253+'...','fnGetRowSuccessText':_0x7ff0c4=>_0x3d0dbe(0x11a)+_0x7ff0c4+'.','fnGetRowErrorText':_0x44ddfc=>_0x3d0dbe(0x11e)+_0x44ddfc+'!\x20'+VeCt[_0x3d0dbe(0xca)],'isForceClose':!![]}),_0x351ee4;}async['_pHandleRunButtonClick_pDoMainImport'](_0x24d6a2){const _0x40ad13=_0x5b54f8,_0x2198d3=MiscUtil[_0x40ad13(0xe3)]({'keyBlacklist':ImportListAdventureBook['_TAG_WALKER_BLACKLIST']}),_0x884592={'string':_0x127021=>{const _0x8ed2f1=_0x40ad13,_0x15c452=Renderer[_0x8ed2f1(0xaf)](_0x127021),_0x31eae2=_0x15c452[_0x8ed2f1(0x110)];let _0x1b426a='';for(let _0x4c9bca=0x0;_0x4c9bca<_0x31eae2;++_0x4c9bca){const _0x507541=_0x15c452[_0x4c9bca];if(!_0x507541)continue;if(!_0x507541[_0x8ed2f1(0xe7)]('{@')){_0x1b426a+=_0x507541;continue;}const [_0x56d2da,_0x39b478]=Renderer['splitFirstSpace'](_0x507541[_0x8ed2f1(0x10b)](0x1,-0x1)),_0x4907d6=ImportListAdventureBook['_IMPORTABLE_TAGS'][_0x56d2da],_0x46a962=_0x24d6a2[_0x56d2da];if(!_0x4907d6||!_0x46a962){_0x1b426a+=_0x507541;continue;}const _0x562962=_0x4907d6[_0x8ed2f1(0x131)](_0x39b478),_0x29a4bb=MiscUtil[_0x8ed2f1(0xfc)](_0x46a962,_0x56d2da,_0x562962['hash']);if(!_0x29a4bb){_0x1b426a+=_0x507541;continue;}_0x1b426a+=''+DataConverter[_0x8ed2f1(0x10f)]+_0x29a4bb[_0x8ed2f1(0xf1)]+'['+_0x29a4bb[_0x8ed2f1(0x105)]+']{'+_0x562962[_0x8ed2f1(0x12d)]+'}';}return _0x1b426a;}};this[_0x40ad13(0x130)]['data']=_0x2198d3[_0x40ad13(0x13c)](this[_0x40ad13(0x130)]['data'],_0x884592);let _0x17c046;try{_0x17c046=this[_0x40ad13(0xff)]();}catch(_0x21789d){ui[_0x40ad13(0x9d)][_0x40ad13(0xdf)](_0x40ad13(0xef)+VeCt[_0x40ad13(0xca)]);throw _0x21789d;}const _0x2b4bf6=[],_0x312ba7=await this[_0x40ad13(0xf5)]({'name':this[_0x40ad13(0x130)][_0x40ad13(0xb9)][_0x40ad13(0xb8)],'source':this['_content'][_0x40ad13(0xb9)]['source']},{'sorting':'m'});for(const _0x297c50 of _0x17c046){_0x2b4bf6['push'](new Util['Task'](_0x297c50[_0x40ad13(0xb8)],()=>{const _0x34f6fe=_0x40ad13,_0x3a955d=this[_0x34f6fe(0x13e)]({'name':_0x297c50['name']});if(_0x3a955d[_0x34f6fe(0x112)])return UtilApplications[_0x34f6fe(0x125)];if(_0x3a955d[_0x34f6fe(0xbe)])return this[_0x34f6fe(0x119)](_0x3a955d,_0x297c50);if(_0x312ba7)_0x297c50[_0x34f6fe(0x142)]=_0x312ba7;return JournalEntry['create'](_0x297c50,{'renderSheet':![],'temporary':![]});}));}ui[_0x40ad13(0xa4)][_0x40ad13(0xd3)](_0x40ad13(0x145)),await UtilApplications[_0x40ad13(0xc3)](_0x2b4bf6,{'titleInitial':_0x40ad13(0x136),'titleComplete':_0x40ad13(0xc8),'fnGetRowRunningText':_0x290c42=>_0x40ad13(0xd0)+_0x290c42+_0x40ad13(0xf8),'fnGetRowSuccessText':_0x3eb775=>_0x40ad13(0x11a)+_0x3eb775+'.','fnGetRowErrorText':_0x15b9a8=>_0x40ad13(0x11e)+_0x15b9a8+'!\x20'+VeCt[_0x40ad13(0xca)]});}[_0x5b54f8(0xff)](){throw new Error('Unimplemented!');}[_0x5b54f8(0xbb)](){return null;}static[_0x5b54f8(0xcf)](_0x261e2c){const _0x16b6f9=_0x5b54f8;this[_0x16b6f9(0x113)][_0x261e2c['tag']]=_0x261e2c;}}ImportListAdventureBook[_0x5b54f8(0x113)]={},ImportListAdventureBook[_0x5b54f8(0xb6)]={},ImportListAdventureBook['ImportableTag']=class{constructor(_0x2a1a4c){const _0x2015a7=_0x5b54f8;this[_0x2015a7(0x10c)]=_0x2a1a4c[_0x2015a7(0x11c)],this[_0x2015a7(0x149)]=_0x2a1a4c['tag'],this[_0x2015a7(0x137)]=_0x2a1a4c[_0x2015a7(0x10d)],this[_0x2015a7(0x120)]=_0x2a1a4c[_0x2015a7(0x9f)],this[_0x2015a7(0x11d)]=_0x2a1a4c['importer'],this[_0x2015a7(0xd4)]=_0x2a1a4c[_0x2015a7(0xb1)],this[_0x2015a7(0xcc)]=_0x2a1a4c['fnGetInlineHash'],this[_0x2015a7(0x124)]=![];}get[_0x5b54f8(0x11c)](){const _0x1adb78=_0x5b54f8;return this[_0x1adb78(0x10c)];}get[_0x5b54f8(0x143)](){return this['_tag'];}get[_0x5b54f8(0x10d)](){const _0x424cf1=_0x5b54f8;return this[_0x424cf1(0x137)];}get['importer'](){const _0x20e201=_0x5b54f8;return this[_0x20e201(0x11d)];}get['fnGetInlineData'](){const _0x1d9dfb=_0x5b54f8;return this[_0x1d9dfb(0xd4)];}get['fnGetInlineHash'](){const _0x1ea4c6=_0x5b54f8;return this[_0x1ea4c6(0xcc)];}['pLoadHash'](_0x57d033){const _0x595a55=_0x5b54f8;return this[_0x595a55(0x14b)](),this[_0x595a55(0x108)](_0x57d033);}[_0x5b54f8(0x14b)](){const _0x3b9666=_0x5b54f8;!this[_0x3b9666(0x124)]&&(this[_0x3b9666(0x11d)]['activateSidebarTab'](),this[_0x3b9666(0x124)]=!![]);}async[_0x5b54f8(0x108)](_0x1efbc2){const _0x4a3edf=_0x5b54f8,[_0x14a9ae,_0x13dadc]=_0x1efbc2[_0x4a3edf(0x123)](HASH_LIST_SEP),_0x855dd2=await Renderer[_0x4a3edf(0x141)]['pCacheAndGet'](this[_0x4a3edf(0x137)],_0x13dadc,_0x1efbc2);await this['_importer'][_0x4a3edf(0xaa)]();const _0x15df9d=await this[_0x4a3edf(0x11d)]['pImportEntry'](_0x855dd2,{});return{'folderType':this[_0x4a3edf(0x11d)][_0x4a3edf(0xf1)],'id':_0x15df9d[_0x4a3edf(0xe9)]?.['id'],'hash':_0x1efbc2};}static[_0x5b54f8(0xfb)](_0x43d6b3,_0x2ae98f,_0x467908){const _0x3afcbf=_0x5b54f8,[_0x189f2e,_0xf1cd7a,_0x38712d]=Renderer['splitTagByPipe'](_0x467908),_0x5fda37=(_0xf1cd7a||_0x2ae98f)[_0x3afcbf(0x13a)](),_0xc45c27={'name':_0x189f2e,'source':_0x5fda37};return{'source':_0x5fda37,'displayText':_0x38712d||_0x189f2e,'hash':UrlUtil[_0x3afcbf(0xc0)][_0x43d6b3](_0xc45c27)};}[_0x5b54f8(0x131)](_0x449b9d){const _0x1db28a=_0x5b54f8;return ImportListAdventureBook[_0x1db28a(0xee)]['_getExtractedGenericTag'](this[_0x1db28a(0x137)],this[_0x1db28a(0x120)],_0x449b9d);}async[_0x5b54f8(0xd1)](_0x2aee88){const _0x5b3fca=_0x5b54f8;this[_0x5b3fca(0x14b)](),await this[_0x5b3fca(0x11d)][_0x5b3fca(0xaa)](),await this[_0x5b3fca(0x11d)][_0x5b3fca(0xc2)](_0x2aee88,{});}},ImportListAdventureBook[_0x5b54f8(0x117)]=new Set([_0x5b54f8(0xb8),'caption',_0x5b54f8(0xde),_0x5b54f8(0x109),'type',_0x5b54f8(0xa6),_0x5b54f8(0x10d)]),ImportListAdventureBook[_0x5b54f8(0x12f)]={'displayName':'Creatures','tag':_0x5b54f8(0xf6),'page':UrlUtil[_0x5b54f8(0x115)],'defaultSource':SRC_MM,'importer':new ImportListCreature()},ImportListAdventureBook[_0x5b54f8(0xcf)](new ImportListAdventureBook[(_0x5b54f8(0xee))](ImportListAdventureBook[_0x5b54f8(0x12f)])),ImportListAdventureBook[_0x5b54f8(0xcf)](new ImportListAdventureBook['ImportableTag']({'displayName':'Spells','tag':'@spell','page':UrlUtil[_0x5b54f8(0xa7)],'defaultSource':SRC_PHB,'importer':new ImportListSpell()})),ImportListAdventureBook[_0x5b54f8(0xcf)](new ImportListAdventureBook[(_0x5b54f8(0xee))]({'displayName':'Items','tag':'@item','page':UrlUtil['PG_ITEMS'],'defaultSource':SRC_DMG,'importer':new ImportListItem()})),ImportListAdventureBook[_0x5b54f8(0xcf)](new ImportListAdventureBook[(_0x5b54f8(0xee))]({'displayName':_0x5b54f8(0x100),'tag':_0x5b54f8(0xd5),'page':UrlUtil['PG_VARIANTRULES'],'defaultSource':SRC_DMG,'importer':new ImportListVariantRule()})),ImportListAdventureBook[_0x5b54f8(0xcf)](new ImportListAdventureBook['ImportableTag']({'displayName':_0x5b54f8(0xab),'tag':_0x5b54f8(0x114),'page':UrlUtil[_0x5b54f8(0x135)],'defaultSource':SRC_DMG,'importer':new ImportListRollableTable(),'fnGetInlineData':(_0x151ca9,_0x18267b)=>{const _0x2ac18b=_0x5b54f8,{table:_0x311da8,tableGroup:_0x1ef9bd}=UtilGenTables['getAdventureBookTables'](_0x151ca9,_0x18267b);return _0x311da8[_0x2ac18b(0xe4)](_0x2c31fc=>_0x2c31fc[_0x2ac18b(0xac)]=_0x2ac18b(0xfd)),_0x1ef9bd['forEach'](_0x50fb3c=>_0x50fb3c[_0x2ac18b(0xac)]='tableGroup'),[..._0x311da8,..._0x1ef9bd];},'fnGetInlineHash':_0x1a3d96=>{const _0x4d3f7b=_0x5b54f8;return UrlUtil[_0x4d3f7b(0xc0)][UrlUtil['PG_TABLES']](_0x1a3d96)['toLowerCase']();}}));export{ImportListAdventureBook};