const _0x4ae8=['isImportBio','creature','sourceLong','_plut_isLegendaryResistance','lower','formula','every','\x20+\x20@mod','activateListeners','_pCr','prop','escapeRegexp','permissions','monTypeToFullObj','isEquipped','_getSpellCount','Type\x20(With\x20Tags)','titleSearch','updateEntity','_pImportEntry_pFillItems_pLairActions','_postLoadVetools','_$btnReset','SOURCE_TYP_ARCANA','_pack','will','max','_page','getSourceWithPagePart','_pImportEntry_pFillItems_pAddItem','_pImportEntry_pFillBase','bonusAc','sourceJsonToColor','_getSavingThrowData','SOURCE_TYP_BREW','name','con','findIndex','environment','_pImportEntry_fillData_Currency','[name=\x22sel-cr\x22]','rest','PRIORITY_BONUS','data','C_CREATURE_NAMETAGS_TYPE_WITH_TAGS','str','details','_pImportEntry_fillData_Spells','_pTypes','alignmentListToFull','fnPreProcess','perm','day','importCreature','sourceShort','pGetAllCreatures','btn-run-mods','group','lair','.search','829068tysjhS','MODULE_NAME_FAKE','pGetCreatureIndex','action','SOURCE_TYP_CUSTOM','Lair\x20Action','headerEntries','assumedPb','isImportBioImages','Miscellaneous','getDamagePartsAndOtherFormula','filter','getFolderPathMeta','5etools-creatures','close','Failed\x20to\x20find\x20sheet\x20item\x20for\x20item\x20\x22','_getActorSheetName','absorbFnBindListeners','med','getEntryDescription','C_CREATURE_NAMETAGS_TYPE','spells','constant','skills','copy','includes','/template/ImportListCreatureScaleRename.handlebars','biography','spellLevel','mergeMap','sortMonsters','val','get','actor','_pImportEntry_fillData_Resources','string','toTitleCase','target','traits','_pFnPostProcessEntries','innate','DataSourceFile','attributes','mutateForFilters','ability','walk','asText','_isSkipFolder','find','[data-name=\x22wrp-btns-sort\x22]','_content','truesight','URL_TO_HASH_BUILDER','276961ymIFUG','join','Legendary\x20Actions','bardingType','initBtnSortHandlers','split','_initAssumedPb','dex','getMovement','_pImportEntry_pGetFolderId','SOURCES_ADVENTURES','hover','custom','doHookSpellLinkRender','_pImportEntry_pFillData_Attributes','getLegendaryActionIntro','_getAbsorbListItemOpts','entries','spellClass','DataSourceUrl','_pImportEntry_fillData_Skills','Upload\x20File','following\x20breath\x20weapon','_pImportEntry_pFillItems_lairActions_addLairAction','[name=\x22btn-reset\x22]','map','pGetChooseImporterUserDataForSources','Unknown\x20CR','_vCr','dexterityMax','average','pWithPlugin','_list','pGetTraitReactionLegendaryImage','isSingletonSource_officialAdventure','ABIL_ABVS','stringify','VET_SIZE_TO_ABV','1hrMvuI','senses','spellDc','pact','pGetParsedAction','entry','943403XFVPOB','</div>','blindsight','uid','_pageFilter','pGetItemItem','sort','Actor','size','isStreamerMode','legendary','class','_pImportEntry_pFillItems_pInventory','pCacheAndGetHash','_userData','_getRenamedMon','toLowerCase','set','items','CR_CUSTOM','monCrToFull','cha','list','push','spellAbility','\x20or\x20','_pImportEntry_pFillItems_pTraitsReactionsLegendaries','MODULE_LOCATION','special','text-center','_initSpellcasterData','forEach','isUseTokenImageAsPortrait','monster','absorbFnBindListenersRadio','nameTags','link','Breath\x20Weapons:\x20','spelldc','number','getMaxWindowHeight','Custom\x20URL','length','_pImportEntry_pGetImportMetadata','_getFolderTypeWithTags','Type','attribute','lairActions','_getFolderCr','substring','_displayName','render','legres','mon','[name=\x22ipt-rename\x22]','legendaryMeta','_pImportEntry_pFillItems_pActions','startsWith','2493378lPQWKn','resources','ascSort','_dataList','ACTIVE_EFFECT_MODES','replace','/media/icon/mighty-force.svg','resources.legres.value','_pImportEntry_fillData_Abilities','exec','_getCasterClassFromEntry','reset','alias','ADD','charges','PG_ITEMS','sourceJsonToAbv','source','monsterFluff','updateEmbeddedEntity','add','daily','_pImportEntry_pFillItems_addTextOnlyItem','_pImportEntry_pFillItems_pLegendaryHeader','_getLairActionName','getItemActorPassive','isAddActiveEffects','Lair\x20Actions','_isUseMods','speed','type','_pImportEntry_pFillItems_pSpellcasting','_resolve','_WALER_RENAME','Name','_isRadio','feat','style','doAbsorbItems','_titleSearch','pGetSpellHashToItemPosMapAndFillSpells','.veapp__list','Eye\x20Ray:\x20','flags','Creatures','currency','permission','_pImportEntry_pFillItems_pRegionalEffects','data/bestiary/','min','Source','scale','bind','MODULE_NAME','_pImportEntry_fillData_Traits','weekly','getValues','joinConjunct','_getFolderType','_pImportEntry_pFillData_Attributes_Ac','postItemItemUpdates','_pImportEntry_pFillItems_pAction','_numberCleanRegexp','_plut_cleanName','trim','filterBox','ImportEntryOpts','_getItemHashesFromAcItem','<div>','bonus','_plut_legActions','crToXpNumber','_id','click','getData','spellcasting','237293RNiqIK','_tmpItemId','movement','alignment','79900ifIGRg','variant','from','darkvision','pGetLairActionImage','int','PG_BESTIARY','has','pGetSpellcastingImage','keys','uppercaseFirst','stripTags','actors','data.attributes.ac.value','ScaleRename','npc','_getDamageTuplesWithMod','trait','fluff','item','warn','_pImportEntry_pFillItems','getMetaGroup','pAddActorItems','_getBiographyValue','Other\x20AC\x20Bonus','([^a-zA-Z0-9]|$)','getAbilityModNumber','crToNumber','isTemp','postProcessFluff','effects','importItem','_getItemHashesFromString','_getCasterLevelFromEntry','getCreatureUrl','OwnedItem','test','tremorsense','_pImportEntry_pFillItems_getSubActions','SOURCE_TYP_OFFICIAL_SINGLE','_pImportEntry_fillData_Details','reaction','languages','_pImportEntry_pFillItems_pSpellcasting_recharge','constructor','pGetFluff','247332hJmTRl','absorbFnGetData','getParsedActionEntryData','resources.legact.value'];const _0x5416=function(_0x1db088,_0x5d5ea5){_0x1db088=_0x1db088-0x10b;let _0x4ae8b5=_0x4ae8[_0x1db088];return _0x4ae8b5;};const _0x14efab=_0x5416;(function(_0x48a1c7,_0x2db47f){const _0x1d83d4=_0x5416;while(!![]){try{const _0x29625e=parseInt(_0x1d83d4(0x1bc))+-parseInt(_0x1d83d4(0x22a))+-parseInt(_0x1d83d4(0x1eb))+-parseInt(_0x1d83d4(0x1b8))+-parseInt(_0x1d83d4(0x132))+parseInt(_0x1d83d4(0x25f))*parseInt(_0x1d83d4(0x12c))+parseInt(_0x1d83d4(0x16c));if(_0x29625e===_0x2db47f)break;else _0x48a1c7['push'](_0x48a1c7['shift']());}catch(_0x3071ad){_0x48a1c7['push'](_0x48a1c7['shift']());}}}(_0x4ae8,0x90cf7));import{ImportListActor}from'./ImportListActor.js';import{Vetools}from'./Vetools.js';import{Util,LGT}from'./Util.js';import{UtilActors}from'./UtilActors.js';import{DataConverter}from'./DataConverter.js';import{DataConverterItem}from'./DataConverterItem.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{DataConverterSpell}from'./DataConverterSpell.js';import{DataConverterCreature}from'./DataConverterCreature.js';import{UtilDataSource}from'./UtilDataSource.js';import{ConfigConsts}from'./ConfigConsts.js';import{DataConverterActor}from'./DataConverterActor.js';import{UtilActiveEffects}from'./UtilActiveEffects.js';class ImportListCreature extends ImportListActor{constructor(_0x1bc91f,_0x3a9565,_0x2c578a,_0x13b6e8){const _0x4b679a=_0x5416;_0x1bc91f=_0x1bc91f||{},_0x3a9565=_0x3a9565||{},_0x2c578a=_0x2c578a||{},_0x13b6e8=_0x13b6e8||{},super({'title':'Import\x20Creatures',..._0x3a9565},_0x1bc91f,{'props':[_0x4b679a(0x153)],'titleSearch':'creatures','sidebarTab':_0x4b679a(0x1c8),'gameProp':_0x4b679a(0x1c8),'defaultFolderPath':[_0x4b679a(0x198)],'folderType':_0x4b679a(0x139),'fnListSort':PageFilterBestiary[_0x4b679a(0x248)],'pageFilter':new PageFilterBestiary(),'isActorRadio':!![],'page':UrlUtil[_0x4b679a(0x1c2)],'isPreviewable':!![],'isModdable':!![],'isDedupable':!![],..._0x2c578a},{'actorType':_0x4b679a(0x1cb),..._0x13b6e8}),this[_0x4b679a(0x188)]=![];}async['pGetSources'](){const _0x3e7c06=_0x5416,_0x361250=await Vetools[_0x3e7c06(0x22c)]();return[new UtilDataSource['DataSourceSpecial'](Config[_0x3e7c06(0x24a)]('ui',_0x3e7c06(0x13b))?'SRD':'5etools',async()=>(await Vetools[_0x3e7c06(0x225)]())[_0x3e7c06(0x153)],{'cacheKey':_0x3e7c06(0x237),'filterTypes':[UtilDataSource['SOURCE_TYP_OFFICIAL_ALL']],'isDefault':!![]}),new UtilDataSource['DataSourceUrl'](_0x3e7c06(0x15b),'',{'filterTypes':[UtilDataSource[_0x3e7c06(0x22e)]]}),new UtilDataSource[(_0x3e7c06(0x253))](_0x3e7c06(0x11b),{'filterTypes':[UtilDataSource[_0x3e7c06(0x22e)]]}),...Object[_0x3e7c06(0x117)](_0x361250)[_0x3e7c06(0x11f)](([_0xfac629,_0x35ee64])=>new UtilDataSource[(_0x3e7c06(0x119))](Parser['sourceJsonToFull'](_0xfac629),Vetools[_0x3e7c06(0x1df)](_0x35ee64),{'source':_0xfac629,'pPostLoad':ImportListCreature[_0x3e7c06(0x203)][_0x3e7c06(0x1a0)](ImportListCreature,_0xfac629),'filterTypes':SourceUtil['isNonstandardSource'](_0xfac629)?[UtilDataSource[_0x3e7c06(0x205)]]:[UtilDataSource[_0x3e7c06(0x1e4)]]})),...(await Vetools['pGetHomebrewSources'](_0x3e7c06(0x1f0)))[_0x3e7c06(0x11f)](({name:_0x2c08ac,url:_0x2cfa0a})=>new UtilDataSource[(_0x3e7c06(0x119))](_0x2c08ac,_0x2cfa0a,{'filterTypes':[UtilDataSource[_0x3e7c06(0x210)]]}))];}static[_0x14efab(0x203)](_0x2d2789,_0x23a5ac){const _0x29187a=_0x14efab;return _0x23a5ac['filter'](_0x4a39e7=>_0x4a39e7[_0x29187a(0x17d)]===_0x2d2789);}async[_0x14efab(0x120)](_0x531d0f){const _0x4fe70f=_0x14efab;return{'isSingletonSource_officialAdventure':_0x531d0f[_0x4fe70f(0x15c)]===0x1&&_0x531d0f[0x0]['source']&&Parser[_0x4fe70f(0x110)][_0x4fe70f(0x1c3)](_0x531d0f[0x0][_0x4fe70f(0x17d)])};}async['_pPostFilterRender'](){const _0x1295c0=_0x14efab;if(!this[_0x1295c0(0x140)])return;const _0x3d27a4=this[_0x1295c0(0x140)][_0x1295c0(0x128)];this[_0x1295c0(0x140)]=null;if(!_0x3d27a4)return;const _0x1b99fb=_0x1295c0(0x233),_0x7f5cc9=this[_0x1295c0(0x136)][_0x1295c0(0x1ad)][_0x1295c0(0x1a4)]()[_0x1b99fb];this[_0x1295c0(0x136)][_0x1295c0(0x1ad)]['setFromValues']({[_0x1b99fb]:{...Object[_0x1295c0(0x117)](_0x7f5cc9)[_0x1295c0(0x235)](([_0x555a3d])=>!_0x555a3d[_0x1295c0(0x16b)]('_'))[_0x1295c0(0x247)](([_0x2d8515,_0x570397])=>({[_0x2d8515]:_0x570397})),'Adventure\x20NPC':0x0}});}[_0x14efab(0x1b6)](){const _0x31f616=_0x14efab;return{'isRadio':this[_0x31f616(0x18f)],'isPreviewable':this['_isPreviewable'],'titleButtonRun':this['_titleButtonRun'],'titleSearch':this[_0x31f616(0x193)],'buttonsAdditional':[{'name':_0x31f616(0x226),'text':'Import\x20with\x20CR\x20Scaling/Renames'}],'cols':[{'name':_0x31f616(0x18e),'width':0x4,'field':_0x31f616(0x211)},{'name':_0x31f616(0x15f),'width':0x5,'field':_0x31f616(0x18a)},{'name':'CR','width':0x1,'field':'cr','rowClassName':_0x31f616(0x14f)},{'name':_0x31f616(0x19e),'width':0x1,'field':_0x31f616(0x17d),'titleProp':_0x31f616(0x1f1),'displayProp':_0x31f616(0x224),'classNameProp':'sourceClassName','rowClassName':'text-center'}],'rows':this['_content'][_0x31f616(0x11f)]((_0x293400,_0x1db39e)=>{const _0x14f138=_0x31f616;return this[_0x14f138(0x136)][_0x14f138(0x1e9)][_0x14f138(0x255)](_0x293400),_0x293400[_0x14f138(0x122)]=_0x293400[_0x14f138(0x1f8)]||'â€”',{'name':_0x293400[_0x14f138(0x211)],'type':_0x293400['_pTypes'][_0x14f138(0x258)][_0x14f138(0x1c6)](),'cr':_0x293400[_0x14f138(0x122)],'source':_0x293400[_0x14f138(0x17d)],'sourceShort':Parser['sourceJsonToAbv'](_0x293400['source']),'sourceLong':Parser['sourceJsonToFull'](_0x293400[_0x14f138(0x17d)]),'sourceClassName':Parser[_0x14f138(0x20e)](_0x293400[_0x14f138(0x17d)]),'ix':_0x1db39e};})};}[_0x14efab(0x116)](){const _0x1c16f=_0x14efab;return{'fnGetName':_0x8e61c1=>_0x8e61c1[_0x1c16f(0x211)],'fnGetValues':_0x383137=>({'source':_0x383137[_0x1c16f(0x17d)],'type':_0x383137[_0x1c16f(0x21e)][_0x1c16f(0x258)],'cr':_0x383137[_0x1c16f(0x122)],'group':_0x383137[_0x1c16f(0x227)]||'','alias':(_0x383137[_0x1c16f(0x178)]||[])['map'](_0x20d3a8=>'\x22'+_0x20d3a8+'\x22')[_0x1c16f(0x260)](','),'hash':UrlUtil['URL_TO_HASH_BUILDER'][this[_0x1c16f(0x209)]](_0x383137)}),'fnGetData':UtilList2[_0x1c16f(0x1ec)],'fnBindListeners':_0x5379f1=>this[_0x1c16f(0x18f)]?UtilList2[_0x1c16f(0x154)](this[_0x1c16f(0x126)],_0x5379f1):UtilList2[_0x1c16f(0x23b)](this['_list'],_0x5379f1)};}['_activateListeners_absorbListItems'](){const _0x56f270=_0x14efab;this[_0x56f270(0x126)][_0x56f270(0x192)](this[_0x56f270(0x25c)],this[_0x56f270(0x116)]());}[_0x14efab(0x236)](){const _0xf9cc0c=_0x14efab;return{...super['getFolderPathMeta'](),'cr':{'label':'Challenge\x20Rating','getter':_0x47aab0=>this[_0xf9cc0c(0x1e9)][_0xf9cc0c(0x162)](_0x47aab0)},'type':{'label':_0xf9cc0c(0x15f),'getter':_0x3ee03f=>this[_0xf9cc0c(0x1e9)]['_getFolderType'](_0x3ee03f)},'typeTags':{'label':_0xf9cc0c(0x1ff),'getter':_0x582a4d=>this[_0xf9cc0c(0x1e9)][_0xf9cc0c(0x15e)](_0x582a4d)}};}static[_0x14efab(0x162)](_0x40bcd4){const _0x5ef21f=_0x14efab;return _0x40bcd4['cr']?_0x40bcd4['cr']['cr']||_0x40bcd4['cr']:_0x5ef21f(0x121);}static[_0x14efab(0x1a6)](_0x34bda6){const _0x10bd36=_0x14efab;return Parser[_0x10bd36(0x1fc)](_0x34bda6[_0x10bd36(0x18a)])['type'][_0x10bd36(0x24e)]();}static[_0x14efab(0x15e)](_0x2b3fa8){const _0x396233=_0x14efab;return Parser['monTypeToFullObj'](_0x2b3fa8[_0x396233(0x18a)])[_0x396233(0x258)]['uppercaseFirst']();}[_0x14efab(0x251)](_0x1176ae){if(!this['_isUseMods'])return _0x1176ae;return new Promise(_0x3d7c56=>{const _0x4cd883=_0x5416,_0x14c232=new ImportListCreature['ScaleRename'](_0x1176ae,_0x3d7c56,{'titleSearch':this[_0x4cd883(0x193)]});_0x14c232[_0x4cd883(0x165)](!![]);});}async[_0x14efab(0x15d)](_0x1b3ba7,_0x52474d,_0x2f295f){const _0x238724=_0x14efab,_0x454d7a={},_0x967401=await Renderer['utils'][_0x238724(0x1ea)]({'entity':_0x52474d,'pFnPostProcess':Renderer[_0x238724(0x153)][_0x238724(0x1da)][_0x238724(0x1a0)](null,_0x52474d),'fluffBaseUrl':_0x238724(0x19c),'fluffProp':_0x238724(0x17e)}),_0x227ae7=new ImportListCreature[(_0x238724(0x1ae))]({'actor':_0x1b3ba7,'mon':_0x52474d,'fluff':_0x967401});await this[_0x238724(0x20c)](_0x52474d,_0x454d7a,_0x227ae7['fluff'],{'isUseTokenImageAsPortrait':Config['get']('importCreature',_0x238724(0x152))}),_0x454d7a[_0x238724(0x219)]={};if(!this[_0x238724(0x259)]&&!_0x2f295f[_0x238724(0x1d9)]&&!this[_0x238724(0x206)]){const _0x375632=await this[_0x238724(0x10f)](_0x52474d);if(_0x375632)_0x454d7a['folder']=_0x375632;}return _0x454d7a[_0x238724(0x19a)]={'default':Config[_0x238724(0x24a)](_0x238724(0x223),_0x238724(0x1fb))},this[_0x238724(0x174)](_0x52474d,_0x454d7a['data'],_0x227ae7),await this[_0x238724(0x114)](_0x52474d,_0x454d7a,_0x227ae7),this[_0x238724(0x1e5)](_0x52474d,_0x454d7a[_0x238724(0x219)],_0x227ae7),this['_pImportEntry_fillData_Skills'](_0x52474d,_0x454d7a[_0x238724(0x219)],_0x227ae7),this[_0x238724(0x1a2)](_0x52474d,_0x454d7a[_0x238724(0x219)],_0x227ae7),this[_0x238724(0x215)](_0x52474d,_0x454d7a[_0x238724(0x219)],_0x227ae7),this['_pImportEntry_fillData_Spells'](_0x52474d,_0x454d7a[_0x238724(0x219)],_0x227ae7),this[_0x238724(0x24c)](_0x52474d,_0x454d7a[_0x238724(0x219)],_0x227ae7),await this['_pImportEntry_pFillToken'](_0x52474d,_0x454d7a,'importCreature'),{'dataBuilderOpts':_0x227ae7,'actorData':_0x454d7a};}[_0x14efab(0x23a)](_0x305ab0){const _0x1a59f0=_0x14efab,_0x5a4989=[DataConverter['getNameWithSourcePart'](_0x305ab0)],_0x235dc0=Config[_0x1a59f0(0x24a)](_0x1a59f0(0x223),_0x1a59f0(0x155));return Object['entries'](_0x235dc0)[_0x1a59f0(0x235)](([,_0x5c0ed2])=>_0x5c0ed2)[_0x1a59f0(0x151)](([_0x248ea5])=>{const _0x5cd661=_0x1a59f0;switch(Number(_0x248ea5)){case ConfigConsts['C_CREATURE_NAMETAGS_CR']:_0x5a4989[_0x5cd661(0x149)]('['+this[_0x5cd661(0x1e9)]['_getFolderCr'](_0x305ab0)+']');break;case ConfigConsts[_0x5cd661(0x23e)]:_0x5a4989[_0x5cd661(0x149)]('['+this[_0x5cd661(0x1e9)][_0x5cd661(0x1a6)](_0x305ab0)+']');break;case ConfigConsts[_0x5cd661(0x21a)]:_0x5a4989['push']('['+this['constructor']['_getFolderTypeWithTags'](_0x305ab0)+']');break;}}),_0x5a4989[_0x1a59f0(0x260)]('\x20');}async[_0x14efab(0x114)](_0x249fdf,_0x439365,_0x320e9c){const _0x32fece=_0x14efab,_0x4ec07f=_0x439365[_0x32fece(0x219)],_0x112d42={};let _0x217127=0xa;if(_0x249fdf['ac']&&_0x249fdf['ac'][_0x32fece(0x15c)]){const _0x69e3d=_0x249fdf['ac'][0x0];if(typeof _0x69e3d===_0x32fece(0x159))_0x217127=_0x69e3d;else{if(typeof _0x69e3d['ac']===_0x32fece(0x159))_0x217127=_0x69e3d['ac'];}_0x217127=await this[_0x32fece(0x1a7)](_0x249fdf,_0x439365,_0x320e9c,_0x217127,_0x69e3d);}_0x112d42['ac']={'min':0x0,'value':_0x217127};let _0x81ab42=0x0,_0x284fac='';if(_0x249fdf['hp']){if(_0x249fdf['hp'][_0x32fece(0x124)])_0x81ab42=_0x249fdf['hp'][_0x32fece(0x124)];if(_0x249fdf['hp'][_0x32fece(0x1f4)])_0x284fac=_0x249fdf['hp'][_0x32fece(0x1f4)];}_0x112d42['hp']={'value':_0x81ab42,'min':0x0,'max':_0x81ab42,'temp':0x0,'tempmax':0x0,'formula':_0x284fac},_0x112d42['init']={'value':0x0,'mod':0x0,'bonus':0x0,'total':Parser[_0x32fece(0x1d7)](_0x249fdf[_0x32fece(0x10d)]),'prof':0x0},_0x112d42['prof']=_0x320e9c['pb'],_0x112d42[_0x32fece(0x1ba)]=DataConverter[_0x32fece(0x10e)](_0x249fdf[_0x32fece(0x189)]),_0x112d42[_0x32fece(0x1b7)]=_0x320e9c['spellAbility'],_0x112d42[_0x32fece(0x158)]=_0x320e9c[_0x32fece(0x12e)],_0x112d42[_0x32fece(0x12d)]={'darkvision':0x0,'blindsight':0x0,'tremorsense':0x0,'truesight':0x0,'units':'ft','special':''},_0x112d42['senses'][_0x32fece(0x14e)]=(_0x249fdf['senses']||[])[_0x32fece(0x235)](_0x3f6614=>{const _0x2f34ce=_0x32fece;_0x3f6614=_0x3f6614['replace'](Parser[_0x2f34ce(0x1aa)],'');const _0x33d730=/(blindsight|darkvision|tremorsense|truesight)\s*(\d+)/i[_0x2f34ce(0x175)](_0x3f6614);if(!_0x33d730)return!![];const _0x573829=Number(_0x33d730[0x2]);switch(_0x33d730[0x1]){case _0x2f34ce(0x1bf):_0x112d42[_0x2f34ce(0x12d)]['darkvision']=_0x573829;break;case _0x2f34ce(0x134):_0x112d42['senses'][_0x2f34ce(0x134)]=_0x573829;break;case'tremorsense':_0x112d42[_0x2f34ce(0x12d)][_0x2f34ce(0x1e2)]=_0x573829;break;case'truesight':_0x112d42[_0x2f34ce(0x12d)][_0x2f34ce(0x25d)]=_0x573829;break;}return![];})[_0x32fece(0x260)](',\x20'),_0x4ec07f[_0x32fece(0x254)]=_0x112d42;}async[_0x14efab(0x1a7)](_0x37e8c6,_0x2be402,_0xddbd82,_0x56529f,_0x28822b){const _0x548465=_0x14efab;if(!_0x28822b[_0x548465(0x1be)])return _0x56529f;if(this['_pack'])return _0x56529f;const _0xef1837=this[_0x548465(0x1e9)]['_getItemHashesFromAcItem'](_0x28822b);if(!_0xef1837[_0x548465(0x15c)])return _0x56529f;const _0x2005d4=await this['_pImportEntry_pFillData_Attributes_Ac_getAcFromItemEffects'](_0x37e8c6,_0xef1837);_0x56529f!==_0x2005d4&&_0xddbd82[_0x548465(0x1db)]['push']({'label':_0x548465(0x1d5),'icon':'modules/'+SharedConsts[_0x548465(0x1a1)]+_0x548465(0x172),'changes':[{'key':_0x548465(0x1c9),'value':_0x56529f-_0x2005d4,'mode':CONST[_0x548465(0x170)][_0x548465(0x179)],'priority':UtilActiveEffects[_0x548465(0x218)]}],'disabled':![],'duration':{'startTime':null,'seconds':null,'rounds':null,'turns':null,'startRound':null,'startTurn':null},'origin':null,'tint':'','transfer':![],'flags':{}});if(!Config[_0x548465(0x24a)](_0x548465(0x1dc),_0x548465(0x186)))return _0x2005d4;return 0xa+Parser[_0x548465(0x1d7)](_0x37e8c6['dex']);}async['_pImportEntry_pFillData_Attributes_Ac_getAcFromItemEffects'](_0x2fceb0,_0x7f6279){const _0x4585a8=_0x14efab;let _0x4b115d=0xa,_0x4ff5fc=0x0,_0x176ed4=0x0;for(const _0x2a8d5e of _0x7f6279){const _0x3f7b56=await Renderer[_0x4585a8(0x111)][_0x4585a8(0x13f)](UrlUtil[_0x4585a8(0x17b)],_0x2a8d5e);if(!_0x3f7b56)continue;let _0x5c92c5=Number(_0x3f7b56[_0x4585a8(0x20d)]||0x0);if(isNaN(_0x5c92c5))_0x5c92c5=0x0;switch(_0x3f7b56[_0x4585a8(0x262)]||_0x3f7b56[_0x4585a8(0x18a)]){case'HA':{_0x4b115d=Math[_0x4585a8(0x208)](_0x4b115d,(_0x3f7b56['ac']||0xa)+_0x5c92c5);break;}case'MA':{const _0x2d13f9=_0x3f7b56['dexterityMax']===null?Number['MAX_SAFE_INTEGER']:_0x3f7b56[_0x4585a8(0x123)]!=null?_0x3f7b56['dexterityMax']:0x2;_0x4b115d=Math['max'](_0x4b115d,(_0x3f7b56['ac']||0xa)+Math[_0x4585a8(0x19d)](_0x2d13f9,Parser['getAbilityModNumber'](_0x2fceb0[_0x4585a8(0x10d)]||0xa))+_0x5c92c5);break;}case'LA':{_0x4b115d=Math[_0x4585a8(0x208)](_0x4b115d,(_0x3f7b56['ac']||0xa)+Parser[_0x4585a8(0x1d7)](_0x2fceb0[_0x4585a8(0x10d)]||0xa)+_0x5c92c5);break;}case'S':{_0x4ff5fc=Math['max'](_0x4ff5fc,0x2+_0x5c92c5);break;}default:{if(Config[_0x4585a8(0x24a)](_0x4585a8(0x1dc),_0x4585a8(0x186)))_0x176ed4+=_0x5c92c5;}}}return _0x4b115d+_0x4ff5fc+_0x176ed4;}[_0x14efab(0x1e5)](_0x412900,_0x374ec0,_0x151978){const _0x557caf=_0x14efab,_0x434f25={};_0x434f25[_0x557caf(0x1bb)]=_0x412900['alignment']?Parser[_0x557caf(0x21f)](_0x412900[_0x557caf(0x1bb)])['toLowerCase']():'',_0x434f25[_0x557caf(0x245)]={'value':this[_0x557caf(0x1d4)](_0x151978[_0x557caf(0x1ce)],{'isImportText':Config[_0x557caf(0x24a)](_0x557caf(0x223),_0x557caf(0x1ef)),'isImportImages':Config[_0x557caf(0x24a)]('importCreature',_0x557caf(0x232))})};_0x151978[_0x557caf(0x246)]||_0x151978[_0x557caf(0x118)]?_0x434f25[_0x557caf(0x13d)]={'level':_0x151978['spellLevel'],'name':_0x151978[_0x557caf(0x118)]}:_0x434f25[_0x557caf(0x13d)]={};_0x434f25[_0x557caf(0x246)]=_0x151978[_0x557caf(0x246)],_0x434f25['race']='',_0x434f25[_0x557caf(0x18a)]=Parser[_0x557caf(0x1fc)](_0x412900[_0x557caf(0x18a)])['asText'],_0x434f25[_0x557caf(0x214)]=_0x412900[_0x557caf(0x214)]?_0x412900['environment'][_0x557caf(0x138)](SortUtil['ascSortLower'])[_0x557caf(0x11f)](_0xae0e50=>_0xae0e50[_0x557caf(0x24e)]())['join'](',\x20'):'';const _0x18c42a=Parser[_0x557caf(0x1d8)](_0x412900['cr']);_0x434f25['cr']=_0x18c42a>=VeCt[_0x557caf(0x145)]?0x0:_0x18c42a,_0x434f25['xp']={'value':_0x412900['cr']?Parser[_0x557caf(0x1b3)](_0x412900['cr'])||0x0:0x0},_0x434f25[_0x557caf(0x17d)]=DataConverter[_0x557caf(0x20a)](_0x412900),_0x374ec0[_0x557caf(0x21c)]=_0x434f25;}[_0x14efab(0x11a)](_0x1f0caf,_0x3eca84,_0x2f5e7a){const _0x811e3b=_0x14efab;_0x3eca84[_0x811e3b(0x241)]=DataConverterCreature['getDataSkills'](_0x1f0caf,_0x3eca84,_0x2f5e7a);}[_0x14efab(0x1a2)](_0x24c427,_0x143d1d,_0x10f7eb){const _0x15923d=_0x14efab,_0x3a8484={};_0x3a8484[_0x15923d(0x13a)]=UtilActors[_0x15923d(0x12b)][_0x24c427[_0x15923d(0x13a)]]||_0x15923d(0x23c);const _0x1c1242=new Set();let _0x196b08=[];_0x24c427[_0x15923d(0x1e7)]&&_0x24c427[_0x15923d(0x1e7)][_0x15923d(0x151)](_0x209b7b=>{const _0x152977=_0x15923d,_0x37ccdf=UtilActors['VALID_LANGUAGES'][_0x209b7b[_0x152977(0x142)]()[_0x152977(0x1ac)]()];if(_0x37ccdf)_0x1c1242[_0x152977(0x180)](_0x37ccdf);else _0x1c1242[_0x152977(0x180)](_0x152977(0x112)),_0x196b08[_0x152977(0x149)](_0x209b7b);}),_0x3a8484['languages']={'value':[..._0x1c1242],'custom':_0x196b08[_0x15923d(0x235)](Boolean)[_0x15923d(0x260)](';\x20')},this['_pImportEntry_fillConditionsDamage'](_0x24c427,_0x3a8484),_0x143d1d[_0x15923d(0x250)]=_0x3a8484;}[_0x14efab(0x215)](_0x478070,_0x5cbadb,_0x45ac33){const _0x46f6b7=_0x14efab;_0x5cbadb[_0x46f6b7(0x199)]={'pp':0x0,'gp':0x0,'ep':0x0,'sp':0x0,'cp':0x0};}[_0x14efab(0x21d)](_0x3e589d,_0x1ee7c4,_0x2db0b2){_0x1ee7c4['spells']=DataConverterCreature['getDataSpells'](_0x3e589d,_0x1ee7c4,_0x2db0b2);}[_0x14efab(0x24c)](_0x147c9a,_0x1e69b8,_0x144985){const _0x195117=_0x14efab,_0x55ab4c={};let _0x409256=0x0;if(_0x147c9a[_0x195117(0x13c)])_0x409256=_0x147c9a['legendaryActions']||0x3;_0x55ab4c['legact']={'value':_0x409256,'max':_0x409256};let _0x521d05=0x0;if(_0x147c9a['trait']){const _0x2fa8a7=_0x147c9a[_0x195117(0x1cd)][_0x195117(0x25a)](_0x586e7b=>/legendary resistance/gi[_0x195117(0x1e1)](_0x586e7b[_0x195117(0x211)]||''));if(_0x2fa8a7){const _0x469b72=/\((\d+)\/Day\)/i['exec'](_0x2fa8a7[_0x195117(0x211)]);if(_0x469b72)_0x521d05=Number(_0x469b72[0x1]);}}_0x55ab4c[_0x195117(0x166)]={'value':_0x521d05,'max':_0x521d05},_0x55ab4c[_0x195117(0x228)]={'value':!!(_0x144985['legendaryMeta']&&_0x144985[_0x195117(0x169)]['lairActions']),'initiative':0x14},_0x1e69b8[_0x195117(0x16d)]=_0x55ab4c;}async[_0x14efab(0x1d1)](_0x259227,_0x2097a8,_0x5d5479,_0x3a7a8b){const _0x5c430e=_0x14efab;await this[_0x5c430e(0x16a)](_0x259227,_0x2097a8,_0x5d5479),await this[_0x5c430e(0x14c)](_0x259227,_0x2097a8,_0x5d5479,{'prop':_0x5c430e(0x1cd),'fnPreProcess':_0x19d4b4=>{const _0x42464c=_0x5c430e;if(!/legendary resistance/gi['test'](_0x19d4b4[_0x42464c(0x211)]||''))return;_0x19d4b4[_0x42464c(0x1f2)]=!![];}},{'consumeType':_0x396edb=>_0x396edb['_plut_isLegendaryResistance']?'attribute':null,'consumeTarget':_0x14a1e1=>_0x14a1e1[_0x5c430e(0x1f2)]?_0x5c430e(0x173):null,'consumeAmount':_0x3aa27a=>_0x3aa27a[_0x5c430e(0x1f2)]?0x1:null}),await this[_0x5c430e(0x14c)](_0x259227,_0x2097a8,_0x5d5479,{'prop':_0x5c430e(0x1b1)},{'activationType':_0x5c430e(0x1b1),'activationCost':0x1}),await this[_0x5c430e(0x14c)](_0x259227,_0x2097a8,_0x5d5479,{'prop':_0x5c430e(0x1e6)},{'activationType':_0x5c430e(0x1e6),'activationCost':0x1}),await this[_0x5c430e(0x183)](_0x259227,_0x2097a8,_0x5d5479),await this[_0x5c430e(0x14c)](_0x259227,_0x2097a8,_0x5d5479,{'prop':_0x5c430e(0x13c),'fnPreProcess':_0x5f37d6=>{const _0x2dd1cc=_0x5c430e;_0x5f37d6[_0x2dd1cc(0x1b2)]=0x1,_0x5f37d6[_0x2dd1cc(0x211)]&&(_0x5f37d6[_0x2dd1cc(0x211)]=_0x5f37d6[_0x2dd1cc(0x211)][_0x2dd1cc(0x171)](/\(costs (\d+) actions?\)/i,(..._0x28a049)=>{const _0x1950ff=_0x2dd1cc;return _0x5f37d6[_0x1950ff(0x1b2)]=Number(_0x28a049[0x1]),'';})['trim']());}},{'activationType':_0x5c430e(0x13c),'activationCost':_0x46bf21=>_0x46bf21[_0x5c430e(0x1b2)],'consumeType':_0x5c430e(0x160),'consumeTarget':_0x5c430e(0x1ee),'consumeAmount':_0x21a81a=>_0x21a81a['_plut_legActions']}),await this['_pImportEntry_pFillItems_pLairActions'](_0x259227,_0x2097a8,_0x5d5479),await this[_0x5c430e(0x19b)](_0x259227,_0x2097a8,_0x5d5479),await this['_pImportEntry_pFillItems_pInventory'](_0x259227,_0x2097a8,_0x5d5479);const _0xe7b753=_0x3a7a8b[_0x5c430e(0x1d9)]||this['_pack']!=null;await this[_0x5c430e(0x18b)](_0x259227,_0x2097a8,_0xe7b753,_0x5d5479),await UtilActors[_0x5c430e(0x1d3)](_0x5d5479[_0x5c430e(0x24b)],_0x5d5479['items'],_0xe7b753);}[_0x14efab(0x182)](_0x269009,_0x459763,_0x594cec,_0x3c1ee0,_0x595481){const _0xb53318=_0x14efab;_0x459763[_0xb53318(0x144)][_0xb53318(0x149)](DataConverter[_0xb53318(0x185)](_0x3c1ee0,{..._0x595481,'mode':_0xb53318(0x1f0),'pb':_0x459763[_0xb53318(0x231)],'entity':_0x269009,'source':_0x269009[_0xb53318(0x17d)],'actor':{'data':_0x594cec}}));}async['_pImportEntry_pFillItems_pLegendaryHeader'](_0x92528e,_0x38f607,_0x5c72aa){const _0x72b54=_0x14efab;let _0x2ef366=0x0;if(_0x92528e[_0x72b54(0x13c)])_0x2ef366=_0x92528e['legendaryActions']||0x3;if(!_0x2ef366)return;const _0x40e8ee=_0x72b54(0x1b0)+Renderer[_0x72b54(0x153)][_0x72b54(0x115)](_0x92528e)+_0x72b54(0x133),_0xd61c84=await DataConverterCreature[_0x72b54(0x127)](_0x92528e,{'name':_0x72b54(0x261)},_0x5c72aa);_0x5c72aa[_0x72b54(0x144)]['push'](DataConverter['getItemActorPassive']({'name':_0x72b54(0x261)},{'fvttType':_0x72b54(0x190),'description':_0x40e8ee,'mode':'creature','pb':_0x5c72aa[_0x72b54(0x231)],'entity':_0x92528e,'source':_0x92528e[_0x72b54(0x17d)],'actor':{'data':_0x38f607},'img':_0xd61c84}));}async[_0x14efab(0x14c)](_0x491acc,_0x5940c3,_0x366605,_0x3247d9,_0xe517e){const _0x26811d=_0x14efab;_0xe517e=_0xe517e||{};if(!_0x491acc[_0x3247d9[_0x26811d(0x1f9)]])return;for(let _0x3e3aa1 of _0x491acc[_0x3247d9[_0x26811d(0x1f9)]]){_0x3247d9['fnPreProcess']&&(_0x3e3aa1=MiscUtil[_0x26811d(0x242)](_0x3e3aa1),_0x3247d9[_0x26811d(0x220)](_0x3e3aa1));const _0x599919={};Object[_0x26811d(0x117)](_0xe517e)[_0x26811d(0x151)](([_0x5465d3,_0x183421])=>{const _0x329cda=_0x26811d;if(typeof _0x183421==='function')_0x599919[_0x5465d3]=_0x183421(_0x3e3aa1);else _0x599919[_0x5465d3]=MiscUtil[_0x329cda(0x242)](_0x183421);});const _0x11a909=await DataConverterCreature[_0x26811d(0x127)](_0x491acc,_0x3e3aa1,_0x366605,{'isLegendary':_0x3247d9[_0x26811d(0x1f9)]===_0x26811d(0x13c)});this[_0x26811d(0x182)](_0x491acc,_0x366605,_0x5940c3,_0x3e3aa1,{..._0x599919,'fvttType':_0x26811d(0x190),'img':_0x11a909});}}static[_0x14efab(0x184)](_0x1ea5a2){const _0x49ae2f=_0x14efab,_0x206661=Renderer[_0x49ae2f(0x1c7)](_0x1ea5a2);let _0x11b461='Lair:\x20';const _0x3ba854=_0x206661['split']('\x20');for(const _0x449a99 of _0x3ba854){if(_0x11b461[_0x49ae2f(0x15c)]+_0x449a99[_0x49ae2f(0x15c)]<0x32)_0x11b461+=_0x449a99+'\x20';else break;}if(_0x206661[_0x49ae2f(0x15c)]>_0x11b461[_0x49ae2f(0x1ac)]()[_0x49ae2f(0x15c)])_0x11b461+='...';else _0x11b461=_0x11b461[_0x49ae2f(0x1ac)]();return _0x11b461;}async[_0x14efab(0x202)](_0x58f14c,_0x5a086e,_0x35533c){const _0x1fd6af=_0x14efab;if(!_0x35533c[_0x1fd6af(0x169)]?.[_0x1fd6af(0x161)])return;const _0x532dde=_0x35533c[_0x1fd6af(0x169)][_0x1fd6af(0x161)],_0x51a2d0=_0x532dde[_0x1fd6af(0x25a)](_0xb909d5=>_0xb909d5[_0x1fd6af(0x18a)]===_0x1fd6af(0x148));if(_0x51a2d0)for(let _0x89e51=0x0;_0x89e51<_0x51a2d0[_0x1fd6af(0x144)]['length'];++_0x89e51){const _0x5ae968=_0x51a2d0[_0x1fd6af(0x144)][_0x89e51];await this[_0x1fd6af(0x11d)](_0x58f14c,_0x5a086e,_0x35533c,_0x5ae968,_0x89e51);}else await this[_0x1fd6af(0x11d)](_0x58f14c,_0x5a086e,_0x35533c,_0x532dde);}async[_0x14efab(0x11d)](_0x5492cb,_0x21dd81,_0x563652,_0x1e5199,_0x5e6b90){const _0x56e825=_0x14efab;if(_0x1e5199 instanceof Array)typeof _0x1e5199[0x0]===_0x56e825(0x24d)?_0x1e5199={'type':_0x56e825(0x117),'name':this[_0x56e825(0x1e9)][_0x56e825(0x184)](_0x1e5199[0x0]),'entries':_0x1e5199}:_0x1e5199={'type':'entries','name':_0x56e825(0x22f)+(_0x5e6b90!=null?'\x20'+(_0x5e6b90+0x1):''),'entries':_0x1e5199};else{if(typeof _0x1e5199===_0x56e825(0x24d))_0x1e5199={'type':_0x56e825(0x117),'name':this[_0x56e825(0x1e9)][_0x56e825(0x184)](_0x1e5199),'entries':[_0x1e5199]};else throw new Error('Unhandled\x20lair\x20action\x20format!');}const _0x2f5586=JSON['stringify'](_0x1e5199),{saveAbility:_0x234887,saveScaling:_0x740f1f,saveDc:_0x4bf760}=this[_0x56e825(0x20f)](_0x5492cb,_0x563652[_0x56e825(0x231)],_0x2f5586),_0x191dbc=[];let _0x1cd55f='';if(typeof _0x1e5199[_0x56e825(0x117)][0x0]==='string'){const {damageTupleMetas:_0x3ea364}=DataConverter['getDamageTupleMetas'](_0x1e5199[_0x56e825(0x117)][0x0]),{damageParts:_0x555b3a,formula:_0x2ebe2c}=DataConverter[_0x56e825(0x234)](_0x3ea364);_0x191dbc[_0x56e825(0x149)](..._0x555b3a),_0x1cd55f=_0x2ebe2c;}const _0x19ee35=this[_0x56e825(0x1cc)](_0x191dbc),_0x3ca568=await DataConverterCreature[_0x56e825(0x1c0)](_0x5492cb,{'name':_0x56e825(0x187)},_0x563652);this[_0x56e825(0x182)](_0x5492cb,_0x563652,_0x21dd81,_0x1e5199,{'fvttType':'feat','activationType':_0x56e825(0x228),'activationCost':0x1,'img':_0x3ca568,'saveAbility':_0x234887,'saveDc':_0x4bf760,'saveScaling':_0x740f1f,'damageParts':_0x19ee35,'formula':_0x1cd55f});}async['_pImportEntry_pFillItems_pRegionalEffects'](_0x42cee7,_0x347fde,_0x5ed648){const _0x2f45fa=_0x14efab;if(!_0x5ed648[_0x2f45fa(0x169)]?.['regionalEffects'])return;const _0x1c1893={'type':'entries','name':'Regional\x20Effects','entries':MiscUtil['copy'](_0x5ed648[_0x2f45fa(0x169)]['regionalEffects'])},_0x2b767d=await DataConverterCreature[_0x2f45fa(0x1c0)](_0x42cee7,_0x1c1893,_0x5ed648);this[_0x2f45fa(0x182)](_0x42cee7,_0x5ed648,_0x347fde,_0x1c1893,{'fvttType':_0x2f45fa(0x190),'img':_0x2b767d});}async['_pImportEntry_pFillItems_pActions'](_0x27fbe7,_0xbfe536,_0x32e7f3){const _0x4b5b09=_0x14efab;if(!_0x27fbe7[_0x4b5b09(0x22d)])return;for(const _0x731cac of _0x27fbe7[_0x4b5b09(0x22d)]){const _0x5d2b57=this[_0x4b5b09(0x1e3)](_0x731cac,_0x32e7f3);for(const _0x5ef037 of _0x5d2b57){await this['_pImportEntry_pFillItems_pAction'](_0x27fbe7,_0xbfe536,_0x5ef037,_0x32e7f3);}}}[_0x14efab(0x1e3)](_0x2dd7dd,_0x58694a){const _0x4b682c=_0x14efab;if(!_0x2dd7dd[_0x4b682c(0x211)]||!_0x2dd7dd[_0x4b682c(0x117)])return[_0x2dd7dd];if(_0x2dd7dd[_0x4b682c(0x117)][_0x4b682c(0x15c)]===0x2&&typeof _0x2dd7dd['entries'][0x0]===_0x4b682c(0x24d)&&_0x2dd7dd['entries'][0x0][_0x4b682c(0x243)](_0x4b682c(0x11c))&&_0x2dd7dd[_0x4b682c(0x117)][0x1][_0x4b682c(0x18a)]===_0x4b682c(0x148)&&_0x2dd7dd[_0x4b682c(0x117)][0x1]['items']['every'](_0x34cc47=>_0x34cc47[_0x4b682c(0x211)]&&_0x34cc47[_0x4b682c(0x131)])){const _0x32fdec=[],_0x2c4405=CryptUtil['uid'](),_0x408293=_0x2dd7dd[_0x4b682c(0x117)][0x1][_0x4b682c(0x144)][_0x4b682c(0x11f)](_0x1a8870=>{const _0x1200fc=_0x4b682c,_0x1ca99d=_0x1a8870[_0x1200fc(0x211)][_0x1200fc(0x171)](/\.\s*$/,''),_0x4e72ea=_0x1200fc(0x157)+_0x1ca99d,_0x24ab1d=CryptUtil[_0x1200fc(0x135)]();return _0x58694a[_0x1200fc(0x1a8)][_0x1200fc(0x149)](async({actor:_0x2065a2,isTemp:_0x4325e0,isPack:_0x4509ee,pack:_0x4082a8})=>{const _0x3f0002=_0x1200fc;if(_0x4325e0)return;const _0x443de6=_0x2065a2[_0x3f0002(0x219)]['items'][_0x3f0002(0x25a)](_0x9cc3de=>_0x9cc3de[_0x3f0002(0x197)]?.[SharedConsts[_0x3f0002(0x22b)]]?.[_0x3f0002(0x1b9)]===_0x2c4405);if(!_0x443de6)return console[_0x3f0002(0x1d0)](...LGT,'Failed\x20to\x20find\x20parent\x20sheet\x20item\x20for\x20item\x20\x22'+_0x1a8870[_0x3f0002(0x211)]+'\x22');const _0x35b427=_0x2065a2[_0x3f0002(0x219)][_0x3f0002(0x144)][_0x3f0002(0x25a)](_0x1a9db0=>_0x1a9db0[_0x3f0002(0x197)]?.[SharedConsts[_0x3f0002(0x22b)]]?.[_0x3f0002(0x1b9)]===_0x24ab1d);if(!_0x35b427)return console[_0x3f0002(0x1d0)](...LGT,_0x3f0002(0x239)+_0x1a8870[_0x3f0002(0x211)]+'\x22');if(_0x4509ee){MiscUtil[_0x3f0002(0x143)](_0x35b427,_0x3f0002(0x219),'consume',_0x3f0002(0x24f),_0x443de6[_0x3f0002(0x1b4)]||_0x443de6['id']);const _0x542093=MiscUtil['copy'](_0x2065a2['data']);await _0x4082a8[_0x3f0002(0x201)](_0x542093);}else{const _0x40ce76={'_id':_0x35b427[_0x3f0002(0x1b4)],'data':{'consume':{'target':_0x443de6[_0x3f0002(0x1b4)]||_0x443de6['id']}}};await _0x2065a2[_0x3f0002(0x17f)](_0x3f0002(0x1e0),_0x40ce76);}}),{'name':_0x4e72ea,'_plut_cleanName':_0x1ca99d,'entries':[_0x1a8870[_0x1200fc(0x131)]],'_foundryData':{'consume.type':_0x1200fc(0x17a),'consume.amount':0x1},'_foundryFlags':{[SharedConsts[_0x1200fc(0x22b)]]:{'_tmpItemId':_0x24ab1d}}};});return _0x32fdec[_0x4b682c(0x149)]({'name':_0x2dd7dd['name'],'entries':[_0x2dd7dd['entries'][0x0][_0x4b682c(0x1ac)]()[_0x4b682c(0x171)](/[.,!?:]$/,'')+':\x20'+_0x408293[_0x4b682c(0x11f)](_0x5d2db0=>_0x5d2db0[_0x4b682c(0x1ab)])[_0x4b682c(0x1a5)](',\x20',_0x4b682c(0x14b))],'_foundryFlags':{[SharedConsts[_0x4b682c(0x22b)]]:{'_tmpItemId':_0x2c4405}}}),_0x408293['forEach'](_0x5f7567=>delete _0x5f7567['_plut_cleanName']),_0x32fdec['push'](..._0x408293),_0x32fdec;}if(/^eye ray/gi[_0x4b682c(0x1e1)](_0x2dd7dd[_0x4b682c(0x211)])&&_0x2dd7dd[_0x4b682c(0x117)][_0x4b682c(0x25a)](_0x3e20d9=>_0x3e20d9[_0x4b682c(0x18a)]===_0x4b682c(0x148)&&(_0x3e20d9[_0x4b682c(0x144)]||[])['every'](_0x5f4a29=>_0x5f4a29[_0x4b682c(0x18a)]===_0x4b682c(0x1cf)))){const _0x18850f=[],_0x38ec2c=MiscUtil[_0x4b682c(0x242)](_0x2dd7dd),_0x433b5a=_0x2dd7dd[_0x4b682c(0x117)][_0x4b682c(0x213)](_0x4d0bcb=>_0x4d0bcb[_0x4b682c(0x18a)]==='list'&&(_0x4d0bcb['items']||[])[_0x4b682c(0x1f5)](_0x5b342b=>_0x5b342b[_0x4b682c(0x18a)]===_0x4b682c(0x1cf))),_0xcfd779=_0x2dd7dd[_0x4b682c(0x117)][_0x433b5a];return _0x38ec2c['entries']['splice'](_0x433b5a,0x1),_0x18850f['push'](_0x38ec2c),_0xcfd779[_0x4b682c(0x144)][_0x4b682c(0x151)](_0x4e1b4e=>{const _0x154e8c=_0x4b682c,_0x4bede6={..._0x4e1b4e,'type':'entries','name':_0x154e8c(0x196)+_0x4e1b4e[_0x154e8c(0x211)][_0x154e8c(0x171)](/[.,!:?]\\s*$/,'')};_0x4bede6[_0x154e8c(0x131)]&&(_0x4bede6['entries']=[_0x4bede6[_0x154e8c(0x131)]],delete _0x4bede6[_0x154e8c(0x131)]),delete _0x4bede6[_0x154e8c(0x191)],_0x18850f[_0x154e8c(0x149)](_0x4bede6);}),_0x18850f;}return[_0x2dd7dd];}async[_0x14efab(0x1a9)](_0xb08883,_0xe43ffa,_0x1f737d,_0x1cfa9c){const _0x33f776=_0x14efab,_0x2769d3=DataConverter[_0x33f776(0x23d)](_0x1f737d),_0x3c31c3=_0x1f737d[_0x33f776(0x117)]?JSON['stringify'](_0x1f737d[_0x33f776(0x117)]):null,{damageTuples:_0x464195,formula:_0x14d415,offensiveAbility:_0xc0796d,isAttack:_0x287920,rangeShort:_0x203e46,rangeLong:_0x866ec4,actionType:_0xed1722,isProficient:_0x11d5b4,attackBonus:_0x4e74cb,_foundryData:_0x31dce3,foundryData:_0x251ab1,_foundryFlags:_0xb989b4,foundryFlags:_0xcdc08e,img:_0x5ee196}=await DataConverterCreature[_0x33f776(0x130)](_0xb08883,_0x1f737d,_0x1cfa9c),_0x1f9cdb=[];_0x1f9cdb[_0x33f776(0x149)](...this[_0x33f776(0x1cc)](_0x464195,_0xb08883[_0xc0796d]));const {saveAbility:_0x570e99,saveScaling:_0x1d009f,saveDc:_0xfea40e}=this[_0x33f776(0x20f)](_0xb08883,_0x1cfa9c[_0x33f776(0x231)],_0x3c31c3);_0x287920?await this['_pFillWeaponItem'](_0xb08883,_0xe43ffa,_0x1f737d,_0x1cfa9c,{'offensiveAbility':_0xc0796d,'damageParts':_0x1f9cdb,'formula':_0x14d415,'rangeShort':_0x203e46,'rangeLong':_0x866ec4,'actionType':_0xed1722,'isProficient':_0x11d5b4,'description':_0x2769d3,'saveAbility':_0x570e99,'saveDc':_0xfea40e,'saveScaling':_0x1d009f,'attackBonus':_0x4e74cb,'_foundryData':_0x31dce3,'foundryData':_0x251ab1,'_foundryFlags':_0xb989b4,'foundryFlags':_0xcdc08e,'img':_0x5ee196,'isMagical':(_0xb08883['traitTags']||[])[_0x33f776(0x243)]('Magic\x20Weapons')}):this[_0x33f776(0x182)](_0xb08883,_0x1cfa9c,_0xe43ffa,_0x1f737d,{'fvttType':'feat','activationType':_0x33f776(0x22d),'activationCost':0x1,'description':_0x2769d3,'saveAbility':_0x570e99,'saveDc':_0xfea40e,'saveScaling':_0x1d009f,'damageParts':_0x1f9cdb,'formula':_0x14d415,'attackBonus':_0x4e74cb,'_foundryData':_0x31dce3,'foundryData':_0x251ab1,'_foundryFlags':_0xb989b4,'foundryFlags':_0xcdc08e,'img':_0x5ee196});}[_0x14efab(0x20f)](_0xf66cfb,_0x4da9ec,_0x4346f7){const _0x21e993=_0x14efab;let {saveAbility:_0x239535,saveScaling:_0x41e384,saveDc:_0x42b761,isFoundParse:_0x122b57}=super[_0x21e993(0x20f)](_0x4346f7);if(_0x122b57){if(_0x4da9ec){const _0x180947=_0x42b761-_0x4da9ec-0x8;for(const _0x48a61c of[_0x21e993(0x147),'wis',_0x21e993(0x1c1),_0x21e993(0x21b),_0x21e993(0x10d),_0x21e993(0x212)]){const _0x3f4938=Parser[_0x21e993(0x1d7)](_0xf66cfb[_0x48a61c]);if(_0x3f4938===_0x180947){_0x41e384=_0x48a61c;break;}}}}return{'saveAbility':_0x239535,'saveScaling':_0x41e384,'saveDc':_0x42b761};}[_0x14efab(0x1cc)](_0x4ed983,_0x271181){const _0x4f68eb=_0x14efab;if(!_0x4ed983['length'])return[];return _0x4ed983=MiscUtil[_0x4f68eb(0x242)](_0x4ed983),_0x271181&&_0x4ed983[_0x4f68eb(0x151)](_0x58b6ee=>{const _0x1b04a2=_0x4f68eb,_0x4f8326=Parser[_0x1b04a2(0x1d7)](_0x271181),_0x3fc075=/(\d+d\d+\s*)([-+]\s*\d+)([ -+].*)?$/['exec'](_0x58b6ee[0x0]);if(!_0x3fc075)return;const _0x47d260=Number(_0x3fc075[0x2][_0x1b04a2(0x171)](/\s*/g,''));if(_0x47d260===_0x4f8326)_0x58b6ee[0x0]=_0x3fc075[0x1]+_0x1b04a2(0x1f6)+(_0x3fc075[0x3]||'');}),_0x4ed983[_0x4f68eb(0x235)](_0x77529c=>_0x77529c[_0x4f68eb(0x15c)]);}static[_0x14efab(0x1af)](_0x29d09c){const _0x34ad76=_0x14efab,_0xb498=[];if(!_0x29d09c[_0x34ad76(0x1be)]||!_0x29d09c[_0x34ad76(0x1be)][_0x34ad76(0x15c)])return _0xb498;return _0x29d09c['from'][_0x34ad76(0x151)](_0x215320=>{const _0x2dbb56=_0x34ad76,_0x3551bc=this[_0x2dbb56(0x1dd)](_0x215320);_0x3551bc[_0x2dbb56(0x151)](_0xc5db83=>{const _0x10cee1=_0x2dbb56;if(!_0xb498[_0x10cee1(0x243)](_0xc5db83))_0xb498['push'](_0xc5db83);});}),_0xb498;}static[_0x14efab(0x1dd)](_0x53669b){const _0x310276=_0x14efab,_0x3ec523=[];return _0x53669b[_0x310276(0x171)](/{@item ([^}]+)}/gi,(..._0x40d717)=>{const _0x3affcf=_0x310276,[_0x5ee320,_0x5107e8]=_0x40d717[0x1][_0x3affcf(0x1ac)]()[_0x3affcf(0x142)]()[_0x3affcf(0x10b)]('|'),_0x20a1dd=UrlUtil[_0x3affcf(0x25e)][UrlUtil[_0x3affcf(0x17b)]]({'name':_0x5ee320,'source':_0x5107e8||SRC_DMG});if(!_0x3ec523['includes'](_0x20a1dd))_0x3ec523[_0x3affcf(0x149)](_0x20a1dd);}),[..._0x3ec523];}async[_0x14efab(0x13e)](_0x4e898b,_0x45acf6,_0xf0a84){const _0x342cb6=_0x14efab,_0x1f4339=new Set(),_0x39fd02=new Set();(_0x4e898b['ac']||[])[_0x342cb6(0x151)]((_0x4453a6,_0x431924)=>{const _0x47dd5f=_0x342cb6,_0x4fb01e=this[_0x47dd5f(0x1e9)][_0x47dd5f(0x1af)](_0x4453a6);_0x4fb01e[_0x47dd5f(0x151)](_0x5ba100=>_0x1f4339[_0x47dd5f(0x180)](_0x5ba100));if(_0x431924===0x0)_0x4fb01e[_0x47dd5f(0x151)](_0x1567f1=>_0x39fd02[_0x47dd5f(0x180)](_0x1567f1));});for(const _0xdaaf14 of _0x1f4339){const _0x157c35=await Renderer[_0x342cb6(0x111)][_0x342cb6(0x13f)](UrlUtil[_0x342cb6(0x17b)],_0xdaaf14);if(!_0x157c35)continue;await this[_0x342cb6(0x20b)](_0x4e898b,_0x45acf6,_0x157c35,_0xf0a84,{'isEquipped':_0x39fd02[_0x342cb6(0x1c3)](_0xdaaf14)});}const _0x5855b0=(_0x4e898b[_0x342cb6(0x1cd)]||[])[_0x342cb6(0x235)](_0x36050f=>_0x36050f[_0x342cb6(0x211)]&&_0x36050f['entries']&&/equipment/i['test'](_0x36050f[_0x342cb6(0x211)][_0x342cb6(0x1ac)]()))['map'](_0x1a0612=>this[_0x342cb6(0x1e9)][_0x342cb6(0x1dd)](JSON[_0x342cb6(0x12a)](_0x1a0612[_0x342cb6(0x117)])))['flat']()[_0x342cb6(0x235)](_0x570300=>!_0x1f4339['has'](_0x570300));for(const _0x354fce of _0x5855b0){const _0x5f2c76=await Renderer['hover'][_0x342cb6(0x13f)](UrlUtil['PG_ITEMS'],_0x354fce);if(!_0x5f2c76)continue;if(_0x5f2c76[_0x342cb6(0x18a)]==='S'||_0x5f2c76[_0x342cb6(0x18a)]==='R'||_0x5f2c76['weaponCategory'])continue;await this[_0x342cb6(0x20b)](_0x4e898b,_0x45acf6,_0x5f2c76,_0xf0a84,{'isEquipped':!![]});}}async[_0x14efab(0x20b)](_0x3abdf0,_0x4d6695,_0x46364e,_0x38f2b3,_0x3d7dbb){const _0xbb03bd=_0x14efab;_0x3d7dbb=_0x3d7dbb||{};const _0x28840f=await Renderer['item']['pGetFluff'](_0x46364e),_0x4818e6=await DataConverterItem[_0xbb03bd(0x137)](_0x46364e,{'isActorItem':!![],'fluff':_0x28840f,'size':_0x3abdf0['size'],'isEquipped':_0x3d7dbb[_0xbb03bd(0x1fd)],'dexMod':Parser[_0xbb03bd(0x1d7)](_0x3abdf0[_0xbb03bd(0x10d)])});_0x38f2b3['items'][_0xbb03bd(0x149)](_0x4818e6);}async[_0x14efab(0x18b)](_0x5e96f3,_0x4b2920,_0x3659bc,_0x44cf5b){const _0x32a257=_0x14efab;if(!_0x5e96f3[_0x32a257(0x1b7)])return;const _0x29d450={},_0x5a0803=_0x45ab3d=>{const _0x589db6=_0x32a257;Object[_0x589db6(0x117)](_0x45ab3d)['forEach'](([_0x5abb49,_0x28fa70])=>{_0x29d450[_0x5abb49]=_0x29d450[_0x5abb49]||_0x28fa70;});},_0x2b7743=!![],_0x7b5c5f=[];for(const _0x489fb8 of _0x5e96f3[_0x32a257(0x1b7)]){const _0x5cf2f0=MiscUtil['copy'](_0x489fb8);if(_0x5cf2f0['spells']){const _0x341ea1=Object[_0x32a257(0x1c5)](_0x5cf2f0[_0x32a257(0x23f)]);for(const _0x45c1a8 of _0x341ea1){const _0x2c74bb=_0x5cf2f0[_0x32a257(0x23f)][_0x45c1a8],_0x19e4ee=_0x2c74bb[_0x32a257(0x1f3)]!=null?_0x32a257(0x12f):'prepared',_0x4797bf=await DataConverterSpell[_0x32a257(0x194)](_0x44cf5b[_0x32a257(0x24b)],JSON[_0x32a257(0x12a)](_0x2c74bb[_0x32a257(0x23f)]),{'isTemporary':_0x3659bc,'optsGetSpellItem':{'casterLevel':_0x44cf5b[_0x32a257(0x246)],'abilityAbv':_0x44cf5b[_0x32a257(0x14a)],'isPrepared':_0x2b7743,'preparationMode':_0x19e4ee}});_0x5a0803(_0x4797bf);}delete _0x5cf2f0['spells'];}_0x5cf2f0[_0x32a257(0x1a3)]&&await this[_0x32a257(0x1e8)](_0x44cf5b,_0x5cf2f0,_0x32a257(0x1a3),_0x5a0803,{'isTemporary':_0x3659bc,'isPrepared':_0x2b7743,'usesPer':_0x32a257(0x17a)});_0x5cf2f0[_0x32a257(0x181)]&&await this[_0x32a257(0x1e8)](_0x44cf5b,_0x5cf2f0,'daily',_0x5a0803,{'isTemporary':_0x3659bc,'isPrepared':_0x2b7743,'usesPer':_0x32a257(0x222)});_0x5cf2f0[_0x32a257(0x217)]&&await this[_0x32a257(0x1e8)](_0x44cf5b,_0x5cf2f0,_0x32a257(0x181),_0x5a0803,{'isTemporary':_0x3659bc,'isPrepared':_0x2b7743,'usesPer':'sr'});if(_0x5cf2f0[_0x32a257(0x207)]){const _0x56275d=_0x32a257(0x252),_0x38019e=await DataConverterSpell[_0x32a257(0x194)](_0x44cf5b['actor'],JSON['stringify'](_0x5cf2f0[_0x32a257(0x207)]),{'isTemporary':_0x3659bc,'optsGetSpellItem':{'casterLevel':_0x44cf5b[_0x32a257(0x246)],'abilityAbv':_0x44cf5b[_0x32a257(0x14a)],'isPrepared':_0x2b7743,'preparationMode':_0x56275d}});_0x5a0803(_0x38019e),delete _0x5cf2f0['will'];}if(_0x5cf2f0[_0x32a257(0x240)]){const _0x167786=_0x32a257(0x252),_0x5dbc1d=await DataConverterSpell['pGetSpellHashToItemPosMapAndFillSpells'](_0x44cf5b[_0x32a257(0x24b)],JSON[_0x32a257(0x12a)](_0x5cf2f0['constant']),{'isTemporary':_0x3659bc,'optsGetSpellItem':{'casterLevel':_0x44cf5b[_0x32a257(0x246)],'abilityAbv':_0x44cf5b[_0x32a257(0x14a)],'isPrepared':_0x2b7743,'preparationMode':_0x167786,'durationAmount':null,'durationUnit':_0x32a257(0x221)}});_0x5a0803(_0x5dbc1d),delete _0x5cf2f0[_0x32a257(0x240)];}_0x7b5c5f['push'](_0x5cf2f0);}await DataConverterSpell[_0x32a257(0x194)](_0x44cf5b[_0x32a257(0x24b)],JSON[_0x32a257(0x12a)](_0x7b5c5f),{'isTemporary':_0x3659bc,'hashToIdMap':_0x29d450,'optsGetSpellItem':{'casterLevel':_0x44cf5b[_0x32a257(0x246)],'abilityAbv':_0x44cf5b[_0x32a257(0x14a)]}});const _0x398734=DataConverterSpell[_0x32a257(0x113)][_0x32a257(0x1a0)](null,_0x44cf5b[_0x32a257(0x24b)]['id'],_0x29d450);await Renderer[_0x32a257(0x24a)]()[_0x32a257(0x125)]({'entryType':_0x32a257(0x156),'pluginType':'*','fnPlugin':_0x398734,'pFn':async()=>{const _0x133c06=_0x32a257,_0x2908fb=Renderer['monster']['getSpellcastingRenderedTraits'](Renderer[_0x133c06(0x24a)](),_0x5e96f3);for(const _0xc71ec3 of _0x2908fb){const _0x76ab4d=await DataConverterCreature[_0x133c06(0x1c4)](_0x5e96f3,_0xc71ec3,_0x44cf5b);this[_0x133c06(0x182)](_0x5e96f3,_0x44cf5b,_0x4b2920,_0xc71ec3,{'fvttType':_0x133c06(0x190),'img':_0x76ab4d,'description':_0xc71ec3['rendered']});}}});}async[_0x14efab(0x1e8)](_0x29c862,_0x290452,_0x55793c,_0x191b59,{isTemporary:_0xe63a93,isPrepared:_0x4d3a84,usesPer:_0xe46356}){const _0x2d0b67=_0x14efab,_0x77c2be=_0x2d0b67(0x252);for(let _0x134b83=0x1;_0x134b83<=0x9;++_0x134b83){const _0x2ef922=_0x134b83+'e',_0x25dee9=[...(_0x290452[_0x55793c]||{})[_0x134b83]||[],...(_0x290452[_0x55793c]||{})[_0x2ef922]||[]];if(!_0x25dee9[_0x2d0b67(0x15c)])continue;const _0x2d7984=await DataConverterSpell[_0x2d0b67(0x194)](_0x29c862[_0x2d0b67(0x24b)],JSON[_0x2d0b67(0x12a)](_0x25dee9),{'isTemporary':_0xe63a93,'optsGetSpellItem':{'casterLevel':_0x29c862['spellLevel'],'abilityAbv':_0x29c862[_0x2d0b67(0x14a)],'isPrepared':_0x4d3a84,'preparationMode':_0x77c2be,'usesCurrent':_0x134b83,'usesMax':_0x134b83,'usesPer':_0xe46356}});_0x191b59(_0x2d7984);}delete _0x290452[_0x55793c];}static[_0x14efab(0x1de)](_0x4dc2d1){const _0x16e47f=_0x14efab;let _0x229cb7=0x0;return _0x4dc2d1[_0x16e47f(0x230)]&&JSON[_0x16e47f(0x12a)](_0x4dc2d1[_0x16e47f(0x230)])[_0x16e47f(0x171)](/an? (\d+)[A-Za-z]+-level/i,(..._0x5ef986)=>{const _0x29598e=Number(_0x5ef986[0x1]);if(!isNaN(_0x29598e))_0x229cb7=_0x29598e;}),_0x229cb7;}static[_0x14efab(0x176)](_0x51f61c){const _0x19ff72=_0x14efab;let _0x1f2897='';return _0x51f61c['headerEntries']&&JSON[_0x19ff72(0x12a)](_0x51f61c[_0x19ff72(0x230)])[_0x19ff72(0x171)](/(?:^| )(bard|cleric|druid|paladin|ranger|sorcerer|warlock|wizard)(?:\W|$)?/i,(..._0x45e743)=>{_0x1f2897=_0x45e743[0x1];}),_0x1f2897;}}ImportListCreature[_0x14efab(0x1ae)]=class extends ImportListActor[_0x14efab(0x1ae)]{constructor(_0x3cb923){const _0x33e9e1=_0x14efab;_0x3cb923=_0x3cb923||{},super(_0x3cb923),this[_0x33e9e1(0x167)]=_0x3cb923[_0x33e9e1(0x167)],this['pb']=Parser['crToPb'](this[_0x33e9e1(0x167)]['cr']),this[_0x33e9e1(0x231)]=this['pb'],this[_0x33e9e1(0x169)]=DataUtil['monster'][_0x33e9e1(0x1d2)](this['mon']),this[_0x33e9e1(0x14a)]='',this['spellDc']=0x8,this[_0x33e9e1(0x246)]=0x0,this[_0x33e9e1(0x118)]='',this[_0x33e9e1(0x150)](this[_0x33e9e1(0x167)]),this[_0x33e9e1(0x10c)](this[_0x33e9e1(0x167)]);}[_0x14efab(0x10c)](_0x3c7cf9){const _0x96a257=_0x14efab;if(!_0x3c7cf9[_0x96a257(0x22d)])return;_0x3c7cf9[_0x96a257(0x22d)][_0x96a257(0x151)](_0x227882=>DataConverterActor[_0x96a257(0x1ed)](_0x3c7cf9,_0x227882,this));}[_0x14efab(0x150)](_0xe04f66){const _0x362321=_0x14efab;if(!_0xe04f66[_0x362321(0x1b7)])return;const _0x19de17=_0xe04f66['spellcasting'][_0x362321(0x235)](_0x5b50f9=>_0x5b50f9['ability'])[_0x362321(0x11f)](_0x11f9a7=>{const _0x2ca1ef=_0x362321;if(Parser[_0x2ca1ef(0x129)][_0x2ca1ef(0x243)](_0x11f9a7[_0x2ca1ef(0x256)]))return _0x11f9a7;const _0x67b25f=_0x11f9a7[_0x2ca1ef(0x256)][_0x2ca1ef(0x163)](0x0,0x3);if(Parser[_0x2ca1ef(0x129)]['includes'](_0x67b25f))return _0x11f9a7[_0x2ca1ef(0x256)]=_0x67b25f,_0x11f9a7;return null;})['filter'](Boolean);if(_0x19de17[_0x362321(0x15c)]){let _0x22b852=_0x19de17[0x0];if(_0x19de17[_0x362321(0x15c)]>0x1)switch(Config[_0x362321(0x24a)](_0x362321(0x223),'spellcastingPrimaryTraitMode')){case 0x1:{_0x22b852=_0x19de17[_0x362321(0x138)]((_0xb85185,_0x3490c0)=>{const _0x56d837=_0x362321,_0xc184e1=this[_0x56d837(0x1e9)][_0x56d837(0x1fe)](_0xb85185),_0x16ef2c=this[_0x56d837(0x1e9)][_0x56d837(0x1fe)](_0x3490c0);return SortUtil[_0x56d837(0x16e)](_0x16ef2c,_0xc184e1);})[0x0];break;}case 0x2:{_0x22b852=_0x19de17['sort']((_0x5eca7f,_0x4c0133)=>SortUtil[_0x362321(0x16e)](Parser[_0x362321(0x1d7)](_0xe04f66[_0x4c0133[_0x362321(0x256)]]),Parser['getAbilityModNumber'](_0xe04f66[_0x5eca7f[_0x362321(0x256)]])))[0x0];break;}}const _0x2dbbc1=_0x22b852[_0x362321(0x256)],_0x251d1a=Parser[_0x362321(0x1d7)](_0xe04f66[_0x2dbbc1]);this['spellAbility']=_0x2dbbc1,this[_0x362321(0x12e)]=_0x251d1a+this['pb'];}this[_0x362321(0x246)]=_0xe04f66[_0x362321(0x1b7)][_0x362321(0x11f)](_0x29cb5f=>ImportListCreature['_getCasterLevelFromEntry'](_0x29cb5f))['find'](Boolean)||0x0,this['spellClass']=_0xe04f66['spellcasting']['map'](_0x26f4af=>ImportListCreature[_0x362321(0x176)](_0x26f4af))[_0x362321(0x25a)](Boolean)||'';}static[_0x14efab(0x1fe)](_0x76e7ae){const _0x15c11c=_0x14efab;let _0xb2d50d=0x0;return JSON['stringify'](_0x76e7ae)[_0x15c11c(0x171)](/{@spell [^}]+}/g,()=>{return _0xb2d50d++,'';}),_0xb2d50d;}},ImportListCreature[_0x14efab(0x1ca)]=class extends Application{constructor(_0x56a6f0,_0x1bc5bb,_0x20f5f0){const _0x1bd2f6=_0x14efab;super({'title':'Scale\x20and\x20Rename\x20Creatures','template':SharedConsts[_0x1bd2f6(0x14d)]+_0x1bd2f6(0x244),'width':0x3c0,'height':Util[_0x1bd2f6(0x15a)](),'resizable':!![]}),this[_0x1bd2f6(0x16f)]=_0x56a6f0,this[_0x1bd2f6(0x18c)]=_0x1bc5bb,this[_0x1bd2f6(0x193)]=_0x20f5f0[_0x1bd2f6(0x200)],this[_0x1bd2f6(0x126)]=null,this[_0x1bd2f6(0x204)]=null;}[_0x14efab(0x1b6)](){const _0x5ae371=_0x14efab;return{'titleSearch':this[_0x5ae371(0x193)],'rows':this[_0x5ae371(0x16f)][_0x5ae371(0x11f)]((_0x3fa2cf,_0x4ccb7f)=>({'name':_0x3fa2cf['name'],'source':_0x3fa2cf[_0x5ae371(0x17d)],'sourceShort':Parser[_0x5ae371(0x17c)](_0x3fa2cf[_0x5ae371(0x17d)]),'sourceLong':Parser['sourceJsonToFull'](_0x3fa2cf[_0x5ae371(0x17d)]),'sourceClassName':Parser[_0x5ae371(0x20e)](_0x3fa2cf[_0x5ae371(0x17d)]),'cr':Parser[_0x5ae371(0x146)](_0x3fa2cf['cr']),'isAdjustable':Parser[_0x5ae371(0x1d8)](_0x3fa2cf['cr'])<VeCt[_0x5ae371(0x145)],'ix':_0x4ccb7f}))};}['activateListeners'](_0x5ea687){const _0x19e0f3=_0x14efab;super[_0x19e0f3(0x1f7)](_0x5ea687),this[_0x19e0f3(0x126)]=new List({'$iptSearch':_0x5ea687[_0x19e0f3(0x25a)](_0x19e0f3(0x229)),'$wrpList':_0x5ea687[_0x19e0f3(0x25a)](_0x19e0f3(0x195)),'valueNames':[_0x19e0f3(0x211),_0x19e0f3(0x17d),'cr','ix']}),SortUtil[_0x19e0f3(0x263)](_0x5ea687[_0x19e0f3(0x25a)](_0x19e0f3(0x25b)),this[_0x19e0f3(0x126)]),this[_0x19e0f3(0x126)][_0x19e0f3(0x192)](this[_0x19e0f3(0x16f)],{'fnGetName':_0x67ba7=>_0x67ba7['name'],'fnGetValues':_0x4166da=>({'source':_0x4166da[_0x19e0f3(0x17d)],'cr':Parser['monCrToFull'](_0x4166da['cr'])})}),this[_0x19e0f3(0x126)]['init'](),this[_0x19e0f3(0x204)]=_0x5ea687[_0x19e0f3(0x25a)](_0x19e0f3(0x11e))['click'](()=>{const _0x2e47c8=_0x19e0f3;_0x5ea687[_0x2e47c8(0x25a)](_0x2e47c8(0x229))[_0x2e47c8(0x249)]('');if(this['_list'])this['_list'][_0x2e47c8(0x177)]();}),_0x5ea687[_0x19e0f3(0x25a)]('[name=\x22btn-run\x22]')[_0x19e0f3(0x1b5)](async()=>{const _0xd640c9=_0x19e0f3,_0x402e89=this['_list'][_0xd640c9(0x144)][_0xd640c9(0x11f)](_0xc2eeb1=>{const _0x121cbd=_0xd640c9,_0x9e1608=$(_0xc2eeb1['ele']),_0x4e3762=_0x9e1608[_0x121cbd(0x25a)](_0x121cbd(0x216));return{'ix':_0xc2eeb1['ix'],'targetCr':_0x4e3762[_0x121cbd(0x15c)]?Number(_0x4e3762['val']())===-0x1?null:Number(_0x4e3762['val']()):null,'rename':_0x9e1608['find'](_0x121cbd(0x168))[_0x121cbd(0x249)]()[_0x121cbd(0x1ac)]()};}),_0x244c38=await Promise['all'](_0x402e89[_0xd640c9(0x11f)](async({ix:_0x412380,targetCr:_0x5de314,rename:_0xa26492})=>{const _0x52678e=_0xd640c9;let _0x1a640d=this[_0x52678e(0x16f)][_0x412380];if(_0x5de314!=null&&_0x5de314!==Parser['crToNumber'](_0x1a640d['cr']))_0x1a640d=await ScaleCreature[_0x52678e(0x19f)](_0x1a640d,_0x5de314);if(_0xa26492)_0x1a640d=ImportListCreature[_0x52678e(0x1ca)][_0x52678e(0x141)](_0x1a640d,_0xa26492);return _0x1a640d;}));this[_0xd640c9(0x18c)](_0x244c38),this['close']();});if(this[_0x19e0f3(0x204)])this[_0x19e0f3(0x204)][_0x19e0f3(0x1b5)]();}static[_0x14efab(0x141)](_0x1fc564,_0x52ed94){const _0x181752=_0x14efab;ImportListCreature['ScaleRename'][_0x181752(0x18d)]=ImportListCreature[_0x181752(0x1ca)]['_WALER_RENAME']||MiscUtil['getWalker'](),_0x1fc564=MiscUtil[_0x181752(0x242)](_0x1fc564);const _0x36bddf=_0x52ed94[_0x181752(0x171)](/\\/g,'\x5c\x5c')['replace'](/"/g,'\x5c\x22'),_0x1446f1=new RegExp('(^|[^a-zA-Z0-9])'+_0x1fc564['name'][_0x181752(0x1fa)]()+_0x181752(0x1d6),'gi'),_0x469685=_0x2ad103=>{_0x1fc564[_0x2ad103]&&_0x1fc564[_0x2ad103]['forEach'](_0xeb405=>{const _0xbd3e6b=_0x5416;_0xeb405[_0xbd3e6b(0x117)]&&(_0xeb405[_0xbd3e6b(0x117)]=ImportListCreature['ScaleRename'][_0xbd3e6b(0x18d)][_0xbd3e6b(0x257)](_0xeb405['entries'],{'string':_0x12eb0b=>_0x12eb0b[_0xbd3e6b(0x171)](_0x1446f1,(..._0x3f6543)=>''+_0x3f6543[0x1]+_0x36bddf+_0x3f6543[0x2])})),_0xeb405['headerEntries']&&(_0xeb405['headerEntries']=ImportListCreature['ScaleRename'][_0xbd3e6b(0x18d)][_0xbd3e6b(0x257)](_0xeb405[_0xbd3e6b(0x230)],{'string':_0x2b955d=>_0x2b955d[_0xbd3e6b(0x171)](_0x1446f1,(..._0xae2db6)=>''+_0xae2db6[0x1]+_0x36bddf+_0xae2db6[0x2])}));});};return _0x469685('action'),_0x469685(_0x181752(0x1b1)),_0x469685('reaction'),_0x469685('trait'),_0x469685('legendary'),_0x469685(_0x181752(0x1bd)),_0x1fc564[_0x181752(0x164)]=_0x52ed94,_0x1fc564;}async[_0x14efab(0x238)](){const _0x3500e3=_0x14efab;return this[_0x3500e3(0x18c)](null),super[_0x3500e3(0x238)]();}},ImportListCreature[_0x14efab(0x1ca)]['_WALER_RENAME']=null;export{ImportListCreature};