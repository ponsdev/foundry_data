const _0x2e53=['isWhisper','19mfUhlS','_handleRollMessage','push','trim','320385izMkNb','75035btoegd','1280209zdVezc','detail','data','notifications','import','rivet.receive','1ATRIdV','minimumRole','settings','\x22!\x20You\x20may\x20need\x20to\x20update\x20your\x20extension.','Received\x20Rivet\x20message\x20(JSON)','log','TASK_EXIT_FAILED','isSendRolls','toMessage','entity','init','get','user','Received\x20Rivet\x20message\x20(text)','1686371zIOZOF','Plutonium\x20does\x20not\x20yet\x20support\x20entities\x20from\x20\x22','isTemp','targetActorId','remove','userId','rolledBy','_handlePacket','textarea.rivet-transfer','40009ZLilkG','parse','132018BOfzRD','_pHandleEntityMessage','collection','832351wxRSvN','pInit','rivet.receive-text','dice','addEventListener','rivet','error','roll','last','Unhandled\x20Rivet\x20message\x20with\x20type\x20\x22'];const _0xb23a=function(_0x1860d9,_0x1d0b56){_0x1860d9=_0x1860d9-0x190;let _0x2e5331=_0x2e53[_0x1860d9];return _0x2e5331;};const _0x4ddd8e=_0xb23a;(function(_0x3263d9,_0x55a48a){const _0x30a97a=_0xb23a;while(!![]){try{const _0x98f0d=parseInt(_0x30a97a(0x19d))+parseInt(_0x30a97a(0x1be))+-parseInt(_0x30a97a(0x19f))+parseInt(_0x30a97a(0x1b3))+parseInt(_0x30a97a(0x1a5))*parseInt(_0x30a97a(0x1c1))+-parseInt(_0x30a97a(0x19e))+parseInt(_0x30a97a(0x199))*-parseInt(_0x30a97a(0x1bc));if(_0x98f0d===_0x55a48a)break;else _0x3263d9['push'](_0x3263d9['shift']());}catch(_0x2a0194){_0x3263d9['push'](_0x3263d9['shift']());}}}(_0x2e53,0xd0e9e));import{Config}from'./Config.js';import{LGT}from'./Util.js';import{UtilApplications}from'./UtilApplications.js';import{ActorCharactermancerSourceSelector}from'./ActorCharactermancer.js';class RivetBridge{static[_0x4ddd8e(0x1af)](){const _0x50e524=_0x4ddd8e;window[_0x50e524(0x192)](_0x50e524(0x1a4),_0x26bee5=>{const _0x32a981=_0x50e524;return console[_0x32a981(0x1aa)](...LGT,_0x32a981(0x1a9)),this[_0x32a981(0x1ba)](_0x26bee5[_0x32a981(0x1a0)]);}),window[_0x50e524(0x192)](_0x50e524(0x190),()=>{const _0x27c96f=_0x50e524;console[_0x27c96f(0x1aa)](...LGT,_0x27c96f(0x1b2));const _0x147ac2=$(_0x27c96f(0x1bb)),_0x144c27=_0x147ac2[_0x27c96f(0x196)]()['val']();return _0x147ac2[_0x27c96f(0x1b7)](),this[_0x27c96f(0x1ba)](JSON[_0x27c96f(0x1bd)](_0x144c27));});}static[_0x4ddd8e(0x1ba)](_0x197c25){const _0x2d08e6=_0x4ddd8e;switch(_0x197c25['type']){case _0x2d08e6(0x195):return this[_0x2d08e6(0x19a)](_0x197c25);case'entity':return this['_pHandleEntityMessage'](_0x197c25);default:ui[_0x2d08e6(0x1a2)][_0x2d08e6(0x194)](_0x2d08e6(0x197)+_0x197c25['type']+'\x22!\x20You\x20may\x20need\x20to\x20update\x20your\x20extension.');}}static[_0x4ddd8e(0x19a)](_0x2a8006){const _0xd09b47=_0x4ddd8e,_0x4a75c0=_0x2a8006[_0xd09b47(0x1a1)];if(!_0x2a8006[_0xd09b47(0x1a7)][_0xd09b47(0x1ac)])return;const _0x35584d=new Roll(_0x4a75c0[_0xd09b47(0x191)]),_0x24fd4f=[];if(_0x2a8006[_0xd09b47(0x1a7)][_0xd09b47(0x198)])_0x24fd4f[_0xd09b47(0x19b)](game[_0xd09b47(0x1b8)]);_0x35584d[_0xd09b47(0x1ad)]({'speaker':{'alias':_0x4a75c0[_0xd09b47(0x1b9)]},'flavor':_0x4a75c0['label'],'rollMode':'roll','whisper':_0x24fd4f});}static async[_0x4ddd8e(0x1bf)](_0x404970){const _0x2e130f=_0x4ddd8e,_0x1b0e12=Config[_0x2e130f(0x1b0)](_0x2e130f(0x1a3),_0x2e130f(0x1a6));if(game[_0x2e130f(0x1b1)]['role']<_0x1b0e12)return;const _0x177355=_0x404970[_0x2e130f(0x1a1)],_0x3c5498=(Config[_0x2e130f(0x1b0)](_0x2e130f(0x193),_0x2e130f(0x1b6))||'')[_0x2e130f(0x19c)](),_0x5a2c87=_0x3c5498?Actor[_0x2e130f(0x1c0)][_0x2e130f(0x1b0)](_0x3c5498):'',{ChooseImporter:_0xf7a127}=await import('./ChooseImporter.js'),_0x3d2134=_0xf7a127['getImporter'](_0x177355?.[_0x2e130f(0x1ae)]?.['__prop']||_0x177355['page'],_0x5a2c87);if(!_0x3d2134)return ui['notifications'][_0x2e130f(0x194)](_0x2e130f(0x1b4)+_0x177355['page']+_0x2e130f(0x1a8));try{await _0x3d2134[_0x2e130f(0x1c2)]();const _0x136bdd={};if(_0x177355[_0x2e130f(0x1b5)])_0x136bdd[_0x2e130f(0x1b5)]=!![];const _0x2dfc35=await _0x3d2134['pImportEntry'](_0x177355[_0x2e130f(0x1ae)],_0x136bdd);UtilApplications['doShowImportedNotification'](_0x2dfc35);}catch(_0x5eea4b){UtilApplications['doShowImportedNotification']({'entity':_0x177355,'status':UtilApplications[_0x2e130f(0x1ab)]}),setTimeout(()=>{throw _0x5eea4b;});}}}export{RivetBridge};