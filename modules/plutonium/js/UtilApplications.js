const _0x23b3=['/template/TaskRunner.handlebars','taskExitCompleteFailed','italic','reverse','_total','parent','Import\x20of\x20','\x22\x20cancelled.','type','activateListeners','\x20to\x20','_fnGetRowErrorText','isCancelled','options','_prevProgress','_fnGetRowSkippedDuplicateText','ascSort','getFolderPath','.window-title','actor','TASK_EXIT_COMPLETE_DATA_ONLY','find','taskExitCompleteOverwrite','error','[data-name=\x22disp-progress\x22]','_getHeaderButtons','doShowImportedNotification','close','<i\x20class=\x22fas\x20','\x20folder\x20\x22','_titleCompelte','appendTo','3064480UgefHr','tasks','setApplicationTitle','_maxZ','1734854rMAbRT','bringToFront','_fnGetRowSuccessText','\x20was\x20skipped\x20(duplicate\x20found).','undefined','getDataName','length','_tasks','pDelay','753240fuxxpG','title','\x22></i>','_$prevMsg','_setBarProgress','Close','_fnGetRowOverwriteDuplicateText','fnGetRowCancelText','TASK_EXIT_SKIPPED_DUPLICATE','render','Failed\x20to\x20import\x20\x22','getFolderList','min','MODULE_LOCATION','pInit','TASK_EXIT_COMPLETE','entity','info','_fnGetRowCancelText','fnGetRowOverwriteDuplicateText','740601gHBdMw','\x22\x20failed',',\x20overwriting\x20existing\x20(duplicate\x20found).','_$dispProgress','_element','data','prependTo','depth','<div\x20class=\x22italic\x22>','TASK_EXIT_CANCELLED','Failed\x20to\x20import\x20','Imported\x20','\x22!\x20','findIndex','imported','name','addClass','...','_$wrpConsole','[name=\x22btn-cancel\x22]','veapp__msg-error\x20bold','1691155aFmGUP','.window-header\x20.window-title','_$btnCancel','filter','content','yes','isForceClose','1ujjhSi','getCleanEntityName','forEach','pGetConfirmation','fnGetRowSuccessText','_setTitleText','pRun','Imported\x20\x22','TASK_EXIT_COMPLETE_UPDATE_OVERWRITE','\x20was\x20cancelled.','notifications','_isForceClose','element','max','confirmText','_getRowMeta','taskExitSkippedDuplicate','\x22\x20was\x20skipped\x20(duplicate\x20found).','totalTasks','click','$pGetAddAppLoadingOverlay','removeClass','folder','push','focus','collection','STR_SEE_CONSOLE','keys','get','_doSwitchToCloseButton','splice','Z_INDEX_MAX_FOUNDRY','fnGetRowErrorText','titleInitial','css','sort','937736IbvJuU','TASK_EXIT_FAILED','Critical\x20failure!\x20','text','Importing\x20','fnGetRowSkippedDuplicateText','1463980djjEnI','warn','_isCancelled','setProgress','\x22\x20to\x20actor\x20\x22','status','map'];const _0x30e3=function(_0x4c7b5f,_0xb134c){_0x4c7b5f=_0x4c7b5f-0x195;let _0x23b378=_0x23b3[_0x4c7b5f];return _0x23b378;};const _0x52dbf8=_0x30e3;(function(_0x2ab130,_0x553eb4){const _0x4cacf8=_0x30e3;while(!![]){try{const _0xa7d2d3=parseInt(_0x4cacf8(0x1f9))+parseInt(_0x4cacf8(0x1ab))+parseInt(_0x4cacf8(0x1e5))+-parseInt(_0x4cacf8(0x215))*-parseInt(_0x4cacf8(0x1dc))+-parseInt(_0x4cacf8(0x20e))+parseInt(_0x4cacf8(0x1b1))+-parseInt(_0x4cacf8(0x1d8));if(_0xa7d2d3===_0x553eb4)break;else _0x2ab130['push'](_0x2ab130['shift']());}catch(_0x5f0937){_0x2ab130['push'](_0x2ab130['shift']());}}}(_0x23b3,0xd5918));import{LGT}from'./Util.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Consts}from'./Consts.js';class UtilApplications{static async[_0x52dbf8(0x19b)](_0xd27607){const _0x2eb7f5=_0x52dbf8;if(!_0xd27607)return null;_0xd27607['css']('position','relative');const _0xbd81c9=$('<div\x20class=\x22veapp-loading__wrp-outer\x22><i>Loading...</i></div>')[_0x2eb7f5(0x19f)]()[_0x2eb7f5(0x1d7)](_0xd27607);return await MiscUtil[_0x2eb7f5(0x1e4)](0x5),_0xbd81c9;}static[_0x52dbf8(0x218)](_0x34cf66){return _0x34cf66=_0x34cf66||{},new Promise(_0x431abd=>{const _0x4fe8ce=_0x30e3;new Dialog({'title':_0x34cf66['title'],'content':_0x34cf66[_0x4fe8ce(0x212)],'buttons':{'yes':{'icon':_0x4fe8ce(0x1d4)+_0x34cf66['faIcon']+_0x4fe8ce(0x1e7),'label':_0x34cf66[_0x4fe8ce(0x195)],'callback':()=>_0x431abd(!![])},'no':{'icon':'<i\x20class=\x22fas\x20fa-times\x22></i>','label':_0x34cf66['dismissText']||'Cancel','callback':()=>_0x431abd(![])}},'default':_0x4fe8ce(0x213)})[_0x4fe8ce(0x1ee)](!![]);});}static[_0x52dbf8(0x216)](_0x25655b){return _0x25655b||'\x20';}static[_0x52dbf8(0x1c9)](_0x30de96,_0x321094){const _0x302e48=_0x52dbf8;_0x321094=_0x321094||{};if(!_0x30de96)return null;const _0x1fa04e=[];if(_0x30de96[_0x302e48(0x19d)]){_0x1fa04e[_0x302e48(0x19e)](_0x30de96['folder']['data']['name']);let _0x109178=_0x30de96[_0x302e48(0x19d)][_0x302e48(0x1bd)];while(_0x109178&&_0x109178['id']){_0x1fa04e[_0x302e48(0x19e)](_0x109178[_0x302e48(0x1fe)][_0x302e48(0x208)]),_0x109178=_0x109178[_0x302e48(0x1bd)];}}const _0x80d12f=_0x1fa04e['reverse']()['join']('/');if(_0x80d12f)return _0x321094['isAddTrailingSlash']?_0x80d12f+'/':_0x80d12f;return null;}static[_0x52dbf8(0x1e9)](_0x5bb7fe,_0x7fef1){const _0x13f51a=_0x52dbf8;_0x7fef1=Math[_0x13f51a(0x222)](0x0,Math[_0x13f51a(0x1f1)](_0x7fef1,0x1)),_0x5bb7fe[_0x13f51a(0x1a9)]({'width':Math['round'](_0x7fef1*0x64)+'%'});}static async['pRunTasks'](_0x41bd94,_0x52a756){const _0x4cc1f0=_0x52dbf8;_0x52a756=_0x52a756||{};const _0x344388=new UtilApplications['TaskRunner']({..._0x52a756,'tasks':_0x41bd94});await _0x344388[_0x4cc1f0(0x21b)]();}static[_0x52dbf8(0x1f0)](_0x1fe243){const _0x25e945=_0x52dbf8,_0x4153d0=(_0x4e960a,_0x433238)=>SortUtil[_0x25e945(0x1c8)](_0x4e960a['data'][_0x25e945(0x1aa)],_0x433238[_0x25e945(0x1fe)][_0x25e945(0x1aa)]),_0x5a311b=Folder[_0x25e945(0x1a0)]['entities']['filter'](_0x169519=>_0x169519[_0x25e945(0x1fe)]['type']===_0x1fe243)[_0x25e945(0x1aa)](_0x4153d0);if(!_0x5a311b['length'])return _0x5a311b;const _0x1c01f3=Math[_0x25e945(0x222)](..._0x5a311b[_0x25e945(0x1b7)](_0x259862=>_0x259862[_0x25e945(0x200)])),_0x89d3a4=_0x5a311b[_0x25e945(0x211)](_0x51fde0=>_0x51fde0[_0x25e945(0x200)]===0x1);if(_0x89d3a4[_0x25e945(0x1e2)]===_0x5a311b[_0x25e945(0x1e2)])return _0x89d3a4;for(let _0x54288b=0x2;_0x54288b<_0x1c01f3+0x1;++_0x54288b){const _0x3087ab=_0x5a311b[_0x25e945(0x211)](_0x1078b1=>_0x1078b1[_0x25e945(0x200)]===_0x54288b)[_0x25e945(0x1aa)](_0x4153d0)[_0x25e945(0x1bb)]();_0x3087ab[_0x25e945(0x217)](_0x4e30ef=>{const _0x19eeaf=_0x25e945,_0x41326f=_0x89d3a4[_0x19eeaf(0x206)](_0x4deba1=>_0x4deba1['id']===_0x4e30ef[_0x19eeaf(0x1bd)]['id']);if(~_0x41326f)_0x89d3a4[_0x19eeaf(0x1a5)](_0x41326f+0x1,0x0,_0x4e30ef);});}return _0x89d3a4;}static[_0x52dbf8(0x1dd)](_0x34362b){const _0x54cc3a=_0x52dbf8;if(!_0x34362b[_0x54cc3a(0x1fd)])return;if(typeof _maxZ===_0x54cc3a(0x1e0))window[_0x54cc3a(0x1db)]=0x64;if(Object[_0x54cc3a(0x1a2)](ui['windows'])[_0x54cc3a(0x1e2)]===0x0)_maxZ=0x64;_0x34362b[_0x54cc3a(0x1fd)]['css']({'zIndex':Math['min'](++_maxZ,Consts[_0x54cc3a(0x1a6)])});}static[_0x52dbf8(0x1d2)](_0x39af3b){const _0x59183b=_0x52dbf8;if(!_0x39af3b)return;if(!_0x39af3b[_0x59183b(0x1b6)]){_0x39af3b[_0x59183b(0x1b6)]=UtilApplications[_0x59183b(0x1f4)];const _0x258f5e='Could\x20not\x20display\x20import\x20notificationsâ€”import\x20status\x20was\x20not\x20defined.\x20This\x20is\x20a\x20bug!';ui[_0x59183b(0x21f)][_0x59183b(0x1cf)](_0x258f5e),console[_0x59183b(0x1cf)](new Error(_0x258f5e));}const _0x459ee5=_0x39af3b[_0x59183b(0x208)]||_0x39af3b[_0x59183b(0x1f5)]?.[_0x59183b(0x208)]||_0x39af3b[_0x59183b(0x207)]?.['name']||_0x39af3b[_0x59183b(0x207)]?.['data']?.['name']||'(Unnamed\x20Entity)';if(_0x39af3b[_0x59183b(0x1b6)]===UtilApplications[_0x59183b(0x202)])return ui[_0x59183b(0x21f)][_0x59183b(0x1b2)]('Import\x20of\x20\x22'+_0x459ee5+_0x59183b(0x1bf));else{if(_0x39af3b[_0x59183b(0x1b6)]===UtilApplications[_0x59183b(0x1ed)])return ui[_0x59183b(0x21f)][_0x59183b(0x1b2)]('Import\x20of\x20\x22'+_0x459ee5+_0x59183b(0x198));else{if(_0x39af3b['status']===UtilApplications[_0x59183b(0x1ac)])return ui[_0x59183b(0x21f)]['error'](_0x59183b(0x1ef)+_0x459ee5+_0x59183b(0x205)+VeCt['STR_SEE_CONSOLE']);}}if(_0x39af3b[_0x59183b(0x207)][_0x59183b(0x1cb)])ui[_0x59183b(0x21f)][_0x59183b(0x1f6)](_0x59183b(0x21c)+_0x459ee5+_0x59183b(0x1b5)+_0x39af3b[_0x59183b(0x207)][_0x59183b(0x1cb)]['name']+'\x22.');else{const _0x575400=_0x39af3b?.[_0x59183b(0x207)]?.['folder']?_0x39af3b[_0x59183b(0x207)][_0x59183b(0x19d)][_0x59183b(0x1fe)][_0x59183b(0x1c0)]:null,_0x44cbeb=UtilApplications[_0x59183b(0x1c9)](_0x39af3b[_0x59183b(0x207)]);ui['notifications'][_0x59183b(0x1f6)]('Imported\x20\x22'+_0x459ee5+'\x22'+(_0x575400&&_0x44cbeb?_0x59183b(0x1c2)+_0x575400+_0x59183b(0x1d5)+_0x44cbeb+'\x22.':''));}}static[_0x52dbf8(0x1da)](_0x3b9847,_0x5711c5){const _0x15db83=_0x52dbf8;_0x3b9847[_0x15db83(0x1c5)][_0x15db83(0x1e6)]=_0x5711c5,_0x3b9847[_0x15db83(0x221)][_0x15db83(0x1cd)](_0x15db83(0x1ca))[_0x15db83(0x1ae)](_0x3b9847[_0x15db83(0x1e6)]);}static[_0x52dbf8(0x1e1)](_0xf7ecc9){const _0x5cb394=_0x52dbf8;return MiscUtil[_0x5cb394(0x1a3)](_0xf7ecc9,_0x5cb394(0x1cb),'name')||MiscUtil[_0x5cb394(0x1a3)](_0xf7ecc9,'entity','name')||'';}}UtilApplications[_0x52dbf8(0x1f4)]=Symbol('taskExitComplete'),UtilApplications[_0x52dbf8(0x202)]=Symbol('taskExitCancelled'),UtilApplications['TASK_EXIT_SKIPPED_DUPLICATE']=Symbol(_0x52dbf8(0x197)),UtilApplications['TASK_EXIT_COMPLETE_UPDATE_OVERWRITE']=Symbol(_0x52dbf8(0x1ce)),UtilApplications[_0x52dbf8(0x1ac)]=Symbol(_0x52dbf8(0x1b9)),UtilApplications[_0x52dbf8(0x1cc)]=Symbol('taskExitCompleteDataOnly'),UtilApplications['TaskRunner']=class extends Application{constructor(_0x6fe8ae){const _0x1b3bf7=_0x52dbf8;_0x6fe8ae=_0x6fe8ae||{},super({'title':_0x6fe8ae[_0x1b3bf7(0x1a8)]||'Importing...','width':0x1e0,'template':SharedConsts[_0x1b3bf7(0x1f2)]+_0x1b3bf7(0x1b8),'height':0x140,'resizable':!![]}),this[_0x1b3bf7(0x1e3)]=_0x6fe8ae[_0x1b3bf7(0x1d9)],this[_0x1b3bf7(0x1d6)]=_0x6fe8ae['titleComplete']||'Import\x20Complete',this['_fnGetRowRunningText']=_0x6fe8ae['fnGetRowRunningText']||(_0x3298c8=>_0x1b3bf7(0x1af)+_0x3298c8+_0x1b3bf7(0x20a)),this[_0x1b3bf7(0x1de)]=_0x6fe8ae[_0x1b3bf7(0x219)]||(_0x1e71eb=>_0x1b3bf7(0x204)+_0x1e71eb+'.'),this[_0x1b3bf7(0x1c3)]=_0x6fe8ae[_0x1b3bf7(0x1a7)]||(_0x4db5fe=>_0x1b3bf7(0x203)+_0x4db5fe+'!\x20'+VeCt['STR_SEE_CONSOLE']),this[_0x1b3bf7(0x1f7)]=_0x6fe8ae[_0x1b3bf7(0x1ec)]||(_0x100a3e=>_0x1b3bf7(0x1be)+_0x100a3e+_0x1b3bf7(0x21e)),this[_0x1b3bf7(0x1c7)]=_0x6fe8ae[_0x1b3bf7(0x1b0)]||(_0x170dd9=>_0x1b3bf7(0x1be)+_0x170dd9+_0x1b3bf7(0x1df)),this[_0x1b3bf7(0x1eb)]=_0x6fe8ae[_0x1b3bf7(0x1f8)]||(_0x5b38dd=>_0x1b3bf7(0x204)+_0x5b38dd+_0x1b3bf7(0x1fb)),this[_0x1b3bf7(0x220)]=!!_0x6fe8ae[_0x1b3bf7(0x214)],this['_total']=_0x6fe8ae[_0x1b3bf7(0x199)],this[_0x1b3bf7(0x1b3)]=![],this[_0x1b3bf7(0x1fc)]=null,this['_$wrpConsole']=null,this[_0x1b3bf7(0x210)]=null,this['_prevProgress']=null,this[_0x1b3bf7(0x1e8)]=null;}get[_0x52dbf8(0x1c4)](){const _0x25ecf9=_0x52dbf8;return this[_0x25ecf9(0x1b3)];}['activateListeners'](_0x5161d3){const _0x34db5c=_0x52dbf8;super[_0x34db5c(0x1c1)](_0x5161d3),this['_$dispProgress']=_0x5161d3[_0x34db5c(0x1cd)](_0x34db5c(0x1d0)),this['_$wrpConsole']=_0x5161d3[_0x34db5c(0x1cd)]('[data-name=\x22wrp-console\x22]'),this[_0x34db5c(0x210)]=_0x5161d3[_0x34db5c(0x1cd)](_0x34db5c(0x20c))['click'](()=>this[_0x34db5c(0x1b3)]=!![]);}async[_0x52dbf8(0x1f3)](){const _0x327aef=_0x52dbf8;await this[_0x327aef(0x1ee)](!![]);while(this[_0x327aef(0x210)]==null)await MiscUtil[_0x327aef(0x1e4)](0x19);}async[_0x52dbf8(0x21b)](){const _0x1862a9=_0x52dbf8;await this[_0x1862a9(0x1f3)]();try{const _0x563df9=this[_0x1862a9(0x1e3)][_0x1862a9(0x1e2)];for(let _0x569274=0x0;_0x569274<_0x563df9;++_0x569274){const _0x3f15c7=this['_tasks'][_0x569274];if(this['_isCancelled'])break;const {$msg:_0x1a1957,$row:_0x5adabd}=this['_getRowMeta'](this['_fnGetRowRunningText'](_0x3f15c7[_0x1862a9(0x208)]),_0x569274+0x1,_0x563df9);_0x5adabd[_0x1862a9(0x1ff)](this[_0x1862a9(0x20b)]);try{const _0x2883c0=await _0x3f15c7['fnGetPromise']();switch(_0x2883c0?.['status']||UtilApplications['TASK_EXIT_COMPLETE']){case UtilApplications['TASK_EXIT_CANCELLED']:_0x1a1957['text'](this['_fnGetRowCancelText'](_0x3f15c7['name']));break;case UtilApplications['TASK_EXIT_SKIPPED_DUPLICATE']:_0x1a1957['text'](this[_0x1862a9(0x1c7)](_0x3f15c7[_0x1862a9(0x208)]));break;case UtilApplications[_0x1862a9(0x21d)]:_0x1a1957[_0x1862a9(0x1ae)](this[_0x1862a9(0x1eb)](_0x3f15c7['name']));break;case UtilApplications['TASK_EXIT_FAILED']:_0x1a1957[_0x1862a9(0x209)](_0x1862a9(0x20d))[_0x1862a9(0x19c)]('italic')[_0x1862a9(0x1ae)](this[_0x1862a9(0x1c3)](_0x3f15c7[_0x1862a9(0x208)]));break;case UtilApplications[_0x1862a9(0x1f4)]:default:_0x1a1957[_0x1862a9(0x1ae)](this['_fnGetRowSuccessText'](_0x3f15c7['name']));break;}}catch(_0x1b7931){_0x1a1957[_0x1862a9(0x209)](_0x1862a9(0x20d))['removeClass'](_0x1862a9(0x1ba))[_0x1862a9(0x1ae)](this[_0x1862a9(0x1c3)](_0x3f15c7[_0x1862a9(0x208)])),console[_0x1862a9(0x1cf)](...LGT,'Task\x20\x22'+_0x3f15c7[_0x1862a9(0x208)]+_0x1862a9(0x1fa),_0x1b7931);}UtilApplications[_0x1862a9(0x1e9)](this[_0x1862a9(0x1fc)],(_0x569274+0x1)/_0x563df9);}UtilApplications[_0x1862a9(0x1e9)](this[_0x1862a9(0x1fc)],0x1);if(this[_0x1862a9(0x220)])this[_0x1862a9(0x1d3)]();else this[_0x1862a9(0x21a)](this[_0x1862a9(0x1d6)]);}catch(_0x483ba0){console[_0x1862a9(0x1cf)](...LGT,'TaskRunner\x20died!',_0x483ba0),ui[_0x1862a9(0x21f)][_0x1862a9(0x1cf)](_0x1862a9(0x1ad)+VeCt[_0x1862a9(0x1a1)]);}this[_0x1862a9(0x1a4)]();}[_0x52dbf8(0x196)](_0x47b341,_0x32c550,_0xae30d7){const _0x390052=_0x52dbf8;if(_0xae30d7==null&&this['_total']!=null)_0xae30d7=this['_total'];const _0xf1b483=$(_0x390052(0x201)+_0x47b341+'</div>'),_0x99f17=$$`<div class="mx-1 w-100 split imp__task-row flex-v-center">${_0xf1b483}<div>(${_0x32c550}/${_0xae30d7})</div></div>`;return{'$msg':_0xf1b483,'$row':_0x99f17};}['_doSwitchToCloseButton'](){const _0x4b0061=_0x52dbf8;this['_$btnCancel']['off'](_0x4b0061(0x19a))[_0x4b0061(0x1ae)](_0x4b0061(0x1ea))[_0x4b0061(0x19a)](()=>this[_0x4b0061(0x1d3)]());}['_setTitleText'](_0x24e0bf){const _0x22542f=_0x52dbf8;this['element']['find'](_0x22542f(0x20f))[_0x22542f(0x1ae)](_0x24e0bf);}[_0x52dbf8(0x1b4)]({message:_0x809ef8,count:_0x1e8d43,total:_0x3626b5,isError:_0x438f1a}){const _0xd16bf0=_0x52dbf8;if(_0x1e8d43==null&&this[_0xd16bf0(0x1bc)]!=null)_0x1e8d43=this['_total'];if(_0x3626b5==null&&this['_total']!=null)_0x3626b5=this[_0xd16bf0(0x1bc)];_0x1e8d43=Math[_0xd16bf0(0x222)](0x0,_0x1e8d43);if(_0x3626b5===0x0)_0x3626b5=0x1;const _0x5280ee=_0x1e8d43/_0x3626b5;if(this[_0xd16bf0(0x1c6)]===_0x5280ee){this[_0xd16bf0(0x1e8)][_0xd16bf0(0x1ae)](_0x809ef8);if(_0x438f1a)this[_0xd16bf0(0x1e8)][_0xd16bf0(0x209)](_0xd16bf0(0x20d))['removeClass'](_0xd16bf0(0x1ba));this[_0xd16bf0(0x1a4)]();return;}this['_prevProgress']=_0x5280ee;const {$msg:_0x33eb7d,$row:_0x53ab2d}=this[_0xd16bf0(0x196)](_0x809ef8,_0x1e8d43,_0x3626b5);this[_0xd16bf0(0x1e8)]=_0x33eb7d,_0x53ab2d['prependTo'](this[_0xd16bf0(0x20b)]);if(_0x438f1a)_0x33eb7d[_0xd16bf0(0x209)](_0xd16bf0(0x20d))[_0xd16bf0(0x19c)](_0xd16bf0(0x1ba));UtilApplications['_setBarProgress'](this[_0xd16bf0(0x1fc)],_0x1e8d43===_0x3626b5?0x1:_0x5280ee);if(_0x1e8d43===_0x3626b5){if(this[_0xd16bf0(0x220)])this['close']();else this['_setTitleText'](this[_0xd16bf0(0x1d6)]),this[_0xd16bf0(0x1a4)]();}}[_0x52dbf8(0x1d1)](){return[];}};export{UtilApplications};