const _0x52f1=['fromClassList','className','isUpdateOnly','addHookSpellLevelLow','data-plut-is-existing-spell=\x22true\x22','classList','sortSpells','list-multi-selected','addHookSpellLevelHigh','_isAvailableSpell','14634OIMlZI','school','_existingCasterMeta','name','active','_handleAlwaysPreparedSpells','cntPrepared','ixViewedSpell','isAlwaysPrepared','addHookIsMaxLearnedCantrips','addHookIsPreparedCaster','cntLearnedCantrips','getFormSubData','_handleListItemBtnLearnClick_do_doLearn','isAvailableSubclassSpell_','append','isOverLearnCantripsLimit_','toggleClass','flex-v-center\x20manc__list-row\x20clickable\x20veapp__list-row\x20veapp__list-row-hoverable','isAvailableClassSpell_','canLearnMoreCantrips_','parent','actor','spLevelToFullLevelText','_handleListItemBtnLearnClick_doFixed','\x0a\x09\x09\x09<div\x20class=\x22col-3-2\x20pl-0\x22>','pulseFixedLearned','addEventListener','pact','_list','filter','isOverPrepareLimit_','isIncludeUaEtcSpellLists','sum','get','_spellLevel','_existingClass','spellLevelLow','alwaysPreparedSpellsRace','preparation','isNonstandardSource','_getCntSpellsKnown','$wrpPreparedLearned','getSpellsKnown','toDisplay','manc-sp__is-max-learned-cantrips--is-over-limit','html','ix_prepared_','definedInSource','source','string','querySelectorAll','addHookIsMaxLearnedSpells','maxLearnedCantrips','plut-is-existing-spell','_cacheFilterValues','MIN_SAFE_INTEGER','maxPrepared','appendTo','_render_bindCantripHooks','click','subSubclassName','toggle','pageFilter','ele','toggleVe','btn-learn-cantrip','_normalisedRange','Spells\x20learned:\x20','dataset','getTblTimeStr','$getHoverContent_stats','canLearnMoreFixedSpellsOfLevel_','subschools','hover','.manc-sp__btn-learn-spell','prepared','_subclassSource','import','Prepare','_isWithinLevelRange','_addHookBase','parentClassName','brewClassSpells','addHookMaxLearnedCantrips','spellLevelHigh','expandedSpellsRace','maxPreparedSpells','subclassName','toLowerCase','_CLASS_MAP','spellDatas','disabled\x20data-plut-is-existing-spell=\x22true\x22','usesCurrent','visibleItems','isAvailableExpandedSpell_','subclassSource','hideVe','manc-sp__is-max-prepared-spells--is-over-limit','942RzvNNK','flat','isPrepared','addItem','add','casterProgression','_state','185163LYbolf','ix_always_prepared_','usesPer','push','</div>\x0a\x09\x09\x09<div\x20class=\x22col-2-6\x20text-right\x22>','_getFormSubData_getSpellImportOpts','_$dispNoRows','updated','pGetFormData','_proxyAssignSimple','disabled','preparationMode','1228uoHXaP','manc-sp__is-max-prepared-spells','_compsLevel','spRangeToFull','ExistingSpell','.manc-sp__btn-learn-cantrip','manc-sp__is-max-learned-spells--is-over-limit','(Previously\x20Added\x20Spell)','btn-learn-spell','</div>\x0a\x09\x09\x09<div\x20class=\x22col-0-5\x20text-center\x22\x20title=\x22Concentration\x22>','_pageFilter','canPrepareMore_','PACT_CASTER_MAX_SPELL_LEVEL','getItemSource','>Prep.</button>','item','set','[+]','<div\x20class=\x22py-1\x20clickable\x20ve-muted\x22>[‒]</div>','data','1202085Kwwpnt','addHookIsMaxPrepared','map','atwill','_getBrewClassSubclassSpellCache','_actor','class','search','742545qcHhfE','existingClass','btn-prepare','manc-sp__btn-learn-cantrip','Cantrips\x20learned:\x20','subSubclass','cacheSelectedListItem','existingCasterMeta','getCombinedClasses','usesMax','_isLearnedFixedSpellCasterAtLevel','450465gGCJPQ','brewSubSubclassSpells','handleSearch','sourceJsonToAbv','spellLevel','text','meta','PG_SPELLS','fromClassListVariant','copy','existingItemId','isPreparedCaster','addHookFixedLearnedProgression','range','_existingSpellLookup','_cacheSelectedListItem','trim','_isConc','mode','841837Sirmwu','_hasBrewSubclassSpell','_getBrewClassSubclassSpellCache_addItem','getExistingSpellMeta_','init','level','innerHTML','_$wrpRows','MODULE_NAME_FAKE','length','alwaysPreparedSpellsSubclass','preventDefault','expandedSpellsSubclass','_getMappedClassDetails','MAX_SAFE_INTEGER','isOverLearnFixedSpellsLimitOfLevel_','classSource','_subclassName','createElement','always','_getProps','_getSpellUid','items','spell','button','parentClassSource','_hasBrewClassSpell','manc-sp__is-max-learned-cantrips','_resetLevelSpells','handleAlwaysPreparedSpells_','constructor','fixedLearnedProgression','_canLearnMoreFixedSpellsOfLevel','remove','_getTotalSpellsKnown','_getListItem','flags','btnPrepare','_parent','isAlwaysPreparedSpell_','manc-sp__is-learn-caster','includes','</div>\x0a\x09\x09\x09<div\x20class=\x22col-0-5\x20text-center\x22\x20title=\x22Ritual\x22>','_spellDatas','subclass','_normalisedTime','_cacheBrewClassSpells','some','_className','isLearnedFixedSpellCasterAtLevel_','_classSource','stopPropagation','manc-sp__is-prepared-caster','forEach','_$wrpPreparedLearned','isStrictMatching','isLearned','</div>\x0a\x09\x09\x09<div\x20class=\x22col-2-4\x20text-center\x22>','render','</div>\x0a\x0a\x09\x09\x09<div\x20class=\x22flex-vh-center\x20col-1-6\x20pr-0\x22>\x0a\x09\x09\x09\x09<button\x20class=\x22btn\x20manc__list-row-button\x20','state','2LKtIIN','contains','[‒]','sort','Ranger','cntLearnedSpells','handleFilterChange'];const _0x31fd=function(_0x3954f9,_0x3205f7){_0x3954f9=_0x3954f9-0x169;let _0x52f16f=_0x52f1[_0x3954f9];return _0x52f16f;};const _0x515c0f=_0x31fd;(function(_0x58d45d,_0x849194){const _0x533927=_0x31fd;while(!![]){try{const _0x424c70=parseInt(_0x533927(0x1ae))+parseInt(_0x533927(0x1a6))+-parseInt(_0x533927(0x21a))+parseInt(_0x533927(0x1b9))+-parseInt(_0x533927(0x186))*-parseInt(_0x533927(0x209))+-parseInt(_0x533927(0x1cc))+-parseInt(_0x533927(0x192))*parseInt(_0x533927(0x17f));if(_0x424c70===_0x849194)break;else _0x58d45d['push'](_0x58d45d['shift']());}catch(_0x5aa371){_0x58d45d['push'](_0x58d45d['shift']());}}}(_0x52f1,0xb7a2e));import{Config}from'./Config.js';import{DataConverter}from'./DataConverter.js';import{SharedConsts}from'../shared/SharedConsts.js';import{UtilActors}from'./UtilActors.js';class Charactermancer_Spell_Util{}class Charactermancer_Spell_SpellMeta{constructor({ix:_0x5b9a7f,spell:_0x12a951,isPrepared:_0x49b219,isLearned:_0x3181f3,isUpdateOnly:_0x31a4a2,existingItemId:_0x655390,preparationMode:_0x3ca7ca,usesCurrent:_0x3d86f0,usesMax:_0x2afc83,usesPer:_0x4cd1f4}){const _0x5909fc=_0x31fd;this['ix']=_0x5b9a7f,this[_0x5909fc(0x1e3)]=_0x12a951,this['isPrepared']=_0x49b219,this[_0x5909fc(0x204)]=_0x3181f3,this[_0x5909fc(0x212)]=_0x31a4a2,this[_0x5909fc(0x1c3)]=_0x655390,this[_0x5909fc(0x191)]=_0x3ca7ca,this[_0x5909fc(0x179)]=_0x3d86f0,this[_0x5909fc(0x1b7)]=_0x2afc83,this[_0x5909fc(0x188)]=_0x4cd1f4;}}class Charactermancer_Spell extends BaseComponent{constructor(_0x2873a3){const _0x15f5c2=_0x31fd;_0x2873a3=_0x2873a3||{},super(),this[_0x15f5c2(0x1ab)]=_0x2873a3[_0x15f5c2(0x230)],this[_0x15f5c2(0x23e)]=_0x2873a3[_0x15f5c2(0x1af)],this[_0x15f5c2(0x21c)]=_0x2873a3[_0x15f5c2(0x1b5)],this[_0x15f5c2(0x1f7)]=_0x2873a3[_0x15f5c2(0x177)],this[_0x15f5c2(0x1fc)]=_0x2873a3[_0x15f5c2(0x211)],this[_0x15f5c2(0x1fe)]=_0x2873a3[_0x15f5c2(0x1dc)],this['_subclassName']=_0x2873a3[_0x15f5c2(0x174)],this[_0x15f5c2(0x169)]=_0x2873a3[_0x15f5c2(0x17c)],this[_0x15f5c2(0x194)]=[...new Array(0xa)]['map']((_0x4546be,_0x40957a)=>new Charactermancer_Spell_Level({'spellDatas':_0x2873a3[_0x15f5c2(0x177)],'spellLevel':_0x40957a,'parent':this})),this[_0x15f5c2(0x19c)]=_0x2873a3[_0x15f5c2(0x259)],this[_0x15f5c2(0x202)]=_0x2873a3[_0x15f5c2(0x244)],this['_existingSpellLookup']=this['_getExistingSpellLookup'](),this[_0x15f5c2(0x1c8)]=null,this[_0x15f5c2(0x251)]=null,this[_0x15f5c2(0x1fa)]=Charactermancer_Spell[_0x15f5c2(0x1aa)](_0x2873a3[_0x15f5c2(0x16f)],_0x2873a3['brewSubclassSpells'],_0x2873a3[_0x15f5c2(0x1ba)]);}['_getExistingSpellLookup'](){const _0x5955c2=_0x31fd;if(!this['_existingClass']||!this[_0x5955c2(0x21c)])return null;const _0x4dbca3=(this[_0x5955c2(0x1ab)]?.['data']?.['items']||[])[_0x5955c2(0x238)](_0x65e3c9=>_0x65e3c9['type']===_0x5955c2(0x1e3)),_0x3dab4a={},_0x584796={},_0x19b08e={};return[..._0x4dbca3][_0x5955c2(0x20c)]((_0x5ada2c,_0x32aace)=>{const _0x45985a=_0x5955c2,_0x36ad3a=_0x5ada2c[_0x45985a(0x1f0)]?.[SharedConsts[_0x45985a(0x1d4)]],_0x36a542=_0x32aace[_0x45985a(0x1f0)]?.[SharedConsts[_0x45985a(0x1d4)]],_0x501352=_0x36ad3a?.[_0x45985a(0x16e)]&&_0x36ad3a?.['parentClassSource']?0x1:0x0,_0x3aba87=_0x36a542?.[_0x45985a(0x16e)]&&_0x36a542?.[_0x45985a(0x1e5)]?0x1:0x0;return _0x3aba87-_0x501352;})[_0x5955c2(0x201)](_0x1b7362=>{const _0x5a92aa=_0x5955c2,_0x5dd3d4=Number(_0x1b7362[_0x5a92aa(0x1a5)]['level']||0x0),_0x8cc8e4=(_0x1b7362[_0x5a92aa(0x21d)]||'')['trim']()[_0x5a92aa(0x175)](),_0x5ed39d=(Config['get'](_0x5a92aa(0x16a),_0x5a92aa(0x203))?DataConverter[_0x5a92aa(0x19f)](_0x1b7362):'')[_0x5a92aa(0x175)](),_0x1c8a90=_0x1b7362[_0x5a92aa(0x1f0)]?.[SharedConsts[_0x5a92aa(0x1d4)]],_0x4e6011=_0x1c8a90?.['parentClassName'],_0x51273b=_0x1c8a90?.['parentClassSource'],_0x3b0913=_0x1b7362[_0x5a92aa(0x1a5)]?.[_0x5a92aa(0x241)]?.['mode']===_0x5a92aa(0x266)&&_0x1b7362[_0x5a92aa(0x1a5)]?.[_0x5a92aa(0x241)]?.[_0x5a92aa(0x266)],_0x350aea=_0x1b7362[_0x5a92aa(0x1a5)]?.[_0x5a92aa(0x241)]?.[_0x5a92aa(0x1cb)]===_0x5a92aa(0x1df);if(_0x4e6011&&_0x51273b&&_0x4e6011!==this[_0x5a92aa(0x23e)][_0x5a92aa(0x21d)]&&_0x51273b!==this[_0x5a92aa(0x23e)][_0x5a92aa(0x24b)])return;if(_0x4e6011&&_0x51273b&&_0x4e6011===this['_existingClass'][_0x5a92aa(0x21d)]&&_0x51273b===this['_existingClass']['source']){const _0x4637cb=_0x5dd3d4===0x0||_0x5dd3d4!==0x0&&this[_0x5a92aa(0x21c)][_0x5a92aa(0x1eb)]!=null,_0x5da4cb=this[_0x5a92aa(0x21c)][_0x5a92aa(0x173)]!=null&&_0x3b0913;if(_0x4637cb)_0x3dab4a[_0x5dd3d4]=(_0x3dab4a[_0x5dd3d4]||0x0)+0x1;if(_0x5da4cb)_0x584796[_0x5dd3d4]=(_0x584796[_0x5dd3d4]||0x0)+0x1;MiscUtil['set'](_0x19b08e,_0x5dd3d4,_0x5ed39d,_0x8cc8e4,new Charactermancer_Spell[(_0x5a92aa(0x196))]({'item':_0x1b7362,'isLearned':_0x4637cb,'isPrepared':_0x5da4cb,'isAlwaysPrepared':_0x350aea}));return;}const _0xc734ca=_0x5dd3d4===0x0||(_0x1b7362[_0x5a92aa(0x1a5)]?.['preparation']?.[_0x5a92aa(0x1cb)]===_0x5a92aa(0x266)||_0x1b7362[_0x5a92aa(0x1a5)]?.['preparation']?.[_0x5a92aa(0x1cb)]==='pact'),_0x46d08e=_0x5dd3d4===0x0?_0xc734ca&&this[_0x5a92aa(0x21c)]['maxLearnedCantrips']!=null&&(_0x3dab4a[_0x5dd3d4]||0x0)<this[_0x5a92aa(0x21c)][_0x5a92aa(0x24f)]:_0xc734ca&&this[_0x5a92aa(0x1ec)]({'lvl':_0x5dd3d4,'fixedLearnedProgression':this['_existingCasterMeta']['fixedLearnedProgression'],'cntSpellsKnown':_0x3dab4a[_0x5dd3d4]||0x0}),_0x19cf85=_0x3b0913&&this[_0x5a92aa(0x21c)][_0x5a92aa(0x173)]!=null&&(_0x584796[_0x5dd3d4]||0x0)<this[_0x5a92aa(0x21c)][_0x5a92aa(0x173)];if(!_0x46d08e&&!_0x19cf85&&!_0x350aea)return;if(!_0x46d08e&&this[_0x5a92aa(0x1b8)]({'lvl':_0x5dd3d4,'fixedLearnedProgression':this[_0x5a92aa(0x21c)]['fixedLearnedProgression']}))return;if(_0x46d08e)_0x3dab4a[_0x5dd3d4]=(_0x3dab4a[_0x5dd3d4]||0x0)+0x1;if(_0x19cf85)_0x584796[_0x5dd3d4]=(_0x584796[_0x5dd3d4]||0x0)+0x1;MiscUtil[_0x5a92aa(0x1a2)](_0x19b08e,_0x5dd3d4,_0x5ed39d,_0x8cc8e4,new Charactermancer_Spell['ExistingSpell']({'item':_0x1b7362,'isLearned':_0x46d08e,'isPrepared':_0x19cf85,'isAlwaysPrepared':_0x350aea}));}),_0x19b08e;}static[_0x515c0f(0x1aa)](_0x4a1f4e,_0x14d12d,_0x28b4fa){const _0x190792=_0x515c0f,_0x53b34f={};return(_0x4a1f4e||[])[_0x190792(0x201)](_0x4bfb36=>this[_0x190792(0x1ce)](_0x53b34f,_0x4bfb36)),(_0x14d12d||[])[_0x190792(0x201)](_0x1ea4de=>this[_0x190792(0x1ce)](_0x53b34f,_0x1ea4de)),(_0x28b4fa||[])[_0x190792(0x201)](_0x517f69=>this[_0x190792(0x1ce)](_0x53b34f,_0x517f69)),_0x53b34f;}static[_0x515c0f(0x1ce)](_0x22963e,_0x3c5e68){const _0x35f16f=_0x515c0f;if(typeof _0x3c5e68===_0x35f16f(0x24c))MiscUtil[_0x35f16f(0x1a2)](_0x22963e,'spell',SRC_PHB[_0x35f16f(0x175)](),_0x3c5e68[_0x35f16f(0x1c9)]()['toLowerCase'](),!![]);else{if(_0x3c5e68[_0x35f16f(0x21d)])MiscUtil['set'](_0x22963e,_0x35f16f(0x1e3),(_0x3c5e68[_0x35f16f(0x24b)]||SRC_PHB)[_0x35f16f(0x1c9)]()[_0x35f16f(0x175)](),_0x3c5e68[_0x35f16f(0x21d)][_0x35f16f(0x1c9)]()[_0x35f16f(0x175)](),!![]);else{if(_0x3c5e68['className']){let _0x1176f9=_0x35f16f(0x1ac);const _0x3b0454=_0x3c5e68[_0x35f16f(0x1dc)]||SRC_PHB,_0x119605=[_0x3b0454,_0x3c5e68['className']];if(_0x3c5e68[_0x35f16f(0x174)]){_0x1176f9=_0x35f16f(0x1f8);const _0x463900=_0x3c5e68[_0x35f16f(0x17c)]||_0x3b0454;_0x119605[_0x35f16f(0x189)](_0x463900,_0x3c5e68[_0x35f16f(0x174)]),_0x3c5e68[_0x35f16f(0x257)]&&(_0x1176f9=_0x35f16f(0x1b3),_0x119605[_0x35f16f(0x189)](_0x3c5e68[_0x35f16f(0x257)]));}MiscUtil[_0x35f16f(0x1a2)](_0x22963e,_0x1176f9,..._0x119605['map'](_0x59fe8d=>_0x59fe8d[_0x35f16f(0x1c9)]()[_0x35f16f(0x175)]()),!![]);}}}}get[_0x515c0f(0x259)](){return this['_pageFilter'];}get[_0x515c0f(0x1b4)](){const _0x52b8ab=_0x515c0f;return this[_0x52b8ab(0x1c8)];}set[_0x515c0f(0x1b4)](_0x488419){this['_cacheSelectedListItem']=_0x488419;}get[_0x515c0f(0x1c4)](){const _0x41980f=_0x515c0f;return this[_0x41980f(0x185)][_0x41980f(0x253)]!=null;}set['spellLevelLow'](_0x2b2b18){const _0x154a38=_0x515c0f;this[_0x154a38(0x185)][_0x154a38(0x23f)]=_0x2b2b18;}get[_0x515c0f(0x23f)](){const _0x4ad94c=_0x515c0f;return this[_0x4ad94c(0x185)][_0x4ad94c(0x23f)];}set[_0x515c0f(0x171)](_0x3fec3d){const _0x207568=_0x515c0f;this[_0x207568(0x185)][_0x207568(0x171)]=_0x3fec3d;}get['spellLevelHigh'](){const _0x207028=_0x515c0f;return this[_0x207028(0x185)]['spellLevelHigh'];}get[_0x515c0f(0x221)](){const _0x3aa8f8=_0x515c0f;return this[_0x3aa8f8(0x185)][_0x3aa8f8(0x221)];}set[_0x515c0f(0x221)](_0xc4e4de){const _0x5627ab=_0x515c0f;this[_0x5627ab(0x185)]['ixViewedSpell']=_0xc4e4de;}get[_0x515c0f(0x24f)](){const _0x8167d6=_0x515c0f;return this[_0x8167d6(0x185)]['maxLearnedCantrips'];}set['maxLearnedCantrips'](_0x433c13){const _0x53e4ed=_0x515c0f;this[_0x53e4ed(0x185)]['maxLearnedCantrips']=_0x433c13;}get[_0x515c0f(0x1eb)](){const _0xd376e6=_0x515c0f;return this[_0xd376e6(0x185)][_0xd376e6(0x1eb)];}set['fixedLearnedProgression'](_0x22c7bd){const _0x15b707=_0x515c0f;this[_0x15b707(0x185)]['fixedLearnedProgression']=_0x22c7bd;}get[_0x515c0f(0x234)](){const _0x4b919d=_0x515c0f;return this['_state'][_0x4b919d(0x234)];}set[_0x515c0f(0x234)](_0xc03a7a){const _0x268986=_0x515c0f;this[_0x268986(0x185)][_0x268986(0x234)]=_0xc03a7a;}set[_0x515c0f(0x253)](_0x5ebb1a){const _0x128182=_0x515c0f;this[_0x128182(0x185)]['maxPrepared']=_0x5ebb1a;if(_0x5ebb1a!=null)this['_state']['maxLearned']=null;}get[_0x515c0f(0x20e)](){const _0x3c1c66=_0x515c0f;return this[_0x3c1c66(0x185)][_0x3c1c66(0x20e)];}set['cntLearnedSpells'](_0x2b5d16){const _0x2276ab=_0x515c0f;this[_0x2276ab(0x185)][_0x2276ab(0x20e)]=_0x2b5d16;}get['cntLearnedCantrips'](){const _0x1c4c90=_0x515c0f;return this['_state'][_0x1c4c90(0x225)];}set[_0x515c0f(0x225)](_0x3112f4){const _0xab1589=_0x515c0f;this[_0xab1589(0x185)][_0xab1589(0x225)]=_0x3112f4;}get['cntPrepared'](){const _0x203daf=_0x515c0f;return this[_0x203daf(0x185)]['cntPrepared'];}set[_0x515c0f(0x220)](_0x362ca9){const _0x3d6745=_0x515c0f;this['_state'][_0x3d6745(0x220)]=_0x362ca9;}get[_0x515c0f(0x184)](){const _0x36c8fa=_0x515c0f;return this[_0x36c8fa(0x185)][_0x36c8fa(0x184)];}set[_0x515c0f(0x184)](_0x403e3c){this['_state']['casterProgression']=_0x403e3c;}set[_0x515c0f(0x23a)](_0x760759){const _0x4443d2=_0x515c0f;this[_0x4443d2(0x185)][_0x4443d2(0x23a)]=_0x760759;}[_0x515c0f(0x170)](_0x4306b4){const _0x5c81ee=_0x515c0f;this[_0x5c81ee(0x16d)]('maxLearnedCantrips',_0x4306b4);}['addHookSpellLevelLow'](_0x32ccf6){const _0x22e68f=_0x515c0f;this[_0x22e68f(0x16d)](_0x22e68f(0x23f),_0x32ccf6);}['addHookSpellLevelHigh'](_0x5c2af6){const _0x397914=_0x515c0f;this['_addHookBase'](_0x397914(0x171),_0x5c2af6);}[_0x515c0f(0x1c5)](_0x3c130c){const _0xd21f50=_0x515c0f;this[_0xd21f50(0x16d)](_0xd21f50(0x1eb),_0x3c130c);}[_0x515c0f(0x224)](_0x48c91a){const _0x731a80=_0x515c0f;this[_0x731a80(0x16d)](_0x731a80(0x253),_0x48c91a);}[_0x515c0f(0x24e)](_0x391538){const _0x19ea0a=_0x515c0f;this['_addHookBase'](_0x19ea0a(0x1eb),_0x391538),this[_0x19ea0a(0x16d)]('pulseFixedLearned',_0x391538),this[_0x19ea0a(0x16d)](_0x19ea0a(0x23f),_0x391538),this[_0x19ea0a(0x16d)](_0x19ea0a(0x171),_0x391538);}['addHookIsMaxLearnedCantrips'](_0x3f03af){const _0x34c5af=_0x515c0f;this[_0x34c5af(0x16d)](_0x34c5af(0x225),_0x3f03af),this['_addHookBase'](_0x34c5af(0x24f),_0x3f03af);}['addHookIsMaxPrepared'](_0x46b09b){const _0x55afe5=_0x515c0f;this['_addHookBase'](_0x55afe5(0x220),_0x46b09b),this['_addHookBase'](_0x55afe5(0x253),_0x46b09b);}[_0x515c0f(0x1fd)](_0x327963){const _0x182550=_0x515c0f;return this['_isLearnedFixedSpellCasterAtLevel']({'lvl':_0x327963,'fixedLearnedProgression':this[_0x182550(0x185)][_0x182550(0x1eb)]});}[_0x515c0f(0x1b8)]({lvl:_0x432f8f,fixedLearnedProgression:_0x553c3a}){return _0x432f8f>0x0&&_0x553c3a!=null&&_0x553c3a[_0x432f8f-0x1]>0x0;}[_0x515c0f(0x262)](_0x7272e8){const _0x167bab=_0x515c0f;return this[_0x167bab(0x1ec)]({'lvl':_0x7272e8,'fixedLearnedProgression':this[_0x167bab(0x185)][_0x167bab(0x1eb)],'cntSpellsKnown':this[_0x167bab(0x194)][_0x7272e8]['getSpellsKnown']()[_0x167bab(0x1d5)]});}['_canLearnMoreFixedSpellsOfLevel']({lvl:_0x226ad7,fixedLearnedProgression:_0x1919e2,cntSpellsKnown:_0x1da624}){if(!_0x1919e2)return![];if(!_0x1919e2[_0x226ad7-0x1])return![];return _0x1da624<_0x1919e2[_0x226ad7-0x1];}[_0x515c0f(0x1db)](_0xb9d875){const _0x3185a6=_0x515c0f;if(!this[_0x3185a6(0x185)][_0x3185a6(0x1eb)])return![];if(!this['_state'][_0x3185a6(0x1eb)][_0xb9d875-0x1])return![];const _0x39c8ca=this[_0x3185a6(0x194)][_0xb9d875][_0x3185a6(0x245)]();return _0x39c8ca[_0x3185a6(0x1d5)]>this['_state'][_0x3185a6(0x1eb)][_0xb9d875-0x1];}[_0x515c0f(0x22e)](){const _0x53d6a2=_0x515c0f;return this['_state'][_0x53d6a2(0x225)]<(this[_0x53d6a2(0x185)][_0x53d6a2(0x24f)]||0x0);}[_0x515c0f(0x22a)](){const _0xeb1d63=_0x515c0f;return this[_0xeb1d63(0x185)][_0xeb1d63(0x225)]>(this[_0xeb1d63(0x185)][_0xeb1d63(0x24f)]||0x0);}['canPrepareMore_'](){const _0x485d13=_0x515c0f;return this[_0x485d13(0x185)][_0x485d13(0x220)]<(this[_0x485d13(0x185)]['maxPrepared']||0x0);}[_0x515c0f(0x239)](){const _0x3f5fb5=_0x515c0f;return this[_0x3f5fb5(0x185)]['cntPrepared']>(this[_0x3f5fb5(0x185)][_0x3f5fb5(0x253)]||0x0);}['_getCntSpellsKnown'](){const _0x184ba1=_0x515c0f;return this[_0x184ba1(0x194)][_0x184ba1(0x1a8)](_0x527a2f=>_0x527a2f[_0x184ba1(0x245)]()[_0x184ba1(0x1d5)])[_0x184ba1(0x23b)]();}[_0x515c0f(0x1ee)](){const _0x750617=_0x515c0f;return(this[_0x750617(0x185)][_0x750617(0x1eb)]||[])[_0x750617(0x23b)]();}['render'](_0x18513d,_0x1cf9ef){const _0x215c9b=_0x515c0f,_0x236759=()=>{const _0x316343=_0x31fd,_0x5041fb=[this[_0x316343(0x185)][_0x316343(0x24f)]?_0x316343(0x1b2)+this[_0x316343(0x185)]['cntLearnedCantrips']+'/'+this['_state'][_0x316343(0x24f)]:null,this['_state'][_0x316343(0x1eb)]?_0x316343(0x25e)+this[_0x316343(0x243)]()+'/'+this[_0x316343(0x1ee)]():null,this[_0x316343(0x185)][_0x316343(0x253)]?'Prepared:\x20'+this[_0x316343(0x185)][_0x316343(0x220)]+'/'+this[_0x316343(0x185)][_0x316343(0x253)]:null]['filter'](Boolean);this['_$wrpPreparedLearned']['toggleVe'](_0x5041fb[_0x316343(0x1d5)])[_0x316343(0x248)](_0x5041fb['join']('<div\x20class=\x22mx-1\x22>—</div>'));};this[_0x215c9b(0x16d)](_0x215c9b(0x220),_0x236759),this['_addHookBase'](_0x215c9b(0x253),_0x236759),this['_addHookBase'](_0x215c9b(0x1eb),_0x236759),this[_0x215c9b(0x16d)](_0x215c9b(0x234),_0x236759),this['_addHookBase'](_0x215c9b(0x225),_0x236759),this[_0x215c9b(0x16d)]('maxLearnedCantrips',_0x236759),_0x236759();const _0x153dcc=()=>this[_0x215c9b(0x21f)]();this[_0x215c9b(0x16d)](_0x215c9b(0x240),_0x153dcc),this[_0x215c9b(0x16d)](_0x215c9b(0x1d6),_0x153dcc),_0x153dcc();const _0x5a41d6=()=>this[_0x215c9b(0x20f)]();this['_addHookBase']('expandedSpellsRace',_0x5a41d6),this[_0x215c9b(0x16d)](_0x215c9b(0x1d8),_0x5a41d6),this[_0x215c9b(0x16d)](_0x215c9b(0x23a),_0x5a41d6),_0x5a41d6(),this[_0x215c9b(0x194)][_0x215c9b(0x201)](_0x37418f=>_0x37418f['render'](_0x18513d));const _0x454f71=()=>{const _0x14e9be=_0x215c9b;_0x1cf9ef['empty']();const _0x4d5d35=this[_0x14e9be(0x1f7)][this['_state'][_0x14e9be(0x221)]];if(!_0x4d5d35)return _0x1cf9ef[_0x14e9be(0x229)]('<div\x20class=\x22flex-vh-center\x20w-100\x20h-100\x20italic\x20ve-muted\x22>Select\x20a\x20spell\x20to\x20view</div>');_0x1cf9ef['append'](Renderer[_0x14e9be(0x264)][_0x14e9be(0x261)](UrlUtil[_0x14e9be(0x1c0)],MiscUtil[_0x14e9be(0x1c2)](_0x4d5d35)));};this[_0x215c9b(0x16d)](_0x215c9b(0x221),_0x454f71),_0x454f71();}[_0x515c0f(0x21f)](){const _0x149fdb=_0x515c0f;this['_compsLevel'][_0x149fdb(0x201)](_0x554d26=>_0x554d26[_0x149fdb(0x1e9)]());}[_0x515c0f(0x20f)](_0x5d690a){const _0xd75079=_0x515c0f;this[_0xd75079(0x251)]=_0x5d690a||this[_0xd75079(0x251)];if(!this[_0xd75079(0x251)])return;this[_0xd75079(0x194)][_0xd75079(0x201)](_0x40537c=>_0x40537c[_0xd75079(0x20f)](this[_0xd75079(0x251)]));}[_0x515c0f(0x1bb)](_0xa65a51){const _0xe840e9=_0x515c0f;this[_0xe840e9(0x194)]['forEach'](_0x4197f4=>_0x4197f4[_0xe840e9(0x1bb)](_0xa65a51));}[_0x515c0f(0x1cf)](_0x3991b4){const _0x147ca6=_0x515c0f;if(!this[_0x147ca6(0x21c)]||!this['_existingSpellLookup'])return null;const _0xaa86e4=(Config[_0x147ca6(0x23c)](_0x147ca6(0x16a),_0x147ca6(0x203))?Parser[_0x147ca6(0x1bc)](_0x3991b4['source']):'')[_0x147ca6(0x175)](),_0x202559=_0x3991b4[_0x147ca6(0x21d)][_0x147ca6(0x175)]();return this[_0x147ca6(0x1c7)][_0x3991b4[_0x147ca6(0x1d1)]]?.[_0xaa86e4]?.[_0x202559];}['isAvailableClassSpell_'](_0x1e6080){const _0x4decfc=_0x515c0f;if(!this[_0x4decfc(0x1fc)]||!this['_classSource'])return![];const _0x519ef=Renderer[_0x4decfc(0x1e3)][_0x4decfc(0x1b6)](_0x1e6080,_0x4decfc(0x210)),_0x89f64=Renderer[_0x4decfc(0x1e3)][_0x4decfc(0x1b6)](_0x1e6080,_0x4decfc(0x1c1))['filter'](_0x5c9532=>this['_state'][_0x4decfc(0x23a)]?!![]:!SourceUtil[_0x4decfc(0x242)](_0x5c9532[_0x4decfc(0x24a)])),{className:_0x3c8fa6,classSource:_0x527e90}=this[_0x4decfc(0x1ea)][_0x4decfc(0x1d9)]({'className':this[_0x4decfc(0x1fc)],'classSource':this[_0x4decfc(0x1fe)]});if(!_0x519ef[_0x4decfc(0x1fb)](_0x2eaa4f=>_0x2eaa4f[_0x4decfc(0x21d)]===_0x3c8fa6&&_0x2eaa4f[_0x4decfc(0x24b)]===_0x527e90)&&!_0x89f64[_0x4decfc(0x1fb)](_0xcc35be=>_0xcc35be[_0x4decfc(0x21d)]===_0x3c8fa6&&_0xcc35be['source']===_0x527e90)&&!this[_0x4decfc(0x1e6)](_0x1e6080,_0x519ef,_0x89f64))return![];return!![];}[_0x515c0f(0x228)](_0x51f1bf){const _0x1244a4=_0x515c0f;if(!this[_0x1244a4(0x1dd)]||!this['_subclassSource'])return![];const _0x324d37=Renderer['spell'][_0x1244a4(0x1b6)](_0x51f1bf,'fromSubclass');if(!_0x324d37[_0x1244a4(0x1fb)](_0x416134=>_0x416134?.[_0x1244a4(0x1ac)][_0x1244a4(0x21d)]===this['_className']&&_0x416134?.[_0x1244a4(0x1ac)]['source']===this['_classSource']&&_0x416134?.[_0x1244a4(0x1f8)]['name']===this[_0x1244a4(0x1dd)]&&_0x416134?.['subclass']['source']===this[_0x1244a4(0x169)])&&!this[_0x1244a4(0x1cd)](_0x51f1bf,_0x324d37))return![];return!![];}[_0x515c0f(0x1e6)](_0x5dc267,_0x4f5fde,_0x3d017a){const _0xb0567d=_0x515c0f;if(MiscUtil[_0xb0567d(0x23c)](this[_0xb0567d(0x1fa)],_0xb0567d(0x1e3),_0x5dc267[_0xb0567d(0x24b)][_0xb0567d(0x175)](),_0x5dc267['name'][_0xb0567d(0x175)]()))return!![];if(_0x4f5fde[_0xb0567d(0x1fb)](_0x4a44e1=>MiscUtil[_0xb0567d(0x23c)](this[_0xb0567d(0x1fa)],_0xb0567d(0x1ac),_0x4a44e1['source'][_0xb0567d(0x175)](),_0x4a44e1[_0xb0567d(0x21d)]['toLowerCase']())))return!![];if(_0x3d017a[_0xb0567d(0x1fb)](_0x52608d=>MiscUtil['get'](this['_cacheBrewClassSpells'],_0xb0567d(0x1ac),_0x52608d['source']['toLowerCase'](),_0x52608d[_0xb0567d(0x21d)][_0xb0567d(0x175)]())))return!![];return![];}[_0x515c0f(0x1cd)](_0x36a36a,_0x507039){const _0x4c06d1=_0x515c0f;if(MiscUtil[_0x4c06d1(0x23c)](this[_0x4c06d1(0x1fa)],_0x4c06d1(0x1e3),_0x36a36a[_0x4c06d1(0x24b)][_0x4c06d1(0x175)](),_0x36a36a['name'][_0x4c06d1(0x175)]()))return!![];if(_0x507039[_0x4c06d1(0x1fb)](_0x25dcb4=>!_0x25dcb4[_0x4c06d1(0x1b3)]&&MiscUtil['get'](this[_0x4c06d1(0x1fa)],'subclass',_0x25dcb4[_0x4c06d1(0x1ac)]['source']['toLowerCase'](),_0x25dcb4[_0x4c06d1(0x1ac)]['name']['toLowerCase'](),_0x25dcb4[_0x4c06d1(0x1f8)]['source'][_0x4c06d1(0x175)](),_0x25dcb4[_0x4c06d1(0x1f8)][_0x4c06d1(0x21d)][_0x4c06d1(0x175)]())))return!![];if(_0x507039[_0x4c06d1(0x1fb)](_0x44f4fb=>_0x44f4fb[_0x4c06d1(0x1b3)]&&MiscUtil[_0x4c06d1(0x23c)](this['_cacheBrewClassSpells'],_0x4c06d1(0x1b3),_0x44f4fb[_0x4c06d1(0x1ac)]['source']['toLowerCase'](),_0x44f4fb['class']['name'][_0x4c06d1(0x175)](),_0x44f4fb['subclass'][_0x4c06d1(0x24b)][_0x4c06d1(0x175)](),_0x44f4fb[_0x4c06d1(0x1f8)][_0x4c06d1(0x21d)][_0x4c06d1(0x175)](),_0x44f4fb[_0x4c06d1(0x1f8)][_0x4c06d1(0x1b3)]['toLowerCase']())))return!![];return![];}['isAlwaysPreparedSpell_'](_0x71d770){const _0x283c3a=_0x515c0f,_0x7cf820=this[_0x283c3a(0x1ea)]['_getSpellUid'](_0x71d770);if(this[_0x283c3a(0x185)]['alwaysPreparedSpellsRace'][_0x283c3a(0x1f5)](_0x7cf820))return!![];if(this[_0x283c3a(0x185)][_0x283c3a(0x1d6)][_0x283c3a(0x1f5)](_0x7cf820))return!![];return![];}[_0x515c0f(0x17b)](_0x30dc5b){const _0x14967a=_0x515c0f,_0xf7fac4=this['constructor'][_0x14967a(0x1e1)](_0x30dc5b);if(this[_0x14967a(0x185)]['expandedSpellsRace']['includes'](_0xf7fac4))return!![];if(this[_0x14967a(0x185)][_0x14967a(0x1d8)]['includes'](_0xf7fac4))return!![];return![];}static['_getSpellUid'](_0x21c68f){const _0x2c1dd0=_0x515c0f;return _0x21c68f[_0x2c1dd0(0x21d)][_0x2c1dd0(0x175)]()+'|'+_0x21c68f[_0x2c1dd0(0x24b)][_0x2c1dd0(0x175)]();}set[_0x515c0f(0x240)](_0x1ba3ea){const _0xd1c43d=_0x515c0f;this['_state'][_0xd1c43d(0x240)]=_0x1ba3ea;}set[_0x515c0f(0x1d6)](_0x1ff3b7){const _0x3ab6d6=_0x515c0f;this[_0x3ab6d6(0x185)][_0x3ab6d6(0x1d6)]=_0x1ff3b7;}set[_0x515c0f(0x172)](_0x4db387){const _0x359c91=_0x515c0f;this[_0x359c91(0x185)][_0x359c91(0x172)]=_0x4db387;}set[_0x515c0f(0x1d8)](_0x4d6ea5){const _0x4eee04=_0x515c0f;this['_state'][_0x4eee04(0x1d8)]=_0x4d6ea5;}async[_0x515c0f(0x18e)](_0x3bb070){const _0x1efe26=_0x515c0f;return{'isFormComplete':(this[_0x1efe26(0x185)][_0x1efe26(0x225)]===this[_0x1efe26(0x185)]['maxLearnedCantrips']||0x0)&&(this[_0x1efe26(0x185)][_0x1efe26(0x220)]===this[_0x1efe26(0x185)]['maxPrepared']||0x0),'data':{'spells':this[_0x1efe26(0x194)]['map'](_0x2cdb58=>_0x2cdb58[_0x1efe26(0x226)](_0x3bb070))[_0x1efe26(0x180)]()}};}['_getDefaultState'](){return{'spellLevelLow':null,'spellLevelHigh':null,'ixViewedSpell':null,'cntLearnedCantrips':0x0,'maxLearnedCantrips':null,'fixedLearnedProgression':null,'pulseFixedLearned':![],'cntPrepared':0x0,'maxPrepared':null,'alwaysPreparedSpellsRace':[],'alwaysPreparedSpellsSubclass':[],'alwaysPreparedSpellsBackground':{},'alwaysPreparedSpellsFeat':{},'expandedSpellsRace':[],'expandedSpellsSubclass':[],'expandedSpellsBackground':{},'expandedSpellsFeat':{},'casterProgression':null,'isIncludeUaEtcSpellLists':![]};}static[_0x515c0f(0x1d9)]({className:_0x48b8f1,classSource:_0x1f40f1}){return Charactermancer_Spell_Level['_CLASS_MAP']?.[_0x1f40f1]?.[_0x48b8f1]||{'className':_0x48b8f1,'classSource':_0x1f40f1};}}Charactermancer_Spell[_0x515c0f(0x176)]={[SRC_UATRR]:{'Ranger\x20(Revised)':{'className':_0x515c0f(0x20d),'classSource':SRC_PHB}}},Charactermancer_Spell[_0x515c0f(0x196)]=class{constructor({item:_0x2aff1f,isLearned:_0x411342,isPrepared:_0x5111f9,isAlwaysPrepared:_0x389faa}){const _0x31faea=_0x515c0f;this[_0x31faea(0x1a1)]=_0x2aff1f,this[_0x31faea(0x204)]=_0x411342,this[_0x31faea(0x181)]=_0x5111f9,this[_0x31faea(0x222)]=_0x389faa;}};class Charactermancer_Spell_Level extends BaseComponent{constructor(_0x1e6be3){const _0x58709a=_0x515c0f;super(),_0x1e6be3=_0x1e6be3||{},this['_spellDatas']=_0x1e6be3['spellDatas'],this['_spellLevel']=_0x1e6be3[_0x58709a(0x1bd)],this['_parent']=_0x1e6be3[_0x58709a(0x22f)],this['_$wrpRows']=null,this[_0x58709a(0x18c)]=null,this[_0x58709a(0x237)]=null;}[_0x515c0f(0x219)](_0x28999f){const _0x224564=_0x515c0f;return _0x28999f['level']===this[_0x224564(0x23d)];}[_0x515c0f(0x206)](_0x3c433b){const _0x59b5b7=_0x515c0f;this[_0x59b5b7(0x1d3)]=$$`<div class="flex-col manc__list mt-1 mb-3"></div>`,this[_0x59b5b7(0x18c)]=$('<div\x20class=\x22flex-vh-center\x20italic\x20ve-muted\x20ve-small\x20mt-1\x22>No\x20matching\x20spells</div>')[_0x59b5b7(0x17d)]();const _0x1fcb6d=()=>{const _0x4ed384=_0x59b5b7;this[_0x4ed384(0x18c)][_0x4ed384(0x25b)](!this[_0x4ed384(0x237)][_0x4ed384(0x17a)]['length']&&_0x259867[_0x4ed384(0x1be)]()!==_0x4ed384(0x1a3));},_0x22864e=$('<div\x20class=\x22flex-v-stretch\x20input-group\x20no-shrink\x22>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-3-2\x20pr-1\x20sort\x22\x20data-sort=\x22name\x22>Name</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-2-4\x20px-1\x20sort\x22\x20data-sort=\x22time\x22>Time</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-1-2\x20px-1\x20sort\x22\x20data-sort=\x22school\x22>School</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-0-5\x20px-1\x20sort\x22\x20data-sort=\x22concentration\x22\x20title=\x22Concentration\x22>C.</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-0-5\x20px-1\x20sort\x22\x20data-sort=\x22ritual\x22\x20title=\x22Ritual\x22>R.</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-2-6\x20px-1\x20sort\x22\x20data-sort=\x22range\x22>Range</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-1-6\x20pl-1\x22\x20disabled>&nbsp;</button>\x0a\x09\x09</div>');this['_list']=new List({'$wrpList':this[_0x59b5b7(0x1d3)],'fnSort':PageFilterSpells[_0x59b5b7(0x216)],'fnSearch':(_0x210416,_0x58a990)=>{const _0x4cec00=_0x59b5b7,{ixLearned:_0x30be52,ixPrepared:_0x13480c,ixAlwaysPrepared:_0x53d8d3}=this[_0x4cec00(0x1ea)][_0x4cec00(0x1e0)](_0x210416['ix']);if(this[_0x4cec00(0x185)][_0x30be52]||this[_0x4cec00(0x185)][_0x13480c]||this[_0x4cec00(0x185)][_0x53d8d3])return!![];return _0x210416['searchText'][_0x4cec00(0x1f5)](_0x58a990);}}),SortUtil['initBtnSortHandlers'](_0x22864e,this[_0x59b5b7(0x237)]),this[_0x59b5b7(0x237)]['on'](_0x59b5b7(0x18d),()=>_0x1fcb6d());const _0x259867=$(_0x59b5b7(0x1a4))[_0x59b5b7(0x256)](()=>{const _0x2a5940=_0x59b5b7;_0x259867[_0x2a5940(0x1be)](_0x259867[_0x2a5940(0x1be)]()===_0x2a5940(0x1a3)?_0x2a5940(0x20b):_0x2a5940(0x1a3)),this[_0x2a5940(0x1d3)][_0x2a5940(0x25b)](),_0x22864e[_0x2a5940(0x25b)](),_0x1fcb6d();}),_0x26fc17=$$`<div class="flex-col w-100">
			<div class="split-v-center">
				<div class="bold">${Parser[_0x59b5b7(0x231)](this[_0x59b5b7(0x23d)])}</div>
				${_0x259867}
			</div>
			${_0x22864e}
			${this['_$dispNoRows']}
			${this[_0x59b5b7(0x1d3)]}
		</div>`[_0x59b5b7(0x254)](_0x3c433b),_0x3c796a=this[_0x59b5b7(0x1f7)][_0x59b5b7(0x1d5)];for(let _0x428721=0x0;_0x428721<_0x3c796a;++_0x428721){const _0x3d3bc9=this[_0x59b5b7(0x1f7)][_0x428721];if(!this[_0x59b5b7(0x219)](_0x3d3bc9))continue;const _0x4a68ad=this['_getListItem'](_0x3d3bc9,_0x428721);if(!_0x4a68ad)continue;this[_0x59b5b7(0x237)][_0x59b5b7(0x182)](_0x4a68ad);}this['_list'][_0x59b5b7(0x1d0)]();const _0x87f07b=()=>{const _0x1bd9c9=_0x59b5b7,_0x5779d6=this['_isWithinLevelRange']();_0x26fc17[_0x1bd9c9(0x25b)](_0x5779d6);if(!_0x5779d6)this[_0x1bd9c9(0x1e8)]();};this[_0x59b5b7(0x1f2)][_0x59b5b7(0x170)](_0x87f07b),this[_0x59b5b7(0x1f2)][_0x59b5b7(0x213)](_0x87f07b),this[_0x59b5b7(0x1f2)][_0x59b5b7(0x218)](_0x87f07b),this[_0x59b5b7(0x1f2)][_0x59b5b7(0x1c5)](_0x87f07b),_0x87f07b();if(this[_0x59b5b7(0x23d)]===0x0)this[_0x59b5b7(0x255)]();else this['_render_bindLevelledSpellHooks']();}[_0x515c0f(0x255)](){const _0x197d95=_0x515c0f,_0x34c6c2=()=>{const _0x2d6ffc=_0x31fd;this[_0x2d6ffc(0x1d3)][_0x2d6ffc(0x22b)](_0x2d6ffc(0x1e7),!this[_0x2d6ffc(0x1f2)][_0x2d6ffc(0x22e)]()),this[_0x2d6ffc(0x1d3)][_0x2d6ffc(0x22b)](_0x2d6ffc(0x247),this[_0x2d6ffc(0x1f2)][_0x2d6ffc(0x22a)]());};this['_parent'][_0x197d95(0x223)](_0x34c6c2),_0x34c6c2();}['_render_bindLevelledSpellHooks'](){const _0x196769=_0x515c0f,_0x1c34ee=()=>this[_0x196769(0x1d3)][_0x196769(0x22b)](_0x196769(0x200),this['_parent']['isPreparedCaster']);this[_0x196769(0x1f2)]['addHookIsPreparedCaster'](_0x1c34ee),_0x1c34ee();const _0x57af16=()=>{const _0x3983c5=_0x196769,_0x4756c2=this['_parent'][_0x3983c5(0x1fd)](this[_0x3983c5(0x23d)]);let _0x506847=!![],_0x305bfc=!![];if(_0x4756c2){if(this[_0x3983c5(0x1f2)][_0x3983c5(0x262)](this['_spellLevel']))_0x506847=![];if(!this[_0x3983c5(0x1f2)][_0x3983c5(0x1db)](this['_spellLevel']))_0x305bfc=![];}this[_0x3983c5(0x1d3)]['toggleClass'](_0x3983c5(0x1f4),_0x4756c2),this[_0x3983c5(0x1d3)][_0x3983c5(0x22b)]('manc-sp__is-max-learned-spells',_0x4756c2&&_0x506847),this[_0x3983c5(0x1d3)]['toggleClass'](_0x3983c5(0x198),_0x4756c2&&_0x305bfc);};this[_0x196769(0x1f2)][_0x196769(0x24e)](_0x57af16),_0x57af16();const _0x158368=()=>{const _0x5aaf96=_0x196769;this[_0x5aaf96(0x1d3)][_0x5aaf96(0x22b)](_0x5aaf96(0x193),!this['_parent'][_0x5aaf96(0x19d)]()),this['_$wrpRows'][_0x5aaf96(0x22b)](_0x5aaf96(0x17e),this['_parent'][_0x5aaf96(0x239)]());};this['_parent'][_0x196769(0x1a7)](_0x158368),_0x158368();}['_isWithinLevelRange'](){const _0x3fc1c7=_0x515c0f;if(this[_0x3fc1c7(0x23d)]!==0x0&&this[_0x3fc1c7(0x1f2)][_0x3fc1c7(0x1eb)]!=null&&this[_0x3fc1c7(0x1f2)][_0x3fc1c7(0x1eb)][this[_0x3fc1c7(0x23d)]-0x1])return!![];if(this['_spellLevel']===0x0)return!!this[_0x3fc1c7(0x1f2)][_0x3fc1c7(0x24f)];return this[_0x3fc1c7(0x23d)]>=(this[_0x3fc1c7(0x1f2)][_0x3fc1c7(0x23f)]??Number[_0x3fc1c7(0x1da)])&&this['_spellLevel']<=(this[_0x3fc1c7(0x1f2)][_0x3fc1c7(0x171)]??Number[_0x3fc1c7(0x252)]);}[_0x515c0f(0x1ef)](_0x756a7f,_0x54d150){const _0xee8dcc=_0x515c0f,{ixLearned:_0x34bc97,ixPrepared:_0x59a7d6,ixAlwaysPrepared:_0x4d140e}=this[_0xee8dcc(0x1ea)][_0xee8dcc(0x1e0)](_0x54d150),_0x355851=this['_parent']['getExistingSpellMeta_'](_0x756a7f);if(_0x355851){if(_0x355851[_0xee8dcc(0x204)]){this[_0xee8dcc(0x185)][_0x34bc97]=!![];if(_0x756a7f[_0xee8dcc(0x1d1)]===0x0)this[_0xee8dcc(0x1f2)]['cntLearnedCantrips']++;}_0x355851[_0xee8dcc(0x181)]&&!_0x355851[_0xee8dcc(0x222)]&&(this[_0xee8dcc(0x185)][_0x59a7d6]=!![],this[_0xee8dcc(0x1f2)][_0xee8dcc(0x220)]++),_0x355851[_0xee8dcc(0x222)]&&(this[_0xee8dcc(0x185)][_0x4d140e]=!![]);}const _0x52dd47=document[_0xee8dcc(0x1de)]('div');_0x52dd47[_0xee8dcc(0x211)]=_0xee8dcc(0x22c),_0x52dd47[_0xee8dcc(0x25f)]['ix']=_0x54d150;const _0x47570f=Parser[_0xee8dcc(0x1bc)](_0x756a7f[_0xee8dcc(0x24b)]),_0x18ba27=PageFilterSpells[_0xee8dcc(0x260)](_0x756a7f['time'][0x0]),_0x4919f3=Parser['spSchoolAndSubschoolsAbvsShort'](_0x756a7f[_0xee8dcc(0x21b)],_0x756a7f[_0xee8dcc(0x263)]),_0x33bc99=_0x756a7f[_0xee8dcc(0x1ca)]?'×':'',_0x1dfb08=_0x756a7f[_0xee8dcc(0x1bf)]?.['ritual']?'×':'',_0xf13ec8=Parser[_0xee8dcc(0x195)](_0x756a7f[_0xee8dcc(0x1c6)]),_0x135665=_0x355851&&(this['_spellLevel']===0x0||_0x355851[_0xee8dcc(0x204)]),_0x28c620=_0x135665||this[_0xee8dcc(0x185)][_0x4d140e];_0x52dd47[_0xee8dcc(0x1d2)]=_0xee8dcc(0x233)+_0x756a7f['name']+_0xee8dcc(0x205)+_0x18ba27+'</div>\x0a\x09\x09\x09<div\x20class=\x22col-1-2\x20sp__school-'+_0x756a7f['school']+'\x20text-center\x22\x20title=\x22'+Parser['spSchoolAndSubschoolsAbvsToFull'](_0x756a7f[_0xee8dcc(0x21b)],_0x756a7f[_0xee8dcc(0x263)])+'\x22\x20'+Parser['spSchoolAbvToStyle'](_0x756a7f['school'])+'>'+_0x4919f3+_0xee8dcc(0x19b)+_0x33bc99+_0xee8dcc(0x1f6)+_0x1dfb08+_0xee8dcc(0x18a)+_0xf13ec8+_0xee8dcc(0x207)+(this[_0xee8dcc(0x23d)]===0x0?_0xee8dcc(0x1b1):'manc-sp__btn-learn-spell')+'\x20'+(this[_0xee8dcc(0x185)][_0x34bc97]||_0x355851?.['isLearned']?_0xee8dcc(0x21e):'')+'\x22\x20name=\x22'+(this['_spellLevel']===0x0?_0xee8dcc(0x25c):_0xee8dcc(0x19a))+'\x22\x20'+(_0x355851?_0xee8dcc(0x178):'')+'\x20'+(_0x355851?'title=\x22(Previously\x20Learned\x20Spell)\x22':'')+'>Learn</button>\x0a\x0a\x09\x09\x09\x09'+(this['_spellLevel']!==0x0?'<button\x20class=\x22btn\x20manc__list-row-button\x20manc-sp__btn-prepare\x20'+(this[_0xee8dcc(0x185)][_0x59a7d6]||this[_0xee8dcc(0x185)][_0x4d140e]||_0x355851?.[_0xee8dcc(0x181)]||_0x355851?.[_0xee8dcc(0x222)]?'active':'')+'\x22\x20name=\x22btn-prepare\x22\x20title=\x22'+(_0x135665?_0xee8dcc(0x199):_0xee8dcc(0x16b))+'\x22\x20'+(_0x28c620?_0xee8dcc(0x190):'')+'\x20'+(_0x135665?_0xee8dcc(0x214):'')+_0xee8dcc(0x1a0):'')+'\x0a\x09\x09\x09</div>\x0a\x09\x09';const _0x5b1170=_0x52dd47[_0xee8dcc(0x24d)](_0xee8dcc(0x1e4)),[_0x54c0f4,_0x10639d]=_0x5b1170,_0x36ee62=new ListItem(_0x54d150,_0x52dd47,_0x756a7f[_0xee8dcc(0x21d)],{'source':_0x47570f,'level':_0x756a7f['level'],'time':_0x18ba27,'school':Parser['spSchoolAbvToFull'](_0x756a7f[_0xee8dcc(0x21b)]),'concentration':_0x33bc99,'ritual':_0x1dfb08,'normalisedTime':_0x756a7f[_0xee8dcc(0x1f9)],'normalisedRange':_0x756a7f[_0xee8dcc(0x25d)]},{'btnLearn':_0x54c0f4,'btnPrepare':_0x10639d});return _0x5b1170[_0xee8dcc(0x201)](_0x162de4=>{const _0x53b005=_0xee8dcc;_0x162de4[_0x53b005(0x235)](_0x53b005(0x256),_0x53b604=>{const _0xee9c76=_0x53b005;_0x53b604[_0xee9c76(0x1ff)](),_0x53b604[_0xee9c76(0x1d7)]();const _0x138be4=_0x162de4['classList'][_0xee9c76(0x20a)](_0xee9c76(0x21e));switch(_0x162de4[_0xee9c76(0x21d)]){case _0xee9c76(0x25c):{if(!_0x138be4&&!this[_0xee9c76(0x1f2)][_0xee9c76(0x22e)]())return;_0x162de4[_0xee9c76(0x215)][_0xee9c76(0x258)](_0xee9c76(0x21e)),this[_0xee9c76(0x185)][_0x34bc97]=!this['_state'][_0x34bc97];if(this[_0xee9c76(0x185)][_0x34bc97])this['_parent'][_0xee9c76(0x225)]++;else this[_0xee9c76(0x1f2)][_0xee9c76(0x225)]--;break;}case _0xee9c76(0x19a):{this[_0xee9c76(0x232)]({'btn':_0x162de4,'isActive':_0x138be4,'ixPrepared':_0x59a7d6,'ixLearned':_0x34bc97});break;}case _0xee9c76(0x1b0):{if(!_0x138be4&&!this[_0xee9c76(0x1f2)][_0xee9c76(0x19d)]())return;if(!_0x138be4&&this[_0xee9c76(0x1f2)][_0xee9c76(0x1fd)](this[_0xee9c76(0x23d)])&&!this[_0xee9c76(0x185)][_0x34bc97]){const _0x3e3b26=this[_0xee9c76(0x232)]({'btn':_0x54c0f4,'isActive':this[_0xee9c76(0x185)][_0x34bc97],'ixPrepared':_0x59a7d6,'ixLearned':_0x34bc97});if(!_0x3e3b26)return;}_0x162de4[_0xee9c76(0x215)]['toggle'](_0xee9c76(0x21e)),this['_state'][_0x59a7d6]=!this[_0xee9c76(0x185)][_0x59a7d6];if(this[_0xee9c76(0x185)][_0x59a7d6])this[_0xee9c76(0x1f2)][_0xee9c76(0x220)]++;else this[_0xee9c76(0x1f2)]['cntPrepared']--;break;}default:throw new Error('Unhandled\x20button\x20name:\x20\x22'+_0x162de4[_0xee9c76(0x21d)]+'\x22');}});}),_0x52dd47['addEventListener'](_0xee8dcc(0x256),_0x88fef6=>{const _0x2fe60f=_0xee8dcc;_0x88fef6[_0x2fe60f(0x1ff)](),_0x88fef6[_0x2fe60f(0x1d7)]();if(this['_parent']['cacheSelectedListItem'])this[_0x2fe60f(0x1f2)][_0x2fe60f(0x1b4)][_0x2fe60f(0x25a)][_0x2fe60f(0x215)][_0x2fe60f(0x1ed)]('list-multi-selected');_0x52dd47[_0x2fe60f(0x215)][_0x2fe60f(0x183)](_0x2fe60f(0x217)),this[_0x2fe60f(0x1f2)][_0x2fe60f(0x221)]=_0x54d150,this[_0x2fe60f(0x1f2)][_0x2fe60f(0x1b4)]=_0x36ee62;}),_0x36ee62;}[_0x515c0f(0x227)]({btn:_0x267695,isActive:_0x297bb2,ixPrepared:_0x363f5b,ixLearned:_0x4abd97}){const _0x2d71b1=_0x515c0f;_0x297bb2&&this[_0x2d71b1(0x1f2)][_0x2d71b1(0x1c4)]&&this[_0x2d71b1(0x185)][_0x363f5b]&&(this[_0x2d71b1(0x185)][_0x363f5b]=![],this['_parent'][_0x2d71b1(0x220)]--),_0x267695['classList'][_0x2d71b1(0x258)]('active'),this['_state'][_0x4abd97]=!this[_0x2d71b1(0x185)][_0x4abd97];}[_0x515c0f(0x232)]({btn:_0x533621,isActive:_0x1abf1d,ixPrepared:_0x18803d,ixLearned:_0xd0776e}){const _0x424a27=_0x515c0f;if(!_0x1abf1d&&!this['_parent'][_0x424a27(0x262)](this['_spellLevel']))return![];return this[_0x424a27(0x227)]({'btn':_0x533621,'isActive':_0x1abf1d,'ixPrepared':_0x18803d,'ixLearned':_0xd0776e}),this[_0x424a27(0x1f2)][_0x424a27(0x234)]=!this[_0x424a27(0x1f2)][_0x424a27(0x234)],!![];}[_0x515c0f(0x20f)](_0x5928bf){this['_list']['filter'](_0x3a1a7d=>{const _0x3857a1=_0x31fd,_0x41855c=this[_0x3857a1(0x1f7)][_0x3a1a7d['ix']];if(!this[_0x3857a1(0x1f2)][_0x3857a1(0x22d)](_0x41855c)&&!this[_0x3857a1(0x1f2)][_0x3857a1(0x228)](_0x41855c)&&!this['_parent']['isAvailableExpandedSpell_'](_0x41855c))return![];const {ixLearned:_0x514a20,ixPrepared:_0x3abd6e,ixAlwaysPrepared:_0x1117a0}=this[_0x3857a1(0x1ea)]['_getProps'](_0x3a1a7d['ix']);if(this['_state'][_0x514a20]||this['_state'][_0x3abd6e]||this[_0x3857a1(0x185)][_0x1117a0])return!![];return this[_0x3857a1(0x1f2)]['pageFilter'][_0x3857a1(0x246)](_0x5928bf,_0x41855c);});}[_0x515c0f(0x1bb)](_0x3b9f42){const _0x287852=_0x515c0f;this[_0x287852(0x237)][_0x287852(0x1ad)](_0x3b9f42);}[_0x515c0f(0x1e9)](){const _0x1a1bba=_0x515c0f;if(!this[_0x1a1bba(0x237)])return;this[_0x1a1bba(0x237)][_0x1a1bba(0x1e2)]['forEach'](_0x43204f=>{const _0x1e6f1f=_0x1a1bba,_0xae8571=this[_0x1e6f1f(0x1f7)][_0x43204f['ix']],_0x4220bb=this[_0x1e6f1f(0x1f2)][_0x1e6f1f(0x1cf)](_0xae8571);if(_0x4220bb?.[_0x1e6f1f(0x204)]||_0x4220bb?.[_0x1e6f1f(0x181)])return;const {ixPrepared:_0x57512a,ixAlwaysPrepared:_0xb18fc0}=this[_0x1e6f1f(0x1ea)]['_getProps'](_0x43204f['ix']),_0x5d225b=_0x4220bb?.[_0x1e6f1f(0x222)]||this[_0x1e6f1f(0x1f2)][_0x1e6f1f(0x1f3)](_0xae8571);_0x5d225b?(this[_0x1e6f1f(0x185)][_0x57512a]&&(this[_0x1e6f1f(0x185)][_0x57512a]=![],this[_0x1e6f1f(0x1f2)]['cntPrepared']--),!this[_0x1e6f1f(0x185)][_0xb18fc0]&&(_0x43204f[_0x1e6f1f(0x1a5)][_0x1e6f1f(0x1f1)][_0x1e6f1f(0x215)]['add'](_0x1e6f1f(0x21e)),_0x43204f[_0x1e6f1f(0x1a5)][_0x1e6f1f(0x1f1)][_0x1e6f1f(0x190)]=!![])):this[_0x1e6f1f(0x185)][_0xb18fc0]&&(_0x43204f[_0x1e6f1f(0x1a5)]['btnPrepare'][_0x1e6f1f(0x215)][_0x1e6f1f(0x1ed)](_0x1e6f1f(0x21e)),_0x43204f[_0x1e6f1f(0x1a5)][_0x1e6f1f(0x1f1)][_0x1e6f1f(0x190)]=![]),this[_0x1e6f1f(0x185)][_0xb18fc0]=_0x5d225b;});}static[_0x515c0f(0x1e0)](_0x5e551d){const _0x19e846=_0x515c0f;return{'ixLearned':'ix_learned_'+_0x5e551d,'ixPrepared':_0x19e846(0x249)+_0x5e551d,'ixAlwaysPrepared':_0x19e846(0x187)+_0x5e551d};}[_0x515c0f(0x1e8)](){const _0xa55e16=_0x515c0f;let _0x305e74=0x0,_0x785842=0x0;const _0x591e06={},_0x1c2617=this['_spellDatas'][_0xa55e16(0x1d5)];for(let _0x4c7baa=0x0;_0x4c7baa<_0x1c2617;++_0x4c7baa){const _0x5ea56b=this['_spellDatas'][_0x4c7baa];if(!this['_isAvailableSpell'](_0x5ea56b))continue;const _0x692f85=this['_parent'][_0xa55e16(0x1cf)](_0x5ea56b);if(_0x692f85)continue;const {ixLearned:_0x3619b2,ixPrepared:_0x36bfae,ixAlwaysPrepared:_0x27651f}=this[_0xa55e16(0x1ea)][_0xa55e16(0x1e0)](_0x4c7baa);this['_state'][_0x3619b2]&&(_0x591e06[_0x3619b2]=![],_0x305e74++),this[_0xa55e16(0x185)][_0x36bfae]&&(_0x591e06[_0x36bfae]=![],_0x785842++),this['_state'][_0x27651f]&&(_0x591e06[_0x27651f]=![]);}this[_0xa55e16(0x18f)](_0xa55e16(0x208),_0x591e06),_0x305e74&&(this['_spellLevel']===0x0?(this[_0xa55e16(0x1f2)]['cntLearnedCantrips']-=_0x305e74,this['_$wrpRows'][0x0]['querySelectorAll'](_0xa55e16(0x197))[_0xa55e16(0x201)](_0x444b62=>{const _0x6c0161=_0xa55e16;if(_0x444b62['dataset']?.[_0x6c0161(0x250)])return;_0x444b62[_0x6c0161(0x215)][_0x6c0161(0x1ed)](_0x6c0161(0x21e));})):(this[_0xa55e16(0x1f2)][_0xa55e16(0x20e)]-=_0x305e74,this['_$wrpRows'][0x0][_0xa55e16(0x24d)](_0xa55e16(0x265))[_0xa55e16(0x201)](_0x35b4e5=>{const _0x51d4de=_0xa55e16;if(_0x35b4e5[_0x51d4de(0x25f)]?.[_0x51d4de(0x250)])return;_0x35b4e5[_0x51d4de(0x215)][_0x51d4de(0x1ed)](_0x51d4de(0x21e));}))),_0x785842&&(this[_0xa55e16(0x1f2)][_0xa55e16(0x220)]-=_0x785842,this[_0xa55e16(0x1d3)][0x0][_0xa55e16(0x24d)]('.manc-sp__btn-prepare')['forEach'](_0x286736=>{const _0x3c2f54=_0xa55e16;if(_0x286736[_0x3c2f54(0x25f)]?.[_0x3c2f54(0x250)])return;_0x286736[_0x3c2f54(0x215)][_0x3c2f54(0x1ed)](_0x3c2f54(0x21e));}));}[_0x515c0f(0x245)](){const _0x50eede=_0x515c0f;if(!this[_0x50eede(0x16c)]()||this[_0x50eede(0x23d)]===0x0)return[];const _0x4d2595=[],_0x416822=this[_0x50eede(0x1f7)][_0x50eede(0x1d5)];for(let _0x2a74f4=0x0;_0x2a74f4<_0x416822;++_0x2a74f4){const _0x4fa337=this['_spellDatas'][_0x2a74f4];if(!this[_0x50eede(0x219)](_0x4fa337))continue;if(!this[_0x50eede(0x1f2)][_0x50eede(0x22d)](_0x4fa337)&&!this[_0x50eede(0x1f2)][_0x50eede(0x228)](_0x4fa337)&&!this[_0x50eede(0x1f2)][_0x50eede(0x17b)](_0x4fa337))continue;const {ixLearned:_0x5abd67}=this[_0x50eede(0x1ea)][_0x50eede(0x1e0)](_0x2a74f4);if(!this[_0x50eede(0x185)][_0x5abd67])continue;_0x4d2595[_0x50eede(0x189)]({'ix':_0x2a74f4,'spell':this['_spellDatas'][_0x2a74f4]});}return _0x4d2595;}['getFormSubData'](_0x2ed44e){const _0x513865=_0x515c0f;if(!this[_0x513865(0x16c)]())return[];const _0xff8562=[],_0x45850d=this[_0x513865(0x1f2)][_0x513865(0x1fd)](this[_0x513865(0x23d)]),_0x4b04d4=this[_0x513865(0x1f7)][_0x513865(0x1d5)];for(let _0x3d5f50=0x0;_0x3d5f50<_0x4b04d4;++_0x3d5f50){const _0x552647=this[_0x513865(0x1f7)][_0x3d5f50];if(!this[_0x513865(0x219)](_0x552647))continue;if(!this[_0x513865(0x1f2)][_0x513865(0x22d)](_0x552647)&&!this[_0x513865(0x1f2)][_0x513865(0x228)](_0x552647)&&!this[_0x513865(0x1f2)][_0x513865(0x17b)](_0x552647))continue;const {ixLearned:_0x54bd0c,ixPrepared:_0xc87163,ixAlwaysPrepared:_0x1763e5}=this[_0x513865(0x1ea)][_0x513865(0x1e0)](_0x3d5f50);if(this[_0x513865(0x185)][_0x1763e5])continue;const _0x5bc72f=this['_state'][_0x54bd0c],_0x6c788f=this[_0x513865(0x185)][_0xc87163]||this[_0x513865(0x23d)]===0x0&&_0x5bc72f;if(this[_0x513865(0x23d)]===0x0&&!_0x5bc72f)continue;let _0x661874=![];const _0x51a93c=this[_0x513865(0x1f2)][_0x513865(0x1cf)](_0x552647);if(_0x51a93c){if(this[_0x513865(0x23d)]===0x0)continue;if(_0x45850d)continue;_0x661874=_0x51a93c[_0x513865(0x181)]!==_0x6c788f;if(!_0x661874)continue;}if(!_0x5bc72f&&_0x45850d)continue;if(this['_parent']['isPreparedCaster']&&!_0x5bc72f&&!_0x6c788f&&!this[_0x513865(0x1f2)][_0x513865(0x259)]['toDisplay'](_0x2ed44e,_0x552647))continue;const _0x16b103=this[_0x513865(0x18b)]({'isLearned':_0x5bc72f});_0xff8562['push'](new Charactermancer_Spell_SpellMeta({..._0x16b103,'ix':_0x3d5f50,'spell':this[_0x513865(0x1f7)][_0x3d5f50],'isPrepared':_0x6c788f,'isLearned':_0x5bc72f,'isUpdateOnly':_0x661874,'existingItemId':_0x51a93c?.[_0x513865(0x1a1)]?.['_id']||_0x51a93c?.[_0x513865(0x1a1)]?.['id']}));}return _0xff8562;}[_0x515c0f(0x18b)]({isLearned:_0x186899}){const _0x13bd18=_0x515c0f;let _0x4253ce=_0x13bd18(0x1df),_0x5da0a2=null,_0x3ffc4d=null,_0x29ccad=null;if(this[_0x13bd18(0x1f2)][_0x13bd18(0x184)]===_0x13bd18(0x236)){if(_0x186899){if(this[_0x13bd18(0x23d)]>UtilActors[_0x13bd18(0x19e)])_0x4253ce=_0x13bd18(0x1a9),_0x5da0a2=0x1,_0x3ffc4d=0x1,_0x29ccad='lr';else _0x4253ce=_0x13bd18(0x236);}}else _0x4253ce=this['_parent'][_0x13bd18(0x1c4)]?'prepared':'always';return{'preparationMode':_0x4253ce,'usesCurrent':_0x5da0a2,'usesMax':_0x3ffc4d,'usesPer':_0x29ccad};}}export{Charactermancer_Spell_Util,Charactermancer_Spell};