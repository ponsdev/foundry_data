(()=>{"use strict";class CoC7Dice{static async roll(modif=0,rollMode=null,hideDice=!1){let alternativeDice="";game.modules.get("dice-so-nice")?.active&&(modif<0?alternativeDice=game.settings.get("CoC7","tenDiePenalty"):modif>0&&(alternativeDice=game.settings.get("CoC7","tenDieBonus")));const roll=await new Roll("1dt"+(""!==alternativeDice?"+1do["+alternativeDice+"]":"+1dt").repeat(Math.abs(modif))+"+1d10").roll({async:!0}),result={unit:{total:0,results:[]},tens:{total:0,results:[]},total:0,roll};rollMode&&(result.rollMode=rollMode),hideDice&&(result.hideDice=hideDice);for(const d of roll.dice)d instanceof CONFIG.Dice.terms.t?result.tens.results.push(d.total):(result.unit.total=10===d.total?0:d.total,result.unit.results.push(result.unit.total));if(modif<0)result.tens.total=0===result.unit.total&&result.tens.results.includes(0)?100:Math.max(...result.tens.results);else if(0===result.unit.total){const dice=result.tens.results.filter((t=>t>0));result.tens.total=0===dice.length?100:Math.min(...dice)}else result.tens.total=Math.min(...result.tens.results);return result.total=result.unit.total+result.tens.total,result}static async showRollDice3d(roll){if(game.modules.get("dice-so-nice")?.active){const syncDice=game.settings.get("CoC7","syncDice3d"),chatData={whisper:null,blind:!1};ChatMessage.applyRollMode(chatData,game.settings.get("core","rollMode")),await game.dice3d.showForRoll(roll,game.user,syncDice,chatData.whisper,chatData.blind)}}static async combinedRoll(options){options.pool=options.pool??{},options.pool[0]=!1;const keys=Object.keys(options.pool).map((v=>parseInt(v,10)));let penaltyDice=Math.abs(Math.min(0,Math.min(...keys))),bonusDice=Math.max(0,Math.max(...keys));const hasDSN=game.modules.get("dice-so-nice")?.active,pool=[];pool.push("1dt+1d10"),penaltyDice>0&&pool.push((hasDSN?"+1do["+game.settings.get("CoC7","tenDiePenalty")+"]":"1dt").repeat(Math.abs(penaltyDice))),bonusDice>0&&pool.push((hasDSN?"+1do["+game.settings.get("CoC7","tenDieBonus")+"]":"1dt").repeat(Math.abs(bonusDice)));const roll=await new Roll(pool.join("")).roll({async:!0}),result={groups:{baseDie:0,penaltyDice:[],bonusDice:[]},unit:0,roll};let baseSet=!1;for(const d of roll.dice)d instanceof CONFIG.Dice.terms.t?baseSet?penaltyDice>0?(result.groups.penaltyDice.push(d.total),penaltyDice--):(result.groups.bonusDice.push(d.total),bonusDice--):(result.groups.baseDie=d.total,baseSet=!0):result.unit=10===d.total?0:d.total;const output={};for(const key in options.pool){output[key]={unit:{total:result.unit,results:[result.unit]},tens:{total:0,results:[]},total:0,roll};const modif=parseInt(key,10);let modifier=modif;output[key].tens.results.push(result.groups.baseDie);for(const offset=Math.abs(modifier);modifier<0;modifier++)output[key].tens.results.push(result.groups.penaltyDice[modifier+offset]);for(const offset=modifier;modifier>0;modifier--)output[key].tens.results.push(result.groups.bonusDice[Math.abs(modifier-offset)]);if(modif<0)output[key].tens.total=0===output[key].unit.total&&output[key].tens.results.includes(0)?100:Math.max(...output[key].tens.results);else if(0===output[key].unit.total){const dice=output[key].tens.results.filter((t=>t>0));output[key].tens.total=0===dice.length?100:Math.min(...dice)}else output[key].tens.total=Math.min(...output[key].tens.results);output[key].total=output[key].unit.total+output[key].tens.total}return output}}const COC7={};function createInlineRoll(roll){const data={cls:["inline-roll"],dataset:{}};try{data.cls.push("inline-result"),data.result=roll.total,data.title=roll.formula,data.dataset.roll=escape(JSON.stringify(roll))}catch(err){return null}const a=document.createElement("a");a.classList.add(...data.cls),a.title=data.title;for(const[k,v]of Object.entries(data.dataset))a.dataset[k]=v;return a.innerHTML=`<i class="fas fa-dice-d20"></i> ${data.result}`,a}function isCtrlKey(event){return event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode}COC7.eras={nvct:"CoC7.EraNvct",drka:"CoC7.EraDrka",ddts:"CoC7.EraDdts",glit:"CoC7.EraGlit",1920:"CoC7.Era1920",pulp:"CoC7.EraPulp",mdrn:"CoC7.EraMdrn"},COC7.characteristics={str:"CoC7.CharacStr",con:"CoC7.CharacCon",siz:"CoC7.CharacSiz",dex:"CoC7.CharacDex",app:"CoC7.CharacApp",int:"CoC7.CharacInt",pow:"CoC7.CharacPow",edu:"CoC7.CharacEdu"},COC7.skillProperties={noadjustments:"CoC7.SkillNoAdjustments",noxpgain:"CoC7.SkillNoXpGain",special:"CoC7.SkillSpecial",rarity:"CoC7.SkillRarity",push:"CoC7.SkillPush",combat:"CoC7.SkillCombat",fighting:"CoC7.SkillFighting",firearm:"CoC7.SkillFirearm"},COC7.weaponProperties={melee:"CoC7.Weapon.Property.Melee",rngd:"CoC7.WeaponRngd",mnvr:"CoC7.WeaponProperyManeuver",thrown:"CoC7.Weapon.Property.Thrown",shotgun:"CoC7.Weapon.Property.Shotgun",dbrl:"CoC7.WeaponDbrl",impl:"CoC7.WeaponImpl",brst:"CoC7.WeaponBrst",auto:"CoC7.WeaponAuto",ahdb:"CoC7.WeaponAhdb",addb:"CoC7.WeaponAddb",slnt:"CoC7.WeaponSlnt",spcl:"CoC7.WeaponSpcl",mont:"CoC7.WeaponMont",blst:"CoC7.WeaponBlst",stun:"CoC7.WeaponStun",rare:"CoC7.WeaponRare",burn:"CoC7.Weapon.Property.Burn"},COC7.spellProperties={call:"CoC7.CallSpell",dismiss:"CoC7.DismissSpell",contact:"CoC7.ContactSpell",summon:"CoC7.SummonSpell",bind:"CoC7.BindSpell",enchantment:"CoC7.EnchantmentSpell",gate:"CoC7.GateSpell",combat:"CoC7.CombatSpell"},COC7.bookType={mythos:"CoC7.MythosBook",occult:"CoC7.OccultBook",other:"CoC7.Other"},COC7.talentType={physical:"CoC7.PhysicalTalent",mental:"CoC7.MentalTalent",combat:"CoC7.CombatTalent",miscellaneous:"CoC7.MiscellaneousTalent",basic:"CoC7.BasicTalent",insane:"CoC7.InsaneTalent",other:"CoC7.OtherTalent"},COC7.statusType={mania:"CoC7.Mania",phobia:"CoC7.Phobia"},COC7.occupationProperties={classic:"CoC7.Classic",lovecraftian:"CoC7.Lovecraftian",modern:"CoC7.Modern",pulp:"CoC7.Pulp"},COC7.formula={},COC7.formula.actor={"@STR":"this.data.data.characteristics.str.value","@CON":"this.data.data.characteristics.con.value","@SIZ":"this.data.data.characteristics.siz.value","@DEX":"this.data.data.characteristics.dex.value","@APP":"this.data.data.characteristics.app.value","@INT":"this.data.data.characteristics.int.value","@POW":"this.data.data.characteristics.pow.value","@EDU":"this.data.data.characteristics.edu.value"},COC7.formula.actorsheet={"@STR":"this.actor.data.data.characteristics.str.value","@CON":"this.actor.data.data.characteristics.con.value","@SIZ":"this.actor.data.data.characteristics.siz.value","@DEX":"this.actor.data.data.characteristics.dex.value","@APP":"this.actor.data.data.characteristics.app.value","@INT":"this.actor.data.data.characteristics.int.value","@POW":"this.actor.data.data.characteristics.pow.value","@EDU":"this.actor.data.data.characteristics.edu.value"},COC7.status={tempoInsane:"tempoInsane",indefInsane:"indefInsane",unconscious:"unconscious",criticalWounds:"criticalWounds",dying:"dying",prone:"prone",dead:"dead"},COC7.newBookName="CoC7.NewBookName",COC7.newSkillName="CoC7.NewSkillName",COC7.newSpellName="CoC7.NewSpellName",COC7.newItemName="CoC7.NewItemName",COC7.newWeaponName="CoC7.NewWeaponName",COC7.creatureFightingSkill="CoC7.creatureFightingSkill",COC7.dodgeSkillName="CoC7.DodgeSkillName",COC7.creditRatingSkillName="CoC7.CreditRatingSkillName",COC7.CthulhuMythosName="CoC7.CthulhuMythosName",COC7.fightingSpecializationName="CoC7.FightingSpecializationName",COC7.firearmSpecializationName="CoC7.FirearmSpecializationName",COC7.combatCards={fightBack:"CoC7.FightBack",dodge:"CoC7.Dodge",maneuver:"CoC7.Maneuver",noResponse:"CoC7.NoResponse"};class chatHelper{static hyphenToCamelCase(string){return string.replace(/-([a-z])/g,(function(string){return string[1].toUpperCase()}))}static async createMessage(title,message,options={}){const messageData={};messageData.flavor=title,messageData.speaker=options.speaker||ChatMessage.getSpeaker(),options.whisper&&(messageData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER,messageData.whisper=options.whisper),void 0!==options.roll&&(messageData.roll=options.roll,messageData.type=CONST.CHAT_MESSAGE_TYPES.ROLL,messageData.rollMode=CONST.DICE_ROLL_MODES.SELF),messageData.user=game.user.id,messageData.content=message,ChatMessage.create(messageData).then((msg=>msg))}static camelCaseToHyphen(string){return string.replace(/([A-Z])/g,(function(string){return"-"+string.toLowerCase()}))}static getActorFromKey(key){if(!key)return null;if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];return chatHelper.getTokenFromKey(key)?.actor}return game.actors.get(key)||null}static getSpeakerFromKey(actorKey){const speaker={},actor=chatHelper.getActorFromKey(actorKey);if(actorKey.includes(".")){const[sceneId,tokenId]=actorKey.split(".");speaker.token=tokenId,speaker.scene=sceneId,actor.token?.name&&(speaker.alias=actor.token.name),speaker.actor=actor.id}else speaker.actor=actorKey,speaker.alias=actor.name;return speaker}static attachObjectToElement(object,element,objectName=""){for(const prop of Object.keys(object))prop.startsWith("_")||("object"==typeof object[prop]?chatHelper.attachObjectToElement(object[prop],element,`${objectName}:${prop}:`):element.dataset[`${objectName}${prop}`]=object[prop])}static getObjectFromElement(object,element){function deserialize(obj,key,value){if(key.startsWith(":")){const s=key.slice(1),objProp=s.slice(s.indexOf(":")+1),objName=s.substring(0,s.indexOf(":"));void 0===obj[objName]&&(obj[objName]={}),deserialize(obj[objName],objProp,value)}else"true"===value?obj[key]=!0:"false"===value?obj[key]=!1:Number(value).toString()===value?obj[key]=Number(value):obj[key]=value}if(element&&object)for(const prop of Object.keys(element.dataset)){if("template"===prop)return;deserialize(object,prop,element.dataset[prop])}}static getTokenFromKey(key){if(!key)return null;if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId){const tokenDoc=game.actors.tokens[tokenId]?.token;return tokenDoc.object}{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;const token=new Token(tokenData);return token.scene||(token.scene=duplicate(scene.data)),token}}{const actor=game.actors.get(key);return chatHelper.getActorToken(actor)}}static getActorToken(actor){return actor?actor.token||{data:actor.data.token}:null}static getActorImgFromKey(actorKey){if(!actorKey)return null;if(game.settings.get("CoC7","useToken")){const token=chatHelper.getTokenFromKey(actorKey);if(token){if(token.data.img&&-1===token.data.img.indexOf("*"))return token.data.img;if(token.data.texture.src&&-1===token.data.texture.src.indexOf("*"))return token.data.texture.src}}const actor=chatHelper.getActorFromKey(actorKey);if(game.settings.get("CoC7","useToken")&&actor.data.token){if(actor.data.token.img&&-1===actor.data.token.img.indexOf("*"))return actor.data.token.img;if(actor.data.token.texture.src&&-1===actor.data.token.texture.src?.indexOf("*"))return actor.data.token.texture.src}return actor.data.img}static getDistance(startToken,endToken){if(void 0===endToken.center&&void 0!==endToken.data.document?.id&&startToken.scene?.id){const scene=game.scenes.get(startToken.scene.id);if(void 0!==scene?.tokens){const tokens=scene?.tokens.filter((token=>token.actor.id===endToken.data.document.id)).map((token=>token.object));1===tokens.length&&(endToken=tokens[0])}}let distance={gridUnit:0,value:0,unit:canvas.scene.data.gridUnits};if(void 0!==startToken&&void 0!==startToken.center&&void 0!==endToken&&void 0!==endToken.center){const ray=new Ray(startToken.center,endToken.center),segment=[{ray}];if(distance={gridUnit:ray.distance/canvas.scene.data.grid,value:canvas.grid.measureDistances(segment,{gridSpaces:game.settings.get("CoC7","gridSpaces")})[0],unit:canvas.scene.data.gridUnits},game.settings.get("CoC7","distanceElevation")){const elevation=Math.abs((startToken.data.elevation||0)-(endToken.data.elevation||0));distance.value=Math.sqrt(distance.value*distance.value+elevation*elevation)}}else ui.notifications.warn(game.i18n.localize("CoC7.MessageDistanceCalculationFailure"));return distance}static toYards(distance){return"ft"===distance.unit?distance.value/3:distance.value}}class CoC7Roll{static getFromCard(card){const rollDiv=card.querySelector("div.dice-roll");if(!rollDiv)return null;const roll=new CoC7Roll;return chatHelper.getObjectFromElement(roll,rollDiv),roll}get resultType(){switch(this.successLevel=parseInt(this.successLevel),this.successLevel){case CoC7Check.successLevel.regular:return game.i18n.format("CoC7.RegularSuccess");case CoC7Check.successLevel.hard:return game.i18n.format("CoC7.HardSuccess");case CoC7Check.successLevel.extreme:return game.i18n.format("CoC7.ExtremeSuccess");case CoC7Check.successLevel.critical:return game.i18n.format("CoC7.CriticalSuccess");case CoC7Check.successLevel.fumble:return game.i18n.format("CoC7.Fumble");case CoC7Check.successLevel.failure:return game.i18n.format("CoC7.Failure");default:return null}}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get item(){return this.itemId&&this.actor?this.actor.items.get(this.itemId):null}get skill(){return this.skillId&&this.actor?this.actor.items.get(this.skillId):null}showDiceRoll(){if(game.modules.get("dice-so-nice")?.active){const diceResults=[];for(const dieResult of this.dices.tens)diceResults.push(100===dieResult.value?0:dieResult.value/10);diceResults.push(this.dices.unit.value);const diceData={formula:`${this.dices.tens.length}d100+1d10`,results:diceResults,whisper:null,blind:!1};game.dice3d.show(diceData)}}static getFromElement(element,object=null){if(!element)return;const roll=object||new CoC7Roll;chatHelper.getObjectFromElement(roll,element),roll.dices={tens:[],unit:{}},chatHelper.getObjectFromElement(roll.dices,element.querySelector(".dice-result")),roll.dices.hasBonus=0!==roll.diceModifier,roll.dices.bonus=Math.abs(roll.diceModifier),roll.dices.bonusType=roll.diceModifier<0?game.i18n.format("CoC7.DiceModifierPenalty"):game.i18n.format("CoC7.DiceModifierBonus");const tenDice=element.querySelector(".ten-dice");if(tenDice)for(const d of tenDice.querySelectorAll("li")){const die={selected:!1,isMax:!1,isMin:!1,value:-1};chatHelper.getObjectFromElement(die,d),roll.dices.tens.push(die)}const unitDie=element.querySelector(".unit-die")?element.querySelector(".unit-die").querySelector("li"):null;roll.dices.unit.value=unitDie?parseInt(unitDie.dataset.value):null,roll.increaseSuccess=[];const increaseSuccess=element.querySelector(".increase-success");if(increaseSuccess&&increaseSuccess.querySelectorAll("button"))for(const isl of increaseSuccess.querySelectorAll("button")){const newSuccesLevel={};chatHelper.getObjectFromElement(newSuccesLevel,isl),roll.increaseSuccess.push(newSuccesLevel)}return roll.luckNeeded&&(roll.luckNeededTxt=game.i18n.format("CoC7.SpendLuck",{luckNeededValue:roll.luckNeeded})),object?void 0:roll}static getFromCheck(check){const roll=new CoC7Roll;return roll.rollType=check.rollType,roll.side=check.side,roll.action=check.action,roll.refMessageId=check.refMessageId,roll.referenceMessageId=check.referenceMessageId,roll.successLevel=check.successLevel,roll.difficulty=check.difficulty,roll.skillId=check.skill?check.skill.id:null,roll.itemId=check.item?check.item.id:null,roll.diceMod=check.diceModifier,roll.value=parseInt(check.rawValue),roll.fumble=check.isFumble,roll.critical=check.isCritical,roll.characteristic=check.characteristic?check.characteristic:null,roll.result=check.dice.total,roll.actorKey=check.actor.tokenKey,check.actor.isToken?(roll.tokenId=check.actor.tokenKey,roll.actorId=null):(roll.tokenKey=null,roll.actorId=check.actor.tokenKey),roll}static attachCheckToElement(htmlElement,check){const roll=CoC7Roll.getFromCheck(check);return roll.attachToElement(htmlElement),roll}attachToElement(htmlElement){chatHelper.attachObjectToElement(this,htmlElement)}}class CoC7Damage{static getMainDie(damageString){return damageString.toLowerCase().includes("d20")?"d20":damageString.toLowerCase().includes("d12")?"d12":damageString.toLowerCase().includes("d10")?"d10":damageString.toLowerCase().includes("d8")?"d8":damageString.toLowerCase().includes("d4")?"d4":"d6"}static getFromElement(element,object=null){if(!element)return;const damage=object||{};chatHelper.getObjectFromElement(damage,element);const rolls=element.querySelector(".dice-rolls").querySelectorAll("li");damage.rolls=[];for(const r of rolls){const roll={};chatHelper.getObjectFromElement(roll,r),damage.rolls.push(roll)}return object?void 0:damage}}class ChatCardActor{constructor(actorKey=null,fastForward=!1){this.actorKey=actorKey,this.fastForward=fastForward}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get isBlind(){return this.rollMode?(void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind):null}set isBlind(x){this._isBlind=x}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){this._rollMode=x}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}get item(){return this.itemId?this.actor.items.get(this.itemId):null}get weapon(){return this.item}get targetedTokens(){return[...game.user.targets]}get target(){return this.targetToken?this.targetToken:this.targetActor}get targetToken(){return this._targetToken||(this._targetKey?this._targetToken=chatHelper.getTokenFromKey(this._targetKey):(this._targetToken=this.targetedTokens.pop(),this._targetToken?this._targetKey=`${this._targetToken.scene.id}.${this._targetToken.id}`:this._targetToken=null)),this._targetToken}get targetActor(){return this._targetActor||(this.targetToken?this._targetActor=this.targetToken.actor:this._targetActor=chatHelper.getActorFromKey(this._targetKey)),this._targetActor}get targetKey(){return this.targetToken||this.targetActor?this._targetKey:null}get hasTarget(){return!(!this.targetToken&&!this.targetActor)}set targetKey(x){this._targetKey=x}get skills(){return this.actor.getWeaponSkills(this.itemId)}get targetImg(){const img=chatHelper.getActorImgFromKey(this.targetKey);return img||"../icons/svg/mystery-man-black.svg"}get name(){return this.token?this.token.name:this.actor.name}get targetName(){return this.target?this.target.name:"dummy"}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}async say(message,flavor=null){const speakerData={};let speaker;this.actor?(speakerData.actor=this.actor,this.token&&(speakerData.token=this.token.document),speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,flavor,content:message};["gmroll","blindroll"].includes(game.settings.get("core","rollMode"))&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}}function replacer(key,value){if(key.startsWith("__"))return;if(["_actor"].includes(key))return;return["sanCheck","intCheck"].includes(key)?value.JSONRollData:value}class SanCheckCard extends ChatCardActor{constructor(actorKey=null,sanData={},options={}){super(actorKey,void 0!==options.fastForward&&Boolean(options.fastForward)),sanData.sanReason=sanData.sanReason??"",this.sanData=sanData,this.options=options,sanData.modifier&&!isNaN(Number(sanData.modifier))&&(this.options.sanModifier=Number(sanData.modifier)),sanData.difficulty&&!isNaN(Number(sanData.difficulty))&&(this.options.sanDifficulty=Number(sanData.difficulty)),this.state={}}get isBlind(){return void 0!==this.options.isBlind?Boolean(this.options.isBlind):super.isBlind}get difficulty(){return void 0!==this.options.difficulty?this.options.difficulty:CoC7Check.difficultyLevel.regular}get modifier(){return void 0!==this.options.modifier?this.options.modifier:0}get sanLossSource(){return this.sanData.tokenKey?chatHelper.getActorFromKey(this.sanData.tokenKey):null}get involuntaryAction(){return!(!this.state.sanRolled||!this.sanCheck.isFailure&&!this.sanCheck.isFumble)}get sanLossFormula(){return this.state.sanRolled?this.sanData.sanMax&&this.sanCheck.failed?isNaN(Number(this.sanData.sanMax))?this.sanData.sanMax:Number(this.sanData.sanMax):this.sanData.sanMin&&this.sanCheck.passed?isNaN(Number(this.sanData.sanMin))?this.sanData.sanMin:Number(this.sanData.sanMin):0:null}get sanLostToReason(){return this.actor.sanLostToReason(this.sanData.sanReason)}get maxPossibleSanLoss(){return this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax)}get maxSanLoss(){return new Roll(this.sanData.sanMax.toString()).evaluate({maximize:!0}).total}get sanLossReasonEncountered(){return this.actor.sanLossReasonEncountered(this.sanData.sanReason)}get firstEncounter(){return!this.actor.mythosInsanityExperienced}get isActorLoosingSan(){return!this.actor.hasTempoInsane&&(0!==this.sanLossFormula&&(!this.sanData.sanReason||0!==this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax)||(this.state.immuneToCreature=!0,!1)))}get boutDurationText(){if(this.boutDuration){if(this.boutRealTime)return`${this.boutDuration} rounds`;if(this.boutSummary)return`${this.boutDuration} hours`}return null}get youGainCthulhuMythosString(){return this.mythosGain?game.i18n.format("CoC7.YouGainedCthulhuMythos",{value:this.mythosGain}):null}async advanceState(state){switch(state){case"keepCreatureSanData":this.state.keepCreatureSanData=!0;break;case"involuntaryActionPerformed":this.state[state]=!0,this.isActorLoosingSan||(this.state.finish=!0);break;case"sanLossApplied":await this.applySanLoss();break;case"enterBoutOfMadnessRealTime":this.boutDuration=(await new Roll("1D10").roll({async:!0})).total,this.boutRealTime=!0,this.boutSummary=!1,this.boutResult=await this.actor.enterBoutOfMadness(!0,this.boutDuration),this.state.boutOfMadnessResolved=!0,this.state.boutOfMadnessOver=!1;break;case"enterBoutOfMadnessSummary":this.boutDuration=(await new Roll("1D10").roll({async:!0})).total,this.boutRealTime=!1,this.boutSummary=!0,this.boutResult=await this.actor.enterBoutOfMadness(!1,this.boutDuration),this.state.boutOfMadnessResolved=!0,await this.triggerInsanity();break;case"boutOfMadnessOver":await this.actor.unsetCondition(COC7.status.tempoInsane),await this.triggerInsanity();break;case"noMythosGained":this.state.cthulhuMythosAwarded=!0,this.mythosGain=0;break;case"cthulhuMythosAwarded":{let amountGained=1;this.actor.mythosInsanityExperienced||(amountGained=5,await this.actor.experienceFirstMythosInsanity()),this.state.cthulhuMythosAwarded=!0;const cthulhuMythosSkill=this.actor.cthulhuMythosSkill,oldValue=cthulhuMythosSkill.data.data.adjustments.experience||0;cthulhuMythosSkill&&await cthulhuMythosSkill.update({"data.adjustments.experience":oldValue+amountGained}),this.mythosGain=amountGained;break}}}async bypassRollSan(){this.isBypassed=!0,this.sanCheck=new CoC7Check,this.sanCheck.actor=this.actorKey,this.sanCheck.attribute="san",this.sanCheck.difficulty=this.options.sanDifficulty||CoC7Check.difficultyLevel.regular,this.sanCheck.diceModifier=this.options.sanModifier||0,await this.sanCheck._perform({forceDSN:!0}),this.state.sanRolled=!0,this.state.involuntaryActionPerformed=this.sanCheck.passed,this.state.sanLossRolled=!0,this.state.ignoreSanCheck=!0,this.sanLoss=this.sanLossFormula}async rollSan(){if(this.sanCheck=new CoC7Check,this.sanCheck.actor=this.actorKey,this.sanCheck.attribute="san",this.sanCheck.difficulty=this.options.sanDifficulty||CoC7Check.difficultyLevel.regular,this.sanCheck.diceModifier=this.options.sanModifier||0,await this.sanCheck._perform({forceDSN:!0}),this.state.sanRolled=!0,this.state.involuntaryActionPerformed=this.sanCheck.passed,this.isActorLoosingSan){if("number"==typeof this.sanLossFormula)this.state.sanLossRolled=!0,this.sanData.sanReason?(this.sanLoss=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanLossFormula),this.sanLoss<this.sanLossFormula&&(this.state.limitedLossToCreature=!0)):this.sanLoss=this.sanLossFormula;else if(this.sanCheck.isFumble)this.state.sanLossRolled=!0,this.sanLoss=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);else if(this.sanData.sanReason){const min=new Roll(this.sanLossFormula).evaluate({minimize:!0}).total,max=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);min>=max&&(this.state.sanLossRolled=!0,this.sanLoss=max,this.state.limitedLossToCreature=!0)}}else this.state.finish=!0,this.actor.hasTempoInsane&&(this.state.immuneAlreadyInBout=!0,this.sanCheck.passed||(this.state.finish=!1)),this.state.sanLossRolled=!0,this.state.sanLossApplied=!0,this.state.intRolled=!0,this.state.insanity=!1,this.sanLoss=0}async rollSanLoss(){this.sanLossRoll=new Roll(`${this.sanLossFormula}`),await this.sanLossRoll.roll({async:!0}),await CoC7Dice.showRollDice3d(this.sanLossRoll);const max=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);this.sanLossRoll.total>max&&(this.state.limitedLossToCreature=!0),this.sanLoss=Math.min(this.sanLossRoll.total,max),this.state.sanLossRolled=!0}async applySanLoss(){if(await this.actor.looseSan(this.sanData.sanReason,this.sanLoss),this.sanLoss>0&&(this.state.actorLostSan=!0),this.state.sanLossApplied=!0,this.actor.san<=0)return this.state.intRolled=!0,this.state.boutOfMadnessOver=!0,this.state.insanity=!0,this.state.permanentlyInsane=!0,void(this.state.finish=!0);this.sanLoss<5?(this.state.intRolled=!0,this.actor.hasIndefInsane?(this.state.insanity=!0,this.state.shaken=!0,this.state.insanityTableRolled=!1,this.state.finish=!1,this.state.intRolled=!0):(this.state.insanity=!1,this.state.shaken=!0,this.state.insanityTableRolled=!0,this.state.finish=!0)):this.state.intRolled=!1;let oneFifthSanity=this.actor.data.data.attribs.san.oneFifthSanity;oneFifthSanity=parseInt(oneFifthSanity.replace(/\D/g,"")),this.actor.dailySanLoss>=oneFifthSanity&&(this.state.insanity=!0,this.state.intRolled=!0,this.state.temporaryInsane=!1,this.state.indefinitelyInsane=!0,this.state.insanityTableRolled=!1,this.state.memoryRepressed=!1,this.state.finish=!1)}async rollInt(){this.intCheck=new CoC7Check,this.intCheck.actor=this.actorKey,this.intCheck.characteristic="int",this.intCheck.difficulty=this.options.intDifficulty||CoC7Check.difficultyLevel.regular,this.intCheck.diceModifier=this.options.intModifier||0,await this.intCheck._perform({forceDSN:!0}),this.state.intRolled=!0,this.intCheck.passed||this.state.alreadyInsane?(this.state.insanity=!0,this.state.temporaryInsane=!0,this.state.indefinitelyInsane=!1,this.state.memoryRepressed=!1):(this.state.insanity=!1,this.state.temporaryInsane=!1,this.state.indefinitelyInsane=!1,this.state.memoryRepressed=!0,this.state.finish=!0)}async triggerInsanity(){this.state.boutOfMadnessOver=!0,this.state.indefinitelyInsane&&await this.actor.setCondition(COC7.status.indefInsane),this.state.finish=!0}async clearSanLossReason(){await this.actor.setReasonSanLoss(this.sanData.sanReason,0),this.sanLossReasonEncountered||(this.state.keepCreatureSanData=!0)}async updateChatCard(){if(this.state.sanRolled&&(this.__inlineSanCheck=this.sanCheck.inlineCheck.outerHTML),this.sanLossRoll){const a=createInlineRoll(this.sanLossRoll);this.__inlineSanLossRoll=a.outerHTML}this.state.intRolled&&this.intCheck&&(this.__inlineIntCheck=this.intCheck.inlineCheck.outerHTML);const html=await renderTemplate(SanCheckCard.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(JSON.stringify(this,replacer));const chatMessage=game.messages.get(this.messageId),msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}static get template(){return"systems/CoC7/templates/chat/cards/san-check.html"}static checkTargets(sanData,fastForward=!1){const targets=[...game.user.targets];if(targets.length)for(const t of targets)t.actor.isToken?SanCheckCard.create(t.actor.tokenKey,sanData,{fastForward}):SanCheckCard.create(t.actor.id,sanData,{fastForward});else ui.notifications.warn(game.i18n.localize("CoC7.WarnNoTargetsSanCheck"))}static async create(...args){const chatCard=new SanCheckCard(...args);chatCard.actor.hasIndefInsane&&(chatCard.state.alreadyInsane=!0),chatCard.actor.san<=0&&(chatCard.state.intRolled=!0,chatCard.state.boutOfMadnessOver=!0,chatCard.state.insanity=!0,chatCard.state.permanentlyInsane=!0,chatCard.state.finish=!0);const html=await renderTemplate(SanCheckCard.template,chatCard),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(JSON.stringify(chatCard,replacer)),await chatCard.say(htmlCardElement.outerHTML)}static getFromMessageId(messageId){const message=game.messages.get(messageId),htmlCard=$.parseHTML(message.data.content)[0].querySelector(".chat-card");return SanCheckCard.getFromCard(htmlCard)}static getFromCard(card){const sanCheckCardData=JSON.parse(unescape(card.dataset.object)),sanCheckCard=new SanCheckCard;return Object.assign(sanCheckCard,sanCheckCardData),sanCheckCard.messageId||(sanCheckCard.messageId=card.closest(".message").dataset.messageId),"Object"===sanCheckCard.sanCheck?.constructor?.name&&(sanCheckCard.sanCheck=Object.assign(new CoC7Check,sanCheckCard.sanCheck)),"Object"===sanCheckCard.intCheck?.constructor?.name&&(sanCheckCard.intCheck=Object.assign(new CoC7Check,sanCheckCard.intCheck)),"Object"===sanCheckCard.sanLossRoll?.constructor?.name&&(sanCheckCard.sanLossRoll=Roll.fromData(sanCheckCard.sanLossRoll)),sanCheckCard}}class CoC7Utilities{static isFormula(x){return"string"==typeof x&&(!!isNaN(Number(x))&&Roll.validate(x))}static ParseChatEntry(html,content){const terms=content.match(/(\S+)/g);if(terms[0]?.toLowerCase().match(/^\/r(oll)?$/)&&terms[1]?.toLowerCase().startsWith("1d%"))return setTimeout((function(){CoC7Utilities._ExecCommand(content)}),200),!1}static async _ExecCommand(content){const options=content.toLowerCase().split(" ")?.join("")?.replace(/\/r(oll)?1d%/,""),check=new CoC7Check;if(options.length){let threshold,flatDiceModifier,flatThresholdModifier,escaped=options,difficulty=CoC7Check.difficultyLevel.regular,diceModifier=0,ask=!1;const thresholdStr=escaped.match(/[^(]+(?=\))/);if(thresholdStr&&thresholdStr.length){threshold=Number(thresholdStr[0]);for(const match of thresholdStr)escaped=escaped.replace(`(${match})`,"")}const difficultyStr=escaped.match(/[^[]+(?=\])/);if(difficultyStr&&difficultyStr.length){difficulty=CoC7Utilities.convertDifficulty(difficultyStr[0]);for(const match of difficultyStr)escaped=escaped.replace(`[${match}]`,"")}if(escaped.includes("?")&&(ask=!0,escaped=escaped.replace("?","")),isNaN(Number(escaped))||(diceModifier=Number(escaped)),ask){const dialogOptions={threshold,modifier:diceModifier,difficulty,askValue:!0},usage=await RollDialog.create(dialogOptions);usage&&(diceModifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),threshold=Number(usage.get("threshold"))||threshold,flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,threshold&&(check.rawValue=isNaN(threshold)?void 0:threshold)}const speaker=ChatMessage.getSpeaker();if(speaker.token&&speaker.scene){const actor=chatHelper.getActorFromKey(`${speaker.scene}.${speaker.token}`);actor&&(check.actor=actor)}else if(speaker.actor){const actor=game.actors.get(speaker.actor);actor&&(check.actor=actor)}await check.roll(),check.toMessage()}static async test(){ui.notifications.infos("Do some stuff")}static getActorFromString(actorString){let actor;return game.actors.tokens[actorString]?game.actors.tokens[actorString]:(actor=game.actors.get(actorString),actor||(actor=Object.values(game.actors.tokens).find((t=>t.name.toLowerCase()===actorString.toLowerCase())),actor||(actor=game.actors.find((a=>a.name.toLowerCase()===actorString.toLowerCase()))),actor||null))}static getCharacteristicNames(char){const charKey=char.toLowerCase();switch(charKey){case"str":return{short:game.i18n.localize("CHARAC.STR"),label:game.i18n.localize("CHARAC.Strength")};case"con":return{short:game.i18n.localize("CHARAC.CON"),label:game.i18n.localize("CHARAC.Constitution")};case"siz":return{short:game.i18n.localize("CHARAC.SIZ"),label:game.i18n.localize("CHARAC.Size")};case"dex":return{short:game.i18n.localize("CHARAC.DEX"),label:game.i18n.localize("CHARAC.Dexterity")};case"app":return{short:game.i18n.localize("CHARAC.APP"),label:game.i18n.localize("CHARAC.Appearance")};case"int":return{short:game.i18n.localize("CHARAC.INT"),label:game.i18n.localize("CHARAC.Intelligence")};case"pow":return{short:game.i18n.localize("CHARAC.POW"),label:game.i18n.localize("CHARAC.Power")};case"edu":return{short:game.i18n.localize("CHARAC.EDU"),label:game.i18n.localize("CHARAC.Education")};default:for(const[,value]of Object.entries(game.system.template.Actor.templates.characteristics.characteristics))if(charKey===game.i18n.localize(value.short).toLowerCase())return{short:game.i18n.localize(value.short),label:game.i18n.localize(value.label)};return null}}static convertDifficulty(difficulty){if("0"===String(difficulty))return CoC7Check.difficultyLevel.regular;if("string"!=typeof difficulty)return difficulty;if(!isNaN(Number(difficulty)))return Number(difficulty);switch(difficulty){case"?":return CoC7Check.difficultyLevel.unknown;case"+":return CoC7Check.difficultyLevel.hard;case"++":return CoC7Check.difficultyLevel.extreme;case"+++":return CoC7Check.difficultyLevel.critical;default:return CoC7Check.difficultyLevel.regular}}static skillCheckMacro(skill,event,options={}){event.preventDefault();const speaker=ChatMessage.getSpeaker();let actor;speaker.token&&(actor=game.actors.tokens[speaker.token]),actor||(actor=game.actors.get(speaker.actor)),actor?actor.skillCheck(skill,event.shiftKey,options):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoActorAvailable"))}static weaponCheckMacro(weapon,event){event.preventDefault();const speaker=ChatMessage.getSpeaker();let actor;if(speaker.token&&(actor=game.actors.tokens[speaker.token]),!actor)if(speaker.scene&&speaker.token){const baseActor=game.actors.get(speaker.actor),token=game.scenes.get(speaker.scene).tokens.get(speaker.token);actor=new(getDocumentClass("Actor"))(baseActor.toJSON(),{parent:token})}else actor=game.actors.get(speaker.actor);actor?actor.weaponCheck(weapon,event.shiftKey):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoActorAvailable"))}static async checkMacro(threshold,event=null){await CoC7Utilities.rollDice(event,{threshold})}static async createMacro(bar,data,slot){if("Item"!==data.type)return;let item,origin,command,packName=null;if(data.pack){const pack=game.packs.get(data.pack);if("Item"!==pack.metadata.entity)return;packName=data.pack,item=await pack.getDocument(data.id),origin="pack"}else data.data?(item=data.data,origin="actor"):(item=game.items.get(data.id),origin="game");if(!item)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroNoItemFound"));if("weapon"!==item.type&&"skill"!==item.type)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroIncorrectType"));if("weapon"===item.type&&(command=`game.CoC7.macros.weaponCheck({name:'${item.name}', id:'${item.id}', origin:'${origin}', pack: '${packName}'}, event);`),"skill"===item.type){if(CoC7Item.isAnySpec(item))return ui.notifications.warn(game.i18n.localize("CoC7.WarnNoGlobalSpec"));command=`game.CoC7.macros.skillCheck({name:'${item.name}', id:'${item.id}', origin:'${origin}', pack: '${packName}'}, event);`}let macro=game.macros.contents.find((m=>m.name===item.name&&m.command===command));return macro||(macro=await Macro.create({name:item.name,type:"script",img:item.img,command})),game.user.assignHotbarMacro(macro,slot),!1}static async toggleDevPhase(toggle){await game.settings.set("CoC7","developmentEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.DevPhaseEnabled"):game.i18n.localize("CoC7.DevPhaseDisabled")),game.socket.emit("system.CoC7",{type:"updateChar"}),CoC7Utilities.updateCharSheets()}static async toggleCharCreation(toggle){await game.settings.set("CoC7","charCreationEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.CharCreationEnabled"):game.i18n.localize("CoC7.CharCreationDisabled")),game.socket.emit("system.CoC7",{type:"updateChar"}),CoC7Utilities.updateCharSheets(),Hooks.call("toggleCharCreation",toggle)}static async getTarget(){const users=game.users.filter((user=>user.active)),actors=game.actors;let checkOptions=`<input type="checkbox" name="COCCheckAllPC" id="COCCheckAllPC">\n\n    <label for="COCCheckAllPC">${game.i18n.localize("CoC7.allActors")}</label>`;const playerTokenIds=users.map((u=>u.character?.id)).filter((id=>void 0!==id)),selectedPlayerIds=canvas.tokens.controlled.map((token=>token.actor.id));actors.forEach((actor=>{const checked=(selectedPlayerIds.includes(actor.id)||playerTokenIds.includes(actor.id))&&"checked";checkOptions+=`\n     <br>\n     <input type="checkbox" name="${actor.id}" id="${actor.id}" value="${actor.name}" ${checked}>\n\n     <label for="${actor.id}">${actor.name}</label>\n       `})),new Dialog({title:`${game.i18n.localize("CoC7.dreaming")}`,content:`${game.i18n.localize("CoC7.restTargets")}: ${checkOptions} <br>`,buttons:{whisper:{label:`${game.i18n.localize("CoC7.startRest")}`,callback:async html=>{const targets=[];let all=!1;const users=html.find('[type="checkbox"]');for(const user of users)"COCCheckAllPC"===user.name&&user.checked&&(all=!0),(user.checked||all)&&targets.push(user.id);await CoC7Utilities.startRest(targets)}}}}).render(!0)}static async startRest(targets){if(!targets.length)return;const actors=game.actors.filter((actor=>targets.includes(actor.id)));let chatContent=`<i>${game.i18n.localize("CoC7.dreaming")}...</i><br>`;for(const actor of actors)if(["character","npc","creature"].includes(actor.type)){let quickHealer=!1;for(const item of actor.data.items)"talent"===item.type&&item.name===`${game.i18n.localize("CoC7.quickHealer")}`&&(quickHealer=!0);const isCriticalWounds=!game.settings.get("CoC7","pulpRuleIgnoreMajorWounds")&&actor.hasConditionStatus(COC7.status.criticalWounds),dailySanityLoss=actor.data.data.attribs.san.dailyLoss,hpValue=actor.data.data.attribs.hp.value,hpMax=actor.data.data.attribs.hp.max,oneFifthSanity=" / "+Math.floor(actor.data.data.attribs.san.value/5),mpValue=actor.data.data.attribs.mp.value,mpMax=actor.data.data.attribs.mp.max,pow=actor.data.data.characteristics.pow.value;if(chatContent+=`<br><b>${actor.name}. </b>`,hpValue<hpMax)if(!0===isCriticalWounds)chatContent+=`<b style="color:darkred">${game.i18n.localize("CoC7.hasCriticalWounds")}. </b>`;else{let healAmount=1;game.settings.get("CoC7","pulpRuleFasterRecovery")&&(healAmount=2),!0===quickHealer&&healAmount++,healAmount=Math.min(healAmount,hpMax-hpValue),chatContent+=1===healAmount?`<b style="color:darkolivegreen">${game.i18n.localize("CoC7.healthRecovered")}. </b>`:`<b style="color:darkolivegreen">${game.i18n.format("CoC7.pulpHealthRecovered",{number:healAmount})}. </b>`,actor.update({"data.attribs.hp.value":actor.data.data.attribs.hp.value+healAmount})}dailySanityLoss>0&&(chatContent+=`<b style="color:darkolivegreen">${game.i18n.localize("CoC7.dailySanLossRestarted")}.</b>`,actor.update({"data.attribs.san.dailyLoss":0,"data.attribs.san.oneFifthSanity":oneFifthSanity}));const hours=7;if(hours>0&&mpValue<mpMax){let magicAmount=hours*Math.ceil(pow/100);magicAmount=Math.min(magicAmount,mpMax-mpValue),chatContent+=`<b style="color:darkolivegreen">${game.i18n.format("CoC7.magicPointsRecovered")}: ${magicAmount}.</b>`,actor.update({"data.attribs.mp.value":actor.data.data.attribs.mp.value+magicAmount})}}const chatData={user:game.user.id,speaker:ChatMessage.getSpeaker(),content:chatContent,type:CONST.CHAT_MESSAGE_TYPES.OTHER};ChatMessage.create(chatData)}static async toggleXPGain(toggle){await game.settings.set("CoC7","xpEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.XPGainEnabled"):game.i18n.localize("CoC7.XPGainDisabled"))}static async rollDice(event,options={}){let diceModifier,difficulty,flatDiceModifier,flatThresholdModifier;options.askValue=!options.threshold;let threshold=options.threshold;if(void 0!==options.modifier&&(diceModifier=Number(options.modifier)),void 0!==options.difficulty&&(difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!event?.shiftKey&&!options.fastForward){const usage=await RollDialog.create(options);usage&&(diceModifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),threshold=Number(usage.get("threshold")),flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}const actors=[];if(game.user.isGM&&canvas.tokens.controlled.length)for(const token of canvas.tokens.controlled)actors.push(token.actor.tokenKey);else game.user.character&&actors.push(game.user.character.tokenKey);for(const tk of actors){const check=new CoC7Check;check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,check.actor=tk,await check.roll(),check.toMessage()}if(!actors.length){const check=new CoC7Check;check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,await check.roll(),check.toMessage()}}static updateCharSheets(){if(game.user.isGM)for(const a of game.actors.contents)"character"===a?.data?.type&&a?.sheet&&a?.sheet?.rendered&&(a.update({"data.flags.locked":!0}),a.render(!1));else for(const a of game.actors.contents)a.isOwner&&(a.update({"data.flags.locked":!0}),a.render(!1))}static async getDataFromDropEvent(event,entityType="Item"){if(event.originalEvent)return[];try{const dataList=JSON.parse(event.dataTransfer.getData("text/plain"));if("Folder"===dataList.type&&dataList.documentName===entityType){const folder=game.folders.get(dataList.id);return folder?folder.contents:[]}if(dataList.type===entityType){if(dataList.pack){const pack=game.packs.get(dataList.pack);return pack.metadata.entity!==entityType?[]:[await pack.getDocument(dataList.id)]}return dataList.data?[dataList]:[game.items.get(dataList.id)]}return[]}catch(err){return[]}}static async copyToClipboard(text){try{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(text);{const textArea=document.createElement("textarea");return textArea.value=text,textArea.style.position="fixed",textArea.style.left="-999px",textArea.style.top="-999px",document.body.appendChild(textArea),textArea.focus(),textArea.select(),new Promise(((resolve,reject)=>{document.execCommand("copy")?resolve():reject(new Error(game.i18n.localize("CoC7.UnableToCopyToClipboard"))),textArea.remove()})).catch((err=>ui.notifications.error(err)))}}catch(err){ui.notifications.error(game.i18n.localize("CoC7.UnableToCopyToClipboard"))}}static quoteRegExp(string){const len=string.length;let qString="";for(let current,i=0;i<len;++i)if(current=string.charAt(i),current>=" "&&current<="~")"\\"!==current&&"'"!==current||(qString+="\\"),qString+=current.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");else switch(current){case"\b":qString+="\\b";break;case"\f":qString+="\\f";break;case"\n":qString+="\\n";break;case"\r":qString+="\\r";break;case"\t":qString+="\\t";break;case"\v":qString+="\\v";break;default:qString+="\\u",current=current.charCodeAt(0).toString(16);for(let j=4;--j>=current.length;qString+="0");qString+=current}return qString}}class CoC7ConCheck{constructor(actorId=null,difficulty=CoC7Check.difficultyLevel.regular){this.check=new CoC7Check(actorId),this.check.characteristic="con",this.check.difficulty=difficulty,this.check.denyPush=!0,this.actorId=actorId}get isBlind(){return void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind}set isBlind(x){this._isBlind=x}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}get actor(){return this.actorId?chatHelper.getActorFromKey(this.actorId):null}set actorId(x){this._actorId=x,this.check.actor=x}get actorId(){return this._actorId?this._actorId:null}get tokenKey(){return this.actor.isToken?this.actor.tokenKey:null}get isSuccess(){return!!this.check&&this.check.isSuccess}get isRolled(){return!!(this.check&&this.check.dices&&this.check.dices.total)}static getFromCard(card){const conCheck=new CoC7ConCheck;chatHelper.getObjectFromElement(conCheck,card);const htmlCheck=card.querySelector(".roll-result");return CoC7Roll.getFromElement(htmlCheck,conCheck.check),conCheck.messageId=card.closest(".message").dataset.messageId,conCheck}async getCheckElement(){const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this.check),htmlElement=$.parseHTML(html)[0];return htmlElement?(htmlElement.classList.remove("chat-card","item-card","roll-card"),htmlElement):null}async toMessage(fastForward=!1){fastForward&&await this.rollCon();const html=await renderTemplate("systems/CoC7/templates/chat/con-check.html",this),htmlElement=$.parseHTML(html)[0];if(fastForward){htmlElement.querySelector(".roll-result").replaceWith(await this.getCheckElement())}const speakerData={};let speaker;this.actor?(this.token?speakerData.token=this.token:speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,flavor:this.flavor,content:htmlElement.outerHTML};["gmroll","blindroll"].includes(game.settings.get("core","rollMode"))&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async rollCon(){this.check.hideDiceResult=!0,await this.check._perform(),this.isBlind||this.isRolled||this.isSuccess||(this.stayAlive?await this.actor.setCondition(COC7.status.dead):await this.actor.setCondition(COC7.status.unconscious)),this.applied=!0}async updateChatCard(){const html=await renderTemplate("systems/CoC7/templates/chat/con-check.html",this),htmlElement=$.parseHTML(html)[0];if(htmlElement.querySelector(".roll-result").replaceWith(await this.getCheckElement()),this.isBlind||!this.isRolled||this.isSuccess||(this.stayAlive?await this.actor.setCondition(COC7.status.dead):await this.actor.setCondition(COC7.status.unconscious)),!this.messageId)return;const chatMessage=game.messages.get(this.messageId),msg=await chatMessage.update({content:htmlElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}}class SkillSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".select-skill").click((async event=>this._onSelectSkillClicked(event)))}async _onSelectSkillClicked(event){const li=event.currentTarget.closest(".item");this.data.data.skills[Number(li.dataset.index)].selected=!0,event.currentTarget.style.display="none",this.data.data.added||(this.data.data.added=0),this.data.data.added++;event.currentTarget.closest(".skill-selector").querySelector(".count").innerText=this.data.data.added,this.data.data.added>=this.data.data.optionsCount&&this.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/skill-select.html",data);return new Promise((resolve=>{new SkillSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>{if(!data.added>=data.optionsCount)return resolve(!1);const selected=data.skills.filter((skill=>skill.selected));return resolve(selected)}},{classes:["coc7","dialog","skill-select"]}).render(!0)}))}}class PointSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".item-name").click((async event=>this._onSelectCharacteristic(event))),html.find("button").click((event=>this._onButtonClicked(event)))}async _onSelectCharacteristic(event){const li=event.currentTarget.closest(".item"),itemList=li.closest(".item-list");for(const item of itemList.querySelectorAll(".selectable"))item.classList.remove("selected"),this.data.data.characteristics[item.dataset.key].selected=!1,this.data.data.characteristics[item.dataset.key].optional=!1;$(li).toggleClass("selected"),this.data.data.characteristics[li.dataset.key].selected=!0;li.closest("#skill-selection-form").querySelector(".points").innerText=this.data.data.total+this.data.data.characteristics[li.dataset.key].multiplier*this.data.data.characteristics[li.dataset.key].value;li.closest("#skill-selection-form").querySelector("button.validate").classList.remove("inactive"),this.data.data.resolved=!0}async _onButtonClicked(event){event.preventDefault(),event.currentTarget.classList.contains("inactive")||super.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/point-select.html",data);return new Promise((resolve=>{new PointSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>data.resolved?resolve(data):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class CharacSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".item-name").click((async event=>this._onSelectCharacteristic(event)))}async _onSelectCharacteristic(event){const li=event.currentTarget.closest(".item");this.data.data.selected=li.dataset.key,this.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/char-select.html",data);return new Promise((resolve=>{new CharacSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>data.selected?resolve(data.selected):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class CharacRollDialog extends Dialog{constructor(data,options){super(data,options),this.rolled=data.rolled||{}}activateListeners(html){super.activateListeners(html),html.on("change","input",this._onChangeInput.bind(this)),html.on("submit","form",this._onSubmit.bind(this)),html.on("click",".roll-characteristic",this._onRollCharacteristic.bind(this)),html.on("click",".increase-characteristic",this._onIncreaseCharacteristic.bind(this)),html.on("click",".decrease-characteristic",this._onDecreaseCharacteristic.bind(this)),html.on("click",".reset-characteristic",this._onResetCharacteristic.bind(this)),html.on("click","button",this._onButton.bind(this))}async _onRollCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;await this.rollCharacteristic(characKey)}async _onIncreaseCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.increaseCharacteristic(characKey)}async _onDecreaseCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.decreaseCharacteristic(characKey)}async _onResetCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.resetCharacteristic(characKey)}async _onButton(event){const action=event.currentTarget.dataset.action;if("roll"===action)for(const char of["str","con","siz","dex","app","int","pow","edu","luck"])await this.rollCharacteristic(char);"validate"!==action||event.currentTarget.classList.contains("inactive")||(this.checkTotal(),this.close())}async rollCharacteristic(key){const input=this._element[0].querySelector(`li.item[data-key=${key}]`)?.querySelector("input"),formula=this.data.data.characteristics.rolls[key];if(input&&formula){if(isNaN(Number(formula))){const roll=new Roll(formula);await roll.evaluate({async:!0}),roll.toMessage({flavor:`Rolling characterisitic ${this.data.data.characteristics.list[key].label}: ${formula}`}),input.value=roll.total}else input.value=Number(formula);this.data.data.characteristics.values[key]=Number(input.value),this.rolled||(this.rolled={}),this.rolled[key]=!0}this.checkTotal()}async increaseCharacteristic(key){const input=this._element[0].querySelector(`li.item[data-key=${key}]`)?.querySelector("input");input&&(input.value=Number(input.value)+1,this.data.data.characteristics.values[key]=Number(input.value)),this.checkTotal()}async decreaseCharacteristic(key){const input=this._element[0].querySelector(`li.item[data-key=${key}]`)?.querySelector("input");input&&Number(input.value)>0&&(input.value=Number(input.value)-1,this.data.data.characteristics.values[key]=Number(input.value)),this.checkTotal()}async resetCharacteristic(key){const input=this._element[0].querySelector(`li.item[data-key=${key}]`)?.querySelector("input");input&&(input.value=null,this.data.data.characteristics.values[key]=0),this.checkTotal()}async _onChangeInput(event){event.preventDefault();const input=event.currentTarget,value=Number(input.value);isNaN(value)||(this.data.data.characteristics.values[input.name]=value),this.checkTotal()}checkTotal(){this.data.data.characteristics.points.total=0;for(const[key,value]of Object.entries(this.data.data.characteristics.values))"luck"!==key&&(this.data.data.characteristics.points.total+=value);const validation=this._element[0].querySelector(".points");if(this.data.data.characteristics.points.enabled){if(Number(this.data.data.characteristics.points.total)!==Number(this.data.data.characteristics.points.value))validation.classList.add("warning");else{validation.classList.remove("warning");this._element[0].querySelector("button.validate").classList.remove("inactive"),this.data.data.validate=!0}validation.querySelector(".value").innerText=this.data.data.characteristics.points.value}if(validation.querySelector(".total").innerText=this.data.data.characteristics.points.total,this.data.data.characteristics.rolls.enabled&&this.rolled&&(this.data.data.validate=!Object.entries(this.rolled).find((el=>!el))&&9===Object.entries(this.rolled).length,this.data.data.validate)){this._element[0].querySelector("button.validate").classList.remove("inactive")}}async _onSubmit(event){event.preventDefault()}static async create(data){const rolled={};data.characteristics.points.total=0;for(const[key,value]of Object.entries(data.characteristics.values))"luck"!==key&&(data.characteristics.points.total+=value||0),!isNaN(value)&&value>0&&(rolled[key]=!0);data.characteristics.points.enabled&&Number(data.characteristics.points.total)!==Number(data.characteristics.points.value)&&(data.pointsWarning=!0);const html=await renderTemplate("systems/CoC7/templates/apps/char-roll.html",data);return new Promise((resolve=>{new CharacRollDialog({title:data.title,content:html,data,rolled,buttons:{},close:()=>data.validate?resolve(!0):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class SkillSpecSelectDialog{static async create(skills,specializationName,baseValue=null,name=null){const html=await renderTemplate("systems/CoC7/templates/apps/skill-spec-select.html",{hasSkills:skills.length>0,skills,base:baseValue,name});return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:name?game.i18n.format("CoC7.SkillSelectBase",{name}):game.i18n.format("CoC7.SkillSpecSelectTitle",{specialization:specializationName}),content:html,buttons:{validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#skill-select-form")),resolve(formData))}},default:"validate",close:()=>resolve(!1)});dlg.render(!0)}))}}class CoC7MeleeResoltion{constructor(initiatorMessage=null,targetMessage=null,messageId=null){this.initiatorMessage=initiatorMessage,this.targetMessage=targetMessage,this.messageId=messageId}async preCreateMessage(){const html=await renderTemplate(this.template,this),chatData={user:game.user.id,content:html},rollMode=game.settings.get("core","rollMode");["gmroll","blindroll"].includes(rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;const chatMessage=await ChatMessage.create(chatData);return this.messageId=chatMessage.id,chatMessage}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get target(){return this.targetMessage?CoC7MeleeTarget.getFromMessageId(this.targetMessage):null}get targetToken(){return this.target?chatHelper.getTokenFromKey(this.target.actorKey):null}get initiator(){return this.initiatorMessage?CoC7MeleeInitiator.getFromMessageId(this.initiatorMessage):null}get initiatorToken(){return this.initiator?chatHelper.getTokenFromKey(this.initiator.actorKey):null}async resolve(){if(this.target)switch(this.target.action){case"noResponse":this.initiator.roll.successLevel>0?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.action="roll-melee-damage",this.rollDamage=!0):(this.resultString=game.i18n.format("CoC7.InitiatorMissed",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!1),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target;break;case"dodge":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.action="roll-melee-damage",this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.DodgeSuccess",{name:this.target.name}),this.winner=this.target,this.looser=this.initiator,this.winnerImg=this.target.skill.data.img,this.winnerTitle=this.target.skill.name,this.action="dodge",this.rollDamage=!1);break;case"fightBack":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>=this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.target.name}),this.winner=this.target,this.winnerImg=this.target.weapon.img,this.winnerTitle=this.target.weapon.name,this.looser=this.initiator,this.rollDamage=!0);break;case"maneuver":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>=this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.ManeuverSuccess",{name:this.target.name}),this.winner=this.target,this.winnerImg=this.target.skill.data.img,this.winnerTitle=this.target.skill.name,this.looser=this.initiator,this.rollDamage=!1)}else this.initiator.roll.successLevel>0?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!0):(this.resultString=game.i18n.format("CoC7.InitiatorMissed",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!1);this.winner&&(this.winner.roll.successLevel>=CoC7Check.successLevel.extreme?this.winner.roll.criticalDamage=!0:this.winner.roll.criticalDamage=!1),this.resolved=!0;const html=await renderTemplate(this.template,this);if(this.messageId){const message=game.messages.get(this.messageId),speakerData={};this.winner&&(this.winner.token&&(speakerData.token=this.winner.token.documment),this.winner.actor&&(speakerData.actor=this.winner.actor));const speaker=this.winner?ChatMessage.getSpeaker(speakerData):null,user=this.winner&&this.winner.actor.user?this.winner.actor.user:game.user;let msg;return message?(msg=speaker?await message.update({user:user.id,speaker,content:html}):await message.update({user:user.id,content:html}),await ui.chat.updateMessage(msg,!1),msg):void ui.notifications.warn("Resolition card missing, was deleted ?")}}get template(){return"systems/CoC7/templates/chat/combat/melee-resolution.html"}}class CoC7MeleeTarget extends ChatCardActor{constructor(actorKey,parentMessageId=null,fastForward=!1){super(actorKey,fastForward),this.actorKey=actorKey,this.initiatorKey=null,this.parentMessageId=parentMessageId,this.fastForward=fastForward,this.resolved=!1,this.outnumbered=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.skillId=null,this.itemId=null,this.dodging=!1,this.notResponding=!1,this.fightingBack=!1,this.maneuvering=!1}get actionSelected(){return this.dodging||this.notResponding||this.fightingBack||this.maneuvering}get action(){return this.dodging?"dodge":this.notResponding?"noResponse":this.fightingBack?"fightBack":this.maneuvering?"maneuver":null}get weapon(){return this.actor.items.get(this.itemId)}get skill(){return this.actor.items.get(this.skillId)}set initiatorKey(x){this._initiatorKey=x,this.targetKey=x}get initiatorKey(){return this._initiatorKey||(!this._initiator&&this.parentMessageId&&(this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId)),this._initiator&&(this._initiatorKey=this._initiator.actorKey)),this._initiatorKey?this._initiatorKey:(ui.notifications.error(`No initiator found for target : ${this.actor.name}`),null)}get initiator(){if(!this.initiatorKey){if(!this.parentMessageId)return null;this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId),this.initiatorKey=this._initiator.actorKey}return chatHelper.getActorFromKey(this.initiatorKey)}get meleeInitiator(){return this._initiator||(this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId)),this._initiator}get template(){return"systems/CoC7/templates/chat/combat/melee-target.html"}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.data.content)[0],target=CoC7MeleeTarget.getFromCard(card,messageId);return target.messageId=messageId,target}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".melee.target"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const target=CoC7MeleeTarget.getFromCard(card);target.toggleFlag(flag),target.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;this[flag]=!this[flag]}async createChatCard(){const html=await renderTemplate(this.template,this),speakerData={},token=chatHelper.getTokenFromKey(this.actorKey);token?speakerData.token=token.document:speakerData.actor=this.actor;const speaker=ChatMessage.getSpeaker(speakerData);this.actor.isToken&&(speaker.alias=this.actor.token.name);let user=game.user;if(void 0===this.actor.user){let owners=[];const gms=game.users.filter((a=>a.isGM)).map((a=>a.id));for(const[k,v]of Object.entries(this.actor.data.permission))if(v===(CONST.DOCUMENT_OWNERSHIP_LEVELS||CONST.ENTITY_PERMISSIONS).OWNER){if("default"===k){owners=game.users.map((a=>a.id));break}gms.includes(k)||owners.push(k)}let content="";switch(owners.length){case 0:break;case 1:void 0!==game.users.get(owners[0])&&(user=game.users.get(owners[0]));break;default:content="<p>"+game.i18n.localize("CoC7.MessageSelectSingleUserForTarget"),content+='<form id="selectform"><select name="user">';for(const k of owners)content=content+'<option value="'+k+'">'+game.users.get(k).name+"</option>";content+="</select></form></p>",await Dialog.prompt({title:game.i18n.localize("CoC7.MessageTitleSelectSingleUserForTarget"),content,callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)"user"===name&&(user=game.users.get(value))}})}}else void 0!==this.actor.user&&(user=this.actor.user);const chatData={user:user.id,speaker,content:html};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;const message=await ChatMessage.create(chatData);return this.messageId=message.id,message}async updateChatCard(){const message=game.messages.get(this.messageId);if(!game.user.isGM&&message.user.id!==game.user.id)return void ui.notifications.info(game.i18n.localize("CoC7.UnableToInteractWithChatCard"));const html=await renderTemplate(this.template,this),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}async getUpdatedChatCard(){renderTemplate(this.template,this).then((html=>html))}static async updateSelected(card,event){const target=CoC7MeleeTarget.getFromCard(card);switch(event.currentTarget.dataset.action){case"dodge":target.dodging=!0,target.notResponding=!1,target.fightingBack=!1,target.maneuvering=!1,target.skillId=event.currentTarget.dataset.skillId,target.itemId=null;break;case"noResponse":target.dodging=!1,target.notResponding=!0,target.fightingBack=!1,target.maneuvering=!1,target.skillId=null,target.itemId=null;break;case"fightBack":target.dodging=!1,target.notResponding=!1,target.fightingBack=!0,target.maneuvering=!1,target.skillId=event.currentTarget.dataset.skillId,target.itemId=event.currentTarget.dataset.weaponId;break;case"maneuver":target.dodging=!1,target.notResponding=!1,target.fightingBack=!1,target.maneuvering=!0,target.skillId=event.currentTarget.dataset.skillId,target.itemId=null}return target.updateChatCard(),target}async performSkillCheck(skillId=null,publish=!1){const check=new CoC7Check;return check.isBlind=!1,check.isUnkonwn=!1,check.referenceMessageId=this.messageId,check.rollType="opposed",check.side="target",check.action=this.action,check.actor=this.actor,check.item=this.itemId,check.skill=skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.diceModifier=0,this.disadvantage&&(check.diceModifier-=1),this.advantage&&(check.diceModifier+=1),await check.roll(),this.check=check,this.rolled=!0,this.resolved=!0,publish&&check.toMessage(),check}async publishNoReponseResult(){this.rolled=!0,this.resolved=!0,this.notResponding=!0;const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id,await this.updateChatCard()}async publishCheckResult(check=null){if(!check&&!this.check)return null;if(check&&(this.check=check),this.roll=CoC7Roll.getFromCheck(this.check),this.rolled=!0,this.roll.rollIcons=[],this.roll.critical){this.roll.rollColor="goldenrod",this.roll.rollTitle=game.i18n.localize("CoC7.CriticalSuccess");for(let index=0;index<4;index++)this.roll.rollIcons.push("medal")}else if(this.roll.fumble){this.roll.rollColor="darkred",this.roll.rollTitle=game.i18n.localize("CoC7.Fumble");for(let index=0;index<4;index++)this.roll.rollIcons.push("spider")}else if(this.roll.success){this.roll.rollColor="goldenrod",CoC7Check.successLevel.regular===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.RegularSuccess")),CoC7Check.successLevel.hard===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.HardSuccess")),CoC7Check.successLevel.extreme===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.ExtremeSuccess"));for(let index=0;index<this.roll.successLevel;index++)this.roll.rollIcons.push("star")}else this.roll.rollColor="black",this.roll.rollTitle=game.i18n.localize("CoC7.Failure"),this.roll.rollIcons.push("skull");const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id,await this.updateChatCard()}static getFromCard(card,messageId=null){const actorKey=card.dataset.actorKey,parentMessageId=card.dataset.parentMessageId,fastForward="true"===card.dataset.fastForward,target=new CoC7MeleeTarget(actorKey,parentMessageId,fastForward);return target.roll=CoC7Roll.getFromCard(card),chatHelper.getObjectFromElement(target,card),card.closest(".message")?target.messageId=card.closest(".message").dataset.messageId:target.messageId=messageId,target}upgradeRoll(luckAmount,newSuccessLevel,oldCard){this.actor.spendLuck(luckAmount)||ui.notifications.error(`${this.actor.name} didn't have enough luck to pass the check`),this.roll.value=null,this.roll.successLevel=newSuccessLevel,this.roll.luckSpent=!0,oldCard.dataset.processed=!1;const diceRolls=oldCard.querySelector(".dice-roll");diceRolls.dataset.value=null,diceRolls.dataset.successLevel=newSuccessLevel,diceRolls.dataset.luckSpent=!0;const resulDetails=oldCard.querySelector(".result-details"),diceTotal=oldCard.querySelector(".dice-total");switch(newSuccessLevel){case CoC7Check.successLevel.regular:diceTotal.innerText=game.i18n.localize("CoC7.RegularSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:diceTotal.innerText=game.i18n.localize("CoC7.HardSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:diceTotal.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:diceTotal.innerText=game.i18n.localize("CoC7.CriticalSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}diceTotal.classList.replace("failure","success"),oldCard.querySelector(".card-buttons").remove(),oldCard.querySelector(".dice-tooltip").style.display="none",CoC7Chat.updateChatCard(oldCard)}}class CoC7RangeInitiator{constructor(actorKey=null,itemId=null,fastForward=!1){this.actorKey=actorKey,this.itemId=itemId,this.fastForward=fastForward,this.resolved=!1,this.cover=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.targetCard=null,this.rolled=!1,this.singleShot=!1,this.multipleShots=!1,this.burst=!1,this.fullAuto=!1,this.tokenKey=null,this.aimed=!1,this.totalBulletsFired=0,this._targets=[];for(const t of[...game.user.targets]){const target=new CoC7RangeTarget(`${t.scene.id}.${t.id}`);target.token=t,this._targets.push(target)}if(this._targets.length)this._targets[0].active=!0;else{const target=new CoC7RangeTarget;target.active=!0,this._targets.push(target)}if(actorKey){const actor=chatHelper.getActorFromKey(actorKey);if(this.token=chatHelper.getTokenFromKey(actorKey),this.token&&(this.tokenKey=actor.tokenKey),itemId){actor.items.get(itemId)&&(this.weapon.singleShot?this.singleShot=!0:this.weapon.data.data.properties.auto&&(this.fullAuto=!0))}}if(this.tokenKey)for(const t of this._targets)if(t.token&&this.token){t.distance=chatHelper.getDistance(t.token,this.token),t.roundedDistance=Math.round(100*t.distance.value)/100,t.distanceUnit=t.distance.unit;const distInYd=Math.round(100*chatHelper.toYards(t.distance))/100;if(this.actor){t.pointBlankRange=!1;distInYd<=this.actor.data.data.characteristics.dex.value/15&&(t.pointBlankRange=!0)}this.weapon&&this.weapon.baseRange&&(t.baseRange=!1,t.longRange=!1,t.extremeRange=!1,t.outOfRange=!1,this.weapon.data.data.properties.shotgun?(distInYd<=this.weapon.baseRange&&(t.baseRange=!0),distInYd>this.weapon.baseRange&&distInYd<=this.weapon.longRange&&(t.longRange=!0),distInYd>this.weapon.longRange&&distInYd<=this.weapon.extremeRange&&(t.extremeRange=!0),distInYd>this.weapon.extremeRange&&(t.outOfRange=!0)):(distInYd<=this.weapon.baseRange&&(t.baseRange=!0),distInYd>this.weapon.baseRange&&distInYd<=2*this.weapon.baseRange&&(t.longRange=!0),distInYd>2*this.weapon.baseRange&&distInYd<=4*this.weapon.baseRange&&(t.extremeRange=!0),distInYd>4*this.weapon.baseRange&&(t.outOfRange=!0)),t.baseRange||t.longRange||t.extremeRange||t.outOfRange||(t.baseRange=!0))}else t.baseRange=!0}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}get actor(){return chatHelper.getActorFromKey(this.actorKey)}get item(){return this.actor.items.get(this.itemId)}get weapon(){return this.item}get targets(){return this._targets||(this._targets=[]),this._targets}get target(){return this.targets&&this.targets.length?this.targets.pop():null}get skills(){return this.actor.getWeaponSkills(this.itemId)}get mainWeaponSkill(){return this.actor.items.get(this.weapon.data.data.skill.main.id)}get autoWeaponSkill(){return this.weapon.data.data.skill.alternativ.id?this.actor.items.get(this.weapon.data.data.skill.alternativ.id):this.mainWeaponSkill}get autoFire(){return this.burst||this.fullAuto}get multiTarget(){return this.fullAuto||this.multipleShots}get aiming(){return void 0===this._aiming&&(this._aiming=this.actor.getActorFlag("aiming")),this._aiming}get activeTarget(){return this._targets.length?this._targets.find((t=>t.active)):null}get shots(){return void 0===this._shots&&(this._shots=[]),this._shots}get currentShotRank(){return this.shots.length+1}get activeTargetShotDifficulty(){return this.shotDifficulty()}set aiming(b){this._aiming=b}get didAnyShotHit(){let anyHit=!1;for(const r of this.rolls)anyHit=anyHit||r.isSuccess;return anyHit}get successfulHits(){const hits=[];for(let index=0;index<this.rolls.length;index++)if(this.rolls[index].isSuccess){const hit={roll:this.rolls[index],shot:this.shots[index]};hits.push(hit)}return 0!==hits.length?hits:null}get shotFired(){return this.shots?this.shots.length:0}get totalAmmo(){return this.weapon.getBulletLeft()}get maxShots(){return this.fullAuto?"∞":this.weapon.data.data.usesPerRound.max?parseInt(this.weapon.data.data.usesPerRound.max):1}get ignoreAmmo(){return game.settings.get("CoC7","disregardAmmo")}get ignoreUsesPerRound(){return game.settings.get("CoC7","disregardUsePerRound")}get outOfAmmo(){return!this.ignoreAmmo&&this.totalBulletsFired>=this.weapon.getBulletLeft()}get outOfShots(){return!this.ignoreUsesPerRound&&(!!this.shots&&this.shots.length>=this.maxShots)}get volleySize(){if(!this.weapon.data.data.properties.auto)return 1;if(this._volleySize)return this._volleySize;const size=Math.floor(this.autoWeaponSkill.value/10);return size<3?3:size}set volleySize(x){x>=Math.floor(this.autoWeaponSkill.value/10)?this._volleySize=Math.floor(this.autoWeaponSkill.value/10):x<=3&&(this._volleySize=3),this._volleySize=parseInt(x)}get isVolleyMinSize(){return 3===this.volleySize}get isVolleyMaxSize(){return(Math.floor(this.autoWeaponSkill.value/10)<3?3:Math.floor(this.autoWeaponSkill.value/10))===this.volleySize}getTargetFromKey(key){return this._targets.find((t=>key===t.actorKey))}calcTargetsDifficulty(){for(const t of this.targets)t.shotDifficulty=this.shotDifficulty(t)}shotDifficulty(t=null){const target=t||this.activeTarget;let damage=this.weapon.data.data.range.normal.damage;this.weapon.data.data.properties.shotgun&&(t.longRange&&(damage=this.weapon.data.data.range.long.damage),t.extremeRange&&(damage=this.weapon.data.data.range.extreme.damage));let difficulty,modifier=target.modifier;difficulty=this.weapon.data.data.properties.shotgun?1:target.difficulty;let difficultyName="";if(this.aiming&&1===this.currentShotRank&&modifier++,this.advantage&&modifier++,this.disadvantage&&modifier--,this.reload&&modifier--,this.multipleShots&&!this.fullAuto&&modifier--,this.fullAuto&&(modifier-=this.currentShotRank-1),modifier<-2){difficulty+=Math.abs(modifier+2),difficulty>CoC7Check.difficultyLevel.critical&&(difficulty=CoC7Check.difficultyLevel.impossible),modifier=-2}return CoC7Check.difficultyLevel.regular===difficulty&&(difficultyName="Regular"),CoC7Check.difficultyLevel.hard===difficulty&&(difficultyName="Hard"),CoC7Check.difficultyLevel.extreme===difficulty&&(difficultyName="Extreme"),CoC7Check.difficultyLevel.critical===difficulty&&(difficultyName="Critical"),CoC7Check.difficultyLevel.impossible===difficulty&&(difficultyName="Impossible"),{level:difficulty,name:difficultyName,modifier,damage,impossible:difficulty===CoC7Check.difficultyLevel.impossible}}addShotAtCurrentTarget(){this.calcTargetsDifficulty();const shot={target:this.activeTarget,extremeRange:this.activeTarget.extremeRange,actorKey:this.activeTarget.actorKey,actorName:this.activeTarget.name,difficulty:this.activeTarget.shotDifficulty.level,modifier:this.activeTarget.shotDifficulty.modifier,damage:this.activeTarget.shotDifficulty.damage,bulletsShot:1,transitBullets:0,bulletsShotTransit:1,transit:!1};let bulletLeft=this.totalAmmo-this.totalBulletsFired;if(this.fullAuto){if(this.currentShotRank>1){const previousShot=this.shots[this.currentShotRank-2];if(previousShot.actorKey!==this.activeTarget.actorKey){const distance=chatHelper.getDistance(chatHelper.getTokenFromKey(previousShot.actorKey),chatHelper.getTokenFromKey(this.activeTarget.actorKey));shot.transitBullets=Math.floor(chatHelper.toYards(distance)),shot.transitBullets>=bulletLeft&&!this.ignoreAmmo&&(shot.transitBullets=bulletLeft,bulletLeft=0),this.totalBulletsFired=parseInt(this.totalBulletsFired)+shot.transitBullets,shot.transit=!0}}shot.bulletsShot=this.volleySize,shot.bulletsShot<=3&&(shot.bulletsShot=3),shot.bulletsShot>=bulletLeft&&!this.ignoreAmmo&&(shot.bulletsShot=bulletLeft,bulletLeft=0),shot.bulletsShotTransit=shot.bulletsShot+shot.transitBullets}this.burst&&(shot.bulletsShot=parseInt(this.weapon.data.data.usesPerRound.burst)?parseInt(this.weapon.data.data.usesPerRound.burst):1,shot.bulletsShot>=bulletLeft&&!this.ignoreAmmo&&(shot.bulletsShot=bulletLeft,bulletLeft=0)),this.totalBulletsFired=parseInt(this.totalBulletsFired)+shot.bulletsShot,this.aiming&&(this.aiming=!1,this.aimed=!0),this.shots.push(shot)}get template(){return"systems/CoC7/templates/chat/combat/range-initiator.html"}async createChatCard(){this.calcTargetsDifficulty();const html=await renderTemplate(this.template,this),speakerData={},token=chatHelper.getTokenFromKey(this.actorKey);token?speakerData.token=token.document:speakerData.actor=this.actor;const speaker=ChatMessage.getSpeaker(speakerData),chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,content:html},rollMode=game.settings.get("core","rollMode");["gmroll","blindroll"].includes(rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;return await ChatMessage.create(chatData)}async updateChatCard(){this.calcTargetsDifficulty();const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;"singleShot"===flag||"multipleShots"===flag||"fullAuto"===flag?(this.singleShot=!1,this.multipleShots=!1,this.fullAuto=!1,"fullAuto"===flag&&(this.burst=!1),this[flag]=!0):"burst"===flag?(this.fullAuto=!1,this.singleShot||this.multipleShots||(this.singleShot=!0),this.burst=!this.burst):this[flag]=!this[flag]}async resolveCard(){if(this.rolls=[],this.multiTarget){let weaponMalfunction=!1,index=0;for(;!weaponMalfunction&&this.shots.length>index;){const roll=await this.shootAtTarget(this.shots[index]);roll.dice?.roll&&await CoC7Dice.showRollDice3d(roll.dice.roll),await this.weapon.shootBullets(parseInt(this.shots[index].bulletsShot)+parseInt(this.shots[index].transitBullets)),roll.hasMalfunction&&(roll.isSuccess=!1,weaponMalfunction=!0),index++,this.rolls.push(roll)}}else{const roll=await this.shootAtTarget();roll.dice?.roll&&await CoC7Dice.showRollDice3d(roll.dice.roll);let bulletFired=this.burst?parseInt(this.weapon.data.data.usesPerRound.burst):1;bulletFired>=this.totalAmmo&&(bulletFired=this.totalAmmo);const shot={target:this.activeTarget,extremeRange:this.activeTarget.extremeRange,actorKey:this.activeTarget.actorKey,actorName:this.activeTarget.name,difficulty:this.activeTarget.shotDifficulty.level,modifier:this.activeTarget.shotDifficulty.modifier,damage:this.activeTarget.shotDifficulty.damage,bulletsShot:bulletFired,transitBullets:0,transit:!1};await this.weapon.shootBullets(bulletFired),roll.hasMalfunction&&(roll.isSuccess=!1),this.shots.push(shot),this.rolls.push(roll)}this.resolved=!0,this.rolled=!0,await this.updateChatCard()}async shootAtTarget(shot=null){const target=shot?this.getTargetFromKey(shot.actorKey):this.activeTarget,check=new CoC7Check;return check.actorKey=this.actorKey,check.actor=this.actorKey,check.item=this.itemId,check.isBlind=!1,check.isUnkonwn=!1,this.autoFire?check.skill=this.autoWeaponSkill:check.skill=this.mainWeaponSkill,this.multiTarget?(check.difficulty=shot.difficulty,check.diceModifier=shot.modifier):(this.calcTargetsDifficulty(),this.totalBulletsFired=parseInt(this.totalBulletsFired)+1,this.aiming&&(this.aiming=!1,this.aimed=!0),check.difficulty=this.activeTarget.shotDifficulty.level,check.diceModifier=this.activeTarget.shotDifficulty.modifier),check.details=`${game.i18n.localize("CoC7.Target")}: ${target.name}`,check.targetKey=target.actorKey,await check.roll(),check}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.data.content)[0],initiator=CoC7RangeInitiator.getFromCard(card,messageId);return initiator.messageId=messageId,initiator}changeVolleySize(x){this.volleySize=this.volleySize+x,this.updateChatCard()}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".range.initiator"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const initiator=CoC7RangeInitiator.getFromCard(card);if(event.currentTarget.classList.contains("target-flag")){const target=event.currentTarget.closest(".target"),key=parseInt(target.dataset.targetKey);initiator.targets[key].toggleFlag(camelFlag)}else initiator.toggleFlag(camelFlag);initiator.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}passRoll(rollIndex){const roll=this.rolls[rollIndex],luckAmount=parseInt(roll.luckNeeded);this.actor.spendLuck(luckAmount)?(roll.successLevel=roll.difficulty,roll.isSuccess=!0,roll.luckSpent=!0,this.updateChatCard()):ui.notifications.error(`${this.actor.name} does not have enough luck to pass the check`)}upgradeRoll(rollIndex,upgradeindex){const roll=this.rolls[rollIndex],increasedSuccess=roll.increaseSuccess[upgradeindex],luckAmount=parseInt(increasedSuccess.luckAmount);if(!this.actor.spendLuck(luckAmount))return void ui.notifications.error(`${this.actor.name} does not have enough luck to pass the check`);const newSuccessLevel=parseInt(increasedSuccess.newSuccessLevel);roll.successLevel=newSuccessLevel,roll.difficulty<=newSuccessLevel&&(roll.isSuccess=!0),roll.luckSpent=!0,this.updateChatCard()}static getFromCard(card,messageId=null){const rangeInitiator=new CoC7RangeInitiator;rangeInitiator._targets=[],messageId?rangeInitiator.messageId=messageId:card.closest(".message")&&(rangeInitiator.messageId=card.closest(".message").dataset.messageId),chatHelper.getObjectFromElement(rangeInitiator,card);const cardTargets=card.querySelectorAll(".target");for(const t of cardTargets){const target=CoC7RangeTarget.getFromElement(t);rangeInitiator.targets.push(target)}const cardShots=card.querySelectorAll(".shot");if(cardShots)for(const s of cardShots){const shot={};chatHelper.getObjectFromElement(shot,s),rangeInitiator.shots.push(shot)}rangeInitiator.rolls=[];const rolls=card.querySelectorAll(".roll-result");for(const r of rolls){const roll=CoC7Roll.getFromElement(r);rangeInitiator.rolls.push(roll)}rangeInitiator.damage=[];const damageRolls=card.querySelectorAll(".damage-results");for(const dr of damageRolls){const damageRoll=CoC7Damage.getFromElement(dr);rangeInitiator.damage.push(damageRoll)}return rangeInitiator}async rollDamage(){this.damage=[];const hits=this.successfulHits;for(let i=0;i<hits.length;i++){const h=hits[i],volleySize=parseInt(h.shot.bulletsShot),damageRolls=[];let damageFormula=String(h.shot.damage);damageFormula&&""!==damageFormula||(damageFormula="0");const damageDie=CoC7Damage.getMainDie(damageFormula),maxDamage=new Roll(damageFormula).evaluate({maximize:!0}).total,criticalDamageFormula=this.weapon.impale?`${damageFormula} + ${maxDamage}`:`${maxDamage}`,criticalDamageDie=CoC7Damage.getMainDie(criticalDamageFormula);let impalingShots=0,successfulShots=0,critical=!1;(this.fullAuto||this.burst)&&(successfulShots=Math.floor(volleySize/2)),0===successfulShots&&(successfulShots=1),h.roll.successLevel>=CoC7Check.difficultyLevel.extreme&&(impalingShots=successfulShots,successfulShots=volleySize-impalingShots,critical=!0,CoC7Check.difficultyLevel.critical!==h.roll.successLevel&&(CoC7Check.difficultyLevel.extreme<=h.roll.difficulty||h.shot.extremeRange)&&(successfulShots=volleySize,impalingShots=0,critical=!1));let total=0;for(let index=0;index<successfulShots;index++){const roll=new Roll(damageFormula);await roll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(roll),damageRolls.push({formula:damageFormula,total:roll.total,die:damageDie,critical:!1}),total+=roll.total}for(let index=0;index<impalingShots;index++){const roll=new Roll(criticalDamageFormula);await roll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(roll),damageRolls.push({formula:criticalDamageFormula,total:roll.total,die:criticalDamageDie,critical:!0}),total+=roll.total}let targetName="dummy",target=chatHelper.getTokenFromKey(h.roll.targetKey);target||(target=chatHelper.getActorFromKey(h.roll.targetKey)),target&&(targetName=target.name),this.damage.push({targetKey:h.roll.targetKey,targetName,rolls:damageRolls,total,critical,dealt:!1,resultString:game.i18n.format("CoC7.rangeCombatDamage",{name:targetName,total})})}this.damageRolled=0!==this.damage.length,this.updateChatCard()}async dealDamage(){for(let dIndex=0;dIndex<this.damage.length;dIndex++){const actor=chatHelper.getActorFromKey(this.damage[dIndex].targetKey);if(null===actor)ui.notifications.error(game.i18n.localize("CoC7.NoTargetToDamage"));else{this.damage[dIndex].totalTaken=0,this.damage[dIndex].totalAbsorbed=0;for(let rIndex=0;rIndex<this.damage[dIndex].rolls.length;rIndex++){const dealtAmount=await actor.dealDamage(this.damage[dIndex].rolls[rIndex].total);this.damage[dIndex].totalTaken+=dealtAmount,this.damage[dIndex].rolls[rIndex].taken=dealtAmount,this.damage[dIndex].rolls[rIndex].absorbed=this.damage[dIndex].rolls[rIndex].total-dealtAmount,this.damage[dIndex].totalAbsorbed+=this.damage[dIndex].rolls[rIndex].total-dealtAmount}this.damage[dIndex].dealt=!0,this.damage[dIndex].resultString=game.i18n.format("CoC7.rangeCombatDamageArmor",{name:this.damage[dIndex].targetName,total:this.damage[dIndex].totalTaken,armor:this.damage[dIndex].totalAbsorbed})}}this.damageDealt=!0,this.updateChatCard()}}class CoC7RangeTarget{constructor(actorKey=null){this.actorKey=actorKey,this.cover=!1,this.pointBlankRange=!1,this.baseRange=!0,this.longRange=!1,this.extremeRange=!1,this.inMelee=!1}get big(){return void 0===this._big&&(this.actor&&this.actor.build?this._big=this.actor.build>=4:this._big=!1),this._big}set big(b){this._big=b}get small(){return void 0===this._small&&(this.actor&&this.actor.build?this._small=this.actor.build<=-2:this._small=!1),this._small}set small(b){this._small=b}get normal(){return!this.big&&!this.small}set normal(b){this._big=!1,this._small=!1}get isFast(){return!(!this.actor||!this.actor.mov)&&this.actor.mov>=8}get fast(){return void 0===this._fast&&(this._fast=!1),this._fast}set fast(b){this._fast=b}get actor(){return this.actorKey&&!this._actor&&(this._actor=chatHelper.getActorFromKey(this.actorKey)),this._actor}get name(){return this.token?this.token.name:this.actor?this.actor.name:"Dummy"}get img(){if(this.token){if(this.token.data.img)return this.token.data.img;if(this.token.document?.texture.src)return this.token.document?.texture.src}return this.actor?this.actor.data.img:"../icons/svg/mystery-man-black.svg"}get token(){return!this._token&&this.actorKey&&(this._token=chatHelper.getTokenFromKey(this.actorKey)),this._token}get sizeText(){return this.big?game.i18n.localize("CoC7.rangeCombatCard.BigTargetTitle"):this.small?game.i18n.localize("CoC7.rangeCombatCard.SmallTargetTitle"):game.i18n.localize("CoC7.rangeCombatCard.NormalTargetTitle")}get sizeLabel(){return this.big?game.i18n.localize("CoC7.rangeCombatCard.BigTarget"):this.small?game.i18n.localize("CoC7.combatCard.SmallTarget"):game.i18n.localize("CoC7.rangeCombatCard.NormalTarget")}get difficulty(){return this.baseRange||this.pointBlankRange?CoC7Check.difficultyLevel.regular:this.longRange?CoC7Check.difficultyLevel.hard:this.extremeRange?CoC7Check.difficultyLevel.extreme:CoC7Check.difficultyLevel.impossible}get modifier(){let modifier=0;return this.cover&&modifier--,this.pointBlankRange&&modifier++,this.fast&&modifier--,this.small&&modifier--,this.big&&modifier++,this.inMelee&&modifier--,this.surprised&&modifier++,modifier}set token(t){this._token=t}static getFromElement(element){const target=new CoC7RangeTarget;return chatHelper.getObjectFromElement(target,element),target}static changeDisplayedTarget(event){if(!event.currentTarget.classList.contains("target-selector"))return null;return event.currentTarget.closest(".targets").querySelectorAll(".target")}attachToElement(element){chatHelper.attachObjectToElement(this,element)}toggleFlag(flag){"baseRange"===flag||"longRange"===flag||"extremeRange"===flag||"pointBlankRange"===flag?(this.pointBlankRange=!1,this.baseRange=!1,this.longRange=!1,this.extremeRange=!1,this.outOfRange=!1,this[flag]=!0):"size"===flag?this.small?(this.small=!1,this.big=!0):this.big?(this.small=!1,this.big=!1):this.small=!0:this[flag]=!this[flag],"fast"===flag&&this.fast&&!this.isFast&&ui.notifications.warn(game.i18n.format("CoC7.WarnFastTargetWithWrongMOV",{mov:this.actor.mov}))}}class InteractiveChatCard{constructor(options={}){this._options=options}get options(){return mergeObject(this.constructor.defaultOptions,this._options)}get template(){return this.options.template}get cssClasses(){return this.options.classes}async toMessage(optionnalChatData={}){const html=await renderTemplate(this.template,this),htmlCardElement=$(html)[0];htmlCardElement.dataset.object=escape(this.dataString),htmlCardElement.dataset.cardClass=this.constructor.name,htmlCardElement.classList.add(...this.cssClasses);const chatData=mergeObject({user:game.user.id,flavor:game.i18n.localize(this.options.title),content:htmlCardElement.outerHTML},optionnalChatData);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard(options={}){if(options.compute&&this.compute(),this.messageId){const html=await renderTemplate(this.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.dataString),htmlCardElement.dataset.cardClass=this.constructor.name,htmlCardElement.classList.add(...this.cssClasses);const chatMessage=game.messages.get(this.messageId);this.closed&&await chatMessage.setFlag("CoC7","state","resolved");const msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}this.toMessage()}activateListeners(html){html.on("click",".interactive-card .ic-radio-switch",this._onToggle.bind(this)),html.on("click",".interactive-card .ic-switch",this._onToggle.bind(this)),html.on("click",".interactive-card .submit",this._onSubmit.bind(this)),html.on("focusout","input",this._onSubmit.bind(this)),html.on("click",".interactive-card button",this._onButton.bind(this)),html.on("keydown","form",this._onKey.bind(this))}static async bindListeners(html){const htmlCardElement=html[0].querySelector(".chat-card");if(!htmlCardElement)return;if(!htmlCardElement.dataset.cardClass)return;if(!Object.getOwnPropertyNames(game.CoC7.cards).includes(htmlCardElement.dataset.cardClass))return;const card=await InteractiveChatCard.fromHTMLCardElement(htmlCardElement),typedCard=Object.assign(new game.CoC7.cards[htmlCardElement.dataset.cardClass],card);typedCard.assignObject(),typedCard.activateListeners(html)}assignObject(){}_onButton(event){const action=event.currentTarget.dataset.action;this[action]&&this[action]({event,update:!0})}_onKey(event){return"Enter"===event.key&&this._onSubmit(event),"Enter"!==event.key}_onSubmit(event){event.preventDefault();const card=event.currentTarget.closest(".interactive-card");if(!card)return;this._update(card)&&this.updateChatCard()}_update(card){const forms=card.querySelectorAll("form");let updates=!1;for(let i=0;i<forms.length;i++){const form=forms[i];let data=new FormDataExtended(form).toObject();data=diffObject(this,expandObject(data));for(const[key,value]of Object.entries(data))this[key]=value,updates=!0}return updates}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultOptions(){return{classes:["interactive-card"],exclude:["_actor","_skill","_item","_message","_htmlRoll"],excludeStartWith:"__"}}get data(){return JSON.parse(this.dataString)}get dataString(){return JSON.stringify(this,((key,value)=>{if(null!==value&&!this.options.exclude?.includes(key)&&!key.startsWith(this.options.excludeStartWith))return value}))}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.data.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(card){const cardData=JSON.parse(unescape(card.dataset.object));if(!cardData.messageId){const message=card.closest(".message");cardData.messageId=message?.dataset?.messageId}return await this.fromData(cardData)}static async fromData(data){const card=Object.assign(new this,data);return await card.assignObject(),card}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!1)}toggleFlag(flagName){this[flagName]=!this[flagName]}async _onToggle(event){event.preventDefault();const target=event.currentTarget;if("action"in target.dataset)return this._onButton(event);if(target&&target.classList.contains("gm-select-only")&&!game.user.isGM)return;const flag=target.dataset.flag;if(!flag)return;const toggle=target.closest(".ic-radio");if(toggle){const buttons=toggle.querySelectorAll(".ic-radio-switch");for(const b of buttons)this.unsetFlag(b.dataset.flag);this.setFlag(flag)}else this.toggleFlag(flag);const card=target.closest(".interactive-card");card&&this._update(card),this.updateChatCard()}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get isBlind(){return this.rollMode?(void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind):null}set isBlind(x){this._isBlind=x}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}get item(){return this.itemId?this.actor.items.get(this.itemId):null}get weapon(){return this.item}get targetedTokens(){return[...game.user.targets]}get target(){return this.targetToken?this.targetToken:this.targetActor}get isTargetOwner(){return this.target.isOwner}get isGM(){return game.user.isGM}get targetToken(){return this._targetToken||(this._targetKey?this._targetToken=chatHelper.getTokenFromKey(this._targetKey):(this._targetToken=this.targetedTokens.pop(),this._targetToken?this._targetKey=`${this._targetToken.scene.id}.${this._targetToken.id}`:this._targetToken=null)),this._targetToken}get targetActor(){return this._targetActor||(this.targetToken?this._targetActor=this.targetToken.actor||this.targetToken.data.actor||this.targetToken.data.document:this._targetActor=chatHelper.getActorFromKey(this._targetKey)),this._targetActor}get targetKey(){return this.targetToken||this.targetActor?this._targetKey:null}get hasTarget(){return!(!this.targetToken&&!this.targetActor)}set targetKey(x){this._targetKey=x}get skills(){return this.actor.getWeaponSkills(this.itemId)}get targetImg(){const img=chatHelper.getActorImgFromKey(this.targetKey);return img||"../icons/svg/mystery-man-black.svg"}get name(){return this.token?this.token.name:this.actor.name}get targetName(){return this.target?this.target.name:"dummy"}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}}class DamageCard extends InteractiveChatCard{static get defaultOptions(){return mergeObject(super.defaultOptions,{exclude:["_targetToken","_targetActor","_htmlRoll","_htmlInlineRoll"].concat(super.defaultOptions.exclude),template:"systems/CoC7/templates/chat/cards/damage.html"})}async assignObject(){this.damageRoll&&"Object"===this.damageRoll.constructor.name&&(this.damageRoll=Roll.fromData(this.damageRoll))}_onButton(event){super._onButton(event)}get critical(){return this.options.critical}set critical(x){this._options.critical=x}get impale(){return"undefined"===this._impale?this.weapon.impale:this._impale}set impale(x){this._impale=x}get isDamageFormula(){return"string"==typeof this.damageFormula&&(!!isNaN(Number(this.damageFormula))&&Roll.validate(this.damageFormula))}get isDamageNumber(){return!isNaN(Number(this.damageFormula))}get isArmorForula(){return"string"==typeof this.armor&&(!!isNaN(Number(this.armor))&&Roll.validate(this.armor))}get totalDamageString(){let damage=Number(this.isDamageNumber?this.damageFormula:this.roll.total);return!this.ignoreArmor&&((isNaN(Number(this.armor))||Number(this.armor)>0)&&(damage-=Number(this.armor)),!isNaN(Number(this.armor))&&damage<=0)?game.i18n.localize("CoC7.ArmorAbsorbsDamage"):damage}get noDamage(){if(this.rolled){const damage=this.isDamageNumber?this.damageFormula:this.roll.total;return this.ignoreArmor?!!(damage<=0):!isNaN(Number(this.armor))&&!!(damage-Number(this.armor)<=0)}return!1}async updateChatCard(){if(!this.options.fastForward||this.roll||this.isDamageNumber||await this.rollDamage({update:!1}),this.isDamageNumber||this.roll&&null!=this.roll.total||this.hardrolled?this.rolled=!0:this.rolled=!1,!this.options.fastForward||this.damageInflicted||this.noDamage||await this.dealDamage({update:!1}),this.rolled&&this.roll){"Object"===this.roll.constructor.name&&(this.roll=Roll.fromData(this.roll));const a=createInlineRoll(this.roll);this._htmlInlineRoll=a.outerHTML,this._htmlRoll=await this.roll.render()}await super.updateChatCard()}async rollDamage(options={update:!0}){this.roll=await new Roll(this.damageFormula||"0").evaluate({async:!0}),await CoC7Dice.showRollDice3d(this.roll),this.hardrolled=!0,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}async rollArmor(options={update:!0}){const roll=await new Roll(this.armor).evaluate({async:!0});this.armor=roll.total,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}async dealDamageToSelectedTarget(options={update:!0}){if(this.isArmorForula&&await this.rollArmor(),isNaN(Number(this.totalDamageString)))return void ui.notifications.error("Error evaluating damage");const targets=[],targetName=[],selectedPlayers=canvas.tokens.controlled.map((token=>token.actor));for(let index=0;index<selectedPlayers.length;index++)this.actor.id!==selectedPlayers[index].id&&(targetName.push(selectedPlayers[index].name),targets.push(selectedPlayers[index]));const data={title:" ",content:game.i18n.format("CoC7.DealDamage",{damage:this.totalDamageString,target:targetName}),buttons:{one:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>{this.confirmDamage(targets)}},two:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>{}}},default:"two"};targetName.length>0&&new Dialog(data).render(!0)}async confirmDamage(targets){for(let index=0;index<targets.length;index++)await targets[index].dealDamage(Number(this.totalDamageString),{ignoreArmor:!1}),ChatMessage.create({content:`Damage ${targets[index].name} ${this.totalDamageString}HP`})}async dealDamage(options={update:!0}){this.isArmorForula&&await this.rollArmor();let damage=this.totalDamageString;if(isNaN(Number(damage))){if(game.i18n.localize("CoC7.ArmorAbsorbsDamage")!==damage)return void ui.notifications.error("Error evaluating damage");damage=0}this.targetActor&&await this.targetActor.dealDamage(Number(damage),{ignoreArmor:!0}),this.damageInflicted=!0,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}get range(){return this.options.range||"normal"}set range(x){["normal","long","extreme"].inclues(x.toLowerCase())&&(this._options.range=x)}get damageFormula(){const range=this.range;let formula=this.weapon?.data?.data?.range[range]?.damage,db=this.actor.db;if(db=null===db?"":`${db}`,db&&!db.startsWith("-")&&(db="+"+db),this.weapon.data.data.properties.addb&&(formula+=db),this.weapon.data.data.properties.ahdb&&(formula=formula+db+"/2"),formula){const maxDamage=new Roll(formula).evaluate({maximize:!0}).total;let rollString;return this.critical?this.impale?(rollString=formula+"+"+maxDamage,rollString):maxDamage:formula}}get armor(){return void 0!==this._armor&&""!==this._armor?this._armor:this.target?this.targetActor.data.data.attribs.armor.value:0}set armor(x){this._armor=x}}class RollCard{constructor(){this.rolls=[],this.initiator=null}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.data.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(card){const cardData=JSON.parse(unescape(card.dataset.object));return await this.fromData(cardData)}static async fromData(data){const card=Object.assign(new this,data);for(let index=0;index<card.rolls.length;index++)"Object"===card.rolls[index]?.constructor?.name&&(card.rolls[index]=Object.assign(new CoC7Check,card.rolls[index]),card.rolls[index].rolled&&(card.rolls[index]._htmlRoll=await card.rolls[index].getHtmlRoll()));return card}static async _onToggle(event){event.preventDefault();const span=event.currentTarget;if(span&&span.classList.contains("gm-select-only")&&!game.user.isGM)return;const message=span.closest(".chat-message"),card=await this.fromMessageId(message.dataset.messageId);if(!card)return;const flag=span.dataset.flag;if(!flag)return;const toggle=span.closest(".toggle");if(toggle){const buttons=toggle.querySelectorAll(".toggle-switch");for(const b of buttons)card.unsetFlag(b.dataset.flag);card.setFlag(flag)}else card.toggleFlag(flag);card.updateChatCard()}static async dispatch(data){if(game.user.isGM){let card,messages=ui.chat.collection.filter((message=>this.defaultConfig.type===message.getFlag("CoC7","type")&&"resolved"!==message.getFlag("CoC7","state")&&(!["combinedCard"].includes(this.defaultConfig.type)||message.getFlag("CoC7","initiator")===data.roll.initiator)));if(messages.length){const timestamp=new Date(messages[0].data.timestamp);86400<(new Date-timestamp)/1e3&&(await messages[0].setFlag("CoC7","state","resolved"),messages=[])}card=messages.length?await this.fromMessage(messages[0]):new this,void 0!==data._rollMode&&(card._rollMode=data._rollMode),await card.process(data)}else game.socket.emit("system.CoC7",data)}async toMessage(){const html=await renderTemplate(this.config.template,this),htmlCardElement=$(html);htmlCardElement[0].dataset.object=escape(this.dataString);const chatData={user:game.user.id,flavor:game.i18n.localize(this.config.title),content:htmlCardElement[0].outerHTML,flags:{CoC7:{type:this.config.type,state:"initiated",initiator:this.initiator}}};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0);return await ChatMessage.create(chatData)}async updateChatCard(){if(await this.compute(),this.messageId){const html=await renderTemplate(this.config.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.dataString);const chatMessage=game.messages.get(this.messageId);this.closed&&await chatMessage.setFlag("CoC7","state","resolved");const msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}await this.toMessage()}updateRoll(data){data.fromGM||Object.assign(this.rolls[data.rank],data.roll)}addRollData(data){const check=Object.assign(new CoC7Check,data.roll);this.rolls.push(check),"combinedCard"===this.config.type&&(this.initiator=data.roll.initiator)}addRoll(data){this.rolls.push(data)}removeRoll(rank){this.rolls.splice(rank,1)}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!1)}toggleFlag(flagName){this[flagName]=!this[flagName]}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultConfig(){return{exclude:["_actor","_skill","_item","_message","_htmlRoll"],excludeStartWith:"__"}}get winners(){return this.rolls.filter((r=>r.winner))}get winner(){if(this.winners.length)return this.winners[0]}get loosers(){return this.rolls.filter((r=>!r.winner))}get looser(){if(this.loosers.length)return this.loosers[0]}get hasWinner(){return this.winners.length>0}get isGM(){return game.user.isGM}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}get data(){return JSON.parse(this.dataString)}get dataString(){return JSON.stringify(this,((key,value)=>{if(null!==value&&!this.config.exclude?.includes(key)&&!key.startsWith(this.config.excludeStartWith))return value}))}}class OpposedCheckCard extends RollCard{static async bindListerners(html){html.on("click",".roll-card.opposed .toggle-switch",this._onToggle.bind(this)),html.on("click",".roll-card.opposed a",OpposedCheckCard._onClick.bind(this)),html.on("click",".roll-card.opposed button",OpposedCheckCard._onClick.bind(this))}static get defaultConfig(){return mergeObject(super.defaultConfig,{template:"systems/CoC7/templates/chat/cards/opposed-roll.html",type:"opposedCard"})}get config(){return OpposedCheckCard.defaultConfig}get attackerRoll(){if(this.combat){if(this.rolls?.length){const attacker=this.rolls.filter((r=>0===r.index||r.attacker));if(attacker.length)return attacker[0]}}else;}get defenderRoll(){if(this.combat){if(this.rolls?.length){const defender=this.rolls.filter((r=>0!==r.index||!r.attacker));if(defender.length)return defender[0]}}else;}get defenderIsDodging(){return!(!this.defenderRoll?.actor?.dodgeSkill?.name||!this.defenderRoll?.skill?.name)&&this.defenderRoll.actor.dodgeSkill.name.toLowerCase()===this.defenderRoll.skill.name.toLowerCase()}get advantageAttacker(){return void 0===this._aa?!!this.defenderRoll&&!this.defenderIsDodging:this._aa}get winnerRollsDamage(){return!!(this.combat&&this.rolls.length>=2&&this.hasWinner&&"weapon"===this.winner?.item?.type)}set advantageAttacker(x){this._aa=!0,this._ad=!1}get advantageDefender(){return void 0===this._ad?this.defenderIsDodging:this._ad}set advantageDefender(x){this._ad=!0,this._aa=!1}get isTie(){return this.winnerCount>1}get needsTieBreaker(){return!!this.combat&&!(!this.attackerRoll||!this.defenderRoll||this.attackerRoll.successLevel!==this.defenderRoll.successLevel)}get winnerCount(){let count=0;for(const r of this.rolls)r.winner&&(count+=1);return count}get isAttackManeuver(){return!(!this.combat||!this.attackerRoll||this.attackerRoll?.item&&!this.attackerRoll?.item.data.data.properties?.mnvr)}get resultText(){if(this.combat&&this.attackerRoll&&this.defenderRoll){if(!this.attackerRoll.winner&&!this.defenderRoll.winner)return game.i18n.localize("CoC7.NoWinner");if(this.attackerRoll.winner)return this.attackerRoll.maneuver?game.i18n.format("CoC7.ManeuverSuccess",{name:this.attackerRoll.actor.name}):game.i18n.format("CoC7.AttackSuccess",{name:this.attackerRoll.actor.name});if(this.defenderRoll.winner)return this.defenderRoll.maneuver?game.i18n.format("CoC7.ManeuverSuccess",{name:this.defenderRoll.actor.name}):this.defenderIsDodging?game.i18n.format("CoC7.DodgeSuccess",{name:this.defenderRoll.actor.name}):game.i18n.format("CoC7.AttackSuccess",{name:this.defenderRoll.actor.name})}}async process(data){switch(data.action){case"new":this.rolls?.length||(this.combat=data.combat||void 0,this.combat&&(data.roll.attacker=!0)),data.roll.index=this.rolls.length,this.addRollData(data);break;case"roll":this.addRollData(data);break;case"updateRoll":this.updateRoll(data)}game.user.isGM?await this.updateChatCard():game.socket.emit("system.CoC7",data)}async roll(rank){await this.rolls[rank]._perform();const data={type:this.config.type,action:"updateRoll",rank,fromGM:game.user.isGM};return game.user.isGM||(data.roll=this.rolls[rank].JSONRollData),data}static async _onClick(event){event.preventDefault();const a=event.currentTarget,action=a.dataset.action,li=a.closest("li.actor-roll"),message=a.closest(".chat-message"),cardElement=a.closest("div.roll-card"),card=await OpposedCheckCard.fromHTMLCardElement(cardElement);card.messageId=message.dataset.messageId;const rank=Number(li?.dataset?.rank);switch(action){case"toggle-combat":card.combat=!card.combat,await card.updateChatCard();break;case"remove-roll":card.removeRoll(rank),await card.updateChatCard();break;case"close-card":card.closeCard(),await card.updateChatCard();break;case"roll-check":{const speaker=ChatMessage.getSpeaker();card.rolls[rank].actorKey||(card.rolls[rank].actorKey=`${speaker.scene}.${speaker.token}`);const data=await card.roll(rank);await card.process(data);break}case"roll-damage":{card.closeCard(),await card.updateChatCard();const damageChatCard=new DamageCard({critical:card.winner.isExtremeSuccess,fastForward:event.shiftKey});damageChatCard.actorKey=card.winner.actor.actorKey,damageChatCard.targetKey=card.looser.actor.actorKey,damageChatCard.itemId=card.winner.itemId,damageChatCard.updateChatCard();break}default:{const options={update:!1,data:a.dataset,classes:a.classList,target:a};await CoC7Check.alter(card.rolls[rank],action,options);const data={type:this.defaultConfig.type,action:"updateRoll",rank,fromGM:game.user.isGM};game.user.isGM||(data.roll=card.rolls[rank].JSONRollData),card.process(data);break}}}async compute(rank){if(this.rolls=this.rolls.filter((roll=>void 0!==roll.actor.data)),rank)this.rolls[rank].rolled&&(this.rolls[rank]._htmlRoll=await this.rolls[rank].getHtmlRoll({hideDiceResult:!0}));else for(let i=0;i<this.rolls.length;i++)delete this.rolls[i].maneuver,this.combat&&(!this.rolls[i].item||this.rolls[i].item.data.data.properties?.mnvr)&&(this.rolls[i]?.actor?.dodgeSkill?.name&&this.rolls[i]?.skill?.name&&this.rolls[i].actor.dodgeSkill.name.toLowerCase()!==this.rolls[i].skill.name.toLowerCase()||!this.rolls[i]?.actor?.dodgeSkill?.name)&&(this.rolls[i].maneuver=!0),this.rolls[i].rolled&&(this.rolls[i]._htmlRoll=await this.rolls[i].getHtmlRoll({hideDiceResult:!0}));if(this.combat){if(this.rolls.sort(((a,b)=>a.index>b.index?1:a.index<b.index?-1:0)),this.rolls.length>1){this.rolls=[this.rolls[0],this.rolls[1]];for(const r of this.rolls)delete r.winner,delete r.tie}this.rolls[0]&&(this.rolls[0].attacker=!0),this.rolls[0]?.rolled&&this.rolls[1]?.rolled&&(this.rolls[0].passed||this.rolls[1].passed)&&(this.rolls[0].successLevel>this.rolls[1].successLevel?this.rolls[0].winner=!0:this.rolls[1].successLevel>this.rolls[0].successLevel?this.rolls[1].winner=!0:this.advantageAttacker?this.rolls[0].winner=!0:this.rolls[1].winner=!0)}else{if(this.rolls.sort(((a,b)=>{if(a.rolled&&!b.rolled)return-1;if(!a.rolled&&b.rolled)return 1;if(!a.rolled&&!b.rolled)return 0;if(a.successLevel>b.successLevel)return this.resolved=!0,-1;if(a.successLevel<b.successLevel)return this.resolved=!0,1;if(game.settings.get("CoC7","opposedRollTieBreaker")){if(a.modifiedResult>b.modifiedResult)return this.resolved=!0,-1;if(a.modifiedResult<b.modifiedResult)return this.resolved=!0,1}else{if(a.rawValue>b.rawValue)return this.resolved=!0,-1;if(a.rawValue<b.rawValue)return this.resolved=!0,1}return 0})),this.winCount=0,this.rolls[0]&&this.rolls[0].rolled&&!this.rolls[0].failed){this.winCount=1;for(let i=1;i<this.rolls.length;i++)this.rolls[i]&&this.rolls[i].rolled&&this.rolls[0].successLevel===this.rolls[i].successLevel&&(game.settings.get("CoC7","opposedRollTieBreaker")?this.rolls[0].modifiedResult===this.rolls[i].modifiedResult:this.rolls[0].rawValue===this.rolls[i].rawValue)&&(this.winCount=this.winCount+1)}for(let i=0;i<this.rolls.length;i++)this.rolls[i].winner=i<this.winCount,this.rolls[i].tie=this.rolls[i].winner&&this.winCount>1}}closeCard(){this.closed=!0}}class CombinedCheckCard extends RollCard{static async bindListerners(html){html.on("click",".roll-card.combined .toggle-switch",this._onToggle.bind(this)),html.on("click",".roll-card.combined a",CombinedCheckCard._onClick.bind(this)),html.on("click",".roll-card.combined button",CombinedCheckCard._onClick.bind(this))}static get defaultConfig(){return mergeObject(super.defaultConfig,{template:"systems/CoC7/templates/chat/cards/combined-roll.html",type:"combinedCard",title:"CoC7.CombinedRollCard"})}get config(){return CombinedCheckCard.defaultConfig}get successCount(){if(this.rolled){let count=0;for(const r of this.rolls)r.passed&&(count+=1);return count}}get mainActorKey(){return this.rolls[0]?.actor?.actorKey||void 0}get success(){if(void 0!==this.successCount)return this.any?this.successCount>0:this.all?this.successCount===this.rolls.length:void 0}get failure(){if(void 0!==this.success)return!this.success}get checkGMInitiator(){return game.users.get(this.initiator)?.isGM}async getHtmlRoll(){if(!this.rolled)return;const check=new CoC7Check;return await check._perform({roll:this._roll[check.diceModifier||0],silent:!0}),await check.getHtmlRoll({hideSuccess:!0})}process(data){switch(data.action){case"new":case"roll":this.addRollData(data);break;case"updateRoll":this.updateRoll(data);break;case"assignRoll":this.assignRoll(data)}game.user.isGM?this.updateChatCard():game.socket.emit("system.CoC7",data)}async assignRoll(data){game.user.isGM&&(this.rolled||(this.rolled=!0,this._roll=data.roll))}static async _onClick(event){event.preventDefault();const a=event.currentTarget,action=a.dataset.action,li=a.closest("li.actor-roll"),message=a.closest(".chat-message"),cardElement=a.closest("div.roll-card"),card=await CombinedCheckCard.fromHTMLCardElement(cardElement);card.messageId=message.dataset.messageId;const rank=Number(li?.dataset?.rank);switch(action){case"remove-roll":card.removeRoll(rank),await card.updateChatCard();break;case"close-card":card.closeCard(),await card.updateChatCard();break;case"roll-card":{const pool={};for(const dice of card.rolls){const diceModifier=parseInt(dice.diceModifier,10);isNaN(diceModifier)||(pool[diceModifier]=!1)}const roll=await CoC7Dice.combinedRoll({pool});roll.initiator=game.user.id;const data={type:this.defaultConfig.type,action:"assignRoll",fromGM:game.user.isGM,roll};AudioHelper.play({src:CONFIG.sounds.dice}),card.process(data);break}default:{const options={update:!1,data:a.dataset,classes:a.classList,target:a};await CoC7Check.alter(card.rolls[rank],action,options);const data={type:this.defaultConfig.type,action:"updateRoll",rank,fromGM:game.user.isGM,roll:{initiator:game.user.id}};game.user.isGM||(data.roll=card.rolls[rank].JSONRollData),card.process(data);break}}}async compute(){if(this._roll){this.rolls=this.rolls.filter((roll=>void 0!==roll.actor.data));for(const r of this.rolls)r.rolled||(r.modifier=r.diceModifier||0,r.difficulty=r.difficulty||CoC7Check.difficultyLevel.regular,r.flatDiceModifier=r.flatDiceModifier||0,r.flatThresholdModifier=r.flatThresholdModifier||0,await r._perform({roll:this._roll[r.modifier],silent:!0}));for(let i=0;i<this.rolls.length;i++)this.rolls[i].rolled&&(this.rolls[i]._htmlRoll=await this.rolls[i].getHtmlRoll({hideDiceResult:!0}));this._htmlRoll=await this.getHtmlRoll()}}closeCard(){this.closed=!0}}const CHAT_COC7_MESSAGE_FAKEROLL='<div class="dice-roll"><div class="dice-result"><div class="dice-formula">???</div><h4 class="dice-total">?</h4></div></div>';class CoC7Chat{static renderChatMessageHook(chatMessage,html){chatMessage.getFlag("CoC7","GMSelfRoll")&&!game.user.isGM&&(html.find(".whisper-to").remove(),html.find(".flavor-text").replaceWith(`<span class="flavor-text">${game.i18n.localize("CoC7.RollSecretDice")}</span>`),html.find(".message-content").replaceWith(`<div class="message-content">${CHAT_COC7_MESSAGE_FAKEROLL}</div>`)),chatMessage.getFlag("CoC7","removeWisperTargets")&&!game.user.isGM&&html.find(".whisper-to").remove(),chatMessage.getFlag("CoC7","fakeRoll")&&game.user.isGM&&(html.find(".flavor-text").replaceWith(game.i18n.localize("CoC7.KeeperSentDecoy")),html.find(".message-content").remove())}static fakeRollMessage(){const chatData={user:game.user.id,flavor:game.i18n.localize("CoC7.RollSecretDice"),whisper:game.users.players,type:CONST.CHAT_MESSAGE_TYPES.WHISPER,flags:{CoC7:{GMSelfRoll:!1,removeWisperTargets:!0,fakeRoll:!0}},content:CHAT_COC7_MESSAGE_FAKEROLL};ChatMessage.create(chatData)}static ready(){game.CoC7="init"}static async chatListeners(app,html){html.on("click",".card-buttons button",CoC7Chat._onChatCardAction.bind(this)),html.on("click",".card-title",CoC7Chat._onChatCardToggleContent.bind(this)),html.on("click",".radio-switch",CoC7Chat._onChatCardRadioSwitch.bind(this)),html.on("click",".panel-switch",CoC7Chat._onChatCardToggleSwitch.bind(this)),html.on("click",".simple-flag",CoC7Chat._onChatCardToggleSwitch.bind(this)),html.on("click",".volley-size",CoC7Chat._onChatCardVolleySize.bind(this)),html.on("click",".dropdown-element",CoC7Chat._onDropDownElementSelected.bind(this)),html.on("click",".simple-toggle",CoC7Chat._onToggleSelected.bind(this)),html.on("click",".target-selector",CoC7Chat._onTargetSelect.bind(this)),html.on("dblclick",".open-actor",CoC7Chat._onOpenActor.bind(this)),html.on("click",".coc7-link",await CoC7Parser._onCheck.bind(this)),html.on("dragstart","a.coc7-link",CoC7Parser._onDragCoC7Link.bind(this)),html.on("click","coc7-inline-result",CoC7Chat._onInline.bind(this)),OpposedCheckCard.bindListerners(html),CombinedCheckCard.bindListerners(html)}static _onOpenActor(event){event.preventDefault();const actorKey=event.currentTarget.dataset.actorKey;if(actorKey){const actor=chatHelper.getActorFromKey(actorKey);actor.isOwner&&actor.sheet.render(!0)}}static async onUpdateChatMessage(chatMessage){if(ui.chat.scrollBottom(),game.user.isGM&&0===chatMessage.data.type){const card=$(chatMessage.data.content)[0];if(card.classList.contains("melee")&&"true"===card.dataset.resolved){if(card.classList.contains("initiator"))if(card.dataset.targetCard){const initiator=CoC7MeleeInitiator.getFromMessageId(chatMessage.id),target=CoC7MeleeTarget.getFromMessageId(initiator.targetCard);if(target.resolved){const resolutionCard=new CoC7MeleeResoltion(chatMessage.id,target.messageId,target.resolutionCard);await resolutionCard.resolve(),initiator.checkRevealed||await initiator.revealCheck()}}else{const initiator=CoC7MeleeInitiator.getFromMessageId(chatMessage.id);if(initiator.resolutionCard){const resolutionCard=new CoC7MeleeResoltion(chatMessage.id,null,initiator.resolutionCard);await resolutionCard.resolve(),initiator.checkRevealed||await initiator.revealCheck()}}if(card.classList.contains("target")){const target=CoC7MeleeTarget.getFromMessageId(chatMessage.id),resolutionCard=new CoC7MeleeResoltion(target.parentMessageId,chatMessage.id,target.resolutionCard);await resolutionCard.resolve(),target.meleeInitiator.checkRevealed||await target.meleeInitiator.revealCheck()}}}}static async renderMessageHook(message,html){if(ui.chat.scrollBottom(),InteractiveChatCard.bindListeners(html),message.getFlag("CoC7","checkRevealed")&&(html.find(".dice-roll").removeClass("gm-visible-only"),html[0].dataset.checkRevealed=!0),html.find(".dropbtn").click((event=>event.currentTarget.closest(".dropdown").querySelector(".dropdown-content").classList.toggle("show"))),html.find(".dropdown").mouseleave((event=>event.currentTarget.querySelector(".dropdown-content").classList.remove("show"))),game.user.isGM){const card=html[0].querySelector(".coc7.chat-card");if(card&&card.classList.contains("roll-card")&&"true"!==card.dataset.processed&&card.dataset.refMessageId){const roll=CoC7Roll.getFromElement(card);"target"===card.dataset.side&&(roll.defendantId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId),"initiator"===card.dataset.side&&(roll.initiatorId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId),card.dataset.processed="true",CoC7Chat.updateCombatCardTarget(roll)}}const userOnly=html.find(".target-only");for(const element of userOnly)if(!game.user.isGM){element.style.display="none";const actorId=element.getAttribute("data-actor-id");actorId&&game.actors.get(actorId).isOwner&&(element.style.display="block")}const gmOnly=html.find(".gm-only");for(const zone of gmOnly)game.user.isGM||(zone.style.display="none");const userVisibleOnly=html.find(".user-visible-only");for(const elem of userVisibleOnly)game.user.isGM&&(elem.style.display="none");const gmVisibleOnly=html.find(".gm-visible-only");for(const elem of gmVisibleOnly)game.user.isGM||(elem.style.display="none");const ownerVisibleOnly=html.find(".owner-visible-only");for(const zone of ownerVisibleOnly){let actor=CoC7Chat._getActorFromKey(zone.dataset?.actorKey);actor||(actor=CoC7Chat._getChatCardActor(zone.closest(".chat-card"))),actor||(actor=CoC7Chat._getActorFromKey(zone.parentElement.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-actor-key]")?.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-token-key]")?.dataset.actorKey)),(actor&&!actor.isOwner||game.user.isGM)&&(zone.style.display="none")}if(!game.user.isGM){const ownerOnly=html.find(".owner-only");for(const zone of ownerOnly){let actor=CoC7Chat._getActorFromKey(zone.dataset?.actorKey);actor||(actor=CoC7Chat._getChatCardActor(zone.closest(".chat-card"))),actor||(actor=CoC7Chat._getActorFromKey(zone.parentElement.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-actor-key]")?.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-token-key]")?.dataset.actorKey)),(actor&&!actor.isOwner||!actor&&!game.user.isGM)&&(zone.style.display="none")}const gmSelectOnly=html.find(".gm-select-only");for(const select of gmSelectOnly)select.classList.add("inactive"),select.classList.remove("simple-flag")}}static get actionTypeString(){return{fightBack:"CoC7.fightBack",maneuver:"CoC7.maneuver",dodging:"CoC7.dodge"}}static _onTargetSelect(event){const index=parseInt(event.currentTarget.dataset.key),targetsSelector=event.currentTarget.closest(".targets-selector");for(const i of targetsSelector.querySelectorAll("img"))i.style.border="none";targetsSelector.querySelector(`[data-key="${index}"]`).querySelector("img").style.border="1px solid #000";const targets=event.currentTarget.closest(".targets");for(const t of targets.querySelectorAll(".target"))t.style.display="none",t.dataset.active="false";const targetToDisplay=targets.querySelector(`[data-target-key="${index}"]`);targetToDisplay.style.display="block",targetToDisplay.dataset.active="true"}static _onDropDownElementSelected(event){event.preventDefault();const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("target"))return void CoC7MeleeTarget.updateSelected(card,event);const dropDownBoxes=event.currentTarget.closest(".response-selection").querySelectorAll(".toggle-switch");for(const dpdnBox of dropDownBoxes)dpdnBox.classList.remove("switched-on");event.currentTarget.closest(".toggle-switch").classList.add("switched-on"),event.currentTarget.closest(".dropdown-content").classList.toggle("show");const selectedBox=event.currentTarget.closest(".defender-action-select").querySelector(".selected-action");selectedBox.style.display="block";const button=selectedBox.querySelector("button");switch(button.dataset.action="defending",button.dataset.actionType=event.currentTarget.dataset.action,button.dataset.defenderChoice=event.currentTarget.dataset.action,button.dataset.skillId=event.currentTarget.dataset.skillId,button.dataset.skillValue=event.currentTarget.dataset.skillValue,button.dataset.skillName=event.currentTarget.dataset.skillName,button.dataset.itemId=event.currentTarget.dataset.weaponId,button.dataset.itemName=event.currentTarget.dataset.weaponName,event.currentTarget.dataset.action){case"maneuver":button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.skillName} (${event.currentTarget.dataset.skillValue}%)`;break;case"fightBack":button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.weaponName} (${event.currentTarget.dataset.skillValue}%)`}}static async _onInline(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("inline-result"))return a.classList.contains("expanded")?CoC7Check._collapseInlineResult(a):CoC7Check._expandInlineResult(a)}static _onToggleSelected(event){const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("target"))return void CoC7MeleeTarget.updateSelected(card,event);if(""===event.currentTarget.dataset.skillId)return void ui.notifications.error(game.i18n.localize("CoC7.ErrorNoDodgeSkill"));const dropDownBoxes=event.currentTarget.closest(".response-selection").querySelectorAll(".toggle-switch");for(const dpdnBox of dropDownBoxes)dpdnBox.classList.remove("switched-on");event.currentTarget.classList.add("switched-on");const selectedBox=event.currentTarget.closest(".defender-action-select").querySelector(".selected-action");selectedBox.style.display="block";const button=selectedBox.querySelector("button");button.dataset.action="defending",button.dataset.actionType="dodging",button.dataset.defenderChoice=event.currentTarget.dataset.action,button.dataset.skillId=event.currentTarget.dataset.skillId,button.dataset.skillValue=event.currentTarget.dataset.skillValue,button.dataset.skillName=event.currentTarget.dataset.skillName,button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.skillName} (${event.currentTarget.dataset.skillValue}%)`}static _onChatCardRadioSwitch(event){event.preventDefault();const optionList=event.currentTarget.parentElement.getElementsByClassName("radio-switch");let index;for(index=0;index<optionList.length;index++){const element=optionList[index];element.dataset.property===event.currentTarget.dataset.property?element.classList.add("switched-on"):element.classList.remove("switched-on")}event.currentTarget.parentElement.dataset.selected=event.currentTarget.dataset.property}static async _onChatCardVolleySize(event){const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("range")&&card.classList.contains("initiator")){const rangeCard=CoC7RangeInitiator.getFromCard(card);event.currentTarget.classList.contains("increase")?rangeCard.changeVolleySize(1):event.currentTarget.classList.contains("decrease")&&rangeCard.changeVolleySize(-1)}}static async _onChatCardToggleSwitch(event){event.preventDefault();const card=event.currentTarget.closest(".chat-card");card.classList.contains("melee")&&(card.classList.contains("initiator")&&CoC7MeleeInitiator.updateCardSwitch(event),card.classList.contains("target")&&CoC7MeleeTarget.updateCardSwitch(event)),card.classList.contains("range")&&card.classList.contains("initiator")&&CoC7RangeInitiator.updateCardSwitch(event),card.classList.contains("damage"),card.classList.contains("roll-card")&&CoC7Check.updateCardSwitch(event)}static _getChatCardActor(card){const cardData=card.dataset.object?JSON.parse(unescape(card.dataset.object)):card.dataset;if(cardData.actorKey)return CoC7Chat._getActorFromKey(cardData.actorKey);const tokenKey=cardData.tokenId;if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token.actor||new Token(tokenData).actor:null}}const actorId=cardData.actorId;if(actorId)return game.actors.get(actorId);const message=card.closest(".message"),messageId=message?message.dataset.messageId:null;if(messageId){const chatMessage=game.messages.get(messageId);if(chatMessage.user)return chatMessage.user.character}return null}static isCardOwner(card){const message=card.closest(".message"),messageId=message?message.dataset.messageId:null;if(messageId){return game.messages.get(messageId).ownner||!1}return!1}static _getActorFromKey(key){if(key){if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token.actor||new Token(tokenData).actor:null}}return game.actors.get(key)||null}}static getActorFromToken(tokenKey){const token=CoC7Chat.getToken(tokenKey);return token?token.actor:null}static getToken(tokenKey){if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId){const tokenDoc=game.actors.tokens[tokenId]?.token;return tokenDoc.object}{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token||new Token(tokenData):null}}return null}static async updateChatCard(card,messId=null){const messageId=null==messId?card.closest(".message").dataset.messageId:messId,message=game.messages.get(messageId),msg=await message.update({content:card.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}static async _onChatCardAction(event){event.preventDefault();const button=event.currentTarget,card=button.closest(".chat-card");if(!card)return;const originMessage=button.closest(".message"),action=button.dataset.action;if(CoC7Chat._getChatCardActor(card))switch(action){case"useLuck":{const luckAmount=parseInt(button.dataset.luckAmount),newSuccessLevel=parseInt(event.currentTarget.dataset.newSuccessLevel);if(card.classList.contains("melee")){let meleeCard;card.classList.contains("target")&&(meleeCard=CoC7MeleeTarget.getFromCard(card)),card.classList.contains("initiator")&&(meleeCard=CoC7MeleeInitiator.getFromCard(card)),meleeCard.upgradeRoll(luckAmount,newSuccessLevel,card)}else if(card.classList.contains("range")){const rangeCard=CoC7RangeInitiator.getFromCard(card),rollResult=button.closest(".roll-result"),rollIndex=rollResult?parseInt(rollResult.dataset.index):null;if(button.classList.contains("pass-check"))rangeCard.passRoll(rollIndex);else{const upgradeIndex=parseInt(button.dataset.index);rangeCard.upgradeRoll(rollIndex,upgradeIndex)}}else if(card.classList.contains("roll-card")||null!=card.querySelector(".roll-result")){const check=await CoC7Check.getFromCard(card);if(button.classList.contains("pass-check")){const luckAmount=parseInt(button.dataset.luckAmount);check.forcePass(luckAmount)}else{const upgradeIndex=parseInt(button.dataset.index);await check.upgradeCheck(upgradeIndex)}}else{const actor=CoC7Chat._getChatCardActor(card),detailedResultPlaceHolder=card.querySelector(".result-details");if(actor.spendLuck(luckAmount)){const result=card.querySelector(".dice-total");switch(card.dataset.successLevel=newSuccessLevel,card.dataset.processed="false",newSuccessLevel){case CoC7Check.successLevel.regular:result.innerText=game.i18n.localize("CoC7.RegularSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:result.innerText=game.i18n.localize("CoC7.HardSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:result.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:result.innerText=game.i18n.localize("CoC7.CriticalSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}result.classList.replace("failure","success"),result.classList.remove("fumble"),card.querySelector(".card-buttons").remove(),card.querySelector(".dice-tooltip").style.display="none",await CoC7Chat.updateChatCard(card)}else ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:actor.name}))}break}case"push":{const newCard=card.cloneNode(!0),result=newCard.querySelector(".dice-total");result.innerText=result.innerText+game.i18n.localize("CoC7.PushingSkill"),result.classList.remove("failure"),newCard.querySelector(".card-buttons").remove(),newCard.dataset.pushedRoll=!0,await CoC7Chat.updateChatCard(newCard,originMessage.dataset.messageId),await CoC7Check.push(card);break}case"defending":{let defender,defenderKey=event.currentTarget.closest(".defender-action-select").dataset.tokenId;defenderKey?defender=this.getActorFromToken(defenderKey):(defenderKey=event.currentTarget.closest(".defender-action-select").dataset.actorId,defender=game.actors.get(defenderKey));const responseType=event.currentTarget.dataset.actionType,outnumbered="true"===event.currentTarget.dataset.outnumbered,check=new CoC7Check;switch(check.referenceMessageId=originMessage.dataset.messageId,check.rollType="opposed",check.side="target",check.action=responseType,responseType){case"dodging":check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,outnumbered&&(check.diceModifier=-1),await check.roll(),check.toMessage();break;case"fightBack":check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.item=event.currentTarget.dataset.itemId,outnumbered&&(check.diceModifier=-1),await check.roll(),check.toMessage();break;case"maneuver":{const actor=CoC7Chat._getChatCardActor(card);if(defender.build<=actor.build-3)return void ui.notifications.error(game.i18n.localize("CoC7.ErrorManeuverNotPossible"));check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,outnumbered&&(check.diceModifier=-1),defender.build<actor.build&&(check.diceModifier=check.diceModifier-(actor.build-defender.build)),check.diceModifier<-2&&(check.difficulty=check.difficulty+Math.abs(check.diceModifier)-2,check.diceModifier=-2),await check.roll(),check.toMessage();break}}break}case"melee-initiator-roll":{const initiator=CoC7MeleeInitiator.getFromCard(card),check=await initiator.performSkillCheck(event.currentTarget.dataset.skill);$(button).prop("disabled",!0),await CoC7Dice.showRollDice3d(check.dice.roll),await initiator.publishCheckResult();break}case"melee-target-no-response":{const target=CoC7MeleeTarget.getFromCard(card);await target.publishNoReponseResult();break}case"melee-target-roll":{const target=CoC7MeleeTarget.getFromCard(card),check=await target.performSkillCheck(event.currentTarget.dataset.skill);$(button).prop("disabled",!0),await CoC7Dice.showRollDice3d(check.dice.roll),await target.publishCheckResult();break}case"roll-melee-damage":{const damageChatCard=new DamageCard({critical:"true"===button.dataset.critical,fastForward:event.shiftKey});damageChatCard.actorKey=button.dataset.dealer,damageChatCard.targetKey=button.dataset.target,damageChatCard.itemId=button.dataset.weapon,originMessage.dataset.messageId&&(damageChatCard.messageId=originMessage.dataset.messageId),damageChatCard.updateChatCard();break}case"range-initiator-shoot":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);rangeInitiator.addShotAtCurrentTarget(),await rangeInitiator.updateChatCard();break}case"range-initiator-roll":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.resolveCard();break}case"roll-range-damage":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.rollDamage();break}case"deal-melee-damage":{const targetKey=card.dataset.targetKey,amount=card.dataset.result,targetActor=chatHelper.getActorFromKey(targetKey);await targetActor.dealDamage(amount);const buttons=card.querySelector(".card-buttons"),diceTotal=card.querySelector(".dice-total");$(diceTotal).append('<i class="fas fa-check"></i>'),buttons&&buttons.remove(),await CoC7Chat.updateChatCard(card);break}case"deal-range-damage":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.dealDamage();break}case"testcheck":(await CoC7Check.getFromCard(card)).forcePass();break;case"force-pass":(await CoC7Check.getFromCard(card)).forcePass();break;case"force-fail":(await CoC7Check.getFromCard(card)).forceFail();break;case"increase-success-level":(await CoC7Check.getFromCard(card)).increaseSuccessLevel();break;case"decrease-success-level":(await CoC7Check.getFromCard(card)).decreaseSuccessLevel();break;case"reveal-check":{const check=await CoC7Check.getFromCard(card);check.isBlind=!1,check.computeCheck(),event.metaKey||event.ctrlKey||91===event.keyCode||event.keyCode,check.updateChatCard({makePublic:!0});break}case"roll-check-card":{const check=await CoC7Check.getFromCard(card);check.standby=!1,await check._perform(),check.updateChatCard({forceRoll:!0});break}case"flag-for-development":{const check=await CoC7Check.getFromCard(card);await check.flagForDevelopement(),check.computeCheck(),check.updateChatCard();break}case"reset-creature-san-data":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.clearSanLossReason(),await sanCheck.updateChatCard();break}case"roll-san-check":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollSan(),await sanCheck.updateChatCard();break}case"advance-state":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.advanceState(button.dataset.state),await sanCheck.updateChatCard();break}case"roll-san-loss":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollSanLoss(),sanCheck.updateChatCard();break}case"roll-int-check":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollInt(),sanCheck.updateChatCard();break}case"roll-con-check":{const conCheck=CoC7ConCheck.getFromCard(card);await conCheck.rollCon(),conCheck.updateChatCard();break}case"reveal-con-check":{const conCheck=CoC7ConCheck.getFromCard(card);conCheck.isBlind=!1,conCheck.updateChatCard();break}}}static _onChatCardToggleContent(event){event.preventDefault();const content=event.currentTarget.closest(".chat-card").querySelector(".card-content");content&&(content.style.display?content.style.display="none"===content.style.display?"block":"none":content.style.display="block")}}class CoC7MeleeInitiator extends ChatCardActor{constructor(actorKey=null,itemId=null,fastForward=!1){super(actorKey,fastForward),this.itemId=itemId,this.resolved=!1,this.outnumbered=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.targetCard=null,this.rolled=!1}get template(){return"systems/CoC7/templates/chat/combat/melee-initiator.html"}async revealCheck(){const chatMessage=game.messages.get(this.messageId);await chatMessage.setFlag("CoC7","checkRevealed",!0),await ui.chat.updateMessage(chatMessage,!1)}async createChatCard(){chatHelper.getActorImgFromKey(this.actorKey);const html=await renderTemplate(this.template,this),speakerData={};this.token?speakerData.token=this:speakerData.actor=this;const speaker=ChatMessage.getSpeaker(speakerData),chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,content:html};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;return await ChatMessage.create(chatData)}async updateChatCard(){const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;this[flag]=!this[flag]}async performSkillCheck(skillId=null,publish=!1){const check=new CoC7Check;if(check.isBlind=!1,check.isUnkonwn=!1,check.referenceMessageId=this.messageId,check.rollType="opposed",check.side="initiator",check.action="attack",check.actor=this.actorKey,check.item=this.itemId,check.skill=skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.diceModifier=0,game.user.isGM?this.checkRevealed=!1:this.checkRevealed=!0,this.outnumbered&&(check.diceModifier+=1),this.surprised&&(check.diceModifier+=1),this.disadvantage&&(check.diceModifier-=1),this.advantage&&(check.diceModifier+=1),await check.roll(),this.check=check,this.rolled=!0,this.resolved=!0,publish&&check.toMessage(),this.criticalDamage=check.successLevel===CoC7Check.successLevel.extreme||check.successLevel===CoC7Check.successLevel.critical,this.hasTarget&&!this.autoSuccess){const message=await game.CoC7socket.executeAsGM("gmcreatemessageas",{targetKey:this.targetKey,messageId:this.messageId,fastForward:this.fastForward,actorKey:this.actorKey});this.targetCard=message.id||message._id}return this.autoSuccess&&!this.check.isFumble&&this.check.forcePass(),check}async publishCheckResult(check=null){if(!check&&!this.check)return null;if(check&&(this.check=check),this.roll=CoC7Roll.getFromCheck(this.check),this.rolled=!0,this.roll.rollIcons=[],this.roll.critical){this.roll.rollColor="goldenrod",this.roll.rollTitle=game.i18n.localize("CoC7.CriticalSuccess");for(let index=0;index<4;index++)this.roll.rollIcons.push("medal")}else if(this.roll.fumble){this.roll.rollColor="darkred",this.roll.rollTitle=game.i18n.localize("CoC7.Fumble");for(let index=0;index<4;index++)this.roll.rollIcons.push("spider")}else if(this.roll.success){this.roll.rollColor="goldenrod",CoC7Check.successLevel.regular===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.RegularSuccess")),CoC7Check.successLevel.hard===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.HardSuccess")),CoC7Check.successLevel.extreme===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.ExtremeSuccess"));for(let index=0;index<this.roll.successLevel;index++)this.roll.rollIcons.push("star")}else this.roll.rollColor="black",this.roll.rollTitle=game.i18n.localize("CoC7.Failure"),this.roll.rollIcons.push("skull");if(!this.targetCard&&!this.autoSuccess&&this.hasTarget){const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id}await this.updateChatCard()}static getFromCard(card,messageId=null){const initiator=new CoC7MeleeInitiator;return chatHelper.getObjectFromElement(initiator,card),initiator.roll=CoC7Roll.getFromCard(card),card.closest(".message")?initiator.messageId=card.closest(".message").dataset.messageId:initiator.messageId=messageId,initiator}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.data.content)[0],initiator=CoC7MeleeInitiator.getFromCard(card,messageId);return initiator.messageId=messageId,initiator}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".melee.initiator"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const initiator=CoC7MeleeInitiator.getFromCard(card);initiator.toggleFlag(flag),initiator.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}upgradeRoll(luckAmount,newSuccessLevel,oldCard){this.actor.spendLuck(luckAmount)||ui.notifications.error(`${this.actor.name} didn't have enough luck to pass the check`),this.roll.value=null,this.roll.successLevel=newSuccessLevel,this.roll.luckSpent=!0,oldCard.dataset.processed=!1;const diceRolls=oldCard.querySelector(".dice-roll");diceRolls.dataset.value=null,diceRolls.dataset.successLevel=newSuccessLevel,diceRolls.dataset.luckSpent=!0;const resulDetails=oldCard.querySelector(".result-details"),diceTotal=oldCard.querySelector(".dice-total"),rollDamageButton=oldCard.querySelector('button[data-action="roll-melee-damage"]');switch(rollDamageButton&&rollDamageButton.classList.remove("invisible"),newSuccessLevel){case CoC7Check.successLevel.regular:diceTotal.innerText=game.i18n.localize("CoC7.RegularSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:diceTotal.innerText=game.i18n.localize("CoC7.HardSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:rollDamageButton&&(rollDamageButton.dataset.critical=!0),diceTotal.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:rollDamageButton&&(rollDamageButton.dataset.critical=!0),diceTotal.innerText=game.i18n.localize("CoC7.CriticalSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}diceTotal.classList.replace("failure","success"),oldCard.querySelector(".card-buttons").remove(),oldCard.querySelector(".dice-tooltip").style.display="none",CoC7Chat.updateChatCard(oldCard)}}class CoCActor extends Actor{async initialize(){super.initialize(),await this.creatureInit()}static async create(data,options={}){return data.token=data.token||{},"character"===data.type?mergeObject(data.token,{vision:!0,dimSight:30,brightSight:0,actorLink:!0,disposition:1},{overwrite:!1}):"vehicle"===data.type?data.img="systems/CoC7/assets/icons/jeep.svg":"container"===data.type&&(data.img="icons/svg/chest.svg",mergeObject(data.token,{actorLink:!0})),super.create(data,options)}checkUndefinedAuto(){const returnData={attribs:{hp:{},mp:{},san:{},mov:{},db:{},build:{}}};return void 0===this.data.data.attribs?.hp?.auto&&(returnData.attribs.hp.auto=!0),void 0===this.data.data.attribs?.mp?.auto&&(returnData.attribs.mp.auto=!0),void 0===this.data.data.attribs?.san?.auto&&(returnData.attribs.san.auto=!0),void 0===this.data.data.attribs?.mov?.auto&&(returnData.attribs.mov.auto=!0),void 0===this.data.data.attribs?.db?.auto&&(returnData.attribs.db.auto=!0),void 0===this.data.data.attribs?.build?.auto&&(returnData.attribs.build.auto=!0),returnData}get characteristics(){const characteristics={str:{value:null,shortName:"CHARAC.STR",label:"CHARAC.Strength",formula:null},con:{value:null,shortName:"CHARAC.CON",label:"CHARAC.Constitution",formula:null},siz:{value:null,shortName:"CHARAC.SIZ",label:"CHARAC.Size",formula:null},dex:{value:null,shortName:"CHARAC.DEX",label:"CHARAC.Dexterity",formula:null},app:{value:null,shortName:"CHARAC.APP",label:"CHARAC.Appearance",formula:null},int:{value:null,shortName:"CHARAC.INT",label:"CHARAC.Intelligence",formula:null},pow:{value:null,shortName:"CHARAC.POW",label:"CHARAC.Power",formula:null},edu:{value:null,shortName:"CHARAC.EDU",label:"CHARAC.Education",formula:null}};if(this.data.data.characteristics)for(const[key,value]of Object.entries(this.data.data.characteristics))characteristics[key]={key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label),value:value.value,hard:Math.floor(value.value/2)||null,extreme:Math.floor(value.value/5)||null,formula:value.formula};return characteristics}static async initToken(createData){}get hasTempoInsane(){return this.hasConditionStatus(COC7.status.tempoInsane)}get getTempoInsaneDurationText(){return this.hasConditionValue(COC7.status.tempoInsane,"durationText")}get hasIndefInsane(){return this.hasConditionStatus(COC7.status.indefInsane)}get portrait(){return game.settings.get("CoC7","useToken")?this.isToken?this.token?.data?.img||this.img:this.data.token?.img||this.img:this.img}async enterBoutOfMadness(realTime=!0,duration=1){let result=null;const boutOfMadnessTableId=realTime?game.settings.get("CoC7","boutOfMadnessRealTimeTable"):game.settings.get("CoC7","boutOfMadnessSummaryTable");if("none"!==boutOfMadnessTableId){result={phobia:!1,mania:!1,description:null};const boutOfMadnessTable=game.tables.get(boutOfMadnessTableId);if(result.tableRoll=await boutOfMadnessTable.roll(),void 0!==result.tableRoll.results[0]){if(CONST.TABLE_RESULT_TYPES.DOCUMENT===result.tableRoll.results[0].data.type){const item=game.items.get(result.tableRoll.results[0].data.resultId);void 0!==item?(item.data?.data?.type?.phobia&&(result.phobia=!0),item.data?.data?.type?.mania&&(result.mania=!0),result.description=`${item.name}:${TextEditor.enrichHTML(item.data.data.description.value)}`,result.name=item.name,delete item.data._id,await this.createEmbeddedDocuments("Item",[item.data])):ui.notifications.error(game.i18n.localize("CoC7.MessageBoutOfMadnessItemNotFound"))}CONST.TABLE_RESULT_TYPES.TEXT===result.tableRoll.results[0].data.type&&(result.description=TextEditor.enrichHTML(result.tableRoll.results[0].data.text))}else ui.notifications.error(game.i18n.localize("CoC7.MessageBoutOfMadnessTableNotFound"))}return realTime?(this.setCondition(COC7.status.tempoInsane,{realTime,duration}),result):result}static emptySkill(skillName,value,{rarity=!1,push=!0,combat=!1,img=!1,specialization=!1}={}){const data={name:skillName,type:"skill",data:{value,skillName,specialization:"",properties:{special:!1,rarity,push,combat}}};if(!1!==img&&(data.img=img),!1!==specialization){const parts=CoC7Item.getNamePartsSpec(skillName,specialization);data.data.specialization=parts.specialization,data.data.skillName=parts.skillName,data.name=parts.name,data.data.properties.special=!0}return data}async createSkill(skillName,value,showSheet=!1){const data=CoCActor.emptySkill(skillName,value);return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createWeaponSkill(name,firearms=!1,base=null){const skillData=await SkillSpecSelectDialog.create([],game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName"),0,name),value=Number(skillData.get("base-value")),parts=CoC7Item.getNamePartsSpec(name,game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName")),data={name:parts.name,type:"skill",data:{base:isNaN(value)?0:value,adjustments:{personal:null,occupation:null,archetype:null,experience:null},skillName:parts.skillName,specialization:parts.specialization,properties:{special:!0,fighting:!firearms,firearm:firearms,combat:!0}}};await this.createEmbeddedDocuments("Item",[data],{renderSheet:!base});return this.getSkillsByName(name)[0]}async creatureInit(){if("creature"!==this.data.type)return;if(this.getActorFlag("initialized"))return;if(0===this.getSkillsByName(game.i18n.localize(COC7.creatureFightingSkill)).length){try{const parts=CoC7Item.getNamePartsSpec(game.i18n.localize(COC7.creatureFightingSkill),game.i18n.localize(COC7.fightingSpecializationName)),data={type:"skill",name:parts.name,data:{base:0,value:null,skillName:parts.skillName,specialization:parts.specialization,properties:{combat:!0,fighting:!0,special:!0},flags:{}}},skill=await this.createEmbeddedDocuments("Item",[data],{renderSheet:!1}),attack=await this.createEmbeddedDocuments("Item",[{name:"Innate attack",type:"weapon",data:{description:{value:"Creature's natural attack",chat:"Creature's natural attack"},wpnType:"innate",properties:{addb:!0,slnt:!0}}}],{renderSheet:!1});if(skill.length>0&&attack.length>0){const createdAttack=this.items.get(attack[0].id);await createdAttack.update({"data.skill.main.id":skill[0].id,"data.skill.main.name":skill[0].name})}}catch(err){console.error("Creature init: "+err.message)}await this.setActorFlag("initialized")}}async createItem(itemName,quantity=1,showSheet=!1){const data={name:itemName,type:"item",data:{quantity}};return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptyBook(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newBookName)))return this.createBook(game.i18n.localize(COC7.newBookName),showSheet);let index=0,itemName=game.i18n.localize(COC7.newBookName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newBookName)+" "+index;return this.createBook(itemName,showSheet)}async createBook(itemName,showSheet=!1){const data={name:itemName,type:"book",data:{}};return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptySpell(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newSpellName)))return this.createSpell(game.i18n.localize(COC7.newSpellName),showSheet);let index=0,itemName=game.i18n.localize(COC7.newSpellName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newSpellName)+" "+index;return this.createSpell(itemName,showSheet)}static emptySpell(itemName){return{name:itemName,type:"spell",data:{}}}async createSpell(itemName,showSheet=!1){const data=CoCActor.emptySpell(itemName);return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptySkill(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newSkillName)))return this.createSkill(game.i18n.localize(COC7.newSkillName),null,showSheet);let index=0,skillName=game.i18n.localize(COC7.newSkillName)+" "+index;for(;this.getItemIdByName(skillName);)index++,skillName=game.i18n.localize(COC7.newSkillName)+" "+index;return this.createSkill(skillName,null,showSheet)}async createEmptyItem(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newItemName)))return this.createItem(game.i18n.localize(COC7.newItemName),1,showSheet);let index=0,itemName=game.i18n.localize(COC7.newItemName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newItemName)+" "+index;return this.createItem(itemName,1,showSheet)}async createEmptyWeapon(event=null,properties={}){const showSheet=!event||!event.shiftKey;let weaponName=game.i18n.localize(COC7.newWeaponName);if(this.getItemIdByName(game.i18n.localize(COC7.newWeaponName))){let index=0;for(weaponName=game.i18n.localize(COC7.newWeaponName)+" "+index;this.getItemIdByName(weaponName);)index++,weaponName=game.i18n.localize(COC7.newWeaponName)+" "+index}const data={name:weaponName,type:"weapon",data:{properties:{}}};for(const[key]of Object.entries(COC7.weaponProperties))data.data.properties[key]=Object.prototype.hasOwnProperty.call(properties,key)??!1;await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createBioSection(title=null){const bio=this.data.data.biography?duplicate(this.data.data.biography):[];bio.push({title,value:null}),await this.update({"data.biography":bio})}async updateBioValue(index,content){const bio=duplicate(this.data.data.biography);bio[index].value=content,await this.update({"data.biography":bio},{render:!1})}async updateBioTitle(index,title){const bio=duplicate(this.data.data.biography);bio[index].title=title,await this.update({"data.biography":bio})}async deleteBioSection(index){const bio=duplicate(this.data.data.biography);bio.splice(index,1),await this.update({"data.biography":bio})}async moveBioSectionUp(index){if(0===index)return;const bio=duplicate(this.data.data.biography);if(index>=bio.length)return;const elem=bio.splice(index,1)[0];bio.splice(index-1,0,elem),await this.update({"data.biography":bio})}async moveBioSectionDown(index){const bio=duplicate(this.data.data.biography);if(index>=bio.length-1)return;const elem=bio.splice(index,1)[0];bio.splice(index+1,0,elem),await this.update({"data.biography":bio})}async updateTextArea(textArea){const name="data."+textArea.dataset.areaName;await this.update({[name]:textArea.value})}async createEmbeddedDocuments(embeddedName,dataArray,options){const processedDataArray=[];let baseValue=0,baseCalculated=0,archetype=!1,occupation=!1;for(const data of dataArray)switch(data.type){case"skill":if(baseValue=data.data.base,baseCalculated=await CoC7Item.calculateBase(this,data),"character"!==this.data.type){if(this.getItemIdByName(data.name))return;if(baseValue&&String(baseValue)!==String(data.data.value)&&(data.data.value=baseCalculated),isNaN(Number(data.data.value))){let value;try{value=(await new Roll(data.data.value,this.parseCharacteristics()).evaluate({async:!0})).total}catch(err){value=null}value&&(data.data.value=Math.floor(value))}}else data.data.value=null;if(CoC7Item.isAnySpec(data)){let skillList=[];(data.data?.flags?.occupation||data.data?.flags?.archetype)&&(skillList=this.skills.filter((el=>!!el.data.data.specialization&&((!data.data?.flags?.occupation||!el.data.data.flags?.occupation)&&((!data.data?.flags?.archetype||!el.data.data.flags?.archetype)&&data.data.specialization.toLocaleLowerCase()===el.data.data.specialization.toLocaleLowerCase())))));const skillData=await SkillSpecSelectDialog.create(skillList,data.data.specialization,baseCalculated);if(skillData){if(baseCalculated=skillData.get("base-value"),data.data.value=baseCalculated,skillData.get("existing-skill")){const existingItem=this.items.get(skillData.get("existing-skill"));for(const[key,value]of Object.entries(data.data.flags))value&&await existingItem.setItemFlag(key);return void(data.name=CoC7Item.getNameWithoutSpec(existingItem))}{const parts=CoC7Item.getNamePartsSpec(skillData.get("new-skill-name"),data.data.specialization);data.data.skillName=parts.skillName,data.name=parts.name}}}String(baseValue)!==String(baseCalculated)&&(data.data.base=baseCalculated),processedDataArray.push(duplicate(data));break;case"weapon":if("container"!==this.data.type){const mainSkill=data.data?.skill?.main?.name;if(mainSkill){let skill=this.getSkillsByName(mainSkill)[0];if(!skill){const name=mainSkill.match(/\(([^)]+)\)/)?mainSkill.match(/\(([^)]+)\)/)[1]:mainSkill;skill=await this.createWeaponSkill(name,!!data.data.properties?.rngd)}skill&&(data.data.skill.main.id=skill.id)}const secondSkill=data.data?.skill?.alternativ?.name;if(secondSkill){let skill=this.getSkillsByName(secondSkill)[0];if(!skill){const name=mainSkill.match(/\(([^)]+)\)/)?mainSkill.match(/\(([^)]+)\)/)[1]:mainSkill;skill=await this.createWeaponSkill(name,!!data.data.properties?.rngd)}skill&&(data.data.skill.alternativ.id=skill.id)}}processedDataArray.push(duplicate(data));break;case"setup":{if(data.data.enableCharacterisitics){data.data.characteristics.list={},data.data.characteristics.list.str=this.getCharacteristic("str"),data.data.characteristics.list.con=this.getCharacteristic("con"),data.data.characteristics.list.siz=this.getCharacteristic("siz"),data.data.characteristics.list.dex=this.getCharacteristic("dex"),data.data.characteristics.list.app=this.getCharacteristic("app"),data.data.characteristics.list.int=this.getCharacteristic("int"),data.data.characteristics.list.pow=this.getCharacteristic("pow"),data.data.characteristics.list.edu=this.getCharacteristic("edu"),data.data.characteristics.list.luck={},data.data.characteristics.list.luck.value=isNaN(this.luck)?null:this.luck,data.data.characteristics.list.luck.label=game.i18n.localize("CoC7.Luck"),data.data.characteristics.list.luck.shortName=game.i18n.localize("CoC7.Luck"),data.data.characteristics.values||(data.data.characteristics.values={}),data.data.characteristics.values.str=data.data.characteristics.list.str.value,data.data.characteristics.values.con=data.data.characteristics.list.con.value,data.data.characteristics.values.siz=data.data.characteristics.list.siz.value,data.data.characteristics.values.dex=data.data.characteristics.list.dex.value,data.data.characteristics.values.app=data.data.characteristics.list.app.value,data.data.characteristics.values.int=data.data.characteristics.list.int.value,data.data.characteristics.values.pow=data.data.characteristics.list.pow.value,data.data.characteristics.values.edu=data.data.characteristics.list.edu.value,data.data.characteristics.values.luck=data.data.characteristics.list.luck.value,data.data.characteristics.points.enabled?data.data.title=game.i18n.localize("CoC7.SpendPoints"):data.data.title=game.i18n.localize("CoC7.RollCharac"),data.data.pointsWarning=!(null!==data.data.characteristics.values.str&&null!==data.data.characteristics.values.con&&null!==data.data.characteristics.values.siz&&null!==data.data.characteristics.values.dex&&null!==data.data.characteristics.values.app&&null!==data.data.characteristics.values.int&&null!==data.data.characteristics.values.pow&&null!==data.data.characteristics.values.edu);if(!await CharacRollDialog.create(data.data))return;{const updateData={};for(const key of["str","con","siz","dex","app","int","pow","edu"])data.data.characteristics.values[key]&&(updateData[`data.characteristics.${key}.value`]=data.data.characteristics.values[key],updateData[`data.characteristics.${key}.formula`]=data.data.characteristics.rolls[key]);data.data.characteristics.values.luck&&(updateData["data.attribs.lck.value"]=data.data.characteristics.values.luck),data.data.characteristics.values.pow&&(updateData["data.attribs.san.value"]=data.data.characteristics.values.pow,updateData["data.attribs.san.oneFifthSanity"]=" / "+Math.floor(data.data.characteristics.values.pow/5),updateData["data.indefiniteInsanityLevel.max"]=updateData["data.attribs.mp.value"]=updateData["data.attribs.mp.max"]=Math.floor(data.data.characteristics.values.pow/5)),await this.update(updateData),await this.update({"data.attribs.hp.value":this.hpMax,"data.attribs.hp.max":this.hpMax})}}const skills=data.data.items.filter((it=>"skill"===it.type)),othersItems=data.data.items.filter((it=>"skill"!==it.type));if(await this.addUniqueItems(skills),await this.addItems(othersItems),game.settings.get("CoC7","oneBlockBackstory"))await this.update({"data.backstory":data.data.backstory});else for(const sectionName of data.data.bioSections)!this.data.data.biography?.find((el=>sectionName===el.title))&&sectionName&&await this.createBioSection(sectionName);Hooks.call("setupFinishedCoC7");break}case"archetype":if("character"===this.data.type){if(this.archetype){let resetArchetype=!1;if(await Dialog.confirm({title:game.i18n.localize("CoC7.ResetArchetype"),content:`<p>${game.i18n.format("CoC7.ResetArchetypeHint",{name:this.name})}</p>`,yes:()=>{resetArchetype=!0},defaultYes:!1}),!resetArchetype)return;await this.resetArchetype()}const coreCharac=[];for(const entry of Object.entries(data.data.coreCharacteristics)){const[key,value]=entry;if(data.data.coreCharacteristics[key]=!1,value){const char=this.getCharacteristic(key);char.key=key,coreCharac.push(char)}}let charac;if(coreCharac.length>1){const charDialogData={};charDialogData.characteristics=coreCharac,charDialogData.title=game.i18n.localize("CoC7.SelectCoreCharac"),charac=await CharacSelectDialog.create(charDialogData)}else 1===coreCharac.length&&(charac=coreCharac[0].key);if(!charac)return;if(data.data.coreCharacteristics[charac]=!0,data.data.coreCharacteristicsFormula.enabled){let value=Number(data.data.coreCharacteristicsFormula.value);if(isNaN(value)){const char=this.getCharacteristic(charac),roll=new Roll(data.data.coreCharacteristicsFormula.value);await roll.roll({async:!0}),roll.toMessage({flavor:`Rolling characterisitic ${char.label}: ${data.data.coreCharacteristicsFormula.value}`}),value=char.value<roll.total?roll.total:char.value}await this.update({[`data.characteristics.${charac}.value`]:value})}await this.addUniqueItems(data.data.skills,"archetype"),processedDataArray.push(duplicate(data)),archetype=!0}break;case"occupation":if("character"===this.data.type){if(this.occupation){let resetOccupation=!1;if(await Dialog.confirm({title:game.i18n.localize("CoC7.ResetOccupation"),content:`<p>${game.i18n.format("CoC7.ResetOccupationHint",{name:this.name})}</p>`,yes:()=>{resetOccupation=!0},defaultYes:!1}),!resetOccupation)return;await this.resetOccupation()}const pointsDialogData={};pointsDialogData.characteristics=data.data.occupationSkillPoints;let total=0,optionalChar=!1;for(const entry of Object.entries(data.data.occupationSkillPoints)){const[key,value]=entry,char=this.getCharacteristic(key);pointsDialogData.characteristics[key].name=char.label,pointsDialogData.characteristics[key].value=char.value,value.selected&&(pointsDialogData.characteristics[key].total=char.value*Number(pointsDialogData.characteristics[key].multiplier),value.optional?optionalChar=!0:total+=pointsDialogData.characteristics[key].total)}if(pointsDialogData.total=total,optionalChar){if(!await PointSelectDialog.create(pointsDialogData))return}for(let index=0;index<data.data.groups.length;index++){const dialogData={skills:[],type:"occupation"};dialogData.actorId=this.id,dialogData.optionsCount=Number(data.data.groups[index].options),dialogData.title=game.i18n.localize("CoC7.SkillSelectionWindow");for(const value of data.data.groups[index].skills)if(CoC7Item.isAnySpec(value))dialogData.skills.push(value);else{const skill=this.items.find((item=>item.name===value.name&&"skill"===item.type));if(!skill||!skill.data.data.flags?.occupation){data.data.skills.find((item=>item.name===value.name))||dialogData.skills.push(value)}}if(0!==dialogData.skills.length)if(dialogData.skills.length<=dialogData.optionsCount){ui.notifications.info(game.i18n.format("CoC7.InfoLessSkillThanOptions",{skillCount:dialogData.skills.length,optionsCount:dialogData.optionsCount}));const merged=CoC7Item.mergeOptionalSkills(data.data.skills,dialogData.skills);data.data.skills=merged}else{const selected=await SkillSelectDialog.create(dialogData);if(!selected)return;const merged=CoC7Item.mergeOptionalSkills(data.data.skills,selected);data.data.skills=merged}else ui.notifications.info(game.i18n.localize("CoC7.InfoAllSkillsAlreadySelected"))}if(Number(data.data.personal)){const dialogData={skills:[],type:"occupation"};dialogData.actorId=this.id,dialogData.optionsCount=Number(data.data.personal),dialogData.title=game.i18n.format("CoC7.SelectPersonalSkills",{number:Number(data.data.personal)});for(const s of this.skills)if(!s.data.data.flags.occupation&&!s.data.data.properties.noadjustments&&!s.data.data.properties.noxpgain){data.data.skills.find((item=>item.name===s.name))||dialogData.skills.push(s.data)}if(0!==dialogData.skills.length)if(dialogData.skills.length<=dialogData.optionsCount){ui.notifications.info(game.i18n.format("CoC7.InfoLessSkillThanOptions",{skillCount:dialogData.skills.length,optionsCount:dialogData.optionsCount}));const merged=CoC7Item.mergeOptionalSkills(data.data.skills,dialogData.skills);data.data.skills=merged}else{const selected=await SkillSelectDialog.create(dialogData);if(!selected)return;const merged=CoC7Item.mergeOptionalSkills(data.data.skills,selected);data.data.skills=merged}else ui.notifications.info(game.i18n.localize("CoC7.InfoAllSkillsAlreadySelected"))}await this.addUniqueItems(data.data.skills,"occupation"),await(this.creditRatingSkill?.setItemFlag("occupation")),await(this.creditRatingSkill?.update({"data.adjustments.occupation":Number(data.data.creditRating.min)})),processedDataArray.push(duplicate(data)),occupation=!0}break;default:processedDataArray.push(duplicate(data))}if(0===processedDataArray.length)return[];const processed=await super.createEmbeddedDocuments(embeddedName,processedDataArray,options);return archetype&&(await this.update({"data.development.archetype":this.archetypePoints}),Hooks.call("archetypeFinishedCoC7")),occupation&&(await this.update({"data.development.occupation":this.occupationPoints,"data.development.personal":this.personalPoints}),Hooks.call("occupationFinishedCoC7")),processed}getItemIdByName(itemName){let id=null;const name=itemName.match(/\(([^)]+)\)/)?itemName.match(/\(([^)]+)\)/)[1]:itemName;for(const value of this.items)CoC7Item.getNameWithoutSpec(value).toLowerCase()===name.toLowerCase()&&(id=value.id);return id}getItemsByName(itemName){const itemList=[];for(const value of this.items)value.name===itemName&&itemList.push(value);return itemList}getSkillsByName(skillName){const skillList=[],name=skillName.match(/\(([^)]+)\)/)?skillName.match(/\(([^)]+)\)/)[1]:skillName;for(const value of this.items)CoC7Item.getNameWithoutSpec(value).toLowerCase()===name.toLowerCase()&&"skill"===value.type&&skillList.push(value);return skillList}parseFormula(formula){let parsedFormula=formula;for(const[key,value]of Object.entries(COC7.formula.actor))parsedFormula=parsedFormula.replace(key,value);return parsedFormula}parseCharacteristics(){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actor))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=getProperty(this,value.substring(5)));return parsed}static getCharacteristicDefinition(){const characteristics=[];for(const[key,value]of Object.entries(game.system.template.Actor.templates.characteristics.characteristics))characteristics.push({key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label)});return characteristics}getCharacteristic(charName){if(this.data.data.characteristics)for(const[key,value]of Object.entries(this.data.data.characteristics))if(game.i18n.localize(value.short).toLowerCase()===charName.toLowerCase()||game.i18n.localize(value.label).toLowerCase()===charName.toLowerCase()||key===charName.toLowerCase())return{key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label),value:value.value};return null}getAttribute(attribName){return["lck","luck",game.i18n.localize("CoC7.Luck").toLowerCase()].includes(attribName.toLowerCase())?{key:"lck",shortName:"luck",label:game.i18n.localize("CoC7.Luck"),value:this.data.data.attribs.lck.value}:["san",game.i18n.localize("CoC7.SAN").toLowerCase(),game.i18n.localize("CoC7.Sanity").toLowerCase()].includes(attribName.toLowerCase())?{key:"san",shortName:game.i18n.localize("CoC7.SAN"),label:game.i18n.localize("CoC7.Sanity"),value:this.data.data.attribs.san.value}:null}get occupation(){return this.items.filter((item=>"occupation"===item.type))[0]}get archetype(){return this.items.filter((item=>"archetype"===item.type))[0]}async resetOccupation(eraseOld=!0){if(eraseOld){const occupationSkill=this.items.filter((item=>item.getItemFlag("occupation")));for(let index=0;index<occupationSkill.length;index++)await occupationSkill[index].unsetItemFlag("occupation")}this.occupation&&await this.occupation.delete(),await this.update({"data.development.occupation":null})}async resetArchetype(eraseOld=!0){if(eraseOld){const archetypeSkill=this.items.filter((item=>item.getItemFlag("archetype")));for(let index=0;index<archetypeSkill.length;index++)await archetypeSkill[index].unsetItemFlag("archetype")}this.archetype&&await this.archetype.delete(),await this.update({"data.development.archetype":null})}get luck(){return parseInt(this.data.data.attribs?.lck?.value)}async setLuck(value){return await this.update({"data.attribs.lck.value":value})}async spendLuck(amount){return amount=parseInt(amount),this.luck>=amount&&this.setLuck(this.luck-amount)}get hp(){if(["vehicle"].includes(this.data.type)){if(null===this.data.data.attribs.build.current||void 0===this.data.data.attribs.build.current||""===this.data.data.attribs.build.current)return this.build;if(this.data.data.attribs.build.current>this.data.data.attribs.build.value)return this.build;const hp=parseInt(this.data.data.attribs.build.current);return isNaN(hp)?null:hp}return parseInt(this.data.data.attribs.hp.value)}get hpMax(){return["vehicle"].includes(this.data.type)?this.build:this.data.data.attribs.hp.auto?null!=this.data.data.characteristics.siz.value&&null!=this.data.data.characteristics.con.value?Math.floor((this.data.data.characteristics.siz.value+this.data.data.characteristics.con.value)/(game.settings.get("CoC7","pulpRuleDoubleMaxHealth")&&"character"===this.data.type?5:10)):this.data.data.attribs.hp.max?parseInt(this.data.data.attribs.hp.max):null:parseInt(this.data.data.attribs.hp.max)}async setHp(value){return value<0&&(value=0),["vehicle"].includes(this.data.type)?(value>this.build&&(value=parseInt(this.build)),await this.update({"data.attribs.build.current":value})):(value>this.hpMax&&(value=parseInt(this.hpMax)),await this.update({"data.attribs.hp.value":value}))}async addUniqueItems(skillList,flag=null){const processed=[];for(const skill of skillList)if(CoC7Item.isAnySpec(skill))skill.data.flags||(skill.data.flags={}),flag&&(skill.data.flags[flag]=!0),processed.push(duplicate(skill));else{const itemId=this.getItemIdByName(skill.name);if(itemId){if(flag){const item=this.items.get(itemId);await item.setItemFlag(flag)}}else flag&&(skill.data.flags||(skill.data.flags={}),skill.data.flags[flag]=!0),processed.push(duplicate(skill))}0!==processed.length&&await this.createEmbeddedDocuments("Item",processed,{renderSheet:!1})}async addItems(itemList,flag=null){const processed=[];for(const item of itemList)flag&&(item.data.flags||(item.data.flags={}),item.data.flags[flag]=!0),processed.push(duplicate(item));if(0!==processed.length)return await this.createEmbeddedDocuments("Item",processed,{renderSheet:!1})}async addUniqueItem(skill,flag=null){const itemId=this.getItemIdByName(skill.name);if(itemId){if(flag){const item=this.items.get(itemId);await item.setItemFlag(flag)}}else flag&&(skill.data.flags||(skill.data.flags={}),skill.data.flags[flag]=!0),await this.createEmbeddedDocuments("Item",[skill],{renderSheet:!1})}get mpMax(){return this.data.data.attribs.mp.auto?null!=this.data.data.characteristics.pow.value?Math.floor(this.data.data.characteristics.pow.value/5):null:parseInt(this.data.data.attribs.mp.max)}getReasonSanLoss(sanReason){return"string"==typeof sanReason?this.data.data.sanityLossEvents.filter((r=>r.type.toLocaleLowerCase()===sanReason.toLocaleLowerCase()))[0]??{type:"",totalLoss:0,immunity:!1}:{type:"",totalLoss:0,immunity:!1}}sanLostToReason(sanReason){if(sanReason){return this.getReasonSanLoss(sanReason).totalLoss}return 0}sanLossReasonEncountered(sanReason){if(sanReason){return""!==this.getReasonSanLoss(sanReason).type}return!1}setReasonSanLoss(sanReason,sanLoss){if("string"==typeof sanReason&&""!==sanReason){const sanityLossEvents=duplicate(this.data.data.sanityLossEvents),index=sanityLossEvents.findIndex((r=>r.type.toLocaleLowerCase()===sanReason.toLocaleLowerCase()));return sanLoss>0?-1===index?sanityLossEvents.push({type:sanReason,totalLoss:sanLoss,immunity:!1}):sanityLossEvents[index].totalLoss+=sanLoss:index>-1&&(sanityLossEvents.splice(index,1),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)}))),this.update({"data.sanityLossEvents":sanityLossEvents})}}maxLossToSanReason(sanReason,sanMaxFormula){const sanMax=new Roll(sanMaxFormula.toString()).evaluate({maximize:!0}).total,sanityLossEvent=this.getReasonSanLoss(sanReason);return sanityLossEvent.immunity?0:Math.max(0,sanMax-sanityLossEvent.totalLoss)}async looseSan(sanReason,sanLoss){return this.getReasonSanLoss(sanReason).immunity?0:(await this.setSan(this.san-sanLoss),this.setReasonSanLoss(sanReason,sanLoss),sanLoss)}sanLoss(checkPassed){return checkPassed?this.sanLossCheckPassed:this.sanLossCheckFailled}get sanLossCheckPassed(){return this.data.data.special?.sanLoss?.checkPassed}get sanLossCheckFailled(){return this.data.data.special?.sanLoss?.checkFailled}get sanLossMax(){return this.sanLossCheckFailled?isNaN(Number(this.sanLossCheckFailled))?new Roll(this.sanLossCheckFailled).evaluate({maximize:!0}).total:Number(this.sanLossCheckFailled):0}get sanLossMin(){return this.sanLossCheckPassed?isNaN(Number(this.sanLossCheckPassed))?new Roll(this.sanLossCheckPassed).evaluate({maximize:!0}).total:Number(this.sanLossCheckPassed):0}get dailySanLoss(){return this.data.data.attribs.san?.dailyLoss||0}get sanMax(){if(this.data.data.attribs)return this.data.data.attribs?.san?.auto?this.cthulhuMythos?Math.max(99-this.cthulhuMythos,0):99:parseInt(this.data.data.attribs.san.max)}get mp(){return parseInt(this.data.data.attribs.mp.value)}async setMp(value){return value<0&&(value=0),value>parseInt(this.mpMax)&&(value=parseInt(this.mpMax)),await this.update({"data.attribs.mp.value":value})}get san(){return parseInt(this.data.data.attribs.san.value)}get int(){return this.getCharacteristic("int")}get occupationPointsSpent(){let occupationPoints=0;for(const skill of this.skills)skill.data.data.adjustments?.occupation&&(occupationPoints+=skill.data.data.adjustments.occupation);return occupationPoints}get occupationPoints(){if(!this.occupation)return 0;let points=0;for(const entry of Object.entries(this.occupation.data.data.occupationSkillPoints)){const[key,value]=entry,char=this.getCharacteristic(key);value.selected&&(points+=char.value*Number(value.multiplier))}return points}async resetOccupationPoints(){await this.update({"data.development.occupation":this.occupationPoints})}async resetArchetypePoints(){await this.update({"data.development.archetype":this.occupationPoints})}async resetPersonalPoints(){await this.update({"data.development.personal":this.personalPoints})}get archetypePointsSpent(){let archetypePoints=0;for(const skill of this.skills)skill.data.data.adjustments?.archetype&&(archetypePoints+=skill.data.data.adjustments.archetype);return archetypePoints}get archetypePoints(){return this.archetype?this.archetype.data.data.bonusPoints:0}get experiencePoints(){let experiencePoints=0;for(const skill of this.skills)skill.data.data.adjustments?.experience&&(experiencePoints+=skill.data.data.adjustments.experience);return experiencePoints}get personalPointsSpent(){let personalPoints=0;for(const skill of this.skills)skill.data.data.adjustments?.personal&&(personalPoints+=skill.data.data.adjustments.personal);return personalPoints}get personalPoints(){return 2*Number(this.data.data.characteristics.int.value)}get hasDevelopmentPhase(){for(const skill of this.skills)if(skill.data.data.flags?.developement)return!0;if(this.onlyRunOncePerSession)return!1;for(const sanityLossEvent of this.data.data.sanityLossEvents)if(!sanityLossEvent.immunity)return!0;return!1}async setSan(value){value<0&&(value=0),value>this.sanMax&&(value=this.sanMax);const loss=parseInt(this.data.data.attribs.san.value)-value;if(loss>0){let totalLoss=parseInt(this.data.data.attribs.san.dailyLoss)?parseInt(this.data.data.attribs.san.dailyLoss):0;return totalLoss+=loss,loss>=5&&this.setCondition(COC7.status.tempoInsane),totalLoss>=Math.floor(this.san/5)&&this.setCondition(COC7.status.indefInsane),await this.update({"data.attribs.san.value":value,"data.attribs.san.dailyLoss":totalLoss})}return await this.update({"data.attribs.san.value":value})}async setAttribAuto(value,attrib){const updatedKey=`data.attribs.${attrib}.auto`;return await this.update({[updatedKey]:value})}async toggleAttribAuto(attrib){this.setAttribAuto(!this.data.data.attribs[attrib].auto,attrib)}get build(){if(["vehicle"].includes(this.data.type)){const build=parseInt(this.data.data.attribs.build.value);return isNaN(build)?null:build}if(!this.data.data.attribs)return null;if(!this.data.data.attribs.build)return null;if("auto"===this.data.data.attribs.build.value&&(this.data.data.attribs.build.auto=!0),this.data.data.attribs.build.auto){const sum=this.data.data.characteristics.str.value+this.data.data.characteristics.siz.value;if(sum>164)return Math.floor((sum-45)/80)+1;if(sum<65)return-2;if(sum<85)return-1;if(sum<125)return 0;if(sum<165)return 1}return this.data.data.attribs.build.value}get db(){if(["vehicle"].includes(this.data.type))return 0;if(!this.data.data.attribs)return null;if(!this.data.data.attribs.db)return null;if("auto"===this.data.data.attribs.db.value&&(this.data.data.attribs.db.auto=!0),this.data.data.attribs.db.auto){const sum=this.data.data.characteristics.str.value+this.data.data.characteristics.siz.value;if(sum>164)return`${Math.floor((sum-45)/80)}D6`;if(sum<65)return-2;if(sum<85)return-1;if(sum<125)return 0;if(sum<165)return"1D4"}return this.data.data.attribs.db.value}get mov(){if(["vehicle"].includes(this.data.type))return this.data.data.attribs.mov.value;if(!this.data.data.attribs)return null;if(!this.data.data.attribs.mov)return null;if("auto"===this.data.data.attribs.mov.value&&(this.data.data.attribs.mov.auto=!0),this.data.data.attribs.mov.auto){let MOV;if(MOV=this.data.data.characteristics.dex.value>this.data.data.characteristics.siz.value&&this.data.data.characteristics.str.value>this.data.data.characteristics.siz.value?9:this.data.data.characteristics.dex.value>=this.data.data.characteristics.siz.value||this.data.data.characteristics.str.value>=this.data.data.characteristics.siz.value?8:7,"creature"!==this.data.data.type&&(isNaN(parseInt(this.data.data.infos.age))||(MOV=parseInt(this.data.data.infos.age)>=40?MOV-Math.floor(parseInt(this.data.data.infos.age)/10)+3:MOV)),MOV>0)return MOV}return this.data.data.attribs.mov.value}get tokenId(){return this.token?`${this.token.scene._id}.${this.token.id}`:null}get locked(){return this.data.data.flags||(this.data.data.flags={},this.data.data.flags.locked=!0,this.update({"data.flags":{}}),this.update({"data.flags.locked":!1})),this.data.data.flags.locked}getItemsFromName(name){return this.items.filter((i=>i.name===name))}set locked(value){this.update({"data.flags.locked":value})}async toggleActorFlag(flagName){const flagValue=!this.data.data.flags[flagName],name=`data.flags.${flagName}`;await this.update({[name]:flagValue})}async attributeCheck(attributeName,fastForward=!1,options={}){const attrib=this.getAttribute(attributeName.toLowerCase());if(!attrib)return ui.notifications.error(game.i18n.format("CoC7.ErrorNotFound",{missing:attributeName})),null;const check=new CoC7Check;if(options.modifier&&(check.diceModifier=Number(options.modifier)),options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.rollAttribute(attrib.key),check.toMessage()}async characteristicCheck(characteristicName,fastForward=!1,options={}){const char=this.getCharacteristic(characteristicName);if(!char)return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotFoundForActor",{missing:characteristicName,actor:this.name}));const check=new CoC7Check;if(options.modifier&&(check.diceModifier=Number(options.modifier)),options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){options.displayName=char.label;const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.rollCharacteristic(char.key),check.toMessage()}async skillCheck(skillData,fastForward,options={}){let skill=this.getSkillsByName(skillData.name?skillData.name:skillData);if(!skill.length){let item=null;if(skillData.pack){const pack=game.packs.get(skillData.pack);if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(skillData.id)}else skillData.id&&(item=game.items.get(skillData.id));if(!item){const check=new CoC7Check;check._rawValue="?",await check.roll(),check.toMessage()}if(!item)return ui.notifications.warn(game.i18n.format("CoC7.NoSkill")+game.i18n.format("CoC7.ErrorNotFoundForActor",{missing:skillData.name?skillData.name:skillData,actor:this.name}));let create=!1;if(await Dialog.confirm({title:`${game.i18n.localize("CoC7.AddWeapon")}`,content:`<p>${game.i18n.format("CoC7.AddWeapontHint",{weapon:skillData.name,actor:this.name})}</p>`,yes:()=>{create=!0}}),!0!==create)return;if(await this.createEmbeddedDocuments("Item",[duplicate(item)]),skill=this.getSkillsByName(item.name),!skill.length)return;if(game.user.isGM){const skillValue=await class{static async create(name=null,baseValue=null){const html=await renderTemplate("systems/CoC7/templates/apps/skill-value.html",{base:baseValue,name});return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:game.i18n.format("CoC7.SkillValue",{name}),content:html,buttons:{validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#skill-select-form")),resolve(formData))}},default:"validate",close:()=>resolve(!1)});dlg.render(!0)}))}}.create(skill[0].name,skill[0].base),value=Number(skillValue.get("base-value"));await skill[0].updateValue(value)}}const check=new CoC7Check;if(void 0!==options.modifier&&(check.diceModifier=Number(options.modifier)),void 0!==options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,check.skill=skill[0].id,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.roll(),check.toMessage()}async weaponCheck(weaponData,fastForward=!1){const itemId=weaponData.id;let weapon;if(weapon=this.items.get(itemId),!weapon){let weapons=this.getItemsFromName(weaponData.name);if(0===weapons.length){if(!game.user.isGM)return void ui.notifications.warn(`Actor ${this.name} has no weapon named ${weaponData.name}`);{let item=null;const pack=weaponData.pack?game.packs.get(weaponData.pack):null;if(pack){if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(weaponData.id)}else weaponData.id&&(item=game.items.get(weaponData.id));if(!item)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroNoItemFound"));let create=!1;await Dialog.confirm({title:`${game.i18n.localize("CoC7.AddWeapon")}`,content:`<p>${game.i18n.format("CoC7.AddWeapontHint",{weapon:weaponData.name,actor:this.name})}</p>`,yes:()=>{create=!0}});const actor=void 0!==this.parent?.actor?this.parent.actor:this;if(!0!==create)return;if(await actor.createEmbeddedDocuments("Item",[item.toJSON()]),weapons=actor.getItemsFromName(item.name),!weapons.length)return;await weapons[0].reload()}}else weapons.length>1&&ui.notifications.warn(`Actor ${this.name} has more than one weapon named ${weaponData.name}. The first found will be used`);weapon=weapons[0]}if(!weapon.data.data.properties.rngd){game.user.targets.size>1&&ui.notifications.warn(game.i18n.localize("CoC7.WarnTooManyTarget"));new CoC7MeleeInitiator(this.tokenKey,weapon.id,fastForward).createChatCard()}if(weapon.data.data.properties.rngd){new CoC7RangeInitiator(this.tokenKey,weapon.id,fastForward).createChatCard()}}async rollInitiative(hasGun=!1){if("optional"===game.settings.get("CoC7","initiativeRule")){const roll=new CoC7Check(this.actorKey);return roll.denyPush=!0,roll.denyLuck=!0,roll.denyBlindTampering=!0,roll.hideDice=!1===game.settings.get("CoC7","displayInitDices"),roll.flavor="Initiative roll",await roll.rollCharacteristic("dex",hasGun?1:0),roll.toMessage(),roll.successLevel+this.data.data.characteristics.dex.value/100}return hasGun?this.data.data.characteristics.dex.value+50:this.data.data.characteristics.dex.value}getActorFlag(flagName){return this.data.data.flags?!!this.data.data.flags[flagName]&&this.data.data.flags[flagName]:(this.data.data.flags={},this.data.data.flags.locked=!0,this.update({"data.flags":{}}),!1)}async setActorFlag(flagName){await this.update({[`data.flags.${flagName}`]:!0})}async unsetActorFlag(flagName){await this.update({[`data.flags.${flagName}`]:!1})}getWeaponSkills(itemId){const weapon=this.items.get(itemId);if("weapon"!==weapon.data.type)return null;const skills=[];return weapon.data.data.skill.main.id&&skills.push(this.items.get(weapon.data.data.skill.main.id)),weapon.usesAlternativeSkill&&weapon.data.data.skill.alternativ.id&&skills.push(this.items.get(weapon.data.data.skill.alternativ.id)),skills}find(name){const item=this.items.get(name);if(item)return{type:"item",value:item};const matches=/\(([^)]+)\)/.exec(name);let shortName=null;matches&&matches.length&&(shortName=matches[1]);const skill=this.skills.filter((s=>!!s.name&&(s.name.toLocaleLowerCase().replace(/\s/g,"")===name.toLocaleLowerCase().replace(/\s/g,"")||s.name.toLocaleLowerCase().replace(/\s/g,"")===name.toLocaleLowerCase().replace(/\s/g,"")||s.name.toLocaleLowerCase().replace(/\s/g,"")===shortName?.toLocaleLowerCase().replace(/\s/g,""))));if(skill.length)return{type:"item",value:skill[0]};const charKey=["str","con","siz","dex","app","int","pow","edu"];for(let i=0;i<charKey.length;i++){const char=this.getCharacteristic(charKey[i]);if(char){if(char.key?.toLocaleLowerCase()===name.toLowerCase())return{type:"characteristic",value:char};if(char.shortName?.toLocaleLowerCase()===name.toLowerCase())return{type:"characteristic",value:char};if(char.label?.toLocaleLowerCase()===name.toLowerCase())return{type:"characteristic",value:char}}}const attribKey=["lck","san"];for(let i=0;i<attribKey.length;i++){const attr=this.getAttribute(attribKey[i]);if(attr){if(attr.key?.toLocaleLowerCase()===name.toLowerCase())return{type:"attribute",value:attr};if(attr.shortName?.toLocaleLowerCase()===name.toLowerCase())return{type:"attribute",value:attr};if(attr.label?.toLocaleLowerCase()===name.toLowerCase())return{type:"attribute",value:attr}}}}get pilotSkills(){return this.skills.filter((s=>s.data.data.properties?.special&&s.data.data.specialization?.toLocaleLowerCase()===game.i18n.localize("CoC7.PilotSpecializationName")?.toLocaleLowerCase()))}get driveSkills(){return this.skills.filter((s=>s.data.data.properties?.special&&s.data.data.specialization?.toLocaleLowerCase()===game.i18n.localize("CoC7.DriveSpecializationName")?.toLocaleLowerCase()))}get tokenKey(){return this.sheet.token?`${this.sheet.token.parent.id}.${this.sheet.token.id}`:this.id}get actorKey(){return this.data.token.actorLink?this.id:this.tokenKey}static getActorFromKey(key){if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;return new Token(tokenData).actor}}return game.actors.get(key)||null}async rollCharacteristicsValue(){const characteristics={};for(const[key,value]of Object.entries(this.data.data.characteristics))if(value.formula&&!value.formula.startsWith("@")){const r=new Roll(value.formula);await r.roll({async:!0}),r.total&&(characteristics[`data.characteristics.${key}.value`]=Math.floor(r.total))}await this.update(characteristics),await this.reportCharactedriticsValue()}async averageCharacteristicsValue(){const characteristics={};for(const[key,value]of Object.entries(this.data.data.characteristics))if(value.formula&&!value.formula.startsWith("@")){const max=new Roll(value.formula).evaluate({maximize:!0}).total,min=new Roll(value.formula).evaluate({minimize:!0}).total,average=Math.floor((max+min)/2),charValue=average%5==0?average:10*Math.round(average/10);charValue&&(characteristics[`data.characteristics.${key}.value`]=charValue)}await this.update(characteristics),await this.reportCharactedriticsValue()}async reportCharactedriticsValue(){const characteristics={};for(const[key,value]of Object.entries(this.data.data.characteristics))if(value.formula&&value.formula.startsWith("@")){let charValue;try{charValue=new Roll(value.formula,this.parseCharacteristics()).evaluate({maximize:!0}).total}catch(err){charValue=null}charValue&&(characteristics[`data.characteristics.${key}.value`]=charValue)}await this.update(characteristics)}async setCharacteristic(name,value){const characteristic={},charValue=isNaN(parseInt(value))?null:parseInt(value);if(characteristic[name]=charValue,!charValue&&value.startsWith("@")){characteristic[name.replace(".value",".formula")]=value}await this.update(characteristic),await this.reportCharactedriticsValue()}async developementPhase(fastForward=!1){const failure=[],success=[],title=game.i18n.localize("CoC7.RollAll4Dev");let skillsRolled=0,message='<p class="chat-card">';for(const item of this.items)if("skill"===item.type&&item.developementFlag){skillsRolled++;const die=await new Die({faces:100}).evaluate({async:!0}),skillValue=item.value;let augment=null,skillMasteringMessage=null;if(die.total>skillValue||die.total>=95){const augmentDie=await new Die({faces:10}).evaluate({async:!0});if(success.push(item.id),skillValue<90&&skillValue+augmentDie.total>=90){const augmentSANDie=await new Die({faces:6,number:2}).evaluate({async:!0}),sanGained=augmentSANDie.total,sanGainedMessage=`Gained 2d6 (${augmentSANDie.values[0]} + ${augmentSANDie.values[1]} = ${sanGained}) SAN`;console.debug(sanGainedMessage),skillMasteringMessage=`<span class="upgrade-success">${game.i18n.format("CoC7.SanGained",{results:`${augmentSANDie.values[0]} + ${augmentSANDie.values[1]}`,sanGained,skill:item.data.name,skillValue:skillValue+augmentDie.total})}</span><br>`,await this.setSan(this.san+sanGained)}augment+=augmentDie.total,message+=`<span class="upgrade-success">${game.i18n.format("CoC7.DevSuccess",{item:item.data.name,die:die.total,score:item.value,augment:augmentDie.total})}</span><br>`,null!==skillMasteringMessage&&(message+=skillMasteringMessage),await item.increaseExperience(augment)}else message+=`<span class="upgrade-failed">${game.i18n.format("CoC7.DevFailure",{item:item.data.name,die:die.total,score:item.value})}</span><br>`,failure.push(item.id);await item.unflagForDevelopement()}const sanityLossEvents=[];let changed=!1;for(const sanityLossEvent of this.data.data.sanityLossEvents)sanityLossEvent.immunity?sanityLossEvents.push(sanityLossEvent):sanityLossEvent.totalLoss>1?(sanityLossEvent.totalLoss--,sanityLossEvents.push(sanityLossEvent),changed=!0):changed=!0;if(changed&&(skillsRolled&&(message+="<br>"),message+=`<span>${game.i18n.format("CoC7.ReduceSanityLimits")}</span>`,await this.update({"data.sanityLossEvents":sanityLossEvents})),!fastForward){message+="</p>";const speaker={actor:this};await chatHelper.createMessage(skillsRolled?title:"",message,{speaker}),this.onlyRunOncePerSession=!0}return{failure,success}}async developLuck(fastForward=!1){const currentLuck=this.data.data.attribs.lck.value;currentLuck||await this.update({"data.attribs.lck.value":0});const pulpRuleDevelopmentRollLuck=game.settings.get("CoC7","pulpRuleDevelopmentRollLuck"),upgradeRoll=(await new Roll("1D100").roll({async:!0})).total,higherThanCurrentLuck=upgradeRoll>currentLuck;let augmentRoll;pulpRuleDevelopmentRollLuck?augmentRoll=higherThanCurrentLuck?"2D10+10":"1D10+5":higherThanCurrentLuck&&(augmentRoll="1D10");const title=game.i18n.localize("CoC7.RollLuck4Dev");let message='<p class="chat-card">';if(pulpRuleDevelopmentRollLuck||higherThanCurrentLuck){const augmentValue=(await new Roll(augmentRoll).roll({async:!0})).total;await this.update({"data.attribs.lck.value":this.data.data.attribs.lck.value+augmentValue}),message+=`<span class="upgrade-success">${game.i18n.format("CoC7.LuckIncreased",{die:upgradeRoll,score:currentLuck,augment:augmentValue})}</span>`}else message+=`<span class="upgrade-failed">${game.i18n.format("CoC7.LuckNotIncreased",{die:upgradeRoll,score:currentLuck})}</span>`;if(!fastForward){message+="</p>";const speaker={actor:this};await chatHelper.createMessage(title,message,{speaker})}}async developSkill(skillId,fastForward=!1){const skill=this.items.get(skillId);if(!skill)return;let title="",message="";const upgradeRoll=new Roll("1D100");if(await upgradeRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(upgradeRoll),upgradeRoll.total>skill.value||upgradeRoll.total>=95){const augmentRoll=new Roll("1D10");await augmentRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(augmentRoll),message=game.i18n.format("CoC7.DevSuccessDetails",{item:skill.name,augment:augmentRoll.total}),title=game.i18n.format("CoC7.DevRollTitle",{item:skill.name,die:upgradeRoll.total,score:skill.value}),await skill.increaseExperience(augmentRoll.total)}else title=game.i18n.format("CoC7.DevRollTitle",{item:skill.name,die:upgradeRoll.total,score:skill.value}),message=game.i18n.format("CoC7.DevFailureDetails",{item:skill.name});const speaker={actor:this._id};await chatHelper.createMessage(title,message,{speaker}),await skill.unflagForDevelopement()}hasConditionStatus(conditionName){const conditionValue=this.data.data.conditions?.[conditionName]?.value;return"boolean"==typeof conditionValue&&conditionValue}hasConditionValue(conditionName,field){if(this.hasConditionStatus(conditionName)){if(conditionName===COC7.status.tempoInsane&&"durationText"===field){const realTime=this.hasConditionValue(conditionName,"realTime"),duration=this.hasConditionValue(conditionName,"duration");if(void 0!==duration){if(!0===realTime)return duration+" "+game.i18n.localize("CoC7.rounds");if(!1===realTime)return duration+" "+game.i18n.localize("CoC7.hours")}return""}return this.data.data.conditions?.[conditionName]?.[field]}}async toggleCondition(conditionName){this.hasConditionStatus(conditionName)?await this.unsetCondition(conditionName):await this.setCondition(conditionName)}async setCondition(conditionName,{forceValue=!1,justThis=!1,realTime=null,duration=null}={}){if(!forceValue&&game.settings.get("CoC7","enableStatusIcons")){const effects=this.effects.filter((effect=>effect.data.flags.core?.statusId===conditionName)).map((effect=>effect.id)),custom={};switch(conditionName){case COC7.status.dead:custom.flags={core:{overlay:!0}};break;case COC7.status.tempoInsane:custom.flags={CoC7:{realTime:void 0}},custom.duration={rounds:void 0,seconds:void 0},!0!==realTime&&!1!==realTime||(custom.flags.CoC7.realTime=realTime,custom.flags={CoC7:{realTime}},null!=duration&&(realTime?custom.duration.rounds=duration:custom.duration.seconds=3600*duration))}if(0===effects.length){const effect=CONFIG.statusEffects.filter((effect=>effect.id===conditionName));if(1===effect.length){const effectData=mergeObject({label:game.i18n.localize(effect[0].label),icon:effect[0].icon,flags:{core:{statusId:effect[0].id}},disabled:!1},custom);await super.createEmbeddedDocuments("ActiveEffect",[effectData])}else forceValue=!0}else custom._id=effects[0],await super.updateEmbeddedDocuments("ActiveEffect",[custom]),forceValue=!0}if(forceValue||!game.settings.get("CoC7","enableStatusIcons")){switch(conditionName){case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:await this.update({[`data.conditions.${conditionName}.value`]:!0});break;case COC7.status.tempoInsane:{const fields={};fields[`data.conditions.${conditionName}.value`]=!0,!0!==realTime&&!1!==realTime||(fields[`data.conditions.${conditionName}.realTime`]=realTime,null!=duration&&(fields[`data.conditions.${conditionName}.duration`]=duration)),Object.prototype.hasOwnProperty.call(fields,`data.conditions.${conditionName}.realTime`)||(fields[`data.conditions.${conditionName}.-=realTime`]=null),Object.prototype.hasOwnProperty.call(fields,`data.conditions.${conditionName}.duration`)||(fields[`data.conditions.${conditionName}.-=duration`]=null),await this.update(fields)}}if(!justThis)switch(conditionName){case COC7.status.criticalWounds:if(await this.setCondition(COC7.status.prone),!this.hasConditionStatus(COC7.status.unconscious)&&!this.hasConditionStatus(COC7.status.dead)){new CoC7ConCheck(this.isToken?this.tokenKey:this.id).toMessage()}break;case COC7.status.dead:await this.unsetCondition(COC7.status.criticalWounds),await this.unsetCondition(COC7.status.dying),await this.unsetCondition(COC7.status.unconscious)}}}async unsetCondition(conditionName,{forceValue=!1}={}){if(!forceValue&&game.settings.get("CoC7","enableStatusIcons")){const effects=this.effects.filter((effect=>effect.data.flags.core?.statusId===conditionName)).map((effect=>effect.id));effects.length>0?await super.deleteEmbeddedDocuments("ActiveEffect",effects):forceValue=!0}if(forceValue||!game.settings.get("CoC7","enableStatusIcons"))switch(conditionName){case COC7.status.tempoInsane:case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:await this.update({[`data.conditions.${conditionName}.value`]:!1})}}async resetCounter(counter){await this.update({[counter]:0})}async setOneFifthSanity(oneFifthSanity){await this.update({"data.attribs.san.oneFifthSanity":oneFifthSanity})}get fightingSkills(){const skillList=[];for(const value of this.items)"skill"===value.type&&value.data.data.properties.fighting&&skillList.push(value);return skillList.sort(((a,b)=>a.name.localeCompare(b.name))),skillList}get closeCombatWeapons(){const weaponList=[];for(const value of this.items)if("weapon"===value.type&&!value.data.data.properties.rngd){const skill=this.items.get(value.data.data.skill.main.id);value.data.data.skill.main.value=skill?skill.value:0,weaponList.push(value)}return weaponList.sort(((a,b)=>a.name.localeCompare(b.name))),weaponList}get firearmSkills(){const skillList=[];for(const value of this.items)"skill"===value.type&&value.data.data.properties.firearm&&skillList.push(value);return skillList.sort(((a,b)=>a.name.localeCompare(b.name))),skillList}get user(){return game.users.find((user=>!(!user.character||user.character.id!==this.id)))}get dodgeSkill(){const skillList=this.getSkillsByName(game.i18n.localize(COC7.dodgeSkillName));return 0!==skillList.length?skillList[0]:null}get creditRatingSkill(){const skillList=this.getSkillsByName(game.i18n.localize(COC7.creditRatingSkillName));return 0!==skillList.length?skillList[0]:null}get cthulhuMythosSkill(){const skillList=this.getSkillsByName(game.i18n.localize(COC7.CthulhuMythosName));return 0!==skillList.length?skillList[0]:null}get cthulhuMythos(){const CM=this.cthulhuMythosSkill;if(CM){const value=CM.value;return value||parseInt(CM.data.data.value)}return 0}get mythosHardened(){return this.getFlag("CoC7","mythosHardened")||!1}async setMythosHardened(){await this.setFlag("CoC7","mythosHardened",!0)}get mythosInsanityExperienced(){return this.getFlag("CoC7","mythosInsanityExperienced")||!1}async experienceFirstMythosInsanity(){await this.setFlag("CoC7","mythosInsanityExperienced",!0)}get creditRating(){const CR=this.creditRatingSkill;if(CR){const value=CR.value;return value||parseInt(CR.data.data.value)}return 0}get spendingLevel(){const CR=this.creditRating;return CR>=99?5e3:CR>=90?250:CR>=50?50:CR>=10?10:CR>=1?2:.5}get cash(){const CR=this.creditRating;return CR>=99?5e4:CR>=90?20*CR:CR>=50?5*CR:CR>=10?2*CR:CR>=1?CR:.5}get assets(){const CR=this.creditRating;return CR>=99?5e6:CR>=90?2e3*CR:CR>=50?500*CR:CR>=10?50*CR:CR>=1?10*CR:0}get skills(){const skillList=[];for(const value of this.items)"skill"===value.type&&skillList.push(value);return skillList.sort(((a,b)=>a.name.localeCompare(b.name))),skillList}get owners(){return game.users.filter((u=>this.testUserPermission(u,"OWNER")&&!u.isGM))}get player(){return this.owners.filter((u=>u.character?.id===this.id))}get characterUser(){return game.users.contents.filter((u=>u.character?.id===this.id))[0]||null}async setHealthStatusManually(event){if(event.preventDefault(),event.originalEvent){const healthBefore=parseInt(event.originalEvent.currentTarget.defaultValue),healthAfter=parseInt(event.originalEvent.currentTarget.value);let damageTaken;return healthAfter>healthBefore?await this.setHp(healthAfter):(damageTaken=healthAfter<0?Math.abs(healthAfter):healthBefore-healthAfter,this.render(!0),await this.dealDamage(damageTaken,{ignoreArmor:!0}))}}async dealDamage(amount,options={}){const armorData=this.data.data.attribs.armor.value,grossDamage=parseInt(amount);let armorValue=0;options.ignoreArmor||null===armorData||(CoC7Utilities.isFormula(armorData)?armorValue=(await new Roll(armorData).roll({async:!0})).total:isNaN(Number(armorData))?ui.notifications.warn(`Unable to process armor value: ${armorData}. Ignoring armor.`):armorValue=Number(armorData));const netDamage=grossDamage-armorValue;if(netDamage<=0)return 0;if(await this.setHp(this.hp-netDamage),netDamage>=this.hpMax)await this.setCondition(COC7.status.dead);else if(game.settings.get("CoC7","pulpRuleIgnoreMajorWounds")){if(0===this.hp)netDamage>=Math.ceil(this.hpMax/2)?this.setCondition(COC7.status.dying):this.setCondition(COC7.status.unconscious);else if(netDamage>=Math.ceil(this.hpMax/2)){new CoC7ConCheck(this.isToken?this.tokenKey:this.id).toMessage()}}else{let hasMajorWound=!1;netDamage>=Math.ceil(this.hpMax/2)?(await this.setCondition(COC7.status.criticalWounds),hasMajorWound=!0):hasMajorWound=this.hasConditionStatus(COC7.status.criticalWounds),0===this.hp&&(await this.setCondition(COC7.status.unconscious),hasMajorWound&&this.setCondition(COC7.status.dying))}return netDamage}get majorWound(){return this.hasConditionStatus(COC7.status.criticalWounds)}get dying(){return this.hasConditionStatus(COC7.status.dying)}get unconscious(){return this.hasConditionStatus(COC7.status.unconscious)}get dead(){return this.hasConditionStatus(COC7.status.dead)}get prone(){return this.hasConditionStatus(COC7.status.prone)}}class CoC7Link{constructor(){this._linkData={type:CoC7Link.LINK_TYPE.CHECK,check:CoC7Link.CHECK_TYPE.SKILL}}static async fromData(linkData){const label=CoC7LinkCreationDialog.attributes.concat(CoCActor.getCharacteristicDefinition()).filter((e=>e.key===linkData.name)).map((e=>e.label));label.length>0&&(linkData.label=label[0]);const link=new CoC7Link;return await link.setData(linkData),link}static get TYPE_KEYWORD(){return["check","sanloss","item"]}static get CHARAC_KEYWORD(){return["charac","char","characteristic","characteristics"]}static get ATTRIB_KEYWORD(){return["attributes","attribute","attrib","attribs"]}static get SKILL_KEYWORD(){return["skill"]}static get LINK_TYPE(){return{CHECK:1,SANLOSS:2,ITEM:3}}static get CHECK_TYPE(){return{CHARACTERISTIC:1,ATTRIBUTE:2,SKILL:3}}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get data(){const data=duplicate(this._linkData);return data.isCheck=this.is.check,data.isSanloss=this.is.sanloss,data.isItem=this.is.item,data}async fetchItem(){if(this._linkData.validItem=!1,!this._linkData.fromCompendium&&!this._linkData.fromDirectory)return this._item=void 0,!1;if(this._linkData.fromCompendium){const pack=game.packs.get(this._linkData.pack);if(!pack)return!1;if("Item"!==pack.metadata.entity)return;this._item=await pack.getDocument(this._linkData.id)}if(this._linkData.fromDirectory&&(this._item=game.items.get(this._linkData.id)),this._linkData.skillName=null,this._linkData.itemName=null,this._item){if("weapon"===this._item.data.type)return this.type=CoC7Link.LINK_TYPE.ITEM,this._linkData.itemName=this._item.data.name,this._linkData.validItem=!0,!0;if("skill"===this._item.data.type)return this.type=CoC7Link.LINK_TYPE.CHECK,this.check=CoC7Link.CHECK_TYPE.SKILL,this._linkData.skillName=this._item.data.name,this._linkData.validItem=!0,!0}return!1}async setData(x){this._linkData.fromCompendium=!1,this._linkData.fromDirectory=!1,this.hasPlayerOwner=!1,x.hasPlayerOwner&&(this.hasPlayerOwner=!0,this.actorKey=x.actorKey),x.pack&&x.id&&(this._linkData.fromCompendium=!0,this._linkData.pack=x.pack,this._linkData.id=x.id),x.id&&!x.pack&&(this._linkData.fromDirectory=!0,this._linkData.id=x.id);if(!await this.fetchItem()&&(x.check?this.type=x.check:this.type=CoC7Link.LINK_TYPE.CHECK,x.type?this.check=x.type:this.type&&(this.check=CoC7Link.CHECK_TYPE.CHARACTERISTIC),x.name))if(this._linkData.itemName=null,this._linkData.skillName=null,this._linkData.characteristicKey=null,this._linkData.attributeKey=null,this.is.check)switch(this.check){case CoC7Link.CHECK_TYPE.SKILL:this._linkData.skillName=x.name;break;case CoC7Link.CHECK_TYPE.CHARACTERISTIC:this._linkData.characteristicKey=x.name;break;case CoC7Link.CHECK_TYPE.ATTRIBUTE:this._linkData.attributeKey=x.name}else this.is.item&&(this._linkData.itemName=x.name);!x.difficulty&&isNaN(Number(x.difficulty))||(this._linkData.difficulty=Number(x.difficulty)),!x.modifier&&isNaN(Number(x.modifier))||(this._linkData.modifier=Number(x.modifier)),void 0===x.difficulty&&void 0===x.modifier||(this._linkData.forceModifiers=!0),x.forceModifiers&&(this._linkData.forceModifiers=!0),"true"!==x.displayName&&!0!==x.displayName||(this._linkData.displayName=!0),x.label&&(this._linkData.hasLabel=!0,this._linkData.label=x.label),x.icon&&(this._linkData.hasIcon=!0,this._linkData.icon=x.icon),"true"!==x.blind&&!0!==x.blind||(this._linkData.blind=!0),this._linkData.sanMin=x.sanMin,this._linkData.sanMax=x.sanMax}get type(){return this._linkData.type}get checkType(){switch(this.check){case CoC7Link.CHECK_TYPE.CHARACTERISTIC:return"characteristic";case CoC7Link.CHECK_TYPE.ATTRIBUTE:return"attribute";case CoC7Link.CHECK_TYPE.SKILL:return"skill";default:return}}set type(x){if(isNaN(Number(x)))switch(x.toLowerCase()){case"check":this._linkData.type=CoC7Link.LINK_TYPE.CHECK;break;case"sanloss":this._linkData.type=CoC7Link.LINK_TYPE.SANLOSS;break;case"item":this._linkData.type=CoC7Link.LINK_TYPE.ITEM;break;default:this._linkData.type=void 0}else this._linkData.type=x}get check(){return isNaN(Number(this._linkData.check))?void 0:Number(this._linkData.check)}set check(x){isNaN(Number(x))?(this._linkData.check=void 0,CoC7Link.CHARAC_KEYWORD.includes(x)&&(this.type=CoC7Link.LINK_TYPE.CHECK,this._linkData.check=CoC7Link.CHECK_TYPE.CHARACTERISTIC),CoC7Link.ATTRIB_KEYWORD.includes(x)&&(this.type=CoC7Link.LINK_TYPE.CHECK,this._linkData.check=CoC7Link.CHECK_TYPE.ATTRIBUTE),CoC7Link.SKILL_KEYWORD.includes(x)&&(this.type=CoC7Link.LINK_TYPE.CHECK,this._linkData.check=CoC7Link.CHECK_TYPE.SKILL)):this._linkData.check=Number(x)}get name(){if(this.is.check)switch(this.check){case CoC7Link.CHECK_TYPE.CHARACTERISTIC:return this._linkData.characteristicKey;case CoC7Link.CHECK_TYPE.ATTRIBUTE:return this._linkData.attributeKey;case CoC7Link.CHECK_TYPE.SKILL:return this._linkData.skillName;default:return}else if(this.is.item)return this._linkData.itemName}set name(x){if(this.is.check)switch(this.check){case CoC7Link.CHECK_TYPE.CHARACTERISTIC:this._linkData.characteristicKey=x;break;case CoC7Link.CHECK_TYPE.ATTRIBUTE:this._linkData.attributeKey=x;break;case CoC7Link.CHECK_TYPE.SKILL:this._linkData.skillName=x}else this.is.item&&(this._linkData.itemName=x)}get is(){const link=this;return{get check(){return link.type===CoC7Link.LINK_TYPE.CHECK},set check(x){!0===x&&(link.type=CoC7Link.LINK_TYPE.CHECK)},get sanloss(){return link.type===CoC7Link.LINK_TYPE.SANLOSS},set sanloss(x){!0===x&&(link.type=CoC7Link.LINK_TYPE.SANLOSS)},get item(){return link.type===CoC7Link.LINK_TYPE.ITEM},set item(x){!0===x&&(link.type=CoC7Link.LINK_TYPE.ITEM)}}}async update(updateData){this._linkData=mergeObject(this._linkData,updateData),(this._linkData.fromDirectory||this._linkData.fromCompendium)&&await this.fetchItem()}async updateFromLink(linkData){await this.setData(linkData),(this._linkData.fromDirectory||this._linkData.fromCompendium)&&await this.fetchItem()}get link(){if(!this.type)return null;switch(this.type){case CoC7Link.LINK_TYPE.CHECK:{if(!this.type||!this.name)return null;let options=`${this._linkData.blind?"blind,":""}type:${this.checkType},name:${this.name}`;void 0!==this._linkData.difficulty&&(options+=`,difficulty:${this._linkData.difficulty}`),void 0!==this._linkData.modifier&&(options+=`,modifier:${this._linkData.modifier}`),this._linkData.icon&&(options+=`,icon:${this._linkData.icon}`),this._linkData.fromCompendium&&(options+=`,pack:${this._linkData.pack}`),(this._linkData.fromCompendium||this._linkData.fromDirectory)&&(options+=`,id:${this._linkData.id}`);let link=`@coc7.check[${options}]`;return this._linkData.hasLabel&&this._linkData.label?link+=`{${this._linkData.label}}`:this.name&&(link+=`{${this.name}}`),link}case CoC7Link.LINK_TYPE.SANLOSS:{if(!this._linkData.sanMax||!this._linkData.sanMin)return null;let options=`sanMax:${this._linkData.sanMax},sanMin:${this._linkData.sanMin}`;this._linkData.difficulty&&(options+=`,difficulty:${this._linkData.difficulty}`),this._linkData.sanReason&&(options+=`,sanReason:${this._linkData.sanReason}`),this._linkData.modifier&&(options+=`,modifier:${this._linkData.modifier}`),this._linkData.icon&&(options+=`,icon:${this._linkData.icon}`);let link=`@coc7.sanloss[${options}]`;return this._linkData.hasLabel&&(link+=`{${this._linkData.label}}`),link}case CoC7Link.LINK_TYPE.ITEM:{if(!this.type||!this.name)return null;let options=`name:${this.name}`;this._linkData.icon&&(options+=`,icon:${this._linkData.icon}`),this._linkData.fromCompendium&&(options+=`,pack:${this._linkData.pack}`),(this._linkData.fromCompendium||this._linkData.fromDirectory)&&(options+=`,id:${this._linkData.id}`);let link=`@coc7.item[${options}]`;return this._linkData.hasLabel&&(link+=`{${this._linkData.label}}`),link}default:return null}}}class CoC7LinkCreationDialog extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{id:"link-creation",classes:["coc7"],title:game.i18n.localize("CoC7.CreateLink"),dragDrop:[{dragSelector:null,dropSelector:".container"}],template:"systems/CoC7/templates/apps/link-creation.html",closeOnSubmit:!1,submitOnClose:!0,submitOnChange:!0,width:400,height:"auto",choices:{},allowCustom:!0,minimum:0,maximum:null})}static async fromLinkData(linkData,options={}){const link=await CoC7Link.fromData(linkData);return new CoC7LinkCreationDialog(link,options)}static get attributes(){return[{key:"lck",label:game.i18n.localize("CoC7.Luck"),selected:!1},{key:"san",label:game.i18n.localize("CoC7.Sanity"),selected:!1}]}async getData(){const data=await super.getData();data.link=this.link,data.data=this.link.data,data.fromGame=this.link.is.item||this.link.is.check&&this.link.check===CoC7Link.CHECK_TYPE.SKILL,data.askId=data.fromGame&&(this.link.data.fromDirectory||this.link.data.fromCompendium),data.askPack=data.fromGame&&this.link.data.fromCompendium,data.isSetFromGame=data.askId||data.askPack,data.difficultyLevel=CoC7Check.difficultyLevel,data.selectedDifficulty={unknown:CoC7Check.difficultyLevel.unknown===this.link.data.difficulty,regular:CoC7Check.difficultyLevel.regular===this.link.data.difficulty,hard:CoC7Check.difficultyLevel.hard===this.link.data.difficulty,extreme:CoC7Check.difficultyLevel.extreme===this.link.data.difficulty,critical:CoC7Check.difficultyLevel.critical===this.link.data.difficulty},this.link.data.difficulty||("unknown"===game.settings.get("CoC7","defaultCheckDifficulty")?data.selectedDifficulty.unknown=!0:data.selectedDifficulty.regular=!0),data.linkType=[{key:CoC7Link.LINK_TYPE.CHECK,label:game.i18n.localize("CoC7.Check"),selected:this.link.is.check},{key:CoC7Link.LINK_TYPE.SANLOSS,label:game.i18n.localize("CoC7.SanityCheck"),selected:this.link.is.sanloss},{key:CoC7Link.LINK_TYPE.ITEM,label:game.i18n.localize("CoC7.ItemWeapon"),selected:this.link.is.item}],data.checkType=CoC7Link.CHECK_TYPE,data.selectedCheckType={characteristic:CoC7Link.CHECK_TYPE.CHARACTERISTIC===this.link.check,attribute:CoC7Link.CHECK_TYPE.ATTRIBUTE===this.link.check,skill:CoC7Link.CHECK_TYPE.SKILL===this.link.check},this.link.check||(data.selectedCheckType.characteristic=!0),data.characteristics=CoCActor.getCharacteristicDefinition();for(let i=0;i<data.characteristics.length;i++)data.data.characteristicKey===data.characteristics[i].key||data.data.characteristicKey===data.characteristics[i].shortName||data.data.characteristicKey===data.characteristics[i].label?data.characteristics[i].selected=!0:data.characteristics[i].selected=!1;return data.attributes=CoC7LinkCreationDialog.attributes.map((e=>(e.selected=data.data.attributeKey===e.key,e))),data}get link(){return this.object}activateListeners(html){html.find(".submit-button").click(this._onClickSubmit.bind(this)),super.activateListeners(html)}async _onDrop(event){const dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);if("link"===data.CoC7Type)await this.link.updateFromLink(data),this.render(!0);else{if(data.actorId){const actorKey=data.sceneId&&data.tokenId?`${data.sceneId}.${data.tokenId}`:data.actorId,actor=chatHelper.getActorFromKey(actorKey);actor.hasPlayerOwner?(this.link.hasPlayerOwner=!0,this.link.actorKey=actor.actorKey):this.link.hasPlayerOwner=!1}if("Item"===data.type)if(data.data)switch(data.data.type){case"skill":this.link._linkData.fromDirectory=!1,this.link._linkData.fromCompendium=!1,this.link.type=CoC7Link.LINK_TYPE.CHECK,this.link.check=CoC7Link.CHECK_TYPE.SKILL,this.link.name=data.data.name,this.render(!0);break;case"weapon":this.link._linkData.fromDirectory=!1,this.link._linkData.fromCompendium=!1,this.link.type=CoC7Link.LINK_TYPE.ITEM,this.link.name=data.data.name,this.render(!0)}else data.id&&(this.link._linkData.id=data.id,this.link._linkData.fromDirectory=!0),data.pack&&(this.link._linkData.pack=data.pack,this.link._linkData.fromDirectory=!1,this.link._linkData.fromCompendium=!0),await this.link.fetchItem(),this.render(!0)}}_onClickSubmit(event){const action=event.currentTarget.dataset.action;if(this.link.link){switch(action){case"clipboard":CoC7Utilities.copyToClipboard(this.link.link);break;case"chat":{const option={};option.speaker={alias:game.user.name},chatHelper.createMessage(null,game.i18n.format("CoC7.MessageCheckRequestedWait",{check:this.link.link}),option)}break;case"whisper-owner":{const option={};option.speaker={alias:game.user.name},option.whisper=this.link.actor.owners,chatHelper.createMessage(null,game.i18n.format("CoC7.MessageTargetCheckRequested",{name:this.link.actor.name,check:this.link.link}),option)}break;case"whisper-selected":{if(!canvas.tokens.controlled.length)return void ui.notifications.warn("No tokens selected");const option={};option.speaker={alias:game.user.name};for(const t of canvas.tokens.controlled)t.actor.hasPlayerOwner&&(option.whisper=t.actor.owners,chatHelper.createMessage(null,game.i18n.format("CoC7.MessageTargetCheckRequested",{name:t.actor.name,check:this.link.link}),option))}}this.close()}}async _updateObject(event,formData){const target=event.currentTarget,group=target?.closest(".form-group"),groupName=group?.dataset.group;if("origin"===groupName)"fromCompendium"===target.name&&(this.link._linkData.fromCompendium=!this.link._linkData.fromCompendium,this.link._linkData.fromCompendium&&(this.link._linkData.fromDirectory=!1)),"fromDirectory"===target.name&&(this.link._linkData.fromDirectory=!this.link._linkData.fromDirectory,this.link._linkData.fromDirectory&&(this.link._linkData.fromCompendium=!1)),await this.link.fetchItem();else{const formDataEx=expandObject(formData);formDataEx.check&&(formDataEx.check=Number(formDataEx.check)),formDataEx.difficulty&&(formDataEx.difficulty=Number(formDataEx.difficulty)),formDataEx.type&&(formDataEx.type=Number(formDataEx.type));const diffData=diffObject(this.link.data,formDataEx);await this.link.update(diffData)}this.render(!0)}static async create(){const link=new CoC7Link;new CoC7LinkCreationDialog(link,{}).render(!0)}}class CoC7Parser{static async onEditorDrop(event,editor){event.preventDefault();const dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);if("coc7-link"===data.linkType){if(event.stopPropagation(),!event.shiftKey&&(void 0===data.difficulty||void 0===data.modifier)){const usage=await RollDialog.create({disableFlatDiceModifier:!0});usage&&(data.modifier=usage.get("bonusDice"),data.difficulty=usage.get("difficulty"))}"blindroll"===game.settings.get("core","rollMode")&&(data.blind=!0);const link=CoC7Parser.createCoC7Link(data);link&&editor.insertContent(link)}else if(isCtrlKey(event)){if(event.stopPropagation(),"Item"!==data.type)return;let item;const linkData={};if(data.pack){const pack=game.packs.get(data.pack);if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(data.id)}else item=data.data?data.data:game.items.get(data.id);if(!item)return;if(linkData.name=item.name,data.pack&&(linkData.pack=data.pack),data.id&&(linkData.id=data.id),"skill"===item.type){if(!event.shiftKey){const usage=await RollDialog.create({disableFlatDiceModifier:!0});usage&&(linkData.modifier=usage.get("bonusDice"),linkData.difficulty=usage.get("difficulty"))}linkData.check="check",linkData.type="skill","blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0)}else{if("weapon"!==item.type)return;linkData.check="item",linkData.type="weapon"}const link=CoC7Parser.createCoC7Link(linkData);link&&editor.insertContent(link)}}static ParseMessage(message,html,data){if(message.isContentVisible){if(data.message.content.toLocaleLowerCase().includes("@coc7")){const parsedContent=CoC7Parser.enrichHTML(data.message.content);html.find(".message-content").html(parsedContent),data.message.content=parsedContent}return!0}}static createCoC7Link(data){if(data.check)switch(data.check.toLowerCase()){case"check":{if(!data.type||!data.name)return;let options=`${data.blind?"blind,":""}type:${data.type},name:${data.name}`;void 0!==data.difficulty&&(options+=`,difficulty:${data.difficulty}`),void 0!==data.modifier&&(options+=`,modifier:${data.modifier}`),data.icon&&(options+=`,icon:${data.icon}`),data.pack&&(options+=`,pack:${data.pack}`),data.id&&(options+=`,id:${data.id}`);let link=`@coc7.check[${options}]`;return data.displayName&&(link+=`{${data.displayName}}`),link}case"sanloss":{if(!data.sanMax||!data.sanMin)return;let options=`${data.blind?"blind,":""}sanMax:${data.sanMax},sanMin:${data.sanMin}`;data.difficulty&&(options+=`,difficulty:${data.difficulty}`),data.modifier&&(options+=`,modifier:${data.modifier}`),data.icon&&(options+=`,icon:${data.icon}`);let link=`@coc7.sanloss[${options}]`;return data.displayName&&(link+=`{${data.displayName}}`),link}case"item":{if(!data.type||!data.name)return;let options=`${data.blind?"blind,":""}type:${data.type},name:${data.name}`;data.icon&&(options+=`,icon:${data.icon}`),data.pack&&(options+=`,pack:${data.pack}`),data.id&&(options+=`,id:${data.id}`);let link=`@coc7.item[${options}]`;return data.displayName&&(link+=`{${data.displayName}}`),link}}}static ParseSheetContent(app,html){for(const element of html.find("div.editor-content > *, p"))element.outerHTML.toLocaleLowerCase().includes("@coc7")&&(element.outerHTML=CoC7Parser.enrichHTML(element.outerHTML));html.find("a.coc7-link").on("click",(async event=>await CoC7Parser._onCheck(event))),html.find("a.coc7-link").on("dragstart",(event=>CoC7Parser._onDragCoC7Link(event)))}static _getTextNodes(parent){const text=[],walk=document.createTreeWalker(parent,NodeFilter.SHOW_TEXT,null,!1);for(;walk.nextNode();)text.push(walk.currentNode);return text}static enrichHTML(content){const html=document.createElement("div");html.innerHTML=String(content);let text=[];text=TextEditor._getTextNodes(html);const rgx=new RegExp("@(coc7).(.*?)\\[([^\\]]+)\\](?:{([^}]+)})?","gi");return TextEditor._replaceTextContent(text,rgx,CoC7Parser._createLink),html.innerHTML}static bindEventsHandler(html){html.find("a.coc7-link").on("click",(async event=>await CoC7Parser._onCheck(event))),html.find("a.coc7-link").on("dragstart",(event=>CoC7Parser._onDragCoC7Link(event)))}static _onDragCoC7Link(event){const a=event.currentTarget,i=a.querySelector("i.link-icon"),data=duplicate(a.dataset);data.linkType="coc7-link",data.CoC7Type="link",data.icon=null,i.dataset&&i.dataset.linkIcon&&"fas fa-dice"!==i.dataset.linkIcon&&(data.icon=i.dataset.linkIcon),data.displayName=a.dataset.displayName?a.innerText:null,event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}static _createLink(match,tag,type,options,name){const data={cls:["coc7-link"],dataset:{check:type},icon:"fas fa-dice",blind:!1,name},matches=options.matchAll(/[^,]+/gi);for(const match of Array.from(matches)){let[key,value]=match[0].split(":");"icon"===key&&(data.icon=value),"blind"===key&&void 0===value&&(value=!0,data.blind=["check"].includes(type.toLowerCase())),data.dataset[key]=value}let title;const difficulty=CoC7Check.difficultyString(data.dataset.difficulty);switch(type.toLowerCase()){case"check":{let humanName=data.dataset.name;["attributes","attribute","attrib","attribs"].includes(data.dataset.type?.toLowerCase())&&("lck"===data.dataset.name&&(humanName=game.i18n.localize("CoC7.Luck")),"san"===data.dataset.name&&(humanName=game.i18n.localize("CoC7.Sanity"))),["charac","char","characteristic","characteristics"].includes(data.dataset.type?.toLowerCase())&&(humanName=CoC7Utilities.getCharacteristicNames(data.dataset.name)?.label),title=game.i18n.format(`CoC7.LinkCheck${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,name:humanName});break}case"sanloss":title=game.i18n.format(`CoC7.LinkSanLoss${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,sanMin:data.dataset.sanMin,sanMax:data.dataset.sanMax});break;case"item":title=game.i18n.format(`CoC7.LinkItem${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,name:data.dataset.name})}name?data.dataset.displayName=!0:data.name=title;const a=document.createElement("a");a.title=game.user.isGM?data.name:title,a.classList.add(...data.cls);for(const[k,v]of Object.entries(data.dataset))a.dataset[k]=v;return a.draggable=!0,a.innerHTML=`${data.blind?'<i class="fas fa-eye-slash"></i>':""}<i data-link-icon="${data.icon}" class="link-icon ${data.icon}"></i>${data.name}`,a}static async _onCheck(event){const options=event.currentTarget.dataset;if(options.difficulty&&(options.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),game.user.isGM){if(isCtrlKey(event)){options.displayName&&(options.label=event.currentTarget.innerText);const link=await CoC7Link.fromData(options);return void new CoC7LinkCreationDialog(link).render(!0)}if(canvas.tokens.controlled.length)for(const token of canvas.tokens.controlled)switch(options.check){case"check":if(["charac","char","characteristic","characteristics"].includes(options.type.toLowerCase()))return token.actor.characteristicCheck(options.name,event.shiftKey,options);if(["skill"].includes(options.type.toLowerCase()))return token.actor.skillCheck(options,event.shiftKey,options);if(["attributes","attribute","attrib","attribs"].includes(options.type.toLowerCase()))return token.actor.attributeCheck(options.name,event.shiftKey,options);break;case"sanloss":SanCheckCard.create(token.actor.actorKey,options,{fastForward:event.shiftKey});break;case"item":return token.actor.weaponCheck(options,event.shiftKey)}else if(game.user.data.document.character?.data)await Promise.all(game.user.data.document.character.data.items.map((async v=>{if(v.name===options.name){const check=new CoC7Check;check._rawValue=v.data.data.base,await check.roll(),check.toMessage()}return!1})));else if(game.user.isGM){const option={speaker:{alias:game.user.name}};chatHelper.createMessage(null,game.i18n.format("CoC7.MessageCheckRequestedWait",{check:(await CoC7Link.fromData(options)).link}),option)}}else{const speaker=ChatMessage.getSpeaker(),actor=ChatMessage.getSpeakerActor(speaker);if(actor)switch(options.check){case"check":if(["charac","char","characteristic","characteristics"].includes(options.type.toLowerCase()))return actor.characteristicCheck(options.name,event.shiftKey,options);if(["skill"].includes(options.type.toLowerCase()))return actor.skillCheck(options,event.shiftKey,options);if(["attributes","attribute","attrib","attribs"].includes(options.type.toLowerCase()))return actor.attributeCheck(options.name,event.shiftKey,options);break;case"sanloss":SanCheckCard.create(actor.id,options,{fastForward:event.shiftKey});break;case"item":return actor.weaponCheck(options,event.shiftKey)}else game.user.data.document.character?.data?await Promise.all(game.user.data.document.character.data.items.map((async v=>{if(v.name===options.name){const check=new CoC7Check;check._rawValue=v.data.data.base,await check.roll(),check.toMessage()}return!1}))):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoControlledActor"))}}}class CoC7Item extends Item{constructor(data,context){if(data.type in CONFIG.Item.documentClasses&&!context?.extended)return new CONFIG.Item.documentClasses[data.type](data,{extended:!0,...context});void 0===data.img&&("chase"===data.type?data.img="systems/CoC7/assets/icons/running-solid.svg":"skill"===data.type?data.img="systems/CoC7/assets/icons/skills.svg":"status"===data.type?data.img="icons/svg/aura.svg":"weapon"===data.type&&(data.img="icons/svg/sword.svg")),super(data,context)}static get iconLanguage(){return"systems/CoC7/assets/icons/skills/language.svg"}static get flags(){return{malfunction:"malfc"}}async toggleProperty(propertyId,override=!1){let fighting,firearms,checkedProps={};if(void 0!==COC7.eras[propertyId])checkedProps={["data.eras."+propertyId]:!this.data.data.eras[propertyId]};else if("weapon"!==this.type||override){if("skill"===this.type&&!override){let modif=!1;if("combat"===propertyId&&(this.data.data.properties.combat?checkedProps={"data.properties.combat":!1,"data.properties.special":!1,"data.properties.fighting":!1,"data.properties.firearm":!1,"data.specialization":"",name:this.data.data.skillName}:this.data.data.properties.firearm?firearms=!0:fighting=!0,modif=!0),"fighting"===propertyId&&(this.data.data.properties.fighting?(firearms=!0,fighting=!1):(firearms=!1,fighting=!0),modif=!0),"firearm"===propertyId&&(this.data.data.properties.firearm?(firearms=!1,fighting=!0):(firearms=!0,fighting=!1),modif=!0),modif){if(fighting){checkedProps={"data.properties.fighting":!0,"data.properties.firearm":!1,"data.properties.combat":!0,"data.properties.special":!0};const parts=CoC7Item.getNamePartsSpec(this.data.data.skillName,game.i18n.localize(COC7.fightingSpecializationName));checkedProps.name=parts.name,checkedProps.skillName=parts.skillName,checkedProps["data.specialization"]=parts.specialization}if(firearms){checkedProps={"data.properties.fighting":!1,"data.properties.firearm":!0,"data.properties.combat":!0,"data.properties.special":!0};const parts=CoC7Item.getNamePartsSpec(this.data.data.skillName,game.i18n.localize(COC7.firearmSpecializationName));checkedProps.name=parts.name,checkedProps.skillName=parts.skillName,checkedProps["data.specialization"]=parts.specialization}}}}else if("ahdb"===propertyId&&(checkedProps=this.data.data.properties.ahdb?{"data.properties.ahdb":!1}:{"data.properties.ahdb":!0,"data.properties.addb":!1}),"addb"===propertyId&&(checkedProps=this.data.data.properties.addb?{"data.properties.addb":!1}:{"data.properties.addb":!0,"data.properties.ahdb":!1}),"shotgun"===propertyId&&(checkedProps=this.data.data.properties.shotgun?{"data.properties.shotgun":!1,"data.range.extreme.value":null,"data.range.extreme.damage":null,"data.range.long.value":null,"data.range.long.damage":null}:{"data.properties.rngd":!0,"data.properties.melee":!1,"data.properties.shotgun":!0}),"melee"===propertyId||"rngd"===propertyId){let meleeWeapon;"melee"!==propertyId||this.data.data.properties.melee||(meleeWeapon=!0),"melee"===propertyId&&this.data.data.properties.melee&&(meleeWeapon=!1),"rngd"!==propertyId||this.data.data.properties.rngd||(meleeWeapon=!1),"rngd"===propertyId&&this.data.data.properties.rngd&&(meleeWeapon=!0),checkedProps=meleeWeapon?{"data.properties.melee":!0,"data.properties.rngd":!1,"data.properties.shotgun":!1,"data.properties.brst":!1,"data.properties.auto":!1,"data.properties.dbrl":!1}:{"data.properties.melee":!1,"data.properties.rngd":!0}}if("special"===propertyId&&(checkedProps=this.data.data.properties[propertyId]?{"data.properties.special":!1,"data.properties.fighting":!1,"data.properties.firearm":!1,"data.properties.combat":!1,"data.specialization":"",name:this.data.data.skillName}:{"data.properties.special":!0,name:this.data.data.specialization+" ("+this.data.data.skillName+")"}),Object.keys(checkedProps).length>0){return await this.update(checkedProps)}{const propName=`data.properties.${propertyId}`,propValue=!this.data.data.properties[propertyId];await this.update({[propName]:propValue}).then((item=>item))}}hasProperty(propertyId){return this.isIncludedInSet("properties",propertyId)}get shortName(){return this.data.data.properties.special?this.data.data.skillName:this.name}async updateRoll(roll){return"updateRoll"in this.sheet?await this.sheet.updateRoll(roll):"updateRoll"in this?await this.updateRoll(roll):void 0}static getNamePartsSpec(skillName,specialization){if(!specialization)return{name:skillName,specialization:"",skillName};const specNameRegex=new RegExp("^("+CoC7Utilities.quoteRegExp(specialization)+")\\s*\\((.+)\\)$","i"),match=skillName.match(specNameRegex);return match?{name:match[0],specialization:match[1],skillName:match[2]}:{name:specialization+" ("+skillName+")",specialization,skillName}}static getNameWithoutSpec(item){if(item instanceof CoC7Item){if(item.data.data?.properties?.special)return item.data.data.skillName}else if(item.data.properties?.special)return item.data.skillName;return item.name}static isAnySpec(item){return item instanceof CoC7Item?!("skill"!==item.type||!item.data.data.properties?.special)&&[game.i18n.localize("CoC7.AnySpecName").toLowerCase(),"any"].includes(CoC7Item.getNameWithoutSpec(item).toLowerCase()):!("skill"!==item.type||!item.data.properties?.special)&&[game.i18n.localize("CoC7.AnySpecName").toLowerCase(),"any"].includes(CoC7Item.getNameWithoutSpec(item).toLowerCase())}async checkSkillProperties(){if("skill"!==this.type)return;const checkedProps={};return this.data.data.properties.combat?(this.data.data.properties.special||(this.data.data.properties.special=!0,checkedProps["data.properties.special"]=!0),this.data.data.properties.fighting||this.data.data.properties.firearm||(this.data.data.properties.fighting=!0,checkedProps["data.properties.fighting"]=!0),!this.data.data.properties.fighting||this.data.data.specialization&&""!==this.data.data.specialization||(this.data.data.specialization=game.i18n.localize(COC7.fightingSpecializationName),checkedProps["data.specialization"]=game.i18n.localize(COC7.fightingSpecializationName)),!this.data.data.properties.firearm||this.data.data.specialization&&""!==this.data.data.specialization||(this.data.data.specialization=game.i18n.localize(COC7.firearmSpecializationName),checkedProps["data.specialization"]=game.i18n.localize(COC7.firearmSpecializationName))):(this.data.data.properties.fighting&&(this.data.data.properties.fighting=!1,checkedProps["data.properties.fighting"]=!1),this.data.data.properties.firearm&&(this.data.data.properties.firearm=!1,checkedProps["data.properties.firearm"]=!1)),Object.keys(checkedProps).length>0&&await this.update(checkedProps),checkedProps}isIncludedInSet(set,propertyId){this.data.data[set]||(this.data.data[set]=[]);return this.data.data[set].indexOf(propertyId)>-1}async flagForDevelopement(){(game.settings.get("CoC7","xpEnabled")||game.user.isGM)&&(this.data.data.flags||await this.update({"data.flags":{}}),await this.update({"data.flags.developement":!0}))}async unflagForDevelopement(){(game.settings.get("CoC7","xpEnabled")||game.user.isGM)&&(this.data.data.flags||await this.update({"data.flags":{}}),await this.update({"data.flags.developement":!1}))}get developementFlag(){return this.getItemFlag("developement")}async toggleItemFlag(flagName,eraseAdjustment=!0){const flagValue=!this.getItemFlag(flagName),name=`data.flags.${flagName}`;"occupation"!==flagName&&"archetype"!==flagName||flagValue||!eraseAdjustment?"developement"===flagName?game.settings.get("CoC7","xpEnabled")||game.user.isGM?await this.update({[name]:flagValue}):ui.notifications.info("XP Gain disabled."):await this.update({[name]:flagValue}):await this.update({[`data.adjustments.${flagName}`]:null,[name]:flagValue})}async setItemFlag(flagName){await this.update({[`data.flags.${flagName}`]:!0})}async unsetItemFlag(flagName,eraseAdjustment=!0){const name=`data.flags.${flagName}`;"occupation"!==flagName&&"archetype"!==flagName||!eraseAdjustment?await this.update({[name]:!1}):await this.update({[`data.adjustments.${flagName}`]:null,[name]:!1})}getItemFlag(flagName){return this.data.data.flags?!!this.data.data.flags[flagName]&&this.data.data.flags[flagName]:(this.data.data.flags={},this.data.data.flags.locked=!0,this.update({"data.flags":{}}),!1)}get usesAlternativeSkill(){return"weapon"===this.type&&(!0===this.data.data.properties?.auto||!0===this.data.data.properties?.brst||!0===this.data.data.properties?.thrown)}get maxUsesPerRound(){if("weapon"!==this.type)return null;const multiShot=parseInt(this.data.data.usesPerRound.max);return isNaN(multiShot)?0:multiShot}get usesPerRound(){if("weapon"!==this.type)return null;const singleShot=parseInt(this.data.data.usesPerRound.normal);return isNaN(singleShot)?0:singleShot}get usesPerRoundString(){let usesPerRound;return usesPerRound=this.data.data.usesPerRound.normal?this.data.data.usesPerRound.normal:"1",this.data.data.usesPerRound.max&&(usesPerRound+=`(${this.data.data.usesPerRound.max})`),this.data.data.properties.auto&&(usesPerRound+=` ${game.i18n.localize("CoC7.WeaponAuto")}`),this.data.data.properties.brst&&(usesPerRound+=` ${game.i18n.localize("CoC7.WeaponBrst")}`,this.data.data.usesPerRound.burst&&(usesPerRound+=`(${this.data.data.usesPerRound.burst})`)),usesPerRound}get multipleShots(){return"weapon"!==this.type?null:!(this.maxUsesPerRound<=1)}get singleShot(){return"weapon"!==this.type?null:!!this.usesPerRound}get baseRange(){return parseInt(this.data.data.range.normal.value)}get longRange(){return parseInt(this.data.data.range.long.value)}get extremeRange(){return parseInt(this.data.data.range.extreme.value)}get skillProperties(){if("skill"!==this.type)return[];const skillProperties=[];for(const[key,value]of Object.entries(COC7.skillProperties))!0===this.data.data.properties[key]&&skillProperties.push(game.i18n.localize(value));return skillProperties}static async calculateBase(actor,data){if("skill"!==data.type)return null;if(String(data.data.base).includes("@")){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.actor.")&&(parsed[key.substring(1)]=getProperty(actor,value.substring(11)));let value;try{value=Math.floor(new Roll(data.data.base,parsed).evaluate({maximize:!0}).total)}catch(err){value=0}return value}return isNaN(parseInt(data.data.base))?null:parseInt(data.data.base)}get _base(){if("skill"!==this.type)return[null,!1];if("string"!=typeof this.data.data.base)return[this.data.data.base,!1];if(this.data.data.base.includes("@")){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=getProperty(this,value.substring(5)));let value;try{value=Math.floor(new Roll(this.data.data.base,parsed).evaluate({maximize:!0}).total)}catch(err){value=0}return[value,!0]}return[isNaN(parseInt(this.data.data.base))?null:parseInt(this.data.data.base),!1]}async asyncBase(){const e=this._base;return e[1]&&await this.update({"data.base":e[0]}),e[0]}get base(){const e=this._base;return e[1]&&this.update({"data.base":e[0]}),e[0]}get value(){if("skill"!==this.type)return null;let value=0;return"character"===this.actor.data.type?(value=this.base,value+=this.data.data.adjustments?.personal?parseInt(this.data.data.adjustments?.personal):0,value+=this.data.data.adjustments?.occupation?parseInt(this.data.data.adjustments?.occupation):0,value+=this.data.data.adjustments?.experience?parseInt(this.data.data.adjustments?.experience):0,game.settings.get("CoC7","pulpRuleArchetype")&&this.data.data.adjustments?.archetype&&(value+=parseInt(this.data.data.adjustments?.archetype))):value=parseInt(this.data.data.value),isNaN(value)?null:value}async updateValue(value){if("skill"!==this.type)return null;if("character"===this.actor.data.type){const delta=parseInt(value)-this.value,exp=(this.data.data.adjustments?.experience?parseInt(this.data.data.adjustments.experience):0)+delta;await this.update({"data.adjustments.experience":exp>0?exp:0})}else await this.update({"data.value":value})}async increaseExperience(x){if("skill"!==this.type)return null;if("character"===this.actor.data.type){const exp=(this.data.data.adjustments?.experience?parseInt(this.data.data.adjustments.experience):0)+parseInt(x);await this.update({"data.adjustments.experience":exp>0?exp:0})}}getBulletLeft(){return"weapon"!==this.type?null:this.data.data.ammo?this.data.data.ammo:(this.setBullets(0),0)}async reload(){if("weapon"!==this.type)return null;const maxBullet=this.data.data.bullets?parseInt(this.data.data.bullets):1;await this.setBullets(maxBullet)}async setBullets(bullets){if("weapon"!==this.type)return null;await this.update({"data.ammo":bullets||0})}async addBullet(){if("weapon"!==this.type)return null;const bullets=await this.getBulletLeft(),maxBullets=this.data.data.bullets?parseInt(this.data.data.bullets):1;bullets+1>=maxBullets?await this.setBullets(maxBullets):await this.setBullets(bullets+1)}async shootBullets(x){if("weapon"!==this.type)return null;const bullets=await this.getBulletLeft();x>bullets?await this.setBullets(0):await this.setBullets(bullets-x)}static mergeOptionalSkills(skillList,options){return skillList.concat(options).reduce(((newArray,item)=>!CoC7Item.isAnySpec(item)&&newArray.find((skill=>skill.name===item.name))?newArray:[...newArray,item]),[]).sort(((a,b)=>a.name.toLocaleLowerCase().localeCompare(b.name.toLocaleLowerCase())))}static _getChatCardActor(card){const tokenKey=card.dataset.tokenId;if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;return new Token(tokenData).actor}}const actorId=card.dataset.actorId;return game.actors.get(actorId)||null}getChatData(htmlOptions={}){const data=duplicate(this.data.data);"string"==typeof data.description&&(data.description={value:data.description,special:""}),void 0===data.description.value&&(data.description.value=""),void 0===data.description.special&&(data.description.special="");const labels=[];data.description.value=TextEditor.enrichHTML(data.description.value,htmlOptions),data.description.value=CoC7Parser.enrichHTML(data.description.value),data.description.special=TextEditor.enrichHTML(data.description.special,htmlOptions),data.description.special=CoC7Parser.enrichHTML(data.description.special);const props=[],fn=this[`_${this.data.type}ChatData`];if(fn&&fn.bind(this)(data,labels,props,htmlOptions),"skill"===this.type)for(const[key,value]of Object.entries(COC7.skillProperties))!0===this.data.data.properties[key]&&props.push(value);return data.properties=props.filter((p=>!!p)),data.labels=labels,data}_weaponChatData(data,labels,props){for(const[key,value]of Object.entries(COC7.weaponProperties))!0===this.data.data.properties[key]&&props.push(value);let skillLabel=game.i18n.localize("CoC7.Skill"),skillName="",found=!1;if(this.data.data.skill.main.id){const skill=this.actor?.items.get(this.data.data.skill.main.id);skill&&(skillName+=CoC7Item.getNameWithoutSpec(skill),found=!0)}if(this.usesAlternativeSkill&&this.data.data.skill.alternativ.id){skillLabel=game.i18n.localize("CoC7.Skills");const skill=this.actor?.items.get(this.data.data.skill.alternativ.id);skill&&(skillName+=`/${CoC7Item.getNameWithoutSpec(skill)}`,found=!0)}found||(skillName=this.data.data.skill.main.name,this.usesAlternativeSkill&&this.data.data.skill.alternativ.name&&(skillName+=`/${this.data.data.skill.alternativ.name}`)),skillName&&labels.push({name:skillLabel,value:skillName}),labels.push({name:game.i18n.localize("CoC7.WeaponUsesPerRound"),value:this.usesPerRoundString}),labels.push({name:game.i18n.localize("CoC7.WeaponMalfunction"),value:this.data.data.malfunction?this.data.data.malfunction:"-"}),this.data.data.bullets&&labels.push({name:game.i18n.localize("CoC7.WeaponBulletsInMag"),value:this.data.data.bullets})}canBePushed(){return!("skill"!==this.type||!this.data.data.properties.push)}get impale(){return this.data.data.properties.impl}get isDodge(){return"skill"===this.type&&this.name.toLowerCase()===game.i18n.localize("CoC7.DodgeSkillName").toLowerCase()}}class CoC7Check{constructor(actor=null,skill=null,item=null,diceMod=0,difficulty=null,flatThresholdModifier=0,flatDiceModifier=0){if(this.actor=actor,this.skill=skill,this.item=item,this.difficulty=difficulty,this.diceModifier=diceMod,this.rawValue=0,this.successLevel=null,this.referenceMessageId=null,this.pushing=!1,this.flatDiceModifier=flatDiceModifier,this.flatThresholdModifier=flatThresholdModifier,null===difficulty){const isUnknown="unknown"===game.settings.get("CoC7","defaultCheckDifficulty");this.difficulty=isUnknown?CoC7Check.difficultyLevel.unknown:CoC7Check.difficultyLevel.regular}}static get cardType(){return"rollCard"}static get difficultyLevel(){return{unknown:-1,regular:1,hard:2,extreme:3,critical:4,impossible:9}}static get successLevel(){return{fumble:-99,failure:0,regular:1,hard:2,extreme:3,critical:4}}static difficultyString(difficultyLevel){switch(isNaN(Number(difficultyLevel))?difficultyLevel:Number(difficultyLevel)){case"?":return game.i18n.localize("CoC7.UnknownDifficulty");case"+":return game.i18n.localize("CoC7.HardDifficulty");case"++":return game.i18n.localize("CoC7.ExtremeDifficulty");case"+++":return game.i18n.localize("CoC7.CriticalDifficulty");case 0:return game.i18n.localize("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.unknown:return game.i18n.localize("CoC7.UnknownDifficulty");case CoC7Check.difficultyLevel.regular:return game.i18n.localize("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.hard:return game.i18n.localize("CoC7.HardDifficulty");case CoC7Check.difficultyLevel.extreme:return game.i18n.localize("CoC7.ExtremeDifficulty");case CoC7Check.difficultyLevel.critical:return game.i18n.localize("CoC7.CriticalDifficulty");default:return null}}get rawValue(){if(this._rawValue||(this.characteristic&&(this.rawValue=this.actor.data.data.characteristics[this.characteristic].value),this.skill&&(this.rawValue=this.skill.value),this.attribute&&(this.rawValue=this.actor.data.data.attribs[this.attribute].value)),this._rawValue)return this.flatThresholdModifier&&game.settings.get("CoC7","allowFlatThresholdModifier")?this._rawValue+this.flatThresholdModifier<1?1:this._rawValue+this.flatThresholdModifier:this._rawValue}set rawValue(x){this._rawValue=x}set uuid(x){this._uuid=x}get uuid(){return this._uuid||(this._uuid=foundry.utils.randomID(16)),this._uuid}get hasCard(){return ui.chat.collection.filter((message=>this.uuid===message.getFlag("CoC7","uuid")&&CoC7Check.cardType===message.getFlag("CoC7","type"))).length>0}get rawValueString(){if(this._rawValue)return this.flatThresholdModifier&&game.settings.get("CoC7","allowFlatThresholdModifier")?this.flatThresholdModifier<0?this._rawValue.toString()+this.flatThresholdModifier.toString():this._rawValue.toString()+"+"+this.flatThresholdModifier.toString():this._rawValue.toString()}get criticalThreshold(){return 1}get regularThreshold(){return this.rawValue?this.rawValue>=100?99:parseInt(this.rawValue):null}get hardThreshold(){return this.rawValue?Math.floor(this.rawValue/2):null}get extremeThreshold(){return this.rawValue?Math.floor(this.rawValue/5):null}get fumbleThreshold(){if(this.rawValue){if(this.difficulty){if(this.difficulty>=CoC7Check.difficultyLevel.extreme)return this.extremeThreshold<50?96:100;if(this.difficulty>=CoC7Check.difficultyLevel.hard)return this.hardThreshold<50?96:100}return this.rawValue<50?96:100}return null}get succesThreshold(){if(void 0!==this.difficulty)switch(this.difficulty){case CoC7Check.difficultyLevel.extreme:return this.extremeThreshold;case CoC7Check.difficultyLevel.hard:return this.hardThreshold;case CoC7Check.difficultyLevel.regular:return this.regularThreshold;case CoC7Check.difficultyLevel.critical:return this.criticalThreshold;case CoC7Check.difficultyLevel.unknown:return-1;default:return this.rawValue}return null}get difficultyString(){if(void 0!==this.difficulty)switch(this.difficulty){case CoC7Check.difficultyLevel.extreme:return game.i18n.format("CoC7.ExtremeDifficulty");case CoC7Check.difficultyLevel.hard:return game.i18n.format("CoC7.HardDifficulty");case CoC7Check.difficultyLevel.regular:return game.i18n.format("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.critical:return game.i18n.format("CoC7.CriticalDifficulty");case CoC7Check.difficultyLevel.unknown:return game.i18n.format("CoC7.UnknownDifficulty");default:return""}return""}get modifiedResult(){if(!this.standby){if(void 0!==this._modifiedResult)return this._modifiedResult;if(this.flatDiceModifier){const modified=this.dices.total+this.flatDiceModifier;return modified<1?1:modified>100?100:modified}return this.dices.total}}set modifiedResult(x){this._modifiedResult=x}get flatDiceModifierString(){return this.flatDiceModifier?this.flatDiceModifier>0?`+${this.flatDiceModifier}`:this.flatDiceModifier.toString():null}get isFumble(){if(!this.standby&&!this.isSimpleRoll)return this.modifiedResult>=this.fumbleThreshold}get isCritical(){if(!this.standby)return 1===this.modifiedResult}get isExtremeSuccess(){if(!this.standby)return this.successLevel>=CoC7Check.successLevel.extreme}get passed(){if(!this.standby&&!this.isSimpleRoll)return this.luckSpent?this.difficulty<=this.successLevel:this.succesThreshold>=this.modifiedResult||this.isCritical}get failed(){if(!this.standby&&!this.isSimpleRoll)return!this.passed}get isSimpleRoll(){return void 0===this.rawValue}get hasBonus(){return!!(this.diceModifier&&this.diceModifier>0)}get hasPenalty(){return!!(this.diceModifier&&this.diceModifier<0)}get hasModifier(){return!(!this.diceModifier||0===this.diceModifier)}get diceModifier(){return this._diceModifier?this._diceModifier:null}set diceModifier(x){this._diceModifier=parseInt(x)}get name(){if(this.actor){if(this.skill)return this.skill.shortName;if(this.item)return this.item.name;if(this.characteristic)return CoC7Utilities.getCharacteristicNames(this.characteristic)?.label;if(this.attribute){if("lck"===this.attribute)return game.i18n.localize("CoC7.Luck");if("san"===this.attribute)return game.i18n.localize("CoC7.Sanity")}}return null}get shortName(){if(this.actor){if(this.skill)return this.skill.shortName;if(this.item)return this.item.name;if(this.characteristic)return CoC7Utilities.getCharacteristicNames(this.characteristic)?.short;if(this.attribute){if("lck"===this.attribute)return game.i18n.localize("CoC7.Luck");if("san"===this.attribute)return game.i18n.localize("CoC7.SAN")}}return null}get fullName(){const difficulty=this._difficulty!==CoC7Check.difficultyLevel.regular&&CoC7Check.difficultyString(this._difficulty),modifier=this._diceModifier>0?`+${this._diceModifier}`:this._diceModifier.toString();return game.i18n.format(`CoC7.LinkCheck${difficulty?"Diff":""}${this._diceModifier?"Modif":""}`,{difficulty,modifier,name:this.name})}get rolled(){return!!this.dice}static getFromCard(card){const rollResult=card.classList.contains("roll-result")?card:card.querySelector(".roll-result"),check=new CoC7Check;CoC7Roll.getFromElement(rollResult,check);const message=card.closest(".message");return check.messageId=message?message.dataset.messageId:null,check}static async push(card,publish=!0){const oldCheck=CoC7Check.getFromCard(card),actorId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId,skillId=card.dataset.skillId,charac=card.dataset.characteristic,itemId=card.dataset.itemId,diceMod=card.dataset.diceMod,difficulty=card.dataset.difficulty;let pushedRoll;if(skillId)pushedRoll=new CoC7Check(actorId,skillId,itemId,diceMod,difficulty);else{if(!charac)return;pushedRoll=new CoC7Check,pushedRoll.diceModifier=diceMod,pushedRoll.difficulty=difficulty,pushedRoll.actor=actorId,pushedRoll.characteristic=charac}oldCheck.uuid&&(pushedRoll.context=oldCheck.context,pushedRoll.uuid=oldCheck.uuid),oldCheck.parent&&(pushedRoll.parent=oldCheck.parent),pushedRoll.pushing=!0,await pushedRoll.roll(),publish&&pushedRoll.toMessage(!0,card)}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}set actor(x){if(this.actorKey=x,null!=x){if(x instanceof Actor)return this._actor=x,this._actor.alias=this.actor.name,void(x.token&&x.token.scene&&x.token.scene.id?this.actorKey=`${x.token.scene.id}.${x.token.id}`:this.actorKey=x.id);if(x.includes(".")){const[sceneId,tokenId]=x.split(".");if("TOKEN"===sceneId)this._actor=game.actors.tokens[tokenId],this._actor.alias=this._actor.name;else{const scene=game.scenes.get(sceneId);if(!scene)return;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return;const token=new Token(tokenData);this._actor=token.actor,this._actor.alias=token.name}}else this._actor=game.actors.get(x),this.actor.alias=this.actor.name}else this._actor=x}get successLevelIcons(){if(this.unknownDifficulty)return null;if(this.isSimpleRoll)return null;if(this.successLevel>=this.difficulty){const icons=[];for(let index=0;index<this.successLevel-this.difficulty+1;index++)icons.push(this.isCritical?"medal":"star");const successHint=game.i18n.format("CoC7.SuccesLevelHint",{value:this.successLevel-this.difficulty+1});return{success:!0,cssClass:this.isCritical?"critical":"success",hint:successHint,icons}}{const icons=[],successLevel=this.isFumble?-1:this.successLevel;for(let index=0;index<this.difficulty-successLevel;index++)icons.push(this.isFumble?"skull":"spider");const failureHint=game.i18n.format("CoC7.FailureLevelHint",{value:this.difficulty-successLevel});return{success:!1,cssClass:this.isFumble?"fumble":"failure",hint:failureHint,icons}}}get isBlind(){return void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind}set isBlind(x){this._isBlind=x}get unknownDifficulty(){return!(this.gmDifficultyCritical||this.gmDifficultyExtreme||this.gmDifficultyHard||this.gmDifficultyRegular)&&CoC7Check.difficultyLevel.unknown===this.difficulty}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}set skill(x){this._skill=this._getItemFromId(x),this.skillId=x}set item(x){this._item=this._getItemFromId(x),"weapon"===this._item?.type?this.itemId=x:(this._item=void 0,this.itemId=void 0)}_getItemFromId(x){return null==x?null:x instanceof Item?x:this._actor?this._actor.items.get(x):game.items.get(x)}get actor(){if(this._actor&&this._actor?.id){if("Object"===this._actor.constructor.name){const actor=new CoCActor(this._actor);this._actor=actor}}else if(this.actorKey&&(this._actor=chatHelper.getActorFromKey(this.actorKey)),this.actorId&&(this._actor=chatHelper.getActorFromKey(this.actorId)),!this._actor)return{isDummy:!0,name:this.actorName?this.actorName:void 0,id:void 0,img:"systems/CoC7/assets/icons/question-circle-regular.svg",portrait:"systems/CoC7/assets/icons/question-circle-regular.svg"};return this._actor}get skill(){return!this._skill&&this.skillId&&(this._skill=this.actor?.items.get(this.skillId)),!this._skill&&this.item&&this.item.data.data.skill&&(this.item.data.data.skill.main.id&&!this.weaponAltSkill?this._skill=this._actor.items.get(this.item.data.data.skill.main.id):this.item.data.data.skill.alternativ.id&&this.weaponAltSkill&&(this._skill=this._actor.items.get(this.item.data.data.skill.alternativ.id))),this._skill}get item(){return!this._item&&this.itemId&&this.actor&&(this._item=this.actor.items.get(this.itemId)),this._item}get displayResultType(){return game.settings.get("CoC7","displayResultType")}get displayCheckSuccessLevel(){return game.settings.get("CoC7","displayCheckSuccessLevel")}get displayBothSuccessLevel(){return this.displayResultType&&this.displayCheckSuccessLevel}get dontDisplaySuccessLevel(){return!this.displayResultType&&!this.displayCheckSuccessLevel}get image(){return this.skill?this.skill.img:this.item?this.item.img:void 0}get link(){return this.getLinkElement().outerHTML}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}getLinkElement(classes=null){const data={cls:["coc7-link","coc7-roll"].concat(classes),dataset:{check:"check"},icon:this.image?`<div style="background-image: url(${this.image})"></div>`:'<i class="fas fa-dice"></i>',blind:this.isBlind},difficulty=CoC7Check.difficultyString(this._difficulty),title=game.i18n.format(`CoC7.LinkCheck${this._difficulty?"Diff":""}${this._diceModifier?"Modif":""}`,{difficulty,modifier:this._diceModifier,name:this.name}),a=document.createElement("a");return a.title=title,a.classList.add(...data.cls),a.innerHTML=`${data.blind?'<i class="fas fa-eye-slash"></i>':""}${data.icon}${this.name}`,a}async roll(diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.standby||await this._perform()}static create({difficulty=CoC7Check.difficultyLevel.regular,diceModifier=null,actorKey=null,characteristic=null,attribute=null,rawValue=0,skill=null,flatDiceModifier=0,flatThresholdModifier=0,displayName=null,actorName=null}={}){const check=new CoC7Check;return check.difficulty=difficulty,diceModifier&&(check.diceModifier=diceModifier),flatDiceModifier&&(check.flatDiceModifier=flatDiceModifier),flatThresholdModifier&&(check.flatThresholdModifier=flatThresholdModifier),displayName&&(check.displayName=displayName),actorKey&&(check.actor=actorKey),actorName&&(check.actorName=actorName),isNaN(Number(rawValue))||(check.rawValue=Number(rawValue)),check.actor&&!check.actor.isDummy&&(skill?check.skill=skill:characteristic?check.characteristic=characteristic:attribute&&(check.attribute=attribute)),check}async rollCharacteristic(char,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.characteristic=char,this.standby||await this._perform()}async rollAttribute(attrib,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.attribute=attrib,this.standby||await this._perform()}async rollValue(val,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.rawValue=val,this.standby||await this._perform()}async _perform(options={}){this.dice=options.roll||await CoC7Dice.roll(this.diceModifier,this.rollMode,this.isBlind),options.silent||AudioHelper.play({src:CONFIG.sounds.dice}),options.forceDSN&&await CoC7Dice.showRollDice3d(this.dice.roll),this.dices={tens:[],unit:{value:this.dice.unit.total},total:this.dice.total,tenResult:this.dice.total-this.dice.unit.total,hasBonus:!!this.diceModifier,bonus:Math.abs(this.diceModifier),bonusType:this.diceModifier<0?game.i18n.format("CoC7.DiceModifierPenalty"):game.i18n.format("CoC7.DiceModifierBonus"),difficulty:this.difficulty};const max=0===this.dice.unit.total?100:90,min=0===this.dice.unit.total?10:0;let selected=this.dice.total-this.dice.unit.total;for(let i=0;i<this.dice.tens.results.length;i++){const die={};die.value=this.dice.tens.results[i],die.value===selected?(selected=101,die.selected=!0,this.dices.hasBonus?(die.isMax=!0,die.isMin=!1):(die.isMin=!0,die.isMax=!1)):(die.value===max?die.isMax=!0:die.isMax=!1,die.value===min?die.isMin=!0:die.isMin=!1),this.dices.tens.push(die)}this.computeCheck()}async computeCheck(){switch(this.isUnknown=this.unknownDifficulty,this.gmDifficultyRegular&&(this.difficulty=CoC7Check.difficultyLevel.regular),this.gmDifficultyHard&&(this.difficulty=CoC7Check.difficultyLevel.hard),this.gmDifficultyExtreme&&(this.difficulty=CoC7Check.difficultyLevel.extreme),this.gmDifficultyCritical&&(this.difficulty=CoC7Check.difficultyLevel.critical),this.tenOnlyOneDie=1===this.dices.tens.length,this.isValue=!1,this.isCharactiristic=!1,this.isSkill=!1,this.isItem=!1,this.isAttribute=!1,this.isSimpleRoll?(this.denyPush=!0,this.denyLuck=!0):null==this.actor?this.isValue=!0:(this.characteristic&&(this.isCharactiristic=!0,this.rawValue=this.actor.data.data.characteristics[this.characteristic].value),this.skill&&(this.isSkill=!0,this.rawValue=this.skill.value),this.attribute&&(this.isAttribute=!0,this.rawValue=this.actor.data.data.attribs[this.attribute].value)),this.luckSpent||this.isSimpleRoll||(this.modifiedResult<=this.rawValue&&(this.successLevel=CoC7Check.successLevel.regular),this.modifiedResult<=this.hardThreshold&&(this.successLevel=CoC7Check.successLevel.hard),this.modifiedResult<=this.extremeThreshold&&(this.successLevel=CoC7Check.successLevel.extreme),this.modifiedResult>this.rawValue&&(this.successLevel=CoC7Check.successLevel.failure),1===this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.critical),this.fumbleThreshold<=this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.fumble)),this.successLevel){case CoC7Check.successLevel.regular:this.resultType=game.i18n.format("CoC7.RegularSuccess");break;case CoC7Check.successLevel.hard:this.resultType=game.i18n.format("CoC7.HardSuccess");break;case CoC7Check.successLevel.extreme:this.resultType=game.i18n.format("CoC7.ExtremeSuccess");break;case CoC7Check.successLevel.critical:this.resultType=game.i18n.format("CoC7.CriticalSuccess");break;case CoC7Check.successLevel.fumble:this.resultType=game.i18n.format("CoC7.Fumble");break;case CoC7Check.successLevel.failure:this.resultType=game.i18n.format("CoC7.Failure")}if(this.unknownDifficulty?this.successRequired="":this.isSimpleRoll||(this.successRequired=game.i18n.format("CoC7.SuccessRequired",{successRequired:this.difficultyString})),1===this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.critical),this.luckSpent||this.isUnknown||this.isSimpleRoll||(this.isFailure=this.failed,this.isSuccess=this.passed),this.hasMalfunction=!1,this.isFumble&&(this.successLevel=CoC7Check.successLevel.fumble),this.item&&(this.isItem=!0,this.item.data.data.malfunction&&Number(this.modifiedResult)>=Number(this.item.data.data.malfunction)&&(this.hasMalfunction=!0,this.malfunctionTxt=game.i18n.format("CoC7.Malfunction",{itemName:this.item.name}),await this.item.toggleItemFlag(CoC7Item.flags.malfunction))),this.canBePushed=!!this.skill&&this.skill.canBePushed(),null!=this.characteristic&&(this.canBePushed=!0),this.isFumble&&(this.canBePushed=!1),this.denyPush&&(this.canBePushed=!1),!this.denyLuck&&this.actor){if(!(this.luckSpent||this.passed||this.isFumble||this.difficulty===CoC7Check.difficultyLevel.critical||this.unknownDifficulty)&&(this.skill||this.characteristic)){const luckNeeded=this.modifiedResult-this.succesThreshold;this.actor.luck>luckNeeded&&(this.hasEnoughLuck=!0,this.luckNeeded=luckNeeded,this.luckNeededTxt=game.i18n.format("CoC7.SpendLuck",{luckNeededValue:luckNeeded}))}if(!this.luckSpent&&(this.increaseSuccess=[],!this.pushing&&"lck"!==this.attribute&&"san"!==this.attribute)){if(this.unknownDifficulty&&this.modifiedResult>this.regularThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.RegularDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.regular,nextLevel.luckToSpend=this.modifiedResult-this.regularThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}if(this.difficulty<=CoC7Check.difficultyLevel.regular&&this.modifiedResult>this.hardThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.HardDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.hard,nextLevel.luckToSpend=this.modifiedResult-this.hardThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}if(this.difficulty<=CoC7Check.difficultyLevel.hard&&this.modifiedResult>this.extremeThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.ExtremeDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.extreme,nextLevel.luckToSpend=this.modifiedResult-this.extremeThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}}this.canIncreaseSuccess=this.increaseSuccess.length>0,this.isFumble&&(this.canIncreaseSuccess=!1)}if(this.canAwardExperience=this.skill&&!this.skill.data.data.properties.noxpgain,!(this.passed&&this.diceModifier<=0&&this.skill)||this.skill.data.data.properties.noxpgain||this.luckSpent||this.forced||this.isBlind||this.isUnknown||this.flagForDevelopement(),this.parent){const parent=await fromUuid(this.parent);parent&&"updateRoll"in parent&&await parent.updateRoll(this.JSONRollString)}}showDiceRoll(){if(game.modules.get("dice-so-nice")?.active){const diceResults=[];for(const dieResult of this.dices.tens)diceResults.push(100===dieResult.value?0:dieResult.value/10);diceResults.push(this.dices.unit.value);const diceData={formula:`${this.dices.tens.length}d100+1d10`,results:diceResults,whisper:null,blind:!1};game.dice3d.show(diceData)}}get cssClass(){let cssClass="";return this.isSuccess&&(cssClass="success"),this.isFailure&&(cssClass="failure"),this.isCritical&&!this.isFailure&&(cssClass="success critical"),this.isFumble&&!this.isSuccess&&(cssClass="failure fumble"),CoC7Check.successLevel.regular===this.successLevel&&(cssClass+=" regular-success"),CoC7Check.successLevel.hard===this.successLevel&&(cssClass+=" hard-success"),CoC7Check.successLevel.extreme===this.successLevel&&(cssClass+=" extreme-success"),cssClass}get cssClassList(){const cssClass=[];return this.isSuccess&&cssClass.push("success"),this.isFailure&&cssClass.push("failure"),this.isCritical&&!this.isFailure&&cssClass.push("success","critical"),this.isFumble&&!this.isSuccess&&cssClass.push("failure","fumble"),CoC7Check.successLevel.regular===this.successLevel&&cssClass.push("regular-success"),CoC7Check.successLevel.hard===this.successLevel&&cssClass.push("hard-success"),CoC7Check.successLevel.extreme===this.successLevel&&cssClass.push("extreme-success"),cssClass}get playerCssClass(){return this.isSuccess||this.forcedSuccess?"success":this.isFailure||this.forcedFailure?"failure":null}async upgradeCheck(upgradeindex,update=!0){const increasedSuccess=this.increaseSuccess[upgradeindex],luckAmount=parseInt(increasedSuccess.luckAmount)||parseInt(increasedSuccess.luckToSpend);if(!this.actor.spendLuck(luckAmount))return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:this.actor.name}));this.totalLuckSpent=parseInt(this.totalLuckSpent)?parseInt(this.totalLuckSpent):0,this.totalLuckSpent+=parseInt(luckAmount);const newSuccessLevel=parseInt(increasedSuccess.newSuccessLevel)||parseInt(increasedSuccess.difficulty);this.successLevel=newSuccessLevel,this.difficulty<=newSuccessLevel&&(this.isSuccess=!0,this.isFailure=!1);for(let index=0;index<upgradeindex+1;index++)this.increaseSuccess.shift();for(const s of this.increaseSuccess)s.luckToSpend=s.luckToSpend-luckAmount;return this.luckSpent=!0,this.computeCheck(),update?await this.updateChatCard():void 0}removeUpgrades(){this.canIncreaseSuccess=!1,this.increaseSuccess=[],this.luckNeeded=0,this.luckNeededTxt=null,this.canBePushed=!1}forcePass(luckAmount=null,update=!0){if(luckAmount){this.actor.spendLuck(luckAmount),this.successLevel=this.difficulty;for(const s of this.increaseSuccess)s.luckToSpend=s.luckToSpend-luckAmount;this.luckSpent=!0,this.isSuccess=!0,this.totalLuckSpent=parseInt(this.totalLuckSpent)?parseInt(this.totalLuckSpent):0,this.totalLuckSpent+=parseInt(luckAmount),this.computeCheck(),update&&this.updateChatCard()}else this.forced=!0,this.forcedSuccess=!0,this.isUnknown?this.forceSuccessLevel(CoC7Check.successLevel.regular,update):this.forceSuccessLevel(this.difficulty,update)}forceFail(update=!0){this.forced=!0,this.forcedFailure=!0,this.isUnknown?this.forceSuccessLevel(CoC7Check.successLevel.failure,update):this.forceSuccessLevel(this.difficulty-1,update)}_forceCheck(high,low,update=!0){let total=Math.floor(Math.random()*(high-low))+low+1;const unitTotal=total%10;let tenTotal=Math.floor(total/10);const tens=[];let hasEnough=Math.abs(this.diceModifier)===tens.length;for(;!hasEnough;){let ten=Math.floor(10*Math.random()),roll=10*ten+unitTotal;0===roll&&(roll=100,ten=100),this.hasPenalty&&roll<=high&&(tens.push(ten),roll>total&&(total=roll)),this.hasBonus&&roll>low&&(tens.push(ten),roll<total&&(total=roll)),hasEnough=tens.length===Math.abs(this.diceModifier)}10===tenTotal&&0===unitTotal&&(tenTotal=100),tens.splice(Math.floor(Math.random()*tens.length+1),0,10===tenTotal?0:tenTotal),this.dices.tens=[],this.dices.unit.value=unitTotal,this.modifiedResult=total,this.dices.total=total,this.dices.tenResult=total-unitTotal;const max=0===unitTotal?100:90,min=0===unitTotal?10:0;let selected=total-unitTotal;for(let i=0;i<tens.length;i++){const die={};die.value=tens[i],die.value===selected?(selected=101,die.selected=!0,this.hasBonus?(die.isMax=!0,die.isMin=!1):(die.isMin=!0,die.isMax=!1)):(die.value===max?die.isMax=!0:die.isMax=!1,die.value===min?die.isMin=!0:die.isMin=!1),this.dices.tens.push(die)}this.computeCheck(),update&&this.updateChatCard()}forceSuccessLevel(successLevel,update=!0){let high,low;CoC7Check.successLevel.fumble===successLevel&&(high=100,low=this.fumbleThreshold-1),CoC7Check.successLevel.failure===successLevel&&(high=this.regularThreshold===this.fumbleThreshold-1?100:this.fumbleThreshold-1,low=this.regularThreshold),CoC7Check.successLevel.regular===successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.hard===successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.extreme===successLevel&&(high=this.extremeThreshold,low=1),CoC7Check.successLevel.critical===successLevel&&(high=1,low=0),high===low&&low--,0===high&&(high=this.fumbleThreshold-1),this._forceCheck(high,low,update)}increaseSuccessLevel(update=!0){let high,low;CoC7Check.successLevel.fumble===this.successLevel&&(high=this.fumbleThreshold-1,low=this.regularThreshold===this.fumbleThreshold-1?this.hardThreshold:this.regularThreshold),CoC7Check.successLevel.failure===this.successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.regular===this.successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.hard===this.successLevel&&(high=this.extremeThreshold,low=this.criticalThreshold),CoC7Check.successLevel.extreme===this.successLevel&&(high=this.criticalThreshold,low=0),high===low&&low--,this._forceCheck(high,low,update)}decreaseSuccessLevel(update=!0){let high,low;CoC7Check.successLevel.failure===this.successLevel&&(high=100,low=this.fumbleThreshold-1),CoC7Check.successLevel.regular===this.successLevel&&(high=this.fumbleThreshold-1,low=this.regularThreshold),CoC7Check.successLevel.hard===this.successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.extreme===this.successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.critical===this.successLevel&&(high=this.extremeThreshold,low=1),0===high&&(high=this.fumbleThreshold-1),this._forceCheck(high,low,update)}async flagForDevelopement(){this.flaggedForDevelopment=!0,this.skill&&await this.skill.flagForDevelopement()}set difficulty(x){this._difficulty=parseInt(x)}get difficulty(){return this._difficulty}set flavor(x){this._flavor=x}set context(x){this._context=x}get context(){if(this._context)return this._context}set parent(x){this.uuid||(this.uuid=foundry.utils.randomID(16)),this.parentUuid=x}get parent(){if(this.parentUuid)return this.parentUuid}get flavor(){if(this._flavor)return this._flavor;let flavor="";return this.actor?.data&&(this.skill?flavor=game.i18n.format("CoC7.CheckResult",{name:this.skill.shortName,value:this.rawValueString,difficulty:this.difficultyString}):this.item?flavor=game.i18n.format("CoC7.ItemCheckResult",{item:this.item.name,skill:this.skill.name,value:this.rawValueString,difficulty:this.difficultyString}):this.characteristic?flavor=game.i18n.format("CoC7.CheckResult",{name:game.i18n.format(this.actor.data.data.characteristics[this.characteristic].label),value:this.rawValueString,difficulty:this.difficultyString}):this.attribute?flavor=game.i18n.format("CoC7.CheckResult",{name:game.i18n.format(`CoC7.${this.actor.data.data.attribs[this.attribute].label}`),value:this.rawValueString,difficulty:this.difficultyString}):this.displayName&&(flavor=game.i18n.format("CoC7.CheckResult",{name:this.displayName,value:this.rawValueString,difficulty:this.difficultyString}))),flavor||this.rawValue&&(flavor=this.displayName?game.i18n.format("CoC7.CheckResult",{name:this.displayName,value:this.rawValueString,difficulty:this.difficultyString}):game.i18n.format("CoC7.CheckRawValue",{rawvalue:this.rawValue,difficulty:this.difficultyString})),this.pushing&&(flavor=`${game.i18n.format("CoC7.Pushing")} ${flavor}`),flavor}get tooltipHeader(){return this.attribute?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:game.i18n.format(`CoC7.${this.actor.data.data.attribs[this.attribute].label}`)})+` (${this.actor.data.data.attribs[this.attribute].value}%)`:this.characteristic?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:game.i18n.localize(this.actor.data.data.characteristics[this.characteristic].label)})+` (${this.actor.data.data.characteristics[this.characteristic].value}%)`:this.skill?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:this.skill.name})+` (${this.skill.value}%)`:this.displayName?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:this.displayName})+` (${this.rawValueString}%)`:null}async getHtmlRollElement(options={}){this.options?this.options=mergeObject(this.options,options):this.options=options;const html=await renderTemplate("systems/CoC7/templates/chat/rolls/in-card-roll.html",this);return html?$.parseHTML(html)[0]:null}async getHtmlRoll(options={}){this.options?this.options=mergeObject(this.options,options):this.options=options;return await renderTemplate("systems/CoC7/templates/chat/rolls/in-card-roll.html",this)||void 0}async toMessage(pushing=!1){this.pushing=pushing;const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this),speakerData={};let speaker;this.actor?(this.actor.isToken?speakerData.token=this.token.document:this.actor.isDummy?this.actor.name&&(speaker={alias:this.actor.name}):speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor?.user?this.actor.user:game.user).id,speaker,flavor:this.flavor,content:html,flags:{CoC7:{type:CoC7Check.cardType}}};if(this.uuid&&(chatData.flags.CoC7.uuid=this.uuid),this.context&&(chatData.flags.CoC7.context=this.context),"selfroll"===this.rollMode)if(game.user.isGM){if(chatData.user=game.user.id,chatData.flavor=`[${this.actor.name}] ${chatData.flavor}`,chatData.flags={CoC7:{GMSelfRoll:!0}},void 0!==chatData.speaker&&(chatData.flags.CoC7.originalSpeaker=duplicate(chatData.speaker)),game.user.isGM)switch(game.settings.get("CoC7","selfRollWhisperTarget")){case"owners":delete chatData.speaker,chatData.whisper=this.actor.owners,chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER;break;case"everyone":delete chatData.speaker,chatData.whisper=game.users.players,chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER;break;default:ChatMessage.applyRollMode(chatData,this.rollMode)}}else ChatMessage.applyRollMode(chatData,this.rollMode);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),this.dice?.roll&&!this.dice?.hideDice&&(chatData.roll=this.dice.roll,chatData.type=CONST.CHAT_MESSAGE_TYPES.ROLL,chatData.rollMode=this.isBlind?"blindroll":this.rollMode),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard({makePublic=!1,forceRoll=!1}={}){makePublic&&(this.rollMode=!1);const chatData={flavor:this.flavor};makePublic?(chatData.whisper=[],chatData.blind=!1,ChatMessage.applyRollMode(chatData)):(chatData.whisper=[],chatData.blind=!1,ChatMessage.applyRollMode(chatData,game.settings.get("core","rollMode"))),chatData.blind&&(this.isBlind=!0);const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this);let newContent=html;if(!this.messageId)return $.parseHTML(html)[0];const message=game.messages.get(this.messageId),htmlMessage=$.parseHTML(message.data.content)[0];if(!htmlMessage.classList.contains("roll-result")){const htmlCheck=$.parseHTML(html)[0],rollResultElement=htmlMessage.querySelector(".roll-result");null!==rollResultElement&&rollResultElement.replaceWith(htmlCheck),newContent=htmlMessage.outerHTML}chatData.content=newContent,CONST.CHAT_MESSAGE_TYPES.ROLL===message.data.type&&(message.data.whisper?.length?chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER:chatData.type=CONST.CHAT_MESSAGE_TYPES.OTHER),forceRoll&&this.dice?.roll&&await CoC7Dice.showRollDice3d(this.dice.roll);const msg=await message.update(chatData);return await ui.chat.updateMessage(msg,!1),msg}static async updateCardSwitch(event){const card=event.currentTarget.closest(".chat-card"),check=await CoC7Check.getFromCard(card);check.gmDifficultyRegular=!1,check.gmDifficultyHard=!1,check.gmDifficultyExtreme=!1,check.gmDifficultyCritical=!1,"gmDifficultyRegular"===event.currentTarget.dataset.flag&&(check.gmDifficultyRegular=!0),"gmDifficultyHard"===event.currentTarget.dataset.flag&&(check.gmDifficultyHard=!0),"gmDifficultyExtreme"===event.currentTarget.dataset.flag&&(check.gmDifficultyExtreme=!0),"gmDifficultyCritical"===event.currentTarget.dataset.flag&&(check.gmDifficultyCritical=!0),check.computeCheck(),check.updateChatCard()}async shortResult(details=!1){this.details=details||!1;return await renderTemplate("systems/CoC7/templates/chat/roll.html",this)}get tooltip(){return renderTemplate("systems/CoC7/templates/chat/rolls/roll-tooltip.html",this)}get inlineCheck(){const a=document.createElement("a");return a.classList.add("coc7-inline-check"),a.classList.add("coc7-check-result"),a.classList.add("coc7-inline"),a.classList.add(...this.cssClassList),a.title=this.tooltipHeader,a.dataset.roll=escape(this.JSONRollString),a.innerHTML=`<i class="game-icon game-icon-d10"></i> ${this.modifiedResult||"??"}`,a}get rollToolTip(){if(this.standby)return;const parts=[],tens=this.dices.tens.map((r=>({result:r.value,selected:r.selected,classes:["die","d10",r.selected?null:"discarded",r.isMin?"min":null,r.isMax?"max":null].filter((c=>c)).join(" ")}))),unit=[{result:this.dices.unit.value,selected:!0,classes:"die d10"}];return parts.push({formula:this.tooltipHeader,total:this.modifiedResult,icons:this.successLevelIcons,class:this.cssClass,successRequired:this.successRequired,resultType:this.resultType,face:10,rolls:[...tens,...unit]}),renderTemplate("systems/CoC7/templates/chat/rolls/roll-tooltip.html",{parts})}get JSONRollData(){return JSON.parse(this.JSONRollString)}get JSONRollString(){return JSON.stringify(this,((key,value)=>{if(null===value)return;return["_actor","_skill","_item"].includes(key)?void 0:value}))}static fromData(data){return Object.assign(new CoC7Check,data)}static fromRollString(dataString){let data;try{data=JSON.parse(unescape(dataString))}catch(err){return ui.notifications.error(err.message),null}return CoC7Check.fromData(data)}static async alter(check,command,options={}){switch(command){case"useLuck":if(options.target.classList.contains("pass-check")){const luckAmount=parseInt(options.target.dataset.luckAmount);check.forcePass(luckAmount,options.update)}else{const upgradeIndex=parseInt(options.target.dataset.index);await check.upgradeCheck(upgradeIndex,options.update)}break;case"force-pass":check.forcePass(null,options.update);break;case"force-fail":check.forceFail(options.update);break;case"increase-success-level":check.increaseSuccessLevel(options.update);break;case"decrease-success-level":check.decreaseSuccessLevel(options.update);break;case"reveal-check":check.isBlind=!1,check.rollMode=!1,check.computeCheck(),options.update&&check.updateChatCard();break;case"flag-for-development":await check.flagForDevelopement(),check.computeCheck(),options.update&&check.updateChatCard();break;case"push":await check._perform(),check.pushing=!0,options.update&&check.updateChatCard()}}static async _onClickInlineRoll(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("coc7-check-result"))return a.classList.contains("expanded")?CoC7Check._collapseInlineResult(a):CoC7Check._expandInlineResult(a)}static _collapseInlineResult(a){if(!a.classList.contains("coc7-inline-check"))return;if(!a.classList.contains("expanded"))return;const tooltip=a.querySelector(".coc7-check-tooltip");return tooltip&&tooltip.remove(),a.classList.remove("expanded")}static async _expandInlineResult(a){if(!a.classList.contains("coc7-inline-check"))return;if(a.classList.contains("expanded"))return;const check=Object.assign(new CoC7Check,JSON.parse(unescape(a.dataset.roll)));if(check.standby)return;const tip=document.createElement("div");tip.innerHTML=await check.rollToolTip;const tooltip=tip.children[0];a.appendChild(tooltip),a.classList.add("expanded");const pa=a.getBoundingClientRect(),pt=tooltip.getBoundingClientRect();tooltip.style.left=`${Math.min(pa.x,window.innerWidth-(pt.width+3))}px`,tooltip.style.top=`${Math.min(pa.y+pa.height+3,window.innerHeight-(pt.height+3))}px`;const zi=getComputedStyle(a).zIndex;tooltip.style.zIndex=Number.isNumeric(zi)?zi+1:100}}class SanDataDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(":checkbox").click((()=>this._toggleInput(html)))}_toggleInput(html){html.find('*[name="customname"]').toggle()}static async create(options={}){const html=await renderTemplate("systems/CoC7/templates/apps/sandata.html",options);return new Promise((resolve=>{let formData=null;const dlg=new SanDataDialog({title:options.displayName?game.i18n.format("CoC7.SanDataSelectionWindowNamed",{name:options.displayName}):game.i18n.localize("CoC7.SanDataSelectionWindow"),content:html,buttons:{Validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#san-data-form")),resolve(formData))}},default:"Validate",close:()=>{}});dlg.render(!0)}))}}class CoC7ChatMessage{static get ROLL_TYPE_ATTRIBUTE(){return"R/AT"}static get ROLL_TYPE_CHARACTERISTIC(){return"R/CH"}static get ROLL_TYPE_COMBAT(){return"R/CO"}static get ROLL_TYPE_SKILL(){return"R/SK"}static get CARD_TYPE_COMBINED(){return"C/CO"}static get CARD_TYPE_GROUP(){return"C/GR"}static get CARD_TYPE_NORMAL(){return"C/NO"}static get CARD_TYPE_OPPOSED(){return"C/OP"}static get CARD_TYPE_SAN_CHECK(){return"C/SC"}static cardTypes(config){if(config.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT)return null;const select={[CoC7ChatMessage.CARD_TYPE_NORMAL]:"CoC7.RegularRollCard",[CoC7ChatMessage.CARD_TYPE_COMBINED]:"CoC7.CombinedRollCard",[CoC7ChatMessage.CARD_TYPE_OPPOSED]:"CoC7.OpposedRollCard"};return config.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE&&"san"===config.attribute&&(select[CoC7ChatMessage.CARD_TYPE_SAN_CHECK]="CoC7.SanityLossEncounter"),select}static normalizeRequest(options){if(void 0===options.event||void 0===options.cardType||void 0===options.rollType)return ui.notifications.error(game.i18n.format("CoC7.ErrorNotFound",{value:game.i18n.localize("CoC7.Roll")})),!1;if(![CoC7ChatMessage.CARD_TYPE_COMBINED,CoC7ChatMessage.CARD_TYPE_GROUP,CoC7ChatMessage.CARD_TYPE_NORMAL,CoC7ChatMessage.CARD_TYPE_OPPOSED,CoC7ChatMessage.CARD_TYPE_SAN_CHECK].includes(options.cardType))return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorInvalidCardType")})),!1;if(![CoC7ChatMessage.ROLL_TYPE_SKILL,CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE].includes(options.rollType))return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorInvalidRollType")})),!1;const config={options:{cardType:options.cardType,shiftKey:options.event.shiftKey,altKey:options.event.altKey,isCtrlKey:isCtrlKey(options.event),isCombat:options.event.currentTarget.classList?.contains("combat")},dialogOptions:{rollType:options.rollType,cardType:options.cardType,attribute:""}};switch(config.dialogOptions.rollType){case CoC7ChatMessage.ROLL_TYPE_SKILL:case CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:case CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:if(config.options.skillId=options.event.currentTarget.closest(".item")?.dataset.skillId,config.options.itemId=options.event.currentTarget.closest(".item")?.dataset.itemId,config.options.characteristic=options.event.currentTarget.parentElement.dataset.characteristic,config.options.attribute=options.event.currentTarget.parentElement.dataset.attrib,config.dialogOptions.attribute=config.options.attribute,config.options.actorId=options.event.currentTarget.closest("form").dataset.actorId,config.options.tokenKey=options.event.currentTarget.closest("form").dataset.tokenId,config.options.weaponAltSkill=options.event.currentTarget.classList.contains("alternativ-skill"),config.options.actor=options.actor,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL&&config.options.isCombat){const item=config.options.actor.items.get(config.options.itemId);if(!item)return!1;"weapon"===item.type&&(config.options.weaponName=item.name,config.dialogOptions.rollType=CoC7ChatMessage.ROLL_TYPE_COMBAT)}if(void 0===config.options.actorId||void 0===config.options.tokenKey&&void 0===config.options.actor)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorActor")})),!1;if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL&&void 0===config.options.skillId)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Entities.Skill")})),!1;if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC){if(void 0===config.options.characteristic)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Characteristic")})),!1;if(!game.user.isGM&&!config.options.actor.data.data.characteristics[config.options.characteristic]?.value)return!1}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE){if(void 0===config.options.attribute)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Attribute")})),!1;if(!game.user.isGM&&!config.options.actor.data.data.attribs[config.options.attribute]?.value)return!1}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT){if(void 0===config.options.itemId)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Entities.Weapon")})),!1;if(config.options.altKey)return!1}config.options.hasPlayerOwner=config.options.actor.hasPlayerOwner??!1,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC?(config.dialogOptions.disableFlatThresholdModifier=config.options.isCtrlKey,config.dialogOptions.disableFlatDiceModifier=config.options.isCtrlKey):(config.dialogOptions.disableFlatThresholdModifier=!1,config.dialogOptions.disableFlatDiceModifier=!1),config.dialogOptions.modifier=0,config.dialogOptions.difficulty=CoC7Check.difficultyLevel[game.settings.get("CoC7","defaultCheckDifficulty")],config.dialogOptions.flatDiceModifier=0,config.dialogOptions.flatThresholdModifier=0}return config}static async trigger(options={}){const config=CoC7ChatMessage.normalizeRequest(options);!1!==config&&(config.options.isCtrlKey&&game.user.isGM&&[CoC7ChatMessage.CARD_TYPE_NORMAL,CoC7ChatMessage.CARD_TYPE_SAN_CHECK].includes(config.dialogOptions.cardType)?CoC7ChatMessage.createLink(config):(config.options.shiftKey||await CoC7ChatMessage.createRoll(config),CoC7ChatMessage.runRoll(config)))}static createLink(config){switch(config.dialogOptions.rollType){case CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:case CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:case CoC7ChatMessage.ROLL_TYPE_COMBAT:case CoC7ChatMessage.ROLL_TYPE_SKILL:{const linkData={check:"check",type:"",name:"",hasPlayerOwner:config.options.hasPlayerOwner,actorKey:config.options.actor.actorKey,forceModifiers:config.options.shiftKey};if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL){if(linkData.type="skill",linkData.name=config.options.actor.items.get(config.options.skillId)?.shortName,!linkData.name)return}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC)linkData.type="characteristic",linkData.name=config.options.characteristic;else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE)config.options.altKey&&"san"===config.options.attribute?linkData.check="sanloss":(linkData.type="attribute",linkData.name=config.options.attribute);else{if(config.dialogOptions.rollType!==CoC7ChatMessage.ROLL_TYPE_COMBAT)return;linkData.check="item",linkData.type="weapon",linkData.name=config.options.weaponName}"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),CoC7LinkCreationDialog.fromLinkData(linkData).then((dlg=>dlg.render(!0)))}}}static async createRoll(config){const usage=await RollDialog.create(config.dialogOptions);if(usage){const cardType=usage.get("cardType");cardType&&(config.dialogOptions.cardType=cardType),config.dialogOptions.modifier=Number(usage.get("bonusDice")),config.dialogOptions.difficulty=Number(usage.get("difficulty")),config.dialogOptions.flatDiceModifier=Number(usage.get("flatDiceModifier")),config.dialogOptions.flatThresholdModifier=Number(usage.get("flatThresholdModifier"))}}static async runRoll(config){switch(config.dialogOptions.cardType){case CoC7ChatMessage.CARD_TYPE_SAN_CHECK:{const sanData=await SanDataDialog.create({promptLabel:!0});if(sanData){let sanMin=sanData.get("sanMin")||0,sanMax=sanData.get("sanMax")||0;const sanReason=sanData.get("sanReason");isNaN(Number(sanMin))||(sanMin=Number(sanMin)),isNaN(Number(sanMax))||(sanMax=Number(sanMax)),SanCheckCard.create(config.options.actor.actorKey,{sanMin,sanMax,sanReason},{sanModifier:config.dialogOptions.modifier,sanDifficulty:config.dialogOptions.difficulty,fastForward:config.options.shiftKey})}}break;case CoC7ChatMessage.CARD_TYPE_NORMAL:{const check=new CoC7Check;check.diceModifier=config.dialogOptions.modifier,check.difficulty=config.dialogOptions.difficulty,check.actor=config.options.tokenKey?config.options.tokenKey:config.options.actorId,check.flatDiceModifier=config.dialogOptions.flatDiceModifier,check.flatThresholdModifier=config.dialogOptions.flatThresholdModifier,check.standby=game.settings.get("CoC7","stanbyGMRolls")&&game.user.isGM&&config.options.hasPlayerOwner,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL?(check.skill=config.options.skillId,await check.roll()):config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE?await check.rollAttribute(config.options.attribute):await check.rollCharacteristic(config.options.characteristic),check.toMessage()}break;case CoC7ChatMessage.CARD_TYPE_OPPOSED:case CoC7ChatMessage.CARD_TYPE_COMBINED:{const check=new CoC7Check;check.actor=config.options.tokenKey?config.options.tokenKey:config.options.actorId,check.characteristic=config.options.characteristic,check.attribute=config.options.attribute,check.skillId=config.options.skillId,check.rollMode=game.settings.get("core","rollMode"),check.initiator=game.user.id;let data={};config.dialogOptions.cardType===CoC7ChatMessage.CARD_TYPE_OPPOSED?(data={type:OpposedCheckCard.defaultConfig.type,combat:config.options.isCombat,action:"new"},check.item=config.options.itemId,check.weaponAltSkill=config.options.weaponAltSkill,check.denyPush=!0,await check._perform()):(data={type:CombinedCheckCard.defaultConfig.type,action:"new"},check.difficulty=config.dialogOptions.difficulty),data.roll=check.JSONRollData,data._rollMode=game.settings.get("core","rollMode"),config.dialogOptions.cardType===CoC7ChatMessage.CARD_TYPE_OPPOSED?OpposedCheckCard.dispatch(data):CombinedCheckCard.dispatch(data)}}}}class RollDialog{static async create(options={}){options.difficulty&&(options.difficultyLevel={},CoC7Check.difficultyLevel.unknown===options.difficulty&&(options.difficultyLevel.unknown=!0),CoC7Check.difficultyLevel.regular===options.difficulty&&(options.difficultyLevel.regular=!0),CoC7Check.difficultyLevel.hard===options.difficulty&&(options.difficultyLevel.hard=!0),CoC7Check.difficultyLevel.extreme===options.difficulty&&(options.difficultyLevel.extreme=!0)),options.name&&!options.displayName&&(options.displayName=options.name);const unknownDifficultyDefault="unknown"===game.settings.get("CoC7","defaultCheckDifficulty"),data={allowFlatDiceModifier:game.settings.get("CoC7","allowFlatDiceModifier")&&!options.disableFlatDiceModifier,allowFlatThresholdModifier:game.settings.get("CoC7","allowFlatThresholdModifier")&&!options.disableFlatThresholdModifier,difficulty:CoC7Check.difficultyLevel,unknownDifficultyDefault,options};void 0!==options.cardType&&(data.cardTypes=CoC7ChatMessage.cardTypes(options));const html=await renderTemplate("systems/CoC7/templates/apps/bonus.html",data);return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:options.displayName?game.i18n.format("CoC7.BonusSelectionWindowNamed",{name:options.displayName}):game.i18n.localize("CoC7.BonusSelectionWindow"),content:html,buttons:{roll:{label:game.i18n.localize("CoC7.RollDice"),callback:html=>(formData=new FormData(html[0].querySelector("#bonus-roll-form")),resolve(formData))}},default:"roll",close:()=>{}});dlg.render(!0)}))}}const ECC_CLASS="enhanced-chat-card",PERMISSION_TYPE_GM="gm",PERMISSION_TYPE_SPEAKER="speaker",PERMISSION_TYPE_USER="user",PERMISSION_TYPE_BLACKLIST="blacklist",STATE_ON="switched-on",STATE_OFF="switched-off";async function updateMessage(messageId,newContent){const chatMessage=game.messages.get(messageId);await chatMessage.update({content:newContent})}async function advise(){}class EnhancedChatCardLib{constructor(){this.types=new Map,this.socket=null}static injectCSS(){let style=$("head").find("style");style?.length||($("head").append($('<style  type="text/css"></style>')),style=$("head").find("style")),style.append(".ecc-restricted {color: red}\n    .ecc-restricted:hover {cursor: not-allowed}")}static set socket(x){game.enhancedChatCardsLib||(game.enhancedChatCardsLib=new EnhancedChatCardLib),game.enhancedChatCardsLib.socket=x}static get socket(){if(game.enhancedChatCardsLib){if(game.enhancedChatCardsLib.socket)return game.enhancedChatCardsLib.socket;ui.notifications.error("ECC no socket")}else ui.notifications.error("ECC not Initialized")}static get types(){return game.enhancedChatCardsLib||(game.enhancedChatCardsLib=new EnhancedChatCardLib),game.enhancedChatCardsLib.types}static register(cardConstructors){cardConstructors.forEach((cardConstructor=>{EnhancedChatCardLib.types.get(cardConstructor.name)||EnhancedChatCardLib.types.set(cardConstructor.name,cardConstructor)}))}}class EnhancedChatCard{constructor(data={},options={}){this.initialize(data),this._options=options}initialize(data){this._data=data,this._data.flags||(this._data.flags={})}get options(){return mergeObject(this.constructor.defaultOptions,this._options)}get template(){return this.options.template}get cssClasses(){return this.options.classes?.join(" ")}get speaker(){return this.options.ooc?game.user:this.options.speaker&&ChatMessage.getSpeakerActor(this.options.speaker)?ChatMessage.getSpeakerActor(this.options.speaker):game.user}getData(){return{card:this,flags:this.flags,data:this.toObject(),options:this.options,css:this.cssClasses,user:game.user,speaker:this.speaker}}toObject(){if(!this._data)return;const data={};for(const k of Object.keys(this._data)){const v=this._data[k];data[k]=v instanceof Object?v.toObject?v.toObject():deepClone(v):v}return data}async toMessage(optionnalChatData={}){const html=await renderTemplate(this.template,this.getData()),htmlCardElement=$(html)[0];this.options.attachObject&&(htmlCardElement.dataset.object=escape(this.objectDataString)),htmlCardElement.dataset.eccClass=this.constructor.name,htmlCardElement.classList.add(...this.options.classes);const speaker=this.options.speaker&&!this.options.ooc?ChatMessage.getSpeaker(this.options.speaker):{},chatData=foundry.utils.mergeObject({user:game.user.id,speaker,flavor:game.i18n.localize(this.options.title),content:htmlCardElement.outerHTML},optionnalChatData);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"selfroll"===this.rollMode&&(chatData.whisper=[game.user.id]),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard(options={}){if(options.compute&&this.compute(),this.messageId){const html=await renderTemplate(this.template,this.getData()),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.objectDataString),htmlCardElement.dataset.eccClass=this.constructor.name,htmlCardElement.classList.add(...this.options.classes),game.enhancedChatCardsLib.socket.executeAsGM("updateMessage",this.messageId,htmlCardElement.outerHTML)}else this.toMessage()}async activateListeners(html){html.on("change","input,select,textarea",this._onChange.bind(this)),html.on("click",`.${ECC_CLASS} .ecc-switch`,this._onToggle.bind(this)),html.on("click",`.${ECC_CLASS} .submit`,this._onSubmit.bind(this)),html.on("focusout",`.${ECC_CLASS} input`,this._onChange.bind(this)),html.on("click",`.${ECC_CLASS} button`,this._onButton.bind(this)),html.on("keydown",`.${ECC_CLASS} form`,this._onKey.bind(this)),html.find("[data-ecc-visibility]").each((async(i,el)=>await this.setVisibility(el))),html.find("[data-ecc-permissions]").each((async(i,el)=>await this.setPermission(el))),html.find(`.${ECC_CLASS} .ecc-switch`).each(((i,el)=>this.setState(el))),html.find(`.${ECC_CLASS} input[type="radio"]`).each(((i,el)=>this.setRadioState(el)))}setState(element){element&&element.dataset.flag&&element.classList.add(this.flags[element.dataset.flag]?STATE_ON:STATE_OFF)}setRadioState(element){if(!element||!element.name)return;const splited=element.name.split(".");"data"===splited[0].toLowerCase()&&this._data&&void 0!==this._data[splited[1]]&&this._data[splited[1]]===element.value&&(element.checked=!0)}async setVisibility(element){if(!element.dataset.eccVisibility)return;await this.hasPerm(element.dataset.eccVisibility,!0)||(element.style.display="none")}async setPermission(element){if(!element.dataset.eccPermissions)return;await this.hasPerm(element.dataset.eccPermissions)||(element.classList.add("ecc-restricted"),$(element).is("input")&&("range"===element.type?$(element).attr("disabled",!0):$(element).attr("readonly",!0)),$(element).is("select")&&$(element).attr("disabled",!0))}async hasPerm(restrictedTo,vision=!1){if(!restrictedTo.length)return!0;let permissionsArray=restrictedTo.split(" ");const whiteList=!permissionsArray.includes(PERMISSION_TYPE_BLACKLIST);if(whiteList||(permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_BLACKLIST))),game.user.isGM)return!vision||(permissionsArray.includes(PERMISSION_TYPE_GM)?whiteList:!whiteList);if(permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_GM)),permissionsArray.includes(PERMISSION_TYPE_USER)){if(this.message.isAuthor)return whiteList;permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_USER))}if(permissionsArray.includes(PERMISSION_TYPE_SPEAKER)){const speaker=this.message.data.speaker;if(speaker.token&&speaker.scene){const actor=await fromUuid(`Scene.${speaker.scene}.Token.${speaker.token}`);if(actor&&actor.isOwner)return whiteList}else if(speaker.actor){const actor=game.actors.get(speaker.actor);if(actor&&actor.isOwner)return whiteList}permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_SPEAKER))}return permissionsArray.length&&ui.notifications.info("Array permission is not empty !"),!whiteList}static async bindListeners(html){const htmlCardElement=html[0].querySelector(`.${ECC_CLASS}`);if(!htmlCardElement)return;const card=await EnhancedChatCard.fromHTMLCardElement(htmlCardElement);card.assignObject(),card.activateListeners(html)}get flags(){return this._data.flags}assignObject(){}_onButton(event){const action=event.currentTarget.dataset.action;action?this[action]?this[action]&&this[action]({event,update:!0}):console.warn(`no ${action} action found for this card`):console.warn("no action associated with this button")}_onKey(event){return"Enter"===event.key&&this._onSubmit(event),"Enter"!==event.key}_onChange(event){if(this.options.submitOnChange)return this._onSubmit(event)}_onSubmit(event){event.preventDefault();const card=event.currentTarget.closest(`.${ECC_CLASS}`);if(!card)return;this._update(card)&&this.updateChatCard()}_update(card){const forms=card.querySelectorAll("form");let updates=!1;for(let i=0;i<forms.length;i++){const form=forms[i];let data=new FormDataExtended(form).toObject();data=foundry.utils.diffObject(this._data,foundry.utils.expandObject(data));for(const[key,value]of Object.entries(data.data))this._data[key]=value,updates=!0}return updates}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultOptions(){return{attachObject:!0,classes:[ECC_CLASS],exclude:[],excludeStartWith:"_",submitOnChange:!0,speaker:ChatMessage.getSpeaker(),ooc:!1}}get objectDataString(){return JSON.stringify(this._data,((key,value)=>{if(null!==value&&!this.options.exclude?.includes(key)&&!key.startsWith(this.options.excludeStartWith))return value}))}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.data.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(htmmlCard){if(!htmmlCard)return;if(!htmmlCard.dataset.eccClass)return;const cardData=JSON.parse(unescape(htmmlCard.dataset.object)),messageId=htmmlCard.closest(".message")?.dataset?.messageId;return await this.fromData(cardData,htmmlCard.dataset.eccClass,messageId)}static async fromData(data,cardClassName,messageId=null){const CardClass=game.enhancedChatCardsLib.types.get(cardClassName);if(!CardClass)return void console.error(`Unknown chat card type: ${cardClassName}`);const card=new CardClass(data);return messageId&&(card.messageId=messageId),await card.assignObject(),card}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this._data.flags[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this._data.flags[flagName]=!1)}toggleFlag(flagName){this.flags[flagName]=!this.flags[flagName]}async _onToggle(event){event.preventDefault();const target=event.currentTarget;if("action"in target.dataset)return this._onButton(event);if(target&&target.classList.contains("gm-select-only")&&!game.user.isGM)return;const flag=target.dataset.flag;if(!flag)return;const toggle=target.closest(".ecc-radio");if(toggle){const buttons=toggle.querySelectorAll(".ecc-switch");for(const b of buttons)this.unsetFlag(b.dataset.flag);this.setFlag(flag)}else this.toggleFlag(flag);const card=target.closest(`.${ECC_CLASS}`);this.options.submitOnChange&&(card&&this._update(card),this.updateChatCard())}}class TestCard extends EnhancedChatCard{static get defaultOptions(){return mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/chat/cards/test.html"})}getData(){const data=super.getData();return data.mySelectOptions={0:"option 1",1:"option 2"},data}}class CoC7ActorSheet extends ActorSheet{async getData(){const data=await super.getData(),actorData=this.actor.data.toObject(!1);if(data.data=actorData.data,data.editable=this.isEditable,data.isToken=this.actor.isToken,data.itemsByType={},data.skills={},data.combatSkills={},data.weapons={},data.rangeWpn=[],data.meleeWpn=[],data.actorFlags={},data.permissionLimited=!game.user.isGM&&(this.actor.data.permission[game.user.id]??this.actor.data.permission.default)===(CONST.DOCUMENT_OWNERSHIP_LEVELS||CONST.ENTITY_PERMISSIONS).LIMITED,data.isGM=game.user.isGM,data.alowUnlock="always"===game.settings.get("CoC7","playerUnlockSheetMode")||game.user.isGM||"creation"===game.settings.get("CoC7","playerUnlockSheetMode")&&game.settings.get("CoC7","charCreationEnabled"),"creation"===game.settings.get("CoC7","playerUnlockSheetMode")&&game.settings.get("CoC7","charCreationEnabled")&&(data["data.flags.locked"]=!1),["vehicle"].includes(this.actor.data.type)||(data.data.characteristics||(data.data.characteristics={str:{value:null,short:"CHARAC.STR",label:"CHARAC.Strength",formula:null},con:{value:null,short:"CHARAC.CON",label:"CHARAC.Constitution",formula:null},siz:{value:null,short:"CHARAC.SIZ",label:"CHARAC.Size",formula:null},dex:{value:null,short:"CHARAC.DEX",label:"CHARAC.Dexterity",formula:null},app:{value:null,short:"CHARAC.APP",label:"CHARAC.Appearance",formula:null},int:{value:null,short:"CHARAC.INT",label:"CHARAC.Intelligence",formula:null},pow:{value:null,short:"CHARAC.POW",label:"CHARAC.Power",formula:null},edu:{value:null,short:"CHARAC.EDU",label:"CHARAC.Education",formula:null}}),data.data.attribs||(data.data.attribs={hp:{value:null,max:null,short:"HP",label:"Hit points",auto:!0},mp:{value:null,max:null,short:"HP",label:"Magic points",auto:!0},lck:{value:null,short:"LCK",label:"Luck"},san:{value:null,max:99,short:"SAN",label:"Sanity",auto:!0},mov:{value:null,short:"MOV",label:"Movement rate",auto:!0},db:{value:null,short:"DB",label:"Damage bonus",auto:!0},build:{value:null,short:"BLD",label:"Build",auto:!0},armor:{value:null,auto:!1}}),data.data.biography||(data.data.biography={personalDescription:{type:"string",value:""}}),data.data.infos||(data.data.infos={occupation:"",age:"",sex:"",residence:"",birthplace:"",archetype:"",organization:"",playername:""}),data.data.flags||(data.data.flags={locked:!0,manualCredit:!1}),data.data.credit||(data.data.credit={monetarySymbol:null,multiplier:null,spent:null,assetsDetails:null}),data.data.development||(data.data.development={personal:null,occupation:null,archetype:null}),data.data.biography||(data.data.biography=[]),data.pulpRuleArchetype=game.settings.get("CoC7","pulpRuleArchetype"),data.pulpRuleOrganization=game.settings.get("CoC7","pulpRuleOrganization")),data.isDead=this.actor.dead,data.isDying=this.actor.dying,data.items){for(const item of data.items){if("skill"===item.type){if(item.data.properties.special){if(item.data.properties.fighting&&item.data.specialization!==game.i18n.localize("CoC7.FightingSpecializationName")){const itemToUpdate=this.actor.items.get(item._id);await itemToUpdate.update({"data.specialization":game.i18n.localize("CoC7.FightingSpecializationName")}),item.data.specialization=game.i18n.localize("CoC7.FightingSpecializationName")}if(item.data.properties.firearm&&item.data.specialization!==game.i18n.localize("CoC7.FirearmSpecializationName")){const itemToUpdate=this.actor.items.get(item._id);await itemToUpdate.update({"data.specialization":game.i18n.localize("CoC7.FirearmSpecializationName")}),item.data.specialization=game.i18n.localize("CoC7.FirearmSpecializationName")}}if("character"!==this.actor.data.type){if(isNaN(Number(item.data.value))){let value=null;const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=getProperty(this,value.substring(5)));try{value=(await new Roll(item.data.value,parsed).evaluate({async:!0})).total}catch(err){console.warn(`unable to parse formula :${item.data.value} for skill ${item.name}`),value=null}if(value){item.data.value=value;const itemToUpdate=this.actor.items.get(item._id);await itemToUpdate.update({"data.value":value})}}}else{const skill=this.actor.items.get(item._id);if(item.data.base=await skill.asyncBase(),item.data.value){const value=item.data.value;let updatedExp=(item.data.adjustments?.experience?parseInt(item.data.adjustments.experience):0)+parseInt(item.data.value)-skill.value;updatedExp<=0&&(updatedExp=null),await this.actor.updateEmbeddedDocuments("Item",[{_id:item._id,"data.adjustments.experience":updatedExp,"data.value":null}]),item.data.adjustments||(item.data.adjustments={}),item.data.adjustments.experience=updatedExp,item.data.value=value}else item.data.value=skill.value}}let list=data.itemsByType[item.type];list||(list=[],data.itemsByType[item.type]=list),list.push(item)}for(const itemType in data.itemsByType)data.itemsByType[itemType].sort(((a,b)=>a.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLocaleLowerCase().localeCompare(b.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLocaleLowerCase())));data.skills=data.items.filter((item=>"skill"===item.type)).sort(((a,b)=>a.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLocaleLowerCase().localeCompare(b.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLocaleLowerCase()))),data.meleeSkills=data.skills.filter((skill=>!0===skill.data.properties.combat&&!0===skill.data.properties.fighting)),data.rangeSkills=data.skills.filter((skill=>!0===skill.data.properties.combat&&!0===skill.data.properties.firearm));const cbtSkills=data.skills.filter((skill=>!0===skill.data.properties.combat));if(cbtSkills)for(const skill of cbtSkills)data.combatSkills[skill._id]=skill;const weapons=data.itemsByType.weapon;if(weapons)for(const weapon of weapons){if(weapon.usesAlternateSkill=!0===weapon.data.properties.auto||!0===weapon.data.properties.brst,weapon.data.ammo||(weapon.data.ammo=0),weapon.skillSet=!0,""===weapon.data.skill.main.id)weapon.skillSet=!1;else{if(data.combatSkills[weapon.data.skill.main.id]){const skill=this.actor.items.get(weapon.data.skill.main.id);weapon.data.skill.main.name=data.combatSkills[weapon.data.skill.main.id].name,weapon.data.skill.main.value=skill.value}else weapon.skillSet=!1;if(""!==weapon.data.skill.alternativ.id&&data.combatSkills[weapon.data.skill.alternativ.id]){const skill=this.actor.items.get(weapon.data.skill.alternativ.id);weapon.data.skill.alternativ.name=data.combatSkills[weapon.data.skill.alternativ.id].name,weapon.data.skill.alternativ.value=skill.value}}weapon.data._properties=[];for(const[key,value]of Object.entries(COC7.weaponProperties)){const property={};property.id=key,property.name=value,property.value=!0===weapon.data.properties[key],weapon.data._properties.push(property)}data.weapons[weapon._id]=weapon,weapon.data.properties.rngd?data.rangeWpn.push(weapon):data.meleeWpn.push(weapon)}const token=this.token;if(data.tokenId=token?`${token.parent?.id?token.parent.id:"TOKEN"}.${token.id}`:null,data.hasEmptyValueWithFormula=!1,data.data.characteristics)for(const characteristic of Object.values(data.data.characteristics))characteristic.value||(characteristic.editable=!0),characteristic.hard=Math.floor(characteristic.value/2),characteristic.extreme=Math.floor(characteristic.value/5),characteristic.value||characteristic.formula?characteristic.display=!0:characteristic.display=!1,!characteristic.value&&characteristic.formula&&(characteristic.hasEmptyValueWithFormula=!0),data.hasEmptyValueWithFormula=data.hasEmptyValueWithFormula||characteristic.hasEmptyValueWithFormula}if(["vehicle","container"].includes(this.actor.data.type))data.data.attribs.hp.auto=!1,data.data.attribs.mp.auto=!1,data.data.attribs.san.auto=!1,data.data.attribs.mov.auto=!1,data.data.attribs.db.auto=!1,data.data.attribs.build.auto=!1;else{const auto=this.actor.checkUndefinedAuto();data.data=mergeObject(data.data,auto)}return data.data.attribs.mov.value=this.actor.mov,data.data.attribs.db.value=this.actor.db,data.data.attribs.build.value=this.actor.build,void 0===this.actor.compendium&&this.actor.isOwner&&(this.actor.update({"data.attribs.mov.value":this.actor.mov},{render:!1}),this.actor.update({"data.attribs.mov.max":this.actor.mov},{render:!1}),this.actor.update({"data.attribs.db.value":this.actor.db},{render:!1}),this.actor.update({"data.attribs.build.current":this.actor.build},{render:!1}),this.actor.update({"data.attribs.build.value":this.actor.build},{render:!1})),data.data.attribs.mp.value<0&&(data.data.attribs.mp.value=null),data.data.attribs.san.value<0&&(data.data.attribs.san.value=null),data.data.attribs.hp.auto&&null!=data.data.characteristics.siz.value&&null!=data.data.characteristics.con.value&&(data.data.attribs.hp.max=this.actor.hpMax),data.data.attribs.mp.auto&&null!=data.data.characteristics.pow.value&&(data.data.attribs.mp.max=Math.floor(data.data.characteristics.pow.value/5)),data.data.attribs.san.auto&&(data.data.attribs.san.max=this.actor.sanMax),(data.data.attribs.mp.value>data.data.attribs.mp.max||null==data.data.attribs.mp.max)&&(data.data.attribs.mp.value=data.data.attribs.mp.max),(data.data.attribs.hp.value>data.data.attribs.hp.max||null==data.data.attribs.hp.max)&&(data.data.attribs.hp.value=data.data.attribs.hp.max),null==data.data.attribs.hp.value&&null!=data.data.attribs.hp.max&&(data.data.attribs.hp.value=data.data.attribs.hp.max),null==data.data.attribs.mp.value&&null!=data.data.attribs.mp.max&&(data.data.attribs.mp.value=data.data.attribs.mp.max),["vehicle"].includes(this.actor.data.type)||(null==data.data.attribs.san.value&&null!=data.data.characteristics.pow.value&&(data.data.attribs.san.value=data.data.characteristics.pow.value),data.data.attribs.san.value>data.data.attribs.san.max&&(data.data.attribs.san.value=data.data.attribs.san.max),data.data.biography instanceof Array&&data.data.biography.length&&(data.data.biography[0].isFirst=!0,data.data.biography[data.data.biography.length-1].isLast=!0),data.data.indefiniteInsanityLevel={},data.data.indefiniteInsanityLevel.value=data.data.attribs.san.dailyLoss?data.data.attribs.san.dailyLoss:0,data.data.indefiniteInsanityLevel.max=Math.floor(data.data.attribs.san.value/5)),data.showInventoryItems=!1,data.showInventoryBooks=!1,data.showInventorySpells=!1,data.showInventoryTalents=!1,data.showInventoryStatuses=!1,data.showInventoryWeapons=!1,data.hasConditions=this.actor.effects.size>0||void 0!==this.actor.data.data.conditions&&Object.keys(this.actor.data.data.conditions).filter((condition=>this.actor.data.data.conditions[condition].value)).length>0,data}static parseFormula(formula){let parsedFormula=formula;for(const[key,value]of Object.entries(COC7.formula.actorsheet))parsedFormula=parsedFormula.replace(key,value);return parsedFormula}get tokenKey(){throw ui.notifications.error("DEPRECATED SHOULD NOT HAPPEN!"),new Error("base.js get tokenKey(): DEPRECATED SHOULD NOT HAPPEN!")}onCloseSheet(){}activateListeners(html){if(super.activateListeners(html),this.actor.isOwner&&void 0===this.actor.compendium){html.find(".characteristic-label").on("dragstart",(event=>this._onDragCharacteristic(event))),html.find(".attribute-label").on("dragstart",(event=>this._onDragAttribute(event))),html.find(".san-check").on("dragstart",(event=>this._onDragSanCheck(event))),html.find(".characteristic-label").contextmenu(this._onOpposedRoll.bind(this)),html.find(".skill-name.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".attribute-label.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".weapon-name.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".characteristic-label").click(this._onRollCharacteriticTest.bind(this)),html.find(".skill-name.rollable").click(this._onRollSkillTest.bind(this)),html.find(".skill-image").click(this._onRollSkillTest.bind(this)),html.find(".attribute-label.rollable").click(this._onRollAttribTest.bind(this)),html.find(".lock").click(this._onLockClicked.bind(this)),html.find(".flag").click(this._onFlagClicked.bind(this)),html.find(".formula").click(this._onFormulaClicked.bind(this)),html.find(".roll-characteritics").click(this._onRollCharacteriticsValue.bind(this)),html.find(".average-characteritics").click(this._onAverageCharacteriticsValue.bind(this)),html.find(".toggle-switch").click(this._onToggle.bind(this)),html.find(".auto-toggle").click(this._onAutoToggle.bind(this)),(game.user.isGM||game.settings.get("CoC7","statusPlayerEditable"))&&(html.find(".reset-counter").click(this._onResetCounter.bind(this)),html.find(".condition-monitor").click(this._onConditionToggle.bind(this)),html.find(".is-dying").click(this.heal.bind(this)),html.find(".is-dead").click(this.revive.bind(this))),html.find(".dying-check").click(this.checkForDeath.bind(this)),html.find(".item .item-image").click((event=>this._onItemRoll(event))),html.find(".weapon-name.rollable").click((event=>this._onWeaponRoll(event))),html.find(".weapon-skill.rollable").click((async event=>this._onWeaponSkillRoll(event))),html.find(".reload-weapon").click((event=>this._onReloadWeapon(event))),html.find(".reload-weapon").on("contextmenu",(event=>this._onReloadWeapon(event))),html.find(".add-ammo").click(this._onAddAmo.bind(this)),html.find(".read-only").dblclick(this._toggleReadOnly.bind(this)),html.on("click",".weapon-damage",this._onWeaponDamage.bind(this)),html.find(".inventory-header").click(this._onInventoryHeader.bind(this)),html.find(".section-header").click(this._onSectionHeader.bind(this));const wheelInputs=html.find(".attribute-value");for(const wheelInput of wheelInputs)wheelInput.addEventListener("wheel",(event=>this._onWheel(event)),{passive:!0})}this.options.editable&&(html.find(".show-detail").click((event=>this._onItemSummary(event))),html.find(".item-popup").click(this._onItemPopup.bind(this)),html.find(".show-detail").dblclick((event=>this._onRenderItemSheet(event))),html.find(".item-edit").click((event=>this._onRenderItemSheet(event))),html.find(".item-delete").click((async ev=>{const li=$(ev.currentTarget).parents(".item"),itemToDelete=this.actor.items.get(li.data("itemId"),{strict:!0});await itemToDelete.delete(),li.slideUp(200,(()=>this.render(!1)))})),html.find(".add-item").click((ev=>{switch(ev.currentTarget.dataset.type){case"book":this.actor.createEmptyBook(ev);break;case"item":this.actor.createEmptyItem(ev);break;case"skill":this.actor.createEmptySkill(ev);break;case"spell":this.actor.createEmptySpell(ev);break;case"weapon":{const properties={};ev.currentTarget.dataset.melee?properties.melee=!0:ev.currentTarget.dataset.rngd&&(properties.rngd=!0),this.actor.createEmptyWeapon(ev,properties)}}})),html.find(".item-trade").click(this._onTradeItem.bind(this)),html.find(".add-new-section").click((()=>{this.actor.createBioSection()})),html.find(".delete-section").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.deleteBioSection(index)})),html.find(".move-section-up").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.moveBioSectionUp(index)})),html.find(".move-section-down").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.moveBioSectionDown(index)})),html.find(".development-flag").dblclick((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("developement")})),html.find(".occupation-skill-flag.clickable").click((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("occupation")})),html.find(".archetype-skill-flag.clickable").click((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("archetype")})),html.find(".skill-developement").click((event=>{this.actor.developementPhase(event.shiftKey)})),html.find(".luck-development").click((event=>{event.detail&&1!==event.detail||this.actor.developLuck(event.shiftKey)})),html.find(".clear_conditions").click((event=>{if(void 0!==this.actor.data.data.conditions){const disable={};for(const condition in this.actor.data.data.conditions)void 0!==this.actor.data.data.conditions[condition].value&&!0===this.actor.data.data.conditions[condition].value&&(disable[`data.conditions.${condition}.value`]=!1);Object.keys(disable).length>0&&this.actor.update(disable)}const effects=this.actor.effects.map((effect=>effect.id));effects.length>0&&this.actor.deleteEmbeddedDocuments("ActiveEffect",effects)})),html.find("a.coc7-link").on("click",(event=>CoC7Parser._onCheck(event))),html.find("a.coc7-link").on("dragstart",(event=>CoC7Parser._onDragCoC7Link(event))),html.find(".test-trigger").click((async event=>{new TestCard({}).toMessage()})),html.find(".skill-name.rollable").mouseenter(this.toolTipSkillEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".characteristic-label").mouseenter(this.toolTipCharacteristicEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".attribute-label.rollable").mouseenter(this.toolTipAttributeEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".auto-toggle").mouseenter(this.toolTipAutoEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".item-control.development-flag").mouseenter(this.toolTipFlagForDevelopment.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)))}toolTipSkillEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const isCombat=game.CoC7Tooltips.ToolTipHover.classList?.contains("combat"),item=game.CoC7Tooltips.ToolTipHover.closest(".item");if(void 0!==item){const skillId=item.dataset.skillId,skill=sheet.actor.items.get(skillId);let toolTip=game.i18n.format(isCombat?"CoC7.ToolTipCombat":"CoC7.ToolTipSkill",{skill:skill.name,regular:skill.value,hard:Math.floor(skill.value/2),extreme:Math.floor(skill.value/5)});game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}toolTipCharacteristicEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const char=game.CoC7Tooltips.ToolTipHover.closest(".char-box");if(void 0!==char&&char){const charId=char.dataset.characteristic,characteristic=sheet.actor.characteristics[charId];let toolTip=game.i18n.format("CoC7.ToolTipSkill",{skill:characteristic.label,regular:characteristic.value??0,hard:characteristic.hard??0,extreme:characteristic.extreme??0});game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}toolTipAttributeEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const attrib=game.CoC7Tooltips.ToolTipHover.closest(".attribute");if(void 0!==attrib){const attributeId=attrib.dataset.attrib;let toolTip="";const attributes=sheet.actor.data.data.attribs[attributeId];switch(attributeId){case"lck":toolTip=game.i18n.format("CoC7.ToolTipSkill",{skill:attributes.label,regular:attributes.value??0,hard:Math.floor((attributes.value??0)/2),extreme:Math.floor((attributes.value??0)/5)}),game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip);break;case"db":toolTip=game.i18n.localize("CoC7.ToolTipDB"),game.CoC7Tooltips.displayToolTip(toolTip);break;case"san":toolTip=game.i18n.format("CoC7.ToolTipSanity",{skill:"Sanity",regular:attributes.value??0,hard:Math.floor((attributes.value??0)/2),extreme:Math.floor((attributes.value??0)/5)}),game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.i18n.localize("CoC7.ToolTipKeeperSanity")+(game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):"")})),game.CoC7Tooltips.displayToolTip(toolTip)}}}}),delay)}}toolTipAutoEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));delay>0&&(game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const toolTip=game.i18n.localize("CoC7.ToolTipAutoToggle");game.CoC7Tooltips.displayToolTip(toolTip)}}),delay))}toolTipFlagForDevelopment(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const item=game.CoC7Tooltips.ToolTipHover.closest(".item");if(void 0!==item){const skillId=item.dataset.skillId,skill=sheet.actor.items.get(skillId),toolTip=game.i18n.format("CoC7.ToolTipSkillFlagToggle",{status:game.i18n.localize(skill.data.data.flags.developement?"CoC7.ToolTipSkillFlagged":"CoC7.ToolTipSkillUnflagged")});game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}_onRenderItemSheet(event){const li=$(event.currentTarget).parents(".item");this.actor.items.get(li.data("itemId")).sheet.render(!0)}async _onTradeItem(event){const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("itemId"));let content="<p>"+game.i18n.localize("CoC7.MessageSelectUserToGiveTo");const message={actorFrom:this.actor.id,scene:null,actorTo:this.actor.id,item:item.id};this.token?.actor&&(message.actorFrom=this.token.id,message.scene=this.token.parent.id);const actors=game.actors.filter((e=>{if(!["character","npc","creature","container"].includes(e.type))return!1;if(this.actor.id===e.id)return!1;let visible=!1;for(const[k,v]of Object.entries(e.data.permission))"default"!==k&&k!==game.user.id||(visible=visible||v!==(CONST.DOCUMENT_OWNERSHIP_LEVELS||CONST.ENTITY_PERMISSIONS).NONE);return visible}));content+='<form id="selectform"><select name="user">';for(const actor of actors)content=content+'<option value="'+actor.id+'">'+actor.name+"</option>";content+="</select></form></p>",message.actorTo=await new Promise((resolve=>{new Dialog({title:game.i18n.localize("CoC7.MessageTitleSelectUserToGiveTo"),content,buttons:{confirm:{label:game.i18n.localize("CoC7.Validate"),callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)if("user"===name)return resolve(value)}}},default:"confirm",close:()=>{}}).render(!0)})),await game.CoC7socket.executeAsGM("gmtradeitemto",message)}_onDragCharacteristic(event){const box=event.currentTarget.parentElement,data={CoC7Type:"link",linkType:"coc7-link",check:"check",type:"characteristic",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,name:box.dataset.characteristic,icon:null};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}_onDragAttribute(event){const box=event.currentTarget.parentElement,data={CoC7Type:"link",linkType:"coc7-link",check:"check",type:"attribute",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,name:box.dataset.attrib,icon:null};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}_onDragSanCheck(event){const sanMin=event.currentTarget.querySelector(".san-value.pass"),sanMax=event.currentTarget.querySelector(".san-value.failed"),data={CoC7Type:"link",linkType:"coc7-link",check:"sanloss",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,sanMin:sanMin.innerText,sanMax:sanMax.innerText,icon:null};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}async _onDrop(event){await super._onDrop(event)}async _onConditionToggle(event){event.preventDefault(),event.currentTarget.dataset.condition&&await this.actor.toggleCondition(event.currentTarget.dataset.condition)}async revive(){game.user.isGM&&this.actor.unsetCondition(COC7.status.dead)}async heal(){game.user.isGM&&this.actor.unsetCondition(COC7.status.dying)}async checkForDeath(event){const conCheck=new CoC7ConCheck(this.actor.isToken?this.actor.tokenKey:this.actor.id);conCheck.stayAlive=!0,conCheck.toMessage(event.shiftKey)}async _onResetCounter(event){event.preventDefault();const counter=event.currentTarget.dataset.counter,oneFifthSanity=" / "+Math.floor(this.actor.data.data.attribs.san.value/5);this.actor.setOneFifthSanity(oneFifthSanity),counter&&this.actor.resetCounter(counter)}async _onAutoToggle(event){if(event.currentTarget.closest(".attribute")){const attrib=event.currentTarget.closest(".attribute").dataset.attrib;this.actor.toggleAttribAuto(attrib)}}async _onToggle(event){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);weapon&&weapon.toggleProperty(event.currentTarget.dataset.property,event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode)}async _onRollCharacteriticsValue(){await this.actor.rollCharacteristicsValue()}async _onAverageCharacteriticsValue(){this.actor.averageCharacteristicsValue()}async _onLockClicked(event){event.preventDefault();const isLocked=this.actor.locked;this.actor.locked=!isLocked,Hooks.call("actorLockClickedCoC7",[!isLocked])}async _onFlagClicked(event){event.preventDefault();const flagName=event.currentTarget.dataset.flag;this.actor.toggleActorFlag(flagName)}async _onFormulaClicked(event){event.preventDefault(),this.actor.toggleActorFlag("displayFormula")}async _onWheel(event){let value=parseInt(event.currentTarget.value);switch(event.deltaY>0&&(value=0===value?0:value-1),event.deltaY<0&&(value+=1),event.currentTarget.name){case"data.attribs.hp.value":case"data.attribs.build.current":this.actor.setHp(value);break;case"data.attribs.mp.value":this.actor.setMp(value);break;case"data.attribs.san.value":this.actor.setSan(value);break;case"data.attribs.lck.value":this.actor.setLuck(value)}}_toggleReadOnly(event){event.currentTarget.readOnly=!event.currentTarget.readOnly,event.currentTarget.classList.toggle("read-only")}_onItemSummary(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id")),chatData=item.getChatData({secrets:this.actor.isOwner});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$('<div class="item-summary"></div>'),labels=$('<div class="item-labels"></div>');for(const p of chatData.labels)labels.append(`<div class="item-label"><span class="label-name">${p.name} :</span><span class="label-value">${p.value}</span></div>`);if(div.append(labels),div.append($(`<div class="item-description">${chatData.description.value}</div>`)),item.data.data.properties?.spcl){const specialDiv=$(`<div class="item-special">${chatData.description.special}</div>`);div.append(specialDiv)}const props=$('<div class="item-properties"></div>');for(const p of chatData.properties)props.append(`<div class="tag item-property">${game.i18n.localize(p)}</div>`);div.append(props),li.append(div.hide()),CoC7Parser.bindEventsHandler(div),div.slideDown(200)}li.toggleClass("expanded")}_onSectionHeader(event){event.preventDefault();const section=event.currentTarget.closest("section"),pannelClass=event.currentTarget.dataset.pannel,pannel=$(section).find(`.pannel.${pannelClass}`);pannel.hasClass("expanded")?pannel.slideUp(200):pannel.slideDown(200),pannel.toggleClass("expanded")}_onInventoryHeader(event){event.preventDefault(),$(event.currentTarget).siblings("li").toggle()}async _onItemPopup(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id"));CoC7ActorSheet.popupSkill(item)}static async popupSkill(skill){skill.data.data.description.enrichedValue=TextEditor.enrichHTML(skill.data.data.description.value);new Dialog({title:game.i18n.localize("CoC7.SkillDetailsWindow"),content:skill,buttons:{},close:()=>{}},{classes:["coc7","sheet","skill"],width:520,height:480,scrollY:[".item-description"],template:"systems/CoC7/templates/apps/skill-details.html"}).render(!0)}async _onItemRoll(event){event.preventDefault()}async _onWeaponRoll(event){event.preventDefault();const itemId=event.currentTarget.closest("li").dataset.itemId,fastForward=event.shiftKey,weapon=this.actor.items.get(itemId);let actorKey;if(actorKey=this.token?this.actor.isToken&&game.actors.tokens[this.token.id]?`TOKEN.${this.token.id}`:`${this.token.parent.id}.${this.token.id}`:this.actor.id,isCtrlKey(event)&&game.user.isGM){const linkData={check:"item",type:"weapon",name:weapon.name,hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey};CoC7LinkCreationDialog.fromLinkData(linkData).then((dlg=>dlg.render(!0)))}else{let proceedWithoutTarget;if(game.user.targets.size<=0&&(proceedWithoutTarget=await new Promise((resolve=>{const data={title:" ",content:game.i18n.format("CoC7.NoTargetSelected",{weapon:weapon.name}),buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>resolve(!1)},proceed:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>resolve(!0)}},default:"cancel",classes:["coc7","dialog"]};new Dialog(data).render(!0)}))),game.user.targets.size>0||proceedWithoutTarget){if(!weapon.data.data.properties.rngd){game.user.targets.size>1&&ui.notifications.warn(game.i18n.localize("CoC7.WarnTooManyTarget"));new CoC7MeleeInitiator(actorKey,itemId,fastForward).createChatCard()}if(weapon.data.data.properties.rngd){new CoC7RangeInitiator(actorKey,itemId,fastForward).createChatCard()}}}}async _onReloadWeapon(event){const itemId=event.currentTarget.closest(".item")?event.currentTarget.closest(".item").dataset.itemId:null;if(!itemId)return;const weapon=this.actor.items.get(itemId);0===event.button?event.shiftKey?await weapon.reload():await weapon.addBullet():2===event.button&&(event.shiftKey?await weapon.setBullets(0):await weapon.shootBullets(1))}async _onAddAmo(event){const itemId=event.currentTarget.closest(".item")?event.currentTarget.closest(".item").dataset.itemId:null;if(!itemId)return;const weapon=this.actor.items.get(itemId);await weapon.addBullet()}async _onWeaponSkillRoll(event){event.preventDefault();const skillId=event.currentTarget.dataset.skillId,actorId=event.currentTarget.closest("form").dataset.actorId,tokenKey=event.currentTarget.closest("form").dataset.tokenId,itemId=event.currentTarget.closest("li")?event.currentTarget.closest("li").dataset.itemId:null,check=new CoC7Check;if(!event.shiftKey){const usage=await RollDialog.create();usage&&(check.diceModifier=usage.get("bonusDice"),check.difficulty=usage.get("difficulty"),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=tokenKey||actorId,check.skill=skillId,check.item=itemId,await check.roll(),check.toMessage()}async _onWeaponDamage(event){event.preventDefault();const itemId=event.currentTarget.closest(".weapon").dataset.itemId,range=event.currentTarget.closest(".weapon-damage").dataset.range,damageChatCard=new DamageCard({fastForward:event.shiftKey,range});damageChatCard.actorKey=this.actor.tokenKey,damageChatCard.itemId=itemId,damageChatCard.updateChatCard()}async _onOpposedRoll(event){if(event.preventDefault(),"db"===event.currentTarget.parentElement.dataset.attrib)return;const data={rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_OPPOSED,event,actor:this.actor};event.currentTarget.classList.contains("characteristic-label")?data.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:event.currentTarget.classList.contains("attribute-label")&&(data.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE),event.altKey&&(data.cardType=CoC7ChatMessage.CARD_TYPE_COMBINED),CoC7ChatMessage.trigger(data)}async _onRollCharacteriticTest(event){event.preventDefault(),event.currentTarget.classList.contains("flagged4dev")||CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor})}async _onRollAttribTest(event){event.preventDefault();const attrib=event.currentTarget.parentElement.dataset.attrib;if("db"!==attrib)CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,cardType:event.altKey&&"san"===attrib?CoC7ChatMessage.CARD_TYPE_SAN_CHECK:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor});else if(!/^-{0,1}\d+$/.test(event.currentTarget.parentElement.dataset.rollFormula)){const r=new Roll(event.currentTarget.parentElement.dataset.rollFormula);await r.roll({async:!0}),isNaN(r.total)||void 0===r.total||r.toMessage({speaker:ChatMessage.getSpeaker(),flavor:game.i18n.localize("CoC7.BonusDamageRoll")})}}_onRollSkillTest(event){event.preventDefault(),event.currentTarget.classList.contains("flagged4dev")||CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor})}async _updateObject(event,formData){if(event.currentTarget&&event.currentTarget.classList){if(event.currentTarget.classList.contains("skill-adjustment")){const item=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);if(item){const value=event.currentTarget.value?parseInt(event.currentTarget.value):null;if(event.currentTarget.value?isNaN(value)||await item.update({[event.currentTarget.name]:value}):await item.update({[event.currentTarget.name]:null}),game.i18n.localize(COC7.creditRatingSkillName)===item.name){const creditValue=(item.value||0)-(item.data.data.adjustments?.experience||0);(creditValue>Number(this.actor.occupation.data.data.creditRating.max)||creditValue<Number(this.actor.occupation.data.data.creditRating.min))&&ui.notifications.warn(game.i18n.format("CoC7.CreditOutOfRange",{min:Number(this.actor.occupation.data.data.creditRating.min),max:Number(this.actor.occupation.data.data.creditRating.max)}))}}}if(event.currentTarget.classList.contains("attribute-value")&&"data.attribs.san.value"===event.currentTarget.name)return void this.actor.setSan(parseInt(event.currentTarget.value));if(event.currentTarget.classList.contains("text-area"))return void this.actor.updateTextArea(event.currentTarget);if(event.currentTarget.classList.contains("bio-section-value")){const index=parseInt(event.currentTarget.closest(".bio-section").dataset.index);await this.actor.updateBioValue(index,event.currentTarget.value)}if(event.currentTarget.classList.contains("bio-section-title")){const index=parseInt(event.currentTarget.closest(".bio-section").dataset.index);this.actor.updateBioTitle(index,event.currentTarget.value)}if(event.currentTarget.classList.contains("npc-skill-score")){const skill=this.actor.items.get(event.currentTarget.closest(".item").dataset.skillId);skill&&await skill.updateValue(event.currentTarget.value)}if(event.currentTarget.classList.contains("skill-name")||event.currentTarget.classList.contains("item-name")){const item=this.actor.items.get(event.currentTarget.closest(".item").dataset.skillId);if(item){const data={};if(item.data.data.properties.special){const parts=CoC7Item.getNamePartsSpec(event.currentTarget.value,item.data.data.specialization);data.name=parts.name,data["data.skillName"]=parts.skillName,data["data.specialization"]=parts.specialization}else data["data.skillName"]=event.currentTarget.value,data.name=event.currentTarget.value;await item.update(data)}}if(event.currentTarget.classList.contains("characteristic-formula")&&0!==event.currentTarget.value.length){const r=new Roll(event.currentTarget.value);await r.roll({async:!0}),(isNaN(r.total)||void 0===r.total)&&(ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:event.currentTarget.value})),formData[event.currentTarget.name]=game.i18n.format("CoC7.ErrorInvalid"))}if(event.currentTarget.classList.contains("attribute-value")&&0!==event.currentTarget.value.length&&"db"===event.currentTarget.closest(".attribute").dataset.attrib){const r=new Roll(event.currentTarget.value);await r.roll({async:!0}),(isNaN(r.total)||void 0===r.total)&&(ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:event.currentTarget.value})),formData[event.currentTarget.name]=game.i18n.format("CoC7.ErrorInvalid"))}if(event.currentTarget.classList.contains("weapon-skill")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId),skill=this.actor.items.get(event.currentTarget.options[event.currentTarget.selectedIndex].value);if(weapon&&skill)switch(event.currentTarget.dataset.skill){case"main":await weapon.update({"data.skill.main.id":skill.id,"data.skill.main.name":skill.name});break;case"alternativ":await weapon.update({"data.skill.alternativ.id":skill.id,"data.skill.alternativ.name":skill.name})}}if(event.currentTarget.classList.contains("weapon-name")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);weapon&&await weapon.update({name:event.currentTarget.value})}if(event.currentTarget.classList.contains("damage-formula")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);if(weapon)if(0!==event.currentTarget.value.length){const r=new Roll(event.currentTarget.value);if(await r.roll({async:!0}),isNaN(r.total)||void 0===r.total)ui.notifications.error(event.currentTarget.value+" is not a valid formula");else switch(event.currentTarget.dataset.range){case"normal":await weapon.update({"data.range.normal.damage":event.currentTarget.value});break;case"long":await weapon.update({"data.range.long.damage":event.currentTarget.value});break;case"extreme":await weapon.update({"data.range.extreme.damage":event.currentTarget.value})}}else switch(event.currentTarget.dataset.range){case"normal":await weapon.update({"data.range.normal.damage":null});break;case"long":await weapon.update({"data.range.long.damage":null});break;case"extreme":await weapon.update({"data.range.extreme.damage":null})}}}return this.object.update(formData)}}class CoC7NPCSheet extends CoC7ActorSheet{async getData(){const data=await super.getData();return data.allowFormula=!0,data.displayFormula=this.actor.getActorFlag("displayFormula"),void 0===data.displayFormula&&(data.displayFormula=!1),data.hasSan=null!==data.data.attribs.san.value,data.hasMp=null!==data.data.attribs.mp.value,data.hasLuck=null!==data.data.attribs.lck.value,data.isCreature=!1,data.showInventoryItems=Object.prototype.hasOwnProperty.call(data.itemsByType,"item")||!data.data.flags.locked,data.showInventoryBooks=Object.prototype.hasOwnProperty.call(data.itemsByType,"book")||!data.data.flags.locked,data.showInventorySpells=Object.prototype.hasOwnProperty.call(data.itemsByType,"spell")||!data.data.flags.locked,data.showInventoryTalents=Object.prototype.hasOwnProperty.call(data.itemsByType,"talent")||!data.data.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),data.showInventoryStatuses=Object.prototype.hasOwnProperty.call(data.itemsByType,"status")||!data.data.flags.locked,data.showInventoryWeapons=!1,data.hasInventory=data.showInventoryItems||data.showInventoryBooks||data.showInventorySpells||data.showInventoryTalents||data.showInventoryStatuses||data.showInventoryWeapons,data}activateListeners(html){super.activateListeners(html),html.find(".roll-san").click(this._onSanCheck.bind(this)),this.actor.isOwner&&html.find('[name="data.attribs.hp.value"]').change((event=>this.actor.setHealthStatusManually(event)))}async _onSanCheck(event){if(event.preventDefault(),this.actor.data.data.special.sanLoss.checkPassed||this.actor.data.data.special.sanLoss.checkFailled)if((event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode)&&game.user.isGM){let difficulty,modifier;if(!event.shiftKey){const usage=await RollDialog.create({disableFlatDiceModifier:!0});usage&&(modifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")))}const linkData={check:"sanloss",sanMin:this.actor.data.data.special.sanLoss.checkPassed,sanMax:this.actor.data.data.special.sanLoss.checkFailled,sanReason:this.actor.data.data.infos.type?.length?this.actor.data.data.infos.type:this.actor.name,tokenKey:this.actor.actorKey};"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),void 0!==modifier&&(linkData.modifier=modifier),void 0!==difficulty&&(linkData.difficulty=difficulty);const link=CoC7Parser.createCoC7Link(linkData);link&&chatHelper.createMessage(null,game.i18n.format("CoC7.MessageCheckRequestedWait",{check:link}))}else{const sanData={sanMax:this.actor.sanLossCheckFailled,sanMin:this.actor.sanLossCheckPassed,sanReason:this.actor.data.data.infos.type?.length?this.actor.data.data.infos.type:this.actor.name,tokenKey:this.actor.actorKey};SanCheckCard.checkTargets(sanData,event.shiftKey)}}onCloseSheet(){this.actor.unsetActorFlag("displayFormula"),super.onCloseSheet()}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","npc"],dragDrop:[{dragSelector:".item",dropSelector:null}],template:"systems/CoC7/templates/actors/npc-sheet.html",width:580,resizable:!0})}async _updateObject(event,formData){if(!(event.currentTarget&&event.currentTarget.classList&&event.currentTarget.classList.contains("characteristic-score")))return super._updateObject(event,formData);this.actor.setCharacteristic(event.currentTarget.name,event.currentTarget.value)}static forceAuto(app,html){const cell=html.find(".pannel.expanded.resizededitor");cell.length&&cell.height(Math.max(200,(html.height()-cell.position().top-8)/cell.length)+"px")}setPosition(a){super.setPosition(a),CoC7NPCSheet.forceAuto(a,this._element)}}class CoC7CreatureSheet extends CoC7NPCSheet{async getData(){const data=await super.getData();return data.isCreature=!0,data}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","npc","creature"]})}}class CoC7CreateMythosEncounter extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7"],title:game.i18n.localize("CoC7.SanityLossTypeDialogTitle"),template:"systems/CoC7/templates/apps/sanity-loss-type.hbs",height:"auto"})}async getData(){const data=await super.getData();return data.isImmunity="immunity"===data.object.type,data}activateListeners(html){html.find(".field_type").change(this._onSelectChange.bind(this)),html.find(".dialog-button").click(this._onButtonClick.bind(this)),super.activateListeners(html)}_onButtonClick(event){if("add"===event.currentTarget.dataset.button){const html=$(event.currentTarget).closest(".window-content"),type=html.find(".field_type").val(),name=html.find(".field_name").val(),value=parseInt(html.find(".field_value").val()),sanityLossEvents=this.object.actor.data.data.sanityLossEvents??[];sanityLossEvents.push({type:name,totalLoss:value,immunity:"immunity"===type}),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)})),this.object.actor.update({"data.sanityLossEvents":sanityLossEvents})}this.close()}_onSelectChange(event){const html=$(event.currentTarget).closest(".window-content");this.object.name=html.find(".field_name").val(),this.object.type=html.find(".field_type").val(),this.render(!0)}async _updateObject(event,formData){}}class CoC7CharacterSheet extends CoC7ActorSheet{_getHeaderButtons(){if("CoC7CharacterSheet"===this.constructor.name){this.summarized||(this.summarized=!1);let buttons=super._getHeaderButtons();return buttons=[{label:this.summarized?game.i18n.localize("CoC7.Maximize"):game.i18n.localize("CoC7.Summarize"),class:"test-extra-icon",icon:this.summarized?"fas fa-window-maximize":"fas fa-window-minimize",onclick:event=>this.toggleSheetMode(event)}].concat(buttons),buttons}return super._getHeaderButtons()}async toggleSheetMode(event){this.summarized=!this.summarized,await this.close();const options=this.summarized?{classes:["coc7","actor","character","summarized"],height:200,resizable:!1,width:700}:CoC7CharacterSheet.defaultOptions;await this.render(!0,options)}async getData(){const data=await super.getData();if(this.isEditable&&void 0===this.actor.getFlag("CoC7","skillListMode")&&await this.actor.setFlag("CoC7","skillListMode",!1),this.isEditable&&void 0===this.actor.getFlag("CoC7","skillShowUncommon")&&await this.actor.setFlag("CoC7","skillShowUncommon",!0),data.skillListModeValue=this.actor.getFlag("CoC7","skillListMode")??!1,data.skillShowUncommon=this.actor.getFlag("CoC7","skillShowUncommon")??!0,data.showIconsOnly=game.settings.get("CoC7","showIconsOnly"),this.actor.occupation?(data.data.infos.occupation=this.actor.occupation.name,data.data.infos.occupationSet=!0):data.data.infos.occupationSet=!1,this.actor.archetype?(data.data.infos.archetype=this.actor.archetype.name,data.data.infos.archetypeSet=!0):data.data.infos.archetypeSet=!1,data.totalExperience=this.actor.experiencePoints,data.totalOccupation=this.actor.occupationPointsSpent,data.invalidOccupationPoints=Number(this.actor.occupationPointsSpent)!==Number(this.actor.data.data.development?.occupation),data.totalArchetype=this.actor.archetypePointsSpent,data.invalidArchetypePoints=Number(this.actor.archetypePointsSpent)!==Number(this.actor.data.data.development?.archetype),data.totalPersonal=this.actor.personalPointsSpent,data.invalidPersonalPoints=Number(this.actor.personalPointsSpent)!==Number(this.actor.data.data.development?.personal),data.creditRatingMax=Number(this.actor.occupation?.data.data.creditRating.max),data.creditRatingMin=Number(this.actor.occupation?.data.data.creditRating.min),data.invalidCreditRating=this.actor.creditRatingSkill?.data.data.adjustments?.occupation>data.creditRatingMax||this.actor.creditRatingSkill?.data.data.adjustments?.occupation<data.creditRatingMin,data.pulpTalentCount=data.itemsByType.talent?.length?data.itemsByType.talent?.length:0,data.minPulpTalents=this.actor.archetype?.data.data.talents?this.actor.archetype?.data.data.talents:0,data.invalidPulpTalents=data.pulpTalentCount<data.minPulpTalents,data.hasDevelopmentPhase=this.actor.hasDevelopmentPhase,data.allowDevelopment=game.settings.get("CoC7","developmentEnabled"),data.allowCharCreation=game.settings.get("CoC7","charCreationEnabled"),data.developmentRollForLuck=game.settings.get("CoC7","developmentRollForLuck"),data.showDevPannel=data.allowDevelopment||data.allowCharCreation,data.manualCredit=this.actor.getActorFlag("manualCredit"),!data.manualCredit){let factor,monetarySymbol;data.credit={},data.data.credit?(factor=parseInt(data.data.credit.multiplier)?parseInt(data.data.credit.multiplier):1,monetarySymbol=data.data.credit.monetarySymbol?data.data.credit.monetarySymbol:"$"):(factor=1,monetarySymbol="$"),data.credit.spendingLevel=`${monetarySymbol}${this.actor.spendingLevel*factor}`,data.credit.assets=`${monetarySymbol}${this.actor.assets*factor}`,data.credit.cash=`${monetarySymbol}${this.actor.cash*factor}`}data.oneBlockBackStory=game.settings.get("CoC7","oneBlockBackstory"),data.summarized=this.summarized&&!data.permissionLimited,data.skillList=[];let previousSpec="";for(const skill of data.skills)!data.skillShowUncommon&&skill.data.properties.rarity||(skill.data.properties.special&&previousSpec!==skill.data.specialization&&(previousSpec=skill.data.specialization,data.skillList.push({isSpecialization:!0,name:skill.data.specialization})),data.skillList.push(skill));if(data.skillsByValue=[...data.skills].sort(((a,b)=>b.data.value-a.data.value)),data.topSkills=[...data.skillsByValue].slice(0,14),data.skillsByValue=data.skillsByValue.filter((skill=>data.skillShowUncommon||!skill.data.properties.rarity)),data.topWeapons=[...data.meleeWpn,...data.rangeWpn].sort(((a,b)=>a.data.skill.main?.value-b.data.skill.main?.value)).reverse().slice(0,3),data.displayPlayerName=game.settings.get("CoC7","displayPlayerNameOnSheet"),data.displayPlayerName&&!data.data.infos.playername){const user=this.actor.characterUser;user&&(data.data.infos.playername=user.name)}return data.skillListEmpty=0===data.skills.length,data.showInventoryItems=Object.prototype.hasOwnProperty.call(data.itemsByType,"item")||!data.data.flags.locked,data.showInventoryBooks=Object.prototype.hasOwnProperty.call(data.itemsByType,"book")||!data.data.flags.locked,data.showInventorySpells=Object.prototype.hasOwnProperty.call(data.itemsByType,"spell")||!data.data.flags.locked,data.showInventoryTalents=Object.prototype.hasOwnProperty.call(data.itemsByType,"talent")||!data.data.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),data.showInventoryStatuses=Object.prototype.hasOwnProperty.call(data.itemsByType,"status")||!data.data.flags.locked,data.hasInventory=data.showInventoryItems||data.showInventoryBooks||data.showInventorySpells||data.showInventoryTalents||data.showInventoryStatuses||data.showInventoryWeapons,data}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","actor","character"],template:"systems/CoC7/templates/actors/character/index.html",width:687,height:623,resizable:!0,dragDrop:[{dragSelector:".item",dropSelector:null}],scrollY:[".right-panel .tab"],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"skills"}]})}activateListeners(html){super.activateListeners(html),this.actor.isOwner&&(html.find(".skill-name.rollable.flagged4dev").click((async event=>this._onSkillDev(event))),html.find(".reset-occupation").click((async()=>await this.actor.resetOccupation())),html.find(".reset-archetype").click((async()=>await this.actor.resetArchetype())),html.find(".open-item").click((event=>this._onItemDetails(event))),html.find('[name="data.attribs.hp.value"]').change((event=>this.actor.setHealthStatusManually(event))),html.find(".toggle-list-mode").click((event=>{this.toggleSkillListMode(event)})),html.find(".toggle-uncommon-mode").click((event=>{this.toggleSkillUncommonMode(event)})),game.user.isGM&&(html.find(".sanity-loss-type-add").click(this._onAddSanityLossReason.bind(this)),html.find(".sanity-loss-type-delete").click(this._onDeleteSanityLossReason.bind(this)),html.find(".toggle-keeper-flags").click(this._onToggleKeeperFlags.bind(this))))}_onToggleKeeperFlags(event){switch(event.preventDefault(),event.currentTarget.dataset.flag){case"mythosInsanityExperienced":this.actor.setFlag("CoC7","mythosInsanityExperienced",!this.actor.mythosInsanityExperienced);break;case"mythosHardened":this.actor.setFlag("CoC7","mythosHardened",!this.actor.mythosHardened)}}async _onAddSanityLossReason(event){event.preventDefault(),new CoC7CreateMythosEncounter({actor:this.actor,type:event.currentTarget.dataset.type},{}).render(!0)}_onDeleteSanityLossReason(event){event.preventDefault();const offset=$(event.currentTarget).closest(".flexrow").data("offset"),sanityLossEvents=this.actor.data.data.sanityLossEvents??[];sanityLossEvents.splice(offset,1),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)})),this.actor.update({"data.sanityLossEvents":sanityLossEvents})}async toggleSkillListMode(event){return await this.actor.setFlag("CoC7","skillListMode",!this.actor.getFlag("CoC7","skillListMode")),await this.render(!0)}async toggleSkillUncommonMode(event){return await this.actor.setFlag("CoC7","skillShowUncommon",!this.actor.getFlag("CoC7","skillShowUncommon")),await this.render(!0)}async _onSkillDev(event){event.preventDefault();const skillId=event.currentTarget.closest(".item").dataset.itemId;await this.actor.developSkill(skillId,event.shiftKey)}_onItemDetails(event){event.preventDefault();const type=event.currentTarget.dataset.type,item=this.actor[type];item&&item.sheet.render(!0)}static renderSheet(sheet){if(game.settings.get("CoC7","overrideSheetArtwork")){if(game.settings.get("CoC7","artWorkSheetBackground")){if(sheet.element.css("--main-sheet-bg",game.settings.get("CoC7","artWorkSheetBackground")),"slice"!==game.settings.get("CoC7","artWorkSheetBackgroundType")){let styleSheet,cssRuleIndex;for(let i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].href?.endsWith("coc7g.css")){styleSheet=document.styleSheets[i];break}if(styleSheet)for(let i=0;i<styleSheet.rules.length;i++)if(".sheetV2.character form"===styleSheet.rules[i].selectorText){cssRuleIndex=i;break}if(cssRuleIndex){const CSSStyle=styleSheet.rules[cssRuleIndex].style;switch(CSSStyle.removeProperty("border-image"),CSSStyle.setProperty("background",game.settings.get("CoC7","artWorkSheetBackground")),game.settings.get("CoC7","artWorkSheetBackgroundType")){case"auto":default:CSSStyle.setProperty("background-size","auto");break;case"contain":CSSStyle.setProperty("background-size","contain");break;case"cover":CSSStyle.setProperty("background-size","cover")}}}}else"null"===game.settings.get("CoC7","artWorkSheetBackground").toLowerCase()&&sheet.element.css("--main-sheet-bg","url( './assets/images/void.webp')");if(game.settings.get("CoC7","artWorkOtherSheetBackground")?sheet.element.css("--other-sheet-bg",game.settings.get("CoC7","artWorkOtherSheetBackground")):"null"===game.settings.get("CoC7","artWorkOtherSheetBackground").toLowerCase()&&sheet.element.css("--other-sheet-bg","url( './assets/images/void.webp')"),game.settings.get("CoC7","artworkSheetImage")?sheet.element.css("--main-sheet-image",game.settings.get("CoC7","artworkSheetImage")):"null"===game.settings.get("CoC7","artworkSheetImage").toLowerCase()&&sheet.element.css("--main-sheet-image","url( './assets/images/void.webp')"),game.settings.get("CoC7","artworkFrontColor")&&sheet.element.css("--main-sheet-front-color",game.settings.get("CoC7","artworkFrontColor")),game.settings.get("CoC7","artworkBackgroundColor")&&sheet.element.css("--main-sheet-back-color",game.settings.get("CoC7","artworkBackgroundColor")),game.settings.get("CoC7","artworkInteractiveColor")&&sheet.element.css("--main-sheet-interactive-color",game.settings.get("CoC7","artworkInteractiveColor")),game.settings.get("CoC7","artworkFixedSkillLength")||(sheet.element.css("--skill-length","auto"),sheet.element.css("--skill-specialization-length","auto")),game.settings.get("CoC7","artworkMainFont")){new FontFace("customSheetFont",game.settings.get("CoC7","artworkMainFont")).load().then((function(loadedFace){document.fonts.add(loadedFace)})).catch((function(error){ui.notifications.error(error)}))}if(game.settings.get("CoC7","artworkMainFontBold")){new FontFace("customSheetFont",game.settings.get("CoC7","artworkMainFontBold"),{weight:"bold"}).load().then((function(loadedFace){document.fonts.add(loadedFace)})).catch((function(error){ui.notifications.error(error)}))}if(game.settings.get("CoC7","artworkMainFontSize")){const size=`${game.settings.get("CoC7","artworkMainFontSize")}px`;size!==$(":root").css("font-size")&&$(":root").css("font-size",size)}}}}class CoC7Combat{static renderCombatTracker(app,html,data){const currentCombat=data.combats[data.currentIndex-1];currentCombat&&(html.find(".combatant").each(((i,el)=>{const combId=el.getAttribute("data-combatant-id"),combatantControlsDiv=el.querySelector(".combatant-controls"),combatant=currentCombat.data.combatants.get(combId);if(combatant.getFlag("CoC7","hasGun")?$(combatantControlsDiv).prepend(`<a class="combatant-control active add-init" title="${game.i18n.localize("CoC7.PutGunAway")}" data-control="drawGun"><i class="game-icon game-icon-revolver"></i></a>`):$(combatantControlsDiv).prepend(`<a class="combatant-control add-init" title="${game.i18n.localize("CoC7.DrawGun")}" data-control="drawGun"><i class="game-icon game-icon-revolver"></i></a>`),"optional"===game.settings.get("CoC7","initiativeRule")&&game.settings.get("CoC7","displayInitAsText")){if(combatant.initiative){const tokenInitiative=el.querySelector(".token-initiative"),initiativeTest=tokenInitiative.querySelector(".initiative"),roll=100*combatant.initiative-100*Math.floor(combatant.initiative);switch(Math.floor(combatant.initiative)){case CoC7Check.successLevel.fumble:tokenInitiative.classList.add("fumble"),initiativeTest.innerText=game.i18n.localize("CoC7.Fumble"),initiativeTest.title=roll;break;case CoC7Check.successLevel.failure:tokenInitiative.classList.add("failure"),initiativeTest.innerText=game.i18n.localize("CoC7.Failure"),initiativeTest.title=roll;break;case CoC7Check.successLevel.regular:tokenInitiative.classList.add("regular-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyRegular"),initiativeTest.title=roll;break;case CoC7Check.successLevel.hard:tokenInitiative.classList.add("hard-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyHard"),initiativeTest.title=roll;break;case CoC7Check.successLevel.extreme:tokenInitiative.classList.add("extreme-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyExtreme"),initiativeTest.title=roll;break;case CoC7Check.successLevel.critical:tokenInitiative.classList.add("critical"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyCritical"),initiativeTest.title=roll}}}else if(combatant.initiative<0){const h4=el.querySelector(".token-name").querySelector("h4"),span=el.querySelector("span.initiative");h4.style.fontWeight="900",h4.style.textShadow="1px 1px 4px darkred",span.style.fontWeight="900",span.style.textShadow="1px 1px 4px darkred",el.style.color="darkred",el.style.background="black",el.style.fontWeight="900"}})),html.find(".add-init").click((event=>CoC7Combat._onToggleGun(event))))}static async _onToggleGun(event){event.preventDefault(),event.stopPropagation();const li=event.currentTarget.closest(".combatant"),c=await game.combat.combatants.get(li.dataset.combatantId);c.actor.isOwner&&(c.getFlag("CoC7","hasGun")?await c.setFlag("CoC7","hasGun",!1):await c.setFlag("CoC7","hasGun",!0));const newInit=await c.actor.rollInitiative(!!c.getFlag("CoC7","hasGun"));c.getFlag("CoC7","hasGun")?c.initiative<newInit&&game.combat.setInitiative(c.id,newInit):game.combat.setInitiative(c.id,newInit)}}async function rollInitiative(ids,{formula=null,updateTurn=!0,messageOptions={}}={}){ids="string"==typeof ids?[ids]:ids;const currentId=this.combatant.id,updates=[];for(const[,id]of ids.entries()){const combatant=this.combatants.get(id);if(!combatant?.isOwner)return null;const roll=await combatant.actor.rollInitiative(!!combatant.getFlag("CoC7","hasGun"));updates.push({_id:id,initiative:roll})}return updates.length?(await this.updateEmbeddedDocuments("Combatant",updates),updateTurn&&await this.update({turn:this.turns.findIndex((t=>t.id===currentId))}),this):this}class Updater{static async checkForUpdate(){this.systemUpdateVersion=game.settings.get("CoC7","systemUpdateVersion")?String(game.settings.get("CoC7","systemUpdateVersion")):"0";const runMigrate=isNewerVersion(game.system.data.version,this.systemUpdateVersion);this.updatedModules=game.settings.get("CoC7","systemUpdatedModuleVersion")||{},this.currentModules={};for(const pack of game.packs)!["CoC7","world"].includes(pack.metadata.package||pack.metadata.packageName)&&["Actor","Item","Scene"].includes(pack.metadata.type)&&(Object.prototype.hasOwnProperty.call(this.currentModules,pack.metadata.package||pack.metadata.packageName)||Object.prototype.hasOwnProperty.call(this.updatedModules,pack.metadata.package||pack.metadata.packageName)&&String(this.updatedModules[pack.metadata.package||pack.metadata.packageName])===String(game.modules.get(pack.metadata.package||pack.metadata.packageName).data.version)||(this.currentModules[pack.metadata.package||pack.metadata.packageName]=game.modules.get(pack.metadata.package||pack.metadata.packageName).data.version));(runMigrate||Object.keys(this.currentModules).length>0)&&(game.user.isGM?new Dialog({title:game.i18n.localize("CoC7.Migrate.Title"),content:game.i18n.format(0===Object.keys(this.currentModules).length?"CoC7.Migrate.Message":"CoC7.Migrate.WithModulesMessage",{version:game.system.data.version,modules:"<ul><li>"+Object.keys(this.currentModules).map((mod=>game.modules.get(mod).data.name)).join("</li><li>")+"</li></ul>"}),buttons:{update:{label:game.i18n.localize("CoC7.Migrate.ButtonUpdate"),callback:async()=>Updater.update()},skip:{label:game.i18n.localize("CoC7.Migrate.ButtonSkip")}}}).render(!0):new Dialog({title:game.i18n.localize("CoC7.Migrate.Title"),content:game.i18n.format("CoC7.Migrate.GMRequired",{version:game.system.data.version}),buttons:{OK:{label:game.i18n.localize("CoC7.Migrate.ButtonOkay")}}}).render(!0))}static async update(){await this.updateDocuments(),game.settings.get("CoC7","pulpRules")&&(game.settings.set("CoC7","pulpRuleDoubleMaxHealth",!0),game.settings.set("CoC7","pulpRuleDevelopmentRollLuck",!0),game.settings.set("CoC7","pulpRuleArchetype",!0),game.settings.set("CoC7","pulpRuleOrganization",!0),game.settings.set("CoC7","pulpRuleTalents",!0),game.settings.set("CoC7","pulpRuleFasterRecovery",!0),game.settings.set("CoC7","pulpRuleIgnoreMajorWounds",!0));const settings=mergeObject(this.updatedModules||{},this.currentModules);game.settings.set("CoC7","systemUpdatedModuleVersion",settings),game.settings.set("CoC7","systemUpdateVersion",game.system.data.version),ui.notifications.info(game.i18n.format("CoC7.Migrate.Complete"),{permanent:!0})}static async updateDocuments(){for(const actor of game.actors.contents)try{const updateData=this.migrateActorData(actor.toObject());foundry.utils.isObjectEmpty(updateData)||(console.log(`Migrating Actor document ${actor.name}`),await actor.update(updateData,{enforceTypes:!1}))}catch(err){err.message=`Failed CoC7 system migration for Actor ${actor.name}: ${err.message}`,ui.notifications.error(err.message,{permanent:!0}),console.error(err)}for(const item of game.items.contents)try{const updateData=Updater.migrateItemData(item.toObject());foundry.utils.isObjectEmpty(updateData)||(console.log(`Migrating Item document ${item.name}`),await item.update(updateData,{enforceTypes:!1}))}catch(err){err.message=`Failed CoC7 system migration for Item ${item.name}: ${err.message}`,ui.notifications.error(err.message,{permanent:!0}),console.error(err)}for(const table of game.tables.contents)try{const updateData=Updater.migrateTableData(table.toObject());foundry.utils.isObjectEmpty(updateData)||(console.log(`Migrating Table document ${table.name}`),await table.update(updateData,{enforceTypes:!1}))}catch(err){err.message=`Failed CoC7 system migration for Table ${table.name}: ${err.message}`,ui.notifications.error(err.message,{permanent:!0}),console.error(err)}for(const macro of game.macros.contents)try{const updateData=Updater.migrateMacroData(macro.toObject());foundry.utils.isObjectEmpty(updateData)||(console.log(`Migrating Macro document ${macro.name}`),await macro.update(updateData,{enforceTypes:!1}))}catch(err){err.message=`Failed CoC7 system migration for Table ${macro.name}: ${err.message}`,ui.notifications.error(err.message,{permanent:!0}),console.error(err)}for(const scene of game.scenes)try{const updateData=Updater.migrateSceneData(scene.data);foundry.utils.isObjectEmpty(updateData)||(console.log(`Migrating Scene document ${scene.name}`),await scene.update(updateData,{enforceTypes:!1})),scene.tokens.forEach((t=>t._actor=null))}catch(err){err.message=`Failed CoC7 system migration for Scene ${scene.name}: ${err.message}`,ui.notifications.error(err.message,{permanent:!0}),console.error(err)}for(const pack of game.packs)"CoC7"!==(pack.metadata.package||pack.metadata.packageName)&&["Actor","Item","Macro","RollTable","Scene"].includes(pack.metadata.type)&&await Updater.migrateCompendiumData(pack)}static migrateActorData(actor){const updateData={};if(Updater._migrateActorCharacterSanity(actor,updateData),Updater._migrateActorArtwork(actor,updateData),Updater._migrateActorKeeperNotes(actor,updateData),Updater._migrateActorNpcCreature(actor,updateData),Updater._migrateActorStatusEffectActive(actor,updateData),Updater._migrateActorSanLossReasons(actor,updateData),actor.items){const items=actor.items.reduce(((arr,i)=>{const itemData=i instanceof CONFIG.Item.documentClass?i.toObject():i,itemUpdate=Updater.migrateItemData(itemData);return foundry.utils.isObjectEmpty(itemUpdate)||(itemUpdate._id=itemData._id,arr.push(expandObject(itemUpdate))),arr}),[]);items.length>0&&(updateData.items=items)}return updateData}static async migrateCompendiumData(pack){const documentType=pack.metadata.type;if(!["Actor","Item","Macro","RollTable","Scene"].includes(documentType))return;const wasLocked=pack.locked;await pack.configure({locked:!1});try{await pack.migrate()}catch(err){}const documents=await pack.getDocuments();for(const doc of documents){let updateData={};try{switch(documentType){case"Actor":updateData=Updater.migrateActorData(doc.toObject());break;case"Item":updateData=Updater.migrateItemData(doc.toObject());break;case"Macro":updateData=Updater.migrateMacroData(doc.toObject());break;case"RollTable":updateData=Updater.migrateTableData(doc.toObject());break;case"Scene":updateData=Updater.migrateSceneData(doc.data)}foundry.utils.isObjectEmpty(updateData)||(console.log(`Migrated ${documentType} document ${doc.name} in Compendium ${pack.collection}`),await doc.update(updateData))}catch(err){err.message=`Failed CoC7 system migration for document ${doc.name} in pack ${pack.collection}: ${err.message}`,ui.notifications.error(err.message,{permanent:!0}),console.error(err)}}await pack.configure({locked:wasLocked})}static migrateItemData(item){const updateData={};return Updater._migrateItemExperience(item,updateData),Updater._migrateItemArtwork(item,updateData),Updater._migrateItemBookAutomated(item,updateData),Updater._migrateItemKeeperNotes(item,updateData),Updater._migrateItemSpellAutomated(item,updateData),Updater._migrateItemKeeperNotesMerge(item,updateData),Updater._migrateItemSetupEras(item,updateData),Updater._migrateItemv10(item,updateData),Updater._migrateItemBookUnits(item,updateData),updateData}static migrateMacroData(table){const updateData={};return Updater._migrateMacroArtwork(table,updateData),updateData}static migrateTableData(table){const updateData={};return Updater._migrateTableArtwork(table,updateData),updateData}static migrateSceneData(scene){return{tokens:scene.tokens.map((token=>{const t=token.toObject(),updateData={};if(Updater._migrateTokenArtwork(t,updateData),Object.keys(updateData).length&&foundry.utils.mergeObject(t,updateData),!t.actorId||t.actorLink)t.actorData={};else if(game.actors.has(t.actorId)){if(!t.actorLink){const actorData=foundry.utils.duplicate(t.actorData);actorData.type=token.actor?.type;const update=Updater.migrateActorData(actorData);["items","effects"].forEach((embeddedName=>{if(!update[embeddedName]?.length)return;const updates=new Map(update[embeddedName].map((u=>[u._id,u])));t.actorData[embeddedName].forEach((original=>{const update=updates.get(original._id);update&&mergeObject(original,update)})),delete update[embeddedName]})),mergeObject(t.actorData,update)}}else t.actorId=null,t.actorData={};return t}))}}static _migrateItemKeeperNotes(item,updateData){return["archetype","chase","item","occupation","setup","skill","spell","status","talent","weapon"].includes(item.type)&&("string"==typeof item.data.description?updateData["data.description"]={value:item.data.description,keeper:""}:void 0===item.data.description?updateData["data.description"]={value:"",keeper:""}:void 0===item.data.description.keeper&&(updateData["data.description.keeper"]="")),updateData}static _migrateItemExperience(item,updateData){return"skill"===item.type&&void 0===item.data.adjustments?.experience&&(updateData["data.adjustments.experience"]=0),updateData}static _migrateItemArtwork(item,updateData){let image=String(item.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);if(null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),"setup"===item.type)for(const[k,v]of Object.entries(item.data.items))image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["data.items"]&&(updateData["data.items"]=item.data.items),updateData["data.items"][k].img="systems/CoC7/assets/icons/"+image[1]);else if("occupation"===item.type){for(const[k,v]of Object.entries(item.data.skills))image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["data.skills"]&&(updateData["data.skills"]=item.data.skills),updateData["data.skills"][k].img="systems/CoC7/assets/icons/"+image[1]);for(const[o,g]of Object.entries(item.data.groups))for(const[k,v]of Object.entries(g.skills))image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["data.groups"]&&(updateData["data.groups"]=item.data.groups),updateData["data.groups"][o].skills[k].img="systems/CoC7/assets/icons/"+image[1])}else if("book"===item.type)for(const[k,v]of Object.entries(item.data.spells))image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["data.spells"]&&(updateData["data.spells"]=item.data.spells),updateData["data.spells"][k].img="systems/CoC7/assets/icons/"+image[1]);else if("archetype"===item.type)for(const[k,v]of Object.entries(item.data.skills))image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["data.skills"]&&(updateData["data.skills"]=item.data.skills),updateData["data.skills"][k].img="systems/CoC7/assets/icons/"+image[1]);return updateData}static _migrateItemSpellAutomated(item,updateData){"spell"===item.type&&void 0!==item.data.cost&&(updateData["data.castingTime"]=item.data.castingTime||"",updateData["data.costs.hitPoints"]=item.data.cost.hp||0,updateData["data.costs.magicPoints"]=item.data.cost.mp||0,updateData["data.costs.sanity"]=item.data.cost.san||0,updateData["data.costs.power"]=item.data.cost.pow||0,updateData["data.costs.others"]="",updateData["data.-=cost"]=null,updateData["data.description.-=unidentified"]=null,updateData["data.description.-=notes"]=null)}static _migrateItemBookAutomated(item,updateData){return"book"===item.type&&void 0!==item.data.description.unidentified&&(updateData["data.author"]=item.data.author||"",updateData["data.date"]=item.data.date||"",updateData["data.language"]=item.data.language||"",updateData["data.sanityLoss"]=item.data.sanLoss||0,updateData["data.mythosRating"]=Number(item.data.mythosRating)||0,updateData["data.content"]=item.data.description.unidentified,updateData["data.description.keeper"]=item.data.description.notes,updateData["data.difficultyLevel"]="regular",updateData["data.fullStudies"]=0,updateData["data.initialReading"]=!1,updateData["data.keeperNotes"]="",updateData["data.gains.cthulhuMythos.initial"]=Number(item.data.gain.cthulhuMythos.CMI)||0,updateData["data.gains.cthulhuMythos.final"]=Number(item.data.gain.cthulhuMythos.CMF)||0,updateData["data.gains.occult"]=Number(item.data.gain.occult)||0,updateData["data.gains.others"]=[],updateData["data.study"]={necessary:Number(item.data.weeksStudyTime)||0,progress:0,units:"CoC7.weeks"},updateData["data.-=sanLoss"]=null,updateData["data.-=weeksStudyTime"]=null,updateData["data.-=gain"]=null,updateData["data.description.-=unidentified"]=null,updateData["data.description.-=notes"]=null,updateData["data.gains.-=other"]=null,updateData["data.-=properties"]=null,updateData["data.-=flags"]=null),updateData}static _migrateItemBookUnits(item,updateData){"book"===item.type&&void 0!==item.data.study.necessary&&void 0===item.data.study.units&&(updateData["data.study.units"]="CoC7.weeks")}static _migrateItemKeeperNotesMerge(item,updateData){"spell"!==item.type&&"book"!==item.type||(void 0!==item.data.notes&&(void 0!==item.data.description.keeper?updateData["data.description.keeper"]=item.data.description.keeper+item.data.notes:updateData["data.description.keeper"]=item.data.notes,updateData["data.-=notes"]=null),void 0!==item.data.keeperNotes&&(void 0!==updateData["data.description.keeper"]?updateData["data.description.keeper"]=item.data.keeperNotes+updateData["data.description.keeper"]:updateData["data.description.keeper"]=item.data.keeperNotes,updateData["data.-=keeperNotes"]=null))}static _migrateItemv10(item,updateData){if("skill"!==item.type||void 0!==item.data.skillName&&""!==item.data.skillName){if("setup"===item.type){for(const[k,v]of Object.entries(item.data.items))if("skill"===v.type&&(void 0===v.data.skillName||""===v.data.skillName)){void 0===updateData["data.items"]&&(updateData["data.items"]=item.data.items),updateData["data.items"][k].name=v.name,"Uniki"===updateData["data.items"][k].name&&(updateData["data.items"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["data.items"][k].name,"string"==typeof v.data.specialization?.group?v.data.specialization.group:v.data.specialization);updateData["data.items"][k].name=parts.name,updateData["data.items"][k].data.skillName=parts.skillName,updateData["data.items"][k].data.specialization=parts.specialization}}else if("occupation"===item.type){for(const[k,v]of Object.entries(item.data.skills))if("skill"===v.type&&(void 0===v.data.skillName||""===v.data.skillName)){void 0===updateData["data.skills"]&&(updateData["data.skills"]=item.data.skills),updateData["data.skills"][k].name=v.name,"Uniki"===updateData["data.skills"][k].name&&(updateData["data.skills"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["data.skills"][k].name,"string"==typeof v.data.specialization?.group?v.data.specialization.group:v.data.specialization);updateData["data.skills"][k].name=parts.name,updateData["data.skills"][k].data.skillName=parts.skillName,updateData["data.skills"][k].data.specialization=parts.specialization}for(const[o,g]of Object.entries(item.data.groups))for(const[k,v]of Object.entries(g.skills))if("skill"===v.type&&(void 0===v.data.skillName||""===v.data.skillName)){void 0===updateData["data.groups"]&&(updateData["data.groups"]=item.data.groups),updateData["data.groups"][o].skills[k].name=v.name,"Uniki"===updateData["data.groups"][o].skills[k].name&&(updateData["data.groups"][o].skills[k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["data.groups"][o].skills[k].name,"string"==typeof v.data.specialization?.group?v.data.specialization.group:v.data.specialization);updateData["data.groups"][o].skills[k].name=parts.name,updateData["data.groups"][o].skills[k].data.skillName=parts.skillName,updateData["data.groups"][o].skills[k].data.specialization=parts.specialization}}else if("archetype"===item.type)for(const[k,v]of Object.entries(item.data.skills))if("skill"===v.type&&(void 0===v.data.skillName||""===v.data.skillName)){void 0===updateData["data.skills"]&&(updateData["data.skills"]=item.data.skills),updateData["data.skills"][k].name=v.name,"Uniki"===updateData["data.skills"][k].name&&(updateData["data.skills"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["data.skills"][k].name,"string"==typeof v.data.specialization?.group?v.data.specialization.group:v.data.specialization);updateData["data.skills"][k].name=parts.name,updateData["data.skills"][k].data.skillName=parts.skillName,updateData["data.skills"][k].data.specialization=parts.specialization}}else{updateData.name=item.name,"Uniki"===updateData.name&&(updateData.name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData.name,"string"==typeof item.data.specialization?.group?item.data.specialization.group:item.data.specialization);updateData.name=parts.name,updateData["data.skillName"]=parts.skillName,updateData["data.specialization"]=parts.specialization}}static _migrateItemSetupEras(item,updateData){if("setup"===item.type)for(const[key,value]of Object.entries(item.data.eras))void 0!==value.selected&&(updateData["data.eras."+key]=value.selected)}static _migrateActorArtwork(actor,updateData){let image=String(actor.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);if(null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),void 0!==actor.token&&void 0!==actor.token.img&&(image=String(actor.token.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(updateData["token.img"]="systems/CoC7/assets/icons/"+image[1])),void 0!==actor.effects)for(const[k,v]of Object.entries(actor.effects))image=String(v.icon).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData.effects&&(updateData.effects=actor.effects),updateData.effects[k].icon="systems/CoC7/assets/icons/"+image[1]);return updateData}static _migrateActorKeeperNotes(actor,updateData){return["character","npc","creature"].includes(actor.type)&&void 0!==actor.data&&void 0===actor.data.description&&(updateData["data.description"]={keeper:""}),updateData}static _migrateActorSanLossReasons(actor,updateData){if("character"===actor.type&&void 0!==actor.data?.encounteredCreatures){const groups={};for(const sanityLossEvent of actor.data.encounteredCreatures)sanityLossEvent.totalLoss>0&&(groups[sanityLossEvent.name]=Math.max(groups[sanityLossEvent.name]??0,sanityLossEvent.totalLoss));const sanityLossEvents=[];for(const name in groups)sanityLossEvents.push({type:name,totalLoss:groups[name],immunity:!1});updateData["data.sanityLossEvents"]=sanityLossEvents,updateData["data.-=encounteredCreatures"]=null}}static _migrateActorStatusEffectActive(actor,updateData){if(["character","npc","creature"].includes(actor.type)&&void 0!==actor.data&&(void 0!==actor.data.status||void 0===actor.data.conditions)){if(updateData["data.conditions.criticalWounds.value"]=!1,updateData["data.conditions.unconscious.value"]=!1,updateData["data.conditions.dying.value"]=!1,updateData["data.conditions.dead.value"]=!1,updateData["data.conditions.prone.value"]=!1,updateData["data.conditions.tempoInsane.value"]=!1,updateData["data.conditions.indefInsane.value"]=!1,void 0!==actor.data.status?.criticalWounds.value&&actor.data.status?.criticalWounds.value&&(updateData["data.conditions.criticalWounds.value"]=!0),void 0!==actor.data.status?.unconscious.value&&actor.data.status?.unconscious.value&&(updateData["data.conditions.unconscious.value"]=!0),void 0!==actor.data.status?.dying.value&&actor.data.status?.dying.value&&(updateData["data.conditions.dying.value"]=!0),void 0!==actor.data.status?.dead.value&&actor.data.status?.dead.value&&(updateData["data.conditions.dead.value"]=!0),void 0!==actor.data.status?.prone.value&&actor.data.status?.prone.value&&(updateData["data.conditions.prone.value"]=!0),void 0!==actor.data.status?.tempoInsane.value&&actor.data.status?.tempoInsane.value&&(updateData["data.conditions.tempoInsane.value"]=!0),void 0!==actor.data.status?.indefInsane.value&&actor.data.status?.indefInsane.value&&(updateData["data.conditions.indefInsane.value"]=!0),void 0!==actor.effects){const effects=actor.effects;let changed=!1;for(let i=0,im=effects.length;i<im;i++){const effect=effects[i],match=effect.icon.match(/\/(hanging-spider|tentacles-skull|arm-sling|heart-beats|tombstone|knocked-out-stars|falling|skull|unconscious)\./);if(null!==match){let statusId="";switch(match[1]){case"hanging-spider":statusId="tempoInsane";break;case"tentacles-skull":statusId="indefInsane";break;case"arm-sling":statusId="criticalWounds";break;case"heart-beats":statusId="dying";break;case"tombstone":case"skull":statusId="dead";break;case"knocked-out-stars":case"unconscious":statusId="unconscious";break;case"falling":statusId="prone"}""!==statusId&&(updateData[`data.conditions.${statusId}.value`]||(updateData[`data.conditions.${statusId}.value`]=!0,changed=!0),effect.flags.core?.statusId!==statusId&&(effects[i]=mergeObject(effect,{flags:{core:{statusId}}}),changed=!0))}}changed&&(updateData.effects=effects)}updateData["data.-=status"]=null}return updateData}static _migrateActorNpcCreature(actor,updateData){return["npc"].includes(actor.type)&&void 0!==actor.data&&(void 0===actor.data.special&&(updateData["data.special"]={checkPassed:null,checkFailled:null}),void 0===actor.data.attacksPerRound&&(updateData["data.attacksPerRound"]=1)),updateData}static _migrateActorCharacterSanity(actor,updateData){if("character"===actor.type&&void 0!==actor.data?.attribs?.san){const oneFifthSanity=Math.ceil(actor.data.attribs.san.value/5);void 0!==actor.data.attribs.san.dailyLoss&&null!==actor.data.attribs.san.dailyLoss||(updateData["data.attribs.san.dailyLoss"]=0),void 0!==actor.data.attribs.san.oneFifthSanity&&null!==actor.data.attribs.san.oneFifthSanity||(updateData["data.attribs.san.oneFifthSanity"]=" / "+oneFifthSanity),void 0!==actor.data.attribs.san.dailyLoss&&null!==actor.data.attribs.san.dailyLoss||(updateData["data.attribs.san.dailyLoss"]=0),void 0!==actor.data.indefiniteInsanityLevel&&null!==actor.data.indefiniteInsanityLevel&&void 0!==actor.data.indefiniteInsanityLevel.value&&null!==actor.data.indefiniteInsanityLevel.value||(updateData["data.indefiniteInsanityLevel.value"]=0),void 0!==actor.data.indefiniteInsanityLevel&&null!==actor.data.indefiniteInsanityLevel&&void 0!==actor.data.indefiniteInsanityLevel.max&&null!==actor.data.indefiniteInsanityLevel.max||(updateData["data.indefiniteInsanityLevel.max"]=oneFifthSanity),void 0!==actor.data.attribs.mp&&(void 0!==actor.data.attribs.mp.value&&null!==actor.data.attribs.mp.value||(updateData["data.attribs.mp.value"]=oneFifthSanity),void 0!==actor.data.attribs.mp.max&&null!==actor.data.attribs.mp.max||(updateData["data.attribs.mp.max"]=oneFifthSanity)),void 0!==actor.data.notes&&null!==actor.data.notes||(updateData["data.notes"]="")}return updateData}static _migrateMacroArtwork(table,updateData){const image=String(table.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);return null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),updateData}static _migrateTableArtwork(table,updateData){let image=String(table.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]);for(const[k,v]of Object.entries(table.results))image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData.results&&(updateData.results=table.results),updateData.results[k].img="systems/CoC7/assets/icons/"+image[1]);return updateData}static _migrateTokenArtwork(token,updateData){const image=String(token.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);return null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),updateData}}const nameCharacters="\\u3000\\u3400-\\u4DBF\\u4E00-\\u9FFF\\w\\(\\)\\-\\/&\"'"+CoC7Utilities.quoteRegExp("áéíóàèìòùÀÈÌÒÙáéíóúýÁÉÍÓÚÝâêîôûÂÊÎÔÛãñõÃĀÑÕäëïöüÿÄËÏÖÜŸàèçÇßØøÅåÆæœ“”«»ąćęłńóśźżĄĆĘŁŃÓŚŹŻ"),keys={en:{description:"CoC7.English",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",fulldb:"(Damage Bonus|DB)",halfdb:"(½|half)",sectionCombats:"\n(?:combat|fighting attacks)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:skills(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:languages)[:\n]",sectionSpells:"\n(?:spells)[:\n]",handgun:"(?<type> Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)",smb:"(?<type>Submachine Gun|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Molotov|Grenade|Dynamite)",example:"Example Character, age 27\nSTR 75 CON 60 SIZ 80 DEX 70 APP 60 INT 80\nPOW 50 EDU 85 SAN 55 HP 14 DB: 1D4\nBuild: 1 Move: 7 MP: 10 Luck: 40 Armor: 1\nAttacks per round: 3 SAN loss: 1d4/1d8\nCombat\nBite 50% (25/10), damage 1D6\nBrawl 30% (15/6), damage 1D3\nDerringer 40% (20/8), damage 1D8+1\nDodge 50% (25/10)\nSkills\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nLanguages: English 80%, Eklo 5%.\nSpells: Summon NPC, Dispel NPC."},de:{description:"CoC7.German",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",diceShort:"w|d",fulldb:"(Schadensbonus|Sb)",halfdb:"(½|1/2 Schadensbonus|Sb/2)",sectionCombats:"\n(?:Kampf|Angriff:|ANGRIFFE)[:\n]",newCombatHeader:"\nKampf\n",sectionSkills:"\n(?:Fertigkeiten(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Sprachen)[:\n]",sectionSpells:"\n(?:Zauber)[:\n]",handgun:"(?<type> Gun|Revolver|Pistole|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Gewehr|Schrotflinte|Carabiner|Karabiner|Gauge |Lee-Enfield|Elefanten)",smb:"(?<type>Submachine Gun|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Molotov|Granate|Dynamit)",example:"Vorname Nachname\nAlter: 29\nBeruf: Ein Beruf\nST 50\nMA 60\nKO 60\nGE 60\nGR 55\nER 65\nIN 80\nBI 85\nTrefferpunkte: 11\nGeistige Stabilität: 60\nSchadensbonus: 0\nStatur: 0\nMagiepunkte: 12\nBewegungsweite: 8\n\nKampf\nAngriffe: 1\nHandgemenge 30% (15/6), Schaden 1D3\nMesser 30% (15/6), Schaden 1D4\nAusweichen 30% (15/6)\n\nFertigkeiten: Anthropologie 70% (35/14), Archäologie 30% (15/6), Bibliotheksnutzung 50% (25/10), Erste Hilfe 50% (25/10), Finanzkraft 40% (20/8), Geschichte 60% (30/12), Klettern 50% (25/10)\n\nSprachen: Englisch 85% (42/17); Deutsch 45% (22/9), Latein 45% (22/9)"},pl:{description:"CoC7.Polish",dbNone:"brak",armorNone:"brak",attacksPerRoundNone:"brak",sanLossNone:"brak",diceShort:"k|d",fulldb:"(Modyfikator Obrażeń|MO)",halfdb:"(½|1/2 MO|MO/2)",sectionCombats:"\n(?:Walka|Ataki)[:\n]",newCombatHeader:"\nWalka\n",sectionSkills:"\n(?:Umiejętności(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Języki)[:\n]",sectionSpells:"\n(?:Zaklęcia)[:\n]",handgun:"(?<type> Pistolet|Rewolwer|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Karabin|Strzelba|Wiatrówka|Garand|Gauge |Lee-Enfield|Strzelba na słonie)",smb:"(?<type>Pistolet maszynowy|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Mołotowa|Granat|Laska dynamitu|Dynamit)",example:"Przykładowa postać, 27 lat\nBibliotekarz\nS 75 KON 60 BC 80 ZR 70 WYG 60 INT 80\nMOC 50 WYK 85 P 55 PW 14 MO: 1D4\nKrzepa: 1 Ruch: 7 PM: 10 Szczęście: 40 Pancerz: 1\nAtaki w rundzie: 3 Utrata Poczytalności: 1K4/1K8\nWalka\nUgryzienie 50% (25/10), obrażenia 1K6\nWalka 30% (15/6), obrażenia 1K3\nDerringer 40% (20/8), obrażenia 1K8+1\nUnik 50% (25/10)\nUmiejętności\nTresura Zwierząt 55%, Urok Osobisty 30%, Pierwsza Pomoc 25%, Ukrywanie 20%,\nNasłuchiwanie 50%, Medycyna 45%, Przekonywanie 25%, Psychologia 75%,\nNauka (Astronomia) 90%, Nauka (Botanika) 35%, Nauka (Zoologia) 10%,\nSpostrzegawczość 35%, Ukrywanie 10%\nJęzyki: Angielski 80%, Eklo 5%.\nZaklęcia: Przyzwanie NPC, Odesłanie NPC."},fr:{description:"CoC7.French",dbNone:"Acune",armorNone:"(?:Acune|aucune)",attacksPerRoundNone:"Acune",sanLossNone:"Acune",fulldb:"(BD|Bonus aux dommages|Impact|Imp)",halfdb:"(½|1/2 Imp|Imp/2)",sectionCombats:"\n(?:Combat|Armes|Attaques)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:Compétences(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Langues?)\\s*[:\n]",sectionSpells:"\n(?:Sortilèges\\s*|Sorts)[:\n]",handgun:"(?<type>Revolver|Pistolet|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Carabine|Lee-Enfield|Fusil)",smb:"(?<type>SMG|Thompson)",machineGun:"(?<type>Browning|Vickers|Mitrailleuse)",launched:"(?<type>Boomerang de guerre|Javeline|Pierre|Shuriken|Bâton de dynamite|Cocktail Molotov|Grenade à main|Molotov|Grenade|Dynamite)",example:"Example Character, 27 ans\nFOR 75 CON 60 TAI 80 DEX 70 APP 60 INT 80\nPOU 50 ÉDU 85 SAN 55 PV 14 BD: 1D4\nCarrure: 1 Mvt: 7 PM: 10 Chance: 40 Armure: 1\nAttaques par round 3 Perte de SAN: 1d4/1d8\nAttaques\nBite 50% (25/10), dommage 1D6\nBrawl 30% (15/6), dommage 1D3\nDerringer 40% (20/8), dommage 1D8+1\nEsquiver 50% (25/10)\nCompétences\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nLangue: English 80%, Eklo 5%.\nSortilèges: Summon NPC, Dispel NPC."},es:{description:"CoC7.Spanish",dbNone:"ninguna",armorNone:"ninguna",attacksPerRoundNone:"ninguno",sanLossNone:"no",fulldb:"(BD|bd|bonificación de daño)",halfdb:"(½|medio daño|mitad|daño a la mitad)",sectionCombats:"\n(?:Combate|Armas)[:\n]",newCombatHeader:"\nCombate\n",sectionSkills:"\n(?:Habilidades(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Idiomas|Lenguajes|Lenguas)[:\n]",sectionSpells:"\n(?:Conjuros|Hechizos)[:\n]",handgun:"(?<type>Revolver|Pistola|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Rifle|Carabina|Lee-Enfield|Caza Elefantes|Fusil|Escopeta|Galga|Recortada)",smb:"(?<type>Subfusil|Thompson)",machineGun:"(?<type>Browning|Vickers|Ametralladora)",launched:"(?<type>Molotov|Granada|Dinamita)",example:"Example Character, 27 años\nFUE 75 CON 60 TAM 80 DES 70 APA 60 INT 80\nPOD 50 EDU 85 COR 55 PV 14 BD: 1D4\nCorpulencia: 1 Movimiento: 7 PM: 10 Suerte: 40 Armadura: 1\nNúmero de Ataques 3 Pérdida de cordura: 1d4/1d8\nCombate\nBite 50% (25/10), daño 1D6\nBrawl 30% (15/6), daño 1D3\nDerringer 40% (20/8), daño 1D8+1\nEsquivar 50% (25/10)\nHabilidades\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nIdiomas: English 80%, Eklo 5%.\nConjuros: Summon NPC, Dispel NPC."},"zh-TW":{description:"CoC7.TraditionalChinese",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",fulldb:"(Damage Bonus|DB|傷害加值)",halfdb:"(½|half)",sectionCombats:"\n(?:combat|fighting attacks|戰鬥技能|戰鬥列表|武器)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:(?:Skills|技能列表)(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Languages|語言)[:\n]",sectionSpells:"\n(?:spells|咒文列表|咒文)[:\n]",handgun:"(?<type> 遂發槍|\\.22短口自動手槍|\\.25短口手槍(單管)|\\.32或7\\.65mm左輪手槍|\\.32或7\\.65mm自動手槍|\\.357 Magnum左輪手槍|\\.38或9mm左輪手槍|\\.38自動手槍|貝雷塔M9|格洛克17|9mm自動手槍|魯格P08|\\.41左輪手槍|\\.44馬格南左輪手槍|\\.45左輪手槍|\\.45自動手槍|沙漠之鷹|Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>步槍|卡賓槍|半自動步槍|獵象槍|Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)",smb:"(?<type>Submachine Gun|Thompson|衝鋒槍)",machineGun:"(?<type>Browning|Vickers|機槍)",launched:"(?<type>Molotov|Grenade|Dynamite爆炸物|手榴彈|重武器)",example:"示範角色, 年齡 27\n力量 75 體質 60 體型 80 敏捷 70 外貎 60 智力 80\n意志 50 教育 85 SAN 55 HP 14 DB: 1D4\n體格: 1 Move: 7 MP: 10 幸運: 40 護甲: 1\n攻擊次數: 3 理智喪失: 1d4/1d8\n戰鬥列表\n咬 50% (25/10), 傷害 1D6\n空手 30% (15/6), 傷害 1D3\n手槍 40% (20/8), 傷害 1D8+1\n閃避 50% (25/10)\n技能列表\n動物馴養 55%, 取悅 30%, 急救 25%, 潛行 20%,\n聆聽 50%, 藥學 45%, 精神分析 25%, 心理學 75%,\n科學 (司法科學) 90%, 科學 (密碼學) 35%, \n偵查 35%, 喬裝 10%\n語言: 粵語 80%, 讀唇 5%.\n咒文: 召喚 NPC, 指揮 NPC."}},translations={en:{age:"(?<![a-z])age(\\s*:)?\\s+(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])STR(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])SIZ(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POW(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Sanity)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:HP|Hit points)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magic points)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.en.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.en.dbNone+")[,\\s\n]*",build:"(?<![a-z])Build(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armor(\\s*:)?\\s+(?<armor>"+keys.en.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Move(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Luck(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attacks per round|# Attacks)(\\s*:)?\\s+(?<attacksPerRound>"+keys.en.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Sanity loss|SAN loss)(\\s*:)?\\s+(?<sanLoss>"+keys.en.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*damage)?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.en.fulldb+"|"+keys.en.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Dodge)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Fighting|Firearms|Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.en.sectionCombats+"|"+keys.en.sectionSkills+"|"+keys.en.sectionLangauges+"|"+keys.en.sectionSpells+")"},de:{age:"(?<![a-z])Alter(\\s*:)?\\s+(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Beruf(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])ST(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])KO(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])GR(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])IN(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])MA(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])GE(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])ER(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])BI(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:gS|STA|Geistige Stabilität)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:TP|Trefferpunkte)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magiepunkte)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.de.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D|W\\d+)?|"+keys.de.dbNone+")[,\\s\n]*",build:"(?<![a-z])(?:Statur|Stat.)(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Panzerung(\\s*:)?\\s+(?<armor>"+keys.de.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])(?:BW|Bewegungsweite)(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Glück(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Angriffe pro Runde|Angriffe|Pro Runde)(\\s*:)?\\s+(?<attacksPerRound>"+keys.de.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Stabilitätsverlust)(\\s*:)?\\s+(?<sanLoss>"+keys.de.sanLossNone+"|\\d[DW]?[+\\d]*\\/\\d[DW]?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*Schaden)?\\s+(?<damage>(:?(:?\\d+w|d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.de.fulldb+"|"+keys.de.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d|w)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Ausweichen)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,;]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Angriffe|Handgemenge|Nahkampf|Faustfeuerwaffe|Beißen)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.de.sectionCombats+"|"+keys.de.sectionSkills+"|"+keys.de.sectionLangauges+"|"+keys.de.sectionSpells+")"},pl:{age:"(?<age>\\d+)\\s+(?:lata|lat|rok)[,\\s]*",occupation:"[,\\s]*Zawód(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])S(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])KON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])BC(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])MOC(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])ZR(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])WYG(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])WYK(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:P|Poczytalność)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PW|Punkty Wytrzymałości)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Punkty Magii)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.pl.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D|K\\d+)?|"+keys.pl.dbNone+")[,\\s\n]*",build:"(?<![a-z])Krzepa(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Pancerz(\\s*:)?\\s+(?<armor>"+keys.pl.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Ruch(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Szczęście(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Ataki w rundzie|# Ataki)(\\s*:)?\\s+(?<attacksPerRound>"+keys.pl.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Utrata Poczytalności|utrata P)(\\s*:)?\\s+(?<sanLoss>"+keys.pl.sanLossNone+"|\\d[DK]?[+\\d]*\\/\\d[DK]?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*obrażenia)?\\s+(?<damage>(:?(:?\\d+k|d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.pl.fulldb+"|"+keys.pl.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Unik)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Walka|Broń Palna|Bijatyka|Ugryzienie)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.pl.sectionCombats+"|"+keys.pl.sectionSkills+"|"+keys.pl.sectionLangauges+"|"+keys.pl.sectionSpells+")"},fr:{age:"(?<age>\\d+)\\s*ans(?![a-z])[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])FOR(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])TAI(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POU(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])ÉDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Santé Mentale)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PV|Points de vie)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Points de magie)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.fr.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.fr.dbNone+")[,\\s\n]*",build:"(?<![a-z])Carrure(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armure|Protection(\\s*:)?\\s+(?<armor>"+keys.fr.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])(?:Mvt|Mouvement|Déplacement)(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Chance(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attaques par round)(\\s*:)?\\s+(?<attacksPerRound>"+keys.fr.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Perte de Santé mentale|Perte de SAN)(\\s*:)?\\s+(?<sanLoss>"+keys.fr.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*(?:dommage|dégâts))?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.fr.fulldb+"|"+keys.fr.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Esquiver?)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Au contact|À distance|Combat rapproché|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.fr.sectionCombats+"|"+keys.fr.sectionSkills+"|"+keys.fr.sectionLangauges+"|"+keys.fr.sectionSpells+")"},es:{age:"(?<age>\\d+)\\s*a[ñÑ]os(?![a-z])[,\\s]*",occupation:"[,\\s]*Ocupación(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])FUE(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])TAM(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POD(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DES(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APA(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:COR|Cordura)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PV|Puntos de vida|P\\. ?V\\.)(\\s*:)?\\s+(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Puntos Mágicos|Puntos de Magia)(\\s*:)?\\s+(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.es.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.es.dbNone+")[,\\s\n]*",build:"(?<![a-z])Corpulencia(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armadura(\\s*:)?\\s+(?<armor>"+keys.es.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Movimiento(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Suerte(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Número de Ataques)(\\s*:)?\\s+(?<attacksPerRound>"+keys.es.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Pérdida de cordura|Pérdida de COR)(\\s*:)?\\s+(?<sanLoss>"+keys.es.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*daño)?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.es.fulldb+"|"+keys.es.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Esquivar)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Combatir|Armas de fuego|Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.es.sectionCombats+"|"+keys.es.sectionSkills+"|"+keys.es.sectionLangauges+"|"+keys.es.sectionSpells+")"},"zh-TW":{age:"(?<![a-z])age|年齡(\\s*:)?\\s*(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])STR|力量(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON|體質(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])SIZ|體型(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT|智力(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POW|意志(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX|敏捷(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP|外貎(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU|教育(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Sanity|理智)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:HP|Hit points|生命)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magic points)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys["zh-TW"].fulldb+")(\\s*:)?\\s*(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys["zh-TW"].dbNone+")[,\\s\n]*",build:"(?<![a-z])Build|體格(\\s*:)?\\s*(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armor|護甲(\\s*:)?\\s*(?<armor>"+keys["zh-TW"].armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Move(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Luck|幸運(\\s*:)?\\s*(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attacks per round|# Attacks|攻擊次數|# 攻擊)(\\s*:)?\\s*(?<attacksPerRound>"+keys["zh-TW"].attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Sanity loss|SAN loss|理智喪失|SAN值損失|SAN值喪失|扣SAN)(\\s*:)?\\s*(?<sanLoss>"+keys["zh-TW"].sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*(?:damage|傷害))?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys["zh-TW"].fulldb+"|"+keys["zh-TW"].halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Dodge|閃避|閃躲)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%?(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(近戰技能|射擊技能|Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys["zh-TW"].sectionCombats+"|"+keys["zh-TW"].sectionSkills+"|"+keys["zh-TW"].sectionLangauges+"|"+keys["zh-TW"].sectionSpells+")"}};class CoC7ActorImporterRegExp{static checkLanguage(lang=null){return lang||(lang=game.i18n.lang),void 0===translations[lang]&&(lang="en"),lang}static getExampleText(lang){let example=keys.en.example;return void 0!==keys[lang]&&(example=keys[lang].example),example}static getTranslations(){const output={};for(const key in keys)output[key]=keys[key].description;return output}static getKeys(lang){return keys[lang]||keys.en}static getRegularExpressions(lang){return translations[lang]||translations.en}}class CoC7ActorImporter{constructor(){this.parsed={},this.itemLocations=""}static get asNumber(){return"n"}static get asString(){return"s"}getRegEx(regex,modifiers="iu"){return"RegExp"===regex.constructor?.name?regex:new RegExp(regex,modifiers)}cleanString(s){return s.replace(/(\n|\r)/g," ").replace(/^\s*/,"").replace(/\s*\.?\s*\.?$/,"")}translateRoll(s){if(void 0===s)return s;if(void 0!==this.keys.diceShort){const regEx=new RegExp("(?<n1>\\d+)"+this.keys.diceShort+"(?<n2>\\d+)","iug");return s.replace(regEx,"$<n1>D$<n2>")}return s}toHTML(s){return 0===s.trim().length||0===(s=s.trim().split("\n").map((text=>text.trim().replace(/^[,.\s]+$/,""))).filter((text=>text)).join("</p><p>")).length?"":"<p>"+s+"</p>"}check(regExKey,{removeFromText=!0,saveKeys=!0,type=CoC7ActorImporter.asString,text=!1,requiredGroup=!1}={}){let output=!1,regExp=!1;if(void 0!==this.regEx[regExKey]?regExp=this.getRegEx(this.regEx[regExKey]):void 0!==this.keys[regExKey]&&(regExp=this.getRegEx(this.keys[regExKey])),!1!==regExp){!1===text&&(text=this.text);const check=regExp.exec(text);let value=null;if(null!==check&&(!1===requiredGroup||void 0!==(check.groups||{})[requiredGroup])){if(output=check.groups||{},removeFromText&&(this.text=this.text.replace(check[0].trim(),"\n").trim()),saveKeys)for(const key of Object.keys(check.groups))switch(type){case CoC7ActorImporter.asString:this.parsed[key]=String(check.groups[key]).replace("\n"," ");break;case CoC7ActorImporter.asNumber:value=Number(check.groups[key]),isNaN(value)||(this.parsed[key]=Number(check.groups[key]))}output["-source"]=check[0],output["-index"]=check.index}}return output}processCombat(text){if(0===text.trim().length)return;let weapon,dodge,newline;CONFIG.debug.CoC7Importer&&console.log("combat text",text);let lastPercent=!1,maxLoops=40;do{if(maxLoops--,text=text.trim(),dodge=this.check("weaponDodge",{saveKeys:!1,text}))text=text.replace(dodge["-source"],"\n"),void 0===this.parsed.skills&&(this.parsed.skills=[]),this.parsed.skills.push({name:this.cleanString(dodge.name),value:Number(dodge.percentage),push:!1});else if(weapon=this.check("weapon",{saveKeys:!1,text,requiredGroup:!1===lastPercent&&"percentage"})){text=text.replace(weapon["-source"],"\n");const name=this.cleanString(weapon.name||"");let damage=this.translateRoll(this.cleanString(weapon.damage||""));const isRanged=!!(this.check("handgun",{text:name,removeFromText:!1,saveKeys:!1})||this.check("rifle",{text:name,removeFromText:!1,saveKeys:!1})||this.check("smb",{text:name,removeFromText:!1,saveKeys:!1})||this.check("machineGun",{text:name,removeFromText:!1,saveKeys:!1})||this.check("launched",{text:name,removeFromText:!1,saveKeys:!1}));let found;lastPercent=null===weapon.percentage||void 0===weapon.percentage||Number(weapon.percentage);let ahdb=!1,addb=!1;do{found=this.getRegEx("\\s*[+-]?\\s*("+this.keys.halfdb+")\\s*("+this.keys.fulldb+")?[-+]?\\s*("+this.parsed.db.replace(/^[-+]/,"")+")?").exec(damage),found?(ahdb=!0,damage=damage.replace(found[0],"")):(found=this.getRegEx("\\s*[+-]?\\s*("+this.keys.fulldb+")\\s*[-+]?\\s*("+this.parsed.db.replace(/^[-+]/,"")+")?").exec(damage),found&&(addb=!0,damage=damage.replace(found[0],"")))}while(found);const damages=damage.split("/"),isShotgun=3===damages.length,data={name,type:"weapon",data:{skill:{id:lastPercent},properties:{},range:{normal:{value:isShotgun?10:0,damage:damages[0]},long:{value:isShotgun?20:0,damage:isShotgun?damages[1]:""},extreme:{value:isShotgun?50:0,damage:isShotgun?damages[2]:""}}}};data.data.properties.shotgun=isShotgun,data.data.properties.rngd=isRanged||isShotgun,data.data.properties.melee=!data.data.properties.rngd,data.data.properties.ahdb=ahdb,data.data.properties.addb=addb,void 0===this.parsed.attacks&&(this.parsed.attacks=[]),this.parsed.attacks.push(data)}else(newline=text.match(/^(.+)\n/))?text=text.replace(newline[0],"\n"):(newline=text.match(/^[^\n]+$/))&&(text="")}while(maxLoops>0&&(weapon||dodge||text));0===maxLoops&&(ui.notifications.warn("Unexpected weapons text, please raise a bug report with the text you are attempting to import"),console.debug("Unexpected weapons:",text))}processSkills(text,key="skills"){if(0===text.trim().length)return;const breaks=text.split(/\.\r?\n/);let skill;breaks.length>1&&(text=breaks[0]);let maxLoops=40;do{maxLoops--,text=text.trim(),skill=this.check("skill",{saveKeys:!1,text}),skill&&(text=text.replace(skill["-source"],"\n"),void 0===this.parsed[key]&&(this.parsed[key]=[]),this.parsed[key].push({name:this.cleanString(skill.name),value:Number(skill.percentage)}))}while(maxLoops>0&&skill);0===maxLoops&&(ui.notifications.warn("Unexpected skills text, please raise a bug report with the text you are attempting to import"),console.debug("Unexpected skills:",text))}processSpells(text){if(0===text.trim().length)return;const breaks=text.split(/\.\r?\n/);breaks.length>1&&(text=breaks[0]);const spellsArr=text.replace(/([\n\r]+)/g," ").split(/(?<!\([^)]+),/);this.text=this.text.replace(text.trim(),"\n");for(const spell of spellsArr)void 0===this.parsed.spells&&(this.parsed.spells=[]),this.parsed.spells.push(this.cleanString(spell))}async parseCharacter(text){this.text=String(text).trim().replace(/\u2013|\u2014|\u2212/g,"-").replace(/\u2019/g,"'").replace(/[\udbc0-\udbfe][\udc00-\udfff]/g,"");let header,min=this.text.length,check=this.check("str",{type:CoC7ActorImporter.asNumber})["-index"];if(isNaN(check)||(min=Math.min(min,check)),check=this.check("con",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("siz",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("int",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("pow",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("dex",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("app",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("edu",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("san",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("hp",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("mp",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),min>0){if(header=this.text.substr(0,min),check=this.check("name",{text:header}),!1===check?this.parsed.name=game.i18n.localize("CoC7.ImportedUnnamedCharacter"):header=header.replace(check["-source"],"\n"),check=this.check("age",{text:header}),!1!==check&&(header=header.replace(check["-source"],"\n")),!this.check("occupation",{text:header})&&""!==header.trim()){let occupation=header;header.indexOf(".")>-1&&(occupation=header.substr(0,header.indexOf(".")+1)),this.parsed.occupation=occupation.replace(/([\n\r]+)/g," ").trim().replace(/,$/,""),this.text=this.text.replace(occupation.trim(),"\n")}}else this.parsed.name=game.i18n.localize("CoC7.ImportedUnnamedCharacter");if(void 0!==this.parsed.occupation&&void 0===this.parsed.age){const occupationAge=this.parsed.occupation.match(/^(?<age>\d+),(?<occupation>.+)$/);occupationAge&&(this.parsed.age=occupationAge.groups.age,this.parsed.occupation=occupationAge.groups.occupation.trim())}this.check("db")&&!this.check("dbNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.db})||(this.parsed.db="0"),this.parsed.db=this.translateRoll(this.parsed.db),this.check("build"),this.check("armor")&&!this.check("armorNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.armor})||(this.parsed.armor="0"),this.check("mov",{type:CoC7ActorImporter.asNumber}),this.check("lck",{type:CoC7ActorImporter.asNumber}),this.check("sanLoss"),this.parsed.sanLoss=this.translateRoll(this.parsed.sanLoss),this.check("attacksPerRound")&&this.check("attacksPerRoundNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.attacksPerRound})&&(this.parsed.attacksPerRound="0"),this.text="\n"+this.text;let sections=this.getRegEx("("+this.keys.sectionCombats+")","i");null===this.text.match(sections)&&(sections=this.check("guessStartCombat",{saveKeys:!1,removeFromText:!1}),sections&&(this.text=[this.text.slice(0,sections["-index"]),this.keys.newCombatHeader,this.text.slice(sections["-index"])].join("")));const regExpSections=this.getRegEx(this.regEx.sections,"i");if(sections=this.text.split(regExpSections),null!==sections)for(let i=0,im=sections.length;i<im;i++)null!==sections[i].match(this.getRegEx("("+this.keys.sectionCombats+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processCombat(sections[i+1]),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionSkills+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSkills(sections[i+1]),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionLangauges+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSkills(sections[i+1],"languages"),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionSpells+")","i"))&&void 0!==sections[i+1]&&(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSpells(sections[i+1]),i++);return this.parsed.gmnotes=this.toHTML(this.text),this.parsed}disableAttribAuto(key,attribValue,check,updateData){const value=Math.max(0,Number(attribValue));return value!==Number(check)&&(updateData[`data.attribs.${key}.auto`]=!1,updateData[`data.attribs.${key}.value`]=value,"build"===key?updateData[`data.attribs.${key}.current`]=value:updateData[`data.attribs.${key}.max`]=value),updateData}async createEntity(characterData,entityType){const importedCharactersFolder=await this.createImportCharactersFolderIfNotExists();"npc"!==entityType&&(entityType="creature");const actorData={name:characterData.name,type:entityType,folder:importedCharactersFolder.id,data:characterData.actor},npc=await Actor.create(actorData);await npc.createEmbeddedDocuments("Item",characterData.items,{renderSheet:!1});const updateData={};let value=0;void 0!==characterData.actor.attribs.hp?.value&&this.disableAttribAuto("hp",characterData.actor.attribs.hp.value,npc.hpMax,updateData),void 0!==characterData.actor.attribs.mp?.value&&this.disableAttribAuto("mp",characterData.actor.attribs.mp.value,npc.mpMax,updateData),void 0!==characterData.actor.attribs.mov?.value&&this.disableAttribAuto("mov",characterData.actor.attribs.mov.value,npc.mov,updateData),void 0!==characterData.actor.attribs.build?.value&&this.disableAttribAuto("build",characterData.actor.attribs.build.value,npc.build,updateData),void 0!==characterData.actor.attribs.db?.value&&(value=String(characterData.actor.attribs.db.value).replace(/^\+\s*/,""),value!==String(npc.db)&&(updateData["data.attribs.db.auto"]=!1,updateData["data.attribs.db.value"]=value)),Object.keys(updateData).length>0&&(CONFIG.debug.CoC7Importer&&console.debug("updateData:",updateData),await npc.update(updateData));const updateItemData=[];let lastWeaponSkill=null;for(const pair of this.weaponSkills){!1!==pair[0]&&(lastWeaponSkill=npc.items.filter((i=>i.name===pair[0].name&&"skill"===i.type&&Number(i.data.data.value)===Number(pair[0].data.value))));const weapon=npc.items.filter((i=>i.name===pair[1].name&&"weapon"===i.type&&i.data.data.range.normal.damage===pair[1].data.range.normal.damage));lastWeaponSkill[0]&&weapon[0]&&updateItemData.push({_id:weapon[0].id,"data.skill.main.id":lastWeaponSkill[0].id,"data.skill.main.name":lastWeaponSkill[0].name})}return updateItemData.length>0&&(CONFIG.debug.CoC7Importer&&console.debug("updateItemData:",updateItemData),await npc.updateEmbeddedDocuments("Item",updateItemData)),npc}async createImportCharactersFolderIfNotExists(){let folderName=game.i18n.localize("CoC7.ImportedCharactersFolder");"CoC7.ImportedCharactersFolder"===folderName&&(folderName="Imported characters");let importedCharactersFolder=game.folders.find((entry=>entry.data.name===folderName&&"Actor"===entry.data.type));return null==importedCharactersFolder&&(importedCharactersFolder=await Folder.create({name:folderName,type:"Actor",parent:null}),ui.notifications.info(game.i18n.localize("CoC7.CreatedImportedCharactersFolder"))),importedCharactersFolder}actorData(pc){const data={characteristics:{},attribs:{},infos:{},special:{},description:{keeper:""},flags:{locked:!1,displayFormula:!1}};for(const key of["str","con","siz","dex","app","int","pow","edu"])void 0!==pc[key]&&(data.characteristics[key]={value:Number(pc[key])});for(const key of["san","mov","build","armor","lck","hp","mp"])void 0!==pc[key]&&(data.attribs[key]={value:Number(pc[key])});void 0!==pc.db&&(data.attribs.db={value:pc.db});for(const key of["age","occupation"])void 0!==pc[key]&&(data.infos[key]=pc[key]);if(void 0!==pc.sanLoss){const[passed,failed]=pc.sanLoss.split("/");data.special.sanLoss={checkPassed:passed,checkFailled:failed}}return void 0!==pc.attacksPerRound&&(data.special.attacksPerRound=Number(pc.attacksPerRound)),data.description.keeper=pc.gmnotes,CONFIG.debug.CoC7Importer&&console.debug("actorData:",data),data}async guessItem(type,name,{combat=null}={}){name=name.toLowerCase();let existing=null;for(let o=0,oM=this.itemLocations.length;o<oM;o++)switch(this.itemLocations.substr(o,1)){case"i":if(existing=game.items.find((item=>item.data.type===type&&item.data.name.toLowerCase()===name&&(null===combat||item.data.properties.combat===combat))),existing)return existing;break;case"w":case"m":case"s":for(const pack of game.packs)if("Item"===pack.metadata.entity&&("w"===this.itemLocations[o]&&"world"===pack.metadata.package||"S"===this.itemLocations[o]&&"CoC7"===pack.metadata.package||"s"===this.itemLocations[o]&&!["world","CoC7"].includes(pack.metadata.package))){if(existing=(await pack.getDocuments()).find((item=>item.data.type===type&&item.data.name.toLowerCase()===name&&(null===combat||item.data.properties.combat===combat))),existing)return existing}}}async itemsData(pc){const items=[];if(this.weaponSkills=[],void 0!==pc.attacks)for(const attack of pc.attacks){let skill=!1;!0!==attack.data?.skill?.id&&(skill=await this.weaponSkill(attack),items.push(skill)),attack.data.skill.id=null,items.push(attack),this.weaponSkills.push([skill,attack])}if(void 0!==pc.skills)for(const skill of pc.skills){const existing=await this.guessItem("skill",skill.name);if(void 0!==existing){const cloned=existing.toObject();cloned.data.base=skill.value,void 0!==skill.push&&(cloned.data.properties.push=skill.push),items.push(duplicate(cloned))}else{const options={};void 0!==skill.push&&(options.push=skill.push),items.push(CoCActor.emptySkill(skill.name,skill.value,options))}}if(void 0!==pc.languages)for(const skill of pc.languages){const existing=await this.guessItem("skill",skill.name);if(void 0!==existing){const cloned=existing.toObject();cloned.data.base=skill.value,items.push(duplicate(cloned))}else items.push(CoCActor.emptySkill(skill.name,skill.value,{img:CoC7Item.iconLanguage,specialization:"Language"}))}if(void 0!==pc.spells)for(const name of pc.spells){const existing=await this.guessItem("spell",name);if(void 0!==existing){const cloned=existing.toObject();items.push(duplicate(cloned))}else items.push(CoCActor.emptySpell(name))}return items}async weaponSkill(weapon){let skill=null;if(this.getRegEx("handgun").exec(weapon.name)?(skill=await this.guessItem("skill","Handgun",{combat:!0}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Handgun skill: ${skill}`)):this.getRegEx("rifle").exec(weapon.name)?(skill=await this.guessItem("skill","Rifle/Shotgun",{combat:!0}),skill||(skill=await this.guessItem("skill","Rifle",{combat:!0}),skill||(skill=await this.guessItem("skill","Shotgun",{combat:!0}))),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Rifle skill: ${skill}`)):this.getRegEx("smb").exec(weapon.name)?(skill=await this.guessItem("skill","Submachine Gun",{combat:!0}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Submachine Gun skill: ${skill}`)):this.getRegEx("machineGun").exec(weapon.name)?(skill=await this.guessItem("skill","Machine Gun",{combat:!0}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Machine Gun skill: ${skill}`)):this.getRegEx("launched").exec(weapon.name)&&(skill=await this.guessItem("skill","Launch",{combat:!0}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Launch skill: ${skill}`)),null!=skill){return skill.clone({data:{value:weapon.data?.skill?.id}})}const firearms=weapon.data?.properties?.rngd,parts=CoC7Item.getNamePartsSpec(weapon.name,game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName")),newSkill={type:"skill",name:parts.name,data:{skillName:parts.skillName,specialization:parts.specialization,properties:{special:!0,fighting:!firearms,firearm:firearms,combat:!0},base:weapon.data?.skill?.id,value:weapon.data?.skill?.id}};return CONFIG.debug.CoC7Importer&&console.debug(`Weapon skill not found for ${weapon.name}, creating a new one`,newSkill),newSkill}needsConversion(npc){let needsConversionResult=!0;for(const key of["str","con","siz","dex","app","int","pow","edu"])void 0!==npc[key]&&npc[key]>30&&(needsConversionResult=!1);return CONFIG.debug.CoC7Importer&&console.debug("needsConversion:",needsConversionResult),needsConversionResult}async createActor(inputs){CONFIG.debug.CoC7Importer&&console.debug("createActor:",inputs);const lang=CoC7ActorImporterRegExp.checkLanguage(inputs.lang);this.keys=CoC7ActorImporterRegExp.getKeys(lang),this.regEx=CoC7ActorImporterRegExp.getRegularExpressions(lang),this.itemLocations=inputs.source,CONFIG.debug.CoC7Importer&&console.debug("Regular Expressions:",lang,this.keys,this.regEx);let character=await this.parseCharacter(inputs.text);CONFIG.debug.CoC7Importer&&console.debug("parseCharacter:",character),("coc-guess"===inputs.convertFrom6E&&this.needsConversion(character)||"coc-convert"===inputs.convertFrom6E)&&(character=await this.convert7E(character));const characterData={name:character.name,actor:this.actorData(character),items:await this.itemsData(character)};if(void 0!==inputs.testMode&&!0===inputs.testMode)return characterData;return await this.createEntity(characterData,inputs.entity)}async convert7E(creature){CONFIG.debug.CoC7Importer&&console.debug("Converting npc",creature);for(const key of["str","con","siz","dex","app","int","pow"])void 0!==creature[key]&&(creature[key]*=5);return void 0!==creature.edu&&(creature.edu<=18?creature.edu*=5:creature.edu<=26?creature.edu=creature.edu+90-18:creature.edu=99),void 0!==creature.db&&("-1d4"===creature.db?creature.db=-1:"-1d6"===creature.db&&(creature.db=-2)),CONFIG.debug.CoC7Importer&&console.debug("convert7E: ",creature),creature}}class CoC7ActorImporterDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find("option[value="+game.i18n.lang+"]").attr("selected","selected"),html.find("#coc-entity-lang").on("change",(function(e){$("#coc-pasted-character-data").prop("placeholder",CoC7ActorImporterRegExp.getExampleText($(this).val()))})).trigger("change"),html.find("#coc-pasted-character-data").on("keyup",(function(e){const charactersTooExtended=$(this).val().match(/[\udbc0-\udbfe][\udc00-\udfff]/),prompt=$("#coc-prompt");charactersTooExtended?prompt.html(game.i18n.localize("CoC7.TextFieldInvalidCharacters")).addClass("error"):prompt.html(game.i18n.localize("CoC7.PasteTheDataBelow")).removeClass("error")}))}static async getInputs(){const inputs={};inputs.entity=$("#coc-entity-type").val().trim(),inputs.convertFrom6E=$("#coc-convert-6E").val().trim(),CONFIG.debug.CoC7Importer&&console.debug("entity type:",inputs.entity),inputs.lang=CoC7ActorImporterRegExp.checkLanguage($("#coc-entity-lang").val().trim()),inputs.source=$("#source").val().trim();let text=$("#coc-pasted-character-data").val().trim();return CONFIG.debug.CoC7Importer&&console.debug("received text","##"+text+"##"),"."!==text[text.length]&&(text+="."),inputs.text=text,inputs}static async importActor(html){CONFIG.debug.CoC7Importer&&console.debug("html",html);const inputs=await CoC7ActorImporterDialog.getInputs(),actor=new CoC7ActorImporter,createdActor=await actor.createActor(inputs);CONFIG.debug.CoC7Importer&&console.debug("createdActor:",createdActor),ui.notifications.info("Created "+createdActor.data?.type?.toUpperCase()+": "+createdActor.data?.name),await createdActor.sheet.render(!0)}submit(button){if("getExampleNow"!==button.cssClass)""===$("#coc-pasted-character-data").val().trim()&&button.callback||super.submit(button);else{const content=CoC7ActorImporterRegExp.getExampleText($("#coc-entity-lang :selected").val());CoC7Utilities.copyToClipboard(content).then((()=>ui.notifications.info(game.i18n.localize("CoC7.Copied"))))}}static async create(data={}){data.languages=CoC7ActorImporterRegExp.getTranslations(),data.language=CoC7ActorImporterRegExp.checkLanguage(null);const html=await renderTemplate("systems/CoC7/templates/apps/actor-importer.html",data);return new Promise((resolve=>{new CoC7ActorImporterDialog({title:data.title,content:html,data,buttons:{import:{icon:'<i class="fas fa-file-import"></i>',label:game.i18n.localize("CoC7.Import"),callback:CoC7ActorImporterDialog.importActor},getExampleNow:{icon:'<i class="fas fa-info-circle"></i>',label:game.i18n.localize("CoC7.getTheExample")},no:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel")}}},{classes:["coc7","dialog","actor-importer"],width:600}).render(!0)}))}}Hooks.once("ready",(()=>{game.modules.get("CoC7-Importer-Tests")?.active&&(window.CoC7ActorImporter=CoC7ActorImporter)}));class CoC7MenuLayer extends PlaceablesLayer{constructor(){super(),this.objects={}}static get layerOptions(){return foundry.utils.mergeObject(super.layerOptions,{name:"coc7menu",zIndex:60})}static get documentName(){return"Token"}get placeables(){return[]}}class CoC7Menu{static getButtons(controls){canvas.coc7gmtools=new CoC7MenuLayer;const isGM=game.user.isGM;controls.push({name:"coc7menu",title:"CoC7.GmTools",layer:"coc7gmtools",icon:"game-icon game-icon-tentacle-strike",visible:isGM,tools:[{toggle:!0,icon:"fas fa-angle-double-up",name:"devphase",active:game.settings.get("CoC7","developmentEnabled"),title:"CoC7.DevPhase",onClick:async toggle=>await CoC7Utilities.toggleDevPhase(toggle)},{toggle:!0,icon:"fas fa-user-edit",name:"charcreate",active:game.settings.get("CoC7","charCreationEnabled"),title:"CoC7.CharCreationMode",onClick:async toggle=>await CoC7Utilities.toggleCharCreation(toggle)},{button:!0,icon:"fas fa-user-plus",name:"actor-import",title:"CoC7.ActorImporter",onClick:async()=>await CoC7ActorImporterDialog.create({title:game.i18n.localize("CoC7.ActorImporter")})},{toggle:!0,icon:"fas fa-certificate",class:"xp_toggle",name:"xptoggle",active:game.settings.get("CoC7","xpEnabled"),title:"CoC7.toggleXP",onClick:async toggle=>await CoC7Utilities.toggleXPGain(toggle)},{button:!0,icon:"game-icon game-icon-card-joker",name:"fakeroll",title:"CoC7.FakeRoll",onClick:CoC7Chat.fakeRollMessage},{button:!0,icon:"fas fa-moon",name:"startrest",title:"CoC7.startRest",onClick:async()=>await CoC7Utilities.getTarget()}]})}static renderControls(app,html,data){const isGM=game.user.isGM,keeperMenu=html.find(".game-icon-tentacle-strike").parent();keeperMenu.addClass("coc7-menu"),isGM&&keeperMenu.after('<li class="scene-control coc7-menu coc7-create-link" title="'+game.i18n.localize("CoC7.CreateLink")+'"><i class="fas fa-link"></i></li>'),keeperMenu.after('<li class="scene-control coc7-menu coc7-dice-roll" title="'+game.i18n.localize("CoC7.RollDice")+'"><i class="game-icon game-icon-d10"></i></li>'),html.find(".coc7-menu.coc7-dice-roll").click((event=>CoC7Utilities.rollDice(event))),html.find(".coc7-menu.coc7-create-link").click((event=>CoC7LinkCreationDialog.create(event)))}}class CoC7Canvas{static get COC7_TYPES_SUPPORTED(){return["link"]}static async onDropSomething(canvas,item){if(item.CoC7Type&&CoC7Canvas.COC7_TYPES_SUPPORTED.includes(item.CoC7Type)){const gridSize=canvas.scene.data.grid,x=item.x-gridSize/2,y=item.y-gridSize/2,height=gridSize,width=gridSize;let dropTargetTokens=canvas.tokens.placeables.filter((obj=>{const c=obj.center;return Number.between(c.x,x,x+width)&&Number.between(c.y,y,y+height)}));if(dropTargetTokens.length||(dropTargetTokens=canvas.tokens.controlled),"link"===item.CoC7Type){const link=await CoC7Link.fromData(item);link.link||ui.notifications.error("Invalid link");const option={};if(option.speaker={alias:game.user.name},dropTargetTokens.length)for(const t of dropTargetTokens)t.actor.hasPlayerOwner&&(option.whisper=t.actor.owners,chatHelper.createMessage(null,game.i18n.format("CoC7.MessageTargetCheckRequested",{name:t.actor.name,check:link.link}),option));else{const whisperTargets=game.users.players.filter((u=>!!u.character));for(const u of whisperTargets)option.whisper=[u],chatHelper.createMessage(null,game.i18n.format("CoC7.MessageTargetCheckRequested",{name:u.character.name,check:link.link}),option)}}}}}class CoC7SettingsDirectory extends Settings{activateListeners(html){super.activateListeners(html),game.user.isGM&&(html.find("#settings-game").append('<button class="trigger-data-migration"><i class="fas fa-wrench"></i> '+game.i18n.localize("CoC7.Migrate.TriggerButton")+"</button>"),html.find(".trigger-data-migration").click((()=>{new Dialog({title:game.i18n.localize("CoC7.Migrate.TriggerTitle"),content:game.i18n.localize("CoC7.Migrate.TriggerContents"),buttons:{migrate:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Migrate.TriggerRestart"),callback:async()=>{await game.settings.set("CoC7","systemUpdateVersion",0),window.location.reload()}},close:{icon:'<i class="fas fa-ban"></i>',label:game.i18n.localize("Cancel"),callback:()=>{}}},default:"close"},{}).render(!0)})))}}class CoC7CompendiumDirectory extends CompendiumDirectory{activateListeners(html){super.activateListeners(html);let translated=!1;if("en"===game.i18n.lang)translated=!0;else if(void 0!==game.babele)for(const v of Object.values(game.babele.modules))v.lang===game.i18n.lang&&(translated=!0);translated||(html.find("footer.directory-footer").append('<a class="compendium-translation" title="'+game.i18n.localize("CoC7.HowToTranslateTitle")+'">'+game.i18n.localize("CoC7.HowToTranslateTitle")+"</a>"),html.find(".compendium-translation").click((()=>{const message="<p>"+game.i18n.localize("CoC7.HowToTranslateWarning")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateInstallBabele")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateInstallTranslation")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateEnableTranslation")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateNoTranslation")+"</p>";new Dialog({title:game.i18n.localize("CoC7.HowToTranslateTitle"),content:message,buttons:{},default:"close"},{}).render(!0)})))}}class CoC7ActorDirectory extends ActorDirectory{activateListeners(html){super.activateListeners(html),html.find("footer.directory-footer").append('<a class="actor-import">'+game.i18n.localize("CoC7.ActorImporter")+"</a>"),html.find(".actor-import").click((()=>{CoC7ActorImporterDialog.create({title:game.i18n.localize("CoC7.ActorImporter")})}))}}class CoC7Spell extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/pentagram-rose.svg"),super(data,context),this.context=context}async cast(){if(!this.isOwned)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));const costs=this.data.data.costs,losses=[];let convertSurplusIntoHitPoints;if(costs.magicPoints=CoC7Utilities.isFormula(costs.magicPoints)?(await new Roll(costs.magicPoints).roll({async:!0})).total:parseInt(costs.magicPoints),costs.magicPoints&&costs.magicPoints>this.actor.data.data.attribs.mp.value&&(convertSurplusIntoHitPoints=await new Promise((resolve=>{const convertedHitPoints=costs.magicPoints-this.actor.data.data.attribs.mp.value,convertedMagicPoints=costs.magicPoints-convertedHitPoints,data={title:" ",content:game.i18n.format("CoC7.NotEnoughMagicPoints",{actorMagicPoints:this.actor.data.data.attribs.mp.value,convertedHitPoints,convertedMagicPoints,originalMagicPoints:costs.magicPoints,spell:this.name}),buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>resolve(!1)},proceed:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>(costs.hitPoints=convertedHitPoints,costs.magicPoints=convertedMagicPoints,resolve(!0))}},default:"cancel",classes:["coc7","dialog"]};new Dialog(data).render(!0)})),!convertSurplusIntoHitPoints))return;for(const[key,value]of Object.entries(costs))value&&0!==Number(value)&&losses.push(await this.resolveLosses(key,value));const description=this.data.data.description.value,html=await renderTemplate("systems/CoC7/templates/items/spell/chat.html",{description,losses});return await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:this.name,content:html})}async resolveLosses(characteristic,value){let characteristicName,loss;loss=CoC7Utilities.isFormula(value)?(await new Roll(value).roll({async:!0})).total:parseInt(value);const actorData=this.actor.data.data;switch(characteristic){case"hitPoints":characteristicName=game.i18n.localize("CoC7.HitPoints"),this.actor.dealDamage(loss,{ignoreArmor:!0});break;case"sanity":characteristicName=game.i18n.localize("CoC7.SanityPoints"),this.grantSanityLoss(loss);break;case"magicPoints":characteristicName=game.i18n.localize("CoC7.MagicPoints"),this.actor.setMp(actorData.attribs.mp.value-loss);break;case"power":characteristicName=game.i18n.localize("CHARAC.Power"),this.actor.update({"data.characteristics.pow.value":actorData.characteristics.pow.value-loss})}return{characteristicName,loss}}async grantSanityLoss(value){const template=SanCheckCard.template;let html=await renderTemplate(template,{});const message=await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.CastingSpell",{spell:this.name}),content:html}),card=await message.getHTML();if(void 0!==card.length&&1===card.length){const sanityLoss=value;html=card.find(".chat-card")[0],html.dataset.object=escape(JSON.stringify({actorKey:this.actor.id,fastForward:!1,sanData:{sanMin:sanityLoss,sanMax:sanityLoss}}));const sanityCheck=SanCheckCard.getFromCard(html);await sanityCheck.bypassRollSan(),await sanityCheck.rollSanLoss(),sanityCheck.updateChatCard()}}async update(data,context){if(void 0!==this.context.parent&&void 0!==this.context.bookId){let item,book;null===this.context.parent?(item=game.items.get(this.context.bookId),book=item.toObject()):book=this.context.parent.items.get(this.context.bookId).toObject();for(let i=0,im=book.data.spells.length;i<im;i++)book.data.spells[i]._id===this.id&&(book.data.spells[i]=mergeObject(book.data.spells[i],data));null===this.context.parent?(await item.update({"data.spells":book.data.spells}),this.sheet.object=new CoC7Spell(book.data.spells.find((spell=>spell._id===this.id)),this.context)):(await this.context.parent.updateEmbeddedDocuments("Item",[book]),this.sheet.object=new CoC7Spell(book.data.spells.find((spell=>spell._id===this.id)),this.context)),this.sheet.render(!0)}else super.update(data,context)}}class CoC7Book extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/secret-book.svg"),super(data,context)}static convertDifficulty(difficulty){switch(difficulty){case"hard":return CoC7Check.difficultyLevel.hard;case"extreme":return CoC7Check.difficultyLevel.extreme;case"critical":return CoC7Check.difficultyLevel.critical;case"unreadable":return CoC7Check.difficultyLevel.impossible;default:return CoC7Check.difficultyLevel.regular}}async addSpells(spells){const collection=this.data.data.spells?duplicate(this.data.data.spells):[];for(const spell of spells)collection.push(spell);return await this.update({"data.spells":collection})}async spellDetail(index){const isKeeper=game.user.isGM,data=this.data.data.spells[index],parent=this.actor?this.actor:null,spell=new CoC7Spell(data,{parent,bookId:this.id});if(isKeeper||spell.data.data.learned)return await spell.sheet.render(!0)}async attemptInitialReading(){const difficulty=CoC7Book.convertDifficulty(this.data.data.difficultyLevel),language=this.data.data.language,skill=this.actor?.getSkillsByName(language);if(skill){if(0===skill.length)return ui.notifications.error(game.i18n.format("CoC7.UnknownLanguage",{actor:this.actor.name}));{const check=new CoC7Check;return check.actor=this.actor,check.skill=skill[0].id,check.difficulty=difficulty,check.parent=this.uuid,check.context="INITIAL_READING",check.flavor=game.i18n.format("CoC7.ReadAttempt",{book:this.name,language,difficulty:this.data.data.difficultyLevel}),await check.roll(),await check.toMessage()}}return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"))}async changeProgress(mode,value){if(!this.isOwned&&"reset"!==mode)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));if(!this.data.data.initialReading&&"reset"!==mode)return ui.notifications.error(game.i18n.format("CoC7.InitialReadingNeeded",{actor:this.actor.name,book:this.name}));if(!this.data.data.type.mythos&&"reset"!==mode)return ui.notifications.error(game.i18n.localize("CoC7.NotMythosTome"));const necessary=this.data.data.study.necessary;let fullStudy=this.data.data.fullStudy,progress=this.data.data.study.progress;if(isNaN(progress))return await this.update({"data.study.progress":0});if(value&&progress>value)return await this.update({"data.fullStudy":++fullStudy,"data.study.progress":value}),await this.completeFullStudy();if("increase"===mode&&progress<necessary){if(!1!==await this.checkExhaustion())return;if(await this.update({"data.study.progress":++progress}),progress===necessary)return await this.update({"data.fullStudy":++fullStudy}),await this.grantFullStudy()}else if("decrease"===mode&&progress>0)return await this.update({"data.study.progress":--progress})}async checkExhaustion(){const actorMythosValue=this.actor?.cthulhuMythos,mythosRating=this.data.data.mythosRating;if(this.data.data.initialReading)return actorMythosValue>=mythosRating&&(await this.update({"data.study.progress":this.data.data.study.necessary}),ui.notifications.warn(game.i18n.format("CoC7.BookHasNothingMoreToTeach",{actor:this.actor.name,book:this.name})))}async grantFullStudy(){if(!this.data.data.type.mythos)return;if(!1!==await this.checkExhaustion())return;const actorMythosValue=this.actor.cthulhuMythos,developments=[],mythosRating=this.data.data.mythosRating;let mythosFinal=this.data.data.gains.cthulhuMythos.final;if(actorMythosValue+mythosFinal>mythosRating)for(let index=1;index<=mythosFinal;index++)actorMythosValue+mythosFinal-index<=mythosRating&&(mythosFinal-=index);return developments.push({name:game.i18n.localize("CoC7.CthulhuMythosName"),gain:parseInt(mythosFinal)},{name:this.data.data.language,gain:"development"}),await this.grantSkillDevelopment(developments),await this.rollSanityLoss(),await this.update({"data.fullStudies":++this.data.data.fullStudies})}async grantInitialReading(){if(this.data.data.initialReading)return;const developments=[],mythos={gains:this.data.data.gains.cthulhuMythos.initial,type:this.data.data.type.mythos},occult={gains:this.data.data.gains.occult,type:this.data.data.type.occult},other_gains=this.data.data.gains.others,other_type=this.data.data.type.other;if(mythos.type&&mythos.gains&&developments.push({name:game.i18n.localize("CoC7.CthulhuMythosName"),gain:parseInt(mythos.gains)}),occult.type&&occult.gains&&developments.push({name:game.i18n.localize("CoC7.Occult"),gain:parseInt(occult.gains)}),other_type)for(const skill of other_gains){const pattern=skill.name.match(/^(.+) \((.+)\)$/);pattern&&(skill.specialization=pattern[1],skill.name=pattern[2]),"development"!==skill.value&&(skill.value=(await new Roll(skill.value).roll({async:!0})).total),skill.value&&developments.push({name:skill.name,gain:skill.value,specialization:skill.specialization})}return await this.grantSkillDevelopment(developments),(mythos.type||occult.type)&&this.data.data.sanityLoss&&await this.rollSanityLoss(),await this.update({"data.initialReading":!0})}async grantSpellLearning(spelllearned){for(const spell of this.data.data.spells)if(spell._id===spelllearned._id){spell.data.learned=!0;await this.actor.items.find((item=>"spell"===item.data.type&&item.data.name===spelllearned.name))?ui.notifications.warn(game.i18n.format("CoC7.SpellAlreadyLearned",{spell:spelllearned.name,book:this.name})):spelllearned.data.learned=!0;break}await this.update({"data.spells":this.data.data.spells}),spelllearned.data.learned&&(ui.notifications.info(game.i18n.format("CoC7.SpellSuccessfullyLearned",{spell:spelllearned.name,book:this.name})),await this.actor.createEmbeddedDocuments("Item",[duplicate(spelllearned)]))}async grantSkillDevelopment(developments){if(0!==developments.length){for(const development of developments){if(!development.gain)continue;let skill=await this.actor.getSkillsByName(development.name);if(0===skill.length){const existingSkill=await game.items.find((item=>"skill"===item.data.type&&item.data.name===development.name));existingSkill?skill=await this.actor.createEmbeddedDocuments("Item",[duplicate(existingSkill)]):(skill=await this.actor.createSkill(development.name,0),development.specialization&&await skill[0].update({"data.properties.special":!0,"data.specialization":development.specialization}))}if(skill=skill[0],"development"===development.gain)await skill.flagForDevelopement();else{if(skill.value+development.gain>99)for(let index=1;index<=development.gain;index++)skill.value+development.gain-index<=99&&(development.gain-=index,await skill.increaseExperience(development.gain));await skill.increaseExperience(development.gain)}}return this.showDevelopmentsTable(developments)}}async redoFullStudy(){return await this.update({"data.study.progress":0}),await this.update({"data.study.necessary":2*this.data.data.study.necessary})}async rollSanityLoss(){const value=this.data.data.sanityLoss;if(!value||""===value)return;const template=SanCheckCard.template;let html=await renderTemplate(template,{});const message=await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.ReadingMythosTome",{book:this.name}),content:html}),card=await message.getHTML();if(void 0!==card.length&&1===card.length){const sanityLoss=(await new Roll(value).roll({async:!0})).total;html=card.find(".chat-card")[0],html.dataset.object=escape(JSON.stringify({actorKey:this.actor.id,fastForward:!1,sanData:{sanMin:sanityLoss,sanMax:sanityLoss}}));const sanityCheck=SanCheckCard.getFromCard(html);await sanityCheck.bypassRollSan(),await sanityCheck.rollSanLoss(),sanityCheck.updateChatCard()}}async showDevelopmentsTable(developments){for(const development of developments)development.specialization&&(development.name=`${development.specialization} (${development.name})`),"development"===development.gain?development.gain=game.i18n.localize("CoC7.MarkedForDevelopment"):development.gain=`+${development.gain} ${game.i18n.localize("CoC7.Points")}`;const html=await renderTemplate("systems/CoC7/templates/items/book/development.html",{developments});return await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.GainsForReading",{book:this.name}),content:html})}async attemptSpellLearning(id){if(!this.isOwned)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));if(!this.data.data.initialReading)return ui.notifications.error(game.i18n.format("CoC7.InitialReadingNeeded",{actor:this.actor.name,book:this.name}));const spell=this.data.data.spells.find((spell=>spell._id===id));if(spell){const check=new CoC7Check;check.actor=this.actor,check.difficulty=CoC7Check.difficultyLevel.hard,check.parent=this.uuid,check.flavor=game.i18n.format("CoC7.LearnSpellAttempt",{book:this.name,spell:spell.name}),check.context="SPELL_LEARNING",check.spell=spell,await check.rollCharacteristic("int"),await check.toMessage()}}async updateRoll(roll){const check=CoC7Check.fromRollString(roll);if(check.passed){if("INITIAL_READING"===check.context)return await this.grantInitialReading();if("SPELL_LEARNING"===check.context)return await this.grantSpellLearning(check.spell)}}}class CoC7DecaderDie extends DiceTerm{constructor(termData){super(termData),this.faces=10}get total(){const total=super.total;return 10===total?0:10*total}static get DENOMINATION(){return"t"}}class CoC7DecaderDieOther extends CoC7DecaderDie{static get DENOMINATION(){return"o"}}const SETTINGS={pulpRules:{name:"",hint:"",scope:"world",config:!1,default:!1,type:Boolean},initiativeRule:{name:"SETTINGS.InitiativeRule",hint:"SETTINGS.InitiativeRuleHint",scope:"world",config:!1,default:"basic",type:String,choices:{basic:"SETTINGS.InitiativeRuleBasic",optional:"SETTINGS.InitiativeRuleOptional"},onChange:rule=>_setInitiativeOptions(rule)},developmentRollForLuck:{name:"SETTINGS.developmentRollForLuck",hint:"SETTINGS.developmentRollForLuckHint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleDoubleMaxHealth:{name:"CoC7.Settings.PulpRules.DoubleMaxHealth.Name",hint:"CoC7.Settings.PulpRules.DoubleMaxHealth.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleDevelopmentRollLuck:{name:"CoC7.Settings.PulpRules.DevelopmentRollLuck.Name",hint:"CoC7.Settings.PulpRules.DevelopmentRollLuck.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleArchetype:{name:"CoC7.Settings.PulpRules.Archetype.Name",hint:"CoC7.Settings.PulpRules.Archetype.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleOrganization:{name:"CoC7.Settings.PulpRules.Organization.Name",hint:"CoC7.Settings.PulpRules.Organization.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleTalents:{name:"CoC7.Settings.PulpRules.Talents.Name",hint:"CoC7.Settings.PulpRules.Talents.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleFasterRecovery:{name:"CoC7.Settings.PulpRules.FasterRecovery.Name",hint:"CoC7.Settings.PulpRules.FasterRecovery.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleIgnoreMajorWounds:{name:"CoC7.Settings.PulpRules.IgnoreMajorWounds.Name",hint:"CoC7.Settings.PulpRules.IgnoreMajorWounds.Hint",scope:"world",config:!1,default:!1,type:Boolean},opposedRollTieBreaker:{name:"SETTINGS.OpposedRollTieBreaker",hint:"SETTINGS.OpposedRollTieBreakerHint",scope:"world",config:!1,default:!1,type:Boolean}};function _setInitiativeOptions(rule){let decimals=0;switch(rule){case"optional":decimals=2;break;case"basic":decimals=0}CONFIG.Combat.initiative={formula:null,decimals}}class CoC7GameRuleSettings extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{title:"SETTINGS.TitleRules",id:"rules-settings",template:"systems/CoC7/templates/system/rule-settings.html",width:550,height:"auto",closeOnSubmit:!0})}getData(){const options={},pulpRules={true:!1,false:!1};for(const[k,v]of Object.entries(SETTINGS))options[k]={value:game.settings.get("CoC7",k),setting:v},k.match(/^pulpRule.{2,}$/)&&(pulpRules[options[k].value]=!0);return options.pulpSelection=pulpRules.true?pulpRules.false?"some":"all":"none",options}static registerSettings(){for(const[k,v]of Object.entries(SETTINGS))game.settings.register("CoC7",k,v);_setInitiativeOptions(game.settings.get("CoC7","initiativeRule"))}activateListeners(html){super.activateListeners(html),html.find("#pulpRulesSelect").on("change",(event=>this.onChangePulpSelect(event))),html.find("input.pulpRulesSelect[type=checkbox]").on("click",(event=>this.onClickPulp(event))),html.find("button[name=reset]").on("click",(event=>this.onResetDefaults(event)))}onChangePulpSelect(event){const val=$(event.currentTarget).val();"none"!==val&&"all"!==val||$("#rules-settings").find("input.pulpRulesSelect[type=checkbox]").each((function(){const checkbox=$(this);"none"===val?checkbox.prop("checked",!1):checkbox.prop("checked",!0)}))}onClickPulp(event){const pulpRules={true:!1,false:!1};$("#rules-settings").find("input.pulpRulesSelect[type=checkbox]").each((function(){$(this).prop("checked")?pulpRules.true=!0:pulpRules.false=!0})),$("#pulpRulesSelect").val(pulpRules.true?pulpRules.false?"some":"all":"none")}async onResetDefaults(event){event.preventDefault();for await(const[k,v]of Object.entries(SETTINGS))await game.settings.set("CoC7",k,v?.default);return this.render()}async _updateObject(event,data){const pulpRules={true:!1,false:!1};for await(const key of Object.keys(SETTINGS))game.settings.set("CoC7",key,data[key]),key.match(/^pulpRule.{2,}$/)&&(pulpRules[data[key]]=!0);game.settings.set("CoC7","pulpRules",pulpRules.true&&!pulpRules.false)}}class CoC7ArchetypeSheet extends ItemSheet{activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"skills"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"skills"))))}async _onDrop(event,type="skill",collectionName="skills"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),collection=this.item.data.data[collectionName]?duplicate(this.item.data.data[collectionName]):[];for(const item of dataList)item&&item.data&&[type].includes(item.data.type)&&(!CoC7Item.isAnySpec(item)&&collection.find((el=>el.name===item.data.name))||collection.push(duplicate(item.data)));await this.item.update({[`data.${collectionName}`]:collection})}_onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),chatData=this.item.data.data[collectionName].find((s=>s._id===li.data("item-id"))).data.description;if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData.value}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const itemIndex=$(event.currentTarget).parents(".item").data("item-id");itemIndex&&await this.removeItem(itemIndex,collectionName)}async removeItem(itemId,collectionName="items"){const itemIndex=this.item.data.data[collectionName].findIndex((s=>s._id===itemId));if(itemIndex>-1){const collection=this.item.data.data[collectionName]?duplicate(this.item.data.data[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`data.${collectionName}`]:collection})}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","occupation"],width:520,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return"systems/CoC7/templates/items/archetype.html"}_onDragStart(event){const li=event.currentTarget.closest(".item"),dragData={type:"Item",data:this.item.data.data.skills.find((s=>s._id===li.dataset.itemId))};event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}getData(){const data=super.getData(),itemData=data.data;data.data=itemData.data,data.isOwned=this.item.isOwned;const coreCharacteristics=[];for(const[key,selected]of Object.entries(data.data.coreCharacteristics))if(selected){const characName=game.i18n.localize(`CHARAC.${key.toUpperCase()}`);coreCharacteristics.push(characName)}data.skillListEmpty=0===data.data.skills.length,data.data.skills.sort(((a,b)=>a.name.toLocaleLowerCase().localeCompare(b.name.toLocaleLowerCase()))),data.coreCharacteristicsString="";const orString=` ${game.i18n.localize("CoC7.Or")} `;return coreCharacteristics.length&&(data.coreCharacteristicsString+=coreCharacteristics.join(orString)),data.itemProperties=[],data.itemProperties.push(`${game.i18n.localize("CoC7.PulpTalents")}: ${data.data.talents}`),data.itemProperties.push(`${game.i18n.localize("CoC7.BonusPoints")}: ${data.data.bonusPoints}`),data.isKeeper=game.user.isGM,data}_updateObject(event,formData){if(formData.data||(formData=expandObject(formData)),formData.data.groups){formData.data.groups=Object.values(formData.data?.groups||{});for(let index=0;index<this.item.data.data.groups.length;index++)formData.data.groups[index].skills=duplicate(this.item.data.data.groups[index].skills)}super._updateObject(event,formData)}}class CoC7BookSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/items/book/main.html",classes:["coc7","item","book"],width:500,height:"auto",resizable:!1,dragDrop:[{dragSelector:".spells",dropSelector:null}],scrollY:[".body"],tabs:[{navSelector:".navigation",contentSelector:".body",initial:"description"}]})}async getData(){const data=super.getData(),itemData=data.data;return data.data=itemData.data,data.initialReading=this.item.data.data.initialReading,data.isKeeper=game.user.isGM,data.isOwner=this.item.isOwner,data.spellsLearned=this.spellsLearned,data.exhausted=!1!==await this.item.checkExhaustion(),data.studyCompleted=this.item.data.data.study.progress===this.item.data.data.study.necessary,data.spellListEmpty=0===data.data.spells.length,data}get spellsLearned(){let amount=0;const spells=this.item.data.data.spells;for(const spell of spells)spell.data.learned&&amount++;return`${amount} / ${spells.length}`}activateListeners(html){super.activateListeners(html),html.find("#attempt-initial-reading").click((event=>{event.preventDefault(),this.item.attemptInitialReading()})),html.find(".delete-spell").click((event=>this._onDelete(event))),html.find(".edit-spell").click((event=>this._onSpellDetail(event))),html.find(".spell-name").click((event=>this._onSpellDetail(event))),html.find(".teach-spell").click((event=>{const id=$(event.currentTarget).parents("li").data("id");this.item.attemptSpellLearning(id)})),html.find('[name="data.study.necessary"]').change((event=>{const value=parseInt(event.currentTarget.value);this.item.changeProgress("reset",value)})),html.find("#increase-progress").click((()=>{this.item.changeProgress("increase")})),html.find("#decrease-progress").click((()=>{this.item.changeProgress("decrease")})),html.find(".add-other-gains").click((event=>{this.modifyOthersGains(event,"add")})),html.find(".change-other-gains").change((event=>{this.modifyOthersGains(event,"change")})),html.find("#redo-full-study").click((()=>{this.item.redoFullStudy()})),html.find(".remove-other-gains").click((event=>{this.modifyOthersGains(event,"remove")})),html.find(".option").click((event=>this.modifyType(event)))}async _onSpellDetail(event){event.preventDefault();const index=$(event.currentTarget).parents("li").data("index");return await this.item.spellDetail(index)}async _onDelete(event){if(!game.user.isGM)return;event.preventDefault();const index=$(event.currentTarget).parents("li").data("index"),spells=this.item.data.data.spells?duplicate(this.item.data.data.spells):[];return index>=0&&spells.splice(index,1),await this.item.update({"data.spells":spells})}async _onDrop(event,type="spell"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),spells=[];for(const item of dataList)item&&["skill","spell"].includes(item.data.type)&&("spell"===item.data.type?spells.push(item.data):"skill"===item.data.type&&this.item.data.data.type.other&&this.modifyOthersGains(null,"add",{name:item.name}));await this.item.addSpells(spells)}modifyType(event){event.preventDefault(),event.stopPropagation();return $(event.currentTarget).prev().trigger("click")}async modifyOthersGains(event,mode,options={}){let index=null,element=null;event&&(event.preventDefault(),element=$(event.currentTarget),index=element.parents("tr").data("index"));const skills=this.item.data.data.gains.others?duplicate(this.item.data.data.gains.others):[];switch(mode){case"add":skills.push({name:options.name||game.i18n.localize("CoC7.NewSkillName"),value:"development"});break;case"change":skills[index]={name:element.is("input")?element.val():skills[index].name,value:element.is("select")?element.val():skills[index].value};break;case"remove":index>=0&&skills.splice(index,1)}return await this.item.update({"data.gains.others":skills})}}class CoC7ContainerSheet extends ActorSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","storage"],template:"systems/CoC7/templates/actors/storage-sheet.html",width:672,height:765,dragDrop:[{dragSelector:".item",dropSelector:null}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"items"}]})}async _onDropFolder(event,data){if(!this.actor.isOwner)return[];if("Item"!==data.documentName)return[];const folder=game.folders.get(data.id);if(!folder)return[];const items=folder.contents.filter((item=>["book","item","spell","weapon"].includes(item.type))).map((item=>item.toJSON()));items.length>0&&await this.actor.createEmbeddedDocuments("Item",items)}onCloseSheet(){}async getData(){const data=await super.getData(),sheetData=data.data;if(sheetData.isKeeper=game.user.isGM,sheetData.editable=this.isEditable,sheetData.itemsByType={},data.items){for(const item of data.items)Object.prototype.hasOwnProperty.call(sheetData.itemsByType,item.type)||(sheetData.itemsByType[item.type]=[]),sheetData.itemsByType[item.type].push(item);for(const itemType in sheetData.itemsByType)sheetData.itemsByType[itemType].sort(((a,b)=>a.name.localeCompare(b.name)))}return sheetData.allowUnlock="always"===game.settings.get("CoC7","playerUnlockSheetMode")||game.user.isGM,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryWeapons=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"weapon")||!sheetData.data.flags.locked,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryWeapons,sheetData}activateListeners(html){super.activateListeners(html),html.find(".item-edit").click((ev=>{const li=$(ev.currentTarget).parents(".item");this.actor.items.get(li.data("itemId")).sheet.render(!0)})),html.find(".inventory-header").click(this._onInventoryHeader.bind(this)),html.find(".item-trade").click(this._onTradeItem.bind(this)),html.find(".show-detail").click(this._onItemSummary.bind(this)),html.find(".item-delete").click((async ev=>{const li=$(ev.currentTarget).parents(".item"),itemToDelete=this.actor.items.get(li.data("itemId"),{strict:!0});await itemToDelete.delete(),li.slideUp(200,(()=>this.render(!1)))})),html.find(".add-item").click((ev=>{switch(ev.currentTarget.dataset.type){case"book":this.actor.createEmptyBook(ev);break;case"item":this.actor.createEmptyItem(ev);break;case"skill":this.actor.createEmptySkill(ev);break;case"spell":this.actor.createEmptySpell(ev);break;case"weapon":this.actor.createEmptyWeapon(ev)}})),html.find(".lock").click(this._onLockClicked.bind(this))}async _onLockClicked(event){event.preventDefault();const isLocked=this.actor.locked;this.actor.locked=!isLocked}async _onTradeItem(event){const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("itemId"));let content="<p>"+game.i18n.localize("CoC7.MessageSelectUserToGiveTo");const message={actorFrom:this.actor.id,scene:null,actorTo:this.actor.id,item:item.id};this.token?.actor&&(message.actorFrom=this.token.id,message.scene=this.token.parent.id);const actors=game.actors.filter((e=>{if(!["character","npc","creature","container"].includes(e.type))return!1;if(this.actor.id===e.id)return!1;let visible=!1;for(const[k,v]of Object.entries(e.data.permission))"default"!==k&&k!==game.user.id||(visible=visible||v!==(CONST.DOCUMENT_OWNERSHIP_LEVELS||CONST.ENTITY_PERMISSIONS).NONE);return visible}));content+='<form id="selectform"><select name="user">';for(const actor of actors)content=content+'<option value="'+actor.id+'">'+actor.name+"</option>";content+="</select></form></p>",await Dialog.prompt({title:game.i18n.localize("CoC7.MessageTitleSelectUserToGiveTo"),content,callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)"user"===name&&(message.actorTo=value)}}),await game.CoC7socket.executeAsGM("gmtradeitemto",message)}_onItemSummary(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id")),chatData=item.getChatData({secrets:this.actor.isOwner});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$('<div class="item-summary"></div>'),labels=$('<div class="item-labels"></div>');for(const p of chatData.labels)labels.append(`<div class="item-label"><span class="label-name">${p.name} :</span><span class="label-value">${p.value}</span></div>`);if(div.append(labels),div.append($(`<div class="item-description">${chatData.description.value}</div>`)),item.data.data.properties?.spcl){const specialDiv=$(`<div class="item-special">${chatData.description.special}</div>`);div.append(specialDiv)}const props=$('<div class="item-properties"></div>');for(const p of chatData.properties)props.append(`<div class="tag item-property">${game.i18n.localize(p)}</div>`);div.append(props),li.append(div.hide()),CoC7Parser.bindEventsHandler(div),div.slideDown(200)}li.toggleClass("expanded")}_onInventoryHeader(event){event.preventDefault(),$(event.currentTarget).siblings("li").slideToggle(200)}}class CoC7ChaseSheet extends ItemSheet{static get flags(){return{started:"started"}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","item","chase"],width:550,height:500,resizable:!0,tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"participants"}]})}get template(){return"systems/CoC7/templates/items/chase.html"}static get type(){return"coc7ChaseSheet"}getData(options={}){ui.notifications.warn(game.i18n.localize("CoC7.ExperimentalFeaturesWarning"));const data=super.getData(options);this.started&&(this._tabs[0].active="setup");const itemData=data.data;return data.data=itemData.data,data.participants=this.participants,data.preys=this.preys,data.chasers=this.chasers,data.preysMinMov=data.preys.length?data.preys.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1,data.preysMaxMov=data.preys.length?data.preys.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1,data.chasersMinMov=data.chasers.length?data.chasers.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1,data.chasersMaxMov=data.chasers.length?data.chasers.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1,data.chasers.forEach((p=>{p.adjustedMov<data.preysMinMov?p.tooSlow():p.includeInChase(),p.fastest=p.adjustedMov===data.chasersMaxMov,p.slowest=p.adjustedMov===data.chasersMinMov})),data.preys.forEach((p=>{p.adjustedMov>data.chasersMaxMov?p.escaped():p.includeInChase(),p.fastest=p.adjustedMov===data.preysMaxMov,p.slowest=p.adjustedMov===data.preysMinMov})),data.locations=this.locations,data.allHaveValidMov=this.allHaveValidMov,data.activeLocation=this.activeLocation,data.previousLocation=this.previousLocation,data.nextLocation=this.nextLocation,data.started=this.started,data.dataListCheckOptions=this.allSkillsAndCharacteristics,data.isKeeper=game.user.isGM,data}get participants(){const pList=[];return this.item.data.data.participants.forEach((p=>{pList.push(new _participant(p)),p.index=pList.length-1})),pList.sort(((a,b)=>a.adjustedMov-b.adjustedMov)),pList}get allSkillsAndCharacteristics(){const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${game.i18n.localize("CoC7.Characteristics")} (${c.shortName})`))),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.Luck")})`),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.SAN")})`),void 0!==game.CoC7.skillList&&game.CoC7.skillList.forEach((s=>{list.includes(s.name)||s.name.toLowerCase().includes(`(${game.i18n.localize("CoC7.AnySpecName")})`.toLowerCase())||list.push(s.name)})),this.participants.forEach((p=>{p.actor&&p.actor.skills.forEach((s=>{list.includes(s.name)||list.push(s.name)}))})),list.sort(Intl.Collator().compare)}get preys(){return this.participants.filter((p=>!p.isChaser&&p.isValid)).sort(((a,b)=>a.adjustedMov-b.adjustedMov))||[]}get chasers(){return this.participants.filter((p=>p.isChaser&&p.isValid)).sort(((a,b)=>a.adjustedMov-b.adjustedMov))||[]}findMinMov(list){return list?.length?list.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1}findMaxMov(list){return list?.length?list.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1}processLocations(locations){if(locations?.length){locations[0].first=!0;for(let index=0;index<locations.length;index++){const classes=[],location=locations[index];location.name||classes.push("empty"),location.active&&classes.push("active"),location.init&&!this.started&&classes.push("init"),location.cssClasses=classes.join(" ")}locations.length>1&&(locations[locations.length-1].last=!0),locations.forEach((l=>{if(l.participants&&l.participants.length){for(let i=0;i<l.participants.length;i++){const elem=l.participants[i];let p;"string"==typeof elem||elem instanceof String?p=this.item.data.data.participants.find((p=>elem===p.uuid)):"_participant"===elem.constructor.name?(p=void 0,ui.notifications.warn("Participant was already processed.")):p=void 0,void 0!==p?l.participants[i]=new _participant(p):console.error("Undefined paticipant while processing participants array")}l.participants.sort(sortByRoleAndDex)}}))}}get locations(){const locations=this.started?this.item.data.data.locations.list?duplicate(this.item.data.data.locations.list):[]:this.initTrack;return this.processLocations(locations),locations}get initTrack(){if(!this.item.data.data.locations.list||0===this.item.data.data.locations.list.length)return;const locations=[],init=this.startingLine;let locationsIndexStart,initIndexStart,locationsLength;if(locationsIndexStart=init.length<=0||this.item.data.data.startingIndex>=init.length?0:init.length-this.item.data.data.startingIndex,initIndexStart=this.item.data.data.startingIndex<=0||this.item.data.data.startingIndex<=init.length?0:this.item.data.data.startingIndex-init.length,locationsLength=0===locationsIndexStart?this.item.data.data.locations.list.length:this.item.data.data.locations.list.length+locationsIndexStart,0!==init.length&&this.item.data.data.startingIndex<0)for(let index=0;index<Math.abs(this.item.data.data.startingIndex);index++)init.push({uuid:this.generateNewUuid(),init:!0,participants:[]});const chaseLocations=duplicate(this.item.data.data.locations);for(let index=0;index<locationsLength;index++){let location={};const participants=[];index>=locationsIndexStart&&index-locationsIndexStart<chaseLocations.list.length&&(location=duplicate(chaseLocations.list[index-locationsIndexStart]),location.init=!1,void 0!==location.participants&&location.participants.forEach((p=>{null!==p&&participants.push(p)}))),index>=initIndexStart&&index-initIndexStart<init.length&&(mergeObject(location,init[index-initIndexStart],{overwrite:!1}),void 0!==init[index-initIndexStart].participants&&init[index-initIndexStart].participants.forEach((p=>{null!==p&&participants.push(p)})),location.participants=participants),location.first=!1,location.end=!1,locations.push(location)}return locations}get activeLocation(){if(this.locations)return this.locations.find((l=>l.active))}get previousLocation(){if(!this.locations)return;const activeIndex=this.locations.findIndex((l=>l.active));return-1!==activeIndex&&0!==activeIndex?this.locations[activeIndex-1]:void 0}get nextLocation(){if(!this.locations)return;const activeIndex=this.locations.findIndex((l=>l.active));return-1!==activeIndex&&activeIndex!==this.locations.length-1?this.locations[activeIndex+1]:void 0}get allHaveValidMov(){return this.participants.every((e=>e.hasValidMov))}get allHaveSpeedRoll(){return this.participants.every((p=>p.speedCheck?.rolled))}get started(){return this.item.getFlag("CoC7",CoC7ChaseSheet.flags.started)}async cutToTheChase(){if(this.allHaveSpeedRoll){if(this.allHaveValidMov){const participants=this.participants,minMov=this.findMinMov(participants);participants.forEach((p=>{p.data.movementAction=p.adjustedMov-minMov+1})),await this.updateParticipants(participants),await this.updateLocationsList(this.locations),await this.item.setFlag("CoC7",CoC7ChaseSheet.flags.started,!0)}}else ui.notifications.warn("Speed roll missing")}get startingLine(){const preys=this.item.data.data.includeEscaped?this.preys:this.preys?.filter((p=>!p.data.escaped)),chasers=this.chasers,track=[],chasersMinMov=this.findMinMov(chasers),chasersMaxMov=this.findMaxMov(chasers),preysMinMov=this.findMinMov(preys),preysMaxMov=this.findMaxMov(preys);if(-1!==chasersMinMov&&-1!==chasersMaxMov){for(let mov=chasersMinMov;mov<=chasersMaxMov;mov++){const location={uuid:this.generateNewUuid(),init:!0,participants:[]};chasers.filter((p=>mov===p.adjustedMov)).sort(((a,b)=>a.dex-b.dex)).forEach((p=>location.participants.push(p.uuid))),track.push(location)}for(let index=0;index<this.item.data.data.startingRange;index++)track.push({uuid:this.generateNewUuid(),init:!0,participants:[]})}if(-1!==preysMinMov&&-1!==preysMaxMov)for(let mov=preysMinMov;mov<=preysMaxMov;mov++){const location={uuid:this.generateNewUuid(),init:!0,participants:[]};preys.filter((p=>mov===p.adjustedMov)).sort(((a,b)=>a.dex-b.dex)).forEach((p=>location.participants.push(p.uuid))),track.push(location)}return track}generateNewUuid(){let uuid,unique=!1;for(;!unique;)uuid=foundry.utils.randomID(16),unique=0===this.item.data.data.participants.filter((p=>p.uuid===uuid)).length&&0===this.item.data.data.locations.list.filter((p=>p.uuid===uuid)).length;return uuid}activateListeners(html){super.activateListeners(html),html.on("dblclick",".open-actor",CoC7Chat._onOpenActor.bind(this)),html.find(".participant").on("dragenter",(event=>this._onDragEnterParticipant(event))),html.find(".participant").on("dragover",(event=>this._onDragEnterParticipant(event))),html.find(".participant").on("dragleave",(event=>this._onDragLeaveParticipant(event))),html.find(".participant").on("drop",(event=>this._onDragLeaveParticipant(event))),html.find(".p-side").click(this._onChangeSide.bind(this)),html.find(".delete-participant").click(this._onDeleteParticipant.bind(this)),html.find(".reset-roll").click(this._onResetRoll.bind(this)),html.find(".delete-driver").click(this._onDeleteDriver.bind(this)),html.find(".new-participant").on("dragenter",(event=>this._onDragEnterParticipant(event))),html.find(".new-participant").on("dragover",(event=>this._onDragEnterParticipant(event))),html.find(".new-participant").on("dragleave",(event=>this._onDragLeaveParticipant(event))),html.find(".new-participant").on("drop",(event=>this._onDragLeaveParticipant(event))),html.find(".add-sign").click(this._onAddParticipant.bind(this)),html.find(".roll-participant").click(this._onRollParticipant.bind(this)),html.find(".button").click(this._onButtonClick.bind(this)),html.find(".name-container").click(this._onLocationClick.bind(this)),html.find(".obstacle-type").click(this._onObstacleTypeClick.bind(this)),html.find(".obstacle-toggle").click(this._onObstacleToggleClick.bind(this)),html.find(".toggle").click(this._onToggle.bind(this));new DragDrop({dropSelector:".participant",callbacks:{drop:this._onDropParticipant.bind(this)}}).bind(html[0]);if(new DragDrop({dropSelector:".new-participant",callbacks:{drop:this._onAddParticipant.bind(this)}}).bind(html[0]),this.started){new DragDrop({dragSelector:".chase-participant",dropSelector:".chase-location",permissions:{dragstart:this._canChaseParticipantDragStart.bind(this),drop:this._canChaseParticipantDragDrop.bind(this)},callbacks:{dragstart:this._onChaseParticipantDragStart.bind(this),drop:this._onChaseParticipantDragDrop.bind(this),dragover:this._onDragEnter.bind(this)}}).bind(html[0]),html.find(".chase-location").on("dragleave",(event=>this._onDragLeave(event)))}}_getSubmitData(updateData={}){let data=new FormDataExtended(this.form,{editors:this.editors}).toObject();if(data=updateData?mergeObject(data,updateData):expandObject(data),this.item.data.data.locations?.list?.length&&data.data.startingIndex>this.item.data.data.locations.list.length&&(data.data.startingIndex=this.item.data.data.locations.list.length),data.data.participants){const participants=duplicate(this.item.data.data.participants);for(const[k,v]of Object.entries(data.data.participants)){const index=participants.findIndex((p=>p.uuid===k));if(-1===index)ui.notifications.error("Participant table corrupted");else{const original=participants[index],cleaned=clean(v);mergeObject(original,cleaned),participants[index]=original}}data.data.participants=participants}if(data.locations){const locations=duplicate(this.item.data.data.locations.list);for(const[key,value]of Object.entries(data.locations)){const locationIndex=locations.findIndex((l=>l.uuid===key));if(-1===locationIndex)ui.notifications.error("Locations table corrupted");else{const originalLocation=locations[locationIndex],cleaned=clean(value);mergeObject(originalLocation,cleaned),locations[locationIndex]=originalLocation}}delete data.locations,data.data.locations={list:locations}}return flattenObject(data)}async _updateObject(event,formData){const target=event.currentTarget;if("true"===target?.dataset?.override){const[,type,uuid,subType,data]=target.name.split("."),index=this.findParticipantIndex(uuid);if("participants"===type&&!isNaN(index)&&"speed-check"===subType&&"name"===data){const participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[];return participants[index].speedCheck?(delete participants[index].speedCheck.id,delete participants[index].speedCheck.type):participants[index].speedCheck={},participants[index].speedCheck.name=target.value,void await this.item.update({"data.participants":participants})}}super._updateObject(event,formData)}static setScroll(app,html,data){const track=html.find(".track");if(!track.length)return;const element=$(track).find(".active");if(!element.length)return;const originalPosition=data.data.trackScrollPosition;let elementCenterRelativeLeft=element[0].offsetLeft-track[0].clientWidth/2;elementCenterRelativeLeft<0&&(elementCenterRelativeLeft=0);const trackElement=track[0];-1!==originalPosition&&trackElement.scrollTo({top:0,left:originalPosition,behavior:"instant"}),trackElement.scrollTo({top:0,left:elementCenterRelativeLeft,behavior:"smooth"})}static onClose(app,html){app.item.update({"data.trackScrollPosition":-1})}findParticipantIndex(uuid){return this.item.data.data.participants.findIndex((p=>p.uuid===uuid))}findLocationIndex(uuid){return this.item.data.data.locations.list.findIndex((p=>p.uuid===uuid))}findIndex(list,uuid){return list.findIndex((p=>p.uuid===uuid))}async updateLocationsList(list){const updatedList=duplicate(list);updatedList.forEach((l=>{if(delete l.cssClasses,delete l.first,delete l.last,delete l.end,l.participants&&l.participants.length)for(let i=0;i<l.participants.length;i++)l.participants[i].data?.uuid&&(l.participants[i]=l.participants[i].data.uuid)})),await this.item.update({"data.locations.list":updatedList})}async updateParticipants(list){const participantsData=this.item.data.data.participants?duplicate(this.item.data.data.participants):[];list.forEach((p=>{let data;data="_participant"===p.constructor.name?p.data:p;const index=this.findIndex(participantsData,data.uuid);-1===index?(participantsData.push(data),ui.notifications.warn("Participant data missing")):participantsData[index]=data})),await this.item.update({"data.participants":participantsData})}async _onToggle(event){const target=event.currentTarget,toggle=target.getAttribute("toggle"),data=expandObject({[toggle]:!target.classList.contains("switched-on")});if(data.locations){const locations=duplicate(this.item.data.data.locations.list);for(const[key,value]of Object.entries(data.locations)){const locationIndex=locations.findIndex((l=>l.uuid===key));if(-1===locationIndex)ui.notifications.error("Locations table corrupted");else{const originalLocation=locations[locationIndex],cleaned=clean(value);mergeObject(originalLocation,cleaned),locations[locationIndex]=originalLocation}}await this.updateLocationsList(locations)}}async _onObstacleToggleClick(event){const uuid=event.currentTarget.closest(".location.obstacle").dataset.uuid,locations=duplicate(this.item.data.data.locations.list),locationIndex=this.findIndex(locations,uuid);locations[locationIndex].obstacle=!locations[locationIndex].obstacle,locations[locationIndex].obstacleDetails||(locations[locationIndex].obstacleDetails={barrier:!0}),await this.updateLocationsList(locations)}async _onObstacleTypeClick(event){const target=event.currentTarget,uuid=target.closest(".location.obstacle").dataset.uuid,locations=duplicate(this.item.data.data.locations.list),locationIndex=this.findIndex(locations,uuid);locations[locationIndex].obstacleDetails||(locations[locationIndex].obstacleDetails={}),target.classList.contains("barrier")?(locations[locationIndex].obstacleDetails.barrier=!locations[locationIndex].obstacleDetails.barrier,locations[locationIndex].obstacleDetails.hazard=!locations[locationIndex].obstacleDetails.barrier):target.classList.contains("hazard")&&(locations[locationIndex].obstacleDetails.hazard=!locations[locationIndex].obstacleDetails.hazard,locations[locationIndex].obstacleDetails.barrier=!locations[locationIndex].obstacleDetails.hazard),await this.updateLocationsList(locations)}async _onLocationClick(event){const target=event.currentTarget,track=target.closest(".track");await this.item.update({"data.trackScrollPosition":track.scrollLeft});const active=target.classList.contains("active"),locations=duplicate(this.item.data.data.locations.list);locations.forEach((l=>l.active=!1));const uuid=target.closest(".chase-location").dataset.uuid,locationIndex=this.findIndex(locations,uuid);-1!==locationIndex&&(active||(locations[locationIndex].active=!0),await this.updateLocationsList(locations))}async _onButtonClick(event){const action=event.currentTarget.dataset?.action;if(action)switch(action){case"init":if(!isNaN(this.item.data.data.locations.total)&&this.item.data.data.locations.total>0){const locations=Array.apply(null,Array(this.item.data.data.locations.total)).map((function(){return{uuid:foundry.utils.randomID(16)}}));locations[0].name="Start",locations.length>1&&(locations[locations.length-1].name="End"),await this.updateLocationsList(locations)}break;case"reset":Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmResetChase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmResetChaseHint")}</p>`,yes:async()=>{await this.updateLocationsList([]),await this.item.unsetFlag("CoC7",CoC7ChaseSheet.flags.started)}});break;case"cut2chase":Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmCut2Chase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmCut2ChaseHint")}</p>`,yes:()=>this.cutToTheChase()});break;case"restart":Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmRestartChase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmRestartChaseHint")}</p>`,yes:async()=>{const locations=this.locations.filter((l=>!l.init));for(let i=0;i<locations.length;i++)locations[i].participants&&(locations[i].participants=[]);await this.updateLocationsList(locations),await this.item.unsetFlag("CoC7",CoC7ChaseSheet.flags.started)}})}}_canChaseParticipantDragStart(selector){return!!game.user.isGM}_canChaseParticipantDragDrop(selector){return!!game.user.isGM}async _onChaseParticipantDragStart(dragEvent){const dragData={uuid:dragEvent.currentTarget.dataset.uuid};dragEvent.dataTransfer.setData("text/plain",JSON.stringify(dragData))}async _onChaseParticipantDragDrop(dragEvent){ui.notifications.info("Dropped"),this._onDragLeave(dragEvent);const locationUuid=dragEvent.currentTarget.dataset.uuid,dataString=dragEvent.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);ui.notifications.info(`dragged particpant ${data.uuid} onto location ${locationUuid}`),await this.moveParticipant(data.uuid,locationUuid)}_onDragOver(dragEvent){this._onDragEnter(dragEvent)}_onDragEnter(dragEvent){dragEvent.currentTarget.classList.add("drag-over")}_onDragLeave(dragEvent){const target=dragEvent.currentTarget;void 0!==target.classList&&target.classList.remove("drag-over")}async _onDropParticipant(event){const uuid=event.currentTarget.dataset?.uuid,dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);await this.alterParticipant(data,uuid)}async _onAddParticipant(event){let data={};if(event.dataTransfer){const dataString=event.dataTransfer.getData("text/plain");data=JSON.parse(dataString)}await this.addParticipant(data)}async _onRollParticipant(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[],participant=new _participant(participants[index]);if(participant.speedCheck.refSet){const roll=new CoC7Check;roll.parent=this.item.uuid,participant.data.rolled=!0,participant.data.rollUuid=roll.uuid,roll.actor=participant.actor.actorKey,!event.shiftKey&&participant.actor.player&&(roll.standby=!0,roll.standbyText="CoC7.Chase",roll.standbyRightIcon="systems/CoC7/assets/icons/running-solid.svg"),participant.speedCheck.isCharacteristic?(await roll.rollCharacteristic(participant.speedCheck.ref.key),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isSkill?(roll.skill=participant.speedCheck.ref,await roll.roll(),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isAttribute&&(await roll.rollAttribute(participant.speedCheck.ref.key),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString)}else if(participant.speedCheck.score){const rollData={rawValue:participant.speedCheck.score,displayName:participant.speedCheck.name,actorName:participant.name?participant.name:void 0};participant.hasActor&&(rollData.actor=participant.actor.actorKey);const roll=CoC7Check.create(rollData);roll.parent=this.item.uuid,await roll.roll(),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString,participant.data.rolled=!0,participant.data.rollUuid=roll.uuid}await this.item.update({"data.participants":participants})}_onDragEnterParticipant(event){event.currentTarget.classList.add("drag-over")}_onDragLeaveParticipant(event){event.currentTarget.classList.remove("drag-over")}async _onChangeSide(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[];participants[index].chaser=!participants[index].chaser,await this.item.update({"data.participants":participants})}async _onDeleteDriver(event){const uuid=event.currentTarget.closest(".driver").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[];delete participants[index].actorKey,await this.item.update({"data.participants":participants})}async _onDeleteParticipant(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[];participants.splice(index,1),await this.item.update({"data.participants":participants})}async _onResetRoll(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[];delete participants[index].speedCheck.rollDataString,await this.item.update({"data.participants":participants})}async alterParticipant(data,uuid){const actorKey=data.sceneId&&data.tokenId?`${data.sceneId}.${data.tokenId}`:"Actor"===data.type?data.id:data.actorId||data.actorKey,participant={},actor=chatHelper.getActorFromKey(actorKey);switch(actor&&("vehicle"===actor.data.type?participant.vehicleKey=actorKey:participant.actorKey=actorKey),data.type?.toLowerCase()){case"actor":default:break;case"item":participant.speedCheck={id:data.data?._id||data.id,type:"item"};break;case"characteristic":participant.speedCheck={id:data.name,type:"characteristic"};break;case"attribute":participant.speedCheck={id:data.name,type:"attribute"}}const participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[],oldParticipant=participants[this.findParticipantIndex(uuid)];oldParticipant.mov&&delete oldParticipant.mov,mergeObject(oldParticipant,participant),await this.item.update({"data.participants":participants})}async addParticipant(data){const actorKey=data.sceneId&&data.tokenId?`${data.sceneId}.${data.tokenId}`:data.actorId||data.actorKey||data.id,participant={},actor=chatHelper.getActorFromKey(actorKey);switch(actor&&("vehicle"===actor.data.type?participant.vehicleKey=actorKey:participant.actorKey=actorKey),data.type?.toLowerCase()){case"actor":default:break;case"item":if(data.id){if("skill"!==game.items.get(data.id)?.data?.type)return}participant.speedCheck={id:data.data?._id||data.id,type:"item"};break;case"characteristic":participant.speedCheck={id:data.name,type:"characteristic"};break;case"attribute":participant.speedCheck={id:data.name,type:"attribute"}}participant.speedCheck||(this.item.data.data.vehicule?participant.speedCheck={type:"item",name:game.i18n.localize("CoC7.DriveAutoSkillName")}:participant.speedCheck={id:"con",type:"characteristic",name:game.i18n.localize("CHARAC.Constitution")});const participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[];let unique=!1;for(;!unique;)participant.uuid=foundry.utils.randomID(16),unique=0===participants.filter((p=>p.uuid===participant.uuid)).length;participants.push(participant),await this.item.update({"data.participants":participants})}async updateRoll(rollString){if(game.user.isGM){const roll=CoC7Check.fromRollString(rollString),participants=this.item.data.data.participants?duplicate(this.item.data.data.participants):[],index=participants.findIndex((p=>p.rollUuid===roll.uuid));index>=0&&(participants[index].speedCheck.rollDataString=roll.JSONRollString,await this.item.update({"data.participants":participants}))}else{const data={data:rollString,type:"invoke",method:"updateRoll",item:this.item.uuid};game.socket.emit("system.CoC7",data)}}async moveParticipant(participantUuid,locationUuid){const locations=duplicate(this.item.data.data.locations.list),destination=locations.find((l=>locationUuid===l.uuid));if(!destination)return void console.error(`Failed to move ${participantUuid}. Location ${locationUuid} unknown`);const origin=locations.find((l=>l.participants?.includes(participantUuid)));if(!origin)return void console.error(`Failed to find ${participantUuid} in locations`);destination.participants||(destination.participants=[]),destination.participants.push(participantUuid);const oldParticipantsList=origin.participants.filter((p=>participantUuid!==p));origin.participants=oldParticipantsList,await this.updateLocationsList(locations)}}function sortByRoleAndDex(a,b){return b.chaser&&!a.chaser?1:a.chaser&&!b.chaser?-1:a.dex-b.dex}function clean(obj){for(const propName in obj){const tp=getType(obj[propName]);"Object"===tp&&(obj[propName]=clean(obj[propName])),("Object"!==tp||Object.entries(obj[propName]).length)&&("string"!==tp||obj[propName].length)?"string"!==tp||isNaN(Number(obj[propName]))||(obj[propName]=Number(obj[propName])):obj[propName]=null}return obj}class _participant{constructor(data={}){this.data=data}get actor(){return this._actor||(this._actor=chatHelper.getActorFromKey(this.data.actorKey)),this._actor}get isActor(){return this.hasActor||this.hasVehicle}get key(){return this.hasVehicle?this.vehicle.actorKey:this.hasActor?this.actor.actorKey:void 0}get icon(){return this.isActor?this.hasVehicle?this.vehicle.img:this.hasActor?this.actor.img:void 0:"systems/CoC7/assets/icons/question-circle-regular.svg"}get driver(){return this._driver||(this._driver=chatHelper.getActorFromKey(this.data.actorKey)),this._driver}get vehicle(){return this.data.vehicleKey&&(this._vehicle=chatHelper.getActorFromKey(this.data.vehicleKey)),this._vehicle}get hasActor(){return!!this.actor}get hasVehicle(){return!!this.vehicle}get name(){return this.hasVehicle?this.vehicle.name:this.hasActor?this.actor.name:this.data.name||void 0}get mov(){return this.data.mov||(this.hasVehicle?this.data.mov=this.vehicle.mov:this.hasActor&&(this.data.mov=this.actor.mov)),this.data.mov&&(isNaN(Number(this.data.mov))?(this.data.hasValidMov=!1,this.data.mov=void 0):this.data.hasValidMov=!0),this.data.mov}get uuid(){return this.data.uuid}get dex(){return this.data.dex||(this.hasVehicle&&this.hasDriver?this.data.dex=this.driver.characteristics.dex.value:this.hasActor&&(this.data.dex=this.actor.characteristics.dex.value)),this.data.dex&&(isNaN(Number(this.data.dex))?(this.data.hasValidDex=!1,this.data.dex=0):this.data.hasValidDex=!0),this.data.dex}get isChaser(){return!!this.data.chaser}get isValid(){return this.hasValidDex&&this.hasValidMov}get hasValidDex(){return!isNaN(Number(this.data.dex))}get hasValidMov(){return!isNaN(Number(this.data.mov))}get hasDriver(){return this.hasVehicle&&this.hasActor}get movAdjustment(){if(this.data.speedCheck?.rollDataString){const roll=CoC7Check.fromRollString(this.data.speedCheck.rollDataString);if(roll&&!roll.standby){if(roll.successLevel>=CoC7Check.successLevel.extreme)return 1;if(roll.failed)return-1}}return 0}get adjustedMov(){if(void 0!==this.mov&&!isNaN(Number(this.mov)))return Number(this.mov)+this.movAdjustment}get hasMovAdjustment(){return this.hasBonusMov||this.hasMalusMov}get hasBonusMov(){return this.data.movAdjustment>0}get hasMalusMov(){return this.data.movAdjustment<0}tooSlow(){this.data.excluded=!0}includeInChase(){this.data.excluded=!1,this.data.escaped=!1}escaped(){this.data.escaped=!0}set slowest(x){this.data.slowest=x}get slowest(){return this.data.slowest}set fastest(x){this.data.fastest=x}get fastest(){return this.data.fastest}set movementAction(x){this.data.movementAction=x}get movementAction(){return this.data.movementAction}get cssClass(){const cssClasses=[];return this.isChaser?cssClasses.push("chaser"):cssClasses.push("prey"),this.data.excluded&&cssClasses.push("excluded","too_slow"),this.data.escaped&&cssClasses.push("escaped"),this.data.fastest&&cssClasses.push("fastest"),this.data.slowest&&cssClasses.push("slowest"),cssClasses.join(" ")}get speedCheck(){const check={};if(this.data.speedCheck?.name&&(check.name=this.data.speedCheck.name),this.data.speedCheck?.score&&(check.score=this.data.speedCheck.score),check.cssClasses="",this.data.speedCheck?.rollDataString&&(check.roll=CoC7Check.fromRollString(this.data.speedCheck.rollDataString),check.roll&&(check.roll.standby&&!check.roll.hasCard||(check.rolled=!0,check.inlineRoll=check.roll.inlineCheck.outerHTML,check.cssClasses+="rolled",check.roll.standby||(check.roll.successLevel>=CoC7Check.successLevel.extreme?check.modifierCss="upgrade":check.roll.failed&&(check.modifierCss="downgrade"),(check.roll.successLevel>=CoC7Check.successLevel.extreme||check.roll.failed)&&(check.hasModifier=!0))))),this.hasActor){check.options=[];for(const c of["con"]){const characterisitc=this.actor.getCharacteristic(c);characterisitc?.value&&check.options.push(characterisitc.label)}for(const s of this.actor.driveSkills)check.options.push(s.name);for(const s of this.actor.pilotSkills)check.options.push(s.name);if(check.hasOptions=!!check.options.length,this.data.speedCheck?.id){let item=this.actor.find(this.data.speedCheck.id);if(!item){const gameItem=game.items.get(this.data.speedCheck.id);gameItem&&(item=this.actor.find(gameItem.name))}item&&("item"===item.type&&"skill"===item.value.data?.type&&(check.ref=item.value,check.name=item.value.name,check.type="skill",check.isSkill=!0,check.refSet=!0,check.score=item.value.value),"characteristic"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="characteristic",check.isCharacteristic=!0,check.refSet=!0,check.score=item.value.value),"attribute"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="attribute",check.isAttribute=!0,check.refSet=!0,check.score=item.value.value))}else if(this.data.speedCheck?.name){const item=this.actor.find(this.data.speedCheck.name);item&&("item"===item.type&&"skill"===item.value.data?.type&&(check.ref=item.value,check.name=item.value.name,check.type="skill",check.isSkill=!0,check.refSet=!0,check.score=item.value.value),"characteristic"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="characteristic",check.isCharacteristic=!0,check.refSet=!0,check.score=item.value.value),"attribute"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="attribute",check.isAttribute=!0,check.refSet=!0,check.score=item.value.value))}}else if(this.data.speedCheck?.id){const item=game.items.get(this.data.speedCheck.id);item&&"skill"===item.data?.type&&(check.ref=item,check.name=item.name,check.type="skill",check.isSkill=!0,check.refSet=!1,check.score=item.base)}return check.rolled||check.score||(check.cssClasses+=" invalid"),check.isValid=check.rolled&&!isNaN(check.score),check}}class CoC7ItemSheetV2 extends ItemSheet{constructor(...args){super(...args),this._sheetTab="items"}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","item"],width:290,height:326,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return"systems/CoC7/templates/items/item-sheetV2.html"}getData(options={}){const data=super.getData(options),itemData=data.data;if(data.data=itemData.data,data.hasOwner=null!==this.item.actor,"skill"===this.item.data.type){data._properties=[];for(const[key,value]of Object.entries(COC7.skillProperties)){const property={};property.id=key,property.name=value,property.isEnabled=!0===this.item.data.data.properties[key],data._properties.push(property)}data._eras=[];for(const[key,value]of Object.entries(COC7.eras)){const era={};era.id=key,era.name=value,era.isEnabled=!0===this.item.data.data.eras[key],data._eras.push(era)}data.isSpecialized=this.item.data.data.properties.special,data.canModifySpec=!this.item.data.data.properties.firearm&&!this.item.data.data.properties.fighting}return data.isKeeper=game.user.isGM,data}activateListeners(html){super.activateListeners(html),this.options.editable&&html.find(".toggle-switch").click(this._onClickToggle.bind(this))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode)}}class CoC7ItemSheet extends CoC7ItemSheetV2{static get defaultOptions(){return mergeObject(super.defaultOptions,{width:520,height:506})}}class CoC7OccupationSheet extends ItemSheet{activateListeners(html){if(super.activateListeners(html),!this.options.editable)return;html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"skills"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"skills"))),html.find(".group-item-delete").click(this._onGroupItemDelete.bind(this)),html.find(".group-control").click(this._onGroupControl.bind(this));new DragDrop({dropSelector:".droppable",callbacks:{drop:this._onDrop.bind(this)}}).bind(html[0])}async _onDrop(event,type="skill",collectionName="skills"){event.preventDefault(),event.stopPropagation();const optionalSkill=event?.currentTarget?.classList?.contains("optional-skills"),ol=event?.currentTarget?.closest("ol"),index=ol?.dataset?.group,dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),collection=this.item.data.data[collectionName]?duplicate(this.item.data.data[collectionName]):[],groups=this.item.data.data.groups?duplicate(this.item.data.data.groups):[];for(const item of dataList)if(item&&item.data&&[type].includes(item.data.type))if(optionalSkill){if(!CoC7Item.isAnySpec(item)){if(collection.find((el=>el.name===item.data.name)))continue;if(groups[index].skills.find((el=>el.name===item.name)))continue}groups[index].skills=groups[index].skills.concat([item.data])}else{if(!CoC7Item.isAnySpec(item)){if(collection.find((el=>el.name===item.data.name)))continue;for(let i=0;i<groups.length;i++){const index=groups[i].skills.findIndex((el=>el.name===item.data.name));-1!==index&&groups[i].skills.splice(index,1)}}collection.push(duplicate(item.data))}await this.item.update({"data.groups":groups}),await this.item.update({[`data.${collectionName}`]:collection})}async _onGroupControl(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("add-group")){await this._onSubmit(event);const groups=this.item.data.data.groups;await this.item.update({"data.groups":groups.concat([{options:0,skills:[]}])})}if(a.classList.contains("remove-group")){await this._onSubmit(event);const groups=duplicate(this.item.data.data.groups),ol=a.closest(".item-list.group");groups.splice(Number(ol.dataset.group),1),await this.item.update({"data.groups":groups})}}_onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),chatData=this.item.data.data[collectionName].find((s=>s._id===li.data("item-id"))).data.description;if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData.value}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const itemIndex=$(event.currentTarget).parents(".item").data("item-id");itemIndex&&await this.removeItem(itemIndex,collectionName)}async _onGroupItemDelete(event){const li=event.currentTarget.closest(".item"),ol=li.closest(".item-list.group"),groups=duplicate(this.item.data.data.groups);groups[Number(ol.dataset.group)].skills.splice(Number(li.dataset.itemIndex),1),await this.item.update({"data.groups":groups})}async removeItem(itemId,collectionName="items"){const itemIndex=this.item.data.data[collectionName].findIndex((s=>s._id===itemId));if(itemIndex>-1){const collection=this.item.data.data[collectionName]?duplicate(this.item.data.data[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`data.${collectionName}`]:collection})}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","occupation"],width:520,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return"systems/CoC7/templates/items/occupation.html"}_onDragStart(event){const li=event.currentTarget.closest(".item"),dragData={type:"Item",data:this.item.data.data.skills.find((s=>s._id===li.dataset.itemId))};event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}getData(){const data=super.getData(),itemData=data.data;data.data=itemData.data,data.isOwned=this.item.isOwned;const optionnal=[],mandatory=[];for(const[key,carac]of Object.entries(data.data.occupationSkillPoints))if(carac.multiplier){const caracName=game.i18n.localize(`CHARAC.${key.toUpperCase()}`);carac.selected&&carac.optional&&optionnal.push(`${caracName}x${carac.multiplier}`),carac.selected&&!carac.optional&&mandatory.push(`${caracName}x${carac.multiplier}`)}data.skillListEmpty=0===data.data.skills.length,data.data.skills.sort(((a,b)=>a.name.toLocaleLowerCase().localeCompare(b.name.toLocaleLowerCase())));for(let index=0;index<data.data.groups.length;index++)data.data.groups[index].isEmpty=0===data.data.groups[index].skills.length,data.data.groups[index].skills.sort(((a,b)=>a.name.toLocaleLowerCase().localeCompare(b.name.toLocaleLowerCase())));data.occupationPointsString="";const orString=` ${game.i18n.localize("CoC7.Or")} `;mandatory.length&&(data.occupationPointsString+=mandatory.join(" + ")),optionnal.length&&mandatory.length&&(data.occupationPointsString+=` + (${optionnal.join(orString)})`),optionnal.length&&!mandatory.length&&(data.occupationPointsString+=optionnal.join(orString)),data.itemProperties=[];for(const[key,value]of Object.entries(data.data.type))value&&data.itemProperties.push(COC7.occupationProperties[key]?COC7.occupationProperties[key]:null);return data.isKeeper=game.user.isGM,data}_updateObject(event,formData){if(formData.data||(formData=expandObject(formData)),formData.data.groups){formData.data.groups=Object.values(formData.data?.groups||{});for(let index=0;index<this.item.data.data.groups.length;index++)formData.data.groups[index].skills=duplicate(this.item.data.data.groups[index].skills)}super._updateObject(event,formData)}}class CoC7SetupSheet extends ItemSheet{activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"items"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"items"))),html.find(".add-bio").click((async()=>await this._onAddBio())),html.find(".remove-section").click(this._onRemoveSection.bind(this)),html.find(".toggle-switch").click(this._onClickToggle.bind(this)))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode)}async _onDrop(event,collectionName="items"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),collection=this.item.data.data[collectionName]?duplicate(this.item.data.data[collectionName]):[];for(const item of dataList)item&&item.data&&["item","weapon","skill","book","spell"].includes(item.data.type)&&(!CoC7Item.isAnySpec(item)&&collection.find((el=>el.name===item.data.name))||collection.push(duplicate(item.data)));await this.item.update({[`data.${collectionName}`]:collection})}async _onRemoveSection(event){const div=event.currentTarget.closest(".item"),bio=duplicate(this.item.data.data.bioSections);bio.splice(Number(div.dataset.index),1),await this.item.update({"data.bioSections":bio})}async _onAddBio(){const bio=this.item.data.data.bioSections?duplicate(this.item.data.data.bioSections):[];bio.push(null),await this.item.update({"data.bioSections":bio})}_onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),chatData=this.item.data.data[collectionName].find((s=>s._id===li.data("item-id"))).data.description;if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData.value}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const itemIndex=$(event.currentTarget).parents(".item").data("item-id");itemIndex&&await this.removeItem(itemIndex,collectionName)}getItem(itemId,collectionName="items"){return this.item.data.data[collectionName].find((s=>s._id===itemId))}async removeItem(itemId,collectionName="items"){const itemIndex=this.item.data.data[collectionName].findIndex((s=>s._id===itemId));if(itemIndex>-1){const collection=this.item.data.data[collectionName]?duplicate(this.item.data.data[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`data.${collectionName}`]:collection})}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","setup"],width:520,height:530,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return"systems/CoC7/templates/items/setup.html"}_onDragStart(event){const li=event.currentTarget.closest(".item"),dragData={type:"Item",data:this.item.data.data.items.find((s=>s._id===li.dataset.itemId))};event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}getData(){const data=super.getData();data.isOwned=this.item.isOwned;const itemData=data.data;data.data=itemData.data,data.skills=data.data.items.filter((it=>"skill"===it.type)),data.otherItems=data.data.items.filter((it=>"skill"!==it.type)),data.skillListEmpty=0===data.skills.length,data.itemsListEmpty=0===data.otherItems.length,data.skills.sort(((a,b)=>a.name.toLocaleLowerCase().localeCompare(b.name.toLocaleLowerCase()))),data.eras={},data.itemProperties=[],data._eras=[];for(const[key,value]of Object.entries(COC7.eras)){const era={};era.id=key,era.name=value,era.isEnabled=!0===this.item.data.data.eras[key],data._eras.push(era)}return data.oneBlockBackStory=game.settings.get("CoC7","oneBlockBackstory"),data.isKeeper=game.user.isGM,data}_updateObject(event,formData){formData.data||(formData=expandObject(formData)),formData.data.bioSections&&(formData.data.bioSections=Object.values(formData.data?.bioSections||[])),"data.characteristics.points.enabled"===event.currentTarget?.name&&(formData.data.characteristics.rolls.enabled=!event.currentTarget.checked),"data.characteristics.rolls.enabled"===event.currentTarget?.name&&(formData.data.characteristics.points.enabled=!event.currentTarget.checked),super._updateObject(event,formData)}}class CoC7SkillSheet extends ItemSheet{constructor(...args){super(...args),this._sheetTab="items"}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","item"],width:520,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return`systems/CoC7/templates/items/${this.item.data.type}-sheet.html`}getData(){const data=super.getData(),itemData=data.data;if(data.data=itemData.data,data.hasOwner=null!==this.item.actor,"skill"===this.item.data.type){data._properties=[];for(const[key,value]of Object.entries(COC7.skillProperties)){const property={};property.id=key,property.name=value,property.isEnabled=!0===this.item.data.data.properties[key],data._properties.push(property)}data._eras=[];for(const[key,value]of Object.entries(COC7.eras)){const era={};era.id=key,era.name=value,era.isEnabled=!0===this.item.data.data.eras[key],data._eras.push(era)}data.isSpecialized=this.item.data.data.properties.special,data.canModifySpec=!this.item.data.data.properties.firearm&&!this.item.data.data.properties.fighting}return data.isKeeper=game.user.isGM,data}activateListeners(html){super.activateListeners(html),this.options.editable&&html.find(".toggle-switch").click(this._onClickToggle.bind(this))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode)}async _updateObject(event,formData){const skillName=formData["data.skillName"]||this.item.data.data.skillName;if(this.item.data.data.properties?.special){const specialization=formData["data.specialization"]||this.item.data.data.specialization;formData.name=specialization+" ("+skillName+")"}else formData.name=skillName;return super._updateObject(event,formData)}}class CoC7SpellSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/items/spell/main.html",classes:["coc7","item","spell"],width:500,height:"auto",resizable:!1,scrollY:[".body"],tabs:[{navSelector:".navigation",contentSelector:".body",initial:"description"}]})}async getData(){const data=super.getData(),itemData=data.data;return data.data=itemData.data,data.isKeeper=game.user.isGM,data.isOwner=this.item.isOwner,data}activateListeners(html){super.activateListeners(html),html.find(".option").click((event=>this.modifyType(event))),html.find("#cast-spell").click((event=>{event.preventDefault(),this.item.cast()}))}modifyType(event){event.preventDefault(),event.stopPropagation();return $(event.currentTarget).prev().trigger("click")}}class CoC7StatusSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","status"],width:520,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return"systems/CoC7/templates/items/status.html"}getData(){const data=super.getData(),itemData=data.data;data.data=itemData.data,data.itemProperties=[];for(const[key,value]of Object.entries(data.data.type))value&&data.itemProperties.push(COC7.statusType[key]?COC7.statusType[key]:null);return data.isKeeper=game.user.isGM,data}}class CoC7TalentSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","talent"],width:520,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return"systems/CoC7/templates/items/talent.html"}getData(){const data=super.getData(),itemData=data.data;data.data=itemData.data,data.itemProperties=[];for(const[key,value]of Object.entries(data.data.type))value&&data.itemProperties.push(COC7.talentType[key]?COC7.talentType[key]:null);return data.isKeeper=game.user.isGM,data}}class CoC7VehicleSheet extends CoC7ActorSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","actor","item","vehicle"],width:520,height:420,resizable:!0,template:"systems/CoC7/templates/actors/vehicle.html",dragDrop:[{dragSelector:".actor",dropSelector:".dropZone"}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"description"}]})}async getData(){ui.notifications.warn(game.i18n.localize("CoC7.ExperimentalFeaturesWarning"));const data=await super.getData();data.properties=[],this.actor.data.data.properties.armed&&data.properties.push(game.i18n.localize("CoC7.ArmedVehicle")),data.actor=this.actor;const expanded=this.actor.getFlag("CoC7","expanded");return data.expanded=void 0===expanded||expanded,data.expanded?data.options.height=420:data.options.height="auto",data}activateListeners(html){super.activateListeners(html),html.find(".add-armor").click((async()=>await this._onAddArmor())),html.find(".remove-armor").click((async event=>await this._onRemoveArmor(event))),html.find(".expand-button").click(this._onToggleExpand.bind(this))}async _onToggleExpand(){const expanded=this.actor.getFlag("CoC7","expanded");expanded?(this.oldSize=this.position.height,this.position.height="auto"):this.position.height=this.oldSize||420,await this.actor.setFlag("CoC7","expanded",!expanded)}async _onAddArmor(){const locations=duplicate(this.actor.data.data.attribs.armor.locations||[]);locations.push({name:null,value:null}),await this.actor.update({"data.attribs.armor.locations":locations})}async _onRemoveArmor(event){const index=event.currentTarget.closest(".armor").dataset.index,locations=duplicate(this.actor.data.data.attribs.armor.locations||null);locations&&(locations.splice(index,1),await this.actor.update({"data.attribs.armor.locations":locations}))}onCloseSheet(){super.onCloseSheet()}_getSubmitData(updateData={}){let data=new FormDataExtended(this.form,{editors:this.editors}).toObject();if(data=updateData?mergeObject(data,updateData):expandObject(data),data.data.attribs.armor?.localized){const armor=data.data?.attribs.armor;armor&&(armor.locations=Object.values(armor?.locations||this.actor.data.data.attribs.armor.locations||{}))}return flattenObject(data)}}class CoC7WeaponSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","item"],width:520,height:480,tabs:[{navSelector:".sheet-tabs",contentSelector:".sheet-body",initial:"skills"}]})}get template(){return"systems/CoC7/templates/items/weapon-sheet.html"}getData(){const data=super.getData();data.dtypes=["String","Number","Boolean"];const itemData=data.data;data.data=itemData.data,data.hasOwner=null!=this.item.actor,data.hasOwner&&(data.actorKey=this.item.actor.actorKey),data.combatSkill=[],data.hasOwner&&(data.firearmSkills=this.actor.firearmSkills,data.fightingSkills=this.actor.fightingSkills,data.combatSkill=this.item.actor.items.filter((item=>!("skill"!==item.type||!item.data.data.properties.combat))),data.combatSkill.sort(((a,b)=>a.name.toLocaleLowerCase().localeCompare(b.name.toLocaleLowerCase())))),data._properties=[];for(const[key,value]of Object.entries(COC7.weaponProperties)){const property={};property.id=key,property.name=value,property.isEnabled=!0===this.item.data.data.properties[key],data._properties.push(property)}this.item.data.data.price||(this.item.data.data.price={}),data._eras=[];for(const[key,value]of Object.entries(COC7.eras)){const era={};this.item.data.data.price[key]||(this.item.data.data.price[key]=0),era.price=this.item.data.data.price[key],era.id=key,era.name=value,era.isEnabled=!0===this.item.data.data.eras[key],data._eras.push(era)}return data.usesAlternateSkill=!0===this.item.data.data.properties.auto||!0===this.item.data.data.properties.brst||!0===this.item.data.data.properties.thrown,data.isKeeper=game.user.isGM,data}activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find(".weapon-property").click(this._onPropertyClick.bind(this)))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode)}async _onPropertyClick(event){event.preventDefault();const property=event.currentTarget.closest(".weapon-property").dataset.property,weaponId=event.currentTarget.closest(".weapon").dataset.itemId,actorKey=event.currentTarget.closest(".weapon").dataset.actorKey;let weapon=null;if(actorKey){weapon=CoCActor.getActorFromKey(actorKey).items.get(weaponId)}else weapon=game.items.get(weaponId);await weapon.toggleProperty(property)}}async function performFilter(e){const appId=e.currentTarget.name.replace(/^coc7[^0-9]+(\d+)$/,"$1"),app=$("#app-"+appId),type=app.find("select[name=coc7type"+appId+"]").val(),name=app.find("input[name=coc7name"+appId+"]").val(),eraElement=app.find("select[name=coc7era"+appId+"]");let era="";switch(type){case"setup":case"skill":case"weapon":eraElement.closest("div.era_select").show(),era=eraElement.val();break;default:eraElement.closest("div.era_select").hide()}const items=await(game.packs.get(app.data("packId"))?.getDocuments());if(void 0===items)return;const show=[],nameFilter=new RegExp(RegExp.escape(name),"i");for(const[,item]of Object.entries(items)){let filter=!0;filter&&""!==name&&(filter=item.name.match(nameFilter)),filter&&""!==type&&(filter=item.type===type),filter&&""!==era&&(filter=!1===item.data.data.eras[era]||!0===item.data.data.eras[era]?item.data.data.eras[era]:item.data.data.eras[era]?.selected??!1),filter&&show.push(item.id)}app.find("ol.directory-list li").each((function(){this.style.display=show.includes(this.dataset.documentId)?"flex":"none"}))}function listen(){Hooks.once("init",(async()=>{CONFIG.Actor.documentClass=CoCActor,CONFIG.Actor.documentClasses={},CONFIG.Item.documentClass=CoC7Item,CONFIG.Item.documentClasses={book:CoC7Book,spell:CoC7Spell},async function(){loadTemplates(["systems/CoC7/templates/actors/parts/npc-skills.html","systems/CoC7/templates/actors/parts/npc-combat.html","systems/CoC7/templates/actors/parts/actor-inventory.html","systems/CoC7/templates/actors/parts/actor-inventory-items.html","systems/CoC7/templates/actors/parts/actor-background.html","systems/CoC7/templates/actors/parts/actor-mythos-enounters.hbs","systems/CoC7/templates/actors/parts/actor-keeper-mythos-enounters.hbs","systems/CoC7/templates/actors/parts/actor-skills-v2.html","systems/CoC7/templates/actors/parts/actor-weapons-v2.html","systems/CoC7/templates/actors/parts/character-development-v2.html","systems/CoC7/templates/actors/parts/development-controls.html","systems/CoC7/templates/actors/parts/vitals.html","systems/CoC7/templates/actors/parts/combat.html","systems/CoC7/templates/actors/character-sheet-v2.html","systems/CoC7/templates/actors/character/summary.html","systems/CoC7/templates/items/book/details.html","systems/CoC7/templates/items/spell/details.html"])}(),function(){if(game.settings.registerMenu("CoC7","gameRules",{name:"CoC7.Settings.Rules.Name",label:"CoC7.Settings.Rules.Label",hint:"CoC7.Settings.Rules.Hint",icon:"fas fa-book",type:CoC7GameRuleSettings,restricted:!0}),CoC7GameRuleSettings.registerSettings(),game.settings.register("CoC7","displayInitDices",{name:"SETTINGS.displayInitDices",hint:"SETTINGS.displayInitDicesHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","displayInitAsText",{name:"SETTINGS.displayInitAsText",hint:"SETTINGS.displayInitAsTextHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","stanbyGMRolls",{name:"SETTINGS.StanbyGMRolls",hint:"SETTINGS.StanbyGMRollsHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","allowFlatDiceModifier",{name:"SETTINGS.AllowFlatDiceModifier",hint:"SETTINGS.AllowFlatDiceModifierHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","allowFlatThresholdModifier",{name:"SETTINGS.AllowFlatThresholdModifier",hint:"SETTINGS.AllowFlatThresholdModifierHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","defaultCheckDifficulty",{name:"SETTINGS.DefaultDifficulty",hint:"SETTINGS.DefaultDifficultyHint",scope:"world",config:!0,default:"regular",type:String,choices:{regular:"SETTINGS.CheckDifficultyRegular",unknown:"SETTINGS.CheckDifficultyUnknown"}}),game.settings.register("CoC7","selfRollWhisperTarget",{name:"SETTINGS.SelfRollWhisperTarget",hint:"SETTINGS.SelfRollWhisperTargetHint",scope:"world",config:!0,default:"everyone",type:String,choices:{nobody:"SETTINGS.DoNotAdvise",owners:"SETTINGS.AdviseOwnersOnly",everyone:"SETTINGS.AdviseAllPlayer"}}),game.settings.register("CoC7","displayActorOnCard",{name:"SETTINGS.DisplayActorOnCard",hint:"SETTINGS.DisplayActorOnCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","displayCheckSuccessLevel",{name:"SETTINGS.DisplayCheckSuccessLevel",scope:"client",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","displayResultType",{name:"SETTINGS.DisplayResultType",scope:"client",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","useToken",{name:"SETTINGS.UseToken",hint:"SETTINGS.UseTokenHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","enableStatusIcons",{name:"SETTINGS.EnableStatusIcons",hint:"SETTINGS.EnableStatusIconsHint",scope:"world",config:!0,type:Boolean,default:!0}),game.settings.register("CoC7","gridSpaces",{name:"SETTINGS.RestrictGridSpaces",hint:"SETTINGS.RestrictGridSpacesHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","distanceElevation",{name:"SETTINGS.CheckElevation",hint:"SETTINGS.CheckElevationHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","overrideGameArtwork",{name:"SETTINGS.OverrideGameArtwork",hint:"SETTINGS.OverrideGameArtworkHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.get("CoC7","overrideGameArtwork")&&(game.settings.register("CoC7","artPauseImage",{name:"SETTINGS.ArtPauseImage",hint:"SETTINGS.ArtPauseImageHint",scope:"world",config:!0,default:"systems/CoC7/assets/icons/time-trap.svg",type:String}),game.settings.register("CoC7","artPauseText",{name:"SETTINGS.ArtPauseText",hint:"SETTINGS.ArtPauseTextHint",scope:"world",config:!0,default:"The Blind Idiot God is dreaming...",type:String})),game.settings.register("CoC7","displayPlayerNameOnSheet",{name:"SETTINGS.displayPlayerNameOnSheet",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","toolTipDelay",{name:"CoC7.toolTipDelay",scope:"world",config:!0,default:2e3,type:Number}),game.settings.register("CoC7","showIconsOnly",{name:"SETTINGS.showIconsOnly",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","playerUnlockSheetMode",{name:"SETTINGS.PlayerUnlockSheetMode",scope:"world",config:!0,default:"always",type:String,choices:{always:"SETTINGS.AlwaysEditable",creation:"SETTINGS.CreationModeOnly",never:"SETTINGS.NeverEditable"}}),game.settings.register("CoC7","statusPlayerEditable",{name:"SETTINGS.StatusPlayerEditable",hint:"SETTINGS.StatusPlayerEditableHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","oneBlockBackstory",{name:"SETTINGS.OneBlockBackStory",hint:"SETTINGS.OneBlockBackStoryHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","overrideSheetArtwork",{name:"SETTINGS.OverrideSheetArtwork",hint:"SETTINGS.OverrideSheetArtworkHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.get("CoC7","overrideSheetArtwork")&&(game.settings.register("CoC7","artWorkSheetBackground",{name:"SETTINGS.ArtWorkSheetBackground",hint:"SETTINGS.ArtWorkSheetBackgroundHint",scope:"world",config:!0,default:"url('./assets/images/background.webp') 4 repeat",type:String}),game.settings.register("CoC7","artWorkSheetBackgroundType",{name:"SETTINGS.ArtWorkSheetBackgroundType",scope:"world",config:!0,default:"slice",type:String,choices:{slice:"SETTINGS.BackgroundSlice",auto:"SETTINGS.BackgroundAuto",contain:"SETTINGS.BackgroundContain",cover:"SETTINGS.BackgroundCover"}}),game.settings.register("CoC7","artWorkOtherSheetBackground",{name:"SETTINGS.ArtWorkOtherSheetBackground",hint:"SETTINGS.ArtWorkOtherSheetBackgroundHint",scope:"world",config:!0,default:"url( './assets/images/background.webp')",type:String}),game.settings.register("CoC7","artworkSheetImage",{name:"SETTINGS.ArtworkSheetImage",hint:"SETTINGS.ArtworkSheetImageHint",scope:"world",config:!0,default:"url('./assets/images/tentacles.webp')",type:String}),game.settings.register("CoC7","artworkFrontColor",{name:"SETTINGS.ArtworkFrontColor",hint:"SETTINGS.ArtworkFrontColorHint",scope:"world",config:!0,default:"rgba(43,55,83,1)",type:String}),game.settings.register("CoC7","artworkBackgroundColor",{name:"SETTINGS.ArtworkBackgroundColor",hint:"SETTINGS.ArtworkBackgroundColorHint",scope:"world",config:!0,default:"rgba(103,11,11,1)",type:String}),game.settings.register("CoC7","artworkInteractiveColor",{name:"SETTINGS.ArtworkInteractiveColor",hint:"SETTINGS.ArtworkInteractiveColorHint",scope:"world",config:!0,default:"rgba(103,11,11,1)",type:String}),game.settings.register("CoC7","artworkFixedSkillLength",{name:"SETTINGS.ArtworkFixedSkillLength",hint:"SETTINGS.ArtworkFixedSkillLengthHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","artworkMainFont",{name:"SETTINGS.ArtworkMainFont",scope:"world",config:!0,default:"",type:String}),game.settings.register("CoC7","artworkMainFontBold",{name:"SETTINGS.ArtworkMainFontBold",scope:"world",config:!0,default:"",type:String}),game.settings.register("CoC7","artworkMainFontSize",{name:"SETTINGS.ArtworkMainFontSize",scope:"world",config:!0,default:16,type:Number})),game.settings.register("CoC7","disregardUsePerRound",{name:"SETTINGS.DisregardUsePerRound",hint:"SETTINGS.DisregardUsePerRoundHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","disregardAmmo",{name:"SETTINGS.DisregardAmmo",hint:"SETTINGS.DisregardAmmoHint",scope:"world",config:!0,default:!1,type:Boolean}),game.modules.get("dice-so-nice")?.active){game.settings.register("CoC7","syncDice3d",{name:"SETTINGS.SyncDice3D",hint:"SETTINGS.SyncDice3DHint",scope:"world",config:!0,default:!0,type:Boolean});const[version]=game.modules.get("dice-so-nice")?.data.version.split(".");!isNaN(Number(version))&&Number(version)>=3&&(game.settings.register("CoC7","tenDieBonus",{name:"SETTINGS.TenDieBonus",hint:"SETTINGS.TenDieBonusHint",scope:"client",config:!0,default:"bronze",type:String}),game.settings.register("CoC7","tenDiePenalty",{name:"SETTINGS.TenDiePenalty",hint:"SETTINGS.TenDiePenaltyHint",scope:"client",config:!0,default:"bloodmoon",type:String}))}game.settings.register("CoC7","debugmode",{name:"SETTINGS.DebugMode",hint:"SETTINGS.DebugModeHint",scope:"world",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","experimentalFeatures",{name:"SETTINGS.ShowExperimentalFeatures",hint:"SETTINGS.ShowExperimentalFeaturesHint",scope:"world",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","developmentEnabled",{name:"Dev phased allowed",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","showWelcomeMessage",{name:"SETTINGS.showWelcomeMessage",hint:"SETTINGS.showWelcomeMessage",scope:"world",config:!1,default:!0,type:Boolean}),game.settings.register("CoC7","charCreationEnabled",{name:"Char creation allowed",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","systemUpdateVersion",{name:"System update version",scope:"world",config:!1,type:String,default:game.system.data.version}),game.settings.register("CoC7","systemUpdatedModuleVersion",{scope:"world",config:!1,default:{}}),game.settings.register("CoC7","xpEnabled",{name:"Enable XP gain",scope:"world",config:!1,type:Boolean,default:!0}),CONFIG.Combat.initiative={formula:"@characteristics.dex.value",decimals:4},CONFIG.debug.hooks=!!game.settings.get("CoC7","debugmode"),CONFIG.Dice.terms.t=CoC7DecaderDie,CONFIG.Dice.terms.o=CoC7DecaderDieOther}(),Actors.unregisterSheet("core",ActorSheet),Actors.registerSheet("CoC7",CoC7NPCSheet,{types:["npc"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7VehicleSheet,{types:["vehicle"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7CreatureSheet,{types:["creature"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7ContainerSheet,{types:["container"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7CharacterSheet,{types:["character"],makeDefault:!0}),Items.unregisterSheet("core",ItemSheet),Items.registerSheet("CoC7",CoC7SkillSheet,{types:["skill"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7WeaponSheet,{types:["weapon"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7BookSheet,{types:["book"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7SpellSheet,{types:["spell"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7TalentSheet,{types:["talent"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7StatusSheet,{types:["status"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7OccupationSheet,{types:["occupation"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ArchetypeSheet,{types:["archetype"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7SetupSheet,{types:["setup"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ChaseSheet,{types:["chase"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ItemSheet,{types:["item"]}),Items.registerSheet("CoC7",CoC7ItemSheetV2,{types:["item"],makeDefault:!0}),Handlebars.registerHelper("rollActorImg",(function(actorKey){return chatHelper.getActorImgFromKey(actorKey)||"../icons/svg/mystery-man-black.svg"})),function(){Hooks.on("renderCompendium",(async(app,html,data)=>{if("Item"===app.collection.documentName){const types=[...new Set(data.index.map((item=>item.type)))],select=[];select.push('<option value="">'+game.i18n.localize("CoC7.All")+"</option>"),types.includes("archetype")&&select.push('<option value="archetype">'+game.i18n.localize("CoC7.Entities.Archetype")+"</option>"),types.includes("book")&&select.push('<option value="book">'+game.i18n.localize("CoC7.Entities.Book")+"</option>"),types.includes("item")&&select.push('<option value="item">'+game.i18n.localize("CoC7.Entities.Item")+"</option>"),types.includes("occupation")&&select.push('<option value="occupation">'+game.i18n.localize("CoC7.Entities.Occupation")+"</option>"),types.includes("setup")&&select.push('<option value="setup">'+game.i18n.localize("CoC7.Entities.Setup")+"</option>"),types.includes("skill")&&select.push('<option value="skill">'+game.i18n.localize("CoC7.Entities.Skill")+"</option>"),types.includes("spell")&&select.push('<option value="spell">'+game.i18n.localize("CoC7.Entities.Spell")+"</option>"),types.includes("status")&&select.push('<option value="status">'+game.i18n.localize("CoC7.Entities.Status")+"</option>"),types.includes("talent")&&select.push('<option value="talent">'+game.i18n.localize("CoC7.Entities.Talent")+"</option>"),types.includes("weapon")&&select.push('<option value="weapon">'+game.i18n.localize("CoC7.Entities.Weapon")+"</option>");const eras=[];eras.push('<option value="">'+game.i18n.localize("CoC7.All")+"</option>");for(const[key,value]of Object.entries(COC7.eras))eras.push('<option value="'+key+'">'+game.i18n.localize(value)+"</option>");html.data("packId",app.metadata.package+"."+app.metadata.name),html.find("header.directory-header").remove(),html.find("div.compendium.directory").before('<div class="compendiumfilter"><div class="flexrow"><i class="fas fa-layer-group"></i><select name="coc7type'+app.appId+'" style="">'+select.join("")+'</select></div><div class="flexrow"><i class="fas fa-search"></i><input type="text" name="coc7name'+app.appId+'" placeholder="'+game.i18n.localize("FILES.Search")+'" autocomplete="off"></div><div class="flexrow era_select" style="display:none"><i class="fas fa-layer-group"></i><select name="coc7era'+app.appId+'" style="">'+eras.join("")+"</select></div></div>"),html.find("select").change(performFilter.bind(this)),html.find("input").keyup(performFilter.bind(this))}}))}()}))}class CoC7DecaderDSNFaces{construtor(){this.selected=""}setFaces(){let selected=game.user.getFlag("dice-so-nice","appearance")?.global.system;if(selected!==this.selected){let data,destination,sourceDie=game.dice3d.DiceFactory.systems[selected]?.dice.find((d=>"d100"===d.type));void 0===sourceDie&&(sourceDie=game.dice3d.DiceFactory.systems.standard.dice.find((d=>"d100"===d.type)),selected="standard"),void 0!==sourceDie&&(destination=game.dice3d.DiceFactory.systems.standard.dice.findIndex((d=>"dt"===d.type)),data=Object.assign({},sourceDie),data.type="dt",game.dice3d.DiceFactory.systems.standard.dice[destination]=Object.assign(sourceDie.constructor.prototype,data)),this.selected=selected}}}class CoC7Tooltips{constructor(){this.ToolTipHover=null,this.toolTipTimer=null}displayToolTip(toolTip){if(void 0!==this.ToolTipHover){const bounds=this.ToolTipHover.getBoundingClientRect();if(!isNaN(bounds.left||"")&&!isNaN(bounds.top||"")){let left=bounds.left,top=bounds.top;const heightText=$(this.ToolTipHover).outerHeight();$("body").append('<div id="help-tooltip">'+toolTip+"</div>");const tip=$("#help-tooltip"),heightTip=tip.outerHeight(),widthTip=tip.outerWidth();window.innerHeight<1.5*heightText+heightTip+top?top-=heightTip:top+=1.5*heightText,window.innerWidth<widthTip+left&&(left=window.innerWidth-widthTip),tip.css({left:left+"px",top:top+"px"})}}}toolTipLeave(event){game.CoC7Tooltips.ToolTipHover===event.currentTarget&&(clearTimeout(game.CoC7Tooltips.toolTipTimer),game.CoC7Tooltips.ToolTipHover=null,$("#help-tooltip").remove())}}const CoC7Hooks={listen(){listen(),Hooks.once("ready",(async()=>{console.log("Call of Cthulhu 7th Edition | Ready"),game.settings.get("CoC7","showWelcomeMessage")&&game.user.isGM,game.CoC7Tooltips=new CoC7Tooltips})),Hooks.on("renderActorSheet",(async(data,html,options)=>{})),Hooks.on("renderChatMessage",(()=>{})),Hooks.on("renderDialog",((dialog,html)=>{const form=html.find("form");if(form.is("#document-create")&&0!==form.find("select").length){const entityCreateSelectTag=form.find("[name='type']"),entitySortedList=[],showExperimental=!!game.settings.get("CoC7","experimentalFeatures");entityCreateSelectTag.children().each(((o,entityOption)=>{const key=entityOption.textContent?.capitalize();game.i18n.has(`CoC7.Entities.${key}`)&&(entityOption.textContent=game.i18n.localize(`CoC7.Entities.${key}`)),!showExperimental&&["chase","vehicle"].includes(entityOption.value)||entitySortedList.push(entityOption)})),entityCreateSelectTag.empty(),entityCreateSelectTag.append(entitySortedList.sort(((first,second)=>first.innerText.localeCompare(second.innerText)))),"actor"===entityCreateSelectTag.val()?entityCreateSelectTag.val("character"):"book"===entityCreateSelectTag.val()&&entityCreateSelectTag.val("item")}})),Hooks.on("renderItemSheet",(async(data,html,options)=>{})),Hooks.on("renderPause",(async(data,html,options)=>{game.settings.get("CoC7","overrideGameArtwork")&&("null"===game.settings.get("CoC7","artPauseImage").toLowerCase()&&html.find("img").remove(),""!==game.settings.get("CoC7","artPauseImage")&&html.find("img").attr("src",game.settings.get("CoC7","artPauseImage")),""!==game.settings.get("CoC7","artPauseText")&&html.find("h3").html(game.settings.get("CoC7","artPauseText")))})),Hooks.once("diceSoNiceReady",(dice3d=>{dice3d.addDicePreset({type:"dt",labels:["10","20","30","40","50","60","70","80","90","00"],fontScale:.75,system:"standard"}),dice3d.addDicePreset({type:"do",labels:["10","20","30","40","50","60","70","80","90","00"],fontScale:.75,system:"standard"}),game.CoC7DecaderDSNFaces=new CoC7DecaderDSNFaces})),Hooks.on("diceSoNiceRollStart",(dice3d=>{game.CoC7DecaderDSNFaces.setFaces()}))}};async function gmcreatemessageas(data){const meleeTarget=new CoC7MeleeTarget(data.targetKey,data.messageId,data.fastForward);meleeTarget.initiatorKey=data.actorKey;return await meleeTarget.createChatCard()}async function gmtradeitemto(data){try{let actor;actor=data.scene?game.scenes.get(data.scene).tokens.get(data.actorFrom).actor:game.actors.get(data.actorFrom);const item=actor.items.get(data.item);await game.actors.get(data.actorTo).createEmbeddedDocuments("Item",[item.toJSON()])&&actor.deleteEmbeddedDocuments("Item",[item.id])}catch(e){return ui.notifications.error(e),!1}return!0}function _onLeftClick(event){return event.shiftKey}CONST.COMPATIBILITY_MODES&&!isNewerVersion(game.version,"10.262")&&(CONFIG.compatibility.mode=CONST.COMPATIBILITY_MODES.SILENT),Hooks.on("renderSettingsConfig",((app,html,options)=>{const systemTab=$(app.form).find(".tab[data-tab=system]");systemTab.find("input[name=CoC7\\.displayInitDices]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleInitiative")+"</h2>"),systemTab.find("input[name=CoC7\\.stanbyGMRolls]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRoll")+"</h2>"),systemTab.find("input[name=CoC7\\.displayActorOnCard]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleChatCards")+"</h2>"),systemTab.find("input[name=CoC7\\.enableStatusIcons]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleScene")+"</h2>"),systemTab.find("input[name=CoC7\\.overrideGameArtwork]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleGameArtwork")+"</h2>"),systemTab.find("input[name=CoC7\\.displayPlayerNameOnSheet]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleSheet")+"</h2>"),systemTab.find("input[name=CoC7\\.disregardUsePerRound]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleWeapon")+"</h2>"),systemTab.find("input[name=CoC7\\.syncDice3d]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleDiceSoNice")+"</h2>"),systemTab.find("input[name=CoC7\\.debugmode]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleDeveloperDebug")+"</h2>"),systemTab.find("select[name=CoC7\\.boutOfMadnessSummaryTable]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRollTable")+"</h2>")})),Hooks.once("init",(async function(){game.CoC7={macros:{skillCheck:CoC7Utilities.skillCheckMacro,weaponCheck:CoC7Utilities.weaponCheckMacro,check:CoC7Utilities.checkMacro},cards:{DamageCard}},Combat.prototype.rollInitiative=rollInitiative})),function(...cardclass){Hooks.on("renderChatLog",((app,html,data)=>EnhancedChatCardLib.injectCSS(app,html,data))),Hooks.once("socketlib.ready",(function(){EnhancedChatCardLib.register(cardclass),EnhancedChatCardLib.socket=socketlib.registerSystem(game.system.id),EnhancedChatCardLib.socket.register("updateMessage",updateMessage),EnhancedChatCardLib.socket.register("advise",advise)})),Hooks.on("renderChatMessage",((app,html,data)=>EnhancedChatCard.bindListeners(html)))}(TestCard),Hooks.on("renderCombatTracker",((app,html,data)=>CoC7Combat.renderCombatTracker(app,html,data))),Hooks.on("chatMessage",((html,content)=>{if(content.match(/^\/(cbr|cc)/i)){const commands=content.match(/(\d+)/g);return commands?new Roll("1d100").roll({async:!0}).then((r=>{const s=r.result,res=commands.map((m=>{let res="";return res=s<=1?game.i18n.localize("CoC7.CriticalSuccess"):s>=100?game.i18n.localize("CoC7.Fumble"):s<=m/5?game.i18n.localize("CoC7.ExtremeSuccess"):s<=m/2?game.i18n.localize("CoC7.HardSuccess"):s<=m?game.i18n.localize("CoC7.RegularSuccess"):s>=96&&m<50?game.i18n.localize("CoC7.Fumble"):game.i18n.localize("CoC7.Failure"),res+=" "+game.i18n.localize("CoC7.Value")+" "+m,res})).join(" / ");r.toMessage({speaker:ChatMessage.getSpeaker(),flavor:res})})):ui.notifications.error("Incorrect usage of command"),!1}})),CoC7Hooks.listen(),Hooks.once("socketlib.ready",(function(){game.CoC7socket=socketlib.registerSystem("CoC7"),game.CoC7socket.register("gmcreatemessageas",gmcreatemessageas),game.CoC7socket.register("gmtradeitemto",gmtradeitemto)})),Hooks.once("setup",(function(){const toLocalize=["spellProperties","bookType","talentType","occupationProperties","statusType"];for(const o of toLocalize){const localized=Object.entries(COC7[o]).map((e=>[e[0],game.i18n.localize(e[1])]));COC7[o]=localized.reduce(((obj,e)=>(obj[e[0]]=e[1],obj)),{})}let effectIndex=CONFIG.statusEffects.findIndex((t=>t.id===COC7.status.dead));-1!==effectIndex&&(CONFIG.statusEffects[effectIndex].icon="systems/CoC7/assets/icons/tombstone.svg"),effectIndex=CONFIG.statusEffects.findIndex((t=>t.id===COC7.status.unconscious)),-1!==effectIndex&&(CONFIG.statusEffects[effectIndex].icon="systems/CoC7/assets/icons/knocked-out-stars.svg"),CONFIG.statusEffects.unshift({id:COC7.status.tempoInsane,label:"CoC7.BoutOfMadnessName",icon:"systems/CoC7/assets/icons/hanging-spider.svg"},{id:COC7.status.indefInsane,label:"CoC7.InsanityName",icon:"systems/CoC7/assets/icons/tentacles-skull.svg"},{id:COC7.status.criticalWounds,label:"CoC7.CriticalWounds",icon:"systems/CoC7/assets/icons/arm-sling.svg"},{id:COC7.status.dying,label:"CoC7.Dying",icon:"systems/CoC7/assets/icons/heart-beats.svg"})})),Hooks.on("createActiveEffect",((data,options,userId)=>{if(game.userId===userId&&void 0!==data.data.flags.core&&void 0!==data.data.flags.core.statusId)switch(data.data.flags.core.statusId){case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:data.parent.setCondition(data.data.flags.core.statusId,{forceValue:!0});break;case COC7.status.tempoInsane:{const realTime=data.data.flags.CoC7?.realTime;let duration=null;!0===realTime?duration=data.data.duration?.rounds:!1===realTime&&(duration=data.data.duration?.seconds,isNaN(duration)||(duration=Math.floor(duration/3600))),data.parent.setCondition(COC7.status.tempoInsane,{forceValue:!0,realTime,duration})}}})),Hooks.on("deleteActiveEffect",((data,options,userId)=>{if(game.userId===userId&&void 0!==data.data.flags.core&&void 0!==data.data.flags.core.statusId)switch(data.data.flags.core.statusId){case COC7.status.tempoInsane:case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:data.parent.unsetCondition(data.data.flags.core.statusId,{forceValue:!0})}})),Hooks.on("hotbarDrop",(async(bar,data,slot)=>CoC7Utilities.createMacro(bar,data,slot))),Hooks.on("renderChatLog",((app,html,data)=>CoC7Chat.chatListeners(app,html,data))),Hooks.on("renderChatMessage",((app,html,data)=>CoC7Chat.renderMessageHook(app,html,data))),Hooks.on("updateChatMessage",((chatMessage,chatData,diff,speaker)=>CoC7Chat.onUpdateChatMessage(chatMessage,chatData,diff,speaker))),Hooks.on("ready",(async()=>{function _tableSettingsChanged(table,id){game.CoC7.tables[table]="none"===id?null:game.tables.get(id)}await Updater.checkForUpdate(),$("body").on("click","a.coc7-inline-check",CoC7Check._onClickInlineRoll),document.addEventListener("mousedown",_onLeftClick),tinyMCE.PluginManager.add("CoC7_Editor_OnDrop",(function(editor){editor.on("drop",(event=>CoC7Parser.onEditorDrop(event,editor)))})),CONFIG.TinyMCE.plugins=`CoC7_Editor_OnDrop ${CONFIG.TinyMCE.plugins}`,game.CoC7.skillList=await(game.packs.get("CoC7.skills")?.getDocuments()),game.socket.on("system.CoC7",(async data=>{if("updateChar"===data.type&&CoC7Utilities.updateCharSheets(),game.user.isGM&&(OpposedCheckCard.defaultConfig.type===data.type&&OpposedCheckCard.dispatch(data),CombinedCheckCard.defaultConfig.type===data.type&&CombinedCheckCard.dispatch(data),"invoke"===data.type)){(await fromUuid(data.item))[data.method](data.data)}}));const tableChoice={none:"SETTINGS.LetKeeperDecide"};for(const t of game.tables)tableChoice[t.data._id]=t.data.name;game.settings.register("CoC7","boutOfMadnessSummaryTable",{name:"SETTINGS.BoutOfMadnessSummaryTable",scope:"world",config:!0,default:"none",type:String,choices:tableChoice,onChange:id=>_tableSettingsChanged("boutOfMadness_Summary",id)}),game.settings.register("CoC7","boutOfMadnessRealTimeTable",{name:"SETTINGS.BoutOfMadnessRealTimeTable",scope:"world",config:!0,default:"none",type:String,choices:tableChoice,onChange:id=>_tableSettingsChanged("boutOfMadness_RealTime",id)}),game.CoC7.tables={boutOfMadness_Summary:"none"===game.settings.get("CoC7","boutOfMadnessSummaryTable")?null:game.tables.get(game.settings.get("CoC7","boutOfMadnessSummaryTable")),boutOfMadness_RealTime:"none"===game.settings.get("CoC7","boutOfMadnessRealTimeTable")?null:game.tables.get(game.settings.get("CoC7","boutOfMadnessRealTimeTable"))}})),Hooks.on("renderCoC7ChaseSheet",((app,html,data)=>CoC7ChaseSheet.setScroll(app,html,data))),Hooks.on("closeCoC7ChaseSheet",((app,html)=>CoC7ChaseSheet.onClose(app,html))),Hooks.on("closeActorSheet",(characterSheet=>characterSheet.onCloseSheet())),Hooks.on("renderCoC7CreatureSheet",((app,html,data)=>CoC7CreatureSheet.forceAuto(app,html,data))),Hooks.on("renderCoC7NPCSheet",((app,html,data)=>CoC7NPCSheet.forceAuto(app,html,data))),Hooks.on("chatMessage",CoC7Utilities.ParseChatEntry),Hooks.on("getSceneControlButtons",(()=>{})),Hooks.on("renderItemSheet",CoC7Parser.ParseSheetContent),Hooks.on("renderJournalSheet",CoC7Parser.ParseSheetContent),Hooks.on("renderActorSheet",CoC7Parser.ParseSheetContent),Hooks.on("renderChatMessage",((app,html,data)=>{CoC7Chat.renderChatMessageHook(app,html,data),CoC7Parser.ParseMessage(app,html,data)})),Hooks.on("renderActorSheet",CoC7CharacterSheet.renderSheet),Hooks.on("renderItemSheet",CoC7CharacterSheet.renderSheet),Hooks.on("getSceneControlButtons",CoC7Menu.getButtons),Hooks.on("renderSceneControls",CoC7Menu.renderControls),Hooks.on("dropCanvasData",CoC7Canvas.onDropSomething),Hooks.on("dropActorSheetData",(function(actor,sheet,data){if("Item"===data.type&&data.actorId){if(actor.data._id===data.actorId)return;let actorFrom=null;switch(actorFrom=data.sceneId&&data.tokenId?game.scenes.get(data.sceneId).tokens.get(data.tokenId).actor:game.actors.get(data.actorId),actor.data.type){case"character":case"npc":case"creature":if(!["chase"].includes(data.data.type))return;break;case"vehicle":return;case"container":if(!["book","item","spell","weapon"].includes(data.data.type))return}actorFrom&&actorFrom.deleteEmbeddedDocuments("Item",[data.data._id])}})),CONFIG.ui.settings=CoC7SettingsDirectory,CONFIG.ui.compendium=CoC7CompendiumDirectory,CONFIG.ui.actors=CoC7ActorDirectory})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJtQkFFTyxNQUFNQSxTQUNYQyxrQkFBbUJDLE1BQVEsRUFBR0MsU0FBVyxLQUFNQyxVQUFXLEdBQ3hELElBQUlDLGdCQUFrQixHQUNsQkMsS0FBS0MsUUFBUUMsSUFBSSxpQkFBaUJDLFNBQ2hDUCxNQUFRLEVBQ1ZHLGdCQUFrQkMsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGlCQUNuQ04sTUFBUSxJQUNqQkcsZ0JBQWtCQyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsaUJBR2hELE1BQU1HLFdBQWEsSUFBSUMsS0FDckIsT0FDdUIsS0FBcEJQLGdCQUNHLFFBQVVBLGdCQUFrQixJQUM1QixRQUNGUSxPQUFPQyxLQUFLQyxJQUFJYixRQUNsQixTQUNGUyxLQUFLLENBQUVLLE9BQU8sSUFDVkMsT0FBUyxDQUNiQyxLQUFNLENBQ0pDLE1BQU8sRUFDUEMsUUFBUyxJQUVYQyxLQUFNLENBQ0pGLE1BQU8sRUFDUEMsUUFBUyxJQUVYRCxNQUFPLEVBQ1BSLE1BRUVSLFdBQVVjLE9BQU9kLFNBQVdBLFVBQzVCQyxXQUFVYSxPQUFPYixTQUFXQSxVQUNoQyxJQUFLLE1BQU1rQixLQUFLWCxLQUFLWSxLQUNmRCxhQUFhRSxPQUFPQyxLQUFLQyxNQUFNQyxFQUNqQ1YsT0FBT0ksS0FBS0QsUUFBUVEsS0FBS04sRUFBRUgsUUFFM0JGLE9BQU9DLEtBQUtDLE1BQW9CLEtBQVpHLEVBQUVILE1BQWUsRUFBSUcsRUFBRUgsTUFDM0NGLE9BQU9DLEtBQUtFLFFBQVFRLEtBQUtYLE9BQU9DLEtBQUtDLFFBR3pDLEdBQUlqQixNQUFRLEVBQ1ZlLE9BQU9JLEtBQUtGLE1BQ1ksSUFBdEJGLE9BQU9DLEtBQUtDLE9BQWVGLE9BQU9JLEtBQUtELFFBQVFTLFNBQVMsR0FDcEQsSUFDQWYsS0FBS2dCLE9BQU9iLE9BQU9JLEtBQUtELGNBQ3pCLEdBQTBCLElBQXRCSCxPQUFPQyxLQUFLQyxNQUFhLENBQ2xDLE1BQU1JLEtBQU9OLE9BQU9JLEtBQUtELFFBQVFXLFFBQU9KLEdBQUtBLEVBQUksSUFDakRWLE9BQU9JLEtBQUtGLE1BQXdCLElBQWhCSSxLQUFLUyxPQUFlLElBQU1sQixLQUFLbUIsT0FBT1YsV0FFMUROLE9BQU9JLEtBQUtGLE1BQVFMLEtBQUttQixPQUFPaEIsT0FBT0ksS0FBS0QsU0FHOUMsT0FEQUgsT0FBT0UsTUFBUUYsT0FBT0MsS0FBS0MsTUFBUUYsT0FBT0ksS0FBS0YsTUFDeENGLE9BR1RoQiw0QkFBNkJVLE1BQzNCLEdBQUlMLEtBQUtDLFFBQVFDLElBQUksaUJBQWlCQyxPQUFRLENBQzVDLE1BQU15QixTQUFXNUIsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGNBRXJDMkIsU0FBVyxDQUNmQyxRQUFTLEtBQ1RDLE9BQU8sR0FFVEMsWUFBWUMsY0FBY0osU0FBVTdCLEtBQUtJLFNBQVNGLElBQUksT0FBUSxtQkFFeERGLEtBQUtrQyxPQUFPQyxZQUNoQjlCLEtBQ0FMLEtBQUtvQyxLQUNMUixTQUNBQyxTQUFTQyxRQUNURCxTQUFTRSxRQUtmcEMsMEJBQTJCMEMsU0FDekJBLFFBQVFDLEtBQU9ELFFBQVFDLE1BQVEsR0FDL0JELFFBQVFDLEtBQUssSUFBTyxFQUNwQixNQUFNQyxLQUFPQyxPQUFPRCxLQUFLRixRQUFRQyxNQUFNRyxLQUFJQyxHQUFLQyxTQUFTRCxFQUFHLE1BQzVELElBQUlFLFlBQWNwQyxLQUFLQyxJQUFJRCxLQUFLbUIsSUFBSSxFQUFHbkIsS0FBS21CLE9BQU9ZLFFBQy9DTSxVQUFZckMsS0FBS2dCLElBQUksRUFBR2hCLEtBQUtnQixPQUFPZSxPQUN4QyxNQUFNTyxPQUFTOUMsS0FBS0MsUUFBUUMsSUFBSSxpQkFBaUJDLE9BRTNDbUMsS0FBTyxHQUNiQSxLQUFLaEIsS0FBSyxZQUVOc0IsWUFBYyxHQUNoQk4sS0FBS2hCLE1BQ0Z3QixPQUNHLFFBQVU5QyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsaUJBQW1CLElBQ3ZELE9BQ0ZLLE9BQU9DLEtBQUtDLElBQUltQyxlQUdsQkMsVUFBWSxHQUNkUCxLQUFLaEIsTUFDRndCLE9BQ0csUUFBVTlDLEtBQUtJLFNBQVNGLElBQUksT0FBUSxlQUFpQixJQUNyRCxPQUNGSyxPQUFPQyxLQUFLQyxJQUFJb0MsYUFHdEIsTUFBTXhDLFdBQWEsSUFBSUMsS0FBS2dDLEtBQUtTLEtBQUssS0FBSzFDLEtBQUssQ0FBRUssT0FBTyxJQUNuREMsT0FBUyxDQUNicUMsT0FBUSxDQUNOQyxRQUFTLEVBQ1RMLFlBQWEsR0FDYkMsVUFBVyxJQUViakMsS0FBTSxFQUNOUCxNQUVGLElBQUk2QyxTQUFVLEVBQ2QsSUFBSyxNQUFNbEMsS0FBS1gsS0FBS1ksS0FDZkQsYUFBYUUsT0FBT0MsS0FBS0MsTUFBTUMsRUFDNUI2QixRQUdNTixZQUFjLEdBQ3ZCakMsT0FBT3FDLE9BQU9KLFlBQVl0QixLQUFLTixFQUFFSCxPQUNqQytCLGdCQUVBakMsT0FBT3FDLE9BQU9ILFVBQVV2QixLQUFLTixFQUFFSCxPQUMvQmdDLGNBUEFsQyxPQUFPcUMsT0FBT0MsUUFBVWpDLEVBQUVILE1BQzFCcUMsU0FBVSxHQVNadkMsT0FBT0MsS0FBbUIsS0FBWkksRUFBRUgsTUFBZSxFQUFJRyxFQUFFSCxNQUl6QyxNQUFNc0MsT0FBUyxHQUVmLElBQUssTUFBTUMsT0FBT2YsUUFBUUMsS0FBTSxDQUM5QmEsT0FBT0MsS0FBTyxDQUNaeEMsS0FBTSxDQUNKQyxNQUFPRixPQUFPQyxLQUNkRSxRQUFTLENBQUNILE9BQU9DLE9BRW5CRyxLQUFNLENBQ0pGLE1BQU8sRUFDUEMsUUFBUyxJQUVYRCxNQUFPLEVBQ1BSLE1BRUYsTUFBTVQsTUFBUStDLFNBQVNTLElBQUssSUFDNUIsSUFBSUMsU0FBV3pELE1BQ2Z1RCxPQUFPQyxLQUFLckMsS0FBS0QsUUFBUVEsS0FBS1gsT0FBT3FDLE9BQU9DLFNBQzVDLElBQUssTUFBTUssT0FBUzlDLEtBQUtDLElBQUk0QyxVQUFXQSxTQUFXLEVBQUdBLFdBQ3BERixPQUFPQyxLQUFLckMsS0FBS0QsUUFBUVEsS0FDdkJYLE9BQU9xQyxPQUFPSixZQUFZUyxTQUFXQyxTQUd6QyxJQUFLLE1BQU1BLE9BQVNELFNBQVVBLFNBQVcsRUFBR0EsV0FDMUNGLE9BQU9DLEtBQUtyQyxLQUFLRCxRQUFRUSxLQUN2QlgsT0FBT3FDLE9BQU9ILFVBQVVyQyxLQUFLQyxJQUFJNEMsU0FBV0MsVUFHaEQsR0FBSTFELE1BQVEsRUFDVnVELE9BQU9DLEtBQUtyQyxLQUFLRixNQUNZLElBQTNCc0MsT0FBT0MsS0FBS3hDLEtBQUtDLE9BQWVzQyxPQUFPQyxLQUFLckMsS0FBS0QsUUFBUVMsU0FBUyxHQUM5RCxJQUNBZixLQUFLZ0IsT0FBTzJCLE9BQU9DLEtBQUtyQyxLQUFLRCxjQUM5QixHQUErQixJQUEzQnFDLE9BQU9DLEtBQUt4QyxLQUFLQyxNQUFhLENBQ3ZDLE1BQU1JLEtBQU9rQyxPQUFPQyxLQUFLckMsS0FBS0QsUUFBUVcsUUFBT0osR0FBS0EsRUFBSSxJQUN0RDhCLE9BQU9DLEtBQUtyQyxLQUFLRixNQUF3QixJQUFoQkksS0FBS1MsT0FBZSxJQUFNbEIsS0FBS21CLE9BQU9WLFdBRS9Ea0MsT0FBT0MsS0FBS3JDLEtBQUtGLE1BQVFMLEtBQUttQixPQUFPd0IsT0FBT0MsS0FBS3JDLEtBQUtELFNBRXhEcUMsT0FBT0MsS0FBS3ZDLE1BQVFzQyxPQUFPQyxLQUFLeEMsS0FBS0MsTUFBUXNDLE9BQU9DLEtBQUtyQyxLQUFLRixNQUVoRSxPQUFPc0MsUUM1S0osTUFBTUksS0FBTyxHQ09iLFNBQVNDLGlCQUFrQm5ELE1BQ2hDLE1BQU1vRCxLQUFPLENBQ1hDLElBQUssQ0FBQyxlQUNOQyxRQUFTLElBR1gsSUFDRUYsS0FBS0MsSUFBSXBDLEtBQUssaUJBQ2RtQyxLQUFLOUMsT0FBU04sS0FBS1EsTUFDbkI0QyxLQUFLRyxNQUFRdkQsS0FBS3dELFFBQ2xCSixLQUFLRSxRQUFRdEQsS0FBT3lELE9BQU9DLEtBQUtDLFVBQVUzRCxPQUMxQyxNQUFPNEQsS0FDUCxPQUFPLEtBSVQsTUFBTUMsRUFBSUMsU0FBU0MsY0FBYyxLQUNqQ0YsRUFBRUcsVUFBVUMsT0FBT2IsS0FBS0MsS0FDeEJRLEVBQUVOLE1BQVFILEtBQUtHLE1BQ2YsSUFBSyxNQUFPVyxFQUFHN0IsS0FBTUYsT0FBT2dDLFFBQVFmLEtBQUtFLFNBQ3ZDTyxFQUFFUCxRQUFRWSxHQUFLN0IsRUFHakIsT0FEQXdCLEVBQUVPLFVBQVksbUNBQW1DaEIsS0FBSzlDLFNBQy9DdUQsRUFxQ0YsU0FBU1EsVUFBV0MsT0FDekIsT0FDRUEsTUFBTUMsU0FDTkQsTUFBTUUsU0FDWSxLQUFsQkYsTUFBTUcsU0FDWSxNQUFsQkgsTUFBTUcsUUQvRFZ2QixLQUFLd0IsS0FBTyxDQUNWQyxLQUFNLGVBQ05DLEtBQU0sZUFDTkMsS0FBTSxlQUNOQyxLQUFNLGVBQ04sS0FBTSxlQUNOQyxLQUFNLGVBQ05DLEtBQU0sZ0JBR1I5QixLQUFLK0IsZ0JBQWtCLENBQ3JCQyxJQUFLLGlCQUNMQyxJQUFLLGlCQUNMQyxJQUFLLGlCQUNMQyxJQUFLLGlCQUNMQyxJQUFLLGlCQUNMQyxJQUFLLGlCQUNMQyxJQUFLLGlCQUNMQyxJQUFLLGtCQU9QdkMsS0FBS3dDLGdCQUFrQixDQUNyQkMsY0FBZSwwQkFDZkMsU0FBVSxxQkFDVkMsUUFBUyxvQkFDVEMsT0FBUSxtQkFDUjdFLEtBQU0saUJBQ044RSxPQUFRLG1CQUNSQyxTQUFVLHFCQUNWQyxRQUFTLHFCQUdYL0MsS0FBS2dELGlCQUFtQixDQUN0QkMsTUFBTyw2QkFDUEMsS0FBTSxrQkFDTkMsS0FBTSw2QkFDTkMsT0FBUSw4QkFDUkMsUUFBUywrQkFDVEMsS0FBTSxrQkFDTkMsS0FBTSxrQkFDTkMsS0FBTSxrQkFDTkMsS0FBTSxrQkFDTkMsS0FBTSxrQkFDTkMsS0FBTSxrQkFDTkMsS0FBTSxrQkFDTkMsS0FBTSxrQkFDTkMsS0FBTSxrQkFDTkMsS0FBTSxrQkFDTkMsS0FBTSxrQkFDTkMsS0FBTSxrQkFDTkMsS0FBTSw2QkFHUmxFLEtBQUttRSxnQkFBa0IsQ0FDckJDLEtBQU0saUJBQ05DLFFBQVMsb0JBQ1RDLFFBQVMsb0JBQ1RDLE9BQVEsbUJBQ1JDLEtBQU0saUJBQ05DLFlBQWEsd0JBQ2JDLEtBQU0saUJBQ043QixPQUFRLG9CQUdWN0MsS0FBSzJFLFNBQVcsQ0FDZEMsT0FBUSxrQkFDUkMsT0FBUSxrQkFDUkMsTUFBTyxjQUdUOUUsS0FBSytFLFdBQWEsQ0FDaEJDLFNBQVUsc0JBQ1ZDLE9BQVEsb0JBQ1JwQyxPQUFRLG9CQUNScUMsY0FBZSwyQkFDZkMsTUFBTyxtQkFDUEMsT0FBUSxvQkFDUk4sTUFBTyxvQkFHVDlFLEtBQUtxRixXQUFhLENBQ2hCQyxNQUFPLGFBQ1BDLE9BQVEsZUFHVnZGLEtBQUt3RixxQkFBdUIsQ0FDMUJDLFFBQVMsZUFDVEMsYUFBYyxvQkFDZEMsT0FBUSxjQUNSOUQsS0FBTSxhQUdSN0IsS0FBS00sUUFBVSxHQUVmTixLQUFLTSxRQUFRc0YsTUFBUSxDQUNuQixPQUFRLDJDQUNSLE9BQVEsMkNBQ1IsT0FBUSwyQ0FDUixPQUFRLDJDQUNSLE9BQVEsMkNBQ1IsT0FBUSwyQ0FDUixPQUFRLDJDQUNSLE9BQVEsNENBR1Y1RixLQUFLTSxRQUFRdUYsV0FBYSxDQUN4QixPQUFRLGlEQUNSLE9BQVEsaURBQ1IsT0FBUSxpREFDUixPQUFRLGlEQUNSLE9BQVEsaURBQ1IsT0FBUSxpREFDUixPQUFRLGlEQUNSLE9BQVEsa0RBR1Y3RixLQUFLOEYsT0FBUyxDQUNaQyxZQUFhLGNBQ2JDLFlBQWEsY0FDYkMsWUFBYSxjQUNiQyxlQUFnQixpQkFDaEJDLE1BQU8sUUFDUEMsTUFBTyxRQUNQQyxLQUFNLFFBR1JyRyxLQUFLc0csWUFBYyxtQkFDbkJ0RyxLQUFLdUcsYUFBZSxvQkFDcEJ2RyxLQUFLd0csYUFBZSxvQkFDcEJ4RyxLQUFLeUcsWUFBYyxtQkFDbkJ6RyxLQUFLMEcsY0FBZ0IscUJBRXJCMUcsS0FBSzJHLHNCQUF3Qiw2QkFFN0IzRyxLQUFLNEcsZUFBaUIsc0JBQ3RCNUcsS0FBSzZHLHNCQUF3Qiw2QkFDN0I3RyxLQUFLOEcsa0JBQW9CLHlCQUN6QjlHLEtBQUsrRywyQkFBNkIsa0NBQ2xDL0csS0FBS2dILDBCQUE0QixpQ0FFakNoSCxLQUFLaUgsWUFBYyxDQUNqQkMsVUFBVyxpQkFDWEMsTUFBTyxhQUNQQyxTQUFVLGdCQUNWQyxXQUFZLG1CQ2pGUCxNQUFNQyxXQUNYbEwseUJBQTBCbUwsUUFDeEIsT0FBT0EsT0FBT0MsUUFBUSxhQUFhLFNBQVVELFFBQzNDLE9BQU9BLE9BQU8sR0FBR0UsaUJBSXJCckwsMkJBQTRCaUUsTUFBT3FILFFBQVM1SSxRQUFVLElBQ3BELE1BQU02SSxZQUFjLEdBQ3BCQSxZQUFZQyxPQUFTdkgsTUFDckJzSCxZQUFZRSxRQUFVL0ksUUFBUStJLFNBQVdwSixZQUFZcUosYUFDakRoSixRQUFRUCxVQUNWb0osWUFBWUksS0FBT0MsTUFBTUMsbUJBQW1CQyxRQUM1Q1AsWUFBWXBKLFFBQVVPLFFBQVFQLGNBRUosSUFBakJPLFFBQVFoQyxPQUNqQjZLLFlBQVk3SyxLQUFPZ0MsUUFBUWhDLEtBQzNCNkssWUFBWUksS0FBT0MsTUFBTUMsbUJBQW1CRSxLQUM1Q1IsWUFBWXJMLFNBQVcwTCxNQUFNSSxnQkFBZ0JDLE1BRS9DVixZQUFZOUksS0FBT3BDLEtBQUtvQyxLQUFLeUosR0FDN0JYLFlBQVlZLFFBQVViLFFBRXRCakosWUFBWStKLE9BQU9iLGFBQWFjLE1BQUtDLEtBQzVCQSxNQUlYdE0seUJBQTBCbUwsUUFDeEIsT0FBT0EsT0FBT0MsUUFBUSxZQUFZLFNBQVVELFFBQzFDLE1BQU8sSUFBTUEsT0FBT29CLGlCQUl4QnZNLHVCQUF3QnlELEtBQ3RCLElBQUtBLElBQUssT0FBTyxLQUVqQixHQUFJQSxJQUFJN0IsU0FBUyxLQUFNLENBRXJCLE1BQU80SyxRQUFTQyxTQUFXaEosSUFBSWlKLE1BQU0sS0FDckMsR0FBZ0IsVUFBWkYsUUFDRixPQUFPbk0sS0FBS3NNLE9BQU9DLE9BQU9ILFNBRzVCLE9BRGN2QixXQUFXMkIsZ0JBQWdCcEosTUFDM0IrRixNQUloQixPQUFPbkosS0FBS3NNLE9BQU9wTSxJQUFJa0QsTUFBUSxLQUdqQ3pELHlCQUEwQjhNLFVBQ3hCLE1BQU1yQixRQUFVLEdBQ1ZqQyxNQUFRMEIsV0FBVzZCLGdCQUFnQkQsVUFDekMsR0FBSUEsU0FBU2xMLFNBQVMsS0FBTSxDQUMxQixNQUFPNEssUUFBU0MsU0FBV0ssU0FBU0osTUFBTSxLQUMxQ2pCLFFBQVF1QixNQUFRUCxRQUNoQmhCLFFBQVF3QixNQUFRVCxRQUNaaEQsTUFBTXdELE9BQU9FLE9BQU16QixRQUFRMEIsTUFBUTNELE1BQU13RCxNQUFNRSxNQUNuRHpCLFFBQVFqQyxNQUFRQSxNQUFNMEMsUUFFdEJULFFBQVFqQyxNQUFRc0QsU0FDaEJyQixRQUFRMEIsTUFBUTNELE1BQU0wRCxLQUV4QixPQUFPekIsUUFHVHpMLDZCQUE4Qm9OLE9BQVFDLFFBQVNDLFdBQWEsSUFDMUQsSUFBSyxNQUFNQyxRQUFRMUssT0FBT0QsS0FBS3dLLFFBQ3hCRyxLQUFLQyxXQUFXLE9BQ1MsaUJBQWpCSixPQUFPRyxNQUNoQnJDLFdBQVd1QyxzQkFDVEwsT0FBT0csTUFDUEYsUUFDQSxHQUFHQyxjQUFjQyxTQUduQkYsUUFBUXJKLFFBQVEsR0FBR3NKLGFBQWFDLFFBQVVILE9BQU9HLE9BTXpEdk4sNEJBQTZCb04sT0FBUUMsU0FDbkMsU0FBU0ssWUFBYUMsSUFBS2xLLElBQUttSyxPQUM5QixHQUFJbkssSUFBSStKLFdBQVcsS0FBTSxDQUN2QixNQUFNSyxFQUFJcEssSUFBSXFLLE1BQU0sR0FDZEMsUUFBVUYsRUFBRUMsTUFBTUQsRUFBRUcsUUFBUSxLQUFPLEdBQ25DQyxRQUFVSixFQUFFSyxVQUFVLEVBQUdMLEVBQUVHLFFBQVEsV0FDYixJQUFqQkwsSUFBSU0sV0FBMEJOLElBQUlNLFNBQVcsSUFDeERQLFlBQVlDLElBQUlNLFNBQVVGLFFBQVNILFdBRXJCLFNBQVZBLE1BQWtCRCxJQUFJbEssTUFBTyxFQUNkLFVBQVZtSyxNQUFtQkQsSUFBSWxLLE1BQU8sRUFDOUIwSyxPQUFPUCxPQUFPUSxhQUFlUixNQUFPRCxJQUFJbEssS0FBTzBLLE9BQU9QLE9BQzFERCxJQUFJbEssS0FBT21LLE1BSXBCLEdBQUtQLFNBQVlELE9BQ2pCLElBQUssTUFBTUcsUUFBUTFLLE9BQU9ELEtBQUt5SyxRQUFRckosU0FBVSxDQUMvQyxHQUFhLGFBQVR1SixLQUFxQixPQUN6QkcsWUFBWU4sT0FBUUcsS0FBTUYsUUFBUXJKLFFBQVF1SixRQUk5Q3ZOLHVCQUF3QnlELEtBQ3RCLElBQUtBLElBQUssT0FBTyxLQUNqQixHQUFJQSxJQUFJN0IsU0FBUyxLQUFNLENBQ3JCLE1BQU80SyxRQUFTQyxTQUFXaEosSUFBSWlKLE1BQU0sS0FDckMsR0FBZ0IsVUFBWkYsUUFBcUIsQ0FDdkIsTUFBTTZCLFNBQVdoTyxLQUFLc00sT0FBT0MsT0FBT0gsVUFBVU8sTUFDOUMsT0FBT3FCLFNBQVNqQixPQUNYLENBQ0wsTUFBTUgsTUFBUTVNLEtBQUtpTyxPQUFPL04sSUFBSWlNLFNBQzlCLElBQUtTLE1BQU8sT0FBTyxLQUNuQixNQUFNc0IsVUFBWXRCLE1BQU11QixvQkFBb0IsUUFBUy9CLFNBQ3JELElBQUs4QixVQUFXLE9BQU8sS0FDdkIsTUFBTXZCLE1BQVEsSUFBSXlCLE1BQU1GLFdBRXhCLE9BREt2QixNQUFNQyxRQUFPRCxNQUFNQyxNQUFReUIsVUFBVXpCLE1BQU1uSixPQUN6Q2tKLE9BRUosQ0FDTCxNQUFNeEQsTUFBUW5KLEtBQUtzTSxPQUFPcE0sSUFBSWtELEtBQzlCLE9BQU95SCxXQUFXeUQsY0FBY25GLFFBSXBDeEoscUJBQXNCd0osT0FDcEIsT0FBS0EsTUFFRUEsTUFBTXdELE9BQVMsQ0FBRWxKLEtBQU0wRixNQUFNMUYsS0FBS2tKLE9BRnRCLEtBK0JyQmhOLDBCQUEyQjhNLFVBQ3pCLElBQUtBLFNBQVUsT0FBTyxLQUN0QixHQUFJek0sS0FBS0ksU0FBU0YsSUFBSSxPQUFRLFlBQWEsQ0FFekMsTUFBTXlNLE1BQVE5QixXQUFXMkIsZ0JBQWdCQyxVQUN6QyxHQUFJRSxNQUFPLENBRVQsR0FBSUEsTUFBTWxKLEtBQUs4SyxNQUN3QixJQUFqQzVCLE1BQU1sSixLQUFLOEssSUFBSVosUUFBUSxLQUN6QixPQUFPaEIsTUFBTWxKLEtBQUs4SyxJQUl0QixHQUFJNUIsTUFBTWxKLEtBQUsrSyxRQUFRQyxNQUN3QixJQUF6QzlCLE1BQU1sSixLQUFLK0ssUUFBUUMsSUFBSWQsUUFBUSxLQUNqQyxPQUFPaEIsTUFBTWxKLEtBQUsrSyxRQUFRQyxLQUtsQyxNQUFNdEYsTUFBUTBCLFdBQVc2QixnQkFBZ0JELFVBQ3pDLEdBQUl6TSxLQUFLSSxTQUFTRixJQUFJLE9BQVEsYUFFeEJpSixNQUFNMUYsS0FBS2tKLE1BQU8sQ0FFcEIsR0FBSXhELE1BQU0xRixLQUFLa0osTUFBTTRCLE1BQ3dCLElBQXZDcEYsTUFBTTFGLEtBQUtrSixNQUFNNEIsSUFBSVosUUFBUSxLQUMvQixPQUFPeEUsTUFBTTFGLEtBQUtrSixNQUFNNEIsSUFJNUIsR0FBSXBGLE1BQU0xRixLQUFLa0osTUFBTTZCLFFBQVFDLE1BQ3lCLElBQWhEdEYsTUFBTTFGLEtBQUtrSixNQUFNNkIsUUFBUUMsS0FBS2QsUUFBUSxLQUN4QyxPQUFPeEUsTUFBTTFGLEtBQUtrSixNQUFNNkIsUUFBUUMsSUFLeEMsT0FBT3RGLE1BQU0xRixLQUFLOEssSUFHcEI1TyxtQkFBb0IrTyxXQUFZQyxVQUc5QixRQUM2QixJQUFwQkEsU0FBU0MsYUFDc0IsSUFBL0JELFNBQVNsTCxLQUFLVSxVQUFVMEgsSUFFM0I2QyxXQUFXOUIsT0FBT2YsR0FBYSxDQUNqQyxNQUFNZSxNQUFRNU0sS0FBS2lPLE9BQU8vTixJQUFJd08sV0FBVzlCLE1BQU1mLElBQy9DLFFBQTZCLElBQWxCZSxPQUFPTCxPQUF3QixDQUN4QyxNQUFNQSxPQUFTSyxPQUFPTCxPQUNuQjlLLFFBQU9rTCxPQUFTQSxNQUFNeEQsTUFBTTBDLEtBQU84QyxTQUFTbEwsS0FBS1UsU0FBUzBILEtBQzFEcEosS0FBSWtLLE9BQVNBLE1BQU1JLFNBQ0EsSUFBbEJSLE9BQU83SyxTQUNUaU4sU0FBV3BDLE9BQU8sS0FLMUIsSUFBSXNDLFNBQVcsQ0FDYkMsU0FBVSxFQUNWdkIsTUFBTyxFQUNQM00sS0FBTW1PLE9BQU9uQyxNQUFNbkosS0FBS3VMLFdBRTFCLFFBQ3dCLElBQWZOLGlCQUNzQixJQUF0QkEsV0FBV0UsYUFDRSxJQUFiRCxlQUNvQixJQUFwQkEsU0FBU0MsT0FDaEIsQ0FDQSxNQUFNSyxJQUFNLElBQUlDLElBQUlSLFdBQVdFLE9BQVFELFNBQVNDLFFBQzFDTyxRQUFVLENBQUMsQ0FBRUYsTUFTbkIsR0FSQUosU0FBVyxDQUNUQyxTQUFVRyxJQUFJSixTQUFXRSxPQUFPbkMsTUFBTW5KLEtBQUsyTCxLQUUzQzdCLE1BQU93QixPQUFPSyxLQUFLQyxpQkFBaUJGLFFBQVMsQ0FDM0NHLFdBQVl0UCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsZ0JBQ3JDLEdBQ0hVLEtBQU1tTyxPQUFPbkMsTUFBTW5KLEtBQUt1TCxXQUV0QmhQLEtBQUtJLFNBQVNGLElBQUksT0FBUSxxQkFBc0IsQ0FDbEQsTUFBTXFQLFVBQVkvTyxLQUFLQyxLQUNwQmlPLFdBQVdqTCxLQUFLOEwsV0FBYSxJQUFNWixTQUFTbEwsS0FBSzhMLFdBQWEsSUFFakVWLFNBQVN0QixNQUFRL00sS0FBS2dQLEtBQ3BCWCxTQUFTdEIsTUFBUXNCLFNBQVN0QixNQUFRZ0MsVUFBWUEsaUJBSWxERSxHQUFHQyxjQUFjQyxLQUNmM1AsS0FBSzRQLEtBQUtDLFNBQVMsMkNBR3ZCLE9BQU9oQixTQUdUbFAsZUFBZ0JrUCxVQUNkLE1BQ08sT0FEQ0EsU0FBU2pPLEtBRU5pTyxTQUFTdEIsTUFBUSxFQVNqQnNCLFNBQVN0QixPQUtqQixNQUFNdUMsU0FDWG5RLG1CQUFvQm9RLE1BQ2xCLE1BQU1DLFFBQVVELEtBQUtFLGNBQWMsaUJBQ25DLElBQUtELFFBQVMsT0FBTyxLQUVyQixNQUFNM1AsS0FBTyxJQUFJeVAsU0FHakIsT0FGQWpGLFdBQVdxRixxQkFBcUI3UCxLQUFNMlAsU0FFL0IzUCxLQUdMOFAsaUJBRUYsT0FEQUMsS0FBS0MsYUFBZTFOLFNBQVN5TixLQUFLQyxjQUMxQkQsS0FBS0MsY0FDWCxLQUFLQyxVQUFVRCxhQUFhRSxRQUMxQixPQUFPdlEsS0FBSzRQLEtBQUtZLE9BQU8sdUJBQzFCLEtBQUtGLFVBQVVELGFBQWFJLEtBQzFCLE9BQU96USxLQUFLNFAsS0FBS1ksT0FBTyxvQkFDMUIsS0FBS0YsVUFBVUQsYUFBYUssUUFDMUIsT0FBTzFRLEtBQUs0UCxLQUFLWSxPQUFPLHVCQUMxQixLQUFLRixVQUFVRCxhQUFhTSxTQUMxQixPQUFPM1EsS0FBSzRQLEtBQUtZLE9BQU8sd0JBQzFCLEtBQUtGLFVBQVVELGFBQWFPLE9BQzFCLE9BQU81USxLQUFLNFAsS0FBS1ksT0FBTyxlQUMxQixLQUFLRixVQUFVRCxhQUFhUSxRQUMxQixPQUFPN1EsS0FBSzRQLEtBQUtZLE9BQU8sZ0JBRTFCLFFBQ0UsT0FBTyxNQUlUckgsWUFDRixPQUFJaUgsS0FBSzNELFNBQWlCNUIsV0FBVzZCLGdCQUFnQjBELEtBQUszRCxVQUNuRCxLQUdMcUUsV0FDRixPQUFJVixLQUFLVyxRQUFVWCxLQUFLakgsTUFBY2lILEtBQUtqSCxNQUFNNkgsTUFBTTlRLElBQUlrUSxLQUFLVyxRQUN6RCxLQUdMRSxZQUNGLE9BQUliLEtBQUtjLFNBQVdkLEtBQUtqSCxNQUFjaUgsS0FBS2pILE1BQU02SCxNQUFNOVEsSUFBSWtRLEtBQUtjLFNBQzFELEtBR1RDLGVBQ0UsR0FBSW5SLEtBQUtDLFFBQVFDLElBQUksaUJBQWlCQyxPQUFRLENBQzVDLE1BQU1pUixZQUFjLEdBQ3BCLElBQUssTUFBTUMsYUFBYWpCLEtBQUtrQixNQUFNdlEsS0FDakNxUSxZQUFZOVAsS0FBeUIsTUFBcEIrUCxVQUFVOUQsTUFBZ0IsRUFBSThELFVBQVU5RCxNQUFRLElBRW5FNkQsWUFBWTlQLEtBQUs4TyxLQUFLa0IsTUFBTTFRLEtBQUsyTSxPQUVqQyxNQUFNZ0UsU0FBVyxDQUNmMU4sUUFBUyxHQUFHdU0sS0FBS2tCLE1BQU12USxLQUFLVyxrQkFDNUJaLFFBQVNzUSxZQUNUdFAsUUFBUyxLQUNUQyxPQUFPLEdBRVQvQixLQUFLa0MsT0FBT3NQLEtBQUtELFdBSXJCNVIsc0JBQXVCcU4sUUFBU0QsT0FBUyxNQUN2QyxJQUFLQyxRQUFTLE9BQ2QsTUFBTTNNLEtBQU8wTSxRQUFVLElBQUkrQyxTQUMzQmpGLFdBQVdxRixxQkFBcUI3UCxLQUFNMk0sU0FDdEMzTSxLQUFLaVIsTUFBUSxDQUNYdlEsS0FBTSxHQUNOSCxLQUFNLElBRVJpSyxXQUFXcUYscUJBQ1Q3UCxLQUFLaVIsTUFDTHRFLFFBQVFpRCxjQUFjLGlCQUV4QjVQLEtBQUtpUixNQUFNRyxTQUFpQyxJQUF0QnBSLEtBQUtxUixhQUMzQnJSLEtBQUtpUixNQUFNSyxNQUFRblIsS0FBS0MsSUFBSUosS0FBS3FSLGNBQ2pDclIsS0FBS2lSLE1BQU1NLFVBQ1R2UixLQUFLcVIsYUFBZSxFQUNoQjFSLEtBQUs0UCxLQUFLWSxPQUFPLDRCQUNqQnhRLEtBQUs0UCxLQUFLWSxPQUFPLDBCQUN2QixNQUFNcUIsUUFBVTdFLFFBQVFpRCxjQUFjLGFBQ3RDLEdBQUk0QixRQUNGLElBQUssTUFBTTdRLEtBQUs2USxRQUFRQyxpQkFBaUIsTUFBTyxDQUM5QyxNQUFNQyxJQUFNLENBQ1ZDLFVBQVUsRUFDVkMsT0FBTyxFQUNQQyxPQUFPLEVBQ1AzRSxPQUFRLEdBRVYxQyxXQUFXcUYscUJBQXFCNkIsSUFBSy9RLEdBQ3JDWCxLQUFLaVIsTUFBTXZRLEtBQUtPLEtBQUt5USxLQUd6QixNQUFNSSxRQUFVbkYsUUFBUWlELGNBQWMsYUFDbENqRCxRQUFRaUQsY0FBYyxhQUFhQSxjQUFjLE1BQ2pELEtBQ0o1UCxLQUFLaVIsTUFBTTFRLEtBQUsyTSxNQUFRNEUsUUFBVXhQLFNBQVN3UCxRQUFReE8sUUFBUTRKLE9BQVMsS0FFcEVsTixLQUFLK1IsZ0JBQWtCLEdBQ3ZCLE1BQU1BLGdCQUFrQnBGLFFBQVFpRCxjQUFjLHFCQUM5QyxHQUFJbUMsaUJBQW1CQSxnQkFBZ0JOLGlCQUFpQixVQUN0RCxJQUFLLE1BQU1PLE9BQU9ELGdCQUFnQk4saUJBQWlCLFVBQVcsQ0FDNUQsTUFBTVEsZUFBaUIsR0FDdkJ6SCxXQUFXcUYscUJBQXFCb0MsZUFBZ0JELEtBQ2hEaFMsS0FBSytSLGdCQUFnQjlRLEtBQUtnUixnQkFTOUIsT0FMSWpTLEtBQUtrUyxhQUNQbFMsS0FBS21TLGNBQWdCeFMsS0FBSzRQLEtBQUtZLE9BQU8saUJBQWtCLENBQ3REaUMsZ0JBQWlCcFMsS0FBS2tTLGNBR3JCeEYsWUFBTCxFQUFvQjFNLEtBR3RCVixvQkFBcUIrUyxPQUNuQixNQUFNclMsS0FBTyxJQUFJeVAsU0E2QmpCLE9BM0JBelAsS0FBS3NTLFNBQVdELE1BQU1DLFNBQ3RCdFMsS0FBS3VTLEtBQU9GLE1BQU1FLEtBQ2xCdlMsS0FBS3dTLE9BQVNILE1BQU1HLE9BQ3BCeFMsS0FBS3lTLGFBQWVKLE1BQU1JLGFBQzFCelMsS0FBSzBTLG1CQUFxQkwsTUFBTUssbUJBRWhDMVMsS0FBS2dRLGFBQWVxQyxNQUFNckMsYUFDMUJoUSxLQUFLMlMsV0FBYU4sTUFBTU0sV0FDeEIzUyxLQUFLNlEsUUFBVXdCLE1BQU16QixNQUFReUIsTUFBTXpCLE1BQU1wRixHQUFLLEtBQzlDeEwsS0FBSzBRLE9BQVMyQixNQUFNNUIsS0FBTzRCLE1BQU01QixLQUFLakYsR0FBSyxLQUMzQ3hMLEtBQUs0UyxRQUFVUCxNQUFNaEIsYUFDckJyUixLQUFLa04sTUFBUTVLLFNBQVMrUCxNQUFNUSxVQUM1QjdTLEtBQUt1USxPQUFTOEIsTUFBTVMsU0FDcEI5UyxLQUFLc1EsU0FBVytCLE1BQU1VLFdBQ3RCL1MsS0FBS2dULGVBQWlCWCxNQUFNVyxlQUFpQlgsTUFBTVcsZUFBaUIsS0FDcEVoVCxLQUFLTSxPQUFTK1IsTUFBTXpSLEtBQUtKLE1BRXpCUixLQUFLb00sU0FBV2lHLE1BQU12SixNQUFNbUssU0FFeEJaLE1BQU12SixNQUFNb0ssU0FDZGxULEtBQUsrTCxRQUFVc0csTUFBTXZKLE1BQU1tSyxTQUMzQmpULEtBQUttVCxRQUFVLE9BRWZuVCxLQUFLaVQsU0FBVyxLQUNoQmpULEtBQUttVCxRQUFVZCxNQUFNdkosTUFBTW1LLFVBR3RCalQsS0FHVFYsNEJBQTZCOFQsWUFBYWYsT0FDeEMsTUFBTXJTLEtBQU95UCxTQUFTNEQsYUFBYWhCLE9BR25DLE9BRkFyUyxLQUFLc1QsZ0JBQWdCRixhQUVkcFQsS0FHVHNULGdCQUFpQkYsYUFDZjVJLFdBQVd1QyxzQkFBc0JnRCxLQUFNcUQsY0FJcEMsTUFBTUcsV0FDWGpVLGtCQUFtQmtVLGNBQ2pCLE9BQUlBLGFBQWEzSCxjQUFjM0ssU0FBUyxPQUFlLE1BQ25Ec1MsYUFBYTNILGNBQWMzSyxTQUFTLE9BQWUsTUFDbkRzUyxhQUFhM0gsY0FBYzNLLFNBQVMsT0FBZSxNQUNuRHNTLGFBQWEzSCxjQUFjM0ssU0FBUyxNQUFjLEtBQ2xEc1MsYUFBYTNILGNBQWMzSyxTQUFTLE1BQWMsS0FDL0MsS0FHVDVCLHNCQUF1QnFOLFFBQVNELE9BQVMsTUFDdkMsSUFBS0MsUUFBUyxPQUNkLE1BQU04RyxPQUFTL0csUUFBVSxHQUN6QmxDLFdBQVdxRixxQkFBcUI0RCxPQUFROUcsU0FDeEMsTUFBTStHLE1BQVEvRyxRQUFRaUQsY0FBYyxlQUFlNkIsaUJBQWlCLE1BQ3BFZ0MsT0FBT0MsTUFBUSxHQUNmLElBQUssTUFBTUMsS0FBS0QsTUFBTyxDQUNyQixNQUFNMVQsS0FBTyxHQUNid0ssV0FBV3FGLHFCQUFxQjdQLEtBQU0yVCxHQUN0Q0YsT0FBT0MsTUFBTXpTLEtBQUtqQixNQUdwQixPQUFLME0sWUFBTCxFQUFvQitHLFFDcmhCakIsTUFBTUcsY0FDWEMsWUFBYXpILFNBQVcsS0FBTTBILGFBQWMsR0FDMUMvRCxLQUFLM0QsU0FBV0EsU0FDaEIyRCxLQUFLK0QsWUFBY0EsWUFHakJDLHlCQUNGLE9BQU9wVSxLQUFLSSxTQUFTRixJQUFJLE9BQVEsc0JBRy9CbVUsY0FDRixPQUFLakUsS0FBS3ZRLGVBQ055VSxJQUFjbEUsS0FBS21FLFdBQ3JCbkUsS0FBS21FLFNBQTZCLGNBQWxCbkUsS0FBS3ZRLFVBRWhCdVEsS0FBS21FLFVBSmUsS0FPekJGLFlBQVNHLEdBQ1hwRSxLQUFLbUUsU0FBV0MsRUFHZDNVLGVBRUYsT0FES3VRLEtBQUtxRSxZQUFXckUsS0FBS3FFLFVBQVl6VSxLQUFLSSxTQUFTRixJQUFJLE9BQVEsYUFDekRrUSxLQUFLcUUsVUFHVjVVLGFBQVUyVSxHQUNacEUsS0FBS3FFLFVBQVlELEVBR2ZyTCxZQUNGLE9BQUtpSCxLQUFLM0QsU0FDSDVCLFdBQVc2QixnQkFBZ0IwRCxLQUFLM0QsVUFEWixLQUl6QkUsWUFDRixPQUFLeUQsS0FBS2pILE1BQ0gwQixXQUFXMkIsZ0JBQWdCNEQsS0FBSzNELFVBRGYsS0FJdEJxRSxXQUNGLE9BQUtWLEtBQUtXLE9BQ0hYLEtBQUtqSCxNQUFNNkgsTUFBTTlRLElBQUlrUSxLQUFLVyxRQURSLEtBSXZCMkQsYUFDRixPQUFPdEUsS0FBS1UsS0FHVjZELHFCQUNGLE1BQU8sSUFBSTNVLEtBQUtvQyxLQUFLd1MsU0FHbkJDLGFBQ0YsT0FBSXpFLEtBQUswRSxZQUFvQjFFLEtBQUswRSxZQUMzQjFFLEtBQUsyRSxZQU9WRCxrQkFjRixPQWJLMUUsS0FBSzRFLGVBQ0o1RSxLQUFLNkUsV0FDUDdFLEtBQUs0RSxhQUFlbkssV0FBVzJCLGdCQUFnQjRELEtBQUs2RSxhQUVwRDdFLEtBQUs0RSxhQUFlNUUsS0FBS3VFLGVBQWVPLE1BQ3BDOUUsS0FBSzRFLGFBQ1A1RSxLQUFLNkUsV0FBYSxHQUFHN0UsS0FBSzRFLGFBQWFwSSxNQUFNZixNQUFNdUUsS0FBSzRFLGFBQWFuSixLQUdyRXVFLEtBQUs0RSxhQUFlLE9BSW5CNUUsS0FBSzRFLGFBR1ZELGtCQUtGLE9BSkszRSxLQUFLK0UsZUFDSi9FLEtBQUswRSxZQUFhMUUsS0FBSytFLGFBQWUvRSxLQUFLMEUsWUFBWTNMLE1BQ3REaUgsS0FBSytFLGFBQWV0SyxXQUFXNkIsZ0JBQWdCMEQsS0FBSzZFLGFBRXBEN0UsS0FBSytFLGFBR1ZDLGdCQUNGLE9BQUtoRixLQUFLMEUsYUFBZ0IxRSxLQUFLMkUsWUFDeEIzRSxLQUFLNkUsV0FEdUMsS0FJakRJLGdCQUNGLFNBQUtqRixLQUFLMEUsY0FBZ0IxRSxLQUFLMkUsYUFJN0JLLGNBQVdaLEdBQ2JwRSxLQUFLNkUsV0FBYVQsRUFHaEJjLGFBQ0YsT0FBT2xGLEtBQUtqSCxNQUFNb00sZ0JBQWdCbkYsS0FBS1csUUFHckN5RSxnQkFDRixNQUFNakgsSUFBTTFELFdBQVc0SyxtQkFBbUJyRixLQUFLZ0YsV0FDL0MsT0FBSTdHLEtBQ0cscUNBR0wxQixXQUNGLE9BQUl1RCxLQUFLekQsTUFBY3lELEtBQUt6RCxNQUFNRSxLQUMzQnVELEtBQUtqSCxNQUFNMEQsS0FHaEI2SSxpQkFDRixPQUFLdEYsS0FBS3lFLE9BQ0h6RSxLQUFLeUUsT0FBT2hJLEtBRE0sUUFJdkI4SSxlQUNGLE1BQU1wSCxJQUFNMUQsV0FBVzRLLG1CQUFtQnJGLEtBQUszRCxVQUMvQyxPQUFJOEIsS0FDRyxxQ0FHVDdOLFVBQVd1SyxRQUFTRSxPQUFTLE1BQzNCLE1BQU15SyxZQUFjLEdBQ3BCLElBQUl4SyxRQUNBZ0YsS0FBS2pILE9BQ1B5TSxZQUFZek0sTUFBUWlILEtBQUtqSCxNQUNyQmlILEtBQUt6RCxRQUNQaUosWUFBWWpKLE1BQVF5RCxLQUFLekQsTUFBTXhJLFVBRWpDaUgsUUFBVXBKLFlBQVlxSixXQUFXdUssY0FFakN4SyxRQUFVcEosWUFBWXFKLGFBR3hCLE1BRU14SixTQUFXLENBQ2ZPLE1BSFdnTyxLQUFLakgsTUFBTS9HLEtBQU9nTyxLQUFLakgsTUFBTS9HLEtBQU9wQyxLQUFLb0MsTUFHekN5SixHQUNYVCxRQUNBRCxPQUNBVyxRQUFTYixTQUlULENBQUMsU0FBVSxhQUFhMUosU0FBU3ZCLEtBQUtJLFNBQVNGLElBQUksT0FBUSxlQUUzRDJCLFNBQVNDLFFBQVVFLFlBQVk2VCxxQkFBcUIsT0FFaEMsY0FBbEJ6RixLQUFLdlEsV0FBMEJnQyxTQUFTRSxPQUFRLEdBRXBEQyxZQUFZK0osT0FBT2xLLFVBQVVtSyxNQUFLQyxLQUN6QkEsT0MzSmIsU0FBUzZKLFNBQVUxUyxJQUFLbUssT0FDdEIsR0FBSW5LLElBQUkrSixXQUFXLE1BQ2pCLE9BSUYsR0FEZ0IsQ0FBQyxVQUNMNUwsU0FBUzZCLEtBQ25CLE9BSUYsTUFEZSxDQUFDLFdBQVksWUFDakI3QixTQUFTNkIsS0FDWG1LLE1BQU13SSxhQUdSeEksTUFHRixNQUFNeUkscUJBQXFCL0IsY0FDaENDLFlBQWF6SCxTQUFXLEtBQU13SixRQUFVLEdBQUk1VCxRQUFVLElBQ3BENlQsTUFDRXpKLGNBQytCLElBQXhCcEssUUFBUThSLGFBQ1hnQyxRQUFROVQsUUFBUThSLGNBR3RCOEIsUUFBUUcsVUFBWUgsUUFBUUcsV0FBYSxHQUN6Q2hHLEtBQUs2RixRQUFVQSxRQUNmN0YsS0FBSy9OLFFBQVVBLFFBQ1g0VCxRQUFRNVMsV0FBYWdULE1BQU12SSxPQUFPbUksUUFBUTVTLGFBQzVDK00sS0FBSy9OLFFBQVFpVSxZQUFjeEksT0FBT21JLFFBQVE1UyxXQUV4QzRTLFFBQVFqRCxhQUFlcUQsTUFBTXZJLE9BQU9tSSxRQUFRakQsZUFDOUM1QyxLQUFLL04sUUFBUWtVLGNBQWdCekksT0FBT21JLFFBQVFqRCxhQUU5QzVDLEtBQUtvRyxNQUFRLEdBR1huQyxjQUNGLFlBQXVDLElBQXpCakUsS0FBSy9OLFFBQVFnUyxRQUN2QjhCLFFBQVEvRixLQUFLL04sUUFBUWdTLFNBQ3JCNkIsTUFBTTdCLFFBR1JyQixpQkFDRixZQUEwQyxJQUE1QjVDLEtBQUsvTixRQUFRMlEsV0FDdkI1QyxLQUFLL04sUUFBUTJRLFdBQ2IxQyxVQUFVbUcsZ0JBQWdCbEcsUUFHNUJsTixlQUNGLFlBQXdDLElBQTFCK00sS0FBSy9OLFFBQVFnQixTQUN2QitNLEtBQUsvTixRQUFRZ0IsU0FDYixFQUdGcVQsb0JBQ0YsT0FBS3RHLEtBQUs2RixRQUFRM0MsU0FDWHpJLFdBQVc2QixnQkFBZ0IwRCxLQUFLNkYsUUFBUTNDLFVBRFosS0FJakNxRCx3QkFDRixTQUNFdkcsS0FBS29HLE1BQU1JLFlBQ1Z4RyxLQUFLeUcsU0FBU0MsWUFBYTFHLEtBQUt5RyxTQUFTMUQsVUFPMUM0RCxxQkFDRixPQUFJM0csS0FBS29HLE1BQU1JLFVBQ1R4RyxLQUFLNkYsUUFBUWUsUUFBVTVHLEtBQUt5RyxTQUFTSSxPQUMvQlosTUFBTXZJLE9BQU9zQyxLQUFLNkYsUUFBUWUsU0FFOUI1RyxLQUFLNkYsUUFBUWUsT0FEYmxKLE9BQU9zQyxLQUFLNkYsUUFBUWUsUUFHdEI1RyxLQUFLNkYsUUFBUWlCLFFBQVU5RyxLQUFLeUcsU0FBU00sT0FDL0JkLE1BQU12SSxPQUFPc0MsS0FBSzZGLFFBQVFpQixTQUU5QjlHLEtBQUs2RixRQUFRaUIsT0FEYnBKLE9BQU9zQyxLQUFLNkYsUUFBUWlCLFFBR25CLEVBRUYsS0FHTEUsc0JBQ0YsT0FBT2hILEtBQUtqSCxNQUFNaU8sZ0JBQWdCaEgsS0FBSzZGLFFBQVFHLFdBRzdDaUIseUJBQ0YsT0FBT2pILEtBQUtqSCxNQUFNbU8sbUJBQ2hCbEgsS0FBSzZGLFFBQVFHLFVBQ2JoRyxLQUFLNkYsUUFBUWUsUUFJYk8saUJBQ0YsT0FBTyxJQUFJalgsS0FBSzhQLEtBQUs2RixRQUFRZSxPQUFPakosWUFBWXlKLFNBQVMsQ0FDdkRDLFVBQVUsSUFDVDVXLE1BR0Q2VywrQkFDRixPQUFPdEgsS0FBS2pILE1BQU11Tyx5QkFBeUJ0SCxLQUFLNkYsUUFBUUcsV0FHdER1QixxQkFDRixPQUFRdkgsS0FBS2pILE1BQU15TywwQkFHakJDLHdCQUVGLE9BQUl6SCxLQUFLakgsTUFBTTJPLGlCQUthLElBQXhCMUgsS0FBSzJHLGtCQUdQM0csS0FBSzZGLFFBQVFHLFdBSVAsSUFITmhHLEtBQUtqSCxNQUFNbU8sbUJBQ1RsSCxLQUFLNkYsUUFBUUcsVUFDYmhHLEtBQUs2RixRQUFRZSxVQUdmNUcsS0FBS29HLE1BQU11QixrQkFBbUIsR0FDdkIsS0FNUEMsdUJBQ0YsR0FBSTVILEtBQUs2SCxhQUFjLENBQ3JCLEdBQUk3SCxLQUFLOEgsYUFBYyxNQUFPLEdBQUc5SCxLQUFLNkgsc0JBQ3RDLEdBQUk3SCxLQUFLK0gsWUFBYSxNQUFPLEdBQUcvSCxLQUFLNkgscUJBRXZDLE9BQU8sS0FHTEcsaUNBQ0YsT0FBSWhJLEtBQUtpSSxXQUNBclksS0FBSzRQLEtBQUtZLE9BQU8sOEJBQStCLENBQ3JEakQsTUFBTzZDLEtBQUtpSSxhQUdULEtBR1QzWCxtQkFBb0I4VixPQUNsQixPQUFRQSxPQUNOLElBQUssc0JBQ0hwRyxLQUFLb0csTUFBTThCLHFCQUFzQixFQUNqQyxNQUVGLElBQUssNkJBQ0hsSSxLQUFLb0csTUFBTUEsUUFBUyxFQUNmcEcsS0FBS3lILG9CQUFtQnpILEtBQUtvRyxNQUFNK0IsUUFBUyxHQUNqRCxNQUVGLElBQUssdUJBQ0duSSxLQUFLb0ksZUFDWCxNQUVGLElBQUssNkJBQ0hwSSxLQUFLNkgsb0JBQXNCLElBQUkzWCxLQUFLLFFBQVFELEtBQUssQ0FBRUssT0FBTyxLQUFTRyxNQUNuRXVQLEtBQUs4SCxjQUFlLEVBQ3BCOUgsS0FBSytILGFBQWMsRUFDbkIvSCxLQUFLcUksaUJBQW1CckksS0FBS2pILE1BQU11UCxvQkFDakMsRUFDQXRJLEtBQUs2SCxjQUVQN0gsS0FBS29HLE1BQU1tQyx1QkFBd0IsRUFDbkN2SSxLQUFLb0csTUFBTW9DLG1CQUFvQixFQUMvQixNQUVGLElBQUssNEJBQ0h4SSxLQUFLNkgsb0JBQXNCLElBQUkzWCxLQUFLLFFBQVFELEtBQUssQ0FBRUssT0FBTyxLQUFTRyxNQUNuRXVQLEtBQUs4SCxjQUFlLEVBQ3BCOUgsS0FBSytILGFBQWMsRUFDbkIvSCxLQUFLcUksaUJBQW1CckksS0FBS2pILE1BQU11UCxvQkFDakMsRUFDQXRJLEtBQUs2SCxjQUVQN0gsS0FBS29HLE1BQU1tQyx1QkFBd0IsUUFDN0J2SSxLQUFLeUksa0JBQ1gsTUFFRixJQUFLLDBCQUNHekksS0FBS2pILE1BQU0yUCxlQUFldlYsS0FBSzhGLE9BQU9DLG1CQUN0QzhHLEtBQUt5SSxrQkFDWCxNQUVGLElBQUssaUJBQ0h6SSxLQUFLb0csTUFBTXVDLHNCQUF1QixFQUNsQzNJLEtBQUtpSSxXQUFhLEVBQ2xCLE1BRUYsSUFBSyx1QkFBd0IsQ0FDM0IsSUFBSVcsYUFBZSxFQUNkNUksS0FBS2pILE1BQU15Tyw0QkFDZG9CLGFBQWUsUUFDVDVJLEtBQUtqSCxNQUFNOFAsaUNBRW5CN0ksS0FBS29HLE1BQU11QyxzQkFBdUIsRUFDbEMsTUFBTUcsbUJBQXFCOUksS0FBS2pILE1BQU0rUCxtQkFDaENDLFNBQ0pELG1CQUFtQnpWLEtBQUtBLEtBQUsyVixZQUFZQyxZQUFjLEVBQ3JESCwwQkFDSUEsbUJBQW1CSSxPQUFPLENBQzlCLDhCQUErQkgsU0FBV0gsZUFHOUM1SSxLQUFLaUksV0FBYVcsYUFDbEIsUUFLTnRZLHNCQUNFMFAsS0FBS21KLFlBQWEsRUFDbEJuSixLQUFLeUcsU0FBVyxJQUFJdkcsVUFDcEJGLEtBQUt5RyxTQUFTMU4sTUFBUWlILEtBQUszRCxTQUMzQjJELEtBQUt5RyxTQUFTMkMsVUFBWSxNQUMxQnBKLEtBQUt5RyxTQUFTN0QsV0FDWjVDLEtBQUsvTixRQUFRa1UsZUFBaUJqRyxVQUFVbUcsZ0JBQWdCbEcsUUFDMURILEtBQUt5RyxTQUFTbkYsYUFBZXRCLEtBQUsvTixRQUFRaVUsYUFBZSxRQUNuRGxHLEtBQUt5RyxTQUFTNEMsU0FBUyxDQUFFQyxVQUFVLElBQ3pDdEosS0FBS29HLE1BQU1JLFdBQVksRUFDdkJ4RyxLQUFLb0csTUFBTW1ELDJCQUE2QnZKLEtBQUt5RyxTQUFTTSxPQUN0RC9HLEtBQUtvRyxNQUFNb0QsZUFBZ0IsRUFDM0J4SixLQUFLb0csTUFBTXFELGdCQUFpQixFQUM1QnpKLEtBQUswSixRQUFVMUosS0FBSzJHLGVBR3RCclcsZ0JBVUUsR0FUQTBQLEtBQUt5RyxTQUFXLElBQUl2RyxVQUNwQkYsS0FBS3lHLFNBQVMxTixNQUFRaUgsS0FBSzNELFNBQzNCMkQsS0FBS3lHLFNBQVMyQyxVQUFZLE1BQzFCcEosS0FBS3lHLFNBQVM3RCxXQUNaNUMsS0FBSy9OLFFBQVFrVSxlQUFpQmpHLFVBQVVtRyxnQkFBZ0JsRyxRQUMxREgsS0FBS3lHLFNBQVNuRixhQUFldEIsS0FBSy9OLFFBQVFpVSxhQUFlLFFBQ25EbEcsS0FBS3lHLFNBQVM0QyxTQUFTLENBQUVDLFVBQVUsSUFDekN0SixLQUFLb0csTUFBTUksV0FBWSxFQUN2QnhHLEtBQUtvRyxNQUFNbUQsMkJBQTZCdkosS0FBS3lHLFNBQVNNLE9BQ2pEL0csS0FBS3lILG1CQVdILEdBQW1DLGlCQUF4QnpILEtBQUsyRyxlQUNyQjNHLEtBQUtvRyxNQUFNb0QsZUFBZ0IsRUFDdkJ4SixLQUFLNkYsUUFBUUcsV0FDZmhHLEtBQUswSixRQUFVMUosS0FBS2pILE1BQU1tTyxtQkFDeEJsSCxLQUFLNkYsUUFBUUcsVUFDYmhHLEtBQUsyRyxnQkFFSDNHLEtBQUswSixRQUFVMUosS0FBSzJHLGlCQUN0QjNHLEtBQUtvRyxNQUFNdUQsdUJBQXdCLElBR3JDM0osS0FBSzBKLFFBQVUxSixLQUFLMkcsb0JBRWpCLEdBQUkzRyxLQUFLeUcsU0FBUzFELFNBQ3ZCL0MsS0FBS29HLE1BQU1vRCxlQUFnQixFQUMzQnhKLEtBQUswSixRQUFVMUosS0FBS2pILE1BQU1tTyxtQkFDeEJsSCxLQUFLNkYsUUFBUUcsVUFDYmhHLEtBQUs2RixRQUFRZSxhQUVWLEdBQUk1RyxLQUFLNkYsUUFBUUcsVUFBVyxDQUNqQyxNQUFNelUsSUFBTSxJQUFJckIsS0FBSzhQLEtBQUsyRyxnQkFBZ0JTLFNBQVMsQ0FDakR3QyxVQUFVLElBQ1RuWixNQUNHVyxJQUFNNE8sS0FBS2pILE1BQU1tTyxtQkFDckJsSCxLQUFLNkYsUUFBUUcsVUFDYmhHLEtBQUs2RixRQUFRZSxRQUVYclYsS0FBT0gsTUFDVDRPLEtBQUtvRyxNQUFNb0QsZUFBZ0IsRUFDM0J4SixLQUFLMEosUUFBVXRZLElBQ2Y0TyxLQUFLb0csTUFBTXVELHVCQUF3QixTQXhDckMzSixLQUFLb0csTUFBTStCLFFBQVMsRUFDaEJuSSxLQUFLakgsTUFBTTJPLGlCQUNiMUgsS0FBS29HLE1BQU15RCxxQkFBc0IsRUFDNUI3SixLQUFLeUcsU0FBU00sU0FBUS9HLEtBQUtvRyxNQUFNK0IsUUFBUyxJQUVqRG5JLEtBQUtvRyxNQUFNb0QsZUFBZ0IsRUFDM0J4SixLQUFLb0csTUFBTTBELGdCQUFpQixFQUM1QjlKLEtBQUtvRyxNQUFNMkQsV0FBWSxFQUN2Qi9KLEtBQUtvRyxNQUFNNEQsVUFBVyxFQUN0QmhLLEtBQUswSixRQUFVLEVBb0NuQnBaLG9CQUNFMFAsS0FBS2lLLFlBQWMsSUFBSS9aLEtBQUssR0FBRzhQLEtBQUsyRyx3QkFFOUIzRyxLQUFLaUssWUFBWWhhLEtBQUssQ0FBRUssT0FBTyxVQUUvQmhCLFNBQVM0YSxlQUFlbEssS0FBS2lLLGFBRW5DLE1BQU03WSxJQUFNNE8sS0FBS2pILE1BQU1tTyxtQkFDckJsSCxLQUFLNkYsUUFBUUcsVUFDYmhHLEtBQUs2RixRQUFRZSxRQUdYNUcsS0FBS2lLLFlBQVl4WixNQUFRVyxNQUMzQjRPLEtBQUtvRyxNQUFNdUQsdUJBQXdCLEdBR3JDM0osS0FBSzBKLFFBQVV0WixLQUFLbUIsSUFBSXlPLEtBQUtpSyxZQUFZeFosTUFBT1csS0FDaEQ0TyxLQUFLb0csTUFBTW9ELGVBQWdCLEVBRzdCbFoscUJBS0UsU0FKTTBQLEtBQUtqSCxNQUFNb1IsU0FBU25LLEtBQUs2RixRQUFRRyxVQUFXaEcsS0FBSzBKLFNBRW5EMUosS0FBSzBKLFFBQVUsSUFBRzFKLEtBQUtvRyxNQUFNZ0UsY0FBZSxHQUNoRHBLLEtBQUtvRyxNQUFNMEQsZ0JBQWlCLEVBQ3hCOUosS0FBS2pILE1BQU1zUixLQUFPLEVBUXBCLE9BUEFySyxLQUFLb0csTUFBTTJELFdBQVksRUFDdkIvSixLQUFLb0csTUFBTW9DLG1CQUFvQixFQUUvQnhJLEtBQUtvRyxNQUFNNEQsVUFBVyxFQUN0QmhLLEtBQUtvRyxNQUFNa0UsbUJBQW9CLE9BRS9CdEssS0FBS29HLE1BQU0rQixRQUFTLEdBSWxCbkksS0FBSzBKLFFBQVUsR0FDakIxSixLQUFLb0csTUFBTTJELFdBQVksRUFDbkIvSixLQUFLakgsTUFBTXdSLGdCQUNidkssS0FBS29HLE1BQU00RCxVQUFXLEVBQ3RCaEssS0FBS29HLE1BQU1vRSxRQUFTLEVBQ3BCeEssS0FBS29HLE1BQU1xRSxxQkFBc0IsRUFDakN6SyxLQUFLb0csTUFBTStCLFFBQVMsRUFDcEJuSSxLQUFLb0csTUFBTTJELFdBQVksSUFFdkIvSixLQUFLb0csTUFBTTRELFVBQVcsRUFDdEJoSyxLQUFLb0csTUFBTW9FLFFBQVMsRUFDcEJ4SyxLQUFLb0csTUFBTXFFLHFCQUFzQixFQUNqQ3pLLEtBQUtvRyxNQUFNK0IsUUFBUyxJQUd0Qm5JLEtBQUtvRyxNQUFNMkQsV0FBWSxFQUd6QixJQUFJVyxlQUFpQjFLLEtBQUtqSCxNQUFNMUYsS0FBS0EsS0FBS3NYLFFBQVFOLElBQUlLLGVBQ3REQSxlQUFpQm5ZLFNBQVNtWSxlQUFlL1AsUUFBUSxNQUFPLEtBQ3BEcUYsS0FBS2pILE1BQU02UixjQUFnQkYsaUJBRTdCMUssS0FBS29HLE1BQU00RCxVQUFXLEVBQ3RCaEssS0FBS29HLE1BQU0yRCxXQUFZLEVBQ3ZCL0osS0FBS29HLE1BQU15RSxpQkFBa0IsRUFDN0I3SyxLQUFLb0csTUFBTTBFLG9CQUFxQixFQUNoQzlLLEtBQUtvRyxNQUFNcUUscUJBQXNCLEVBQ2pDekssS0FBS29HLE1BQU0yRSxpQkFBa0IsRUFDN0IvSyxLQUFLb0csTUFBTStCLFFBQVMsR0FJeEI3WCxnQkFDRTBQLEtBQUtnTCxTQUFXLElBQUk5SyxVQUNwQkYsS0FBS2dMLFNBQVNqUyxNQUFRaUgsS0FBSzNELFNBQzNCMkQsS0FBS2dMLFNBQVMvSCxlQUFpQixNQUMvQmpELEtBQUtnTCxTQUFTcEksV0FDWjVDLEtBQUsvTixRQUFRZ1osZUFBaUIvSyxVQUFVbUcsZ0JBQWdCbEcsUUFDMURILEtBQUtnTCxTQUFTMUosYUFBZXRCLEtBQUsvTixRQUFRaVosYUFBZSxRQUNuRGxMLEtBQUtnTCxTQUFTM0IsU0FBUyxDQUFFQyxVQUFVLElBQ3pDdEosS0FBS29HLE1BQU0yRCxXQUFZLEVBQ25CL0osS0FBS2dMLFNBQVNqRSxRQUFVL0csS0FBS29HLE1BQU0rRSxlQUNyQ25MLEtBQUtvRyxNQUFNNEQsVUFBVyxFQUN0QmhLLEtBQUtvRyxNQUFNeUUsaUJBQWtCLEVBQzdCN0ssS0FBS29HLE1BQU0wRSxvQkFBcUIsRUFDaEM5SyxLQUFLb0csTUFBTTJFLGlCQUFrQixJQUU3Qi9LLEtBQUtvRyxNQUFNNEQsVUFBVyxFQUN0QmhLLEtBQUtvRyxNQUFNeUUsaUJBQWtCLEVBQzdCN0ssS0FBS29HLE1BQU0wRSxvQkFBcUIsRUFDaEM5SyxLQUFLb0csTUFBTTJFLGlCQUFrQixFQUM3Qi9LLEtBQUtvRyxNQUFNK0IsUUFBUyxHQUl4QjdYLHdCQUNFMFAsS0FBS29HLE1BQU1vQyxtQkFBb0IsRUFDM0J4SSxLQUFLb0csTUFBTTBFLDBCQUNQOUssS0FBS2pILE1BQU1xUyxhQUFhalksS0FBSzhGLE9BQU9FLGFBRTVDNkcsS0FBS29HLE1BQU0rQixRQUFTLEVBR3RCN1gsaUNBQ1EwUCxLQUFLakgsTUFBTXNTLGlCQUFpQnJMLEtBQUs2RixRQUFRRyxVQUFXLEdBQ3JEaEcsS0FBS3NILDJCQUNSdEgsS0FBS29HLE1BQU04QixxQkFBc0IsR0FJckM1WCx1QkFNRSxHQUpJMFAsS0FBS29HLE1BQU1JLFlBQ2J4RyxLQUFLc0wsaUJBQW1CdEwsS0FBS3lHLFNBQVM4RSxZQUFZQyxXQUdoRHhMLEtBQUtpSyxZQUFhLENBQ3BCLE1BQU1uVyxFQUFJVixpQkFBaUI0TSxLQUFLaUssYUFDaENqSyxLQUFLeUwsb0JBQXNCM1gsRUFBRTBYLFVBRzNCeEwsS0FBS29HLE1BQU0yRCxXQUFhL0osS0FBS2dMLFdBQy9CaEwsS0FBSzBMLGlCQUFtQjFMLEtBQUtnTCxTQUFTTyxZQUFZQyxXQUdwRCxNQUFNRyxXQUFhQyxlQUFlaEcsYUFBYWlHLFNBQVU3TCxNQUNuRDhMLGdCQUFrQkMsRUFBRUMsVUFBVUwsTUFBTSxHQUcxQ0csZ0JBQWdCdlksUUFBUW9KLE9BQVNqSixPQUFPQyxLQUFLQyxVQUFVb00sS0FBTTBGLFdBRzdELE1BQU11RyxZQUFjcmMsS0FBS3NjLFNBQVNwYyxJQUFJa1EsS0FBS21NLFdBRXJDdFEsVUFBWW9RLFlBQVkvQyxPQUFPLENBQ25DeE4sUUFBU29RLGdCQUFnQk4sWUFHM0IsYUFETW5NLEdBQUcrTSxLQUFLQyxjQUFjeFEsS0FBSyxHQUMxQkEsSUFHRWdRLHNCQUNULE1BQU8sbURBR1R0YyxvQkFBcUJzVyxRQUFTOUIsYUFBYyxHQUMxQyxNQUFNUyxRQUFVLElBQUk1VSxLQUFLb0MsS0FBS3dTLFNBQzlCLEdBQUlBLFFBQVFsVCxPQUNWLElBQUssTUFBTUwsS0FBS3VULFFBQ1Z2VCxFQUFFOEgsTUFBTW9LLFFBQ1Z5QyxhQUFhakssT0FBTzFLLEVBQUU4SCxNQUFNbUssU0FBVTJDLFFBQVMsQ0FDN0M5QixjQUdGNkIsYUFBYWpLLE9BQU8xSyxFQUFFOEgsTUFBTTBDLEdBQUlvSyxRQUFTLENBQUU5QixtQkFJL0MxRSxHQUFHQyxjQUFjQyxLQUFLM1AsS0FBSzRQLEtBQUtDLFNBQVMsK0JBSTdDbFEsdUJBQXdCK2MsTUFDdEIsTUFBTUMsU0FBVyxJQUFJM0csZ0JBQWdCMEcsTUFDakNDLFNBQVN4VCxNQUFNd1IsaUJBQ2pCZ0MsU0FBU25HLE1BQU0rRSxlQUFnQixHQUc3Qm9CLFNBQVN4VCxNQUFNc1IsS0FBTyxJQUN4QmtDLFNBQVNuRyxNQUFNMkQsV0FBWSxFQUMzQndDLFNBQVNuRyxNQUFNb0MsbUJBQW9CLEVBRW5DK0QsU0FBU25HLE1BQU00RCxVQUFXLEVBQzFCdUMsU0FBU25HLE1BQU1rRSxtQkFBb0IsRUFFbkNpQyxTQUFTbkcsTUFBTStCLFFBQVMsR0FHMUIsTUFBTXdELFdBQWFDLGVBQWVoRyxhQUFhaUcsU0FBVVUsVUFDbkRULGdCQUFrQkMsRUFBRUMsVUFBVUwsTUFBTSxHQUUxQ0csZ0JBQWdCdlksUUFBUW9KLE9BQVNqSixPQUFPQyxLQUFLQyxVQUFVMlksU0FBVTdHLGlCQUMzRDZHLFNBQVNDLElBQUlWLGdCQUFnQk4sV0FHckNqYyx3QkFBeUI0YyxXQUN2QixNQUFNdFIsUUFBVWpMLEtBQUtzYyxTQUFTcGMsSUFBSXFjLFdBRzVCTSxTQUZjVixFQUFFQyxVQUFVblIsUUFBUXhILEtBQUtxSSxTQUFTLEdBRXpCbUUsY0FBYyxjQUUzQyxPQUFPK0YsYUFBYThHLFlBQVlELFVBR2xDbGQsbUJBQW9Cb1EsTUFDbEIsTUFBTWdOLGlCQUFtQmhaLEtBQUtpWixNQUFNQyxTQUFTbE4sS0FBS3BNLFFBQVFvSixTQUVwRG1RLGFBQWUsSUFBSWxILGFBd0J6QixPQXZCQXhULE9BQU8yYSxPQUFPRCxhQUFjSCxrQkFDdkJHLGFBQWFYLFlBQ2hCVyxhQUFhWCxVQUFZeE0sS0FBS3FOLFFBQVEsWUFBWXpaLFFBQVE0WSxXQUdYLFdBQTdDVyxhQUFhckcsVUFBVTNDLGFBQWFySCxPQUN0Q3FRLGFBQWFyRyxTQUFXclUsT0FBTzJhLE9BQzdCLElBQUk3TSxVQUNKNE0sYUFBYXJHLFdBSWdDLFdBQTdDcUcsYUFBYTlCLFVBQVVsSCxhQUFhckgsT0FDdENxUSxhQUFhOUIsU0FBVzVZLE9BQU8yYSxPQUM3QixJQUFJN00sVUFDSjRNLGFBQWE5QixXQUltQyxXQUFoRDhCLGFBQWE3QyxhQUFhbkcsYUFBYXJILE9BQ3pDcVEsYUFBYTdDLFlBQWMvWixLQUFLK2MsU0FBU0gsYUFBYTdDLGNBR2pENkMsY0MvZkosTUFBTUksY0FZWDNkLGlCQUFrQjZVLEdBQ2hCLE1BQWlCLGlCQUFOQSxNQUNONkIsTUFBTXZJLE9BQU8wRyxLQUNYbFUsS0FBS2lkLFNBQVMvSSxJQUd2QjdVLHNCQUF1Qm9jLEtBQU1qUSxTQUMzQixNQUNNMUssTUFBUTBLLFFBQVEwUixNQURULFVBRWIsR0FDRXBjLE1BQU0sSUFBSThLLGNBQWNzUixNQUFNLGdCQUM5QnBjLE1BQU0sSUFBSThLLGNBQWNpQixXQUFXLE9BTW5DLE9BSEFzUSxZQUFXLFdBQ1RILGNBQWNJLGFBQWE1UixXQUMxQixNQUNJLEVBSVhuTSwwQkFBMkJtTSxTQUN6QixNQUFNekosUUFBVXlKLFFBQ2JJLGNBQ0FHLE1BQU0sTUFDTHRKLEtBQUssS0FDTGdJLFFBQVEsZUFBZ0IsSUFDdEIySCxNQUFRLElBQUlwQyxVQUNsQixHQUFJak8sUUFBUVgsT0FBUSxDQUNsQixJQUNJaWMsVUFJQUMsaUJBQ0FDLHNCQU5BQyxRQUFVemIsUUFFVjJRLFdBQWExQyxVQUFVbUcsZ0JBQWdCbEcsUUFDdkNtQixhQUFlLEVBQ2ZxTSxLQUFNLEVBR1YsTUFBTUMsYUFBZUYsUUFBUU4sTUFBTSxlQUNuQyxHQUFJUSxjQUFnQkEsYUFBYXRjLE9BQVEsQ0FDdkNpYyxVQUFZN1AsT0FBT2tRLGFBQWEsSUFDaEMsSUFBSyxNQUFNUixTQUFTUSxhQUNsQkYsUUFBVUEsUUFBUS9TLFFBQVEsSUFBSXlTLFNBQVUsSUFHNUMsTUFBTVMsY0FBZ0JILFFBQVFOLE1BQU0sZUFDcEMsR0FBSVMsZUFBaUJBLGNBQWN2YyxPQUFRLENBQ3pDc1IsV0FBYXNLLGNBQWNZLGtCQUFrQkQsY0FBYyxJQUMzRCxJQUFLLE1BQU1ULFNBQVNTLGNBQ2xCSCxRQUFVQSxRQUFRL1MsUUFBUSxJQUFJeVMsU0FBVSxJQVM1QyxHQU5JTSxRQUFRdmMsU0FBUyxPQUNuQndjLEtBQU0sRUFDTkQsUUFBVUEsUUFBUS9TLFFBQVEsSUFBSyxLQUU1QnNMLE1BQU12SSxPQUFPZ1EsWUFBV3BNLGFBQWU1RCxPQUFPZ1EsVUFFL0NDLElBQUssQ0FDUCxNQUFNSSxjQUFnQixDQUNwQlIsVUFDQXRhLFNBQVVxTyxhQUNWc0IsV0FDQW9MLFVBQVUsR0FFTkMsWUFBY0MsV0FBV3ZTLE9BQU9vUyxlQUNsQ0UsUUFDRjNNLGFBQWU1RCxPQUFPdVEsTUFBTW5lLElBQUksY0FDaEM4UyxXQUFhbEYsT0FBT3VRLE1BQU1uZSxJQUFJLGVBQzlCeWQsVUFBWTdQLE9BQU91USxNQUFNbmUsSUFBSSxlQUFpQnlkLFVBQzlDQyxpQkFBbUI5UCxPQUFPdVEsTUFBTW5lLElBQUkscUJBQ3BDMmQsc0JBQXdCL1AsT0FBT3VRLE1BQU1uZSxJQUFJLDJCQUk3Q3dTLE1BQU1oQixhQUFlQSxjQUFnQixFQUNyQ2dCLE1BQU1NLFdBQWFBLFlBQWMxQyxVQUFVbUcsZ0JBQWdCbEcsUUFDM0RtQyxNQUFNUSxTQUFXeUssVUFDakJqTCxNQUFNa0wsaUJBQW1CQSxpQkFDekJsTCxNQUFNbUwsc0JBQXdCQSxzQkFDMUJGLFlBQVdqTCxNQUFNUSxTQUFZbUQsTUFBTXNILGdCQUF5QnJKLEVBQVpxSixXQUV0RCxNQUFNdlMsUUFBVXBKLFlBQVlxSixhQUM1QixHQUFJRCxRQUFRdUIsT0FBU3ZCLFFBQVF3QixNQUFPLENBQ2xDLE1BQU16RCxNQUFRMEIsV0FBVzZCLGdCQUN2QixHQUFHdEIsUUFBUXdCLFNBQVN4QixRQUFRdUIsU0FFMUJ4RCxRQUFPdUosTUFBTXZKLE1BQVFBLFlBQ3BCLEdBQUlpQyxRQUFRakMsTUFBTyxDQUN4QixNQUFNQSxNQUFRbkosS0FBS3NNLE9BQU9wTSxJQUFJa0wsUUFBUWpDLE9BQ2xDQSxRQUFPdUosTUFBTXZKLE1BQVFBLGFBRXJCdUosTUFBTXJTLE9BQ1pxUyxNQUFNNkwsWUFHUjVlLG9CQUNFOFAsR0FBR0MsY0FBYzhPLE1BQU0saUJBR3pCN2UsMEJBQTJCOGUsYUFDekIsSUFBSXRWLE1BS0osT0FBSW5KLEtBQUtzTSxPQUFPQyxPQUFPa1MsYUFBcUJ6ZSxLQUFLc00sT0FBT0MsT0FBT2tTLGNBRS9EdFYsTUFBUW5KLEtBQUtzTSxPQUFPcE0sSUFBSXVlLGFBQ3BCdFYsUUFJSkEsTUFBUTNHLE9BQU9rYyxPQUFPMWUsS0FBS3NNLE9BQU9DLFFBQVFvUyxNQUFLdGQsR0FDekNBLEVBQUV3TCxLQUFLWCxnQkFBa0J1UyxZQUFZdlMsZ0JBR3RDL0MsUUFFSEEsTUFBUW5KLEtBQUtzTSxPQUFPcVMsTUFBS3phLEdBQ25CQSxFQUFFMkksS0FBS1gsZ0JBQWtCdVMsWUFBWXZTLGlCQUl6Qy9DLE9BU0csT0FHVHhKLDhCQUErQmlmLE1BQzdCLE1BQU1DLFFBQVVELEtBQUsxUyxjQUVyQixPQUFRMlMsU0FDTixJQUFLLE1BQ0gsTUFBTyxDQUNMQyxNQUFPOWUsS0FBSzRQLEtBQUtDLFNBQVMsY0FDMUJrUCxNQUFPL2UsS0FBSzRQLEtBQUtDLFNBQVMsb0JBRTlCLElBQUssTUFDSCxNQUFPLENBQ0xpUCxNQUFPOWUsS0FBSzRQLEtBQUtDLFNBQVMsY0FDMUJrUCxNQUFPL2UsS0FBSzRQLEtBQUtDLFNBQVMsd0JBRTlCLElBQUssTUFDSCxNQUFPLENBQ0xpUCxNQUFPOWUsS0FBSzRQLEtBQUtDLFNBQVMsY0FDMUJrUCxNQUFPL2UsS0FBSzRQLEtBQUtDLFNBQVMsZ0JBRTlCLElBQUssTUFDSCxNQUFPLENBQ0xpUCxNQUFPOWUsS0FBSzRQLEtBQUtDLFNBQVMsY0FDMUJrUCxNQUFPL2UsS0FBSzRQLEtBQUtDLFNBQVMscUJBRTlCLElBQUssTUFDSCxNQUFPLENBQ0xpUCxNQUFPOWUsS0FBSzRQLEtBQUtDLFNBQVMsY0FDMUJrUCxNQUFPL2UsS0FBSzRQLEtBQUtDLFNBQVMsc0JBRTlCLElBQUssTUFDSCxNQUFPLENBQ0xpUCxNQUFPOWUsS0FBSzRQLEtBQUtDLFNBQVMsY0FDMUJrUCxNQUFPL2UsS0FBSzRQLEtBQUtDLFNBQVMsd0JBRTlCLElBQUssTUFDSCxNQUFPLENBQ0xpUCxNQUFPOWUsS0FBSzRQLEtBQUtDLFNBQVMsY0FDMUJrUCxNQUFPL2UsS0FBSzRQLEtBQUtDLFNBQVMsaUJBRTlCLElBQUssTUFDSCxNQUFPLENBQ0xpUCxNQUFPOWUsS0FBSzRQLEtBQUtDLFNBQVMsY0FDMUJrUCxNQUFPL2UsS0FBSzRQLEtBQUtDLFNBQVMscUJBRTlCLFFBQ0UsSUFBSyxNQUFPLENBQUV0QyxTQUFVL0ssT0FBT2dDLFFBQzdCeEUsS0FBS2dmLE9BQU8vQyxTQUFTZ0QsTUFBTUMsVUFBVTVaLGdCQUFnQkEsaUJBRXJELEdBQUl1WixVQUFZN2UsS0FBSzRQLEtBQUtDLFNBQVN0QyxNQUFNdVIsT0FBTzVTLGNBQzlDLE1BQU8sQ0FDTDRTLE1BQU85ZSxLQUFLNFAsS0FBS0MsU0FBU3RDLE1BQU11UixPQUNoQ0MsTUFBTy9lLEtBQUs0UCxLQUFLQyxTQUFTdEMsTUFBTXdSLFFBSXRDLE9BQU8sTUFLYnBmLHlCQUEwQnFULFlBQ3hCLEdBQTJCLE1BQXZCbU0sT0FBT25NLFlBQXFCLE9BQU8xQyxVQUFVbUcsZ0JBQWdCbEcsUUFDakUsR0FBMEIsaUJBQWZ5QyxXQUF5QixPQUFPQSxXQUMzQyxJQUFLcUQsTUFBTXZJLE9BQU9rRixhQUFjLE9BQU9sRixPQUFPa0YsWUFFOUMsT0FBUUEsWUFDTixJQUFLLElBQ0gsT0FBTzFDLFVBQVVtRyxnQkFBZ0IySSxRQUNuQyxJQUFLLElBQ0gsT0FBTzlPLFVBQVVtRyxnQkFBZ0JoRyxLQUNuQyxJQUFLLEtBQ0gsT0FBT0gsVUFBVW1HLGdCQUFnQi9GLFFBQ25DLElBQUssTUFDSCxPQUFPSixVQUFVbUcsZ0JBQWdCOUYsU0FDbkMsUUFDRSxPQUFPTCxVQUFVbUcsZ0JBQWdCbEcsU0FJdkM1USx1QkFBd0JzUixNQUFPdE0sTUFBT3RDLFFBQVUsSUFDOUNzQyxNQUFNMGEsaUJBQ04sTUFBTWpVLFFBQVVwSixZQUFZcUosYUFDNUIsSUFBSWxDLE1BQ0FpQyxRQUFRdUIsUUFBT3hELE1BQVFuSixLQUFLc00sT0FBT0MsT0FBT25CLFFBQVF1QixRQUNqRHhELFFBQU9BLE1BQVFuSixLQUFLc00sT0FBT3BNLElBQUlrTCxRQUFRakMsUUFFdkNBLE1BS0xBLE1BQU1tVyxXQUFXck8sTUFBT3RNLE1BQU00YSxTQUFVbGQsU0FKdENvTixHQUFHQyxjQUFjQyxLQUFLM1AsS0FBSzRQLEtBQUtDLFNBQVMsOEJBTzdDbFEsd0JBQXlCK1UsT0FBUS9QLE9BQy9CQSxNQUFNMGEsaUJBQ04sTUFBTWpVLFFBQVVwSixZQUFZcUosYUFDNUIsSUFBSWxDLE1BRUosR0FESWlDLFFBQVF1QixRQUFPeEQsTUFBUW5KLEtBQUtzTSxPQUFPQyxPQUFPbkIsUUFBUXVCLFNBQ2pEeEQsTUFDSCxHQUFJaUMsUUFBUXdCLE9BQVN4QixRQUFRdUIsTUFBTyxDQUVsQyxNQUFNNlMsVUFBWXhmLEtBQUtzTSxPQUFPcE0sSUFBSWtMLFFBQVFqQyxPQUVwQ3dELE1BRFEzTSxLQUFLaU8sT0FBTy9OLElBQUlrTCxRQUFRd0IsT0FDbEJMLE9BQU9yTSxJQUFJa0wsUUFBUXVCLE9BTXZDeEQsTUFIbUIsSUFEQXNXLGlCQUFpQixTQUNqQixDQUFlRCxVQUFVRSxTQUFVLENBQ3BEQyxPQUFRaFQsYUFHTHhELE1BQVFuSixLQUFLc00sT0FBT3BNLElBQUlrTCxRQUFRakMsT0FHcENBLE1BS0xBLE1BQU15VyxZQUFZbEwsT0FBUS9QLE1BQU00YSxVQUo5QjlQLEdBQUdDLGNBQWNDLEtBQUszUCxLQUFLNFAsS0FBS0MsU0FBUyw4QkFPN0NsUSx3QkFBeUJnZSxVQUF1QmhaLE1BQVEsWUFDaEQyWSxjQUFjdUMsU0FBU2xiLE1BQU8sQ0FBRWdaLFlBR3hDaGUseUJBQTBCbWdCLElBQUtyYyxLQUFNc2MsTUFDbkMsR0FBa0IsU0FBZHRjLEtBQUs2SCxLQUFpQixPQUUxQixJQUFJd0YsS0FDQWtQLE9BNEJBQyxRQTNCQUMsU0FBVyxLQUVmLEdBQUl6YyxLQUFLMGMsS0FBTSxDQUNiLE1BQU1BLEtBQU9uZ0IsS0FBS29nQixNQUFNbGdCLElBQUl1RCxLQUFLMGMsTUFDakMsR0FBNkIsU0FBekJBLEtBQUtFLFNBQVNDLE9BQW1CLE9BQ3JDSixTQUFXemMsS0FBSzBjLEtBQ2hCclAsV0FBYXFQLEtBQUtJLFlBQVk5YyxLQUFLb0ksSUFDbkNtVSxPQUFTLFlBQ0F2YyxLQUFLQSxNQUNkcU4sS0FBT3JOLEtBQUtBLEtBQ1p1YyxPQUFTLFVBRVRsUCxLQUFPOVEsS0FBS2dSLE1BQU05USxJQUFJdUQsS0FBS29JLElBQzNCbVUsT0FBUyxRQUdYLElBQUtsUCxLQUNILE9BQU9yQixHQUFHQyxjQUFjQyxLQUN0QjNQLEtBQUs0UCxLQUFLQyxTQUFTLDhCQUd2QixHQUFvQixXQUFkaUIsS0FBS3hGLE1BQXNDLFVBQWR3RixLQUFLeEYsS0FDdEMsT0FBT21FLEdBQUdDLGNBQWNDLEtBQ3RCM1AsS0FBSzRQLEtBQUtDLFNBQVMsZ0NBVXZCLEdBSmtCLFdBQWRpQixLQUFLeEYsT0FDUDJVLFFBQVUsdUNBQXVDblAsS0FBS2pFLGNBQWNpRSxLQUFLakYsZ0JBQWdCbVUsbUJBQW1CRSx1QkFHNUYsVUFBZHBQLEtBQUt4RixLQUFrQixDQUN6QixHQUFJa1YsU0FBU0MsVUFBVTNQLE1BQ3JCLE9BQU9yQixHQUFHQyxjQUFjQyxLQUN0QjNQLEtBQUs0UCxLQUFLQyxTQUFTLDBCQUd2Qm9RLFFBQVUsc0NBQXNDblAsS0FBS2pFLGNBQWNpRSxLQUFLakYsZ0JBQWdCbVUsbUJBQW1CRSxzQkFJN0csSUFBSVEsTUFBUTFnQixLQUFLMmdCLE9BQU9DLFNBQVNqQyxNQUMvQmtDLEdBQUtBLEVBQUVoVSxPQUFTaUUsS0FBS2pFLE1BQVFnVSxFQUFFWixVQUFZQSxVQVc3QyxPQVRLUyxRQUNIQSxZQUFjSSxNQUFNL1UsT0FBTyxDQUN6QmMsS0FBTWlFLEtBQUtqRSxLQUNYdkIsS0FBTSxTQUNOaUQsSUFBS3VDLEtBQUt2QyxJQUNWMFIsV0FHSmpnQixLQUFLb0MsS0FBSzJlLGtCQUFrQkwsTUFBT1gsT0FDNUIsRUFHVHBnQiw0QkFBNkJxaEIsY0FDckJoaEIsS0FBS0ksU0FBUzZnQixJQUFJLE9BQVEscUJBQXNCRCxRQUN0RHZSLEdBQUdDLGNBQWN3UixLQUNmRixPQUNJaGhCLEtBQUs0UCxLQUFLQyxTQUFTLHdCQUNuQjdQLEtBQUs0UCxLQUFLQyxTQUFTLDBCQUV6QjdQLEtBQUttaEIsT0FBT0MsS0FBSyxjQUFlLENBQzlCOVYsS0FBTSxlQUVSZ1MsY0FBYytELG1CQUdoQjFoQixnQ0FBaUNxaEIsY0FDekJoaEIsS0FBS0ksU0FBUzZnQixJQUFJLE9BQVEsc0JBQXVCRCxRQUN2RHZSLEdBQUdDLGNBQWN3UixLQUNmRixPQUNJaGhCLEtBQUs0UCxLQUFLQyxTQUFTLDRCQUNuQjdQLEtBQUs0UCxLQUFLQyxTQUFTLDhCQUV6QjdQLEtBQUttaEIsT0FBT0MsS0FBSyxjQUFlLENBQzlCOVYsS0FBTSxlQUVSZ1MsY0FBYytELG1CQUNkQyxNQUFNM1osS0FBSyxxQkFBc0JxWixRQUduQ3JoQix5QkFDRSxNQUFNNGhCLE1BQVF2aEIsS0FBS3VoQixNQUFNOWYsUUFBT1csTUFBUUEsS0FBS2pDLFNBQ3ZDbU0sT0FBU3RNLEtBQUtzTSxPQUNwQixJQUFJa1YsYUFBZSxxR0FDVXhoQixLQUFLNFAsS0FBS0MsU0FBUyw0QkFDaEQsTUFBTTRSLGVBQWlCRixNQUNwQjllLEtBQUlpZixHQUFLQSxFQUFFQyxXQUFXOVYsS0FDdEJwSyxRQUFPb0ssU0FBYXlJLElBQVB6SSxLQUNWK1Ysa0JBQW9CN1MsT0FBT3hDLE9BQU9zVixXQUFXcGYsS0FBSWtLLE9BQzlDQSxNQUFNeEQsTUFBTTBDLEtBSXJCUyxPQUFPd1YsU0FBUTNZLFFBQ2IsTUFBTTRZLFNBQ0hILGtCQUFrQnJnQixTQUFTNEgsTUFBTTBDLEtBQ2hDNFYsZUFBZWxnQixTQUFTNEgsTUFBTTBDLE1BQ2hDLFVBQ0YyVixjQUFnQixrREFFY3JZLE1BQU0wQyxXQUFXMUMsTUFBTTBDLGNBQWMxQyxNQUFNMEQsU0FBU2tWLGdDQUNyRTVZLE1BQU0wQyxPQUFPMUMsTUFBTTBELDJCQUlsQyxJQUFJbVYsT0FBTyxDQUNUcGUsTUFBTyxHQUFHNUQsS0FBSzRQLEtBQUtDLFNBQVMsbUJBQzdCL0QsUUFBUyxHQUFHOUwsS0FBSzRQLEtBQUtDLFNBQ3BCLHdCQUNJMlIsb0JBQ05TLFFBQVMsQ0FDUG5nQixRQUFTLENBQ1BpZCxNQUFPLEdBQUcvZSxLQUFLNFAsS0FBS0MsU0FBUyxvQkFDN0JxUyxTQUFVeGhCLE1BQUFBLE9BQ1IsTUFBTWtVLFFBQVUsR0FDaEIsSUFBSXVOLEtBQU0sRUFDVixNQUFNWixNQUFReEYsS0FBSzRDLEtBQUsscUJBQ3hCLElBQUssTUFBTXZjLFFBQVFtZixNQUNDLGtCQUFkbmYsS0FBS3lLLE1BQTRCekssS0FBSzJmLFVBQVNJLEtBQU0sSUFDckQvZixLQUFLMmYsU0FBV0ksTUFBS3ZOLFFBQVF0VCxLQUFLYyxLQUFLeUosVUFFdkN5UixjQUFjOEUsVUFBVXhOLGNBSW5DeU4sUUFBTyxHQUdaMWlCLHVCQUF3QmlWLFNBQ3RCLElBQUtBLFFBQVFsVCxPQUFRLE9BQ3JCLE1BQU00SyxPQUFTdE0sS0FBS3NNLE9BQU83SyxRQUFPMEgsT0FBU3lMLFFBQVFyVCxTQUFTNEgsTUFBTTBDLE1BQ2xFLElBQUl5VyxZQUFjLE1BQU10aUIsS0FBSzRQLEtBQUtDLFNBQVMsOEJBQzNDLElBQUssTUFBTTFHLFNBQVNtRCxPQUNsQixHQUFJLENBQUMsWUFBYSxNQUFPLFlBQVkvSyxTQUFTNEgsTUFBTW1DLE1BQU8sQ0FDekQsSUFBSWlYLGFBQWMsRUFDbEIsSUFBSyxNQUFNelIsUUFBUTNILE1BQU0xRixLQUFLdU4sTUFDVixXQUFkRixLQUFLeEYsTUFDSHdGLEtBQUtqRSxPQUFTLEdBQUc3TSxLQUFLNFAsS0FBS0MsU0FBUyx3QkFDdEMwUyxhQUFjLEdBSXBCLE1BQU1DLGtCQUNIeGlCLEtBQUtJLFNBQVNGLElBQUksT0FBUSw4QkFDM0JpSixNQUFNc1osbUJBQW1CbGYsS0FBSzhGLE9BQU9JLGdCQUNqQ2laLGdCQUFrQnZaLE1BQU0xRixLQUFLQSxLQUFLc1gsUUFBUU4sSUFBSWtJLFVBQzlDQyxRQUFVelosTUFBTTFGLEtBQUtBLEtBQUtzWCxRQUFROEgsR0FBR3RWLE1BQ3JDdVYsTUFBUTNaLE1BQU0xRixLQUFLQSxLQUFLc1gsUUFBUThILEdBQUdyaEIsSUFDbkNzWixlQUNKLE1BQVF0YSxLQUFLdWlCLE1BQU01WixNQUFNMUYsS0FBS0EsS0FBS3NYLFFBQVFOLElBQUlsTixNQUFRLEdBQ25EeVYsUUFBVTdaLE1BQU0xRixLQUFLQSxLQUFLc1gsUUFBUWtJLEdBQUcxVixNQUNyQzJWLE1BQVEvWixNQUFNMUYsS0FBS0EsS0FBS3NYLFFBQVFrSSxHQUFHemhCLElBQ25DcUUsSUFBTXNELE1BQU0xRixLQUFLQSxLQUFLNkIsZ0JBQWdCTyxJQUFJMEgsTUFFaEQsR0FEQStVLGFBQTRCLFVBQVVuWixNQUFNMEQsYUFDeEMrVixRQUFVRSxNQUNaLElBQXlCLElBQXJCTixpQkFDRkYsYUFFRSw0QkFBNEJ0aUIsS0FBSzRQLEtBQUtDLFNBQ3BDLHNDQUVDLENBQ0wsSUFBSXNULFdBQWEsRUFDYm5qQixLQUFLSSxTQUFTRixJQUFJLE9BQVEsNEJBQzVCaWpCLFdBQWEsSUFFSyxJQUFoQlosYUFDRlksYUFFRkEsV0FBYTNpQixLQUFLbUIsSUFBSXdoQixXQUFZTCxNQUFRRixTQUV4Q04sYUFEaUIsSUFBZmEsV0FHQSxtQ0FBbUNuakIsS0FBSzRQLEtBQUtDLFNBQzNDLGdDQUtGLG1DQUFtQzdQLEtBQUs0UCxLQUFLWSxPQUMzQywyQkFDQSxDQUFFNFMsT0FBUUQscUJBR2hCaGEsTUFBTW1RLE9BQU8sQ0FDWCx3QkFDRW5RLE1BQU0xRixLQUFLQSxLQUFLc1gsUUFBUThILEdBQUd0VixNQUFRNFYsYUFJdkNULGdCQUFrQixJQUNwQkosYUFFRSxtQ0FBbUN0aUIsS0FBSzRQLEtBQUtDLFNBQzNDLHFDQUVKMUcsTUFBTW1RLE9BQU8sQ0FDWCw2QkFBOEIsRUFDOUIsa0NBQW1Dd0Isa0JBR3ZDLE1BQU11SSxNQUFRLEVBQ2QsR0FBSUEsTUFBUSxHQUFLTCxRQUFVRSxNQUFPLENBQ2hDLElBQUlJLFlBQWNELE1BQVE3aUIsS0FBSytpQixLQUFLMWQsSUFBTSxLQUMxQ3lkLFlBQWM5aUIsS0FBS21CLElBQUkyaEIsWUFBYUosTUFBUUYsU0FDNUNWLGFBRUUsbUNBQW1DdGlCLEtBQUs0UCxLQUFLWSxPQUMzQyxpQ0FDSThTLG1CQUNSbmEsTUFBTW1RLE9BQU8sQ0FDWCx3QkFDRW5RLE1BQU0xRixLQUFLQSxLQUFLc1gsUUFBUWtJLEdBQUcxVixNQUFRK1YsZUFLN0MsTUFBTXpoQixTQUFXLENBQ2ZPLEtBQU1wQyxLQUFLb0MsS0FBS3lKLEdBQ2hCVCxRQUFTcEosWUFBWXFKLGFBQ3JCUyxRQUFTd1csWUFDVGhYLEtBQU1DLE1BQU1DLG1CQUFtQmdZLE9BRWpDeGhCLFlBQVkrSixPQUFPbEssVUFHckJsQywwQkFBMkJxaEIsY0FDbkJoaEIsS0FBS0ksU0FBUzZnQixJQUFJLE9BQVEsWUFBYUQsUUFDN0N2UixHQUFHQyxjQUFjd1IsS0FDZkYsT0FDSWhoQixLQUFLNFAsS0FBS0MsU0FBUyxzQkFDbkI3UCxLQUFLNFAsS0FBS0MsU0FBUyx3QkFJM0JsUSxzQkFBdUJnRixNQUFPdEMsUUFBVSxJQUV0QyxJQUFJcVAsYUFBY3NCLFdBQVk0SyxpQkFBa0JDLHNCQURoRHhiLFFBQVErYixVQUFZL2IsUUFBUXNiLFVBRTVCLElBQUlBLFVBQVl0YixRQUFRc2IsVUFPeEIsUUFMSXJKLElBQWNqUyxRQUFRZ0IsV0FBVXFPLGFBQWU1RCxPQUFPekwsUUFBUWdCLGdCQUM5RGlSLElBQWNqUyxRQUFRMlEsYUFDeEJBLFdBQWFzSyxjQUFjWSxrQkFBa0I3YixRQUFRMlEsY0FHbERyTyxPQUFPNGEsV0FBYWxkLFFBQVE4UixZQUFhLENBQzVDLE1BQU1rSyxZQUFjQyxXQUFXdlMsT0FBTzFKLFNBQ2xDZ2MsUUFDRjNNLGFBQWU1RCxPQUFPdVEsTUFBTW5lLElBQUksY0FDaEM4UyxXQUFhbEYsT0FBT3VRLE1BQU1uZSxJQUFJLGVBQzlCeWQsVUFBWTdQLE9BQU91USxNQUFNbmUsSUFBSSxjQUM3QjBkLGlCQUFtQjlQLE9BQU91USxNQUFNbmUsSUFBSSxxQkFDcEMyZCxzQkFBd0IvUCxPQUFPdVEsTUFBTW5lLElBQUksMkJBSTdDLE1BQU1vTSxPQUFTLEdBRWYsR0FBSXRNLEtBQUtvQyxLQUFLcWhCLE1BQVExVSxPQUFPeEMsT0FBT3NWLFdBQVduZ0IsT0FDN0MsSUFBSyxNQUFNaUwsU0FBU29DLE9BQU94QyxPQUFPc1YsV0FDaEN2VixPQUFPaEwsS0FBS3FMLE1BQU14RCxNQUFNbUssZUFFakJ0VCxLQUFLb0MsS0FBS3VmLFdBQ25CclYsT0FBT2hMLEtBQUt0QixLQUFLb0MsS0FBS3VmLFVBQVVyTyxVQUdsQyxJQUFLLE1BQU1vUSxNQUFNcFgsT0FBUSxDQUN2QixNQUFNb0csTUFBUSxJQUFJcEMsVUFDbEJvQyxNQUFNaEIsYUFBZUEsY0FBZ0IsRUFDckNnQixNQUFNTSxXQUFhQSxZQUFjMUMsVUFBVW1HLGdCQUFnQmxHLFFBQzNEbUMsTUFBTVEsU0FBV3lLLFVBQ2pCakwsTUFBTWtMLGlCQUFtQkEsaUJBQ3pCbEwsTUFBTW1MLHNCQUF3QkEsc0JBQzlCbkwsTUFBTXZKLE1BQVF1YSxTQUNSaFIsTUFBTXJTLE9BQ1pxUyxNQUFNNkwsWUFHUixJQUFLalMsT0FBTzVLLE9BQVEsQ0FDbEIsTUFBTWdSLE1BQVEsSUFBSXBDLFVBQ2xCb0MsTUFBTWhCLGFBQWVBLGNBQWdCLEVBQ3JDZ0IsTUFBTU0sV0FBYUEsWUFBYzFDLFVBQVVtRyxnQkFBZ0JsRyxRQUMzRG1DLE1BQU1RLFNBQVd5SyxVQUNqQmpMLE1BQU1rTCxpQkFBbUJBLGlCQUN6QmxMLE1BQU1tTCxzQkFBd0JBLDRCQUN4Qm5MLE1BQU1yUyxPQUNacVMsTUFBTTZMLGFBSVY1ZSwwQkFDRSxHQUFJSyxLQUFLb0MsS0FBS3FoQixLQUNaLElBQUssTUFBTXZmLEtBQUtsRSxLQUFLc00sT0FBT3NVLFNBQ0osY0FBbEIxYyxHQUFHVCxNQUFNNkgsTUFBd0JwSCxHQUFHeWYsT0FBU3pmLEdBQUd5ZixPQUFPQyxXQUN6RDFmLEVBQUVvVixPQUFPLENBQUUscUJBQXFCLElBQ2hDcFYsRUFBRW1lLFFBQU8sU0FJYixJQUFLLE1BQU1uZSxLQUFLbEUsS0FBS3NNLE9BQU9zVSxTQUN0QjFjLEVBQUUyZixVQUNKM2YsRUFBRW9WLE9BQU8sQ0FBRSxxQkFBcUIsSUFDaENwVixFQUFFbWUsUUFBTyxJQVdqQjFpQixrQ0FBbUNnRixNQUFPbWYsV0FBYSxRQUNyRCxHQUFJbmYsTUFBTW9mLGNBQWUsTUFBTyxHQUNoQyxJQUNFLE1BQU1DLFNBQVdqZ0IsS0FBS2laLE1BQU1yWSxNQUFNc2YsYUFBYUMsUUFBUSxlQUN2RCxHQUFzQixXQUFsQkYsU0FBUzFZLE1BQXFCMFksU0FBU0csZUFBaUJMLFdBQVksQ0FDdEUsTUFBTU0sT0FBU3BrQixLQUFLcWtCLFFBQVFua0IsSUFBSThqQixTQUFTblksSUFDekMsT0FBS3VZLE9BQ0VBLE9BQU94RCxTQURNLEdBRWYsR0FBSW9ELFNBQVMxWSxPQUFTd1ksV0FBWSxDQUN2QyxHQUFJRSxTQUFTN0QsS0FBTSxDQUNqQixNQUFNQSxLQUFPbmdCLEtBQUtvZ0IsTUFBTWxnQixJQUFJOGpCLFNBQVM3RCxNQUNyQyxPQUFJQSxLQUFLRSxTQUFTQyxTQUFXd0QsV0FBbUIsR0FDekMsT0FBTzNELEtBQUtJLFlBQVl5RCxTQUFTblksS0FDbkMsT0FBSW1ZLFNBQVN2Z0IsS0FDWCxDQUFDdWdCLFVBRUQsQ0FBQ2hrQixLQUFLZ1IsTUFBTTlRLElBQUk4akIsU0FBU25ZLEtBR2xDLE1BQU8sR0FFVCxNQUFPNUgsS0FDUCxNQUFPLElBSVh0RSw2QkFBOEIya0IsTUFDNUIsSUFDRSxHQUFJQyxVQUFVQyxXQUFhQyxPQUFPQyxnQkFDaEMsT0FBT0gsVUFBVUMsVUFBVUcsVUFBVUwsTUFDaEMsQ0FDTCxNQUFNTSxTQUFXemdCLFNBQVNDLGNBQWMsWUFReEMsT0FQQXdnQixTQUFTclgsTUFBUStXLEtBQ2pCTSxTQUFTQyxNQUFNQyxTQUFXLFFBQzFCRixTQUFTQyxNQUFNRSxLQUFPLFNBQ3RCSCxTQUFTQyxNQUFNRyxJQUFNLFNBQ3JCN2dCLFNBQVM4Z0IsS0FBS0MsWUFBWU4sVUFDMUJBLFNBQVNPLFFBQ1RQLFNBQVNRLFNBQ0YsSUFBSUMsU0FBUSxDQUFDQyxRQUFTQyxVQUMzQnBoQixTQUFTcWhCLFlBQVksUUFDakJGLFVBQ0FDLE9BQ0EsSUFBSUUsTUFBTXpsQixLQUFLNFAsS0FBS0MsU0FBUyxrQ0FFakMrVSxTQUFTYyxZQUNSQyxPQUFNMWhCLEtBQU93TCxHQUFHQyxjQUFja1csTUFBTTNoQixRQUV6QyxNQUFPQSxLQUNQd0wsR0FBR0MsY0FBY2tXLE1BQU01bEIsS0FBSzRQLEtBQUtDLFNBQVMsa0NBSTlDbFEsbUJBQW9CbUwsUUFFbEIsTUFBTSthLElBQU0vYSxPQUFPcEosT0FDbkIsSUFBSW9rQixRQUFVLEdBRWQsSUFBSyxJQUFJQyxRQUFTQyxFQUFJLEVBQUdBLEVBQUlILE1BQU9HLEVBR2xDLEdBRkFELFFBQVVqYixPQUFPbWIsT0FBT0QsR0FFcEJELFNBQVcsS0FBT0EsU0FBVyxJQUNmLE9BQVpBLFNBQWdDLE1BQVpBLFVBQ3RCRCxTQUFXLE1BR2JBLFNBQVdDLFFBQVFoYixRQUFRLHdCQUF5QixhQUVwRCxPQUFRZ2IsU0FDTixJQUFLLEtBQ0hELFNBQVcsTUFDWCxNQUVGLElBQUssS0FDSEEsU0FBVyxNQUNYLE1BRUYsSUFBSyxLQUNIQSxTQUFXLE1BQ1gsTUFFRixJQUFLLEtBQ0hBLFNBQVcsTUFDWCxNQUVGLElBQUssS0FDSEEsU0FBVyxNQUNYLE1BRUYsSUFBSyxLQUNIQSxTQUFXLE1BQ1gsTUFFRixRQUNFQSxTQUFXLE1BQ1hDLFFBQVVBLFFBQVFHLFdBQVcsR0FBR25ZLFNBQVMsSUFDekMsSUFBSyxJQUFJb1ksRUFBSSxJQUFLQSxHQUFLSixRQUFRcmtCLE9BQVFva0IsU0FBVyxLQUNsREEsU0FBV0MsUUFLbkIsT0FBT0QsU0MzckJKLE1BQU1NLGFBQ1hsUyxZQUFhVixRQUFVLEtBQU1SLFdBQWExQyxVQUFVbUcsZ0JBQWdCbEcsU0FDbEVILEtBQUtzQyxNQUFRLElBQUlwQyxVQUFVa0QsU0FDM0JwRCxLQUFLc0MsTUFBTVcsZUFBaUIsTUFDNUJqRCxLQUFLc0MsTUFBTU0sV0FBYUEsV0FDeEI1QyxLQUFLc0MsTUFBTTJULFVBQVcsRUFDdEJqVyxLQUFLb0QsUUFBVUEsUUFHYmEsY0FJRixZQUhJQyxJQUFjbEUsS0FBS21FLFdBQ3JCbkUsS0FBS21FLFNBQTZCLGNBQWxCbkUsS0FBS3ZRLFVBRWhCdVEsS0FBS21FLFNBR1ZGLFlBQVNHLEdBQ1hwRSxLQUFLbUUsU0FBV0MsRUFHZDNVLGVBRUYsT0FES3VRLEtBQUtxRSxZQUFXckUsS0FBS3FFLFVBQVl6VSxLQUFLSSxTQUFTRixJQUFJLE9BQVEsYUFDekRrUSxLQUFLcUUsVUFHVjVVLGFBQVUyVSxJQUNGLElBQU5BLElBQWFwRSxLQUFLcUUsVUFBWXpVLEtBQUtJLFNBQVNGLElBQUksT0FBUSxhQUM1RGtRLEtBQUtxRSxVQUFZRCxFQUdmckwsWUFDRixPQUFJaUgsS0FBS29ELFFBQWdCM0ksV0FBVzZCLGdCQUFnQjBELEtBQUtvRCxTQUNsRCxLQUdMQSxZQUFTZ0IsR0FDWHBFLEtBQUtrVyxTQUFXOVIsRUFDaEJwRSxLQUFLc0MsTUFBTXZKLE1BQVFxTCxFQUdqQmhCLGNBQ0YsT0FBSXBELEtBQUtrVyxTQUFpQmxXLEtBQUtrVyxTQUN4QixLQUdMaFQsZUFDRixPQUFJbEQsS0FBS2pILE1BQU1vSyxRQUFnQm5ELEtBQUtqSCxNQUFNbUssU0FDbkMsS0FHTGlULGdCQUNGLFFBQUluVyxLQUFLc0MsT0FBY3RDLEtBQUtzQyxNQUFNNlQsVUFJaENDLGVBQ0YsU0FBSXBXLEtBQUtzQyxPQUFTdEMsS0FBS3NDLE1BQU1wQixPQUFTbEIsS0FBS3NDLE1BQU1wQixNQUFNelEsT0FJekRsQixtQkFBb0JvUSxNQUNsQixNQUFNMFcsU0FBVyxJQUFJTCxhQUNyQnZiLFdBQVdxRixxQkFBcUJ1VyxTQUFVMVcsTUFDMUMsTUFBTTJXLFVBQVkzVyxLQUFLRSxjQUFjLGdCQUdyQyxPQUZBSCxTQUFTNlcsZUFBZUQsVUFBV0QsU0FBUy9ULE9BQzVDK1QsU0FBU2xLLFVBQVl4TSxLQUFLcU4sUUFBUSxZQUFZelosUUFBUTRZLFVBQy9Da0ssU0FHVC9sQix3QkFDRSxNQUNNcWIsV0FBYUMsZUFERiwrQ0FDMkI1TCxLQUFLc0MsT0FDM0NlLFlBQWMwSSxFQUFFQyxVQUFVTCxNQUFNLEdBQ3RDLE9BQUl0SSxhQUNGQSxZQUFZcFAsVUFBVXFoQixPQUFPLFlBQWEsWUFBYSxhQUNoRGpTLGFBRUYsS0FHVC9TLGdCQUFpQnlULGFBQWMsR0FHekJBLG1CQUNJL0QsS0FBS3dXLFVBR2IsTUFBTTdLLFdBQWFDLGVBTkYsNkNBTTJCNUwsTUFDdENxRCxZQUFjMEksRUFBRUMsVUFBVUwsTUFBTSxHQUV0QyxHQUFJNUgsWUFBYSxDQUNEVixZQUFZeEQsY0FBYyxnQkFDbEM0VyxrQkFBa0J6VyxLQUFLMFcsbUJBRy9CLE1BQU1sUixZQUFjLEdBQ3BCLElBQUl4SyxRQUNBZ0YsS0FBS2pILE9BQ0hpSCxLQUFLekQsTUFBT2lKLFlBQVlqSixNQUFReUQsS0FBS3pELE1BQ3BDaUosWUFBWXpNLE1BQVFpSCxLQUFLakgsTUFDOUJpQyxRQUFVcEosWUFBWXFKLFdBQVd1SyxjQUVqQ3hLLFFBQVVwSixZQUFZcUosYUFHeEIsTUFFTXhKLFNBQVcsQ0FDZk8sTUFIV2dPLEtBQUtqSCxNQUFNL0csS0FBT2dPLEtBQUtqSCxNQUFNL0csS0FBT3BDLEtBQUtvQyxNQUd6Q3lKLEdBQ1hULFFBQ0FELE9BQVFpRixLQUFLakYsT0FDYlcsUUFBUzJILFlBQVltSSxXQUlyQixDQUFDLFNBQVUsYUFBYXJhLFNBQVN2QixLQUFLSSxTQUFTRixJQUFJLE9BQVEsZUFFM0QyQixTQUFTQyxRQUFVRSxZQUFZNlQscUJBQXFCLE9BRWhDLGNBQWxCekYsS0FBS3ZRLFdBQTBCZ0MsU0FBU0UsT0FBUSxHQUVwREMsWUFBWStKLE9BQU9sSyxVQUFVbUssTUFBS0MsS0FDekJBLE1BSVh2TCxnQkFDRTBQLEtBQUtzQyxNQUFNcVUsZ0JBQWlCLFFBQ3RCM1csS0FBS3NDLE1BQU0rRyxXQUNackosS0FBS2lFLFNBQVlqRSxLQUFLb1csVUFBYXBXLEtBQUttVyxZQUN2Q25XLEtBQUs0VyxnQkFDRDVXLEtBQUtqSCxNQUFNcVMsYUFBYWpZLEtBQUs4RixPQUFPTyxZQUVwQ3dHLEtBQUtqSCxNQUFNcVMsYUFBYWpZLEtBQUs4RixPQUFPRyxjQUc5QzRHLEtBQUs2VyxTQUFVLEVBR2pCdm1CLHVCQUNFLE1BRU1xYixXQUFhQyxlQUZGLDZDQUUyQjVMLE1BQ3RDcUQsWUFBYzBJLEVBQUVDLFVBQVVMLE1BQU0sR0FhdEMsR0FYY3RJLFlBQVl4RCxjQUFjLGdCQUNsQzRXLGtCQUFrQnpXLEtBQUswVyxtQkFFeEIxVyxLQUFLaUUsVUFBV2pFLEtBQUtvVyxVQUFhcFcsS0FBS21XLFlBQ3RDblcsS0FBSzRXLGdCQUNENVcsS0FBS2pILE1BQU1xUyxhQUFhalksS0FBSzhGLE9BQU9PLFlBRXBDd0csS0FBS2pILE1BQU1xUyxhQUFhalksS0FBSzhGLE9BQU9HLGVBSXpDNEcsS0FBS21NLFVBQVcsT0FDckIsTUFBTUYsWUFBY3JjLEtBQUtzYyxTQUFTcGMsSUFBSWtRLEtBQUttTSxXQUVyQ3RRLFVBQVlvUSxZQUFZL0MsT0FBTyxDQUFFeE4sUUFBUzJILFlBQVltSSxZQUU1RCxhQURNbk0sR0FBRytNLEtBQUtDLGNBQWN4USxLQUFLLEdBQzFCQSxLQ3JLSixNQUFNaWIsMEJBQTBCbEYsT0FDckNtRixrQkFBbUJwTCxNQUNqQjdGLE1BQU1pUixrQkFBa0JwTCxNQUV4QkEsS0FDRzRDLEtBQUssaUJBQ0x5SSxPQUFNMW1CLE1BQUFBLE9BQWUwUCxLQUFLaVgsc0JBQXNCMWlCLFNBR3JEakUsNEJBQTZCaUUsT0FDM0IsTUFBTTJpQixHQUFLM2lCLE1BQU00aUIsY0FBY25LLFFBQVEsU0FHdkNoTixLQUFLM00sS0FBS0EsS0FBSzZSLE9BQU94SCxPQUFPd1osR0FBRzNqQixRQUFRNmpCLFFBQVF4VixVQUFXLEVBQzNEck4sTUFBTTRpQixjQUFjMUMsTUFBTTRDLFFBQVUsT0FDL0JyWCxLQUFLM00sS0FBS0EsS0FBS2lrQixRQUFPdFgsS0FBSzNNLEtBQUtBLEtBQUtpa0IsTUFBUSxHQUNsRHRYLEtBQUszTSxLQUFLQSxLQUFLaWtCLFFBQ0YvaUIsTUFBTTRpQixjQUFjbkssUUFBUSxtQkFDbkJuTixjQUFjLFVBQzNCMFgsVUFBWXZYLEtBQUszTSxLQUFLQSxLQUFLaWtCLE1BQ2hDdFgsS0FBSzNNLEtBQUtBLEtBQUtpa0IsT0FBU3RYLEtBQUszTSxLQUFLQSxLQUFLbWtCLGNBQ3pDeFgsS0FBS3lYLFFBSVRsb0Isb0JBQXFCOEQsTUFDbkIsTUFBTXNZLFdBQWFDLGVBQ2pCLGdEQUNBdlksTUFFRixPQUFPLElBQUk0aEIsU0FBUUMsVUFDTCxJQUFJNEIsa0JBQ2QsQ0FDRXRqQixNQUFPSCxLQUFLRyxNQUNaa0ksUUFBU2lRLEtBQ1R0WSxLQUNBd2UsUUFBUyxHQUNUNEYsTUFBTyxLQUNMLElBQUtwa0IsS0FBS2lrQixPQUFTamtCLEtBQUtta0IsYUFBYyxPQUFPdEMsU0FBUSxHQUNyRCxNQUFNdFQsU0FBV3ZPLEtBQUs2UixPQUFPN1QsUUFBT3dQLE9BQVNBLE1BQU1lLFdBQ25ELE9BQU9zVCxRQUFRdFQsWUFHbkIsQ0FBRThWLFFBQVMsQ0FBQyxPQUFRLFNBQVUsa0JBRTVCekYsUUFBTyxPQzdDVixNQUFNMEYsMEJBQTBCL0YsT0FDckNtRixrQkFBbUJwTCxNQUNqQjdGLE1BQU1pUixrQkFBa0JwTCxNQUV4QkEsS0FDRzRDLEtBQUssY0FDTHlJLE9BQU0xbUIsTUFBQUEsT0FBZTBQLEtBQUs0WCx3QkFBd0JyakIsU0FDckRvWCxLQUFLNEMsS0FBSyxVQUFVeUksT0FBTXppQixPQUFTeUwsS0FBSzZYLGlCQUFpQnRqQixTQUczRGpFLDhCQUErQmlFLE9BQzdCLE1BQU0yaUIsR0FBSzNpQixNQUFNNGlCLGNBQWNuSyxRQUFRLFNBQ2pDOEssU0FBV1osR0FBR2xLLFFBQVEsY0FDNUIsSUFBSyxNQUFNdE0sUUFBUW9YLFNBQVNwVyxpQkFBaUIsZUFDM0NoQixLQUFLek0sVUFBVXFoQixPQUFPLFlBQ3RCdFYsS0FBSzNNLEtBQUtBLEtBQUs2QixnQkFBZ0J3TCxLQUFLbk4sUUFBUVAsS0FBSzRPLFVBQVcsRUFDNUQ1QixLQUFLM00sS0FBS0EsS0FBSzZCLGdCQUFnQndMLEtBQUtuTixRQUFRUCxLQUFLK2tCLFVBQVcsRUFFOURoTSxFQUFFbUwsSUFBSWMsWUFBWSxZQUNsQmhZLEtBQUszTSxLQUFLQSxLQUFLNkIsZ0JBQWdCZ2lCLEdBQUczakIsUUFBUVAsS0FBSzRPLFVBQVcsRUFDdENzVixHQUNqQmxLLFFBQVEseUJBQ1JuTixjQUFjLFdBQ0wwWCxVQUNWdlgsS0FBSzNNLEtBQUtBLEtBQUs1QyxNQUNmdVAsS0FBSzNNLEtBQUtBLEtBQUs2QixnQkFBZ0JnaUIsR0FBRzNqQixRQUFRUCxLQUFLaWxCLFdBQzdDalksS0FBSzNNLEtBQUtBLEtBQUs2QixnQkFBZ0JnaUIsR0FBRzNqQixRQUFRUCxLQUFLbUssTUFDcEMrWixHQUNabEssUUFBUSx5QkFDUm5OLGNBQWMsbUJBQ1Y1TCxVQUFVcWhCLE9BQU8sWUFDeEJ0VixLQUFLM00sS0FBS0EsS0FBSzZrQixVQUFXLEVBYTVCNW5CLHVCQUF3QmlFLE9BQ3RCQSxNQUFNMGEsaUJBQ0YxYSxNQUFNNGlCLGNBQWNsakIsVUFBVWtrQixTQUFTLGFBQzNDclMsTUFBTTJSLFFBR1Jsb0Isb0JBQXFCOEQsTUFDbkIsTUFBTXNZLFdBQWFDLGVBQ2pCLGdEQUNBdlksTUFFRixPQUFPLElBQUk0aEIsU0FBUUMsVUFDTCxJQUFJeUMsa0JBQ2QsQ0FDRW5rQixNQUFPSCxLQUFLRyxNQUNaa0ksUUFBU2lRLEtBQ1R0WSxLQUNBd2UsUUFBUyxHQUNUNEYsTUFBTyxJQUNEcGtCLEtBQUs2a0IsU0FBaUJoRCxRQUFRN2hCLE1BQ3RCNmhCLFNBQVEsSUFHeEIsQ0FBRXdDLFFBQVMsQ0FBQyxPQUFRLFNBQVUsaUJBRTVCekYsUUFBTyxPQ3JFVixNQUFNbUcsMkJBQTJCeEcsT0FDdENtRixrQkFBbUJwTCxNQUNqQjdGLE1BQU1pUixrQkFBa0JwTCxNQUV4QkEsS0FDRzRDLEtBQUssY0FDTHlJLE9BQU0xbUIsTUFBQUEsT0FBZTBQLEtBQUs0WCx3QkFBd0JyakIsU0FHdkRqRSw4QkFBK0JpRSxPQUM3QixNQUFNMmlCLEdBQUszaUIsTUFBTTRpQixjQUFjbkssUUFBUSxTQUN2Q2hOLEtBQUszTSxLQUFLQSxLQUFLdU8sU0FBV3NWLEdBQUczakIsUUFBUVAsSUFDckNnTixLQUFLeVgsUUFHUGxvQixvQkFBcUI4RCxNQUNuQixNQUFNc1ksV0FBYUMsZUFDakIsK0NBQ0F2WSxNQUVGLE9BQU8sSUFBSTRoQixTQUFRQyxVQUNMLElBQUlrRCxtQkFDZCxDQUNFNWtCLE1BQU9ILEtBQUtHLE1BQ1prSSxRQUFTaVEsS0FDVHRZLEtBQ0F3ZSxRQUFTLEdBQ1Q0RixNQUFPLElBQ0Rwa0IsS0FBS3VPLFNBQWlCc1QsUUFBUTdoQixLQUFLdU8sVUFDM0JzVCxTQUFRLElBR3hCLENBQUV3QyxRQUFTLENBQUMsT0FBUSxTQUFVLGlCQUU1QnpGLFFBQU8sT0NsQ1YsTUFBTW9HLHlCQUF5QnpHLE9BQ3BDOU4sWUFBYXpRLEtBQU1wQixTQUNqQjZULE1BQU16UyxLQUFNcEIsU0FFWitOLEtBQUtzWSxPQUFTamxCLEtBQUtpbEIsUUFBVSxHQUcvQnZCLGtCQUFtQnBMLE1BQ2pCN0YsTUFBTWlSLGtCQUFrQnBMLE1BQ3hCQSxLQUFLNE0sR0FBRyxTQUFVLFFBQVN2WSxLQUFLd1ksZUFBZTdnQixLQUFLcUksT0FDcEQyTCxLQUFLNE0sR0FBRyxTQUFVLE9BQVF2WSxLQUFLeVksVUFBVTlnQixLQUFLcUksT0FDOUMyTCxLQUFLNE0sR0FDSCxRQUNBLHVCQUNBdlksS0FBSzBZLHNCQUFzQi9nQixLQUFLcUksT0FFbEMyTCxLQUFLNE0sR0FDSCxRQUNBLDJCQUNBdlksS0FBSzJZLDBCQUEwQmhoQixLQUFLcUksT0FFdEMyTCxLQUFLNE0sR0FDSCxRQUNBLDJCQUNBdlksS0FBSzRZLDBCQUEwQmpoQixLQUFLcUksT0FFdEMyTCxLQUFLNE0sR0FDSCxRQUNBLHdCQUNBdlksS0FBSzZZLHVCQUF1QmxoQixLQUFLcUksT0FFbkMyTCxLQUFLNE0sR0FBRyxRQUFTLFNBQVV2WSxLQUFLOFksVUFBVW5oQixLQUFLcUksT0FHakQxUCw0QkFBNkJpRSxPQUMzQkEsTUFBTTBhLGlCQUNOLE1BQ004SixVQURLeGtCLE1BQU00aUIsY0FBY25LLFFBQVEsU0FDbEJ6WixRQUFRUCxVQUN2QmdOLEtBQUtnWixtQkFBbUJELFdBR2hDem9CLGdDQUFpQ2lFLE9BQy9CQSxNQUFNMGEsaUJBQ04sTUFDTThKLFVBREt4a0IsTUFBTTRpQixjQUFjbkssUUFBUSxTQUNsQnpaLFFBQVFQLElBQzdCZ04sS0FBS2laLHVCQUF1QkYsV0FHOUJ6b0IsZ0NBQWlDaUUsT0FDL0JBLE1BQU0wYSxpQkFDTixNQUNNOEosVUFES3hrQixNQUFNNGlCLGNBQWNuSyxRQUFRLFNBQ2xCelosUUFBUVAsSUFDN0JnTixLQUFLa1osdUJBQXVCSCxXQUc5QnpvQiw2QkFBOEJpRSxPQUM1QkEsTUFBTTBhLGlCQUNOLE1BQ004SixVQURLeGtCLE1BQU00aUIsY0FBY25LLFFBQVEsU0FDbEJ6WixRQUFRUCxJQUM3QmdOLEtBQUttWixvQkFBb0JKLFdBRzNCem9CLGdCQUFpQmlFLE9BQ2YsTUFBTWtPLE9BQVNsTyxNQUFNNGlCLGNBQWM1akIsUUFBUWtQLE9BQzNDLEdBQWUsU0FBWEEsT0FDRixJQUFLLE1BQU0rTCxPQUFRLENBQ2pCLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsTUFDQSxjQUVNeE8sS0FBS2daLG1CQUFtQnhLLE1BSXJCLGFBQVgvTCxRQUNDbE8sTUFBTTRpQixjQUFjbGpCLFVBQVVra0IsU0FBUyxjQUV4Q25ZLEtBQUtvWixhQUNMcFosS0FBS3lYLFNBSVRubkIseUJBQTBCMEMsS0FDeEIsTUFDTXFtQixNQURLclosS0FBS3NaLFNBQVMsR0FBR3paLGNBQWMsb0JBQW9CN00sU0FDNUM2TSxjQUFjLFNBQzFCcE0sUUFBVXVNLEtBQUszTSxLQUFLQSxLQUFLNkIsZ0JBQWdCeU8sTUFBTTNRLEtBQ3JELEdBQUlxbUIsT0FBUzVsQixRQUFTLENBQ3BCLEdBQUl3UyxNQUFNdkksT0FBT2pLLFVBQVcsQ0FDMUIsTUFBTXhELEtBQU8sSUFBSUMsS0FBS3VELGVBQ2hCeEQsS0FBS21YLFNBQVMsQ0FBRTlXLE9BQU8sSUFDN0JMLEtBQUtrZSxVQUFVLENBQ2JwVCxPQUFRLDJCQUEyQmlGLEtBQUszTSxLQUFLQSxLQUFLNkIsZ0JBQWdCcWtCLEtBQUt2bUIsS0FBSzJiLFVBQVVsYixZQUV4RjRsQixNQUFNbGMsTUFBUWxOLEtBQUtRLFdBQ2Q0b0IsTUFBTWxjLE1BQVFPLE9BQU9qSyxTQUM1QnVNLEtBQUszTSxLQUFLQSxLQUFLNkIsZ0JBQWdCb1osT0FBT3RiLEtBQU8wSyxPQUFPMmIsTUFBTWxjLE9BQ3JENkMsS0FBS3NZLFNBQVF0WSxLQUFLc1ksT0FBUyxJQUNoQ3RZLEtBQUtzWSxPQUFPdGxCLE1BQU8sRUFFckJnTixLQUFLb1osYUFHUDlvQiw2QkFBOEIwQyxLQUM1QixNQUNNcW1CLE1BREtyWixLQUFLc1osU0FBUyxHQUFHelosY0FBYyxvQkFBb0I3TSxTQUM1QzZNLGNBQWMsU0FDNUJ3WixRQUNGQSxNQUFNbGMsTUFBUU8sT0FBTzJiLE1BQU1sYyxPQUFTLEVBQ3BDNkMsS0FBSzNNLEtBQUtBLEtBQUs2QixnQkFBZ0JvWixPQUFPdGIsS0FBTzBLLE9BQU8yYixNQUFNbGMsUUFFNUQ2QyxLQUFLb1osYUFHUDlvQiw2QkFBOEIwQyxLQUM1QixNQUNNcW1CLE1BREtyWixLQUFLc1osU0FBUyxHQUFHelosY0FBYyxvQkFBb0I3TSxTQUM1QzZNLGNBQWMsU0FDNUJ3WixPQUFTM2IsT0FBTzJiLE1BQU1sYyxPQUFTLElBQ2pDa2MsTUFBTWxjLE1BQVFPLE9BQU8yYixNQUFNbGMsT0FBUyxFQUNwQzZDLEtBQUszTSxLQUFLQSxLQUFLNkIsZ0JBQWdCb1osT0FBT3RiLEtBQU8wSyxPQUFPMmIsTUFBTWxjLFFBRTVENkMsS0FBS29aLGFBR1A5b0IsMEJBQTJCMEMsS0FDekIsTUFDTXFtQixNQURLclosS0FBS3NaLFNBQVMsR0FBR3paLGNBQWMsb0JBQW9CN00sU0FDNUM2TSxjQUFjLFNBQzVCd1osUUFDRkEsTUFBTWxjLE1BQVEsS0FDZDZDLEtBQUszTSxLQUFLQSxLQUFLNkIsZ0JBQWdCb1osT0FBT3RiLEtBQU8sR0FFL0NnTixLQUFLb1osYUFHUDlvQixxQkFBc0JpRSxPQUNwQkEsTUFBTTBhLGlCQUNOLE1BQU1vSyxNQUFROWtCLE1BQU00aUIsY0FDZGhhLE1BQVFPLE9BQU8yYixNQUFNbGMsT0FDdEI4SSxNQUFNOUksU0FDVDZDLEtBQUszTSxLQUFLQSxLQUFLNkIsZ0JBQWdCb1osT0FBTytLLE1BQU01YyxNQUFRVSxPQUd0RDZDLEtBQUtvWixhQUdQQSxhQUNFcFosS0FBSzNNLEtBQUtBLEtBQUs2QixnQkFBZ0Jza0IsT0FBTy9vQixNQUFRLEVBQzlDLElBQUssTUFBT3VDLElBQUttSyxTQUFVL0ssT0FBT2dDLFFBQ2hDNEwsS0FBSzNNLEtBQUtBLEtBQUs2QixnQkFBZ0JvWixRQUVuQixTQUFSdGIsTUFDRmdOLEtBQUszTSxLQUFLQSxLQUFLNkIsZ0JBQWdCc2tCLE9BQU8vb0IsT0FBUzBNLE9BSW5ELE1BQU1zYyxXQUFhelosS0FBS3NaLFNBQVMsR0FBR3paLGNBQWMsV0FDbEQsR0FBSUcsS0FBSzNNLEtBQUtBLEtBQUs2QixnQkFBZ0Jza0IsT0FBT0UsUUFBUyxDQUNqRCxHQUNFaGMsT0FBT3NDLEtBQUszTSxLQUFLQSxLQUFLNkIsZ0JBQWdCc2tCLE9BQU8vb0IsU0FDN0NpTixPQUFPc0MsS0FBSzNNLEtBQUtBLEtBQUs2QixnQkFBZ0Jza0IsT0FBT3JjLE9BRTdDc2MsV0FBV3hsQixVQUFVQyxJQUFJLGVBQ3BCLENBQ0x1bEIsV0FBV3hsQixVQUFVcWhCLE9BQU8sV0FDTHRWLEtBQUtzWixTQUFTLEdBQUd6WixjQUFjLG1CQUN2QzVMLFVBQVVxaEIsT0FBTyxZQUNoQ3RWLEtBQUszTSxLQUFLQSxLQUFLOFosVUFBVyxFQUVkc00sV0FBVzVaLGNBQWMsVUFDakMwWCxVQUFZdlgsS0FBSzNNLEtBQUtBLEtBQUs2QixnQkFBZ0Jza0IsT0FBT3JjLE1BTTFELEdBSGNzYyxXQUFXNVosY0FBYyxVQUNqQzBYLFVBQVl2WCxLQUFLM00sS0FBS0EsS0FBSzZCLGdCQUFnQnNrQixPQUFPL29CLE1BRXBEdVAsS0FBSzNNLEtBQUtBLEtBQUs2QixnQkFBZ0J5TyxNQUFNK1YsU0FDbkMxWixLQUFLc1ksU0FDUHRZLEtBQUszTSxLQUFLQSxLQUFLOFosVUFDWi9hLE9BQU9nQyxRQUFRNEwsS0FBS3NZLFFBQVEvSixNQUFLb0wsS0FBT0EsTUFDRixJQUF2Q3ZuQixPQUFPZ0MsUUFBUTRMLEtBQUtzWSxRQUFRaG5CLE9BQzFCME8sS0FBSzNNLEtBQUtBLEtBQUs4WixVQUFVLENBRXpCbk4sS0FBS3NaLFNBQVMsR0FBR3paLGNBQWMsbUJBQ2xCNUwsVUFBVXFoQixPQUFPLGFBTXhDaGxCLGdCQUFpQmlFLE9BQ2ZBLE1BQU0wYSxpQkFHUjFmLG9CQUFxQjhELE1BQ25CLE1BQU1pbEIsT0FBUyxHQUNmamxCLEtBQUs2QixnQkFBZ0Jza0IsT0FBTy9vQixNQUFRLEVBQ3BDLElBQUssTUFBT3VDLElBQUttSyxTQUFVL0ssT0FBT2dDLFFBQVFmLEtBQUs2QixnQkFBZ0JvWixRQUNqRCxTQUFSdGIsTUFDRkssS0FBSzZCLGdCQUFnQnNrQixPQUFPL29CLE9BQVMwTSxPQUFTLElBRTNDOEksTUFBTTlJLFFBQVVBLE1BQVEsSUFDM0JtYixPQUFPdGxCLE1BQU8sR0FJZEssS0FBSzZCLGdCQUFnQnNrQixPQUFPRSxTQUU1QmhjLE9BQU9ySyxLQUFLNkIsZ0JBQWdCc2tCLE9BQU8vb0IsU0FDbkNpTixPQUFPckssS0FBSzZCLGdCQUFnQnNrQixPQUFPcmMsU0FFbkM5SixLQUFLdW1CLGVBQWdCLEdBSXpCLE1BQU1qTyxXQUFhQyxlQUNqQiw2Q0FDQXZZLE1BRUYsT0FBTyxJQUFJNGhCLFNBQVFDLFVBQ0wsSUFBSW1ELGlCQUNkLENBQ0U3a0IsTUFBT0gsS0FBS0csTUFDWmtJLFFBQVNpUSxLQUNUdFksS0FDQWlsQixPQUNBekcsUUFBUyxHQUNUNEYsTUFBTyxJQUNEcGtCLEtBQUs4WixTQUFpQitILFNBQVEsR0FDdEJBLFNBQVEsSUFHeEIsQ0FBRXdDLFFBQVMsQ0FBQyxPQUFRLFNBQVUsaUJBRTVCekYsUUFBTyxPQzdPVixNQUFNNEgsc0JBQ1h0cUIsb0JBQ0UyVixPQUNBNFUsbUJBQ0FDLFVBQVksS0FDWnRkLEtBQU8sTUFFUCxNQUFNa1AsV0FBYUMsZUFDakIscURBQ0EsQ0FDRW9PLFVBQVc5VSxPQUFPNVQsT0FBUyxFQUMzQjRULE9BQ0ErVSxLQUFNRixVQUNOdGQsT0FHSixPQUFPLElBQUl3WSxTQUFRQyxVQUNqQixJQUFJZ0YsU0FBVyxLQUNmLE1BQU1DLElBQU0sSUFBSXZJLE9BQU8sQ0FDckJwZSxNQUFPaUosS0FDSDdNLEtBQUs0UCxLQUFLWSxPQUFPLHVCQUF3QixDQUFFM0QsT0FDM0M3TSxLQUFLNFAsS0FBS1ksT0FBTyw0QkFBNkIsQ0FDOUNnYSxlQUFnQk4scUJBRXBCcGUsUUFBU2lRLEtBQ1RrRyxRQUFTLENBQ1AxRSxTQUFVLENBQ1J3QixNQUFPL2UsS0FBSzRQLEtBQUtDLFNBQVMsaUJBQzFCcVMsU0FBVW5HLE9BQ1J1TyxTQUFXLElBQUlHLFNBQ2IxTyxLQUFLLEdBQUc5TCxjQUFjLHVCQUVqQnFWLFFBQVFnRixhQUlyQkksUUFBUyxXQUNUN0MsTUFBTyxJQUNFdkMsU0FBUSxLQUduQmlGLElBQUlsSSxRQUFPLE9DckNWLE1BQU1zSSxtQkFDWHpXLFlBQ0UwVyxpQkFBbUIsS0FDbkJDLGNBQWdCLEtBQ2hCdE8sVUFBWSxNQUVabk0sS0FBS3dhLGlCQUFtQkEsaUJBQ3hCeGEsS0FBS3lhLGNBQWdCQSxjQUNyQnphLEtBQUttTSxVQUFZQSxVQUduQjdiLHlCQUNFLE1BQU1xYixXQUFhQyxlQUFlNUwsS0FBSzZMLFNBQVU3TCxNQU8zQ3ZPLFNBQVcsQ0FDZk8sS0FBTXBDLEtBQUtvQyxLQUFLeUosR0FDaEJDLFFBQVNpUSxNQVFMbGMsU0FBV0csS0FBS0ksU0FBU0YsSUFBSSxPQUFRLFlBQ3ZDLENBQUMsU0FBVSxhQUFhcUIsU0FBUzFCLFlBQ25DZ0MsU0FBU0MsUUFBVUUsWUFBWTZULHFCQUFxQixPQUd0RGhVLFNBQVNFLE9BQVEsRUFFakIsTUFBTXNhLGtCQUFvQnJhLFlBQVkrSixPQUFPbEssVUFFN0MsT0FEQXVPLEtBQUttTSxVQUFZRixZQUFZeFEsR0FDdEJ3USxZQUdMakkseUJBQ0YsT0FBT3BVLEtBQUtJLFNBQVNGLElBQUksT0FBUSxzQkFHL0IyVSxhQUNGLE9BQUl6RSxLQUFLeWEsY0FDQUMsZ0JBQWdCQyxpQkFBaUIzYSxLQUFLeWEsZUFFeEMsS0FHTC9WLGtCQUNGLE9BQUkxRSxLQUFLeUUsT0FBZWhLLFdBQVcyQixnQkFBZ0I0RCxLQUFLeUUsT0FBT3BJLFVBQ3hELEtBR0x1ZSxnQkFDRixPQUFJNWEsS0FBS3dhLGlCQUNBSyxtQkFBbUJGLGlCQUFpQjNhLEtBQUt3YSxrQkFFM0MsS0FHTE0scUJBQ0YsT0FBSTlhLEtBQUs0YSxVQUNBbmdCLFdBQVcyQixnQkFBZ0I0RCxLQUFLNGEsVUFBVXZlLFVBRTVDLEtBR1QvTCxnQkFDRSxHQUFJMFAsS0FBS3lFLE9BQ1AsT0FBUXpFLEtBQUt5RSxPQUFPaEMsUUFDbEIsSUFBSyxhQUNDekMsS0FBSzRhLFVBQVUzcUIsS0FBS2dRLGFBQWUsR0FDckNELEtBQUsrYSxhQUFlbnJCLEtBQUs0UCxLQUFLWSxPQUFPLHdCQUF5QixDQUM1RDNELEtBQU11RCxLQUFLNGEsVUFBVW5lLE9BRXZCdUQsS0FBS3lDLE9BQVMsb0JBQ2R6QyxLQUFLZ2IsWUFBYSxJQUVsQmhiLEtBQUsrYSxhQUFlbnJCLEtBQUs0UCxLQUFLWSxPQUFPLHVCQUF3QixDQUMzRDNELEtBQU11RCxLQUFLNGEsVUFBVW5lLE9BRXZCdUQsS0FBS2liLE9BQVNqYixLQUFLNGEsVUFDbkI1YSxLQUFLZ2IsWUFBYSxHQUVwQmhiLEtBQUtpYixPQUFTamIsS0FBSzRhLFVBQ25CNWEsS0FBS2tiLFVBQVlsYixLQUFLNGEsVUFBVXRXLE9BQU9uRyxJQUN2QzZCLEtBQUttYixZQUFjbmIsS0FBSzRhLFVBQVV0VyxPQUFPN0gsS0FDekN1RCxLQUFLb2IsT0FBU3BiLEtBQUt5RSxPQUNuQixNQUVGLElBQUssUUFFRHpFLEtBQUs0YSxVQUFVM3FCLEtBQUtnUSxjQUFnQixHQUNwQ0QsS0FBS3lFLE9BQU94VSxLQUFLZ1EsY0FBZ0IsR0FFakNELEtBQUsrYSxhQUFlbnJCLEtBQUs0UCxLQUFLQyxTQUFTLGlCQUN2Q08sS0FBS2liLE9BQVMsS0FDZGpiLEtBQUtnYixZQUFhLEdBRWxCaGIsS0FBSzRhLFVBQVUzcUIsS0FBS2dRLGFBQWVELEtBQUt5RSxPQUFPeFUsS0FBS2dRLGNBRXBERCxLQUFLK2EsYUFBZW5yQixLQUFLNFAsS0FBS1ksT0FBTyx3QkFBeUIsQ0FDNUQzRCxLQUFNdUQsS0FBSzRhLFVBQVVuZSxPQUV2QnVELEtBQUtpYixPQUFTamIsS0FBSzRhLFVBQ25CNWEsS0FBS2tiLFVBQVlsYixLQUFLNGEsVUFBVXRXLE9BQU9uRyxJQUN2QzZCLEtBQUttYixZQUFjbmIsS0FBSzRhLFVBQVV0VyxPQUFPN0gsS0FDekN1RCxLQUFLb2IsT0FBU3BiLEtBQUt5RSxPQUNuQnpFLEtBQUt5QyxPQUFTLG9CQUNkekMsS0FBS2diLFlBQWEsR0FFbEJoYixLQUFLNGEsVUFBVTNxQixLQUFLZ1EsY0FBZ0JELEtBQUt5RSxPQUFPeFUsS0FBS2dRLGVBRXJERCxLQUFLK2EsYUFBZW5yQixLQUFLNFAsS0FBS1ksT0FBTyxvQkFBcUIsQ0FDeEQzRCxLQUFNdUQsS0FBS3lFLE9BQU9oSSxPQUVwQnVELEtBQUtpYixPQUFTamIsS0FBS3lFLE9BQ25CekUsS0FBS29iLE9BQVNwYixLQUFLNGEsVUFDbkI1YSxLQUFLa2IsVUFBWWxiLEtBQUt5RSxPQUFPNUQsTUFBTXhOLEtBQUs4SyxJQUN4QzZCLEtBQUttYixZQUFjbmIsS0FBS3lFLE9BQU81RCxNQUFNcEUsS0FDckN1RCxLQUFLeUMsT0FBUyxRQUNkekMsS0FBS2diLFlBQWEsR0FHcEIsTUFFRixJQUFLLFlBRURoYixLQUFLNGEsVUFBVTNxQixLQUFLZ1EsY0FBZ0IsR0FDcENELEtBQUt5RSxPQUFPeFUsS0FBS2dRLGNBQWdCLEdBRWpDRCxLQUFLK2EsYUFBZW5yQixLQUFLNFAsS0FBS0MsU0FBUyxpQkFDdkNPLEtBQUtpYixPQUFTLEtBQ2RqYixLQUFLZ2IsWUFBYSxHQUVsQmhiLEtBQUs0YSxVQUFVM3FCLEtBQUtnUSxjQUFnQkQsS0FBS3lFLE9BQU94VSxLQUFLZ1EsY0FFckRELEtBQUsrYSxhQUFlbnJCLEtBQUs0UCxLQUFLWSxPQUFPLHdCQUF5QixDQUM1RDNELEtBQU11RCxLQUFLNGEsVUFBVW5lLE9BRXZCdUQsS0FBS2liLE9BQVNqYixLQUFLNGEsVUFDbkI1YSxLQUFLa2IsVUFBWWxiLEtBQUs0YSxVQUFVdFcsT0FBT25HLElBQ3ZDNkIsS0FBS21iLFlBQWNuYixLQUFLNGEsVUFBVXRXLE9BQU83SCxLQUN6Q3VELEtBQUtvYixPQUFTcGIsS0FBS3lFLE9BQ25CekUsS0FBS2diLFlBQWEsR0FFbEJoYixLQUFLNGEsVUFBVTNxQixLQUFLZ1EsY0FBZ0JELEtBQUt5RSxPQUFPeFUsS0FBS2dRLGVBR3JERCxLQUFLK2EsYUFBZW5yQixLQUFLNFAsS0FBS1ksT0FBTyx3QkFBeUIsQ0FDNUQzRCxLQUFNdUQsS0FBS3lFLE9BQU9oSSxPQUVwQnVELEtBQUtpYixPQUFTamIsS0FBS3lFLE9BQ25CekUsS0FBS2tiLFVBQVlsYixLQUFLeUUsT0FBT0gsT0FBT25HLElBQ3BDNkIsS0FBS21iLFlBQWNuYixLQUFLeUUsT0FBT0gsT0FBTzdILEtBQ3RDdUQsS0FBS29iLE9BQVNwYixLQUFLNGEsVUFDbkI1YSxLQUFLZ2IsWUFBYSxHQUdwQixNQUVGLElBQUssV0FFRGhiLEtBQUs0YSxVQUFVM3FCLEtBQUtnUSxjQUFnQixHQUNwQ0QsS0FBS3lFLE9BQU94VSxLQUFLZ1EsY0FBZ0IsR0FFakNELEtBQUsrYSxhQUFlbnJCLEtBQUs0UCxLQUFLQyxTQUFTLGlCQUN2Q08sS0FBS2liLE9BQVMsS0FDZGpiLEtBQUtnYixZQUFhLEdBRWxCaGIsS0FBSzRhLFVBQVUzcUIsS0FBS2dRLGNBQWdCRCxLQUFLeUUsT0FBT3hVLEtBQUtnUSxjQUVyREQsS0FBSythLGFBQWVuckIsS0FBSzRQLEtBQUtZLE9BQU8sd0JBQXlCLENBQzVEM0QsS0FBTXVELEtBQUs0YSxVQUFVbmUsT0FFdkJ1RCxLQUFLaWIsT0FBU2piLEtBQUs0YSxVQUNuQjVhLEtBQUtrYixVQUFZbGIsS0FBSzRhLFVBQVV0VyxPQUFPbkcsSUFDdkM2QixLQUFLbWIsWUFBY25iLEtBQUs0YSxVQUFVdFcsT0FBTzdILEtBQ3pDdUQsS0FBS29iLE9BQVNwYixLQUFLeUUsT0FDbkJ6RSxLQUFLZ2IsWUFBYSxHQUVsQmhiLEtBQUs0YSxVQUFVM3FCLEtBQUtnUSxjQUFnQkQsS0FBS3lFLE9BQU94VSxLQUFLZ1EsZUFFckRELEtBQUsrYSxhQUFlbnJCLEtBQUs0UCxLQUFLWSxPQUFPLHVCQUF3QixDQUMzRDNELEtBQU11RCxLQUFLeUUsT0FBT2hJLE9BRXBCdUQsS0FBS2liLE9BQVNqYixLQUFLeUUsT0FDbkJ6RSxLQUFLa2IsVUFBWWxiLEtBQUt5RSxPQUFPNUQsTUFBTXhOLEtBQUs4SyxJQUN4QzZCLEtBQUttYixZQUFjbmIsS0FBS3lFLE9BQU81RCxNQUFNcEUsS0FDckN1RCxLQUFLb2IsT0FBU3BiLEtBQUs0YSxVQUNuQjVhLEtBQUtnYixZQUFhLFFBUWZoYixLQUFLNGEsVUFBVTNxQixLQUFLZ1EsYUFBZSxHQUM1Q0QsS0FBSythLGFBQWVuckIsS0FBSzRQLEtBQUtZLE9BQU8sd0JBQXlCLENBQzVEM0QsS0FBTXVELEtBQUs0YSxVQUFVbmUsT0FFdkJ1RCxLQUFLaWIsT0FBU2piLEtBQUs0YSxVQUNuQjVhLEtBQUtnYixZQUFhLElBRWxCaGIsS0FBSythLGFBQWVuckIsS0FBSzRQLEtBQUtZLE9BQU8sdUJBQXdCLENBQzNEM0QsS0FBTXVELEtBQUs0YSxVQUFVbmUsT0FFdkJ1RCxLQUFLaWIsT0FBU2piLEtBQUs0YSxVQUNuQjVhLEtBQUtnYixZQUFhLEdBR2hCaGIsS0FBS2liLFNBQ0hqYixLQUFLaWIsT0FBT2hyQixLQUFLZ1EsY0FBZ0JDLFVBQVVELGFBQWFLLFFBQzFETixLQUFLaWIsT0FBT2hyQixLQUFLb3JCLGdCQUFpQixFQUVsQ3JiLEtBQUtpYixPQUFPaHJCLEtBQUtvckIsZ0JBQWlCLEdBSXRDcmIsS0FBS2tZLFVBQVcsRUFDaEIsTUFBTXZNLFdBQWFDLGVBQWU1TCxLQUFLNkwsU0FBVTdMLE1BQ2pELEdBQUlBLEtBQUttTSxVQUFXLENBQ2xCLE1BQU10UixRQUFVakwsS0FBS3NjLFNBQVNwYyxJQUFJa1EsS0FBS21NLFdBQ2pDM0csWUFBYyxHQUNoQnhGLEtBQUtpYixTQUNIamIsS0FBS2liLE9BQU8xZSxRQUFPaUosWUFBWWpKLE1BQVF5RCxLQUFLaWIsT0FBTzFlLE1BQU0rZSxXQUN6RHRiLEtBQUtpYixPQUFPbGlCLFFBQU95TSxZQUFZek0sTUFBUWlILEtBQUtpYixPQUFPbGlCLFFBRXpELE1BQU1pQyxRQUFVZ0YsS0FBS2liLE9BQVNycEIsWUFBWXFKLFdBQVd1SyxhQUFlLEtBQzlEeFQsS0FDSmdPLEtBQUtpYixRQUFVamIsS0FBS2liLE9BQU9saUIsTUFBTS9HLEtBQzdCZ08sS0FBS2liLE9BQU9saUIsTUFBTS9HLEtBQ2xCcEMsS0FBS29DLEtBRVgsSUFBSTZKLElBQ0osT0FBS2hCLFNBTUhnQixJQURFYixjQUNVSCxRQUFRcU8sT0FBTyxDQUV6QmxYLEtBQU1BLEtBQUt5SixHQUNYVCxRQUNBVSxRQUFTaVEsYUFHQzlRLFFBQVFxTyxPQUFPLENBQ3pCbFgsS0FBTUEsS0FBS3lKLEdBQ1hDLFFBQVNpUSxhQUdQdE0sR0FBRytNLEtBQUtDLGNBQWN4USxLQUFLLEdBQzFCQSxVQWpCTHdELEdBQUdDLGNBQWNDLEtBQUssMkNBcUJ4QnNNLGVBQ0YsTUFBTyw0RENyUUosTUFBTTZPLHdCQUF3QjdXLGNBQ25DQyxZQUFhekgsU0FBVWtmLGdCQUFrQixLQUFNeFgsYUFBYyxHQUMzRCtCLE1BQU16SixTQUFVMEgsYUFDaEIvRCxLQUFLM0QsU0FBV0EsU0FDaEIyRCxLQUFLd2IsYUFBZSxLQUNwQnhiLEtBQUt1YixnQkFBa0JBLGdCQUN2QnZiLEtBQUsrRCxZQUFjQSxZQUNuQi9ELEtBQUtrWSxVQUFXLEVBRWhCbFksS0FBS3liLGFBQWMsRUFDbkJ6YixLQUFLMGIsV0FBWSxFQUNqQjFiLEtBQUsyYixhQUFjLEVBQ25CM2IsS0FBSzRiLFdBQVksRUFDakI1YixLQUFLNmIsY0FBZSxFQUVwQjdiLEtBQUttTSxVQUFZLEtBQ2pCbk0sS0FBS2MsUUFBVSxLQUNmZCxLQUFLVyxPQUFTLEtBQ2RYLEtBQUs4YixTQUFVLEVBQ2Y5YixLQUFLK2IsZUFBZ0IsRUFDckIvYixLQUFLZ2MsY0FBZSxFQUNwQmhjLEtBQUtpYyxhQUFjLEVBR2pCQyxxQkFDRixPQUNFbGMsS0FBSzhiLFNBQ0w5YixLQUFLK2IsZUFDTC9iLEtBQUtnYyxjQUNMaGMsS0FBS2ljLFlBSUx4WixhQUNGLE9BQUl6QyxLQUFLOGIsUUFBZ0IsUUFDckI5YixLQUFLK2IsY0FBc0IsYUFDM0IvYixLQUFLZ2MsYUFBcUIsWUFDMUJoYyxLQUFLaWMsWUFBb0IsV0FDdEIsS0FHTDNYLGFBQ0YsT0FBT3RFLEtBQUtqSCxNQUFNNkgsTUFBTTlRLElBQUlrUSxLQUFLVyxRQUcvQkUsWUFDRixPQUFPYixLQUFLakgsTUFBTTZILE1BQU05USxJQUFJa1EsS0FBS2MsU0FHL0IwYSxpQkFBY3BYLEdBQ2hCcEUsS0FBS21jLGNBQWdCL1gsRUFDckJwRSxLQUFLZ0YsVUFBWVosRUFHZm9YLG1CQVNGLE9BUkt4YixLQUFLbWMsaUJBQ0huYyxLQUFLb2MsWUFBY3BjLEtBQUt1YixrQkFDM0J2YixLQUFLb2MsV0FBYXZCLG1CQUFtQkYsaUJBQ25DM2EsS0FBS3ViLGtCQUdMdmIsS0FBS29jLGFBQVlwYyxLQUFLbWMsY0FBZ0JuYyxLQUFLb2MsV0FBVy9mLFdBRXZEMkQsS0FBS21jLGNBTUhuYyxLQUFLbWMsZUFMVjljLEdBQUdDLGNBQWNrVyxNQUNmLG1DQUFtQ3hWLEtBQUtqSCxNQUFNMEQsUUFFekMsTUFLUG1lLGdCQUNGLElBQUs1YSxLQUFLd2IsYUFBYyxDQUN0QixJQUFJeGIsS0FBS3ViLGdCQUtGLE9BQU8sS0FKWnZiLEtBQUtvYyxXQUFhdkIsbUJBQW1CRixpQkFDbkMzYSxLQUFLdWIsaUJBRVB2YixLQUFLd2IsYUFBZXhiLEtBQUtvYyxXQUFXL2YsU0FHeEMsT0FBTzVCLFdBQVc2QixnQkFBZ0IwRCxLQUFLd2IsY0FHckNhLHFCQU1GLE9BTEtyYyxLQUFLb2MsYUFDUnBjLEtBQUtvYyxXQUFhdkIsbUJBQW1CRixpQkFDbkMzYSxLQUFLdWIsa0JBR0Z2YixLQUFLb2MsV0FHVnZRLGVBQ0YsTUFBTyx1REFHVHRjLHdCQUF5QjRjLFdBQ3ZCLE1BQU10UixRQUFVakwsS0FBS3NjLFNBQVNwYyxJQUFJcWMsV0FDbEMsSUFBS3RSLFFBQVMsT0FBTyxLQUNyQixNQUFNOEUsS0FBT29NLEVBQUVsUixRQUFReEgsS0FBS3FJLFNBQVMsR0FFL0IrSSxPQUFTaVcsZ0JBQWdCaE8sWUFBWS9NLEtBQU13TSxXQUdqRCxPQUZBMUgsT0FBTzBILFVBQVlBLFVBRVoxSCxPQUdUbFYsd0JBQXlCZ0YsTUFBTytuQixlQUFnQixHQUM5QyxNQUFNM2MsS0FBT3BMLE1BQU00aUIsY0FBY25LLFFBQVEsaUJBQ25DdVAsS0FBT2hvQixNQUFNNGlCLGNBQWM1akIsUUFBUWdwQixLQUNuQ0MsVUFBWS9oQixXQUFXZ2lCLGtCQUFrQkYsTUFHL0MsR0FBS0QsY0FJRSxDQUVMLE1BQU03WCxPQUFTaVcsZ0JBQWdCaE8sWUFBWS9NLE1BQzNDOEUsT0FBT2lZLFdBQVdILE1BQ2xCOVgsT0FBT2tZLHNCQVBQaGQsS0FBS3BNLFFBQVFpcEIsV0FBeUMsU0FBNUI3YyxLQUFLcE0sUUFBUWlwQixXQUN2Q2pvQixNQUFNNGlCLGNBQWNsakIsVUFBVTJjLE9BQU8sZUFDckNyYyxNQUFNNGlCLGNBQWM1akIsUUFBUXFPLFNBQVdqQyxLQUFLcE0sUUFBUWlwQixXQVN4REUsV0FBWUUsVUFDVixNQUFNTCxLQUFPSyxTQUFTenJCLFNBQVMsS0FDM0JzSixXQUFXZ2lCLGtCQUFrQkcsVUFDN0JBLFNBQ0o1YyxLQUFLdWMsT0FBU3ZjLEtBQUt1YyxNQUdyQmpzQix1QkFDRSxNQUFNcWIsV0FBYUMsZUFBZTVMLEtBQUs2TCxTQUFVN0wsTUFFM0N3RixZQUFjLEdBQ2RqSixNQUFROUIsV0FBVzJCLGdCQUFnQjRELEtBQUszRCxVQUMxQ0UsTUFBT2lKLFlBQVlqSixNQUFRQSxNQUFNeEksU0FDaEN5UixZQUFZek0sTUFBUWlILEtBQUtqSCxNQUU5QixNQUFNaUMsUUFBVXBKLFlBQVlxSixXQUFXdUssYUFDbkN4RixLQUFLakgsTUFBTW9LLFVBQVNuSSxRQUFRMEIsTUFBUXNELEtBQUtqSCxNQUFNd0QsTUFBTUUsTUFFekQsSUFBSXpLLEtBQU9wQyxLQUFLb0MsS0FDaEIsUUFBK0IsSUFBcEJnTyxLQUFLakgsTUFBTS9HLEtBQXNCLENBQzFDLElBQUk2cUIsT0FBUyxHQUNiLE1BQU1DLElBQU1sdEIsS0FBS3VoQixNQUFNOWYsUUFBT3lDLEdBQUtBLEVBQUV1ZixPQUFNaGhCLEtBQUl5QixHQUFLQSxFQUFFMkgsS0FDdEQsSUFBSyxNQUFPdEgsRUFBRzdCLEtBQU1GLE9BQU9nQyxRQUFRNEwsS0FBS2pILE1BQU0xRixLQUFLMHBCLFlBQ2xELEdBQ0V6cUIsS0FDQzZJLE1BQU02aEIsMkJBQTZCN2hCLE1BQU04aEIsb0JBQW9CQyxNQUM5RCxDQUNBLEdBQVUsWUFBTi9vQixFQUFpQixDQUNuQjBvQixPQUFTanRCLEtBQUt1aEIsTUFBTTllLEtBQUl5QixHQUFLQSxFQUFFMkgsS0FDL0IsTUFDVXFoQixJQUFJM3JCLFNBQVNnRCxJQUN2QjBvQixPQUFPM3JCLEtBQUtpRCxHQUlsQixJQUFJdUgsUUFBVSxHQUNkLE9BQVFtaEIsT0FBT3ZyQixRQUNiLEtBQUssRUFFSCxNQUNGLEtBQUssT0FDc0MsSUFBOUIxQixLQUFLdWhCLE1BQU1yaEIsSUFBSStzQixPQUFPLE1BQy9CN3FCLEtBQU9wQyxLQUFLdWhCLE1BQU1yaEIsSUFBSStzQixPQUFPLEtBRS9CLE1BQ0YsUUFDRW5oQixRQUNFLE1BQVE5TCxLQUFLNFAsS0FBS0MsU0FBUyx5Q0FDN0IvRCxTQUFvQiw2Q0FDcEIsSUFBSyxNQUFNdkgsS0FBSzBvQixPQUNkbmhCLFFBQ0VBLFFBQ0Esa0JBQ0F2SCxFQUNBLEtBQ0F2RSxLQUFLdWhCLE1BQU1yaEIsSUFBSXFFLEdBQUdzSSxLQUNsQixZQUVKZixTQUFvQiw2QkFDZGtXLE9BQU91TCxPQUFPLENBQ2xCM3BCLE1BQU81RCxLQUFLNFAsS0FBS0MsU0FDZiw4Q0FFRi9ELFFBQ0FvVyxTQUFVbkcsT0FDUixNQUFNdU8sU0FBVyxJQUFJRyxTQUNuQjFPLEtBQUssR0FBRzlMLGNBQWMsZ0JBRXhCLElBQUssTUFBT3BELEtBQU1VLFNBQVUrYyxTQUNiLFNBQVR6ZCxPQUNGekssS0FBT3BDLEtBQUt1aEIsTUFBTXJoQixJQUFJcU4sc0JBTUUsSUFBcEI2QyxLQUFLakgsTUFBTS9HLE9BQzNCQSxLQUFPZ08sS0FBS2pILE1BQU0vRyxNQUdwQixNQUFNUCxTQUFXLENBQ2ZPLEtBQU1BLEtBQUt5SixHQUNYVCxRQUNBVSxRQUFTaVEsTUFHUCxDQUFDLFNBQVUsYUFBYXhhLFNBQVM2TyxLQUFLdlEsWUFDeENnQyxTQUFTQyxRQUFVRSxZQUFZNlQscUJBQXFCLE9BR3REaFUsU0FBU0UsT0FBUSxFQUVqQixNQUFNa0osY0FBZ0JqSixZQUFZK0osT0FBT2xLLFVBR3pDLE9BREF1TyxLQUFLbU0sVUFBWXRSLFFBQVFZLEdBQ2xCWixRQUdUdkssdUJBQ0UsTUFBTXVLLFFBQVVqTCxLQUFLc2MsU0FBU3BjLElBQUlrUSxLQUFLbU0sV0FDdkMsSUFBS3ZjLEtBQUtvQyxLQUFLcWhCLE1BQVF4WSxRQUFRN0ksS0FBS3lKLEtBQU83TCxLQUFLb0MsS0FBS3lKLEdBSW5ELFlBSEE0RCxHQUFHQyxjQUFjd1IsS0FDZmxoQixLQUFLNFAsS0FBS0MsU0FBUyxzQ0FJdkIsTUFBTWtNLFdBQWFDLGVBQWU1TCxLQUFLNkwsU0FBVTdMLE1BRTNDbkUsVUFBWWhCLFFBQVFxTyxPQUFPLENBQUV4TixRQUFTaVEsT0FFNUMsYUFETXRNLEdBQUcrTSxLQUFLQyxjQUFjeFEsS0FBSyxHQUMxQkEsSUFHVHZMLDJCQUNFc2IsZUFBZTVMLEtBQUs2TCxTQUFVN0wsTUFBTXBFLE1BQUsrUCxNQUNoQ0EsT0FJWHBjLDRCQUE2Qm9RLEtBQU1wTCxPQUNqQyxNQUFNa1EsT0FBU2lXLGdCQUFnQmhPLFlBQVkvTSxNQUUzQyxPQUFRcEwsTUFBTTRpQixjQUFjNWpCLFFBQVFrUCxRQUNsQyxJQUFLLFFBQ0hnQyxPQUFPcVgsU0FBVSxFQUNqQnJYLE9BQU9zWCxlQUFnQixFQUN2QnRYLE9BQU91WCxjQUFlLEVBQ3RCdlgsT0FBT3dYLGFBQWMsRUFDckJ4WCxPQUFPM0QsUUFBVXZNLE1BQU00aUIsY0FBYzVqQixRQUFRdU4sUUFDN0MyRCxPQUFPOUQsT0FBUyxLQUNoQixNQUVGLElBQUssYUFDSDhELE9BQU9xWCxTQUFVLEVBQ2pCclgsT0FBT3NYLGVBQWdCLEVBQ3ZCdFgsT0FBT3VYLGNBQWUsRUFDdEJ2WCxPQUFPd1gsYUFBYyxFQUNyQnhYLE9BQU8zRCxRQUFVLEtBQ2pCMkQsT0FBTzlELE9BQVMsS0FDaEIsTUFFRixJQUFLLFlBQ0g4RCxPQUFPcVgsU0FBVSxFQUNqQnJYLE9BQU9zWCxlQUFnQixFQUN2QnRYLE9BQU91WCxjQUFlLEVBQ3RCdlgsT0FBT3dYLGFBQWMsRUFDckJ4WCxPQUFPM0QsUUFBVXZNLE1BQU00aUIsY0FBYzVqQixRQUFRdU4sUUFDN0MyRCxPQUFPOUQsT0FBU3BNLE1BQU00aUIsY0FBYzVqQixRQUFRNnBCLFNBQzVDLE1BRUYsSUFBSyxXQUNIM1ksT0FBT3FYLFNBQVUsRUFDakJyWCxPQUFPc1gsZUFBZ0IsRUFDdkJ0WCxPQUFPdVgsY0FBZSxFQUN0QnZYLE9BQU93WCxhQUFjLEVBQ3JCeFgsT0FBTzNELFFBQVV2TSxNQUFNNGlCLGNBQWM1akIsUUFBUXVOLFFBQzdDMkQsT0FBTzlELE9BQVMsS0FTcEIsT0FGQThELE9BQU9rWSxpQkFFQWxZLE9BR1RuVSx3QkFBeUJ3USxRQUFVLEtBQU11YyxTQUFVLEdBQ2pELE1BQU0vYSxNQUFRLElBQUlwQyxVQXVCbEIsT0FyQkFvQyxNQUFNMkIsU0FBVSxFQUNoQjNCLE1BQU1nYixXQUFZLEVBQ2xCaGIsTUFBTUssbUJBQXFCM0MsS0FBS21NLFVBQ2hDN0osTUFBTUMsU0FBVyxVQUNqQkQsTUFBTUUsS0FBTyxTQUNiRixNQUFNRyxPQUFTekMsS0FBS3lDLE9BQ3BCSCxNQUFNdkosTUFBUWlILEtBQUtqSCxNQUNuQnVKLE1BQU01QixLQUFPVixLQUFLVyxPQUNsQjJCLE1BQU16QixNQUFRQyxRQUNkd0IsTUFBTU0sV0FBYTFDLFVBQVVtRyxnQkFBZ0JsRyxRQUM3Q21DLE1BQU1oQixhQUFlLEVBRWpCdEIsS0FBSzZiLGVBQWN2WixNQUFNaEIsY0FBZ0IsR0FDekN0QixLQUFLNGIsWUFBV3RaLE1BQU1oQixjQUFnQixTQUVwQ2dCLE1BQU1yUyxPQUNaK1AsS0FBS3NDLE1BQVFBLE1BQ2J0QyxLQUFLc1ksUUFBUyxFQUNkdFksS0FBS2tZLFVBQVcsRUFDWm1GLFNBQVMvYSxNQUFNNkwsWUFFWjdMLE1BR1RoUywrQkFDRTBQLEtBQUtzWSxRQUFTLEVBQ2R0WSxLQUFLa1ksVUFBVyxFQUNoQmxZLEtBQUsrYixlQUFnQixFQUNyQixNQUFNd0IsZUFBaUIsSUFBSWhELG1CQUN6QnZhLEtBQUt1YixnQkFDTHZiLEtBQUttTSxXQUdEcVIsd0JBQTBCRCxlQUFlRSxtQkFFL0N6ZCxLQUFLdWQsZUFBaUJDLGtCQUFrQi9oQixTQUNsQ3VFLEtBQUsyYyxpQkFHYnJzQix5QkFBMEJnUyxNQUFRLE1BQ2hDLElBQUtBLFFBQVV0QyxLQUFLc0MsTUFBTyxPQUFPLEtBT2xDLEdBTElBLFFBQU90QyxLQUFLc0MsTUFBUUEsT0FDeEJ0QyxLQUFLL1AsS0FBT3lQLFNBQVM0RCxhQUFhdEQsS0FBS3NDLE9BQ3ZDdEMsS0FBS3NZLFFBQVMsRUFFZHRZLEtBQUsvUCxLQUFLeXRCLFVBQVksR0FDbEIxZCxLQUFLL1AsS0FBS3NRLFNBQVUsQ0FDdEJQLEtBQUsvUCxLQUFLMHRCLFVBQVksWUFDdEIzZCxLQUFLL1AsS0FBSzJ0QixVQUFZaHVCLEtBQUs0UCxLQUFLQyxTQUFTLHdCQUN6QyxJQUFLLElBQUkyWCxNQUFRLEVBQUdBLE1BQVEsRUFBR0EsUUFDN0JwWCxLQUFLL1AsS0FBS3l0QixVQUFVeHNCLEtBQUssY0FFdEIsR0FBSThPLEtBQUsvUCxLQUFLdVEsT0FBUSxDQUMzQlIsS0FBSy9QLEtBQUswdEIsVUFBWSxVQUN0QjNkLEtBQUsvUCxLQUFLMnRCLFVBQVlodUIsS0FBSzRQLEtBQUtDLFNBQVMsZUFDekMsSUFBSyxJQUFJMlgsTUFBUSxFQUFHQSxNQUFRLEVBQUdBLFFBQzdCcFgsS0FBSy9QLEtBQUt5dEIsVUFBVXhzQixLQUFLLGVBRXRCLEdBQUk4TyxLQUFLL1AsS0FBSzR0QixRQUFTLENBQzVCN2QsS0FBSy9QLEtBQUswdEIsVUFBWSxZQUNsQnpkLFVBQVVELGFBQWFFLFVBQVlILEtBQUsvUCxLQUFLZ1EsZUFDL0NELEtBQUsvUCxLQUFLMnRCLFVBQVlodUIsS0FBSzRQLEtBQUtDLFNBQVMsd0JBRXZDUyxVQUFVRCxhQUFhSSxPQUFTTCxLQUFLL1AsS0FBS2dRLGVBQzVDRCxLQUFLL1AsS0FBSzJ0QixVQUFZaHVCLEtBQUs0UCxLQUFLQyxTQUFTLHFCQUV2Q1MsVUFBVUQsYUFBYUssVUFBWU4sS0FBSy9QLEtBQUtnUSxlQUMvQ0QsS0FBSy9QLEtBQUsydEIsVUFBWWh1QixLQUFLNFAsS0FBS0MsU0FBUyx3QkFFM0MsSUFBSyxJQUFJMlgsTUFBUSxFQUFHQSxNQUFRcFgsS0FBSy9QLEtBQUtnUSxhQUFjbVgsUUFDbERwWCxLQUFLL1AsS0FBS3l0QixVQUFVeHNCLEtBQUssYUFHM0I4TyxLQUFLL1AsS0FBSzB0QixVQUFZLFFBQ3RCM2QsS0FBSy9QLEtBQUsydEIsVUFBWWh1QixLQUFLNFAsS0FBS0MsU0FBUyxnQkFDekNPLEtBQUsvUCxLQUFLeXRCLFVBQVV4c0IsS0FBSyxTQUczQixNQUFNcXNCLGVBQWlCLElBQUloRCxtQkFDekJ2YSxLQUFLdWIsZ0JBQ0x2YixLQUFLbU0sV0FFRHFSLHdCQUEwQkQsZUFBZUUsbUJBRS9DemQsS0FBS3VkLGVBQWlCQyxrQkFBa0IvaEIsU0FDbEN1RSxLQUFLMmMsaUJBR2JwdEIsbUJBQW9Cb1EsS0FBTXdNLFVBQVksTUFDcEMsTUFBTTlQLFNBQVdzRCxLQUFLcE0sUUFBUThJLFNBQ3hCa2YsZ0JBQWtCNWIsS0FBS3BNLFFBQVFnb0IsZ0JBQy9CeFgsWUFBMkMsU0FBN0JwRSxLQUFLcE0sUUFBUXdRLFlBQzNCVSxPQUFTLElBQUlpVyxnQkFBZ0JyZSxTQUFVa2YsZ0JBQWlCeFgsYUFROUQsT0FOQVUsT0FBT3hVLEtBQU95UCxTQUFTZ04sWUFBWS9NLE1BQ25DbEYsV0FBV3FGLHFCQUFxQjJFLE9BQVE5RSxNQUVwQ0EsS0FBS3FOLFFBQVEsWUFDZnZJLE9BQU8wSCxVQUFZeE0sS0FBS3FOLFFBQVEsWUFBWXpaLFFBQVE0WSxVQUMvQzFILE9BQU8wSCxVQUFZQSxVQUNuQjFILE9BR1RxWixZQUFhQyxXQUFZQyxnQkFBaUJDLFNBRW5DamUsS0FBS2pILE1BQU1tbEIsVUFBVUgsYUFDeEIxZSxHQUFHQyxjQUFja1csTUFDZixHQUFHeFYsS0FBS2pILE1BQU0wRCxrREFHbEJ1RCxLQUFLL1AsS0FBS2tOLE1BQVEsS0FDbEI2QyxLQUFLL1AsS0FBS2dRLGFBQWUrZCxnQkFDekJoZSxLQUFLL1AsS0FBS2t1QixXQUFZLEVBQ3RCRixRQUFRMXFCLFFBQVE2cUIsV0FBWSxFQUU1QixNQUFNQyxVQUFZSixRQUFRcGUsY0FBYyxjQUN4Q3dlLFVBQVU5cUIsUUFBUTRKLE1BQVEsS0FDMUJraEIsVUFBVTlxQixRQUFRME0sYUFBZStkLGdCQUNqQ0ssVUFBVTlxQixRQUFRNHFCLFdBQVksRUFFOUIsTUFBTUcsYUFBZUwsUUFBUXBlLGNBQWMsbUJBQ3JDMGUsVUFBWU4sUUFBUXBlLGNBQWMsZUFDeEMsT0FBUW1lLGlCQUNOLEtBQUs5ZCxVQUFVRCxhQUFhRSxRQUMxQm9lLFVBQVVoSCxVQUFZM25CLEtBQUs0UCxLQUFLQyxTQUFTLHVCQUN6QzZlLGFBQWEvRyxVQUFZM25CLEtBQUs0UCxLQUFLWSxPQUNqQyxnQ0FDQSxDQUNFMmQsV0FDQTlkLGFBQWNyUSxLQUFLNFAsS0FBS0MsU0FBUyw0QkFHckMsTUFFRixLQUFLUyxVQUFVRCxhQUFhSSxLQUMxQmtlLFVBQVVoSCxVQUFZM25CLEtBQUs0UCxLQUFLQyxTQUFTLG9CQUN6QzZlLGFBQWEvRyxVQUFZM25CLEtBQUs0UCxLQUFLWSxPQUNqQyxnQ0FDQSxDQUNFMmQsV0FDQTlkLGFBQWNyUSxLQUFLNFAsS0FBS0MsU0FBUyx5QkFHckMsTUFFRixLQUFLUyxVQUFVRCxhQUFhSyxRQUMxQmllLFVBQVVoSCxVQUFZM25CLEtBQUs0UCxLQUFLQyxTQUFTLHVCQUN6QzZlLGFBQWEvRyxVQUFZM25CLEtBQUs0UCxLQUFLWSxPQUNqQyxnQ0FDQSxDQUNFMmQsV0FDQTlkLGFBQWNyUSxLQUFLNFAsS0FBS0MsU0FBUyw0QkFHckMsTUFFRixLQUFLUyxVQUFVRCxhQUFhTSxTQUMxQmdlLFVBQVVoSCxVQUFZM25CLEtBQUs0UCxLQUFLQyxTQUFTLHdCQUN6QzZlLGFBQWEvRyxVQUFZM25CLEtBQUs0UCxLQUFLWSxPQUNqQyxnQ0FDQSxDQUNFMmQsV0FDQTlkLGFBQWNyUSxLQUFLNFAsS0FBS0MsU0FBUyw2QkFTekM4ZSxVQUFVdHFCLFVBQVUwRyxRQUFRLFVBQVcsV0FDdkNzakIsUUFBUXBlLGNBQWMsaUJBQWlCeVYsU0FDdkMySSxRQUFRcGUsY0FBYyxpQkFBaUI0VSxNQUFNNEMsUUFBVSxPQUN2RG1ILFNBQVM3QixlQUFlc0IsVUMzZHJCLE1BQU1RLG1CQUNYM2EsWUFBYXpILFNBQVcsS0FBTXNFLE9BQVMsS0FBTW9ELGFBQWMsR0FDekQvRCxLQUFLM0QsU0FBV0EsU0FDaEIyRCxLQUFLVyxPQUFTQSxPQUNkWCxLQUFLK0QsWUFBY0EsWUFDbkIvRCxLQUFLa1ksVUFBVyxFQUNoQmxZLEtBQUswZSxPQUFRLEVBQ2IxZSxLQUFLMGIsV0FBWSxFQUNqQjFiLEtBQUsyYixhQUFjLEVBQ25CM2IsS0FBSzRiLFdBQVksRUFDakI1YixLQUFLNmIsY0FBZSxFQUNwQjdiLEtBQUttTSxVQUFZLEtBQ2pCbk0sS0FBSzJlLFdBQWEsS0FDbEIzZSxLQUFLc1ksUUFBUyxFQUNkdFksS0FBSzRlLFlBQWEsRUFDbEI1ZSxLQUFLNmUsZUFBZ0IsRUFDckI3ZSxLQUFLOGUsT0FBUSxFQUNiOWUsS0FBSytlLFVBQVcsRUFDaEIvZSxLQUFLa0QsU0FBVyxLQUNoQmxELEtBQUtnZixPQUFRLEVBQ2JoZixLQUFLaWYsa0JBQW9CLEVBQ3pCamYsS0FBS2tmLFNBQVcsR0FDaEIsSUFBSyxNQUFNanVCLElBQUssSUFBSXJCLEtBQUtvQyxLQUFLd1MsU0FBVSxDQUN0QyxNQUFNQyxPQUFTLElBQUkwYSxnQkFBZ0IsR0FBR2x1QixFQUFFdUwsTUFBTWYsTUFBTXhLLEVBQUV3SyxNQUN0RGdKLE9BQU9sSSxNQUFRdEwsRUFDZitPLEtBQUtrZixTQUFTaHVCLEtBQUt1VCxRQUVyQixHQUFJekUsS0FBS2tmLFNBQVM1dEIsT0FBUTBPLEtBQUtrZixTQUFTLEdBQUdudkIsUUFBUyxNQUMvQyxDQUNILE1BQU0wVSxPQUFTLElBQUkwYSxnQkFDbkIxYSxPQUFPMVUsUUFBUyxFQUNoQmlRLEtBQUtrZixTQUFTaHVCLEtBQUt1VCxRQUVyQixHQUFJcEksU0FBVSxDQUNaLE1BQU10RCxNQUFRMEIsV0FBVzZCLGdCQUFnQkQsVUFHekMsR0FGQTJELEtBQUt6RCxNQUFROUIsV0FBVzJCLGdCQUFnQkMsVUFDcEMyRCxLQUFLekQsUUFBT3lELEtBQUtrRCxTQUFXbkssTUFBTW1LLFVBQ2xDdkMsT0FBUSxDQUNLNUgsTUFBTTZILE1BQU05USxJQUFJNlEsVUFFekJYLEtBQUtzRSxPQUFPc2EsV0FBWTVlLEtBQUs0ZSxZQUFhLEVBQ3JDNWUsS0FBS3NFLE9BQU9qUixLQUFLQSxLQUFLK3JCLFdBQVd4b0IsT0FBTW9KLEtBQUsrZSxVQUFXLEtBSXRFLEdBQUkvZSxLQUFLa0QsU0FDUCxJQUFLLE1BQU1qUyxLQUFLK08sS0FBS2tmLFNBQ25CLEdBQUlqdUIsRUFBRXNMLE9BQVN5RCxLQUFLekQsTUFBTyxDQUN6QnRMLEVBQUV3TixTQUFXaEUsV0FBVzRrQixZQUFZcHVCLEVBQUVzTCxNQUFPeUQsS0FBS3pELE9BQ2xEdEwsRUFBRXF1QixnQkFBa0JsdkIsS0FBS212QixNQUF5QixJQUFuQnR1QixFQUFFd04sU0FBU3RCLE9BQWUsSUFDekRsTSxFQUFFdXVCLGFBQWV2dUIsRUFBRXdOLFNBQVNqTyxLQUM1QixNQUFNaXZCLFNBQ0pydkIsS0FBS212QixNQUF1QyxJQUFqQzlrQixXQUFXaWxCLFFBQVF6dUIsRUFBRXdOLFdBQW1CLElBRXJELEdBQUl1QixLQUFLakgsTUFBTyxDQUNkOUgsRUFBRTB1QixpQkFBa0IsRUFHaEJGLFVBREZ6ZixLQUFLakgsTUFBTTFGLEtBQUtBLEtBQUs2QixnQkFBZ0JJLElBQUk2SCxNQUFRLEtBQ3RCbE0sRUFBRTB1QixpQkFBa0IsR0FFL0MzZixLQUFLc0UsUUFDSHRFLEtBQUtzRSxPQUFPc2IsWUFDZDN1QixFQUFFMnVCLFdBQVksRUFDZDN1QixFQUFFNHVCLFdBQVksRUFDZDV1QixFQUFFNnVCLGNBQWUsRUFDakI3dUIsRUFBRTh1QixZQUFhLEVBQ1gvZixLQUFLc0UsT0FBT2pSLEtBQUtBLEtBQUsrckIsV0FBVzVvQixTQUMvQmlwQixVQUFZemYsS0FBS3NFLE9BQU9zYixZQUFXM3VCLEVBQUUydUIsV0FBWSxHQUVuREgsU0FBV3pmLEtBQUtzRSxPQUFPc2IsV0FDdkJILFVBQVl6ZixLQUFLc0UsT0FBT3ViLFlBRXhCNXVCLEVBQUU0dUIsV0FBWSxHQUdkSixTQUFXemYsS0FBS3NFLE9BQU91YixXQUN2QkosVUFBWXpmLEtBQUtzRSxPQUFPd2IsZUFFeEI3dUIsRUFBRTZ1QixjQUFlLEdBRWZMLFNBQVd6ZixLQUFLc0UsT0FBT3diLGVBQWM3dUIsRUFBRTh1QixZQUFhLEtBRXBETixVQUFZemYsS0FBS3NFLE9BQU9zYixZQUFXM3VCLEVBQUUydUIsV0FBWSxHQUVuREgsU0FBV3pmLEtBQUtzRSxPQUFPc2IsV0FDdkJILFVBQW9DLEVBQXhCemYsS0FBS3NFLE9BQU9zYixZQUV4QjN1QixFQUFFNHVCLFdBQVksR0FHZEosU0FBbUMsRUFBeEJ6ZixLQUFLc0UsT0FBT3NiLFdBQ3ZCSCxVQUFvQyxFQUF4QnpmLEtBQUtzRSxPQUFPc2IsWUFFeEIzdUIsRUFBRTZ1QixjQUFlLEdBRWZMLFNBQW1DLEVBQXhCemYsS0FBS3NFLE9BQU9zYixZQUFlM3VCLEVBQUU4dUIsWUFBYSxJQUd2RDl1QixFQUFFMnVCLFdBQWEzdUIsRUFBRTR1QixXQUFhNXVCLEVBQUU2dUIsY0FBZ0I3dUIsRUFBRTh1QixhQUVwRDl1QixFQUFFMnVCLFdBQVksU0FLZjN1QixFQUFFMnVCLFdBQVksRUFLdkI1Yix5QkFDRixPQUFPcFUsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLHNCQUcvQnlWLGVBQ0YsTUFBTXBILElBQU0xRCxXQUFXNEssbUJBQW1CckYsS0FBSzNELFVBQy9DLE9BQUk4QixLQUNHLHFDQUdMcEYsWUFDRixPQUFPMEIsV0FBVzZCLGdCQUFnQjBELEtBQUszRCxVQUdyQ3FFLFdBQ0YsT0FBT1YsS0FBS2pILE1BQU02SCxNQUFNOVEsSUFBSWtRLEtBQUtXLFFBRy9CMkQsYUFDRixPQUFPdEUsS0FBS1UsS0FHVjhELGNBRUYsT0FES3hFLEtBQUtrZixXQUFVbGYsS0FBS2tmLFNBQVcsSUFDN0JsZixLQUFLa2YsU0FHVnphLGFBQ0YsT0FBSXpFLEtBQUt3RSxTQUFXeEUsS0FBS3dFLFFBQVFsVCxPQUFlME8sS0FBS3dFLFFBQVFNLE1BQ3RELEtBR0xJLGFBQ0YsT0FBT2xGLEtBQUtqSCxNQUFNb00sZ0JBQWdCbkYsS0FBS1csUUFHckNxZixzQkFDRixPQUFPaGdCLEtBQUtqSCxNQUFNNkgsTUFBTTlRLElBQUlrUSxLQUFLc0UsT0FBT2pSLEtBQUtBLEtBQUt3TixNQUFNb2YsS0FBS3hrQixJQUczRHlrQixzQkFDRixPQUFJbGdCLEtBQUtzRSxPQUFPalIsS0FBS0EsS0FBS3dOLE1BQU1zZixXQUFXMWtCLEdBQ2xDdUUsS0FBS2pILE1BQU02SCxNQUFNOVEsSUFBSWtRLEtBQUtzRSxPQUFPalIsS0FBS0EsS0FBS3dOLE1BQU1zZixXQUFXMWtCLElBRTlEdUUsS0FBS2dnQixnQkFHVkksZUFDRixPQUFPcGdCLEtBQUs4ZSxPQUFTOWUsS0FBSytlLFNBR3hCc0Isa0JBQ0YsT0FBT3JnQixLQUFLK2UsVUFBWS9lLEtBQUs2ZSxjQUczQnlCLGFBSUYsWUFISXBjLElBQWNsRSxLQUFLdWdCLFVBQ3JCdmdCLEtBQUt1Z0IsUUFBVXZnQixLQUFLakgsTUFBTXluQixhQUFhLFdBRWxDeGdCLEtBQUt1Z0IsUUFHVkUsbUJBQ0YsT0FBS3pnQixLQUFLa2YsU0FBUzV0QixPQUNaME8sS0FBS2tmLFNBQVMzUSxNQUFLdGQsR0FBS0EsRUFBRWxCLFNBREMsS0FJaEMyd0IsWUFFRixZQURJeGMsSUFBY2xFLEtBQUsyZ0IsU0FBUTNnQixLQUFLMmdCLE9BQVMsSUFDdEMzZ0IsS0FBSzJnQixPQUdWQyxzQkFDRixPQUFPNWdCLEtBQUswZ0IsTUFBTXB2QixPQUFTLEVBR3pCdXZCLGlDQUNGLE9BQU83Z0IsS0FBSzhnQixpQkFHVlIsV0FBUVMsR0FDVi9nQixLQUFLdWdCLFFBQVVRLEVBR2JDLG9CQUNGLElBQUlDLFFBQVMsRUFDYixJQUFLLE1BQU1yZCxLQUFLNUQsS0FBSzJELE1BQ25Cc2QsT0FBU0EsUUFBVXJkLEVBQUV1UyxVQUV2QixPQUFPOEssT0FHTEMscUJBQ0YsTUFBTUMsS0FBTyxHQUNiLElBQUssSUFBSS9KLE1BQVEsRUFBR0EsTUFBUXBYLEtBQUsyRCxNQUFNclMsT0FBUThsQixRQUM3QyxHQUFJcFgsS0FBSzJELE1BQU15VCxPQUFPakIsVUFBVyxDQUMvQixNQUFNaUwsSUFBTSxDQUNWbnhCLEtBQU0rUCxLQUFLMkQsTUFBTXlULE9BQ2pCaUssS0FBTXJoQixLQUFLMGdCLE1BQU10SixRQUVuQitKLEtBQUtqd0IsS0FBS2t3QixLQUdkLE9BQW9CLElBQWhCRCxLQUFLN3ZCLE9BQXFCNnZCLEtBQ2xCLEtBR1ZHLGdCQUNGLE9BQU90aEIsS0FBSzBnQixNQUFRMWdCLEtBQUswZ0IsTUFBTXB2QixPQUFTLEVBR3RDaXdCLGdCQUNGLE9BQU92aEIsS0FBS3NFLE9BQU9rZCxnQkFHakJDLGVBQ0YsT0FBSXpoQixLQUFLK2UsU0FBaUIsSUFHbkIvZSxLQUFLc0UsT0FBT2pSLEtBQUtBLEtBQUtxdUIsYUFBYXR3QixJQUN0Q21CLFNBQVN5TixLQUFLc0UsT0FBT2pSLEtBQUtBLEtBQUtxdUIsYUFBYXR3QixLQUM1QyxFQUdGdXdCLGlCQUNGLE9BQU8veEIsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGlCQUcvQjh4Qix5QkFDRixPQUFPaHlCLEtBQUtJLFNBQVNGLElBQUksT0FBUSx3QkFHL0IreEIsZ0JBQ0YsT0FBSTdoQixLQUFLMmhCLFlBQ0wzaEIsS0FBS2lmLG1CQUFxQmpmLEtBQUtzRSxPQUFPa2QsZ0JBSXhDTSxpQkFDRixPQUFJOWhCLEtBQUs0aEIsdUJBQ0w1aEIsS0FBSzBnQixPQUFjMWdCLEtBQUswZ0IsTUFBTXB2QixRQUFVME8sS0FBS3loQixVQUkvQ00saUJBQ0YsSUFBSy9oQixLQUFLc0UsT0FBT2pSLEtBQUtBLEtBQUsrckIsV0FBV3hvQixLQUFNLE9BQU8sRUFDbkQsR0FBSW9KLEtBQUtnaUIsWUFBYSxPQUFPaGlCLEtBQUtnaUIsWUFDbEMsTUFBTUMsS0FBTzd4QixLQUFLdWlCLE1BQU0zUyxLQUFLa2dCLGdCQUFnQi9pQixNQUFRLElBQ3JELE9BQU84a0IsS0FBTyxFQUFJLEVBQUlBLEtBR3BCRixlQUFZM2QsR0FDVkEsR0FBS2hVLEtBQUt1aUIsTUFBTTNTLEtBQUtrZ0IsZ0JBQWdCL2lCLE1BQVEsSUFDL0M2QyxLQUFLZ2lCLFlBQWM1eEIsS0FBS3VpQixNQUFNM1MsS0FBS2tnQixnQkFBZ0IvaUIsTUFBUSxJQUNsRGlILEdBQUssSUFDZHBFLEtBQUtnaUIsWUFBYyxHQUVyQmhpQixLQUFLZ2lCLFlBQWN6dkIsU0FBUzZSLEdBRzFCOGQsc0JBQ0YsT0FBd0IsSUFBcEJsaUIsS0FBSytoQixXQUlQSSxzQkFLRixPQUhFL3hCLEtBQUt1aUIsTUFBTTNTLEtBQUtrZ0IsZ0JBQWdCL2lCLE1BQVEsSUFBTSxFQUMxQyxFQUNBL00sS0FBS3VpQixNQUFNM1MsS0FBS2tnQixnQkFBZ0IvaUIsTUFBUSxPQUM5QjZDLEtBQUsraEIsV0FJdkJLLGlCQUFrQnB2QixLQUNoQixPQUFPZ04sS0FBS2tmLFNBQVMzUSxNQUFLdGQsR0FBSytCLE1BQVEvQixFQUFFb0wsV0FHM0NnbUIsd0JBQ0UsSUFBSyxNQUFNcHhCLEtBQUsrTyxLQUFLd0UsUUFDbkJ2VCxFQUFFNnZCLGVBQWlCOWdCLEtBQUs4Z0IsZUFBZTd2QixHQUkzQzZ2QixlQUFnQjd2QixFQUFJLE1BQ2xCLE1BQU13VCxPQUFTeFQsR0FBSytPLEtBQUt5Z0IsYUFDekIsSUFBSS9jLE9BQVMxRCxLQUFLc0UsT0FBT2pSLEtBQUtBLEtBQUtpdkIsTUFBTUMsT0FBTzdlLE9BQzVDMUQsS0FBS3NFLE9BQU9qUixLQUFLQSxLQUFLK3JCLFdBQVc1b0IsVUFDL0J2RixFQUFFNHVCLFlBQVduYyxPQUFTMUQsS0FBS3NFLE9BQU9qUixLQUFLQSxLQUFLaXZCLE1BQU1FLEtBQUs5ZSxRQUN2RHpTLEVBQUU2dUIsZUFBY3BjLE9BQVMxRCxLQUFLc0UsT0FBT2pSLEtBQUtBLEtBQUtpdkIsTUFBTWhpQixRQUFRb0QsU0FFbkUsSUFDSWQsV0FEQTNQLFNBQVd3UixPQUFPeFIsU0FHakIyUCxXQURMNUMsS0FBS3NFLE9BQU9qUixLQUFLQSxLQUFLK3JCLFdBQVc1b0IsUUFDZixFQUNBaU8sT0FBTzdCLFdBQ3pCLElBQUk2ZixlQUFpQixHQU9yQixHQU5JemlCLEtBQUtzZ0IsUUFBbUMsSUFBekJ0Z0IsS0FBSzRnQixpQkFBdUIzdEIsV0FDM0MrTSxLQUFLNGIsV0FBVzNvQixXQUNoQitNLEtBQUs2YixjQUFjNW9CLFdBQ25CK00sS0FBSzBpQixRQUFRenZCLFdBQ2IrTSxLQUFLNmUsZ0JBQWtCN2UsS0FBSytlLFVBQVU5ckIsV0FDdEMrTSxLQUFLK2UsV0FBVTlyQixVQUFZK00sS0FBSzRnQixnQkFBa0IsR0FDbEQzdEIsVUFBWSxFQUFHLENBRWpCMlAsWUFEZXhTLEtBQUtDLElBQUk0QyxTQUFXLEdBRS9CMlAsV0FBYTFDLFVBQVVtRyxnQkFBZ0I5RixXQUN6Q3FDLFdBQWExQyxVQUFVbUcsZ0JBQWdCc2MsWUFFekMxdkIsVUFBWSxFQWlCZCxPQWRJaU4sVUFBVW1HLGdCQUFnQmxHLFVBQVl5QyxhQUN4QzZmLGVBQWlCLFdBRWZ2aUIsVUFBVW1HLGdCQUFnQmhHLE9BQVN1QyxhQUFZNmYsZUFBaUIsUUFDaEV2aUIsVUFBVW1HLGdCQUFnQi9GLFVBQVlzQyxhQUN4QzZmLGVBQWlCLFdBRWZ2aUIsVUFBVW1HLGdCQUFnQjlGLFdBQWFxQyxhQUN6QzZmLGVBQWlCLFlBRWZ2aUIsVUFBVW1HLGdCQUFnQnNjLGFBQWUvZixhQUMzQzZmLGVBQWlCLGNBR1osQ0FDTEcsTUFBT2hnQixXQUNQbkcsS0FBTWdtQixlQUNOeHZCLFNBQ0F5USxPQUNBaWYsV0FBWS9mLGFBQWUxQyxVQUFVbUcsZ0JBQWdCc2MsWUFRekRFLHlCQUNFN2lCLEtBQUtxaUIsd0JBQ0wsTUFBTWhCLEtBQU8sQ0FDWDVjLE9BQVF6RSxLQUFLeWdCLGFBQ2JYLGFBQWM5ZixLQUFLeWdCLGFBQWFYLGFBQ2hDempCLFNBQVUyRCxLQUFLeWdCLGFBQWFwa0IsU0FDNUJ5bUIsVUFBVzlpQixLQUFLeWdCLGFBQWFoa0IsS0FDN0JtRyxXQUFZNUMsS0FBS3lnQixhQUFhSyxlQUFlOEIsTUFDN0MzdkIsU0FBVStNLEtBQUt5Z0IsYUFBYUssZUFBZTd0QixTQUMzQ3lRLE9BQVExRCxLQUFLeWdCLGFBQWFLLGVBQWVwZCxPQUN6Q3FmLFlBQWEsRUFDYkMsZUFBZ0IsRUFDaEJDLG1CQUFvQixFQUNwQkMsU0FBUyxHQUdYLElBQUlDLFdBQWFuakIsS0FBS3VoQixVQUFZdmhCLEtBQUtpZixrQkFFdkMsR0FBSWpmLEtBQUsrZSxTQUFVLENBQ2pCLEdBQUkvZSxLQUFLNGdCLGdCQUFrQixFQUFHLENBQzVCLE1BQU13QyxhQUFlcGpCLEtBQUswZ0IsTUFBTTFnQixLQUFLNGdCLGdCQUFrQixHQUN2RCxHQUFJd0MsYUFBYS9tQixXQUFhMkQsS0FBS3lnQixhQUFhcGtCLFNBQVUsQ0FDeEQsTUFBTW9DLFNBQVdoRSxXQUFXNGtCLFlBQzFCNWtCLFdBQVcyQixnQkFBZ0JnbkIsYUFBYS9tQixVQUN4QzVCLFdBQVcyQixnQkFBZ0I0RCxLQUFLeWdCLGFBQWFwa0IsV0FFL0NnbEIsS0FBSzJCLGVBQWlCNXlCLEtBQUt1aUIsTUFBTWxZLFdBQVdpbEIsUUFBUWpoQixXQUNoRDRpQixLQUFLMkIsZ0JBQWtCRyxhQUFlbmpCLEtBQUsyaEIsYUFDN0NOLEtBQUsyQixlQUFpQkcsV0FDdEJBLFdBQWEsR0FFZm5qQixLQUFLaWYsa0JBQ0gxc0IsU0FBU3lOLEtBQUtpZixtQkFBcUJvQyxLQUFLMkIsZUFDMUMzQixLQUFLNkIsU0FBVSxHQUduQjdCLEtBQUswQixZQUFjL2lCLEtBQUsraEIsV0FDcEJWLEtBQUswQixhQUFlLElBQUcxQixLQUFLMEIsWUFBYyxHQUMxQzFCLEtBQUswQixhQUFlSSxhQUFlbmpCLEtBQUsyaEIsYUFDMUNOLEtBQUswQixZQUFjSSxXQUNuQkEsV0FBYSxHQUdmOUIsS0FBSzRCLG1CQUFxQjVCLEtBQUswQixZQUFjMUIsS0FBSzJCLGVBRWhEaGpCLEtBQUs4ZSxRQUNQdUMsS0FBSzBCLFlBQWN4d0IsU0FBU3lOLEtBQUtzRSxPQUFPalIsS0FBS0EsS0FBS3F1QixhQUFhNUMsT0FDM0R2c0IsU0FBU3lOLEtBQUtzRSxPQUFPalIsS0FBS0EsS0FBS3F1QixhQUFhNUMsT0FDNUMsRUFDQXVDLEtBQUswQixhQUFlSSxhQUFlbmpCLEtBQUsyaEIsYUFDMUNOLEtBQUswQixZQUFjSSxXQUNuQkEsV0FBYSxJQUlqQm5qQixLQUFLaWYsa0JBQW9CMXNCLFNBQVN5TixLQUFLaWYsbUJBQXFCb0MsS0FBSzBCLFlBRTdEL2lCLEtBQUtzZ0IsU0FDUHRnQixLQUFLc2dCLFFBQVMsRUFDZHRnQixLQUFLZ2YsT0FBUSxHQUdmaGYsS0FBSzBnQixNQUFNeHZCLEtBQUttd0IsTUFHZHhWLGVBQ0YsTUFBTywwREFHVHZiLHVCQUNFMFAsS0FBS3FpQix3QkFDTCxNQUFNMVcsV0FBYUMsZUFBZTVMLEtBQUs2TCxTQUFVN0wsTUFLM0N3RixZQUFjLEdBQ2RqSixNQUFROUIsV0FBVzJCLGdCQUFnQjRELEtBQUszRCxVQUMxQ0UsTUFBT2lKLFlBQVlqSixNQUFRQSxNQUFNeEksU0FDaEN5UixZQUFZek0sTUFBUWlILEtBQUtqSCxNQUU5QixNQUFNaUMsUUFBVXBKLFlBQVlxSixXQUFXdUssYUFJakMvVCxTQUFXLENBQ2ZPLE1BRldnTyxLQUFLakgsTUFBTS9HLEtBQU9nTyxLQUFLakgsTUFBTS9HLEtBQU9wQyxLQUFLb0MsTUFFekN5SixHQUNYVCxRQUNBVSxRQUFTaVEsTUFHTGxjLFNBQVdHLEtBQUtJLFNBQVNGLElBQUksT0FBUSxZQUN2QyxDQUFDLFNBQVUsYUFBYXFCLFNBQVMxQixZQUNuQ2dDLFNBQVNDLFFBQVVFLFlBQVk2VCxxQkFBcUIsT0FHdERoVSxTQUFTRSxPQUFRLEVBSWpCLGFBRjBCQyxZQUFZK0osT0FBT2xLLFVBSy9DbkIsdUJBQ0UwUCxLQUFLcWlCLHdCQUNMLE1BQU0xVyxXQUFhQyxlQUFlNUwsS0FBSzZMLFNBQVU3TCxNQUUzQ25GLFFBQVVqTCxLQUFLc2MsU0FBU3BjLElBQUlrUSxLQUFLbU0sV0FFakN0USxVQUFZaEIsUUFBUXFPLE9BQU8sQ0FBRXhOLFFBQVNpUSxPQUU1QyxhQURNdE0sR0FBRytNLEtBQUtDLGNBQWN4USxLQUFLLEdBQzFCQSxJQUdUNmdCLFdBQVlFLFVBQ1YsTUFBTUwsS0FBT0ssU0FBU3pyQixTQUFTLEtBQzNCc0osV0FBV2dpQixrQkFBa0JHLFVBQzdCQSxTQUVPLGVBQVRMLE1BQ1Msa0JBQVRBLE1BQ1MsYUFBVEEsTUFFQXZjLEtBQUs0ZSxZQUFhLEVBQ2xCNWUsS0FBSzZlLGVBQWdCLEVBQ3JCN2UsS0FBSytlLFVBQVcsRUFDSCxhQUFUeEMsT0FBcUJ2YyxLQUFLOGUsT0FBUSxHQUN0QzllLEtBQUt1YyxPQUFRLEdBQ0ssVUFBVEEsTUFDVHZjLEtBQUsrZSxVQUFXLEVBQ1gvZSxLQUFLNGUsWUFBZTVlLEtBQUs2ZSxnQkFBZTdlLEtBQUs0ZSxZQUFhLEdBQy9ENWUsS0FBSzhlLE9BQVM5ZSxLQUFLOGUsT0FFbkI5ZSxLQUFLdWMsT0FBU3ZjLEtBQUt1YyxNQUl2QmpzQixvQkFFRSxHQURBMFAsS0FBSzJELE1BQVEsR0FDVDNELEtBQUtxZ0IsWUFBYSxDQUNwQixJQUFJZ0QsbUJBQW9CLEVBQ3BCak0sTUFBUSxFQUNaLE1BQVFpTSxtQkFBcUJyakIsS0FBSzBnQixNQUFNcHZCLE9BQVM4bEIsT0FBTyxDQUN0RCxNQUFNbm5CLFdBQWErUCxLQUFLc2pCLGNBQWN0akIsS0FBSzBnQixNQUFNdEosUUFDN0NubkIsS0FBS1ksTUFBTVosWUFDUFgsU0FBUzRhLGVBQWVqYSxLQUFLWSxLQUFLWixZQUVwQytQLEtBQUtzRSxPQUFPaWYsYUFDaEJoeEIsU0FBU3lOLEtBQUswZ0IsTUFBTXRKLE9BQU8yTCxhQUN6Qnh3QixTQUFTeU4sS0FBSzBnQixNQUFNdEosT0FBTzRMLGlCQUUzQi95QixLQUFLdXpCLGlCQUNQdnpCLEtBQUtrbUIsV0FBWSxFQUNqQmtOLG1CQUFvQixHQUV0QmpNLFFBQ0FwWCxLQUFLMkQsTUFBTXpTLEtBQUtqQixXQUViLENBQ0wsTUFBTUEsV0FBYStQLEtBQUtzakIsZ0JBQ3BCcnpCLEtBQUtZLE1BQU1aLFlBQ1BYLFNBQVM0YSxlQUFlamEsS0FBS1ksS0FBS1osTUFFMUMsSUFBSXd6QixZQUFjempCLEtBQUs4ZSxNQUNuQnZzQixTQUFTeU4sS0FBS3NFLE9BQU9qUixLQUFLQSxLQUFLcXVCLGFBQWE1QyxPQUM1QyxFQUNBMkUsYUFBZXpqQixLQUFLdWhCLFlBQVdrQyxZQUFjempCLEtBQUt1aEIsV0FDdEQsTUFBTUYsS0FBTyxDQUNYNWMsT0FBUXpFLEtBQUt5Z0IsYUFDYlgsYUFBYzlmLEtBQUt5Z0IsYUFBYVgsYUFDaEN6akIsU0FBVTJELEtBQUt5Z0IsYUFBYXBrQixTQUM1QnltQixVQUFXOWlCLEtBQUt5Z0IsYUFBYWhrQixLQUM3Qm1HLFdBQVk1QyxLQUFLeWdCLGFBQWFLLGVBQWU4QixNQUM3QzN2QixTQUFVK00sS0FBS3lnQixhQUFhSyxlQUFlN3RCLFNBQzNDeVEsT0FBUTFELEtBQUt5Z0IsYUFBYUssZUFBZXBkLE9BQ3pDcWYsWUFBYVUsWUFDYlQsZUFBZ0IsRUFDaEJFLFNBQVMsU0FFTGxqQixLQUFLc0UsT0FBT2lmLGFBQWFFLGFBRTNCeHpCLEtBQUt1ekIsaUJBQ1B2ekIsS0FBS2ttQixXQUFZLEdBRW5CblcsS0FBSzBnQixNQUFNeHZCLEtBQUttd0IsTUFDaEJyaEIsS0FBSzJELE1BQU16UyxLQUFLakIsTUFFbEIrUCxLQUFLa1ksVUFBVyxFQUNoQmxZLEtBQUtzWSxRQUFTLFFBRVJ0WSxLQUFLMmMsaUJBR2Jyc0Isb0JBQXFCK3dCLEtBQU8sTUFDMUIsTUFBTTVjLE9BQVM0YyxLQUNYcmhCLEtBQUtvaUIsaUJBQWlCZixLQUFLaGxCLFVBQzNCMkQsS0FBS3lnQixhQUNIbmUsTUFBUSxJQUFJcEMsVUEyQmxCLE9BMUJBb0MsTUFBTWpHLFNBQVcyRCxLQUFLM0QsU0FDdEJpRyxNQUFNdkosTUFBUWlILEtBQUszRCxTQUNuQmlHLE1BQU01QixLQUFPVixLQUFLVyxPQUVsQjJCLE1BQU0yQixTQUFVLEVBQ2hCM0IsTUFBTWdiLFdBQVksRUFDZHRkLEtBQUtvZ0IsU0FBVTlkLE1BQU16QixNQUFRYixLQUFLa2dCLGdCQUNqQzVkLE1BQU16QixNQUFRYixLQUFLZ2dCLGdCQUNwQmhnQixLQUFLcWdCLGFBQ1AvZCxNQUFNTSxXQUFheWUsS0FBS3plLFdBQ3hCTixNQUFNaEIsYUFBZStmLEtBQUtwdUIsV0FFMUIrTSxLQUFLcWlCLHdCQUNMcmlCLEtBQUtpZixrQkFBb0Ixc0IsU0FBU3lOLEtBQUtpZixtQkFBcUIsRUFDeERqZixLQUFLc2dCLFNBQ1B0Z0IsS0FBS3NnQixRQUFTLEVBQ2R0Z0IsS0FBS2dmLE9BQVEsR0FFZjFjLE1BQU1NLFdBQWE1QyxLQUFLeWdCLGFBQWFLLGVBQWU4QixNQUNwRHRnQixNQUFNaEIsYUFBZXRCLEtBQUt5Z0IsYUFBYUssZUFBZTd0QixVQUd4RHFQLE1BQU1vaEIsUUFBVSxHQUFHOXpCLEtBQUs0UCxLQUFLQyxTQUFTLG1CQUFtQmdGLE9BQU9oSSxPQUNoRTZGLE1BQU0wQyxVQUFZUCxPQUFPcEksZUFFbkJpRyxNQUFNclMsT0FDTHFTLE1BR1QvUyx3QkFBeUI0YyxXQUN2QixNQUFNdFIsUUFBVWpMLEtBQUtzYyxTQUFTcGMsSUFBSXFjLFdBQ2xDLElBQUt0UixRQUFTLE9BQU8sS0FDckIsTUFBTThFLEtBQU9vTSxFQUFFbFIsUUFBUXhILEtBQUtxSSxTQUFTLEdBRS9Ca2YsVUFBWTZELG1CQUFtQi9SLFlBQVkvTSxLQUFNd00sV0FHdkQsT0FGQXlPLFVBQVV6TyxVQUFZQSxVQUVmeU8sVUFHVCtJLGlCQUFrQnZmLEdBQ2hCcEUsS0FBSytoQixXQUFhL2hCLEtBQUsraEIsV0FBYTNkLEVBQ3BDcEUsS0FBSzJjLGlCQUdQcHRCLHdCQUF5QmdGLE1BQU8rbkIsZUFBZ0IsR0FDOUMsTUFBTTNjLEtBQU9wTCxNQUFNNGlCLGNBQWNuSyxRQUFRLG9CQUNuQ3VQLEtBQU9ob0IsTUFBTTRpQixjQUFjNWpCLFFBQVFncEIsS0FDbkNDLFVBQVkvaEIsV0FBV2dpQixrQkFBa0JGLE1BRy9DLEdBQUtELGNBSUUsQ0FFTCxNQUFNMUIsVUFBWTZELG1CQUFtQi9SLFlBQVkvTSxNQUNqRCxHQUFJcEwsTUFBTTRpQixjQUFjbGpCLFVBQVVra0IsU0FBUyxlQUFnQixDQUN6RCxNQUFNMVQsT0FBU2xRLE1BQU00aUIsY0FBY25LLFFBQVEsV0FDckNoYSxJQUFNVCxTQUFTa1MsT0FBT2xSLFFBQVF5UixXQUNwQzRWLFVBQVVwVyxRQUFReFIsS0FBSzBwQixXQUFXRixnQkFDN0I1QixVQUFVOEIsV0FBV0YsV0FDNUI1QixVQUFVK0Isc0JBWFZoZCxLQUFLcE0sUUFBUWlwQixXQUF5QyxTQUE1QjdjLEtBQUtwTSxRQUFRaXBCLFdBQ3ZDam9CLE1BQU00aUIsY0FBY2xqQixVQUFVMmMsT0FBTyxlQUNyQ3JjLE1BQU00aUIsY0FBYzVqQixRQUFRcU8sU0FBV2pDLEtBQUtwTSxRQUFRaXBCLFdBYXhEb0gsU0FBVUMsV0FDUixNQUFNNXpCLEtBQU8rUCxLQUFLMkQsTUFBTWtnQixXQUNsQjlGLFdBQWF4ckIsU0FBU3RDLEtBQUtrUyxZQUM1Qm5DLEtBQUtqSCxNQUFNbWxCLFVBQVVILGFBTTFCOXRCLEtBQUtnUSxhQUFlaFEsS0FBSzJTLFdBQ3pCM1MsS0FBS2ttQixXQUFZLEVBQ2pCbG1CLEtBQUtrdUIsV0FBWSxFQUNqQm5lLEtBQUsyYyxrQkFSSHRkLEdBQUdDLGNBQWNrVyxNQUNmLEdBQUd4VixLQUFLakgsTUFBTTBELG9EQVVwQnFoQixZQUFhK0YsVUFBV0MsY0FFdEIsTUFBTTd6QixLQUFPK1AsS0FBSzJELE1BQU1rZ0IsV0FDbEJFLGlCQUFtQjl6QixLQUFLK1IsZ0JBQWdCOGhCLGNBQ3hDL0YsV0FBYXhyQixTQUFTd3hCLGlCQUFpQmhHLFlBQzdDLElBQUsvZCxLQUFLakgsTUFBTW1sQixVQUFVSCxZQUl4QixZQUhBMWUsR0FBR0MsY0FBY2tXLE1BQ2YsR0FBR3hWLEtBQUtqSCxNQUFNMEQsb0RBSWxCLE1BQU11aEIsZ0JBQWtCenJCLFNBQVN3eEIsaUJBQWlCL0YsaUJBQ2xEL3RCLEtBQUtnUSxhQUFlK2QsZ0JBQ2hCL3RCLEtBQUsyUyxZQUFjb2Isa0JBQWlCL3RCLEtBQUtrbUIsV0FBWSxHQUN6RGxtQixLQUFLa3VCLFdBQVksRUFDakJuZSxLQUFLMmMsaUJBR1BwdEIsbUJBQW9Cb1EsS0FBTXdNLFVBQVksTUFDcEMsTUFBTTZYLGVBQWlCLElBQUl2RixtQkFDM0J1RixlQUFlOUUsU0FBVyxHQUN0Qi9TLFVBQVc2WCxlQUFlN1gsVUFBWUEsVUFDakN4TSxLQUFLcU4sUUFBUSxjQUNwQmdYLGVBQWU3WCxVQUFZeE0sS0FBS3FOLFFBQVEsWUFBWXpaLFFBQVE0WSxXQUc5RDFSLFdBQVdxRixxQkFBcUJra0IsZUFBZ0Jya0IsTUFDaEQsTUFBTXNrQixZQUFjdGtCLEtBQUsrQixpQkFBaUIsV0FDMUMsSUFBSyxNQUFNelEsS0FBS2d6QixZQUFhLENBQzNCLE1BQU14ZixPQUFTMGEsZ0JBQWdCNUksZUFBZXRsQixHQUM5Qyt5QixlQUFleGYsUUFBUXRULEtBQUt1VCxRQUc5QixNQUFNeWYsVUFBWXZrQixLQUFLK0IsaUJBQWlCLFNBQ3hDLEdBQUl3aUIsVUFDRixJQUFLLE1BQU05bUIsS0FBSzhtQixVQUFXLENBQ3pCLE1BQU03QyxLQUFPLEdBQ2I1bUIsV0FBV3FGLHFCQUFxQnVoQixLQUFNamtCLEdBQ3RDNG1CLGVBQWV0RCxNQUFNeHZCLEtBQUttd0IsTUFXOUIyQyxlQUFlcmdCLE1BQVEsR0FDdkIsTUFBTUEsTUFBUWhFLEtBQUsrQixpQkFBaUIsZ0JBQ3BDLElBQUssTUFBTWtDLEtBQUtELE1BQU8sQ0FDckIsTUFBTTFULEtBQU95UCxTQUFTNlcsZUFBZTNTLEdBQ3JDb2dCLGVBQWVyZ0IsTUFBTXpTLEtBQUtqQixNQUc1Qit6QixlQUFldGdCLE9BQVMsR0FDeEIsTUFBTXlnQixZQUFjeGtCLEtBQUsrQixpQkFBaUIsbUJBQzFDLElBQUssTUFBTTBpQixNQUFNRCxZQUFhLENBQzVCLE1BQU1FLFdBQWE3Z0IsV0FBVytTLGVBQWU2TixJQUM3Q0osZUFBZXRnQixPQUFPeFMsS0FBS216QixZQUc3QixPQUFPTCxlQUdUMXpCLG1CQUNFMFAsS0FBSzBELE9BQVMsR0FDZCxNQUFNeWQsS0FBT25oQixLQUFLa2hCLGVBUWxCLElBQUssSUFBSXRMLEVBQUksRUFBR0EsRUFBSXVMLEtBQUs3dkIsT0FBUXNrQixJQUFLLENBQ3BDLE1BQU0wTyxFQUFJbkQsS0FBS3ZMLEdBQ1RtTSxXQUFheHZCLFNBQVMreEIsRUFBRWpELEtBQUswQixhQUM3Qm9CLFlBQWMsR0FFcEIsSUFBSUksY0FBZ0J4VixPQUFPdVYsRUFBRWpELEtBQUszZCxRQUM3QjZnQixlQUFtQyxLQUFsQkEsZ0JBQXNCQSxjQUFnQixLQUM1RCxNQUFNQyxVQUFZaGhCLFdBQVdpaEIsV0FBV0YsZUFDbENHLFVBQVksSUFBSXgwQixLQUFLcTBCLGVBQWVuZCxTQUFTLENBQ2pEQyxVQUFVLElBQ1Q1VyxNQUNHazBCLHNCQUF3QjNrQixLQUFLc0UsT0FBT3NnQixPQUN0QyxHQUFHTCxtQkFBbUJHLFlBQ3RCLEdBQUdBLFlBQ0RHLGtCQUFvQnJoQixXQUFXaWhCLFdBQVdFLHVCQUVoRCxJQUFJRyxjQUFnQixFQUNoQkMsZ0JBQWtCLEVBQ2xCeGtCLFVBQVcsR0FDWFAsS0FBSytlLFVBQVkvZSxLQUFLOGUsU0FDeEJpRyxnQkFBa0IzMEIsS0FBS3VpQixNQUFNb1AsV0FBYSxJQUVwQixJQUFwQmdELGtCQUF1QkEsZ0JBQWtCLEdBQ3pDVCxFQUFFcjBCLEtBQUtnUSxjQUFnQkMsVUFBVW1HLGdCQUFnQi9GLFVBQ25Ed2tCLGNBQWdCQyxnQkFDaEJBLGdCQUFrQmhELFdBQWErQyxjQUMvQnZrQixVQUFXLEVBRVRMLFVBQVVtRyxnQkFBZ0I5RixXQUFhK2pCLEVBQUVyMEIsS0FBS2dRLGVBQzdDQyxVQUFVbUcsZ0JBQWdCL0YsU0FBV2drQixFQUFFcjBCLEtBQUsyUyxZQUMzQzBoQixFQUFFakQsS0FBS3ZCLGdCQUVUaUYsZ0JBQWtCaEQsV0FDbEIrQyxjQUFnQixFQUNoQnZrQixVQUFXLElBSWYsSUFBSTlQLE1BQVEsRUFDWixJQUFLLElBQUkybUIsTUFBUSxFQUFHQSxNQUFRMk4sZ0JBQWlCM04sUUFBUyxDQUNwRCxNQUFNbm5CLEtBQU8sSUFBSUMsS0FBS3EwQixxQkFFaEJ0MEIsS0FBS21YLFNBQVMsQ0FBRTlXLE9BQU8sVUFDdkJoQixTQUFTNGEsZUFBZWphLE1BRTlCazBCLFlBQVlqekIsS0FBSyxDQUNmdUMsUUFBUzh3QixjQUNUOXpCLE1BQU9SLEtBQUtRLE1BQ1prUixJQUFLNmlCLFVBQ0xqa0IsVUFBVSxJQUVaOVAsT0FBU1IsS0FBS1EsTUFFaEIsSUFBSyxJQUFJMm1CLE1BQVEsRUFBR0EsTUFBUTBOLGNBQWUxTixRQUFTLENBQ2xELE1BQU1ubkIsS0FBTyxJQUFJQyxLQUFLeTBCLDZCQUVoQjEwQixLQUFLbVgsU0FBUyxDQUFFOVcsT0FBTyxVQUN2QmhCLFNBQVM0YSxlQUFlamEsTUFFOUJrMEIsWUFBWWp6QixLQUFLLENBQ2Z1QyxRQUFTa3hCLHNCQUNUbDBCLE1BQU9SLEtBQUtRLE1BQ1prUixJQUFLa2pCLGtCQUNMdGtCLFVBQVUsSUFFWjlQLE9BQVNSLEtBQUtRLE1BR2hCLElBQUk2VSxXQUFhLFFBQ2JiLE9BQVNoSyxXQUFXMkIsZ0JBQWdCa29CLEVBQUVyMEIsS0FBSytVLFdBQzFDUCxTQUFRQSxPQUFTaEssV0FBVzZCLGdCQUFnQmdvQixFQUFFcjBCLEtBQUsrVSxZQUNwRFAsU0FBUWEsV0FBYWIsT0FBT2hJLE1BRWhDdUQsS0FBSzBELE9BQU94UyxLQUFLLENBQ2Y4VCxVQUFXc2YsRUFBRXIwQixLQUFLK1UsVUFDbEJNLFdBQ0EzQixNQUFPd2dCLFlBQ1AxekIsTUFDQThQLFNBQ0F5a0IsT0FBTyxFQUNQakssYUFBY25yQixLQUFLNFAsS0FBS1ksT0FBTyx5QkFBMEIsQ0FDdkQzRCxLQUFNNkksV0FDTjdVLFVBS051UCxLQUFLaWxCLGFBQXNDLElBQXZCamxCLEtBQUswRCxPQUFPcFMsT0FDaEMwTyxLQUFLMmMsaUJBR1Byc0IsbUJBQ0UsSUFBSyxJQUFJNDBCLE9BQVMsRUFBR0EsT0FBU2xsQixLQUFLMEQsT0FBT3BTLE9BQVE0ekIsU0FBVSxDQUMxRCxNQUFNbnNCLE1BQVEwQixXQUFXNkIsZ0JBQWdCMEQsS0FBSzBELE9BQU93aEIsUUFBUWxnQixXQUM3RCxHQUFjLE9BQVZqTSxNQUNGc0csR0FBR0MsY0FBY2tXLE1BQU01bEIsS0FBSzRQLEtBQUtDLFNBQVMsOEJBQ3JDLENBQ0xPLEtBQUswRCxPQUFPd2hCLFFBQVFDLFdBQWEsRUFDakNubEIsS0FBSzBELE9BQU93aEIsUUFBUUUsY0FBZ0IsRUFDcEMsSUFDRSxJQUFJQyxPQUFTLEVBQ2JBLE9BQVNybEIsS0FBSzBELE9BQU93aEIsUUFBUXZoQixNQUFNclMsT0FDbkMrekIsU0FDQSxDQUNBLE1BQU1DLGtCQUFvQnZzQixNQUFNd3NCLFdBQzlCdmxCLEtBQUswRCxPQUFPd2hCLFFBQVF2aEIsTUFBTTBoQixRQUFRNTBCLE9BRXBDdVAsS0FBSzBELE9BQU93aEIsUUFBUUMsWUFBY0csWUFDbEN0bEIsS0FBSzBELE9BQU93aEIsUUFBUXZoQixNQUFNMGhCLFFBQVFHLE1BQVFGLFlBQzFDdGxCLEtBQUswRCxPQUFPd2hCLFFBQVF2aEIsTUFBTTBoQixRQUFRSSxTQUNoQ3psQixLQUFLMEQsT0FBT3doQixRQUFRdmhCLE1BQU0waEIsUUFBUTUwQixNQUFRNjBCLFlBQzVDdGxCLEtBQUswRCxPQUFPd2hCLFFBQVFFLGVBQ2xCcGxCLEtBQUswRCxPQUFPd2hCLFFBQVF2aEIsTUFBTTBoQixRQUFRNTBCLE1BQVE2MEIsWUFFOUN0bEIsS0FBSzBELE9BQU93aEIsUUFBUUYsT0FBUSxFQUM1QmhsQixLQUFLMEQsT0FBT3doQixRQUFRbkssYUFBZW5yQixLQUFLNFAsS0FBS1ksT0FDM0MsOEJBQ0EsQ0FDRTNELEtBQU11RCxLQUFLMEQsT0FBT3doQixRQUFRNWYsV0FDMUI3VSxNQUFPdVAsS0FBSzBELE9BQU93aEIsUUFBUUMsV0FDM0JPLE1BQU8xbEIsS0FBSzBELE9BQU93aEIsUUFBUUUsaUJBS25DcGxCLEtBQUsybEIsYUFBYyxFQUNuQjNsQixLQUFLMmMsa0JBSUYsTUFBTXdDLGdCQUNYcmIsWUFBYXpILFNBQVcsTUFDdEIyRCxLQUFLM0QsU0FBV0EsU0FDaEIyRCxLQUFLMGUsT0FBUSxFQUNiMWUsS0FBSzJmLGlCQUFrQixFQUN2QjNmLEtBQUs0ZixXQUFZLEVBQ2pCNWYsS0FBSzZmLFdBQVksRUFDakI3ZixLQUFLOGYsY0FBZSxFQUNwQjlmLEtBQUs0bEIsU0FBVSxFQUdiQyxVQUtGLFlBSkkzaEIsSUFBY2xFLEtBQUs4bEIsT0FDakI5bEIsS0FBS2pILE9BQVNpSCxLQUFLakgsTUFBTWd0QixNQUFPL2xCLEtBQUs4bEIsS0FBTzlsQixLQUFLakgsTUFBTWd0QixPQUFTLEVBQy9EL2xCLEtBQUs4bEIsTUFBTyxHQUVaOWxCLEtBQUs4bEIsS0FHVkQsUUFBSzlFLEdBQ1AvZ0IsS0FBSzhsQixLQUFPL0UsRUFHVmlGLFlBS0YsWUFKSTloQixJQUFjbEUsS0FBS2ltQixTQUNqQmptQixLQUFLakgsT0FBU2lILEtBQUtqSCxNQUFNZ3RCLE1BQU8vbEIsS0FBS2ltQixPQUFTam1CLEtBQUtqSCxNQUFNZ3RCLFFBQVUsRUFDbEUvbEIsS0FBS2ltQixRQUFTLEdBRWRqbUIsS0FBS2ltQixPQUdWRCxVQUFPakYsR0FDVC9nQixLQUFLaW1CLE9BQVNsRixFQUdad0IsYUFDRixPQUFRdmlCLEtBQUs2bEIsTUFBUTdsQixLQUFLZ21CLE1BR3hCekQsV0FBUXhCLEdBQ1YvZ0IsS0FBSzhsQixNQUFPLEVBQ1o5bEIsS0FBS2ltQixRQUFTLEVBR1pDLGFBQ0YsU0FBSWxtQixLQUFLakgsUUFBU2lILEtBQUtqSCxNQUFNb3RCLE1BQVlubUIsS0FBS2pILE1BQU1vdEIsS0FBTyxFQUl6REMsV0FNRixZQUxJbGlCLElBQWNsRSxLQUFLcW1CLFFBR3JCcm1CLEtBQUtxbUIsT0FBUSxHQUVScm1CLEtBQUtxbUIsTUFHVkQsU0FBTXJGLEdBQ1IvZ0IsS0FBS3FtQixNQUFRdEYsRUFHWGhvQixZQUlGLE9BSElpSCxLQUFLM0QsV0FBYTJELEtBQUtzbUIsU0FDekJ0bUIsS0FBS3NtQixPQUFTN3JCLFdBQVc2QixnQkFBZ0IwRCxLQUFLM0QsV0FFekMyRCxLQUFLc21CLE9BR1Y3cEIsV0FDRixPQUFJdUQsS0FBS3pELE1BQWN5RCxLQUFLekQsTUFBTUUsS0FDOUJ1RCxLQUFLakgsTUFBY2lILEtBQUtqSCxNQUFNMEQsS0FDM0IsUUFHTDBCLFVBQ0YsR0FBSTZCLEtBQUt6RCxNQUFPLENBRWQsR0FBSXlELEtBQUt6RCxNQUFNbEosS0FBSzhLLElBQ2xCLE9BQU82QixLQUFLekQsTUFBTWxKLEtBQUs4SyxJQUd6QixHQUFJNkIsS0FBS3pELE1BQU14SSxVQUFVcUssUUFBUUMsSUFDL0IsT0FBTzJCLEtBQUt6RCxNQUFNeEksVUFBVXFLLFFBQVFDLElBR3hDLE9BQUkyQixLQUFLakgsTUFBY2lILEtBQUtqSCxNQUFNMUYsS0FBSzhLLElBQ2hDLHFDQUdMNUIsWUFJRixPQUhLeUQsS0FBS3VtQixRQUFVdm1CLEtBQUszRCxXQUN2QjJELEtBQUt1bUIsT0FBUzlyQixXQUFXMkIsZ0JBQWdCNEQsS0FBSzNELFdBRXpDMkQsS0FBS3VtQixPQUdWQyxlQUNGLE9BQUl4bUIsS0FBSzZsQixJQUNBajJCLEtBQUs0UCxLQUFLQyxTQUFTLHVDQUV4Qk8sS0FBS2dtQixNQUNBcDJCLEtBQUs0UCxLQUFLQyxTQUFTLHlDQUVyQjdQLEtBQUs0UCxLQUFLQyxTQUFTLDBDQUd4QmduQixnQkFDRixPQUFJem1CLEtBQUs2bEIsSUFBWWoyQixLQUFLNFAsS0FBS0MsU0FBUyxrQ0FDcENPLEtBQUtnbUIsTUFBY3AyQixLQUFLNFAsS0FBS0MsU0FBUywrQkFDbkM3UCxLQUFLNFAsS0FBS0MsU0FBUyxxQ0FHeEJtRCxpQkFDRixPQUFJNUMsS0FBSzRmLFdBQWE1ZixLQUFLMmYsZ0JBQ2xCemYsVUFBVW1HLGdCQUFnQmxHLFFBRS9CSCxLQUFLNmYsVUFBa0IzZixVQUFVbUcsZ0JBQWdCaEcsS0FDakRMLEtBQUs4ZixhQUFxQjVmLFVBQVVtRyxnQkFBZ0IvRixRQUNqREosVUFBVW1HLGdCQUFnQnNjLFdBRy9CMXZCLGVBQ0YsSUFBSUEsU0FBVyxFQVFmLE9BUEkrTSxLQUFLMGUsT0FBT3pyQixXQUNaK00sS0FBSzJmLGlCQUFpQjFzQixXQUN0QitNLEtBQUtvbUIsTUFBTW56QixXQUNYK00sS0FBS2dtQixPQUFPL3lCLFdBQ1orTSxLQUFLNmxCLEtBQUs1eUIsV0FDVitNLEtBQUs0bEIsU0FBUzN5QixXQUNkK00sS0FBSzBiLFdBQVd6b0IsV0FDYkEsU0FHTHNKLFVBQU90TCxHQUNUK08sS0FBS3VtQixPQUFTdDFCLEVBR2hCMUIsc0JBQXVCcU4sU0FDckIsTUFBTTZILE9BQVMsSUFBSTBhLGdCQUVuQixPQURBMWtCLFdBQVdxRixxQkFBcUIyRSxPQUFRN0gsU0FDakM2SCxPQUdUbFYsNkJBQThCZ0YsT0FDNUIsSUFBS0EsTUFBTTRpQixjQUFjbGpCLFVBQVVra0IsU0FBUyxtQkFBb0IsT0FBTyxLQUl2RSxPQUh1QjVqQixNQUFNNGlCLGNBQ0VuSyxRQUFRLFlBQ1p0TCxpQkFBaUIsV0FJOUM2QixnQkFBaUIzRyxTQUNmbkMsV0FBV3VDLHNCQUFzQmdELEtBQU1wRCxTQUd6QzhmLFdBQVlILE1BRUMsY0FBVEEsTUFDUyxjQUFUQSxNQUNTLGlCQUFUQSxNQUNTLG9CQUFUQSxNQUVBdmMsS0FBSzJmLGlCQUFrQixFQUN2QjNmLEtBQUs0ZixXQUFZLEVBQ2pCNWYsS0FBSzZmLFdBQVksRUFDakI3ZixLQUFLOGYsY0FBZSxFQUNwQjlmLEtBQUsrZixZQUFhLEVBQ2xCL2YsS0FBS3VjLE9BQVEsR0FDSyxTQUFUQSxLQUNMdmMsS0FBS2dtQixPQUNQaG1CLEtBQUtnbUIsT0FBUSxFQUNiaG1CLEtBQUs2bEIsS0FBTSxHQUNGN2xCLEtBQUs2bEIsS0FDZDdsQixLQUFLZ21CLE9BQVEsRUFDYmhtQixLQUFLNmxCLEtBQU0sR0FDTjdsQixLQUFLZ21CLE9BQVEsRUFDZmhtQixLQUFLdWMsT0FBU3ZjLEtBQUt1YyxNQUNiLFNBQVRBLE1BQW1CdmMsS0FBS29tQixPQUFTcG1CLEtBQUtrbUIsUUFDeEM3bUIsR0FBR0MsY0FBY0MsS0FDZjNQLEtBQUs0UCxLQUFLWSxPQUFPLGtDQUFtQyxDQUNsRCtsQixJQUFLbm1CLEtBQUtqSCxNQUFNb3RCLFFDMS9CbkIsTUFBTU8sb0JBQ1g1aUIsWUFBYTdSLFFBQVUsSUFDckIrTixLQUFLMm1CLFNBQVcxMEIsUUFHZEEsY0FDRixPQUFPMjBCLFlBQVk1bUIsS0FBSzhELFlBQVkraUIsZUFBZ0I3bUIsS0FBSzJtQixVQUd2RDlhLGVBQ0YsT0FBTzdMLEtBQUsvTixRQUFRNFosU0FHbEJpYixpQkFDRixPQUFPOW1CLEtBQUsvTixRQUFReWxCLFFBR3RCcG5CLGdCQUFpQnkyQixrQkFBb0IsSUFDbkMsTUFBTXBiLFdBQWFDLGVBQWU1TCxLQUFLNkwsU0FBVTdMLE1BQzNDOEwsZ0JBQWtCQyxFQUFFSixNQUFNLEdBQ2hDRyxnQkFBZ0J2WSxRQUFRb0osT0FBU2pKLE9BQU9zTSxLQUFLZ25CLFlBQzdDbGIsZ0JBQWdCdlksUUFBUTB6QixVQUFZam5CLEtBQUs4RCxZQUFZckgsS0FDckRxUCxnQkFBZ0I3WCxVQUFVQyxPQUFPOEwsS0FBSzhtQixZQUV0QyxNQUFNcjFCLFNBQVdtMUIsWUFDZixDQUNFNTBCLEtBQU1wQyxLQUFLb0MsS0FBS3lKLEdBQ2hCVixPQUFRbkwsS0FBSzRQLEtBQUtDLFNBQVNPLEtBQUsvTixRQUFRdUIsT0FDeENrSSxRQUFTb1EsZ0JBQWdCTixXQUUzQnViLG1CQUdFLENBQUMsU0FBVSxhQUFhNTFCLFNBQVM2TyxLQUFLdlEsWUFDeENnQyxTQUFTQyxRQUFVRSxZQUFZNlQscUJBQXFCLE9BRWhDLGNBQWxCekYsS0FBS3ZRLFdBQTBCZ0MsU0FBU0UsT0FBUSxHQUVwREMsWUFBWStKLE9BQU9sSyxVQUFVbUssTUFBS0MsS0FDekJBLE1BSVh2TCxxQkFBc0IyQixRQUFVLElBRTlCLEdBRElBLFFBQVFpMUIsU0FBU2xuQixLQUFLa25CLFVBQ3JCbG5CLEtBQUttTSxVQUVILENBQ0wsTUFBTVIsV0FBYUMsZUFBZTVMLEtBQUs2TCxTQUFVN0wsTUFDM0M4TCxnQkFBa0JDLEVBQUVDLFVBQVVMLE1BQU0sR0FHMUNHLGdCQUFnQnZZLFFBQVFvSixPQUFTakosT0FBT3NNLEtBQUtnbkIsWUFDN0NsYixnQkFBZ0J2WSxRQUFRMHpCLFVBQVlqbkIsS0FBSzhELFlBQVlySCxLQUNyRHFQLGdCQUFnQjdYLFVBQVVDLE9BQU84TCxLQUFLOG1CLFlBR3RDLE1BQU03YSxZQUFjcmMsS0FBS3NjLFNBQVNwYyxJQUFJa1EsS0FBS21NLFdBQ3ZDbk0sS0FBS21uQixjQUFjbGIsWUFBWW1iLFFBQVEsT0FBUSxRQUFTLFlBRTVELE1BQU12ckIsVUFBWW9RLFlBQVkvQyxPQUFPLENBQ25DeE4sUUFBU29RLGdCQUFnQk4sWUFHM0IsYUFETW5NLEdBQUcrTSxLQUFLQyxjQUFjeFEsS0FBSyxHQUMxQkEsSUFsQlBtRSxLQUFLbU8sWUFzQlQ0SSxrQkFBbUJwTCxNQUNqQkEsS0FBSzRNLEdBQ0gsUUFDQSxxQ0FDQXZZLEtBQUtxbkIsVUFBVTF2QixLQUFLcUksT0FFdEIyTCxLQUFLNE0sR0FBRyxRQUFTLCtCQUFnQ3ZZLEtBQUtxbkIsVUFBVTF2QixLQUFLcUksT0FDckUyTCxLQUFLNE0sR0FBRyxRQUFTLDRCQUE2QnZZLEtBQUt5WSxVQUFVOWdCLEtBQUtxSSxPQUNsRTJMLEtBQUs0TSxHQUFHLFdBQVksUUFBU3ZZLEtBQUt5WSxVQUFVOWdCLEtBQUtxSSxPQUNqRDJMLEtBQUs0TSxHQUFHLFFBQVMsMkJBQTRCdlksS0FBSzhZLFVBQVVuaEIsS0FBS3FJLE9BQ2pFMkwsS0FBSzRNLEdBQUcsVUFBVyxPQUFRdlksS0FBS3NuQixPQUFPM3ZCLEtBQUtxSSxPQUc5Q3pRLDJCQUE0Qm9jLE1BQzFCLE1BQ01HLGdCQURxQkgsS0FBSyxHQUNXOUwsY0FBYyxjQUN6RCxJQUFLaU0sZ0JBQWlCLE9BQ3RCLElBQUtBLGdCQUFnQnZZLFFBQVEwekIsVUFBVyxPQUN4QyxJQUNHNzBCLE9BQU9tMUIsb0JBQW9CMzNCLEtBQUs0M0IsS0FBS0MsT0FBT3QyQixTQUMzQzJhLGdCQUFnQnZZLFFBQVEwekIsV0FHMUIsT0FFRixNQUFNdG5CLFdBQWErbUIsb0JBQW9CZ0Isb0JBQW9CNWIsaUJBQ3JENmIsVUFBWXYxQixPQUFPMmEsT0FDdkIsSUFBSW5kLEtBQUs0M0IsS0FBS0MsTUFBTTNiLGdCQUFnQnZZLFFBQVEwekIsV0FDNUN0bkIsTUFFRmdvQixVQUFVQyxlQUNWRCxVQUFVNVEsa0JBQWtCcEwsTUFPOUJpYyxnQkFPQTlPLFVBQVd2a0IsT0FDVCxNQUVNa08sT0FGU2xPLE1BQU00aUIsY0FFQzVqQixRQUFRa1AsT0FDMUJ6QyxLQUFLeUMsU0FBU3pDLEtBQUt5QyxRQUFRLENBQUVsTyxNQUFjMlUsUUFBUSxJQVF6RG9lLE9BQVEveUIsT0FFTixNQURrQixVQUFkQSxNQUFNdkIsS0FBaUJnTixLQUFLeVksVUFBVWxrQixPQUNyQixVQUFkQSxNQUFNdkIsSUFHZnlsQixVQUFXbGtCLE9BQ1RBLE1BQU0wYSxpQkFFTixNQUNNdFAsS0FEU3BMLE1BQU00aUIsY0FDRG5LLFFBQVEscUJBQzVCLElBQUtyTixLQUFNLE9BQ0tLLEtBQUs2bkIsUUFBUWxvQixPQUNoQkssS0FBSzJjLGlCQUdwQmtMLFFBQVNsb0IsTUFDUCxNQUFNbW9CLE1BQVFub0IsS0FBSytCLGlCQUFpQixRQUNwQyxJQUFJcW1CLFNBQVUsRUFDZCxJQUFLLElBQUluUyxFQUFJLEVBQUdBLEVBQUlrUyxNQUFNeDJCLE9BQVFza0IsSUFBSyxDQUNyQyxNQUFNb1MsS0FBT0YsTUFBTWxTLEdBRW5CLElBQUl2aUIsS0FETyxJQUFJNDBCLGlCQUFpQkQsTUFDbEJFLFdBQ2Q3MEIsS0FBTzgwQixXQUFXbm9CLEtBQU1vb0IsYUFBYS8wQixPQUNyQyxJQUFLLE1BQU9MLElBQUttSyxTQUFVL0ssT0FBT2dDLFFBQVFmLE1BQ3hDMk0sS0FBS2hOLEtBQU9tSyxNQUNaNHFCLFNBQVUsRUFHZCxPQUFPQSxRQUdMbHRCLGNBQ0YsT0FBSW1GLEtBQUtxb0IsU0FBaUJyb0IsS0FBS3FvQixTQUMzQnJvQixLQUFLc29CLFdBQW1CMTRCLEtBQUtzYyxTQUFTcGMsSUFBSWtRLEtBQUtzb0IsaUJBQW5ELEVBSUV6dEIsWUFBU3VKLEdBQ1hwRSxLQUFLcW9CLFNBQVdqa0IsRUFHZCtILGdCQUNGLE9BQUluTSxLQUFLc29CLFdBQW1CdG9CLEtBQUtzb0IsV0FDN0J0b0IsS0FBS3FvQixTQUFpQnJvQixLQUFLcW9CLFNBQVM1c0IsUUFBeEMsRUFJRTBRLGNBQVcvSCxHQUNicEUsS0FBS3NvQixXQUFhbGtCLEVBR1R5aUIsNEJBQ1QsTUFBTyxDQUNMblAsUUFBUyxDQUFDLG9CQUNWNlEsUUFBUyxDQUFDLFNBQVUsU0FBVSxRQUFTLFdBQVksYUFDbkRDLGlCQUFrQixNQUlsQm4xQixXQUNGLE9BQU9NLEtBQUtpWixNQUFNNU0sS0FBS2duQixZQUdyQkEsaUJBQ0YsT0FBT3J6QixLQUFLQyxVQUFVb00sTUFBTSxDQUFDaE4sSUFBS21LLFNBQ2hDLEdBQWMsT0FBVkEsUUFDQTZDLEtBQUsvTixRQUFRczJCLFNBQVNwM0IsU0FBUzZCLE9BQy9CQSxJQUFJK0osV0FBV2lELEtBQUsvTixRQUFRdTJCLGtCQUNoQyxPQUFPcnJCLFNBSVAxTixlQUVGLE9BREt1USxLQUFLcUUsWUFBV3JFLEtBQUtxRSxVQUFZelUsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGFBQ3pEa1EsS0FBS3FFLFVBR1Y1VSxhQUFVMlUsSUFDRixJQUFOQSxJQUFhcEUsS0FBS3FFLFVBQVl6VSxLQUFLSSxTQUFTRixJQUFJLE9BQVEsYUFDNURrUSxLQUFLcUUsVUFBWUQsRUFHbkI3VSwyQkFBNEI0YyxXQUMxQixNQUFNdFIsUUFBVWpMLEtBQUtzYyxTQUFTcGMsSUFBSXFjLFdBQ2xDLElBQUt0UixRQUFTLE9BQ2QsTUFBTThFLFdBQWFLLEtBQUt5b0IsWUFBWTV0QixTQUVwQyxPQURBOEUsS0FBS3dNLFVBQVlBLFVBQ1Z4TSxLQUdUcFEseUJBQTBCc0wsU0FDeEIsTUFBTTZ0QixZQUFjM2MsRUFBRWxSLFFBQVF4SCxLQUFLcUksU0FBUyxHQUM1QyxJQUFLZ3RCLFlBQWEsT0FDbEIsTUFBTS9vQixXQUFhSyxLQUFLMG5CLG9CQUFvQmdCLGFBRTVDLE9BREEvb0IsS0FBSzlFLFFBQVVBLFFBQ1I4RSxLQUdUcFEsaUNBQWtDb1EsTUFDaEMsTUFBTWdwQixTQUFXaDFCLEtBQUtpWixNQUFNQyxTQUFTbE4sS0FBS3BNLFFBQVFvSixTQUNsRCxJQUFLZ3NCLFNBQVN4YyxVQUFXLENBQ3ZCLE1BQU10UixRQUFVOEUsS0FBS3FOLFFBQVEsWUFDN0IyYixTQUFTeGMsVUFBWXRSLFNBQVN0SCxTQUFTNFksVUFFekMsYUFBYW5NLEtBQUtpTixTQUFTMGIsVUFHN0JwNUIsc0JBQXVCOEQsTUFDckIsTUFBTXNNLEtBQU92TixPQUFPMmEsT0FBTyxJQUFJL00sS0FBUTNNLE1BRXZDLGFBRE1zTSxLQUFLaW9CLGVBQ0pqb0IsS0FJVHluQixRQUFTeEssV0FDRkEsVUFBbUMsV0FBckI3USxFQUFFN1EsS0FBSzBoQixhQUMxQjVjLEtBQUs0YyxXQUFZLEdBR25CZ00sVUFBV2hNLFdBQ0pBLFVBQW1DLFdBQXJCN1EsRUFBRTdRLEtBQUswaEIsYUFDMUI1YyxLQUFLNGMsV0FBWSxHQUduQkYsV0FBWUUsVUFDVjVjLEtBQUs0YyxXQUFhNWMsS0FBSzRjLFVBR3pCdHNCLGdCQUFpQmlFLE9BQ2ZBLE1BQU0wYSxpQkFFTixNQUFNeEssT0FBU2xRLE1BQU00aUIsY0FDckIsR0FBSSxXQUFZMVMsT0FBT2xSLFFBQVMsT0FBT3lNLEtBQUs4WSxVQUFVdmtCLE9BQ3RELEdBQ0VrUSxRQUNBQSxPQUFPeFEsVUFBVWtrQixTQUFTLG9CQUN6QnZvQixLQUFLb0MsS0FBS3FoQixLQUVYLE9BRUYsTUFBTWtKLEtBQU85WCxPQUFPbFIsUUFBUWdwQixLQUM1QixJQUFLQSxLQUFNLE9BQ1gsTUFBTTNMLE9BQVNuTSxPQUFPdUksUUFBUSxhQUM5QixHQUFLNEQsT0FFRSxDQUNMLE1BQU1pQixRQUFVakIsT0FBT2xQLGlCQUFpQixvQkFDeEMsSUFBSyxNQUFNcWYsS0FBS2xQLFFBQ2Q3UixLQUFLNG9CLFVBQVU3SCxFQUFFeHRCLFFBQVFncEIsTUFFM0J2YyxLQUFLb25CLFFBQVE3SyxXQU5idmMsS0FBSzBjLFdBQVdILE1BUWxCLE1BQU01YyxLQUFPOEUsT0FBT3VJLFFBQVEscUJBQ3hCck4sTUFBTUssS0FBSzZuQixRQUFRbG9CLE1BQ3ZCSyxLQUFLMmMsaUJBS0gzWSx5QkFDRixPQUFPcFUsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLHNCQUcvQm1VLGNBQ0YsT0FBS2pFLEtBQUt2USxlQUNOeVUsSUFBY2xFLEtBQUttRSxXQUNyQm5FLEtBQUttRSxTQUE2QixjQUFsQm5FLEtBQUt2USxVQUVoQnVRLEtBQUttRSxVQUplLEtBT3pCRixZQUFTRyxHQUNYcEUsS0FBS21FLFNBQVdDLEVBR2RyTCxZQUNGLE9BQUtpSCxLQUFLM0QsU0FDSDVCLFdBQVc2QixnQkFBZ0IwRCxLQUFLM0QsVUFEWixLQUl6QkUsWUFDRixPQUFLeUQsS0FBS2pILE1BQ0gwQixXQUFXMkIsZ0JBQWdCNEQsS0FBSzNELFVBRGYsS0FJdEJxRSxXQUNGLE9BQUtWLEtBQUtXLE9BQ0hYLEtBQUtqSCxNQUFNNkgsTUFBTTlRLElBQUlrUSxLQUFLVyxRQURSLEtBSXZCMkQsYUFDRixPQUFPdEUsS0FBS1UsS0FHVjZELHFCQUNGLE1BQU8sSUFBSTNVLEtBQUtvQyxLQUFLd1MsU0FHbkJDLGFBQ0YsT0FBSXpFLEtBQUswRSxZQUFvQjFFLEtBQUswRSxZQUMzQjFFLEtBQUsyRSxZQUdWa2tCLG9CQUNGLE9BQU83b0IsS0FBS3lFLE9BQU9nUCxRQUdqQkosV0FDRixPQUFPempCLEtBQUtvQyxLQUFLcWhCLEtBT2YzTyxrQkFjRixPQWJLMUUsS0FBSzRFLGVBQ0o1RSxLQUFLNkUsV0FDUDdFLEtBQUs0RSxhQUFlbkssV0FBVzJCLGdCQUFnQjRELEtBQUs2RSxhQUVwRDdFLEtBQUs0RSxhQUFlNUUsS0FBS3VFLGVBQWVPLE1BQ3BDOUUsS0FBSzRFLGFBQ1A1RSxLQUFLNkUsV0FBYSxHQUFHN0UsS0FBSzRFLGFBQWFwSSxNQUFNZixNQUFNdUUsS0FBSzRFLGFBQWFuSixLQUdyRXVFLEtBQUs0RSxhQUFlLE9BSW5CNUUsS0FBSzRFLGFBR1ZELGtCQVdGLE9BVkszRSxLQUFLK0UsZUFDSi9FLEtBQUswRSxZQUNQMUUsS0FBSytFLGFBQ0gvRSxLQUFLMEUsWUFBWTNMLE9BQ2pCaUgsS0FBSzBFLFlBQVlyUixLQUFLMEYsT0FDdEJpSCxLQUFLMEUsWUFBWXJSLEtBQUtVLFNBRXhCaU0sS0FBSytFLGFBQWV0SyxXQUFXNkIsZ0JBQWdCMEQsS0FBSzZFLGFBR2pEN0UsS0FBSytFLGFBR1ZDLGdCQUNGLE9BQUtoRixLQUFLMEUsYUFBZ0IxRSxLQUFLMkUsWUFDeEIzRSxLQUFLNkUsV0FEdUMsS0FJakRJLGdCQUNGLFNBQUtqRixLQUFLMEUsY0FBZ0IxRSxLQUFLMkUsYUFJN0JLLGNBQVdaLEdBQ2JwRSxLQUFLNkUsV0FBYVQsRUFHaEJjLGFBQ0YsT0FBT2xGLEtBQUtqSCxNQUFNb00sZ0JBQWdCbkYsS0FBS1csUUFHckN5RSxnQkFDRixNQUFNakgsSUFBTTFELFdBQVc0SyxtQkFBbUJyRixLQUFLZ0YsV0FDL0MsT0FBSTdHLEtBQ0cscUNBR0wxQixXQUNGLE9BQUl1RCxLQUFLekQsTUFBY3lELEtBQUt6RCxNQUFNRSxLQUMzQnVELEtBQUtqSCxNQUFNMEQsS0FHaEI2SSxpQkFDRixPQUFLdEYsS0FBS3lFLE9BQ0h6RSxLQUFLeUUsT0FBT2hJLEtBRE0sUUFJdkI4SSxlQUNGLE1BQU1wSCxJQUFNMUQsV0FBVzRLLG1CQUFtQnJGLEtBQUszRCxVQUMvQyxPQUFJOEIsS0FDRyxzQ0N0WkosTUFBTTJxQixtQkFBbUJwQyxvQkFLbkJHLDRCQUNULE9BQU9ELFlBQVk5Z0IsTUFBTStnQixlQUFnQixDQUN2QzBCLFFBQVMsQ0FDUCxlQUNBLGVBQ0EsWUFDQSxtQkFDQVEsT0FBT2pqQixNQUFNK2dCLGVBQWUwQixTQUM5QjFjLFNBQVUsa0RBUWR2YixxQkFDTTBQLEtBQUtxa0IsWUFBbUQsV0FBckNya0IsS0FBS3FrQixXQUFXdmdCLFlBQVlySCxPQUNqRHVELEtBQUtxa0IsV0FBYW4wQixLQUFLK2MsU0FBU2pOLEtBQUtxa0IsYUFJekN2TCxVQUFXdmtCLE9BQ1R1UixNQUFNZ1QsVUFBVXZrQixPQUdkZ00sZUFDRixPQUFPUCxLQUFLL04sUUFBUXNPLFNBR2xCQSxhQUFVNkQsR0FDWnBFLEtBQUsybUIsU0FBU3BtQixTQUFXNkQsRUFHdkJ3Z0IsYUFDRixNQUFxQixjQUFqQjVrQixLQUFLZ3BCLFFBQWdDaHBCLEtBQUtzRSxPQUFPc2dCLE9BQzlDNWtCLEtBQUtncEIsUUFHVnBFLFdBQVF4Z0IsR0FDVnBFLEtBQUtncEIsUUFBVTVrQixFQUdiNmtCLHNCQUNGLE1BQWtDLGlCQUF2QmpwQixLQUFLdWtCLGtCQUNYdGUsTUFBTXZJLE9BQU9zQyxLQUFLdWtCLGlCQUNoQnIwQixLQUFLaWQsU0FBU25OLEtBQUt1a0IsZ0JBR3hCMkUscUJBQ0YsT0FBUWpqQixNQUFNdkksT0FBT3NDLEtBQUt1a0IsZ0JBR3hCNEUsb0JBQ0YsTUFBMEIsaUJBQWZucEIsS0FBSzBsQixVQUNYemYsTUFBTXZJLE9BQU9zQyxLQUFLMGxCLFNBQ2hCeDFCLEtBQUtpZCxTQUFTbk4sS0FBSzBsQixRQUd4QjBELHdCQUNGLElBQUkxbEIsT0FBU2hHLE9BQ1hzQyxLQUFLa3BCLGVBQWlCbHBCLEtBQUt1a0IsY0FBZ0J2a0IsS0FBSy9QLEtBQUtRLE9BRXZELE9BQUt1UCxLQUFLcXBCLGVBQ0pwakIsTUFBTXZJLE9BQU9zQyxLQUFLMGxCLFNBQVdob0IsT0FBT3NDLEtBQUswbEIsT0FBUyxLQUNwRGhpQixRQUFrQmhHLE9BQU9zQyxLQUFLMGxCLFNBRTNCemYsTUFBTXZJLE9BQU9zQyxLQUFLMGxCLFNBQ2pCaGlCLFFBQVUsR0FDTDlULEtBQUs0UCxLQUFLQyxTQUFTLDJCQUl6QmlFLE9BR0w0bEIsZUFDRixHQUFJdHBCLEtBQUtzWSxPQUFRLENBQ2YsTUFBTTVVLE9BQVMxRCxLQUFLa3BCLGVBQWlCbHBCLEtBQUt1a0IsY0FBZ0J2a0IsS0FBSy9QLEtBQUtRLE1BQ3BFLE9BQUt1UCxLQUFLcXBCLGVBTUUzbEIsUUFBVSxJQUxmdUMsTUFBTXZJLE9BQU9zQyxLQUFLMGxCLFlBQ1hoaUIsT0FBU2hHLE9BQU9zQyxLQUFLMGxCLFFBQVUsR0FNeEMsT0FBTyxFQUdoQnAxQix1QkFpQkUsSUFoQkkwUCxLQUFLL04sUUFBUThSLGFBQWdCL0QsS0FBSy9QLE1BQVMrUCxLQUFLa3BCLHNCQUM1Q2xwQixLQUFLZ2IsV0FBVyxDQUFFOVIsUUFBUSxJQUdoQ2xKLEtBQUtrcEIsZ0JBQ0pscEIsS0FBSy9QLE1BQTJCLE1BQW5CK1AsS0FBSy9QLEtBQUtRLE9BQ3hCdVAsS0FBS3VwQixXQUVMdnBCLEtBQUtzWSxRQUFTLEVBRWR0WSxLQUFLc1ksUUFBUyxHQUVadFksS0FBSy9OLFFBQVE4UixhQUFnQi9ELEtBQUt3cEIsaUJBQW9CeHBCLEtBQUtzcEIsZ0JBQ3ZEdHBCLEtBQUt1bEIsV0FBVyxDQUFFcmMsUUFBUSxJQUc5QmxKLEtBQUtzWSxRQUFVdFksS0FBSy9QLEtBQU0sQ0FDTyxXQUEvQitQLEtBQUsvUCxLQUFLNlQsWUFBWXJILE9BQ3hCdUQsS0FBSy9QLEtBQU9DLEtBQUsrYyxTQUFTak4sS0FBSy9QLE9BRWpDLE1BQU02RCxFQUFJVixpQkFBaUI0TSxLQUFLL1AsTUFDaEMrUCxLQUFLeXBCLGdCQUFrQjMxQixFQUFFMFgsVUFDekJ4TCxLQUFLMHBCLGdCQUFrQjFwQixLQUFLL1AsS0FBS2dpQixlQUU3Qm5NLE1BQU02VyxpQkFHZHJzQixpQkFBa0IyQixRQUFVLENBQUVpWCxRQUFRLElBQ3BDbEosS0FBSy9QLFdBQWEsSUFBSUMsS0FBSzhQLEtBQUt1a0IsZUFBaUIsS0FBS25kLFNBQVMsQ0FDN0Q5VyxPQUFPLFVBRUhoQixTQUFTNGEsZUFBZWxLLEtBQUsvUCxNQUNuQytQLEtBQUt1cEIsWUFBYSxFQUNsQnQzQixRQUFRaVgsWUFDb0IsSUFBbkJqWCxRQUFRaVgsUUFBZ0NqWCxRQUFRaVgsT0FDckRqWCxRQUFRaVgsUUFBUWxKLEtBQUsyYyxpQkFHM0Jyc0IsZ0JBQWlCMkIsUUFBVSxDQUFFaVgsUUFBUSxJQUNuQyxNQUFNalosV0FBYSxJQUFJQyxLQUFLOFAsS0FBSzBsQixPQUFPdGUsU0FBUyxDQUFFOVcsT0FBTyxJQUMxRDBQLEtBQUswbEIsTUFBUXoxQixLQUFLUSxNQUNsQndCLFFBQVFpWCxZQUNvQixJQUFuQmpYLFFBQVFpWCxRQUFnQ2pYLFFBQVFpWCxPQUNyRGpYLFFBQVFpWCxRQUFRbEosS0FBSzJjLGlCQUczQnJzQixpQ0FBa0MyQixRQUFVLENBQUVpWCxRQUFRLElBRXBELEdBRElsSixLQUFLbXBCLHFCQUFxQm5wQixLQUFLMnBCLFlBQy9CMWpCLE1BQU12SSxPQUFPc0MsS0FBS29wQixvQkFFcEIsWUFEQS9wQixHQUFHQyxjQUFja1csTUFBTSwyQkFHekIsTUFBTWhSLFFBQVUsR0FDVmMsV0FBYSxHQUNic2tCLGdCQUFrQmpyQixPQUFPeEMsT0FBT3NWLFdBQVdwZixLQUFJa0ssT0FDNUNBLE1BQU14RCxRQUVmLElBQUssSUFBSXFlLE1BQVEsRUFBR0EsTUFBUXdTLGdCQUFnQnQ0QixPQUFROGxCLFFBQzlDcFgsS0FBS2pILE1BQU0wQyxLQUFPbXVCLGdCQUFnQnhTLE9BQU8zYixLQUc3QzZKLFdBQVdwVSxLQUFLMDRCLGdCQUFnQnhTLE9BQU8zYSxNQUN2QytILFFBQVF0VCxLQUFLMDRCLGdCQUFnQnhTLFNBRS9CLE1BQU0vakIsS0FBTyxDQUNYRyxNQUFPLElBQ1BrSSxRQUFTOUwsS0FBSzRQLEtBQUtZLE9BQU8sa0JBQW1CLENBQzNDc0QsT0FBUTFELEtBQUtvcEIsa0JBQ2Iza0IsT0FBUWEsYUFFVnVNLFFBQVMsQ0FDUGdZLElBQUssQ0FDSEMsS0FBTSwrQkFDTm5iLE1BQU8vZSxLQUFLNFAsS0FBS0MsU0FBUyxnQkFDMUJxUyxTQUFVLEtBQ1I5UixLQUFLK3BCLGNBQWN2bEIsV0FHdkJ3bEIsSUFBSyxDQUNIRixLQUFNLCtCQUNObmIsTUFBTy9lLEtBQUs0UCxLQUFLQyxTQUFTLGVBQzFCcVMsU0FBVSxTQUdkd0ksUUFBUyxPQUVQaFYsV0FBV2hVLE9BQVMsR0FDdEIsSUFBSXNnQixPQUFPdmUsTUFBTTRlLFFBQU8sR0FJNUIzaEIsb0JBQXFCa1UsU0FDbkIsSUFBSyxJQUFJNFMsTUFBUSxFQUFHQSxNQUFRNVMsUUFBUWxULE9BQVE4bEIsY0FDcEM1UyxRQUFRNFMsT0FBT21PLFdBQVc3bkIsT0FBT3NDLEtBQUtvcEIsbUJBQW9CLENBQzlEQyxhQUFhLElBRWZ6M0IsWUFBWStKLE9BQU8sQ0FDakJELFFBQVMsVUFBVThJLFFBQVE0UyxPQUFPM2EsUUFBUXVELEtBQUtvcEIsd0JBS3JEOTRCLGlCQUFrQjJCLFFBQVUsQ0FBRWlYLFFBQVEsSUFDaENsSixLQUFLbXBCLHFCQUFxQm5wQixLQUFLMnBCLFlBQ25DLElBQUlqbUIsT0FBUzFELEtBQUtvcEIsa0JBQ2xCLEdBQUluakIsTUFBTXZJLE9BQU9nRyxTQUFVLENBQ3pCLEdBQUk5VCxLQUFLNFAsS0FBS0MsU0FBUyw2QkFBK0JpRSxPQUlwRCxZQURBckUsR0FBR0MsY0FBY2tXLE1BQU0sMkJBRnZCOVIsT0FBUyxFQU1UMUQsS0FBSzJFLG1CQUNEM0UsS0FBSzJFLFlBQVk0Z0IsV0FBVzduQixPQUFPZ0csUUFBUyxDQUNoRDJsQixhQUFhLElBR2pCcnBCLEtBQUt3cEIsaUJBQWtCLEVBQ3ZCdjNCLFFBQVFpWCxZQUNvQixJQUFuQmpYLFFBQVFpWCxRQUFnQ2pYLFFBQVFpWCxPQUNyRGpYLFFBQVFpWCxRQUFRbEosS0FBSzJjLGlCQUd2QjJGLFlBQ0YsT0FBT3RpQixLQUFLL04sUUFBUXF3QixPQUFTLFNBRzNCQSxVQUFPbGUsR0FDTSxDQUFDLFNBQVUsT0FBUSxXQUN0QjZsQixRQUFRN2xCLEVBQUV0SSxpQkFDdEJrRSxLQUFLMm1CLFNBQVNyRSxNQUFRbGUsR0FHcEJtZ0Isb0JBQ0YsTUFBTWpDLE1BQVF0aUIsS0FBS3NpQixNQUNuQixJQUFJN3VCLFFBQVV1TSxLQUFLc0UsUUFBUWpSLE1BQU1BLE1BQU1pdkIsTUFBTUEsUUFBUTVlLE9BQ2pEd21CLEdBQUtscUIsS0FBS2pILE1BQU1teEIsR0FXcEIsR0FURUEsR0FEUyxPQUFQQSxHQUNHLEdBRUEsR0FBR0EsS0FHTkEsS0FBT0EsR0FBR250QixXQUFXLE9BQU1tdEIsR0FBSyxJQUFNQSxJQUN0Q2xxQixLQUFLc0UsT0FBT2pSLEtBQUtBLEtBQUsrckIsV0FBV3RvQixPQUFNckQsU0FBb0J5MkIsSUFDM0RscUIsS0FBS3NFLE9BQU9qUixLQUFLQSxLQUFLK3JCLFdBQVd2b0IsT0FBTXBELFFBQVVBLFFBQVV5MkIsR0FBSyxNQUVoRXoyQixRQUFTLENBQ1gsTUFBTWl4QixVQUFZLElBQUl4MEIsS0FBS3VELFNBQVMyVCxTQUFTLENBQUVDLFVBQVUsSUFBUTVXLE1BQ2pFLElBQUkwNUIsV0FDSixPQUFJbnFCLEtBQUtPLFNBQ0hQLEtBQUs0a0IsUUFDUHVGLFdBQWExMkIsUUFBVSxJQUFNaXhCLFVBQ3RCeUYsWUFFQXpGLFVBR0ZqeEIsU0FLVGl5QixZQUNGLFlBQUl4aEIsSUFBY2xFLEtBQUtvcUIsUUFBMEIsS0FBaEJwcUIsS0FBS29xQixPQUFzQnBxQixLQUFLb3FCLE9BQzdEcHFCLEtBQUt5RSxPQUNBekUsS0FBSzJFLFlBQVl0UixLQUFLQSxLQUFLc1gsUUFBUSthLE1BQU12b0IsTUFFM0MsRUFHTHVvQixVQUFPdGhCLEdBQ1RwRSxLQUFLb3FCLE9BQVNobUIsR0M5UVgsTUFBTWltQixTQUNYdm1CLGNBQ0U5RCxLQUFLMkQsTUFBUSxHQUNiM0QsS0FBSzRhLFVBQVksS0FHbkJyckIsMkJBQTRCNGMsV0FDMUIsTUFBTXRSLFFBQVVqTCxLQUFLc2MsU0FBU3BjLElBQUlxYyxXQUNsQyxJQUFLdFIsUUFBUyxPQUNkLE1BQU04RSxXQUFhSyxLQUFLeW9CLFlBQVk1dEIsU0FFcEMsT0FEQThFLEtBQUt3TSxVQUFZQSxVQUNWeE0sS0FHVHBRLHlCQUEwQnNMLFNBQ3hCLE1BQU02dEIsWUFBYzNjLEVBQUVsUixRQUFReEgsS0FBS3FJLFNBQVMsR0FDNUMsSUFBS2d0QixZQUFhLE9BQ2xCLE1BQU0vb0IsV0FBYUssS0FBSzBuQixvQkFBb0JnQixhQUU1QyxPQURBL29CLEtBQUs5RSxRQUFVQSxRQUNSOEUsS0FHVHBRLGlDQUFrQ29RLE1BQ2hDLE1BQU1ncEIsU0FBV2gxQixLQUFLaVosTUFBTUMsU0FBU2xOLEtBQUtwTSxRQUFRb0osU0FDbEQsYUFBYXFELEtBQUtpTixTQUFTMGIsVUFHN0JwNUIsc0JBQXVCOEQsTUFDckIsTUFBTXNNLEtBQU92TixPQUFPMmEsT0FBTyxJQUFJL00sS0FBUTNNLE1BQ3ZDLElBQUssSUFBSStqQixNQUFRLEVBQUdBLE1BQVF6WCxLQUFLZ0UsTUFBTXJTLE9BQVE4bEIsUUFDQSxXQUF6Q3pYLEtBQUtnRSxNQUFNeVQsUUFBUXRULGFBQWFySCxPQUNsQ2tELEtBQUtnRSxNQUFNeVQsT0FBU2hsQixPQUFPMmEsT0FBTyxJQUFJN00sVUFBYVAsS0FBS2dFLE1BQU15VCxRQUMxRHpYLEtBQUtnRSxNQUFNeVQsT0FBT2tCLFNBQ3BCM1ksS0FBS2dFLE1BQU15VCxPQUFPc1MsZ0JBQWtCL3BCLEtBQUtnRSxNQUFNeVQsT0FBT2tULGdCQUk1RCxPQUFPM3FCLEtBR1RwUSx1QkFBd0JnRixPQUN0QkEsTUFBTTBhLGlCQUVOLE1BQU1zYixLQUFPaDJCLE1BQU00aUIsY0FDbkIsR0FBSW9ULE1BQVFBLEtBQUt0MkIsVUFBVWtrQixTQUFTLG9CQUFzQnZvQixLQUFLb0MsS0FBS3FoQixLQUNsRSxPQUVGLE1BQU14WSxRQUFVMHZCLEtBQUt2ZCxRQUFRLGlCQUN2QnJOLFdBQWFLLEtBQUt3cUIsY0FBYzN2QixRQUFRdEgsUUFBUTRZLFdBQ3RELElBQUt4TSxLQUFNLE9BQ1gsTUFBTTRjLEtBQU9nTyxLQUFLaDNCLFFBQVFncEIsS0FDMUIsSUFBS0EsS0FBTSxPQUNYLE1BQU0zTCxPQUFTMlosS0FBS3ZkLFFBQVEsV0FDNUIsR0FBSzRELE9BRUUsQ0FDTCxNQUFNaUIsUUFBVWpCLE9BQU9sUCxpQkFBaUIsa0JBQ3hDLElBQUssTUFBTXFmLEtBQUtsUCxRQUNkbFMsS0FBS2lwQixVQUFVN0gsRUFBRXh0QixRQUFRZ3BCLE1BRTNCNWMsS0FBS3luQixRQUFRN0ssV0FOYjVjLEtBQUsrYyxXQUFXSCxNQVFsQjVjLEtBQUtnZCxpQkFHUHB0QixzQkFBdUI4RCxNQUNyQixHQUFJekQsS0FBS29DLEtBQUtxaEIsS0FBTSxDQUNsQixJQXdCSTFULEtBeEJBdU0sU0FBVzdNLEdBQUcrTSxLQUFLcWUsV0FBV3A1QixRQUFPd0osU0FFckNtRixLQUFLMHFCLGNBQWN4dkIsT0FBU0wsUUFBUTh2QixRQUFRLE9BQVEsU0FDZixhQUFyQzl2QixRQUFROHZCLFFBQVEsT0FBUSxZQUVwQixDQUFDLGdCQUFnQng1QixTQUFTNk8sS0FBSzBxQixjQUFjeHZCLE9BQ3hDTCxRQUFROHZCLFFBQVEsT0FBUSxlQUFpQnQzQixLQUFLcEQsS0FBSzJxQixhQU9oRSxHQUFJMU8sU0FBUzVhLE9BQVEsQ0FFbkIsTUFBTXM1QixVQUFZLElBQUlDLEtBQUszZSxTQUFTLEdBQUc3WSxLQUFLdTNCLFdBR3hDLE9BRlEsSUFBSUMsS0FDV0QsV0FBYSxZQUVoQzFlLFNBQVMsR0FBR2tiLFFBQVEsT0FBUSxRQUFTLFlBQzNDbGIsU0FBVyxJQU1Wdk0sS0FEQXVNLFNBQVM1YSxhQUNJME8sS0FBS3lvQixZQUFZdmMsU0FBUyxJQURmLElBQUlsTSxVQUVILElBQW5CM00sS0FBS2dSLFlBQ2QxRSxLQUFLMEUsVUFBWWhSLEtBQUtnUixpQkFFbEIxRSxLQUFLbXJCLFFBQVF6M0IsV0FDZHpELEtBQUttaEIsT0FBT0MsS0FBSyxjQUFlM2QsTUFHekMvQyxrQkFDRSxNQUFNcWIsV0FBYUMsZUFBZTVMLEtBQUsrcUIsT0FBT2xmLFNBQVU3TCxNQUNsRDhMLGdCQUFrQkMsRUFBRUosTUFDMUJHLGdCQUFnQixHQUFHdlksUUFBUW9KLE9BQVNqSixPQUFPc00sS0FBS2duQixZQUVoRCxNQUFNdjFCLFNBQVcsQ0FDZk8sS0FBTXBDLEtBQUtvQyxLQUFLeUosR0FDaEJWLE9BQVFuTCxLQUFLNFAsS0FBS0MsU0FBU08sS0FBSytxQixPQUFPdjNCLE9BQ3ZDa0ksUUFBU29RLGdCQUFnQixHQUFHTixVQUM1QndmLE1BQU8sQ0FDTHhELEtBQU0sQ0FDSnRzQixLQUFNOEUsS0FBSytxQixPQUFPN3ZCLEtBQ2xCa0wsTUFBTyxZQUNQd1UsVUFBVzVhLEtBQUs0YSxhQUtsQixDQUFDLFNBQVUsYUFBYXpwQixTQUFTNk8sS0FBS3ZRLFlBQ3hDZ0MsU0FBU0MsUUFBVUUsWUFBWTZULHFCQUFxQixPQUVoQyxjQUFsQnpGLEtBQUt2USxXQUEwQmdDLFNBQVNFLE9BQVEsR0FHcEQsYUFEa0JDLFlBQVkrSixPQUFPbEssVUFJdkNuQix1QkFFRSxTQURNMFAsS0FBS2tuQixVQUNObG5CLEtBQUttTSxVQUVILENBQ0wsTUFBTVIsV0FBYUMsZUFBZTVMLEtBQUsrcUIsT0FBT2xmLFNBQVU3TCxNQUNsRDhMLGdCQUFrQkMsRUFBRUMsVUFBVUwsTUFBTSxHQUcxQ0csZ0JBQWdCdlksUUFBUW9KLE9BQVNqSixPQUFPc00sS0FBS2duQixZQUc3QyxNQUFNL2EsWUFBY3JjLEtBQUtzYyxTQUFTcGMsSUFBSWtRLEtBQUttTSxXQUN2Q25NLEtBQUttbkIsY0FBY2xiLFlBQVltYixRQUFRLE9BQVEsUUFBUyxZQUU1RCxNQUFNdnJCLFVBQVlvUSxZQUFZL0MsT0FBTyxDQUNuQ3hOLFFBQVNvUSxnQkFBZ0JOLFlBRzNCLGFBRE1uTSxHQUFHK00sS0FBS0MsY0FBY3hRLEtBQUssR0FDMUJBLFVBaEJEbUUsS0FBS21PLFlBb0JmOGMsV0FBWTUzQixNQUNMQSxLQUFLNjNCLFFBQ1I5NEIsT0FBTzJhLE9BQU8vTSxLQUFLMkQsTUFBTXRRLEtBQUs4M0IsTUFBTzkzQixLQUFLcEQsTUFJOUNtN0IsWUFBYS8zQixNQUNYLE1BQU1pUCxNQUFRbFEsT0FBTzJhLE9BQU8sSUFBSTdNLFVBQWE3TSxLQUFLcEQsTUFDbEQrUCxLQUFLMkQsTUFBTXpTLEtBQUtvUixPQUNTLGlCQUFyQnRDLEtBQUsrcUIsT0FBTzd2QixPQUNkOEUsS0FBSzRhLFVBQVl2bkIsS0FBS3BELEtBQUsycUIsV0FJL0J5USxRQUFTaDRCLE1BQ1AyTSxLQUFLMkQsTUFBTXpTLEtBQUttQyxNQUdsQmk0QixXQUFZSCxNQUNWbnJCLEtBQUsyRCxNQUFNNG5CLE9BQU9KLEtBQU0sR0FHMUIvRCxRQUFTeEssV0FDRkEsVUFBbUMsV0FBckI3USxFQUFFN1EsS0FBSzBoQixhQUMxQjVjLEtBQUs0YyxXQUFZLEdBR25CZ00sVUFBV2hNLFdBQ0pBLFVBQW1DLFdBQXJCN1EsRUFBRTdRLEtBQUswaEIsYUFDMUI1YyxLQUFLNGMsV0FBWSxHQUduQkYsV0FBWUUsVUFDVjVjLEtBQUs0YyxXQUFhNWMsS0FBSzRjLFVBR3JCL2hCLGNBQ0YsT0FBSW1GLEtBQUtxb0IsU0FBaUJyb0IsS0FBS3FvQixTQUMzQnJvQixLQUFLc29CLFdBQW1CMTRCLEtBQUtzYyxTQUFTcGMsSUFBSWtRLEtBQUtzb0IsaUJBQW5ELEVBSUV6dEIsWUFBU3VKLEdBQ1hwRSxLQUFLcW9CLFNBQVdqa0IsRUFHZCtILGdCQUNGLE9BQUluTSxLQUFLc29CLFdBQW1CdG9CLEtBQUtzb0IsV0FDN0J0b0IsS0FBS3FvQixTQUFpQnJvQixLQUFLcW9CLFNBQVM1c0IsUUFBeEMsRUFJRTBRLGNBQVcvSCxHQUNicEUsS0FBS3NvQixXQUFhbGtCLEVBS1RzbUIsMkJBQ1QsTUFBTyxDQUNMbkMsUUFBUyxDQUFDLFNBQVUsU0FBVSxRQUFTLFdBQVksYUFDbkRDLGlCQUFrQixNQU1sQmdELGNBQ0YsT0FBT3hyQixLQUFLMkQsTUFBTXRTLFFBQU91UyxHQUFLQSxFQUFFcVgsU0FHOUJBLGFBQ0YsR0FBSWpiLEtBQUt3ckIsUUFBUWw2QixPQUFRLE9BQU8wTyxLQUFLd3JCLFFBQVEsR0FJM0NDLGNBQ0YsT0FBT3pyQixLQUFLMkQsTUFBTXRTLFFBQU91UyxJQUFNQSxFQUFFcVgsU0FHL0JHLGFBQ0YsR0FBSXBiLEtBQUt5ckIsUUFBUW42QixPQUFRLE9BQU8wTyxLQUFLeXJCLFFBQVEsR0FJM0NDLGdCQUNGLE9BQUkxckIsS0FBS3dyQixRQUFRbDZCLE9BQVMsRUFJeEIraEIsV0FDRixPQUFPempCLEtBQUtvQyxLQUFLcWhCLEtBR2Y1akIsZUFFRixPQURLdVEsS0FBS3FFLFlBQVdyRSxLQUFLcUUsVUFBWXpVLEtBQUtJLFNBQVNGLElBQUksT0FBUSxhQUN6RGtRLEtBQUtxRSxVQUdWNVUsYUFBVTJVLElBQ0YsSUFBTkEsSUFBYXBFLEtBQUtxRSxVQUFZelUsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGFBQzVEa1EsS0FBS3FFLFVBQVlELEVBR2YvUSxXQUNGLE9BQU9NLEtBQUtpWixNQUFNNU0sS0FBS2duQixZQUdyQkEsaUJBQ0YsT0FBT3J6QixLQUFLQyxVQUFVb00sTUFBTSxDQUFDaE4sSUFBS21LLFNBQ2hDLEdBQWMsT0FBVkEsUUFDQTZDLEtBQUsrcUIsT0FBT3hDLFNBQVNwM0IsU0FBUzZCLE9BQzlCQSxJQUFJK0osV0FBV2lELEtBQUsrcUIsT0FBT3ZDLGtCQUMvQixPQUFPcnJCLFVDdlFOLE1BQU13dUIseUJBQXlCdEIsU0FDcEM5NkIsNEJBQTZCb2MsTUFDM0JBLEtBQUs0TSxHQUNILFFBQ0Esb0NBQ0F2WSxLQUFLcW5CLFVBQVUxdkIsS0FBS3FJLE9BR3RCMkwsS0FBSzRNLEdBQ0gsUUFDQSx1QkFDQW9ULGlCQUFpQkMsU0FBU2owQixLQUFLcUksT0FFakMyTCxLQUFLNE0sR0FDSCxRQUNBLDRCQUNBb1QsaUJBQWlCQyxTQUFTajBCLEtBQUtxSSxPQUl4QjBxQiwyQkFDVCxPQUFPOUQsWUFBWTlnQixNQUFNNGtCLGNBQWUsQ0FDdEM3ZSxTQUFVLHNEQUNWM1EsS0FBTSxnQkFJTjZ2QixhQUNGLE9BQU9ZLGlCQUFpQmpCLGNBR3RCbUIsbUJBQ0YsR0FBSTdyQixLQUFLaEssUUFDUCxHQUFJZ0ssS0FBSzJELE9BQU9yUyxPQUFRLENBQ3RCLE1BQU13NkIsU0FBVzlyQixLQUFLMkQsTUFBTXRTLFFBQU91UyxHQUFpQixJQUFaQSxFQUFFd1QsT0FBZXhULEVBQUVrb0IsV0FDM0QsR0FBSUEsU0FBU3g2QixPQUFRLE9BQU93NkIsU0FBUyxVQU92Q0MsbUJBQ0YsR0FBSS9yQixLQUFLaEssUUFDUCxHQUFJZ0ssS0FBSzJELE9BQU9yUyxPQUFRLENBQ3RCLE1BQU0wNkIsU0FBV2hzQixLQUFLMkQsTUFBTXRTLFFBQU91UyxHQUFpQixJQUFaQSxFQUFFd1QsUUFBZ0J4VCxFQUFFa29CLFdBQzVELEdBQUlFLFNBQVMxNkIsT0FBUSxPQUFPMDZCLFNBQVMsVUFPdkNDLHdCQUNGLFNBQ0Vqc0IsS0FBSytyQixjQUFjaHpCLE9BQU9tekIsWUFBWXp2QixPQUN0Q3VELEtBQUsrckIsY0FBY2xyQixPQUFPcEUsT0FHeEJ1RCxLQUFLK3JCLGFBQWFoekIsTUFBTW16QixXQUFXenZCLEtBQUtYLGdCQUN4Q2tFLEtBQUsrckIsYUFBYWxyQixNQUFNcEUsS0FBS1gsY0FNL0Jxd0Isd0JBQ0YsWUFBd0IsSUFBYm5zQixLQUFLb3NCLE1BQ1Zwc0IsS0FBSytyQixlQUNDL3JCLEtBQUtpc0Isa0JBS1Zqc0IsS0FBS29zQixJQUdWQyx3QkFDRixTQUNFcnNCLEtBQUtoSyxRQUNMZ0ssS0FBSzJELE1BQU1yUyxRQUFVLEdBQ3JCME8sS0FBSzByQixXQUN1QixXQUE1QjFyQixLQUFLaWIsUUFBUXZhLE1BQU14RixNQU9uQml4QixzQkFBbUIvbkIsR0FDckJwRSxLQUFLb3NCLEtBQU0sRUFDWHBzQixLQUFLc3NCLEtBQU0sRUFHVEMsd0JBQ0YsWUFBd0IsSUFBYnZzQixLQUFLc3NCLElBQTRCdHNCLEtBQUtpc0Isa0JBQzFDanNCLEtBQUtzc0IsSUFHVkMsc0JBQW1Cbm9CLEdBQ3JCcEUsS0FBS3NzQixLQUFNLEVBQ1h0c0IsS0FBS29zQixLQUFNLEVBR1RJLFlBQ0YsT0FBT3hzQixLQUFLeXNCLFlBQWMsRUFHeEJDLHNCQUNGLFFBQUsxc0IsS0FBS2hLLFdBRVJnSyxLQUFLNnJCLGVBQ0w3ckIsS0FBSytyQixjQUNML3JCLEtBQUs2ckIsYUFBYTVyQixlQUFpQkQsS0FBSytyQixhQUFhOXJCLGNBT3JEd3NCLGtCQUNGLElBQUlFLE1BQVEsRUFDWixJQUFLLE1BQU0vb0IsS0FBSzVELEtBQUsyRCxNQUNmQyxFQUFFcVgsU0FBUTBSLE9BQVMsR0FFekIsT0FBT0EsTUFHTEMsdUJBQ0YsU0FDRTVzQixLQUFLaEssU0FDTGdLLEtBQUs2ckIsY0FDSDdyQixLQUFLNnJCLGNBQWNuckIsT0FDbkJWLEtBQUs2ckIsY0FBY25yQixLQUFLck4sS0FBS0EsS0FBSytyQixZQUFZOW9CLE1BT2hEdTJCLGlCQUNGLEdBQUk3c0IsS0FBS2hLLFFBQVVnSyxLQUFLNnJCLGNBQWdCN3JCLEtBQUsrckIsYUFBYyxDQUN6RCxJQUFLL3JCLEtBQUs2ckIsYUFBYTVRLFNBQVdqYixLQUFLK3JCLGFBQWE5USxPQUNsRCxPQUFPcnJCLEtBQUs0UCxLQUFLQyxTQUFTLGlCQUU1QixHQUFJTyxLQUFLNnJCLGFBQWE1USxPQUNwQixPQUFJamIsS0FBSzZyQixhQUFhdHhCLFNBQ2IzSyxLQUFLNFAsS0FBS1ksT0FBTyx1QkFBd0IsQ0FDOUMzRCxLQUFNdUQsS0FBSzZyQixhQUFhOXlCLE1BQU0wRCxPQUczQjdNLEtBQUs0UCxLQUFLWSxPQUFPLHFCQUFzQixDQUM1QzNELEtBQU11RCxLQUFLNnJCLGFBQWE5eUIsTUFBTTBELE9BR2xDLEdBQUl1RCxLQUFLK3JCLGFBQWE5USxPQUNwQixPQUFJamIsS0FBSytyQixhQUFheHhCLFNBQ2IzSyxLQUFLNFAsS0FBS1ksT0FBTyx1QkFBd0IsQ0FDOUMzRCxLQUFNdUQsS0FBSytyQixhQUFhaHpCLE1BQU0wRCxPQUc5QnVELEtBQUtpc0Isa0JBQ0FyOEIsS0FBSzRQLEtBQUtZLE9BQU8sb0JBQXFCLENBQzNDM0QsS0FBTXVELEtBQUsrckIsYUFBYWh6QixNQUFNMEQsT0FHM0I3TSxLQUFLNFAsS0FBS1ksT0FBTyxxQkFBc0IsQ0FDNUMzRCxLQUFNdUQsS0FBSytyQixhQUFhaHpCLE1BQU0wRCxRQU90Q25NLGNBQWUrQyxNQUNiLE9BQVFBLEtBQUtvUCxRQUNYLElBQUssTUFDRXpDLEtBQUsyRCxPQUFPclMsU0FDZjBPLEtBQUtoSyxPQUFTM0MsS0FBSzJDLGFBQVVrTyxFQUN6QmxFLEtBQUtoSyxTQUNQM0MsS0FBS3BELEtBQUs2N0IsVUFBVyxJQUd6Qno0QixLQUFLcEQsS0FBS21uQixNQUFRcFgsS0FBSzJELE1BQU1yUyxPQUM3QjBPLEtBQUtvckIsWUFBWS8zQixNQUNqQixNQUVGLElBQUssT0FDSDJNLEtBQUtvckIsWUFBWS8zQixNQUNqQixNQUVGLElBQUssYUFDSDJNLEtBQUtpckIsV0FBVzUzQixNQUloQnpELEtBQUtvQyxLQUFLcWhCLFdBQVlyVCxLQUFLMmMsaUJBQzFCL3NCLEtBQUttaEIsT0FBT0MsS0FBSyxjQUFlM2QsTUFHdkMvQyxXQUFZNjZCLFlBQ0puckIsS0FBSzJELE1BQU13bkIsTUFBTTloQixXQUN2QixNQUFNaFcsS0FBTyxDQUNYNkgsS0FBTThFLEtBQUsrcUIsT0FBTzd2QixLQUNsQnVILE9BQVEsYUFDUjBvQixLQUNBRCxPQUFRdDdCLEtBQUtvQyxLQUFLcWhCLE1BR3BCLE9BREt6akIsS0FBS29DLEtBQUtxaEIsT0FBTWhnQixLQUFLcEQsS0FBTytQLEtBQUsyRCxNQUFNd25CLE1BQU14bEIsY0FDM0N0UyxLQUdUOUQsc0JBQXVCZ0YsT0FDckJBLE1BQU0wYSxpQkFFTixNQUFNbmIsRUFBSVMsTUFBTTRpQixjQUNWMVUsT0FBUzNPLEVBQUVQLFFBQVFrUCxPQUNuQnlVLEdBQUtwakIsRUFBRWtaLFFBQVEsaUJBQ2ZuUyxRQUFVL0csRUFBRWtaLFFBQVEsaUJBQ3BCMGIsWUFBYzUwQixFQUFFa1osUUFBUSxpQkFDeEJyTixXQUFhZ3NCLGlCQUFpQmpFLG9CQUFvQmdCLGFBQ3hEL29CLEtBQUt3TSxVQUFZdFIsUUFBUXRILFFBQVE0WSxVQUNqQyxNQUFNZ2YsS0FBT3p0QixPQUFPd1osSUFBSTNqQixTQUFTNDNCLE1BRWpDLE9BQVExb0IsUUFDTixJQUFLLGdCQUNIOUMsS0FBSzNKLFFBQVUySixLQUFLM0osYUFFZDJKLEtBQUtnZCxpQkFDWCxNQUdGLElBQUssY0FDSGhkLEtBQUsyckIsV0FBV0gsWUFDVnhyQixLQUFLZ2QsaUJBQ1gsTUFHRixJQUFLLGFBQ0hoZCxLQUFLbXRCLGtCQUNDbnRCLEtBQUtnZCxpQkFDWCxNQUdGLElBQUssYUFBYyxDQUNqQixNQUFNM2hCLFFBQVVwSixZQUFZcUosYUFDdkIwRSxLQUFLZ0UsTUFBTXduQixNQUFNOXVCLFdBQ3BCc0QsS0FBS2dFLE1BQU13bkIsTUFBTTl1QixTQUFXLEdBQUdyQixRQUFRd0IsU0FBU3hCLFFBQVF1QixTQUcxRCxNQUFNbEosV0FBYXNNLEtBQUsxUCxLQUFLazdCLFlBQ3ZCeHJCLEtBQUttckIsUUFBUXozQixNQUNuQixNQUdGLElBQUssY0FBZSxDQUNsQnNNLEtBQUttdEIsa0JBQ0NudEIsS0FBS2dkLGlCQUNYLE1BQU1vUSxlQUFpQixJQUFJakUsV0FBVyxDQUNwQ3ZvQixTQUFVWixLQUFLc2IsT0FBTytSLGlCQUN0QmpwQixZQUFheFAsTUFBTTRhLFdBRXJCNGQsZUFBZTF3QixTQUFXc0QsS0FBS3NiLE9BQU9saUIsTUFBTXNELFNBQzVDMHdCLGVBQWUvbkIsVUFBWXJGLEtBQUt5YixPQUFPcmlCLE1BQU1zRCxTQUM3QzB3QixlQUFlcHNCLE9BQVNoQixLQUFLc2IsT0FBT3RhLE9BRXBDb3NCLGVBQWVwUSxpQkFDZixNQUdGLFFBQVMsQ0FDUCxNQUFNMXFCLFFBQVUsQ0FDZGlYLFFBQVEsRUFDUjdWLEtBQU1TLEVBQUVQLFFBQ1Jta0IsUUFBUzVqQixFQUFFRyxVQUNYd1EsT0FBUTNRLFNBRUpvTSxVQUFVK3NCLE1BQU10dEIsS0FBS2dFLE1BQU13bkIsTUFBTzFvQixPQUFReFEsU0FDaEQsTUFBTW9CLEtBQU8sQ0FDWDZILEtBQU04RSxLQUFLMHFCLGNBQWN4dkIsS0FDekJ1SCxPQUFRLGFBQ1Iwb0IsS0FDQUQsT0FBUXQ3QixLQUFLb0MsS0FBS3FoQixNQUVmempCLEtBQUtvQyxLQUFLcWhCLE9BQU1oZ0IsS0FBS3BELEtBQU8wUCxLQUFLZ0UsTUFBTXduQixNQUFNeGxCLGNBQ2xEaEcsS0FBS21yQixRQUFRejNCLE1BQ2IsUUFLTi9DLGNBQWU2NkIsTUFLYixHQUpBbnJCLEtBQUsyRCxNQUFRM0QsS0FBSzJELE1BQU10UyxRQUFPcEIsV0FDSyxJQUFwQkEsS0FBSzhJLE1BQU0xRixPQUd0QjgzQixLQXNCQ25yQixLQUFLMkQsTUFBTXduQixNQUFNN1MsU0FDbkJ0WSxLQUFLMkQsTUFBTXduQixNQUFNekIsZ0JBQWtCMXBCLEtBQUsyRCxNQUFNd25CLE1BQU1iLFlBQVksQ0FDOUQzVCxnQkFBZ0IsVUF2QnBCLElBQUssSUFBSWYsRUFBSSxFQUFHQSxFQUFJNVYsS0FBSzJELE1BQU1yUyxPQUFRc2tCLFdBQzlCNVYsS0FBSzJELE1BQU1pUyxHQUFHcmIsU0FFbkJ5RixLQUFLaEssVUFDSGdLLEtBQUsyRCxNQUFNaVMsR0FBR2xWLE1BQ2RWLEtBQUsyRCxNQUFNaVMsR0FBR2xWLEtBQUtyTixLQUFLQSxLQUFLK3JCLFlBQVk5b0IsUUFDekMwSixLQUFLMkQsTUFBTWlTLElBQUk3YyxPQUFPbXpCLFlBQVl6dkIsTUFDbEN1RCxLQUFLMkQsTUFBTWlTLElBQUkvVSxPQUFPcEUsTUFDdEJ1RCxLQUFLMkQsTUFBTWlTLEdBQUc3YyxNQUFNbXpCLFdBQVd6dkIsS0FBS1gsZ0JBQ2xDa0UsS0FBSzJELE1BQU1pUyxHQUFHL1UsTUFBTXBFLEtBQUtYLGdCQUMxQmtFLEtBQUsyRCxNQUFNaVMsSUFBSTdjLE9BQU9tekIsWUFBWXp2QixRQUVyQ3VELEtBQUsyRCxNQUFNaVMsR0FBR3JiLFVBQVcsR0FFdkJ5RixLQUFLMkQsTUFBTWlTLEdBQUcwQyxTQUNoQnRZLEtBQUsyRCxNQUFNaVMsR0FBRzhULGdCQUFrQjFwQixLQUFLMkQsTUFBTWlTLEdBQUcwVSxZQUFZLENBQ3hEM1QsZ0JBQWdCLEtBWXhCLEdBQUkzVyxLQUFLaEssT0FBUSxDQVNmLEdBUEFnSyxLQUFLMkQsTUFBTXVwQixNQUFLLENBQUNwNUIsRUFBR2l0QixJQUNkanRCLEVBQUVzakIsTUFBUTJKLEVBQUUzSixNQUFjLEVBQzFCdGpCLEVBQUVzakIsTUFBUTJKLEVBQUUzSixPQUFlLEVBQ3hCLElBSUxwWCxLQUFLMkQsTUFBTXJTLE9BQVMsRUFBRyxDQUN6QjBPLEtBQUsyRCxNQUFRLENBQUMzRCxLQUFLMkQsTUFBTSxHQUFJM0QsS0FBSzJELE1BQU0sSUFDeEMsSUFBSyxNQUFNQyxLQUFLNUQsS0FBSzJELGFBQ1pDLEVBQUVxWCxjQUNGclgsRUFBRXVwQixJQUtUbnRCLEtBQUsyRCxNQUFNLEtBQUkzRCxLQUFLMkQsTUFBTSxHQUFHbW9CLFVBQVcsR0FFeEM5ckIsS0FBSzJELE1BQU0sSUFBSTJVLFFBQVV0WSxLQUFLMkQsTUFBTSxJQUFJMlUsU0FDdEN0WSxLQUFLMkQsTUFBTSxHQUFHb0QsUUFBVS9HLEtBQUsyRCxNQUFNLEdBQUdvRCxVQUNwQy9HLEtBQUsyRCxNQUFNLEdBQUcxRCxhQUFlRCxLQUFLMkQsTUFBTSxHQUFHMUQsYUFDN0NELEtBQUsyRCxNQUFNLEdBQUdzWCxRQUFTLEVBQ2RqYixLQUFLMkQsTUFBTSxHQUFHMUQsYUFBZUQsS0FBSzJELE1BQU0sR0FBRzFELGFBQ3BERCxLQUFLMkQsTUFBTSxHQUFHc1gsUUFBUyxFQUVuQmpiLEtBQUttc0Isa0JBQW1CbnNCLEtBQUsyRCxNQUFNLEdBQUdzWCxRQUFTLEVBQzlDamIsS0FBSzJELE1BQU0sR0FBR3NYLFFBQVMsT0FJN0IsQ0FvQ0wsR0FuQ0FqYixLQUFLMkQsTUFBTXVwQixNQUFLLENBQUNwNUIsRUFBR2l0QixLQUNsQixHQUFJanRCLEVBQUV3a0IsU0FBV3lJLEVBQUV6SSxPQUFRLE9BQVEsRUFDbkMsSUFBS3hrQixFQUFFd2tCLFFBQVV5SSxFQUFFekksT0FBUSxPQUFPLEVBQ2xDLElBQUt4a0IsRUFBRXdrQixTQUFXeUksRUFBRXpJLE9BQVEsT0FBTyxFQUNuQyxHQUFJeGtCLEVBQUVtTSxhQUFlOGdCLEVBQUU5Z0IsYUFFckIsT0FEQUQsS0FBS2tZLFVBQVcsR0FDUixFQUVWLEdBQUlwa0IsRUFBRW1NLGFBQWU4Z0IsRUFBRTlnQixhQUVyQixPQURBRCxLQUFLa1ksVUFBVyxFQUNULEVBRVQsR0FBSXRvQixLQUFLSSxTQUFTRixJQUFJLE9BQVEseUJBQTBCLENBQ3RELEdBQUlnRSxFQUFFczVCLGVBQWlCck0sRUFBRXFNLGVBRXZCLE9BREFwdEIsS0FBS2tZLFVBQVcsR0FDUixFQUVWLEdBQUlwa0IsRUFBRXM1QixlQUFpQnJNLEVBQUVxTSxlQUV2QixPQURBcHRCLEtBQUtrWSxVQUFXLEVBQ1QsTUFFSixDQUNMLEdBQUlwa0IsRUFBRWdQLFNBQVdpZSxFQUFFamUsU0FFakIsT0FEQTlDLEtBQUtrWSxVQUFXLEdBQ1IsRUFFVixHQUFJcGtCLEVBQUVnUCxTQUFXaWUsRUFBRWplLFNBRWpCLE9BREE5QyxLQUFLa1ksVUFBVyxFQUNULEVBR1gsT0FBTyxLQUdUbFksS0FBS3F0QixTQUFXLEVBQ1pydEIsS0FBSzJELE1BQU0sSUFBTTNELEtBQUsyRCxNQUFNLEdBQUcyVSxTQUFXdFksS0FBSzJELE1BQU0sR0FBR2tELE9BQVEsQ0FDbEU3RyxLQUFLcXRCLFNBQVcsRUFDaEIsSUFBSyxJQUFJelgsRUFBSSxFQUFHQSxFQUFJNVYsS0FBSzJELE1BQU1yUyxPQUFRc2tCLElBRW5DNVYsS0FBSzJELE1BQU1pUyxJQUNYNVYsS0FBSzJELE1BQU1pUyxHQUFHMEMsUUFDZHRZLEtBQUsyRCxNQUFNLEdBQUcxRCxlQUFpQkQsS0FBSzJELE1BQU1pUyxHQUFHM1YsZUFDNUNyUSxLQUFLSSxTQUFTRixJQUFJLE9BQVEseUJBQ3ZCa1EsS0FBSzJELE1BQU0sR0FBR3lwQixpQkFBbUJwdEIsS0FBSzJELE1BQU1pUyxHQUFHd1gsZUFDL0NwdEIsS0FBSzJELE1BQU0sR0FBR2IsV0FBYTlDLEtBQUsyRCxNQUFNaVMsR0FBRzlTLFlBRTdDOUMsS0FBS3F0QixTQUFXcnRCLEtBQUtxdEIsU0FBVyxHQUt0QyxJQUFLLElBQUl6WCxFQUFJLEVBQUdBLEVBQUk1VixLQUFLMkQsTUFBTXJTLE9BQVFza0IsSUFDckM1VixLQUFLMkQsTUFBTWlTLEdBQUdxRixPQUFTckYsRUFBSTVWLEtBQUtxdEIsU0FDaENydEIsS0FBSzJELE1BQU1pUyxHQUFHdVgsSUFBTW50QixLQUFLMkQsTUFBTWlTLEdBQUdxRixRQUFVamIsS0FBS3F0QixTQUFXLEdBS2xFUCxZQUNFOXNCLEtBQUttbkIsUUFBUyxHQ2phWCxNQUFNbUcsMEJBQTBCakQsU0FDckM5NkIsNEJBQTZCb2MsTUFDM0JBLEtBQUs0TSxHQUNILFFBQ0EscUNBQ0F2WSxLQUFLcW5CLFVBQVUxdkIsS0FBS3FJLE9BR3RCMkwsS0FBSzRNLEdBQ0gsUUFDQSx3QkFDQStVLGtCQUFrQjFCLFNBQVNqMEIsS0FBS3FJLE9BRWxDMkwsS0FBSzRNLEdBQ0gsUUFDQSw2QkFDQStVLGtCQUFrQjFCLFNBQVNqMEIsS0FBS3FJLE9BSXpCMHFCLDJCQUNULE9BQU85RCxZQUFZOWdCLE1BQU00a0IsY0FBZSxDQUN0QzdlLFNBQVUsdURBQ1YzUSxLQUFNLGVBQ04xSCxNQUFPLDBCQUlQdTNCLGFBQ0YsT0FBT3VDLGtCQUFrQjVDLGNBR3ZCNkMsbUJBQ0YsR0FBSXZ0QixLQUFLc1ksT0FBUSxDQUNmLElBQUlxVSxNQUFRLEVBQ1osSUFBSyxNQUFNL29CLEtBQUs1RCxLQUFLMkQsTUFDZkMsRUFBRW1ELFNBQVE0bEIsT0FBUyxHQUV6QixPQUFPQSxPQUtQYSxtQkFDRixPQUFPeHRCLEtBQUsyRCxNQUFNLElBQUk1SyxPQUFPc0QsZUFBWTZILEVBR3ZDMlosY0FDRixRQUFpQyxJQUF0QjdkLEtBQUt1dEIsYUFDaEIsT0FBSXZ0QixLQUFLeXRCLElBQ0h6dEIsS0FBS3V0QixhQUFlLEVBR3RCdnRCLEtBQUsrUixJQUNIL1IsS0FBS3V0QixlQUFpQnZ0QixLQUFLMkQsTUFBTXJTLFlBRHZDLEVBT0VtUCxjQUNGLFFBQTRCLElBQWpCVCxLQUFLNmQsUUFDaEIsT0FBUTdkLEtBQUs2ZCxRQUdYNlAsdUJBQ0YsT0FBTzk5QixLQUFLdWhCLE1BQU1yaEIsSUFBSWtRLEtBQUs0YSxZQUFZdkgsS0FHekMvaUIsb0JBQ0UsSUFBSzBQLEtBQUtzWSxPQUFRLE9BQ2xCLE1BQU1oVyxNQUFRLElBQUlwQyxVQUtsQixhQUpNb0MsTUFBTStHLFNBQVMsQ0FDbkJwWixLQUFNK1AsS0FBSzJ0QixNQUFNcnJCLE1BQU1oQixjQUFnQixHQUN2Q3NzQixRQUFRLFVBRUd0ckIsTUFBTWdvQixZQUFZLENBQUV1RCxhQUFhLElBR2hEL0MsUUFBU3ozQixNQUNQLE9BQVFBLEtBQUtvUCxRQUNYLElBQUssTUFJTCxJQUFLLE9BQ0h6QyxLQUFLb3JCLFlBQVkvM0IsTUFDakIsTUFFRixJQUFLLGFBQ0gyTSxLQUFLaXJCLFdBQVc1M0IsTUFDaEIsTUFHRixJQUFLLGFBQ0gyTSxLQUFLOHRCLFdBQVd6NkIsTUFLaEJ6RCxLQUFLb0MsS0FBS3FoQixLQUFNclQsS0FBSzJjLGlCQUNwQi9zQixLQUFLbWhCLE9BQU9DLEtBQUssY0FBZTNkLE1BR3ZDL0MsaUJBQWtCK0MsTUFDWnpELEtBQUtvQyxLQUFLcWhCLE9BQ1ByVCxLQUFLc1ksU0FDUnRZLEtBQUtzWSxRQUFTLEVBQ2R0WSxLQUFLMnRCLE1BQVF0NkIsS0FBS3BELE9BS3hCVixzQkFBdUJnRixPQUNyQkEsTUFBTTBhLGlCQUVOLE1BQU1uYixFQUFJUyxNQUFNNGlCLGNBQ1YxVSxPQUFTM08sRUFBRVAsUUFBUWtQLE9BQ25CeVUsR0FBS3BqQixFQUFFa1osUUFBUSxpQkFDZm5TLFFBQVUvRyxFQUFFa1osUUFBUSxpQkFDcEIwYixZQUFjNTBCLEVBQUVrWixRQUFRLGlCQUN4QnJOLFdBQWEydEIsa0JBQWtCNUYsb0JBQW9CZ0IsYUFDekQvb0IsS0FBS3dNLFVBQVl0UixRQUFRdEgsUUFBUTRZLFVBQ2pDLE1BQU1nZixLQUFPenRCLE9BQU93WixJQUFJM2pCLFNBQVM0M0IsTUFFakMsT0FBUTFvQixRQUNOLElBQUssY0FDSDlDLEtBQUsyckIsV0FBV0gsWUFDVnhyQixLQUFLZ2QsaUJBQ1gsTUFHRixJQUFLLGFBQ0hoZCxLQUFLbXRCLGtCQUNDbnRCLEtBQUtnZCxpQkFDWCxNQUdGLElBQUssWUFBYSxDQUNoQixNQUFNenFCLEtBQU8sR0FDYixJQUFLLE1BQU1yQixRQUFROE8sS0FBS2dFLE1BQU8sQ0FDN0IsTUFBTXJDLGFBQWUvTyxTQUFTMUIsS0FBS3lRLGFBQWMsSUFDNUMyRSxNQUFNM0UsZ0JBQ1RwUCxLQUFLb1AsZUFBZ0IsR0FJekIsTUFBTXJSLFdBQWFYLFNBQVN5K0IsYUFBYSxDQUFFNzdCLE9BQzNDakMsS0FBSzJxQixVQUFZaHJCLEtBQUtvQyxLQUFLeUosR0FFM0IsTUFBTXBJLEtBQU8sQ0FDWDZILEtBQU04RSxLQUFLMHFCLGNBQWN4dkIsS0FDekJ1SCxPQUFRLGFBQ1J5b0IsT0FBUXQ3QixLQUFLb0MsS0FBS3FoQixLQUNsQnBqQixNQUVGKzlCLFlBQVlDLEtBQUssQ0FBRTV2QixJQUFLdk4sT0FBT285QixPQUFPcjlCLE9BQ3RDOE8sS0FBS21yQixRQUFRejNCLE1BQ2IsTUFHRixRQUFTLENBQ1AsTUFBTXBCLFFBQVUsQ0FDZGlYLFFBQVEsRUFDUjdWLEtBQU1TLEVBQUVQLFFBQ1Jta0IsUUFBUzVqQixFQUFFRyxVQUNYd1EsT0FBUTNRLFNBRUpvTSxVQUFVK3NCLE1BQU10dEIsS0FBS2dFLE1BQU13bkIsTUFBTzFvQixPQUFReFEsU0FDaEQsTUFBTW9CLEtBQU8sQ0FDWDZILEtBQU04RSxLQUFLMHFCLGNBQWN4dkIsS0FDekJ1SCxPQUFRLGFBQ1Iwb0IsS0FDQUQsT0FBUXQ3QixLQUFLb0MsS0FBS3FoQixLQUNsQnBqQixLQUFNLENBQ0oycUIsVUFBV2hyQixLQUFLb0MsS0FBS3lKLEtBR3BCN0wsS0FBS29DLEtBQUtxaEIsT0FBTWhnQixLQUFLcEQsS0FBTzBQLEtBQUtnRSxNQUFNd25CLE1BQU14bEIsY0FDbERoRyxLQUFLbXJCLFFBQVF6M0IsTUFDYixRQUtOL0MsZ0JBQ0UsR0FBSzBQLEtBQUsydEIsTUFBVixDQUVBM3RCLEtBQUsyRCxNQUFRM0QsS0FBSzJELE1BQU10UyxRQUFPcEIsV0FDSyxJQUFwQkEsS0FBSzhJLE1BQU0xRixPQUczQixJQUFLLE1BQU11USxLQUFLNUQsS0FBSzJELE1BQ2RDLEVBQUUwVSxTQUNMMVUsRUFBRTNRLFNBQVcyUSxFQUFFdEMsY0FBZ0IsRUFDL0JzQyxFQUFFaEIsV0FBYWdCLEVBQUVoQixZQUFjMUMsVUFBVW1HLGdCQUFnQmxHLFFBQ3pEeUQsRUFBRTRKLGlCQUFtQjVKLEVBQUU0SixrQkFBb0IsRUFDM0M1SixFQUFFNkosc0JBQXdCN0osRUFBRTZKLHVCQUF5QixRQUMvQzdKLEVBQUV5RixTQUFTLENBQUVwWixLQUFNK1AsS0FBSzJ0QixNQUFNL3BCLEVBQUUzUSxVQUFXMjZCLFFBQVEsS0FHN0QsSUFBSyxJQUFJaFksRUFBSSxFQUFHQSxFQUFJNVYsS0FBSzJELE1BQU1yUyxPQUFRc2tCLElBQ2pDNVYsS0FBSzJELE1BQU1pUyxHQUFHMEMsU0FDaEJ0WSxLQUFLMkQsTUFBTWlTLEdBQUc4VCxnQkFBa0IxcEIsS0FBSzJELE1BQU1pUyxHQUFHMFUsWUFBWSxDQUN4RDNULGdCQUFnQixLQUt0QjNXLEtBQUswcEIsZ0JBQWtCMXBCLEtBQUtzcUIsZUFHOUJ3QyxZQUNFOXNCLEtBQUttbkIsUUFBUyxHQ3hNbEIsTUFBTWdILDJCQUVGLCtIQUVHLE1BQU0zUCxTQUlYanZCLDZCQUE4QjBjLFlBQWFOLE1BQ3JDTSxZQUFZMGUsUUFBUSxPQUFRLGdCQUFrQi82QixLQUFLb0MsS0FBS3FoQixPQUMxRDFILEtBQUs0QyxLQUFLLGVBQWUrRyxTQUN6QjNKLEtBQ0c0QyxLQUFLLGdCQUNMa0ksWUFDQyw2QkFBNkI3bUIsS0FBSzRQLEtBQUtDLFNBQ3JDLGlDQUdOa00sS0FDRzRDLEtBQUssb0JBQ0xrSSxZQUNDLGdDQUFnQzBYLHFDQUlsQ2xpQixZQUFZMGUsUUFBUSxPQUFRLHlCQUEyQi82QixLQUFLb0MsS0FBS3FoQixNQUNuRTFILEtBQUs0QyxLQUFLLGVBQWUrRyxTQUd2QnJKLFlBQVkwZSxRQUFRLE9BQVEsYUFBZS82QixLQUFLb0MsS0FBS3FoQixPQUN2RDFILEtBQ0c0QyxLQUFLLGdCQUNMa0ksWUFBWTdtQixLQUFLNFAsS0FBS0MsU0FBUyx5QkFDbENrTSxLQUFLNEMsS0FBSyxvQkFBb0IrRyxVQUlsQy9sQix5QkFDRSxNQUFNa0MsU0FBVyxDQUNmTyxLQUFNcEMsS0FBS29DLEtBQUt5SixHQUNoQlYsT0FBUW5MLEtBQUs0UCxLQUFLQyxTQUFTLHVCQUMzQi9OLFFBQVM5QixLQUFLdWhCLE1BQU1pZCxRQUNwQmx6QixLQUFNQyxNQUFNQyxtQkFBbUJDLFFBQy9CMnZCLE1BQU8sQ0FDTHhELEtBQU0sQ0FDSjZHLFlBQVksRUFDWkMscUJBQXFCLEVBQ3JCQyxVQUFVLElBR2Q3eUIsUUFBU3l5Qiw0QkFHWHY4QixZQUFZK0osT0FBT2xLLFVBU3JCbEMsZUFFRUssS0FBSzQzQixLQUFPLE9BWWRqNEIsMkJBQTRCZ0csSUFBS29XLE1BQy9CQSxLQUFLNE0sR0FDSCxRQUNBLHVCQUNBaUcsU0FBU2dRLGtCQUFrQjcyQixLQUFLcUksT0FHbEMyTCxLQUFLNE0sR0FDSCxRQUNBLGNBQ0FpRyxTQUFTaVEseUJBQXlCOTJCLEtBQUtxSSxPQUV6QzJMLEtBQUs0TSxHQUNILFFBQ0EsZ0JBQ0FpRyxTQUFTa1EsdUJBQXVCLzJCLEtBQUtxSSxPQUV2QzJMLEtBQUs0TSxHQUNILFFBQ0EsZ0JBQ0FpRyxTQUFTbVEsd0JBQXdCaDNCLEtBQUtxSSxPQUd4QzJMLEtBQUs0TSxHQUNILFFBQ0EsZUFDQWlHLFNBQVNtUSx3QkFBd0JoM0IsS0FBS3FJLE9BRXhDMkwsS0FBSzRNLEdBQUcsUUFBUyxlQUFnQmlHLFNBQVNvUSxzQkFBc0JqM0IsS0FBS3FJLE9BRXJFMkwsS0FBSzRNLEdBQ0gsUUFDQSxvQkFDQWlHLFNBQVNxUSwyQkFBMkJsM0IsS0FBS3FJLE9BRTNDMkwsS0FBSzRNLEdBQUcsUUFBUyxpQkFBa0JpRyxTQUFTc1Esa0JBQWtCbjNCLEtBQUtxSSxPQUduRTJMLEtBQUs0TSxHQUFHLFFBQVMsbUJBQW9CaUcsU0FBU3VRLGdCQUFnQnAzQixLQUFLcUksT0FFbkUyTCxLQUFLNE0sR0FBRyxXQUFZLGNBQWVpRyxTQUFTd1EsYUFBYXIzQixLQUFLcUksT0FFOUQyTCxLQUFLNE0sR0FBRyxRQUFTLG1CQUFvQjBXLFdBQVdDLFNBQVN2M0IsS0FBS3FJLE9BQzlEMkwsS0FBSzRNLEdBQUcsWUFBYSxjQUFlMFcsV0FBV0UsZ0JBQWdCeDNCLEtBQUtxSSxPQUVwRTJMLEtBQUs0TSxHQUFHLFFBQVMscUJBQXNCaUcsU0FBUzRRLFVBQVV6M0IsS0FBS3FJLE9BRy9EMnJCLGlCQUFpQjBELGVBQWUxakIsTUFDaEMyaEIsa0JBQWtCK0IsZUFBZTFqQixNQUduQ3BjLG9CQUFxQmdGLE9BQ25CQSxNQUFNMGEsaUJBQ04sTUFBTTVTLFNBQVc5SCxNQUFNNGlCLGNBQWM1akIsUUFBUThJLFNBQzdDLEdBQUlBLFNBQVUsQ0FDWixNQUFNdEQsTUFBUTBCLFdBQVc2QixnQkFBZ0JELFVBQ3JDdEQsTUFBTTBhLFNBQVMxYSxNQUFNd2EsTUFBTXRCLFFBQU8sSUFJMUMxaUIsaUNBQWtDMGMsYUFLaEMsR0FKQTVNLEdBQUcrTSxLQUFLa2pCLGVBSUoxL0IsS0FBS29DLEtBQUtxaEIsTUFBa0MsSUFBMUJwSCxZQUFZNVksS0FBSzZILEtBQVksQ0FDakQsTUFBTXlFLEtBQU9vTSxFQUFFRSxZQUFZNVksS0FBS3FJLFNBQVMsR0FDekMsR0FBSWlFLEtBQUsxTCxVQUFVa2tCLFNBQVMsVUFDSSxTQUExQnhZLEtBQUtwTSxRQUFRMmtCLFNBQXFCLENBQ3BDLEdBQUl2WSxLQUFLMUwsVUFBVWtrQixTQUFTLGFBQzFCLEdBQUl4WSxLQUFLcE0sUUFBUW9yQixXQUFZLENBQzNCLE1BQU0vRCxVQUFZQyxtQkFBbUJGLGlCQUNuQzFPLFlBQVl4USxJQUVSZ0osT0FBU2lXLGdCQUFnQkMsaUJBQzdCQyxVQUFVK0QsWUFFWixHQUFJbGEsT0FBT3lULFNBQVUsQ0FDbkIsTUFBTXFGLGVBQWlCLElBQUloRCxtQkFDekJ0TyxZQUFZeFEsR0FDWmdKLE9BQU8wSCxVQUNQMUgsT0FBTzhZLHNCQUVIQSxlQUFlckksVUFDaEIwRixVQUFVMlUscUJBQXFCM1UsVUFBVTRVLG1CQUUzQyxDQUNMLE1BQU01VSxVQUFZQyxtQkFBbUJGLGlCQUNuQzFPLFlBQVl4USxJQUVkLEdBQUltZixVQUFVMkMsZUFBZ0IsQ0FDNUIsTUFBTUEsZUFBaUIsSUFBSWhELG1CQUN6QnRPLFlBQVl4USxHQUNaLEtBQ0FtZixVQUFVMkMsc0JBRU5BLGVBQWVySSxVQUNoQjBGLFVBQVUyVSxxQkFBcUIzVSxVQUFVNFUsZUFJcEQsR0FBSTd2QixLQUFLMUwsVUFBVWtrQixTQUFTLFVBQVcsQ0FDckMsTUFBTTFULE9BQVNpVyxnQkFBZ0JDLGlCQUFpQjFPLFlBQVl4USxJQUN0RDhoQixlQUFpQixJQUFJaEQsbUJBQ3pCOVYsT0FBTzhXLGdCQUNQdFAsWUFBWXhRLEdBQ1pnSixPQUFPOFksc0JBRUhBLGVBQWVySSxVQUNoQnpRLE9BQU80WCxlQUFla1QscUJBQ25COXFCLE9BQU80WCxlQUFlbVQsaUJBUXhDamdDLCtCQUFnQ3NMLFFBQVM4USxNQWdDdkMsR0EvQkF0TSxHQUFHK00sS0FBS2tqQixlQUVSNUksb0JBQW9CK0ksY0FBYzlqQixNQUU5QjlRLFFBQVE4dkIsUUFBUSxPQUFRLG1CQUMxQmhmLEtBQUs0QyxLQUFLLGNBQWNtaEIsWUFBWSxtQkFDcEMvakIsS0FBSyxHQUFHcFksUUFBUWc4QixlQUFnQixHQUlsQzVqQixLQUNHNEMsS0FBSyxZQUNMeUksT0FBTXppQixPQUNMQSxNQUFNNGlCLGNBQ0huSyxRQUFRLGFBQ1JuTixjQUFjLHFCQUNkNUwsVUFBVTJjLE9BQU8sVUFFeEJqRixLQUNHNEMsS0FBSyxhQUNMb2hCLFlBQVdwN0IsT0FDVkEsTUFBTTRpQixjQUNIdFgsY0FBYyxxQkFDZDVMLFVBQVVxaEIsT0FBTyxVQVFwQjFsQixLQUFLb0MsS0FBS3FoQixLQUFNLENBQ2xCLE1BQU0xVCxLQUFPZ00sS0FBSyxHQUFHOUwsY0FBYyxtQkFDbkMsR0FBSUYsTUFFQUEsS0FBSzFMLFVBQVVra0IsU0FBUyxjQUNLLFNBQTNCeFksS0FBS3BNLFFBQVE2cUIsV0FDZnplLEtBQUtwTSxRQUFRbVAsYUFDYixDQUNBLE1BQU16UyxLQUFPeVAsU0FBUzZXLGVBQWU1VyxNQUVYLFdBQXRCQSxLQUFLcE0sUUFBUWlQLE9BQ2Z2UyxLQUFLMi9CLFlBQWNqd0IsS0FBS3BNLFFBQVF5SSxRQUM1QjJELEtBQUtwTSxRQUFReUksUUFDYjJELEtBQUtwTSxRQUFRNlAsU0FFTyxjQUF0QnpELEtBQUtwTSxRQUFRaVAsT0FDZnZTLEtBQUs0L0IsWUFBY2x3QixLQUFLcE0sUUFBUXlJLFFBQzVCMkQsS0FBS3BNLFFBQVF5SSxRQUNiMkQsS0FBS3BNLFFBQVE2UCxTQUVuQnpELEtBQUtwTSxRQUFRNnFCLFVBQVksT0FFekJJLFNBQVNzUix1QkFBdUI3L0IsT0FLdEMsTUFBTTgvQixTQUFXcGtCLEtBQUs0QyxLQUFLLGdCQUMzQixJQUFLLE1BQU0zUixXQUFXbXpCLFNBQ3BCLElBQUtuZ0MsS0FBS29DLEtBQUtxaEIsS0FBTSxDQUNuQnpXLFFBQVE2WCxNQUFNNEMsUUFBVSxPQUN4QixNQUFNalUsUUFBVXhHLFFBQVFvekIsYUFBYSxpQkFDakM1c0IsU0FDRXhULEtBQUtzTSxPQUFPcE0sSUFBSXNULFNBQVNxUSxVQUMzQjdXLFFBQVE2WCxNQUFNNEMsUUFBVSxTQU1oQyxNQUFNNFksT0FBU3RrQixLQUFLNEMsS0FBSyxZQUN6QixJQUFLLE1BQU0yaEIsUUFBUUQsT0FDWnJnQyxLQUFLb0MsS0FBS3FoQixPQUNiNmMsS0FBS3piLE1BQU00QyxRQUFVLFFBSXpCLE1BQU04WSxnQkFBa0J4a0IsS0FBSzRDLEtBQUssc0JBQ2xDLElBQUssTUFBTTZoQixRQUFRRCxnQkFDYnZnQyxLQUFLb0MsS0FBS3FoQixPQUFNK2MsS0FBSzNiLE1BQU00QyxRQUFVLFFBRzNDLE1BQU1nWixjQUFnQjFrQixLQUFLNEMsS0FBSyxvQkFDaEMsSUFBSyxNQUFNNmhCLFFBQVFDLGNBQ1p6Z0MsS0FBS29DLEtBQUtxaEIsT0FBTStjLEtBQUszYixNQUFNNEMsUUFBVSxRQUc1QyxNQUFNaVosaUJBQW1CM2tCLEtBQUs0QyxLQUFLLHVCQUNuQyxJQUFLLE1BQU0yaEIsUUFBUUksaUJBQWtCLENBRW5DLElBQUl2M0IsTUFBUXlsQixTQUFTK1IsaUJBQWlCTCxLQUFLMzhCLFNBQVM4SSxVQUMvQ3RELFFBQU9BLE1BQVF5bEIsU0FBU2dTLGtCQUFrQk4sS0FBS2xqQixRQUFRLGdCQUN2RGpVLFFBQ0hBLE1BQVF5bEIsU0FBUytSLGlCQUFpQkwsS0FBS08sY0FBY2w5QixRQUFROEksV0FFMUR0RCxRQUNIQSxNQUFReWxCLFNBQVMrUixpQkFDZkwsS0FBS2xqQixRQUFRLHFCQUFxQnpaLFFBQVE4SSxXQUd6Q3RELFFBQ0hBLE1BQVF5bEIsU0FBUytSLGlCQUNmTCxLQUFLbGpCLFFBQVEscUJBQXFCelosUUFBUThJLFlBS3pDdEQsUUFBVUEsTUFBTTBhLFNBQVk3akIsS0FBS29DLEtBQUtxaEIsUUFDekM2YyxLQUFLemIsTUFBTTRDLFFBQVUsUUFLekIsSUFBS3puQixLQUFLb0MsS0FBS3FoQixLQUFNLENBRW5CLE1BQU1xZCxVQUFZL2tCLEtBQUs0QyxLQUFLLGVBQzVCLElBQUssTUFBTTJoQixRQUFRUSxVQUFXLENBRTVCLElBQUkzM0IsTUFBUXlsQixTQUFTK1IsaUJBQWlCTCxLQUFLMzhCLFNBQVM4SSxVQUMvQ3RELFFBQ0hBLE1BQVF5bEIsU0FBU2dTLGtCQUFrQk4sS0FBS2xqQixRQUFRLGdCQUU3Q2pVLFFBQ0hBLE1BQVF5bEIsU0FBUytSLGlCQUFpQkwsS0FBS08sY0FBY2w5QixRQUFROEksV0FFMUR0RCxRQUNIQSxNQUFReWxCLFNBQVMrUixpQkFDZkwsS0FBS2xqQixRQUFRLHFCQUFxQnpaLFFBQVE4SSxXQUd6Q3RELFFBQ0hBLE1BQVF5bEIsU0FBUytSLGlCQUNmTCxLQUFLbGpCLFFBQVEscUJBQXFCelosUUFBUThJLFlBS3pDdEQsUUFBVUEsTUFBTTBhLFVBQWMxYSxRQUFVbkosS0FBS29DLEtBQUtxaEIsUUFDckQ2YyxLQUFLemIsTUFBTTRDLFFBQVUsUUFLekIsTUFBTXNaLGFBQWVobEIsS0FBSzRDLEtBQUssbUJBQy9CLElBQUssTUFBTXlHLFVBQVUyYixhQUNuQjNiLE9BQU8vZ0IsVUFBVUMsSUFBSSxZQUNyQjhnQixPQUFPL2dCLFVBQVVxaEIsT0FBTyxnQkFLbkJzYiw4QkFDVCxNQUFPLENBQ0x2MkIsVUFBVyxpQkFDWEUsU0FBVSxnQkFDVnVoQixRQUFTLGNBSWJ2c0IsdUJBQXdCZ0YsT0FDdEIsTUFBTTZpQixNQUFRN2tCLFNBQVNnQyxNQUFNNGlCLGNBQWM1akIsUUFBUVAsS0FDN0M2OUIsZ0JBQWtCdDhCLE1BQU00aUIsY0FBY25LLFFBQVEscUJBQ3BELElBQUssTUFBTTRJLEtBQUtpYixnQkFBZ0JudkIsaUJBQWlCLE9BQy9Da1UsRUFBRW5CLE1BQU1xYyxPQUFTLE9BRW5CRCxnQkFDR2h4QixjQUFjLGNBQWN1WCxXQUM1QnZYLGNBQWMsT0FBTzRVLE1BQU1xYyxPQUFTLGlCQUN2QyxNQUFNdHNCLFFBQVVqUSxNQUFNNGlCLGNBQWNuSyxRQUFRLFlBQzVDLElBQUssTUFBTS9iLEtBQUt1VCxRQUFROUMsaUJBQWlCLFdBQ3ZDelEsRUFBRXdqQixNQUFNNEMsUUFBVSxPQUNsQnBtQixFQUFFc0MsUUFBUXhELE9BQVMsUUFFckIsTUFBTWdoQyxnQkFBa0J2c0IsUUFBUTNFLGNBQzlCLHFCQUFxQnVYLFdBRXZCMlosZ0JBQWdCdGMsTUFBTTRDLFFBQVUsUUFDaEMwWixnQkFBZ0J4OUIsUUFBUXhELE9BQVMsT0FLbkNSLGtDQUFtQ2dGLE9BQ2pDQSxNQUFNMGEsaUJBRU4sTUFBTXRQLEtBQU9wTCxNQUFNNGlCLGNBQWNuSyxRQUFRLGNBQ3pDLEdBQUlyTixLQUFLMUwsVUFBVWtrQixTQUFTLFVBRTFCLFlBREF1QyxnQkFBZ0JzVyxlQUFlcnhCLEtBQU1wTCxPQUt2QyxNQUFNMDhCLGNBQWdCMThCLE1BQU00aUIsY0FDekJuSyxRQUFRLHVCQUNSdEwsaUJBQWlCLGtCQUNwQixJQUFLLE1BQU13dkIsV0FBV0QsY0FDcEJDLFFBQVFqOUIsVUFBVXFoQixPQUFPLGVBRTNCL2dCLE1BQU00aUIsY0FBY25LLFFBQVEsa0JBQWtCL1ksVUFBVUMsSUFBSSxlQUc1REssTUFBTTRpQixjQUFjbkssUUFBUSxxQkFBcUIvWSxVQUFVMmMsT0FBTyxRQUdsRSxNQUFNdWdCLFlBQWM1OEIsTUFBTTRpQixjQUN2Qm5LLFFBQVEsMkJBQ1JuTixjQUFjLG9CQUNqQnN4QixZQUFZMWMsTUFBTTRDLFFBQVUsUUFDNUIsTUFBTStaLE9BQVNELFlBQVl0eEIsY0FBYyxVQW1CekMsT0FWQXV4QixPQUFPNzlCLFFBQVFrUCxPQUFTLFlBQ3hCMnVCLE9BQU83OUIsUUFBUTg5QixXQUFhOThCLE1BQU00aUIsY0FBYzVqQixRQUFRa1AsT0FDeEQydUIsT0FBTzc5QixRQUFRKzlCLGVBQWlCLzhCLE1BQU00aUIsY0FBYzVqQixRQUFRa1AsT0FDNUQydUIsT0FBTzc5QixRQUFRdU4sUUFBVXZNLE1BQU00aUIsY0FBYzVqQixRQUFRdU4sUUFDckRzd0IsT0FBTzc5QixRQUFRZytCLFdBQWFoOUIsTUFBTTRpQixjQUFjNWpCLFFBQVFnK0IsV0FDeERILE9BQU83OUIsUUFBUWkrQixVQUFZajlCLE1BQU00aUIsY0FBYzVqQixRQUFRaStCLFVBQ3ZESixPQUFPNzlCLFFBQVFvTixPQUFTcE0sTUFBTTRpQixjQUFjNWpCLFFBQVE2cEIsU0FDcERnVSxPQUFPNzlCLFFBQVFrK0IsU0FBV2w5QixNQUFNNGlCLGNBQWM1akIsUUFBUW0rQixXQUc5Q245QixNQUFNNGlCLGNBQWM1akIsUUFBUWtQLFFBQ2xDLElBQUssV0FDSDJ1QixPQUFPN1osVUFBWSxHQUFHM25CLEtBQUs0UCxLQUFLQyxTQUM5QnRNLEtBQUtpSCxZQUFZN0YsTUFBTTRpQixjQUFjNWpCLFFBQVFrUCxjQUN4Q2xPLE1BQU00aUIsY0FBYzVqQixRQUFRaStCLGNBQ2pDajlCLE1BQU00aUIsY0FBYzVqQixRQUFRZytCLGVBRTlCLE1BQ0YsSUFBSyxZQUNISCxPQUFPN1osVUFBWSxHQUFHM25CLEtBQUs0UCxLQUFLQyxTQUM5QnRNLEtBQUtpSCxZQUFZN0YsTUFBTTRpQixjQUFjNWpCLFFBQVFrUCxjQUN4Q2xPLE1BQU00aUIsY0FBYzVqQixRQUFRbStCLGVBQ2pDbjlCLE1BQU00aUIsY0FBYzVqQixRQUFRZytCLGdCQVVwQ2hpQyx1QkFBd0JnRixPQUN0QkEsTUFBTTBhLGlCQUNOLE1BQU1uYixFQUFJUyxNQUFNNGlCLGNBRWhCLEdBQUlyakIsRUFBRUcsVUFBVWtrQixTQUFTLGlCQUN2QixPQUFJcmtCLEVBQUVHLFVBQVVra0IsU0FBUyxZQUNoQmpZLFVBQVV5eEIsc0JBQXNCNzlCLEdBRWhDb00sVUFBVTB4QixvQkFBb0I5OUIsR0FLM0N2RSx5QkFBMEJnRixPQUN4QixNQUFNb0wsS0FBT3BMLE1BQU00aUIsY0FBY25LLFFBQVEsY0FDekMsR0FBSXJOLEtBQUsxTCxVQUFVa2tCLFNBQVMsVUFFMUIsWUFEQXVDLGdCQUFnQnNXLGVBQWVyeEIsS0FBTXBMLE9BSXZDLEdBQTRDLEtBQXhDQSxNQUFNNGlCLGNBQWM1akIsUUFBUXVOLFFBRTlCLFlBREF6QixHQUFHQyxjQUFja1csTUFBTTVsQixLQUFLNFAsS0FBS0MsU0FBUywyQkFLNUMsTUFBTXd4QixjQUFnQjE4QixNQUFNNGlCLGNBQ3pCbkssUUFBUSx1QkFDUnRMLGlCQUFpQixrQkFDcEIsSUFBSyxNQUFNd3ZCLFdBQVdELGNBQ3BCQyxRQUFRajlCLFVBQVVxaEIsT0FBTyxlQUUzQi9nQixNQUFNNGlCLGNBQWNsakIsVUFBVUMsSUFBSSxlQUdsQyxNQUFNaTlCLFlBQWM1OEIsTUFBTTRpQixjQUN2Qm5LLFFBQVEsMkJBQ1JuTixjQUFjLG9CQUNqQnN4QixZQUFZMWMsTUFBTTRDLFFBQVUsUUFDNUIsTUFBTStaLE9BQVNELFlBQVl0eEIsY0FBYyxVQUV6Q3V4QixPQUFPNzlCLFFBQVFrUCxPQUFTLFlBQ3hCMnVCLE9BQU83OUIsUUFBUTg5QixXQUFhLFVBQzVCRCxPQUFPNzlCLFFBQVErOUIsZUFBaUIvOEIsTUFBTTRpQixjQUFjNWpCLFFBQVFrUCxPQUM1RDJ1QixPQUFPNzlCLFFBQVF1TixRQUFVdk0sTUFBTTRpQixjQUFjNWpCLFFBQVF1TixRQUNyRHN3QixPQUFPNzlCLFFBQVFnK0IsV0FBYWg5QixNQUFNNGlCLGNBQWM1akIsUUFBUWcrQixXQUN4REgsT0FBTzc5QixRQUFRaStCLFVBQVlqOUIsTUFBTTRpQixjQUFjNWpCLFFBQVFpK0IsVUFFdkRKLE9BQU83WixVQUFZLEdBQUczbkIsS0FBSzRQLEtBQUtDLFNBQzlCdE0sS0FBS2lILFlBQVk3RixNQUFNNGlCLGNBQWM1akIsUUFBUWtQLGNBQ3hDbE8sTUFBTTRpQixjQUFjNWpCLFFBQVFpK0IsY0FDakNqOUIsTUFBTTRpQixjQUFjNWpCLFFBQVFnK0IsZUFJaENoaUMsOEJBQStCZ0YsT0FFN0JBLE1BQU0wYSxpQkFDTixNQUFNNGlCLFdBQ0p0OUIsTUFBTTRpQixjQUFjc1osY0FBY3FCLHVCQUF1QixnQkFDM0QsSUFBSTFhLE1BQ0osSUFBS0EsTUFBUSxFQUFHQSxNQUFReWEsV0FBV3ZnQyxPQUFROGxCLFFBQVMsQ0FDbEQsTUFBTXhhLFFBQVVpMUIsV0FBV3phLE9BQ3ZCeGEsUUFBUXJKLFFBQVF3K0IsV0FBYXg5QixNQUFNNGlCLGNBQWM1akIsUUFBUXcrQixTQUMzRG4xQixRQUFRM0ksVUFBVUMsSUFBSSxlQUV0QjBJLFFBQVEzSSxVQUFVcWhCLE9BQU8sZUFHN0IvZ0IsTUFBTTRpQixjQUFjc1osY0FBY2w5QixRQUFRcU8sU0FDeENyTixNQUFNNGlCLGNBQWM1akIsUUFBUXcrQixTQUdoQ3hpQyxtQ0FBb0NnRixPQUNsQyxNQUFNb0wsS0FBT3BMLE1BQU00aUIsY0FBY25LLFFBQVEsY0FFekMsR0FBSXJOLEtBQUsxTCxVQUFVa2tCLFNBQVMsVUFDdEJ4WSxLQUFLMUwsVUFBVWtrQixTQUFTLGFBQWMsQ0FDeEMsTUFBTTZaLFVBQVl2VCxtQkFBbUIvUixZQUFZL00sTUFDN0NwTCxNQUFNNGlCLGNBQWNsakIsVUFBVWtrQixTQUFTLFlBQ3pDNlosVUFBVXJPLGlCQUFpQixHQUNsQnB2QixNQUFNNGlCLGNBQWNsakIsVUFBVWtrQixTQUFTLGFBQ2hENlosVUFBVXJPLGtCQUFrQixJQU1wQ3AwQixxQ0FBc0NnRixPQUNwQ0EsTUFBTTBhLGlCQUVOLE1BQU10UCxLQUFPcEwsTUFBTTRpQixjQUFjbkssUUFBUSxjQUNyQ3JOLEtBQUsxTCxVQUFVa2tCLFNBQVMsV0FDdEJ4WSxLQUFLMUwsVUFBVWtrQixTQUFTLGNBQzFCMEMsbUJBQW1Cb1gsaUJBQWlCMTlCLE9BR2xDb0wsS0FBSzFMLFVBQVVra0IsU0FBUyxXQUMxQnVDLGdCQUFnQnVYLGlCQUFpQjE5QixRQUlqQ29MLEtBQUsxTCxVQUFVa2tCLFNBQVMsVUFDdEJ4WSxLQUFLMUwsVUFBVWtrQixTQUFTLGNBQzFCc0csbUJBQW1Cd1QsaUJBQWlCMTlCLE9BSXBDb0wsS0FBSzFMLFVBQVVra0IsU0FBUyxVQUl4QnhZLEtBQUsxTCxVQUFVa2tCLFNBQVMsY0FDMUJqWSxVQUFVK3hCLGlCQUFpQjE5QixPQVUvQmhGLHlCQUEwQm9RLE1BR3hCLE1BQU1ncEIsU0FBV2hwQixLQUFLcE0sUUFBUW9KLE9BQzFCaEosS0FBS2laLE1BQU1DLFNBQVNsTixLQUFLcE0sUUFBUW9KLFNBQ2pDZ0QsS0FBS3BNLFFBRVQsR0FBSW8xQixTQUFTdHNCLFNBQVUsT0FBT21pQixTQUFTK1IsaUJBQWlCNUgsU0FBU3RzQixVQUdqRSxNQUFNNkcsU0FBV3lsQixTQUFTM3NCLFFBQzFCLEdBQUlrSCxTQUFVLENBQ1osTUFBT25ILFFBQVNDLFNBQVdrSCxTQUFTakgsTUFBTSxLQUMxQyxHQUFnQixVQUFaRixRQUNGLE9BQU9uTSxLQUFLc00sT0FBT0MsT0FBT0gsU0FDckIsQ0FDTCxNQUFNUSxNQUFRNU0sS0FBS2lPLE9BQU8vTixJQUFJaU0sU0FDOUIsSUFBS1MsTUFBTyxPQUFPLEtBQ25CLE1BQU1ELE1BQVFDLE1BQU11QixvQkFBb0IsUUFBUy9CLFNBQ2pELE9BQUtPLE1BQ0VBLE1BQU14RCxPQUFTLElBQUlpRixNQUFNRixXQUFXL0UsTUFEeEIsTUFNdkIsTUFBTXFLLFFBQVV1bEIsU0FBU3ZsQixRQUN6QixHQUFJQSxRQUFTLE9BQU94VCxLQUFLc00sT0FBT3BNLElBQUlzVCxTQUVwQyxNQUFNdkksUUFBVThFLEtBQUtxTixRQUFRLFlBQ3ZCYixVQUFZdFIsUUFBVUEsUUFBUXRILFFBQVE0WSxVQUFZLEtBQ3hELEdBQUlBLFVBQVcsQ0FDYixNQUFNRixZQUFjcmMsS0FBS3NjLFNBQVNwYyxJQUFJcWMsV0FDdEMsR0FBSUYsWUFBWWphLEtBQU0sT0FBT2lhLFlBQVlqYSxLQUFLdWYsVUFHaEQsT0FBTyxLQUdUaGlCLG1CQUFvQm9RLE1BQ2xCLE1BQU05RSxRQUFVOEUsS0FBS3FOLFFBQVEsWUFDdkJiLFVBQVl0UixRQUFVQSxRQUFRdEgsUUFBUTRZLFVBQVksS0FDeEQsR0FBSUEsVUFBVyxDQUViLE9BRG9CdmMsS0FBS3NjLFNBQVNwYyxJQUFJcWMsV0FDbkIrbEIsU0FBVSxFQUcvQixPQUFPLEVBR1QzaUMsd0JBQXlCeUQsS0FDdkIsR0FBS0EsSUFBTCxDQUVBLEdBQUlBLElBQUk3QixTQUFTLEtBQU0sQ0FFckIsTUFBTzRLLFFBQVNDLFNBQVdoSixJQUFJaUosTUFBTSxLQUNyQyxHQUFnQixVQUFaRixRQUNGLE9BQU9uTSxLQUFLc00sT0FBT0MsT0FBT0gsU0FDckIsQ0FDTCxNQUFNUSxNQUFRNU0sS0FBS2lPLE9BQU8vTixJQUFJaU0sU0FDOUIsSUFBS1MsTUFBTyxPQUFPLEtBQ25CLE1BQU1ELE1BQVFDLE1BQU11QixvQkFBb0IsUUFBUy9CLFNBQ2pELE9BQUtPLE1BQ0VBLE1BQU14RCxPQUFTLElBQUlpRixNQUFNRixXQUFXL0UsTUFEeEIsTUFNdkIsT0FBT25KLEtBQUtzTSxPQUFPcE0sSUFBSWtELE1BQVEsTUFHakN6RCx5QkFBMEIyVCxVQUN4QixNQUFNM0csTUFBUWlpQixTQUFTMlQsU0FBU2p2QixVQUNoQyxPQUFPM0csTUFBUUEsTUFBTXhELE1BQVEsS0FHL0J4SixnQkFBaUIyVCxVQUNmLEdBQUlBLFNBQVUsQ0FDWixNQUFPbkgsUUFBU0MsU0FBV2tILFNBQVNqSCxNQUFNLEtBQzFDLEdBQWdCLFVBQVpGLFFBQXFCLENBQ3ZCLE1BQU02QixTQUFXaE8sS0FBS3NNLE9BQU9DLE9BQU9ILFVBQVVPLE1BQzlDLE9BQU9xQixTQUFTakIsT0FDWCxDQUNMLE1BQU1ILE1BQVE1TSxLQUFLaU8sT0FBTy9OLElBQUlpTSxTQUM5QixJQUFLUyxNQUFPLE9BQU8sS0FDbkIsTUFBTUQsTUFBUUMsTUFBTXVCLG9CQUFvQixRQUFTL0IsU0FDakQsT0FBS08sTUFDRUEsT0FBUyxJQUFJeUIsTUFBTUYsV0FEUCxNQUl2QixPQUFPLEtBT1R2Tyw0QkFBNkJvUSxLQUFNeXlCLE9BQVMsTUFDMUMsTUFBTWptQixVQUNNLE1BQVZpbUIsT0FBaUJ6eUIsS0FBS3FOLFFBQVEsWUFBWXpaLFFBQVE0WSxVQUFZaW1CLE9BQzFEdjNCLFFBQVVqTCxLQUFLc2MsU0FBU3BjLElBQUlxYyxXQUU1QnRRLFVBQVloQixRQUFRcU8sT0FBTyxDQUFFeE4sUUFBU2lFLEtBQUs2TCxZQUVqRCxhQURNbk0sR0FBRytNLEtBQUtDLGNBQWN4USxLQUFLLEdBQzFCQSxJQUdUdE0sK0JBQWdDZ0YsT0FFOUJBLE1BQU0wYSxpQkFFTixNQUFNbWlCLE9BQVM3OEIsTUFBTTRpQixjQUNmeFgsS0FBT3l4QixPQUFPcGtCLFFBQVEsY0FDNUIsSUFBS3JOLEtBQU0sT0FDWCxNQUFNMHlCLGNBQWdCakIsT0FBT3BrQixRQUFRLFlBRS9CdkssT0FBUzJ1QixPQUFPNzlCLFFBQVFrUCxPQUU5QixHQUFLK2IsU0FBU2dTLGtCQUFrQjd3QixNQUVoQyxPQUFROEMsUUFDTixJQUFLLFVBQVcsQ0FDZCxNQUFNc2IsV0FBYXhyQixTQUFTNitCLE9BQU83OUIsUUFBUXdxQixZQUNyQ0MsZ0JBQWtCenJCLFNBQ3RCZ0MsTUFBTTRpQixjQUFjNWpCLFFBQVF5cUIsaUJBRzlCLEdBQUlyZSxLQUFLMUwsVUFBVWtrQixTQUFTLFNBQVUsQ0FDcEMsSUFBSW1hLFVBQ0EzeUIsS0FBSzFMLFVBQVVra0IsU0FBUyxZQUMxQm1hLFVBQVk1WCxnQkFBZ0JoTyxZQUFZL00sT0FFdENBLEtBQUsxTCxVQUFVa2tCLFNBQVMsZUFDMUJtYSxVQUFZelgsbUJBQW1Cbk8sWUFBWS9NLE9BRTdDMnlCLFVBQVV4VSxZQUFZQyxXQUFZQyxnQkFBaUJyZSxXQUM5QyxHQUFJQSxLQUFLMUwsVUFBVWtrQixTQUFTLFNBQVUsQ0FDM0MsTUFBTTZaLFVBQVl2VCxtQkFBbUIvUixZQUFZL00sTUFDM0M0eUIsV0FBYW5CLE9BQU9wa0IsUUFBUSxnQkFDNUI2VyxVQUFZME8sV0FDZGhnQyxTQUFTZ2dDLFdBQVdoL0IsUUFBUTZqQixPQUM1QixLQUNKLEdBQUlnYSxPQUFPbjlCLFVBQVVra0IsU0FBUyxjQUM1QjZaLFVBQVVwTyxTQUFTQyxlQUNkLENBQ0wsTUFBTTJPLGFBQWVqZ0MsU0FBUzYrQixPQUFPNzlCLFFBQVE2akIsT0FDN0M0YSxVQUFVbFUsWUFBWStGLFVBQVcyTyxvQkFFOUIsR0FDTDd5QixLQUFLMUwsVUFBVWtrQixTQUFTLGNBQ2MsTUFBdEN4WSxLQUFLRSxjQUFjLGdCQUNuQixDQUNBLE1BQU15QyxZQUFjcEMsVUFBVXdNLFlBQVkvTSxNQUMxQyxHQUFJeXhCLE9BQU9uOUIsVUFBVWtrQixTQUFTLGNBQWUsQ0FDM0MsTUFBTTRGLFdBQWF4ckIsU0FBUzYrQixPQUFPNzlCLFFBQVF3cUIsWUFDM0N6YixNQUFNbXdCLFVBQVUxVSxnQkFDWCxDQUNMLE1BQU15VSxhQUFlamdDLFNBQVM2K0IsT0FBTzc5QixRQUFRNmpCLGFBQ3ZDOVUsTUFBTW93QixhQUFhRixtQkFFdEIsQ0FDTCxNQUFNejVCLE1BQVF5bEIsU0FBU2dTLGtCQUFrQjd3QixNQUNuQ2d6QiwwQkFDSmh6QixLQUFLRSxjQUFjLG1CQUVyQixHQUFJOUcsTUFBTW1sQixVQUFVSCxZQUFhLENBQy9CLE1BQU14dEIsT0FBU29QLEtBQUtFLGNBQWMsZUFHbEMsT0FGQUYsS0FBS3BNLFFBQVEwTSxhQUFlK2QsZ0JBQzVCcmUsS0FBS3BNLFFBQVE2cUIsVUFBWSxRQUNqQkosaUJBQ04sS0FBSzlkLFVBQVVELGFBQWFFLFFBQzFCNVAsT0FBT2duQixVQUFZM25CLEtBQUs0UCxLQUFLQyxTQUFTLHVCQUN0Q2t6QiwwQkFBMEJwYixVQUFZM25CLEtBQUs0UCxLQUFLWSxPQUM5QyxnQ0FDQSxDQUNFMmQsV0FDQTlkLGFBQWNyUSxLQUFLNFAsS0FBS0MsU0FBUyw0QkFHckMsTUFFRixLQUFLUyxVQUFVRCxhQUFhSSxLQUMxQjlQLE9BQU9nbkIsVUFBWTNuQixLQUFLNFAsS0FBS0MsU0FBUyxvQkFDdENrekIsMEJBQTBCcGIsVUFBWTNuQixLQUFLNFAsS0FBS1ksT0FDOUMsZ0NBQ0EsQ0FDRTJkLFdBQ0E5ZCxhQUFjclEsS0FBSzRQLEtBQUtDLFNBQVMseUJBR3JDLE1BRUYsS0FBS1MsVUFBVUQsYUFBYUssUUFDMUIvUCxPQUFPZ25CLFVBQVkzbkIsS0FBSzRQLEtBQUtDLFNBQVMsdUJBQ3RDa3pCLDBCQUEwQnBiLFVBQVkzbkIsS0FBSzRQLEtBQUtZLE9BQzlDLGdDQUNBLENBQ0UyZCxXQUNBOWQsYUFBY3JRLEtBQUs0UCxLQUFLQyxTQUFTLDRCQUdyQyxNQUVGLEtBQUtTLFVBQVVELGFBQWFNLFNBQzFCaFEsT0FBT2duQixVQUFZM25CLEtBQUs0UCxLQUFLQyxTQUFTLHdCQUN0Q2t6QiwwQkFBMEJwYixVQUFZM25CLEtBQUs0UCxLQUFLWSxPQUM5QyxnQ0FDQSxDQUNFMmQsV0FDQTlkLGFBQWNyUSxLQUFLNFAsS0FBS0MsU0FBUyw2QkFRekNsUCxPQUFPMEQsVUFBVTBHLFFBQVEsVUFBVyxXQUNwQ3BLLE9BQU8wRCxVQUFVcWhCLE9BQU8sVUFDeEIzVixLQUFLRSxjQUFjLGlCQUFpQnlWLFNBQ3BDM1YsS0FBS0UsY0FBYyxpQkFBaUI0VSxNQUFNNEMsUUFBVSxhQUM5Q21ILFNBQVM3QixlQUFlaGQsV0FFOUJOLEdBQUdDLGNBQWNrVyxNQUNmNWxCLEtBQUs0UCxLQUFLWSxPQUFPLDBCQUEyQixDQUMxQ3JILE1BQU9BLE1BQU0wRCxRQUtyQixNQUVGLElBQUssT0FBUSxDQUNYLE1BQU1tMkIsUUFBVWp6QixLQUFLa3pCLFdBQVUsR0FDekJ0aUMsT0FBU3FpQyxRQUFRL3lCLGNBQWMsZUFDckN0UCxPQUFPZ25CLFVBQ0xobkIsT0FBT2duQixVQUFZM25CLEtBQUs0UCxLQUFLQyxTQUFTLHFCQUN4Q2xQLE9BQU8wRCxVQUFVcWhCLE9BQU8sV0FDeEJzZCxRQUFRL3lCLGNBQWMsaUJBQWlCeVYsU0FDdkNzZCxRQUFRci9CLFFBQVF1L0IsWUFBYSxRQUN2QnRVLFNBQVM3QixlQUFlaVcsUUFBU1AsY0FBYzkrQixRQUFRNFksaUJBQ3ZEak0sVUFBVWhQLEtBQUt5TyxNQUNyQixNQUVGLElBQUssWUFBYSxDQUNoQixJQUVJcXNCLFNBRkErRyxZQUFjeCtCLE1BQU00aUIsY0FBY25LLFFBQVEsMkJBQzNDelosUUFBUXlJLFFBRU4rMkIsWUFLSC9HLFNBQVdoc0IsS0FBS2d6QixrQkFBa0JELGNBSmxDQSxZQUFjeCtCLE1BQU00aUIsY0FBY25LLFFBQVEsMkJBQ3ZDelosUUFBUTZQLFFBQ1g0b0IsU0FBV3A4QixLQUFLc00sT0FBT3BNLElBQUlpakMsY0FLN0IsTUFBTUUsYUFBZTErQixNQUFNNGlCLGNBQWM1akIsUUFBUTg5QixXQUMzQzVWLFlBQTBELFNBQTVDbG5CLE1BQU00aUIsY0FBYzVqQixRQUFRa29CLFlBQzFDblosTUFBUSxJQUFJcEMsVUFLbEIsT0FKQW9DLE1BQU1LLG1CQUFxQjB2QixjQUFjOStCLFFBQVE0WSxVQUNqRDdKLE1BQU1DLFNBQVcsVUFDakJELE1BQU1FLEtBQU8sU0FDYkYsTUFBTUcsT0FBU3d3QixhQUNQQSxjQUNOLElBQUssVUFDSDN3QixNQUFNdkosTUFBUWl6QixTQUNkMXBCLE1BQU16QixNQUFRdE0sTUFBTTRpQixjQUFjNWpCLFFBQVF1TixRQUMxQ3dCLE1BQU1NLFdBQWExQyxVQUFVbUcsZ0JBQWdCbEcsUUFDekNzYixjQUFhblosTUFBTWhCLGNBQWdCLFNBRWpDZ0IsTUFBTXJTLE9BQ1pxUyxNQUFNNkwsWUFDTixNQUNGLElBQUssWUFDSDdMLE1BQU12SixNQUFRaXpCLFNBQ2QxcEIsTUFBTXpCLE1BQVF0TSxNQUFNNGlCLGNBQWM1akIsUUFBUXVOLFFBQzFDd0IsTUFBTU0sV0FBYTFDLFVBQVVtRyxnQkFBZ0JsRyxRQUM3Q21DLE1BQU01QixLQUFPbk0sTUFBTTRpQixjQUFjNWpCLFFBQVFvTixPQUNyQzhhLGNBQWFuWixNQUFNaEIsY0FBZ0IsU0FFakNnQixNQUFNclMsT0FDWnFTLE1BQU02TCxZQUNOLE1BQ0YsSUFBSyxXQUFZLENBQ2YsTUFBTXBWLE1BQVF5bEIsU0FBU2dTLGtCQUFrQjd3QixNQUN6QyxHQUFJcXNCLFNBQVNqRyxPQUFTaHRCLE1BQU1ndEIsTUFBUSxFQUlsQyxZQUhBMW1CLEdBQUdDLGNBQWNrVyxNQUNmNWxCLEtBQUs0UCxLQUFLQyxTQUFTLGtDQUl2QjZDLE1BQU12SixNQUFRaXpCLFNBQ2QxcEIsTUFBTXpCLE1BQVF0TSxNQUFNNGlCLGNBQWM1akIsUUFBUXVOLFFBQzFDd0IsTUFBTU0sV0FBYTFDLFVBQVVtRyxnQkFBZ0JsRyxRQUN6Q3NiLGNBQWFuWixNQUFNaEIsY0FBZ0IsR0FDbkMwcUIsU0FBU2pHLE1BQVFodEIsTUFBTWd0QixRQUN6QnpqQixNQUFNaEIsYUFDSmdCLE1BQU1oQixjQUFnQnZJLE1BQU1ndEIsTUFBUWlHLFNBQVNqRyxRQUc3Q3pqQixNQUFNaEIsY0FBZ0IsSUFDeEJnQixNQUFNTSxXQUNKTixNQUFNTSxXQUFheFMsS0FBS0MsSUFBSWlTLE1BQU1oQixjQUFnQixFQUNwRGdCLE1BQU1oQixjQUFnQixTQUdsQmdCLE1BQU1yUyxPQUNacVMsTUFBTTZMLFlBQ04sT0FLSixNQUdGLElBQUssdUJBQXdCLENBQzNCLE1BQU15TSxVQUFZQyxtQkFBbUJuTyxZQUFZL00sTUFDM0MyQyxZQUFjc1ksVUFBVXNZLGtCQUM1QjMrQixNQUFNNGlCLGNBQWM1akIsUUFBUXNOLE9BRTlCa0wsRUFBRXFsQixRQUFRdDBCLEtBQUssWUFBWSxTQUNyQnhOLFNBQVM0YSxlQUFlNUgsTUFBTXpSLEtBQUtaLFlBQ25DMnFCLFVBQVV1WSxxQkFDaEIsTUFHRixJQUFLLDJCQUE0QixDQUMvQixNQUFNMXVCLE9BQVNpVyxnQkFBZ0JoTyxZQUFZL00sWUFDckM4RSxPQUFPMnVCLHlCQUNiLE1BR0YsSUFBSyxvQkFBcUIsQ0FDeEIsTUFBTTN1QixPQUFTaVcsZ0JBQWdCaE8sWUFBWS9NLE1BQ3JDMkMsWUFBY21DLE9BQU95dUIsa0JBQ3pCMytCLE1BQU00aUIsY0FBYzVqQixRQUFRc04sT0FFOUJrTCxFQUFFcWxCLFFBQVF0MEIsS0FBSyxZQUFZLFNBQ3JCeE4sU0FBUzRhLGVBQWU1SCxNQUFNelIsS0FBS1osWUFDbkN3VSxPQUFPMHVCLHFCQUNiLE1BRUYsSUFBSyxvQkFBcUIsQ0FDeEIsTUFBTXBHLGVBQWlCLElBQUlqRSxXQUFXLENBQ3BDdm9CLFNBQXNDLFNBQTVCNndCLE9BQU83OUIsUUFBUWdOLFNBQ3pCd0QsWUFBYXhQLE1BQU00YSxXQUVyQjRkLGVBQWUxd0IsU0FBVyswQixPQUFPNzlCLFFBQVE4L0IsT0FDekN0RyxlQUFlL25CLFVBQVlvc0IsT0FBTzc5QixRQUFRa1IsT0FDMUNzb0IsZUFBZXBzQixPQUFTeXdCLE9BQU83OUIsUUFBUStRLE9BQ25DK3RCLGNBQWM5K0IsUUFBUTRZLFlBQ3hCNGdCLGVBQWU1Z0IsVUFBWWttQixjQUFjOStCLFFBQVE0WSxXQUVuRDRnQixlQUFlcFEsaUJBZ0JmLE1BRUYsSUFBSyx3QkFBeUIsQ0FDNUIsTUFBTXFILGVBQWlCdkYsbUJBQW1CL1IsWUFBWS9NLE1BQ3REcWtCLGVBQWVuQiwrQkFDVG1CLGVBQWVySCxpQkFDckIsTUFFRixJQUFLLHVCQUF3QixDQUMzQixNQUFNcUgsZUFBaUJ2RixtQkFBbUIvUixZQUFZL00sWUFDaERxa0IsZUFBZXNQLGNBQ3JCLE1BRUYsSUFBSyxvQkFBcUIsQ0FDeEIsTUFBTXRQLGVBQWlCdkYsbUJBQW1CL1IsWUFBWS9NLFlBQ2hEcWtCLGVBQWVoSixhQUNyQixNQUVGLElBQUssb0JBQXFCLENBQ3hCLE1BQU1oVyxVQUFZckYsS0FBS3BNLFFBQVF5UixVQUN6QnV1QixPQUFTNXpCLEtBQUtwTSxRQUFRaEQsT0FDdEJvVSxZQUFjbEssV0FBVzZCLGdCQUFnQjBJLGlCQUN6Q0wsWUFBWTRnQixXQUFXZ08sUUFDN0IsTUFBTTFoQixRQUFVbFMsS0FBS0UsY0FBYyxpQkFDN0IwZSxVQUFZNWUsS0FBS0UsY0FBYyxlQUNyQ2tNLEVBQUV3UyxXQUFXaVYsT0FBTyxnQ0FDaEIzaEIsU0FBU0EsUUFBUXlELGVBQ2ZrSixTQUFTN0IsZUFBZWhkLE1BRTlCLE1BR0YsSUFBSyxvQkFBcUIsQ0FDeEIsTUFBTXFrQixlQUFpQnZGLG1CQUFtQi9SLFlBQVkvTSxZQUNoRHFrQixlQUFldUIsYUFDckIsTUFHRixJQUFLLG1CQUNpQnJsQixVQUFVd00sWUFBWS9NLE9BQ3BDOHlCLFlBQ04sTUFHRixJQUFLLG9CQUNpQnZ5QixVQUFVd00sWUFBWS9NLE9BQ3BDOHlCLFlBQ04sTUFHRixJQUFLLG9CQUNpQnZ5QixVQUFVd00sWUFBWS9NLE9BQ3BDOHpCLFlBQ04sTUFHRixJQUFLLGdDQUNpQnZ6QixVQUFVd00sWUFBWS9NLE9BQ3BDK3pCLHVCQUNOLE1BR0YsSUFBSyxnQ0FDaUJ4ekIsVUFBVXdNLFlBQVkvTSxPQUNwQ2cwQix1QkFDTixNQUdGLElBQUssZUFBZ0IsQ0FDbkIsTUFBTXJ4QixZQUFjcEMsVUFBVXdNLFlBQVkvTSxNQUMxQzJDLE1BQU0yQixTQUFVLEVBQ2hCM0IsTUFBTXN4QixlQUVKci9CLE1BQU1DLFNBQ05ELE1BQU1FLFNBQ1ksS0FBbEJGLE1BQU1HLFNBQ05ILE1BQU1HLFFBRU40TixNQUFNcWEsZUFBZSxDQUFFa1gsWUFBWSxJQUlyQyxNQUdGLElBQUssa0JBQW1CLENBQ3RCLE1BQU12eEIsWUFBY3BDLFVBQVV3TSxZQUFZL00sTUFDMUMyQyxNQUFNd3hCLFNBQVUsUUFDVnh4QixNQUFNK0csV0FDWi9HLE1BQU1xYSxlQUFlLENBQUVvWCxXQUFXLElBQ2xDLE1BR0YsSUFBSyx1QkFBd0IsQ0FDM0IsTUFBTXp4QixZQUFjcEMsVUFBVXdNLFlBQVkvTSxZQUNwQzJDLE1BQU0weEIsc0JBQ1oxeEIsTUFBTXN4QixlQUNOdHhCLE1BQU1xYSxpQkFDTixNQUdGLElBQUssMEJBQTJCLENBQzlCLE1BQU1sVyxTQUFXYixhQUFhOEcsWUFBWS9NLFlBQ3BDOEcsU0FBU3d0QiwyQkFDVHh0QixTQUFTa1csaUJBQ2YsTUFHRixJQUFLLGlCQUFrQixDQUNyQixNQUFNbFcsU0FBV2IsYUFBYThHLFlBQVkvTSxZQUNwQzhHLFNBQVN5dEIsZ0JBQ1R6dEIsU0FBU2tXLGlCQUNmLE1BR0YsSUFBSyxnQkFBaUIsQ0FDcEIsTUFBTWxXLFNBQVdiLGFBQWE4RyxZQUFZL00sWUFDcEM4RyxTQUFTMHRCLGFBQ2IvQyxPQUFPNzlCLFFBQVE2UyxhQUVYSyxTQUFTa1csaUJBQ2YsTUFHRixJQUFLLGdCQUFpQixDQUNwQixNQUFNbFcsU0FBV2IsYUFBYThHLFlBQVkvTSxZQUNwQzhHLFNBQVMydEIsY0FDZjN0QixTQUFTa1csaUJBQ1QsTUFHRixJQUFLLGlCQUFrQixDQUNyQixNQUFNbFcsU0FBV2IsYUFBYThHLFlBQVkvTSxZQUNwQzhHLFNBQVM0dEIsVUFDZjV0QixTQUFTa1csaUJBQ1QsTUFpQkYsSUFBSyxpQkFBa0IsQ0FDckIsTUFBTXRHLFNBQVdMLGFBQWF0SixZQUFZL00sWUFDcEMwVyxTQUFTRyxVQUNmSCxTQUFTc0csaUJBQ1QsTUFHRixJQUFLLG1CQUFvQixDQUN2QixNQUFNdEcsU0FBV0wsYUFBYXRKLFlBQVkvTSxNQUMxQzBXLFNBQVNwUyxTQUFVLEVBQ25Cb1MsU0FBU3NHLGlCQUNULFFBYU5wdEIsZ0NBQWlDZ0YsT0FDL0JBLE1BQU0wYSxpQkFDTixNQUVNdlQsUUFGU25ILE1BQU00aUIsY0FDRG5LLFFBQVEsY0FDUG5OLGNBQWMsaUJBQy9CbkUsVUFDR0EsUUFBUStZLE1BQU00QyxRQUdqQjNiLFFBQVErWSxNQUFNNEMsUUFDYyxTQUExQjNiLFFBQVErWSxNQUFNNEMsUUFBcUIsUUFBVSxPQUgvQzNiLFFBQVErWSxNQUFNNEMsUUFBVSxVQzNtQ3pCLE1BQU13RCwyQkFBMkJoWCxjQUN0Q0MsWUFBYXpILFNBQVcsS0FBTXNFLE9BQVMsS0FBTW9ELGFBQWMsR0FDekQrQixNQUFNekosU0FBVTBILGFBQ2hCL0QsS0FBS1csT0FBU0EsT0FDZFgsS0FBS2tZLFVBQVcsRUFDaEJsWSxLQUFLeWIsYUFBYyxFQUNuQnpiLEtBQUswYixXQUFZLEVBQ2pCMWIsS0FBSzJiLGFBQWMsRUFDbkIzYixLQUFLNGIsV0FBWSxFQUNqQjViLEtBQUs2YixjQUFlLEVBQ3BCN2IsS0FBS21NLFVBQVksS0FDakJuTSxLQUFLMmUsV0FBYSxLQUNsQjNlLEtBQUtzWSxRQUFTLEVBR1p6TSxlQUNGLE1BQU8sMERBR1R2YixvQkFFRSxNQUFNMmIsWUFBY3JjLEtBQUtzYyxTQUFTcGMsSUFBSWtRLEtBQUttTSxpQkFFckNGLFlBQVltYixRQUFRLE9BQVEsaUJBQWlCLFNBQzdDL25CLEdBQUcrTSxLQUFLQyxjQUFjSixhQUFhLEdBRzNDM2IsdUJBQ0VtSyxXQUFXNEssbUJBQW1CckYsS0FBSzNELFVBQ25DLE1BQU1zUCxXQUFhQyxlQUFlNUwsS0FBSzZMLFNBQVU3TCxNQUUzQ3dGLFlBQWMsR0FDaEJ4RixLQUFLekQsTUFBT2lKLFlBQVlqSixNQUFReUQsS0FDL0J3RixZQUFZek0sTUFBUWlILEtBQ3pCLE1BQU1oRixRQUFVcEosWUFBWXFKLFdBQVd1SyxhQUlqQy9ULFNBQVcsQ0FDZk8sTUFIV2dPLEtBQUtqSCxNQUFNL0csS0FBT2dPLEtBQUtqSCxNQUFNL0csS0FBT3BDLEtBQUtvQyxNQUd6Q3lKLEdBQ1hULFFBQ0FVLFFBQVNpUSxNQUdQLENBQUMsU0FBVSxhQUFheGEsU0FBUzZPLEtBQUt2USxZQUN4Q2dDLFNBQVNDLFFBQVVFLFlBQVk2VCxxQkFBcUIsT0FHdERoVSxTQUFTRSxPQUFRLEVBSWpCLGFBRjBCQyxZQUFZK0osT0FBT2xLLFVBSy9DbkIsdUJBQ0UsTUFBTXFiLFdBQWFDLGVBQWU1TCxLQUFLNkwsU0FBVTdMLE1BRTNDbkYsUUFBVWpMLEtBQUtzYyxTQUFTcGMsSUFBSWtRLEtBQUttTSxXQUVqQ3RRLFVBQVloQixRQUFRcU8sT0FBTyxDQUFFeE4sUUFBU2lRLE9BRTVDLGFBRE10TSxHQUFHK00sS0FBS0MsY0FBY3hRLEtBQUssR0FDMUJBLElBR1Q2Z0IsV0FBWUUsVUFDVixNQUFNTCxLQUFPSyxTQUFTenJCLFNBQVMsS0FDM0JzSixXQUFXZ2lCLGtCQUFrQkcsVUFDN0JBLFNBQ0o1YyxLQUFLdWMsT0FBU3ZjLEtBQUt1YyxNQUdyQmpzQix3QkFBeUJ3USxRQUFVLEtBQU11YyxTQUFVLEdBQ2pELE1BQU0vYSxNQUFRLElBQUlwQyxVQStCbEIsR0E3QkFvQyxNQUFNMkIsU0FBVSxFQUNoQjNCLE1BQU1nYixXQUFZLEVBQ2xCaGIsTUFBTUssbUJBQXFCM0MsS0FBS21NLFVBQ2hDN0osTUFBTUMsU0FBVyxVQUNqQkQsTUFBTUUsS0FBTyxZQUNiRixNQUFNRyxPQUFTLFNBQ2ZILE1BQU12SixNQUFRaUgsS0FBSzNELFNBQ25CaUcsTUFBTTVCLEtBQU9WLEtBQUtXLE9BQ2xCMkIsTUFBTXpCLE1BQVFDLFFBQ2R3QixNQUFNTSxXQUFhMUMsVUFBVW1HLGdCQUFnQmxHLFFBQzdDbUMsTUFBTWhCLGFBQWUsRUFFakIxUixLQUFLb0MsS0FBS3FoQixLQUFNclQsS0FBS3V2QixlQUFnQixFQUNwQ3Z2QixLQUFLdXZCLGVBQWdCLEVBRXRCdnZCLEtBQUt5YixjQUFhblosTUFBTWhCLGNBQWdCLEdBQ3hDdEIsS0FBSzBiLFlBQVdwWixNQUFNaEIsY0FBZ0IsR0FDdEN0QixLQUFLNmIsZUFBY3ZaLE1BQU1oQixjQUFnQixHQUN6Q3RCLEtBQUs0YixZQUFXdFosTUFBTWhCLGNBQWdCLFNBRXBDZ0IsTUFBTXJTLE9BQ1orUCxLQUFLc0MsTUFBUUEsTUFDYnRDLEtBQUtzWSxRQUFTLEVBQ2R0WSxLQUFLa1ksVUFBVyxFQUNabUYsU0FBUy9hLE1BQU02TCxZQUVuQm5PLEtBQUtxYixlQUNIL1ksTUFBTXJDLGVBQWlCQyxVQUFVRCxhQUFhSyxTQUM5Q2dDLE1BQU1yQyxlQUFpQkMsVUFBVUQsYUFBYU0sU0FDNUNQLEtBQUtpRixZQUFjakYsS0FBSzJiLFlBQWEsQ0FDdkMsTUFBTTlnQixjQUFnQmpMLEtBQUswa0MsV0FBV0MsWUFBWSxvQkFBcUIsQ0FDckV2dkIsVUFBV2hGLEtBQUtnRixVQUNoQm1ILFVBQVduTSxLQUFLbU0sVUFDaEJwSSxZQUFhL0QsS0FBSytELFlBQ2xCMUgsU0FBVTJELEtBQUszRCxXQUVqQjJELEtBQUsyZSxXQUFhOWpCLFFBQVFZLElBQU1aLFFBQVEyNUIsSUFNMUMsT0FISXgwQixLQUFLMmIsY0FBZ0IzYixLQUFLc0MsTUFBTVMsVUFDbEMvQyxLQUFLc0MsTUFBTW13QixZQUVObndCLE1BR1RoUyx5QkFBMEJnUyxNQUFRLE1BQ2hDLElBQUtBLFFBQVV0QyxLQUFLc0MsTUFBTyxPQUFPLEtBT2xDLEdBTElBLFFBQU90QyxLQUFLc0MsTUFBUUEsT0FDeEJ0QyxLQUFLL1AsS0FBT3lQLFNBQVM0RCxhQUFhdEQsS0FBS3NDLE9BQ3ZDdEMsS0FBS3NZLFFBQVMsRUFFZHRZLEtBQUsvUCxLQUFLeXRCLFVBQVksR0FDbEIxZCxLQUFLL1AsS0FBS3NRLFNBQVUsQ0FDdEJQLEtBQUsvUCxLQUFLMHRCLFVBQVksWUFDdEIzZCxLQUFLL1AsS0FBSzJ0QixVQUFZaHVCLEtBQUs0UCxLQUFLQyxTQUFTLHdCQUN6QyxJQUFLLElBQUkyWCxNQUFRLEVBQUdBLE1BQVEsRUFBR0EsUUFDN0JwWCxLQUFLL1AsS0FBS3l0QixVQUFVeHNCLEtBQUssY0FFdEIsR0FBSThPLEtBQUsvUCxLQUFLdVEsT0FBUSxDQUMzQlIsS0FBSy9QLEtBQUswdEIsVUFBWSxVQUN0QjNkLEtBQUsvUCxLQUFLMnRCLFVBQVlodUIsS0FBSzRQLEtBQUtDLFNBQVMsZUFDekMsSUFBSyxJQUFJMlgsTUFBUSxFQUFHQSxNQUFRLEVBQUdBLFFBQzdCcFgsS0FBSy9QLEtBQUt5dEIsVUFBVXhzQixLQUFLLGVBRXRCLEdBQUk4TyxLQUFLL1AsS0FBSzR0QixRQUFTLENBQzVCN2QsS0FBSy9QLEtBQUswdEIsVUFBWSxZQUNsQnpkLFVBQVVELGFBQWFFLFVBQVlILEtBQUsvUCxLQUFLZ1EsZUFDL0NELEtBQUsvUCxLQUFLMnRCLFVBQVlodUIsS0FBSzRQLEtBQUtDLFNBQVMsd0JBRXZDUyxVQUFVRCxhQUFhSSxPQUFTTCxLQUFLL1AsS0FBS2dRLGVBQzVDRCxLQUFLL1AsS0FBSzJ0QixVQUFZaHVCLEtBQUs0UCxLQUFLQyxTQUFTLHFCQUV2Q1MsVUFBVUQsYUFBYUssVUFBWU4sS0FBSy9QLEtBQUtnUSxlQUMvQ0QsS0FBSy9QLEtBQUsydEIsVUFBWWh1QixLQUFLNFAsS0FBS0MsU0FBUyx3QkFFM0MsSUFBSyxJQUFJMlgsTUFBUSxFQUFHQSxNQUFRcFgsS0FBSy9QLEtBQUtnUSxhQUFjbVgsUUFDbERwWCxLQUFLL1AsS0FBS3l0QixVQUFVeHNCLEtBQUssYUFHM0I4TyxLQUFLL1AsS0FBSzB0QixVQUFZLFFBQ3RCM2QsS0FBSy9QLEtBQUsydEIsVUFBWWh1QixLQUFLNFAsS0FBS0MsU0FBUyxnQkFDekNPLEtBQUsvUCxLQUFLeXRCLFVBQVV4c0IsS0FBSyxTQUczQixJQUFLOE8sS0FBSzJlLGFBQWUzZSxLQUFLMmIsYUFBZTNiLEtBQUtpRixVQUFXLENBQzNELE1BQU1zWSxlQUFpQixJQUFJaEQsbUJBQ3pCdmEsS0FBS3ViLGdCQUNMdmIsS0FBS21NLFdBRURxUix3QkFBMEJELGVBQWVFLG1CQUMvQ3pkLEtBQUt1ZCxlQUFpQkMsa0JBQWtCL2hCLFNBRXBDdUUsS0FBSzJjLGlCQUdicHRCLG1CQUFvQm9RLEtBQU13TSxVQUFZLE1BQ3BDLE1BQU15TyxVQUFZLElBQUlDLG1CQU90QixPQU5BcGdCLFdBQVdxRixxQkFBcUI4YSxVQUFXamIsTUFDM0NpYixVQUFVM3FCLEtBQU95UCxTQUFTZ04sWUFBWS9NLE1BRWxDQSxLQUFLcU4sUUFBUSxZQUNmNE4sVUFBVXpPLFVBQVl4TSxLQUFLcU4sUUFBUSxZQUFZelosUUFBUTRZLFVBQ2xEeU8sVUFBVXpPLFVBQVlBLFVBQ3RCeU8sVUFHVHJyQix3QkFBeUI0YyxXQUN2QixNQUFNdFIsUUFBVWpMLEtBQUtzYyxTQUFTcGMsSUFBSXFjLFdBQ2xDLElBQUt0UixRQUFTLE9BQU8sS0FDckIsTUFBTThFLEtBQU9vTSxFQUFFbFIsUUFBUXhILEtBQUtxSSxTQUFTLEdBRS9Ca2YsVUFBWUMsbUJBQW1Cbk8sWUFBWS9NLEtBQU13TSxXQUd2RCxPQUZBeU8sVUFBVXpPLFVBQVlBLFVBRWZ5TyxVQUdUcnJCLHdCQUF5QmdGLE1BQU8rbkIsZUFBZ0IsR0FDOUMsTUFBTTNjLEtBQU9wTCxNQUFNNGlCLGNBQWNuSyxRQUFRLG9CQUNuQ3VQLEtBQU9ob0IsTUFBTTRpQixjQUFjNWpCLFFBQVFncEIsS0FDbkNDLFVBQVkvaEIsV0FBV2dpQixrQkFBa0JGLE1BRy9DLEdBQUtELGNBSUUsQ0FFTCxNQUFNMUIsVUFBWUMsbUJBQW1Cbk8sWUFBWS9NLE1BQ2pEaWIsVUFBVThCLFdBQVdILE1BQ3JCM0IsVUFBVStCLHNCQVBWaGQsS0FBS3BNLFFBQVFpcEIsV0FBeUMsU0FBNUI3YyxLQUFLcE0sUUFBUWlwQixXQUN2Q2pvQixNQUFNNGlCLGNBQWNsakIsVUFBVTJjLE9BQU8sZUFDckNyYyxNQUFNNGlCLGNBQWM1akIsUUFBUXFPLFNBQVdqQyxLQUFLcE0sUUFBUWlwQixXQVN4RHNCLFlBQWFDLFdBQVlDLGdCQUFpQkMsU0FFbkNqZSxLQUFLakgsTUFBTW1sQixVQUFVSCxhQUN4QjFlLEdBQUdDLGNBQWNrVyxNQUNmLEdBQUd4VixLQUFLakgsTUFBTTBELGtEQUdsQnVELEtBQUsvUCxLQUFLa04sTUFBUSxLQUNsQjZDLEtBQUsvUCxLQUFLZ1EsYUFBZStkLGdCQUN6QmhlLEtBQUsvUCxLQUFLa3VCLFdBQVksRUFDdEJGLFFBQVExcUIsUUFBUTZxQixXQUFZLEVBRTVCLE1BQU1DLFVBQVlKLFFBQVFwZSxjQUFjLGNBQ3hDd2UsVUFBVTlxQixRQUFRNEosTUFBUSxLQUMxQmtoQixVQUFVOXFCLFFBQVEwTSxhQUFlK2QsZ0JBQ2pDSyxVQUFVOXFCLFFBQVE0cUIsV0FBWSxFQUU5QixNQUFNRyxhQUFlTCxRQUFRcGUsY0FBYyxtQkFDckMwZSxVQUFZTixRQUFRcGUsY0FBYyxlQUNsQzQwQixpQkFBbUJ4VyxRQUFRcGUsY0FDL0IsMkNBSUYsT0FGSTQwQixrQkFBa0JBLGlCQUFpQnhnQyxVQUFVcWhCLE9BQU8sYUFFaEQwSSxpQkFDTixLQUFLOWQsVUFBVUQsYUFBYUUsUUFDMUJvZSxVQUFVaEgsVUFBWTNuQixLQUFLNFAsS0FBS0MsU0FBUyx1QkFDekM2ZSxhQUFhL0csVUFBWTNuQixLQUFLNFAsS0FBS1ksT0FDakMsZ0NBQ0EsQ0FDRTJkLFdBQ0E5ZCxhQUFjclEsS0FBSzRQLEtBQUtDLFNBQVMsNEJBR3JDLE1BRUYsS0FBS1MsVUFBVUQsYUFBYUksS0FDMUJrZSxVQUFVaEgsVUFBWTNuQixLQUFLNFAsS0FBS0MsU0FBUyxvQkFDekM2ZSxhQUFhL0csVUFBWTNuQixLQUFLNFAsS0FBS1ksT0FDakMsZ0NBQ0EsQ0FDRTJkLFdBQ0E5ZCxhQUFjclEsS0FBSzRQLEtBQUtDLFNBQVMseUJBR3JDLE1BRUYsS0FBS1MsVUFBVUQsYUFBYUssUUFDdEJtMEIsbUJBQWtCQSxpQkFBaUJsaEMsUUFBUWdOLFVBQVcsR0FDMURnZSxVQUFVaEgsVUFBWTNuQixLQUFLNFAsS0FBS0MsU0FBUyx1QkFDekM2ZSxhQUFhL0csVUFBWTNuQixLQUFLNFAsS0FBS1ksT0FDakMsZ0NBQ0EsQ0FDRTJkLFdBQ0E5ZCxhQUFjclEsS0FBSzRQLEtBQUtDLFNBQVMsNEJBR3JDLE1BRUYsS0FBS1MsVUFBVUQsYUFBYU0sU0FDdEJrMEIsbUJBQWtCQSxpQkFBaUJsaEMsUUFBUWdOLFVBQVcsR0FDMURnZSxVQUFVaEgsVUFBWTNuQixLQUFLNFAsS0FBS0MsU0FBUyx3QkFDekM2ZSxhQUFhL0csVUFBWTNuQixLQUFLNFAsS0FBS1ksT0FDakMsZ0NBQ0EsQ0FDRTJkLFdBQ0E5ZCxhQUFjclEsS0FBSzRQLEtBQUtDLFNBQVMsNkJBU3pDOGUsVUFBVXRxQixVQUFVMEcsUUFBUSxVQUFXLFdBQ3ZDc2pCLFFBQVFwZSxjQUFjLGlCQUFpQnlWLFNBQ3ZDMkksUUFBUXBlLGNBQWMsaUJBQWlCNFUsTUFBTTRDLFFBQVUsT0FDdkRtSCxTQUFTN0IsZUFBZXNCLFVDcFJyQixNQUFNeVcsaUJBQWlCN2xCLE1BQzVCdmUsbUJBQ0V3VixNQUFNNnVCLG1CQUNBMzBCLEtBQUs0MEIsZUFtQ2JybEMsb0JBQXFCOEQsS0FBTXBCLFFBQVUsSUFzQm5DLE9BckJBb0IsS0FBS2tKLE1BQVFsSixLQUFLa0osT0FBUyxHQUNULGNBQWRsSixLQUFLNkgsS0FDUDByQixZQUNFdnpCLEtBQUtrSixNQUNMLENBQ0VzNEIsUUFBUSxFQUNSQyxTQUFVLEdBQ1ZDLFlBQWEsRUFDYkMsV0FBVyxFQUNYQyxZQUFhLEdBRWYsQ0FBRUMsV0FBVyxJQUVRLFlBQWQ3aEMsS0FBSzZILEtBQ2Q3SCxLQUFLOEssSUFBTSxxQ0FDWSxjQUFkOUssS0FBSzZILE9BQ2Q3SCxLQUFLOEssSUFBTSxzQkFDWHlvQixZQUFZdnpCLEtBQUtrSixNQUFPLENBQ3RCeTRCLFdBQVcsS0FHUmx2QixNQUFNbkssT0FBT3RJLEtBQU1wQixTQU81QmtqQyxxQkFDRSxNQUFNQyxXQUFhLENBQ2pCenFCLFFBQVMsQ0FDUDhILEdBQUksR0FDSkksR0FBSSxHQUNKeEksSUFBSyxHQUNMOGIsSUFBSyxHQUNMK0QsR0FBSSxHQUNKbkUsTUFBTyxLQXNCWCxZQW5CeUM3aEIsSUFBckNsRSxLQUFLM00sS0FBS0EsS0FBS3NYLFNBQVM4SCxJQUFJN2IsT0FDOUJ3K0IsV0FBV3pxQixRQUFROEgsR0FBRzdiLE1BQU8sUUFFVXNOLElBQXJDbEUsS0FBSzNNLEtBQUtBLEtBQUtzWCxTQUFTa0ksSUFBSWpjLE9BQzlCdytCLFdBQVd6cUIsUUFBUWtJLEdBQUdqYyxNQUFPLFFBRVdzTixJQUF0Q2xFLEtBQUszTSxLQUFLQSxLQUFLc1gsU0FBU04sS0FBS3pULE9BQy9CdytCLFdBQVd6cUIsUUFBUU4sSUFBSXpULE1BQU8sUUFFVXNOLElBQXRDbEUsS0FBSzNNLEtBQUtBLEtBQUtzWCxTQUFTd2IsS0FBS3Z2QixPQUMvQncrQixXQUFXenFCLFFBQVF3YixJQUFJdnZCLE1BQU8sUUFFU3NOLElBQXJDbEUsS0FBSzNNLEtBQUtBLEtBQUtzWCxTQUFTdWYsSUFBSXR6QixPQUM5QncrQixXQUFXenFCLFFBQVF1ZixHQUFHdHpCLE1BQU8sUUFFYXNOLElBQXhDbEUsS0FBSzNNLEtBQUtBLEtBQUtzWCxTQUFTb2IsT0FBT252QixPQUNqQ3crQixXQUFXenFCLFFBQVFvYixNQUFNbnZCLE1BQU8sR0FHM0J3K0IsV0FHTGxnQyxzQkFDRixNQUFNQSxnQkFBa0IsQ0FDdEJDLElBQUssQ0FDSGdJLE1BQU8sS0FDUGs0QixVQUFXLGFBQ1gxbUIsTUFBTyxrQkFDUGxiLFFBQVMsTUFFWDJCLElBQUssQ0FDSCtILE1BQU8sS0FDUGs0QixVQUFXLGFBQ1gxbUIsTUFBTyxzQkFDUGxiLFFBQVMsTUFFWDRCLElBQUssQ0FDSDhILE1BQU8sS0FDUGs0QixVQUFXLGFBQ1gxbUIsTUFBTyxjQUNQbGIsUUFBUyxNQUVYNkIsSUFBSyxDQUNINkgsTUFBTyxLQUNQazRCLFVBQVcsYUFDWDFtQixNQUFPLG1CQUNQbGIsUUFBUyxNQUVYOEIsSUFBSyxDQUNINEgsTUFBTyxLQUNQazRCLFVBQVcsYUFDWDFtQixNQUFPLG9CQUNQbGIsUUFBUyxNQUVYK0IsSUFBSyxDQUNIMkgsTUFBTyxLQUNQazRCLFVBQVcsYUFDWDFtQixNQUFPLHNCQUNQbGIsUUFBUyxNQUVYZ0MsSUFBSyxDQUNIMEgsTUFBTyxLQUNQazRCLFVBQVcsYUFDWDFtQixNQUFPLGVBQ1BsYixRQUFTLE1BRVhpQyxJQUFLLENBQ0h5SCxNQUFPLEtBQ1BrNEIsVUFBVyxhQUNYMW1CLE1BQU8sbUJBQ1BsYixRQUFTLE9BR2IsR0FBSXVNLEtBQUszTSxLQUFLQSxLQUFLNkIsZ0JBQ2pCLElBQUssTUFBT2xDLElBQUttSyxTQUFVL0ssT0FBT2dDLFFBQ2hDNEwsS0FBSzNNLEtBQUtBLEtBQUs2QixpQkFFZkEsZ0JBQWdCbEMsS0FBTyxDQUNyQkEsSUFDQXFpQyxVQUFXemxDLEtBQUs0UCxLQUFLQyxTQUFTdEMsTUFBTXVSLE9BQ3BDQyxNQUFPL2UsS0FBSzRQLEtBQUtDLFNBQVN0QyxNQUFNd1IsT0FDaEN4UixNQUFPQSxNQUFNQSxNQUNia0QsS0FBTWpRLEtBQUt1aUIsTUFBTXhWLE1BQU1BLE1BQVEsSUFBTSxLQUNyQ21ELFFBQVNsUSxLQUFLdWlCLE1BQU14VixNQUFNQSxNQUFRLElBQU0sS0FDeEMxSixRQUFTMEosTUFBTTFKLFNBSXJCLE9BQU95QixnQkFPVDNGLHVCQUF3QitsQyxhQU9wQjV0QixxQkFDRixPQUFPMUgsS0FBS3FTLG1CQUFtQmxmLEtBQUs4RixPQUFPQyxhQUd6Q3E4QixpQ0FDRixPQUFPdjFCLEtBQUt3MUIsa0JBQWtCcmlDLEtBQUs4RixPQUFPQyxZQUFhLGdCQUdyRHFSLHFCQUNGLE9BQU92SyxLQUFLcVMsbUJBQW1CbGYsS0FBSzhGLE9BQU9FLGFBR3pDczhCLGVBQ0YsT0FBSzdsQyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsWUFDM0JrUSxLQUFLbUQsUUFDQW5ELEtBQUt6RCxPQUFPbEosTUFBTThLLEtBQU82QixLQUFLN0IsSUFFOUI2QixLQUFLM00sS0FBS2tKLE9BQU80QixLQUFPNkIsS0FBSzdCLElBSmE2QixLQUFLN0IsSUFRMUQ3Tix5QkFBMEJvbEMsVUFBVyxFQUFNQyxTQUFXLEdBU3BELElBQUlwbEMsT0FBUyxLQUNiLE1BQU1xbEMscUJBQXVCRixTQUN6QjlsQyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsOEJBQzFCRixLQUFLSSxTQUFTRixJQUFJLE9BQVEsNkJBQzlCLEdBQTZCLFNBQXpCOGxDLHFCQUFpQyxDQUNuQ3JsQyxPQUFTLENBQ1BtSSxRQUFRLEVBQ1JELE9BQU8sRUFDUG85QixZQUFhLE1BRWYsTUFBTUMsbUJBQXFCbG1DLEtBQUttbUMsT0FBT2ptQyxJQUFJOGxDLHNCQUUzQyxHQURBcmxDLE9BQU95bEMsZ0JBQWtCRixtQkFBbUI3bEMsWUFDRCxJQUFoQ00sT0FBT3lsQyxVQUFVdGxDLFFBQVEsR0FBb0IsQ0FDdEQsR0FDRXlLLE1BQU04NkIsbUJBQW1CQyxXQUN6QjNsQyxPQUFPeWxDLFVBQVV0bEMsUUFBUSxHQUFHMkMsS0FBSzZILEtBQ2pDLENBQ0EsTUFBTXdGLEtBQU85USxLQUFLZ1IsTUFBTTlRLElBQUlTLE9BQU95bEMsVUFBVXRsQyxRQUFRLEdBQUcyQyxLQUFLOGlDLGVBQ3pDLElBQVR6MUIsTUFDTEEsS0FBS3JOLE1BQU1BLE1BQU02SCxNQUFNeEMsU0FBUW5JLE9BQU9tSSxRQUFTLEdBQy9DZ0ksS0FBS3JOLE1BQU1BLE1BQU02SCxNQUFNekMsUUFBT2xJLE9BQU9rSSxPQUFRLEdBQ2pEbEksT0FBT3NsQyxZQUFjLEdBQUduMUIsS0FBS2pFLFFBQVEyNUIsV0FBV0MsV0FDOUMzMUIsS0FBS3JOLEtBQUtBLEtBQUt3aUMsWUFBWTE0QixTQUU3QjVNLE9BQU9rTSxLQUFPaUUsS0FBS2pFLFlBQ1ppRSxLQUFLck4sS0FBS21oQyxVQUNYeDBCLEtBQUtzMkIsd0JBQXdCLE9BQVEsQ0FBQzUxQixLQUFLck4sUUFFakRnTSxHQUFHQyxjQUFja1csTUFDZjVsQixLQUFLNFAsS0FBS0MsU0FBUywwQ0FLdkJ0RSxNQUFNODZCLG1CQUFtQk0sT0FDekJobUMsT0FBT3lsQyxVQUFVdGxDLFFBQVEsR0FBRzJDLEtBQUs2SCxPQUVqQzNLLE9BQU9zbEMsWUFBY08sV0FBV0MsV0FDOUI5bEMsT0FBT3lsQyxVQUFVdGxDLFFBQVEsR0FBRzJDLEtBQUs2Z0IsWUFJckM3VSxHQUFHQyxjQUFja1csTUFDZjVsQixLQUFLNFAsS0FBS0MsU0FBUywyQ0FNekIsT0FBS2kyQixVQUVMMTFCLEtBQUtvTCxhQUFhalksS0FBSzhGLE9BQU9DLFlBQWEsQ0FDekN3OEIsU0FDQUMsV0FNS3BsQyxRQVZlQSxPQTBCeEJoQixrQkFDRWlpQyxVQUNBcjBCLE9BQ0EsUUFDVyxFQUFLLE1BQ1AsRUFBSSxRQUNGLEVBQUssS0FDUixFQUFLLGdCQUNNLEdBQ2YsSUFFSixNQUFNOUosS0FBTyxDQUNYb0osS0FBTSswQixVQUNOdDJCLEtBQU0sUUFDTjdILEtBQU0sQ0FDSjhKLE1BQ0FxMEIsVUFDQXBYLGVBQWdCLEdBQ2hCZ0YsV0FBWSxDQUNWdHBCLFNBQVMsRUFDVEMsT0FDQTdFLEtBQ0E4RSxVQU9OLElBSFksSUFBUm1JLE1BQ0Y5SyxLQUFLOEssSUFBTUEsTUFFVSxJQUFuQmljLGVBQTBCLENBQzVCLE1BQU1vYyxNQUFRcG1CLFNBQVNxbUIsaUJBQWlCakYsVUFBV3BYLGdCQUNuRC9tQixLQUFLQSxLQUFLK21CLGVBQWlCb2MsTUFBTXBjLGVBQ2pDL21CLEtBQUtBLEtBQUttK0IsVUFBWWdGLE1BQU1oRixVQUM1Qm4rQixLQUFLb0osS0FBTys1QixNQUFNLzVCLEtBQ2xCcEosS0FBS0EsS0FBSytyQixXQUFXdHBCLFNBQVUsRUFFakMsT0FBT3pDLEtBSVQvQyxrQkFBbUJraEMsVUFBV3IwQixNQUFPdTVCLFdBQVksR0FDL0MsTUFBTXJqQyxLQUFPcWhDLFNBQVNpQyxXQUFXbkYsVUFBV3IwQixPQUk1QyxhQUhzQjZDLEtBQUtzMkIsd0JBQXdCLE9BQVEsQ0FBQ2pqQyxNQUFPLENBQ2pFdWpDLFlBQWFGLFlBS2pCcG1DLHdCQUF5Qm1NLEtBQU1vNkIsVUFBVyxFQUFPNWMsS0FBTyxNQUd0RCxNQUFNNmMsZ0JBQWtCamQsc0JBQXNCbGUsT0FDNUMsR0FDQS9MLEtBQUs0UCxLQUFLQyxTQUNSbzNCLFNBQ0ksaUNBQ0EsbUNBRU4sRUFDQXA2QixNQUVJVSxNQUFRTyxPQUFPbzVCLFVBQVVobkMsSUFBSSxlQUM3QjBtQyxNQUFRcG1CLFNBQVNxbUIsaUJBQ3JCaDZCLEtBQ0E3TSxLQUFLNFAsS0FBS0MsU0FDUm8zQixTQUNJLGlDQUNBLG9DQUdGeGpDLEtBQU8sQ0FDWG9KLEtBQU0rNUIsTUFBTS81QixLQUNadkIsS0FBTSxRQUNON0gsS0FBTSxDQUNKNG1CLEtBQU1oVSxNQUFNOUksT0FBUyxFQUFJQSxNQUN6QjZMLFlBQWEsQ0FDWCt0QixTQUFVLEtBQ1ZDLFdBQVksS0FDWkMsVUFBVyxLQUNYaHVCLFdBQVksTUFFZHVvQixVQUFXZ0YsTUFBTWhGLFVBQ2pCcFgsZUFBZ0JvYyxNQUFNcGMsZUFDdEJnRixXQUFZLENBQ1Z0cEIsU0FBUyxFQUNURyxVQUFXNGdDLFNBQ1gzZ0MsUUFBUzJnQyxTQUNUN2dDLFFBQVEsV0FJUmdLLEtBQUtzMkIsd0JBQXdCLE9BQVEsQ0FBQ2pqQyxNQUFPLENBQ2pEdWpDLGFBQWMzYyxPQUdoQixPQURjamEsS0FBS2szQixnQkFBZ0J6NkIsTUFDdEIsR0FNZm5NLHFCQUNFLEdBQXVCLGFBQW5CMFAsS0FBSzNNLEtBQUs2SCxLQUFxQixPQUNuQyxHQUFJOEUsS0FBS3dnQixhQUFhLGVBQWdCLE9BTXRDLEdBQXNCLElBSFB4Z0IsS0FBS2szQixnQkFDbEJ0bkMsS0FBSzRQLEtBQUtDLFNBQVN0TSxLQUFLMkcsd0JBRWZ4SSxPQUFjLENBRXZCLElBQ0UsTUFBTWtsQyxNQUFRcG1CLFNBQVNxbUIsaUJBQ3JCN21DLEtBQUs0UCxLQUFLQyxTQUFTdE0sS0FBSzJHLHVCQUN4QmxLLEtBQUs0UCxLQUFLQyxTQUFTdE0sS0FBSytHLDZCQUVwQjdHLEtBQU8sQ0FDWDZILEtBQU0sUUFDTnVCLEtBQU0rNUIsTUFBTS81QixLQUNacEosS0FBTSxDQUNKNG1CLEtBQU0sRUFDTjljLE1BQU8sS0FDUHEwQixVQUFXZ0YsTUFBTWhGLFVBQ2pCcFgsZUFBZ0JvYyxNQUFNcGMsZUFDdEJnRixXQUFZLENBQ1ZwcEIsUUFBUSxFQUNSQyxVQUFVLEVBQ1ZILFNBQVMsR0FFWGsxQixNQUFPLEtBR0xucUIsWUFBY2IsS0FBS3MyQix3QkFBd0IsT0FBUSxDQUFDampDLE1BQU8sQ0FDL0R1akMsYUFBYSxJQUdUTyxhQUFlbjNCLEtBQUtzMkIsd0JBQ3hCLE9BQ0EsQ0FDRSxDQUNFNzVCLEtBQU0sZ0JBQ052QixLQUFNLFNBQ043SCxLQUFNLENBQ0p3aUMsWUFBYSxDQUNYMTRCLE1BQU8sNEJBQ1BpUCxLQUFNLDZCQUVSZ3JCLFFBQVMsU0FDVGhZLFdBQVksQ0FDVnRvQixNQUFNLEVBQ05DLE1BQU0sTUFLZCxDQUFFNi9CLGFBQWEsSUFFakIsR0FBSS8xQixNQUFNdlAsT0FBUyxHQUFLNmxDLE9BQU83bEMsT0FBUyxFQUFHLENBQ3pDLE1BQU0rbEMsY0FBZ0JyM0IsS0FBS1ksTUFBTTlRLElBQUlxbkMsT0FBTyxHQUFHMTdCLFVBQ3pDNDdCLGNBQWNudUIsT0FBTyxDQUN6QixxQkFBc0JySSxNQUFNLEdBQUdwRixHQUMvQix1QkFBd0JvRixNQUFNLEdBQUdwRSxRQUdyQyxNQUFPNUksS0FDUHlqQyxRQUFROWhCLE1BQU0sa0JBQW9CM2hCLElBQUlnSCxlQUdsQ21GLEtBQUt1M0IsYUFBYSxnQkFLNUJqbkMsaUJBQWtCbWhDLFNBQVUrRixTQUFXLEVBQUdkLFdBQVksR0FDcEQsTUFBTXJqQyxLQUFPLENBQ1hvSixLQUFNZzFCLFNBQ052MkIsS0FBTSxPQUNON0gsS0FBTSxDQUNKbWtDLFdBTUosYUFIc0J4M0IsS0FBS3MyQix3QkFBd0IsT0FBUSxDQUFDampDLE1BQU8sQ0FDakV1akMsWUFBYUYsWUFLakJwbUMsc0JBQXVCaUUsTUFBUSxNQUM3QixNQUFNbWlDLFdBQVluaUMsUUFBU0EsTUFBTTRhLFNBQ2pDLElBQUtuUCxLQUFLeTNCLGdCQUFnQjduQyxLQUFLNFAsS0FBS0MsU0FBU3RNLEtBQUtzRyxjQUNoRCxPQUFPdUcsS0FBSzAzQixXQUFXOW5DLEtBQUs0UCxLQUFLQyxTQUFTdE0sS0FBS3NHLGFBQWNpOUIsV0FFL0QsSUFBSXRmLE1BQVEsRUFDUnFhLFNBQVc3aEMsS0FBSzRQLEtBQUtDLFNBQVN0TSxLQUFLc0csYUFBZSxJQUFNMmQsTUFDNUQsS0FBT3BYLEtBQUt5M0IsZ0JBQWdCaEcsV0FDMUJyYSxRQUNBcWEsU0FBVzdoQyxLQUFLNFAsS0FBS0MsU0FBU3RNLEtBQUtzRyxhQUFlLElBQU0yZCxNQUUxRCxPQUFPcFgsS0FBSzAzQixXQUFXakcsU0FBVWlGLFdBR25DcG1DLGlCQUFrQm1oQyxTQUFVaUYsV0FBWSxHQUN0QyxNQUFNcmpDLEtBQU8sQ0FDWG9KLEtBQU1nMUIsU0FDTnYyQixLQUFNLE9BQ043SCxLQUFNLElBS1IsYUFIc0IyTSxLQUFLczJCLHdCQUF3QixPQUFRLENBQUNqakMsTUFBTyxDQUNqRXVqQyxZQUFhRixZQUtqQnBtQyx1QkFBd0JpRSxNQUFRLE1BQzlCLE1BQU1taUMsV0FBWW5pQyxRQUFTQSxNQUFNNGEsU0FDakMsSUFBS25QLEtBQUt5M0IsZ0JBQWdCN25DLEtBQUs0UCxLQUFLQyxTQUFTdE0sS0FBS3dHLGVBQ2hELE9BQU9xRyxLQUFLMjNCLFlBQVkvbkMsS0FBSzRQLEtBQUtDLFNBQVN0TSxLQUFLd0csY0FBZSs4QixXQUVqRSxJQUFJdGYsTUFBUSxFQUNScWEsU0FBVzdoQyxLQUFLNFAsS0FBS0MsU0FBU3RNLEtBQUt3RyxjQUFnQixJQUFNeWQsTUFDN0QsS0FBT3BYLEtBQUt5M0IsZ0JBQWdCaEcsV0FDMUJyYSxRQUNBcWEsU0FBVzdoQyxLQUFLNFAsS0FBS0MsU0FBU3RNLEtBQUt3RyxjQUFnQixJQUFNeWQsTUFFM0QsT0FBT3BYLEtBQUsyM0IsWUFBWWxHLFNBQVVpRixXQUdwQ25uQyxrQkFBbUJraUMsVUFNakIsTUFMYSxDQUNYaDFCLEtBQU1nMUIsU0FDTnYyQixLQUFNLFFBQ043SCxLQUFNLElBS1YvQyxrQkFBbUJtaEMsU0FBVWlGLFdBQVksR0FDdkMsTUFBTXJqQyxLQUFPcWhDLFNBQVNrRCxXQUFXbkcsVUFJakMsYUFIc0J6eEIsS0FBS3MyQix3QkFBd0IsT0FBUSxDQUFDampDLE1BQU8sQ0FDakV1akMsWUFBYUYsWUFLakJwbUMsdUJBQXdCaUUsTUFBUSxNQUM5QixNQUFNbWlDLFdBQVluaUMsUUFBU0EsTUFBTTRhLFNBQ2pDLElBQUtuUCxLQUFLeTNCLGdCQUFnQjduQyxLQUFLNFAsS0FBS0MsU0FBU3RNLEtBQUt1RyxlQUNoRCxPQUFPc0csS0FBSzYzQixZQUNWam9DLEtBQUs0UCxLQUFLQyxTQUFTdE0sS0FBS3VHLGNBQ3hCLEtBQ0FnOUIsV0FHSixJQUFJdGYsTUFBUSxFQUNSb2EsVUFBWTVoQyxLQUFLNFAsS0FBS0MsU0FBU3RNLEtBQUt1RyxjQUFnQixJQUFNMGQsTUFDOUQsS0FBT3BYLEtBQUt5M0IsZ0JBQWdCakcsWUFDMUJwYSxRQUNBb2EsVUFBWTVoQyxLQUFLNFAsS0FBS0MsU0FBU3RNLEtBQUt1RyxjQUFnQixJQUFNMGQsTUFHNUQsT0FBT3BYLEtBQUs2M0IsWUFBWXJHLFVBQVcsS0FBTWtGLFdBRzNDcG1DLHNCQUF1QmlFLE1BQVEsTUFDN0IsTUFBTW1pQyxXQUFZbmlDLFFBQVNBLE1BQU00YSxTQUNqQyxJQUFLblAsS0FBS3kzQixnQkFBZ0I3bkMsS0FBSzRQLEtBQUtDLFNBQVN0TSxLQUFLeUcsY0FDaEQsT0FBT29HLEtBQUs4M0IsV0FBV2xvQyxLQUFLNFAsS0FBS0MsU0FBU3RNLEtBQUt5RyxhQUFjLEVBQUc4OEIsV0FFbEUsSUFBSXRmLE1BQVEsRUFDUnFhLFNBQVc3aEMsS0FBSzRQLEtBQUtDLFNBQVN0TSxLQUFLeUcsYUFBZSxJQUFNd2QsTUFDNUQsS0FBT3BYLEtBQUt5M0IsZ0JBQWdCaEcsV0FDMUJyYSxRQUNBcWEsU0FBVzdoQyxLQUFLNFAsS0FBS0MsU0FBU3RNLEtBQUt5RyxhQUFlLElBQU13ZCxNQUUxRCxPQUFPcFgsS0FBSzgzQixXQUFXckcsU0FBVSxFQUFHaUYsV0FHdENwbUMsd0JBQXlCaUUsTUFBUSxLQUFNNnFCLFdBQWEsSUFDbEQsTUFBTXNYLFdBQVluaUMsUUFBU0EsTUFBTTRhLFNBQ2pDLElBQUl1aUIsV0FBYTloQyxLQUFLNFAsS0FBS0MsU0FBU3RNLEtBQUswRyxlQUN6QyxHQUFJbUcsS0FBS3kzQixnQkFBZ0I3bkMsS0FBSzRQLEtBQUtDLFNBQVN0TSxLQUFLMEcsZ0JBQWlCLENBQ2hFLElBQUl1ZCxNQUFRLEVBRVosSUFEQXNhLFdBQWE5aEMsS0FBSzRQLEtBQUtDLFNBQVN0TSxLQUFLMEcsZUFBaUIsSUFBTXVkLE1BQ3JEcFgsS0FBS3kzQixnQkFBZ0IvRixhQUMxQnRhLFFBQ0FzYSxXQUFhOWhDLEtBQUs0UCxLQUFLQyxTQUFTdE0sS0FBSzBHLGVBQWlCLElBQU11ZCxNQUloRSxNQUFNL2pCLEtBQU8sQ0FDWG9KLEtBQU1pMUIsV0FDTngyQixLQUFNLFNBQ043SCxLQUFNLENBQ0orckIsV0FBWSxLQUloQixJQUFLLE1BQU9wc0IsT0FBUVosT0FBT2dDLFFBQVFqQixLQUFLZ0Qsa0JBQ3RDOUMsS0FBS0EsS0FBSytyQixXQUFXcHNCLEtBQ25CWixPQUFPMmxDLFVBQVVDLGVBQWV6Z0MsS0FBSzZuQixXQUFZcHNCLE9BQVEsUUFHdkRnTixLQUFLczJCLHdCQUF3QixPQUFRLENBQUNqakMsTUFBTyxDQUNqRHVqQyxZQUFhRixZQUlqQnBtQyx1QkFBd0JrRCxNQUFRLE1BQzlCLE1BQU15a0MsSUFBTWo0QixLQUFLM00sS0FBS0EsS0FBSzZrQyxVQUN2Qmo2QixVQUFVK0IsS0FBSzNNLEtBQUtBLEtBQUs2a0MsV0FDekIsR0FDSkQsSUFBSS9tQyxLQUFLLENBQ1BzQyxNQUNBMkosTUFBTyxhQUVINkMsS0FBS2tKLE9BQU8sQ0FBRSxpQkFBa0IrdUIsTUFHeEMzbkMscUJBQXNCOG1CLE1BQU8xYixTQUMzQixNQUFNdThCLElBQU1oNkIsVUFBVStCLEtBQUszTSxLQUFLQSxLQUFLNmtDLFdBQ3JDRCxJQUFJN2dCLE9BQU9qYSxNQUFRekIsY0FDYnNFLEtBQUtrSixPQUFPLENBQUUsaUJBQWtCK3VCLEtBQU8sQ0FBRWhtQixRQUFRLElBR3pEM2hCLHFCQUFzQjhtQixNQUFPNWpCLE9BQzNCLE1BQU15a0MsSUFBTWg2QixVQUFVK0IsS0FBSzNNLEtBQUtBLEtBQUs2a0MsV0FDckNELElBQUk3Z0IsT0FBTzVqQixNQUFRQSxZQUNid00sS0FBS2tKLE9BQU8sQ0FBRSxpQkFBa0IrdUIsTUFHeEMzbkMsdUJBQXdCOG1CLE9BQ3RCLE1BQU02Z0IsSUFBTWg2QixVQUFVK0IsS0FBSzNNLEtBQUtBLEtBQUs2a0MsV0FDckNELElBQUkxTSxPQUFPblUsTUFBTyxTQUNacFgsS0FBS2tKLE9BQU8sQ0FBRSxpQkFBa0IrdUIsTUFHeEMzbkMsdUJBQXdCOG1CLE9BQ3RCLEdBQWMsSUFBVkEsTUFBYSxPQUNqQixNQUFNNmdCLElBQU1oNkIsVUFBVStCLEtBQUszTSxLQUFLQSxLQUFLNmtDLFdBQ3JDLEdBQUk5Z0IsT0FBUzZnQixJQUFJM21DLE9BQVEsT0FDekIsTUFBTTgrQixLQUFPNkgsSUFBSTFNLE9BQU9uVSxNQUFPLEdBQUcsR0FDbEM2Z0IsSUFBSTFNLE9BQU9uVSxNQUFRLEVBQUcsRUFBR2daLFlBQ25CcHdCLEtBQUtrSixPQUFPLENBQUUsaUJBQWtCK3VCLE1BR3hDM25DLHlCQUEwQjhtQixPQUN4QixNQUFNNmdCLElBQU1oNkIsVUFBVStCLEtBQUszTSxLQUFLQSxLQUFLNmtDLFdBQ3JDLEdBQUk5Z0IsT0FBUzZnQixJQUFJM21DLE9BQVMsRUFBRyxPQUM3QixNQUFNOCtCLEtBQU82SCxJQUFJMU0sT0FBT25VLE1BQU8sR0FBRyxHQUNsQzZnQixJQUFJMU0sT0FBT25VLE1BQVEsRUFBRyxFQUFHZ1osWUFDbkJwd0IsS0FBS2tKLE9BQU8sQ0FBRSxpQkFBa0IrdUIsTUFHeEMzbkMscUJBQXNCa2tCLFVBQ3BCLE1BQU0vWCxLQUFPLFFBQVUrWCxTQUFTamhCLFFBQVE0a0MsZUFDbENuNEIsS0FBS2tKLE9BQU8sQ0FBRSxDQUFDek0sTUFBTytYLFNBQVNyWCxRQVd2QzdNLDhCQUErQjhuQyxhQUFjQyxVQUFXcG1DLFNBQ3RELE1BQU1xbUMsbUJBQXFCLEdBQzNCLElBQUl2ZSxVQUFZLEVBQ1p3ZSxlQUFpQixFQUNqQnRCLFdBQVksRUFDWkQsWUFBYSxFQUNqQixJQUFLLE1BQU0zakMsUUFBUWdsQyxVQUNqQixPQUFRaGxDLEtBQUs2SCxNQUNYLElBQUssUUFHSCxHQUZBNmUsVUFBWTFtQixLQUFLQSxLQUFLNG1CLEtBQ3RCc2UscUJBQXVCbm9CLFNBQVNvb0IsY0FBY3g0QixLQUFNM00sTUFDN0IsY0FBbkIyTSxLQUFLM00sS0FBSzZILEtBQXNCLENBRWxDLEdBQUk4RSxLQUFLeTNCLGdCQUFnQnBrQyxLQUFLb0osTUFBTyxPQVFyQyxHQU5Jc2QsV0FDRWhMLE9BQU9nTCxhQUFlaEwsT0FBTzFiLEtBQUtBLEtBQUs4SixTQUN6QzlKLEtBQUtBLEtBQUs4SixNQUFRbzdCLGdCQUlsQnR5QixNQUFNdkksT0FBT3JLLEtBQUtBLEtBQUs4SixRQUFTLENBQ2xDLElBQUlBLE1BQ0osSUFDRUEsYUFDUSxJQUFJak4sS0FDUm1ELEtBQUtBLEtBQUs4SixNQUNWNkMsS0FBS3k0Qix3QkFDTHJ4QixTQUFTLENBQUU5VyxPQUFPLEtBQ3BCRyxNQUNGLE1BQU9vRCxLQUNQc0osTUFBUSxLQUVOQSxRQUFPOUosS0FBS0EsS0FBSzhKLE1BQVEvTSxLQUFLdWlCLE1BQU14VixjQUVyQzlKLEtBQUtBLEtBQUs4SixNQUFRLEtBRXpCLEdBQUlpVCxTQUFTQyxVQUFVaGQsTUFBTyxDQUM1QixJQUFJcWxDLFVBQVksSUFDWnJsQyxLQUFLQSxNQUFNMjNCLE9BQU9nTSxZQUFjM2pDLEtBQUtBLE1BQU0yM0IsT0FBT2lNLGFBQ3BEeUIsVUFBWTE0QixLQUFLa0YsT0FBTzdULFFBQU9zb0IsTUFDeEJBLEdBQUd0bUIsS0FBS0EsS0FBSyttQixtQkFFaEIvbUIsS0FBS0EsTUFBTTIzQixPQUFPZ00sYUFDbEJyZCxHQUFHdG1CLEtBQUtBLEtBQUsyM0IsT0FBT2dNLGdCQUtwQjNqQyxLQUFLQSxNQUFNMjNCLE9BQU9pTSxZQUNsQnRkLEdBQUd0bUIsS0FBS0EsS0FBSzIzQixPQUFPaU0sWUFLcEI1akMsS0FBS0EsS0FBSyttQixlQUFldWUsc0JBQ3pCaGYsR0FBR3RtQixLQUFLQSxLQUFLK21CLGVBQWV1ZSx5QkFJbEMsTUFBTTdCLGdCQUFrQmpkLHNCQUFzQmxlLE9BQzVDKzhCLFVBQ0FybEMsS0FBS0EsS0FBSyttQixlQUNWbWUsZ0JBRUYsR0FBSXpCLFVBQVcsQ0FHYixHQUZBeUIsZUFBaUJ6QixVQUFVaG5DLElBQUksY0FDL0J1RCxLQUFLQSxLQUFLOEosTUFBUW83QixlQUNkekIsVUFBVWhuQyxJQUFJLGtCQUFtQixDQUNuQyxNQUFNOG9DLGFBQWU1NEIsS0FBS1ksTUFBTTlRLElBQzlCZ25DLFVBQVVobkMsSUFBSSxtQkFFaEIsSUFBSyxNQUFPa0QsSUFBS21LLFNBQVUvSyxPQUFPZ0MsUUFBUWYsS0FBS0EsS0FBSzIzQixPQUM5Qzd0QixhQUFheTdCLGFBQWFDLFlBQVk3bEMsS0FHNUMsWUFEQUssS0FBS29KLEtBQU8yVCxTQUFTMG9CLG1CQUFtQkYsZUFFbkMsQ0FDTCxNQUFNcEMsTUFBUXBtQixTQUFTcW1CLGlCQUNyQkssVUFBVWhuQyxJQUFJLGtCQUNkdUQsS0FBS0EsS0FBSyttQixnQkFFWi9tQixLQUFLQSxLQUFLbStCLFVBQVlnRixNQUFNaEYsVUFDNUJuK0IsS0FBS29KLEtBQU8rNUIsTUFBTS81QixPQUtwQnNTLE9BQU9nTCxhQUFlaEwsT0FBT3dwQixrQkFDL0JsbEMsS0FBS0EsS0FBSzRtQixLQUFPc2UsZ0JBR25CRCxtQkFBbUJwbkMsS0FBSytNLFVBQVU1SyxPQUNsQyxNQUVGLElBQUssU0FDSCxHQUF1QixjQUFuQjJNLEtBQUszTSxLQUFLNkgsS0FBc0IsQ0FDbEMsTUFBTTY5QixVQUFZMWxDLEtBQUtBLE1BQU13TixPQUFPb2YsTUFBTXhqQixLQUMxQyxHQUFJczhCLFVBQVcsQ0FDYixJQUFJbDRCLE1BQVFiLEtBQUtrM0IsZ0JBQWdCNkIsV0FBVyxHQUM1QyxJQUFLbDRCLE1BQU8sQ0FDVixNQUFNcEUsS0FBT3M4QixVQUFVM3JCLE1BQU0sZUFDekIyckIsVUFBVTNyQixNQUFNLGVBQWUsR0FDL0IyckIsVUFDSmw0QixZQUFjYixLQUFLZzVCLGtCQUNqQnY4QixPQUNFcEosS0FBS0EsS0FBSytyQixZQUFZL29CLE1BR3hCd0ssUUFBT3hOLEtBQUtBLEtBQUt3TixNQUFNb2YsS0FBS3hrQixHQUFLb0YsTUFBTXBGLElBRzdDLE1BQU13OUIsWUFBYzVsQyxLQUFLQSxNQUFNd04sT0FBT3NmLFlBQVkxakIsS0FDbEQsR0FBSXc4QixZQUFhLENBQ2YsSUFBSXA0QixNQUFRYixLQUFLazNCLGdCQUFnQitCLGFBQWEsR0FDOUMsSUFBS3A0QixNQUFPLENBQ1YsTUFBTXBFLEtBQU9zOEIsVUFBVTNyQixNQUFNLGVBQ3pCMnJCLFVBQVUzckIsTUFBTSxlQUFlLEdBQy9CMnJCLFVBQ0psNEIsWUFBY2IsS0FBS2c1QixrQkFDakJ2OEIsT0FDRXBKLEtBQUtBLEtBQUsrckIsWUFBWS9vQixNQUd4QndLLFFBQU94TixLQUFLQSxLQUFLd04sTUFBTXNmLFdBQVcxa0IsR0FBS29GLE1BQU1wRixLQUlyRDY4QixtQkFBbUJwbkMsS0FBSytNLFVBQVU1SyxPQUNsQyxNQUdGLElBQUssUUFBUyxDQUNaLEdBQUlBLEtBQUtBLEtBQUs2bEMsdUJBQXdCLENBQ3BDN2xDLEtBQUtBLEtBQUs2QixnQkFBZ0Jxa0IsS0FBTyxHQUNqQ2xtQixLQUFLQSxLQUFLNkIsZ0JBQWdCcWtCLEtBQUtwa0IsSUFBTTZLLEtBQUttNUIsa0JBQWtCLE9BQzVEOWxDLEtBQUtBLEtBQUs2QixnQkFBZ0Jxa0IsS0FBS25rQixJQUFNNEssS0FBS201QixrQkFBa0IsT0FDNUQ5bEMsS0FBS0EsS0FBSzZCLGdCQUFnQnFrQixLQUFLbGtCLElBQU0ySyxLQUFLbTVCLGtCQUFrQixPQUM1RDlsQyxLQUFLQSxLQUFLNkIsZ0JBQWdCcWtCLEtBQUtqa0IsSUFBTTBLLEtBQUttNUIsa0JBQWtCLE9BQzVEOWxDLEtBQUtBLEtBQUs2QixnQkFBZ0Jxa0IsS0FBS2hrQixJQUFNeUssS0FBS201QixrQkFBa0IsT0FDNUQ5bEMsS0FBS0EsS0FBSzZCLGdCQUFnQnFrQixLQUFLL2pCLElBQU13SyxLQUFLbTVCLGtCQUFrQixPQUM1RDlsQyxLQUFLQSxLQUFLNkIsZ0JBQWdCcWtCLEtBQUs5akIsSUFBTXVLLEtBQUttNUIsa0JBQWtCLE9BQzVEOWxDLEtBQUtBLEtBQUs2QixnQkFBZ0Jxa0IsS0FBSzdqQixJQUFNc0ssS0FBS201QixrQkFBa0IsT0FFNUQ5bEMsS0FBS0EsS0FBSzZCLGdCQUFnQnFrQixLQUFLNmYsS0FBTyxHQUN0Qy9sQyxLQUFLQSxLQUFLNkIsZ0JBQWdCcWtCLEtBQUs2ZixLQUFLajhCLE1BQVE4SSxNQUFNakcsS0FBS281QixNQUNuRCxLQUNBcDVCLEtBQUtvNUIsS0FDVC9sQyxLQUFLQSxLQUFLNkIsZ0JBQWdCcWtCLEtBQUs2ZixLQUFLenFCLE1BQ2xDL2UsS0FBSzRQLEtBQUtDLFNBQVMsYUFDckJwTSxLQUFLQSxLQUFLNkIsZ0JBQWdCcWtCLEtBQUs2ZixLQUFLL0QsVUFDbEN6bEMsS0FBSzRQLEtBQUtDLFNBQVMsYUFFaEJwTSxLQUFLQSxLQUFLNkIsZ0JBQWdCb1osU0FDN0JqYixLQUFLQSxLQUFLNkIsZ0JBQWdCb1osT0FBUyxJQUVyQ2piLEtBQUtBLEtBQUs2QixnQkFBZ0JvWixPQUFPblosSUFDL0I5QixLQUFLQSxLQUFLNkIsZ0JBQWdCcWtCLEtBQUtwa0IsSUFBSWdJLE1BQ3JDOUosS0FBS0EsS0FBSzZCLGdCQUFnQm9aLE9BQU9sWixJQUMvQi9CLEtBQUtBLEtBQUs2QixnQkFBZ0Jxa0IsS0FBS25rQixJQUFJK0gsTUFDckM5SixLQUFLQSxLQUFLNkIsZ0JBQWdCb1osT0FBT2paLElBQy9CaEMsS0FBS0EsS0FBSzZCLGdCQUFnQnFrQixLQUFLbGtCLElBQUk4SCxNQUNyQzlKLEtBQUtBLEtBQUs2QixnQkFBZ0JvWixPQUFPaFosSUFDL0JqQyxLQUFLQSxLQUFLNkIsZ0JBQWdCcWtCLEtBQUtqa0IsSUFBSTZILE1BQ3JDOUosS0FBS0EsS0FBSzZCLGdCQUFnQm9aLE9BQU8vWSxJQUMvQmxDLEtBQUtBLEtBQUs2QixnQkFBZ0Jxa0IsS0FBS2hrQixJQUFJNEgsTUFDckM5SixLQUFLQSxLQUFLNkIsZ0JBQWdCb1osT0FBTzlZLElBQy9CbkMsS0FBS0EsS0FBSzZCLGdCQUFnQnFrQixLQUFLL2pCLElBQUkySCxNQUNyQzlKLEtBQUtBLEtBQUs2QixnQkFBZ0JvWixPQUFPN1ksSUFDL0JwQyxLQUFLQSxLQUFLNkIsZ0JBQWdCcWtCLEtBQUs5akIsSUFBSTBILE1BQ3JDOUosS0FBS0EsS0FBSzZCLGdCQUFnQm9aLE9BQU81WSxJQUMvQnJDLEtBQUtBLEtBQUs2QixnQkFBZ0Jxa0IsS0FBSzdqQixJQUFJeUgsTUFDckM5SixLQUFLQSxLQUFLNkIsZ0JBQWdCb1osT0FBTzhxQixLQUMvQi9sQyxLQUFLQSxLQUFLNkIsZ0JBQWdCcWtCLEtBQUs2ZixLQUFLajhCLE1BQ2xDOUosS0FBS0EsS0FBSzZCLGdCQUFnQnNrQixPQUFPRSxRQUNuQ3JtQixLQUFLQSxLQUFLRyxNQUFRNUQsS0FBSzRQLEtBQUtDLFNBQVMsb0JBRXJDcE0sS0FBS0EsS0FBS0csTUFBUTVELEtBQUs0UCxLQUFLQyxTQUFTLG1CQUV2Q3BNLEtBQUtBLEtBQUt1bUIsZ0JBQ2lDLE9BQXpDdm1CLEtBQUtBLEtBQUs2QixnQkFBZ0JvWixPQUFPblosS0FDUSxPQUF6QzlCLEtBQUtBLEtBQUs2QixnQkFBZ0JvWixPQUFPbFosS0FDUSxPQUF6Qy9CLEtBQUtBLEtBQUs2QixnQkFBZ0JvWixPQUFPalosS0FDUSxPQUF6Q2hDLEtBQUtBLEtBQUs2QixnQkFBZ0JvWixPQUFPaFosS0FDUSxPQUF6Q2pDLEtBQUtBLEtBQUs2QixnQkFBZ0JvWixPQUFPL1ksS0FDUSxPQUF6Q2xDLEtBQUtBLEtBQUs2QixnQkFBZ0JvWixPQUFPOVksS0FDUSxPQUF6Q25DLEtBQUtBLEtBQUs2QixnQkFBZ0JvWixPQUFPN1ksS0FDUSxPQUF6Q3BDLEtBQUtBLEtBQUs2QixnQkFBZ0JvWixPQUFPNVksS0FHbkMsVUFEcUIyaUIsaUJBQWlCMWMsT0FBT3RJLEtBQUtBLE1BdUMzQyxPQXRDSyxDQUNWLE1BQU1nbUMsV0FBYSxHQUNuQixJQUFLLE1BQU1ybUMsTUFBTyxDQUNoQixNQUNBLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsTUFDQSxNQUNBLE9BRUlLLEtBQUtBLEtBQUs2QixnQkFBZ0JvWixPQUFPdGIsT0FDbkNxbUMsV0FBVyx3QkFBd0JybUMsYUFDakNLLEtBQUtBLEtBQUs2QixnQkFBZ0JvWixPQUFPdGIsS0FDbkNxbUMsV0FBVyx3QkFBd0JybUMsZUFDakNLLEtBQUtBLEtBQUs2QixnQkFBZ0J5TyxNQUFNM1EsTUFHbENLLEtBQUtBLEtBQUs2QixnQkFBZ0JvWixPQUFPOHFCLE9BQ25DQyxXQUFXLDBCQUNUaG1DLEtBQUtBLEtBQUs2QixnQkFBZ0JvWixPQUFPOHFCLE1BRWpDL2xDLEtBQUtBLEtBQUs2QixnQkFBZ0JvWixPQUFPN1ksTUFDbkM0akMsV0FBVywwQkFDVGhtQyxLQUFLQSxLQUFLNkIsZ0JBQWdCb1osT0FBTzdZLElBQ25DNGpDLFdBQVcsbUNBQ1QsTUFBUWpwQyxLQUFLdWlCLE1BQU10ZixLQUFLQSxLQUFLNkIsZ0JBQWdCb1osT0FBTzdZLElBQU0sR0FDNUQ0akMsV0FBVyxvQ0FDVEEsV0FBVyx5QkFDWEEsV0FBVyx1QkFDVGpwQyxLQUFLdWlCLE1BQU10ZixLQUFLQSxLQUFLNkIsZ0JBQWdCb1osT0FBTzdZLElBQU0sVUFFbER1SyxLQUFLa0osT0FBT213QixrQkFDWnI1QixLQUFLa0osT0FBTyxDQUNoQix3QkFBeUJsSixLQUFLMFMsTUFDOUIsc0JBQXVCMVMsS0FBSzBTLFNBSWxDLE1BQU14TixPQUFTN1IsS0FBS0EsS0FBS3VOLE1BQU12UCxRQUFPaW9DLElBQWtCLFVBQVpBLEdBQUdwK0IsT0FDekNxK0IsWUFBY2xtQyxLQUFLQSxLQUFLdU4sTUFBTXZQLFFBQU9pb0MsSUFBa0IsVUFBWkEsR0FBR3ArQixPQUdwRCxTQUZNOEUsS0FBS3c1QixlQUFldDBCLGNBQ3BCbEYsS0FBS3k1QixTQUFTRixhQUNoQjNwQyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsMkJBQ3RCa1EsS0FBS2tKLE9BQU8sQ0FBRSxpQkFBa0I3VixLQUFLQSxLQUFLcW1DLGlCQUVoRCxJQUFLLE1BQU1DLGVBQWV0bUMsS0FBS0EsS0FBS3VtQyxhQUUvQjU1QixLQUFLM00sS0FBS0EsS0FBSzZrQyxXQUFXM3BCLE1BQ3pCb0wsSUFBTWdnQixjQUFnQmhnQixHQUFHbm1CLFNBRTNCbW1DLG1CQUVNMzVCLEtBQUs2NUIsaUJBQWlCRixhQUlsQ3pvQixNQUFNM1osS0FBSyxxQkFDWCxNQUVGLElBQUssWUFDSCxHQUF1QixjQUFuQnlJLEtBQUszTSxLQUFLNkgsS0FBc0IsQ0FFbEMsR0FBSThFLEtBQUtpM0IsVUFBVyxDQUNsQixJQUFJNkMsZ0JBQWlCLEVBV3JCLFNBVk1sb0IsT0FBT21vQixRQUFRLENBQ25Cdm1DLE1BQU81RCxLQUFLNFAsS0FBS0MsU0FBUyx1QkFDMUIvRCxRQUFTLE1BQU05TCxLQUFLNFAsS0FBS1ksT0FBTywwQkFBMkIsQ0FDekQzRCxLQUFNdUQsS0FBS3ZELGFBRWJ1OUIsSUFBSyxLQUNIRixnQkFBaUIsR0FFbkJHLFlBQVksS0FFVkgsZUFDQyxhQURxQjk1QixLQUFLODVCLGlCQUlqQyxNQUFNSSxXQUFhLEdBQ25CLElBQUssTUFBTUMsU0FBUy9uQyxPQUFPZ0MsUUFBUWYsS0FBS0EsS0FBSyttQyxxQkFBc0IsQ0FDakUsTUFBT3BuQyxJQUFLbUssT0FBU2c5QixNQUVyQixHQURBOW1DLEtBQUtBLEtBQUsrbUMsb0JBQW9CcG5DLE1BQU8sRUFDakNtSyxNQUFPLENBQ1QsTUFBTXFSLEtBQU94TyxLQUFLbTVCLGtCQUFrQm5tQyxLQUNwQ3diLEtBQUt4YixJQUFNQSxJQUNYa25DLFdBQVdocEMsS0FBS3NkLE9BSXBCLElBQUk2ckIsT0FFSixHQUFJSCxXQUFXNW9DLE9BQVMsRUFBRyxDQUN6QixNQUFNZ3BDLGVBQWlCLEdBQ3ZCQSxlQUFlcGxDLGdCQUFrQmdsQyxXQUNqQ0ksZUFBZTltQyxNQUFRNUQsS0FBSzRQLEtBQUtDLFNBQVMseUJBQzFDNDZCLGFBQWVqaUIsbUJBQW1CemMsT0FBTzIrQixxQkFDVixJQUF0QkosV0FBVzVvQyxTQUNwQitvQyxPQUFTSCxXQUFXLEdBQUdsbkMsS0FHekIsSUFBS3FuQyxPQUFRLE9BRWIsR0FEQWhuQyxLQUFLQSxLQUFLK21DLG9CQUFvQkMsU0FBVSxFQUNwQ2huQyxLQUFLQSxLQUFLa25DLDJCQUEyQjdnQixRQUFTLENBQ2hELElBQUl2YyxNQUFRTyxPQUFPckssS0FBS0EsS0FBS2tuQywyQkFBMkJwOUIsT0FDeEQsR0FBSThJLE1BQU05SSxPQUFRLENBQ2hCLE1BQU1xUixLQUFPeE8sS0FBS201QixrQkFBa0JrQixRQUM5QnBxQyxLQUFPLElBQUlDLEtBQ2ZtRCxLQUFLQSxLQUFLa25DLDJCQUEyQnA5QixhQUVqQ2xOLEtBQUtBLEtBQUssQ0FBRUssT0FBTyxJQUN6QkwsS0FBS2tlLFVBQVUsQ0FDYnBULE9BQVEsMkJBQTJCeVQsS0FBS0csVUFBVXRiLEtBQUtBLEtBQUtrbkMsMkJBQTJCcDlCLFVBRXpGQSxNQUFRcVIsS0FBS3JSLE1BQVFsTixLQUFLUSxNQUFRUixLQUFLUSxNQUFRK2QsS0FBS3JSLFlBRWhENkMsS0FBS2tKLE9BQU8sQ0FDaEIsQ0FBQyx3QkFBd0JteEIsZ0JBQWlCbDlCLGNBS3hDNkMsS0FBS3c1QixlQUFlbm1DLEtBQUtBLEtBQUs2UixPQUFRLGFBRTVDb3pCLG1CQUFtQnBuQyxLQUFLK00sVUFBVTVLLE9BQ2xDNGpDLFdBQVksRUFHZCxNQUNGLElBQUssYUFDSCxHQUF1QixjQUFuQmozQixLQUFLM00sS0FBSzZILEtBQXNCLENBRWxDLEdBQUk4RSxLQUFLZzNCLFdBQVksQ0FDbkIsSUFBSXdELGlCQUFrQixFQVd0QixTQVZNNW9CLE9BQU9tb0IsUUFBUSxDQUNuQnZtQyxNQUFPNUQsS0FBSzRQLEtBQUtDLFNBQVMsd0JBQzFCL0QsUUFBUyxNQUFNOUwsS0FBSzRQLEtBQUtZLE9BQU8sMkJBQTRCLENBQzFEM0QsS0FBTXVELEtBQUt2RCxhQUVidTlCLElBQUssS0FDSFEsaUJBQWtCLEdBRXBCUCxZQUFZLEtBRVZPLGdCQUNDLGFBRHNCeDZCLEtBQUt3NkIsa0JBS2xDLE1BQU1DLGlCQUFtQixHQUN6QkEsaUJBQWlCdmxDLGdCQUFrQjdCLEtBQUtBLEtBQUtxbkMsc0JBQzdDLElBQUlqcUMsTUFBUSxFQUNSa3FDLGNBQWUsRUFDbkIsSUFBSyxNQUFNUixTQUFTL25DLE9BQU9nQyxRQUN6QmYsS0FBS0EsS0FBS3FuQyx1QkFDVCxDQUNELE1BQU8xbkMsSUFBS21LLE9BQVNnOUIsTUFDZjNyQixLQUFPeE8sS0FBS201QixrQkFBa0JubUMsS0FDcEN5bkMsaUJBQWlCdmxDLGdCQUFnQmxDLEtBQUt5SixLQUFPK1IsS0FBS0csTUFDbEQ4ckIsaUJBQWlCdmxDLGdCQUFnQmxDLEtBQUttSyxNQUFRcVIsS0FBS3JSLE1BQy9DQSxNQUFNeUUsV0FDUjY0QixpQkFBaUJ2bEMsZ0JBQWdCbEMsS0FBS3ZDLE1BQ3BDK2QsS0FBS3JSLE1BQ0xPLE9BQU8rOEIsaUJBQWlCdmxDLGdCQUFnQmxDLEtBQUtpbEIsWUFDMUM5YSxNQUFNNGEsU0FHVDRpQixjQUFlLEVBRmZscUMsT0FBU2dxQyxpQkFBaUJ2bEMsZ0JBQWdCbEMsS0FBS3ZDLE9BT3JELEdBREFncUMsaUJBQWlCaHFDLE1BQVFBLE1BQ3JCa3FDLGFBQWMsQ0FHaEIsVUFEcUJoakIsa0JBQWtCaGMsT0FBTzgrQixrQkFDakMsT0FJZixJQUFLLElBQUlyakIsTUFBUSxFQUFHQSxNQUFRL2pCLEtBQUtBLEtBQUtULE9BQU90QixPQUFROGxCLFFBQVMsQ0FDNUQsTUFBTXdqQixXQUFhLENBQ25CQSxPQUFvQixHQUNwQkEsS0FBa0IsY0FDbEJBLFdBQVd4M0IsUUFBVXBELEtBQUt2RSxHQUMxQm0vQixXQUFXcGpCLGFBQWU5WixPQUFPckssS0FBS0EsS0FBS1QsT0FBT3drQixPQUFPbmxCLFNBQ3pEMm9DLFdBQVdwbkMsTUFBUTVELEtBQUs0UCxLQUFLQyxTQUFTLDZCQUd0QyxJQUFLLE1BQU10QyxTQUFTOUosS0FBS0EsS0FBS1QsT0FBT3drQixPQUFPbFMsT0FDMUMsR0FBSWtMLFNBQVNDLFVBQVVsVCxPQUFReTlCLFdBQVcxMUIsT0FBT2hVLEtBQUtpTSxXQUVqRCxDQUNILE1BQU0wRCxNQUFRYixLQUFLWSxNQUFNMk4sTUFBSzdOLE1BQ3JCQSxLQUFLakUsT0FBU1UsTUFBTVYsTUFBc0IsVUFBZGlFLEtBQUt4RixPQUUxQyxJQUFLMkYsUUFBVUEsTUFBTXhOLEtBQUtBLEtBQUsyM0IsT0FBT2dNLFdBQVksQ0FFbkIzakMsS0FBS0EsS0FBSzZSLE9BQU9xSixNQUFLN04sTUFDMUNBLEtBQUtqRSxPQUFTVSxNQUFNVixRQUVGbStCLFdBQVcxMUIsT0FBT2hVLEtBQUtpTSxRQU14RCxHQUFpQyxJQUE3Qnk5QixXQUFXMTFCLE9BQU81VCxPQUNwQixHQUFJc3BDLFdBQVcxMUIsT0FBTzVULFFBQVVzcEMsV0FBV3BqQixhQUFjLENBRXZEblksR0FBR0MsY0FBY3dSLEtBQ2ZsaEIsS0FBSzRQLEtBQUtZLE9BQU8sZ0NBQWlDLENBQ2hEeTZCLFdBQVlELFdBQVcxMUIsT0FBTzVULE9BQzlCa21CLGFBQWNvakIsV0FBV3BqQixnQkFJN0IsTUFBTXNqQixPQUFTMXFCLFNBQVMycUIsb0JBQ3RCMW5DLEtBQUtBLEtBQUs2UixPQUNWMDFCLFdBQVcxMUIsUUFFYjdSLEtBQUtBLEtBQUs2UixPQUFTNDFCLFdBQ2QsQ0FFTCxNQUFNbDVCLGVBQWlCa1Ysa0JBQWtCbmIsT0FBT2kvQixZQUNoRCxJQUFLaDVCLFNBQVUsT0FDZixNQUFNazVCLE9BQVMxcUIsU0FBUzJxQixvQkFDdEIxbkMsS0FBS0EsS0FBSzZSLE9BQ1Z0RCxVQUVGdk8sS0FBS0EsS0FBSzZSLE9BQVM0MUIsWUFHckJ6N0IsR0FBR0MsY0FBY3dSLEtBQ2ZsaEIsS0FBSzRQLEtBQUtDLFNBQVMsc0NBTXpCLEdBQUkvQixPQUFPckssS0FBS0EsS0FBSzBqQyxVQUFXLENBQzlCLE1BQU02RCxXQUFhLENBQ25CQSxPQUFvQixHQUNwQkEsS0FBa0IsY0FDbEJBLFdBQVd4M0IsUUFBVXBELEtBQUt2RSxHQUMxQm0vQixXQUFXcGpCLGFBQWU5WixPQUFPckssS0FBS0EsS0FBSzBqQyxVQUMzQzZELFdBQVdwbkMsTUFBUTVELEtBQUs0UCxLQUFLWSxPQUFPLDRCQUE2QixDQUMvRDRTLE9BQVF0VixPQUFPckssS0FBS0EsS0FBSzBqQyxZQUkzQixJQUFLLE1BQU0zNUIsS0FBSzRDLEtBQUtrRixPQUVuQixJQUNHOUgsRUFBRS9KLEtBQUtBLEtBQUsyM0IsTUFBTWdNLGFBQ2xCNTVCLEVBQUUvSixLQUFLQSxLQUFLK3JCLFdBQVd4cEIsZ0JBQ3ZCd0gsRUFBRS9KLEtBQUtBLEtBQUsrckIsV0FBV3ZwQixTQUN4QixDQUU2QnhDLEtBQUtBLEtBQUs2UixPQUFPcUosTUFBSzdOLE1BQzFDQSxLQUFLakUsT0FBU1csRUFBRVgsUUFFRW0rQixXQUFXMTFCLE9BQU9oVSxLQUFLa00sRUFBRS9KLE1BS3hELEdBQWlDLElBQTdCdW5DLFdBQVcxMUIsT0FBTzVULE9BQ3BCLEdBQUlzcEMsV0FBVzExQixPQUFPNVQsUUFBVXNwQyxXQUFXcGpCLGFBQWMsQ0FFdkRuWSxHQUFHQyxjQUFjd1IsS0FDZmxoQixLQUFLNFAsS0FBS1ksT0FBTyxnQ0FBaUMsQ0FDaER5NkIsV0FBWUQsV0FBVzExQixPQUFPNVQsT0FDOUJrbUIsYUFBY29qQixXQUFXcGpCLGdCQUk3QixNQUFNc2pCLE9BQVMxcUIsU0FBUzJxQixvQkFDdEIxbkMsS0FBS0EsS0FBSzZSLE9BQ1YwMUIsV0FBVzExQixRQUViN1IsS0FBS0EsS0FBSzZSLE9BQVM0MUIsV0FDZCxDQUVMLE1BQU1sNUIsZUFBaUJrVixrQkFBa0JuYixPQUFPaS9CLFlBQ2hELElBQUtoNUIsU0FBVSxPQUNmLE1BQU1rNUIsT0FBUzFxQixTQUFTMnFCLG9CQUN0QjFuQyxLQUFLQSxLQUFLNlIsT0FDVnRELFVBRUZ2TyxLQUFLQSxLQUFLNlIsT0FBUzQxQixZQUdyQno3QixHQUFHQyxjQUFjd1IsS0FDZmxoQixLQUFLNFAsS0FBS0MsU0FBUyw0Q0FNbkJPLEtBQUt3NUIsZUFBZW5tQyxLQUFLQSxLQUFLNlIsT0FBUSxvQkFFdENsRixLQUFLZzdCLG1CQUFtQm5DLFlBQVkscUJBRXBDNzRCLEtBQUtnN0IsbUJBQW1COXhCLE9BQU8sQ0FDbkMsOEJBQStCeEwsT0FBT3JLLEtBQUtBLEtBQUs0bkMsYUFBYTFwQyxRQUcvRCttQyxtQkFBbUJwbkMsS0FBSytNLFVBQVU1SyxPQUNsQzJqQyxZQUFhLEVBRWYsTUFFRixRQUNFc0IsbUJBQW1CcG5DLEtBQUsrTSxVQUFVNUssT0FHeEMsR0FBa0MsSUFBOUJpbEMsbUJBQW1CaG5DLE9BQ3JCLE1BQU8sR0FFVCxNQUFNOHNCLGdCQUFrQnRZLE1BQU13d0Isd0JBQzVCOEIsYUFDQUUsbUJBQ0FybUMsU0FtQkYsT0FoQklnbEMsa0JBRUlqM0IsS0FBS2tKLE9BQU8sQ0FDaEIsNkJBQThCbEosS0FBS2s3QixrQkFFckNocUIsTUFBTTNaLEtBQUssMEJBRVR5L0IsbUJBRUloM0IsS0FBS2tKLE9BQU8sQ0FDaEIsOEJBQStCbEosS0FBS203QixpQkFDcEMsNEJBQTZCbjdCLEtBQUtvN0IsaUJBRXBDbHFCLE1BQU0zWixLQUFLLDJCQUdONm1CLFVBWVRxWixnQkFBaUJoRyxVQUNmLElBQUloMkIsR0FBSyxLQUNULE1BQU1nQixLQUFPZzFCLFNBQVNya0IsTUFBTSxlQUN4QnFrQixTQUFTcmtCLE1BQU0sZUFBZSxHQUM5QnFrQixTQUNKLElBQUssTUFBTXQwQixTQUFTNkMsS0FBS1ksTUFFckJ3UCxTQUFTMG9CLG1CQUFtQjM3QixPQUFPckIsZ0JBQWtCVyxLQUFLWCxnQkFFMURMLEdBQUswQixNQUFNMUIsSUFJZixPQUFPQSxHQUdUNC9CLGVBQWdCNUosVUFDZCxNQUFNM1osU0FBVyxHQUNqQixJQUFLLE1BQU0zYSxTQUFTNkMsS0FBS1ksTUFDbkJ6RCxNQUFNVixPQUFTZzFCLFVBQVUzWixTQUFTNW1CLEtBQUtpTSxPQUc3QyxPQUFPMmEsU0FPVG9mLGdCQUFpQjFGLFdBRWYsTUFBTWtILFVBQVksR0FDWmo4QixLQUFPKzBCLFVBQVVwa0IsTUFBTSxlQUN6Qm9rQixVQUFVcGtCLE1BQU0sZUFBZSxHQUMvQm9rQixVQUVKLElBQUssTUFBTXIwQixTQUFTNkMsS0FBS1ksTUFFckJ3UCxTQUFTMG9CLG1CQUFtQjM3QixPQUFPckIsZ0JBQ2pDVyxLQUFLWCxlQUNRLFVBQWZxQixNQUFNakMsTUFFTnc5QixVQUFVeG5DLEtBQUtpTSxPQUduQixPQUFPdTdCLFVBR1Q0QyxhQUFjN25DLFNBQ1osSUFBSThuQyxjQUFnQjluQyxRQUNwQixJQUFLLE1BQU9ULElBQUttSyxTQUFVL0ssT0FBT2dDLFFBQVFqQixLQUFLTSxRQUFRc0YsT0FDckR3aUMsY0FBZ0JBLGNBQWM1Z0MsUUFBUTNILElBQUttSyxPQUU3QyxPQUFPbytCLGNBR1Q5Qyx1QkFDRSxNQUFNK0MsT0FBUyxHQUNmLElBQUssTUFBT3hvQyxJQUFLbUssU0FBVS9LLE9BQU9nQyxRQUFRakIsS0FBS00sUUFBUXNGLE9BQ2pEL0YsSUFBSStKLFdBQVcsTUFBUUksTUFBTUosV0FBVyxXQUMxQ3krQixPQUFPeG9DLElBQUl5SyxVQUFVLElBQU1nK0IsWUFBWXo3QixLQUFNN0MsTUFBTU0sVUFBVSxLQUdqRSxPQUFPKzlCLE9BR1Rqc0MscUNBQ0UsTUFBTTJGLGdCQUFrQixHQUN4QixJQUFLLE1BQU9sQyxJQUFLbUssU0FBVS9LLE9BQU9nQyxRQUNoQ3hFLEtBQUtnZixPQUFPL0MsU0FBU2dELE1BQU1DLFVBQVU1WixnQkFBZ0JBLGlCQUVyREEsZ0JBQWdCaEUsS0FBSyxDQUNuQjhCLElBQ0FxaUMsVUFBV3psQyxLQUFLNFAsS0FBS0MsU0FBU3RDLE1BQU11UixPQUNwQ0MsTUFBTy9lLEtBQUs0UCxLQUFLQyxTQUFTdEMsTUFBTXdSLFNBR3BDLE9BQU96WixnQkFHVGlrQyxrQkFBbUJ1QyxVQUNqQixHQUFJMTdCLEtBQUszTSxLQUFLQSxLQUFLNkIsZ0JBQ2pCLElBQUssTUFBT2xDLElBQUttSyxTQUFVL0ssT0FBT2dDLFFBQ2hDNEwsS0FBSzNNLEtBQUtBLEtBQUs2QixpQkFFZixHQUNFdEYsS0FBSzRQLEtBQUtDLFNBQVN0QyxNQUFNdVIsT0FBTzVTLGdCQUM5QjQvQixTQUFTNS9CLGVBQ1hsTSxLQUFLNFAsS0FBS0MsU0FBU3RDLE1BQU13UixPQUFPN1MsZ0JBQzlCNC9CLFNBQVM1L0IsZUFDWDlJLE1BQVEwb0MsU0FBUzUvQixjQUVqQixNQUFPLENBQ0w5SSxJQUNBcWlDLFVBQVd6bEMsS0FBSzRQLEtBQUtDLFNBQVN0QyxNQUFNdVIsT0FDcENDLE1BQU8vZSxLQUFLNFAsS0FBS0MsU0FBU3RDLE1BQU13UixPQUNoQ3hSLE1BQU9BLE1BQU1BLE9BS3JCLE9BQU8sS0FHVDZ5QixhQUFjMkwsWUFDWixNQUNFLENBQUMsTUFBTyxPQUFRL3JDLEtBQUs0UCxLQUFLQyxTQUFTLGFBQWEzRCxlQUFlM0ssU0FDN0R3cUMsV0FBVzcvQixlQUdOLENBQ0w5SSxJQUFLLE1BQ0xxaUMsVUFBVyxPQUNYMW1CLE1BQU8vZSxLQUFLNFAsS0FBS0MsU0FBUyxhQUMxQnRDLE1BQU82QyxLQUFLM00sS0FBS0EsS0FBS3NYLFFBQVFpeEIsSUFBSXorQixPQUlwQyxDQUNFLE1BQ0F2TixLQUFLNFAsS0FBS0MsU0FBUyxZQUFZM0QsY0FDL0JsTSxLQUFLNFAsS0FBS0MsU0FBUyxlQUFlM0QsZUFDbEMzSyxTQUFTd3FDLFdBQVc3L0IsZUFFZixDQUNMOUksSUFBSyxNQUNMcWlDLFVBQVd6bEMsS0FBSzRQLEtBQUtDLFNBQVMsWUFDOUJrUCxNQUFPL2UsS0FBSzRQLEtBQUtDLFNBQVMsZUFDMUJ0QyxNQUFPNkMsS0FBSzNNLEtBQUtBLEtBQUtzWCxRQUFRTixJQUFJbE4sT0FHL0IsS0FHTDY1QixpQkFFRixPQURtQmgzQixLQUFLWSxNQUFNdlAsUUFBT3FQLE1BQXNCLGVBQWRBLEtBQUt4RixPQUNoQyxHQUdoQis3QixnQkFFRixPQURrQmozQixLQUFLWSxNQUFNdlAsUUFBT3FQLE1BQXNCLGNBQWRBLEtBQUt4RixPQUNoQyxHQUduQjVLLHNCQUF1QnVyQyxVQUFXLEdBQ2hDLEdBQUlBLFNBQVUsQ0FDWixNQUFNQyxnQkFBa0I5N0IsS0FBS1ksTUFBTXZQLFFBQU9xUCxNQUN4Q0EsS0FBS3E3QixZQUFZLGdCQUVuQixJQUFLLElBQUkza0IsTUFBUSxFQUFHQSxNQUFRMGtCLGdCQUFnQnhxQyxPQUFROGxCLGNBQzVDMGtCLGdCQUFnQjFrQixPQUFPNGtCLGNBQWMsY0FHM0NoOEIsS0FBS2czQixrQkFBa0JoM0IsS0FBS2czQixXQUFXaUYsZUFDckNqOEIsS0FBS2tKLE9BQU8sQ0FBRSw4QkFBK0IsT0FHckQ1WSxxQkFBc0J1ckMsVUFBVyxHQUMvQixHQUFJQSxTQUFVLENBQ1osTUFBTUssZUFBaUJsOEIsS0FBS1ksTUFBTXZQLFFBQU9xUCxNQUN2Q0EsS0FBS3E3QixZQUFZLGVBRW5CLElBQUssSUFBSTNrQixNQUFRLEVBQUdBLE1BQVE4a0IsZUFBZTVxQyxPQUFROGxCLGNBQzNDOGtCLGVBQWU5a0IsT0FBTzRrQixjQUFjLGFBRzFDaDhCLEtBQUtpM0IsaUJBQWlCajNCLEtBQUtpM0IsVUFBVWdGLGVBQ25DajhCLEtBQUtrSixPQUFPLENBQUUsNkJBQThCLE9BR2hEa3dCLFdBQ0YsT0FBTzdtQyxTQUFTeU4sS0FBSzNNLEtBQUtBLEtBQUtzWCxTQUFTaXhCLEtBQUt6K0IsT0FHL0M3TSxjQUFlNk0sT0FDYixhQUFhNkMsS0FBS2tKLE9BQU8sQ0FBRSx5QkFBMEIvTCxRQUd2RDdNLGdCQUFpQmlqQyxRQUVmLE9BREFBLE9BQVNoaEMsU0FBU2doQyxRQUNadnpCLEtBQUtvNUIsTUFBUTdGLFFBQ1p2ekIsS0FBS204QixRQUFRbjhCLEtBQUtvNUIsS0FBTzdGLFFBRzlCOWdCLFNBQ0YsR0FBSSxDQUFDLFdBQVd0aEIsU0FBUzZPLEtBQUszTSxLQUFLNkgsTUFBTyxDQUN4QyxHQUMyQyxPQUF6QzhFLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFBUW9iLE1BQU1wUSxjQUM3QnpSLElBQWNsRSxLQUFLM00sS0FBS0EsS0FBS3NYLFFBQVFvYixNQUFNcFEsU0FDRixLQUF6QzNWLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFBUW9iLE1BQU1wUSxRQUU3QixPQUFPM1YsS0FBSytsQixNQUVkLEdBQ0UvbEIsS0FBSzNNLEtBQUtBLEtBQUtzWCxRQUFRb2IsTUFBTXBRLFFBQzdCM1YsS0FBSzNNLEtBQUtBLEtBQUtzWCxRQUFRb2IsTUFBTTVvQixNQUU3QixPQUFPNkMsS0FBSytsQixNQUVkLE1BQU10VCxHQUFLbGdCLFNBQVN5TixLQUFLM00sS0FBS0EsS0FBS3NYLFFBQVFvYixNQUFNcFEsU0FDakQsT0FBTzFQLE1BQU13TSxJQUFNLEtBQU9BLEdBRTVCLE9BQU9sZ0IsU0FBU3lOLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFBUThILEdBQUd0VixPQUd4Q3VWLFlBQ0YsTUFBSSxDQUFDLFdBQVd2aEIsU0FBUzZPLEtBQUszTSxLQUFLNkgsTUFBYzhFLEtBQUsrbEIsTUFDbEQvbEIsS0FBSzNNLEtBQUtBLEtBQUtzWCxRQUFROEgsR0FBRzdiLEtBRWtCLE1BQTVDb0osS0FBSzNNLEtBQUtBLEtBQUs2QixnQkFBZ0JHLElBQUk4SCxPQUNTLE1BQTVDNkMsS0FBSzNNLEtBQUtBLEtBQUs2QixnQkFBZ0JFLElBQUkrSCxNQUU1Qi9NLEtBQUt1aUIsT0FDVDNTLEtBQUszTSxLQUFLQSxLQUFLNkIsZ0JBQWdCRyxJQUFJOEgsTUFDbEM2QyxLQUFLM00sS0FBS0EsS0FBSzZCLGdCQUFnQkUsSUFBSStILFFBQ2xDdk4sS0FBS0ksU0FBU0YsSUFBSSxPQUFRLDRCQUNSLGNBQW5Ca1EsS0FBSzNNLEtBQUs2SCxLQUNOLEVBQ0EsS0FHTjhFLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFBUThILEdBQUdyaEIsSUFDckJtQixTQUFTeU4sS0FBSzNNLEtBQUtBLEtBQUtzWCxRQUFROEgsR0FBR3JoQixLQUVyQyxLQUVGbUIsU0FBU3lOLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFBUThILEdBQUdyaEIsS0FHNUNkLFlBQWE2TSxPQUVYLE9BRElBLE1BQVEsSUFBR0EsTUFBUSxHQUNuQixDQUFDLFdBQVdoTSxTQUFTNk8sS0FBSzNNLEtBQUs2SCxPQUM3QmlDLE1BQVE2QyxLQUFLK2xCLFFBQU81b0IsTUFBUTVLLFNBQVN5TixLQUFLK2xCLGNBQ2pDL2xCLEtBQUtrSixPQUFPLENBQUUsNkJBQThCL0wsVUFFdkRBLE1BQVE2QyxLQUFLMFMsUUFBT3ZWLE1BQVE1SyxTQUFTeU4sS0FBSzBTLGNBQ2pDMVMsS0FBS2tKLE9BQU8sQ0FBRSx3QkFBeUIvTCxTQUd0RDdNLHFCQUFzQm9vQyxVQUFXbmMsS0FBTyxNQUN0QyxNQUFNNkIsVUFBWSxHQUNsQixJQUFLLE1BQU12ZCxTQUFTNjNCLFVBQ2xCLEdBQUl0b0IsU0FBU0MsVUFBVXhQLE9BQ2hCQSxNQUFNeE4sS0FBSzIzQixRQUFPbnFCLE1BQU14TixLQUFLMjNCLE1BQVEsSUFDdEN6TyxPQUFNMWIsTUFBTXhOLEtBQUsyM0IsTUFBTXpPLE9BQVEsR0FDbkM2QixVQUFVbHRCLEtBQUsrTSxVQUFVNEMsWUFDcEIsQ0FDTCxNQUFNRixPQUFTWCxLQUFLeTNCLGdCQUFnQjUyQixNQUFNcEUsTUFDMUMsR0FBS2tFLFFBTUUsR0FBSTRiLEtBQU0sQ0FDZixNQUFNN2IsS0FBT1YsS0FBS1ksTUFBTTlRLElBQUk2USxjQUN0QkQsS0FBS200QixZQUFZdGMsWUFQbkJBLE9BQ0cxYixNQUFNeE4sS0FBSzIzQixRQUFPbnFCLE1BQU14TixLQUFLMjNCLE1BQVEsSUFDMUNucUIsTUFBTXhOLEtBQUsyM0IsTUFBTXpPLE9BQVEsR0FFM0I2QixVQUFVbHRCLEtBQUsrTSxVQUFVNEMsUUFPTixJQUFyQnVkLFVBQVU5c0IsY0FHUjBPLEtBQUtzMkIsd0JBQXdCLE9BQVFsWSxVQUFXLENBQ3BEd1ksYUFBYSxJQUlqQnRtQyxlQUFnQnduQixTQUFVeUUsS0FBTyxNQUMvQixNQUFNNkIsVUFBWSxHQUNsQixJQUFLLE1BQU0xZCxRQUFRb1gsU0FDYnlFLE9BQ0c3YixLQUFLck4sS0FBSzIzQixRQUFPdHFCLEtBQUtyTixLQUFLMjNCLE1BQVEsSUFDeEN0cUIsS0FBS3JOLEtBQUsyM0IsTUFBTXpPLE9BQVEsR0FFMUI2QixVQUFVbHRCLEtBQUsrTSxVQUFVeUMsT0FFM0IsR0FBeUIsSUFBckIwZCxVQUFVOXNCLE9BR2QsYUFBYTBPLEtBQUtzMkIsd0JBQXdCLE9BQVFsWSxVQUFXLENBQzNEd1ksYUFBYSxJQUlqQnRtQyxvQkFBcUJ1USxNQUFPMGIsS0FBTyxNQUNqQyxNQUFNNWIsT0FBU1gsS0FBS3kzQixnQkFBZ0I1MkIsTUFBTXBFLE1BQzFDLEdBQUtrRSxRQVFFLEdBQUk0YixLQUFNLENBQ2YsTUFBTTdiLEtBQU9WLEtBQUtZLE1BQU05USxJQUFJNlEsY0FDdEJELEtBQUttNEIsWUFBWXRjLFlBVG5CQSxPQUNHMWIsTUFBTXhOLEtBQUsyM0IsUUFBT25xQixNQUFNeE4sS0FBSzIzQixNQUFRLElBQzFDbnFCLE1BQU14TixLQUFLMjNCLE1BQU16TyxPQUFRLFNBRXJCdmMsS0FBS3MyQix3QkFBd0IsT0FBUSxDQUFDejFCLE9BQVEsQ0FDbEQrMUIsYUFBYSxJQVFmOWpCLFlBQ0YsT0FBSTlTLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFBUWtJLEdBQUdqYyxLQUNvQixNQUE1Q29KLEtBQUszTSxLQUFLQSxLQUFLNkIsZ0JBQWdCTyxJQUFJMEgsTUFDOUIvTSxLQUFLdWlCLE1BQU0zUyxLQUFLM00sS0FBS0EsS0FBSzZCLGdCQUFnQk8sSUFBSTBILE1BQVEsR0FDakQsS0FFVDVLLFNBQVN5TixLQUFLM00sS0FBS0EsS0FBS3NYLFFBQVFrSSxHQUFHemhCLEtBRzVDZ3JDLGlCQUFrQnAyQixXQUNoQixNQUF5QixpQkFBZEEsVUFFUGhHLEtBQUszTSxLQUFLQSxLQUFLZ3BDLGlCQUFpQmhyQyxRQUM5QnVTLEdBQUtBLEVBQUUxSSxLQUFLeTlCLHNCQUF3QjN5QixVQUFVMnlCLHNCQUM5QyxJQUFNLENBQUV6OUIsS0FBTSxHQUFJb2hDLFVBQVcsRUFBR0MsVUFBVSxHQUd6QyxDQUFFcmhDLEtBQU0sR0FBSW9oQyxVQUFXLEVBQUdDLFVBQVUsR0FHN0N2MUIsZ0JBQWlCaEIsV0FDZixHQUFJQSxVQUFXLENBRWIsT0FEd0JoRyxLQUFLbzhCLGlCQUFpQnAyQixXQUN2QnMyQixVQUV6QixPQUFPLEVBR1RoMUIseUJBQTBCdEIsV0FDeEIsR0FBSUEsVUFBVyxDQUViLE1BQWdDLEtBRFJoRyxLQUFLbzhCLGlCQUFpQnAyQixXQUN2QjlLLEtBRXpCLE9BQU8sRUFHVG1RLGlCQUFrQnJGLFVBQVcwRCxTQUMzQixHQUF5QixpQkFBZDFELFdBQXdDLEtBQWRBLFVBQWtCLENBQ3JELE1BQU1xMkIsaUJBQW1CcCtCLFVBQVUrQixLQUFLM00sS0FBS0EsS0FBS2dwQyxrQkFDNUNqbEIsTUFBUWlsQixpQkFBaUJHLFdBQzdCNTRCLEdBQUtBLEVBQUUxSSxLQUFLeTlCLHNCQUF3QjN5QixVQUFVMnlCLHNCQWtCaEQsT0FoQklqdkIsUUFBVSxHQUNHLElBQVgwTixNQUNGaWxCLGlCQUFpQm5yQyxLQUFLLENBQ3BCZ0ssS0FBTThLLFVBQ05zMkIsVUFBVzV5QixRQUNYNnlCLFVBQVUsSUFHWkYsaUJBQWlCamxCLE9BQU9rbEIsV0FBYTV5QixRQUU5QjBOLE9BQVMsSUFDbEJpbEIsaUJBQWlCOVEsT0FBT25VLE1BQU8sR0FDL0JpbEIsaUJBQWlCblAsTUFBSyxTQUFVdlksS0FBTThuQixPQUNwQyxPQUFPOW5CLEtBQUt6WixLQUFLd2hDLGNBQWNELE1BQU12aEMsVUFHbEM4RSxLQUFLa0osT0FBTyxDQUNqQix3QkFBeUJtekIsb0JBSy9CbjFCLG1CQUFvQmxCLFVBQVcyMkIsZUFDN0IsTUFBTS8xQixPQUFTLElBQUkxVyxLQUFLeXNDLGNBQWNoL0IsWUFBWXlKLFNBQVMsQ0FDekRDLFVBQVUsSUFDVDVXLE1BQ0dtc0MsZ0JBQWtCNThCLEtBQUtvOEIsaUJBQWlCcDJCLFdBQzlDLE9BQUk0MkIsZ0JBQWdCTCxTQUNYLEVBRUZuc0MsS0FBS2dCLElBQUksRUFBR3dWLE9BQVNnMkIsZ0JBQWdCTixXQUc5Q2hzQyxlQUFnQjBWLFVBQVcwRCxTQUV6QixPQUR3QjFKLEtBQUtvOEIsaUJBQWlCcDJCLFdBQ3pCdTJCLFNBS2QsU0FKQ3Y4QixLQUFLNjhCLE9BQU83OEIsS0FBS3FLLElBQU1YLFNBQzdCMUosS0FBS3FMLGlCQUFpQnJGLFVBQVcwRCxTQUMxQkEsU0FLWEEsUUFBU296QixhQUNQLE9BQUlBLFlBQW9COThCLEtBQUsrOEIsbUJBQ3RCLzhCLEtBQUtnOUIsb0JBR1ZELHlCQUNGLE9BQU8vOEIsS0FBSzNNLEtBQUtBLEtBQUt5QyxTQUFTNFQsU0FBU296QixZQUd0Q0UsMEJBQ0YsT0FBT2g5QixLQUFLM00sS0FBS0EsS0FBS3lDLFNBQVM0VCxTQUFTdXpCLGFBR3RDQyxpQkFDRixPQUFJbDlCLEtBQUtnOUIsb0JBQ0YvMkIsTUFBTXZJLE9BQU9zQyxLQUFLZzlCLHNCQUdoQixJQUFJOXNDLEtBQUs4UCxLQUFLZzlCLHFCQUFxQjUxQixTQUFTLENBQ2pEQyxVQUFVLElBQ1Q1VyxNQUpNaU4sT0FBT3NDLEtBQUtnOUIscUJBTWhCLEVBR0xHLGlCQUNGLE9BQUluOUIsS0FBSys4QixtQkFDRjkyQixNQUFNdkksT0FBT3NDLEtBQUsrOEIscUJBR2hCLElBQUk3c0MsS0FBSzhQLEtBQUsrOEIsb0JBQW9CMzFCLFNBQVMsQ0FDaERDLFVBQVUsSUFDVDVXLE1BSk1pTixPQUFPc0MsS0FBSys4QixvQkFNaEIsRUFHTG55QixtQkFDRixPQUFPNUssS0FBSzNNLEtBQUtBLEtBQUtzWCxRQUFRTixLQUFLa0ksV0FBYSxFQUc5QzNMLGFBQ0YsR0FBSzVHLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFDcEIsT0FBSTNLLEtBQUszTSxLQUFLQSxLQUFLc1gsU0FBU04sS0FBS3pULEtBQzNCb0osS0FBS285QixjQUFzQmh0QyxLQUFLZ0IsSUFBSSxHQUFLNE8sS0FBS285QixjQUFlLEdBQzFELEdBRUY3cUMsU0FBU3lOLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFBUU4sSUFBSWpaLEtBR3pDeWhCLFNBQ0YsT0FBT3RnQixTQUFTeU4sS0FBSzNNLEtBQUtBLEtBQUtzWCxRQUFRa0ksR0FBRzFWLE9BRzVDN00sWUFBYTZNLE9BR1gsT0FGSUEsTUFBUSxJQUFHQSxNQUFRLEdBQ25CQSxNQUFRNUssU0FBU3lOLEtBQUs4UyxTQUFRM1YsTUFBUTVLLFNBQVN5TixLQUFLOFMsY0FDM0M5UyxLQUFLa0osT0FBTyxDQUFFLHdCQUF5Qi9MLFFBR2xEa04sVUFDRixPQUFPOVgsU0FBU3lOLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFBUU4sSUFBSWxOLE9BR3pDM0gsVUFDRixPQUFPd0ssS0FBS201QixrQkFBa0IsT0FHNUJrRSw0QkFDRixJQUFJbEMsaUJBQW1CLEVBQ3ZCLElBQUssTUFBTXQ2QixTQUFTYixLQUFLa0YsT0FDbkJyRSxNQUFNeE4sS0FBS0EsS0FBSzJWLGFBQWFndUIsYUFDL0JtRSxrQkFBb0J0NkIsTUFBTXhOLEtBQUtBLEtBQUsyVixZQUFZZ3VCLFlBR3BELE9BQU9tRSxpQkFHTEEsdUJBQ0YsSUFBS243QixLQUFLZzNCLFdBQVksT0FBTyxFQUM3QixJQUFJeGQsT0FBUyxFQUNiLElBQUssTUFBTTJnQixTQUFTL25DLE9BQU9nQyxRQUN6QjRMLEtBQUtnM0IsV0FBVzNqQyxLQUFLQSxLQUFLcW5DLHVCQUN6QixDQUNELE1BQU8xbkMsSUFBS21LLE9BQVNnOUIsTUFDZjNyQixLQUFPeE8sS0FBS201QixrQkFBa0JubUMsS0FDaENtSyxNQUFNeUUsV0FDUjRYLFFBQVVoTCxLQUFLclIsTUFBUU8sT0FBT1AsTUFBTThhLGFBR3hDLE9BQU91QixPQUdUbHBCLG9DQUNRMFAsS0FBS2tKLE9BQU8sQ0FDaEIsOEJBQStCbEosS0FBS203QixtQkFJeEM3cUMsbUNBQ1EwUCxLQUFLa0osT0FBTyxDQUNoQiw2QkFBOEJsSixLQUFLbTdCLG1CQUl2QzdxQyxrQ0FDUTBQLEtBQUtrSixPQUFPLENBQ2hCLDRCQUE2QmxKLEtBQUtvN0IsaUJBSWxDa0MsMkJBQ0YsSUFBSXBDLGdCQUFrQixFQUN0QixJQUFLLE1BQU1yNkIsU0FBU2IsS0FBS2tGLE9BQ25CckUsTUFBTXhOLEtBQUtBLEtBQUsyVixhQUFhaXVCLFlBQy9CaUUsaUJBQW1CcjZCLE1BQU14TixLQUFLQSxLQUFLMlYsWUFBWWl1QixXQUduRCxPQUFPaUUsZ0JBR0xBLHNCQUNGLE9BQUtsN0IsS0FBS2kzQixVQUNIajNCLEtBQUtpM0IsVUFBVTVqQyxLQUFLQSxLQUFLa3FDLFlBREosRUFJMUJDLHVCQUNGLElBQUlBLGlCQUFtQixFQUN2QixJQUFLLE1BQU0zOEIsU0FBU2IsS0FBS2tGLE9BQ25CckUsTUFBTXhOLEtBQUtBLEtBQUsyVixhQUFhQyxhQUMvQnUwQixrQkFBb0IzOEIsTUFBTXhOLEtBQUtBLEtBQUsyVixZQUFZQyxZQUdwRCxPQUFPdTBCLGlCQUdMQywwQkFDRixJQUFJckMsZUFBaUIsRUFDckIsSUFBSyxNQUFNdjZCLFNBQVNiLEtBQUtrRixPQUNuQnJFLE1BQU14TixLQUFLQSxLQUFLMlYsYUFBYSt0QixXQUMvQnFFLGdCQUFrQnY2QixNQUFNeE4sS0FBS0EsS0FBSzJWLFlBQVkrdEIsVUFHbEQsT0FBT3FFLGVBR0xBLHFCQUNGLE9BQU8sRUFBSTE5QixPQUFPc0MsS0FBSzNNLEtBQUtBLEtBQUs2QixnQkFBZ0JNLElBQUkySCxPQUduRHVnQywwQkFDRixJQUFLLE1BQU03OEIsU0FBU2IsS0FBS2tGLE9BQ3ZCLEdBQUlyRSxNQUFNeE4sS0FBS0EsS0FBSzIzQixPQUFPMlMsYUFBYyxPQUFPLEVBRWxELEdBQUkzOUIsS0FBSzQ5QixzQkFDUCxPQUFPLEVBRVQsSUFBSyxNQUFNaEIsbUJBQW1CNThCLEtBQUszTSxLQUFLQSxLQUFLZ3BDLGlCQUMzQyxJQUFLTyxnQkFBZ0JMLFNBQVUsT0FBTyxFQUV4QyxPQUFPLEVBR1Rqc0MsYUFBYzZNLE9BQ1JBLE1BQVEsSUFBR0EsTUFBUSxHQUNuQkEsTUFBUTZDLEtBQUs0RyxTQUFRekosTUFBUTZDLEtBQUs0RyxRQUN0QyxNQUFNaTNCLEtBQU90ckMsU0FBU3lOLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFBUU4sSUFBSWxOLE9BQVNBLE1BRTFELEdBQUkwZ0MsS0FBTyxFQUFHLENBQ1osSUFBSXZCLFVBQVkvcEMsU0FBU3lOLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFBUU4sSUFBSWtJLFdBQ2hEaGdCLFNBQVN5TixLQUFLM00sS0FBS0EsS0FBS3NYLFFBQVFOLElBQUlrSSxXQUNwQyxFQU1KLE9BTEErcEIsV0FBd0J1QixLQUNwQkEsTUFBUSxHQUFHNzlCLEtBQUtvTCxhQUFhalksS0FBSzhGLE9BQU9DLGFBQ3pDb2pDLFdBQWFsc0MsS0FBS3VpQixNQUFNM1MsS0FBS3FLLElBQU0sSUFDckNySyxLQUFLb0wsYUFBYWpZLEtBQUs4RixPQUFPRSxtQkFFbkI2RyxLQUFLa0osT0FBTyxDQUN2Qix5QkFBMEIvTCxNQUMxQiw2QkFBOEJtL0IsWUFFM0IsYUFBYXQ4QixLQUFLa0osT0FBTyxDQUFFLHlCQUEwQi9MLFFBRzlEN00sb0JBQXFCNk0sTUFBTzJnQyxRQUMxQixNQUFNQyxXQUFhLGdCQUFnQkQsY0FDbkMsYUFBYTk5QixLQUFLa0osT0FBTyxDQUFFLENBQUM2MEIsWUFBYTVnQyxRQUczQzdNLHVCQUF3Qnd0QyxRQUN0Qjk5QixLQUFLZytCLGVBQWVoK0IsS0FBSzNNLEtBQUtBLEtBQUtzWCxRQUFRbXpCLFFBQVFsbkMsS0FBTWtuQyxRQUd2RC9YLFlBQ0YsR0FBSSxDQUFDLFdBQVc1MEIsU0FBUzZPLEtBQUszTSxLQUFLNkgsTUFBTyxDQUN4QyxNQUFNNnFCLE1BQVF4ekIsU0FBU3lOLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFBUW9iLE1BQU01b0IsT0FDcEQsT0FBTzhJLE1BQU04ZixPQUFTLEtBQU9BLE1BRS9CLElBQUsvbEIsS0FBSzNNLEtBQUtBLEtBQUtzWCxRQUFTLE9BQU8sS0FDcEMsSUFBSzNLLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFBUW9iLE1BQU8sT0FBTyxLQUkxQyxHQUgyQyxTQUF2Qy9sQixLQUFLM00sS0FBS0EsS0FBS3NYLFFBQVFvYixNQUFNNW9CLFFBQy9CNkMsS0FBSzNNLEtBQUtBLEtBQUtzWCxRQUFRb2IsTUFBTW52QixNQUFPLEdBRWxDb0osS0FBSzNNLEtBQUtBLEtBQUtzWCxRQUFRb2IsTUFBTW52QixLQUFNLENBQ3JDLE1BQU1xbkMsSUFDSmorQixLQUFLM00sS0FBS0EsS0FBSzZCLGdCQUFnQkMsSUFBSWdJLE1BQ25DNkMsS0FBSzNNLEtBQUtBLEtBQUs2QixnQkFBZ0JHLElBQUk4SCxNQUNyQyxHQUFJOGdDLElBQU0sSUFBSyxPQUFPN3RDLEtBQUt1aUIsT0FBT3NyQixJQUFNLElBQU0sSUFBTSxFQUNwRCxHQUFJQSxJQUFNLEdBQUksT0FBUSxFQUN0QixHQUFJQSxJQUFNLEdBQUksT0FBUSxFQUN0QixHQUFJQSxJQUFNLElBQUssT0FBTyxFQUN0QixHQUFJQSxJQUFNLElBQUssT0FBTyxFQUd4QixPQUFPaitCLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFBUW9iLE1BQU01b0IsTUFHbEMrc0IsU0FDRixHQUFJLENBQUMsV0FBVy80QixTQUFTNk8sS0FBSzNNLEtBQUs2SCxNQUFPLE9BQU8sRUFDakQsSUFBSzhFLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFBUyxPQUFPLEtBQ3BDLElBQUszSyxLQUFLM00sS0FBS0EsS0FBS3NYLFFBQVF1ZixHQUFJLE9BQU8sS0FJdkMsR0FId0MsU0FBcENscUIsS0FBSzNNLEtBQUtBLEtBQUtzWCxRQUFRdWYsR0FBRy9zQixRQUM1QjZDLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFBUXVmLEdBQUd0ekIsTUFBTyxHQUUvQm9KLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFBUXVmLEdBQUd0ekIsS0FBTSxDQUNsQyxNQUFNcW5DLElBQ0pqK0IsS0FBSzNNLEtBQUtBLEtBQUs2QixnQkFBZ0JDLElBQUlnSSxNQUNuQzZDLEtBQUszTSxLQUFLQSxLQUFLNkIsZ0JBQWdCRyxJQUFJOEgsTUFDckMsR0FBSThnQyxJQUFNLElBQUssTUFBTyxHQUFHN3RDLEtBQUt1aUIsT0FBT3NyQixJQUFNLElBQU0sUUFDakQsR0FBSUEsSUFBTSxHQUFJLE9BQVEsRUFDdEIsR0FBSUEsSUFBTSxHQUFJLE9BQVEsRUFDdEIsR0FBSUEsSUFBTSxJQUFLLE9BQU8sRUFDdEIsR0FBSUEsSUFBTSxJQUFLLE1BQU8sTUFFeEIsT0FBT2orQixLQUFLM00sS0FBS0EsS0FBS3NYLFFBQVF1ZixHQUFHL3NCLE1BRy9CZ3BCLFVBQ0YsR0FBSSxDQUFDLFdBQVdoMUIsU0FBUzZPLEtBQUszTSxLQUFLNkgsTUFDakMsT0FBTzhFLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFBUXdiLElBQUlocEIsTUFFcEMsSUFBSzZDLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFBUyxPQUFPLEtBQ3BDLElBQUszSyxLQUFLM00sS0FBS0EsS0FBS3NYLFFBQVF3YixJQUFLLE9BQU8sS0FJeEMsR0FIeUMsU0FBckNubUIsS0FBSzNNLEtBQUtBLEtBQUtzWCxRQUFRd2IsSUFBSWhwQixRQUM3QjZDLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFBUXdiLElBQUl2dkIsTUFBTyxHQUVoQ29KLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFBUXdiLElBQUl2dkIsS0FBTSxDQUNuQyxJQUFJc25DLElBMEJKLEdBbkJFQSxJQUxBbCtCLEtBQUszTSxLQUFLQSxLQUFLNkIsZ0JBQWdCSSxJQUFJNkgsTUFDakM2QyxLQUFLM00sS0FBS0EsS0FBSzZCLGdCQUFnQkcsSUFBSThILE9BQ3JDNkMsS0FBSzNNLEtBQUtBLEtBQUs2QixnQkFBZ0JDLElBQUlnSSxNQUNqQzZDLEtBQUszTSxLQUFLQSxLQUFLNkIsZ0JBQWdCRyxJQUFJOEgsTUFFL0IsRUFFTjZDLEtBQUszTSxLQUFLQSxLQUFLNkIsZ0JBQWdCSSxJQUFJNkgsT0FDakM2QyxLQUFLM00sS0FBS0EsS0FBSzZCLGdCQUFnQkcsSUFBSThILE9BQ3JDNkMsS0FBSzNNLEtBQUtBLEtBQUs2QixnQkFBZ0JDLElBQUlnSSxPQUNqQzZDLEtBQUszTSxLQUFLQSxLQUFLNkIsZ0JBQWdCRyxJQUFJOEgsTUFFL0IsRUFFQSxFQUVvQixhQUF4QjZDLEtBQUszTSxLQUFLQSxLQUFLNkgsT0FDWitLLE1BQU0xVCxTQUFTeU4sS0FBSzNNLEtBQUtBLEtBQUsrYSxNQUFNK3ZCLFFBQ3ZDRCxJQUNFM3JDLFNBQVN5TixLQUFLM00sS0FBS0EsS0FBSythLE1BQU0rdkIsTUFBUSxHQUNsQ0QsSUFBTTl0QyxLQUFLdWlCLE1BQU1wZ0IsU0FBU3lOLEtBQUszTSxLQUFLQSxLQUFLK2EsTUFBTSt2QixLQUFPLElBQU0sRUFDNURELE1BR05BLElBQU0sRUFBRyxPQUFPQSxJQUV0QixPQUFPbCtCLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFBUXdiLElBQUlocEIsTUFHaENuQixjQUVGLE9BQU9nRSxLQUFLekQsTUFBUSxHQUFHeUQsS0FBS3pELE1BQU1DLE1BQU1nNEIsT0FBT3gwQixLQUFLekQsTUFBTWQsS0FBTyxLQUcvRDJpQyxhQVFGLE9BUEtwK0IsS0FBSzNNLEtBQUtBLEtBQUsyM0IsUUFDbEJockIsS0FBSzNNLEtBQUtBLEtBQUsyM0IsTUFBUSxHQUN2QmhyQixLQUFLM00sS0FBS0EsS0FBSzIzQixNQUFNb1QsUUFBUyxFQUM5QnArQixLQUFLa0osT0FBTyxDQUFFLGFBQWMsS0FDNUJsSixLQUFLa0osT0FBTyxDQUFFLHFCQUFxQixLQUc5QmxKLEtBQUszTSxLQUFLQSxLQUFLMjNCLE1BQU1vVCxPQUc5QkMsaUJBQWtCNWhDLE1BQ2hCLE9BQU91RCxLQUFLWSxNQUFNdlAsUUFBT3VrQixHQUFLQSxFQUFFblosT0FBU0EsT0FHdkMyaEMsV0FBUWpoQyxPQUNWNkMsS0FBS2tKLE9BQU8sQ0FBRSxvQkFBcUIvTCxRQUdyQzdNLHNCQUF1QnNzQixVQUNyQixNQUFNMGhCLFdBQWF0K0IsS0FBSzNNLEtBQUtBLEtBQUsyM0IsTUFBTXBPLFVBQ2xDbmdCLEtBQU8sY0FBY21nQixpQkFDckI1YyxLQUFLa0osT0FBTyxDQUFFLENBQUN6TSxNQUFPNmhDLFlBUzlCaHVDLHFCQUFzQml1QyxjQUFleDZCLGFBQWMsRUFBTzlSLFFBQVUsSUFDbEUsTUFBTTZyQyxPQUFTOTlCLEtBQUtnd0IsYUFBYXVPLGNBQWN6aUMsZUFDL0MsSUFBS2dpQyxPQU1ILE9BTEF6K0IsR0FBR0MsY0FBY2tXLE1BQ2Y1bEIsS0FBSzRQLEtBQUtZLE9BQU8scUJBQXNCLENBQ3JDbytCLFFBQVNELGlCQUdOLEtBR1QsTUFBTWo4QixNQUFRLElBQUlwQyxVQU9sQixHQUxJak8sUUFBUWdCLFdBQVVxUCxNQUFNaEIsYUFBZTVELE9BQU96TCxRQUFRZ0IsV0FDdERoQixRQUFRMlEsYUFDVk4sTUFBTU0sV0FBYXNLLGNBQWNZLGtCQUFrQjdiLFFBQVEyUSxjQUd4RG1CLG1CQUNDRyxJQUFjalMsUUFBUTJRLGlCQUFjc0IsSUFBY2pTLFFBQVFnQixVQUFVLENBQ3RFLE1BQU1nYixZQUFjQyxXQUFXdlMsT0FBTzFKLFNBQ2xDZ2MsUUFDRjNMLE1BQU1oQixhQUFlNUQsT0FBT3VRLE1BQU1uZSxJQUFJLGNBQ3RDd1MsTUFBTU0sV0FBYWxGLE9BQU91USxNQUFNbmUsSUFBSSxlQUNwQ3dTLE1BQU1rTCxpQkFBbUI5UCxPQUFPdVEsTUFBTW5lLElBQUkscUJBQzFDd1MsTUFBTW1MLHNCQUF3Qi9QLE9BQzVCdVEsTUFBTW5lLElBQUksMkJBTWxCd1MsTUFBTXZKLE1BQVFpSCxLQUFLa0QsU0FDRyxVQUFsQmpSLFFBQVFOLE1BQW1CMlEsTUFBTTJCLFNBQVUsRUFDMUMzQixNQUFNMkIsVUFBWWhTLFFBQVFOLFlBQ3pCMlEsTUFBTW04QixjQUFjWCxPQUFPOXFDLEtBQ2pDc1AsTUFBTTZMLFlBU1I3ZCwwQkFDRW91QyxtQkFDQTM2QixhQUFjLEVBQ2Q5UixRQUFVLElBRVYsTUFBTXVjLEtBQU94TyxLQUFLbTVCLGtCQUFrQnVGLG9CQUVwQyxJQUFLbHdCLEtBT0gsWUFOQW5QLEdBQUdDLGNBQWNrVyxNQUNmNWxCLEtBQUs0UCxLQUFLWSxPQUFPLDZCQUE4QixDQUM3Q28rQixRQUFTRSxtQkFDVDNsQyxNQUFPaUgsS0FBS3ZELFFBTWxCLE1BQU02RixNQUFRLElBQUlwQyxVQU9sQixHQUxJak8sUUFBUWdCLFdBQVVxUCxNQUFNaEIsYUFBZTVELE9BQU96TCxRQUFRZ0IsV0FDdERoQixRQUFRMlEsYUFDVk4sTUFBTU0sV0FBYXNLLGNBQWNZLGtCQUFrQjdiLFFBQVEyUSxjQUd4RG1CLG1CQUNDRyxJQUFjalMsUUFBUTJRLGlCQUFjc0IsSUFBY2pTLFFBQVFnQixVQUFVLENBQ3RFaEIsUUFBUTBzQyxZQUFjbndCLEtBQUtHLE1BQzNCLE1BQU1WLFlBQWNDLFdBQVd2UyxPQUFPMUosU0FDbENnYyxRQUNGM0wsTUFBTWhCLGFBQWU1RCxPQUFPdVEsTUFBTW5lLElBQUksY0FDdEN3UyxNQUFNTSxXQUFhbEYsT0FBT3VRLE1BQU1uZSxJQUFJLGVBQ3BDd1MsTUFBTWtMLGlCQUFtQjlQLE9BQU91USxNQUFNbmUsSUFBSSxxQkFDMUN3UyxNQUFNbUwsc0JBQXdCL1AsT0FDNUJ1USxNQUFNbmUsSUFBSSwyQkFNbEJ3UyxNQUFNdkosTUFBUWlILEtBQUtrRCxTQUNHLFVBQWxCalIsUUFBUU4sTUFBbUIyUSxNQUFNMkIsU0FBVSxFQUMxQzNCLE1BQU0yQixVQUFZaFMsUUFBUU4sWUFDekIyUSxNQUFNMFcsbUJBQW1CeEssS0FBS3hiLEtBQ3BDc1AsTUFBTTZMLFlBR1I3ZCxpQkFBa0J3bUMsVUFBVy95QixZQUFhOVIsUUFBVSxJQUNsRCxJQUFJNE8sTUFBUWIsS0FBS2szQixnQkFDZkosVUFBVXI2QixLQUFPcTZCLFVBQVVyNkIsS0FBT3E2QixXQUVwQyxJQUFLajJCLE1BQU12UCxPQUFRLENBQ2pCLElBQUlvUCxLQUFPLEtBQ1gsR0FBSW8yQixVQUFVL21CLEtBQU0sQ0FDbEIsTUFBTUEsS0FBT25nQixLQUFLb2dCLE1BQU1sZ0IsSUFBSWduQyxVQUFVL21CLE1BQ3RDLEdBQTZCLFNBQXpCQSxLQUFLRSxTQUFTQyxPQUFtQixPQUNyQ3hQLFdBQWFxUCxLQUFLSSxZQUFZMm1CLFVBQVVyN0IsU0FDL0JxN0IsVUFBVXI3QixLQUNuQmlGLEtBQU85USxLQUFLZ1IsTUFBTTlRLElBQUlnbkMsVUFBVXI3QixLQUlsQyxJQUFLaUYsS0FBTSxDQUdULE1BQU00QixNQUFRLElBQUlwQyxVQUNsQm9DLE1BQU1zOEIsVUFBWSxVQUNadDhCLE1BQU1yUyxPQUNacVMsTUFBTTZMLFlBRVIsSUFBS3pOLEtBQ0gsT0FBT3JCLEdBQUdDLGNBQWNDLEtBQ3RCM1AsS0FBSzRQLEtBQUtZLE9BQU8sZ0JBQ2Z4USxLQUFLNFAsS0FBS1ksT0FBTyw2QkFBOEIsQ0FDN0NvK0IsUUFBUzFILFVBQVVyNkIsS0FBT3E2QixVQUFVcjZCLEtBQU9xNkIsVUFDM0MvOUIsTUFBT2lILEtBQUt2RCxRQUtwQixJQUFJZCxRQUFTLEVBWWIsU0FYTWlXLE9BQU9tb0IsUUFBUSxDQUNuQnZtQyxNQUFPLEdBQUc1RCxLQUFLNFAsS0FBS0MsU0FBUyxvQkFDN0IvRCxRQUFTLE1BQU05TCxLQUFLNFAsS0FBS1ksT0FBTyxzQkFBdUIsQ0FDckRrRSxPQUFRd3lCLFVBQVVyNkIsS0FDbEIxRCxNQUFPaUgsS0FBS3ZELGFBRWR1OUIsSUFBSyxLQUNIcitCLFFBQVMsTUFJRSxJQUFYQSxPQUVHLE9BSVAsU0FMUXFFLEtBQUtzMkIsd0JBQXdCLE9BQVEsQ0FBQ3I0QixVQUFVeUMsUUFHeERHLE1BQVFiLEtBQUtrM0IsZ0JBQWdCeDJCLEtBQUtqRSxPQUU3Qm9FLE1BQU12UCxPQUFRLE9BRW5CLEdBQUkxQixLQUFLb0MsS0FBS3FoQixLQUFNLENBQ2xCLE1BQU1rZSxpQkM1Z0VQLE1BQ0xoaUMsb0JBQXFCa04sS0FBTyxLQUFNc2QsVUFBWSxNQUM1QyxNQUFNcE8sV0FBYUMsZUFDakIsK0NBQ0EsQ0FBRXFPLEtBQU1GLFVBQVd0ZCxPQUVyQixPQUFPLElBQUl3WSxTQUFRQyxVQUNqQixJQUFJZ0YsU0FBVyxLQUNmLE1BQU1DLElBQU0sSUFBSXZJLE9BQU8sQ0FDckJwZSxNQUFPNUQsS0FBSzRQLEtBQUtZLE9BQU8sa0JBQW1CLENBQUUzRCxPQUM3Q2YsUUFBU2lRLEtBQ1RrRyxRQUFTLENBQ1AxRSxTQUFVLENBQ1J3QixNQUFPL2UsS0FBSzRQLEtBQUtDLFNBQVMsaUJBQzFCcVMsU0FBVW5HLE9BQ1J1TyxTQUFXLElBQUlHLFNBQ2IxTyxLQUFLLEdBQUc5TCxjQUFjLHVCQUVqQnFWLFFBQVFnRixhQUlyQkksUUFBUyxXQUNUN0MsTUFBTyxJQUNFdkMsU0FBUSxLQUduQmlGLElBQUlsSSxRQUFPLFFEaS9EaUN0VyxPQUN4Q2tGLE1BQU0sR0FBR3BFLEtBQ1RvRSxNQUFNLEdBQUdvWixNQUVMOWMsTUFBUU8sT0FBTzZ6QixXQUFXemhDLElBQUkscUJBQzlCK1EsTUFBTSxHQUFHZytCLFlBQVkxaEMsUUFJL0IsTUFBTW1GLE1BQVEsSUFBSXBDLFVBU2xCLFFBUElnRSxJQUFjalMsUUFBUWdCLFdBQ3hCcVAsTUFBTWhCLGFBQWU1RCxPQUFPekwsUUFBUWdCLGdCQUVsQ2lSLElBQWNqUyxRQUFRMlEsYUFDeEJOLE1BQU1NLFdBQWFzSyxjQUFjWSxrQkFBa0I3YixRQUFRMlEsY0FHeERtQixtQkFDQ0csSUFBY2pTLFFBQVEyUSxpQkFBY3NCLElBQWNqUyxRQUFRZ0IsVUFBVSxDQUN0RSxNQUFNZ2IsWUFBY0MsV0FBV3ZTLE9BQU8xSixTQUNsQ2djLFFBQ0YzTCxNQUFNaEIsYUFBZTVELE9BQU91USxNQUFNbmUsSUFBSSxjQUN0Q3dTLE1BQU1NLFdBQWFsRixPQUFPdVEsTUFBTW5lLElBQUksZUFDcEN3UyxNQUFNa0wsaUJBQW1COVAsT0FBT3VRLE1BQU1uZSxJQUFJLHFCQUMxQ3dTLE1BQU1tTCxzQkFBd0IvUCxPQUM1QnVRLE1BQU1uZSxJQUFJLDJCQU1sQndTLE1BQU12SixNQUFRaUgsS0FBS2tELFNBQ25CWixNQUFNekIsTUFBUUEsTUFBTSxHQUFHcEYsR0FDRCxVQUFsQnhKLFFBQVFOLE1BQW1CMlEsTUFBTTJCLFNBQVUsRUFDMUMzQixNQUFNMkIsVUFBWWhTLFFBQVFOLFlBQ3pCMlEsTUFBTXJTLE9BQ1pxUyxNQUFNNkwsWUFHUjdkLGtCQUFtQnd1QyxXQUFZLzZCLGFBQWMsR0FDM0MsTUFBTXBELE9BQVNtK0IsV0FBV3JqQyxHQUMxQixJQUFJNkksT0FFSixHQURBQSxPQUFTdEUsS0FBS1ksTUFBTTlRLElBQUk2USxTQUNuQjJELE9BQVEsQ0FDWCxJQUFJeTZCLFFBQVUvK0IsS0FBS3ErQixpQkFBaUJTLFdBQVdyaUMsTUFDL0MsR0FBdUIsSUFBbkJzaUMsUUFBUXp0QyxPQUFjLENBQ3hCLElBQUkxQixLQUFLb0MsS0FBS3FoQixLQXdDWixZQUhBaFUsR0FBR0MsY0FBY0MsS0FDZixTQUFTUyxLQUFLdkQsNEJBQTRCcWlDLFdBQVdyaUMsUUF0Q3JDLENBQ2xCLElBQUlpRSxLQUFPLEtBQ1gsTUFBTXFQLEtBQU8rdUIsV0FBVy91QixLQUFPbmdCLEtBQUtvZ0IsTUFBTWxnQixJQUFJZ3ZDLFdBQVcvdUIsTUFBUSxLQUNqRSxHQUFJQSxLQUFNLENBQ1IsR0FBNkIsU0FBekJBLEtBQUtFLFNBQVNDLE9BQW1CLE9BQ3JDeFAsV0FBYXFQLEtBQUtJLFlBQVkydUIsV0FBV3JqQyxTQUNoQ3FqQyxXQUFXcmpDLEtBQ3BCaUYsS0FBTzlRLEtBQUtnUixNQUFNOVEsSUFBSWd2QyxXQUFXcmpDLEtBR25DLElBQUtpRixLQUNILE9BQU9yQixHQUFHQyxjQUFjQyxLQUN0QjNQLEtBQUs0UCxLQUFLQyxTQUFTLDhCQUl2QixJQUFJOUQsUUFBUyxRQUNQaVcsT0FBT21vQixRQUFRLENBQ25Cdm1DLE1BQU8sR0FBRzVELEtBQUs0UCxLQUFLQyxTQUFTLG9CQUM3Qi9ELFFBQVMsTUFBTTlMLEtBQUs0UCxLQUFLWSxPQUFPLHNCQUF1QixDQUNyRGtFLE9BQVF3NkIsV0FBV3JpQyxLQUNuQjFELE1BQU9pSCxLQUFLdkQsYUFFZHU5QixJQUFLLEtBQ0hyK0IsUUFBUyxLQUdiLE1BQU01QyxXQUMwQixJQUF2QmlILEtBQUt1UCxRQUFReFcsTUFBd0JpSCxLQUFLdVAsT0FBT3hXLE1BQVFpSCxLQUVsRSxJQUFlLElBQVhyRSxPQUVHLE9BRVAsU0FIUTVDLE1BQU11OUIsd0JBQXdCLE9BQVEsQ0FBQzUxQixLQUFLNE8sV0FFcER5dkIsUUFBVWhtQyxNQUFNc2xDLGlCQUFpQjM5QixLQUFLakUsT0FDakNzaUMsUUFBUXp0QyxPQUFRLGFBQ2Z5dEMsUUFBUSxHQUFHcmMsZUFPVnFjLFFBQVF6dEMsT0FBUyxHQUMxQitOLEdBQUdDLGNBQWNDLEtBQ2YsU0FBU1MsS0FBS3ZELHVDQUF1Q3FpQyxXQUFXcmlDLHNDQUdwRTZILE9BQVN5NkIsUUFBUSxHQUduQixJQUFLejZCLE9BQU9qUixLQUFLQSxLQUFLK3JCLFdBQVcvb0IsS0FBTSxDQUNqQ3pHLEtBQUtvQyxLQUFLd1MsUUFBUXlkLEtBQU8sR0FDM0I1aUIsR0FBR0MsY0FBY0MsS0FBSzNQLEtBQUs0UCxLQUFLQyxTQUFTLDJCQUc5QixJQUFJb2IsbUJBQW1CN2EsS0FBS2tELFNBQVVvQixPQUFPN0ksR0FBSXNJLGFBQ3pEaTdCLGlCQUVQLEdBQUkxNkIsT0FBT2pSLEtBQUtBLEtBQUsrckIsV0FBVy9vQixLQUFNLENBQ3ZCLElBQUlvb0IsbUJBQW1CemUsS0FBS2tELFNBQVVvQixPQUFPN0ksR0FBSXNJLGFBQ3pEaTdCLGtCQUlUMXVDLHFCQUFzQjJ1QyxRQUFTLEdBQzdCLEdBQ08sYUFEQ3J2QyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsa0JBQ2YsQ0FDZixNQUFNRyxLQUFPLElBQUlpUSxVQUFVRixLQUFLM0QsVUFRaEMsT0FQQXBNLEtBQUtnbUIsVUFBVyxFQUNoQmhtQixLQUFLaXZDLFVBQVcsRUFDaEJqdkMsS0FBS2t2QyxvQkFBcUIsRUFDMUJsdkMsS0FBS1AsVUFBNkQsSUFBbERFLEtBQUtJLFNBQVNGLElBQUksT0FBUSxvQkFDMUNHLEtBQUs4SyxPQUFTLHdCQUNSOUssS0FBSytvQixtQkFBbUIsTUFBT2ltQixPQUFTLEVBQUksR0FDbERodkMsS0FBS2tlLFlBRUhsZSxLQUFLZ1EsYUFBZUQsS0FBSzNNLEtBQUtBLEtBQUs2QixnQkFBZ0JJLElBQUk2SCxNQUFRLElBS2pFLE9BQU84aEMsT0FDSGovQixLQUFLM00sS0FBS0EsS0FBSzZCLGdCQUFnQkksSUFBSTZILE1BQVEsR0FDM0M2QyxLQUFLM00sS0FBS0EsS0FBSzZCLGdCQUFnQkksSUFBSTZILE1BSTdDcWpCLGFBQWM1RCxVQUNaLE9BQUs1YyxLQUFLM00sS0FBS0EsS0FBSzIzQixRQU9maHJCLEtBQUszTSxLQUFLQSxLQUFLMjNCLE1BQU1wTyxXQUNuQjVjLEtBQUszTSxLQUFLQSxLQUFLMjNCLE1BQU1wTyxXQVAxQjVjLEtBQUszTSxLQUFLQSxLQUFLMjNCLE1BQVEsR0FDdkJockIsS0FBSzNNLEtBQUtBLEtBQUsyM0IsTUFBTW9ULFFBQVMsRUFDOUJwK0IsS0FBS2tKLE9BQU8sQ0FBRSxhQUFjLE1BQ3JCLEdBT1g1WSxtQkFBb0Jzc0IsZ0JBQ1o1YyxLQUFLa0osT0FBTyxDQUFFLENBQUMsY0FBYzBULGFBQWEsSUFHbER0c0IscUJBQXNCc3NCLGdCQUNkNWMsS0FBS2tKLE9BQU8sQ0FBRSxDQUFDLGNBQWMwVCxhQUFhLElBR2xEelgsZ0JBQWlCeEUsUUFDZixNQUFNMkQsT0FBU3RFLEtBQUtZLE1BQU05USxJQUFJNlEsUUFDOUIsR0FBeUIsV0FBckIyRCxPQUFPalIsS0FBSzZILEtBQW1CLE9BQU8sS0FDMUMsTUFBTWdLLE9BQVMsR0FTZixPQVJJWixPQUFPalIsS0FBS0EsS0FBS3dOLE1BQU1vZixLQUFLeGtCLElBQzlCeUosT0FBT2hVLEtBQUs4TyxLQUFLWSxNQUFNOVEsSUFBSXdVLE9BQU9qUixLQUFLQSxLQUFLd04sTUFBTW9mLEtBQUt4a0IsS0FHckQ2SSxPQUFPODZCLHNCQUF3Qjk2QixPQUFPalIsS0FBS0EsS0FBS3dOLE1BQU1zZixXQUFXMWtCLElBQ25FeUosT0FBT2hVLEtBQUs4TyxLQUFLWSxNQUFNOVEsSUFBSXdVLE9BQU9qUixLQUFLQSxLQUFLd04sTUFBTXNmLFdBQVcxa0IsS0FHeER5SixPQUlUcUosS0FBTTlSLE1BRUosTUFBTWlFLEtBQU9WLEtBQUtZLE1BQU05USxJQUFJMk0sTUFDNUIsR0FBSWlFLEtBQ0YsTUFBTyxDQUNMeEYsS0FBTSxPQUNOaUMsTUFBT3VELE1BSVgsTUFDTTIrQixRQURTLGNBQ1FDLEtBQUs3aUMsTUFDNUIsSUFBSTQ0QixVQUFZLEtBQ1pnSyxTQUFXQSxRQUFRL3RDLFNBQVErakMsVUFBWWdLLFFBQVEsSUFFbkQsTUFBTXgrQixNQUFRYixLQUFLa0YsT0FBTzdULFFBQU8rTCxLQUUzQkEsRUFBRVgsT0FDSFcsRUFBRVgsS0FBS2s4QixvQkFBb0JoK0IsUUFBUSxNQUFPLE1BQ3pDOEIsS0FBS2s4QixvQkFBb0JoK0IsUUFBUSxNQUFPLEtBQ3hDeUMsRUFBRVgsS0FBS2s4QixvQkFBb0JoK0IsUUFBUSxNQUFPLE1BQ3hDOEIsS0FBS2s4QixvQkFBb0JoK0IsUUFBUSxNQUFPLEtBQzFDeUMsRUFBRVgsS0FBS2s4QixvQkFBb0JoK0IsUUFBUSxNQUFPLE1BQ3hDMDZCLFdBQVdzRCxvQkFBb0JoK0IsUUFBUSxNQUFPLE9BR3RELEdBQUlrRyxNQUFNdlAsT0FBUSxNQUFPLENBQUU0SixLQUFNLE9BQVFpQyxNQUFPMEQsTUFBTSxJQUd0RCxNQUFNNE4sUUFBVSxDQUFDLE1BQU8sTUFBTyxNQUFPLE1BQU8sTUFBTyxNQUFPLE1BQU8sT0FDbEUsSUFBSyxJQUFJbUgsRUFBSSxFQUFHQSxFQUFJbkgsUUFBUW5kLE9BQVFza0IsSUFBSyxDQUN2QyxNQUFNcEgsS0FBT3hPLEtBQUttNUIsa0JBQWtCMXFCLFFBQVFtSCxJQUM1QyxHQUFJcEgsS0FBTSxDQUNSLEdBQUlBLEtBQUt4YixLQUFLMmxDLHNCQUF3Qmw4QixLQUFLWCxjQUN6QyxNQUFPLENBQUVaLEtBQU0saUJBQWtCaUMsTUFBT3FSLE1BRTFDLEdBQUlBLEtBQUs2bUIsV0FBV3NELHNCQUF3Qmw4QixLQUFLWCxjQUMvQyxNQUFPLENBQUVaLEtBQU0saUJBQWtCaUMsTUFBT3FSLE1BRTFDLEdBQUlBLEtBQUtHLE9BQU9ncUIsc0JBQXdCbDhCLEtBQUtYLGNBQzNDLE1BQU8sQ0FBRVosS0FBTSxpQkFBa0JpQyxNQUFPcVIsT0FNOUMsTUFBTSt3QixVQUFZLENBQUMsTUFBTyxPQUMxQixJQUFLLElBQUkzcEIsRUFBSSxFQUFHQSxFQUFJMnBCLFVBQVVqdUMsT0FBUXNrQixJQUFLLENBQ3pDLE1BQU00cEIsS0FBT3gvQixLQUFLZ3dCLGFBQWF1UCxVQUFVM3BCLElBQ3pDLEdBQUk0cEIsS0FBTSxDQUNSLEdBQUlBLEtBQUt4c0MsS0FBSzJsQyxzQkFBd0JsOEIsS0FBS1gsY0FDekMsTUFBTyxDQUFFWixLQUFNLFlBQWFpQyxNQUFPcWlDLE1BRXJDLEdBQUlBLEtBQUtuSyxXQUFXc0Qsc0JBQXdCbDhCLEtBQUtYLGNBQy9DLE1BQU8sQ0FBRVosS0FBTSxZQUFhaUMsTUFBT3FpQyxNQUVyQyxHQUFJQSxLQUFLN3dCLE9BQU9ncUIsc0JBQXdCbDhCLEtBQUtYLGNBQzNDLE1BQU8sQ0FBRVosS0FBTSxZQUFhaUMsTUFBT3FpQyxRQVN2Q0Msa0JBQ0YsT0FBT3ovQixLQUFLa0YsT0FBTzdULFFBQU8rTCxHQUV0QkEsRUFBRS9KLEtBQUtBLEtBQUsrckIsWUFBWXRwQixTQUN4QnNILEVBQUUvSixLQUFLQSxLQUFLK21CLGdCQUFnQnVlLHNCQUMxQi9vQyxLQUFLNFAsS0FDRkMsU0FBUyxpQ0FDUms1QixzQkFLUitHLGtCQUNGLE9BQU8xL0IsS0FBS2tGLE9BQU83VCxRQUFPK0wsR0FFdEJBLEVBQUUvSixLQUFLQSxLQUFLK3JCLFlBQVl0cEIsU0FDeEJzSCxFQUFFL0osS0FBS0EsS0FBSyttQixnQkFBZ0J1ZSxzQkFDMUIvb0MsS0FBSzRQLEtBQ0ZDLFNBQVMsaUNBQ1JrNUIsc0JBS1J6MUIsZUFLRixPQUFJbEQsS0FBS3VULE1BQU1oWCxNQUNOLEdBQUd5RCxLQUFLdVQsTUFBTWhYLE1BQU1nVCxPQUFPOVQsTUFBTXVFLEtBQUt1VCxNQUFNaFgsTUFBTWQsS0FHbER1RSxLQUFLdkUsR0FhWlksZUFDRixPQUFJMkQsS0FBSzNNLEtBQUtrSixNQUFNeTRCLFVBQWtCaDFCLEtBQUt2RSxHQUNwQ3VFLEtBQUtrRCxTQUdkM1QsdUJBQXdCeUQsS0FFdEIsR0FBSUEsSUFBSTdCLFNBQVMsS0FBTSxDQUVyQixNQUFPNEssUUFBU0MsU0FBV2hKLElBQUlpSixNQUFNLEtBQ3JDLEdBQWdCLFVBQVpGLFFBQ0YsT0FBT25NLEtBQUtzTSxPQUFPQyxPQUFPSCxTQUNyQixDQUNMLE1BQU1RLE1BQVE1TSxLQUFLaU8sT0FBTy9OLElBQUlpTSxTQUM5QixJQUFLUyxNQUFPLE9BQU8sS0FDbkIsTUFBTXNCLFVBQVl0QixNQUFNdUIsb0JBQW9CLFFBQVMvQixTQUNyRCxJQUFLOEIsVUFBVyxPQUFPLEtBRXZCLE9BRGMsSUFBSUUsTUFBTUYsV0FDWC9FLE9BS2pCLE9BQU9uSixLQUFLc00sT0FBT3BNLElBQUlrRCxNQUFRLEtBTWpDMUMsaUNBQ0UsTUFBTTRFLGdCQUFrQixHQUN4QixJQUFLLE1BQU9sQyxJQUFLbUssU0FBVS9LLE9BQU9nQyxRQUFRNEwsS0FBSzNNLEtBQUtBLEtBQUs2QixpQkFDdkQsR0FBSWlJLE1BQU0xSixVQUFZMEosTUFBTTFKLFFBQVFzSixXQUFXLEtBQU0sQ0FDbkQsTUFBTTZHLEVBQUksSUFBSTFULEtBQUtpTixNQUFNMUosZUFDbkJtUSxFQUFFM1QsS0FBSyxDQUFFSyxPQUFPLElBQ2xCc1QsRUFBRW5ULFFBQ0p5RSxnQkFBZ0Isd0JBQXdCbEMsYUFBZTVDLEtBQUt1aUIsTUFDMUQvTyxFQUFFblQsY0FNSnVQLEtBQUtrSixPQUFPaFUsdUJBQ1o4SyxLQUFLMi9CLDZCQU1icnZDLG9DQUNFLE1BQU00RSxnQkFBa0IsR0FDeEIsSUFBSyxNQUFPbEMsSUFBS21LLFNBQVUvSyxPQUFPZ0MsUUFBUTRMLEtBQUszTSxLQUFLQSxLQUFLNkIsaUJBQ3ZELEdBQUlpSSxNQUFNMUosVUFBWTBKLE1BQU0xSixRQUFRc0osV0FBVyxLQUFNLENBQ25ELE1BQU0zTCxJQUFNLElBQUlsQixLQUFLaU4sTUFBTTFKLFNBQVMyVCxTQUFTLENBQUVDLFVBQVUsSUFBUTVXLE1BQzNEYyxJQUFNLElBQUlyQixLQUFLaU4sTUFBTTFKLFNBQVMyVCxTQUFTLENBQUV3QyxVQUFVLElBQVFuWixNQUMzRG12QyxRQUFVeHZDLEtBQUt1aUIsT0FBT3ZoQixJQUFNRyxLQUFPLEdBQ25Dc3VDLFVBQ0pELFFBQVUsR0FBTSxFQUFJQSxRQUFxQyxHQUEzQnh2QyxLQUFLbXZCLE1BQU1xZ0IsUUFBVSxJQUNqREMsWUFDRjNxQyxnQkFBZ0Isd0JBQXdCbEMsYUFBZTZzQyxpQkFLdkQ3L0IsS0FBS2tKLE9BQU9oVSx1QkFDWjhLLEtBQUsyL0IsNkJBTWJydkMsbUNBQ0UsTUFBTTRFLGdCQUFrQixHQUN4QixJQUFLLE1BQU9sQyxJQUFLbUssU0FBVS9LLE9BQU9nQyxRQUFRNEwsS0FBSzNNLEtBQUtBLEtBQUs2QixpQkFDdkQsR0FBSWlJLE1BQU0xSixTQUFXMEosTUFBTTFKLFFBQVFzSixXQUFXLEtBQU0sQ0FDbEQsSUFBSThpQyxVQUNKLElBQ0VBLFVBQVksSUFBSTN2QyxLQUNkaU4sTUFBTTFKLFFBQ051TSxLQUFLeTRCLHdCQUNMcnhCLFNBQVMsQ0FBRUMsVUFBVSxJQUFRNVcsTUFDL0IsTUFBT29ELEtBQ1Bnc0MsVUFBWSxLQUVWQSxZQUNGM3FDLGdCQUFnQix3QkFBd0JsQyxhQUFlNnNDLGlCQUt2RDcvQixLQUFLa0osT0FBT2hVLGlCQUdwQjVFLHdCQUF5Qm1NLEtBQU1VLE9BQzdCLE1BQU04RixlQUFpQixHQUNqQjQ4QixVQUFZNTVCLE1BQU0xVCxTQUFTNEssUUFBVSxLQUFPNUssU0FBUzRLLE9BRTNELEdBREE4RixlQUFleEcsTUFBUW9qQyxXQUNsQkEsV0FDQzFpQyxNQUFNSixXQUFXLEtBQU0sQ0FFekJrRyxlQURnQnhHLEtBQUs5QixRQUFRLFNBQVUsYUFDYndDLFlBSXhCNkMsS0FBS2tKLE9BQU9qRyxzQkFDWmpELEtBQUsyL0IsNkJBR2JydkMsd0JBQXlCeVQsYUFBYyxHQUNyQyxNQUFNdEQsUUFBVSxHQUNWb2QsUUFBVSxHQUlWcnFCLE1BQVE1RCxLQUFLNFAsS0FBS0MsU0FBUyxvQkFDakMsSUFBSXFnQyxhQUFlLEVBQ2ZqbEMsUUFBVSx3QkFDZCxJQUFLLE1BQU02RixRQUFRVixLQUFLWSxNQUN0QixHQUFrQixVQUFkRixLQUFLeEYsTUFDSHdGLEtBQUtxL0IsaUJBQWtCLENBQ3pCRCxlQUNBLE1BQU1uK0IsVUFBWSxJQUFJcStCLElBQUksQ0FBRUMsTUFBTyxNQUFPNzRCLFNBQVMsQ0FBRTlXLE9BQU8sSUFDdERpaEMsV0FBYTd3QixLQUFLdkQsTUFDeEIsSUFBSStpQyxRQUFVLEtBQ1ZDLHNCQUF3QixLQUM1QixHQUFJeCtCLElBQUlsUixNQUFROGdDLFlBQWM1dkIsSUFBSWxSLE9BYlQsR0FhMEMsQ0FDakUsTUFBTTJ2QyxpQkFBbUIsSUFBSUosSUFBSSxDQUFFQyxNQUFPLEtBQU03NEIsU0FBUyxDQUN2RDlXLE9BQU8sSUFJVCxHQUZBdXRCLFFBQVEzc0IsS0FBS3dQLEtBQUtqRixJQUdoQjgxQixXQXJCc0IsSUFzQnRCQSxXQUFhNk8sV0FBVzN2QyxPQXRCRixHQXVCdEIsQ0FDQSxNQUFNNHZDLG9CQUFzQixJQUFJTCxJQUFJLENBQ2xDQyxNQUFPLEVBQ1BqdEIsT0FBUSxJQUNQNUwsU0FBUyxDQUFFOVcsT0FBTyxJQUNmZ3dDLFVBQVlELGNBQWM1dkMsTUFDMUI4dkMsaUJBQW1CLGVBQWVGLGNBQWMveEIsT0FBTyxRQUFRK3hCLGNBQWMveEIsT0FBTyxRQUFRZ3lCLGlCQUNsR2hKLFFBQVFrSixNQUFNRCxrQkFDZEosc0JBQXdCLGlDQUFpQ3Z3QyxLQUFLNFAsS0FBS1ksT0FDakUsaUJBQ0EsQ0FDRTFQLFFBQVMsR0FBRzJ2QyxjQUFjL3hCLE9BQU8sUUFBUSt4QixjQUFjL3hCLE9BQU8sS0FDOURneUIsVUFDQXovQixNQUFPSCxLQUFLck4sS0FBS29KLEtBQ2pCODBCLFdBQVlBLFdBQWE2TyxXQUFXM3ZDLDJCQUlsQ3VQLEtBQUs2OEIsT0FBTzc4QixLQUFLcUssSUFBTWkyQixXQUUvQkosU0FBV0UsV0FBVzN2QyxNQUN0Qm9LLFNBQVcsaUNBQWlDakwsS0FBSzRQLEtBQUtZLE9BQ3BELGtCQUNBLENBQ0VNLEtBQU1BLEtBQUtyTixLQUFLb0osS0FDaEJrRixJQUFLQSxJQUFJbFIsTUFDVGd3QyxNQUFPLy9CLEtBQUt2RCxNQUNaK2lDLFFBQVNFLFdBQVczdkMscUJBR00sT0FBMUIwdkMsd0JBQ0Z0bEMsU0FBV3NsQyw2QkFFUHovQixLQUFLZ2dDLG1CQUFtQlIsY0FFOUJybEMsU0FBVyxnQ0FBZ0NqTCxLQUFLNFAsS0FBS1ksT0FDbkQsa0JBQ0EsQ0FDRU0sS0FBTUEsS0FBS3JOLEtBQUtvSixLQUNoQmtGLElBQUtBLElBQUlsUixNQUNUZ3dDLE1BQU8vL0IsS0FBS3ZELHFCQUdoQnNELFFBQVF2UCxLQUFLd1AsS0FBS2pGLFVBRWRpRixLQUFLaWdDLHdCQUlqQixNQUFNdEUsaUJBQW1CLEdBQ3pCLElBQUl1RSxTQUFVLEVBQ2QsSUFBSyxNQUFNaEUsbUJBQW1CNThCLEtBQUszTSxLQUFLQSxLQUFLZ3BDLGlCQUN2Q08sZ0JBQWdCTCxTQUNsQkYsaUJBQWlCbnJDLEtBQUswckMsaUJBQ2JBLGdCQUFnQk4sVUFBWSxHQUNyQ00sZ0JBQWdCTixZQUNoQkQsaUJBQWlCbnJDLEtBQUswckMsaUJBQ3RCZ0UsU0FBVSxHQUVWQSxTQUFVLEVBWWQsR0FUSUEsVUFDRWQsZUFDRmpsQyxTQUFXLFFBRWJBLFNBQVcsU0FBU2pMLEtBQUs0UCxLQUFLWSxPQUFPLDBDQUMvQkosS0FBS2tKLE9BQU8sQ0FDaEIsd0JBQXlCbXpCLHFCQUd4QnQ0QixZQUFhLENBQ2hCbEosU0FBVyxPQUNYLE1BQU1HLFFBQVUsQ0FBRWpDLE1BQU9pSCxZQUNuQnZGLFdBQVdvbUMsY0FBY2YsYUFBZXRzQyxNQUFRLEdBQUlxSCxRQUFTLENBQ2pFRyxVQUVGZ0YsS0FBSzQ5Qix1QkFBd0IsRUFFL0IsTUFBTyxDQUFFbjlCLFFBQWtCb2QsU0FHN0J2dEIsa0JBQW1CeVQsYUFBYyxHQUMvQixNQUFNKzhCLFlBQWM5Z0MsS0FBSzNNLEtBQUtBLEtBQUtzWCxRQUFRaXhCLElBQUl6K0IsTUFDMUMyakMsbUJBQW1COWdDLEtBQUtrSixPQUFPLENBQUUseUJBQTBCLElBQ2hFLE1BQU02M0IsNEJBQThCbnhDLEtBQUtJLFNBQVNGLElBQ2hELE9BQ0EsK0JBRUlndUIsbUJBQXFCLElBQUk1dEIsS0FBSyxTQUFTRCxLQUFLLENBQUVLLE9BQU8sS0FBU0csTUFDOUR1d0Msc0JBQXdCbGpCLFlBQWNnakIsWUFDNUMsSUFBSUcsWUFDQUYsNEJBRUdFLFlBRExELHNCQUNtQixVQUNBLFNBQ1ZBLHdCQUNUQyxZQUFjLFFBRWhCLE1BQU16dEMsTUFBUTVELEtBQUs0UCxLQUFLQyxTQUFTLHFCQUNqQyxJQUFJNUUsUUFBVSx3QkFDZCxHQUFJa21DLDZCQUErQkMsc0JBQXVCLENBQ3hELE1BQU1FLG9CQUFzQixJQUFJaHhDLEtBQUsrd0MsYUFBYWh4QyxLQUFLLENBQUVLLE9BQU8sS0FDN0RHLFlBQ0d1UCxLQUFLa0osT0FBTyxDQUNoQix5QkFDRWxKLEtBQUszTSxLQUFLQSxLQUFLc1gsUUFBUWl4QixJQUFJeitCLE1BQVErakMsZUFFdkNybUMsU0FBVyxpQ0FBaUNqTCxLQUFLNFAsS0FBS1ksT0FDcEQscUJBQ0EsQ0FDRXVCLElBQUttYyxZQUNMMmlCLE1BQU9LLFlBQ1BaLFFBQVNnQiw2QkFJYnJtQyxTQUFXLGdDQUFnQ2pMLEtBQUs0UCxLQUFLWSxPQUNuRCx3QkFDQSxDQUFFdUIsSUFBS21jLFlBQWEyaUIsTUFBT0ssdUJBRy9CLElBQUsvOEIsWUFBYSxDQUNoQmxKLFNBQVcsT0FDWCxNQUFNRyxRQUFVLENBQUVqQyxNQUFPaUgsWUFDbkJ2RixXQUFXb21DLGNBQWNydEMsTUFBT3FILFFBQVMsQ0FBRUcsV0FJckQxSyxtQkFBb0J3USxRQUFTaUQsYUFBYyxHQUN6QyxNQUFNbEQsTUFBUWIsS0FBS1ksTUFBTTlRLElBQUlnUixTQUM3QixJQUFLRCxNQUFPLE9BQ1osSUFBSXJOLE1BQVEsR0FDUnFILFFBQVUsR0FDZCxNQUFNaWpCLFlBQWMsSUFBSTV0QixLQUFLLFNBRzdCLFNBRk00dEIsWUFBWTd0QixLQUFLLENBQUVLLE9BQU8sSUFDM0J5VCxtQkFBbUJ6VSxTQUFTNGEsZUFBZTRULGFBQzVDQSxZQUFZcnRCLE1BQVFvUSxNQUFNMUQsT0FBUzJnQixZQUFZcnRCLE9BQVMsR0FBSSxDQUM5RCxNQUFNd3dDLFlBQWMsSUFBSS93QyxLQUFLLGNBQ3ZCK3dDLFlBQVloeEMsS0FBSyxDQUFFSyxPQUFPLElBQzNCeVQsbUJBQW1CelUsU0FBUzRhLGVBQWUrMkIsYUFDaERwbUMsUUFBVWpMLEtBQUs0UCxLQUFLWSxPQUFPLHlCQUEwQixDQUNuRE0sS0FBTUcsTUFBTXBFLEtBQ1p5akMsUUFBU2UsWUFBWXh3QyxRQUV2QitDLE1BQVE1RCxLQUFLNFAsS0FBS1ksT0FBTyxvQkFBcUIsQ0FDNUNNLEtBQU1HLE1BQU1wRSxLQUNaa0YsSUFBS21jLFlBQVlydEIsTUFDakJnd0MsTUFBTzUvQixNQUFNMUQsY0FFVDBELE1BQU02L0IsbUJBQW1CTyxZQUFZeHdDLFlBRTNDK0MsTUFBUTVELEtBQUs0UCxLQUFLWSxPQUFPLG9CQUFxQixDQUM1Q00sS0FBTUcsTUFBTXBFLEtBQ1prRixJQUFLbWMsWUFBWXJ0QixNQUNqQmd3QyxNQUFPNS9CLE1BQU0xRCxRQUVmdEMsUUFBVWpMLEtBQUs0UCxLQUFLWSxPQUFPLHlCQUEwQixDQUNuRE0sS0FBTUcsTUFBTXBFLE9BR2hCLE1BQU16QixRQUFVLENBQUVqQyxNQUFPaUgsS0FBS3cwQixXQUN4Qi81QixXQUFXb21DLGNBQWNydEMsTUFBT3FILFFBQVMsQ0FBRUcsZ0JBQzNDNkYsTUFBTTgvQix3QkFHZHR1QixtQkFBb0I4dUIsZUFDbEIsTUFBTUMsZUFBaUJwaEMsS0FBSzNNLEtBQUtBLEtBQUtndUMsYUFBYUYsZ0JBQWdCaGtDLE1BQ25FLE1BQThCLGtCQUFuQmlrQyxnQkFHSkEsZUFHVDVMLGtCQUFtQjJMLGNBQWVHLE9BQ2hDLEdBQUt0aEMsS0FBS3FTLG1CQUFtQjh1QixlQUE3QixDQUdBLEdBQUlBLGdCQUFrQmh1QyxLQUFLOEYsT0FBT0MsYUFBeUIsaUJBQVZvb0MsTUFBMEIsQ0FDekUsTUFBTTVMLFNBQVcxMUIsS0FBS3cxQixrQkFBa0IyTCxjQUFlLFlBQ2pEeEwsU0FBVzMxQixLQUFLdzFCLGtCQUFrQjJMLGNBQWUsWUFDdkQsUUFBd0IsSUFBYnhMLFNBQTBCLENBQ25DLElBQWlCLElBQWJELFNBQ0YsT0FBT0MsU0FBVyxJQUFNL2xDLEtBQUs0UCxLQUFLQyxTQUFTLGVBQ3RDLElBQWlCLElBQWJpMkIsU0FDVCxPQUFPQyxTQUFXLElBQU0vbEMsS0FBSzRQLEtBQUtDLFNBQVMsY0FHL0MsTUFBTyxHQUVULE9BQU9PLEtBQUszTSxLQUFLQSxLQUFLZ3VDLGFBQWFGLGlCQUFpQkcsUUFHdERoeEMsc0JBQXVCNndDLGVBQ0VuaEMsS0FBS3FTLG1CQUFtQjh1QixxQkFJdkNuaEMsS0FBSzBJLGVBQWV5NEIscUJBRnBCbmhDLEtBQUtvTCxhQUFhKzFCLGVBTTVCN3dDLG1CQUNFNndDLGVBQ0EsWUFDZSxFQUFLLFVBQ1AsRUFBSyxTQUNMLEtBQUksU0FDSixNQUNULElBRUosSUFBS0ksWUFBYzN4QyxLQUFLSSxTQUFTRixJQUFJLE9BQVEscUJBQXNCLENBQ2pFLE1BQU0weEMsUUFBVXhoQyxLQUFLd2hDLFFBQ2xCbndDLFFBQU9vd0MsUUFBVUEsT0FBT3B1QyxLQUFLMjNCLE1BQU0wVyxNQUFNQyxXQUFhUixnQkFDdEQ5dUMsS0FBSW92QyxRQUFVQSxPQUFPaG1DLEtBQ2xCbW1DLE9BQVMsR0FDZixPQUFRVCxlQUNOLEtBQUtodUMsS0FBSzhGLE9BQU9PLEtBQ2Zvb0MsT0FBTzVXLE1BQVEsQ0FDYjBXLEtBQU0sQ0FDSkcsU0FBUyxJQUdiLE1BQ0YsS0FBSzF1QyxLQUFLOEYsT0FBT0MsWUFDZjBvQyxPQUFPNVcsTUFBUSxDQUNieEQsS0FBTSxDQUNKa08sY0FBVXh4QixJQUdkMDlCLE9BQU9qTSxTQUFXLENBQ2hCbU0sWUFBUTU5QixFQUNSNjlCLGFBQVM3OUIsSUFFTSxJQUFid3hCLFdBQWtDLElBQWJBLFdBQ3ZCa00sT0FBTzVXLE1BQU14RCxLQUFLa08sU0FBV0EsU0FDN0JrTSxPQUFPNVcsTUFBUSxDQUNieEQsS0FBTSxDQUNKa08sV0FHQUMsTUFBQUEsV0FDRUQsU0FDRmtNLE9BQU9qTSxTQUFTbU0sT0FBU25NLFNBRXpCaU0sT0FBT2pNLFNBQVNvTSxRQUFxQixLQUFYcE0sV0FNcEMsR0FBdUIsSUFBbkI2TCxRQUFRbHdDLE9BQWMsQ0FDeEIsTUFBTW13QyxPQUFTM3dDLE9BQU9reEMsY0FBYzN3QyxRQUNsQ293QyxRQUFVQSxPQUFPaG1DLEtBQU8wbEMsZ0JBRTFCLEdBQXNCLElBQWxCTSxPQUFPbndDLE9BQWMsQ0FDdkIsTUFBTTJ3QyxXQUFhcmIsWUFDakIsQ0FDRWpZLE1BQU8vZSxLQUFLNFAsS0FBS0MsU0FBU2dpQyxPQUFPLEdBQUc5eUIsT0FDcENtYixLQUFNMlgsT0FBTyxHQUFHM1gsS0FDaEJrQixNQUFPLENBQ0wwVyxLQUFNLENBQ0pDLFNBQVVGLE9BQU8sR0FBR2htQyxLQUd4QnltQyxVQUFVLEdBRVpOLGNBRUk5N0IsTUFBTXd3Qix3QkFBd0IsZUFBZ0IsQ0FBQzJMLGtCQUdyRFYsWUFBYSxPQUdmSyxPQUFPcE4sSUFBTWdOLFFBQVEsU0FDZjE3QixNQUFNcThCLHdCQUF3QixlQUFnQixDQUFDUCxTQUNyREwsWUFBYSxFQUdqQixHQUFJQSxhQUFlM3hDLEtBQUtJLFNBQVNGLElBQUksT0FBUSxxQkFBc0IsQ0FDakUsT0FBUXF4QyxlQUNOLEtBQUtodUMsS0FBSzhGLE9BQU9FLFlBQ2pCLEtBQUtoRyxLQUFLOEYsT0FBT0csWUFDakIsS0FBS2pHLEtBQUs4RixPQUFPSSxlQUNqQixLQUFLbEcsS0FBSzhGLE9BQU9LLE1BQ2pCLEtBQUtuRyxLQUFLOEYsT0FBT00sTUFDakIsS0FBS3BHLEtBQUs4RixPQUFPTyxXQUNUd0csS0FBS2tKLE9BQU8sQ0FDaEIsQ0FBQyxtQkFBbUJpNEIsd0JBQXdCLElBRTlDLE1BQ0YsS0FBS2h1QyxLQUFLOEYsT0FBT0MsWUFDZixDQUNFLE1BQU1rcEMsT0FBUyxHQUNmQSxPQUFPLG1CQUFtQmpCLHdCQUF5QixHQUNsQyxJQUFiekwsV0FBa0MsSUFBYkEsV0FDdkIwTSxPQUFPLG1CQUFtQmpCLDBCQUE0QnpMLFNBQ2xEQyxNQUFBQSxXQUNGeU0sT0FBTyxtQkFBbUJqQiwwQkFBNEJ4TCxXQUl2RHZqQyxPQUFPMmxDLFVBQVVDLGVBQWV6Z0MsS0FDL0I2cUMsT0FDQSxtQkFBbUJqQiw0QkFHckJpQixPQUFPLG1CQUFtQmpCLDRCQUE4QixNQUd2RC91QyxPQUFPMmxDLFVBQVVDLGVBQWV6Z0MsS0FDL0I2cUMsT0FDQSxtQkFBbUJqQiw0QkFHckJpQixPQUFPLG1CQUFtQmpCLDRCQUE4QixZQUVwRG5oQyxLQUFLa0osT0FBT2s1QixTQUl4QixJQUFLQyxTQUdILE9BQVFsQixlQUNOLEtBQUtodUMsS0FBSzhGLE9BQU9JLGVBRWYsU0FETTJHLEtBQUtvTCxhQUFhalksS0FBSzhGLE9BQU9NLFFBRWpDeUcsS0FBS3FTLG1CQUFtQmxmLEtBQUs4RixPQUFPRyxlQUNwQzRHLEtBQUtxUyxtQkFBbUJsZixLQUFLOEYsT0FBT08sTUFDckMsQ0FDaUIsSUFBSXdjLGFBQ25CaFcsS0FBS21ELFFBQVVuRCxLQUFLa0QsU0FBV2xELEtBQUt2RSxJQUU3QjBTLFlBRVgsTUFDRixLQUFLaGIsS0FBSzhGLE9BQU9PLFdBQ1R3RyxLQUFLMEksZUFBZXZWLEtBQUs4RixPQUFPSSxzQkFDaEMyRyxLQUFLMEksZUFBZXZWLEtBQUs4RixPQUFPSyxhQUNoQzBHLEtBQUswSSxlQUFldlYsS0FBSzhGLE9BQU9HLGVBT2hEOUkscUJBQXNCNndDLGVBQWUsWUFBZSxHQUFVLElBQzVELElBQUtJLFlBQWMzeEMsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLHFCQUFzQixDQUNqRSxNQUFNMHhDLFFBQVV4aEMsS0FBS3doQyxRQUNsQm53QyxRQUFPb3dDLFFBQVVBLE9BQU9wdUMsS0FBSzIzQixNQUFNMFcsTUFBTUMsV0FBYVIsZ0JBQ3REOXVDLEtBQUlvdkMsUUFBVUEsT0FBT2htQyxLQUNwQitsQyxRQUFRbHdDLE9BQVMsUUFDYndVLE1BQU13OEIsd0JBQXdCLGVBQWdCZCxTQUVwREQsWUFBYSxFQUdqQixHQUFJQSxhQUFlM3hDLEtBQUtJLFNBQVNGLElBQUksT0FBUSxxQkFDM0MsT0FBUXF4QyxlQUNOLEtBQUtodUMsS0FBSzhGLE9BQU9DLFlBQ2pCLEtBQUsvRixLQUFLOEYsT0FBT0UsWUFDakIsS0FBS2hHLEtBQUs4RixPQUFPRyxZQUNqQixLQUFLakcsS0FBSzhGLE9BQU9JLGVBQ2pCLEtBQUtsRyxLQUFLOEYsT0FBT0ssTUFDakIsS0FBS25HLEtBQUs4RixPQUFPTSxNQUNqQixLQUFLcEcsS0FBSzhGLE9BQU9PLFdBQ1R3RyxLQUFLa0osT0FBTyxDQUNoQixDQUFDLG1CQUFtQmk0Qix3QkFBd0IsS0FPdEQ3d0MsbUJBQW9CaXlDLGVBQ1p2aUMsS0FBS2tKLE9BQU8sQ0FBRSxDQUFDcTVCLFNBQVUsSUFHakNqeUMsd0JBQXlCb2Esc0JBQ2pCMUssS0FBS2tKLE9BQU8sQ0FBRSxrQ0FBbUN3QixpQkFHckQ4M0IscUJBQ0YsTUFBTTlKLFVBQVksR0FDbEIsSUFBSyxNQUFNdjdCLFNBQVM2QyxLQUFLWSxNQUNKLFVBQWZ6RCxNQUFNakMsTUFBb0JpQyxNQUFNOUosS0FBS0EsS0FBSytyQixXQUFXbnBCLFVBQ3ZEeWlDLFVBQVV4bkMsS0FBS2lNLE9BUW5CLE9BSkF1N0IsVUFBVXhMLE1BQUssQ0FBQ3A1QixFQUFHaXRCLElBQ1ZqdEIsRUFBRTJJLEtBQUtpZ0MsY0FBYzNiLEVBQUV0a0IsUUFHekJpOEIsVUFHTCtKLHlCQUNGLE1BQU1DLFdBQWEsR0FDbkIsSUFBSyxNQUFNdmxDLFNBQVM2QyxLQUFLWSxNQUN2QixHQUFtQixXQUFmekQsTUFBTWpDLE9BQXNCaUMsTUFBTTlKLEtBQUtBLEtBQUsrckIsV0FBVy9vQixLQUFNLENBQy9ELE1BQU13SyxNQUFRYixLQUFLWSxNQUFNOVEsSUFBSXFOLE1BQU05SixLQUFLQSxLQUFLd04sTUFBTW9mLEtBQUt4a0IsSUFDeEQwQixNQUFNOUosS0FBS0EsS0FBS3dOLE1BQU1vZixLQUFLOWlCLE1BQVEwRCxNQUFRQSxNQUFNMUQsTUFBUSxFQUN6RHVsQyxXQUFXeHhDLEtBQUtpTSxPQVFwQixPQUpBdWxDLFdBQVd4VixNQUFLLENBQUNwNUIsRUFBR2l0QixJQUNYanRCLEVBQUUySSxLQUFLaWdDLGNBQWMzYixFQUFFdGtCLFFBR3pCaW1DLFdBR0xDLG9CQUNGLE1BQU1qSyxVQUFZLEdBQ2xCLElBQUssTUFBTXY3QixTQUFTNkMsS0FBS1ksTUFDSixVQUFmekQsTUFBTWpDLE1BQW9CaUMsTUFBTTlKLEtBQUtBLEtBQUsrckIsV0FBV2xwQixTQUN2RHdpQyxVQUFVeG5DLEtBQUtpTSxPQVFuQixPQUpBdTdCLFVBQVV4TCxNQUFLLENBQUNwNUIsRUFBR2l0QixJQUNWanRCLEVBQUUySSxLQUFLaWdDLGNBQWMzYixFQUFFdGtCLFFBR3pCaThCLFVBR0wxbUMsV0FFRixPQUFPcEMsS0FBS3VoQixNQUFNNUMsTUFBS3ZjLFNBQ2pCQSxLQUFLdWYsV0FDSHZmLEtBQUt1ZixVQUFVOVYsS0FBT3VFLEtBQUt2RSxNQU1qQ3l3QixpQkFDRixNQUFNd00sVUFBWTE0QixLQUFLazNCLGdCQUNyQnRuQyxLQUFLNFAsS0FBS0MsU0FBU3RNLEtBQUs0RyxpQkFFMUIsT0FBeUIsSUFBckIyK0IsVUFBVXBuQyxPQUFxQm9uQyxVQUFVLEdBQ3RDLEtBR0xzQyx3QkFDRixNQUFNdEMsVUFBWTE0QixLQUFLazNCLGdCQUNyQnRuQyxLQUFLNFAsS0FBS0MsU0FBU3RNLEtBQUs2Ryx3QkFFMUIsT0FBeUIsSUFBckIwK0IsVUFBVXBuQyxPQUFxQm9uQyxVQUFVLEdBQ3RDLEtBR0w1dkIseUJBQ0YsTUFBTTR2QixVQUFZMTRCLEtBQUtrM0IsZ0JBQ3JCdG5DLEtBQUs0UCxLQUFLQyxTQUFTdE0sS0FBSzhHLG9CQUUxQixPQUF5QixJQUFyQnkrQixVQUFVcG5DLE9BQXFCb25DLFVBQVUsR0FDdEMsS0FHTDBFLG9CQUNGLE1BQU13RixHQUFLNWlDLEtBQUs4SSxtQkFDaEIsR0FBSTg1QixHQUFJLENBQ04sTUFBTXpsQyxNQUFReWxDLEdBQUd6bEMsTUFDakIsT0FBSUEsT0FDRzVLLFNBQVNxd0MsR0FBR3Z2QyxLQUFLQSxLQUFLOEosT0FFL0IsT0FBTyxFQUdMMGxDLHFCQUNGLE9BQU83aUMsS0FBSzJxQixRQUFRLE9BQVEsb0JBQXFCLEVBR25EcjZCLGdDQUNRMFAsS0FBS29uQixRQUFRLE9BQVEsa0JBQWtCLEdBRzNDNWYsZ0NBQ0YsT0FBT3hILEtBQUsycUIsUUFBUSxPQUFRLCtCQUFnQyxFQUc5RHI2Qiw0Q0FDUTBQLEtBQUtvbkIsUUFBUSxPQUFRLDZCQUE2QixHQUd0RDZULG1CQUNGLE1BQU02SCxHQUFLOWlDLEtBQUtnN0Isa0JBQ2hCLEdBQUk4SCxHQUFJLENBQ04sTUFBTTNsQyxNQUFRMmxDLEdBQUczbEMsTUFDakIsT0FBSUEsT0FDRzVLLFNBQVN1d0MsR0FBR3p2QyxLQUFLQSxLQUFLOEosT0FFL0IsT0FBTyxFQUdMNGxDLG9CQUNGLE1BQU1ELEdBQUs5aUMsS0FBS2k3QixhQUNoQixPQUFJNkgsSUFBTSxHQUFXLElBQ2pCQSxJQUFNLEdBQVcsSUFDakJBLElBQU0sR0FBVyxHQUNqQkEsSUFBTSxHQUFXLEdBQ2pCQSxJQUFNLEVBQVUsRUFDYixHQUdMRSxXQUNGLE1BQU1GLEdBQUs5aUMsS0FBS2k3QixhQUNoQixPQUFJNkgsSUFBTSxHQUFXLElBQ2pCQSxJQUFNLEdBQWdCLEdBQUxBLEdBQ2pCQSxJQUFNLEdBQWdCLEVBQUxBLEdBQ2pCQSxJQUFNLEdBQWdCLEVBQUxBLEdBQ2pCQSxJQUFNLEVBQVVBLEdBQ2IsR0FHTEcsYUFDRixNQUFNSCxHQUFLOWlDLEtBQUtpN0IsYUFDaEIsT0FBSTZILElBQU0sR0FBVyxJQUNqQkEsSUFBTSxHQUFnQixJQUFMQSxHQUNqQkEsSUFBTSxHQUFnQixJQUFMQSxHQUNqQkEsSUFBTSxHQUFnQixHQUFMQSxHQUNqQkEsSUFBTSxFQUFlLEdBQUxBLEdBQ2IsRUFHTDU5QixhQUNGLE1BQU13ekIsVUFBWSxHQUNsQixJQUFLLE1BQU12N0IsU0FBUzZDLEtBQUtZLE1BQ0osVUFBZnpELE1BQU1qQyxNQUFrQnc5QixVQUFVeG5DLEtBQUtpTSxPQU83QyxPQUpBdTdCLFVBQVV4TCxNQUFLLENBQUNwNUIsRUFBR2l0QixJQUNWanRCLEVBQUUySSxLQUFLaWdDLGNBQWMzYixFQUFFdGtCLFFBR3pCaThCLFVBR0w3YixhQUNGLE9BQU9qdEIsS0FBS3VoQixNQUFNOWYsUUFDaEJpZ0IsR0FBS3RSLEtBQUtrakMsbUJBQW1CNXhCLEVBQUcsV0FBYUEsRUFBRStCLE9BSS9DOHZCLGFBQ0YsT0FBT25qQyxLQUFLNmMsT0FBT3hyQixRQUFPaWdCLEdBQUtBLEVBQUVDLFdBQVc5VixLQUFPdUUsS0FBS3ZFLEtBR3REMm5DLG9CQUNGLE9BQ0V4ekMsS0FBS3VoQixNQUFNWCxTQUFTbmYsUUFBT2lnQixHQUFLQSxFQUFFQyxXQUFXOVYsS0FBT3VFLEtBQUt2RSxLQUFJLElBQU0sS0FJdkVuTCw4QkFBK0JpRSxPQUU3QixHQURBQSxNQUFNMGEsaUJBQ0YxYSxNQUFNb2YsY0FBZSxDQUN2QixNQUFNMHZCLGFBQWU5d0MsU0FDbkJnQyxNQUFNb2YsY0FBY3dELGNBQWNtc0IsY0FFOUJDLFlBQWNoeEMsU0FBU2dDLE1BQU1vZixjQUFjd0QsY0FBY2hhLE9BQy9ELElBQUlxbUMsWUFFSixPQUFJRCxZQUFjRixtQkFBMkJyakMsS0FBS3lqQyxNQUFNRixjQUM5QkMsWUFBakJELFlBQWMsRUFBaUJuekMsS0FBS0MsSUFBSWt6QyxhQUM5QkYsYUFBZUUsWUFDbEN2akMsS0FBS2lTLFFBQU8sU0FDQ2pTLEtBQUt1bEIsV0FBV2llLFlBQWEsQ0FBRW5hLGFBQWEsTUFJN0QvNEIsaUJBQWtCaWpDLE9BQVF0aEMsUUFBVSxJQUNsQyxNQUFNeXhDLFVBQVkxakMsS0FBSzNNLEtBQUtBLEtBQUtzWCxRQUFRK2EsTUFBTXZvQixNQUN6Q3dtQyxZQUFjcHhDLFNBQVNnaEMsUUFDN0IsSUFBSXFRLFdBQWEsRUFDWjN4QyxRQUFRbzNCLGFBQ08sT0FBZHFhLFlBRU94MkIsY0FBYzIyQixVQUFVSCxXQUNqQ0Usa0JBQW9CLElBQUkxekMsS0FBS3d6QyxXQUFXenpDLEtBQUssQ0FBRUssT0FBTyxLQUFTRyxNQUNyRHdWLE1BQU12SSxPQUFPZ21DLFlBR3ZCcmtDLEdBQUdDLGNBQWNDLEtBQ2Ysa0NBQWtDbWtDLDhCQUhwQ0UsV0FBYWxtQyxPQUFPZ21DLFlBT3hCLE1BQU1JLFVBQVlILFlBQWNDLFdBQ2hDLEdBQUlFLFdBQWEsRUFBRyxPQUFPLEVBRTNCLFNBRE05akMsS0FBS3lqQyxNQUFNempDLEtBQUt5UyxHQUFLcXhCLFdBQ3ZCQSxXQUFhOWpDLEtBQUswUyxZQUNkMVMsS0FBS29MLGFBQWFqWSxLQUFLOEYsT0FBT08sV0FFcEMsR0FBSTVKLEtBQUtJLFNBQVNGLElBQUksT0FBUSw4QkFDNUIsR0FBZ0IsSUFBWmtRLEtBQUt5UyxHQUNIcXhCLFdBQWExekMsS0FBSytpQixLQUFLblQsS0FBSzBTLE1BQVEsR0FDdEMxUyxLQUFLb0wsYUFBYWpZLEtBQUs4RixPQUFPSyxPQUU5QjBHLEtBQUtvTCxhQUFhalksS0FBSzhGLE9BQU9HLGtCQUUzQixHQUFJMHFDLFdBQWExekMsS0FBSytpQixLQUFLblQsS0FBSzBTLE1BQVEsR0FBSSxDQUNoQyxJQUFJc0QsYUFDbkJoVyxLQUFLbUQsUUFBVW5ELEtBQUtrRCxTQUFXbEQsS0FBS3ZFLElBRTdCMFMsaUJBRU4sQ0FDTCxJQUFJNDFCLGVBQWdCLEVBQ2hCRCxXQUFhMXpDLEtBQUsraUIsS0FBS25ULEtBQUswUyxNQUFRLFVBQ2hDMVMsS0FBS29MLGFBQWFqWSxLQUFLOEYsT0FBT0ksZ0JBQ3BDMHFDLGVBQWdCLEdBRWhCQSxjQUFnQi9qQyxLQUFLcVMsbUJBQW1CbGYsS0FBSzhGLE9BQU9JLGdCQUV0QyxJQUFaMkcsS0FBS3lTLFdBQ0R6UyxLQUFLb0wsYUFBYWpZLEtBQUs4RixPQUFPRyxhQUNoQzJxQyxlQUNGL2pDLEtBQUtvTCxhQUFhalksS0FBSzhGLE9BQU9LLFFBS3RDLE9BQU93cUMsVUFHTEUsaUJBQ0YsT0FBT2hrQyxLQUFLcVMsbUJBQW1CbGYsS0FBSzhGLE9BQU9JLGdCQUd6Q0MsWUFDRixPQUFPMEcsS0FBS3FTLG1CQUFtQmxmLEtBQUs4RixPQUFPSyxPQUd6Q0Ysa0JBQ0YsT0FBTzRHLEtBQUtxUyxtQkFBbUJsZixLQUFLOEYsT0FBT0csYUFHekNJLFdBQ0YsT0FBT3dHLEtBQUtxUyxtQkFBbUJsZixLQUFLOEYsT0FBT08sTUFHekNELFlBQ0YsT0FBT3lHLEtBQUtxUyxtQkFBbUJsZixLQUFLOEYsT0FBT00sUUVsakd4QyxNQUFNMHFDLFNBQ1huZ0MsY0FDRTlELEtBQUtra0MsVUFBWSxDQUNmaHBDLEtBQU0rb0MsU0FBU0UsVUFBVUMsTUFDekI5aEMsTUFBTzJoQyxTQUFTSSxXQUFXQyxPQUkvQi8wQyxzQkFBdUJnMUMsVUFDckIsTUFBTTUxQixNQUFRNjFCLHVCQUF1QkMsV0FBdkIsT0FDSi9QLFNBQVNnUSwrQkFDaEJyekMsUUFBT3N6QyxHQUFLQSxFQUFFM3hDLE1BQVF1eEMsU0FBUzluQyxPQUMvQnBLLEtBQUlzeUMsR0FBS0EsRUFBRWgyQixRQUNWQSxNQUFNcmQsT0FBUyxJQUNqQml6QyxTQUFTNTFCLE1BQVFBLE1BQU0sSUFFekIsTUFBTWkyQixLQUFPLElBQUlYLFNBRWpCLGFBRE1XLEtBQUtDLFFBQVFOLFVBQ1pLLEtBR0VFLDBCQUNULE1BQU8sQ0FBQyxRQUFTLFVBQVcsUUFHbkJDLDRCQUNULE1BQU8sQ0FBQyxTQUFVLE9BQVEsaUJBQWtCLG1CQUduQ0MsNEJBQ1QsTUFBTyxDQUFDLGFBQWMsWUFBYSxTQUFVLFdBR3BDQywyQkFDVCxNQUFPLENBQUMsU0FHQ2QsdUJBQ1QsTUFBTyxDQUNMQyxNQUFPLEVBQ1BjLFFBQVMsRUFDVEMsS0FBTSxHQUlDZCx3QkFDVCxNQUFPLENBQ0xlLGVBQWdCLEVBQ2hCQyxVQUFXLEVBQ1hmLE1BQU8sR0FJUHZyQyxZQUNGLE9BQUlpSCxLQUFLM0QsU0FDQTVCLFdBQVc2QixnQkFBZ0IwRCxLQUFLM0QsVUFFbEMsS0FHTGhKLFdBQ0YsTUFBTUEsS0FBTzRLLFVBQVUrQixLQUFLa2tDLFdBSTVCLE9BSEE3d0MsS0FBS2l5QyxRQUFVdGxDLEtBQUt1bEMsR0FBR2pqQyxNQUN2QmpQLEtBQUtteUMsVUFBWXhsQyxLQUFLdWxDLEdBQUdFLFFBQ3pCcHlDLEtBQUtxeUMsT0FBUzFsQyxLQUFLdWxDLEdBQUc3a0MsS0FDZnJOLEtBR1QvQyxrQkFFRSxHQURBMFAsS0FBS2trQyxVQUFVeUIsV0FBWSxHQUN0QjNsQyxLQUFLa2tDLFVBQVUwQixpQkFBbUI1bEMsS0FBS2trQyxVQUFVMkIsY0FFcEQsT0FEQTdsQyxLQUFLOGxDLFdBQVE1aEMsR0FDTixFQUdULEdBQUlsRSxLQUFLa2tDLFVBQVUwQixlQUFnQixDQUNqQyxNQUFNNzFCLEtBQU9uZ0IsS0FBS29nQixNQUFNbGdCLElBQUlrUSxLQUFLa2tDLFVBQVVuMEIsTUFDM0MsSUFBS0EsS0FBTSxPQUFPLEVBQ2xCLEdBQTZCLFNBQXpCQSxLQUFLRSxTQUFTQyxPQUFtQixPQUNyQ2xRLEtBQUs4bEMsWUFBYy8xQixLQUFLSSxZQUFZblEsS0FBS2trQyxVQUFVem9DLElBVXJELEdBUEl1RSxLQUFLa2tDLFVBQVUyQixnQkFDakI3bEMsS0FBSzhsQyxNQUFRbDJDLEtBQUtnUixNQUFNOVEsSUFBSWtRLEtBQUtra0MsVUFBVXpvQyxLQUc3Q3VFLEtBQUtra0MsVUFBVTFTLFVBQVksS0FDM0J4eEIsS0FBS2trQyxVQUFVelMsU0FBVyxLQUV0Qnp4QixLQUFLOGxDLE1BQU8sQ0FDZCxHQUE2QixXQUF6QjlsQyxLQUFLOGxDLE1BQU16eUMsS0FBSzZILEtBSWxCLE9BSEE4RSxLQUFLOUUsS0FBTytvQyxTQUFTRSxVQUFVZ0IsS0FDL0JubEMsS0FBS2trQyxVQUFVelMsU0FBV3p4QixLQUFLOGxDLE1BQU16eUMsS0FBS29KLEtBQzFDdUQsS0FBS2trQyxVQUFVeUIsV0FBWSxHQUNwQixFQUdULEdBQTZCLFVBQXpCM2xDLEtBQUs4bEMsTUFBTXp5QyxLQUFLNkgsS0FLbEIsT0FKQThFLEtBQUs5RSxLQUFPK29DLFNBQVNFLFVBQVVDLE1BQy9CcGtDLEtBQUtzQyxNQUFRMmhDLFNBQVNJLFdBQVdDLE1BQ2pDdGtDLEtBQUtra0MsVUFBVTFTLFVBQVl4eEIsS0FBSzhsQyxNQUFNenlDLEtBQUtvSixLQUMzQ3VELEtBQUtra0MsVUFBVXlCLFdBQVksR0FDcEIsRUFHWCxPQUFPLEVBR1RyMUMsY0FBZThULEdBR2JwRSxLQUFLa2tDLFVBQVUwQixnQkFBaUIsRUFDaEM1bEMsS0FBS2trQyxVQUFVMkIsZUFBZ0IsRUFDL0I3bEMsS0FBSytsQyxnQkFBaUIsRUFFbEIzaEMsRUFBRTJoQyxpQkFDSi9sQyxLQUFLK2xDLGdCQUFpQixFQUN0Qi9sQyxLQUFLM0QsU0FBVytILEVBQUUvSCxVQUloQitILEVBQUUyTCxNQUFRM0wsRUFBRTNJLEtBQ2R1RSxLQUFLa2tDLFVBQVUwQixnQkFBaUIsRUFDaEM1bEMsS0FBS2trQyxVQUFVbjBCLEtBQU8zTCxFQUFFMkwsS0FDeEIvUCxLQUFLa2tDLFVBQVV6b0MsR0FBSzJJLEVBQUUzSSxJQUdwQjJJLEVBQUUzSSxLQUFPMkksRUFBRTJMLE9BQ2IvUCxLQUFLa2tDLFVBQVUyQixlQUFnQixFQUMvQjdsQyxLQUFLa2tDLFVBQVV6b0MsR0FBSzJJLEVBQUUzSSxJQUt4QixVQUZzQnVFLEtBQUtnbUMsY0FJckI1aEMsRUFBRTlCLE1BQU90QyxLQUFLOUUsS0FBT2tKLEVBQUU5QixNQUN0QnRDLEtBQUs5RSxLQUFPK29DLFNBQVNFLFVBQVVDLE1BQ2hDaGdDLEVBQUVsSixLQUFNOEUsS0FBS3NDLE1BQVE4QixFQUFFbEosS0FFbEI4RSxLQUFLOUUsT0FBTThFLEtBQUtzQyxNQUFRMmhDLFNBQVNJLFdBQVdlLGdCQUdqRGhoQyxFQUFFM0gsTUFLSixHQUpBdUQsS0FBS2trQyxVQUFVelMsU0FBVyxLQUMxQnp4QixLQUFLa2tDLFVBQVUxUyxVQUFZLEtBQzNCeHhCLEtBQUtra0MsVUFBVStCLGtCQUFvQixLQUNuQ2ptQyxLQUFLa2tDLFVBQVVnQyxhQUFlLEtBQzFCbG1DLEtBQUt1bEMsR0FBR2pqQyxNQUNWLE9BQVF0QyxLQUFLc0MsT0FDWCxLQUFLMmhDLFNBQVNJLFdBQVdDLE1BQ3ZCdGtDLEtBQUtra0MsVUFBVTFTLFVBQVlwdEIsRUFBRTNILEtBQzdCLE1BQ0YsS0FBS3duQyxTQUFTSSxXQUFXZSxlQUN2QnBsQyxLQUFLa2tDLFVBQVUrQixrQkFBb0I3aEMsRUFBRTNILEtBQ3JDLE1BQ0YsS0FBS3duQyxTQUFTSSxXQUFXZ0IsVUFDdkJybEMsS0FBS2trQyxVQUFVZ0MsYUFBZTloQyxFQUFFM0gsVUFLM0J1RCxLQUFLdWxDLEdBQUc3a0MsT0FBTVYsS0FBS2trQyxVQUFVelMsU0FBV3J0QixFQUFFM0gsT0FLckQySCxFQUFFeEIsWUFBZXFELE1BQU12SSxPQUFPMEcsRUFBRXhCLGVBQ2xDNUMsS0FBS2trQyxVQUFVdGhDLFdBQWFsRixPQUFPMEcsRUFBRXhCLGNBRW5Dd0IsRUFBRW5SLFVBQWFnVCxNQUFNdkksT0FBTzBHLEVBQUVuUixhQUNoQytNLEtBQUtra0MsVUFBVWp4QyxTQUFXeUssT0FBTzBHLEVBQUVuUixnQkFHWCxJQUFqQm1SLEVBQUV4QixpQkFDYSxJQUFmd0IsRUFBRW5SLFdBRVQrTSxLQUFLa2tDLFVBQVVpQyxnQkFBaUIsR0FFOUIvaEMsRUFBRStoQyxpQkFBZ0JubUMsS0FBS2trQyxVQUFVaUMsZ0JBQWlCLEdBR2hDLFNBQWxCL2hDLEVBQUV1NkIsY0FBNEMsSUFBbEJ2NkIsRUFBRXU2QixjQUNoQzMrQixLQUFLa2tDLFVBQVV2RixhQUFjLEdBRTNCdjZCLEVBQUV1SyxRQUNKM08sS0FBS2trQyxVQUFVa0MsVUFBVyxFQUMxQnBtQyxLQUFLa2tDLFVBQVV2MUIsTUFBUXZLLEVBQUV1SyxPQUl2QnZLLEVBQUUwbEIsT0FDSjlwQixLQUFLa2tDLFVBQVVtQyxTQUFVLEVBQ3pCcm1DLEtBQUtra0MsVUFBVXBhLEtBQU8xbEIsRUFBRTBsQixNQUlWLFNBQVoxbEIsRUFBRXpTLFFBQWdDLElBQVp5UyxFQUFFelMsUUFBZ0JxTyxLQUFLa2tDLFVBQVV2eUMsT0FBUSxHQUduRXFPLEtBQUtra0MsVUFBVXA5QixPQUFTMUMsRUFBRTBDLE9BQzFCOUcsS0FBS2trQyxVQUFVdDlCLE9BQVN4QyxFQUFFd0MsT0FHeEIxTCxXQUNGLE9BQU84RSxLQUFLa2tDLFVBQVVocEMsS0FHcEJvckMsZ0JBQ0YsT0FBUXRtQyxLQUFLc0MsT0FDWCxLQUFLMmhDLFNBQVNJLFdBQVdlLGVBQ3ZCLE1BQU8saUJBQ1QsS0FBS25CLFNBQVNJLFdBQVdnQixVQUN2QixNQUFPLFlBQ1QsS0FBS3BCLFNBQVNJLFdBQVdDLE1BQ3ZCLE1BQU8sUUFDVCxRQUNFLFFBSUZwcEMsU0FBTWtKLEdBQ1IsR0FBSzZCLE1BQU12SSxPQUFPMEcsSUFFaEIsT0FBUUEsRUFBRXRJLGVBQ1IsSUFBSyxRQUNIa0UsS0FBS2trQyxVQUFVaHBDLEtBQU8rb0MsU0FBU0UsVUFBVUMsTUFDekMsTUFDRixJQUFLLFVBQ0hwa0MsS0FBS2trQyxVQUFVaHBDLEtBQU8rb0MsU0FBU0UsVUFBVWUsUUFDekMsTUFDRixJQUFLLE9BQ0hsbEMsS0FBS2trQyxVQUFVaHBDLEtBQU8rb0MsU0FBU0UsVUFBVWdCLEtBQ3pDLE1BQ0YsUUFDRW5sQyxLQUFLa2tDLFVBQVVocEMsVUFBT2dKLE9BYkxsRSxLQUFLa2tDLFVBQVVocEMsS0FBT2tKLEVBbUIzQzlCLFlBQ0YsT0FBUTJELE1BQU12SSxPQUFPc0MsS0FBS2trQyxVQUFVNWhDLGFBRWhDNEIsRUFEQXhHLE9BQU9zQyxLQUFLa2tDLFVBQVU1aEMsT0FJeEJBLFVBQU84QixHQUNKNkIsTUFBTXZJLE9BQU8wRyxLQUVoQnBFLEtBQUtra0MsVUFBVTVoQyxXQUFRNEIsRUFDbkIrL0IsU0FBU2MsZUFBZTV6QyxTQUFTaVQsS0FDbkNwRSxLQUFLOUUsS0FBTytvQyxTQUFTRSxVQUFVQyxNQUMvQnBrQyxLQUFLa2tDLFVBQVU1aEMsTUFBUTJoQyxTQUFTSSxXQUFXZSxnQkFFekNuQixTQUFTZSxlQUFlN3pDLFNBQVNpVCxLQUNuQ3BFLEtBQUs5RSxLQUFPK29DLFNBQVNFLFVBQVVDLE1BQy9CcGtDLEtBQUtra0MsVUFBVTVoQyxNQUFRMmhDLFNBQVNJLFdBQVdnQixXQUV6Q3BCLFNBQVNnQixjQUFjOXpDLFNBQVNpVCxLQUNsQ3BFLEtBQUs5RSxLQUFPK29DLFNBQVNFLFVBQVVDLE1BQy9CcGtDLEtBQUtra0MsVUFBVTVoQyxNQUFRMmhDLFNBQVNJLFdBQVdDLFFBYnhCdGtDLEtBQUtra0MsVUFBVTVoQyxNQUFRNUUsT0FBTzBHLEdBa0JuRDNILFdBQ0YsR0FBSXVELEtBQUt1bEMsR0FBR2pqQyxNQUNWLE9BQVF0QyxLQUFLc0MsT0FDWCxLQUFLMmhDLFNBQVNJLFdBQVdlLGVBQ3ZCLE9BQU9wbEMsS0FBS2trQyxVQUFVK0Isa0JBQ3hCLEtBQUtoQyxTQUFTSSxXQUFXZ0IsVUFDdkIsT0FBT3JsQyxLQUFLa2tDLFVBQVVnQyxhQUN4QixLQUFLakMsU0FBU0ksV0FBV0MsTUFDdkIsT0FBT3RrQyxLQUFLa2tDLFVBQVUxUyxVQUV4QixRQUNFLFlBRUMsR0FBSXh4QixLQUFLdWxDLEdBQUc3a0MsS0FBTSxPQUFPVixLQUFLa2tDLFVBQVV6UyxTQUk3Q2gxQixTQUFNMkgsR0FDUixHQUFJcEUsS0FBS3VsQyxHQUFHampDLE1BQ1YsT0FBUXRDLEtBQUtzQyxPQUNYLEtBQUsyaEMsU0FBU0ksV0FBV2UsZUFDdkJwbEMsS0FBS2trQyxVQUFVK0Isa0JBQW9CN2hDLEVBQ25DLE1BQ0YsS0FBSzYvQixTQUFTSSxXQUFXZ0IsVUFDdkJybEMsS0FBS2trQyxVQUFVZ0MsYUFBZTloQyxFQUM5QixNQUNGLEtBQUs2L0IsU0FBU0ksV0FBV0MsTUFDdkJ0a0MsS0FBS2trQyxVQUFVMVMsVUFBWXB0QixPQU10QnBFLEtBQUt1bEMsR0FBRzdrQyxPQUFNVixLQUFLa2tDLFVBQVV6UyxTQUFXcnRCLEdBR2pEbWhDLFNBQ0YsTUFBTVgsS0FBTzVrQyxLQUNiLE1BQU8sQ0FDRHNDLFlBQ0YsT0FBT3NpQyxLQUFLMXBDLE9BQVMrb0MsU0FBU0UsVUFBVUMsT0FFdEM5aEMsVUFBTzhCLElBQ0MsSUFBTkEsSUFBWXdnQyxLQUFLMXBDLEtBQU8rb0MsU0FBU0UsVUFBVUMsUUFFN0NxQixjQUNGLE9BQU9iLEtBQUsxcEMsT0FBUytvQyxTQUFTRSxVQUFVZSxTQUV0Q08sWUFBU3JoQyxJQUNELElBQU5BLElBQVl3Z0MsS0FBSzFwQyxLQUFPK29DLFNBQVNFLFVBQVVlLFVBRTdDeGtDLFdBQ0YsT0FBT2trQyxLQUFLMXBDLE9BQVMrb0MsU0FBU0UsVUFBVWdCLE1BRXRDemtDLFNBQU0wRCxJQUNFLElBQU5BLElBQVl3Z0MsS0FBSzFwQyxLQUFPK29DLFNBQVNFLFVBQVVnQixRQUtyRDcwQyxhQUFjK29DLFlBQ1pyNUIsS0FBS2trQyxVQUFZdGQsWUFBWTVtQixLQUFLa2tDLFVBQVc3SyxhQUN6Q3I1QixLQUFLa2tDLFVBQVUyQixlQUFpQjdsQyxLQUFLa2tDLFVBQVUwQix1QkFDM0M1bEMsS0FBS2dtQyxZQUlmMTFDLHFCQUFzQmkwQyxnQkFDZHZrQyxLQUFLNmtDLFFBQVFOLFdBQ2Z2a0MsS0FBS2trQyxVQUFVMkIsZUFBaUI3bEMsS0FBS2trQyxVQUFVMEIsdUJBQzNDNWxDLEtBQUtnbUMsWUFJWHBCLFdBQ0YsSUFBSzVrQyxLQUFLOUUsS0FBTSxPQUFPLEtBQ3ZCLE9BQVE4RSxLQUFLOUUsTUFDWCxLQUFLK29DLFNBQVNFLFVBQVVDLE1BQU8sQ0FFN0IsSUFBS3BrQyxLQUFLOUUsT0FBUzhFLEtBQUt2RCxLQUFNLE9BQU8sS0FDckMsSUFBSXhLLFFBQVUsR0FBRytOLEtBQUtra0MsVUFBVXZ5QyxNQUFRLFNBQVcsVUFDakRxTyxLQUFLc21DLGtCQUNFdG1DLEtBQUt2RCxZQUMyQixJQUE5QnVELEtBQUtra0MsVUFBVXRoQyxhQUN4QjNRLFNBQVcsZUFBZStOLEtBQUtra0MsVUFBVXRoQyxtQkFFSixJQUE1QjVDLEtBQUtra0MsVUFBVWp4QyxXQUN4QmhCLFNBQVcsYUFBYStOLEtBQUtra0MsVUFBVWp4QyxZQUVyQytNLEtBQUtra0MsVUFBVXBhLE9BQU03M0IsU0FBVyxTQUFTK04sS0FBS2trQyxVQUFVcGEsUUFHeEQ5cEIsS0FBS2trQyxVQUFVMEIsaUJBQ2pCM3pDLFNBQVcsU0FBUytOLEtBQUtra0MsVUFBVW4wQixTQUVqQy9QLEtBQUtra0MsVUFBVTBCLGdCQUFrQjVsQyxLQUFLa2tDLFVBQVUyQixpQkFDbEQ1ekMsU0FBVyxPQUFPK04sS0FBS2trQyxVQUFVem9DLE1BR25DLElBQUltcEMsS0FBTyxlQUFlM3lDLFdBTTFCLE9BTEkrTixLQUFLa2tDLFVBQVVrQyxVQUFZcG1DLEtBQUtra0MsVUFBVXYxQixNQUM1Q2kyQixNQUFRLElBQUk1a0MsS0FBS2trQyxVQUFVdjFCLFNBQ2xCM08sS0FBS3ZELE9BQ2Rtb0MsTUFBUSxJQUFJNWtDLEtBQUt2RCxTQUVabW9DLEtBR1QsS0FBS1gsU0FBU0UsVUFBVWUsUUFBUyxDQUUvQixJQUFLbGxDLEtBQUtra0MsVUFBVXQ5QixTQUFXNUcsS0FBS2trQyxVQUFVcDlCLE9BQVEsT0FBTyxLQUk3RCxJQUFJN1UsUUFBVSxVQUFVK04sS0FBS2trQyxVQUFVdDlCLGlCQUFpQjVHLEtBQUtra0MsVUFBVXA5QixTQUVuRTlHLEtBQUtra0MsVUFBVXRoQyxhQUNqQjNRLFNBQVcsZUFBZStOLEtBQUtra0MsVUFBVXRoQyxjQUV2QzVDLEtBQUtra0MsVUFBVWwrQixZQUNqQi9ULFNBQVcsY0FBYytOLEtBQUtra0MsVUFBVWwrQixhQUV0Q2hHLEtBQUtra0MsVUFBVWp4QyxXQUNqQmhCLFNBQVcsYUFBYStOLEtBQUtra0MsVUFBVWp4QyxZQUVyQytNLEtBQUtra0MsVUFBVXBhLE9BQU03M0IsU0FBVyxTQUFTK04sS0FBS2trQyxVQUFVcGEsUUFDNUQsSUFBSThhLEtBQU8saUJBQWlCM3lDLFdBRTVCLE9BREkrTixLQUFLa2tDLFVBQVVrQyxXQUFVeEIsTUFBUSxJQUFJNWtDLEtBQUtra0MsVUFBVXYxQixVQUNqRGkyQixLQUlULEtBQUtYLFNBQVNFLFVBQVVnQixLQUFNLENBRTVCLElBQUtubEMsS0FBSzlFLE9BQVM4RSxLQUFLdkQsS0FBTSxPQUFPLEtBQ3JDLElBQUl4SyxRQUFVLFFBQVErTixLQUFLdkQsT0FDdkJ1RCxLQUFLa2tDLFVBQVVwYSxPQUFNNzNCLFNBQVcsU0FBUytOLEtBQUtra0MsVUFBVXBhLFFBR3hEOXBCLEtBQUtra0MsVUFBVTBCLGlCQUNqQjN6QyxTQUFXLFNBQVMrTixLQUFLa2tDLFVBQVVuMEIsU0FFakMvUCxLQUFLa2tDLFVBQVUwQixnQkFBa0I1bEMsS0FBS2trQyxVQUFVMkIsaUJBQ2xENXpDLFNBQVcsT0FBTytOLEtBQUtra0MsVUFBVXpvQyxNQUduQyxJQUFJbXBDLEtBQU8sY0FBYzN5QyxXQUV6QixPQURJK04sS0FBS2trQyxVQUFVa0MsV0FBVXhCLE1BQVEsSUFBSTVrQyxLQUFLa2tDLFVBQVV2MUIsVUFDakRpMkIsS0FHVCxRQUNFLE9BQU8sT0NqYVIsTUFBTUosK0JBQStCK0IsZ0JBRS9CMWYsNEJBQ1QsT0FBT0QsWUFBWTlnQixNQUFNK2dCLGVBQWdCLENBQ3ZDcHJCLEdBQUksZ0JBQ0ppYyxRQUFTLENBQUMsUUFDVmxrQixNQUFPNUQsS0FBSzRQLEtBQUtDLFNBQVMsbUJBQzFCK21DLFNBQVUsQ0FBQyxDQUFFQyxhQUFjLEtBQU1DLGFBQWMsZUFDL0M3NkIsU0FBVSxpREFDVjg2QixlQUFlLEVBQ2ZDLGVBQWUsRUFDZkMsZ0JBQWdCLEVBQ2hCQyxNQUFPLElBQ1BDLE9BQVEsT0FDUkMsUUFBUyxHQUNUQyxhQUFhLEVBQ2JDLFFBQVMsRUFDVEMsUUFBUyxPQUliNTNDLDBCQUEyQmcxQyxTQUFVdHlDLFFBQVUsSUFDN0MsTUFBTTJ5QyxXQUFhWCxTQUFTaDNCLFNBQVNzM0IsVUFDckMsT0FBTyxJQUFJQyx1QkFBdUJJLEtBQU0zeUMsU0FHL0J3eUMsd0JBQ1QsTUFBTyxDQUNMLENBQ0V6eEMsSUFBSyxNQUNMMmIsTUFBTy9lLEtBQUs0UCxLQUFLQyxTQUFTLGFBQzFCbUMsVUFBVSxHQUVaLENBQ0U1TyxJQUFLLE1BQ0wyYixNQUFPL2UsS0FBSzRQLEtBQUtDLFNBQVMsZUFDMUJtQyxVQUFVLElBTWhCdFIsZ0JBQ0UsTUFBTStDLFdBQWF5UyxNQUFNZ08sVUFFekJ6Z0IsS0FBS3V4QyxLQUFPNWtDLEtBQUs0a0MsS0FDakJ2eEMsS0FBS0EsS0FBTzJNLEtBQUs0a0MsS0FBS3Z4QyxLQUN0QkEsS0FBSyt6QyxTQUNIcG5DLEtBQUs0a0MsS0FBS1csR0FBRzdrQyxNQUNaVixLQUFLNGtDLEtBQUtXLEdBQUdqakMsT0FBU3RDLEtBQUs0a0MsS0FBS3RpQyxRQUFVMmhDLFNBQVNJLFdBQVdDLE1BQ2pFanhDLEtBQUtnMEMsTUFDSGgwQyxLQUFLK3pDLFdBQ0pwbkMsS0FBSzRrQyxLQUFLdnhDLEtBQUt3eUMsZUFBaUI3bEMsS0FBSzRrQyxLQUFLdnhDLEtBQUt1eUMsZ0JBQ2xEdnlDLEtBQUtpMEMsUUFBVWowQyxLQUFLK3pDLFVBQVlwbkMsS0FBSzRrQyxLQUFLdnhDLEtBQUt1eUMsZUFDL0N2eUMsS0FBS2swQyxjQUFnQmwwQyxLQUFLZzBDLE9BQVNoMEMsS0FBS2kwQyxRQUd4Q2owQyxLQUFLZ1QsZ0JBQWtCbkcsVUFBVW1HLGdCQUNqQ2hULEtBQUttMEMsbUJBQXFCLENBQ3hCeDRCLFFBQVM5TyxVQUFVbUcsZ0JBQWdCMkksVUFBWWhQLEtBQUs0a0MsS0FBS3Z4QyxLQUFLdVAsV0FDOUR6QyxRQUFTRCxVQUFVbUcsZ0JBQWdCbEcsVUFBWUgsS0FBSzRrQyxLQUFLdnhDLEtBQUt1UCxXQUM5RHZDLEtBQU1ILFVBQVVtRyxnQkFBZ0JoRyxPQUFTTCxLQUFLNGtDLEtBQUt2eEMsS0FBS3VQLFdBQ3hEdEMsUUFBU0osVUFBVW1HLGdCQUFnQi9GLFVBQVlOLEtBQUs0a0MsS0FBS3Z4QyxLQUFLdVAsV0FDOURyQyxTQUFVTCxVQUFVbUcsZ0JBQWdCOUYsV0FBYVAsS0FBSzRrQyxLQUFLdnhDLEtBQUt1UCxZQUU3RDVDLEtBQUs0a0MsS0FBS3Z4QyxLQUFLdVAsYUFDMEMsWUFBeERoVCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsMEJBQzVCdUQsS0FBS20wQyxtQkFBbUJ4NEIsU0FBVSxFQUVsQzNiLEtBQUttMEMsbUJBQW1Ccm5DLFNBQVUsR0FLdEM5TSxLQUFLbzBDLFNBQVcsQ0FDZCxDQUNFejBDLElBQUtpeEMsU0FBU0UsVUFBVUMsTUFDeEJ6MUIsTUFBTy9lLEtBQUs0UCxLQUFLQyxTQUFTLGNBQzFCbUMsU0FBVTVCLEtBQUs0a0MsS0FBS1csR0FBR2pqQyxPQUV6QixDQUNFdFAsSUFBS2l4QyxTQUFTRSxVQUFVZSxRQUN4QnYyQixNQUFPL2UsS0FBSzRQLEtBQUtDLFNBQVMsb0JBQzFCbUMsU0FBVTVCLEtBQUs0a0MsS0FBS1csR0FBR0UsU0FFekIsQ0FDRXp5QyxJQUFLaXhDLFNBQVNFLFVBQVVnQixLQUN4QngyQixNQUFPL2UsS0FBSzRQLEtBQUtDLFNBQVMsbUJBQzFCbUMsU0FBVTVCLEtBQUs0a0MsS0FBS1csR0FBRzdrQyxPQUszQnJOLEtBQUtpekMsVUFBWXJDLFNBQVNJLFdBQzFCaHhDLEtBQUtxMEMsa0JBQW9CLENBQ3ZCemtDLGVBQWdCZ2hDLFNBQVNJLFdBQVdlLGlCQUFtQnBsQyxLQUFLNGtDLEtBQUt0aUMsTUFDakU4RyxVQUFXNjZCLFNBQVNJLFdBQVdnQixZQUFjcmxDLEtBQUs0a0MsS0FBS3RpQyxNQUN2RHpCLE1BQU9vakMsU0FBU0ksV0FBV0MsUUFBVXRrQyxLQUFLNGtDLEtBQUt0aUMsT0FFNUN0QyxLQUFLNGtDLEtBQUt0aUMsUUFBT2pQLEtBQUtxMEMsa0JBQWtCemtDLGdCQUFpQixHQUc5RDVQLEtBQUs2QixnQkFBa0J3L0IsU0FBU2dRLDhCQUNoQyxJQUFLLElBQUk5dUIsRUFBSSxFQUFHQSxFQUFJdmlCLEtBQUs2QixnQkFBZ0I1RCxPQUFRc2tCLElBRTdDdmlCLEtBQUtBLEtBQUs0eUMsb0JBQXNCNXlDLEtBQUs2QixnQkFBZ0IwZ0IsR0FBRzVpQixLQUN4REssS0FBS0EsS0FBSzR5QyxvQkFBc0I1eUMsS0FBSzZCLGdCQUFnQjBnQixHQUFHeWYsV0FDeERoaUMsS0FBS0EsS0FBSzR5QyxvQkFBc0I1eUMsS0FBSzZCLGdCQUFnQjBnQixHQUFHakgsTUFFeER0YixLQUFLNkIsZ0JBQWdCMGdCLEdBQUdoVSxVQUFXLEVBRW5Ddk8sS0FBSzZCLGdCQUFnQjBnQixHQUFHaFUsVUFBVyxFQVV2QyxPQUxBdk8sS0FBS294QyxXQUFhRCx1QkFBdUJDLFdBQVdweUMsS0FBSXN5QyxJQUN0REEsRUFBRS9pQyxTQUFXdk8sS0FBS0EsS0FBSzZ5QyxlQUFpQnZCLEVBQUUzeEMsSUFDbkMyeEMsS0FHRnR4QyxLQUdMdXhDLFdBQ0YsT0FBTzVrQyxLQUFLckQsT0FHZG9hLGtCQUFtQnBMLE1BQ2pCQSxLQUFLNEMsS0FBSyxrQkFBa0J5SSxNQUFNaFgsS0FBSzJuQyxlQUFlaHdDLEtBQUtxSSxPQVMzRDhGLE1BQU1pUixrQkFBa0JwTCxNQUcxQnJiLGNBQWVpRSxPQUNiLE1BQU15eUIsV0FBYXp5QixNQUFNc2YsYUFBYUMsUUFBUSxjQUN4Q3pnQixLQUFPTSxLQUFLaVosTUFBTW9hLFlBQ3hCLEdBQXNCLFNBQWxCM3pCLEtBQUt1MEMsZUFDRDVuQyxLQUFLNGtDLEtBQUtpRCxlQUFleDBDLE1BQy9CMk0sS0FBS2lTLFFBQU8sT0FDUCxDQUNMLEdBQUk1ZSxLQUFLK1AsUUFBUyxDQUNoQixNQUFNL0csU0FDSmhKLEtBQUswSSxTQUFXMUksS0FBSzJJLFFBQ2pCLEdBQUczSSxLQUFLMEksV0FBVzFJLEtBQUsySSxVQUN4QjNJLEtBQUsrUCxRQUNMckssTUFBUTBCLFdBQVc2QixnQkFBZ0JELFVBQ3JDdEQsTUFBTWd0QyxnQkFDUi9sQyxLQUFLNGtDLEtBQUttQixnQkFBaUIsRUFDM0IvbEMsS0FBSzRrQyxLQUFLdm9DLFNBQVd0RCxNQUFNc0QsVUFDdEIyRCxLQUFLNGtDLEtBQUttQixnQkFBaUIsRUFFcEMsR0FBa0IsU0FBZDF5QyxLQUFLNkgsS0FDUCxHQUFLN0gsS0FBS0EsS0FhUixPQUFRQSxLQUFLQSxLQUFLNkgsTUFDaEIsSUFBSyxRQUNIOEUsS0FBSzRrQyxLQUFLVixVQUFVMkIsZUFBZ0IsRUFDcEM3bEMsS0FBSzRrQyxLQUFLVixVQUFVMEIsZ0JBQWlCLEVBQ3JDNWxDLEtBQUs0a0MsS0FBSzFwQyxLQUFPK29DLFNBQVNFLFVBQVVDLE1BQ3BDcGtDLEtBQUs0a0MsS0FBS3RpQyxNQUFRMmhDLFNBQVNJLFdBQVdDLE1BQ3RDdGtDLEtBQUs0a0MsS0FBS25vQyxLQUFPcEosS0FBS0EsS0FBS29KLEtBQzNCdUQsS0FBS2lTLFFBQU8sR0FDWixNQUNGLElBQUssU0FDSGpTLEtBQUs0a0MsS0FBS1YsVUFBVTJCLGVBQWdCLEVBQ3BDN2xDLEtBQUs0a0MsS0FBS1YsVUFBVTBCLGdCQUFpQixFQUNyQzVsQyxLQUFLNGtDLEtBQUsxcEMsS0FBTytvQyxTQUFTRSxVQUFVZ0IsS0FDcENubEMsS0FBSzRrQyxLQUFLbm9DLEtBQU9wSixLQUFLQSxLQUFLb0osS0FDM0J1RCxLQUFLaVMsUUFBTyxRQTFCWjVlLEtBQUtvSSxLQUNQdUUsS0FBSzRrQyxLQUFLVixVQUFVem9DLEdBQUtwSSxLQUFLb0ksR0FDOUJ1RSxLQUFLNGtDLEtBQUtWLFVBQVUyQixlQUFnQixHQUVsQ3h5QyxLQUFLMGMsT0FDUC9QLEtBQUs0a0MsS0FBS1YsVUFBVW4wQixLQUFPMWMsS0FBSzBjLEtBQ2hDL1AsS0FBSzRrQyxLQUFLVixVQUFVMkIsZUFBZ0IsRUFDcEM3bEMsS0FBSzRrQyxLQUFLVixVQUFVMEIsZ0JBQWlCLFNBRWpDNWxDLEtBQUs0a0MsS0FBS29CLFlBQ2hCaG1DLEtBQUtpUyxRQUFPLElBMkJwQjAxQixlQUFnQnB6QyxPQUNkLE1BQU1rTyxPQUFTbE8sTUFBTTRpQixjQUFjNWpCLFFBQVFrUCxPQUMzQyxHQUFLekMsS0FBSzRrQyxLQUFLQSxLQUFmLENBSUEsT0FBUW5pQyxRQUNOLElBQUssWUFDSHlLLGNBQWM0NkIsZ0JBQWdCOW5DLEtBQUs0a0MsS0FBS0EsTUFDeEMsTUFFRixJQUFLLE9BQ0gsQ0FDRSxNQUFNbUQsT0FBUyxHQUNmQSxPQUFPL3NDLFFBQVUsQ0FDZjBCLE1BQU85TSxLQUFLb0MsS0FBS3lLLE1BRW5CaEMsV0FBV29tQyxjQUNULEtBQ0FqeEMsS0FBSzRQLEtBQUtZLE9BQU8saUNBQWtDLENBQ2pEa0MsTUFBT3RDLEtBQUs0a0MsS0FBS0EsT0FFbkJtRCxRQUdKLE1BRUYsSUFBSyxnQkFDSCxDQUNFLE1BQU1BLE9BQVMsR0FDZkEsT0FBTy9zQyxRQUFVLENBQ2YwQixNQUFPOU0sS0FBS29DLEtBQUt5SyxNQUVuQnNyQyxPQUFPcjJDLFFBQVVzTyxLQUFLNGtDLEtBQUs3ckMsTUFBTThqQixPQUNqQ3BpQixXQUFXb21DLGNBQ1QsS0FDQWp4QyxLQUFLNFAsS0FBS1ksT0FBTyxtQ0FBb0MsQ0FDbkQzRCxLQUFNdUQsS0FBSzRrQyxLQUFLN3JDLE1BQU0wRCxLQUN0QjZGLE1BQU90QyxLQUFLNGtDLEtBQUtBLE9BRW5CbUQsUUFHSixNQUVGLElBQUssbUJBQ0gsQ0FDRSxJQUFLcHBDLE9BQU94QyxPQUFPc1YsV0FBV25nQixPQUU1QixZQURBK04sR0FBR0MsY0FBY0MsS0FBSyxzQkFHeEIsTUFBTXdvQyxPQUFTLEdBQ2ZBLE9BQU8vc0MsUUFBVSxDQUNmMEIsTUFBTzlNLEtBQUtvQyxLQUFLeUssTUFFbkIsSUFBSyxNQUFNeEwsS0FBSzBOLE9BQU94QyxPQUFPc1YsV0FDeEJ4Z0IsRUFBRThILE1BQU1ndEMsaUJBQ1ZnQyxPQUFPcjJDLFFBQVVULEVBQUU4SCxNQUFNOGpCLE9BQ3pCcGlCLFdBQVdvbUMsY0FDVCxLQUNBanhDLEtBQUs0UCxLQUFLWSxPQUFPLG1DQUFvQyxDQUNuRDNELEtBQU14TCxFQUFFOEgsTUFBTTBELEtBQ2Q2RixNQUFPdEMsS0FBSzRrQyxLQUFLQSxPQUVuQm1ELFVBVVovbkMsS0FBS3lYLFNBTVBubkIsb0JBQXFCaUUsTUFBTzJsQixVQUMxQixNQUFNelYsT0FBU2xRLE1BQU00aUIsY0FDZjZ3QixNQUFRdmpDLFFBQVF1SSxRQUFRLGVBQ3hCaTdCLFVBQVlELE9BQU96MEMsUUFBUXkwQyxNQUNqQyxHQUFrQixXQUFkQyxVQUVrQixtQkFBaEJ4akMsT0FBT2hJLE9BQ1R1RCxLQUFLNGtDLEtBQUtWLFVBQVUwQixnQkFBa0I1bEMsS0FBSzRrQyxLQUFLVixVQUFVMEIsZUFDdEQ1bEMsS0FBSzRrQyxLQUFLVixVQUFVMEIsaUJBQ3RCNWxDLEtBQUs0a0MsS0FBS1YsVUFBVTJCLGVBQWdCLElBR3BCLGtCQUFoQnBoQyxPQUFPaEksT0FDVHVELEtBQUs0a0MsS0FBS1YsVUFBVTJCLGVBQWlCN2xDLEtBQUs0a0MsS0FBS1YsVUFBVTJCLGNBQ3JEN2xDLEtBQUs0a0MsS0FBS1YsVUFBVTJCLGdCQUN0QjdsQyxLQUFLNGtDLEtBQUtWLFVBQVUwQixnQkFBaUIsVUFHbkM1bEMsS0FBSzRrQyxLQUFLb0IsZ0JBQ1gsQ0FDTCxNQUFNa0MsV0FBYTlmLGFBQWFsTyxVQUM1Qmd1QixXQUFXNWxDLFFBQU80bEMsV0FBVzVsQyxNQUFRNUUsT0FBT3dxQyxXQUFXNWxDLFFBQ3ZENGxDLFdBQVd0bEMsYUFDYnNsQyxXQUFXdGxDLFdBQWFsRixPQUFPd3FDLFdBQVd0bEMsYUFFeENzbEMsV0FBV2h0QyxPQUFNZ3RDLFdBQVdodEMsS0FBT3dDLE9BQU93cUMsV0FBV2h0QyxPQUN6RCxNQUFNaXRDLFNBQVdoZ0IsV0FBV25vQixLQUFLNGtDLEtBQUt2eEMsS0FBTTYwQyxrQkFDdENsb0MsS0FBSzRrQyxLQUFLMTdCLE9BQU9pL0IsVUFFekJub0MsS0FBS2lTLFFBQU8sR0F3QmQxaUIsc0JBQ0UsTUFBTXExQyxLQUFPLElBQUlYLFNBQ2pCLElBQUlPLHVCQUF1QkksS0FBTSxJQUFJM3lCLFFBQU8sSUNoVHpDLE1BQU1nZCxXQUNYMS9CLDBCQUEyQmdGLE1BQU82ekMsUUFFaEM3ekMsTUFBTTBhLGlCQU1OLE1BQU0rWCxXQUFhenlCLE1BQU1zZixhQUFhQyxRQUFRLGNBQ3hDemdCLEtBQU9NLEtBQUtpWixNQUFNb2EsWUFDeEIsR0FBc0IsY0FBbEIzekIsS0FBS28wQyxTQUEwQixDQUVqQyxHQURBbHpDLE1BQU04ekMsbUJBRUg5ekMsTUFBTTRhLGdCQUNxQixJQUFwQjliLEtBQUt1UCxpQkFDYyxJQUFsQnZQLEtBQUtKLFVBQ2QsQ0FDQSxNQUFNZ2IsWUFBY0MsV0FBV3ZTLE9BQU8sQ0FDcEMyc0MseUJBQXlCLElBRXZCcjZCLFFBQ0Y1YSxLQUFLSixTQUFXZ2IsTUFBTW5lLElBQUksYUFDMUJ1RCxLQUFLdVAsV0FBYXFMLE1BQU1uZSxJQUFJLGVBR2MsY0FBMUNGLEtBQUtJLFNBQVNGLElBQUksT0FBUSxjQUM1QnVELEtBQUsxQixPQUFRLEdBR2YsTUFBTWl6QyxLQUFPM1YsV0FBV3NaLGVBQWVsMUMsTUFFbkN1eEMsTUFDRndELE9BQU9JLGNBQWM1RCxXQUVsQixHQUFJdHdDLFVBQVVDLE9BQVEsQ0FHM0IsR0FGQUEsTUFBTTh6QyxrQkFFWSxTQUFkaDFDLEtBQUs2SCxLQUFpQixPQUUxQixJQUFJd0YsS0FDSixNQUFNNmpDLFNBQVcsR0FFakIsR0FBSWx4QyxLQUFLMGMsS0FBTSxDQUNiLE1BQU1BLEtBQU9uZ0IsS0FBS29nQixNQUFNbGdCLElBQUl1RCxLQUFLMGMsTUFDakMsR0FBNkIsU0FBekJBLEtBQUtFLFNBQVNDLE9BQW1CLE9BQ3JDeFAsV0FBYXFQLEtBQUtJLFlBQVk5YyxLQUFLb0ksU0FFbkNpRixLQURTck4sS0FBS0EsS0FDUEEsS0FBS0EsS0FFTHpELEtBQUtnUixNQUFNOVEsSUFBSXVELEtBQUtvSSxJQUc3QixJQUFLaUYsS0FBTSxPQU1YLEdBSkE2akMsU0FBUzluQyxLQUFPaUUsS0FBS2pFLEtBQ2pCcEosS0FBSzBjLE9BQU13MEIsU0FBU3gwQixLQUFPMWMsS0FBSzBjLE1BQ2hDMWMsS0FBS29JLEtBQUk4b0MsU0FBUzlvQyxHQUFLcEksS0FBS29JLElBRWQsVUFBZGlGLEtBQUt4RixLQUFrQixDQUN6QixJQUFLM0csTUFBTTRhLFNBQVUsQ0FDbkIsTUFBTWxCLFlBQWNDLFdBQVd2UyxPQUFPLENBQ3BDMnNDLHlCQUF5QixJQUV2QnI2QixRQUNGczJCLFNBQVN0eEMsU0FBV2diLE1BQU1uZSxJQUFJLGFBQzlCeTBDLFNBQVMzaEMsV0FBYXFMLE1BQU1uZSxJQUFJLGVBR3BDeTBDLFNBQVNqaUMsTUFBUSxRQUNqQmlpQyxTQUFTcnBDLEtBQU8sUUFDOEIsY0FBMUN0TCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsY0FDNUJ5MEMsU0FBUzV5QyxPQUFRLE9BRWQsSUFBa0IsV0FBZCtPLEtBQUt4RixLQUdULE9BRkxxcEMsU0FBU2ppQyxNQUFRLE9BQ2pCaWlDLFNBQVNycEMsS0FBTyxTQUdsQixNQUFNMHBDLEtBQU8zVixXQUFXc1osZUFBZWhFLFVBQ25DSyxNQUNGd0QsT0FBT0ksY0FBYzVELE9BSzNCcjFDLG9CQUNFc0wsUUFDQThRLEtBQ0F0WSxNQVdBLEdBQUt3SCxRQUFRNHRDLGlCQUFiLENBRUEsR0FBSXAxQyxLQUFLd0gsUUFBUWEsUUFBUWk5QixvQkFBb0J4bkMsU0FBUyxTQUFVLENBQzlELE1BQU11M0MsY0FBZ0J6WixXQUFXb0gsV0FBV2hqQyxLQUFLd0gsUUFBUWEsU0FDekRpUSxLQUFLNEMsS0FBSyxvQkFBb0I1QyxLQUFLKzhCLGVBRW5DcjFDLEtBQUt3SCxRQUFRYSxRQUFVZ3RDLGNBRXpCLE9BQU8sR0FHVG41QyxzQkFBdUI4RCxNQUNyQixHQUFLQSxLQUFLaVAsTUFDVixPQUFRalAsS0FBS2lQLE1BQU14RyxlQUNqQixJQUFLLFFBQVMsQ0FFWixJQUFLekksS0FBSzZILE9BQVM3SCxLQUFLb0osS0FBTSxPQUM5QixJQUFJeEssUUFBVSxHQUFHb0IsS0FBSzFCLE1BQVEsU0FBVyxVQUFVMEIsS0FBSzZILGFBQ3REN0gsS0FBS29KLFlBRXdCLElBQXBCcEosS0FBS3VQLGFBQ2QzUSxTQUFXLGVBQWVvQixLQUFLdVAsbUJBRUosSUFBbEJ2UCxLQUFLSixXQUNkaEIsU0FBVyxhQUFhb0IsS0FBS0osWUFFM0JJLEtBQUt5MkIsT0FBTTczQixTQUFXLFNBQVNvQixLQUFLeTJCLFFBQ3BDejJCLEtBQUswYyxPQUFNOWQsU0FBVyxTQUFTb0IsS0FBSzBjLFFBQ3BDMWMsS0FBS29JLEtBQUl4SixTQUFXLE9BQU9vQixLQUFLb0ksTUFDcEMsSUFBSW1wQyxLQUFPLGVBQWUzeUMsV0FFMUIsT0FESW9CLEtBQUtzckMsY0FBYWlHLE1BQVEsSUFBSXZ4QyxLQUFLc3JDLGdCQUNoQ2lHLEtBR1QsSUFBSyxVQUFXLENBRWQsSUFBS3Z4QyxLQUFLdVQsU0FBV3ZULEtBQUt5VCxPQUFRLE9BQ2xDLElBQUk3VSxRQUFVLEdBQUdvQixLQUFLMUIsTUFBUSxTQUFXLFlBQ3ZDMEIsS0FBS3VULGlCQUNJdlQsS0FBS3lULFNBQ1p6VCxLQUFLdVAsYUFBWTNRLFNBQVcsZUFBZW9CLEtBQUt1UCxjQUNoRHZQLEtBQUtKLFdBQVVoQixTQUFXLGFBQWFvQixLQUFLSixZQUM1Q0ksS0FBS3kyQixPQUFNNzNCLFNBQVcsU0FBU29CLEtBQUt5MkIsUUFDeEMsSUFBSThhLEtBQU8saUJBQWlCM3lDLFdBRTVCLE9BRElvQixLQUFLc3JDLGNBQWFpRyxNQUFRLElBQUl2eEMsS0FBS3NyQyxnQkFDaENpRyxLQUlULElBQUssT0FBUSxDQUVYLElBQUt2eEMsS0FBSzZILE9BQVM3SCxLQUFLb0osS0FBTSxPQUM5QixJQUFJeEssUUFBVSxHQUFHb0IsS0FBSzFCLE1BQVEsU0FBVyxVQUFVMEIsS0FBSzZILGFBQ3REN0gsS0FBS29KLE9BSUhwSixLQUFLeTJCLE9BQU03M0IsU0FBVyxTQUFTb0IsS0FBS3kyQixRQUNwQ3oyQixLQUFLMGMsT0FBTTlkLFNBQVcsU0FBU29CLEtBQUswYyxRQUNwQzFjLEtBQUtvSSxLQUFJeEosU0FBVyxPQUFPb0IsS0FBS29JLE1BQ3BDLElBQUltcEMsS0FBTyxjQUFjM3lDLFdBRXpCLE9BRElvQixLQUFLc3JDLGNBQWFpRyxNQUFRLElBQUl2eEMsS0FBS3NyQyxnQkFDaENpRyxPQVFicjFDLHlCQUEwQmdHLElBQUtvVyxNQUU3QixJQUFLLE1BQU0vTyxXQUFXK08sS0FBSzRDLEtBQUssNkJBQzFCM1IsUUFBUTRPLFVBQVVtdEIsb0JBQW9CeG5DLFNBQVMsV0FDakR5TCxRQUFRNE8sVUFBWXlqQixXQUFXb0gsV0FBV3o1QixRQUFRNE8sWUFNdERHLEtBQ0c0QyxLQUFLLGVBQ0xnSyxHQUFHLFNBQVNqb0IsTUFBQUEsYUFBcUIyK0IsV0FBV0MsU0FBUzM2QixTQUN4RG9YLEtBQ0c0QyxLQUFLLGVBQ0xnSyxHQUFHLGFBQWFoa0IsT0FBUzA2QixXQUFXRSxnQkFBZ0I1NkIsU0FHekRoRixxQkFBc0JnZ0IsUUFDcEIsTUFBTTJFLEtBQU8sR0FDUHkwQixLQUFPNTBDLFNBQVM2MEMsaUJBQ3BCcjVCLE9BQ0FzNUIsV0FBV0MsVUFDWCxNQUNBLEdBRUYsS0FBT0gsS0FBS0ksWUFBWTcwQixLQUFLaGpCLEtBQUt5M0MsS0FBS0ssYUFDdkMsT0FBTzkwQixLQUdUM2tCLGtCQUFtQm1NLFNBQ2pCLE1BQU1pUSxLQUFPNVgsU0FBU0MsY0FBYyxPQUNwQzJYLEtBQUt0WCxVQUFZMGEsT0FBT3JULFNBRXhCLElBQUl3WSxLQUFPLEdBRVhBLEtBQU9raUIsV0FBVzZTLGNBQWN0OUIsTUFFaEMsTUFBTXU5QixJQUFNLElBQUlDLE9BQ2QsNkNBQ0EsTUFHRixPQURBL1MsV0FBV2dULG9CQUFvQmwxQixLQUFNZzFCLElBQUtqYSxXQUFXb2EsYUFDOUMxOUIsS0FBS3RYLFVBR2Q5RSx5QkFBMEJvYyxNQUN4QkEsS0FDRzRDLEtBQUssZUFDTGdLLEdBQUcsU0FBU2pvQixNQUFBQSxhQUFxQjIrQixXQUFXQyxTQUFTMzZCLFNBQ3hEb1gsS0FDRzRDLEtBQUssZUFDTGdLLEdBQUcsYUFBYWhrQixPQUFTMDZCLFdBQVdFLGdCQUFnQjU2QixTQUd6RGhGLHVCQUF3QmdGLE9BQ3RCLE1BQU1ULEVBQUlTLE1BQU00aUIsY0FDVnZCLEVBQUk5aEIsRUFBRStMLGNBQWMsZUFDcEJ4TSxLQUFPNEssVUFBVW5LLEVBQUVQLFNBQ3pCRixLQUFLbzBDLFNBQVcsWUFDaEJwMEMsS0FBS3UwQyxTQUFXLE9BQ2hCdjBDLEtBQUt5MkIsS0FBTyxLQUdWbFUsRUFBRXJpQixTQUNGcWlCLEVBQUVyaUIsUUFBUSsxQyxVQUNhLGdCQUF2QjF6QixFQUFFcmlCLFFBQVErMUMsV0FFVmoyQyxLQUFLeTJCLEtBQU9sVSxFQUFFcmlCLFFBQVErMUMsVUFFeEJqMkMsS0FBS3NyQyxZQUFjN3FDLEVBQUVQLFFBQVFvckMsWUFBYzdxQyxFQUFFeWpCLFVBQVksS0FDekRoakIsTUFBTW9mLGNBQWNFLGFBQWFneEIsUUFBUSxhQUFjbHhDLEtBQUtDLFVBQVVQLE9BR3hFOUQsbUJBQW9CNmQsTUFBT204QixJQUFLcnVDLEtBQU1qSixRQUFTd0ssTUFDN0MsTUFBTXBKLEtBQU8sQ0FDWEMsSUFBSyxDQUFDLGFBQ05DLFFBQVMsQ0FBRStPLE1BQU9wSCxNQUNsQjR1QixLQUFNLGNBQ05uNEIsT0FBTyxFQUNQOEssTUFHSTRpQyxRQUFVcHRDLFFBQVF1M0MsU0FBUyxXQUNqQyxJQUFLLE1BQU1wOEIsU0FBU3E4QixNQUFNQyxLQUFLckssU0FBVSxDQUN2QyxJQUFLcnNDLElBQUttSyxPQUFTaVEsTUFBTSxHQUFHblIsTUFBTSxLQUN0QixTQUFSakosTUFBZ0JLLEtBQUt5MkIsS0FBTzNzQixPQUNwQixVQUFSbkssVUFBb0MsSUFBVm1LLFFBQzVCQSxPQUFRLEVBQ1I5SixLQUFLMUIsTUFBZ0IsQ0FBQyxTQUFTUixTQUFTK0osS0FBS1ksZ0JBRS9DekksS0FBS0UsUUFBUVAsS0FBT21LLE1BR3RCLElBQUkzSixNQUNKLE1BQU1vUCxXQUFhMUMsVUFBVXlwQyxpQkFBaUJ0MkMsS0FBS0UsUUFBUXFQLFlBRTNELE9BQVExSCxLQUFLWSxlQUNYLElBQUssUUFBUyxDQUNaLElBQUk4dEMsVUFBWXYyQyxLQUFLRSxRQUFRa0osS0FFM0IsQ0FBQyxhQUFjLFlBQWEsU0FBVSxXQUFXdEwsU0FDL0NrQyxLQUFLRSxRQUFRMkgsTUFBTVksaUJBR0ssUUFBdEJ6SSxLQUFLRSxRQUFRa0osT0FDZm10QyxVQUFZaDZDLEtBQUs0UCxLQUFLQyxTQUFTLGNBRVAsUUFBdEJwTSxLQUFLRSxRQUFRa0osT0FDZm10QyxVQUFZaDZDLEtBQUs0UCxLQUFLQyxTQUFTLGlCQUlqQyxDQUFDLFNBQVUsT0FBUSxpQkFBa0IsbUJBQW1CdE8sU0FDdERrQyxLQUFLRSxRQUFRMkgsTUFBTVksaUJBR3JCOHRDLFVBQVkxOEIsY0FBYzI4Qix1QkFDeEJ4MkMsS0FBS0UsUUFBUWtKLE9BQ1prUyxPQUVMbmIsTUFBUTVELEtBQUs0UCxLQUFLWSxPQUNoQixpQkFBa0IvTSxLQUFLRSxRQUFRcVAsV0FBa0IsT0FBTCxLQUN6Q3ZQLEtBQUtFLFFBQVFOLFNBQWdCLFFBQUwsS0FFM0IsQ0FDRTJQLFdBQ0EzUCxTQUFVSSxLQUFLRSxRQUFRTixTQUN2QndKLEtBQU1tdEMsWUFHVixNQUVGLElBQUssVUFDSHAyQyxNQUFRNUQsS0FBSzRQLEtBQUtZLE9BQ2hCLG1CQUFvQi9NLEtBQUtFLFFBQVFxUCxXQUFrQixPQUFMLEtBQzNDdlAsS0FBS0UsUUFBUU4sU0FBZ0IsUUFBTCxLQUUzQixDQUNFMlAsV0FDQTNQLFNBQVVJLEtBQUtFLFFBQVFOLFNBQ3ZCNlQsT0FBUXpULEtBQUtFLFFBQVF1VCxPQUNyQkYsT0FBUXZULEtBQUtFLFFBQVFxVCxTQUd6QixNQUNGLElBQUssT0FDSHBULE1BQVE1RCxLQUFLNFAsS0FBS1ksT0FDaEIsZ0JBQWlCL00sS0FBS0UsUUFBUXFQLFdBQWtCLE9BQUwsS0FDeEN2UCxLQUFLRSxRQUFRTixTQUFnQixRQUFMLEtBRTNCLENBQ0UyUCxXQUNBM1AsU0FBVUksS0FBS0UsUUFBUU4sU0FDdkJ3SixLQUFNcEosS0FBS0UsUUFBUWtKLE9BUXRCQSxLQUVFcEosS0FBS0UsUUFBUW9yQyxhQUFjLEVBRGhDdHJDLEtBQUtvSixLQUFPakosTUFHZCxNQUFNTSxFQUFJQyxTQUFTQyxjQUFjLEtBQ2pDRixFQUFFTixNQUFRNUQsS0FBS29DLEtBQUtxaEIsS0FBT2hnQixLQUFLb0osS0FBT2pKLE1BQ3ZDTSxFQUFFRyxVQUFVQyxPQUFPYixLQUFLQyxLQUN4QixJQUFLLE1BQU9hLEVBQUc3QixLQUFNRixPQUFPZ0MsUUFBUWYsS0FBS0UsU0FDdkNPLEVBQUVQLFFBQVFZLEdBQUs3QixFQVNqQixPQVBBd0IsRUFBRWcyQyxXQUFZLEVBQ2RoMkMsRUFBRU8sVUFBWSxHQUNaaEIsS0FBSzFCLE1BQVEsbUNBQXFDLHdCQUM5QjBCLEtBQUt5MkIsMEJBQTBCejJCLEtBQUt5MkIsYUFDeER6MkIsS0FBS29KLE9BR0EzSSxFQVNUdkUsc0JBQXVCZ0YsT0FDckIsTUFBTXRDLFFBQVVzQyxNQUFNNGlCLGNBQWM1akIsUUFTcEMsR0FQSXRCLFFBQVEyUSxhQUNWM1EsUUFBUTJRLFdBQWFzSyxjQUFjWSxrQkFBa0I3YixRQUFRMlEsYUFNM0RoVCxLQUFLb0MsS0FBS3FoQixLQUFNLENBQ2xCLEdBQUkvZSxVQUFVQyxPQUFRLENBQ2hCdEMsUUFBUTBzQyxjQUFhMXNDLFFBQVEwYyxNQUFRcGEsTUFBTTRpQixjQUFjSSxXQUM3RCxNQUFNcXRCLFdBQWFYLFNBQVNoM0IsU0FBU2hiLFNBR3JDLFlBRm1CLElBQUl1eUMsdUJBQXVCSSxNQUNuQzN5QixRQUFPLEdBR3BCLEdBQUl0VCxPQUFPeEMsT0FBT3NWLFdBQVduZ0IsT0FDM0IsSUFBSyxNQUFNaUwsU0FBU29DLE9BQU94QyxPQUFPc1YsV0FDaEMsT0FBUXhmLFFBQVFxUSxPQUNkLElBQUssUUFDSCxHQUNFLENBQ0UsU0FDQSxPQUNBLGlCQUNBLG1CQUNBblIsU0FBU2MsUUFBUWlKLEtBQUtZLGVBRXhCLE9BQU9TLE1BQU14RCxNQUFNZ3hDLG9CQUNqQjkzQyxRQUFRd0ssS0FDUmxJLE1BQU00YSxTQUNObGQsU0FHSixHQUFJLENBQUMsU0FBU2QsU0FBU2MsUUFBUWlKLEtBQUtZLGVBQ2xDLE9BQU9TLE1BQU14RCxNQUFNbVcsV0FBV2pkLFFBQVNzQyxNQUFNNGEsU0FBVWxkLFNBRXpELEdBQ0UsQ0FBQyxhQUFjLFlBQWEsU0FBVSxXQUFXZCxTQUMvQ2MsUUFBUWlKLEtBQUtZLGVBR2YsT0FBT1MsTUFBTXhELE1BQU1peEMsZUFDakIvM0MsUUFBUXdLLEtBQ1JsSSxNQUFNNGEsU0FDTmxkLFNBR0osTUFFRixJQUFLLFVBQ0gyVCxhQUFhakssT0FBT1ksTUFBTXhELE1BQU1zRCxTQUFVcEssUUFBUyxDQUNqRDhSLFlBQWF4UCxNQUFNNGEsV0FFckIsTUFHRixJQUFLLE9BQ0gsT0FBTzVTLE1BQU14RCxNQUFNeVcsWUFBWXZkLFFBQVNzQyxNQUFNNGEsZUFPcEQsR0FBSXZmLEtBQUtvQyxLQUFLcUIsS0FBS1UsU0FBU3dkLFdBQVdsZSxXQUMvQjRoQixRQUFRbEQsSUFDWm5pQixLQUFLb0MsS0FBS3FCLEtBQUtVLFNBQVN3ZCxVQUFVbGUsS0FBS3VOLE1BQU12TyxLQUFJL0IsTUFBQUEsSUFDL0MsR0FBSWdDLEVBQUVtSyxPQUFTeEssUUFBUXdLLEtBQU0sQ0FDM0IsTUFBTTZGLE1BQVEsSUFBSXBDLFVBQ2xCb0MsTUFBTXM4QixVQUFZdHNDLEVBQUVlLEtBQUtBLEtBQUs0bUIsV0FDeEIzWCxNQUFNclMsT0FDWnFTLE1BQU02TCxZQUVSLE9BQU8sV0FHTixHQUFJdmUsS0FBS29DLEtBQUtxaEIsS0FBTSxDQUN6QixNQUFNMDBCLE9BQVMsQ0FDYi9zQyxRQUFTLENBQ1AwQixNQUFPOU0sS0FBS29DLEtBQUt5SyxPQUdyQmhDLFdBQVdvbUMsY0FDVCxLQUNBanhDLEtBQUs0UCxLQUFLWSxPQUFPLGlDQUFrQyxDQUNqRGtDLGFBQWMyaEMsU0FBU2gzQixTQUFTaGIsVUFBVTJ5QyxPQUU1Q21ELGFBSUQsQ0FDTCxNQUFNL3NDLFFBQVVwSixZQUFZcUosYUFDdEJsQyxNQUFRbkgsWUFBWXE0QyxnQkFBZ0JqdkMsU0FDMUMsR0FBSWpDLE1BQ0YsT0FBUTlHLFFBQVFxUSxPQUNkLElBQUssUUFDSCxHQUNFLENBQUMsU0FBVSxPQUFRLGlCQUFrQixtQkFBbUJuUixTQUN0RGMsUUFBUWlKLEtBQUtZLGVBR2YsT0FBTy9DLE1BQU1neEMsb0JBQ1g5M0MsUUFBUXdLLEtBQ1JsSSxNQUFNNGEsU0FDTmxkLFNBR0osR0FBSSxDQUFDLFNBQVNkLFNBQVNjLFFBQVFpSixLQUFLWSxlQUNsQyxPQUFPL0MsTUFBTW1XLFdBQVdqZCxRQUFTc0MsTUFBTTRhLFNBQVVsZCxTQUVuRCxHQUNFLENBQUMsYUFBYyxZQUFhLFNBQVUsV0FBV2QsU0FDL0NjLFFBQVFpSixLQUFLWSxlQUdmLE9BQU8vQyxNQUFNaXhDLGVBQWUvM0MsUUFBUXdLLEtBQU1sSSxNQUFNNGEsU0FBVWxkLFNBRTVELE1BRUYsSUFBSyxVQUNIMlQsYUFBYWpLLE9BQU81QyxNQUFNMEMsR0FBSXhKLFFBQVMsQ0FDckM4UixZQUFheFAsTUFBTTRhLFdBU3JCLE1BR0YsSUFBSyxPQUNILE9BQU9wVyxNQUFNeVcsWUFBWXZkLFFBQVNzQyxNQUFNNGEsZUFLeEN2ZixLQUFLb0MsS0FBS3FCLEtBQUtVLFNBQVN3ZCxXQUFXbGUsV0FDL0I0aEIsUUFBUWxELElBQ1puaUIsS0FBS29DLEtBQUtxQixLQUFLVSxTQUFTd2QsVUFBVWxlLEtBQUt1TixNQUFNdk8sS0FBSS9CLE1BQUFBLElBQy9DLEdBQUlnQyxFQUFFbUssT0FBU3hLLFFBQVF3SyxLQUFNLENBQzNCLE1BQU02RixNQUFRLElBQUlwQyxVQUNsQm9DLE1BQU1zOEIsVUFBWXRzQyxFQUFFZSxLQUFLQSxLQUFLNG1CLFdBQ3hCM1gsTUFBTXJTLE9BQ1pxUyxNQUFNNkwsWUFFUixPQUFPLE1BSVg5TyxHQUFHQyxjQUFjQyxLQUNmM1AsS0FBSzRQLEtBQUtDLFNBQVMsaUNDL2hCeEIsTUFBTTJRLGlCQUFpQjg1QixLQUU1QnBtQyxZQUFhelEsS0FBTTgyQyxTQUVqQixHQUFJOTJDLEtBQUs2SCxRQUFRcEssT0FBT281QyxLQUFLRSxrQkFBb0JELFNBQVNFLFNBTXhELE9BQU8sSUFBSXY1QyxPQUFPbzVDLEtBQUtFLGdCQUFnQi8yQyxLQUFLNkgsTUFBTTdILEtBQU0sQ0FDakRnM0MsVUFBVSxLQUNaRixlQUdpQixJQUFiOTJDLEtBQUs4SyxNQUNJLFVBQWQ5SyxLQUFLNkgsS0FDUDdILEtBQUs4SyxJQUFNLDhDQUNZLFVBQWQ5SyxLQUFLNkgsS0FDZDdILEtBQUs4SyxJQUFNLHVDQUNZLFdBQWQ5SyxLQUFLNkgsS0FDZDdILEtBQUs4SyxJQUFNLHFCQUNZLFdBQWQ5SyxLQUFLNkgsT0FDZDdILEtBQUs4SyxJQUFNLHdCQUlmMkgsTUFBTXpTLEtBQU04MkMsU0FHSEcsMEJBQ1QsTUFBTyxnREFHRXRmLG1CQUNULE1BQU8sQ0FDTHVmLFlBQWEsU0FRakJqNkMscUJBQXNCazZDLFdBQVlDLFVBQVcsR0FDM0MsSUFDSXgwQyxTQUNBNGdDLFNBRkE2VCxhQUFlLEdBR25CLFFBQXFDLElBQTFCdjNDLEtBQUt3QixLQUFLNjFDLFlBQ25CRSxhQUFlLENBQ2IsQ0FBQyxhQUFlRixhQUFleHFDLEtBQUszTSxLQUFLQSxLQUFLc0IsS0FBSzYxQyxrQkFFaEQsR0FBa0IsV0FBZHhxQyxLQUFLOUUsTUFBc0J1dkMsVUEyRS9CLEdBQWtCLFVBQWR6cUMsS0FBSzlFLE9BQXFCdXZDLFNBQVUsQ0FDN0MsSUFBSWo3QyxPQUFRLEVBMENaLEdBekNtQixXQUFmZzdDLGFBQ0d4cUMsS0FBSzNNLEtBQUtBLEtBQUsrckIsV0FBV3BwQixPQU03QjAwQyxhQUFlLENBQ2IsMEJBQTBCLEVBQzFCLDJCQUEyQixFQUMzQiw0QkFBNEIsRUFDNUIsMkJBQTJCLEVBQzNCLHNCQUF1QixHQUN2Qmp1QyxLQUFNdUQsS0FBSzNNLEtBQUtBLEtBQUttK0IsV0FWbEJ4eEIsS0FBSzNNLEtBQUtBLEtBQUsrckIsV0FBV2xwQixRQUV4QjJnQyxVQUFXLEVBRGhCNWdDLFVBQVcsRUFZZnpHLE9BQVEsR0FHUyxhQUFmZzdDLGFBQ0d4cUMsS0FBSzNNLEtBQUtBLEtBQUsrckIsV0FBV25wQixVQUk3QjRnQyxVQUFXLEVBQ1g1Z0MsVUFBVyxJQUpYNGdDLFVBQVcsRUFDWDVnQyxVQUFXLEdBS2J6RyxPQUFRLEdBR1MsWUFBZmc3QyxhQUNHeHFDLEtBQUszTSxLQUFLQSxLQUFLK3JCLFdBQVdscEIsU0FJN0IyZ0MsVUFBVyxFQUNYNWdDLFVBQVcsSUFKWDRnQyxVQUFXLEVBQ1g1Z0MsVUFBVyxHQUtiekcsT0FBUSxHQUdOQSxNQUFPLENBRVQsR0FBSXlHLFNBQVUsQ0FDWnkwQyxhQUFlLENBQ2IsNEJBQTRCLEVBQzVCLDJCQUEyQixFQUMzQiwwQkFBMEIsRUFDMUIsMkJBQTJCLEdBRTdCLE1BQU1sVSxNQUFRcG1CLFNBQVNxbUIsaUJBQ3JCejJCLEtBQUszTSxLQUFLQSxLQUFLbStCLFVBQ2Y1aEMsS0FBSzRQLEtBQUtDLFNBQVN0TSxLQUFLK0csNkJBRTFCd3dDLGFBQWFqdUMsS0FBTys1QixNQUFNLzVCLEtBQzFCaXVDLGFBQWFsWixVQUFZZ0YsTUFBTWhGLFVBQy9Ca1osYUFBYSx1QkFBeUJsVSxNQUFNcGMsZUFFOUMsR0FBSXljLFNBQVUsQ0FDWjZULGFBQWUsQ0FDYiw0QkFBNEIsRUFDNUIsMkJBQTJCLEVBQzNCLDBCQUEwQixFQUMxQiwyQkFBMkIsR0FFN0IsTUFBTWxVLE1BQVFwbUIsU0FBU3FtQixpQkFDckJ6MkIsS0FBSzNNLEtBQUtBLEtBQUttK0IsVUFDZjVoQyxLQUFLNFAsS0FBS0MsU0FBU3RNLEtBQUtnSCw0QkFFMUJ1d0MsYUFBYWp1QyxLQUFPKzVCLE1BQU0vNUIsS0FDMUJpdUMsYUFBYWxaLFVBQVlnRixNQUFNaEYsVUFDL0JrWixhQUFhLHVCQUF5QmxVLE1BQU1wYyx1QkF2R2hELEdBNUNtQixTQUFmb3dCLGFBT0FFLGFBTkcxcUMsS0FBSzNNLEtBQUtBLEtBQUsrckIsV0FBV3ZvQixLQU1kLENBQ2Isd0JBQXdCLEdBTlgsQ0FDYix3QkFBd0IsRUFDeEIsd0JBQXdCLElBU1gsU0FBZjJ6QyxhQU9BRSxhQU5HMXFDLEtBQUszTSxLQUFLQSxLQUFLK3JCLFdBQVd0b0IsS0FNZCxDQUNiLHdCQUF3QixHQU5YLENBQ2Isd0JBQXdCLEVBQ3hCLHdCQUF3QixJQVNYLFlBQWYwekMsYUFRQUUsYUFQRzFxQyxLQUFLM00sS0FBS0EsS0FBSytyQixXQUFXNW9CLFFBT2QsQ0FDYiwyQkFBMkIsRUFDM0IsMkJBQTRCLEtBQzVCLDRCQUE2QixLQUM3Qix3QkFBeUIsS0FDekIseUJBQTBCLE1BWGIsQ0FDYix3QkFBd0IsRUFDeEIseUJBQXlCLEVBQ3pCLDJCQUEyQixJQWFkLFVBQWZnMEMsWUFBeUMsU0FBZkEsV0FBdUIsQ0FDbkQsSUFBSUcsWUFDZSxVQUFmSCxZQUEyQnhxQyxLQUFLM00sS0FBS0EsS0FBSytyQixXQUFXaHBCLFFBQ3ZEdTBDLGFBQWMsR0FFRyxVQUFmSCxZQUEwQnhxQyxLQUFLM00sS0FBS0EsS0FBSytyQixXQUFXaHBCLFFBQ3REdTBDLGFBQWMsR0FFRyxTQUFmSCxZQUEwQnhxQyxLQUFLM00sS0FBS0EsS0FBSytyQixXQUFXL29CLE9BQ3REczBDLGFBQWMsR0FFRyxTQUFmSCxZQUF5QnhxQyxLQUFLM00sS0FBS0EsS0FBSytyQixXQUFXL29CLE9BQ3JEczBDLGFBQWMsR0FHZEQsYUFERUMsWUFDYSxDQUNiLHlCQUF5QixFQUN6Qix3QkFBd0IsRUFDeEIsMkJBQTJCLEVBQzNCLHdCQUF3QixFQUN4Qix3QkFBd0IsRUFDeEIsd0JBQXdCLEdBR1gsQ0FDYix5QkFBeUIsRUFDekIsd0JBQXdCLEdBd0doQyxHQXRCbUIsWUFBZkgsYUFFQUUsYUFERTFxQyxLQUFLM00sS0FBS0EsS0FBSytyQixXQUFXb3JCLFlBQ2IsQ0FDYiwyQkFBMkIsRUFDM0IsNEJBQTRCLEVBQzVCLDJCQUEyQixFQUMzQiwwQkFBMEIsRUFDMUIsc0JBQXVCLEdBQ3ZCL3RDLEtBQU11RCxLQUFLM00sS0FBS0EsS0FBS20rQixXQUdSLENBQ2IsMkJBQTJCLEVBQzNCLzBCLEtBQ0V1RCxLQUFLM00sS0FBS0EsS0FBSyttQixlQUNmLEtBQ0FwYSxLQUFLM00sS0FBS0EsS0FBS20rQixVQUNmLE1BS0pwL0IsT0FBT0QsS0FBS3U0QyxjQUFjcDVDLE9BQVMsRUFBRyxDQUV4QyxhQURtQjBPLEtBQUtrSixPQUFPd2hDLGNBRTFCLENBQ0wsTUFBTUUsU0FBVyxtQkFBbUJKLGFBQzlCSyxXQUFhN3FDLEtBQUszTSxLQUFLQSxLQUFLK3JCLFdBQVdvckIsa0JBQ3ZDeHFDLEtBQUtrSixPQUFPLENBQUUsQ0FBQzBoQyxVQUFXQyxZQUFhanZDLE1BQUs4RSxNQUN6Q0EsUUFLYm9xQyxZQUFhTixZQUNYLE9BQU94cUMsS0FBSytxQyxnQkFBZ0IsYUFBY1AsWUFHeENuVixnQkFDRixPQUFJcjFCLEtBQUszTSxLQUFLQSxLQUFLK3JCLFdBQVd0cEIsUUFDckJrSyxLQUFLM00sS0FBS0EsS0FBS20rQixVQUVqQnh4QixLQUFLdkQsS0FHZG5NLGlCQUFrQkwsTUFDaEIsTUFBSSxlQUFnQitQLEtBQUt1VCxZQUFvQnZULEtBQUt1VCxNQUFNMFgsV0FBV2g3QixNQUMxRCxlQUFnQitQLFdBQW1CQSxLQUFLaXJCLFdBQVdoN0IsV0FBdkQsRUFJUFYsd0JBQXlCaWlDLFVBQVdwWCxnQkFDbEMsSUFBS0EsZUFDSCxNQUFPLENBQ0wzZCxLQUFNKzBCLFVBQ05wWCxlQUFnQixHQUNoQm9YLFdBR0osTUFBTXdaLGNBQWdCLElBQUk3QixPQUN4QixLQUFPajhCLGNBQWMrOUIsWUFBWTd3QixnQkFBa0IsbUJBQ25ELEtBRUloTixNQUFRb2tCLFVBQVVwa0IsTUFBTTQ5QixlQUM5QixPQUFJNTlCLE1BQ0ssQ0FDTDNRLEtBQU0yUSxNQUFNLEdBQ1pnTixlQUFnQmhOLE1BQU0sR0FDdEJva0IsVUFBV3BrQixNQUFNLElBR2QsQ0FDTDNRLEtBQU0yZCxlQUFpQixLQUFPb1gsVUFBWSxJQUMxQ3BYLGVBQ0FvWCxXQUlKamlDLDBCQUEyQm1SLE1BQ3pCLEdBQUlBLGdCQUFnQjBQLFVBQ2xCLEdBQUkxUCxLQUFLck4sS0FBS0EsTUFBTStyQixZQUFZdHBCLFFBQzlCLE9BQU80SyxLQUFLck4sS0FBS0EsS0FBS20rQixlQUd4QixHQUFJOXdCLEtBQUtyTixLQUFLK3JCLFlBQVl0cEIsUUFDeEIsT0FBTzRLLEtBQUtyTixLQUFLbStCLFVBR3JCLE9BQU85d0IsS0FBS2pFLEtBR2RsTixpQkFBa0JtUixNQUNoQixPQUFJQSxnQkFBZ0IwUCxXQUNBLFVBQWQxUCxLQUFLeEYsT0FBcUJ3RixLQUFLck4sS0FBS0EsS0FBSytyQixZQUFZdHBCLFVBR2xELENBQ0xsRyxLQUFLNFAsS0FBS0MsU0FBUyxvQkFBb0IzRCxjQUN2QyxPQUNBM0ssU0FBU2lmLFNBQVMwb0IsbUJBQW1CcDRCLE1BQU01RSxpQkFHM0IsVUFBZDRFLEtBQUt4RixPQUFxQndGLEtBQUtyTixLQUFLK3JCLFlBQVl0cEIsVUFDN0MsQ0FDTGxHLEtBQUs0UCxLQUFLQyxTQUFTLG9CQUFvQjNELGNBQ3ZDLE9BQ0EzSyxTQUFTaWYsU0FBUzBvQixtQkFBbUJwNEIsTUFBTTVFLGVBSWpEeEwsNkJBQ0UsR0FBa0IsVUFBZDBQLEtBQUs5RSxLQUFrQixPQUMzQixNQUFNd3ZDLGFBQWUsR0F5RHJCLE9BeERJMXFDLEtBQUszTSxLQUFLQSxLQUFLK3JCLFdBQVdwcEIsUUFFdkJnSyxLQUFLM00sS0FBS0EsS0FBSytyQixXQUFXdHBCLFVBQzdCa0ssS0FBSzNNLEtBQUtBLEtBQUsrckIsV0FBV3RwQixTQUFVLEVBQ3BDNDBDLGFBQWEsNEJBQTZCLEdBS3pDMXFDLEtBQUszTSxLQUFLQSxLQUFLK3JCLFdBQVducEIsVUFDMUIrSixLQUFLM00sS0FBS0EsS0FBSytyQixXQUFXbHBCLFVBRTNCOEosS0FBSzNNLEtBQUtBLEtBQUsrckIsV0FBV25wQixVQUFXLEVBQ3JDeTBDLGFBQWEsNkJBQThCLElBSzNDMXFDLEtBQUszTSxLQUFLQSxLQUFLK3JCLFdBQVducEIsVUFDeEIrSixLQUFLM00sS0FBS0EsS0FBSyttQixnQkFBb0QsS0FBbENwYSxLQUFLM00sS0FBS0EsS0FBSyttQixpQkFFbERwYSxLQUFLM00sS0FBS0EsS0FBSyttQixlQUFpQnhxQixLQUFLNFAsS0FBS0MsU0FDeEN0TSxLQUFLK0csNEJBRVB3d0MsYUFBYSx1QkFBeUI5NkMsS0FBSzRQLEtBQUtDLFNBQzlDdE0sS0FBSytHLDhCQU1QOEYsS0FBSzNNLEtBQUtBLEtBQUsrckIsV0FBV2xwQixTQUN4QjhKLEtBQUszTSxLQUFLQSxLQUFLK21CLGdCQUFvRCxLQUFsQ3BhLEtBQUszTSxLQUFLQSxLQUFLK21CLGlCQUVsRHBhLEtBQUszTSxLQUFLQSxLQUFLK21CLGVBQWlCeHFCLEtBQUs0UCxLQUFLQyxTQUN4Q3RNLEtBQUtnSCwyQkFFUHV3QyxhQUFhLHVCQUF5Qjk2QyxLQUFLNFAsS0FBS0MsU0FDOUN0TSxLQUFLZ0gsOEJBSUw2RixLQUFLM00sS0FBS0EsS0FBSytyQixXQUFXbnBCLFdBQzVCK0osS0FBSzNNLEtBQUtBLEtBQUsrckIsV0FBV25wQixVQUFXLEVBQ3JDeTBDLGFBQWEsNkJBQThCLEdBRXpDMXFDLEtBQUszTSxLQUFLQSxLQUFLK3JCLFdBQVdscEIsVUFDNUI4SixLQUFLM00sS0FBS0EsS0FBSytyQixXQUFXbHBCLFNBQVUsRUFDcEN3MEMsYUFBYSw0QkFBNkIsSUFJMUN0NEMsT0FBT0QsS0FBS3U0QyxjQUFjcDVDLE9BQVMsU0FDL0IwTyxLQUFLa0osT0FBT3doQyxjQUdiQSxhQVdUSyxnQkFBaUJsNkIsSUFBSzI1QixZQUNmeHFDLEtBQUszTSxLQUFLQSxLQUFLd2QsT0FBTTdRLEtBQUszTSxLQUFLQSxLQUFLd2QsS0FBTyxJQUVoRCxPQURzQjdRLEtBQUszTSxLQUFLQSxLQUFLd2QsS0FBS3RULFFBQVFpdEMsYUFDN0IsRUFJdkJsNkMsNkJBQ01WLEtBQUtJLFNBQVNGLElBQUksT0FBUSxjQUFnQkYsS0FBS29DLEtBQUtxaEIsUUFDakRyVCxLQUFLM00sS0FBS0EsS0FBSzIzQixhQUNaaHJCLEtBQUtrSixPQUFPLENBQUUsYUFBYyxXQUU5QmxKLEtBQUtrSixPQUFPLENBQUUsMkJBQTJCLEtBSW5ENVksK0JBQ01WLEtBQUtJLFNBQVNGLElBQUksT0FBUSxjQUFnQkYsS0FBS29DLEtBQUtxaEIsUUFDakRyVCxLQUFLM00sS0FBS0EsS0FBSzIzQixhQUNaaHJCLEtBQUtrSixPQUFPLENBQUUsYUFBYyxXQUU5QmxKLEtBQUtrSixPQUFPLENBQUUsMkJBQTJCLEtBSS9DNjJCLHVCQUNGLE9BQU8vL0IsS0FBSys3QixZQUFZLGdCQUcxQnpyQyxxQkFBc0Jzc0IsU0FBVXN1QixpQkFBa0IsR0FDaEQsTUFBTTVNLFdBQWF0K0IsS0FBSys3QixZQUFZbmYsVUFDOUJuZ0IsS0FBTyxjQUFjbWdCLFdBRVgsZUFBYkEsVUFBMEMsY0FBYkEsVUFDN0IwaEIsWUFDRDRNLGdCQU1zQixpQkFBYnR1QixTQUNMaHRCLEtBQUtJLFNBQVNGLElBQUksT0FBUSxjQUFnQkYsS0FBS29DLEtBQUtxaEIsV0FDaERyVCxLQUFLa0osT0FBTyxDQUFFLENBQUN6TSxNQUFPNmhDLFlBRTVCai9CLEdBQUdDLGNBQWN3UixLQUFLLDJCQUViOVEsS0FBS2tKLE9BQU8sQ0FBRSxDQUFDek0sTUFBTzZoQyxrQkFWM0J0K0IsS0FBS2tKLE9BQU8sQ0FDaEIsQ0FBQyxvQkFBb0IwVCxZQUFhLEtBQ2xDLENBQUNuZ0IsTUFBTzZoQyxZQVdkaHVDLGtCQUFtQnNzQixnQkFDWDVjLEtBQUtrSixPQUFPLENBQUUsQ0FBQyxjQUFjMFQsYUFBYSxJQUdsRHRzQixvQkFBcUJzc0IsU0FBVXN1QixpQkFBa0IsR0FDL0MsTUFBTXp1QyxLQUFPLGNBQWNtZ0IsV0FFWCxlQUFiQSxVQUEwQyxjQUFiQSxXQUM5QnN1QixzQkFNV2xyQyxLQUFLa0osT0FBTyxDQUFFLENBQUN6TSxPQUFPLFVBSjNCdUQsS0FBS2tKLE9BQU8sQ0FDaEIsQ0FBQyxvQkFBb0IwVCxZQUFhLEtBQ2xDLENBQUNuZ0IsT0FBTyxJQUtkcy9CLFlBQWFuZixVQUNYLE9BQUs1YyxLQUFLM00sS0FBS0EsS0FBSzIzQixRQU9maHJCLEtBQUszTSxLQUFLQSxLQUFLMjNCLE1BQU1wTyxXQUNuQjVjLEtBQUszTSxLQUFLQSxLQUFLMjNCLE1BQU1wTyxXQVAxQjVjLEtBQUszTSxLQUFLQSxLQUFLMjNCLE1BQVEsR0FDdkJockIsS0FBSzNNLEtBQUtBLEtBQUsyM0IsTUFBTW9ULFFBQVMsRUFDOUJwK0IsS0FBS2tKLE9BQU8sQ0FBRSxhQUFjLE1BQ3JCLEdBT1BrMkIsMkJBQ0YsTUFDZ0IsV0FBZHAvQixLQUFLOUUsUUFDZ0MsSUFBcEM4RSxLQUFLM00sS0FBS0EsS0FBSytyQixZQUFZeG9CLE9BQ1UsSUFBcENvSixLQUFLM00sS0FBS0EsS0FBSytyQixZQUFZem9CLE9BQ1csSUFBdENxSixLQUFLM00sS0FBS0EsS0FBSytyQixZQUFZN29CLFFBSTdCNDBDLHNCQUNGLEdBQWtCLFdBQWRuckMsS0FBSzlFLEtBQW1CLE9BQU8sS0FDbkMsTUFBTWt3QyxVQUFZNzRDLFNBQVN5TixLQUFLM00sS0FBS0EsS0FBS3F1QixhQUFhdHdCLEtBQ3ZELE9BQUk2VSxNQUFNbWxDLFdBQW1CLEVBQ3RCQSxVQUdMMXBCLG1CQUNGLEdBQWtCLFdBQWQxaEIsS0FBSzlFLEtBQW1CLE9BQU8sS0FDbkMsTUFBTTBqQixXQUFhcnNCLFNBQVN5TixLQUFLM00sS0FBS0EsS0FBS3F1QixhQUFhYSxRQUN4RCxPQUFJdGMsTUFBTTJZLFlBQW9CLEVBQ3ZCQSxXQUdMeXNCLHlCQUNGLElBQUkzcEIsYUFtQkosT0FqQkVBLGFBREUxaEIsS0FBSzNNLEtBQUtBLEtBQUtxdUIsYUFBYWEsT0FDZnZpQixLQUFLM00sS0FBS0EsS0FBS3F1QixhQUFhYSxPQUU1QixJQUVidmlCLEtBQUszTSxLQUFLQSxLQUFLcXVCLGFBQWF0d0IsTUFDOUJzd0IsY0FBZ0IsSUFBSTFoQixLQUFLM00sS0FBS0EsS0FBS3F1QixhQUFhdHdCLFFBRTlDNE8sS0FBSzNNLEtBQUtBLEtBQUsrckIsV0FBV3hvQixPQUM1QjhxQixjQUFnQixJQUFJOXhCLEtBQUs0UCxLQUFLQyxTQUFTLHNCQUVyQ08sS0FBSzNNLEtBQUtBLEtBQUsrckIsV0FBV3pvQixPQUM1QitxQixjQUFnQixJQUFJOXhCLEtBQUs0UCxLQUFLQyxTQUFTLHFCQUNuQ08sS0FBSzNNLEtBQUtBLEtBQUtxdUIsYUFBYTVDLFFBQzlCNEMsY0FBZ0IsSUFBSTFoQixLQUFLM00sS0FBS0EsS0FBS3F1QixhQUFhNUMsV0FJN0M0QyxhQUdMN0Msb0JBQ0YsTUFBa0IsV0FBZDdlLEtBQUs5RSxLQUEwQixPQUMvQjhFLEtBQUttckMsaUJBQW1CLEdBTTFCdnNCLGlCQUNGLE1BQWtCLFdBQWQ1ZSxLQUFLOUUsS0FBMEIsT0FDOUI4RSxLQUFLMGhCLGFBTVI5QixnQkFDRixPQUFPcnRCLFNBQVN5TixLQUFLM00sS0FBS0EsS0FBS2l2QixNQUFNQyxPQUFPcGxCLE9BRzFDMGlCLGdCQUNGLE9BQU90dEIsU0FBU3lOLEtBQUszTSxLQUFLQSxLQUFLaXZCLE1BQU1FLEtBQUtybEIsT0FHeEMyaUIsbUJBQ0YsT0FBT3Z0QixTQUFTeU4sS0FBSzNNLEtBQUtBLEtBQUtpdkIsTUFBTWhpQixRQUFRbkQsT0FHM0N4SCxzQkFDRixHQUFrQixVQUFkcUssS0FBSzlFLEtBQWtCLE1BQU8sR0FFbEMsTUFBTXZGLGdCQUFrQixHQUN4QixJQUFLLE1BQU8zQyxJQUFLbUssU0FBVS9LLE9BQU9nQyxRQUFRakIsS0FBS3dDLGtCQUNOLElBQW5DcUssS0FBSzNNLEtBQUtBLEtBQUsrckIsV0FBV3BzQixNQUM1QjJDLGdCQUFnQnpFLEtBQUt0QixLQUFLNFAsS0FBS0MsU0FBU3RDLFFBRzVDLE9BQU94SCxnQkFHVHBHLDJCQUE0QndKLE1BQU8xRixNQUNqQyxHQUFrQixVQUFkQSxLQUFLNkgsS0FBa0IsT0FBTyxLQUNsQyxHQUFJNlQsT0FBTzFiLEtBQUtBLEtBQUs0bUIsTUFBTTlvQixTQUFTLEtBQU0sQ0FDeEMsTUFBTXFxQyxPQUFTLEdBQ2YsSUFBSyxNQUFPeG9DLElBQUttSyxTQUFVL0ssT0FBT2dDLFFBQVFqQixLQUFLTSxRQUFRdUYsWUFDakRoRyxJQUFJK0osV0FBVyxNQUFRSSxNQUFNSixXQUFXLGlCQUMxQ3krQixPQUFPeG9DLElBQUl5SyxVQUFVLElBQU1nK0IsWUFBWTFpQyxNQUFPb0UsTUFBTU0sVUFBVSxNQUdsRSxJQUFJTixNQUNKLElBQ0VBLE1BQVEvTSxLQUFLdWlCLE1BQ1gsSUFBSXppQixLQUFLbUQsS0FBS0EsS0FBSzRtQixLQUFNdWhCLFFBQVFwMEIsU0FBUyxDQUN4Q0MsVUFBVSxJQUNUNVcsT0FFTCxNQUFPb0QsS0FDUHNKLE1BQVEsRUFFVixPQUFPQSxNQUVULE9BQVE4SSxNQUFNMVQsU0FBU2MsS0FBS0EsS0FBSzRtQixPQUFvQyxLQUEzQjFuQixTQUFTYyxLQUFLQSxLQUFLNG1CLE1BRzNEcXhCLFlBQ0YsR0FBa0IsVUFBZHRyQyxLQUFLOUUsS0FBa0IsTUFBTyxDQUFDLE1BQU0sR0FDekMsR0FBbUMsaUJBQXhCOEUsS0FBSzNNLEtBQUtBLEtBQUs0bUIsS0FDeEIsTUFBTyxDQUFDamEsS0FBSzNNLEtBQUtBLEtBQUs0bUIsTUFBTSxHQUcvQixHQUFJamEsS0FBSzNNLEtBQUtBLEtBQUs0bUIsS0FBSzlvQixTQUFTLEtBQU0sQ0FDckMsTUFBTXFxQyxPQUFTLEdBQ2YsSUFBSyxNQUFPeG9DLElBQUttSyxTQUFVL0ssT0FBT2dDLFFBQVFqQixLQUFLTSxRQUFRdUYsWUFDakRoRyxJQUFJK0osV0FBVyxNQUFRSSxNQUFNSixXQUFXLFdBQzFDeStCLE9BQU94b0MsSUFBSXlLLFVBQVUsSUFBTWcrQixZQUFZejdCLEtBQU03QyxNQUFNTSxVQUFVLEtBR2pFLElBQUlOLE1BQ0osSUFDRUEsTUFBUS9NLEtBQUt1aUIsTUFDWCxJQUFJemlCLEtBQUs4UCxLQUFLM00sS0FBS0EsS0FBSzRtQixLQUFNdWhCLFFBQVFwMEIsU0FBUyxDQUM3Q0MsVUFBVSxJQUNUNVcsT0FFTCxNQUFPb0QsS0FDUHNKLE1BQVEsRUFHVixNQUFPLENBQUNBLE9BQU8sR0FFakIsTUFBTyxDQUNKOEksTUFBTTFULFNBQVN5TixLQUFLM00sS0FBS0EsS0FBSzRtQixPQUUzQixLQURBMW5CLFNBQVN5TixLQUFLM00sS0FBS0EsS0FBSzRtQixPQUU1QixHQUlKM3BCLGtCQUNFLE1BQU1xMEMsRUFBSTNrQyxLQUFLc3JDLE1BSWYsT0FISTNHLEVBQUUsVUFDRTNrQyxLQUFLa0osT0FBTyxDQUFFLFlBQWF5N0IsRUFBRSxLQUU5QkEsRUFBRSxHQUdQMXFCLFdBQ0YsTUFBTTBxQixFQUFJM2tDLEtBQUtzckMsTUFJZixPQUhJM0csRUFBRSxJQUNKM2tDLEtBQUtrSixPQUFPLENBQUUsWUFBYXk3QixFQUFFLEtBRXhCQSxFQUFFLEdBR1B4bkMsWUFDRixHQUFrQixVQUFkNkMsS0FBSzlFLEtBQWtCLE9BQU8sS0FDbEMsSUFBSWlDLE1BQVEsRUFxQlosTUFwQjZCLGNBQXpCNkMsS0FBS2pILE1BQU0xRixLQUFLNkgsTUFDbEJpQyxNQUFRNkMsS0FBS2lhLEtBQ2I5YyxPQUFTNkMsS0FBSzNNLEtBQUtBLEtBQUsyVixhQUFhK3RCLFNBQ2pDeGtDLFNBQVN5TixLQUFLM00sS0FBS0EsS0FBSzJWLGFBQWErdEIsVUFDckMsRUFDSjU1QixPQUFTNkMsS0FBSzNNLEtBQUtBLEtBQUsyVixhQUFhZ3VCLFdBQ2pDemtDLFNBQVN5TixLQUFLM00sS0FBS0EsS0FBSzJWLGFBQWFndUIsWUFDckMsRUFDSjc1QixPQUFTNkMsS0FBSzNNLEtBQUtBLEtBQUsyVixhQUFhQyxXQUNqQzFXLFNBQVN5TixLQUFLM00sS0FBS0EsS0FBSzJWLGFBQWFDLFlBQ3JDLEVBRUZyWixLQUFLSSxTQUFTRixJQUFJLE9BQVEsc0JBQzFCa1EsS0FBSzNNLEtBQUtBLEtBQUsyVixhQUFhaXVCLFlBRTVCOTVCLE9BQVM1SyxTQUFTeU4sS0FBSzNNLEtBQUtBLEtBQUsyVixhQUFhaXVCLGFBR2hEOTVCLE1BQVE1SyxTQUFTeU4sS0FBSzNNLEtBQUtBLEtBQUs4SixPQUUxQjhJLE1BQU05SSxPQUFpQixLQUFSQSxNQUd6QjdNLGtCQUFtQjZNLE9BQ2pCLEdBQWtCLFVBQWQ2QyxLQUFLOUUsS0FBa0IsT0FBTyxLQUNsQyxHQUE2QixjQUF6QjhFLEtBQUtqSCxNQUFNMUYsS0FBSzZILEtBQXNCLENBQ3hDLE1BQU1xd0MsTUFBUWg1QyxTQUFTNEssT0FBUzZDLEtBQUs3QyxNQUMvQnF1QyxLQUNIeHJDLEtBQUszTSxLQUFLQSxLQUFLMlYsYUFBYUMsV0FDekIxVyxTQUFTeU4sS0FBSzNNLEtBQUtBLEtBQUsyVixZQUFZQyxZQUNwQyxHQUFLc2lDLFlBQ0x2ckMsS0FBS2tKLE9BQU8sQ0FDaEIsOEJBQStCc2lDLElBQU0sRUFBSUEsSUFBTSxlQUV0Q3hyQyxLQUFLa0osT0FBTyxDQUFFLGFBQWMvTCxRQUczQzdNLHlCQUEwQjhULEdBQ3hCLEdBQWtCLFVBQWRwRSxLQUFLOUUsS0FBa0IsT0FBTyxLQUNsQyxHQUE2QixjQUF6QjhFLEtBQUtqSCxNQUFNMUYsS0FBSzZILEtBQXNCLENBQ3hDLE1BQU1zd0MsS0FDSHhyQyxLQUFLM00sS0FBS0EsS0FBSzJWLGFBQWFDLFdBQ3pCMVcsU0FBU3lOLEtBQUszTSxLQUFLQSxLQUFLMlYsWUFBWUMsWUFDcEMsR0FBSzFXLFNBQVM2UixTQUNkcEUsS0FBS2tKLE9BQU8sQ0FDaEIsOEJBQStCc2lDLElBQU0sRUFBSUEsSUFBTSxLQUtyRGhxQixnQkFDRSxNQUFrQixXQUFkeGhCLEtBQUs5RSxLQUEwQixLQUM5QjhFLEtBQUszTSxLQUFLQSxLQUFLbzRDLEtBSWJ6ckMsS0FBSzNNLEtBQUtBLEtBQUtvNEMsTUFIcEJ6ckMsS0FBSzByQyxXQUFXLEdBQ1QsR0FLWHA3QyxlQUNFLEdBQWtCLFdBQWQwUCxLQUFLOUUsS0FBbUIsT0FBTyxLQUNuQyxNQUFNeXdDLFVBQVkzckMsS0FBSzNNLEtBQUtBLEtBQUt1NEMsUUFDN0JyNUMsU0FBU3lOLEtBQUszTSxLQUFLQSxLQUFLdTRDLFNBQ3hCLFFBQ0U1ckMsS0FBSzByQyxXQUFXQyxXQUd4QnI3QyxpQkFBa0JzN0MsU0FDaEIsR0FBa0IsV0FBZDVyQyxLQUFLOUUsS0FBbUIsT0FBTyxXQUM3QjhFLEtBQUtrSixPQUFPLENBQUUsWUFBYTBpQyxTQUFXLElBRzlDdDdDLGtCQUNFLEdBQWtCLFdBQWQwUCxLQUFLOUUsS0FBbUIsT0FBTyxLQUNuQyxNQUFNMHdDLGNBQWdCNXJDLEtBQUt3aEIsZ0JBQ3JCcXFCLFdBQWE3ckMsS0FBSzNNLEtBQUtBLEtBQUt1NEMsUUFDOUJyNUMsU0FBU3lOLEtBQUszTSxLQUFLQSxLQUFLdTRDLFNBQ3hCLEVBQ0FBLFFBQVUsR0FBS0MsaUJBQWtCN3JDLEtBQUswckMsV0FBV0csa0JBQzFDN3JDLEtBQUswckMsV0FBV0UsUUFBVSxHQUd2Q3Q3QyxtQkFBb0I4VCxHQUNsQixHQUFrQixXQUFkcEUsS0FBSzlFLEtBQW1CLE9BQU8sS0FDbkMsTUFBTTB3QyxjQUFnQjVyQyxLQUFLd2hCLGdCQUN2QnBkLEVBQUl3bkMsY0FBZTVyQyxLQUFLMHJDLFdBQVcsU0FDNUIxckMsS0FBSzByQyxXQUFXRSxRQUFVeG5DLEdBR3ZDN1UsMkJBQTRCbXBDLFVBQVd6bUMsU0FFckMsT0FEbUJ5bUMsVUFBVTNQLE9BQU85MkIsU0FFakM2NUMsUUFBTyxDQUFDQyxTQUFVcnJDLFFBR2QwUCxTQUFTQyxVQUFVM1AsT0FDcEJxckMsU0FBU3g5QixNQUFLMU4sT0FBU0EsTUFBTXBFLE9BQVNpRSxLQUFLakUsT0FFcENzdkMsU0FHRixJQUFJQSxTQUFVcnJDLE9BQ3BCLElBQ0Z3c0IsTUFBSyxDQUFDcDVCLEVBQUdpdEIsSUFDRGp0QixFQUFFMkksS0FDTms4QixvQkFDQStELGNBQWMzYixFQUFFdGtCLEtBQUtrOEIsdUJBVTlCcHBDLHlCQUEwQm9RLE1BRXhCLE1BQU11RCxTQUFXdkQsS0FBS3BNLFFBQVF5SSxRQUM5QixHQUFJa0gsU0FBVSxDQUNaLE1BQU9uSCxRQUFTQyxTQUFXa0gsU0FBU2pILE1BQU0sS0FDMUMsR0FBZ0IsVUFBWkYsUUFDRixPQUFPbk0sS0FBS3NNLE9BQU9DLE9BQU9ILFNBQ3JCLENBQ0wsTUFBTVEsTUFBUTVNLEtBQUtpTyxPQUFPL04sSUFBSWlNLFNBQzlCLElBQUtTLE1BQU8sT0FBTyxLQUNuQixNQUFNc0IsVUFBWXRCLE1BQU11QixvQkFBb0IsUUFBUy9CLFNBQ3JELElBQUs4QixVQUFXLE9BQU8sS0FFdkIsT0FEYyxJQUFJRSxNQUFNRixXQUNYL0UsT0FLakIsTUFBTXFLLFFBQVV6RCxLQUFLcE0sUUFBUTZQLFFBQzdCLE9BQU94VCxLQUFLc00sT0FBT3BNLElBQUlzVCxVQUFZLEtBWXJDNG9DLFlBQWFDLFlBQWMsSUFDekIsTUFBTTU0QyxLQUFPNEssVUFBVStCLEtBQUszTSxLQUFLQSxNQUVELGlCQUFyQkEsS0FBS3dpQyxjQUNkeGlDLEtBQUt3aUMsWUFBYyxDQUNqQjE0QixNQUFPOUosS0FBS3dpQyxZQUNaLy9CLFFBQVMsVUFHeUIsSUFBM0J6QyxLQUFLd2lDLFlBQVkxNEIsUUFDMUI5SixLQUFLd2lDLFlBQVkxNEIsTUFBUSxTQUVhLElBQTdCOUosS0FBS3dpQyxZQUFZLy9CLFVBQzFCekMsS0FBS3dpQyxZQUFZLy9CLFFBQVUsSUFFN0IsTUFBTW8yQyxPQUFTLEdBR2Y3NEMsS0FBS3dpQyxZQUFZMTRCLE1BQVFpNUIsV0FBV0MsV0FDbENoakMsS0FBS3dpQyxZQUFZMTRCLE1BQ2pCOHVDLGFBRUY1NEMsS0FBS3dpQyxZQUFZMTRCLE1BQVE4eEIsV0FBV29ILFdBQVdoakMsS0FBS3dpQyxZQUFZMTRCLE9BQ2hFOUosS0FBS3dpQyxZQUFZLy9CLFFBQVVzZ0MsV0FBV0MsV0FDcENoakMsS0FBS3dpQyxZQUFZLy9CLFFBQ2pCbTJDLGFBRUY1NEMsS0FBS3dpQyxZQUFZLy9CLFFBQVVtNUIsV0FBV29ILFdBQVdoakMsS0FBS3dpQyxZQUFZLy9CLFNBR2xFLE1BQU1xMkMsTUFBUSxHQUNSQyxHQUFLcHNDLEtBQUssSUFBSUEsS0FBSzNNLEtBQUs2SCxnQkFHOUIsR0FGSWt4QyxJQUFJQSxHQUFHejBDLEtBQUtxSSxLQUFSb3NDLENBQWMvNEMsS0FBTTY0QyxPQUFRQyxNQUFPRixhQUV6QixVQUFkanNDLEtBQUs5RSxLQUNQLElBQUssTUFBT2xJLElBQUttSyxTQUFVL0ssT0FBT2dDLFFBQVFqQixLQUFLd0Msa0JBQ04sSUFBbkNxSyxLQUFLM00sS0FBS0EsS0FBSytyQixXQUFXcHNCLE1BQWVtNUMsTUFBTWo3QyxLQUFLaU0sT0FPNUQsT0FGQTlKLEtBQUsrckIsV0FBYStzQixNQUFNOTZDLFFBQU9nN0MsS0FBT0EsSUFDdENoNUMsS0FBSzY0QyxPQUFTQSxPQUNQNzRDLEtBR1RpNUMsZ0JBQWlCajVDLEtBQU02NEMsT0FBUUMsT0FDN0IsSUFBSyxNQUFPbjVDLElBQUttSyxTQUFVL0ssT0FBT2dDLFFBQVFqQixLQUFLZ0QsbUJBQ04sSUFBbkM2SixLQUFLM00sS0FBS0EsS0FBSytyQixXQUFXcHNCLE1BQWVtNUMsTUFBTWo3QyxLQUFLaU0sT0FHMUQsSUFBSW92QyxXQUFhMzhDLEtBQUs0UCxLQUFLQyxTQUFTLGNBQ2hDK3hCLFVBQVksR0FDWmdiLE9BQVEsRUFDWixHQUFJeHNDLEtBQUszTSxLQUFLQSxLQUFLd04sTUFBTW9mLEtBQUt4a0IsR0FBSSxDQUNoQyxNQUFNb0YsTUFBUWIsS0FBS2pILE9BQU82SCxNQUFNOVEsSUFBSWtRLEtBQUszTSxLQUFLQSxLQUFLd04sTUFBTW9mLEtBQUt4a0IsSUFDMURvRixRQUNGMndCLFdBQWFwaEIsU0FBUzBvQixtQkFBbUJqNEIsT0FDekMyckMsT0FBUSxHQUlaLEdBQUl4c0MsS0FBS28vQixzQkFBd0JwL0IsS0FBSzNNLEtBQUtBLEtBQUt3TixNQUFNc2YsV0FBVzFrQixHQUFJLENBQ25FOHdDLFdBQWEzOEMsS0FBSzRQLEtBQUtDLFNBQVMsZUFDaEMsTUFBTW9CLE1BQVFiLEtBQUtqSCxPQUFPNkgsTUFBTTlRLElBQUlrUSxLQUFLM00sS0FBS0EsS0FBS3dOLE1BQU1zZixXQUFXMWtCLElBQ2hFb0YsUUFDRjJ3QixXQUFhLElBQUlwaEIsU0FBUzBvQixtQkFBbUJqNEIsU0FDN0MyckMsT0FBUSxHQUlQQSxRQUNIaGIsVUFBWXh4QixLQUFLM00sS0FBS0EsS0FBS3dOLE1BQU1vZixLQUFLeGpCLEtBQ2xDdUQsS0FBS28vQixzQkFBd0JwL0IsS0FBSzNNLEtBQUtBLEtBQUt3TixNQUFNc2YsV0FBVzFqQixPQUMvRCswQixXQUFhLElBQUl4eEIsS0FBSzNNLEtBQUtBLEtBQUt3TixNQUFNc2YsV0FBVzFqQixTQUlqRCswQixXQUNGMGEsT0FBT2g3QyxLQUFLLENBQ1Z1TCxLQUFNOHZDLFdBQ05wdkMsTUFBT3EwQixZQUlYMGEsT0FBT2g3QyxLQUFLLENBQ1Z1TCxLQUFNN00sS0FBSzRQLEtBQUtDLFNBQVMsMkJBQ3pCdEMsTUFBTzZDLEtBQUtxckMscUJBR2RhLE9BQU9oN0MsS0FBSyxDQUNWdUwsS0FBTTdNLEtBQUs0UCxLQUFLQyxTQUFTLDBCQUN6QnRDLE1BQU82QyxLQUFLM00sS0FBS0EsS0FBS2szQyxZQUFjdnFDLEtBQUszTSxLQUFLQSxLQUFLazNDLFlBQWMsTUFHL0R2cUMsS0FBSzNNLEtBQUtBLEtBQUt1NEMsU0FDakJNLE9BQU9oN0MsS0FBSyxDQUNWdUwsS0FBTTdNLEtBQUs0UCxLQUFLQyxTQUFTLDJCQUN6QnRDLE1BQU82QyxLQUFLM00sS0FBS0EsS0FBS3U0QyxVQUs1QmEsY0FDRSxRQUFrQixVQUFkenNDLEtBQUs5RSxPQUFvQjhFLEtBQUszTSxLQUFLQSxLQUFLK3JCLFdBQVdsdUIsTUFJckQwekIsYUFDRixPQUFPNWtCLEtBQUszTSxLQUFLQSxLQUFLK3JCLFdBQVcxb0IsS0FHL0JnMkMsY0FDRixNQUFrQixVQUFkMXNDLEtBQUs5RSxNQUVQOEUsS0FBS3ZELEtBQUtYLGdCQUNWbE0sS0FBSzRQLEtBQUtDLFNBQVMsdUJBQXVCM0QsZUMxM0J6QyxNQUFNb0UsVUFDWDRELFlBQ0UvSyxNQUFRLEtBQ1I4SCxNQUFRLEtBQ1JILEtBQU8sS0FDUG1DLFFBQVUsRUFDVkQsV0FBYSxLQUNiNkssc0JBQXdCLEVBQ3hCRCxpQkFBbUIsR0FjbkIsR0FaQXhOLEtBQUtqSCxNQUFRQSxNQUNiaUgsS0FBS2EsTUFBUUEsTUFDYmIsS0FBS1UsS0FBT0EsS0FDWlYsS0FBSzRDLFdBQWFBLFdBQ2xCNUMsS0FBS3NCLGFBQWV1QixRQUNwQjdDLEtBQUs4QyxTQUFXLEVBQ2hCOUMsS0FBS0MsYUFBZSxLQUNwQkQsS0FBSzJDLG1CQUFxQixLQUMxQjNDLEtBQUsyc0MsU0FBVSxFQUNmM3NDLEtBQUt3TixpQkFBbUJBLGlCQUN4QnhOLEtBQUt5TixzQkFBd0JBLHNCQUVWLE9BQWY3SyxXQUFxQixDQUN2QixNQUFNZ3FDLFVBQ29ELFlBQXhEaDlDLEtBQUtJLFNBQVNGLElBQUksT0FBUSwwQkFDNUJrUSxLQUFLNEMsV0FBYWdxQyxVQUNkMXNDLFVBQVVtRyxnQkFBZ0IySSxRQUMxQjlPLFVBQVVtRyxnQkFBZ0JsRyxTQUl2QjBzQyxzQkFDVCxNQUFPLFdBR0V4bUMsNkJBQ1QsTUFBTyxDQUNMMkksU0FBVSxFQUNWN08sUUFBUyxFQUNURSxLQUFNLEVBQ05DLFFBQVMsRUFDVEMsU0FBVSxFQUNWb2lCLFdBQVksR0FJTDFpQiwwQkFDVCxNQUFPLENBQ0xPLFFBQVMsR0FDVEMsUUFBUyxFQUNUTixRQUFTLEVBQ1RFLEtBQU0sRUFDTkMsUUFBUyxFQUNUQyxTQUFVLEdBSWRoUix3QkFBeUI4VyxpQkFDdkIsT0FDR0osTUFBTXZJLE9BQU8ySSxrQkFFVkEsZ0JBREEzSSxPQUFPMkksa0JBR1gsSUFBSyxJQUNILE9BQU96VyxLQUFLNFAsS0FBS0MsU0FBUywwQkFDNUIsSUFBSyxJQUNILE9BQU83UCxLQUFLNFAsS0FBS0MsU0FBUyx1QkFDNUIsSUFBSyxLQUNILE9BQU83UCxLQUFLNFAsS0FBS0MsU0FBUywwQkFDNUIsSUFBSyxNQUNILE9BQU83UCxLQUFLNFAsS0FBS0MsU0FBUywyQkFDNUIsS0FBSyxFQUNILE9BQU83UCxLQUFLNFAsS0FBS0MsU0FBUywwQkFDNUIsS0FBS1MsVUFBVW1HLGdCQUFnQjJJLFFBQzdCLE9BQU9wZixLQUFLNFAsS0FBS0MsU0FBUywwQkFDNUIsS0FBS1MsVUFBVW1HLGdCQUFnQmxHLFFBQzdCLE9BQU92USxLQUFLNFAsS0FBS0MsU0FBUywwQkFDNUIsS0FBS1MsVUFBVW1HLGdCQUFnQmhHLEtBQzdCLE9BQU96USxLQUFLNFAsS0FBS0MsU0FBUyx1QkFDNUIsS0FBS1MsVUFBVW1HLGdCQUFnQi9GLFFBQzdCLE9BQU8xUSxLQUFLNFAsS0FBS0MsU0FBUywwQkFDNUIsS0FBS1MsVUFBVW1HLGdCQUFnQjlGLFNBQzdCLE9BQU8zUSxLQUFLNFAsS0FBS0MsU0FBUywyQkFDNUIsUUFDRSxPQUFPLE1BSVRxRCxlQVlGLEdBVks5QyxLQUFLNCtCLFlBQ0o1K0IsS0FBS2lELGlCQUNQakQsS0FBSzhDLFNBQ0g5QyxLQUFLakgsTUFBTTFGLEtBQUtBLEtBQUs2QixnQkFBZ0I4SyxLQUFLaUQsZ0JBQWdCOUYsT0FFMUQ2QyxLQUFLYSxRQUFPYixLQUFLOEMsU0FBVzlDLEtBQUthLE1BQU0xRCxPQUN2QzZDLEtBQUtvSixZQUNQcEosS0FBSzhDLFNBQVc5QyxLQUFLakgsTUFBTTFGLEtBQUtBLEtBQUtzWCxRQUFRM0ssS0FBS29KLFdBQVdqTSxRQUc3RDZDLEtBQUs0K0IsVUFDUCxPQUNFNStCLEtBQUt5Tix1QkFDTDdkLEtBQUtJLFNBQVNGLElBQUksT0FBUSw4QkFFdEJrUSxLQUFLNCtCLFVBQVk1K0IsS0FBS3lOLHNCQUF3QixFQUFVLEVBQ3JEek4sS0FBSzQrQixVQUFZNStCLEtBQUt5TixzQkFFeEJ6TixLQUFLNCtCLFVBS1o5N0IsYUFBVXNCLEdBQ1pwRSxLQUFLNCtCLFVBQVl4NkIsRUFHZjBvQyxTQUFNMW9DLEdBQ1JwRSxLQUFLK3NDLE1BQVEzb0MsRUFHWDBvQyxXQUVGLE9BREs5c0MsS0FBSytzQyxRQUFPL3NDLEtBQUsrc0MsTUFBUUMsUUFBUUMsTUFBTUMsU0FBUyxLQUM5Q2x0QyxLQUFLK3NDLE1BR1ZJLGNBT0YsT0FOaUI5dEMsR0FBRytNLEtBQUtxZSxXQUFXcDVCLFFBQU93SixTQUV2Q21GLEtBQUs4c0MsT0FBU2p5QyxRQUFROHZCLFFBQVEsT0FBUSxTQUN0Q3pxQixVQUFVMnNDLFdBQWFoeUMsUUFBUTh2QixRQUFRLE9BQVEsVUFHdENyNUIsT0FBUyxFQUlwQjg3QyxxQkFDRixHQUFLcHRDLEtBQUs0K0IsVUFDVixPQUNFNStCLEtBQUt5Tix1QkFDTDdkLEtBQUtJLFNBQVNGLElBQUksT0FBUSw4QkFFdEJrUSxLQUFLeU4sc0JBQXdCLEVBQ3hCek4sS0FBSzQrQixVQUFVamhDLFdBQWFxQyxLQUFLeU4sc0JBQXNCOVAsV0FHOURxQyxLQUFLNCtCLFVBQVVqaEMsV0FBYSxJQUFNcUMsS0FBS3lOLHNCQUFzQjlQLFdBRW5EcUMsS0FBSzQrQixVQUFVamhDLFdBRzNCMHZDLHdCQUNGLE9BQU8sRUFHTEMsdUJBQ0YsT0FBSXR0QyxLQUFLOEMsU0FDSDlDLEtBQUs4QyxVQUFZLElBQVksR0FDMUJ2USxTQUFTeU4sS0FBSzhDLFVBRWhCLEtBR0x5cUMsb0JBQ0YsT0FBSXZ0QyxLQUFLOEMsU0FBaUIxUyxLQUFLdWlCLE1BQU0zUyxLQUFLOEMsU0FBVyxHQUM5QyxLQUdMMHFDLHVCQUNGLE9BQUl4dEMsS0FBSzhDLFNBQWlCMVMsS0FBS3VpQixNQUFNM1MsS0FBSzhDLFNBQVcsR0FDOUMsS0FHTDJxQyxzQkFDRixHQUFJenRDLEtBQUs4QyxTQUFVLENBQ2pCLEdBQUk5QyxLQUFLNEMsV0FBWSxDQUNuQixHQUFJNUMsS0FBSzRDLFlBQWMxQyxVQUFVbUcsZ0JBQWdCL0YsUUFDL0MsT0FBT04sS0FBS3d0QyxpQkFBbUIsR0FBSyxHQUFLLElBQ3BDLEdBQUl4dEMsS0FBSzRDLFlBQWMxQyxVQUFVbUcsZ0JBQWdCaEcsS0FDdEQsT0FBT0wsS0FBS3V0QyxjQUFnQixHQUFLLEdBQUssSUFHMUMsT0FBT3Z0QyxLQUFLOEMsU0FBVyxHQUFLLEdBQUssSUFFbkMsT0FBTyxLQUdMNHFDLHNCQUNGLFFBQStCLElBQXBCMXRDLEtBQUs0QyxXQUNkLE9BQVE1QyxLQUFLNEMsWUFDWCxLQUFLMUMsVUFBVW1HLGdCQUFnQi9GLFFBQzdCLE9BQU9OLEtBQUt3dEMsaUJBQ2QsS0FBS3R0QyxVQUFVbUcsZ0JBQWdCaEcsS0FDN0IsT0FBT0wsS0FBS3V0QyxjQUNkLEtBQUtydEMsVUFBVW1HLGdCQUFnQmxHLFFBQzdCLE9BQU9ILEtBQUtzdEMsaUJBQ2QsS0FBS3B0QyxVQUFVbUcsZ0JBQWdCOUYsU0FDN0IsT0FBT1AsS0FBS3F0QyxrQkFDZCxLQUFLbnRDLFVBQVVtRyxnQkFBZ0IySSxRQUM3QixPQUFRLEVBQ1YsUUFDRSxPQUFPaFAsS0FBSzhDLFNBR2xCLE9BQU8sS0FHTDZtQyx1QkFDRixRQUErQixJQUFwQjNwQyxLQUFLNEMsV0FDZCxPQUFRNUMsS0FBSzRDLFlBQ1gsS0FBSzFDLFVBQVVtRyxnQkFBZ0IvRixRQUM3QixPQUFPMVEsS0FBSzRQLEtBQUtZLE9BQU8sMEJBQzFCLEtBQUtGLFVBQVVtRyxnQkFBZ0JoRyxLQUM3QixPQUFPelEsS0FBSzRQLEtBQUtZLE9BQU8sdUJBQzFCLEtBQUtGLFVBQVVtRyxnQkFBZ0JsRyxRQUM3QixPQUFPdlEsS0FBSzRQLEtBQUtZLE9BQU8sMEJBQzFCLEtBQUtGLFVBQVVtRyxnQkFBZ0I5RixTQUM3QixPQUFPM1EsS0FBSzRQLEtBQUtZLE9BQU8sMkJBQzFCLEtBQUtGLFVBQVVtRyxnQkFBZ0IySSxRQUM3QixPQUFPcGYsS0FBSzRQLEtBQUtZLE9BQU8sMEJBQzFCLFFBQ0UsTUFBTyxHQUdiLE1BQU8sR0FHTGd0QixxQkFDRixJQUFJcHRCLEtBQUs4ekIsUUFBVCxDQUNBLFFBQW9DLElBQXpCOXpCLEtBQUsydEMsZ0JBQWlDLE9BQU8zdEMsS0FBSzJ0QyxnQkFDN0QsR0FBSTN0QyxLQUFLd04saUJBQWtCLENBQ3pCLE1BQU1vZ0MsU0FBVzV0QyxLQUFLa0IsTUFBTXpRLE1BQVF1UCxLQUFLd04saUJBQ3pDLE9BQUlvZ0MsU0FBVyxFQUFVLEVBQ3JCQSxTQUFXLElBQVksSUFDcEJBLFNBRVQsT0FBTzV0QyxLQUFLa0IsTUFBTXpRLE9BR2hCMjhCLG1CQUFnQmhwQixHQUNsQnBFLEtBQUsydEMsZ0JBQWtCdnBDLEVBR3JCeXBDLDZCQUNGLE9BQUs3dEMsS0FBS3dOLGlCQUNOeE4sS0FBS3dOLGlCQUFtQixFQUFVLElBQUl4TixLQUFLd04sbUJBQ3hDeE4sS0FBS3dOLGlCQUFpQjdQLFdBRk0sS0FLakNvRixlQUNGLElBQUkvQyxLQUFLOHpCLFVBQ0w5ekIsS0FBSzh0QyxhQUNULE9BQU85dEMsS0FBS290QixnQkFBa0JwdEIsS0FBS3l0QyxnQkFHakN6cUMsaUJBQ0YsSUFBSWhELEtBQUs4ekIsUUFDVCxPQUErQixJQUF4Qjl6QixLQUFLb3RCLGVBR1ZKLHVCQUNGLElBQUlodEIsS0FBSzh6QixRQUNULE9BQU85ekIsS0FBS0MsY0FBZ0JDLFVBQVVELGFBQWFLLFFBR2pEeUcsYUFDRixJQUFJL0csS0FBSzh6QixVQUNMOXpCLEtBQUs4dEMsYUFDVCxPQUFJOXRDLEtBQUttZSxVQUFrQm5lLEtBQUs0QyxZQUFjNUMsS0FBS0MsYUFDNUNELEtBQUswdEMsaUJBQW1CMXRDLEtBQUtvdEIsZ0JBQWtCcHRCLEtBQUtnRCxXQUd6RDZELGFBQ0YsSUFBSTdHLEtBQUs4ekIsVUFDTDl6QixLQUFLOHRDLGFBQ1QsT0FBUTl0QyxLQUFLK0csT0FHWCttQyxtQkFDRixZQUFnQyxJQUFsQjl0QyxLQUFLOEMsU0FHakJ6QixlQUNGLFNBQUlyQixLQUFLc0IsY0FBZ0J0QixLQUFLc0IsYUFBZSxHQUkzQ3lzQyxpQkFDRixTQUFJL3RDLEtBQUtzQixjQUFnQnRCLEtBQUtzQixhQUFlLEdBSTNDMHNDLGtCQUNGLFNBQUlodUMsS0FBS3NCLGNBQXNDLElBQXRCdEIsS0FBS3NCLGNBSTVCQSxtQkFDRixPQUFJdEIsS0FBS2l1QyxjQUFzQmp1QyxLQUFLaXVDLGNBQzdCLEtBR0wzc0MsaUJBQWM4QyxHQUNoQnBFLEtBQUtpdUMsY0FBZ0IxN0MsU0FBUzZSLEdBRzVCM0gsV0FDRixHQUFJdUQsS0FBS2pILE1BQU8sQ0FDZCxHQUFJaUgsS0FBS2EsTUFBTyxPQUFPYixLQUFLYSxNQUFNdzBCLFVBQ2xDLEdBQUlyMUIsS0FBS1UsS0FBTSxPQUFPVixLQUFLVSxLQUFLakUsS0FDaEMsR0FBSXVELEtBQUtpRCxlQUNQLE9BQU9pSyxjQUFjMjhCLHVCQUF1QjdwQyxLQUFLaUQsaUJBQWlCMEwsTUFFcEUsR0FBSTNPLEtBQUtvSixVQUFXLENBQ2xCLEdBQXVCLFFBQW5CcEosS0FBS29KLFVBQXFCLE9BQU94WixLQUFLNFAsS0FBS0MsU0FBUyxhQUN4RCxHQUF1QixRQUFuQk8sS0FBS29KLFVBQXFCLE9BQU94WixLQUFLNFAsS0FBS0MsU0FBUyxnQkFHNUQsT0FBTyxLQUdMNDFCLGdCQUNGLEdBQUlyMUIsS0FBS2pILE1BQU8sQ0FDZCxHQUFJaUgsS0FBS2EsTUFBTyxPQUFPYixLQUFLYSxNQUFNdzBCLFVBQ2xDLEdBQUlyMUIsS0FBS1UsS0FBTSxPQUFPVixLQUFLVSxLQUFLakUsS0FDaEMsR0FBSXVELEtBQUtpRCxlQUNQLE9BQU9pSyxjQUFjMjhCLHVCQUF1QjdwQyxLQUFLaUQsaUJBQWlCeUwsTUFFcEUsR0FBSTFPLEtBQUtvSixVQUFXLENBQ2xCLEdBQXVCLFFBQW5CcEosS0FBS29KLFVBQXFCLE9BQU94WixLQUFLNFAsS0FBS0MsU0FBUyxhQUN4RCxHQUF1QixRQUFuQk8sS0FBS29KLFVBQXFCLE9BQU94WixLQUFLNFAsS0FBS0MsU0FBUyxhQUc1RCxPQUFPLEtBR0x5dUMsZUFDRixNQUFNdHJDLFdBQ0o1QyxLQUFLbXVDLGNBQWdCanVDLFVBQVVtRyxnQkFBZ0JsRyxTQUUzQ0QsVUFBVXlwQyxpQkFBaUIzcEMsS0FBS211QyxhQUNoQ2w3QyxTQUNKK00sS0FBS2l1QyxjQUFnQixFQUNqQixJQUFJanVDLEtBQUtpdUMsZ0JBQ1RqdUMsS0FBS2l1QyxjQUFjdHdDLFdBQ3pCLE9BQU8vTixLQUFLNFAsS0FBS1ksT0FDZixpQkFBa0J3QyxXQUFrQixPQUFMLEtBQzVCNUMsS0FBS2l1QyxjQUFxQixRQUFMLEtBRXhCLENBQUVyckMsV0FBd0IzUCxTQUFvQndKLEtBQU11RCxLQUFLdkQsT0FJekQ2YixhQUNGLFFBQUl0WSxLQUFLblAsS0FTWHRCLG1CQUFvQm9RLE1BQ2xCLE1BQU00eUIsV0FBYTV5QixLQUFLMUwsVUFBVWtrQixTQUFTLGVBQ3ZDeFksS0FDQUEsS0FBS0UsY0FBYyxnQkFDakJ5QyxNQUFRLElBQUlwQyxVQUNsQlIsU0FBUzZXLGVBQWVnYyxXQUFZandCLE9BQ3BDLE1BQU16SCxRQUFVOEUsS0FBS3FOLFFBQVEsWUFFN0IsT0FEQTFLLE1BQU02SixVQUFZdFIsUUFBVUEsUUFBUXRILFFBQVE0WSxVQUFZLEtBQ2pEN0osTUFHVC9TLGtCQUFtQm9RLEtBQU0wZCxTQUFVLEdBQ2pDLE1BQU0rd0IsU0FBV2x1QyxVQUFVd00sWUFBWS9NLE1BQ2pDeUQsUUFBVXpELEtBQUtwTSxRQUFReUksUUFDekIyRCxLQUFLcE0sUUFBUXlJLFFBQ2IyRCxLQUFLcE0sUUFBUTZQLFFBQ1h0QyxRQUFVbkIsS0FBS3BNLFFBQVF1TixRQUN2QnU1QixPQUFTMTZCLEtBQUtwTSxRQUFRMFAsZUFDdEJ0QyxPQUFTaEIsS0FBS3BNLFFBQVFvTixPQUN0QmtDLFFBQVVsRCxLQUFLcE0sUUFBUXNQLFFBQ3ZCRCxXQUFhakQsS0FBS3BNLFFBQVFxUCxXQUVoQyxJQUFJa3dCLFdBQ0osR0FBSWh5QixRQUNGZ3lCLFdBQWEsSUFBSTV5QixVQUFVa0QsUUFBU3RDLFFBQVNILE9BQVFrQyxRQUFTRCxnQkFDekQsS0FBSXkzQixPQU1KLE9BTEx2SCxXQUFhLElBQUk1eUIsVUFDakI0eUIsV0FBV3h4QixhQUFldUIsUUFDMUJpd0IsV0FBV2x3QixXQUFhQSxXQUN4Qmt3QixXQUFXLzVCLE1BQVFxSyxRQUNuQjB2QixXQUFXN3ZCLGVBQWlCbzNCLE9BRTFCK1QsU0FBU3RCLE9BQ1hoYSxXQUFXcVgsUUFBVWlFLFNBQVNqRSxRQUM5QnJYLFdBQVdnYSxLQUFPc0IsU0FBU3RCLE1BRXpCc0IsU0FBUzcrQixTQUFRdWpCLFdBQVd2akIsT0FBUzYrQixTQUFTNytCLFFBQ2xEdWpCLFdBQVc2WixTQUFVLFFBQ2Y3WixXQUFXN2lDLE9BQ2JvdEIsU0FBU3lWLFdBQVcza0IsV0FBVSxFQUFNeE8sTUFHdENwRCxZQUNGLE9BQUt5RCxLQUFLakgsTUFDSDBCLFdBQVcyQixnQkFBZ0I0RCxLQUFLM0QsVUFEZixLQUl0QnRELFVBQU9xTCxHQUVULEdBREFwRSxLQUFLM0QsU0FBVytILEVBQ1AsTUFBTEEsRUFBSixDQUtBLEdBQUlBLGFBQWF5SyxNQU9mLE9BTEE3TyxLQUFLc21CLE9BQVNsaUIsRUFDZHBFLEtBQUtzbUIsT0FBTzVwQixNQUFRc0QsS0FBS2pILE1BQU0wRCxVQUMzQjJILEVBQUU3SCxPQUFTNkgsRUFBRTdILE1BQU1DLE9BQVM0SCxFQUFFN0gsTUFBTUMsTUFBTWYsR0FDNUN1RSxLQUFLM0QsU0FBVyxHQUFHK0gsRUFBRTdILE1BQU1DLE1BQU1mLE1BQU0ySSxFQUFFN0gsTUFBTWQsS0FDMUN1RSxLQUFLM0QsU0FBVytILEVBQUUzSSxJQUkzQixHQUFJMkksRUFBRWpULFNBQVMsS0FBZixDQUNFLE1BQU80SyxRQUFTQyxTQUFXb0ksRUFBRW5JLE1BQU0sS0FDbkMsR0FBZ0IsVUFBWkYsUUFDRmlFLEtBQUtzbUIsT0FBUzEyQixLQUFLc00sT0FBT0MsT0FBT0gsU0FDakNnRSxLQUFLc21CLE9BQU81cEIsTUFBUXNELEtBQUtzbUIsT0FBTzdwQixTQUMzQixDQUNMLE1BQU1ELE1BQVE1TSxLQUFLaU8sT0FBTy9OLElBQUlpTSxTQUM5QixJQUFLUyxNQUFPLE9BQ1osTUFBTXNCLFVBQVl0QixNQUFNdUIsb0JBQW9CLFFBQVMvQixTQUNyRCxJQUFLOEIsVUFBVyxPQUNoQixNQUFNdkIsTUFBUSxJQUFJeUIsTUFBTUYsV0FDeEJrQyxLQUFLc21CLE9BQVMvcEIsTUFBTXhELE1BQ3BCaUgsS0FBS3NtQixPQUFPNXBCLE1BQVFILE1BQU1FLFdBSzlCdUQsS0FBS3NtQixPQUFTMTJCLEtBQUtzTSxPQUFPcE0sSUFBSXNVLEdBQzlCcEUsS0FBS2pILE1BQU0yRCxNQUFRc0QsS0FBS2pILE1BQU0wRCxVQWhDNUJ1RCxLQUFLc21CLE9BQVNsaUIsRUFtQ2RpcUMsd0JBQ0YsR0FBSXJ1QyxLQUFLc3VDLGtCQUFtQixPQUFPLEtBQ25DLEdBQUl0dUMsS0FBSzh0QyxhQUFjLE9BQU8sS0FDOUIsR0FBSTl0QyxLQUFLQyxjQUFnQkQsS0FBSzRDLFdBQVksQ0FDeEMsTUFBTTJyQyxNQUFRLEdBQ2QsSUFDRSxJQUFJbjNCLE1BQVEsRUFDWkEsTUFBUXBYLEtBQUtDLGFBQWVELEtBQUs0QyxXQUFhLEVBQzlDd1UsUUFFQW0zQixNQUFNcjlDLEtBQUs4TyxLQUFLZ0QsV0FBYSxRQUFVLFFBRXpDLE1BQU13ckMsWUFBYzUrQyxLQUFLNFAsS0FBS1ksT0FBTyx1QkFBd0IsQ0FDM0RqRCxNQUFPNkMsS0FBS0MsYUFBZUQsS0FBSzRDLFdBQWEsSUFFL0MsTUFBTyxDQUNMaWIsU0FBUyxFQUNUNHdCLFNBQVV6dUMsS0FBS2dELFdBQWEsV0FBYSxVQUN6QzByQyxLQUFNRixZQUNORCxPQUVHLENBQ0wsTUFBTUEsTUFBUSxHQUNSdHVDLGFBQWVELEtBQUsrQyxVQUFZLEVBQUkvQyxLQUFLQyxhQUMvQyxJQUFLLElBQUltWCxNQUFRLEVBQUdBLE1BQVFwWCxLQUFLNEMsV0FBYTNDLGFBQWNtWCxRQUMxRG0zQixNQUFNcjlDLEtBQUs4TyxLQUFLK0MsU0FBVyxRQUFVLFVBRXZDLE1BQU00ckMsWUFBYy8rQyxLQUFLNFAsS0FBS1ksT0FBTyx3QkFBeUIsQ0FDNURqRCxNQUFPNkMsS0FBSzRDLFdBQWEzQyxlQUUzQixNQUFPLENBQ0w0ZCxTQUFTLEVBQ1Q0d0IsU0FBVXp1QyxLQUFLK0MsU0FBVyxTQUFXLFVBQ3JDMnJDLEtBQU1DLFlBQ05KLFFBS0Z0cUMsY0FJRixZQUhJQyxJQUFjbEUsS0FBS21FLFdBQ3JCbkUsS0FBS21FLFNBQTZCLGNBQWxCbkUsS0FBS3ZRLFVBRWhCdVEsS0FBS21FLFNBR1ZGLFlBQVNHLEdBQ1hwRSxLQUFLbUUsU0FBV0MsRUFHZGtxQyx3QkFDRixRQUNFdHVDLEtBQUs0dUMsc0JBQ0w1dUMsS0FBSzZ1QyxxQkFDTDd1QyxLQUFLOHVDLGtCQUNMOXVDLEtBQUsrdUMsc0JBSUE3dUMsVUFBVW1HLGdCQUFnQjJJLFVBQVloUCxLQUFLNEMsV0FHaERuVCxlQUVGLE9BREt1USxLQUFLcUUsWUFBV3JFLEtBQUtxRSxVQUFZelUsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGFBQ3pEa1EsS0FBS3FFLFVBR1Y1VSxhQUFVMlUsSUFDRixJQUFOQSxJQUFhcEUsS0FBS3FFLFVBQVl6VSxLQUFLSSxTQUFTRixJQUFJLE9BQVEsYUFDNURrUSxLQUFLcUUsVUFBWUQsRUFHZnZELFVBQU91RCxHQUNUcEUsS0FBS2d2QyxPQUFTaHZDLEtBQUtpdkMsZUFBZTdxQyxHQUNsQ3BFLEtBQUtjLFFBQVVzRCxFQUdiMUQsU0FBTTBELEdBQ1JwRSxLQUFLOGxDLE1BQVE5bEMsS0FBS2l2QyxlQUFlN3FDLEdBQ1IsV0FBckJwRSxLQUFLOGxDLE9BQU81cUMsS0FDZDhFLEtBQUtXLE9BQVN5RCxHQUVkcEUsS0FBSzhsQyxXQUFRNWhDLEVBQ2JsRSxLQUFLVyxZQUFTdUQsR0FJbEIrcUMsZUFBZ0I3cUMsR0FDZCxPQUFTLE1BQUxBLEVBQWtCLEtBQ2xCQSxhQUFhOGxDLEtBQWE5bEMsRUFDMUJwRSxLQUFLc21CLE9BQWV0bUIsS0FBS3NtQixPQUFPMWxCLE1BQU05USxJQUFJc1UsR0FDdkN4VSxLQUFLZ1IsTUFBTTlRLElBQUlzVSxHQUdwQnJMLFlBQ0YsR0FBS2lILEtBQUtzbUIsUUFBV3RtQixLQUFLc21CLFFBQVE3cUIsSUFZM0IsR0FBcUMsV0FBakN1RSxLQUFLc21CLE9BQU94aUIsWUFBWXJILEtBQW1CLENBQ3BELE1BQU0xRCxNQUFRLElBQUkyN0IsU0FBUzEwQixLQUFLc21CLFFBQ2hDdG1CLEtBQUtzbUIsT0FBU3Z0QixZQVhkLEdBRklpSCxLQUFLM0QsV0FBVTJELEtBQUtzbUIsT0FBUzdyQixXQUFXNkIsZ0JBQWdCMEQsS0FBSzNELFdBQzdEMkQsS0FBS29ELFVBQVNwRCxLQUFLc21CLE9BQVM3ckIsV0FBVzZCLGdCQUFnQjBELEtBQUtvRCxXQUMzRHBELEtBQUtzbUIsT0FDUixNQUFPLENBQ0w0b0IsU0FBUyxFQUNUenlDLEtBQU11RCxLQUFLOGlCLFVBQVk5aUIsS0FBSzhpQixlQUFZNWUsRUFDeEN6SSxRQUFJeUksRUFDSi9GLElBQUssd0RBQ0xzM0IsU0FBVSx5REFPaEIsT0FBT3oxQixLQUFLc21CLE9BR1Z6bEIsWUFrQkYsT0FqQktiLEtBQUtndkMsUUFBVWh2QyxLQUFLYyxVQUN2QmQsS0FBS2d2QyxPQUFTaHZDLEtBQUtqSCxPQUFPNkgsTUFBTTlRLElBQUlrUSxLQUFLYyxXQUV0Q2QsS0FBS2d2QyxRQUFVaHZDLEtBQUtVLE1BQ25CVixLQUFLVSxLQUFLck4sS0FBS0EsS0FBS3dOLFFBQ2xCYixLQUFLVSxLQUFLck4sS0FBS0EsS0FBS3dOLE1BQU1vZixLQUFLeGtCLEtBQU91RSxLQUFLbXZDLGVBQzdDbnZDLEtBQUtndkMsT0FBU2h2QyxLQUFLc21CLE9BQU8xbEIsTUFBTTlRLElBQUlrUSxLQUFLVSxLQUFLck4sS0FBS0EsS0FBS3dOLE1BQU1vZixLQUFLeGtCLElBRW5FdUUsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUt3TixNQUFNc2YsV0FBVzFrQixJQUNyQ3VFLEtBQUttdkMsaUJBRUxudkMsS0FBS2d2QyxPQUFTaHZDLEtBQUtzbUIsT0FBTzFsQixNQUFNOVEsSUFDOUJrUSxLQUFLVSxLQUFLck4sS0FBS0EsS0FBS3dOLE1BQU1zZixXQUFXMWtCLE1BS3RDdUUsS0FBS2d2QyxPQUdWdHVDLFdBSUYsT0FIS1YsS0FBSzhsQyxPQUFTOWxDLEtBQUtXLFFBQVVYLEtBQUtqSCxRQUNyQ2lILEtBQUs4bEMsTUFBUTlsQyxLQUFLakgsTUFBTTZILE1BQU05USxJQUFJa1EsS0FBS1csU0FFbENYLEtBQUs4bEMsTUFHVnNKLHdCQUNGLE9BQU94L0MsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLHFCQUcvQnUvQywrQkFDRixPQUFPei9DLEtBQUtJLFNBQVNGLElBQUksT0FBUSw0QkFHL0J3L0MsOEJBQ0YsT0FBT3R2QyxLQUFLb3ZDLG1CQUFxQnB2QyxLQUFLcXZDLHlCQUdwQ0UsOEJBQ0YsT0FBUXZ2QyxLQUFLb3ZDLG9CQUFzQnB2QyxLQUFLcXZDLHlCQUd0Q0csWUFDRixPQUFJeHZDLEtBQUthLE1BQWNiLEtBQUthLE1BQU0xQyxJQUM5QjZCLEtBQUtVLEtBQWFWLEtBQUtVLEtBQUt2QyxTQUFoQyxFQUlFeW1DLFdBQ0YsT0FBTzVrQyxLQUFLeXZDLGlCQUFpQmprQyxVQUczQnhILHlCQUNGLE9BQU9wVSxLQUFLSSxTQUFTRixJQUFJLE9BQVEsc0JBR25DMi9DLGVBQWdCLzNCLFFBQVUsTUFDeEIsTUFBTXJrQixLQUFPLENBQ1hDLElBQUssQ0FBQyxZQUFhLGFBQWF5MUIsT0FBT3JSLFNBQ3ZDbmtCLFFBQVMsQ0FBRStPLE1BQU8sU0FDbEJ3bkIsS0FBTTlwQixLQUFLd3ZDLE1BQ1AscUNBQXFDeHZDLEtBQUt3dkMsaUJBQzFDLDhCQUNKNzlDLE1BQU9xTyxLQUFLaUUsU0FHUnJCLFdBQWExQyxVQUFVeXBDLGlCQUFpQjNwQyxLQUFLbXVDLGFBQzdDMzZDLE1BQVE1RCxLQUFLNFAsS0FBS1ksT0FDdEIsaUJBQWtCSixLQUFLbXVDLFlBQW1CLE9BQUwsS0FDbENudUMsS0FBS2l1QyxjQUFxQixRQUFMLEtBRXhCLENBQ0VyckMsV0FDQTNQLFNBQVUrTSxLQUFLaXVDLGNBQ2Z4eEMsS0FBTXVELEtBQUt2RCxPQUlUM0ksRUFBSUMsU0FBU0MsY0FBYyxLQU9qQyxPQU5BRixFQUFFTixNQUFRQSxNQUNWTSxFQUFFRyxVQUFVQyxPQUFPYixLQUFLQyxLQUN4QlEsRUFBRU8sVUFBWSxHQUFHaEIsS0FBSzFCLE1BQVEsbUNBQXFDLEtBQ2pFMEIsS0FBS3kyQixPQUNKOXBCLEtBQUt2RCxPQUVEM0ksRUFHVHhELFdBQVl1UyxRQUFVLEtBQU1ELFdBQWEsTUFDbkNDLFVBQVM3QyxLQUFLc0IsYUFBZXVCLFNBQzdCRCxhQUFZNUMsS0FBSzRDLFdBQWFBLFlBQzdCNUMsS0FBSzh6QixlQUFlOXpCLEtBQUtxSixXQUdoQzlaLGVBQWUsV0FDQTJRLFVBQVVtRyxnQkFBZ0JsRyxRQUFPLGFBQy9CLEtBQUksU0FDUixLQUFJLGVBQ0UsS0FBSSxVQUNULEtBQUksU0FDTCxFQUFDLE1BQ0osS0FBSSxpQkFDTyxFQUFDLHNCQUNJLEVBQUMsWUFDWCxLQUFJLFVBQ04sTUFDVixJQUNGLE1BQU1tQyxNQUFRLElBQUlwQyxVQWtCbEIsT0FqQkFvQyxNQUFNTSxXQUFhQSxXQUNmdEIsZUFBY2dCLE1BQU1oQixhQUFlQSxjQUNuQ2tNLG1CQUFrQmxMLE1BQU1rTCxpQkFBbUJBLGtCQUMzQ0Msd0JBQ0ZuTCxNQUFNbUwsc0JBQXdCQSx1QkFFNUJreEIsY0FBYXI4QixNQUFNcThCLFlBQWNBLGFBQ2pDdGlDLFdBQVVpRyxNQUFNdkosTUFBUXNELFVBQ3hCeW1CLFlBQVd4Z0IsTUFBTXdnQixVQUFZQSxXQUM1QjdjLE1BQU12SSxPQUFPb0YsYUFBWVIsTUFBTVEsU0FBV3BGLE9BQU9vRixXQUNsRFIsTUFBTXZKLFFBQVV1SixNQUFNdkosTUFBTW0yQyxVQUUxQnJ1QyxNQUFPeUIsTUFBTXpCLE1BQVFBLE1BRWhCb0MsZUFBZ0JYLE1BQU1XLGVBQWlCQSxlQUN2Q21HLFlBQVc5RyxNQUFNOEcsVUFBWUEsWUFFakM5RyxNQUdUaFMseUJBQTBCa2UsS0FBTTNMLFFBQVUsS0FBTUQsV0FBYSxNQUN2REMsVUFBUzdDLEtBQUtzQixhQUFldUIsU0FDN0JELGFBQVk1QyxLQUFLNEMsV0FBYUEsWUFDbEM1QyxLQUFLaUQsZUFBaUJ1TCxLQUNqQnhPLEtBQUs4ekIsZUFBZTl6QixLQUFLcUosV0FHaEMvWSxvQkFBcUJ3dEMsT0FBUWo3QixRQUFVLEtBQU1ELFdBQWEsTUFDcERDLFVBQVM3QyxLQUFLc0IsYUFBZXVCLFNBQzdCRCxhQUFZNUMsS0FBSzRDLFdBQWFBLFlBQ2xDNUMsS0FBS29KLFVBQVkwMEIsT0FDWjk5QixLQUFLOHpCLGVBQWU5ekIsS0FBS3FKLFdBR2hDL1ksZ0JBQWlCby9DLElBQUs3c0MsUUFBVSxLQUFNRCxXQUFhLE1BQzdDQyxVQUFTN0MsS0FBS3NCLGFBQWV1QixTQUM3QkQsYUFBWTVDLEtBQUs0QyxXQUFhQSxZQUNsQzVDLEtBQUs4QyxTQUFXNHNDLElBQ1gxdkMsS0FBSzh6QixlQUFlOXpCLEtBQUtxSixXQUdoQy9ZLGVBQWdCMkIsUUFBVSxJQUN4QitOLEtBQUtuUCxLQUNIb0IsUUFBUWhDLFlBQ0RYLFNBQVNXLEtBQUsrUCxLQUFLc0IsYUFBY3RCLEtBQUt2USxTQUFVdVEsS0FBS2lFLFNBQ3pEaFMsUUFBUTI3QixRQUFRSSxZQUFZQyxLQUFLLENBQUU1dkIsSUFBS3ZOLE9BQU9vOUIsT0FBT3I5QixPQUV2RG9CLFFBQVFxWCxnQkFDSmhhLFNBQVM0YSxlQUFlbEssS0FBS25QLEtBQUtaLE1BRzFDK1AsS0FBS2tCLE1BQVEsQ0FDWHZRLEtBQU0sR0FDTkgsS0FBTSxDQUNKMk0sTUFBTzZDLEtBQUtuUCxLQUFLTCxLQUFLQyxPQUV4QkEsTUFBT3VQLEtBQUtuUCxLQUFLSixNQUNqQmsvQyxVQUFXM3ZDLEtBQUtuUCxLQUFLSixNQUFRdVAsS0FBS25QLEtBQUtMLEtBQUtDLE1BQzVDNFEsV0FBWXJCLEtBQUtzQixhQUNqQkMsTUFBT25SLEtBQUtDLElBQUkyUCxLQUFLc0IsY0FDckJFLFVBQ0V4QixLQUFLc0IsYUFBZSxFQUNoQjFSLEtBQUs0UCxLQUFLWSxPQUFPLDRCQUNqQnhRLEtBQUs0UCxLQUFLWSxPQUFPLDBCQUN2QndDLFdBQVk1QyxLQUFLNEMsWUFHbkIsTUFBTXhSLElBQStCLElBQXpCNE8sS0FBS25QLEtBQUtMLEtBQUtDLE1BQWMsSUFBTSxHQUN6Q2MsSUFBK0IsSUFBekJ5TyxLQUFLblAsS0FBS0wsS0FBS0MsTUFBYyxHQUFLLEVBQzlDLElBQUltUixTQUFXNUIsS0FBS25QLEtBQUtKLE1BQVF1UCxLQUFLblAsS0FBS0wsS0FBS0MsTUFFaEQsSUFBSyxJQUFJbWxCLEVBQUksRUFBR0EsRUFBSTVWLEtBQUtuUCxLQUFLRixLQUFLRCxRQUFRWSxPQUFRc2tCLElBQUssQ0FDdEQsTUFBTWpVLElBQU0sR0FDWkEsSUFBSXhFLE1BQVE2QyxLQUFLblAsS0FBS0YsS0FBS0QsUUFBUWtsQixHQUMvQmpVLElBQUl4RSxRQUFVeUUsVUFDaEJBLFNBQVcsSUFDWEQsSUFBSUMsVUFBVyxFQUNYNUIsS0FBS2tCLE1BQU1HLFVBQ2JNLElBQUlFLE9BQVEsRUFDWkYsSUFBSUcsT0FBUSxJQUVaSCxJQUFJRyxPQUFRLEVBQ1pILElBQUlFLE9BQVEsS0FHVkYsSUFBSXhFLFFBQVUvTCxJQUFLdVEsSUFBSUUsT0FBUSxFQUM5QkYsSUFBSUUsT0FBUSxFQUNiRixJQUFJeEUsUUFBVTVMLElBQUtvUSxJQUFJRyxPQUFRLEVBQzlCSCxJQUFJRyxPQUFRLEdBR25COUIsS0FBS2tCLE1BQU12USxLQUFLTyxLQUFLeVEsS0FFdkIzQixLQUFLNHpCLGVBR1B0akMscUJBaUVFLE9BaEVBMFAsS0FBSzRzQyxVQUFZNXNDLEtBQUtzdUMsa0JBRWxCdHVDLEtBQUsrdUMsc0JBQ1AvdUMsS0FBSzRDLFdBQWExQyxVQUFVbUcsZ0JBQWdCbEcsU0FFMUNILEtBQUs4dUMsbUJBQWtCOXVDLEtBQUs0QyxXQUFhMUMsVUFBVW1HLGdCQUFnQmhHLE1BQ25FTCxLQUFLNnVDLHNCQUNQN3VDLEtBQUs0QyxXQUFhMUMsVUFBVW1HLGdCQUFnQi9GLFNBRTFDTixLQUFLNHVDLHVCQUNQNXVDLEtBQUs0QyxXQUFhMUMsVUFBVW1HLGdCQUFnQjlGLFVBRzlDUCxLQUFLNHZDLGNBQTJDLElBQTNCNXZDLEtBQUtrQixNQUFNdlEsS0FBS1csT0FFckMwTyxLQUFLNnZDLFNBQVUsRUFDZjd2QyxLQUFLOHZDLGtCQUFtQixFQUN4Qjl2QyxLQUFLK3ZDLFNBQVUsRUFDZi92QyxLQUFLMGxDLFFBQVMsRUFDZDFsQyxLQUFLZ3dDLGFBQWMsRUFDZmh3QyxLQUFLOHRDLGNBQ1A5dEMsS0FBS2lXLFVBQVcsRUFDaEJqVyxLQUFLay9CLFVBQVcsR0FDTyxNQUFkbC9CLEtBQUtqSCxNQUNkaUgsS0FBSzZ2QyxTQUFVLEdBRVg3dkMsS0FBS2lELGlCQUNQakQsS0FBSzh2QyxrQkFBbUIsRUFDeEI5dkMsS0FBSzhDLFNBQ0g5QyxLQUFLakgsTUFBTTFGLEtBQUtBLEtBQUs2QixnQkFBZ0I4SyxLQUFLaUQsZ0JBQWdCOUYsT0FHMUQ2QyxLQUFLYSxRQUNQYixLQUFLK3ZDLFNBQVUsRUFDZi92QyxLQUFLOEMsU0FBVzlDLEtBQUthLE1BQU0xRCxPQUd6QjZDLEtBQUtvSixZQUNQcEosS0FBS2d3QyxhQUFjLEVBQ25CaHdDLEtBQUs4QyxTQUFXOUMsS0FBS2pILE1BQU0xRixLQUFLQSxLQUFLc1gsUUFBUTNLLEtBQUtvSixXQUFXak0sUUFJNUQ2QyxLQUFLbWUsV0FBY25lLEtBQUs4dEMsZUFDdkI5dEMsS0FBS290QixnQkFBa0JwdEIsS0FBSzhDLFdBQzlCOUMsS0FBS0MsYUFBZUMsVUFBVUQsYUFBYUUsU0FFekNILEtBQUtvdEIsZ0JBQWtCcHRCLEtBQUt1dEMsZ0JBQzlCdnRDLEtBQUtDLGFBQWVDLFVBQVVELGFBQWFJLE1BRXpDTCxLQUFLb3RCLGdCQUFrQnB0QixLQUFLd3RDLG1CQUM5Qnh0QyxLQUFLQyxhQUFlQyxVQUFVRCxhQUFhSyxTQUV6Q04sS0FBS290QixlQUFpQnB0QixLQUFLOEMsV0FDN0I5QyxLQUFLQyxhQUFlQyxVQUFVRCxhQUFhUSxTQUVqQixJQUF4QlQsS0FBS290QixpQkFDUHB0QixLQUFLQyxhQUFlQyxVQUFVRCxhQUFhTSxVQUV6Q1AsS0FBS3l0QyxpQkFBbUJ6dEMsS0FBS290QixpQkFDL0JwdEIsS0FBS0MsYUFBZUMsVUFBVUQsYUFBYU8sU0FJdkNSLEtBQUtDLGNBQ1gsS0FBS0MsVUFBVUQsYUFBYUUsUUFDMUJILEtBQUtELFdBQWFuUSxLQUFLNFAsS0FBS1ksT0FBTyx1QkFDbkMsTUFDRixLQUFLRixVQUFVRCxhQUFhSSxLQUMxQkwsS0FBS0QsV0FBYW5RLEtBQUs0UCxLQUFLWSxPQUFPLG9CQUNuQyxNQUNGLEtBQUtGLFVBQVVELGFBQWFLLFFBQzFCTixLQUFLRCxXQUFhblEsS0FBSzRQLEtBQUtZLE9BQU8sdUJBQ25DLE1BQ0YsS0FBS0YsVUFBVUQsYUFBYU0sU0FDMUJQLEtBQUtELFdBQWFuUSxLQUFLNFAsS0FBS1ksT0FBTyx3QkFDbkMsTUFDRixLQUFLRixVQUFVRCxhQUFhTyxPQUMxQlIsS0FBS0QsV0FBYW5RLEtBQUs0UCxLQUFLWSxPQUFPLGVBQ25DLE1BQ0YsS0FBS0YsVUFBVUQsYUFBYVEsUUFDMUJULEtBQUtELFdBQWFuUSxLQUFLNFAsS0FBS1ksT0FBTyxnQkE4Q3ZDLEdBdkNJSixLQUFLc3VDLGtCQUNQdHVDLEtBQUtpd0MsZ0JBQWtCLEdBQ2Jqd0MsS0FBSzh0QyxlQUNmOXRDLEtBQUtpd0MsZ0JBQWtCcmdELEtBQUs0UCxLQUFLWSxPQUFPLHVCQUF3QixDQUM5RDZ2QyxnQkFBaUJqd0MsS0FBSzJwQyxvQkFJRSxJQUF4QjNwQyxLQUFLb3RCLGlCQUNQcHRCLEtBQUtDLGFBQWVDLFVBQVVELGFBQWFNLFVBRXhDUCxLQUFLbWUsV0FBY25lLEtBQUs0c0MsV0FBYzVzQyxLQUFLOHRDLGVBQzlDOXRDLEtBQUswRyxVQUFZMUcsS0FBSzZHLE9BQ3RCN0csS0FBS21XLFVBQVluVyxLQUFLK0csUUFHeEIvRyxLQUFLd2pCLGdCQUFpQixFQUNsQnhqQixLQUFLK0MsV0FBVS9DLEtBQUtDLGFBQWVDLFVBQVVELGFBQWFPLFFBRTFEUixLQUFLVSxPQUNQVixLQUFLMGxDLFFBQVMsRUFDVjFsQyxLQUFLVSxLQUFLck4sS0FBS0EsS0FBS2szQyxhQUVwQjdzQyxPQUFPc0MsS0FBS290QixpQkFBbUIxdkIsT0FBT3NDLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLazNDLGVBRTFEdnFDLEtBQUt3akIsZ0JBQWlCLEVBQ3RCeGpCLEtBQUtrd0MsZUFBaUJ0Z0QsS0FBSzRQLEtBQUtZLE9BQU8sbUJBQW9CLENBQ3pEcXhCLFNBQVV6eEIsS0FBS1UsS0FBS2pFLGFBRWhCdUQsS0FBS1UsS0FBS3l2QyxlQUFlLy9CLFNBQVM0YSxNQUFNdWYsZUFLcER2cUMsS0FBS3lzQyxjQUFjenNDLEtBQUthLE9BQVFiLEtBQUthLE1BQU00ckMsY0FDaEIsTUFBdkJ6c0MsS0FBS2lELGlCQUF3QmpELEtBQUt5c0MsYUFBYyxHQUNoRHpzQyxLQUFLK0MsV0FBVS9DLEtBQUt5c0MsYUFBYyxHQUNsQ3pzQyxLQUFLaVcsV0FBVWpXLEtBQUt5c0MsYUFBYyxJQUVqQ3pzQyxLQUFLay9CLFVBQVlsL0IsS0FBS2pILE1BQU8sQ0FDaEMsS0FDR2lILEtBQUttZSxXQUNMbmUsS0FBSytHLFFBQ0wvRyxLQUFLK0MsVUFDTi9DLEtBQUs0QyxhQUFlMUMsVUFBVW1HLGdCQUFnQjlGLFVBQzdDUCxLQUFLc3VDLHFCQUVGdHVDLEtBQUthLE9BQVNiLEtBQUtpRCxnQkFBZ0IsQ0FDckMsTUFBTWQsV0FBYW5DLEtBQUtvdEIsZUFBaUJwdEIsS0FBSzB0QyxnQkFDMUMxdEMsS0FBS2pILE1BQU1xZ0MsS0FBT2ozQixhQUNwQm5DLEtBQUtvd0MsZUFBZ0IsRUFDckJwd0MsS0FBS21DLFdBQWFBLFdBQ2xCbkMsS0FBS29DLGNBQWdCeFMsS0FBSzRQLEtBQUtZLE9BQU8saUJBQWtCLENBQ3REaUMsZ0JBQWlCRixjQU16QixJQUFLbkMsS0FBS21lLFlBQ1JuZSxLQUFLZ0MsZ0JBQWtCLElBSXBCaEMsS0FBSzJzQyxTQUNhLFFBQW5CM3NDLEtBQUtvSixXQUNjLFFBQW5CcEosS0FBS29KLFdBQ0wsQ0FDQSxHQUNFcEosS0FBS3N1QyxtQkFDTHR1QyxLQUFLb3RCLGVBQWlCcHRCLEtBQUtzdEMsaUJBQzNCLENBQ0EsTUFBTStDLFVBQVksR0FDbEJBLFVBQVU1dEIsZUFBaUI3eUIsS0FBSzRQLEtBQUtDLFNBQ25DLDBCQUVGNHdDLFVBQVV6dEMsV0FBYTFDLFVBQVVtRyxnQkFBZ0JsRyxRQUNqRGt3QyxVQUFVQyxZQUFjdHdDLEtBQUtvdEIsZUFBaUJwdEIsS0FBS3N0QyxpQkFDbkQrQyxVQUFVRCxjQUFnQkMsVUFBVUMsYUFBZXR3QyxLQUFLakgsTUFBTXFnQyxLQUMxRGlYLFVBQVVDLGFBQWV0d0MsS0FBS2pILE1BQU1xZ0MsTUFDdENwNUIsS0FBS2dDLGdCQUFnQjlRLEtBQUttL0MsV0FJOUIsR0FDRXJ3QyxLQUFLNEMsWUFBYzFDLFVBQVVtRyxnQkFBZ0JsRyxTQUM3Q0gsS0FBS290QixlQUFpQnB0QixLQUFLdXRDLGNBQzNCLENBQ0EsTUFBTThDLFVBQVksR0FDbEJBLFVBQVU1dEIsZUFBaUI3eUIsS0FBSzRQLEtBQUtDLFNBQVMsdUJBQzlDNHdDLFVBQVV6dEMsV0FBYTFDLFVBQVVtRyxnQkFBZ0JoRyxLQUNqRGd3QyxVQUFVQyxZQUFjdHdDLEtBQUtvdEIsZUFBaUJwdEIsS0FBS3V0QyxjQUNuRDhDLFVBQVVELGNBQWdCQyxVQUFVQyxhQUFldHdDLEtBQUtqSCxNQUFNcWdDLEtBQzFEaVgsVUFBVUMsYUFBZXR3QyxLQUFLakgsTUFBTXFnQyxNQUN0Q3A1QixLQUFLZ0MsZ0JBQWdCOVEsS0FBS20vQyxXQUk5QixHQUNFcndDLEtBQUs0QyxZQUFjMUMsVUFBVW1HLGdCQUFnQmhHLE1BQzdDTCxLQUFLb3RCLGVBQWlCcHRCLEtBQUt3dEMsaUJBQzNCLENBQ0EsTUFBTTZDLFVBQVksR0FDbEJBLFVBQVU1dEIsZUFBaUI3eUIsS0FBSzRQLEtBQUtDLFNBQ25DLDBCQUVGNHdDLFVBQVV6dEMsV0FBYTFDLFVBQVVtRyxnQkFBZ0IvRixRQUNqRCt2QyxVQUFVQyxZQUFjdHdDLEtBQUtvdEIsZUFBaUJwdEIsS0FBS3d0QyxpQkFDbkQ2QyxVQUFVRCxjQUFnQkMsVUFBVUMsYUFBZXR3QyxLQUFLakgsTUFBTXFnQyxLQUMxRGlYLFVBQVVDLGFBQWV0d0MsS0FBS2pILE1BQU1xZ0MsTUFDdENwNUIsS0FBS2dDLGdCQUFnQjlRLEtBQUttL0MsWUFNbENyd0MsS0FBS3V3QyxtQkFBcUJ2d0MsS0FBS2dDLGdCQUFnQjFRLE9BQVMsRUFDcEQwTyxLQUFLK0MsV0FBVS9DLEtBQUt1d0Msb0JBQXFCLEdBbUIvQyxHQWhCQXZ3QyxLQUFLd3dDLG1CQUNIeHdDLEtBQUthLFFBQVViLEtBQUthLE1BQU14TixLQUFLQSxLQUFLK3JCLFdBQVd2cEIsV0FHL0NtSyxLQUFLK0csUUFDTC9HLEtBQUtzQixjQUFnQixHQUNyQnRCLEtBQUthLFFBQ0piLEtBQUthLE1BQU14TixLQUFLQSxLQUFLK3JCLFdBQVd2cEIsVUFDaENtSyxLQUFLbWUsV0FDTG5lLEtBQUt5d0MsUUFDTHp3QyxLQUFLaUUsU0FDTGpFLEtBQUs0c0MsV0FFTjVzQyxLQUFLZzBCLHNCQUdIaDBCLEtBQUt1UCxPQUFRLENBQ2YsTUFBTUEsYUFBZW1oQyxTQUFTMXdDLEtBQUt1UCxRQUMvQkEsUUFBVSxlQUFnQkEsY0FDdEJBLE9BQU8wYixXQUFXanJCLEtBQUsyd0MsaUJBTW5DNXZDLGVBQ0UsR0FBSW5SLEtBQUtDLFFBQVFDLElBQUksaUJBQWlCQyxPQUFRLENBQzVDLE1BQU1pUixZQUFjLEdBQ3BCLElBQUssTUFBTUMsYUFBYWpCLEtBQUtrQixNQUFNdlEsS0FDakNxUSxZQUFZOVAsS0FBeUIsTUFBcEIrUCxVQUFVOUQsTUFBZ0IsRUFBSThELFVBQVU5RCxNQUFRLElBRW5FNkQsWUFBWTlQLEtBQUs4TyxLQUFLa0IsTUFBTTFRLEtBQUsyTSxPQUVqQyxNQUFNZ0UsU0FBVyxDQUNmMU4sUUFBUyxHQUFHdU0sS0FBS2tCLE1BQU12USxLQUFLVyxrQkFDNUJaLFFBQVNzUSxZQUNUdFAsUUFBUyxLQUNUQyxPQUFPLEdBRVQvQixLQUFLa0MsT0FBT3NQLEtBQUtELFdBSWpCc3RDLGVBQ0YsSUFBSUEsU0FBVyxHQWVmLE9BZEl6dUMsS0FBS21XLFlBQVdzNEIsU0FBVyxXQUMzQnp1QyxLQUFLMEcsWUFBVytuQyxTQUFXLFdBQzNCenVDLEtBQUtnRCxhQUFlaEQsS0FBSzBHLFlBQVcrbkMsU0FBVyxvQkFDL0N6dUMsS0FBSytDLFdBQWEvQyxLQUFLbVcsWUFBV3M0QixTQUFXLGtCQUM3Q3Z1QyxVQUFVRCxhQUFhRSxVQUFZSCxLQUFLQyxlQUMxQ3d1QyxVQUFZLG9CQUVWdnVDLFVBQVVELGFBQWFJLE9BQVNMLEtBQUtDLGVBQ3ZDd3VDLFVBQVksaUJBRVZ2dUMsVUFBVUQsYUFBYUssVUFBWU4sS0FBS0MsZUFDMUN3dUMsVUFBWSxvQkFHUEEsU0FHTG1DLG1CQUNGLE1BQU1uQyxTQUFXLEdBZWpCLE9BZEl6dUMsS0FBS21XLFdBQVdzNEIsU0FBU3Y5QyxLQUFLLFdBQzlCOE8sS0FBSzBHLFdBQVcrbkMsU0FBU3Y5QyxLQUFLLFdBQzlCOE8sS0FBS2dELGFBQWVoRCxLQUFLMEcsV0FBVytuQyxTQUFTdjlDLEtBQUssVUFBVyxZQUM3RDhPLEtBQUsrQyxXQUFhL0MsS0FBS21XLFdBQVdzNEIsU0FBU3Y5QyxLQUFLLFVBQVcsVUFDM0RnUCxVQUFVRCxhQUFhRSxVQUFZSCxLQUFLQyxjQUMxQ3d1QyxTQUFTdjlDLEtBQUssbUJBRVpnUCxVQUFVRCxhQUFhSSxPQUFTTCxLQUFLQyxjQUN2Q3d1QyxTQUFTdjlDLEtBQUssZ0JBRVpnUCxVQUFVRCxhQUFhSyxVQUFZTixLQUFLQyxjQUMxQ3d1QyxTQUFTdjlDLEtBQUssbUJBR1R1OUMsU0FHTG9DLHFCQUNGLE9BQUk3d0MsS0FBS21XLFdBQWFuVyxLQUFLOHdDLGNBQXNCLFVBQzdDOXdDLEtBQUswRyxXQUFhMUcsS0FBSyt3QyxjQUFzQixVQUMxQyxLQUdUemdELG1CQUFvQnd6QixhQUFjNWEsUUFBUyxHQUN6QyxNQUFNNmEsaUJBQW1CL2pCLEtBQUtnQyxnQkFBZ0I4aEIsY0FDeEMvRixXQUNKeHJCLFNBQVN3eEIsaUJBQWlCaEcsYUFDMUJ4ckIsU0FBU3d4QixpQkFBaUJ1c0IsYUFDNUIsSUFBS3R3QyxLQUFLakgsTUFBTW1sQixVQUFVSCxZQU14QixZQUxBMWUsR0FBR0MsY0FBY2tXLE1BQ2Y1bEIsS0FBSzRQLEtBQUtZLE9BQU8sMEJBQTJCLENBQzFDckgsTUFBT2lILEtBQUtqSCxNQUFNMEQsUUFLeEJ1RCxLQUFLZ3hDLGVBQWtCeitDLFNBQVN5TixLQUFLZ3hDLGdCQUVqQ3orQyxTQUFTeU4sS0FBS2d4QyxnQkFEZCxFQUVKaHhDLEtBQUtneEMsZ0JBQWtCeitDLFNBQVN3ckIsWUFDaEMsTUFBTUMsZ0JBQ0p6ckIsU0FBU3d4QixpQkFBaUIvRixrQkFDMUJ6ckIsU0FBU3d4QixpQkFBaUJuaEIsWUFDNUI1QyxLQUFLQyxhQUFlK2QsZ0JBQ2hCaGUsS0FBSzRDLFlBQWNvYixrQkFDckJoZSxLQUFLbVcsV0FBWSxFQUNqQm5XLEtBQUswRyxXQUFZLEdBRW5CLElBQUssSUFBSTBRLE1BQVEsRUFBR0EsTUFBUTBNLGFBQWUsRUFBRzFNLFFBQzVDcFgsS0FBS2dDLGdCQUFnQml2QyxRQUV2QixJQUFLLE1BQU03ekMsS0FBSzRDLEtBQUtnQyxnQkFDbkI1RSxFQUFFa3pDLFlBQWNsekMsRUFBRWt6QyxZQUFjdnlCLFdBSWxDLE9BRkEvZCxLQUFLbWUsV0FBWSxFQUNqQm5lLEtBQUs0ekIsZUFDRDFxQixhQUFxQmxKLEtBQUsyYyxzQkFBOUIsRUFHRnUwQixpQkFDRWx4QyxLQUFLdXdDLG9CQUFxQixFQUMxQnZ3QyxLQUFLZ0MsZ0JBQWtCLEdBQ3ZCaEMsS0FBS21DLFdBQWEsRUFDbEJuQyxLQUFLb0MsY0FBZ0IsS0FDckJwQyxLQUFLeXNDLGFBQWMsRUFHckJoYSxVQUFXMVUsV0FBYSxLQUFNN1UsUUFBUyxHQUNyQyxHQUFJNlUsV0FBWSxDQUNkL2QsS0FBS2pILE1BQU1tbEIsVUFBVUgsWUFDckIvZCxLQUFLQyxhQUFlRCxLQUFLNEMsV0FDekIsSUFBSyxNQUFNeEYsS0FBSzRDLEtBQUtnQyxnQkFDbkI1RSxFQUFFa3pDLFlBQWNsekMsRUFBRWt6QyxZQUFjdnlCLFdBRWxDL2QsS0FBS21lLFdBQVksRUFDakJuZSxLQUFLbVcsV0FBWSxFQUNqQm5XLEtBQUtneEMsZUFBa0J6K0MsU0FBU3lOLEtBQUtneEMsZ0JBRWpDeitDLFNBQVN5TixLQUFLZ3hDLGdCQURkLEVBRUpoeEMsS0FBS2d4QyxnQkFBa0J6K0MsU0FBU3dyQixZQUNoQy9kLEtBQUs0ekIsZUFDRDFxQixRQUFRbEosS0FBSzJjLHNCQUVqQjNjLEtBQUt5d0MsUUFBUyxFQUNkendDLEtBQUs4d0MsZUFBZ0IsRUFDakI5d0MsS0FBSzRzQyxVQUNQNXNDLEtBQUtteEMsa0JBQWtCanhDLFVBQVVELGFBQWFFLFFBQVMrSSxRQUV2RGxKLEtBQUtteEMsa0JBQWtCbnhDLEtBQUs0QyxXQUFZc0csUUFLOUN1cUIsVUFBV3ZxQixRQUFTLEdBQ2xCbEosS0FBS3l3QyxRQUFTLEVBQ2R6d0MsS0FBSyt3QyxlQUFnQixFQUNqQi93QyxLQUFLNHNDLFVBQ1A1c0MsS0FBS214QyxrQkFBa0JqeEMsVUFBVUQsYUFBYVEsUUFBU3lJLFFBRXZEbEosS0FBS214QyxrQkFBa0JueEMsS0FBSzRDLFdBQWEsRUFBR3NHLFFBSWhEa29DLFlBQWFDLEtBQU1DLElBQUtwb0MsUUFBUyxHQUMvQixJQUFJelksTUFBUUwsS0FBS3VpQixNQUFNdmlCLEtBQUttaEQsVUFBWUYsS0FBT0MsTUFBUUEsSUFBTSxFQUM3RCxNQUFNRSxVQUFZL2dELE1BQVEsR0FDMUIsSUFBSWdoRCxTQUFXcmhELEtBQUt1aUIsTUFBTWxpQixNQUFRLElBQ2xDLE1BQU1FLEtBQU8sR0FFYixJQUFJK2dELFVBQVl0aEQsS0FBS0MsSUFBSTJQLEtBQUtzQixnQkFBa0IzUSxLQUFLVyxPQUNyRCxNQUFRb2dELFdBQVcsQ0FDakIsSUFBSUMsSUFBTXZoRCxLQUFLdWlCLE1BQXNCLEdBQWhCdmlCLEtBQUttaEQsVUFDdEJ0aEQsS0FBYSxHQUFOMGhELElBQVdILFVBQ1QsSUFBVHZoRCxPQUNGQSxLQUFPLElBQ1AwaEQsSUFBTSxLQUVKM3hDLEtBQUsrdEMsWUFBYzk5QyxNQUFRb2hELE9BQzdCMWdELEtBQUtPLEtBQUt5Z0QsS0FDTjFoRCxLQUFPUSxRQUFPQSxNQUFRUixPQUV4QitQLEtBQUtxQixVQUFZcFIsS0FBT3FoRCxNQUMxQjNnRCxLQUFLTyxLQUFLeWdELEtBQ04xaEQsS0FBT1EsUUFBT0EsTUFBUVIsT0FFNUJ5aEQsVUFBWS9nRCxLQUFLVyxTQUFXbEIsS0FBS0MsSUFBSTJQLEtBQUtzQixjQUkzQixLQUFibXdDLFVBQWlDLElBQWRELFlBQ3JCQyxTQUFXLEtBRWI5Z0QsS0FBSzQ2QixPQUNIbjdCLEtBQUt1aUIsTUFBTXZpQixLQUFLbWhELFNBQVc1Z0QsS0FBS1csT0FBUyxHQUN6QyxFQUNhLEtBQWJtZ0QsU0FBa0IsRUFBSUEsVUFHeEJ6eEMsS0FBS2tCLE1BQU12USxLQUFPLEdBQ2xCcVAsS0FBS2tCLE1BQU0xUSxLQUFLMk0sTUFBUXEwQyxVQUN4Qnh4QyxLQUFLb3RCLGVBQWlCMzhCLE1BQ3RCdVAsS0FBS2tCLE1BQU16USxNQUFRQSxNQUNuQnVQLEtBQUtrQixNQUFNeXVDLFVBQVlsL0MsTUFBUStnRCxVQUUvQixNQUFNcGdELElBQW9CLElBQWRvZ0QsVUFBa0IsSUFBTSxHQUM5QmpnRCxJQUFvQixJQUFkaWdELFVBQWtCLEdBQUssRUFDbkMsSUFBSTV2QyxTQUFXblIsTUFBUStnRCxVQUV2QixJQUFLLElBQUk1N0IsRUFBSSxFQUFHQSxFQUFJamxCLEtBQUtXLE9BQVFza0IsSUFBSyxDQUNwQyxNQUFNalUsSUFBTSxHQUNaQSxJQUFJeEUsTUFBUXhNLEtBQUtpbEIsR0FDYmpVLElBQUl4RSxRQUFVeUUsVUFDaEJBLFNBQVcsSUFDWEQsSUFBSUMsVUFBVyxFQUNYNUIsS0FBS3FCLFVBQ1BNLElBQUlFLE9BQVEsRUFDWkYsSUFBSUcsT0FBUSxJQUVaSCxJQUFJRyxPQUFRLEVBQ1pILElBQUlFLE9BQVEsS0FHVkYsSUFBSXhFLFFBQVUvTCxJQUFLdVEsSUFBSUUsT0FBUSxFQUM5QkYsSUFBSUUsT0FBUSxFQUNiRixJQUFJeEUsUUFBVTVMLElBQUtvUSxJQUFJRyxPQUFRLEVBQzlCSCxJQUFJRyxPQUFRLEdBR25COUIsS0FBS2tCLE1BQU12USxLQUFLTyxLQUFLeVEsS0FHdkIzQixLQUFLNHpCLGVBQ0QxcUIsUUFBUWxKLEtBQUsyYyxpQkFHbkJ3MEIsa0JBQW1CbHhDLGFBQWNpSixRQUFTLEdBQ3hDLElBQUltb0MsS0FBTUMsSUFDTnB4QyxVQUFVRCxhQUFhTyxTQUFXUCxlQUNwQ294QyxLQUFPLElBQ1BDLElBQU10eEMsS0FBS3l0QyxnQkFBa0IsR0FFM0J2dEMsVUFBVUQsYUFBYVEsVUFBWVIsZUFFbkNveEMsS0FERXJ4QyxLQUFLc3RDLG1CQUFxQnR0QyxLQUFLeXRDLGdCQUFrQixFQUM1QyxJQUNLenRDLEtBQUt5dEMsZ0JBQWtCLEVBQ3JDNkQsSUFBTXR4QyxLQUFLc3RDLGtCQUVUcHRDLFVBQVVELGFBQWFFLFVBQVlGLGVBQ3JDb3hDLEtBQU9yeEMsS0FBS3N0QyxpQkFDWmdFLElBQU10eEMsS0FBS3V0QyxlQUVUcnRDLFVBQVVELGFBQWFJLE9BQVNKLGVBQ2xDb3hDLEtBQU9yeEMsS0FBS3V0QyxjQUNaK0QsSUFBTXR4QyxLQUFLd3RDLGtCQUVUdHRDLFVBQVVELGFBQWFLLFVBQVlMLGVBQ3JDb3hDLEtBQU9yeEMsS0FBS3d0QyxpQkFDWjhELElBQU0sR0FFSnB4QyxVQUFVRCxhQUFhTSxXQUFhTixlQUN0Q294QyxLQUFPLEVBQ1BDLElBQU0sR0FFSkQsT0FBU0MsS0FBS0EsTUFDTCxJQUFURCxPQUFZQSxLQUFPcnhDLEtBQUt5dEMsZ0JBQWtCLEdBQzlDenRDLEtBQUtveEMsWUFBWUMsS0FBTUMsSUFBS3BvQyxRQUc5QndxQixxQkFBc0J4cUIsUUFBUyxHQUM3QixJQUFJbW9DLEtBQU1DLElBQ05weEMsVUFBVUQsYUFBYU8sU0FBV1IsS0FBS0MsZUFDekNveEMsS0FBT3J4QyxLQUFLeXRDLGdCQUFrQixFQUU1QjZELElBREV0eEMsS0FBS3N0QyxtQkFBcUJ0dEMsS0FBS3l0QyxnQkFBa0IsRUFDN0N6dEMsS0FBS3V0QyxjQUVMdnRDLEtBQUtzdEMsa0JBR1hwdEMsVUFBVUQsYUFBYVEsVUFBWVQsS0FBS0MsZUFDMUNveEMsS0FBT3J4QyxLQUFLc3RDLGlCQUNaZ0UsSUFBTXR4QyxLQUFLdXRDLGVBRVRydEMsVUFBVUQsYUFBYUUsVUFBWUgsS0FBS0MsZUFDMUNveEMsS0FBT3J4QyxLQUFLdXRDLGNBQ1orRCxJQUFNdHhDLEtBQUt3dEMsa0JBRVR0dEMsVUFBVUQsYUFBYUksT0FBU0wsS0FBS0MsZUFDdkNveEMsS0FBT3J4QyxLQUFLd3RDLGlCQUNaOEQsSUFBTXR4QyxLQUFLcXRDLG1CQUVUbnRDLFVBQVVELGFBQWFLLFVBQVlOLEtBQUtDLGVBQzFDb3hDLEtBQU9yeEMsS0FBS3F0QyxrQkFDWmlFLElBQU0sR0FFSkQsT0FBU0MsS0FBS0EsTUFDbEJ0eEMsS0FBS294QyxZQUFZQyxLQUFNQyxJQUFLcG9DLFFBRzlCeXFCLHFCQUFzQnpxQixRQUFTLEdBQzdCLElBQUltb0MsS0FBTUMsSUFDTnB4QyxVQUFVRCxhQUFhUSxVQUFZVCxLQUFLQyxlQUMxQ294QyxLQUFPLElBQ1BDLElBQU10eEMsS0FBS3l0QyxnQkFBa0IsR0FFM0J2dEMsVUFBVUQsYUFBYUUsVUFBWUgsS0FBS0MsZUFDMUNveEMsS0FBT3J4QyxLQUFLeXRDLGdCQUFrQixFQUM5QjZELElBQU10eEMsS0FBS3N0QyxrQkFFVHB0QyxVQUFVRCxhQUFhSSxPQUFTTCxLQUFLQyxlQUN2Q294QyxLQUFPcnhDLEtBQUtzdEMsaUJBQ1pnRSxJQUFNdHhDLEtBQUt1dEMsZUFFVHJ0QyxVQUFVRCxhQUFhSyxVQUFZTixLQUFLQyxlQUMxQ294QyxLQUFPcnhDLEtBQUt1dEMsY0FDWitELElBQU10eEMsS0FBS3d0QyxrQkFFVHR0QyxVQUFVRCxhQUFhTSxXQUFhUCxLQUFLQyxlQUMzQ294QyxLQUFPcnhDLEtBQUt3dEMsaUJBQ1o4RCxJQUFNLEdBRUssSUFBVEQsT0FBWUEsS0FBT3J4QyxLQUFLeXRDLGdCQUFrQixHQUM5Q3p0QyxLQUFLb3hDLFlBQVlDLEtBQU1DLElBQUtwb0MsUUFHOUI1WSw0QkFDRTBQLEtBQUs0eEMsdUJBQXdCLEVBQ3pCNXhDLEtBQUthLGFBQWFiLEtBQUthLE1BQU1tekIsc0JBRy9CcHhCLGVBQVl3QixHQUNkcEUsS0FBS211QyxZQUFjNTdDLFNBQVM2UixHQUcxQnhCLGlCQUNGLE9BQU81QyxLQUFLbXVDLFlBR1ZwekMsV0FBUXFKLEdBQ1ZwRSxLQUFLNnhDLFFBQVV6dEMsRUFHYitsQyxZQUFTL2xDLEdBQ1hwRSxLQUFLOHhDLFNBQVcxdEMsRUFHZCtsQyxjQUNGLEdBQUtucUMsS0FBSzh4QyxTQUNWLE9BQU85eEMsS0FBSzh4QyxTQUdWdmlDLFdBQVFuTCxHQUNMcEUsS0FBSzhzQyxPQUFNOXNDLEtBQUs4c0MsS0FBT0UsUUFBUUMsTUFBTUMsU0FBUyxLQUNuRGx0QyxLQUFLK3hDLFdBQWEzdEMsRUFHaEJtTCxhQUNGLEdBQUt2UCxLQUFLK3hDLFdBQ1YsT0FBTy94QyxLQUFLK3hDLFdBR1ZoM0MsYUFDRixHQUFJaUYsS0FBSzZ4QyxRQUFTLE9BQU83eEMsS0FBSzZ4QyxRQUM5QixJQUFJOTJDLE9BQVMsR0E2RGIsT0E1RElpRixLQUFLakgsT0FBTzFGLE9BQ1YyTSxLQUFLYSxNQUNQOUYsT0FBU25MLEtBQUs0UCxLQUFLWSxPQUFPLG1CQUFvQixDQUM1QzNELEtBQU11RCxLQUFLYSxNQUFNdzBCLFVBQ2pCbDRCLE1BQU82QyxLQUFLb3RDLGVBQ1p4cUMsV0FBWTVDLEtBQUsycEMsbUJBRVYzcEMsS0FBS1UsS0FDZDNGLE9BQVNuTCxLQUFLNFAsS0FBS1ksT0FBTyx1QkFBd0IsQ0FDaERNLEtBQU1WLEtBQUtVLEtBQUtqRSxLQUNoQm9FLE1BQU9iLEtBQUthLE1BQU1wRSxLQUNsQlUsTUFBTzZDLEtBQUtvdEMsZUFDWnhxQyxXQUFZNUMsS0FBSzJwQyxtQkFFVjNwQyxLQUFLaUQsZUFDZGxJLE9BQVNuTCxLQUFLNFAsS0FBS1ksT0FBTyxtQkFBb0IsQ0FDNUMzRCxLQUFNN00sS0FBSzRQLEtBQUtZLE9BQ2RKLEtBQUtqSCxNQUFNMUYsS0FBS0EsS0FBSzZCLGdCQUFnQjhLLEtBQUtpRCxnQkFBZ0IwTCxPQUU1RHhSLE1BQU82QyxLQUFLb3RDLGVBQ1p4cUMsV0FBWTVDLEtBQUsycEMsbUJBRVYzcEMsS0FBS29KLFVBQ2RyTyxPQUFTbkwsS0FBSzRQLEtBQUtZLE9BQU8sbUJBQW9CLENBQzVDM0QsS0FBTTdNLEtBQUs0UCxLQUFLWSxPQUNkLFFBQVFKLEtBQUtqSCxNQUFNMUYsS0FBS0EsS0FBS3NYLFFBQVEzSyxLQUFLb0osV0FBV3VGLFNBRXZEeFIsTUFBTzZDLEtBQUtvdEMsZUFDWnhxQyxXQUFZNUMsS0FBSzJwQyxtQkFFVjNwQyxLQUFLMitCLGNBQ2Q1akMsT0FBU25MLEtBQUs0UCxLQUFLWSxPQUFPLG1CQUFvQixDQUM1QzNELEtBQU11RCxLQUFLMitCLFlBQ1h4aEMsTUFBTzZDLEtBQUtvdEMsZUFDWnhxQyxXQUFZNUMsS0FBSzJwQyxxQkFLbEI1dUMsUUFDQ2lGLEtBQUs4QyxXQUVML0gsT0FERWlGLEtBQUsyK0IsWUFDRS91QyxLQUFLNFAsS0FBS1ksT0FBTyxtQkFBb0IsQ0FDNUMzRCxLQUFNdUQsS0FBSzIrQixZQUNYeGhDLE1BQU82QyxLQUFLb3RDLGVBQ1p4cUMsV0FBWTVDLEtBQUsycEMsbUJBR1YvNUMsS0FBSzRQLEtBQUtZLE9BQU8scUJBQXNCLENBQzlDNHhDLFNBQVVoeUMsS0FBSzhDLFNBQ2ZGLFdBQVk1QyxLQUFLMnBDLG9CQU1yQjNwQyxLQUFLMnNDLFVBQ1A1eEMsT0FBUyxHQUFHbkwsS0FBSzRQLEtBQUtZLE9BQU8sbUJBQW1CckYsVUFHM0NBLE9BR0xrM0Msb0JBQ0YsT0FBSWp5QyxLQUFLb0osVUFFTHhaLEtBQUs0UCxLQUFLWSxPQUNSLGlCQUNFSixLQUFLNEMsYUFBZTFDLFVBQVVtRyxnQkFBZ0JsRyxRQUFVLEdBQUssU0FDM0RILEtBQUtzQixhQUFvQixRQUFMLEtBQ3hCLENBQ0VzQixXQUFZNUMsS0FBSzJwQyxpQkFDakIxMkMsU0FBVStNLEtBQUtzQixhQUNmN0UsS0FBTTdNLEtBQUs0UCxLQUFLWSxPQUNkLFFBQVFKLEtBQUtqSCxNQUFNMUYsS0FBS0EsS0FBS3NYLFFBQVEzSyxLQUFLb0osV0FBV3VGLFdBR3ZELEtBQUszTyxLQUFLakgsTUFBTTFGLEtBQUtBLEtBQUtzWCxRQUFRM0ssS0FBS29KLFdBQVdqTSxVQUd0RDZDLEtBQUtpRCxlQUVMclQsS0FBSzRQLEtBQUtZLE9BQ1IsaUJBQ0VKLEtBQUs0QyxhQUFlMUMsVUFBVW1HLGdCQUFnQmxHLFFBQVUsR0FBSyxTQUMzREgsS0FBS3NCLGFBQW9CLFFBQUwsS0FDeEIsQ0FDRXNCLFdBQVk1QyxLQUFLMnBDLGlCQUNqQjEyQyxTQUFVK00sS0FBS3NCLGFBQ2Y3RSxLQUFNN00sS0FBSzRQLEtBQUtDLFNBQ2RPLEtBQUtqSCxNQUFNMUYsS0FBS0EsS0FBSzZCLGdCQUFnQjhLLEtBQUtpRCxnQkFBZ0IwTCxTQUloRSxLQUFLM08sS0FBS2pILE1BQU0xRixLQUFLQSxLQUFLNkIsZ0JBQWdCOEssS0FBS2lELGdCQUFnQjlGLFVBRy9ENkMsS0FBS2EsTUFFTGpSLEtBQUs0UCxLQUFLWSxPQUNSLGlCQUNFSixLQUFLNEMsYUFBZTFDLFVBQVVtRyxnQkFBZ0JsRyxRQUFVLEdBQUssU0FDM0RILEtBQUtzQixhQUFvQixRQUFMLEtBQ3hCLENBQ0VzQixXQUFZNUMsS0FBSzJwQyxpQkFDakIxMkMsU0FBVStNLEtBQUtzQixhQUNmN0UsS0FBTXVELEtBQUthLE1BQU1wRSxPQUVqQixLQUFLdUQsS0FBS2EsTUFBTTFELFVBR3BCNkMsS0FBSzIrQixZQUVML3VDLEtBQUs0UCxLQUFLWSxPQUNSLGlCQUNFSixLQUFLNEMsYUFBZTFDLFVBQVVtRyxnQkFBZ0JsRyxRQUFVLEdBQUssU0FDM0RILEtBQUtzQixhQUFvQixRQUFMLEtBQ3hCLENBQ0VzQixXQUFZNUMsS0FBSzJwQyxpQkFDakIxMkMsU0FBVStNLEtBQUtzQixhQUNmN0UsS0FBTXVELEtBQUsyK0IsY0FFWCxLQUFLMytCLEtBQUtvdEMsbUJBR1gsS0FHVDk4Qyx5QkFBMEIyQixRQUFVLElBRTlCK04sS0FBSy9OLFFBQVMrTixLQUFLL04sUUFBVTIwQixZQUFZNW1CLEtBQUsvTixRQUFTQSxTQUN0RCtOLEtBQUsvTixRQUFVQSxRQUNwQixNQUFNMFosV0FBYUMsZUFIRixzREFHMkI1TCxNQUM1QyxPQUFJMkwsS0FBYUksRUFBRUMsVUFBVUwsTUFBTSxHQUM1QixLQUdUcmIsa0JBQW1CMkIsUUFBVSxJQUV2QitOLEtBQUsvTixRQUFTK04sS0FBSy9OLFFBQVUyMEIsWUFBWTVtQixLQUFLL04sUUFBU0EsU0FDdEQrTixLQUFLL04sUUFBVUEsUUFFcEIsYUFEbUIyWixlQUhGLHNEQUcyQjVMLFlBQzdCa0UsRUFHakI1VCxnQkFBaUJxOEMsU0FBVSxHQUV6QjNzQyxLQUFLMnNDLFFBQVVBLFFBQ2YsTUFFTWhoQyxXQUFhQyxlQUZGLCtDQUUyQjVMLE1BRXRDd0YsWUFBYyxHQUNwQixJQUFJeEssUUFDQWdGLEtBQUtqSCxPQUNIaUgsS0FBS2pILE1BQU1vSyxRQUNicUMsWUFBWWpKLE1BQVF5RCxLQUFLekQsTUFBTXhJLFNBQ3RCaU0sS0FBS2pILE1BQU1tMkMsUUFDaEJsdkMsS0FBS2pILE1BQU0wRCxPQUFNekIsUUFBVSxDQUFFMEIsTUFBT3NELEtBQUtqSCxNQUFNMEQsT0FFbkQrSSxZQUFZek0sTUFBUWlILEtBQUtqSCxNQUUzQmlDLFFBQVVwSixZQUFZcUosV0FBV3VLLGNBRWpDeEssUUFBVXBKLFlBQVlxSixhQUd4QixNQUVNeEosU0FBVyxDQUNmTyxNQUhXZ08sS0FBS2pILE9BQU8vRyxLQUFPZ08sS0FBS2pILE1BQU0vRyxLQUFPcEMsS0FBS29DLE1BRzFDeUosR0FDWFQsUUFDQUQsT0FBUWlGLEtBQUtqRixPQUNiVyxRQUFTaVEsS0FDVHFmLE1BQU8sQ0FDTHhELEtBQU0sQ0FDSnRzQixLQUFNZ0YsVUFBVTJzQyxZQVF0QixHQUhJN3NDLEtBQUs4c0MsT0FBTXI3QyxTQUFTdTVCLE1BQU14RCxLQUFLc2xCLEtBQU85c0MsS0FBSzhzQyxNQUMzQzlzQyxLQUFLbXFDLFVBQVMxNEMsU0FBU3U1QixNQUFNeEQsS0FBSzJpQixRQUFVbnFDLEtBQUttcUMsU0FFL0IsYUFBbEJucUMsS0FBS3ZRLFNBQ1AsR0FBSUcsS0FBS29DLEtBQUtxaEIsTUFXWixHQVZBNWhCLFNBQVNPLEtBQU9wQyxLQUFLb0MsS0FBS3lKLEdBQzFCaEssU0FBU3NKLE9BQVMsSUFBSWlGLEtBQUtqSCxNQUFNMEQsU0FBU2hMLFNBQVNzSixTQUNuRHRKLFNBQVN1NUIsTUFBUSxDQUNmeEQsS0FBTSxDQUNKNkcsWUFBWSxTQUdnQixJQUFyQjU4QixTQUFTdUosVUFDbEJ2SixTQUFTdTVCLE1BQU14RCxLQUFLMHFCLGdCQUFrQmowQyxVQUFVeE0sU0FBU3VKLFVBRXZEcEwsS0FBS29DLEtBQUtxaEIsS0FDWixPQUFRempCLEtBQUtJLFNBQVNGLElBQUksT0FBUSwwQkFDaEMsSUFBSyxnQkFDSTJCLFNBQVN1SixRQUNoQnZKLFNBQVNDLFFBQVVzTyxLQUFLakgsTUFBTThqQixPQUM5QnByQixTQUFTeUosS0FBT0MsTUFBTUMsbUJBQW1CQyxRQUN6QyxNQUVGLElBQUssa0JBQ0k1SixTQUFTdUosUUFDaEJ2SixTQUFTQyxRQUFVOUIsS0FBS3VoQixNQUFNaWQsUUFDOUIzOEIsU0FBU3lKLEtBQU9DLE1BQU1DLG1CQUFtQkMsUUFDekMsTUFFRixRQUNFekosWUFBWUMsY0FBY0osU0FBVXVPLEtBQUt2USxnQkFJMUNtQyxZQUFZQyxjQUFjSixTQUFVdU8sS0FBS3ZRLFVBRzlDLENBQUMsU0FBVSxhQUFhMEIsU0FBUzZPLEtBQUt2USxZQUN4Q2dDLFNBQVNDLFFBQVVFLFlBQVk2VCxxQkFBcUIsT0FFaEMsY0FBbEJ6RixLQUFLdlEsV0FBMEJnQyxTQUFTRSxPQUFRLEdBR2hEcU8sS0FBS25QLE1BQU1aLE9BQVMrUCxLQUFLblAsTUFBTW5CLFdBQ2pDK0IsU0FBU3hCLEtBQU8rUCxLQUFLblAsS0FBS1osS0FDMUJ3QixTQUFTeUosS0FBT0MsTUFBTUMsbUJBQW1CRSxLQUN6QzdKLFNBQVNoQyxTQUFXdVEsS0FBS2lFLFFBQVUsWUFBY2pFLEtBQUt2USxVQUd4RG1DLFlBQVkrSixPQUFPbEssVUFBVW1LLE1BQUtDLEtBQ3pCQSxNQVFYdkwsc0JBQXNCLFlBQWUsRUFBSyxXQUFjLEdBQVUsSUFDNUR1akMsYUFBWTd6QixLQUFLdlEsVUFBVyxHQUVoQyxNQUFNZ0MsU0FBVyxDQUFFc0osT0FBUWlGLEtBQUtqRixRQUU1Qjg0QixZQUNGcGlDLFNBQVNDLFFBQVUsR0FDbkJELFNBQVNFLE9BQVEsRUFDakJDLFlBQVlDLGNBQWNKLFlBRTFCQSxTQUFTQyxRQUFVLEdBQ25CRCxTQUFTRSxPQUFRLEVBQ2pCQyxZQUFZQyxjQUFjSixTQUFVN0IsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGNBRzVEMkIsU0FBU0UsUUFDWHFPLEtBQUtpRSxTQUFVLEdBR2pCLE1BQ00wSCxXQUFhQyxlQURGLCtDQUMyQjVMLE1BQzVDLElBQUlteUMsV0FBYXhtQyxLQUVqQixJQUFLM0wsS0FBS21NLFVBQVcsT0FBT0osRUFBRUMsVUFBVUwsTUFBTSxHQUc5QyxNQUFNOVEsUUFBVWpMLEtBQUtzYyxTQUFTcGMsSUFBSWtRLEtBQUttTSxXQUNqQ2ltQyxZQUFjcm1DLEVBQUVDLFVBQVVuUixRQUFReEgsS0FBS3FJLFNBQVMsR0FDdEQsSUFBSzAyQyxZQUFZbitDLFVBQVVra0IsU0FBUyxlQUFnQixDQUNsRCxNQUFNN0IsVUFBWXZLLEVBQUVDLFVBQVVMLE1BQU0sR0FDOUIwbUMsa0JBQW9CRCxZQUFZdnlDLGNBQWMsZ0JBQzFCLE9BQXRCd3lDLG1CQUNGQSxrQkFBa0I1N0IsWUFBWUgsV0FFaEM2N0IsV0FBYUMsWUFBWTVtQyxVQUczQi9aLFNBQVNpSyxRQUFVeTJDLFdBRWZoM0MsTUFBTUMsbUJBQW1CRSxPQUFTVCxRQUFReEgsS0FBSzZILE9BQzdDTCxRQUFReEgsS0FBSzNCLFNBQVNKLE9BQ3hCRyxTQUFTeUosS0FBT0MsTUFBTUMsbUJBQW1CQyxRQUNwQzVKLFNBQVN5SixLQUFPQyxNQUFNQyxtQkFBbUJnWSxPQUc5QzJnQixXQUFhL3pCLEtBQUtuUCxNQUFNWixZQUNwQlgsU0FBUzRhLGVBQWVsSyxLQUFLblAsS0FBS1osTUFHMUMsTUFBTTRMLFVBQVloQixRQUFRcU8sT0FBT3pYLFVBRWpDLGFBRE00TixHQUFHK00sS0FBS0MsY0FBY3hRLEtBQUssR0FDMUJBLElBR1R0TSw4QkFBK0JnRixPQUM3QixNQUFNb0wsS0FBT3BMLE1BQU00aUIsY0FBY25LLFFBQVEsY0FDbkMxSyxZQUFjcEMsVUFBVXdNLFlBQVkvTSxNQUMxQzJDLE1BQU15c0MscUJBQXNCLEVBQzVCenNDLE1BQU13c0Msa0JBQW1CLEVBQ3pCeHNDLE1BQU11c0MscUJBQXNCLEVBQzVCdnNDLE1BQU1zc0Msc0JBQXVCLEVBQ1ksd0JBQXJDcjZDLE1BQU00aUIsY0FBYzVqQixRQUFRZ3BCLE9BQzlCamEsTUFBTXlzQyxxQkFBc0IsR0FFVyxxQkFBckN4NkMsTUFBTTRpQixjQUFjNWpCLFFBQVFncEIsT0FDOUJqYSxNQUFNd3NDLGtCQUFtQixHQUVjLHdCQUFyQ3Y2QyxNQUFNNGlCLGNBQWM1akIsUUFBUWdwQixPQUM5QmphLE1BQU11c0MscUJBQXNCLEdBRVcseUJBQXJDdDZDLE1BQU00aUIsY0FBYzVqQixRQUFRZ3BCLE9BQzlCamEsTUFBTXNzQyxzQkFBdUIsR0FFL0J0c0MsTUFBTXN4QixlQUNOdHhCLE1BQU1xYSxpQkFJUnJzQixrQkFBbUJvekIsU0FBVSxHQUUzQjFqQixLQUFLMGpCLFFBQVVBLFVBQVcsRUFFMUIsYUFEbUI5WCxlQUZGLHdDQUUyQjVMLE1BSTFDc3lDLGNBQ0YsT0FBTzFtQyxlQUNMLHNEQUNBNUwsTUFJQXVMLGtCQUNGLE1BQU16WCxFQUFJQyxTQUFTQyxjQUFjLEtBVWpDLE9BVEFGLEVBQUVHLFVBQVVDLElBQUkscUJBQ2hCSixFQUFFRyxVQUFVQyxJQUFJLHFCQUNoQkosRUFBRUcsVUFBVUMsSUFBSSxlQUNoQkosRUFBRUcsVUFBVUMsT0FBTzhMLEtBQUs0d0MsY0FDeEI5OEMsRUFBRU4sTUFBUXdNLEtBQUtpeUMsY0FDZm4rQyxFQUFFUCxRQUFRdEQsS0FBT3lELE9BQU9zTSxLQUFLMndDLGdCQUM3Qjc4QyxFQUFFTyxVQUFZLDJDQUNaMkwsS0FBS290QixnQkFBa0IsT0FFbEJ0NUIsRUFHTHkrQyxrQkFDRixHQUFJdnlDLEtBQUs4ekIsUUFBUyxPQUNsQixNQUFNMEMsTUFBUSxHQUNSN2xDLEtBQU9xUCxLQUFLa0IsTUFBTXZRLEtBQUswQixLQUFJdVIsSUFDeEIsQ0FDTHJULE9BQVFxVCxFQUFFekcsTUFDVnlFLFNBQVVnQyxFQUFFaEMsU0FDWjhWLFFBQVMsQ0FDUCxNQUNBLE1BQ0M5VCxFQUFFaEMsU0FBeUIsS0FBZCxZQUNkZ0MsRUFBRTlCLE1BQVEsTUFBUSxLQUNsQjhCLEVBQUUvQixNQUFRLE1BQVEsTUFFakJ4USxRQUFPbWhELEdBQUtBLElBQ1o3L0MsS0FBSyxTQUdObkMsS0FBTyxDQUNYLENBQ0VELE9BQVF5UCxLQUFLa0IsTUFBTTFRLEtBQUsyTSxNQUN4QnlFLFVBQVUsRUFDVjhWLFFBQVMsWUFjYixPQVZBOGUsTUFBTXRsQyxLQUFLLENBQ1R1QyxRQUFTdU0sS0FBS2l5QyxjQUNkeGhELE1BQU91UCxLQUFLb3RCLGVBQ1ptaEIsTUFBT3Z1QyxLQUFLcXVDLGtCQUNab0UsTUFBT3p5QyxLQUFLeXVDLFNBQ1p3QixnQkFBaUJqd0MsS0FBS2l3QyxnQkFDdEJsd0MsV0FBWUMsS0FBS0QsV0FDakIyeUMsS0FBTSxHQUNOL3VDLE1BQU8sSUFBSWhULFFBQVNILFFBRWZvYixlQUNMLHNEQUNBLENBQUU0cUIsUUFJRjd3QixtQkFDRixPQUFPaFMsS0FBS2laLE1BQU01TSxLQUFLMndDLGdCQUdyQkEscUJBQ0YsT0FBT2g5QyxLQUFLQyxVQUFVb00sTUFBTSxDQUFDaE4sSUFBS21LLFNBQ2hDLEdBQWMsT0FBVkEsTUFBZ0IsT0FFcEIsTUFEZ0IsQ0FBQyxTQUFVLFNBQVUsU0FDekJoTSxTQUFTNkIsVUFBckIsRUFDT21LLFNBSVg1TixnQkFBaUI4RCxNQUNmLE9BQU9qQixPQUFPMmEsT0FBTyxJQUFJN00sVUFBYTdNLE1BR3hDOUQsc0JBQXVCeTNCLFlBQ3JCLElBQUkzekIsS0FDSixJQUNFQSxLQUFPTSxLQUFLaVosTUFBTUMsU0FBU21hLGFBQzNCLE1BQU9uekIsS0FFUCxPQURBd0wsR0FBR0MsY0FBY2tXLE1BQU0zaEIsSUFBSWdILFNBQ3BCLEtBRVQsT0FBT3FGLFVBQVUrTSxTQUFTNVosTUFHNUI5RCxtQkFBb0IrUyxNQUFPdU4sUUFBUzVkLFFBQVUsSUFDNUMsT0FBUTRkLFNBQ04sSUFBSyxVQUNILEdBQUk1ZCxRQUFRd1MsT0FBT3hRLFVBQVVra0IsU0FBUyxjQUFlLENBQ25ELE1BQU00RixXQUFheHJCLFNBQVNOLFFBQVF3UyxPQUFPbFIsUUFBUXdxQixZQUNuRHpiLE1BQU1td0IsVUFBVTFVLFdBQVk5ckIsUUFBUWlYLFlBQy9CLENBQ0wsTUFBTXNwQixhQUFlamdDLFNBQVNOLFFBQVF3UyxPQUFPbFIsUUFBUTZqQixhQUMvQzlVLE1BQU1vd0IsYUFBYUYsYUFBY3ZnQyxRQUFRaVgsUUFFakQsTUFHRixJQUFLLGFBQ0g1RyxNQUFNbXdCLFVBQVUsS0FBTXhnQyxRQUFRaVgsUUFDOUIsTUFHRixJQUFLLGFBQ0g1RyxNQUFNbXhCLFVBQVV4aEMsUUFBUWlYLFFBQ3hCLE1BR0YsSUFBSyx5QkFDSDVHLE1BQU1veEIscUJBQXFCemhDLFFBQVFpWCxRQUNuQyxNQUdGLElBQUsseUJBQ0g1RyxNQUFNcXhCLHFCQUFxQjFoQyxRQUFRaVgsUUFDbkMsTUFHRixJQUFLLGVBQ0g1RyxNQUFNMkIsU0FBVSxFQUNoQjNCLE1BQU03UyxVQUFXLEVBQ2pCNlMsTUFBTXN4QixlQUNGM2hDLFFBQVFpWCxRQUFRNUcsTUFBTXFhLGlCQUMxQixNQUdGLElBQUssNkJBQ0dyYSxNQUFNMHhCLHNCQUNaMXhCLE1BQU1zeEIsZUFDRjNoQyxRQUFRaVgsUUFBUTVHLE1BQU1xYSxpQkFDMUIsTUFHRixJQUFLLGFBQ0dyYSxNQUFNK0csV0FDWi9HLE1BQU1xcUMsU0FBVSxFQUNaMTZDLFFBQVFpWCxRQUFRNUcsTUFBTXFhLGtCQUtoQ3B0QixnQ0FBaUNnRixPQUMvQkEsTUFBTTBhLGlCQUNOLE1BQU1uYixFQUFJUyxNQUFNNGlCLGNBRWhCLEdBQUlyakIsRUFBRUcsVUFBVWtrQixTQUFTLHFCQUN2QixPQUFJcmtCLEVBQUVHLFVBQVVra0IsU0FBUyxZQUNoQmpZLFVBQVV5eEIsc0JBQXNCNzlCLEdBRWhDb00sVUFBVTB4QixvQkFBb0I5OUIsR0FLM0N2RSw2QkFBOEJ1RSxHQUM1QixJQUFLQSxFQUFFRyxVQUFVa2tCLFNBQVMscUJBQXNCLE9BQ2hELElBQUtya0IsRUFBRUcsVUFBVWtrQixTQUFTLFlBQWEsT0FDdkMsTUFBTW02QixRQUFVeCtDLEVBQUUrTCxjQUFjLHVCQUVoQyxPQURJeXlDLFNBQVNBLFFBQVFoOUIsU0FDZHhoQixFQUFFRyxVQUFVcWhCLE9BQU8sWUFHNUIvbEIsaUNBQWtDdUUsR0FDaEMsSUFBS0EsRUFBRUcsVUFBVWtrQixTQUFTLHFCQUFzQixPQUNoRCxHQUFJcmtCLEVBQUVHLFVBQVVra0IsU0FBUyxZQUFhLE9BR3RDLE1BQU03VixNQUFRbFEsT0FBTzJhLE9BQ25CLElBQUk3TSxVQUNKdk0sS0FBS2laLE1BQU1DLFNBQVMvWSxFQUFFUCxRQUFRdEQsUUFFaEMsR0FBSXFTLE1BQU13eEIsUUFBUyxPQUVuQixNQUFNNmUsSUFBTTUrQyxTQUFTQyxjQUFjLE9BQ25DMitDLElBQUl0K0MsZ0JBQWtCaU8sTUFBTWl3QyxZQUc1QixNQUFNRCxRQUFVSyxJQUFJQyxTQUFTLEdBQzdCOStDLEVBQUVnaEIsWUFBWXc5QixTQUNkeCtDLEVBQUVHLFVBQVVDLElBQUksWUFHaEIsTUFBTTIrQyxHQUFLLytDLEVBQUVnL0Msd0JBQ1BDLEdBQUtULFFBQVFRLHdCQUNuQlIsUUFBUTc5QixNQUFNRSxLQUFPLEdBQUd2a0IsS0FBS21CLElBQzNCc2hELEdBQUd6dUMsRUFDSGlRLE9BQU8yK0IsWUFBY0QsR0FBR2pNLE1BQVEsUUFFbEN3TCxRQUFRNzlCLE1BQU1HLElBQU0sR0FBR3hrQixLQUFLbUIsSUFDMUJzaEQsR0FBR0ksRUFBSUosR0FBRzlMLE9BQVMsRUFDbkIxeUIsT0FBTzYrQixhQUFlSCxHQUFHaE0sT0FBUyxRQUVwQyxNQUFNb00sR0FBS0MsaUJBQWlCdC9DLEdBQUd1L0MsT0FDL0JmLFFBQVE3OUIsTUFBTTQrQixPQUFTMzFDLE9BQU80MUMsVUFBVUgsSUFBTUEsR0FBSyxFQUFJLEtDbDFEcEQsTUFBTUksc0JBQXNCM2hDLE9BQ2pDbUYsa0JBQW1CcEwsTUFDakI3RixNQUFNaVIsa0JBQWtCcEwsTUFDeEJBLEtBQUs0QyxLQUFLLGFBQWF5SSxPQUFNLElBQU1oWCxLQUFLd3pDLGFBQWE3bkMsUUFHdkQ2bkMsYUFBYzduQyxNQUNaQSxLQUFLNEMsS0FBSyx3QkFBd0JxQyxTQUdwQ3JoQixvQkFBcUIwQyxRQUFVLElBQzdCLE1BQU0wWixXQUFhQyxlQUNqQiwyQ0FDQTNaLFNBR0YsT0FBTyxJQUFJZ2pCLFNBQVFDLFVBQ2pCLElBQUlnRixTQUFXLEtBQ2YsTUFBTUMsSUFBTSxJQUFJbzVCLGNBQWMsQ0FDNUIvL0MsTUFBT3ZCLFFBQVEwc0MsWUFDWC91QyxLQUFLNFAsS0FBS1ksT0FBTyxtQ0FBb0MsQ0FDckQzRCxLQUFNeEssUUFBUTBzQyxjQUVkL3VDLEtBQUs0UCxLQUFLQyxTQUFTLCtCQUN2Qi9ELFFBQVNpUSxLQUNUa0csUUFBUyxDQUNQNGhDLFNBQVUsQ0FDUjlrQyxNQUFPL2UsS0FBSzRQLEtBQUtDLFNBQVMsaUJBQzFCcVMsU0FBVW5HLE9BQ1J1TyxTQUFXLElBQUlHLFNBQVMxTyxLQUFLLEdBQUc5TCxjQUFjLG1CQUN2Q3FWLFFBQVFnRixhQUlyQkksUUFBUyxXQUNUN0MsTUFBTyxTQUVUMEMsSUFBSWxJLFFBQU8sT0M3QlYsTUFBTXloQyxnQkFDQUMsaUNBQ1QsTUFBTyxPQUdFQyxzQ0FDVCxNQUFPLE9BR0VDLDhCQUNULE1BQU8sT0FHRUMsNkJBQ1QsTUFBTyxPQUdFQyxnQ0FDVCxNQUFPLE9BR0VDLDZCQUNULE1BQU8sT0FHRUMsOEJBQ1QsTUFBTyxPQUdFQywrQkFDVCxNQUFPLE9BR0VDLGlDQUNULE1BQU8sT0FHVDVrRCxpQkFBa0J3N0IsUUFDaEIsR0FBSUEsT0FBT3hvQixXQUFhbXhDLGdCQUFnQkcsaUJBQ3RDLE9BQU8sS0FFVCxNQUFNNytCLE9BQVMsQ0FDYixDQUFDMCtCLGdCQUFnQk8sa0JBQW1CLHVCQUNwQyxDQUFDUCxnQkFBZ0JLLG9CQUFxQix3QkFDdEMsQ0FBQ0wsZ0JBQWdCUSxtQkFBb0Isd0JBU3ZDLE9BTEVucEIsT0FBT3hvQixXQUFhbXhDLGdCQUFnQkMscUJBQ2YsUUFBckI1b0IsT0FBTzNoQixZQUVQNEwsT0FBTzArQixnQkFBZ0JTLHFCQUF1Qiw0QkFFekNuL0IsT0FHVHpsQix3QkFBeUIwQyxTQUN2QixRQUMyQixJQUFsQkEsUUFBUXNDLFlBQ2EsSUFBckJ0QyxRQUFRNDZDLGVBQ2EsSUFBckI1NkMsUUFBUXNRLFNBT2YsT0FMQWxELEdBQUdDLGNBQWNrVyxNQUNmNWxCLEtBQUs0UCxLQUFLWSxPQUFPLHFCQUFzQixDQUNyQ2pELE1BQU92TixLQUFLNFAsS0FBS0MsU0FBUyxpQkFHdkIsRUFFVCxJQUNHLENBQ0NpMEMsZ0JBQWdCSyxtQkFDaEJMLGdCQUFnQk0sZ0JBQ2hCTixnQkFBZ0JPLGlCQUNoQlAsZ0JBQWdCUSxrQkFDaEJSLGdCQUFnQlMscUJBQ2hCaGpELFNBQVNjLFFBQVE0NkMsVUFPbkIsT0FMQXh0QyxHQUFHQyxjQUFja1csTUFDZjVsQixLQUFLNFAsS0FBS1ksT0FBTywyQkFBNEIsQ0FDM0NqRCxNQUFPdk4sS0FBSzRQLEtBQUtDLFNBQVMsaUNBR3ZCLEVBRVQsSUFDRyxDQUNDaTBDLGdCQUFnQkksZ0JBQ2hCSixnQkFBZ0JFLHlCQUNoQkYsZ0JBQWdCQyxxQkFDaEJ4aUQsU0FBU2MsUUFBUXNRLFVBT25CLE9BTEFsRCxHQUFHQyxjQUFja1csTUFDZjVsQixLQUFLNFAsS0FBS1ksT0FBTywyQkFBNEIsQ0FDM0NqRCxNQUFPdk4sS0FBSzRQLEtBQUtDLFNBQVMsaUNBR3ZCLEVBRVQsTUFBTXNyQixPQUFTLENBQ2I5NEIsUUFBUyxDQUNQNDZDLFNBQVU1NkMsUUFBUTQ2QyxTQUNsQjE5QixTQUFVbGQsUUFBUXNDLE1BQU00YSxTQUN4QmlsQyxPQUFRbmlELFFBQVFzQyxNQUFNNi9DLE9BQ3RCOS9DLFVBQVdBLFVBQVVyQyxRQUFRc0MsT0FDN0I4L0MsU0FBVXBpRCxRQUFRc0MsTUFBTTRpQixjQUFjbGpCLFdBQVdra0IsU0FBUyxXQUU1RHBLLGNBQWUsQ0FDYnhMLFNBQVV0USxRQUFRc1EsU0FDbEJzcUMsU0FBVTU2QyxRQUFRNDZDLFNBQ2xCempDLFVBQVcsS0FHZixPQUFRMmhCLE9BQU9oZCxjQUFjeEwsVUFDM0IsS0FBS214QyxnQkFBZ0JJLGdCQUNyQixLQUFLSixnQkFBZ0JFLHlCQUNyQixLQUFLRixnQkFBZ0JDLG9CQWlCbkIsR0FoQkE1b0IsT0FBTzk0QixRQUFRNk8sUUFDYjdPLFFBQVFzQyxNQUFNNGlCLGNBQWNuSyxRQUFRLFVBQVV6WixRQUFRdU4sUUFDeERpcUIsT0FBTzk0QixRQUFRME8sT0FDYjFPLFFBQVFzQyxNQUFNNGlCLGNBQWNuSyxRQUFRLFVBQVV6WixRQUFRb04sT0FDeERvcUIsT0FBTzk0QixRQUFRZ1IsZUFDYmhSLFFBQVFzQyxNQUFNNGlCLGNBQWNzWixjQUFjbDlCLFFBQVEwUCxlQUNwRDhuQixPQUFPOTRCLFFBQVFtWCxVQUNiblgsUUFBUXNDLE1BQU00aUIsY0FBY3NaLGNBQWNsOUIsUUFBUXVxQyxPQUNwRC9TLE9BQU9oZCxjQUFjM0UsVUFBWTJoQixPQUFPOTRCLFFBQVFtWCxVQUNoRDJoQixPQUFPOTRCLFFBQVFtUixRQUNiblIsUUFBUXNDLE1BQU00aUIsY0FBY25LLFFBQVEsUUFBUXpaLFFBQVE2UCxRQUN0RDJuQixPQUFPOTRCLFFBQVFpUixTQUNialIsUUFBUXNDLE1BQU00aUIsY0FBY25LLFFBQVEsUUFBUXpaLFFBQVF5SSxRQUN0RCt1QixPQUFPOTRCLFFBQVFrOUMsZUFDYmw5QyxRQUFRc0MsTUFBTTRpQixjQUFjbGpCLFVBQVVra0IsU0FBUyxvQkFDakQ0UyxPQUFPOTRCLFFBQVE4RyxNQUFROUcsUUFBUThHLE1BRTdCZ3lCLE9BQU9oZCxjQUFjeEwsV0FBYW14QyxnQkFBZ0JJLGlCQUNsRC9vQixPQUFPOTRCLFFBQVFvaUQsU0FDZixDQUNBLE1BQU0zekMsS0FBT3FxQixPQUFPOTRCLFFBQVE4RyxNQUFNNkgsTUFBTTlRLElBQUlpN0IsT0FBTzk0QixRQUFRME8sUUFDM0QsSUFBS0QsS0FDSCxPQUFPLEVBRVMsV0FBZEEsS0FBS3hGLE9BQ1A2dkIsT0FBTzk0QixRQUFReS9CLFdBQWFoeEIsS0FBS2pFLEtBQ2pDc3VCLE9BQU9oZCxjQUFjeEwsU0FBV214QyxnQkFBZ0JHLGtCQUdwRCxRQUNvQyxJQUEzQjlvQixPQUFPOTRCLFFBQVFtUixjQUNjLElBQTVCMm5CLE9BQU85NEIsUUFBUWlSLGVBQ1csSUFBekI2bkIsT0FBTzk0QixRQUFROEcsTUFPeEIsT0FMQXNHLEdBQUdDLGNBQWNrVyxNQUNmNWxCLEtBQUs0UCxLQUFLWSxPQUFPLDJCQUE0QixDQUMzQ2pELE1BQU92TixLQUFLNFAsS0FBS0MsU0FBUyx1QkFHdkIsRUFFVCxHQUNFc3JCLE9BQU9oZCxjQUFjeEwsV0FBYW14QyxnQkFBZ0JJLHNCQUNoQixJQUEzQi9vQixPQUFPOTRCLFFBQVE2TyxRQU90QixPQUxBekIsR0FBR0MsY0FBY2tXLE1BQ2Y1bEIsS0FBSzRQLEtBQUtZLE9BQU8sMkJBQTRCLENBQzNDakQsTUFBT3ZOLEtBQUs0UCxLQUFLQyxTQUFTLDJCQUd2QixFQUNGLEdBQ0xzckIsT0FBT2hkLGNBQWN4TCxXQUNyQm14QyxnQkFBZ0JFLHlCQUNoQixDQUNBLFFBQTZDLElBQWxDN29CLE9BQU85NEIsUUFBUWdSLGVBTXhCLE9BTEE1RCxHQUFHQyxjQUFja1csTUFDZjVsQixLQUFLNFAsS0FBS1ksT0FBTywyQkFBNEIsQ0FDM0NqRCxNQUFPdk4sS0FBSzRQLEtBQUtDLFNBQVMsMkJBR3ZCLEVBQ0YsSUFDSjdQLEtBQUtvQyxLQUFLcWhCLE9BQ1YwWCxPQUFPOTRCLFFBQVE4RyxNQUFNMUYsS0FBS0EsS0FBSzZCLGdCQUM5QjYxQixPQUFPOTRCLFFBQVFnUixpQkFDZDlGLE1BRUgsT0FBTyxPQUVKLEdBQ0w0dEIsT0FBT2hkLGNBQWN4TCxXQUFhbXhDLGdCQUFnQkMsb0JBQ2xELENBQ0EsUUFBd0MsSUFBN0I1b0IsT0FBTzk0QixRQUFRbVgsVUFNeEIsT0FMQS9KLEdBQUdDLGNBQWNrVyxNQUNmNWxCLEtBQUs0UCxLQUFLWSxPQUFPLDJCQUE0QixDQUMzQ2pELE1BQU92TixLQUFLNFAsS0FBS0MsU0FBUyxzQkFHdkIsRUFDRixJQUNKN1AsS0FBS29DLEtBQUtxaEIsT0FDVjBYLE9BQU85NEIsUUFBUThHLE1BQU0xRixLQUFLQSxLQUFLc1gsUUFBUW9nQixPQUFPOTRCLFFBQVFtWCxZQUNuRGpNLE1BRUosT0FBTyxPQUVKLEdBQ0w0dEIsT0FBT2hkLGNBQWN4TCxXQUFhbXhDLGdCQUFnQkcsaUJBQ2xELENBQ0EsUUFBcUMsSUFBMUI5b0IsT0FBTzk0QixRQUFRME8sT0FNeEIsT0FMQXRCLEdBQUdDLGNBQWNrVyxNQUNmNWxCLEtBQUs0UCxLQUFLWSxPQUFPLDJCQUE0QixDQUMzQ2pELE1BQU92TixLQUFLNFAsS0FBS0MsU0FBUyw0QkFHdkIsRUFDRixHQUFJc3JCLE9BQU85NEIsUUFBUW1pRCxPQUN4QixPQUFPLEVBR1hycEIsT0FBTzk0QixRQUFROHpDLGVBQ2JoYixPQUFPOTRCLFFBQVE4RyxNQUFNZ3RDLGlCQUFrQixFQUV2Q2hiLE9BQU9oZCxjQUFjeEwsV0FDckJteEMsZ0JBQWdCRSwwQkFFaEI3b0IsT0FBT2hkLGNBQWN1bUMsNkJBQ25CdnBCLE9BQU85NEIsUUFBUXFDLFVBQ2pCeTJCLE9BQU9oZCxjQUFjdTZCLHdCQUNuQnZkLE9BQU85NEIsUUFBUXFDLFlBRWpCeTJCLE9BQU9oZCxjQUFjdW1DLDhCQUErQixFQUNwRHZwQixPQUFPaGQsY0FBY3U2Qix5QkFBMEIsR0FFakR2ZCxPQUFPaGQsY0FBYzlhLFNBQVcsRUFDaEM4M0IsT0FBT2hkLGNBQWNuTCxXQUNuQjFDLFVBQVVtRyxnQkFDUnpXLEtBQUtJLFNBQVNGLElBQUksT0FBUSwyQkFFOUJpN0IsT0FBT2hkLGNBQWNQLGlCQUFtQixFQUN4Q3VkLE9BQU9oZCxjQUFjTixzQkFBd0IsRUFHakQsT0FBT3NkLE9BR1R4N0IscUJBQXNCMEMsUUFBVSxJQUM5QixNQUFNODRCLE9BQVMyb0IsZ0JBQWdCYSxpQkFBaUJ0aUQsVUFDakMsSUFBWDg0QixTQUlGQSxPQUFPOTRCLFFBQVFxQyxXQUNmMUUsS0FBS29DLEtBQUtxaEIsTUFDVixDQUNFcWdDLGdCQUFnQk8saUJBQ2hCUCxnQkFBZ0JTLHFCQUNoQmhqRCxTQUFTNDVCLE9BQU9oZCxjQUFjOCtCLFVBRWhDNkcsZ0JBQWdCYyxXQUFXenBCLFNBRXRCQSxPQUFPOTRCLFFBQVFrZCxnQkFDWnVrQyxnQkFBZ0JlLFdBQVcxcEIsUUFFbkMyb0IsZ0JBQWdCZ0IsUUFBUTNwQixVQUk1Qng3QixrQkFBbUJ3N0IsUUFDakIsT0FBUUEsT0FBT2hkLGNBQWN4TCxVQUMzQixLQUFLbXhDLGdCQUFnQkMsb0JBQ3JCLEtBQUtELGdCQUFnQkUseUJBQ3JCLEtBQUtGLGdCQUFnQkcsaUJBQ3JCLEtBQUtILGdCQUFnQkksZ0JBQ25CLENBQ0UsTUFBTXZQLFNBQVcsQ0FDZmppQyxNQUFPLFFBQ1BwSCxLQUFNLEdBQ051QixLQUFNLEdBQ05zcEMsZUFBZ0JoYixPQUFPOTRCLFFBQVE4ekMsZUFDL0IxcEMsU0FBVTB1QixPQUFPOTRCLFFBQVE4RyxNQUFNc0QsU0FDL0I4cEMsZUFBZ0JwYixPQUFPOTRCLFFBQVFrZCxVQUVqQyxHQUNFNGIsT0FBT2hkLGNBQWN4TCxXQUFhbXhDLGdCQUFnQkksaUJBTWxELEdBSkF2UCxTQUFTcnBDLEtBQU8sUUFDaEJxcEMsU0FBUzluQyxLQUFPc3VCLE9BQU85NEIsUUFBUThHLE1BQU02SCxNQUFNOVEsSUFDekNpN0IsT0FBTzk0QixRQUFRNk8sVUFDZHUwQixXQUNFa1AsU0FBUzluQyxLQUFNLFlBQ2YsR0FDTHN1QixPQUFPaGQsY0FBY3hMLFdBQ3JCbXhDLGdCQUFnQkUseUJBRWhCclAsU0FBU3JwQyxLQUFPLGlCQUNoQnFwQyxTQUFTOW5DLEtBQU9zdUIsT0FBTzk0QixRQUFRZ1Isb0JBQzFCLEdBQ0w4bkIsT0FBT2hkLGNBQWN4TCxXQUNyQm14QyxnQkFBZ0JDLG9CQUVaNW9CLE9BQU85NEIsUUFBUW1pRCxRQUF1QyxRQUE3QnJwQixPQUFPOTRCLFFBQVFtWCxVQUMxQ203QixTQUFTamlDLE1BQVEsV0FFakJpaUMsU0FBU3JwQyxLQUFPLFlBQ2hCcXBDLFNBQVM5bkMsS0FBT3N1QixPQUFPOTRCLFFBQVFtWCxlQUU1QixJQUNMMmhCLE9BQU9oZCxjQUFjeEwsV0FBYW14QyxnQkFBZ0JHLGlCQU1sRCxPQUpBdFAsU0FBU2ppQyxNQUFRLE9BQ2pCaWlDLFNBQVNycEMsS0FBTyxTQUNoQnFwQyxTQUFTOW5DLEtBQU9zdUIsT0FBTzk0QixRQUFReS9CLFdBSWEsY0FBMUM5aEMsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGNBQzVCeTBDLFNBQVM1eUMsT0FBUSxHQUVuQjZ5Qyx1QkFBdUJtUSxhQUFhcFEsVUFBVTNvQyxNQUFLdWUsS0FDakRBLElBQUlsSSxRQUFPLE9BT3JCMWlCLHdCQUF5Qnc3QixRQUN2QixNQUFNOWMsWUFBY0MsV0FBV3ZTLE9BQU9vdkIsT0FBT2hkLGVBQzdDLEdBQUlFLE1BQU8sQ0FDVCxNQUFNNCtCLFNBQVc1K0IsTUFBTW5lLElBQUksWUFDdkIrOEMsV0FDRjloQixPQUFPaGQsY0FBYzgrQixTQUFXQSxVQUVsQzloQixPQUFPaGQsY0FBYzlhLFNBQVd5SyxPQUFPdVEsTUFBTW5lLElBQUksY0FDakRpN0IsT0FBT2hkLGNBQWNuTCxXQUFhbEYsT0FBT3VRLE1BQU1uZSxJQUFJLGVBQ25EaTdCLE9BQU9oZCxjQUFjUCxpQkFBbUI5UCxPQUN0Q3VRLE1BQU1uZSxJQUFJLHFCQUVaaTdCLE9BQU9oZCxjQUFjTixzQkFBd0IvUCxPQUMzQ3VRLE1BQU1uZSxJQUFJLDJCQUtoQlAscUJBQXNCdzdCLFFBQ3BCLE9BQVFBLE9BQU9oZCxjQUFjOCtCLFVBQzNCLEtBQUs2RyxnQkFBZ0JTLG9CQUNuQixDQUNFLE1BQU10dUMsY0FBZ0IwdEMsY0FBYzUzQyxPQUFPLENBQ3pDaTVDLGFBQWEsSUFFZixHQUFJL3VDLFFBQVMsQ0FDWCxJQUFJaUIsT0FBU2pCLFFBQVEvVixJQUFJLFdBQWEsRUFDbEM4VyxPQUFTZixRQUFRL1YsSUFBSSxXQUFhLEVBQ3RDLE1BQU1rVyxVQUFZSCxRQUFRL1YsSUFBSSxhQUV6Qm1XLE1BQU12SSxPQUFPb0osV0FBVUEsT0FBU3BKLE9BQU9vSixTQUN2Q2IsTUFBTXZJLE9BQU9rSixXQUFVQSxPQUFTbEosT0FBT2tKLFNBRTVDaEIsYUFBYWpLLE9BQ1hvdkIsT0FBTzk0QixRQUFROEcsTUFBTXNELFNBQ3JCLENBQUV5SyxPQUFnQkYsT0FBZ0JaLFdBQ2xDLENBQ0VFLFlBQWE2a0IsT0FBT2hkLGNBQWM5YSxTQUNsQ2tULGNBQWU0a0IsT0FBT2hkLGNBQWNuTCxXQUNwQ21CLFlBQWFnbkIsT0FBTzk0QixRQUFRa2QsWUFLcEMsTUFDRixLQUFLdWtDLGdCQUFnQk8saUJBQ25CLENBQ0UsTUFBTTN4QyxNQUFRLElBQUlwQyxVQUNsQm9DLE1BQU1oQixhQUFleXBCLE9BQU9oZCxjQUFjOWEsU0FDMUNxUCxNQUFNTSxXQUFhbW9CLE9BQU9oZCxjQUFjbkwsV0FDeENOLE1BQU12SixNQUFTZ3lCLE9BQU85NEIsUUFBUWlSLFNBRTFCNm5CLE9BQU85NEIsUUFBUWlSLFNBRGY2bkIsT0FBTzk0QixRQUFRbVIsUUFFbkJkLE1BQU1rTCxpQkFBbUJ1ZCxPQUFPaGQsY0FBY1AsaUJBQzlDbEwsTUFBTW1MLHNCQUNKc2QsT0FBT2hkLGNBQWNOLHNCQUN2Qm5MLE1BQU13eEIsUUFDSmxrQyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsa0JBQzFCRixLQUFLb0MsS0FBS3FoQixNQUNWMFgsT0FBTzk0QixRQUFROHpDLGVBRWZoYixPQUFPaGQsY0FBY3hMLFdBQWFteEMsZ0JBQWdCSSxpQkFFbER4eEMsTUFBTXpCLE1BQVFrcUIsT0FBTzk0QixRQUFRNk8sY0FDdkJ3QixNQUFNclMsUUFFWjg2QixPQUFPaGQsY0FBY3hMLFdBQ3JCbXhDLGdCQUFnQkMsMEJBRVZyeEMsTUFBTW04QixjQUFjMVQsT0FBTzk0QixRQUFRbVgsaUJBRW5DOUcsTUFBTTBXLG1CQUFtQitSLE9BQU85NEIsUUFBUWdSLGdCQUVoRFgsTUFBTTZMLFlBRVIsTUFDRixLQUFLdWxDLGdCQUFnQlEsa0JBQ3JCLEtBQUtSLGdCQUFnQkssbUJBQ25CLENBQ0UsTUFBTXp4QyxNQUFRLElBQUlwQyxVQUNsQm9DLE1BQU12SixNQUFTZ3lCLE9BQU85NEIsUUFBUWlSLFNBRTFCNm5CLE9BQU85NEIsUUFBUWlSLFNBRGY2bkIsT0FBTzk0QixRQUFRbVIsUUFFbkJkLE1BQU1XLGVBQWlCOG5CLE9BQU85NEIsUUFBUWdSLGVBQ3RDWCxNQUFNOEcsVUFBWTJoQixPQUFPOTRCLFFBQVFtWCxVQUNqQzlHLE1BQU14QixRQUFVaXFCLE9BQU85NEIsUUFBUTZPLFFBQy9Cd0IsTUFBTTdTLFNBQVdHLEtBQUtJLFNBQVNGLElBQUksT0FBUSxZQUMzQ3dTLE1BQU1zWSxVQUFZaHJCLEtBQUtvQyxLQUFLeUosR0FDNUIsSUFBSXBJLEtBQU8sR0FFVDAzQixPQUFPaGQsY0FBYzgrQixXQUFhNkcsZ0JBQWdCUSxtQkFFbEQ3Z0QsS0FBTyxDQUNMNkgsS0FBTXl3QixpQkFBaUJqQixjQUFjeHZCLEtBQ3JDbEYsT0FBUSswQixPQUFPOTRCLFFBQVFvaUQsU0FDdkI1eEMsT0FBUSxPQUVWSCxNQUFNNUIsS0FBT3FxQixPQUFPOTRCLFFBQVEwTyxPQUM1QjJCLE1BQU02c0MsZUFBaUJwa0IsT0FBTzk0QixRQUFRazlDLGVBQ3RDN3NDLE1BQU0yVCxVQUFXLFFBQ1gzVCxNQUFNK0csYUFFWmhXLEtBQU8sQ0FDTDZILEtBQU1veUIsa0JBQWtCNUMsY0FBY3h2QixLQUN0Q3VILE9BQVEsT0FFVkgsTUFBTU0sV0FBYW1vQixPQUFPaGQsY0FBY25MLFlBRTFDdlAsS0FBS3BELEtBQU9xUyxNQUFNcUQsYUFDbEJ0UyxLQUFLZ1IsVUFBWXpVLEtBQUtJLFNBQVNGLElBQUksT0FBUSxZQUV6Q2k3QixPQUFPaGQsY0FBYzgrQixXQUFhNkcsZ0JBQWdCUSxrQkFFbER2b0IsaUJBQWlCa3BCLFNBQVN4aEQsTUFFMUJpNkIsa0JBQWtCdW5CLFNBQVN4aEQsU0M3YmhDLE1BQU02YSxXQUNYM2Usb0JBQXFCMEMsUUFBVSxJQUN6QkEsUUFBUTJRLGFBQ1YzUSxRQUFRb1UsZ0JBQWtCLEdBQ3RCbkcsVUFBVW1HLGdCQUFnQjJJLFVBQVkvYyxRQUFRMlEsYUFDaEQzUSxRQUFRb1UsZ0JBQWdCMkksU0FBVSxHQUVoQzlPLFVBQVVtRyxnQkFBZ0JsRyxVQUFZbE8sUUFBUTJRLGFBQ2hEM1EsUUFBUW9VLGdCQUFnQmxHLFNBQVUsR0FFaENELFVBQVVtRyxnQkFBZ0JoRyxPQUFTcE8sUUFBUTJRLGFBQzdDM1EsUUFBUW9VLGdCQUFnQmhHLE1BQU8sR0FFN0JILFVBQVVtRyxnQkFBZ0IvRixVQUFZck8sUUFBUTJRLGFBQ2hEM1EsUUFBUW9VLGdCQUFnQi9GLFNBQVUsSUFJbENyTyxRQUFRd0ssT0FBU3hLLFFBQVEwc0MsY0FBYTFzQyxRQUFRMHNDLFlBQWMxc0MsUUFBUXdLLE1BQ3hFLE1BQU1xNEMseUJBQ29ELFlBQXhEbGxELEtBQUtJLFNBQVNGLElBQUksT0FBUSwwQkFDdEJ1RCxLQUFPLENBQ1gwaEQsc0JBQ0VubEQsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLDJCQUN6Qm1DLFFBQVFxMkMsd0JBQ1gwTSwyQkFDRXBsRCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsZ0NBQ3pCbUMsUUFBUXFpRCw2QkFDWDF4QyxXQUFZMUMsVUFBVW1HLGdCQUN0Qnl1Qyx5QkFDQTdpRCxjQUU4QixJQUFyQkEsUUFBUTQ2QyxXQUNqQng1QyxLQUFLNGhELFVBQVl2QixnQkFBZ0J1QixVQUFVaGpELFVBRTdDLE1BQU0wWixXQUFhQyxlQUNqQix5Q0FDQXZZLE1BRUYsT0FBTyxJQUFJNGhCLFNBQVFDLFVBQ2pCLElBQUlnRixTQUFXLEtBQ2YsTUFBTUMsSUFBTSxJQUFJdkksT0FBTyxDQUNyQnBlLE1BQU92QixRQUFRMHNDLFlBQ1gvdUMsS0FBSzRQLEtBQUtZLE9BQU8saUNBQWtDLENBQ25EM0QsS0FBTXhLLFFBQVEwc0MsY0FFZC91QyxLQUFLNFAsS0FBS0MsU0FBUyw2QkFDdkIvRCxRQUFTaVEsS0FDVGtHLFFBQVMsQ0FDUDVoQixLQUFNLENBQ0owZSxNQUFPL2UsS0FBSzRQLEtBQUtDLFNBQVMsaUJBQzFCcVMsU0FBVW5HLE9BQ1J1TyxTQUFXLElBQUlHLFNBQVMxTyxLQUFLLEdBQUc5TCxjQUFjLHFCQUN2Q3FWLFFBQVFnRixhQUlyQkksUUFBUyxPQUNUN0MsTUFBTyxTQUVUMEMsSUFBSWxJLFFBQU8sT0MvRGpCLE1BQU1pakMsVUFBWSxxQkFFWkMsbUJBQ0EsS0FEQUEsd0JBRUssVUFGTEEscUJBR0UsT0FIRkEsMEJBS08sWUFHUEMsU0FDQSxjQURBQSxVQUVDLGVBd0JQOWtELGVBQWUrYixjQUFlRixVQUFXZ21DLFlBQ3ZDLE1BQU1sbUMsWUFBY3JjLEtBQUtzYyxTQUFTcGMsSUFBSXFjLGlCQUVoQ0YsWUFBWS9DLE9BQU8sQ0FDdkJ4TixRQUFTeTJDLGFBSWI3aEQsZUFBZStrRCxVQUVmLE1BQU1DLG9CQUNKeHhDLGNBQ0U5RCxLQUFLdTFDLE1BQVEsSUFBSUMsSUFDakJ4MUMsS0FBSytRLE9BQVMsS0FJaEJ4aEIsbUJBQ0UsSUFBSWtsQixNQUFRMUksRUFBRSxRQUFRd0MsS0FBSyxTQUN0QmtHLE9BQU9uakIsU0FDVnlhLEVBQUUsUUFBUXluQixPQUFPem5CLEVBQUUscUNBQ25CMEksTUFBUTFJLEVBQUUsUUFBUXdDLEtBQUssVUFFekJrRyxNQUFNK2UsT0FDSixpRkFLT3ppQixrQkFBUTNNLEdBQ1p4VSxLQUFLNmxELHVCQUNSN2xELEtBQUs2bEQscUJBQXVCLElBQUlILHFCQUVsQzFsRCxLQUFLNmxELHFCQUFxQjFrQyxPQUFTM00sRUFHMUIyTSxvQkFDVCxHQUFLbmhCLEtBQUs2bEQscUJBQVYsQ0FJQSxHQUFLN2xELEtBQUs2bEQscUJBQXFCMWtDLE9BSS9CLE9BQU9uaEIsS0FBSzZsRCxxQkFBcUIxa0MsT0FIL0IxUixHQUFHQyxjQUFja1csTUFBTSxzQkFKdkJuVyxHQUFHQyxjQUFja1csTUFBTSx1QkFVaEIrL0IsbUJBSVQsT0FISzNsRCxLQUFLNmxELHVCQUNSN2xELEtBQUs2bEQscUJBQXVCLElBQUlILHFCQUUzQjFsRCxLQUFLNmxELHFCQUFxQkYsTUFHbkNobUQsZ0JBQWlCbW1ELGtCQUNmQSxpQkFBaUJoa0MsU0FBUWlrQyxrQkFDbEJMLG9CQUFvQkMsTUFBTXpsRCxJQUFJNmxELGdCQUFnQmw1QyxPQUNqRDY0QyxvQkFBb0JDLE1BQU0xa0MsSUFBSThrQyxnQkFBZ0JsNUMsS0FBTWs1QyxxQkFVckQsTUFBTUMsaUJBS1g5eEMsWUFBYXpRLEtBQU8sR0FBSXBCLFFBQVUsSUFDaEMrTixLQUFLMjBCLFdBQVd0aEMsTUFDaEIyTSxLQUFLMm1CLFNBQVcxMEIsUUFHbEIwaUMsV0FBWXRoQyxNQUNWMk0sS0FBSzYxQyxNQUFReGlELEtBQ1IyTSxLQUFLNjFDLE1BQU03cUIsUUFBT2hyQixLQUFLNjFDLE1BQU03cUIsTUFBUSxJQUd4Qy80QixjQUNGLE9BQU8yMEIsWUFBWTVtQixLQUFLOEQsWUFBWStpQixlQUFnQjdtQixLQUFLMm1CLFVBR3ZEOWEsZUFDRixPQUFPN0wsS0FBSy9OLFFBQVE0WixTQUdsQmliLGlCQUNGLE9BQU85bUIsS0FBSy9OLFFBQVF5bEIsU0FBUy9rQixLQUFLLEtBR2hDcUksY0FDRixPQUFJZ0YsS0FBSy9OLFFBQVE2akQsSUFBWWxtRCxLQUFLb0MsS0FFaENnTyxLQUFLL04sUUFBUStJLFNBQ2JwSixZQUFZcTRDLGdCQUFnQmpxQyxLQUFLL04sUUFBUStJLFNBRWxDcEosWUFBWXE0QyxnQkFBZ0JqcUMsS0FBSy9OLFFBQVErSSxTQUUzQ3BMLEtBQUtvQyxLQUdkOGhCLFVBQ0UsTUFBTyxDQUNMblUsS0FBTUssS0FDTmdyQixNQUFPaHJCLEtBQUtnckIsTUFDWjMzQixLQUFNMk0sS0FBS2tvQixXQUNYajJCLFFBQVMrTixLQUFLL04sUUFDZDhqRCxJQUFLLzFDLEtBQUs4bUIsV0FDVjkwQixLQUFNcEMsS0FBS29DLEtBQ1hnSixRQUFTZ0YsS0FBS2hGLFNBSWxCa3RCLFdBQ0UsSUFBS2xvQixLQUFLNjFDLE1BQU8sT0FDakIsTUFBTXhpRCxLQUFPLEdBQ2IsSUFBSyxNQUFNYyxLQUFLL0IsT0FBT0QsS0FBSzZOLEtBQUs2MUMsT0FBUSxDQUN2QyxNQUFNdmpELEVBQUkwTixLQUFLNjFDLE1BQU0xaEQsR0FFbkJkLEtBQUtjLEdBREg3QixhQUFhRixPQUNMRSxFQUFFNDFCLFNBQVc1MUIsRUFBRTQxQixXQUFhOHRCLFVBQVUxakQsR0FDakNBLEVBRW5CLE9BQU9lLEtBR1QvQyxnQkFBaUJ5MkIsa0JBQW9CLElBS25DLE1BQU1wYixXQUFhQyxlQUFlNUwsS0FBSzZMLFNBQVU3TCxLQUFLOFQsV0FDaERoSSxnQkFBa0JDLEVBQUVKLE1BQU0sR0FDNUIzTCxLQUFLL04sUUFBUWdrRCxlQUNmbnFDLGdCQUFnQnZZLFFBQVFvSixPQUFTakosT0FBT3NNLEtBQUtrMkMsbUJBRS9DcHFDLGdCQUFnQnZZLFFBQVE0aUQsU0FBV24yQyxLQUFLOEQsWUFBWXJILEtBQ3BEcVAsZ0JBQWdCN1gsVUFBVUMsT0FBTzhMLEtBQUsvTixRQUFReWxCLFNBRTlDLE1BQU0xYyxRQUNKZ0YsS0FBSy9OLFFBQVErSSxVQUFZZ0YsS0FBSy9OLFFBQVE2akQsSUFDbENsa0QsWUFBWXFKLFdBQVcrRSxLQUFLL04sUUFBUStJLFNBQ3BDLEdBRUF2SixTQUFXdTdDLFFBQVFDLE1BQU1ybUIsWUFDN0IsQ0FDRTUwQixLQUFNcEMsS0FBS29DLEtBQUt5SixHQUNoQlQsUUFDQUQsT0FBUW5MLEtBQUs0UCxLQUFLQyxTQUFTTyxLQUFLL04sUUFBUXVCLE9BQ3hDa0ksUUFBU29RLGdCQUFnQk4sV0FFM0J1YixtQkFHRSxDQUFDLFNBQVUsYUFBYTUxQixTQUFTNk8sS0FBS3ZRLFlBQ3hDZ0MsU0FBU0MsUUFBVUUsWUFBWTZULHFCQUFxQixPQUVoQyxhQUFsQnpGLEtBQUt2USxXQUF5QmdDLFNBQVNDLFFBQVUsQ0FBQzlCLEtBQUtvQyxLQUFLeUosS0FDMUMsY0FBbEJ1RSxLQUFLdlEsV0FBMEJnQyxTQUFTRSxPQUFRLEdBRXBEQyxZQUFZK0osT0FBT2xLLFVBQVVtSyxNQUFLQyxLQUN6QkEsTUFJWHZMLHFCQUFzQjJCLFFBQVUsSUFFOUIsR0FESUEsUUFBUWkxQixTQUFTbG5CLEtBQUtrbkIsVUFDckJsbkIsS0FBS21NLFVBRUgsQ0FDTCxNQUFNUixXQUFhQyxlQUFlNUwsS0FBSzZMLFNBQVU3TCxLQUFLOFQsV0FDaERoSSxnQkFBa0JDLEVBQUVDLFVBQVVMLE1BQU0sR0FHMUNHLGdCQUFnQnZZLFFBQVFvSixPQUFTakosT0FBT3NNLEtBQUtrMkMsa0JBQzdDcHFDLGdCQUFnQnZZLFFBQVE0aUQsU0FBV24yQyxLQUFLOEQsWUFBWXJILEtBQ3BEcVAsZ0JBQWdCN1gsVUFBVUMsT0FBTzhMLEtBQUsvTixRQUFReWxCLFNBRzlDOW5CLEtBQUs2bEQscUJBQXFCMWtDLE9BQU93akIsWUFDL0IsZ0JBQ0F2MEIsS0FBS21NLFVBQ0xMLGdCQUFnQk4sZ0JBZGxCeEwsS0FBS21PLFlBMEJUN2Qsd0JBQXlCcWIsTUFNdkJBLEtBQUs0TSxHQUFHLFNBQVUsd0JBQXlCdlksS0FBS28yQyxVQUFVeitDLEtBQUtxSSxPQUMvRDJMLEtBQUs0TSxHQUFHLFFBQVMsSUFBSTI4Qix3QkFBeUJsMUMsS0FBS3FuQixVQUFVMXZCLEtBQUtxSSxPQUNsRTJMLEtBQUs0TSxHQUFHLFFBQVMsSUFBSTI4QixvQkFBcUJsMUMsS0FBS3lZLFVBQVU5Z0IsS0FBS3FJLE9BQzlEMkwsS0FBSzRNLEdBQUcsV0FBWSxJQUFJMjhCLGtCQUFtQmwxQyxLQUFLbzJDLFVBQVV6K0MsS0FBS3FJLE9BQy9EMkwsS0FBSzRNLEdBQUcsUUFBUyxJQUFJMjhCLG1CQUFvQmwxQyxLQUFLOFksVUFBVW5oQixLQUFLcUksT0FDN0QyTCxLQUFLNE0sR0FBRyxVQUFXLElBQUkyOEIsaUJBQWtCbDFDLEtBQUtzbkIsT0FBTzN2QixLQUFLcUksT0FTMUQyTCxLQUNHNEMsS0FBSyx5QkFDTDhuQyxNQUFLL2xELE1BQU9zbEIsRUFBRytELFdBQWEzWixLQUFLczJDLGNBQWMzOEIsTUFDbERoTyxLQUNHNEMsS0FBSywwQkFDTDhuQyxNQUFLL2xELE1BQU9zbEIsRUFBRytELFdBQWEzWixLQUFLdTJDLGNBQWM1OEIsTUFDbERoTyxLQUFLNEMsS0FBSyxJQUFJMm1DLHlCQUF5Qm1CLE1BQUssQ0FBQ3pnQyxFQUFHK0QsS0FBTzNaLEtBQUt3MkMsU0FBUzc4QixNQUNyRWhPLEtBQ0c0QyxLQUFLLElBQUkybUMsaUNBQ1RtQixNQUFLLENBQUN6Z0MsRUFBRytELEtBQU8zWixLQUFLeTJDLGNBQWM5OEIsTUFJeEM2OEIsU0FBVTU1QyxTQUNIQSxTQUFZQSxRQUFRckosUUFBUWdwQixNQUNqQzNmLFFBQVEzSSxVQUFVQyxJQUNoQjhMLEtBQUtnckIsTUFBTXB1QixRQUFRckosUUFBUWdwQixNQUFRNjRCLFNBQVdBLFdBSWxEcUIsY0FBZTc1QyxTQUNiLElBQUtBLFVBQVlBLFFBQVFILEtBQU0sT0FDL0IsTUFBTWk2QyxRQUFVOTVDLFFBQVFILEtBQUtSLE1BQU0sS0FDRixTQUE3Qnk2QyxRQUFRLEdBQUc1NkMsZUFDWGtFLEtBQUs2MUMsWUFBUzN4QyxJQUFjbEUsS0FBSzYxQyxNQUFNYSxRQUFRLEtBQzdDMTJDLEtBQUs2MUMsTUFBTWEsUUFBUSxNQUFROTVDLFFBQVFPLFFBQ3JDUCxRQUFRK1UsU0FBVSxHQUt4QnJoQixvQkFBcUJzTSxTQUNuQixJQUFLQSxRQUFRckosUUFBUW9qRCxjQUFlLGFBQ1ozMkMsS0FBSzQyQyxRQUFRaDZDLFFBQVFySixRQUFRb2pELGVBQWUsS0FDcEQvNUMsUUFBUTZYLE1BQU00QyxRQUFVLFFBRzFDL21CLG9CQUFxQnNNLFNBQ25CLElBQUtBLFFBQVFySixRQUFRc2pELGVBQWdCLGFBQ2I3MkMsS0FBSzQyQyxRQUFRaDZDLFFBQVFySixRQUFRc2pELGtCQUVuRGo2QyxRQUFRM0ksVUFBVUMsSUFBSSxrQkFDbEI2WCxFQUFFblAsU0FBUzJvQyxHQUFHLFdBQ0ssVUFBakIzb0MsUUFBUTFCLEtBQWtCNlEsRUFBRW5QLFNBQVM0aUMsS0FBSyxZQUFZLEdBQ3JEenpCLEVBQUVuUCxTQUFTNGlDLEtBQUssWUFBWSxJQUUvQnp6QixFQUFFblAsU0FBUzJvQyxHQUFHLFdBQVd4NUIsRUFBRW5QLFNBQVM0aUMsS0FBSyxZQUFZLElBVzdEbHZDLGNBQWV3bUQsYUFBY2ppQixRQUFTLEdBQ3BDLElBQUtpaUIsYUFBYXhsRCxPQUFRLE9BQU8sRUFDakMsSUFBSXlsRCxpQkFBbUJELGFBQWE3NkMsTUFBTSxLQUMxQyxNQUFNKzZDLFdBQWFELGlCQUFpQjVsRCxTQUFTZ2tELDJCQU03QyxHQUxLNkIsWUFDSEQsaUJBQW1CQSxpQkFBaUIxbEQsUUFDbENzekMsR0FBS0EsSUFBTXdRLDZCQUdYdmxELEtBQUtvQyxLQUFLcWhCLEtBQ1osT0FBS3doQixTQUNEa2lCLGlCQUFpQjVsRCxTQUFTZ2tELG9CQUNiNkIsV0FFQUEsV0FLbkIsR0FIRUQsaUJBQW1CQSxpQkFBaUIxbEQsUUFBT3N6QyxHQUFLQSxJQUFNd1EscUJBR3BENEIsaUJBQWlCNWxELFNBQVNna0Qsc0JBQXVCLENBQ25ELEdBQUluMUMsS0FBS25GLFFBQVFvOEMsU0FBVSxPQUFlRCxVQUMxQ0QsaUJBQW1CQSxpQkFBaUIxbEQsUUFDbENzekMsR0FBS0EsSUFBTXdRLHVCQUlmLEdBQUk0QixpQkFBaUI1bEQsU0FBU2drRCx5QkFBMEIsQ0FDdEQsTUFBTW42QyxRQUFVZ0YsS0FBS25GLFFBQVF4SCxLQUFLMkgsUUFDbEMsR0FBSUEsUUFBUXVCLE9BQVN2QixRQUFRd0IsTUFBTyxDQUNsQyxNQUFNekQsWUFBYzIzQyxTQUNsQixTQUFTMTFDLFFBQVF3QixlQUFleEIsUUFBUXVCLFNBRTFDLEdBQUl4RCxPQUNFQSxNQUFNMGEsUUFBUyxPQUFldWpDLGVBRS9CLEdBQUloOEMsUUFBUWpDLE1BQU8sQ0FDeEIsTUFBTUEsTUFBUW5KLEtBQUtzTSxPQUFPcE0sSUFBSWtMLFFBQVFqQyxPQUN0QyxHQUFJQSxPQUNFQSxNQUFNMGEsUUFBUyxPQUFldWpDLFVBTXRDRCxpQkFBbUJBLGlCQUFpQjFsRCxRQUNsQ3N6QyxHQUFLQSxJQUFNd1EsMEJBT2YsT0FISTRCLGlCQUFpQnpsRCxRQUNuQitOLEdBQUdDLGNBQWN3UixLQUFLLG9DQUVQa21DLFVBR25Cem5ELDJCQUE0Qm9jLE1BQzFCLE1BQ01HLGdCQURxQkgsS0FBSyxHQUNXOUwsY0FBYyxJQUFJcTFDLGFBQzdELElBQUtwcEMsZ0JBQWlCLE9BRXRCLE1BQU1uTSxXQUFhaTJDLGlCQUFpQmx1QixvQkFBb0I1YixpQkFDeERuTSxLQUFLaW9CLGVBQ0xqb0IsS0FBS29YLGtCQUFrQnBMLE1BR3JCcWYsWUFDRixPQUFPaHJCLEtBQUs2MUMsTUFBTTdxQixNQU9wQnBELGdCQU9BOU8sVUFBV3ZrQixPQUNULE1BRU1rTyxPQUZTbE8sTUFBTTRpQixjQUVDNWpCLFFBQVFrUCxPQUN6QkEsT0FJQXpDLEtBQUt5QyxRQUlOekMsS0FBS3lDLFNBQVN6QyxLQUFLeUMsUUFBUSxDQUFFbE8sTUFBYzJVLFFBQVEsSUFIckRvdUIsUUFBUS8zQixLQUFLLE1BQU1rRCxxQ0FKbkI2MEIsUUFBUS8zQixLQUFLLHlDQWVqQituQixPQUFRL3lCLE9BRU4sTUFEa0IsVUFBZEEsTUFBTXZCLEtBQWlCZ04sS0FBS3lZLFVBQVVsa0IsT0FDckIsVUFBZEEsTUFBTXZCLElBR2ZvakQsVUFBVzdoRCxPQUNULEdBQUl5TCxLQUFLL04sUUFBUTQwQyxlQUNmLE9BQU83bUMsS0FBS3lZLFVBQVVsa0IsT0FJMUJra0IsVUFBV2xrQixPQUNUQSxNQUFNMGEsaUJBRU4sTUFDTXRQLEtBRFNwTCxNQUFNNGlCLGNBQ0RuSyxRQUFRLElBQUlrb0MsYUFDaEMsSUFBS3YxQyxLQUFNLE9BQ0tLLEtBQUs2bkIsUUFBUWxvQixPQUNoQkssS0FBSzJjLGlCQVFwQmtMLFFBQVNsb0IsTUFDUCxNQUFNbW9CLE1BQVFub0IsS0FBSytCLGlCQUFpQixRQUNwQyxJQUFJcW1CLFNBQVUsRUFDZCxJQUFLLElBQUluUyxFQUFJLEVBQUdBLEVBQUlrUyxNQUFNeDJCLE9BQVFza0IsSUFBSyxDQUNyQyxNQUFNb1MsS0FBT0YsTUFBTWxTLEdBRW5CLElBQUl2aUIsS0FETyxJQUFJNDBCLGlCQUFpQkQsTUFDbEJFLFdBQ2Q3MEIsS0FBTzI1QyxRQUFRQyxNQUFNOWtCLFdBQ25Cbm9CLEtBQUs2MUMsTUFDTDdJLFFBQVFDLE1BQU03a0IsYUFBYS8wQixPQUU3QixJQUFLLE1BQU9MLElBQUttSyxTQUFVL0ssT0FBT2dDLFFBQVFmLEtBQUtBLE1BQzdDMk0sS0FBSzYxQyxNQUFNN2lELEtBQU9tSyxNQUNsQjRxQixTQUFVLEVBR2QsT0FBT0EsUUFHTGx0QixjQUNGLE9BQUltRixLQUFLcW9CLFNBQWlCcm9CLEtBQUtxb0IsU0FDM0Jyb0IsS0FBS3NvQixXQUFtQjE0QixLQUFLc2MsU0FBU3BjLElBQUlrUSxLQUFLc29CLGlCQUFuRCxFQUlFenRCLFlBQVN1SixHQUNYcEUsS0FBS3FvQixTQUFXamtCLEVBR2QrSCxnQkFDRixPQUFJbk0sS0FBS3NvQixXQUFtQnRvQixLQUFLc29CLFdBQzdCdG9CLEtBQUtxb0IsU0FBaUJyb0IsS0FBS3FvQixTQUFTNXNCLFFBQXhDLEVBSUUwUSxjQUFXL0gsR0FDYnBFLEtBQUtzb0IsV0FBYWxrQixFQUdUeWlCLDRCQUNULE1BQU8sQ0FDTG92QixjQUFjLEVBQ2R2K0IsUUFBUyxDQUFDdzlCLFdBQ1Yzc0IsUUFBUyxHQUNUQyxpQkFBa0IsSUFDbEJxZSxnQkFBZ0IsRUFDaEI3ckMsUUFBU3BKLFlBQVlxSixhQUNyQjY2QyxLQUFLLEdBUUxJLHVCQUNGLE9BQU92aUQsS0FBS0MsVUFBVW9NLEtBQUs2MUMsT0FBTyxDQUFDN2lELElBQUttSyxTQUN0QyxHQUFjLE9BQVZBLFFBQ0E2QyxLQUFLL04sUUFBUXMyQixTQUFTcDNCLFNBQVM2QixPQUMvQkEsSUFBSStKLFdBQVdpRCxLQUFLL04sUUFBUXUyQixrQkFDaEMsT0FBT3JyQixTQUlQMU4sZUFFRixPQURLdVEsS0FBS3FFLFlBQVdyRSxLQUFLcUUsVUFBWXpVLEtBQUtJLFNBQVNGLElBQUksT0FBUSxhQUN6RGtRLEtBQUtxRSxVQUdWNVUsYUFBVTJVLElBQ0YsSUFBTkEsSUFBYXBFLEtBQUtxRSxVQUFZelUsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGFBQzVEa1EsS0FBS3FFLFVBQVlELEVBR25CN1UsMkJBQTRCNGMsV0FDMUIsTUFBTXRSLFFBQVVqTCxLQUFLc2MsU0FBU3BjLElBQUlxYyxXQUNsQyxJQUFLdFIsUUFBUyxPQUNkLE1BQU04RSxXQUFhSyxLQUFLeW9CLFlBQVk1dEIsU0FFcEMsT0FEQThFLEtBQUt3TSxVQUFZQSxVQUNWeE0sS0FHVHBRLHlCQUEwQnNMLFNBQ3hCLE1BQU02dEIsWUFBYzNjLEVBQUVsUixRQUFReEgsS0FBS3FJLFNBQVMsR0FDNUMsSUFBS2d0QixZQUFhLE9BQ2xCLE1BQU0vb0IsV0FBYUssS0FBSzBuQixvQkFBb0JnQixhQUU1QyxPQURBL29CLEtBQUs5RSxRQUFVQSxRQUNSOEUsS0FHVHBRLGlDQUFrQzJuRCxXQUNoQyxJQUFLQSxVQUFXLE9BQ2hCLElBQUtBLFVBQVUzakQsUUFBUTRpRCxTQUFVLE9BQ2pDLE1BQU14dEIsU0FBV2gxQixLQUFLaVosTUFBTUMsU0FBU3FxQyxVQUFVM2pELFFBQVFvSixTQUVqRHdQLFVBRFUrcUMsVUFBVWxxQyxRQUFRLGFBQ1B6WixTQUFTNFksVUFFcEMsYUFBYW5NLEtBQUtpTixTQUFTMGIsU0FBVXV1QixVQUFVM2pELFFBQVE0aUQsU0FBVWhxQyxXQUduRTVjLHNCQUF1QjhELEtBQU04akQsY0FBZWhyQyxVQUFZLE1BQ3RELE1BQU1pckMsVUFBWXhuRCxLQUFLNmxELHFCQUFxQkYsTUFBTXpsRCxJQUFJcW5ELGVBRXRELElBQUtDLFVBRUgsWUFEQTlmLFFBQVE5aEIsTUFBTSwyQkFBMkIyaEMsaUJBSTNDLE1BQU14M0MsS0FBTyxJQUFJeTNDLFVBQVUvakQsTUFHM0IsT0FGSThZLFlBQVd4TSxLQUFLd00sVUFBWUEsaUJBQzFCeE0sS0FBS2lvQixlQUNKam9CLEtBR1R5bkIsUUFBU3hLLFdBQ0ZBLFVBQW1DLFdBQXJCN1EsRUFBRTdRLEtBQUswaEIsYUFDMUI1YyxLQUFLNjFDLE1BQU03cUIsTUFBTXBPLFdBQVksR0FHL0JnTSxVQUFXaE0sV0FDSkEsVUFBbUMsV0FBckI3USxFQUFFN1EsS0FBSzBoQixhQUMxQjVjLEtBQUs2MUMsTUFBTTdxQixNQUFNcE8sV0FBWSxHQUcvQkYsV0FBWUUsVUFDVjVjLEtBQUtnckIsTUFBTXBPLFdBQWE1YyxLQUFLZ3JCLE1BQU1wTyxVQUdyQ3RzQixnQkFBaUJpRSxPQUtmQSxNQUFNMGEsaUJBRU4sTUFBTXhLLE9BQVNsUSxNQUFNNGlCLGNBQ3JCLEdBQUksV0FBWTFTLE9BQU9sUixRQUFTLE9BQU95TSxLQUFLOFksVUFBVXZrQixPQUN0RCxHQUNFa1EsUUFDQUEsT0FBT3hRLFVBQVVra0IsU0FBUyxvQkFDekJ2b0IsS0FBS29DLEtBQUtxaEIsS0FFWCxPQUVGLE1BQU1rSixLQUFPOVgsT0FBT2xSLFFBQVFncEIsS0FDNUIsSUFBS0EsS0FBTSxPQUNYLE1BQU0zTCxPQUFTbk0sT0FBT3VJLFFBQVEsY0FDOUIsR0FBSzRELE9BRUUsQ0FDTCxNQUFNaUIsUUFBVWpCLE9BQU9sUCxpQkFBaUIsZUFDeEMsSUFBSyxNQUFNcWYsS0FBS2xQLFFBQ2Q3UixLQUFLNG9CLFVBQVU3SCxFQUFFeHRCLFFBQVFncEIsTUFFM0J2YyxLQUFLb25CLFFBQVE3SyxXQU5idmMsS0FBSzBjLFdBQVdILE1BUWxCLE1BQU01YyxLQUFPOEUsT0FBT3VJLFFBQVEsSUFBSWtvQyxhQUM1QmwxQyxLQUFLL04sUUFBUTQwQyxpQkFDWGxuQyxNQUFNSyxLQUFLNm5CLFFBQVFsb0IsTUFDdkJLLEtBQUsyYyxtQkNubEJKLE1BQU0wNkIsaUJBQWlCekIsaUJBS2pCL3VCLDRCQUNULE9BQU9ELFlBQVk5Z0IsTUFBTStnQixlQUFnQixDQUN2Q2hiLFNBQVUsZ0RBSWRpSSxVQUNFLE1BQU16Z0IsS0FBT3lTLE1BQU1nTyxVQU1uQixPQUxBemdCLEtBQUtpa0QsZ0JBQWtCLENBQ3JCLEVBQUcsV0FDSCxFQUFHLFlBR0Vqa0QsTUNESixNQUFNa2tELHVCQUF1QkMsV0FDbENsbkQsZ0JBQ0UsTUFBTStDLFdBQWF5UyxNQUFNZ08sVUFHbkIyakMsVUFBWXozQyxLQUFLakgsTUFBTTFGLEtBQUs2MEIsVUFBUyxHQXlMM0MsR0F4TEE3MEIsS0FBS0EsS0FBT29rRCxVQUFVcGtELEtBQ3RCQSxLQUFLcWtELFNBQVcxM0MsS0FBSzIzQyxXQUdyQnRrRCxLQUFLOFAsUUFBVW5ELEtBQUtqSCxNQUFNb0ssUUFDMUI5UCxLQUFLdWtELFlBQWMsR0FDbkJ2a0QsS0FBSzZSLE9BQVMsR0FDZDdSLEtBQUt3a0QsYUFBZSxHQUNwQnhrRCxLQUFLMHJDLFFBQVUsR0FDZjFyQyxLQUFLeWtELFNBQVcsR0FDaEJ6a0QsS0FBSzBrRCxTQUFXLEdBQ2hCMWtELEtBQUsya0QsV0FBYSxHQUVsQjNrRCxLQUFLNGtELG1CQUNGcm9ELEtBQUtvQyxLQUFLcWhCLE9BQ1ZyVCxLQUFLakgsTUFBTTFGLEtBQUswcEIsV0FBV250QixLQUFLb0MsS0FBS3lKLEtBQ3BDdUUsS0FBS2pILE1BQU0xRixLQUFLMHBCLFdBQVd6QyxZQUMxQm5mLE1BQU02aEIsMkJBQTZCN2hCLE1BQU04aEIsb0JBQW9CaTdCLFFBRWxFN2tELEtBQUtnZ0IsS0FBT3pqQixLQUFLb0MsS0FBS3FoQixLQUN0QmhnQixLQUFLOGtELFdBQ29ELFdBQXZEdm9ELEtBQUtJLFNBQVNGLElBQUksT0FBUSwwQkFDMUJGLEtBQUtvQyxLQUFLcWhCLE1BQzhDLGFBQXZEempCLEtBQUtJLFNBQVNGLElBQUksT0FBUSwwQkFDekJGLEtBQUtJLFNBQVNGLElBQUksT0FBUSx1QkFFMkIsYUFBdkRGLEtBQUtJLFNBQVNGLElBQUksT0FBUSwwQkFDMUJGLEtBQUtJLFNBQVNGLElBQUksT0FBUSx5QkFFMUJ1RCxLQUFLLHNCQUF1QixHQUd6QixDQUFDLFdBQVdsQyxTQUFTNk8sS0FBS2pILE1BQU0xRixLQUFLNkgsUUFDbkM3SCxLQUFLQSxLQUFLNkIsa0JBQ2I3QixLQUFLQSxLQUFLNkIsZ0JBQWtCLENBQzFCQyxJQUFLLENBQ0hnSSxNQUFPLEtBQ1B1UixNQUFPLGFBQ1BDLE1BQU8sa0JBQ1BsYixRQUFTLE1BRVgyQixJQUFLLENBQ0grSCxNQUFPLEtBQ1B1UixNQUFPLGFBQ1BDLE1BQU8sc0JBQ1BsYixRQUFTLE1BRVg0QixJQUFLLENBQ0g4SCxNQUFPLEtBQ1B1UixNQUFPLGFBQ1BDLE1BQU8sY0FDUGxiLFFBQVMsTUFFWDZCLElBQUssQ0FDSDZILE1BQU8sS0FDUHVSLE1BQU8sYUFDUEMsTUFBTyxtQkFDUGxiLFFBQVMsTUFFWDhCLElBQUssQ0FDSDRILE1BQU8sS0FDUHVSLE1BQU8sYUFDUEMsTUFBTyxvQkFDUGxiLFFBQVMsTUFFWCtCLElBQUssQ0FDSDJILE1BQU8sS0FDUHVSLE1BQU8sYUFDUEMsTUFBTyxzQkFDUGxiLFFBQVMsTUFFWGdDLElBQUssQ0FDSDBILE1BQU8sS0FDUHVSLE1BQU8sYUFDUEMsTUFBTyxlQUNQbGIsUUFBUyxNQUVYaUMsSUFBSyxDQUNIeUgsTUFBTyxLQUNQdVIsTUFBTyxhQUNQQyxNQUFPLG1CQUNQbGIsUUFBUyxRQUtWSixLQUFLQSxLQUFLc1gsVUFDYnRYLEtBQUtBLEtBQUtzWCxRQUFVLENBQ2xCOEgsR0FBSSxDQUNGdFYsTUFBTyxLQUNQL0wsSUFBSyxLQUNMc2QsTUFBTyxLQUNQQyxNQUFPLGFBQ1AvWCxNQUFNLEdBRVJpYyxHQUFJLENBQ0YxVixNQUFPLEtBQ1AvTCxJQUFLLEtBQ0xzZCxNQUFPLEtBQ1BDLE1BQU8sZUFDUC9YLE1BQU0sR0FFUmdsQyxJQUFLLENBQUV6K0IsTUFBTyxLQUFNdVIsTUFBTyxNQUFPQyxNQUFPLFFBQ3pDdEUsSUFBSyxDQUNIbE4sTUFBTyxLQUNQL0wsSUFBSyxHQUNMc2QsTUFBTyxNQUNQQyxNQUFPLFNBQ1AvWCxNQUFNLEdBRVJ1dkIsSUFBSyxDQUNIaHBCLE1BQU8sS0FDUHVSLE1BQU8sTUFDUEMsTUFBTyxnQkFDUC9YLE1BQU0sR0FFUnN6QixHQUFJLENBQ0Yvc0IsTUFBTyxLQUNQdVIsTUFBTyxLQUNQQyxNQUFPLGVBQ1AvWCxNQUFNLEdBRVJtdkIsTUFBTyxDQUNMNW9CLE1BQU8sS0FDUHVSLE1BQU8sTUFDUEMsTUFBTyxRQUNQL1gsTUFBTSxHQUVSOHVCLE1BQU8sQ0FBRXZvQixNQUFPLEtBQU12RyxNQUFNLEtBSTNCdkQsS0FBS0EsS0FBSzZrQyxZQUNiN2tDLEtBQUtBLEtBQUs2a0MsVUFBWSxDQUNwQmtnQixvQkFBcUIsQ0FBRWw5QyxLQUFNLFNBQVVpQyxNQUFPLE1BSTdDOUosS0FBS0EsS0FBSythLFFBQ2IvYSxLQUFLQSxLQUFLK2EsTUFBUSxDQUNoQjRvQixXQUFZLEdBQ1ptSCxJQUFLLEdBQ0xrYSxJQUFLLEdBQ0xDLFVBQVcsR0FDWEMsV0FBWSxHQUNadGhCLFVBQVcsR0FDWHVoQixhQUFjLEdBQ2RDLFdBQVksS0FJWHBsRCxLQUFLQSxLQUFLMjNCLFFBQ2IzM0IsS0FBS0EsS0FBSzIzQixNQUFRLENBQUVvVCxRQUFRLEVBQU1zYSxjQUFjLElBRzdDcmxELEtBQUtBLEtBQUtzbEQsU0FDYnRsRCxLQUFLQSxLQUFLc2xELE9BQVMsQ0FDakJDLGVBQWdCLEtBQ2hCM2dDLFdBQVksS0FDWjRnQyxNQUFPLEtBQ1BDLGNBQWUsT0FJZHpsRCxLQUFLQSxLQUFLMGxELGNBQ2IxbEQsS0FBS0EsS0FBSzBsRCxZQUFjLENBQ3RCaGlCLFNBQVUsS0FDVkMsV0FBWSxLQUNaQyxVQUFXLE9BSVY1akMsS0FBS0EsS0FBSzZrQyxZQUFXN2tDLEtBQUtBLEtBQUs2a0MsVUFBWSxJQUVoRDdrQyxLQUFLMmxELGtCQUFvQnBwRCxLQUFLSSxTQUFTRixJQUFJLE9BQVEscUJBQ25EdUQsS0FBSzRsRCxxQkFBdUJycEQsS0FBS0ksU0FBU0YsSUFDeEMsT0FDQSx5QkFJSnVELEtBQUs2bEQsT0FBU2w1QyxLQUFLakgsTUFBTVMsS0FDekJuRyxLQUFLOGxELFFBQVVuNUMsS0FBS2pILE1BQU1PLE1BRXRCakcsS0FBS3VOLE1BQU8sQ0FDZCxJQUFLLE1BQU1GLFFBQVFyTixLQUFLdU4sTUFBTyxDQUc3QixHQUFrQixVQUFkRixLQUFLeEYsS0FBa0IsQ0FDekIsR0FBSXdGLEtBQUtyTixLQUFLK3JCLFdBQVd0cEIsUUFBUyxDQUNoQyxHQUFJNEssS0FBS3JOLEtBQUsrckIsV0FBV25wQixVQUVyQnlLLEtBQUtyTixLQUFLK21CLGlCQUNWeHFCLEtBQUs0UCxLQUFLQyxTQUFTLG1DQUNuQixDQUNBLE1BQU0yNUMsYUFBZXA1QyxLQUFLakgsTUFBTTZILE1BQU05USxJQUFJNFEsS0FBSzh6QixXQUN6QzRrQixhQUFhbHdDLE9BQU8sQ0FDeEIsc0JBQXVCdFosS0FBSzRQLEtBQUtDLFNBQy9CLHFDQUdKaUIsS0FBS3JOLEtBQUsrbUIsZUFBaUJ4cUIsS0FBSzRQLEtBQUtDLFNBQ25DLG1DQUlOLEdBQUlpQixLQUFLck4sS0FBSytyQixXQUFXbHBCLFNBRXJCd0ssS0FBS3JOLEtBQUsrbUIsaUJBQ1Z4cUIsS0FBSzRQLEtBQUtDLFNBQVMsa0NBQ25CLENBQ0EsTUFBTTI1QyxhQUFlcDVDLEtBQUtqSCxNQUFNNkgsTUFBTTlRLElBQUk0USxLQUFLOHpCLFdBQ3pDNGtCLGFBQWFsd0MsT0FBTyxDQUN4QixzQkFBdUJ0WixLQUFLNFAsS0FBS0MsU0FDL0Isb0NBR0ppQixLQUFLck4sS0FBSyttQixlQUFpQnhxQixLQUFLNFAsS0FBS0MsU0FDbkMsbUNBTVIsR0FBNkIsY0FBekJPLEtBQUtqSCxNQUFNMUYsS0FBSzZILE1BQ2xCLEdBQUkrSyxNQUFNdkksT0FBT2dELEtBQUtyTixLQUFLOEosUUFBUyxDQUNsQyxJQUFJQSxNQUFRLEtBQ1osTUFBTXErQixPQUFTLEdBQ2YsSUFBSyxNQUFPeG9DLElBQUttSyxTQUFVL0ssT0FBT2dDLFFBQ2hDakIsS0FBS00sUUFBUXVGLFlBRVRoRyxJQUFJK0osV0FBVyxNQUFRSSxNQUFNSixXQUFXLFdBQzFDeStCLE9BQU94b0MsSUFBSXlLLFVBQVUsSUFBTWcrQixZQUN6Qno3QixLQUNBN0MsTUFBTU0sVUFBVSxLQUl0QixJQUNFTixhQUNRLElBQUlqTixLQUFLd1EsS0FBS3JOLEtBQUs4SixNQUFPcStCLFFBQVFwMEIsU0FBUyxDQUMvQzlXLE9BQU8sS0FFVEcsTUFDRixNQUFPb0QsS0FDUHlqQyxRQUFRLzNCLEtBQ04sNEJBQTRCbUIsS0FBS3JOLEtBQUs4SixtQkFBbUJ1RCxLQUFLakUsUUFFaEVVLE1BQVEsS0FHVixHQUFJQSxNQUFPLENBQ1R1RCxLQUFLck4sS0FBSzhKLE1BQVFBLE1BQ2xCLE1BQU1pOEMsYUFBZXA1QyxLQUFLakgsTUFBTTZILE1BQU05USxJQUFJNFEsS0FBSzh6QixXQUN6QzRrQixhQUFhbHdDLE9BQU8sQ0FDeEIsYUFBYy9MLGNBSWYsQ0FDTCxNQUFNMEQsTUFBUWIsS0FBS2pILE1BQU02SCxNQUFNOVEsSUFBSTRRLEtBQUs4ekIsS0FHeEMsR0FGQTl6QixLQUFLck4sS0FBSzRtQixXQUFhcFosTUFBTXc0QyxZQUV6QjM0QyxLQUFLck4sS0FBSzhKLE1BQU8sQ0FDbkIsTUFBTUEsTUFBUXVELEtBQUtyTixLQUFLOEosTUFJeEIsSUFBSW04QyxZQUhRNTRDLEtBQUtyTixLQUFLMlYsYUFBYUMsV0FDL0IxVyxTQUFTbU8sS0FBS3JOLEtBQUsyVixZQUFZQyxZQUMvQixHQUNtQjFXLFNBQVNtTyxLQUFLck4sS0FBSzhKLE9BQVMwRCxNQUFNMUQsTUFDckRtOEMsWUFBYyxJQUFHQSxXQUFhLFlBQzVCdDVDLEtBQUtqSCxNQUFNb3BDLHdCQUF3QixPQUFRLENBQy9DLENBQ0UzTixJQUFLOXpCLEtBQUs4ekIsSUFDViw4QkFBK0I4a0IsV0FDL0IsYUFBYyxRQUdiNTRDLEtBQUtyTixLQUFLMlYsY0FBYXRJLEtBQUtyTixLQUFLMlYsWUFBYyxJQUNwRHRJLEtBQUtyTixLQUFLMlYsWUFBWUMsV0FBYXF3QyxXQUNuQzU0QyxLQUFLck4sS0FBSzhKLE1BQVFBLFdBQ2J1RCxLQUFLck4sS0FBSzhKLE1BQVEwRCxNQUFNMUQsT0FJbkMsSUFBSW9jLEtBQU9sbUIsS0FBS3VrRCxZQUFZbDNDLEtBQUt4RixNQUM1QnFlLE9BQ0hBLEtBQU8sR0FDUGxtQixLQUFLdWtELFlBQVlsM0MsS0FBS3hGLE1BQVFxZSxNQUVoQ0EsS0FBS3JvQixLQUFLd1AsTUFHWixJQUFLLE1BQU02NEMsWUFBWWxtRCxLQUFLdWtELFlBQzFCdmtELEtBQUt1a0QsWUFBWTJCLFVBQVVyc0IsTUFBSyxDQUFDcDVCLEVBQUdpdEIsSUFDM0JqdEIsRUFBRTJJLEtBQ04rOEMsVUFBVSxPQUNWNytDLFFBQVEsbUJBQW9CLElBQzVCZytCLG9CQUNBK0QsY0FDQzNiLEVBQUV0a0IsS0FDQys4QyxVQUFVLE9BQ1Y3K0MsUUFBUSxtQkFBb0IsSUFDNUJnK0IsdUJBTVh0bEMsS0FBSzZSLE9BQVM3UixLQUFLdU4sTUFDaEJ2UCxRQUFPcVAsTUFBc0IsVUFBZEEsS0FBS3hGLE9BQ3BCZ3lCLE1BQUssQ0FBQ3A1QixFQUFHaXRCLElBQ0RqdEIsRUFBRTJJLEtBQ04rOEMsVUFBVSxPQUNWNytDLFFBQVEsbUJBQW9CLElBQzVCZytCLG9CQUNBK0QsY0FDQzNiLEVBQUV0a0IsS0FDQys4QyxVQUFVLE9BQ1Y3K0MsUUFBUSxtQkFBb0IsSUFDNUJnK0IsdUJBSVh0bEMsS0FBS29tRCxZQUFjcG1ELEtBQUs2UixPQUFPN1QsUUFDN0J3UCxRQUNtQyxJQUFqQ0EsTUFBTXhOLEtBQUsrckIsV0FBV3BwQixTQUNhLElBQW5DNkssTUFBTXhOLEtBQUsrckIsV0FBV25wQixXQUUxQjVDLEtBQUtxbUQsWUFBY3JtRCxLQUFLNlIsT0FBTzdULFFBQzdCd1AsUUFDbUMsSUFBakNBLE1BQU14TixLQUFLK3JCLFdBQVdwcEIsU0FDWSxJQUFsQzZLLE1BQU14TixLQUFLK3JCLFdBQVdscEIsVUFHMUIsTUFBTXlqRCxVQUFZdG1ELEtBQUs2UixPQUFPN1QsUUFDNUJ3UCxRQUEwQyxJQUFqQ0EsTUFBTXhOLEtBQUsrckIsV0FBV3BwQixTQUVqQyxHQUFJMmpELFVBQ0YsSUFBSyxNQUFNOTRDLFNBQVM4NEMsVUFDbEJ0bUQsS0FBS3drRCxhQUFhaDNDLE1BQU0yekIsS0FBTzN6QixNQUluQyxNQUFNaytCLFFBQVUxckMsS0FBS3VrRCxZQUFZdHpDLE9BRWpDLEdBQUl5NkIsUUFDRixJQUFLLE1BQU16NkIsVUFBVXk2QixRQUFTLENBVzVCLEdBVkF6NkIsT0FBT3MxQyxvQkFDMkIsSUFBaEN0MUMsT0FBT2pSLEtBQUsrckIsV0FBV3hvQixPQUNTLElBQWhDME4sT0FBT2pSLEtBQUsrckIsV0FBV3pvQixLQUNwQjJOLE9BQU9qUixLQUFLbzRDLE9BQU1ubkMsT0FBT2pSLEtBQUtvNEMsS0FBTyxHQUUxQ25uQyxPQUFPdTFDLFVBQVcsRUFLZ0IsS0FBOUJ2MUMsT0FBT2pSLEtBQUt3TixNQUFNb2YsS0FBS3hrQixHQUV6QjZJLE9BQU91MUMsVUFBVyxNQUNiLENBR0wsR0FBSXhtRCxLQUFLd2tELGFBQWF2ekMsT0FBT2pSLEtBQUt3TixNQUFNb2YsS0FBS3hrQixJQUFLLENBQ2hELE1BQU1vRixNQUFRYixLQUFLakgsTUFBTTZILE1BQU05USxJQUFJd1UsT0FBT2pSLEtBQUt3TixNQUFNb2YsS0FBS3hrQixJQUMxRDZJLE9BQU9qUixLQUFLd04sTUFBTW9mLEtBQUt4akIsS0FDckJwSixLQUFLd2tELGFBQWF2ekMsT0FBT2pSLEtBQUt3TixNQUFNb2YsS0FBS3hrQixJQUFJZ0IsS0FDL0M2SCxPQUFPalIsS0FBS3dOLE1BQU1vZixLQUFLOWlCLE1BQVEwRCxNQUFNMUQsV0FFckNtSCxPQUFPdTFDLFVBQVcsRUFHcEIsR0FBd0MsS0FBcEN2MUMsT0FBT2pSLEtBQUt3TixNQUFNc2YsV0FBVzFrQixJQUMzQnBJLEtBQUt3a0QsYUFBYXZ6QyxPQUFPalIsS0FBS3dOLE1BQU1zZixXQUFXMWtCLElBQUssQ0FDdEQsTUFBTW9GLE1BQVFiLEtBQUtqSCxNQUFNNkgsTUFBTTlRLElBQzdCd1UsT0FBT2pSLEtBQUt3TixNQUFNc2YsV0FBVzFrQixJQUUvQjZJLE9BQU9qUixLQUFLd04sTUFBTXNmLFdBQVcxakIsS0FDM0JwSixLQUFLd2tELGFBQWF2ekMsT0FBT2pSLEtBQUt3TixNQUFNc2YsV0FBVzFrQixJQUFJZ0IsS0FDckQ2SCxPQUFPalIsS0FBS3dOLE1BQU1zZixXQUFXaGpCLE1BQVEwRCxNQUFNMUQsT0FLakRtSCxPQUFPalIsS0FBS3ltRCxZQUFjLEdBQzFCLElBQUssTUFBTzltRCxJQUFLbUssU0FBVS9LLE9BQU9nQyxRQUFRakIsS0FBS2dELGtCQUFtQixDQUNoRSxNQUFNNDdCLFNBQVcsR0FDakJBLFNBQVN0MkIsR0FBS3pJLElBQ2QrK0IsU0FBU3QxQixLQUFPVSxNQUNoQjQwQixTQUFTNTBCLE9BQXdDLElBQWhDbUgsT0FBT2pSLEtBQUsrckIsV0FBV3BzQixLQUN4Q3NSLE9BQU9qUixLQUFLeW1ELFlBQVk1b0QsS0FBSzZnQyxVQUcvQjErQixLQUFLMHJDLFFBQVF6NkIsT0FBT2t3QixLQUFPbHdCLE9BQ3ZCQSxPQUFPalIsS0FBSytyQixXQUFXL29CLEtBQU1oRCxLQUFLeWtELFNBQVM1bUQsS0FBS29ULFFBQy9DalIsS0FBSzBrRCxTQUFTN21ELEtBQUtvVCxRQUk1QixNQUFNL0gsTUFBUXlELEtBQUt6RCxNQU1uQixHQUxBbEosS0FBSzJJLFFBQVVPLE1BQ1gsR0FBR0EsTUFBTWdULFFBQVE5VCxHQUFLYyxNQUFNZ1QsT0FBTzlULEdBQUssV0FBV2MsTUFBTWQsS0FDekQsS0FFSnBJLEtBQUswbUQsMEJBQTJCLEVBQzVCMW1ELEtBQUtBLEtBQUs2QixnQkFDWixJQUFLLE1BQU0rTixrQkFBa0I3USxPQUFPa2MsT0FBT2piLEtBQUtBLEtBQUs2QixpQkFDOUMrTixlQUFlOUYsUUFBTzhGLGVBQWV5MEMsVUFBVyxHQUNyRHowQyxlQUFlNUMsS0FBT2pRLEtBQUt1aUIsTUFBTTFQLGVBQWU5RixNQUFRLEdBQ3hEOEYsZUFBZTNDLFFBQVVsUSxLQUFLdWlCLE1BQU0xUCxlQUFlOUYsTUFBUSxHQUd0RDhGLGVBQWU5RixPQUFVOEYsZUFBZXhQLFFBRzNDd1AsZUFBZW9VLFNBQVUsRUFGekJwVSxlQUFlb1UsU0FBVSxHQU10QnBVLGVBQWU5RixPQUFTOEYsZUFBZXhQLFVBQzFDd1AsZUFBZTgyQywwQkFBMkIsR0FHNUMxbUQsS0FBSzBtRCx5QkFDSDFtRCxLQUFLMG1ELDBCQUNMOTJDLGVBQWU4MkMseUJBTXZCLEdBQUssQ0FBQyxVQUFXLGFBQWE1b0QsU0FBUzZPLEtBQUtqSCxNQUFNMUYsS0FBSzZILE1BSXJEN0gsS0FBS0EsS0FBS3NYLFFBQVE4SCxHQUFHN2IsTUFBTyxFQUM1QnZELEtBQUtBLEtBQUtzWCxRQUFRa0ksR0FBR2pjLE1BQU8sRUFDNUJ2RCxLQUFLQSxLQUFLc1gsUUFBUU4sSUFBSXpULE1BQU8sRUFDN0J2RCxLQUFLQSxLQUFLc1gsUUFBUXdiLElBQUl2dkIsTUFBTyxFQUM3QnZELEtBQUtBLEtBQUtzWCxRQUFRdWYsR0FBR3R6QixNQUFPLEVBQzVCdkQsS0FBS0EsS0FBS3NYLFFBQVFvYixNQUFNbnZCLE1BQU8sTUFUNkIsQ0FDNUQsTUFBTUEsS0FBT29KLEtBQUtqSCxNQUFNbzhCLHFCQUN4QjloQyxLQUFLQSxLQUFPdXpCLFlBQVl2ekIsS0FBS0EsS0FBTXVELE1BcUlyQyxPQTNIQXZELEtBQUtBLEtBQUtzWCxRQUFRd2IsSUFBSWhwQixNQUFRNkMsS0FBS2pILE1BQU1vdEIsSUFDekM5eUIsS0FBS0EsS0FBS3NYLFFBQVF1ZixHQUFHL3NCLE1BQVE2QyxLQUFLakgsTUFBTW14QixHQUN4QzcyQixLQUFLQSxLQUFLc1gsUUFBUW9iLE1BQU01b0IsTUFBUTZDLEtBQUtqSCxNQUFNZ3RCLFdBRU4sSUFBMUIvbEIsS0FBS2pILE1BQU1paEQsWUFBOEJoNkMsS0FBS2pILE1BQU0wYSxVQUM3RHpULEtBQUtqSCxNQUFNbVEsT0FDVCxDQUFFLHlCQUEwQmxKLEtBQUtqSCxNQUFNb3RCLEtBQ3ZDLENBQUVsVSxRQUFRLElBRVpqUyxLQUFLakgsTUFBTW1RLE9BQ1QsQ0FBRSx1QkFBd0JsSixLQUFLakgsTUFBTW90QixLQUNyQyxDQUFFbFUsUUFBUSxJQUVaalMsS0FBS2pILE1BQU1tUSxPQUNULENBQUUsd0JBQXlCbEosS0FBS2pILE1BQU1teEIsSUFDdEMsQ0FBRWpZLFFBQVEsSUFFWmpTLEtBQUtqSCxNQUFNbVEsT0FDVCxDQUFFLDZCQUE4QmxKLEtBQUtqSCxNQUFNZ3RCLE9BQzNDLENBQUU5VCxRQUFRLElBRVpqUyxLQUFLakgsTUFBTW1RLE9BQ1QsQ0FBRSwyQkFBNEJsSixLQUFLakgsTUFBTWd0QixPQUN6QyxDQUFFOVQsUUFBUSxLQUtWNWUsS0FBS0EsS0FBS3NYLFFBQVFrSSxHQUFHMVYsTUFBUSxJQUFHOUosS0FBS0EsS0FBS3NYLFFBQVFrSSxHQUFHMVYsTUFBUSxNQUM3RDlKLEtBQUtBLEtBQUtzWCxRQUFRTixJQUFJbE4sTUFBUSxJQUFHOUosS0FBS0EsS0FBS3NYLFFBQVFOLElBQUlsTixNQUFRLE1BRS9EOUosS0FBS0EsS0FBS3NYLFFBQVE4SCxHQUFHN2IsTUFHa0IsTUFBdkN2RCxLQUFLQSxLQUFLNkIsZ0JBQWdCRyxJQUFJOEgsT0FDUyxNQUF2QzlKLEtBQUtBLEtBQUs2QixnQkFBZ0JFLElBQUkrSCxRQUU5QjlKLEtBQUtBLEtBQUtzWCxRQUFROEgsR0FBR3JoQixJQUFNNE8sS0FBS2pILE1BQU0yWixPQUl0Q3JmLEtBQUtBLEtBQUtzWCxRQUFRa0ksR0FBR2pjLE1BRW9CLE1BQXZDdkQsS0FBS0EsS0FBSzZCLGdCQUFnQk8sSUFBSTBILFFBQ2hDOUosS0FBS0EsS0FBS3NYLFFBQVFrSSxHQUFHemhCLElBQU1oQixLQUFLdWlCLE1BQzlCdGYsS0FBS0EsS0FBSzZCLGdCQUFnQk8sSUFBSTBILE1BQVEsSUFLeEM5SixLQUFLQSxLQUFLc1gsUUFBUU4sSUFBSXpULE9BQ3hCdkQsS0FBS0EsS0FBS3NYLFFBQVFOLElBQUlqWixJQUFNNE8sS0FBS2pILE1BQU02TixTQUl2Q3ZULEtBQUtBLEtBQUtzWCxRQUFRa0ksR0FBRzFWLE1BQVE5SixLQUFLQSxLQUFLc1gsUUFBUWtJLEdBQUd6aEIsS0FDdEIsTUFBNUJpQyxLQUFLQSxLQUFLc1gsUUFBUWtJLEdBQUd6aEIsT0FFckJpQyxLQUFLQSxLQUFLc1gsUUFBUWtJLEdBQUcxVixNQUFROUosS0FBS0EsS0FBS3NYLFFBQVFrSSxHQUFHemhCLE1BR2xEaUMsS0FBS0EsS0FBS3NYLFFBQVE4SCxHQUFHdFYsTUFBUTlKLEtBQUtBLEtBQUtzWCxRQUFROEgsR0FBR3JoQixLQUN0QixNQUE1QmlDLEtBQUtBLEtBQUtzWCxRQUFROEgsR0FBR3JoQixPQUVyQmlDLEtBQUtBLEtBQUtzWCxRQUFROEgsR0FBR3RWLE1BQVE5SixLQUFLQSxLQUFLc1gsUUFBUThILEdBQUdyaEIsS0FJcEIsTUFBOUJpQyxLQUFLQSxLQUFLc1gsUUFBUThILEdBQUd0VixPQUNPLE1BQTVCOUosS0FBS0EsS0FBS3NYLFFBQVE4SCxHQUFHcmhCLE1BRXJCaUMsS0FBS0EsS0FBS3NYLFFBQVE4SCxHQUFHdFYsTUFBUTlKLEtBQUtBLEtBQUtzWCxRQUFROEgsR0FBR3JoQixLQUdwQixNQUE5QmlDLEtBQUtBLEtBQUtzWCxRQUFRa0ksR0FBRzFWLE9BQ08sTUFBNUI5SixLQUFLQSxLQUFLc1gsUUFBUWtJLEdBQUd6aEIsTUFFckJpQyxLQUFLQSxLQUFLc1gsUUFBUWtJLEdBQUcxVixNQUFROUosS0FBS0EsS0FBS3NYLFFBQVFrSSxHQUFHemhCLEtBRy9DLENBQUMsV0FBV0QsU0FBUzZPLEtBQUtqSCxNQUFNMUYsS0FBSzZILFFBRVAsTUFBL0I3SCxLQUFLQSxLQUFLc1gsUUFBUU4sSUFBSWxOLE9BQ2lCLE1BQXZDOUosS0FBS0EsS0FBSzZCLGdCQUFnQk8sSUFBSTBILFFBRTlCOUosS0FBS0EsS0FBS3NYLFFBQVFOLElBQUlsTixNQUFROUosS0FBS0EsS0FBSzZCLGdCQUFnQk8sSUFBSTBILE9BRTFEOUosS0FBS0EsS0FBS3NYLFFBQVFOLElBQUlsTixNQUFROUosS0FBS0EsS0FBS3NYLFFBQVFOLElBQUlqWixNQUN0RGlDLEtBQUtBLEtBQUtzWCxRQUFRTixJQUFJbE4sTUFBUTlKLEtBQUtBLEtBQUtzWCxRQUFRTixJQUFJalosS0FHbERpQyxLQUFLQSxLQUFLNmtDLHFCQUFxQnVSLE9BQVNwMkMsS0FBS0EsS0FBSzZrQyxVQUFVNW1DLFNBQzlEK0IsS0FBS0EsS0FBSzZrQyxVQUFVLEdBQUcraEIsU0FBVSxFQUNqQzVtRCxLQUFLQSxLQUFLNmtDLFVBQVU3a0MsS0FBS0EsS0FBSzZrQyxVQUFVNW1DLE9BQVMsR0FBRzRvRCxRQUFTLEdBRy9EN21ELEtBQUtBLEtBQUs4bUQsd0JBQTBCLEdBQ3BDOW1ELEtBQUtBLEtBQUs4bUQsd0JBQXdCaDlDLE1BQVE5SixLQUFLQSxLQUFLc1gsUUFBUU4sSUFBSWtJLFVBQzVEbGYsS0FBS0EsS0FBS3NYLFFBQVFOLElBQUlrSSxVQUN0QixFQUNKbGYsS0FBS0EsS0FBSzhtRCx3QkFBd0Ivb0QsSUFBTWhCLEtBQUt1aUIsTUFDM0N0ZixLQUFLQSxLQUFLc1gsUUFBUU4sSUFBSWxOLE1BQVEsSUFHbEM5SixLQUFLK21ELG9CQUFxQixFQUMxQi9tRCxLQUFLZ25ELG9CQUFxQixFQUMxQmhuRCxLQUFLaW5ELHFCQUFzQixFQUMzQmpuRCxLQUFLa25ELHNCQUF1QixFQUM1QmxuRCxLQUFLbW5ELHVCQUF3QixFQUM3Qm5uRCxLQUFLb25ELHNCQUF1QixFQUU1QnBuRCxLQUFLcW5ELGNBQ0gxNkMsS0FBS2pILE1BQU15b0MsUUFBUXZmLEtBQU8sUUFDa0IsSUFBcENqaUIsS0FBS2pILE1BQU0xRixLQUFLQSxLQUFLZ3VDLFlBQzNCanZDLE9BQU9ELEtBQUs2TixLQUFLakgsTUFBTTFGLEtBQUtBLEtBQUtndUMsWUFBWWh3QyxRQUMzQ3NwRCxXQUFhMzZDLEtBQUtqSCxNQUFNMUYsS0FBS0EsS0FBS2d1QyxXQUFXc1osV0FBV3g5QyxRQUN4RDdMLE9BQVMsRUFPUitCLEtBSVQ5RCxvQkFBcUJrRSxTQUNuQixJQUFJOG5DLGNBQWdCOW5DLFFBQ3BCLElBQUssTUFBT1QsSUFBS21LLFNBQVUvSyxPQUFPZ0MsUUFBUWpCLEtBQUtNLFFBQVF1RixZQUNyRHVpQyxjQUFnQkEsY0FBYzVnQyxRQUFRM0gsSUFBS21LLE9BRTdDLE9BQU9vK0IsY0FHTHI0QixlQUVGLE1BREE3RCxHQUFHQyxjQUFja1csTUFBTSxpQ0FDakIsSUFBSUgsTUFBTSx5REFLbEJ1bEMsZ0JBVUE3akMsa0JBQW1CcEwsTUFJakIsR0FIQTdGLE1BQU1pUixrQkFBa0JwTCxNQUdwQjNMLEtBQUtqSCxNQUFNMGEsY0FBNEMsSUFBMUJ6VCxLQUFLakgsTUFBTWloRCxXQUE0QixDQUN0RXJ1QyxLQUNHNEMsS0FBSyx5QkFDTGdLLEdBQUcsYUFBYWhrQixPQUFTeUwsS0FBSzY2QyxzQkFBc0J0bUQsU0FDdkRvWCxLQUNHNEMsS0FBSyxvQkFDTGdLLEdBQUcsYUFBYWhrQixPQUFTeUwsS0FBSzg2QyxpQkFBaUJ2bUQsU0FDbERvWCxLQUNHNEMsS0FBSyxjQUNMZ0ssR0FBRyxhQUFhaGtCLE9BQVN5TCxLQUFLKzZDLGdCQUFnQnhtRCxTQUVqRG9YLEtBQ0c0QyxLQUFLLHlCQUNMeXNDLFlBQVloN0MsS0FBS2k3QyxlQUFldGpELEtBQUtxSSxPQUN4QzJMLEtBQ0c0QyxLQUFLLHdCQUNMeXNDLFlBQVloN0MsS0FBS2k3QyxlQUFldGpELEtBQUtxSSxPQUN4QzJMLEtBQ0c0QyxLQUFLLDZCQUNMeXNDLFlBQVloN0MsS0FBS2k3QyxlQUFldGpELEtBQUtxSSxPQUN4QzJMLEtBQ0c0QyxLQUFLLHlCQUNMeXNDLFlBQVloN0MsS0FBS2k3QyxlQUFldGpELEtBQUtxSSxPQUV4QzJMLEtBQ0c0QyxLQUFLLHlCQUNMeUksTUFBTWhYLEtBQUtrN0MseUJBQXlCdmpELEtBQUtxSSxPQUM1QzJMLEtBQUs0QyxLQUFLLHdCQUF3QnlJLE1BQU1oWCxLQUFLbTdDLGlCQUFpQnhqRCxLQUFLcUksT0FDbkUyTCxLQUFLNEMsS0FBSyxnQkFBZ0J5SSxNQUFNaFgsS0FBS203QyxpQkFBaUJ4akQsS0FBS3FJLE9BQzNEMkwsS0FDRzRDLEtBQUssNkJBQ0x5SSxNQUFNaFgsS0FBS283QyxrQkFBa0J6akQsS0FBS3FJLE9BQ3JDMkwsS0FBSzRDLEtBQUssU0FBU3lJLE1BQU1oWCxLQUFLcTdDLGVBQWUxakQsS0FBS3FJLE9BQ2xEMkwsS0FBSzRDLEtBQUssU0FBU3lJLE1BQU1oWCxLQUFLczdDLGVBQWUzakQsS0FBS3FJLE9BQ2xEMkwsS0FBSzRDLEtBQUssWUFBWXlJLE1BQU1oWCxLQUFLdTdDLGtCQUFrQjVqRCxLQUFLcUksT0FDeEQyTCxLQUNHNEMsS0FBSyx3QkFDTHlJLE1BQU1oWCxLQUFLdzdDLDJCQUEyQjdqRCxLQUFLcUksT0FDOUMyTCxLQUNHNEMsS0FBSywyQkFDTHlJLE1BQU1oWCxLQUFLeTdDLDhCQUE4QjlqRCxLQUFLcUksT0FDakQyTCxLQUFLNEMsS0FBSyxrQkFBa0J5SSxNQUFNaFgsS0FBS3FuQixVQUFVMXZCLEtBQUtxSSxPQUN0RDJMLEtBQUs0QyxLQUFLLGdCQUFnQnlJLE1BQU1oWCxLQUFLMDdDLGNBQWMvakQsS0FBS3FJLFFBR3BEcFEsS0FBS29DLEtBQUtxaEIsTUFBUXpqQixLQUFLSSxTQUFTRixJQUFJLE9BQVEsMkJBQzlDNmIsS0FBSzRDLEtBQUssa0JBQWtCeUksTUFBTWhYLEtBQUsyN0MsZ0JBQWdCaGtELEtBQUtxSSxPQUM1RDJMLEtBQ0c0QyxLQUFLLHNCQUNMeUksTUFBTWhYLEtBQUs0N0MsbUJBQW1CamtELEtBQUtxSSxPQUN0QzJMLEtBQUs0QyxLQUFLLGFBQWF5SSxNQUFNaFgsS0FBSzY3QyxLQUFLbGtELEtBQUtxSSxPQUM1QzJMLEtBQUs0QyxLQUFLLFlBQVl5SSxNQUFNaFgsS0FBSzg3QyxPQUFPbmtELEtBQUtxSSxRQUcvQzJMLEtBQUs0QyxLQUFLLGdCQUFnQnlJLE1BQU1oWCxLQUFLKzdDLGNBQWNwa0QsS0FBS3FJLE9BRXhEMkwsS0FBSzRDLEtBQUsscUJBQXFCeUksT0FBTXppQixPQUFTeUwsS0FBS2c4QyxZQUFZem5ELFNBQy9Eb1gsS0FDRzRDLEtBQUsseUJBQ0x5SSxPQUFNemlCLE9BQVN5TCxLQUFLaThDLGNBQWMxbkQsU0FDckNvWCxLQUNHNEMsS0FBSywwQkFDTHlJLE9BQU0xbUIsTUFBQUEsT0FBZTBQLEtBQUtrOEMsbUJBQW1CM25ELFNBQ2hEb1gsS0FBSzRDLEtBQUssa0JBQWtCeUksT0FBTXppQixPQUFTeUwsS0FBS204QyxnQkFBZ0I1bkQsU0FDaEVvWCxLQUNHNEMsS0FBSyxrQkFDTGdLLEdBQUcsZUFBZWhrQixPQUFTeUwsS0FBS204QyxnQkFBZ0I1bkQsU0FDbkRvWCxLQUFLNEMsS0FBSyxhQUFheUksTUFBTWhYLEtBQUtvOEMsVUFBVXprRCxLQUFLcUksT0FDakQyTCxLQUFLNEMsS0FBSyxjQUFjOHRDLFNBQVNyOEMsS0FBS3M4QyxnQkFBZ0Iza0QsS0FBS3FJLE9BQzNEMkwsS0FBSzRNLEdBQUcsUUFBUyxpQkFBa0J2WSxLQUFLdThDLGdCQUFnQjVrRCxLQUFLcUksT0FFN0QyTCxLQUFLNEMsS0FBSyxxQkFBcUJ5SSxNQUFNaFgsS0FBS3c4QyxtQkFBbUI3a0QsS0FBS3FJLE9BQ2xFMkwsS0FBSzRDLEtBQUssbUJBQW1CeUksTUFBTWhYLEtBQUt5OEMsaUJBQWlCOWtELEtBQUtxSSxPQUU5RCxNQUFNMDhDLFlBQWMvd0MsS0FBSzRDLEtBQUssb0JBQzlCLElBQUssTUFBTW91QyxjQUFjRCxZQUN2QkMsV0FBV0MsaUJBQWlCLFNBQVNyb0QsT0FBU3lMLEtBQUs2OEMsU0FBU3RvRCxRQUFRLENBQ2xFdW9ELFNBQVMsSUFNVjk4QyxLQUFLL04sUUFBUXlsRCxXQUVsQi9yQyxLQUFLNEMsS0FBSyxnQkFBZ0J5SSxPQUFNemlCLE9BQVN5TCxLQUFLKzhDLGVBQWV4b0QsU0FDN0RvWCxLQUFLNEMsS0FBSyxlQUFleUksTUFBTWhYLEtBQUtnOUMsYUFBYXJsRCxLQUFLcUksT0FHdEQyTCxLQUFLNEMsS0FBSyxnQkFBZ0I4dEMsVUFBUzluRCxPQUFTeUwsS0FBS2k5QyxtQkFBbUIxb0QsU0FDcEVvWCxLQUFLNEMsS0FBSyxjQUFjeUksT0FBTXppQixPQUFTeUwsS0FBS2k5QyxtQkFBbUIxb0QsU0FHL0RvWCxLQUFLNEMsS0FBSyxnQkFBZ0J5SSxPQUFNMW1CLE1BQUFBLEtBQzlCLE1BQU00bUIsR0FBS25MLEVBQUVteEMsR0FBRy9sQyxlQUFlZ21DLFFBQVEsU0FDakNDLGFBQWVwOUMsS0FBS2pILE1BQU02SCxNQUFNOVEsSUFBSW9uQixHQUFHN2pCLEtBQUssVUFBVyxDQUMzRGdxRCxRQUFRLFVBRUpELGFBQWFuaEIsU0FDbkIva0IsR0FBR29tQyxRQUFRLEtBQUssSUFBTXQ5QyxLQUFLaVMsUUFBTyxRQUdwQ3RHLEtBQUs0QyxLQUFLLGFBQWF5SSxPQUFNa21DLEtBQzNCLE9BQVFBLEdBQUcvbEMsY0FBYzVqQixRQUFRMkgsTUFDL0IsSUFBSyxPQUNIOEUsS0FBS2pILE1BQU13a0QsZ0JBQWdCTCxJQUMzQixNQUNGLElBQUssT0FDSGw5QyxLQUFLakgsTUFBTXlrRCxnQkFBZ0JOLElBQzNCLE1BQ0YsSUFBSyxRQUNIbDlDLEtBQUtqSCxNQUFNMGtELGlCQUFpQlAsSUFDNUIsTUFDRixJQUFLLFFBQ0hsOUMsS0FBS2pILE1BQU0ya0QsaUJBQWlCUixJQUM1QixNQUNGLElBQUssU0FDSCxDQUNFLE1BQU05OUIsV0FBYSxHQUNmODlCLEdBQUcvbEMsY0FBYzVqQixRQUFRNkMsTUFDM0JncEIsV0FBV2hwQixPQUFRLEVBQ1Y4bUQsR0FBRy9sQyxjQUFjNWpCLFFBQVE4QyxPQUNsQytvQixXQUFXL29CLE1BQU8sR0FFcEIySixLQUFLakgsTUFBTTRrRCxrQkFBa0JULEdBQUk5OUIsaUJBTXpDelQsS0FBSzRDLEtBQUssZUFBZXlJLE1BQU1oWCxLQUFLNDlDLGFBQWFqbUQsS0FBS3FJLE9BRXREMkwsS0FBSzRDLEtBQUssb0JBQW9CeUksT0FBTSxLQUNsQ2hYLEtBQUtqSCxNQUFNOGdDLHNCQUdibHVCLEtBQUs0QyxLQUFLLG1CQUFtQnlJLE9BQU1rbUMsS0FDakMsTUFBTTlsQyxNQUFRN2tCLFNBQ1oycUQsR0FBRy9sQyxjQUFjbkssUUFBUSxnQkFBZ0J6WixRQUFRNmpCLE9BRW5EcFgsS0FBS2pILE1BQU04a0QsaUJBQWlCem1DLFVBRzlCekwsS0FBSzRDLEtBQUssb0JBQW9CeUksT0FBTWttQyxLQUNsQyxNQUFNOWxDLE1BQVE3a0IsU0FDWjJxRCxHQUFHL2xDLGNBQWNuSyxRQUFRLGdCQUFnQnpaLFFBQVE2akIsT0FFbkRwWCxLQUFLakgsTUFBTStrRCxpQkFBaUIxbUMsVUFHOUJ6TCxLQUFLNEMsS0FBSyxzQkFBc0J5SSxPQUFNa21DLEtBQ3BDLE1BQU05bEMsTUFBUTdrQixTQUNaMnFELEdBQUcvbEMsY0FBY25LLFFBQVEsZ0JBQWdCelosUUFBUTZqQixPQUVuRHBYLEtBQUtqSCxNQUFNZ2xELG1CQUFtQjNtQyxVQUdoQ3pMLEtBQUs0QyxLQUFLLHFCQUFxQjh0QyxVQUFTYSxLQUN6Qmw5QyxLQUFLakgsTUFBTTZILE1BQU05USxJQUM1Qm90RCxHQUFHL2xDLGNBQWNuSyxRQUFRLFNBQVN6WixRQUFRb04sUUFFdkN3dkMsZUFBZSxtQkFHdEJ4a0MsS0FBSzRDLEtBQUssb0NBQW9DeUksT0FBTWttQyxLQUNyQ2w5QyxLQUFLakgsTUFBTTZILE1BQU05USxJQUM1Qm90RCxHQUFHL2xDLGNBQWNuSyxRQUFRLFNBQVN6WixRQUFRb04sUUFFdkN3dkMsZUFBZSxpQkFHdEJ4a0MsS0FBSzRDLEtBQUssbUNBQW1DeUksT0FBTWttQyxLQUNwQ2w5QyxLQUFLakgsTUFBTTZILE1BQU05USxJQUM1Qm90RCxHQUFHL2xDLGNBQWNuSyxRQUFRLFNBQVN6WixRQUFRb04sUUFFdkN3dkMsZUFBZSxnQkFHdEJ4a0MsS0FBSzRDLEtBQUssdUJBQXVCeUksT0FBTXppQixRQUNyQ3lMLEtBQUtqSCxNQUFNaWxELGtCQUFrQnpwRCxNQUFNNGEsYUFHckN4RCxLQUFLNEMsS0FBSyxxQkFBcUJ5SSxPQUFNemlCLFFBQzlCQSxNQUFNMHBELFFBQTJCLElBQWpCMXBELE1BQU0wcEQsUUFDekJqK0MsS0FBS2pILE1BQU1tbEQsWUFBWTNwRCxNQUFNNGEsYUFJakN4RCxLQUFLNEMsS0FBSyxxQkFBcUJ5SSxPQUFNemlCLFFBQ25DLFFBQStDLElBQXBDeUwsS0FBS2pILE1BQU0xRixLQUFLQSxLQUFLZ3VDLFdBQTRCLENBQzFELE1BQU04YyxRQUFVLEdBQ2hCLElBQUssTUFBTXhELGFBQWEzNkMsS0FBS2pILE1BQU0xRixLQUFLQSxLQUFLZ3VDLGdCQUd2QyxJQURLcmhDLEtBQUtqSCxNQUFNMUYsS0FBS0EsS0FBS2d1QyxXQUFXc1osV0FBV3g5QyxRQUVHLElBQXJENkMsS0FBS2pILE1BQU0xRixLQUFLQSxLQUFLZ3VDLFdBQVdzWixXQUFXeDlDLFFBRTNDZ2hELFFBQVEsbUJBQW1CeEQsb0JBQXFCLEdBR2hEdm9ELE9BQU9ELEtBQUtnc0QsU0FBUzdzRCxPQUFTLEdBQ2hDME8sS0FBS2pILE1BQU1tUSxPQUFPaTFDLFNBR3RCLE1BQU0zYyxRQUFVeGhDLEtBQUtqSCxNQUFNeW9DLFFBQVFudkMsS0FBSW92QyxRQUFVQSxPQUFPaG1DLEtBQ3BEK2xDLFFBQVFsd0MsT0FBUyxHQUNuQjBPLEtBQUtqSCxNQUFNdXBDLHdCQUF3QixlQUFnQmQsWUFJdkQ3MUIsS0FBSzRDLEtBQUssZUFBZWdLLEdBQUcsU0FBU2hrQixPQUFTMDZCLFdBQVdDLFNBQVMzNkIsU0FDbEVvWCxLQUNHNEMsS0FBSyxlQUNMZ0ssR0FBRyxhQUFhaGtCLE9BQVMwNkIsV0FBV0UsZ0JBQWdCNTZCLFNBRXZEb1gsS0FBSzRDLEtBQUssaUJBQWlCeUksT0FBTTFtQixNQUFBQSxRQUNsQixJQUFJK21ELFNBQVMsSUFDckJscEMsZUEwQ1B4QyxLQUNHNEMsS0FBSyx3QkFDTDZ2QyxXQUFXcCtDLEtBQUtxK0Msa0JBQWtCMW1ELEtBQUtxSSxPQUN2QzJ2QixXQUFXLy9CLEtBQUswdUQsYUFBYUMsYUFBYTVtRCxLQUFLcUksT0FDbEQyTCxLQUNHNEMsS0FBSyx5QkFDTDZ2QyxXQUFXcCtDLEtBQUt3K0MsMkJBQTJCN21ELEtBQUtxSSxPQUNoRDJ2QixXQUFXLy9CLEtBQUswdUQsYUFBYUMsYUFBYTVtRCxLQUFLcUksT0FDbEQyTCxLQUNHNEMsS0FBSyw2QkFDTDZ2QyxXQUFXcCtDLEtBQUt5K0Msc0JBQXNCOW1ELEtBQUtxSSxPQUMzQzJ2QixXQUFXLy9CLEtBQUswdUQsYUFBYUMsYUFBYTVtRCxLQUFLcUksT0FDbEQyTCxLQUNHNEMsS0FBSyxnQkFDTDZ2QyxXQUFXcCtDLEtBQUswK0MsaUJBQWlCL21ELEtBQUtxSSxPQUN0QzJ2QixXQUFXLy9CLEtBQUswdUQsYUFBYUMsYUFBYTVtRCxLQUFLcUksT0FDbEQyTCxLQUNHNEMsS0FBSyxrQ0FDTDZ2QyxXQUFXcCtDLEtBQUsyK0MsMEJBQTBCaG5ELEtBQUtxSSxPQUMvQzJ2QixXQUFXLy9CLEtBQUswdUQsYUFBYUMsYUFBYTVtRCxLQUFLcUksUUFHcERxK0Msa0JBQW1COXBELE9BQ2pCLE1BQU1xcUQsTUFBUXJzRCxTQUFTM0MsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGlCQUNqRCxHQUFJOHVELE1BQVEsRUFBRyxDQUNiLE1BQU1yckMsTUFBUXZULEtBQ2RwUSxLQUFLMHVELGFBQWFPLGFBQWV0cUQsTUFBTTRpQixjQUN2Q3ZuQixLQUFLMHVELGFBQWFRLGFBQWV6eEMsWUFBVyxXQUMxQyxRQUM0QyxJQUFuQ3pkLEtBQUswdUQsYUFBYU8sY0FDVSxPQUFuQ2p2RCxLQUFLMHVELGFBQWFPLGFBQ2xCLENBQ0EsTUFBTXhLLFNBQ0p6a0QsS0FBSzB1RCxhQUFhTyxhQUFhNXFELFdBQVdra0IsU0FBUyxVQUMvQ3pYLEtBQU85USxLQUFLMHVELGFBQWFPLGFBQWE3eEMsUUFBUSxTQUNwRCxRQUFvQixJQUFUdE0sS0FBc0IsQ0FDL0IsTUFBTUksUUFBVUosS0FBS25OLFFBQVF1TixRQUN2QkQsTUFBUTBTLE1BQU14YSxNQUFNNkgsTUFBTTlRLElBQUlnUixTQUNwQyxJQUFJaStDLFFBQVVudkQsS0FBSzRQLEtBQUtZLE9BQ3RCaTBDLFNBQVcscUJBQXVCLG9CQUNsQyxDQUNFeHpDLE1BQU9BLE1BQU1wRSxLQUNiMEQsUUFBU1UsTUFBTTFELE1BQ2ZrRCxLQUFNalEsS0FBS3VpQixNQUFNOVIsTUFBTTFELE1BQVEsR0FDL0JtRCxRQUFTbFEsS0FBS3VpQixNQUFNOVIsTUFBTTFELE1BQVEsS0FHbEN2TixLQUFLb0MsS0FBS3FoQixPQUNaMHJDLFNBRUVudkQsS0FBSzRQLEtBQUtZLE9BQU8sMEJBQTJCLENBQzFDbkksTUFDRXJJLEtBQUtJLFNBQVNGLElBQUksT0FBUSxrQkFDMUJ5akIsTUFBTXhhLE1BQU1ndEMsZUFDUm4yQyxLQUFLNFAsS0FBS1ksT0FBTyxpQ0FBa0MsQ0FDbkQzRCxLQUFNOFcsTUFBTXhhLE1BQU0wRCxPQUVsQixNQUdaN00sS0FBSzB1RCxhQUFhVSxlQUFlRCxhQUdwQ0gsUUFJUEosMkJBQTRCanFELE9BQzFCLE1BQU1xcUQsTUFBUXJzRCxTQUFTM0MsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGlCQUNqRCxHQUFJOHVELE1BQVEsRUFBRyxDQUNiLE1BQU1yckMsTUFBUXZULEtBQ2RwUSxLQUFLMHVELGFBQWFPLGFBQWV0cUQsTUFBTTRpQixjQUN2Q3ZuQixLQUFLMHVELGFBQWFRLGFBQWV6eEMsWUFBVyxXQUMxQyxRQUM0QyxJQUFuQ3pkLEtBQUswdUQsYUFBYU8sY0FDVSxPQUFuQ2p2RCxLQUFLMHVELGFBQWFPLGFBQ2xCLENBQ0EsTUFBTXJ3QyxLQUFPNWUsS0FBSzB1RCxhQUFhTyxhQUFhN3hDLFFBQVEsYUFDcEQsUUFBb0IsSUFBVHdCLE1BQTBCQSxLQUFNLENBQ3pDLE1BQU15d0MsT0FBU3p3QyxLQUFLamIsUUFBUTBQLGVBQ3RCQSxlQUFpQnNRLE1BQU14YSxNQUFNN0QsZ0JBQWdCK3BELFFBQ25ELElBQUlGLFFBQVVudkQsS0FBSzRQLEtBQUtZLE9BQU8sb0JBQXFCLENBQ2xEUyxNQUFPb0MsZUFBZTBMLE1BQ3RCeE8sUUFBUzhDLGVBQWU5RixPQUFTLEVBQ2pDa0QsS0FBTTRDLGVBQWU1QyxNQUFRLEVBQzdCQyxRQUFTMkMsZUFBZTNDLFNBQVcsSUFFakMxUSxLQUFLb0MsS0FBS3FoQixPQUNaMHJDLFNBRUVudkQsS0FBSzRQLEtBQUtZLE9BQU8sMEJBQTJCLENBQzFDbkksTUFDRXJJLEtBQUtJLFNBQVNGLElBQUksT0FBUSxrQkFDMUJ5akIsTUFBTXhhLE1BQU1ndEMsZUFDUm4yQyxLQUFLNFAsS0FBS1ksT0FBTyxpQ0FBa0MsQ0FDbkQzRCxLQUFNOFcsTUFBTXhhLE1BQU0wRCxPQUVsQixNQUdaN00sS0FBSzB1RCxhQUFhVSxlQUFlRCxhQUdwQ0gsUUFJUEgsc0JBQXVCbHFELE9BQ3JCLE1BQU1xcUQsTUFBUXJzRCxTQUFTM0MsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGlCQUNqRCxHQUFJOHVELE1BQVEsRUFBRyxDQUNiLE1BQU1yckMsTUFBUXZULEtBQ2RwUSxLQUFLMHVELGFBQWFPLGFBQWV0cUQsTUFBTTRpQixjQUN2Q3ZuQixLQUFLMHVELGFBQWFRLGFBQWV6eEMsWUFBVyxXQUMxQyxRQUM0QyxJQUFuQ3pkLEtBQUswdUQsYUFBYU8sY0FDVSxPQUFuQ2p2RCxLQUFLMHVELGFBQWFPLGFBQ2xCLENBQ0EsTUFBTS9nQixPQUFTbHVDLEtBQUswdUQsYUFBYU8sYUFBYTd4QyxRQUFRLGNBQ3RELFFBQXNCLElBQVg4d0IsT0FBd0IsQ0FDakMsTUFBTW9oQixZQUFjcGhCLE9BQU92cUMsUUFBUXVxQyxPQUNuQyxJQUFJaWhCLFFBQVUsR0FDZCxNQUFNdGEsV0FBYWx4QixNQUFNeGEsTUFBTTFGLEtBQUtBLEtBQUtzWCxRQUFRdTBDLGFBQ2pELE9BQVFBLGFBQ04sSUFBSyxNQUNISCxRQUFVbnZELEtBQUs0UCxLQUFLWSxPQUFPLG9CQUFxQixDQUM5Q1MsTUFBTzRqQyxXQUFXOTFCLE1BQ2xCeE8sUUFBU3NrQyxXQUFXdG5DLE9BQVMsRUFDN0JrRCxLQUFNalEsS0FBS3VpQixPQUFPOHhCLFdBQVd0bkMsT0FBUyxHQUFLLEdBQzNDbUQsUUFBU2xRLEtBQUt1aUIsT0FBTzh4QixXQUFXdG5DLE9BQVMsR0FBSyxLQUU1Q3ZOLEtBQUtvQyxLQUFLcWhCLE9BQ1owckMsU0FFRW52RCxLQUFLNFAsS0FBS1ksT0FBTywwQkFBMkIsQ0FDMUNuSSxNQUNFckksS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGtCQUMxQnlqQixNQUFNeGEsTUFBTWd0QyxlQUNSbjJDLEtBQUs0UCxLQUFLWSxPQUFPLGlDQUFrQyxDQUNuRDNELEtBQU04VyxNQUFNeGEsTUFBTTBELE9BRWxCLE1BR1o3TSxLQUFLMHVELGFBQWFVLGVBQWVELFNBQ2pDLE1BQ0YsSUFBSyxLQUNIQSxRQUFVbnZELEtBQUs0UCxLQUFLQyxTQUFTLGtCQUM3QjdQLEtBQUswdUQsYUFBYVUsZUFBZUQsU0FDakMsTUFDRixJQUFLLE1BQ0hBLFFBQVVudkQsS0FBSzRQLEtBQUtZLE9BQU8scUJBQXNCLENBQy9DUyxNQUFPLFNBQ1BWLFFBQVNza0MsV0FBV3RuQyxPQUFTLEVBQzdCa0QsS0FBTWpRLEtBQUt1aUIsT0FBTzh4QixXQUFXdG5DLE9BQVMsR0FBSyxHQUMzQ21ELFFBQVNsUSxLQUFLdWlCLE9BQU84eEIsV0FBV3RuQyxPQUFTLEdBQUssS0FFNUN2TixLQUFLb0MsS0FBS3FoQixPQUNaMHJDLFNBRUVudkQsS0FBSzRQLEtBQUtZLE9BQU8sMEJBQTJCLENBQzFDbkksTUFDRXJJLEtBQUs0UCxLQUFLQyxTQUFTLDZCQUNsQjdQLEtBQUtJLFNBQVNGLElBQUksT0FBUSxrQkFDM0J5akIsTUFBTXhhLE1BQU1ndEMsZUFDUm4yQyxLQUFLNFAsS0FBS1ksT0FBTyxpQ0FBa0MsQ0FDbkQzRCxLQUFNOFcsTUFBTXhhLE1BQU0wRCxPQUVsQixPQUdaN00sS0FBSzB1RCxhQUFhVSxlQUFlRCxjQUt4Q0gsUUFJUEYsaUJBQWtCbnFELE9BQ2hCLE1BQU1xcUQsTUFBUXJzRCxTQUFTM0MsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGlCQUM3Qzh1RCxNQUFRLElBQ1ZodkQsS0FBSzB1RCxhQUFhTyxhQUFldHFELE1BQU00aUIsY0FDdkN2bkIsS0FBSzB1RCxhQUFhUSxhQUFlenhDLFlBQVcsV0FDMUMsUUFDNEMsSUFBbkN6ZCxLQUFLMHVELGFBQWFPLGNBQ1UsT0FBbkNqdkQsS0FBSzB1RCxhQUFhTyxhQUNsQixDQUNBLE1BQU1FLFFBQVVudkQsS0FBSzRQLEtBQUtDLFNBQVMsMEJBQ25DN1AsS0FBSzB1RCxhQUFhVSxlQUFlRCxZQUVsQ0gsUUFJUEQsMEJBQTJCcHFELE9BQ3pCLE1BQU1xcUQsTUFBUXJzRCxTQUFTM0MsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGlCQUNqRCxHQUFJOHVELE1BQVEsRUFBRyxDQUNiLE1BQU1yckMsTUFBUXZULEtBQ2RwUSxLQUFLMHVELGFBQWFPLGFBQWV0cUQsTUFBTTRpQixjQUN2Q3ZuQixLQUFLMHVELGFBQWFRLGFBQWV6eEMsWUFBVyxXQUMxQyxRQUM0QyxJQUFuQ3pkLEtBQUswdUQsYUFBYU8sY0FDVSxPQUFuQ2p2RCxLQUFLMHVELGFBQWFPLGFBQ2xCLENBQ0EsTUFBTW4rQyxLQUFPOVEsS0FBSzB1RCxhQUFhTyxhQUFhN3hDLFFBQVEsU0FDcEQsUUFBb0IsSUFBVHRNLEtBQXNCLENBQy9CLE1BQU1JLFFBQVVKLEtBQUtuTixRQUFRdU4sUUFDdkJELE1BQVEwUyxNQUFNeGEsTUFBTTZILE1BQU05USxJQUFJZ1IsU0FDOUJpK0MsUUFBVW52RCxLQUFLNFAsS0FBS1ksT0FBTyw4QkFBK0IsQ0FDOURuSCxPQUFRckosS0FBSzRQLEtBQUtDLFNBQ2hCb0IsTUFBTXhOLEtBQUtBLEtBQUsyM0IsTUFBTTJTLGFBQ2xCLDJCQUNBLGdDQUdSL3RDLEtBQUswdUQsYUFBYVUsZUFBZUQsYUFHcENILFFBSVAzQixtQkFBb0Ixb0QsT0FDbEIsTUFBTTJpQixHQUFLbkwsRUFBRXhYLE1BQU00aUIsZUFBZWdtQyxRQUFRLFNBQzdCbjlDLEtBQUtqSCxNQUFNNkgsTUFBTTlRLElBQUlvbkIsR0FBRzdqQixLQUFLLFdBQ3JDa2dCLE1BQU10QixRQUFPLEdBR3BCM2hCLG1CQUFvQmlFLE9BQ2xCLE1BQU0yaUIsR0FBS25MLEVBQUV4WCxNQUFNNGlCLGVBQWVnbUMsUUFBUSxTQUNwQ3o4QyxLQUFPVixLQUFLakgsTUFBTTZILE1BQU05USxJQUFJb25CLEdBQUc3akIsS0FBSyxXQUMxQyxJQUFJcUksUUFBVSxNQUFROUwsS0FBSzRQLEtBQUtDLFNBQVMsa0NBQ3pDLE1BQU01RSxRQUFVLENBQ2Rza0QsVUFBV24vQyxLQUFLakgsTUFBTTBDLEdBQ3RCZSxNQUFPLEtBQ1A0aUQsUUFBU3AvQyxLQUFLakgsTUFBTTBDLEdBQ3BCaUYsS0FBTUEsS0FBS2pGLElBRVR1RSxLQUFLekQsT0FBT3hELFFBQ2Q4QixRQUFRc2tELFVBQVluL0MsS0FBS3pELE1BQU1kLEdBQy9CWixRQUFRMkIsTUFBUXdELEtBQUt6RCxNQUFNZ1QsT0FBTzlULElBRXBDLE1BQU1TLE9BQVN0TSxLQUFLc00sT0FBTzdLLFFBQU9zekMsSUFDaEMsSUFBSyxDQUFDLFlBQWEsTUFBTyxXQUFZLGFBQWF4ekMsU0FBU3d6QyxFQUFFenBDLE1BQzVELE9BQU8sRUFFVCxHQUFJOEUsS0FBS2pILE1BQU0wQyxLQUFPa3BDLEVBQUVscEMsR0FDdEIsT0FBTyxFQUVULElBQUk0akQsU0FBVSxFQUNkLElBQUssTUFBT2xyRCxFQUFHN0IsS0FBTUYsT0FBT2dDLFFBQVF1d0MsRUFBRXR4QyxLQUFLMHBCLFlBQy9CLFlBQU41b0IsR0FBbUJBLElBQU12RSxLQUFLb0MsS0FBS3lKLEtBQ3JDNGpELFFBQ0VBLFNBQ0Evc0QsS0FDRzZJLE1BQU02aEIsMkJBQTZCN2hCLE1BQU04aEIsb0JBQW9CcWlDLE1BR3RFLE9BQU9ELFdBRVQzakQsU0FBb0IsNkNBQ3BCLElBQUssTUFBTTNDLFNBQVNtRCxPQUNsQlIsUUFDRUEsUUFBVSxrQkFBb0IzQyxNQUFNMEMsR0FBSyxLQUFPMUMsTUFBTTBELEtBQU8sWUFFakVmLFNBQW9CLHVCQUNwQmIsUUFBUXVrRCxjQUFnQixJQUFJbnFDLFNBQVFDLFVBQ3RCLElBQUl0RCxPQUFPLENBQ3JCcGUsTUFBTzVELEtBQUs0UCxLQUFLQyxTQUFTLHVDQUMxQi9ELFFBQ0FtVyxRQUFTLENBQ1Brb0IsUUFBUyxDQUNQcHJCLE1BQU8vZSxLQUFLNFAsS0FBS0MsU0FBUyxpQkFDMUJxUyxTQUFVbkcsT0FDUixNQUFNdU8sU0FBVyxJQUFJRyxTQUNuQjFPLEtBQUssR0FBRzlMLGNBQWMsZ0JBRXhCLElBQUssTUFBT3BELEtBQU1VLFNBQVUrYyxTQUMxQixHQUFhLFNBQVR6ZCxLQUNGLE9BQU95WSxRQUFRL1gsVUFNekJtZCxRQUFTLFVBQ1Q3QyxNQUFPLFNBRUx4RixRQUFPLFlBRVByaUIsS0FBSzBrQyxXQUFXQyxZQUFZLGdCQUFpQjE1QixTQUdyRGdnRCxzQkFBdUJ0bUQsT0FDckIsTUFBTWdyRCxJQUFNaHJELE1BQU00aUIsY0FBY3NaLGNBQzFCcDlCLEtBQU8sQ0FDWHUwQyxTQUFVLE9BQ1ZILFNBQVUsWUFDVm5sQyxNQUFPLFFBQ1BwSCxLQUFNLGlCQUNONnFDLGVBQWdCL2xDLEtBQUtqSCxNQUFNZ3RDLGVBQzNCMXBDLFNBQVUyRCxLQUFLakgsTUFBTXNELFNBQ3JCSSxLQUFNOGlELElBQUloc0QsUUFBUTBQLGVBQ2xCNm1CLEtBQU0sTUFHUnYxQixNQUFNb2YsY0FBY0UsYUFBYWd4QixRQUFRLGFBQWNseEMsS0FBS0MsVUFBVVAsT0FHeEV5bkQsaUJBQWtCdm1ELE9BQ2hCLE1BQU1nckQsSUFBTWhyRCxNQUFNNGlCLGNBQWNzWixjQUMxQnA5QixLQUFPLENBQ1h1MEMsU0FBVSxPQUNWSCxTQUFVLFlBQ1ZubEMsTUFBTyxRQUNQcEgsS0FBTSxZQUNONnFDLGVBQWdCL2xDLEtBQUtqSCxNQUFNZ3RDLGVBQzNCMXBDLFNBQVUyRCxLQUFLakgsTUFBTXNELFNBQ3JCSSxLQUFNOGlELElBQUloc0QsUUFBUXVxQyxPQUNsQmhVLEtBQU0sTUFHUnYxQixNQUFNb2YsY0FBY0UsYUFBYWd4QixRQUFRLGFBQWNseEMsS0FBS0MsVUFBVVAsT0FHeEUwbkQsZ0JBQWlCeG1ELE9BQ2YsTUFBTXVTLE9BQVN2UyxNQUFNNGlCLGNBQWN0WCxjQUFjLG1CQUMzQytHLE9BQVNyUyxNQUFNNGlCLGNBQWN0WCxjQUFjLHFCQUMzQ3hNLEtBQU8sQ0FDWHUwQyxTQUFVLE9BQ1ZILFNBQVUsWUFDVm5sQyxNQUFPLFVBQ1B5akMsZUFBZ0IvbEMsS0FBS2pILE1BQU1ndEMsZUFDM0IxcEMsU0FBVTJELEtBQUtqSCxNQUFNc0QsU0FDckJ5SyxPQUFRQSxPQUFPeVEsVUFDZjNRLE9BQVFBLE9BQU8yUSxVQUNmdVMsS0FBTSxNQUdSdjFCLE1BQU1vZixjQUFjRSxhQUFhZ3hCLFFBQVEsYUFBY2x4QyxLQUFLQyxVQUFVUCxPQUd4RS9DLGNBQWVpRSxhQUNQdVIsTUFBTTA1QyxRQUFRanJELE9BR3RCakUseUJBQTBCaUUsT0FDeEJBLE1BQU0wYSxpQkFDRjFhLE1BQU00aUIsY0FBYzVqQixRQUFRb25ELGlCQUN4QjM2QyxLQUFLakgsTUFBTTBtRCxnQkFBZ0JsckQsTUFBTTRpQixjQUFjNWpCLFFBQVFvbkQsV0FJakVycUQsZUFDTVYsS0FBS29DLEtBQUtxaEIsTUFBTXJULEtBQUtqSCxNQUFNMlAsZUFBZXZWLEtBQUs4RixPQUFPTyxNQUc1RGxKLGFBQ01WLEtBQUtvQyxLQUFLcWhCLE1BQU1yVCxLQUFLakgsTUFBTTJQLGVBQWV2VixLQUFLOEYsT0FBT0ssT0FHNURoSixvQkFBcUJpRSxPQUNuQixNQUFNOGhCLFNBQVcsSUFBSUwsYUFDbkJoVyxLQUFLakgsTUFBTW9LLFFBQVVuRCxLQUFLakgsTUFBTW1LLFNBQVdsRCxLQUFLakgsTUFBTTBDLElBRXhENGEsU0FBU08sV0FBWSxFQUNyQlAsU0FBU2xJLFVBQVU1WixNQUFNNGEsVUFHM0I3ZSxzQkFBdUJpRSxPQUNyQkEsTUFBTTBhLGlCQUNOLE1BQU1zekIsUUFBVWh1QyxNQUFNNGlCLGNBQWM1akIsUUFBUWd2QyxRQUN0QzczQixlQUNKLE1BQVF0YSxLQUFLdWlCLE1BQU0zUyxLQUFLakgsTUFBTTFGLEtBQUtBLEtBQUtzWCxRQUFRTixJQUFJbE4sTUFBUSxHQUM5RDZDLEtBQUtqSCxNQUFNMm1ELGtCQUFrQmgxQyxnQkFDekI2M0IsU0FBU3ZpQyxLQUFLakgsTUFBTTRtRCxhQUFhcGQsU0FHdkNqeUMsb0JBQXFCaUUsT0FDbkIsR0FBSUEsTUFBTTRpQixjQUFjbkssUUFBUSxjQUFlLENBQzdDLE1BQU04d0IsT0FBU3ZwQyxNQUFNNGlCLGNBQWNuSyxRQUFRLGNBQWN6WixRQUFRdXFDLE9BQ2pFOTlCLEtBQUtqSCxNQUFNNm1ELGlCQUFpQjloQixTQUloQ3h0QyxnQkFBaUJpRSxPQUNmLE1BQU0rUCxPQUFTdEUsS0FBS2pILE1BQU02SCxNQUFNOVEsSUFDOUJ5RSxNQUFNNGlCLGNBQWNuSyxRQUFRLFNBQVN6WixRQUFRb04sUUFFM0MyRCxRQUNGQSxPQUFPdTdDLGVBQ0x0ckQsTUFBTTRpQixjQUFjNWpCLFFBQVF3K0IsU0FDNUJ4OUIsTUFBTUMsU0FDSkQsTUFBTUUsU0FDWSxLQUFsQkYsTUFBTUcsU0FDWSxNQUFsQkgsTUFBTUcsU0FNZHBFLHlDQUNRMFAsS0FBS2pILE1BQU0rbUQsMkJBR25CeHZELHNDQUNFMFAsS0FBS2pILE1BQU1nbkQsOEJBR2J6dkQscUJBQXNCaUUsT0FDcEJBLE1BQU0wYSxpQkFDTixNQUFNK3dDLFNBQVdoZ0QsS0FBS2pILE1BQU1xbEMsT0FDNUJwK0IsS0FBS2pILE1BQU1xbEMsUUFBVTRoQixTQUNyQjl1QyxNQUFNM1osS0FBSyx1QkFBd0IsRUFBRXlvRCxXQUd2QzF2RCxxQkFBc0JpRSxPQUNwQkEsTUFBTTBhLGlCQUNOLE1BQU0yTixTQUFXcm9CLE1BQU00aUIsY0FBYzVqQixRQUFRZ3BCLEtBQzdDdmMsS0FBS2pILE1BQU1rbkQsZ0JBQWdCcmpDLFVBRzdCdHNCLHdCQUF5QmlFLE9BQ3ZCQSxNQUFNMGEsaUJBQ05qUCxLQUFLakgsTUFBTWtuRCxnQkFBZ0Isa0JBRzdCM3ZELGVBQWdCaUUsT0FDZCxJQUFJNEksTUFBUTVLLFNBQVNnQyxNQUFNNGlCLGNBQWNoYSxPQVN6QyxPQVJJNUksTUFBTTJyRCxPQUFTLElBQ2pCL2lELE1BQWtCLElBQVZBLE1BQWMsRUFBSUEsTUFBUSxHQUdoQzVJLE1BQU0yckQsT0FBUyxJQUNqQi9pRCxPQUFnQixHQUdWNUksTUFBTTRpQixjQUFjMWEsTUFDMUIsSUFBSyx3QkFZTCxJQUFLLDZCQUNIdUQsS0FBS2pILE1BQU0wcUMsTUFBTXRtQyxPQUNqQixNQVhGLElBQUssd0JBQ0g2QyxLQUFLakgsTUFBTW9uRCxNQUFNaGpELE9BQ2pCLE1BQ0YsSUFBSyx5QkFDSDZDLEtBQUtqSCxNQUFNOGpDLE9BQU8xL0IsT0FDbEIsTUFDRixJQUFLLHlCQUNINkMsS0FBS2pILE1BQU1vakMsUUFBUWgvQixRQVF6Qm0vQyxnQkFBaUIvbkQsT0FDZkEsTUFBTTRpQixjQUFjaXBDLFVBQVk3ckQsTUFBTTRpQixjQUFjaXBDLFNBQ3BEN3JELE1BQU00aUIsY0FBY2xqQixVQUFVMmMsT0FBTyxhQUd2Q21zQyxlQUFnQnhvRCxPQUNkQSxNQUFNMGEsaUJBQ04sTUFBTWlJLEdBQUtuTCxFQUFFeFgsTUFBTTRpQixlQUFlZ21DLFFBQVEsU0FDcEN6OEMsS0FBT1YsS0FBS2pILE1BQU02SCxNQUFNOVEsSUFBSW9uQixHQUFHN2pCLEtBQUssWUFDcEM1QixTQUFXaVAsS0FBS3NyQyxZQUFZLENBQUVxVSxRQUFTcmdELEtBQUtqSCxNQUFNMGEsVUFHeEQsR0FBSXlELEdBQUdvcEMsU0FBUyxZQUFhLENBQzNCLE1BQU1DLFFBQVVycEMsR0FBRzA3QixTQUFTLGlCQUM1QjJOLFFBQVFqRCxRQUFRLEtBQUssSUFBTWlELFFBQVFqckMsZUFDOUIsQ0FDTCxNQUFNa3JDLElBQU16MEMsRUFBRSxvQ0FFUm1nQyxPQUFTbmdDLEVBQUUsbUNBQ2pCLElBQUssTUFBTXNnQyxLQUFLNTZDLFNBQVN5NkMsT0FDdkJBLE9BQU8xWSxPQUNMLG9EQUFvRDZZLEVBQUU1dkMsMENBQTBDNHZDLEVBQUVsdkMsc0JBU3RHLEdBTkFxakQsSUFBSWh0QixPQUFPMFksUUFFWHNVLElBQUlodEIsT0FDRnpuQixFQUFFLGlDQUFpQ3RhLFNBQVNva0MsWUFBWTE0QixnQkFHdER1RCxLQUFLck4sS0FBS0EsS0FBSytyQixZQUFZcG9CLEtBQU0sQ0FDbkMsTUFBTXlwRCxXQUFhMTBDLEVBQ2pCLDZCQUE2QnRhLFNBQVNva0MsWUFBWS8vQixpQkFFcEQwcUQsSUFBSWh0QixPQUFPaXRCLFlBR2IsTUFBTXRVLE1BQVFwZ0MsRUFBRSx1Q0FDaEIsSUFBSyxNQUFNc2dDLEtBQUs1NkMsU0FBUzJ0QixXQUN2QitzQixNQUFNM1ksT0FDSixrQ0FBa0M1akMsS0FBSzRQLEtBQUtDLFNBQVM0c0MsWUFHekRtVSxJQUFJaHRCLE9BQU8yWSxPQUVYajFCLEdBQUdzYyxPQUFPZ3RCLElBQUlFLFFBQ2R6eEIsV0FBVzB4QixrQkFBa0JILEtBQzdCQSxJQUFJSSxVQUFVLEtBRWhCMXBDLEdBQUdjLFlBQVksWUFJakJ5a0MsaUJBQWtCbG9ELE9BQ2hCQSxNQUFNMGEsaUJBS04sTUFBTTR4QyxRQUFVdHNELE1BQU00aUIsY0FBY25LLFFBQVEsV0FDdEM4ekMsWUFBY3ZzRCxNQUFNNGlCLGNBQWM1akIsUUFBUXd0RCxPQUMxQ0EsT0FBU2gxQyxFQUFFODBDLFNBQVN0eUMsS0FBSyxXQUFXdXlDLGVBRXRDQyxPQUFPVCxTQUFTLFlBQ2xCUyxPQUFPekQsUUFBUSxLQUVmeUQsT0FBT0gsVUFBVSxLQUVuQkcsT0FBTy9vQyxZQUFZLFlBR3JCd2tDLG1CQUFvQmpvRCxPQUNsQkEsTUFBTTBhLGlCQUNObEQsRUFBRXhYLE1BQU00aUIsZUFBZTZwQyxTQUFTLE1BQU1wd0MsU0FHeEN0Z0IsbUJBQW9CaUUsT0FDbEJBLE1BQU0wYSxpQkFDTixNQUFNaUksR0FBS25MLEVBQUV4WCxNQUFNNGlCLGVBQWVnbUMsUUFBUSxTQUNwQ3o4QyxLQUFPVixLQUFLakgsTUFBTTZILE1BQU05USxJQUFJb25CLEdBQUc3akIsS0FBSyxZQUUxQ2trRCxlQUFlMEosV0FBV3ZnRCxNQUc1Qm5SLHdCQUF5QnNSLE9BQ3ZCQSxNQUFNeE4sS0FBS0EsS0FBS3dpQyxZQUFZcXJCLGNBQWdCOXFCLFdBQVdDLFdBQ3JEeDFCLE1BQU14TixLQUFLQSxLQUFLd2lDLFlBQVkxNEIsT0FHbEIsSUFBSXlVLE9BQ2QsQ0FDRXBlLE1BQU81RCxLQUFLNFAsS0FBS0MsU0FBUywyQkFDMUIvRCxRQUFTbUYsTUFDVGdSLFFBQVMsR0FDVDRGLE1BQU8sUUFFVCxDQUNFQyxRQUFTLENBQUMsT0FBUSxRQUFTLFNBQzNCb3ZCLE1BQU8sSUFDUEMsT0FBUSxJQUNSb2EsUUFBUyxDQUFDLHFCQUNWdDFDLFNBQVUsbURBR1ZvRyxRQUFPLEdBT2IzaEIsa0JBQW1CaUUsT0FDakJBLE1BQU0wYSxpQkFZUjNlLG9CQUFxQmlFLE9BQ25CQSxNQUFNMGEsaUJBQ04sTUFBTXRPLE9BQVNwTSxNQUFNNGlCLGNBQWNuSyxRQUFRLE1BQU16WixRQUFRb04sT0FDbkRvRCxZQUFjeFAsTUFBTTRhLFNBQ3BCN0ssT0FBU3RFLEtBQUtqSCxNQUFNNkgsTUFBTTlRLElBQUk2USxRQUdwQyxJQUFJdEUsU0FZSixHQU5JQSxTQUxDMkQsS0FBS3pELE1BSUp5RCxLQUFLakgsTUFBTW9LLFNBQVd2VCxLQUFLc00sT0FBT0MsT0FBTzZELEtBQUt6RCxNQUFNZCxJQUMzQyxTQUFTdUUsS0FBS3pELE1BQU1kLEtBRXBCLEdBQUd1RSxLQUFLekQsTUFBTWdULE9BQU85VCxNQUFNdUUsS0FBS3pELE1BQU1kLEtBUHpCdUUsS0FBS2pILE1BQU0wQyxHQVduQ25ILFVBQVVDLFFBQVUzRSxLQUFLb0MsS0FBS3FoQixLQUFNLENBQ3RDLE1BQU1reEIsU0FBVyxDQUNmamlDLE1BQU8sT0FDUHBILEtBQU0sU0FDTnVCLEtBQU02SCxPQUFPN0gsS0FDYnNwQyxlQUFnQi9sQyxLQUFLakgsTUFBTWd0QyxlQUMzQjFwQyxTQUFVMkQsS0FBS2pILE1BQU1zRCxVQUd2Qm1vQyx1QkFBdUJtUSxhQUFhcFEsVUFBVTNvQyxNQUFLdWUsS0FDakRBLElBQUlsSSxRQUFPLFNBRVIsQ0FDTCxJQUFJbXZDLHFCQThCSixHQTdCSXh4RCxLQUFLb0MsS0FBS3dTLFFBQVF5ZCxNQUFRLElBQzVCbS9CLDJCQUE2QixJQUFJbnNDLFNBQVFDLFVBQ3ZDLE1BQU03aEIsS0FBTyxDQUNYRyxNQUFPLElBQ1BrSSxRQUFTOUwsS0FBSzRQLEtBQUtZLE9BQU8sd0JBQXlCLENBQ2pEa0UsT0FBUUEsT0FBTzdILE9BRWpCb1YsUUFBUyxDQUNQd3ZDLE9BQVEsQ0FDTnYzQixLQUFNLCtCQUNObmIsTUFBTy9lLEtBQUs0UCxLQUFLQyxTQUFTLGVBQzFCcVMsU0FBVSxJQUNEb0QsU0FBUSxJQUduQm9zQyxRQUFTLENBQ1B4M0IsS0FBTSwrQkFDTm5iLE1BQU8vZSxLQUFLNFAsS0FBS0MsU0FBUyxnQkFDMUJxUyxTQUFVLElBQ0RvRCxTQUFRLEtBSXJCb0YsUUFBUyxTQUNUNUMsUUFBUyxDQUFDLE9BQVEsV0FFcEIsSUFBSTlGLE9BQU92ZSxNQUFNNGUsUUFBTyxPQUd4QnJpQixLQUFLb0MsS0FBS3dTLFFBQVF5ZCxLQUFPLEdBQUttL0IscUJBQXNCLENBQ3RELElBQUs5OEMsT0FBT2pSLEtBQUtBLEtBQUsrckIsV0FBVy9vQixLQUFNLENBQ2pDekcsS0FBS29DLEtBQUt3UyxRQUFReWQsS0FBTyxHQUMzQjVpQixHQUFHQyxjQUFjQyxLQUFLM1AsS0FBSzRQLEtBQUtDLFNBQVMsMkJBRzlCLElBQUlvYixtQkFBbUJ4ZSxTQUFVc0UsT0FBUW9ELGFBQ2pEaTdCLGlCQUVQLEdBQUkxNkIsT0FBT2pSLEtBQUtBLEtBQUsrckIsV0FBVy9vQixLQUFNLENBQ3ZCLElBQUlvb0IsbUJBQW1CcGlCLFNBQVVzRSxPQUFRb0QsYUFDakRpN0Isb0JBTWIxdUMsc0JBQXVCaUUsT0FDckIsTUFBTW9NLE9BQVNwTSxNQUFNNGlCLGNBQWNuSyxRQUFRLFNBQ3ZDelksTUFBTTRpQixjQUFjbkssUUFBUSxTQUFTelosUUFBUW9OLE9BQzdDLEtBQ0osSUFBS0EsT0FBUSxPQUNiLE1BQU0yRCxPQUFTdEUsS0FBS2pILE1BQU02SCxNQUFNOVEsSUFBSTZRLFFBQ2YsSUFBakJwTSxNQUFNNjhCLE9BQ0o3OEIsTUFBTTRhLGVBQWdCN0ssT0FBT29lLGVBQ3RCcGUsT0FBT2k5QyxZQUNRLElBQWpCaHRELE1BQU02OEIsU0FDWDc4QixNQUFNNGEsZUFBZ0I3SyxPQUFPb25DLFdBQVcsU0FDakNwbkMsT0FBT2lmLGFBQWEsSUFJbkNqekIsZ0JBQWlCaUUsT0FDZixNQUFNb00sT0FBU3BNLE1BQU00aUIsY0FBY25LLFFBQVEsU0FDdkN6WSxNQUFNNGlCLGNBQWNuSyxRQUFRLFNBQVN6WixRQUFRb04sT0FDN0MsS0FDSixJQUFLQSxPQUFRLE9BQ2IsTUFBTTJELE9BQVN0RSxLQUFLakgsTUFBTTZILE1BQU05USxJQUFJNlEsY0FDOUIyRCxPQUFPaTlDLFlBR2ZqeEQseUJBQTBCaUUsT0FDeEJBLE1BQU0wYSxpQkFDTixNQUFNbk8sUUFBVXZNLE1BQU00aUIsY0FBYzVqQixRQUFRdU4sUUFDdENzQyxRQUFVN08sTUFBTTRpQixjQUFjbkssUUFBUSxRQUFRelosUUFBUTZQLFFBQ3RERixTQUFXM08sTUFBTTRpQixjQUFjbkssUUFBUSxRQUFRelosUUFBUXlJLFFBQ3ZEMkUsT0FBU3BNLE1BQU00aUIsY0FBY25LLFFBQVEsTUFDdkN6WSxNQUFNNGlCLGNBQWNuSyxRQUFRLE1BQU16WixRQUFRb04sT0FDMUMsS0FFRTJCLE1BQVEsSUFBSXBDLFVBRWxCLElBQUszTCxNQUFNNGEsU0FBVSxDQUNuQixNQUFNbEIsWUFBY0MsV0FBV3ZTLFNBQzNCc1MsUUFDRjNMLE1BQU1oQixhQUFlMk0sTUFBTW5lLElBQUksYUFDL0J3UyxNQUFNTSxXQUFhcUwsTUFBTW5lLElBQUksY0FDN0J3UyxNQUFNa0wsaUJBQW1COVAsT0FBT3VRLE1BQU1uZSxJQUFJLHFCQUMxQ3dTLE1BQU1tTCxzQkFBd0IvUCxPQUFPdVEsTUFBTW5lLElBQUksMkJBSW5Ed1MsTUFBTXZKLE1BQVNtSyxVQUFXRSxRQUMxQmQsTUFBTXpCLE1BQVFDLFFBQ2R3QixNQUFNNUIsS0FBT0MsYUFDUDJCLE1BQU1yUyxPQUNacVMsTUFBTTZMLFlBTVI3ZCxzQkFBdUJpRSxPQUNyQkEsTUFBTTBhLGlCQUNOLE1BQU10TyxPQUFTcE0sTUFBTTRpQixjQUFjbkssUUFBUSxXQUFXelosUUFBUW9OLE9BQ3hEMmhCLE1BQVEvdEIsTUFBTTRpQixjQUFjbkssUUFBUSxrQkFBa0J6WixRQUFRK3VCLE1BQzlEeUssZUFBaUIsSUFBSWpFLFdBQVcsQ0FDcEMva0IsWUFBYXhQLE1BQU00YSxTQUNuQm1ULFFBRUZ5SyxlQUFlMXdCLFNBQVcyRCxLQUFLakgsTUFBTW1LLFNBQ3JDNnBCLGVBQWVwc0IsT0FBU0EsT0FDeEJvc0IsZUFBZXBRLGlCQUlqQnJzQixxQkFBc0JpRSxPQUdwQixHQUZBQSxNQUFNMGEsaUJBRW1ELE9BQXJEMWEsTUFBTTRpQixjQUFjc1osY0FBY2w5QixRQUFRdXFDLE9BQWlCLE9BRS9ELE1BQU16cUMsS0FBTyxDQUNYa1AsU0FBVW14QyxnQkFBZ0JJLGdCQUMxQmpILFNBQVU2RyxnQkFBZ0JRLGtCQUMxQjMvQyxNQUNBd0UsTUFBT2lILEtBQUtqSCxPQUVWeEUsTUFBTTRpQixjQUFjbGpCLFVBQVVra0IsU0FBUyx3QkFDekM5a0IsS0FBS2tQLFNBQVdteEMsZ0JBQWdCRSx5QkFDdkJyL0MsTUFBTTRpQixjQUFjbGpCLFVBQVVra0IsU0FBUyxxQkFDaEQ5a0IsS0FBS2tQLFNBQVdteEMsZ0JBQWdCQyxxQkFHOUJwL0MsTUFBTTYvQyxTQUNSL2dELEtBQUt3NUMsU0FBVzZHLGdCQUFnQkssb0JBR2xDTCxnQkFBZ0I4TixRQUFRbnVELE1BUTFCL0MsK0JBQWdDaUUsT0FDOUJBLE1BQU0wYSxpQkFDRjFhLE1BQU00aUIsY0FBY2xqQixVQUFVa2tCLFNBQVMsZ0JBQzNDdTdCLGdCQUFnQjhOLFFBQVEsQ0FDdEJqL0MsU0FBVW14QyxnQkFBZ0JFLHlCQUMxQi9HLFNBQVU2RyxnQkFBZ0JPLGlCQUMxQjEvQyxNQUNBd0UsTUFBT2lILEtBQUtqSCxRQUloQnpJLHdCQUF5QmlFLE9BRXZCQSxNQUFNMGEsaUJBQ04sTUFBTTZ1QixPQUFTdnBDLE1BQU00aUIsY0FBY3NaLGNBQWNsOUIsUUFBUXVxQyxPQUN6RCxHQUFlLE9BQVhBLE9Bb0JKNFYsZ0JBQWdCOE4sUUFBUSxDQUN0QmovQyxTQUFVbXhDLGdCQUFnQkMsb0JBQzFCOUcsU0FDRXQ0QyxNQUFNNi9DLFFBQXFCLFFBQVh0VyxPQUNaNFYsZ0JBQWdCUyxvQkFDaEJULGdCQUFnQk8saUJBQ3RCMS9DLE1BQ0F3RSxNQUFPaUgsS0FBS2pILGFBMUJaLElBQ0csY0FBYzBvRCxLQUNibHRELE1BQU00aUIsY0FBY3NaLGNBQWNsOUIsUUFBUW11RCxhQUU1QyxDQUNBLE1BQU05OUMsRUFBSSxJQUFJMVQsS0FDWnFFLE1BQU00aUIsY0FBY3NaLGNBQWNsOUIsUUFBUW11RCxtQkFFdEM5OUMsRUFBRTNULEtBQUssQ0FBRUssT0FBTyxJQUNqQjJWLE1BQU1yQyxFQUFFblQsYUFBd0J5VCxJQUFaTixFQUFFblQsT0FDekJtVCxFQUFFdUssVUFBVSxDQUNWblQsUUFBU3BKLFlBQVlxSixhQUNyQkYsT0FBUW5MLEtBQUs0UCxLQUFLQyxTQUFTLDJCQXVCckMwN0MsaUJBQWtCNW1ELE9BQ2hCQSxNQUFNMGEsaUJBQ0YxYSxNQUFNNGlCLGNBQWNsakIsVUFBVWtrQixTQUFTLGdCQUMzQ3U3QixnQkFBZ0I4TixRQUFRLENBQ3RCai9DLFNBQVVteEMsZ0JBQWdCSSxnQkFDMUJqSCxTQUFVNkcsZ0JBQWdCTyxpQkFDMUIxL0MsTUFDQXdFLE1BQU9pSCxLQUFLakgsUUE2QmhCekksb0JBQXFCaUUsTUFBTzJsQixVQUcxQixHQUFJM2xCLE1BQU00aUIsZUFDSjVpQixNQUFNNGlCLGNBQWNsakIsVUFBVyxDQUNqQyxHQUFJTSxNQUFNNGlCLGNBQWNsakIsVUFBVWtrQixTQUFTLG9CQUFxQixDQUM5RCxNQUFNelgsS0FBT1YsS0FBS2pILE1BQU02SCxNQUFNOVEsSUFDNUJ5RSxNQUFNNGlCLGNBQWNuSyxRQUFRLFNBQVN6WixRQUFRb04sUUFFL0MsR0FBSUQsS0FBTSxDQUNSLE1BQU12RCxNQUFRNUksTUFBTTRpQixjQUFjaGEsTUFDOUI1SyxTQUFTZ0MsTUFBTTRpQixjQUFjaGEsT0FDN0IsS0FhSixHQVhLNUksTUFBTTRpQixjQUFjaGEsTUFLbEI4SSxNQUFNOUksY0FDSHVELEtBQUt3SSxPQUFPLENBQ2hCLENBQUMzVSxNQUFNNGlCLGNBQWMxYSxNQUFPVSxjQU4xQnVELEtBQUt3SSxPQUFPLENBQ2hCLENBQUMzVSxNQUFNNGlCLGNBQWMxYSxNQUFPLE9BUzVCN00sS0FBSzRQLEtBQUtDLFNBQVN0TSxLQUFLNkcseUJBQTJCMEcsS0FBS2pFLEtBQU0sQ0FDaEUsTUFBTWtsRCxhQUNIamhELEtBQUt2RCxPQUFTLElBQ2R1RCxLQUFLck4sS0FBS0EsS0FBSzJWLGFBQWFDLFlBQWMsSUFFM0MwNEMsWUFDRWprRCxPQUFPc0MsS0FBS2pILE1BQU1pK0IsV0FBVzNqQyxLQUFLQSxLQUFLNG5DLGFBQWE3cEMsTUFDdER1d0QsWUFDRWprRCxPQUFPc0MsS0FBS2pILE1BQU1pK0IsV0FBVzNqQyxLQUFLQSxLQUFLNG5DLGFBQWExcEMsT0FFdEQ4TixHQUFHQyxjQUFjQyxLQUNmM1AsS0FBSzRQLEtBQUtZLE9BQU8sd0JBQXlCLENBQ3hDN08sSUFBS21NLE9BQ0hzQyxLQUFLakgsTUFBTWkrQixXQUFXM2pDLEtBQUtBLEtBQUs0bkMsYUFBYTFwQyxLQUUvQ0gsSUFBS3NNLE9BQ0hzQyxLQUFLakgsTUFBTWkrQixXQUFXM2pDLEtBQUtBLEtBQUs0bkMsYUFBYTdwQyxVQVMzRCxHQUFJbUQsTUFBTTRpQixjQUFjbGpCLFVBQVVra0IsU0FBUyxvQkFFUiwyQkFBN0I1akIsTUFBTTRpQixjQUFjMWEsS0FFdEIsWUFEQXVELEtBQUtqSCxNQUFNOGpDLE9BQU90cUMsU0FBU2dDLE1BQU00aUIsY0FBY2hhLFFBS25ELEdBQUk1SSxNQUFNNGlCLGNBQWNsakIsVUFBVWtrQixTQUFTLGFBRXpDLFlBREFuWSxLQUFLakgsTUFBTTZvRCxlQUFlcnRELE1BQU00aUIsZUFJbEMsR0FBSTVpQixNQUFNNGlCLGNBQWNsakIsVUFBVWtrQixTQUFTLHFCQUFzQixDQUMvRCxNQUFNZixNQUFRN2tCLFNBQ1pnQyxNQUFNNGlCLGNBQWNuSyxRQUFRLGdCQUFnQnpaLFFBQVE2akIsYUFFaERwWCxLQUFLakgsTUFBTThvRCxlQUFlenFDLE1BQU83aUIsTUFBTTRpQixjQUFjaGEsT0FHN0QsR0FBSTVJLE1BQU00aUIsY0FBY2xqQixVQUFVa2tCLFNBQVMscUJBQXNCLENBQy9ELE1BQU1mLE1BQVE3a0IsU0FDWmdDLE1BQU00aUIsY0FBY25LLFFBQVEsZ0JBQWdCelosUUFBUTZqQixPQUV0RHBYLEtBQUtqSCxNQUFNK29ELGVBQWUxcUMsTUFBTzdpQixNQUFNNGlCLGNBQWNoYSxPQUd2RCxHQUFJNUksTUFBTTRpQixjQUFjbGpCLFVBQVVra0IsU0FBUyxtQkFBb0IsQ0FDN0QsTUFBTXRYLE1BQVFiLEtBQUtqSCxNQUFNNkgsTUFBTTlRLElBQzdCeUUsTUFBTTRpQixjQUFjbkssUUFBUSxTQUFTelosUUFBUXVOLFNBRTNDRCxhQUNJQSxNQUFNZytCLFlBQVl0cUMsTUFBTTRpQixjQUFjaGEsT0FJaEQsR0FDRTVJLE1BQU00aUIsY0FBY2xqQixVQUFVa2tCLFNBQVMsZUFDdkM1akIsTUFBTTRpQixjQUFjbGpCLFVBQVVra0IsU0FBUyxhQUN2QyxDQUNBLE1BQU16WCxLQUFPVixLQUFLakgsTUFBTTZILE1BQU05USxJQUM1QnlFLE1BQU00aUIsY0FBY25LLFFBQVEsU0FBU3paLFFBQVF1TixTQUUvQyxHQUFJSixLQUFNLENBQ1IsTUFBTXJOLEtBQU8sR0FDYixHQUFJcU4sS0FBS3JOLEtBQUtBLEtBQUsrckIsV0FBV3RwQixRQUFTLENBQ3JDLE1BQU0wZ0MsTUFBUXBtQixTQUFTcW1CLGlCQUNyQmxpQyxNQUFNNGlCLGNBQWNoYSxNQUNwQnVELEtBQUtyTixLQUFLQSxLQUFLK21CLGdCQUVqQi9tQixLQUFLb0osS0FBTys1QixNQUFNLzVCLEtBQ2xCcEosS0FBSyxrQkFBb0JtakMsTUFBTWhGLFVBQy9CbitCLEtBQUssdUJBQXlCbWpDLE1BQU1wYyxvQkFFcEMvbUIsS0FBSyxrQkFBb0JrQixNQUFNNGlCLGNBQWNoYSxNQUM3QzlKLEtBQUtvSixLQUFPbEksTUFBTTRpQixjQUFjaGEsWUFFNUJ1RCxLQUFLd0ksT0FBTzdWLE9BSXRCLEdBQUlrQixNQUFNNGlCLGNBQWNsakIsVUFBVWtrQixTQUFTLDJCQUVBLElBQXJDNWpCLE1BQU00aUIsY0FBY2hhLE1BQU03TCxPQUFjLENBRTFDLE1BQU1zUyxFQUFJLElBQUkxVCxLQUFLcUUsTUFBTTRpQixjQUFjaGEsYUFDakN5RyxFQUFFM1QsS0FBSyxDQUFFSyxPQUFPLEtBQ2xCMlYsTUFBTXJDLEVBQUVuVCxhQUE2QixJQUFabVQsRUFBRW5ULFNBQzdCNE8sR0FBR0MsY0FBY2tXLE1BQ2Y1bEIsS0FBSzRQLEtBQUtZLE9BQU8sMkJBQTRCLENBQzNDakQsTUFBTzVJLE1BQU00aUIsY0FBY2hhLFNBRy9CK2MsU0FBUzNsQixNQUFNNGlCLGNBQWMxYSxNQUMzQjdNLEtBQUs0UCxLQUFLWSxPQUFPLHNCQUt6QixHQUFJN0wsTUFBTTRpQixjQUFjbGpCLFVBQVVra0IsU0FBUyxvQkFHRixJQUFyQzVqQixNQUFNNGlCLGNBQWNoYSxNQUFNN0wsUUFDbUMsT0FBN0RpRCxNQUFNNGlCLGNBQWNuSyxRQUFRLGNBQWN6WixRQUFRdXFDLE9BQ2xELENBRUEsTUFBTWw2QixFQUFJLElBQUkxVCxLQUFLcUUsTUFBTTRpQixjQUFjaGEsYUFDakN5RyxFQUFFM1QsS0FBSyxDQUFFSyxPQUFPLEtBQ2xCMlYsTUFBTXJDLEVBQUVuVCxhQUFzQnlULElBQVpOLEVBQUVuVCxTQUN0QjRPLEdBQUdDLGNBQWNrVyxNQUNmNWxCLEtBQUs0UCxLQUFLWSxPQUFPLDJCQUE0QixDQUMzQ2pELE1BQU81SSxNQUFNNGlCLGNBQWNoYSxTQUcvQitjLFNBQVMzbEIsTUFBTTRpQixjQUFjMWEsTUFDM0I3TSxLQUFLNFAsS0FBS1ksT0FBTyxzQkFRekIsR0FBSTdMLE1BQU00aUIsY0FBY2xqQixVQUFVa2tCLFNBQVMsZ0JBQWlCLENBQzFELE1BQU03VCxPQUFTdEUsS0FBS2pILE1BQU02SCxNQUFNOVEsSUFDOUJ5RSxNQUFNNGlCLGNBQWNuSyxRQUFRLFNBQVN6WixRQUFRb04sUUFFekNFLE1BQVFiLEtBQUtqSCxNQUFNNkgsTUFBTTlRLElBQzdCeUUsTUFBTTRpQixjQUFjbGxCLFFBQVFzQyxNQUFNNGlCLGNBQWM0cUMsZUFBZTVrRCxPQUVqRSxHQUFJbUgsUUFBVXpELE1BQ1osT0FBUXRNLE1BQU00aUIsY0FBYzVqQixRQUFRc04sT0FDbEMsSUFBSyxhQUNHeUQsT0FBTzRFLE9BQU8sQ0FDbEIscUJBQXNCckksTUFBTXBGLEdBQzVCLHVCQUF3Qm9GLE1BQU1wRSxPQUVoQyxNQUNGLElBQUssbUJBQ0c2SCxPQUFPNEUsT0FBTyxDQUNsQiwyQkFBNEJySSxNQUFNcEYsR0FDbEMsNkJBQThCb0YsTUFBTXBFLFFBUTlDLEdBQUlsSSxNQUFNNGlCLGNBQWNsakIsVUFBVWtrQixTQUFTLGVBQWdCLENBQ3pELE1BQU03VCxPQUFTdEUsS0FBS2pILE1BQU02SCxNQUFNOVEsSUFDOUJ5RSxNQUFNNGlCLGNBQWNuSyxRQUFRLFNBQVN6WixRQUFRb04sUUFFM0MyRCxjQUNJQSxPQUFPNEUsT0FBTyxDQUFFek0sS0FBTWxJLE1BQU00aUIsY0FBY2hhLFFBT3BELEdBQUk1SSxNQUFNNGlCLGNBQWNsakIsVUFBVWtrQixTQUFTLGtCQUFtQixDQUM1RCxNQUFNN1QsT0FBU3RFLEtBQUtqSCxNQUFNNkgsTUFBTTlRLElBQzlCeUUsTUFBTTRpQixjQUFjbkssUUFBUSxTQUFTelosUUFBUW9OLFFBRS9DLEdBQUkyRCxPQUVGLEdBQXlDLElBQXJDL1AsTUFBTTRpQixjQUFjaGEsTUFBTTdMLE9BQWMsQ0FDMUMsTUFBTXNTLEVBQUksSUFBSTFULEtBQUtxRSxNQUFNNGlCLGNBQWNoYSxPQUV2QyxTQURNeUcsRUFBRTNULEtBQUssQ0FBRUssT0FBTyxJQUNsQjJWLE1BQU1yQyxFQUFFblQsYUFBNkIsSUFBWm1ULEVBQUVuVCxNQUM3QjRPLEdBQUdDLGNBQWNrVyxNQUNmamhCLE1BQU00aUIsY0FBY2hhLE1BQVEsZ0NBRzlCLE9BQVE1SSxNQUFNNGlCLGNBQWM1akIsUUFBUSt1QixPQUNsQyxJQUFLLGVBQ0doZSxPQUFPNEUsT0FBTyxDQUNsQiwyQkFBNEIzVSxNQUFNNGlCLGNBQWNoYSxRQUVsRCxNQUNGLElBQUssYUFDR21ILE9BQU80RSxPQUFPLENBQ2xCLHlCQUEwQjNVLE1BQU00aUIsY0FBY2hhLFFBRWhELE1BQ0YsSUFBSyxnQkFDR21ILE9BQU80RSxPQUFPLENBQ2xCLDRCQUE2QjNVLE1BQU00aUIsY0FBY2hhLGNBTXpELE9BQVE1SSxNQUFNNGlCLGNBQWM1akIsUUFBUSt1QixPQUNsQyxJQUFLLGVBQ0doZSxPQUFPNEUsT0FBTyxDQUNsQiwyQkFBNEIsT0FFOUIsTUFDRixJQUFLLGFBQ0c1RSxPQUFPNEUsT0FBTyxDQUNsQix5QkFBMEIsT0FFNUIsTUFDRixJQUFLLGdCQUNHNUUsT0FBTzRFLE9BQU8sQ0FDbEIsNEJBQTZCLFNBUzdDLE9BQU9sSixLQUFLckQsT0FBT3VNLE9BQU9nUixXQzU2RHZCLE1BQU04bkMscUJBQXFCekssZUFLaENqbkQsZ0JBQ0UsTUFBTStDLFdBQWF5UyxNQUFNZ08sVUFxQ3pCLE9BbENBemdCLEtBQUs0dUQsY0FBZSxFQUNwQjV1RCxLQUFLNnVELGVBQWlCbGlELEtBQUtqSCxNQUFNeW5CLGFBQWEsdUJBQ2xCdGMsSUFBeEI3USxLQUFLNnVELGlCQUE4Qjd1RCxLQUFLNnVELGdCQUFpQixHQUU3RDd1RCxLQUFLOHVELE9BQXlDLE9BQWhDOXVELEtBQUtBLEtBQUtzWCxRQUFRTixJQUFJbE4sTUFDcEM5SixLQUFLK3VELE1BQXVDLE9BQS9CL3VELEtBQUtBLEtBQUtzWCxRQUFRa0ksR0FBRzFWLE1BQ2xDOUosS0FBS2d2RCxRQUEwQyxPQUFoQ2h2RCxLQUFLQSxLQUFLc1gsUUFBUWl4QixJQUFJeitCLE1BRXJDOUosS0FBS2l2RCxZQUFhLEVBRWxCanZELEtBQUsrbUQsbUJBQ0hob0QsT0FBTzJsQyxVQUFVQyxlQUFlemdDLEtBQUtsRSxLQUFLdWtELFlBQWEsVUFDdER2a0QsS0FBS0EsS0FBSzIzQixNQUFNb1QsT0FDbkIvcUMsS0FBS2duRCxtQkFDSGpvRCxPQUFPMmxDLFVBQVVDLGVBQWV6Z0MsS0FBS2xFLEtBQUt1a0QsWUFBYSxVQUN0RHZrRCxLQUFLQSxLQUFLMjNCLE1BQU1vVCxPQUNuQi9xQyxLQUFLaW5ELG9CQUNIbG9ELE9BQU8ybEMsVUFBVUMsZUFBZXpnQyxLQUFLbEUsS0FBS3VrRCxZQUFhLFdBQ3REdmtELEtBQUtBLEtBQUsyM0IsTUFBTW9ULE9BQ25CL3FDLEtBQUtrbkQscUJBQ0hub0QsT0FBTzJsQyxVQUFVQyxlQUFlemdDLEtBQUtsRSxLQUFLdWtELFlBQWEsWUFDckR2a0QsS0FBS0EsS0FBSzIzQixNQUFNb1QsUUFBVXh1QyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsbUJBQ3hEdUQsS0FBS21uRCxzQkFDSHBvRCxPQUFPMmxDLFVBQVVDLGVBQWV6Z0MsS0FBS2xFLEtBQUt1a0QsWUFBYSxZQUN0RHZrRCxLQUFLQSxLQUFLMjNCLE1BQU1vVCxPQUNuQi9xQyxLQUFLb25ELHNCQUF1QixFQUM1QnBuRCxLQUFLa3ZELGFBQ0hsdkQsS0FBSyttRCxvQkFDTC9tRCxLQUFLZ25ELG9CQUNMaG5ELEtBQUtpbkQscUJBQ0xqbkQsS0FBS2tuRCxzQkFDTGxuRCxLQUFLbW5ELHVCQUNMbm5ELEtBQUtvbkQscUJBRUFwbkQsS0FHVDBqQixrQkFBbUJwTCxNQUNqQjdGLE1BQU1pUixrQkFBa0JwTCxNQUN4QkEsS0FBSzRDLEtBQUssYUFBYXlJLE1BQU1oWCxLQUFLd2lELFlBQVk3cUQsS0FBS3FJLE9BQy9DQSxLQUFLakgsTUFBTTBhLFNBQ2I5SCxLQUNHNEMsS0FBSyxrQ0FDTGswQyxRQUFPbHVELE9BQVN5TCxLQUFLakgsTUFBTTJwRCx3QkFBd0JudUQsU0FJMURqRSxrQkFBbUJpRSxPQUVqQixHQURBQSxNQUFNMGEsaUJBRUhqUCxLQUFLakgsTUFBTTFGLEtBQUtBLEtBQUt5QyxRQUFRNFQsUUFBUW96QixhQUNyQzk4QixLQUFLakgsTUFBTTFGLEtBQUtBLEtBQUt5QyxRQUFRNFQsUUFBUXV6QixhQUt4QyxJQUNHMW9DLE1BQU1DLFNBQ0xELE1BQU1FLFNBQ1ksS0FBbEJGLE1BQU1HLFNBQ1ksTUFBbEJILE1BQU1HLFVBQ1I5RSxLQUFLb0MsS0FBS3FoQixLQUNWLENBQ0EsSUFBSXpRLFdBQVkzUCxTQUNoQixJQUFLc0IsTUFBTTRhLFNBQVUsQ0FDbkIsTUFBTWxCLFlBQWNDLFdBQVd2UyxPQUFPLENBQ3BDMnNDLHlCQUF5QixJQUV2QnI2QixRQUNGaGIsU0FBV3lLLE9BQU91USxNQUFNbmUsSUFBSSxjQUM1QjhTLFdBQWFsRixPQUFPdVEsTUFBTW5lLElBQUksZ0JBR2xDLE1BQU15MEMsU0FBVyxDQUNmamlDLE1BQU8sVUFDUHdFLE9BQVE5RyxLQUFLakgsTUFBTTFGLEtBQUtBLEtBQUt5QyxRQUFRNFQsUUFBUW96QixZQUM3Q2wyQixPQUFRNUcsS0FBS2pILE1BQU0xRixLQUFLQSxLQUFLeUMsUUFBUTRULFFBQVF1ekIsYUFDN0NqM0IsVUFBV2hHLEtBQUtqSCxNQUFNMUYsS0FBS0EsS0FBSythLE1BQU1sVCxNQUFNNUosT0FDeEMwTyxLQUFLakgsTUFBTTFGLEtBQUtBLEtBQUsrYSxNQUFNbFQsS0FDM0I4RSxLQUFLakgsTUFBTTBELEtBQ2Z5RyxTQUFVbEQsS0FBS2pILE1BQU1zRCxVQUV1QixjQUExQ3pNLEtBQUtJLFNBQVNGLElBQUksT0FBUSxjQUM1QnkwQyxTQUFTNXlDLE9BQVEsUUFFSyxJQUFic0IsV0FBMEJzeEMsU0FBU3R4QyxTQUFXQSxlQUMvQixJQUFmMlAsYUFBNEIyaEMsU0FBUzNoQyxXQUFhQSxZQUM3RCxNQUFNZ2lDLEtBQU8zVixXQUFXc1osZUFBZWhFLFVBQ25DSyxNQUNGbnFDLFdBQVdvbUMsY0FDVCxLQUNBanhDLEtBQUs0UCxLQUFLWSxPQUFPLGlDQUFrQyxDQUNqRGtDLE1BQU9zaUMsWUFJUixDQUNMLE1BQU0vK0IsUUFBVSxDQUNkZSxPQUFRNUcsS0FBS2pILE1BQU1pa0Msb0JBQ25CbDJCLE9BQVE5RyxLQUFLakgsTUFBTWdrQyxtQkFDbkIvMkIsVUFBV2hHLEtBQUtqSCxNQUFNMUYsS0FBS0EsS0FBSythLE1BQU1sVCxNQUFNNUosT0FDeEMwTyxLQUFLakgsTUFBTTFGLEtBQUtBLEtBQUsrYSxNQUFNbFQsS0FDM0I4RSxLQUFLakgsTUFBTTBELEtBQ2Z5RyxTQUFVbEQsS0FBS2pILE1BQU1zRCxVQUV2QnVKLGFBQWErOEMsYUFBYTk4QyxRQUFTdFIsTUFBTTRhLFdBSTdDeXJDLGVBQ0U1NkMsS0FBS2pILE1BQU02cEQsZUFBZSxrQkFDMUI5OEMsTUFBTTgwQyxlQVVHL3pCLDRCQUNULE9BQU9ELFlBQVk5Z0IsTUFBTStnQixlQUFnQixDQUN2Q25QLFFBQVMsQ0FBQyxPQUFRLFFBQVMsUUFBUyxPQUNwQzh1QixTQUFVLENBQUMsQ0FBRUMsYUFBYyxRQUFTQyxhQUFjLE9BQ2xENzZCLFNBQVUsK0NBQ1ZpN0IsTUFBTyxJQUNQK2IsV0FBVyxJQVVmdnlELG9CQUFxQmlFLE1BQU8ybEIsVUFDMUIsS0FBSTNsQixNQUFNNGlCLGVBQ0o1aUIsTUFBTTRpQixjQUFjbGpCLFdBQ2xCTSxNQUFNNGlCLGNBQWNsakIsVUFBVWtrQixTQUFTLHlCQVMvQyxPQUFPclMsTUFBTWc5QyxjQUFjdnVELE1BQU8ybEIsVUFSNUJsYSxLQUFLakgsTUFBTWdxRCxrQkFDVHh1RCxNQUFNNGlCLGNBQWMxYSxLQUNwQmxJLE1BQU00aUIsY0FBY2hhLE9BUzlCNU4saUJBQWtCZ0csSUFBS29XLE1BQ3JCLE1BQU1xM0MsS0FBT3IzQyxLQUFLNEMsS0FBSyxrQ0FDbkJ5MEMsS0FBSzF4RCxRQUNQMHhELEtBQUtqYyxPQUNIMzJDLEtBQUtnQixJQUFJLEtBQU11YSxLQUFLbzdCLFNBQVdpYyxLQUFLdHVDLFdBQVdFLElBQU0sR0FBS291QyxLQUFLMXhELFFBQzdELE1BS1IyeEQsWUFBYW52RCxHQUNYZ1MsTUFBTW05QyxZQUFZbnZELEdBQ2xCa3VELGFBQWFrQixVQUFVcHZELEVBQUdrTSxLQUFLc1osV0NsTDVCLE1BQU02cEMsMEJBQTBCbkIsYUFLckMxeEQsZ0JBQ0UsTUFBTStDLFdBQWF5UyxNQUFNZ08sVUFFekIsT0FEQXpnQixLQUFLaXZELFlBQWEsRUFDWGp2RCxLQU9Fd3pCLDRCQUNULE9BQU9ELFlBQVk5Z0IsTUFBTStnQixlQUFnQixDQUN2Q25QLFFBQVMsQ0FBQyxPQUFRLFFBQVMsUUFBUyxNQUFPLGVDdEIxQyxNQUFNMHJDLGtDQUFrQzdjLGdCQUNsQzFmLDRCQUNULE9BQU9ELFlBQVk5Z0IsTUFBTStnQixlQUFnQixDQUN2Q25QLFFBQVMsQ0FBQyxRQUNWbGtCLE1BQU81RCxLQUFLNFAsS0FBS0MsU0FBUyxrQ0FDMUJvTSxTQUFVLG1EQUNWazdCLE9BQVEsU0FJWnoyQyxnQkFDRSxNQUFNK0MsV0FBYXlTLE1BQU1nTyxVQUV6QixPQURBemdCLEtBQUtnd0QsV0FBa0MsYUFBckJod0QsS0FBS3NKLE9BQU96QixLQUN2QjdILEtBR1QwakIsa0JBQW1CcEwsTUFDakJBLEtBQUs0QyxLQUFLLGVBQWVrMEMsT0FBT3ppRCxLQUFLc2pELGdCQUFnQjNyRCxLQUFLcUksT0FDMUQyTCxLQUFLNEMsS0FBSyxrQkFBa0J5SSxNQUFNaFgsS0FBS3VqRCxlQUFlNXJELEtBQUtxSSxPQUMzRDhGLE1BQU1pUixrQkFBa0JwTCxNQUcxQjQzQyxlQUFnQmh2RCxPQUNkLEdBQTJDLFFBQXZDQSxNQUFNNGlCLGNBQWM1akIsUUFBUTY5QixPQUFrQixDQUNoRCxNQUFNemxCLEtBQU9JLEVBQUV4WCxNQUFNNGlCLGVBQWVuSyxRQUFRLG1CQUN0QzlSLEtBQU95USxLQUFLNEMsS0FBSyxlQUFlbWhDLE1BQ2hDanpDLEtBQU9rUCxLQUFLNEMsS0FBSyxlQUFlbWhDLE1BQ2hDdnlDLE1BQVE1SyxTQUFTb1osS0FBSzRDLEtBQUssZ0JBQWdCbWhDLE9BQzNDclQsaUJBQ0pyOEIsS0FBS3JELE9BQU81RCxNQUFNMUYsS0FBS0EsS0FBS2dwQyxrQkFBb0IsR0FDbERBLGlCQUFpQm5yQyxLQUFLLENBQ3BCZ0ssS0FBTXVCLEtBQ042L0IsVUFBV24vQixNQUNYby9CLFNBQW1CLGFBQVRyaEMsT0FFWm1oQyxpQkFBaUJuUCxNQUFLLFNBQVV2WSxLQUFNOG5CLE9BQ3BDLE9BQU85bkIsS0FBS3paLEtBQUt3aEMsY0FBY0QsTUFBTXZoQyxTQUV2QzhFLEtBQUtyRCxPQUFPNUQsTUFBTW1RLE9BQU8sQ0FBRSx3QkFBeUJtekIsbUJBRXREcjhCLEtBQUt5WCxRQUdQNnJDLGdCQUFpQi91RCxPQUNmLE1BQU1vWCxLQUFPSSxFQUFFeFgsTUFBTTRpQixlQUFlbkssUUFBUSxtQkFDNUNoTixLQUFLckQsT0FBT0YsS0FBT2tQLEtBQUs0QyxLQUFLLGVBQWVtaEMsTUFDNUMxdkMsS0FBS3JELE9BQU96QixLQUFPeVEsS0FBSzRDLEtBQUssZUFBZW1oQyxNQUM1QzF2QyxLQUFLaVMsUUFBTyxHQUdkM2hCLG9CQUFxQmlFLE1BQU8ybEIsWUMvQ3ZCLE1BQU1zcEMsMkJBQTJCak0sZUFDdENrTSxvQkFDRSxHQUE4Qix1QkFBMUJ6akQsS0FBSzhELFlBQVlySCxLQUErQixDQUM3Q3VELEtBQUswakQsYUFBWTFqRCxLQUFLMGpELFlBQWEsR0FDeEMsSUFBSTd4QyxRQUFVL0wsTUFBTTI5QyxvQkFhcEIsT0FaQTV4QyxRQUFVLENBQ1IsQ0FDRWxELE1BQU8zTyxLQUFLMGpELFdBQ1I5ekQsS0FBSzRQLEtBQUtDLFNBQVMsaUJBQ25CN1AsS0FBSzRQLEtBQUtDLFNBQVMsa0JBQ3ZCZ3pDLE1BQU8sa0JBQ1Azb0IsS0FBTTlwQixLQUFLMGpELFdBQ1AseUJBQ0EseUJBQ0pDLFFBQVNwdkQsT0FBU3lMLEtBQUs0akQsZ0JBQWdCcnZELFNBRXpDdzBCLE9BQU9sWCxTQUNGQSxRQUVULE9BQU8vTCxNQUFNMjlDLG9CQUdmbnpELHNCQUF1QmlFLE9BQ3JCeUwsS0FBSzBqRCxZQUFjMWpELEtBQUswakQsaUJBQ2xCMWpELEtBQUt5WCxRQUNYLE1BQU14bEIsUUFBVStOLEtBQUswakQsV0FDakIsQ0FDQWhzQyxRQUFTLENBQUMsT0FBUSxRQUFTLFlBQWEsY0FDeENxdkIsT0FBUSxJQUNSOGIsV0FBVyxFQUNYL2IsTUFBTyxLQUVQMGMsbUJBQW1CMzhCLHFCQUNqQjdtQixLQUFLaVMsUUFBTyxFQUFNaGdCLFNBRzFCM0IsZ0JBQ0UsTUFBTStDLFdBQWF5UyxNQUFNZ08sVUF3RXpCLEdBdEVFOVQsS0FBSzIzQyxpQkFDa0QsSUFBaEQzM0MsS0FBS2pILE1BQU00eEIsUUFBUSxPQUFRLHdCQUU1QjNxQixLQUFLakgsTUFBTXF1QixRQUFRLE9BQVEsaUJBQWlCLEdBR2xEcG5CLEtBQUsyM0MsaUJBQ3NELElBQXBEMzNDLEtBQUtqSCxNQUFNNHhCLFFBQVEsT0FBUSw0QkFFNUIzcUIsS0FBS2pILE1BQU1xdUIsUUFBUSxPQUFRLHFCQUFxQixHQUV4RC96QixLQUFLd3dELG1CQUNIN2pELEtBQUtqSCxNQUFNNHhCLFFBQVEsT0FBUSxtQkFBb0IsRUFDakR0M0IsS0FBS3l3RCxrQkFDSDlqRCxLQUFLakgsTUFBTTR4QixRQUFRLE9BQVEsdUJBQXdCLEVBQ3JEdDNCLEtBQUswd0QsY0FBZ0JuMEQsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGlCQUUzQ2tRLEtBQUtqSCxNQUFNaStCLFlBQ2IzakMsS0FBS0EsS0FBSythLE1BQU00b0IsV0FBYWgzQixLQUFLakgsTUFBTWkrQixXQUFXdjZCLEtBQ25EcEosS0FBS0EsS0FBSythLE1BQU00MUMsZUFBZ0IsR0FDM0Izd0QsS0FBS0EsS0FBSythLE1BQU00MUMsZUFBZ0IsRUFFbkNoa0QsS0FBS2pILE1BQU1rK0IsV0FDYjVqQyxLQUFLQSxLQUFLK2EsTUFBTTZvQixVQUFZajNCLEtBQUtqSCxNQUFNaytCLFVBQVV4NkIsS0FDakRwSixLQUFLQSxLQUFLK2EsTUFBTTYxQyxjQUFlLEdBQzFCNXdELEtBQUtBLEtBQUsrYSxNQUFNNjFDLGNBQWUsRUFFdEM1d0QsS0FBSzZ3RCxnQkFBa0Jsa0QsS0FBS2pILE1BQU15a0MsaUJBQ2xDbnFDLEtBQUs4d0QsZ0JBQWtCbmtELEtBQUtqSCxNQUFNc2tDLHNCQUNsQ2hxQyxLQUFLK3dELHdCQUNIMW1ELE9BQU9zQyxLQUFLakgsTUFBTXNrQyx5QkFDbEIzL0IsT0FBT3NDLEtBQUtqSCxNQUFNMUYsS0FBS0EsS0FBSzBsRCxhQUFhL2hCLFlBQzNDM2pDLEtBQUtneEQsZUFBaUJya0QsS0FBS2pILE1BQU11a0MscUJBQ2pDanFDLEtBQUtpeEQsdUJBQ0g1bUQsT0FBT3NDLEtBQUtqSCxNQUFNdWtDLHdCQUNsQjUvQixPQUFPc0MsS0FBS2pILE1BQU0xRixLQUFLQSxLQUFLMGxELGFBQWE5aEIsV0FDM0M1akMsS0FBS2t4RCxjQUFnQnZrRCxLQUFLakgsTUFBTTBrQyxvQkFDaENwcUMsS0FBS214RCxzQkFDSDltRCxPQUFPc0MsS0FBS2pILE1BQU0wa0MsdUJBQ2xCLy9CLE9BQU9zQyxLQUFLakgsTUFBTTFGLEtBQUtBLEtBQUswbEQsYUFBYWhpQixVQUMzQzFqQyxLQUFLb3hELGdCQUFrQi9tRCxPQUNyQnNDLEtBQUtqSCxNQUFNaStCLFlBQVkzakMsS0FBS0EsS0FBSzRuQyxhQUFhN3BDLEtBRWhEaUMsS0FBS3F4RCxnQkFBa0JobkQsT0FDckJzQyxLQUFLakgsTUFBTWkrQixZQUFZM2pDLEtBQUtBLEtBQUs0bkMsYUFBYTFwQyxLQUVoRDhCLEtBQUtzeEQsb0JBQ0gza0QsS0FBS2pILE1BQU1paUMsbUJBQW1CM25DLEtBQUtBLEtBQUsyVixhQUFhZ3VCLFdBQ25EM2pDLEtBQUtveEQsaUJBQ1B6a0QsS0FBS2pILE1BQU1paUMsbUJBQW1CM25DLEtBQUtBLEtBQUsyVixhQUFhZ3VCLFdBQ25EM2pDLEtBQUtxeEQsZ0JBQ1RyeEQsS0FBS3V4RCxnQkFBa0J2eEQsS0FBS3VrRCxZQUFZaU4sUUFBUXZ6RCxPQUM1QytCLEtBQUt1a0QsWUFBWWlOLFFBQVF2ekQsT0FDekIsRUFDSitCLEtBQUt5eEQsZUFBaUI5a0QsS0FBS2pILE1BQU1rK0IsV0FBVzVqQyxLQUFLQSxLQUFLMHhELFFBQ2xEL2tELEtBQUtqSCxNQUFNaytCLFdBQVc1akMsS0FBS0EsS0FBSzB4RCxRQUNoQyxFQUNKMXhELEtBQUsyeEQsbUJBQXFCM3hELEtBQUt1eEQsZ0JBQWtCdnhELEtBQUt5eEQsZUFFdER6eEQsS0FBS3FxQyxvQkFBc0IxOUIsS0FBS2pILE1BQU0ya0Msb0JBRXRDcnFDLEtBQUs0eEQsaUJBQW1CcjFELEtBQUtJLFNBQVNGLElBQUksT0FBUSxzQkFDbER1RCxLQUFLNnhELGtCQUFvQnQxRCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsdUJBQ25EdUQsS0FBSzh4RCx1QkFBeUJ2MUQsS0FBS0ksU0FBU0YsSUFDMUMsT0FDQSwwQkFFRnVELEtBQUsreEQsY0FBZ0IveEQsS0FBSzR4RCxrQkFBb0I1eEQsS0FBSzZ4RCxrQkFFbkQ3eEQsS0FBS3FsRCxhQUFlMTRDLEtBQUtqSCxNQUFNeW5CLGFBQWEsaUJBQ3ZDbnRCLEtBQUtxbEQsYUFBYyxDQUV0QixJQUFJMk0sT0FDQXpNLGVBRkp2bEQsS0FBS3NsRCxPQUFTLEdBR1R0bEQsS0FBS0EsS0FBS3NsRCxRQUliME0sT0FBUzl5RCxTQUFTYyxLQUFLQSxLQUFLc2xELE9BQU8xZ0MsWUFDL0IxbEIsU0FBU2MsS0FBS0EsS0FBS3NsRCxPQUFPMWdDLFlBQzFCLEVBQ0oyZ0MsZUFBaUJ2bEQsS0FBS0EsS0FBS3NsRCxPQUFPQyxlQUM5QnZsRCxLQUFLQSxLQUFLc2xELE9BQU9DLGVBQ2pCLE1BUkp5TSxPQUFTLEVBQ1R6TSxlQUFpQixLQVVuQnZsRCxLQUFLc2xELE9BQU81VixjQUFnQixHQUFHNlYsaUJBQzdCNTRDLEtBQUtqSCxNQUFNZ3FDLGNBQWdCc2lCLFNBRTdCaHlELEtBQUtzbEQsT0FBTzFWLE9BQVMsR0FBRzJWLGlCQUFpQjU0QyxLQUFLakgsTUFBTWtxQyxPQUFTb2lCLFNBQzdEaHlELEtBQUtzbEQsT0FBTzNWLEtBQU8sR0FBRzRWLGlCQUFpQjU0QyxLQUFLakgsTUFBTWlxQyxLQUFPcWlCLFNBRzNEaHlELEtBQUtpeUQsa0JBQW9CMTFELEtBQUtJLFNBQVNGLElBQUksT0FBUSxxQkFFbkR1RCxLQUFLcXdELFdBQWExakQsS0FBSzBqRCxhQUFlcndELEtBQUs0a0Qsa0JBQzNDNWtELEtBQUtxbEMsVUFBWSxHQUNqQixJQUFJNnNCLGFBQWUsR0FDbkIsSUFBSyxNQUFNMWtELFNBQVN4TixLQUFLNlIsUUFDbkI3UixLQUFLeXdELG1CQUFzQmpqRCxNQUFNeE4sS0FBSytyQixXQUFXcnBCLFNBQy9DOEssTUFBTXhOLEtBQUsrckIsV0FBV3RwQixTQUNwQnl2RCxlQUFpQjFrRCxNQUFNeE4sS0FBSyttQixpQkFDOUJtckMsYUFBZTFrRCxNQUFNeE4sS0FBSyttQixlQUMxQi9tQixLQUFLcWxDLFVBQVV4bkMsS0FBSyxDQUNsQnMwRCxrQkFBa0IsRUFDbEIvb0QsS0FBTW9FLE1BQU14TixLQUFLK21CLGtCQUl2Qi9tQixLQUFLcWxDLFVBQVV4bkMsS0FBSzJQLFFBb0J4QixHQWpCQXhOLEtBQUtveUQsY0FBZ0IsSUFBSXB5RCxLQUFLNlIsUUFBUWdvQixNQUFLLENBQUNwNUIsRUFBR2l0QixJQUN0Q0EsRUFBRTF0QixLQUFLOEosTUFBUXJKLEVBQUVULEtBQUs4SixRQUUvQjlKLEtBQUtxeUQsVUFBWSxJQUFJcnlELEtBQUtveUQsZUFBZXBvRCxNQUFNLEVBQUcsSUFDbERoSyxLQUFLb3lELGNBQWdCcHlELEtBQUtveUQsY0FBY3AwRCxRQUN0Q3dQLE9BQVN4TixLQUFLeXdELG9CQUFzQmpqRCxNQUFNeE4sS0FBSytyQixXQUFXcnBCLFNBRTVEMUMsS0FBS3N5RCxXQUFhLElBQUl0eUQsS0FBSzBrRCxZQUFhMWtELEtBQUt5a0QsVUFDMUM1cUIsTUFBSyxDQUFDcDVCLEVBQUdpdEIsSUFDRGp0QixFQUFFVCxLQUFLd04sTUFBTW9mLE1BQU05aUIsTUFBUTRqQixFQUFFMXRCLEtBQUt3TixNQUFNb2YsTUFBTTlpQixRQUV0RHlvRCxVQUNBdm9ELE1BQU0sRUFBRyxHQUNaaEssS0FBS3d5RCxrQkFBb0JqMkQsS0FBS0ksU0FBU0YsSUFDckMsT0FDQSw0QkFFRXVELEtBQUt3eUQsb0JBQXNCeHlELEtBQUtBLEtBQUsrYSxNQUFNcXFDLFdBQVksQ0FDekQsTUFBTXptRCxLQUFPZ08sS0FBS2pILE1BQU1xcUMsY0FDcEJweEMsT0FDRnFCLEtBQUtBLEtBQUsrYSxNQUFNcXFDLFdBQWF6bUQsS0FBS3lLLE1BOEJ0QyxPQTFCQXBKLEtBQUt5eUQsZUFBd0MsSUFBdkJ6eUQsS0FBSzZSLE9BQU81VCxPQUVsQytCLEtBQUsrbUQsbUJBQ0hob0QsT0FBTzJsQyxVQUFVQyxlQUFlemdDLEtBQUtsRSxLQUFLdWtELFlBQWEsVUFDdER2a0QsS0FBS0EsS0FBSzIzQixNQUFNb1QsT0FDbkIvcUMsS0FBS2duRCxtQkFDSGpvRCxPQUFPMmxDLFVBQVVDLGVBQWV6Z0MsS0FBS2xFLEtBQUt1a0QsWUFBYSxVQUN0RHZrRCxLQUFLQSxLQUFLMjNCLE1BQU1vVCxPQUNuQi9xQyxLQUFLaW5ELG9CQUNIbG9ELE9BQU8ybEMsVUFBVUMsZUFBZXpnQyxLQUFLbEUsS0FBS3VrRCxZQUFhLFdBQ3REdmtELEtBQUtBLEtBQUsyM0IsTUFBTW9ULE9BQ25CL3FDLEtBQUtrbkQscUJBQ0hub0QsT0FBTzJsQyxVQUFVQyxlQUFlemdDLEtBQUtsRSxLQUFLdWtELFlBQWEsWUFDckR2a0QsS0FBS0EsS0FBSzIzQixNQUFNb1QsUUFBVXh1QyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsbUJBQ3hEdUQsS0FBS21uRCxzQkFDSHBvRCxPQUFPMmxDLFVBQVVDLGVBQWV6Z0MsS0FBS2xFLEtBQUt1a0QsWUFBYSxZQUN0RHZrRCxLQUFLQSxLQUFLMjNCLE1BQU1vVCxPQUVuQi9xQyxLQUFLa3ZELGFBQ0hsdkQsS0FBSyttRCxvQkFDTC9tRCxLQUFLZ25ELG9CQUNMaG5ELEtBQUtpbkQscUJBQ0xqbkQsS0FBS2tuRCxzQkFDTGxuRCxLQUFLbW5ELHVCQUNMbm5ELEtBQUtvbkQscUJBRUFwbkQsS0FPRXd6Qiw0QkFDVCxPQUFPRCxZQUFZOWdCLE1BQU0rZ0IsZUFBZ0IsQ0FDdkNuUCxRQUFTLENBQUMsT0FBUSxVQUFXLFFBQVMsYUFDdEM3TCxTQUFVLHFEQUNWaTdCLE1BQU8sSUFDUEMsT0FBUSxJQUNSOGIsV0FBVyxFQUNYcmMsU0FBVSxDQUFDLENBQUVDLGFBQWMsUUFBU0MsYUFBYyxPQUNsRHlhLFFBQVMsQ0FBQyxxQkFDVjRFLEtBQU0sQ0FDSixDQUNFQyxZQUFhLGFBQ2JDLGdCQUFpQixjQUNqQkMsUUFBUyxhQU1qQm52QyxrQkFBbUJwTCxNQUNqQjdGLE1BQU1pUixrQkFBa0JwTCxNQUVwQjNMLEtBQUtqSCxNQUFNMGEsVUFFYjlILEtBQ0c0QyxLQUFLLG9DQUNMeUksT0FBTTFtQixNQUFBQSxPQUFlMFAsS0FBS21tRCxZQUFZNXhELFNBQ3pDb1gsS0FDRzRDLEtBQUsscUJBQ0x5SSxPQUFNMW1CLGVBQWtCMFAsS0FBS2pILE1BQU15aEMsb0JBQ3RDN3VCLEtBQ0c0QyxLQUFLLG9CQUNMeUksT0FBTTFtQixlQUFrQjBQLEtBQUtqSCxNQUFNK2dDLG1CQUN0Q251QixLQUFLNEMsS0FBSyxjQUFjeUksT0FBTXppQixPQUFTeUwsS0FBS29tRCxlQUFlN3hELFNBQzNEb1gsS0FDRzRDLEtBQUssa0NBQ0xrMEMsUUFBT2x1RCxPQUFTeUwsS0FBS2pILE1BQU0ycEQsd0JBQXdCbnVELFNBQ3REb1gsS0FBSzRDLEtBQUsscUJBQXFCeUksT0FBTXppQixRQUNuQ3lMLEtBQUtxbUQsb0JBQW9COXhELFVBRTNCb1gsS0FBSzRDLEtBQUsseUJBQXlCeUksT0FBTXppQixRQUN2Q3lMLEtBQUtzbUQsd0JBQXdCL3hELFVBRTNCM0UsS0FBS29DLEtBQUtxaEIsT0FDWjFILEtBQ0c0QyxLQUFLLHlCQUNMeUksTUFBTWhYLEtBQUt1bUQsdUJBQXVCNXVELEtBQUtxSSxPQUMxQzJMLEtBQ0c0QyxLQUFLLDRCQUNMeUksTUFBTWhYLEtBQUt3bUQsMEJBQTBCN3VELEtBQUtxSSxPQUM3QzJMLEtBQ0c0QyxLQUFLLHdCQUNMeUksTUFBTWhYLEtBQUt5bUQscUJBQXFCOXVELEtBQUtxSSxTQUs5Q3ltRCxxQkFBc0JseUQsT0FFcEIsT0FEQUEsTUFBTTBhLGlCQUNFMWEsTUFBTTRpQixjQUFjNWpCLFFBQVFncEIsTUFDbEMsSUFBSyw0QkFDSHZjLEtBQUtqSCxNQUFNcXVCLFFBQ1QsT0FDQSw2QkFDQ3BuQixLQUFLakgsTUFBTXlPLDJCQUVkLE1BQ0YsSUFBSyxpQkFDSHhILEtBQUtqSCxNQUFNcXVCLFFBQVEsT0FBUSxrQkFBbUJwbkIsS0FBS2pILE1BQU04cEMsaUJBSy9EdnlDLDZCQUE4QmlFLE9BQzVCQSxNQUFNMGEsaUJBQ04sSUFBSW0wQywwQkFDRixDQUNFcnFELE1BQU9pSCxLQUFLakgsTUFDWm1DLEtBQU0zRyxNQUFNNGlCLGNBQWM1akIsUUFBUTJILE1BRXBDLElBQ0ErVyxRQUFPLEdBR1h1MEMsMEJBQTJCanlELE9BQ3pCQSxNQUFNMGEsaUJBQ04sTUFBTS9iLE9BQVM2WSxFQUFFeFgsTUFBTTRpQixlQUFlbkssUUFBUSxZQUFZM1osS0FBSyxVQUN6RGdwQyxpQkFBbUJyOEIsS0FBS2pILE1BQU0xRixLQUFLQSxLQUFLZ3BDLGtCQUFvQixHQUNsRUEsaUJBQWlCOVEsT0FBT3I0QixPQUFRLEdBQ2hDbXBDLGlCQUFpQm5QLE1BQUssU0FBVXZZLEtBQU04bkIsT0FDcEMsT0FBTzluQixLQUFLelosS0FBS3doQyxjQUFjRCxNQUFNdmhDLFNBRXZDOEUsS0FBS2pILE1BQU1tUSxPQUFPLENBQUUsd0JBQXlCbXpCLG1CQUcvQy9yQywwQkFBMkJpRSxPQU16QixhQUxNeUwsS0FBS2pILE1BQU1xdUIsUUFDZixPQUNBLGlCQUNDcG5CLEtBQUtqSCxNQUFNNHhCLFFBQVEsT0FBUSx3QkFFakIzcUIsS0FBS2lTLFFBQU8sR0FHM0IzaEIsOEJBQStCaUUsT0FNN0IsYUFMTXlMLEtBQUtqSCxNQUFNcXVCLFFBQ2YsT0FDQSxxQkFDQ3BuQixLQUFLakgsTUFBTTR4QixRQUFRLE9BQVEsNEJBRWpCM3FCLEtBQUtpUyxRQUFPLEdBRzNCM2hCLGtCQUFtQmlFLE9BQ2pCQSxNQUFNMGEsaUJBQ04sTUFBTW5PLFFBQVV2TSxNQUFNNGlCLGNBQWNuSyxRQUFRLFNBQVN6WixRQUFRb04sYUFDdkRYLEtBQUtqSCxNQUFNMnRELGFBQWE1bEQsUUFBU3ZNLE1BQU00YSxVQUcvQ2kzQyxlQUFnQjd4RCxPQUNkQSxNQUFNMGEsaUJBQ04sTUFBTS9ULEtBQU8zRyxNQUFNNGlCLGNBQWM1akIsUUFBUTJILEtBQ25Dd0YsS0FBT1YsS0FBS2pILE1BQU1tQyxNQUNwQndGLE1BQU1BLEtBQUs2UyxNQUFNdEIsUUFBTyxHQUc5QjFpQixtQkFBb0Jna0IsT0FDbEIsR0FBSTNqQixLQUFLSSxTQUFTRixJQUFJLE9BQVEsd0JBQXlCLENBQ3JELEdBQUlGLEtBQUtJLFNBQVNGLElBQUksT0FBUSwyQkFPNUIsR0FOQXlqQixNQUFNM1csUUFBUW01QyxJQUNaLGtCQUNBbm1ELEtBQUtJLFNBQVNGLElBQUksT0FBUSwyQkFLa0MsVUFBNURGLEtBQUtJLFNBQVNGLElBQUksT0FBUSw4QkFDMUIsQ0FDQSxJQUFJNjJELFdBQVlDLGFBQ2hCLElBQUssSUFBSWh4QyxFQUFJLEVBQUdBLEVBQUk3aEIsU0FBUzh5RCxZQUFZdjFELE9BQVFza0IsSUFDL0MsR0FBSTdoQixTQUFTOHlELFlBQVlqeEMsR0FBR2t4QyxNQUFNQyxTQUFTLGFBQWMsQ0FDdkRKLFdBQWE1eUQsU0FBUzh5RCxZQUFZanhDLEdBQ2xDLE1BSUosR0FBSSt3QyxXQUNGLElBQUssSUFBSS93QyxFQUFJLEVBQUdBLEVBQUkrd0MsV0FBV0ssTUFBTTExRCxPQUFRc2tCLElBQzNDLEdBQ3VDLDRCQUFyQyt3QyxXQUFXSyxNQUFNcHhDLEdBQUdxeEMsYUFDcEIsQ0FDQUwsYUFBZWh4QyxFQUNmLE1BSU4sR0FBSWd4QyxhQUFjLENBQ2hCLE1BQU1NLFNBQVdQLFdBQVdLLE1BQU1KLGNBQWNueUMsTUFNaEQsT0FMQXl5QyxTQUFTQyxlQUFlLGdCQUN4QkQsU0FBU0UsWUFDUCxhQUNBeDNELEtBQUtJLFNBQVNGLElBQUksT0FBUSwyQkFFcEJGLEtBQUtJLFNBQVNGLElBQUksT0FBUSwrQkFDaEMsSUFBSyxPQVNMLFFBQ0VvM0QsU0FBU0UsWUFBWSxrQkFBbUIsUUFDeEMsTUFSRixJQUFLLFVBQ0hGLFNBQVNFLFlBQVksa0JBQW1CLFdBQ3hDLE1BQ0YsSUFBSyxRQUNIRixTQUFTRSxZQUFZLGtCQUFtQixnQkFVaEQsU0FEQXgzRCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsMEJBQTBCZ00sZUFHcER5WCxNQUFNM1csUUFBUW01QyxJQUNaLGtCQUNBLHFDQXlESixHQXJESW5tRCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsK0JBQzVCeWpCLE1BQU0zVyxRQUFRbTVDLElBQ1osbUJBQ0FubUQsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGdDQUtQLFNBRnJCRixLQUFLSSxTQUNGRixJQUFJLE9BQVEsK0JBQ1pnTSxlQUVIeVgsTUFBTTNXLFFBQVFtNUMsSUFDWixtQkFDQSxxQ0FJQW5tRCxLQUFLSSxTQUFTRixJQUFJLE9BQVEscUJBQzVCeWpCLE1BQU0zVyxRQUFRbTVDLElBQ1oscUJBQ0FubUQsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLHNCQUdxQyxTQUFqRUYsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLHFCQUFxQmdNLGVBRS9DeVgsTUFBTTNXLFFBQVFtNUMsSUFDWixxQkFDQSxxQ0FJQW5tRCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsc0JBQzVCeWpCLE1BQU0zVyxRQUFRbTVDLElBQ1osMkJBQ0FubUQsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLHNCQUcxQkYsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLDJCQUM1QnlqQixNQUFNM1csUUFBUW01QyxJQUNaLDBCQUNBbm1ELEtBQUtJLFNBQVNGLElBQUksT0FBUSwyQkFHMUJGLEtBQUtJLFNBQVNGLElBQUksT0FBUSw0QkFDNUJ5akIsTUFBTTNXLFFBQVFtNUMsSUFDWixpQ0FDQW5tRCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsNEJBR3pCRixLQUFLSSxTQUFTRixJQUFJLE9BQVEsNkJBQzdCeWpCLE1BQU0zVyxRQUFRbTVDLElBQUksaUJBQWtCLFFBQ3BDeGlDLE1BQU0zVyxRQUFRbTVDLElBQUksZ0NBQWlDLFNBR2pEbm1ELEtBQUtJLFNBQVNGLElBQUksT0FBUSxtQkFBb0IsQ0FDeEIsSUFBSXUzRCxTQUMxQixrQkFDQXozRCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsb0JBR3pCdzNELE9BQ0ExckQsTUFBSyxTQUFVMnJELFlBQ2R4ekQsU0FBU3l6RCxNQUFNdHpELElBQUlxekQsZUFFcEJoeUMsT0FBTSxTQUFVQyxPQUNmblcsR0FBR0MsY0FBY2tXLE1BQU1BLFVBSTdCLEdBQUk1bEIsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLHVCQUF3QixDQUNyQixJQUFJdTNELFNBQ2pDLGtCQUNBejNELEtBQUtJLFNBQVNGLElBQUksT0FBUSx1QkFDMUIsQ0FBRTIzRCxPQUFRLFNBR1RILE9BQ0ExckQsTUFBSyxTQUFVMnJELFlBQ2R4ekQsU0FBU3l6RCxNQUFNdHpELElBQUlxekQsZUFFcEJoeUMsT0FBTSxTQUFVQyxPQUNmblcsR0FBR0MsY0FBY2tXLE1BQU1BLFVBSTdCLEdBQUk1bEIsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLHVCQUF3QixDQUNwRCxNQUFNbXlCLEtBQU8sR0FBR3J5QixLQUFLSSxTQUFTRixJQUFJLE9BQVEsMkJBQ3RDbXlCLE9BQVNsVyxFQUFFLFNBQVNncUMsSUFBSSxjQUMxQmhxQyxFQUFFLFNBQVNncUMsSUFBSSxZQUFhOXpCLFNDcmUvQixNQUFNeWxDLFdBQ1huNEQsMkJBQTRCZ0csSUFBS29XLEtBQU10WSxNQUNyQyxNQUFNczBELGNBQWdCdDBELEtBQUt1MEQsUUFBUXYwRCxLQUFLdzBELGFBQWUsR0FDbERGLGdCQUlMaDhDLEtBQUs0QyxLQUFLLGNBQWM4bkMsTUFBSyxDQUFDemdDLEVBQUcrRCxNQUcvQixNQUFNbXVDLE9BQVNudUMsR0FBR3FXLGFBQWEscUJBQ3pCKzNCLHFCQUF1QnB1QyxHQUFHOVosY0FBYyx1QkFFeENtb0QsVUFBWUwsY0FBY3QwRCxLQUFLNDBELFdBQVduNEQsSUFBSWc0RCxRQWVwRCxHQWJJRSxVQUFVcjlCLFFBQVEsT0FBUSxVQUM1QjVlLEVBQUVnOEMsc0JBQXNCRyxRQUN0Qix1REFBdUR0NEQsS0FBSzRQLEtBQUtDLFNBQy9ELCtGQUlKc00sRUFBRWc4QyxzQkFBc0JHLFFBQ3RCLGdEQUFnRHQ0RCxLQUFLNFAsS0FBS0MsU0FDeEQsNEZBSzRDLGFBQWhEN1AsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLG1CQUMxQkYsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLHNCQUUxQixHQUFJazRELFVBQVVHLFdBQVksQ0FDeEIsTUFBTUMsZ0JBQWtCenVDLEdBQUc5WixjQUFjLHFCQUNuQ3dvRCxlQUFpQkQsZ0JBQWdCdm9ELGNBQWMsZUFDL0M1UCxLQUNKLElBQU0rM0QsVUFBVUcsV0FBYSxJQUFNLzNELEtBQUt1aUIsTUFBTXExQyxVQUFVRyxZQUMxRCxPQUFRLzNELEtBQUt1aUIsTUFBTXExQyxVQUFVRyxhQUMzQixLQUFLam9ELFVBQVVELGFBQWFPLE9BQzFCNG5ELGdCQUFnQm4wRCxVQUFVQyxJQUFJLFVBQzlCbTBELGVBQWU5d0MsVUFBWTNuQixLQUFLNFAsS0FBS0MsU0FBUyxlQUM5QzRvRCxlQUFlNzBELE1BQVF2RCxLQUN2QixNQUNGLEtBQUtpUSxVQUFVRCxhQUFhUSxRQUMxQjJuRCxnQkFBZ0JuMEQsVUFBVUMsSUFBSSxXQUM5Qm0wRCxlQUFlOXdDLFVBQVkzbkIsS0FBSzRQLEtBQUtDLFNBQVMsZ0JBQzlDNG9ELGVBQWU3MEQsTUFBUXZELEtBQ3ZCLE1BQ0YsS0FBS2lRLFVBQVVELGFBQWFFLFFBQzFCaW9ELGdCQUFnQm4wRCxVQUFVQyxJQUFJLG1CQUM5Qm0wRCxlQUFlOXdDLFVBQVkzbkIsS0FBSzRQLEtBQUtDLFNBQ25DLDhCQUVGNG9ELGVBQWU3MEQsTUFBUXZELEtBQ3ZCLE1BQ0YsS0FBS2lRLFVBQVVELGFBQWFJLEtBQzFCK25ELGdCQUFnQm4wRCxVQUFVQyxJQUFJLGdCQUM5Qm0wRCxlQUFlOXdDLFVBQVkzbkIsS0FBSzRQLEtBQUtDLFNBQ25DLDJCQUVGNG9ELGVBQWU3MEQsTUFBUXZELEtBQ3ZCLE1BQ0YsS0FBS2lRLFVBQVVELGFBQWFLLFFBQzFCOG5ELGdCQUFnQm4wRCxVQUFVQyxJQUFJLG1CQUM5Qm0wRCxlQUFlOXdDLFVBQVkzbkIsS0FBSzRQLEtBQUtDLFNBQ25DLDhCQUVGNG9ELGVBQWU3MEQsTUFBUXZELEtBQ3ZCLE1BQ0YsS0FBS2lRLFVBQVVELGFBQWFNLFNBQzFCNm5ELGdCQUFnQm4wRCxVQUFVQyxJQUFJLFlBQzlCbTBELGVBQWU5d0MsVUFBWTNuQixLQUFLNFAsS0FBS0MsU0FDbkMsK0JBRUY0b0QsZUFBZTcwRCxNQUFRdkQsWUFJeEIsR0FBSSszRCxVQUFVRyxXQUFhLEVBQUcsQ0FDbkMsTUFBTUcsR0FBSzN1QyxHQUFHOVosY0FBYyxlQUFlQSxjQUFjLE1BQ25EMHFCLEtBQU81USxHQUFHOVosY0FBYyxtQkFDOUJ5b0QsR0FBRzd6QyxNQUFNOHpDLFdBQWEsTUFDdEJELEdBQUc3ekMsTUFBTSt6QyxXQUFhLHNCQUN0QmorQixLQUFLOVYsTUFBTTh6QyxXQUFhLE1BQ3hCaCtCLEtBQUs5VixNQUFNK3pDLFdBQWEsc0JBRXhCN3VDLEdBQUdsRixNQUFNZzBDLE1BQVEsVUFDakI5dUMsR0FBR2xGLE1BQU1pMEMsV0FBYSxRQUN0Qi91QyxHQUFHbEYsTUFBTTh6QyxXQUFhLFVBRzFCNThDLEtBQUs0QyxLQUFLLGFBQWF5SSxPQUFNemlCLE9BQVNtekQsV0FBV2lCLGFBQWFwMEQsVUFHaEVoRiwwQkFBMkJnRixPQUN6QkEsTUFBTTBhLGlCQUNOMWEsTUFBTTh6QyxrQkFDTixNQUNNbnhCLEdBRE0zaUIsTUFBTTRpQixjQUNIbkssUUFBUSxjQUNqQndsQyxRQUFVNWlELEtBQUtvRyxPQUFPaXlELFdBQVduNEQsSUFBSW9uQixHQUFHM2pCLFFBQVFxMUQsYUFDbERwVyxFQUFFejVDLE1BQU0wYSxVQUNOKytCLEVBQUU3bkIsUUFBUSxPQUFRLGdCQUNkNm5CLEVBQUVwckIsUUFBUSxPQUFRLFVBQVUsU0FFNUJvckIsRUFBRXByQixRQUFRLE9BQVEsVUFBVSxJQUl0QyxNQUFNeWhDLGNBQWdCclcsRUFBRXo1QyxNQUFNK3ZELGlCQUFpQnRXLEVBQUU3bkIsUUFBUSxPQUFRLFdBQzdENm5CLEVBQUU3bkIsUUFBUSxPQUFRLFVBQ2hCNm5CLEVBQUUyVixXQUFhVSxTQUFTajVELEtBQUtvRyxPQUFPK3lELGNBQWN2VyxFQUFFLzJDLEdBQUlvdEQsU0FDdkRqNUQsS0FBS29HLE9BQU8reUQsY0FBY3ZXLEVBQUUvMkMsR0FBSW90RCxVQWFwQ3Y0RCxlQUFldzRELGVBQ3BCRSxLQUNBLFFBQVksS0FBSSxZQUFlLEVBQUksZUFBbUIsSUFBTyxJQUc3REEsSUFBcUIsaUJBQVJBLElBQW1CLENBQUNBLEtBQU9BLElBQ3hDLE1BQU1DLFVBQVlqcEQsS0FBS2dvRCxVQUFVdnNELEdBRzNCc3NCLFFBQVUsR0FDaEIsSUFBSyxNQUFPLENBQUV0c0IsTUFBT3V0RCxJQUFJNTBELFVBQVcsQ0FFbEMsTUFBTTR6RCxVQUFZaG9ELEtBQUtpb0QsV0FBV240RCxJQUFJMkwsSUFDdEMsSUFBS3VzRCxXQUFXdjBDLFFBQVMsT0FBTyxLQUdoQyxNQUFNeGpCLFdBQWErM0QsVUFBVWp2RCxNQUFNK3ZELGlCQUMvQmQsVUFBVXI5QixRQUFRLE9BQVEsV0FFOUI1QyxRQUFRNzJCLEtBQUssQ0FBRXNqQyxJQUFLLzRCLEdBQUkwc0QsV0FBWWw0RCxPQUV0QyxPQUFLODNCLFFBQVF6MkIsY0FHUDBPLEtBQUttaUMsd0JBQXdCLFlBQWFwYSxTQUc1Q21oQyxrQkFDSWxwRCxLQUFLa0osT0FBTyxDQUFFaWdELEtBQU1ucEQsS0FBS29wRCxNQUFNNXNCLFdBQVV2ckMsR0FBS0EsRUFBRXdLLEtBQU93dEQsY0FHeERqcEQsTUFWcUJBLEtDakp2QixNQUFNcXBELFFBQ1g5NUQsOEJBQ0V5USxLQUFLc3BELG9CQUFzQjE1RCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsdUJBQ2pEaWYsT0FBT25mLEtBQUtJLFNBQVNGLElBQUksT0FBUSx3QkFDakMsSUFFSixNQUFNeTVELFdBQWFDLGVBQ2pCNTVELEtBQUtnZixPQUFPdmIsS0FBS28yRCxRQUNqQnpwRCxLQUFLc3BELHFCQUVQdHBELEtBQUswcEQsZUFDSDk1RCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsK0JBQWlDLEdBQzdEa1EsS0FBSzJwRCxlQUFpQixHQUN0QixJQUFLLE1BQU01NUMsUUFBUW5nQixLQUFLb2dCLE9BRW5CLENBQUMsT0FBUSxTQUFTN2UsU0FDakI0ZSxLQUFLRSxTQUFTMjVDLFNBQVc3NUMsS0FBS0UsU0FBUzQ1QyxjQUV6QyxDQUFDLFFBQVMsT0FBUSxTQUFTMTRELFNBQVM0ZSxLQUFLRSxTQUFTL1UsUUFHL0M5SSxPQUFPMmxDLFVBQVVDLGVBQWV6Z0MsS0FDL0J5SSxLQUFLMnBELGVBQ0w1NUMsS0FBS0UsU0FBUzI1QyxTQUFXNzVDLEtBQUtFLFNBQVM0NUMsY0FLdEN6M0QsT0FBTzJsQyxVQUFVQyxlQUFlemdDLEtBQy9CeUksS0FBSzBwRCxlQUNMMzVDLEtBQUtFLFNBQVMyNUMsU0FBVzc1QyxLQUFLRSxTQUFTNDVDLGNBRXpDOTZDLE9BQ0UvTyxLQUFLMHBELGVBQ0gzNUMsS0FBS0UsU0FBUzI1QyxTQUFXNzVDLEtBQUtFLFNBQVM0NUMsZ0JBR3pDOTZDLE9BQ0VuZixLQUFLQyxRQUFRQyxJQUNYaWdCLEtBQUtFLFNBQVMyNUMsU0FBVzc1QyxLQUFLRSxTQUFTNDVDLGFBQ3ZDeDJELEtBQUtvMkQsV0FJWHpwRCxLQUFLMnBELGVBQ0g1NUMsS0FBS0UsU0FBUzI1QyxTQUFXNzVDLEtBQUtFLFNBQVM0NUMsYUFDckNqNkQsS0FBS0MsUUFBUUMsSUFDZmlnQixLQUFLRSxTQUFTMjVDLFNBQVc3NUMsS0FBS0UsU0FBUzQ1QyxhQUN2Q3gyRCxLQUFLbzJELFdBS1hGLFlBQWNuM0QsT0FBT0QsS0FBSzZOLEtBQUsycEQsZ0JBQWdCcjRELE9BQVMsS0FDdEQxQixLQUFLb0MsS0FBS3FoQixLQUNaLElBQUl6QixPQUFPLENBQ1RwZSxNQUFPNUQsS0FBSzRQLEtBQUtDLFNBQVMsc0JBQzFCL0QsUUFBUzlMLEtBQUs0UCxLQUFLWSxPQUMyQixJQUE1Q2hPLE9BQU9ELEtBQUs2TixLQUFLMnBELGdCQUFnQnI0RCxPQUM3Qix1QkFDQSxrQ0FDSixDQUNFbTRELFFBQVM3NUQsS0FBS2dmLE9BQU92YixLQUFLbzJELFFBQzFCNTVELFFBQ0UsV0FDQXVDLE9BQU9ELEtBQUs2TixLQUFLMnBELGdCQUNkdDNELEtBQUl5M0QsS0FBT2w2RCxLQUFLQyxRQUFRQyxJQUFJZzZELEtBQUt6MkQsS0FBS29KLE9BQ3RDOUosS0FBSyxhQUNSLGVBR05rZixRQUFTLENBQ1AzSSxPQUFRLENBQ055RixNQUFPL2UsS0FBSzRQLEtBQUtDLFNBQVMsNkJBQzFCcVMsU0FBVXhoQixTQUFZKzRELFFBQVFuZ0QsVUFFaEM2Z0QsS0FBTSxDQUNKcDdDLE1BQU8vZSxLQUFLNFAsS0FBS0MsU0FBUywrQkFHN0J3UyxRQUFPLEdBRVYsSUFBSUwsT0FBTyxDQUNUcGUsTUFBTzVELEtBQUs0UCxLQUFLQyxTQUFTLHNCQUMxQi9ELFFBQVM5TCxLQUFLNFAsS0FBS1ksT0FBTywwQkFBMkIsQ0FDbkRxcEQsUUFBUzc1RCxLQUFLZ2YsT0FBT3ZiLEtBQUtvMkQsVUFFNUI1M0MsUUFBUyxDQUNQbTRDLEdBQUksQ0FDRnI3QyxNQUFPL2UsS0FBSzRQLEtBQUtDLFNBQVMsK0JBRzdCd1MsUUFBTyxJQUtoQjFpQiw0QkFDUXlRLEtBQUtpcUQsa0JBR1ByNkQsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGVBQzVCRixLQUFLSSxTQUFTNmdCLElBQUksT0FBUSwyQkFBMkIsR0FDckRqaEIsS0FBS0ksU0FBUzZnQixJQUFJLE9BQVEsK0JBQStCLEdBQ3pEamhCLEtBQUtJLFNBQVM2Z0IsSUFBSSxPQUFRLHFCQUFxQixHQUMvQ2poQixLQUFLSSxTQUFTNmdCLElBQUksT0FBUSx3QkFBd0IsR0FDbERqaEIsS0FBS0ksU0FBUzZnQixJQUFJLE9BQVEsbUJBQW1CLEdBQzdDamhCLEtBQUtJLFNBQVM2Z0IsSUFBSSxPQUFRLDBCQUEwQixHQUNwRGpoQixLQUFLSSxTQUFTNmdCLElBQUksT0FBUSw2QkFBNkIsSUFHekQsTUFBTTdnQixTQUFXNDJCLFlBQVk1bUIsS0FBSzBwRCxnQkFBa0IsR0FBSTFwRCxLQUFLMnBELGdCQUM3RC81RCxLQUFLSSxTQUFTNmdCLElBQUksT0FBUSw2QkFBOEI3Z0IsVUFDeERKLEtBQUtJLFNBQVM2Z0IsSUFBSSxPQUFRLHNCQUF1QmpoQixLQUFLZ2YsT0FBT3ZiLEtBQUtvMkQsU0FFbEVwcUQsR0FBR0MsY0FBY3dSLEtBQUtsaEIsS0FBSzRQLEtBQUtZLE9BQU8seUJBQTBCLENBQy9EOHBELFdBQVcsSUFJZjM2RCwrQkFFRSxJQUFLLE1BQU13SixTQUFTbkosS0FBS3NNLE9BQU9zVSxTQUM5QixJQUNFLE1BQU02b0IsV0FBYXI1QixLQUFLbXFELGlCQUFpQnB4RCxNQUFNbXZCLFlBQzFDOGtCLFFBQVFDLE1BQU1tZCxjQUFjL3dCLGNBQy9CL0IsUUFBUSt5QixJQUFJLDRCQUE0QnR4RCxNQUFNMEQsY0FDeEMxRCxNQUFNbVEsT0FBT213QixXQUFZLENBQUVpeEIsY0FBYyxLQUVqRCxNQUFPejJELEtBQ1BBLElBQUlnSCxRQUFVLDBDQUEwQzlCLE1BQU0wRCxTQUFTNUksSUFBSWdILFVBQzNFd0UsR0FBR0MsY0FBY2tXLE1BQU0zaEIsSUFBSWdILFFBQVMsQ0FBRXF2RCxXQUFXLElBQ2pENXlCLFFBQVE5aEIsTUFBTTNoQixLQUtsQixJQUFLLE1BQU02TSxRQUFROVEsS0FBS2dSLE1BQU00UCxTQUM1QixJQUNFLE1BQU02b0IsV0FBYWd3QixRQUFRa0IsZ0JBQWdCN3BELEtBQUt3bkIsWUFDM0M4a0IsUUFBUUMsTUFBTW1kLGNBQWMvd0IsY0FDL0IvQixRQUFRK3lCLElBQUksMkJBQTJCM3BELEtBQUtqRSxjQUN0Q2lFLEtBQUt3SSxPQUFPbXdCLFdBQVksQ0FBRWl4QixjQUFjLEtBRWhELE1BQU96MkQsS0FDUEEsSUFBSWdILFFBQVUseUNBQXlDNkYsS0FBS2pFLFNBQVM1SSxJQUFJZ0gsVUFDekV3RSxHQUFHQyxjQUFja1csTUFBTTNoQixJQUFJZ0gsUUFBUyxDQUFFcXZELFdBQVcsSUFDakQ1eUIsUUFBUTloQixNQUFNM2hCLEtBS2xCLElBQUssTUFBTTIyRCxTQUFTNTZELEtBQUttbUMsT0FBT3ZsQixTQUM5QixJQUNFLE1BQU02b0IsV0FBYWd3QixRQUFRb0IsaUJBQWlCRCxNQUFNdGlDLFlBQzdDOGtCLFFBQVFDLE1BQU1tZCxjQUFjL3dCLGNBQy9CL0IsUUFBUSt5QixJQUFJLDRCQUE0QkcsTUFBTS90RCxjQUN4Qyt0RCxNQUFNdGhELE9BQU9td0IsV0FBWSxDQUFFaXhCLGNBQWMsS0FFakQsTUFBT3oyRCxLQUNQQSxJQUFJZ0gsUUFBVSwwQ0FBMEMydkQsTUFBTS90RCxTQUFTNUksSUFBSWdILFVBQzNFd0UsR0FBR0MsY0FBY2tXLE1BQU0zaEIsSUFBSWdILFFBQVMsQ0FBRXF2RCxXQUFXLElBQ2pENXlCLFFBQVE5aEIsTUFBTTNoQixLQUtsQixJQUFLLE1BQU15YyxTQUFTMWdCLEtBQUsyZ0IsT0FBT0MsU0FDOUIsSUFDRSxNQUFNNm9CLFdBQWFnd0IsUUFBUXFCLGlCQUFpQnA2QyxNQUFNNFgsWUFDN0M4a0IsUUFBUUMsTUFBTW1kLGNBQWMvd0IsY0FDL0IvQixRQUFRK3lCLElBQUksNEJBQTRCLzVDLE1BQU03VCxjQUN4QzZULE1BQU1wSCxPQUFPbXdCLFdBQVksQ0FBRWl4QixjQUFjLEtBRWpELE1BQU96MkQsS0FDUEEsSUFBSWdILFFBQVUsMENBQTBDeVYsTUFBTTdULFNBQVM1SSxJQUFJZ0gsVUFDM0V3RSxHQUFHQyxjQUFja1csTUFBTTNoQixJQUFJZ0gsUUFBUyxDQUFFcXZELFdBQVcsSUFDakQ1eUIsUUFBUTloQixNQUFNM2hCLEtBS2xCLElBQUssTUFBTTJJLFNBQVM1TSxLQUFLaU8sT0FDdkIsSUFDRSxNQUFNdzdCLFdBQWFnd0IsUUFBUXNCLGlCQUFpQm51RCxNQUFNbkosTUFDN0MyNUMsUUFBUUMsTUFBTW1kLGNBQWMvd0IsY0FDL0IvQixRQUFRK3lCLElBQUksNEJBQTRCN3RELE1BQU1DLGNBQ3hDRCxNQUFNME0sT0FBT213QixXQUFZLENBQUVpeEIsY0FBYyxLQUVqRDl0RCxNQUFNTCxPQUFPdVYsU0FBUXpnQixHQUFNQSxFQUFFcTFCLE9BQVMsT0FDdEMsTUFBT3p5QixLQUNQQSxJQUFJZ0gsUUFBVSwwQ0FBMEMyQixNQUFNQyxTQUFTNUksSUFBSWdILFVBQzNFd0UsR0FBR0MsY0FBY2tXLE1BQU0zaEIsSUFBSWdILFFBQVMsQ0FBRXF2RCxXQUFXLElBQ2pENXlCLFFBQVE5aEIsTUFBTTNoQixLQUtsQixJQUFLLE1BQU1rYyxRQUFRbmdCLEtBQUtvZ0IsTUFFcUMsVUFBeERELEtBQUtFLFNBQVMyNUMsU0FBVzc1QyxLQUFLRSxTQUFTNDVDLGNBQ3hDLENBQUMsUUFBUyxPQUFRLFFBQVMsWUFBYSxTQUFTMTRELFNBQy9DNGUsS0FBS0UsU0FBUy9VLGFBR1ZtdUQsUUFBUXVCLHNCQUFzQjc2QyxNQUsxQ3hnQix3QkFBeUJ3SixPQUN2QixNQUFNc2dDLFdBQWEsR0FXbkIsR0FSQWd3QixRQUFRd0IsNkJBQTZCOXhELE1BQU9zZ0MsWUFDNUNnd0IsUUFBUXlCLHFCQUFxQi94RCxNQUFPc2dDLFlBQ3BDZ3dCLFFBQVEwQix5QkFBeUJoeUQsTUFBT3NnQyxZQUN4Q2d3QixRQUFRMkIseUJBQXlCanlELE1BQU9zZ0MsWUFDeENnd0IsUUFBUTRCLGdDQUFnQ2x5RCxNQUFPc2dDLFlBQy9DZ3dCLFFBQVE2Qiw0QkFBNEJueUQsTUFBT3NnQyxZQUd2Q3RnQyxNQUFNNkgsTUFBTyxDQUNmLE1BQU1BLE1BQVE3SCxNQUFNNkgsTUFBTWtyQyxRQUFPLENBQUNxZixJQUFLdjFDLEtBQ3JDLE1BQU13MUMsU0FDSngxQyxhQUFhOWtCLE9BQU9vNUMsS0FBS21oQixjQUFnQnoxQyxFQUFFc1MsV0FBYXRTLEVBQ3BEMDFDLFdBQWFqQyxRQUFRa0IsZ0JBQWdCYSxVQUszQyxPQUpLcGUsUUFBUUMsTUFBTW1kLGNBQWNrQixjQUMvQkEsV0FBVzkyQixJQUFNNDJCLFNBQVM1MkIsSUFDMUIyMkIsSUFBSWo2RCxLQUFLazNCLGFBQWFrakMsY0FFakJILE1BQ04sSUFDQ3ZxRCxNQUFNdFAsT0FBUyxJQUNqQituQyxXQUFXejRCLE1BQVFBLE9BSXZCLE9BQU95NEIsV0FHVDlwQyxtQ0FBb0N3Z0IsTUFDbEMsTUFBTXc3QyxhQUFleDdDLEtBQUtFLFNBQVMvVSxLQUNuQyxJQUNHLENBQUMsUUFBUyxPQUFRLFFBQVMsWUFBYSxTQUFTL0osU0FBU282RCxjQUUzRCxPQUlGLE1BQU1DLFVBQVl6N0MsS0FBS3F1QixhQUNqQnJ1QixLQUFLMDdDLFVBQVUsQ0FBRXJ0QixRQUFRLElBRS9CLFVBQ1FydUIsS0FBSzI3QyxVQUNYLE1BQU83M0QsTUFHVCxNQUFNODNELGdCQUFrQjU3QyxLQUFLNjdDLGVBRzdCLElBQUssTUFBTUMsT0FBT0YsVUFBVyxDQUMzQixJQUFJdHlCLFdBQWEsR0FDakIsSUFDRSxPQUFRa3lCLGNBQ04sSUFBSyxRQUNIbHlCLFdBQWFnd0IsUUFBUWMsaUJBQWlCMEIsSUFBSTNqQyxZQUMxQyxNQUNGLElBQUssT0FDSG1SLFdBQWFnd0IsUUFBUWtCLGdCQUFnQnNCLElBQUkzakMsWUFDekMsTUFDRixJQUFLLFFBQ0htUixXQUFhZ3dCLFFBQVFxQixpQkFBaUJtQixJQUFJM2pDLFlBQzFDLE1BQ0YsSUFBSyxZQUNIbVIsV0FBYWd3QixRQUFRb0IsaUJBQWlCb0IsSUFBSTNqQyxZQUMxQyxNQUNGLElBQUssUUFDSG1SLFdBQWFnd0IsUUFBUXNCLGlCQUFpQmtCLElBQUl4NEQsTUFJekMyNUMsUUFBUUMsTUFBTW1kLGNBQWMvd0IsY0FDL0IvQixRQUFRK3lCLElBQ04sWUFBWWtCLHlCQUF5Qk0sSUFBSXB2RCxzQkFBc0JzVCxLQUFLMGEsb0JBRWhFb2hDLElBQUkzaUQsT0FBT213QixhQUVuQixNQUFPeGxDLEtBQ1BBLElBQUlnSCxRQUFVLDZDQUE2Q2d4RCxJQUFJcHZELGdCQUFnQnNULEtBQUswYSxlQUFlNTJCLElBQUlnSCxVQUN2R3dFLEdBQUdDLGNBQWNrVyxNQUFNM2hCLElBQUlnSCxRQUFTLENBQUVxdkQsV0FBVyxJQUNqRDV5QixRQUFROWhCLE1BQU0zaEIsWUFLWmtjLEtBQUswN0MsVUFBVSxDQUFFcnRCLE9BQVFvdEIsWUFHakNqOEQsdUJBQXdCbVIsTUFDdEIsTUFBTTI0QixXQUFhLEdBYW5CLE9BVkFnd0IsUUFBUXlDLHVCQUF1QnByRCxLQUFNMjRCLFlBQ3JDZ3dCLFFBQVEwQyxvQkFBb0JyckQsS0FBTTI0QixZQUNsQ2d3QixRQUFRMkMsMEJBQTBCdHJELEtBQU0yNEIsWUFDeENnd0IsUUFBUTRDLHdCQUF3QnZyRCxLQUFNMjRCLFlBQ3RDZ3dCLFFBQVE2QywyQkFBMkJ4ckQsS0FBTTI0QixZQUN6Q2d3QixRQUFROEMsNkJBQTZCenJELEtBQU0yNEIsWUFDM0Nnd0IsUUFBUStDLHNCQUFzQjFyRCxLQUFNMjRCLFlBQ3BDZ3dCLFFBQVFnRCxnQkFBZ0IzckQsS0FBTTI0QixZQUM5Qmd3QixRQUFRaUQsc0JBQXNCNXJELEtBQU0yNEIsWUFFN0JBLFdBR1Q5cEMsd0JBQXlCaTdELE9BQ3ZCLE1BQU1ueEIsV0FBYSxHQUtuQixPQUZBZ3dCLFFBQVFrRCxxQkFBcUIvQixNQUFPbnhCLFlBRTdCQSxXQUdUOXBDLHdCQUF5Qmk3RCxPQUN2QixNQUFNbnhCLFdBQWEsR0FLbkIsT0FGQWd3QixRQUFRbUQscUJBQXFCaEMsTUFBT254QixZQUU3QkEsV0FHVDlwQyx3QkFBeUJpTixPQWdDdkIsTUFBTyxDQUFFTCxPQS9CTUssTUFBTUwsT0FBTzlKLEtBQUlrSyxRQUM5QixNQUFNdEwsRUFBSXNMLE1BQU0yckIsV0FDVm1SLFdBQWEsR0FLbkIsR0FKQWd3QixRQUFRb0QscUJBQXFCeDdELEVBQUdvb0MsWUFDNUJqbkMsT0FBT0QsS0FBS2tuQyxZQUFZL25DLFFBQzFCMDdDLFFBQVFDLE1BQU1ybUIsWUFBWTMxQixFQUFHb29DLGFBRTFCcG9DLEVBQUVtUyxTQUFXblMsRUFBRStqQyxVQUNsQi9qQyxFQUFFd21ELFVBQVksUUFDVCxHQUFLN25ELEtBQUtzTSxPQUFPd3dELElBQUl6N0QsRUFBRW1TLFVBR3ZCLElBQUtuUyxFQUFFK2pDLFVBQVcsQ0FDdkIsTUFBTXlpQixVQUFZekssUUFBUUMsTUFBTWh2QyxVQUFVaE4sRUFBRXdtRCxXQUM1Q0EsVUFBVXY4QyxLQUFPcUIsTUFBTXhELE9BQU9tQyxLQUM5QixNQUFNZ08sT0FBU21nRCxRQUFRYyxpQkFBaUIxUyxXQUN2QyxDQUFDLFFBQVMsV0FBVy9sQyxTQUFRMG1CLGVBQzVCLElBQUtsdkIsT0FBT2t2QixlQUFlOW1DLE9BQ3pCLE9BRUYsTUFBTXkyQixRQUFVLElBQUl5dEIsSUFBSXRzQyxPQUFPa3ZCLGNBQWMvbEMsS0FBSWlmLEdBQUssQ0FBQ0EsRUFBRWtqQixJQUFLbGpCLE1BQzlEcmdCLEVBQUV3bUQsVUFBVXJmLGNBQWMxbUIsU0FBUWk3QyxXQUNoQyxNQUFNempELE9BQVM2ZSxRQUFRajRCLElBQUk2OEQsU0FBU240QixLQUNoQ3RyQixRQUFRMGQsWUFBWStsQyxTQUFVempELGtCQUU3QkEsT0FBT2t2QixpQkFFaEJ4UixZQUFZMzFCLEVBQUV3bUQsVUFBV3Z1QyxjQWpCekJqWSxFQUFFbVMsUUFBVSxLQUNablMsRUFBRXdtRCxVQUFZLEdBa0JoQixPQUFPeG1ELE1BS1gxQiwrQkFBZ0NtUixLQUFNMjRCLFlBNkJwQyxNQTNCRSxDQUNFLFlBQ0EsUUFDQSxPQUNBLGFBQ0EsUUFDQSxRQUNBLFFBQ0EsU0FDQSxTQUNBLFVBQ0Fsb0MsU0FBU3VQLEtBQUt4RixRQUVxQixpQkFBMUJ3RixLQUFLck4sS0FBS3dpQyxZQUNuQndELFdBQVcsb0JBQXNCLENBQy9CbDhCLE1BQU91RCxLQUFLck4sS0FBS3dpQyxZQUNqQisyQixPQUFRLFNBRWdDLElBQTFCbHNELEtBQUtyTixLQUFLd2lDLFlBQzFCd0QsV0FBVyxvQkFBc0IsQ0FDL0JsOEIsTUFBTyxHQUNQeXZELE9BQVEsU0FFdUMsSUFBakNsc0QsS0FBS3JOLEtBQUt3aUMsWUFBWSsyQixTQUN0Q3Z6QixXQUFXLDJCQUE2QixLQUdyQ0EsV0FHVDlwQyw4QkFBK0JtUixLQUFNMjRCLFlBTW5DLE1BTGtCLFVBQWQzNEIsS0FBS3hGLFdBQzBDLElBQXRDd0YsS0FBS3JOLEtBQUsyVixhQUFhQyxhQUNoQ293QixXQUFXLCtCQUFpQyxHQUd6Q0EsV0FHVDlwQywyQkFBNEJtUixLQUFNMjRCLFlBQ2hDLElBQUltVyxNQUFRemdDLE9BQU9yTyxLQUFLdkMsS0FBS2lQLE1BQU0sdUNBSW5DLEdBSGMsT0FBVm9pQyxRQUNGblcsV0FBV2w3QixJQUFNLDZCQUErQnF4QyxNQUFNLElBRXRDLFVBQWQ5dUMsS0FBS3hGLEtBQ1AsSUFBSyxNQUFPL0csRUFBRzdCLEtBQU1GLE9BQU9nQyxRQUFRc00sS0FBS3JOLEtBQUt1TixPQUM1QzR1QyxNQUFRemdDLE9BQU96YyxFQUFFNkwsS0FBS2lQLE1BQU0sdUNBQ2QsT0FBVm9pQyxhQUNzQyxJQUE3Qm5XLFdBQVcsZ0JBQ3BCQSxXQUFXLGNBQWdCMzRCLEtBQUtyTixLQUFLdU4sT0FFdkN5NEIsV0FBVyxjQUFjbGxDLEdBQUdnSyxJQUMxQiw2QkFBK0JxeEMsTUFBTSxTQUd0QyxHQUFrQixlQUFkOXVDLEtBQUt4RixLQUF1QixDQUNyQyxJQUFLLE1BQU8vRyxFQUFHN0IsS0FBTUYsT0FBT2dDLFFBQVFzTSxLQUFLck4sS0FBSzZSLFFBQzVDc3FDLE1BQVF6Z0MsT0FBT3pjLEVBQUU2TCxLQUFLaVAsTUFBTSx1Q0FDZCxPQUFWb2lDLGFBQ3VDLElBQTlCblcsV0FBVyxpQkFDcEJBLFdBQVcsZUFBaUIzNEIsS0FBS3JOLEtBQUs2UixRQUV4Q20wQixXQUFXLGVBQWVsbEMsR0FBR2dLLElBQzNCLDZCQUErQnF4QyxNQUFNLElBRzNDLElBQUssTUFBT3FkLEVBQUdDLEtBQU0xNkQsT0FBT2dDLFFBQVFzTSxLQUFLck4sS0FBS1QsUUFDNUMsSUFBSyxNQUFPdUIsRUFBRzdCLEtBQU1GLE9BQU9nQyxRQUFRMDRELEVBQUU1bkQsUUFDcENzcUMsTUFBUXpnQyxPQUFPemMsRUFBRTZMLEtBQUtpUCxNQUFNLHVDQUNkLE9BQVZvaUMsYUFDdUMsSUFBOUJuVyxXQUFXLGlCQUNwQkEsV0FBVyxlQUFpQjM0QixLQUFLck4sS0FBS1QsUUFFeEN5bUMsV0FBVyxlQUFld3pCLEdBQUczbkQsT0FBTy9RLEdBQUdnSyxJQUNyQyw2QkFBK0JxeEMsTUFBTSxTQUl4QyxHQUFrQixTQUFkOXVDLEtBQUt4RixLQUNkLElBQUssTUFBTy9HLEVBQUc3QixLQUFNRixPQUFPZ0MsUUFBUXNNLEtBQUtyTixLQUFLMDVELFFBQzVDdmQsTUFBUXpnQyxPQUFPemMsRUFBRTZMLEtBQUtpUCxNQUFNLHVDQUNkLE9BQVZvaUMsYUFDdUMsSUFBOUJuVyxXQUFXLGlCQUNwQkEsV0FBVyxlQUFpQjM0QixLQUFLck4sS0FBSzA1RCxRQUV4QzF6QixXQUFXLGVBQWVsbEMsR0FBR2dLLElBQzNCLDZCQUErQnF4QyxNQUFNLFNBR3RDLEdBQWtCLGNBQWQ5dUMsS0FBS3hGLEtBQ2QsSUFBSyxNQUFPL0csRUFBRzdCLEtBQU1GLE9BQU9nQyxRQUFRc00sS0FBS3JOLEtBQUs2UixRQUM1Q3NxQyxNQUFRemdDLE9BQU96YyxFQUFFNkwsS0FBS2lQLE1BQU0sdUNBQ2QsT0FBVm9pQyxhQUN1QyxJQUE5Qm5XLFdBQVcsaUJBQ3BCQSxXQUFXLGVBQWlCMzRCLEtBQUtyTixLQUFLNlIsUUFFeENtMEIsV0FBVyxlQUFlbGxDLEdBQUdnSyxJQUMzQiw2QkFBK0JxeEMsTUFBTSxJQUk3QyxPQUFPblcsV0FHVDlwQyxrQ0FBbUNtUixLQUFNMjRCLFlBQ3JCLFVBQWQzNEIsS0FBS3hGLFdBQThDLElBQW5Cd0YsS0FBS3JOLEtBQUsyNUQsT0FDNUMzekIsV0FBVyxvQkFBc0IzNEIsS0FBS3JOLEtBQUs0NUQsYUFBZSxHQUMxRDV6QixXQUFXLHdCQUEwQjM0QixLQUFLck4sS0FBSzI1RCxLQUFLdjZDLElBQU0sRUFDMUQ0bUIsV0FBVywwQkFBNEIzNEIsS0FBS3JOLEtBQUsyNUQsS0FBS242QyxJQUFNLEVBQzVEd21CLFdBQVcscUJBQXVCMzRCLEtBQUtyTixLQUFLMjVELEtBQUszaUQsS0FBTyxFQUN4RGd2QixXQUFXLG9CQUFzQjM0QixLQUFLck4sS0FBSzI1RCxLQUFLdjNELEtBQU8sRUFDdkQ0akMsV0FBVyxxQkFBdUIsR0FFbENBLFdBQVcsZUFBaUIsS0FDNUJBLFdBQVcsbUNBQXFDLEtBQ2hEQSxXQUFXLDRCQUE4QixNQVc3QzlwQyxpQ0FBa0NtUixLQUFNMjRCLFlBMkN0QyxNQTFDa0IsU0FBZDM0QixLQUFLeEYsV0FFMkMsSUFBdkN3RixLQUFLck4sS0FBS3dpQyxZQUFZcTNCLGVBRS9CN3pCLFdBQVcsZUFBaUIzNEIsS0FBS3JOLEtBQUs4NUQsUUFBVSxHQUNoRDl6QixXQUFXLGFBQWUzNEIsS0FBS3JOLEtBQUsrNUQsTUFBUSxHQUM1Qy96QixXQUFXLGlCQUFtQjM0QixLQUFLck4sS0FBS2c2RCxVQUFZLEdBRXBEaDBCLFdBQVcsbUJBQXFCMzRCLEtBQUtyTixLQUFLcVcsU0FBVyxFQUNyRDJ2QixXQUFXLHFCQUF1QjM3QixPQUFPZ0QsS0FBS3JOLEtBQUtpNkQsZUFBaUIsRUFFcEVqMEIsV0FBVyxnQkFBa0IzNEIsS0FBS3JOLEtBQUt3aUMsWUFBWXEzQixhQUNuRDd6QixXQUFXLDJCQUE2QjM0QixLQUFLck4sS0FBS3dpQyxZQUFZMDNCLE1BRTlEbDBCLFdBQVcsd0JBQTBCLFVBQ3JDQSxXQUFXLG9CQUFzQixFQUNqQ0EsV0FBVyx3QkFBeUIsRUFDcENBLFdBQVcsb0JBQXNCLEdBRWpDQSxXQUFXLG9DQUNUMzdCLE9BQU9nRCxLQUFLck4sS0FBS202RCxLQUFLcHdCLGNBQWNxd0IsTUFBUSxFQUM5Q3AwQixXQUFXLGtDQUNUMzdCLE9BQU9nRCxLQUFLck4sS0FBS202RCxLQUFLcHdCLGNBQWNzd0IsTUFBUSxFQUM5Q3IwQixXQUFXLHFCQUF1QjM3QixPQUFPZ0QsS0FBS3JOLEtBQUttNkQsS0FBS3gxRCxTQUFXLEVBQ25FcWhDLFdBQVcscUJBQXVCLEdBRWxDQSxXQUFXLGNBQWdCLENBQ3pCczBCLFVBQVdqd0QsT0FBT2dELEtBQUtyTixLQUFLdTZELGlCQUFtQixFQUMvQ0MsU0FBVSxFQUNWQyxNQUFPLGNBR1R6MEIsV0FBVyxrQkFBb0IsS0FDL0JBLFdBQVcseUJBQTJCLEtBQ3RDQSxXQUFXLGVBQWlCLEtBQzVCQSxXQUFXLG1DQUFxQyxLQUNoREEsV0FBVyw0QkFBOEIsS0FDekNBLFdBQVcsc0JBQXdCLEtBQ25DQSxXQUFXLHFCQUF1QixLQUNsQ0EsV0FBVyxnQkFBa0IsTUFHMUJBLFdBR1Q5cEMsNkJBQThCbVIsS0FBTTI0QixZQUNoQixTQUFkMzRCLEtBQUt4RixXQUVnQyxJQUE5QndGLEtBQUtyTixLQUFLMDZELE1BQU1KLGdCQUNVLElBQTFCanRELEtBQUtyTixLQUFLMDZELE1BQU1ELFFBRXZCejBCLFdBQVcsb0JBQXNCLGNBS3ZDOXBDLG9DQUFxQ21SLEtBQU0yNEIsWUFDdkIsVUFBZDM0QixLQUFLeEYsTUFBa0MsU0FBZHdGLEtBQUt4RixZQUNELElBQXBCd0YsS0FBS3JOLEtBQUtrNkQsYUFDeUIsSUFBakM3c0QsS0FBS3JOLEtBQUt3aUMsWUFBWSsyQixPQUMvQnZ6QixXQUFXLDJCQUNUMzRCLEtBQUtyTixLQUFLd2lDLFlBQVkrMkIsT0FBU2xzRCxLQUFLck4sS0FBS2s2RCxNQUUzQ2wwQixXQUFXLDJCQUE2QjM0QixLQUFLck4sS0FBS2s2RCxNQUVwRGwwQixXQUFXLGdCQUFrQixXQUVNLElBQTFCMzRCLEtBQUtyTixLQUFLMjZELG1CQUNrQyxJQUExQzMwQixXQUFXLDJCQUNwQkEsV0FBVywyQkFDVDM0QixLQUFLck4sS0FBSzI2RCxZQUFjMzBCLFdBQVcsMkJBRXJDQSxXQUFXLDJCQUE2QjM0QixLQUFLck4sS0FBSzI2RCxZQUVwRDMwQixXQUFXLHNCQUF3QixPQUt6QzlwQyx1QkFBd0JtUixLQUFNMjRCLFlBQzVCLEdBQ2dCLFVBQWQzNEIsS0FBS3hGLFdBQzJCLElBQXhCd0YsS0FBS3JOLEtBQUttK0IsV0FBcUQsS0FBeEI5d0IsS0FBS3JOLEtBQUttK0IsV0FnQnBELEdBQWtCLFVBQWQ5d0IsS0FBS3hGLE1BQ2QsSUFBSyxNQUFPL0csRUFBRzdCLEtBQU1GLE9BQU9nQyxRQUFRc00sS0FBS3JOLEtBQUt1TixPQUM1QyxHQUNhLFVBQVh0TyxFQUFFNEksWUFDMkIsSUFBckI1SSxFQUFFZSxLQUFLbStCLFdBQWtELEtBQXJCbC9CLEVBQUVlLEtBQUttK0IsV0FDbkQsTUFDd0MsSUFBN0I2SCxXQUFXLGdCQUNwQkEsV0FBVyxjQUFnQjM0QixLQUFLck4sS0FBS3VOLE9BRXZDeTRCLFdBQVcsY0FBY2xsQyxHQUFHc0ksS0FBT25LLEVBQUVtSyxLQUNJLFVBQXJDNDhCLFdBQVcsY0FBY2xsQyxHQUFHc0ksT0FDOUI0OEIsV0FBVyxjQUFjbGxDLEdBQUdzSSxLQUFPLFFBRXJDLE1BQU0rNUIsTUFBUXBtQixTQUFTcW1CLGlCQUNyQjRDLFdBQVcsY0FBY2xsQyxHQUFHc0ksS0FDWSxpQkFBakNuSyxFQUFFZSxLQUFLK21CLGdCQUFnQjR0QixNQUMxQjExQyxFQUFFZSxLQUFLK21CLGVBQWU0dEIsTUFDdEIxMUMsRUFBRWUsS0FBSyttQixnQkFFYmlmLFdBQVcsY0FBY2xsQyxHQUFHc0ksS0FBTys1QixNQUFNLzVCLEtBQ3pDNDhCLFdBQVcsY0FBY2xsQyxHQUFHZCxLQUFLbStCLFVBQVlnRixNQUFNaEYsVUFDbkQ2SCxXQUFXLGNBQWNsbEMsR0FBR2QsS0FBSyttQixlQUFpQm9jLE1BQU1wYyxxQkFHdkQsR0FBa0IsZUFBZDFaLEtBQUt4RixLQUF1QixDQUNyQyxJQUFLLE1BQU8vRyxFQUFHN0IsS0FBTUYsT0FBT2dDLFFBQVFzTSxLQUFLck4sS0FBSzZSLFFBQzVDLEdBQ2EsVUFBWDVTLEVBQUU0SSxZQUMyQixJQUFyQjVJLEVBQUVlLEtBQUttK0IsV0FBa0QsS0FBckJsL0IsRUFBRWUsS0FBS20rQixXQUNuRCxNQUN5QyxJQUE5QjZILFdBQVcsaUJBQ3BCQSxXQUFXLGVBQWlCMzRCLEtBQUtyTixLQUFLNlIsUUFFeENtMEIsV0FBVyxlQUFlbGxDLEdBQUdzSSxLQUFPbkssRUFBRW1LLEtBQ0ksVUFBdEM0OEIsV0FBVyxlQUFlbGxDLEdBQUdzSSxPQUMvQjQ4QixXQUFXLGVBQWVsbEMsR0FBR3NJLEtBQU8sUUFFdEMsTUFBTSs1QixNQUFRcG1CLFNBQVNxbUIsaUJBQ3JCNEMsV0FBVyxlQUFlbGxDLEdBQUdzSSxLQUNXLGlCQUFqQ25LLEVBQUVlLEtBQUsrbUIsZ0JBQWdCNHRCLE1BQzFCMTFDLEVBQUVlLEtBQUsrbUIsZUFBZTR0QixNQUN0QjExQyxFQUFFZSxLQUFLK21CLGdCQUViaWYsV0FBVyxlQUFlbGxDLEdBQUdzSSxLQUFPKzVCLE1BQU0vNUIsS0FDMUM0OEIsV0FBVyxlQUFlbGxDLEdBQUdkLEtBQUttK0IsVUFBWWdGLE1BQU1oRixVQUNwRDZILFdBQVcsZUFBZWxsQyxHQUFHZCxLQUFLK21CLGVBQ2hDb2MsTUFBTXBjLGVBR1osSUFBSyxNQUFPeXlDLEVBQUdDLEtBQU0xNkQsT0FBT2dDLFFBQVFzTSxLQUFLck4sS0FBS1QsUUFDNUMsSUFBSyxNQUFPdUIsRUFBRzdCLEtBQU1GLE9BQU9nQyxRQUFRMDRELEVBQUU1bkQsUUFDcEMsR0FDYSxVQUFYNVMsRUFBRTRJLFlBQzJCLElBQXJCNUksRUFBRWUsS0FBS20rQixXQUFrRCxLQUFyQmwvQixFQUFFZSxLQUFLbStCLFdBQ25ELE1BQ3lDLElBQTlCNkgsV0FBVyxpQkFDcEJBLFdBQVcsZUFBaUIzNEIsS0FBS3JOLEtBQUtULFFBRXhDeW1DLFdBQVcsZUFBZXd6QixHQUFHM25ELE9BQU8vUSxHQUFHc0ksS0FBT25LLEVBQUVtSyxLQUNJLFVBQWhENDhCLFdBQVcsZUFBZXd6QixHQUFHM25ELE9BQU8vUSxHQUFHc0ksT0FDekM0OEIsV0FBVyxlQUFld3pCLEdBQUczbkQsT0FBTy9RLEdBQUdzSSxLQUFPLFFBRWhELE1BQU0rNUIsTUFBUXBtQixTQUFTcW1CLGlCQUNyQjRDLFdBQVcsZUFBZXd6QixHQUFHM25ELE9BQU8vUSxHQUFHc0ksS0FDQyxpQkFBakNuSyxFQUFFZSxLQUFLK21CLGdCQUFnQjR0QixNQUMxQjExQyxFQUFFZSxLQUFLK21CLGVBQWU0dEIsTUFDdEIxMUMsRUFBRWUsS0FBSyttQixnQkFFYmlmLFdBQVcsZUFBZXd6QixHQUFHM25ELE9BQU8vUSxHQUFHc0ksS0FBTys1QixNQUFNLzVCLEtBQ3BENDhCLFdBQVcsZUFBZXd6QixHQUFHM25ELE9BQU8vUSxHQUFHZCxLQUFLbStCLFVBQzFDZ0YsTUFBTWhGLFVBQ1I2SCxXQUFXLGVBQWV3ekIsR0FBRzNuRCxPQUFPL1EsR0FBR2QsS0FBSyttQixlQUMxQ29jLE1BQU1wYyxxQkFJVCxHQUFrQixjQUFkMVosS0FBS3hGLEtBQ2QsSUFBSyxNQUFPL0csRUFBRzdCLEtBQU1GLE9BQU9nQyxRQUFRc00sS0FBS3JOLEtBQUs2UixRQUM1QyxHQUNhLFVBQVg1UyxFQUFFNEksWUFDMkIsSUFBckI1SSxFQUFFZSxLQUFLbStCLFdBQWtELEtBQXJCbC9CLEVBQUVlLEtBQUttK0IsV0FDbkQsTUFDeUMsSUFBOUI2SCxXQUFXLGlCQUNwQkEsV0FBVyxlQUFpQjM0QixLQUFLck4sS0FBSzZSLFFBRXhDbTBCLFdBQVcsZUFBZWxsQyxHQUFHc0ksS0FBT25LLEVBQUVtSyxLQUNJLFVBQXRDNDhCLFdBQVcsZUFBZWxsQyxHQUFHc0ksT0FDL0I0OEIsV0FBVyxlQUFlbGxDLEdBQUdzSSxLQUFPLFFBRXRDLE1BQU0rNUIsTUFBUXBtQixTQUFTcW1CLGlCQUNyQjRDLFdBQVcsZUFBZWxsQyxHQUFHc0ksS0FDVyxpQkFBakNuSyxFQUFFZSxLQUFLK21CLGdCQUFnQjR0QixNQUMxQjExQyxFQUFFZSxLQUFLK21CLGVBQWU0dEIsTUFDdEIxMUMsRUFBRWUsS0FBSyttQixnQkFFYmlmLFdBQVcsZUFBZWxsQyxHQUFHc0ksS0FBTys1QixNQUFNLzVCLEtBQzFDNDhCLFdBQVcsZUFBZWxsQyxHQUFHZCxLQUFLbStCLFVBQVlnRixNQUFNaEYsVUFDcEQ2SCxXQUFXLGVBQWVsbEMsR0FBR2QsS0FBSyttQixlQUNoQ29jLE1BQU1wYyxvQkFqSFosQ0FDQWlmLFdBQVc1OEIsS0FBT2lFLEtBQUtqRSxLQUVDLFVBQXBCNDhCLFdBQVc1OEIsT0FDYjQ4QixXQUFXNThCLEtBQU8sUUFFcEIsTUFBTSs1QixNQUFRcG1CLFNBQVNxbUIsaUJBQ3JCNEMsV0FBVzU4QixLQUNnQyxpQkFBcENpRSxLQUFLck4sS0FBSyttQixnQkFBZ0I0dEIsTUFDN0J0bkMsS0FBS3JOLEtBQUsrbUIsZUFBZTR0QixNQUN6QnRuQyxLQUFLck4sS0FBSyttQixnQkFFaEJpZixXQUFXNThCLEtBQU8rNUIsTUFBTS81QixLQUN4QjQ4QixXQUFXLGtCQUFvQjdDLE1BQU1oRixVQUNyQzZILFdBQVcsdUJBQXlCN0MsTUFBTXBjLGdCQXlHOUM3cUIsNkJBQThCbVIsS0FBTTI0QixZQUNsQyxHQUFrQixVQUFkMzRCLEtBQUt4RixLQUNQLElBQUssTUFBT2xJLElBQUttSyxTQUFVL0ssT0FBT2dDLFFBQVFzTSxLQUFLck4sS0FBS3NCLFdBQ3BCLElBQW5Cd0ksTUFBTXlFLFdBQ2Z5M0IsV0FBVyxhQUFlcm1DLEtBQU9tSyxNQUFNeUUsVUFNL0NyUyw0QkFBNkJ3SixNQUFPc2dDLFlBQ2xDLElBQUltVyxNQUFRemdDLE9BQU9oVyxNQUFNb0YsS0FBS2lQLE1BQU0sdUNBZXBDLEdBZGMsT0FBVm9pQyxRQUNGblcsV0FBV2w3QixJQUFNLDZCQUErQnF4QyxNQUFNLFNBRy9CLElBQWhCejJDLE1BQU13RCxZQUNjLElBQXBCeEQsTUFBTXdELE1BQU00QixNQUVuQnF4QyxNQUFRemdDLE9BQU9oVyxNQUFNd0QsTUFBTTRCLEtBQUtpUCxNQUM5Qix1Q0FFWSxPQUFWb2lDLFFBQ0ZuVyxXQUFXLGFBQWUsNkJBQStCbVcsTUFBTSxVQUd0QyxJQUFsQnoyQyxNQUFNeW9DLFFBQ2YsSUFBSyxNQUFPcnRDLEVBQUc3QixLQUFNRixPQUFPZ0MsUUFBUTJFLE1BQU15b0MsU0FDeENnTyxNQUFRemdDLE9BQU96YyxFQUFFdzNCLE1BQU0xYyxNQUFNLHVDQUNmLE9BQVZvaUMsYUFDZ0MsSUFBdkJuVyxXQUFXbUksVUFDcEJuSSxXQUFXbUksUUFBVXpvQyxNQUFNeW9DLFNBRTdCbkksV0FBV21JLFFBQVFydEMsR0FBRzIxQixLQUFPLDZCQUErQjBsQixNQUFNLElBSXhFLE9BQU9uVyxXQUdUOXBDLGdDQUFpQ3dKLE1BQU9zZ0MsWUFXdEMsTUFWSSxDQUFDLFlBQWEsTUFBTyxZQUFZbG9DLFNBQVM0SCxNQUFNbUMsWUFFMUIsSUFBZm5DLE1BQU0xRixXQUNxQixJQUEzQjBGLE1BQU0xRixLQUFLd2lDLGNBRWxCd0QsV0FBVyxvQkFBc0IsQ0FDL0J1ekIsT0FBUSxLQUlQdnpCLFdBR1Q5cEMsbUNBQW9Dd0osTUFBT3NnQyxZQUN6QyxHQUNpQixjQUFmdGdDLE1BQU1tQyxXQUNzQyxJQUFyQ25DLE1BQU0xRixNQUFNNDZELHFCQUNuQixDQUNBLE1BQU1yN0QsT0FBUyxHQUNmLElBQUssTUFBTWdxQyxtQkFBbUI3akMsTUFBTTFGLEtBQUs0NkQscUJBQ25DcnhCLGdCQUFnQk4sVUFBWSxJQUM5QjFwQyxPQUFPZ3FDLGdCQUFnQm5nQyxNQUFRck0sS0FBS2dCLElBQ2xDd0IsT0FBT2dxQyxnQkFBZ0JuZ0MsT0FBUyxFQUNoQ21nQyxnQkFBZ0JOLFlBSXRCLE1BQU1ELGlCQUFtQixHQUN6QixJQUFLLE1BQU01L0IsUUFBUTdKLE9BQ2pCeXBDLGlCQUFpQm5yQyxLQUFLLENBQ3BCZ0ssS0FBTXVCLEtBQ042L0IsVUFBVzFwQyxPQUFPNkosTUFDbEI4L0IsVUFBVSxJQUdkbEQsV0FBVyx5QkFBMkJnRCxpQkFDdENoRCxXQUFXLCtCQUFpQyxNQUloRDlwQyx1Q0FBd0N3SixNQUFPc2dDLFlBQzdDLEdBQUksQ0FBQyxZQUFhLE1BQU8sWUFBWWxvQyxTQUFTNEgsTUFBTW1DLFlBRTFCLElBQWZuQyxNQUFNMUYsWUFDaUIsSUFBdEIwRixNQUFNMUYsS0FBSzRGLGFBQ2dCLElBQTFCRixNQUFNMUYsS0FBS2d1QyxZQUNwQixDQWtEQSxHQWpEQWhJLFdBQVcseUNBQTBDLEVBQ3JEQSxXQUFXLHNDQUF1QyxFQUNsREEsV0FBVyxnQ0FBaUMsRUFDNUNBLFdBQVcsK0JBQWdDLEVBQzNDQSxXQUFXLGdDQUFpQyxFQUM1Q0EsV0FBVyxzQ0FBdUMsRUFDbERBLFdBQVcsc0NBQXVDLE9BRUcsSUFBNUN0Z0MsTUFBTTFGLEtBQUs0RixRQUFRSSxlQUFlOEQsT0FDekNwRSxNQUFNMUYsS0FBSzRGLFFBQVFJLGVBQWU4RCxRQUVsQ2s4QixXQUFXLHlDQUEwQyxRQUdMLElBQXpDdGdDLE1BQU0xRixLQUFLNEYsUUFBUUcsWUFBWStELE9BQ3RDcEUsTUFBTTFGLEtBQUs0RixRQUFRRyxZQUFZK0QsUUFFL0JrOEIsV0FBVyxzQ0FBdUMsUUFHUixJQUFuQ3RnQyxNQUFNMUYsS0FBSzRGLFFBQVFLLE1BQU02RCxPQUNoQ3BFLE1BQU0xRixLQUFLNEYsUUFBUUssTUFBTTZELFFBRXpCazhCLFdBQVcsZ0NBQWlDLFFBR0gsSUFBbEN0Z0MsTUFBTTFGLEtBQUs0RixRQUFRTyxLQUFLMkQsT0FDL0JwRSxNQUFNMUYsS0FBSzRGLFFBQVFPLEtBQUsyRCxRQUV4Qms4QixXQUFXLCtCQUFnQyxRQUdELElBQW5DdGdDLE1BQU0xRixLQUFLNEYsUUFBUU0sTUFBTTRELE9BQ2hDcEUsTUFBTTFGLEtBQUs0RixRQUFRTSxNQUFNNEQsUUFFekJrOEIsV0FBVyxnQ0FBaUMsUUFHSSxJQUF6Q3RnQyxNQUFNMUYsS0FBSzRGLFFBQVFDLFlBQVlpRSxPQUN0Q3BFLE1BQU0xRixLQUFLNEYsUUFBUUMsWUFBWWlFLFFBRS9CazhCLFdBQVcsc0NBQXVDLFFBR0YsSUFBekN0Z0MsTUFBTTFGLEtBQUs0RixRQUFRRSxZQUFZZ0UsT0FDdENwRSxNQUFNMUYsS0FBSzRGLFFBQVFFLFlBQVlnRSxRQUUvQms4QixXQUFXLHNDQUF1QyxRQUV2QixJQUFsQnRnQyxNQUFNeW9DLFFBQXlCLENBQ3hDLE1BQU1BLFFBQVV6b0MsTUFBTXlvQyxRQUN0QixJQUFJWixTQUFVLEVBQ2QsSUFBSyxJQUFJaHJCLEVBQUksRUFBR3M0QyxHQUFLMXNCLFFBQVFsd0MsT0FBUXNrQixFQUFJczRDLEdBQUl0NEMsSUFBSyxDQUNoRCxNQUFNNnJCLE9BQVNELFFBQVE1ckIsR0FDakJ4SSxNQUFRcTBCLE9BQU8zWCxLQUFLMWMsTUFDeEIsb0hBRUYsR0FBYyxPQUFWQSxNQUFnQixDQUNsQixJQUFJdTBCLFNBQVcsR0FDZixPQUFRdjBCLE1BQU0sSUFDWixJQUFLLGlCQUNIdTBCLFNBQVcsY0FDWCxNQUNGLElBQUssa0JBQ0hBLFNBQVcsY0FDWCxNQUNGLElBQUssWUFDSEEsU0FBVyxpQkFDWCxNQUNGLElBQUssY0FDSEEsU0FBVyxRQUNYLE1BQ0YsSUFBSyxZQUNMLElBQUssUUFDSEEsU0FBVyxPQUNYLE1BQ0YsSUFBSyxvQkFDTCxJQUFLLGNBQ0hBLFNBQVcsY0FDWCxNQUNGLElBQUssVUFDSEEsU0FBVyxRQUdFLEtBQWJBLFdBQ0d0SSxXQUFXLG1CQUFtQnNJLG9CQUNqQ3RJLFdBQVcsbUJBQW1Cc0ksbUJBQW9CLEVBQ2xEZixTQUFVLEdBRVJhLE9BQU96VyxNQUFNMFcsTUFBTUMsV0FBYUEsV0FDbENILFFBQVE1ckIsR0FBS2dSLFlBQVk2YSxPQUFRLENBQy9CelcsTUFBTyxDQUNMMFcsS0FBTSxDQUNKQyxhQUlOZixTQUFVLEtBS2RBLFVBQ0Z2SCxXQUFXbUksUUFBVUEsU0FHekJuSSxXQUFXLGlCQUFtQixLQUdsQyxPQUFPQSxXQUdUOXBDLGdDQUFpQ3dKLE1BQU9zZ0MsWUFZdEMsTUFYSSxDQUFDLE9BQU9sb0MsU0FBUzRILE1BQU1tQyxZQUErQixJQUFmbkMsTUFBTTFGLFlBQ2IsSUFBdkIwRixNQUFNMUYsS0FBS3lDLFVBQ3BCdWpDLFdBQVcsZ0JBQWtCLENBQzNCeUQsWUFBYSxLQUNiRyxhQUFjLFlBR3dCLElBQS9CbGtDLE1BQU0xRixLQUFLODZELGtCQUNwQjkwQixXQUFXLHdCQUEwQixJQUdsQ0EsV0FHVDlwQyxvQ0FBcUN3SixNQUFPc2dDLFlBQzFDLEdBQ2lCLGNBQWZ0Z0MsTUFBTW1DLFdBQzhCLElBQTdCbkMsTUFBTTFGLE1BQU1zWCxTQUFTTixJQUM1QixDQUNBLE1BQU1LLGVBQWlCdGEsS0FBSytpQixLQUFLcGEsTUFBTTFGLEtBQUtzWCxRQUFRTixJQUFJbE4sTUFBUSxRQUVsQixJQUFyQ3BFLE1BQU0xRixLQUFLc1gsUUFBUU4sSUFBSWtJLFdBQ08sT0FBckN4WixNQUFNMUYsS0FBS3NYLFFBQVFOLElBQUlrSSxZQUV2QjhtQixXQUFXLDhCQUFnQyxRQUdNLElBQTFDdGdDLE1BQU0xRixLQUFLc1gsUUFBUU4sSUFBSUssZ0JBQ1ksT0FBMUMzUixNQUFNMUYsS0FBS3NYLFFBQVFOLElBQUlLLGlCQUV2QjJ1QixXQUFXLG1DQUFxQyxNQUFRM3VCLHFCQUdaLElBQXJDM1IsTUFBTTFGLEtBQUtzWCxRQUFRTixJQUFJa0ksV0FDTyxPQUFyQ3haLE1BQU0xRixLQUFLc1gsUUFBUU4sSUFBSWtJLFlBRXZCOG1CLFdBQVcsOEJBQWdDLFFBR0csSUFBdkN0Z0MsTUFBTTFGLEtBQUs4bUQseUJBQ3FCLE9BQXZDcGhELE1BQU0xRixLQUFLOG1ELDhCQUN5QyxJQUE3Q3BoRCxNQUFNMUYsS0FBSzhtRCx3QkFBd0JoOUMsT0FDRyxPQUE3Q3BFLE1BQU0xRixLQUFLOG1ELHdCQUF3Qmg5QyxRQUVuQ2s4QixXQUFXLHNDQUF3QyxRQUdMLElBQXZDdGdDLE1BQU0xRixLQUFLOG1ELHlCQUNxQixPQUF2Q3BoRCxNQUFNMUYsS0FBSzhtRCw4QkFDdUMsSUFBM0NwaEQsTUFBTTFGLEtBQUs4bUQsd0JBQXdCL29ELEtBQ0MsT0FBM0MySCxNQUFNMUYsS0FBSzhtRCx3QkFBd0Ivb0QsTUFFbkNpb0MsV0FBVyxvQ0FBc0MzdUIscUJBRWQsSUFBMUIzUixNQUFNMUYsS0FBS3NYLFFBQVFrSSxVQUVhLElBQWhDOVosTUFBTTFGLEtBQUtzWCxRQUFRa0ksR0FBRzFWLE9BQ0csT0FBaENwRSxNQUFNMUYsS0FBS3NYLFFBQVFrSSxHQUFHMVYsUUFFdEJrOEIsV0FBVyx5QkFBMkIzdUIscUJBR0QsSUFBOUIzUixNQUFNMUYsS0FBS3NYLFFBQVFrSSxHQUFHemhCLEtBQ0MsT0FBOUIySCxNQUFNMUYsS0FBS3NYLFFBQVFrSSxHQUFHemhCLE1BRXRCaW9DLFdBQVcsdUJBQXlCM3VCLHNCQUlWLElBQXJCM1IsTUFBTTFGLEtBQUtrNkQsT0FDRyxPQUFyQngwRCxNQUFNMUYsS0FBS2s2RCxRQUVYbDBCLFdBQVcsY0FBZ0IsSUFHL0IsT0FBT0EsV0FHVDlwQyw0QkFBNkJpN0QsTUFBT254QixZQUNsQyxNQUFNbVcsTUFBUXpnQyxPQUFPeTdDLE1BQU1yc0QsS0FBS2lQLE1BQU0sdUNBSXRDLE9BSGMsT0FBVm9pQyxRQUNGblcsV0FBV2w3QixJQUFNLDZCQUErQnF4QyxNQUFNLElBRWpEblcsV0FHVDlwQyw0QkFBNkJpN0QsTUFBT254QixZQUNsQyxJQUFJbVcsTUFBUXpnQyxPQUFPeTdDLE1BQU1yc0QsS0FBS2lQLE1BQU0sdUNBQ3RCLE9BQVZvaUMsUUFDRm5XLFdBQVdsN0IsSUFBTSw2QkFBK0JxeEMsTUFBTSxJQUV4RCxJQUFLLE1BQU9yN0MsRUFBRzdCLEtBQU1GLE9BQU9nQyxRQUFRbzJELE1BQU05NUQsU0FDeEM4K0MsTUFBUXpnQyxPQUFPemMsRUFBRTZMLEtBQUtpUCxNQUFNLHVDQUNkLE9BQVZvaUMsYUFDZ0MsSUFBdkJuVyxXQUFXM29DLFVBQ3BCMm9DLFdBQVczb0MsUUFBVTg1RCxNQUFNOTVELFNBRTdCMm9DLFdBQVczb0MsUUFBUXlELEdBQUdnSyxJQUFNLDZCQUErQnF4QyxNQUFNLElBR3JFLE9BQU9uVyxXQUdUOXBDLDRCQUE2QmdOLE1BQU84OEIsWUFDbEMsTUFBTW1XLE1BQVF6Z0MsT0FBT3hTLE1BQU00QixLQUFLaVAsTUFBTSx1Q0FJdEMsT0FIYyxPQUFWb2lDLFFBQ0ZuVyxXQUFXbDdCLElBQU0sNkJBQStCcXhDLE1BQU0sSUFFakRuVyxZQzc3QlgsTUFBTSswQixlQUNKLDJEQUNBbGhELGNBQWMrOUIsWUFDWixpR0FHRTk0QyxLQUFPLENBQ1hrOEQsR0FBSSxDQUNGeDRCLFlBQWEsZUFDYnk0QixPQUFRLE9BQ1JDLFVBQVcsT0FDWEMsb0JBQXFCLE9BQ3JCQyxZQUFhLE9BQ2JDLE9BQVEsb0JBQ1JDLE9BQVEsV0FDUkMsZUFBZ0IscUNBQ2hCQyxnQkFBaUIsYUFDakJDLGNBQWUsMENBQ2ZDLGlCQUFrQix1QkFDbEJDLGNBQWUsb0JBQ2ZDLFFBQ0Usb0ZBR0ZDLE1BQ0UsNkRBQ0ZDLElBQUssbUNBQ0xDLFdBQVksNEJBQ1pDLFNBQVUsb0NBQ1ZDLFFBQ0UsaW1CQUVKQyxHQUFJLENBQ0YxNUIsWUFBYSxjQUNieTRCLE9BQVEsT0FDUkMsVUFBVyxPQUNYQyxvQkFBcUIsT0FDckJDLFlBQWEsT0FDYmUsVUFBVyxNQUNYZCxPQUFRLHFCQUNSQyxPQUFRLDZCQUNSQyxlQUFnQixxQ0FDaEJDLGdCQUFpQixZQUNqQkMsY0FBZSxnREFDZkMsaUJBQWtCLHNCQUNsQkMsY0FBZSxvQkFDZkMsUUFDRSxxRkFHRkMsTUFDRSxnRkFHRkMsSUFBSyxtQ0FDTEMsV0FBWSw0QkFDWkMsU0FBVSxtQ0FDVkMsUUFDRSxtbEJBRUpHLEdBQUksQ0FDRjU1QixZQUFhLGNBQ2J5NEIsT0FBUSxPQUNSQyxVQUFXLE9BQ1hDLG9CQUFxQixPQUNyQkMsWUFBYSxPQUNiZSxVQUFXLE1BQ1hkLE9BQVEsMkJBQ1JDLE9BQVEsa0JBQ1JDLGVBQWdCLHlCQUNoQkMsZ0JBQWlCLFlBQ2pCQyxjQUFlLGdEQUNmQyxpQkFBa0Isb0JBQ2xCQyxjQUFlLHNCQUNmQyxRQUNFLDBFQUdGQyxNQUNFLG1GQUdGQyxJQUFLLHVDQUNMQyxXQUFZLDRCQUNaQyxTQUFVLGtEQUNWQyxRQUNFLHdyQkFFSkksR0FBSSxDQUNGNzVCLFlBQWEsY0FDYnk0QixPQUFRLFFBQ1JDLFVBQVcsbUJBQ1hDLG9CQUFxQixRQUNyQkMsWUFBYSxRQUNiQyxPQUFRLHFDQUNSQyxPQUFRLG9CQUNSQyxlQUFnQixtQ0FDaEJDLGdCQUFpQixhQUNqQkMsY0FBZSwrQ0FDZkMsaUJBQWtCLDBCQUNsQkMsY0FBZSxrQ0FDZkMsUUFDRSx5RUFHRkMsTUFBTyxzQ0FDUEMsSUFBSyx3QkFDTEMsV0FBWSx5Q0FDWkMsU0FDRSxtSUFHRkMsUUFDRSx1bkJBRUpLLEdBQUksQ0FDRjk1QixZQUFhLGVBQ2J5NEIsT0FBUSxVQUNSQyxVQUFXLFVBQ1hDLG9CQUFxQixVQUNyQkMsWUFBYSxLQUNiQyxPQUFRLCtCQUNSQyxPQUFRLHVDQUNSQyxlQUFnQiwyQkFDaEJDLGdCQUFpQixjQUNqQkMsY0FBZSwrQ0FDZkMsaUJBQWtCLHVDQUNsQkMsY0FBZSwrQkFDZkMsUUFDRSx3RUFHRkMsTUFDRSxvRkFHRkMsSUFBSyw2QkFDTEMsV0FBWSwwQ0FDWkMsU0FBVSxvQ0FDVkMsUUFDRSwrbkJBRUosUUFBUyxDQUNQejVCLFlBQWEsMEJBQ2J5NEIsT0FBUSxPQUNSQyxVQUFXLE9BQ1hDLG9CQUFxQixPQUNyQkMsWUFBYSxPQUNiQyxPQUFRLHlCQUVSQyxPQUFRLFdBQ1JDLGVBQ0Usa0RBQ0ZDLGdCQUFpQixhQUNqQkMsY0FDRSxtREFDRkMsaUJBQWtCLDBCQUNsQkMsY0FBZSw0QkFDZkMsUUFDRSw0UUFHRkMsTUFDRSw4RUFHRkMsSUFBSyx1Q0FDTEMsV0FBWSwrQkFDWkMsU0FBVSwrQ0FDVkMsUUFDRSxtWkFJQU0sYUFBZSxDQUNuQnZCLEdBQUksQ0FDRmx3QixJQUFLLCtDQUNMbkgsV0FDRSwwREFDRjdoQyxJQUFLLG1EQUNMQyxJQUFLLG1EQUNMQyxJQUFLLG1EQUNMRyxJQUFLLG1EQUNMQyxJQUFLLG1EQUNMSCxJQUFLLG1EQUNMQyxJQUFLLG1EQUNMRyxJQUFLLG1EQUNMMlUsSUFDRSw4REFDRm9JLEdBQ0UsZ0VBQ0ZJLEdBQ0Usa0VBR0ZxWCxHQUNFLGdCQUNBLzNCLEtBQUtrOEQsR0FBR0ssT0FDUixnREFDQXY4RCxLQUFLazhELEdBQUdDLE9BQ1IsYUFDRnZvQyxNQUFPLDBEQUNQTCxNQUNFLHVDQUdBdnpCLEtBQUtrOEQsR0FBR0UsVUFDUixrQkFDRnBvQyxJQUFLLGtEQUNMeVYsSUFBSyxvREFDTHV5QixnQkFDRSwyRUFHQWg4RCxLQUFLazhELEdBQUdHLG9CQUNSLHVCQUNGOWtELFFBQ0UsNERBR0F2WCxLQUFLazhELEdBQUdJLFlBQ1IseUNBQ0ZucUQsT0FDRSx3QkFDQThwRCxlQURBLDJKQUtBajhELEtBQUtrOEQsR0FBR0ssT0FDUixJQUNBdjhELEtBQUtrOEQsR0FBR00sT0FDUiw0Q0FDRmtCLFlBQ0UsdUZBSUZodkQsTUFDRSxxQkFDQXV0RCxlQURBLG1IQUtGMEIsaUJBQWtCLDZDQUNsQnJ6RCxLQUFNLG1CQUFxQjJ4RCxlQUFpQixlQUM1QzJCLFNBQ0UsSUFDQTU5RCxLQUFLazhELEdBQUdPLGVBQ1IsSUFDQXo4RCxLQUFLazhELEdBQUdTLGNBQ1IsSUFDQTM4RCxLQUFLazhELEdBQUdVLGlCQUNSLElBQ0E1OEQsS0FBS2s4RCxHQUFHVyxjQUNSLEtBRUpPLEdBQUksQ0FDRnB4QixJQUFLLGlEQUNMbkgsV0FBWSxxREFDWjdoQyxJQUFLLGtEQUNMQyxJQUFLLGtEQUNMQyxJQUFLLGtEQUNMRyxJQUFLLGtEQUNMQyxJQUFLLGtEQUNMSCxJQUFLLGtEQUNMQyxJQUFLLGtEQUNMRyxJQUFLLGtEQUNMMlUsSUFDRSw4RUFHRm9JLEdBQ0UsbUVBR0ZJLEdBQ0UsaUVBR0ZxWCxHQUNFLGdCQUNBLzNCLEtBQUtvOUQsR0FBR2IsT0FDUixrREFDQXY4RCxLQUFLbzlELEdBQUdqQixPQUNSLGFBQ0Z2b0MsTUFDRSxxRUFHRkwsTUFDRSwyQ0FHQXZ6QixLQUFLbzlELEdBQUdoQixVQUNSLGtCQUNGcG9DLElBQ0UsbUVBR0Z5VixJQUFLLHFEQUNMdXlCLGdCQUNFLHFGQUdBaDhELEtBQUtvOUQsR0FBR2Ysb0JBQ1IsdUJBQ0Y5a0QsUUFDRSwwREFHQXZYLEtBQUtvOUQsR0FBR2QsWUFDUiwrQ0FDRm5xRCxPQUNFLHdCQUNBOHBELGVBREEsOEpBS0FqOEQsS0FBS285RCxHQUFHYixPQUNSLElBQ0F2OEQsS0FBS285RCxHQUFHWixPQUNSLDhDQUNGa0IsWUFDRSw0RkFJRmh2RCxNQUNFLHFCQUNBdXRELGVBREEsb0hBS0YwQixpQkFDRSxxRUFHRnJ6RCxLQUFNLG1CQUFxQjJ4RCxlQUFpQixlQUM1QzJCLFNBQ0UsSUFDQTU5RCxLQUFLbzlELEdBQUdYLGVBQ1IsSUFDQXo4RCxLQUFLbzlELEdBQUdULGNBQ1IsSUFDQTM4RCxLQUFLbzlELEdBQUdSLGlCQUNSLElBQ0E1OEQsS0FBS285RCxHQUFHUCxjQUNSLEtBRUpTLEdBQUksQ0FDRnR4QixJQUFLLDBDQUNMbkgsV0FBWSxxREFDWjdoQyxJQUFLLGlEQUNMQyxJQUFLLG1EQUNMQyxJQUFLLGtEQUNMRyxJQUFLLG1EQUNMQyxJQUFLLG1EQUNMSCxJQUFLLGtEQUNMQyxJQUFLLG1EQUNMRyxJQUFLLG1EQUNMMlUsSUFDRSxrRUFHRm9JLEdBQ0UsMEVBR0ZJLEdBQ0Usa0VBR0ZxWCxHQUNFLGdCQUNBLzNCLEtBQUtzOUQsR0FBR2YsT0FDUixrREFDQXY4RCxLQUFLczlELEdBQUduQixPQUNSLGFBQ0Z2b0MsTUFBTywyREFDUEwsTUFDRSx5Q0FHQXZ6QixLQUFLczlELEdBQUdsQixVQUNSLGtCQUNGcG9DLElBQUssa0RBQ0x5VixJQUFLLHlEQUNMdXlCLGdCQUNFLHVFQUdBaDhELEtBQUtzOUQsR0FBR2pCLG9CQUNSLHVCQUNGOWtELFFBQ0UscUVBR0F2WCxLQUFLczlELEdBQUdoQixZQUNSLCtDQUNGbnFELE9BQ0Usd0JBQ0E4cEQsZUFEQSxnS0FLQWo4RCxLQUFLczlELEdBQUdmLE9BQ1IsSUFDQXY4RCxLQUFLczlELEdBQUdkLE9BQ1IsNENBQ0ZrQixZQUNFLHNGQUlGaHZELE1BQ0UscUJBQ0F1dEQsZUFEQSxtSEFLRjBCLGlCQUNFLHFEQUNGcnpELEtBQU0sbUJBQXFCMnhELGVBQWlCLGVBQzVDMkIsU0FDRSxJQUNBNTlELEtBQUtzOUQsR0FBR2IsZUFDUixJQUNBejhELEtBQUtzOUQsR0FBR1gsY0FDUixJQUNBMzhELEtBQUtzOUQsR0FBR1YsaUJBQ1IsSUFDQTU4RCxLQUFLczlELEdBQUdULGNBQ1IsS0FFSlUsR0FBSSxDQUNGdnhCLElBQUssc0NBQ0xuSCxXQUNFLDBEQUNGN2hDLElBQUssbURBQ0xDLElBQUssbURBQ0xDLElBQUssbURBQ0xHLElBQUssbURBQ0xDLElBQUssbURBQ0xILElBQUssbURBQ0xDLElBQUssbURBQ0xHLElBQUssbURBQ0wyVSxJQUNFLHFFQUdGb0ksR0FDRSxtRUFHRkksR0FDRSxxRUFHRnFYLEdBQ0UsZ0JBQ0EvM0IsS0FBS3U5RCxHQUFHaEIsT0FDUixnREFDQXY4RCxLQUFLdTlELEdBQUdwQixPQUNSLGFBQ0Z2b0MsTUFDRSw0REFDRkwsTUFDRSxtREFHQXZ6QixLQUFLdTlELEdBQUduQixVQUNSLGtCQUNGcG9DLElBQ0UsMkVBR0Z5VixJQUFLLHNEQUNMdXlCLGdCQUNFLGtFQUdBaDhELEtBQUt1OUQsR0FBR2xCLG9CQUNSLHVCQUNGOWtELFFBQ0UsMkVBR0F2WCxLQUFLdTlELEdBQUdqQixZQUNSLHlDQUNGbnFELE9BQ0Usd0JBQ0E4cEQsZUFEQSx1S0FLQWo4RCxLQUFLdTlELEdBQUdoQixPQUNSLElBQ0F2OEQsS0FBS3U5RCxHQUFHZixPQUNSLDRDQUNGa0IsWUFDRSwyRkFHRmh2RCxNQUNFLHFCQUNBdXRELGVBREEsbUhBS0YwQixpQkFDRSw0REFDRnJ6RCxLQUFNLG1CQUFxQjJ4RCxlQUFpQixlQUM1QzJCLFNBQ0UsSUFDQTU5RCxLQUFLdTlELEdBQUdkLGVBQ1IsSUFDQXo4RCxLQUFLdTlELEdBQUdaLGNBQ1IsSUFDQTM4RCxLQUFLdTlELEdBQUdYLGlCQUNSLElBQ0E1OEQsS0FBS3U5RCxHQUFHVixjQUNSLEtBRUpXLEdBQUksQ0FDRnh4QixJQUFLLDBDQUNMbkgsV0FDRSx5REFDRjdoQyxJQUFLLG1EQUNMQyxJQUFLLG1EQUNMQyxJQUFLLG1EQUNMRyxJQUFLLG1EQUNMQyxJQUFLLG1EQUNMSCxJQUFLLG1EQUNMQyxJQUFLLG1EQUNMRyxJQUFLLG1EQUNMMlUsSUFDRSwrREFDRm9JLEdBQ0UsK0VBR0ZJLEdBQ0Usb0ZBR0ZxWCxHQUNFLGdCQUNBLzNCLEtBQUt3OUQsR0FBR2pCLE9BQ1IsZ0RBQ0F2OEQsS0FBS3c5RCxHQUFHckIsT0FDUixhQUNGdm9DLE1BQ0UsZ0VBQ0ZMLE1BQ0UsMENBR0F2ekIsS0FBS3c5RCxHQUFHcEIsVUFDUixrQkFDRnBvQyxJQUFLLHdEQUNMeVYsSUFBSyxzREFDTHV5QixnQkFDRSxpRUFHQWg4RCxLQUFLdzlELEdBQUduQixvQkFDUix1QkFDRjlrRCxRQUNFLHlFQUdBdlgsS0FBS3c5RCxHQUFHbEIsWUFDUix5Q0FDRm5xRCxPQUNFLHdCQUNBOHBELGVBREEseUpBS0FqOEQsS0FBS3c5RCxHQUFHakIsT0FDUixJQUNBdjhELEtBQUt3OUQsR0FBR2hCLE9BQ1IsNENBQ0ZrQixZQUNFLDBGQUdGaHZELE1BQ0UscUJBQ0F1dEQsZUFEQSxtSEFLRjBCLGlCQUNFLG1EQUNGcnpELEtBQU0sbUJBQXFCMnhELGVBQWlCLGVBQzVDMkIsU0FDRSxJQUNBNTlELEtBQUt3OUQsR0FBR2YsZUFDUixJQUNBejhELEtBQUt3OUQsR0FBR2IsY0FDUixJQUNBMzhELEtBQUt3OUQsR0FBR1osaUJBQ1IsSUFDQTU4RCxLQUFLdzlELEdBQUdYLGNBQ1IsS0FFSixRQUFTLENBQ1A3d0IsSUFBSyxrREFFTG5ILFdBQ0UsMERBQ0Y3aEMsSUFBSyxzREFDTEMsSUFBSyxzREFDTEMsSUFBSyxzREFDTEcsSUFBSyxzREFDTEMsSUFBSyxzREFDTEgsSUFBSyxzREFDTEMsSUFBSyxzREFDTEcsSUFBSyxzREFDTDJVLElBQ0UsaUVBR0ZvSSxHQUNFLG1FQUdGSSxHQUNFLGtFQUdGcVgsR0FDRSxnQkFDQS8zQixLQUFLLFNBQVN1OEQsT0FDZCxnREFDQXY4RCxLQUFLLFNBQVNtOEQsT0FDZCxhQUNGdm9DLE1BQ0UsNkRBQ0ZMLE1BQ0UsMENBR0F2ekIsS0FBSyxTQUFTbzhELFVBQ2Qsa0JBQ0Zwb0MsSUFBSyxrREFDTHlWLElBQUssdURBQ0x1eUIsZ0JBQ0UscUZBR0FoOEQsS0FBSyxTQUFTcThELG9CQUNkLHVCQUNGOWtELFFBQ0Usb0ZBR0F2WCxLQUFLLFNBQVNzOEQsWUFDZCx5Q0FDRm5xRCxPQUNFLHdCQUNBOHBELGVBREEsa0tBS0FqOEQsS0FBSyxTQUFTdThELE9BQ2QsSUFDQXY4RCxLQUFLLFNBQVN3OEQsT0FDZCw0Q0FDRmtCLFlBQ0UsOEZBR0ZodkQsTUFDRSxxQkFDQXV0RCxlQURBLG1IQUtGMEIsaUJBQWtCLHFDQUNsQnJ6RCxLQUFNLG1CQUFxQjJ4RCxlQUFpQixlQUM1QzJCLFNBQ0UsSUFDQTU5RCxLQUFLLFNBQVN5OEQsZUFDZCxJQUNBejhELEtBQUssU0FBUzI4RCxjQUNkLElBQ0EzOEQsS0FBSyxTQUFTNDhELGlCQUNkLElBQ0E1OEQsS0FBSyxTQUFTNjhELGNBQ2QsTUFJQyxNQUFNZ0Isd0JBQ1h6Z0UscUJBQXNCMGdFLEtBQU8sTUFPM0IsT0FOS0EsT0FDSEEsS0FBT3JnRSxLQUFLNFAsS0FBS3l3RCxXQUVlLElBQXZCTCxhQUFhSyxRQUN0QkEsS0FBTyxNQUVGQSxLQUdUMWdFLHNCQUF1QjBnRSxNQUNyQixJQUFJWCxRQUFVbjlELEtBQUtrOEQsR0FBR2lCLFFBSXRCLFlBSDBCLElBQWZuOUQsS0FBSzg5RCxRQUNkWCxRQUFVbjlELEtBQUs4OUQsTUFBTVgsU0FFaEJBLFFBR1QvL0QseUJBQ0UsTUFBTXdELE9BQVMsR0FDZixJQUFLLE1BQU1DLE9BQU9iLEtBQ2hCWSxPQUFPQyxLQUFPYixLQUFLYSxLQUFLNmlDLFlBRTFCLE9BQU85aUMsT0FHVHhELGVBQWdCMGdFLE1BQ2QsT0FBTzk5RCxLQUFLODlELE9BQVM5OUQsS0FBS2s4RCxHQUc1QjkrRCw2QkFBOEIwZ0UsTUFDNUIsT0FBT0wsYUFBYUssT0FBU0wsYUFBYXZCLElDdHdCdkMsTUFBTTZCLGtCQUNYcHNELGNBQ0U5RCxLQUFLdzdCLE9BQVMsR0FDZHg3QixLQUFLbXdELGNBQWdCLEdBR1pDLHNCQUNULE1BQU8sSUFHRUMsc0JBQ1QsTUFBTyxJQVNUQyxTQUFVQyxNQUFPQyxVQUFZLE1BQzNCLE1BQWdDLFdBQTVCRCxNQUFNenNELGFBQWFySCxLQUNkOHpELE1BRUYsSUFBSXBuQixPQUFPb25CLE1BQU9DLFdBUTNCQyxZQUFhcnpELEdBQ1gsT0FBT0EsRUFDSnpDLFFBQVEsV0FBWSxLQUNwQkEsUUFBUSxPQUFRLElBQ2hCQSxRQUFRLGdCQUFpQixJQVU5QisxRCxjQUFldHpELEdBQ2IsUUFBaUIsSUFBTkEsRUFBbUIsT0FBT0EsRUFDckMsUUFBbUMsSUFBeEI0QyxLQUFLN04sS0FBS3E5RCxVQUEyQixDQUM5QyxNQUFNbUIsTUFBUSxJQUFJeG5CLE9BQ2hCLGNBQWdCbnBDLEtBQUs3TixLQUFLcTlELFVBQVksY0FDdEMsT0FFRixPQUFPcHlELEVBQUV6QyxRQUFRZzJELE1BQU8sZUFFeEIsT0FBT3Z6RCxFQVNYd3pELE9BQVF4ekQsR0FDTixPQUF3QixJQUFwQkEsRUFBRXl6RCxPQUFPdi9ELFFBU0ksS0FOakI4TCxFQUFJQSxFQUNEeXpELE9BQ0E1MEQsTUFBTSxNQUNONUosS0FBSTZoQixNQUFRQSxLQUFLMjhDLE9BQU9sMkQsUUFBUSxZQUFhLE1BQzdDdEosUUFBTzZpQixNQUFRQSxPQUNmdmhCLEtBQUssWUFDRnJCLE9BUkcsR0FXRixNQUFROEwsRUFBSSxPQWNyQmtGLE1BQ0V3dUQsVUFDQSxnQkFDbUIsRUFBSSxVQUNWLEVBQUksS0FDUlosa0JBQWtCRyxTQUFRLE1BQzFCLEVBQUssZUFDSSxHQUNkLElBRUosSUFBSXQ5RCxRQUFTLEVBQ1RnK0QsUUFBUyxFQU1iLFFBTG9DLElBQXpCL3dELEtBQUsyd0QsTUFBTUcsVUFDcEJDLE9BQVMvd0QsS0FBS3N3RCxTQUFTdHdELEtBQUsyd0QsTUFBTUcsZ0JBQ00sSUFBeEI5d0QsS0FBSzdOLEtBQUsyK0QsWUFDMUJDLE9BQVMvd0QsS0FBS3N3RCxTQUFTdHdELEtBQUs3TixLQUFLMitELGFBRXBCLElBQVhDLE9BQWtCLEVBQ1AsSUFBVDc4QyxPQUNGQSxLQUFPbFUsS0FBS2tVLE1BRWQsTUFBTTVSLE1BQVF5dUQsT0FBT3p4QixLQUFLcHJCLE1BQzFCLElBQUkvVyxNQUFRLEtBQ1osR0FDWSxPQUFWbUYsU0FDbUIsSUFBbEIwdUQsb0JBQ2dELEtBQXZDMXVELE1BQU0xUCxRQUFVLElBQUlvK0QsZ0JBQzlCLENBS0EsR0FKQWorRCxPQUFTdVAsTUFBTTFQLFFBQVUsR0FDckJxK0QsaUJBQ0ZqeEQsS0FBS2tVLEtBQU9sVSxLQUFLa1UsS0FBS3ZaLFFBQVEySCxNQUFNLEdBQUd1dUQsT0FBUSxNQUFNQSxRQUVuREssU0FDRixJQUFLLE1BQU1sK0QsT0FBT1osT0FBT0QsS0FBS21RLE1BQU0xUCxRQUNsQyxPQUFRc0ksTUFDTixLQUFLZzFELGtCQUFrQkcsU0FDckJyd0QsS0FBS3c3QixPQUFPeG9DLEtBQU8rYixPQUFPek0sTUFBTTFQLE9BQU9JLE1BQU0ySCxRQUFRLEtBQU0sS0FDM0QsTUFDRixLQUFLdTFELGtCQUFrQkUsU0FDckJqekQsTUFBUU8sT0FBTzRFLE1BQU0xUCxPQUFPSSxNQUN2QmlULE1BQU05SSxTQUNUNkMsS0FBS3c3QixPQUFPeG9DLEtBQU8wSyxPQUFPNEUsTUFBTTFQLE9BQU9JLE9BTWpERCxPQUFPLFdBQWF1UCxNQUFNLEdBQzFCdlAsT0FBTyxVQUFZdVAsTUFBTThVLE9BRzdCLE9BQU9ya0IsT0FRVG8rRCxjQUFlajlDLE1BQ2IsR0FBMkIsSUFBdkJBLEtBQUsyOEMsT0FBT3YvRCxPQUNkLE9BS0YsSUFBSWdULE9BQ0FoSyxNQUNBODJELFFBTEF0Z0UsT0FBTzB2QyxNQUFNNndCLGNBQ2YvNUIsUUFBUSt5QixJQUFJLGNBQWVuMkMsTUFLN0IsSUFBSW85QyxhQUFjLEVBQ2RDLFNBQVcsR0FDZixHQUdFLEdBRkFBLFdBQ0FyOUMsS0FBT0EsS0FBSzI4QyxPQUVUdjJELE1BQVEwRixLQUFLc0MsTUFBTSxjQUFlLENBQUU0dUQsVUFBVSxFQUFPaDlDLE9BRXREQSxLQUFPQSxLQUFLdlosUUFBUUwsTUFBTSxXQUFZLFdBQ0osSUFBdkIwRixLQUFLdzdCLE9BQU90MkIsU0FDckJsRixLQUFLdzdCLE9BQU90MkIsT0FBUyxJQUV2QmxGLEtBQUt3N0IsT0FBT3QyQixPQUFPaFUsS0FBSyxDQUN0QnVMLEtBQU11RCxLQUFLeXdELFlBQVluMkQsTUFBTW1DLE1BQzdCVSxNQUFPTyxPQUFPcEQsTUFBTWszRCxZQUNwQnRnRSxNQUFNLFNBRUgsR0FDSm9ULE9BQVN0RSxLQUFLc0MsTUFBTSxTQUFVLENBQzdCNHVELFVBQVUsRUFDVmg5QyxLQUNBODhDLGVBQStCLElBQWhCTSxhQUF3QixlQUV6QyxDQUNBcDlDLEtBQU9BLEtBQUt2WixRQUFRMkosT0FBTyxXQUFZLE1BQ3ZDLE1BQU03SCxLQUFPdUQsS0FBS3l3RCxZQUFZbnNELE9BQU83SCxNQUFRLElBQzdDLElBQUlpSCxPQUFTMUQsS0FBSzB3RCxjQUFjMXdELEtBQUt5d0QsWUFBWW5zRCxPQUFPWixRQUFVLEtBQ2xFLE1BQU0rdEQsWUFDSnp4RCxLQUFLc0MsTUFBTSxVQUFXLENBQ3BCNFIsS0FBTXpYLEtBQ053MEQsZ0JBQWdCLEVBQ2hCQyxVQUFVLEtBRVpseEQsS0FBS3NDLE1BQU0sUUFBUyxDQUNsQjRSLEtBQU16WCxLQUNOdzBELGdCQUFnQixFQUNoQkMsVUFBVSxLQUVabHhELEtBQUtzQyxNQUFNLE1BQU8sQ0FDaEI0UixLQUFNelgsS0FDTncwRCxnQkFBZ0IsRUFDaEJDLFVBQVUsS0FFWmx4RCxLQUFLc0MsTUFBTSxhQUFjLENBQ3ZCNFIsS0FBTXpYLEtBQ053MEQsZ0JBQWdCLEVBQ2hCQyxVQUFVLEtBRVpseEQsS0FBS3NDLE1BQU0sV0FBWSxDQUNyQjRSLEtBQU16WCxLQUNOdzBELGdCQUFnQixFQUNoQkMsVUFBVSxLQVdkLElBQUkxa0IsTUFKRjhrQixZQUhzQixPQUF0Qmh0RCxPQUFPa3RELGlCQUNzQixJQUF0Qmx0RCxPQUFPa3RELFlBRUE5ekQsT0FBTzRHLE9BQU9rdEQsWUFLOUIsSUFBSTM2RCxNQUFPLEVBQ1BDLE1BQU8sRUFDWCxHQUNFMDFDLE1BQVF4c0MsS0FBS3N3RCxTQUNYLGlCQUNFdHdELEtBQUs3TixLQUFLdzhELE9BQ1YsU0FDQTN1RCxLQUFLN04sS0FBS3U4RCxPQUNWLGVBQ0ExdUQsS0FBS3c3QixPQUFPdFIsR0FBR3Z2QixRQUFRLFFBQVMsSUFDaEMsTUFDRjJrQyxLQUFLNTdCLFFBQ0g4b0MsT0FDRjMxQyxNQUFPLEVBQ1A2TSxPQUFTQSxPQUFPL0ksUUFBUTZ4QyxNQUFNLEdBQUksTUFFbENBLE1BQVF4c0MsS0FBS3N3RCxTQUNYLGlCQUNFdHdELEtBQUs3TixLQUFLdThELE9BQ1Ysa0JBQ0ExdUQsS0FBS3c3QixPQUFPdFIsR0FBR3Z2QixRQUFRLFFBQVMsSUFDaEMsTUFDRjJrQyxLQUFLNTdCLFFBQ0g4b0MsUUFDRjExQyxNQUFPLEVBQ1A0TSxPQUFTQSxPQUFPL0ksUUFBUTZ4QyxNQUFNLEdBQUksWUFHL0JBLE9BQ1QsTUFBTWtsQixRQUFVaHVELE9BQU96SCxNQUFNLEtBQ3ZCMDFELFVBQStCLElBQW5CRCxRQUFRcGdFLE9BQ3BCK0IsS0FBTyxDQUNYb0osS0FDQXZCLEtBQU0sU0FDTjdILEtBQU0sQ0FDSndOLE1BQU8sQ0FDTHBGLEdBQUk2MUQsYUFFTmx5QyxXQUFZLEdBQ1prRCxNQUFPLENBQ0xDLE9BQVEsQ0FDTnBsQixNQUFPdzBELFVBQVksR0FBSyxFQUN4Qmp1RCxPQUFRZ3VELFFBQVEsSUFFbEJsdkMsS0FBTSxDQUNKcmxCLE1BQU93MEQsVUFBWSxHQUFLLEVBQ3hCanVELE9BQVFpdUQsVUFBWUQsUUFBUSxHQUFLLElBRW5DcHhELFFBQVMsQ0FDUG5ELE1BQU93MEQsVUFBWSxHQUFLLEVBQ3hCanVELE9BQVFpdUQsVUFBWUQsUUFBUSxHQUFLLE9BTXpDcitELEtBQUtBLEtBQUsrckIsV0FBVzVvQixRQUFVbTdELFVBQy9CdCtELEtBQUtBLEtBQUsrckIsV0FBVy9vQixLQUFPbzdELFVBQVlFLFVBQ3hDdCtELEtBQUtBLEtBQUsrckIsV0FBV2hwQixPQUFTL0MsS0FBS0EsS0FBSytyQixXQUFXL29CLEtBQ25EaEQsS0FBS0EsS0FBSytyQixXQUFXdm9CLEtBQU9BLEtBQzVCeEQsS0FBS0EsS0FBSytyQixXQUFXdG9CLEtBQU9BLFVBQ08sSUFBeEJrSixLQUFLdzdCLE9BQU9vMkIsVUFDckI1eEQsS0FBS3c3QixPQUFPbzJCLFFBQVUsSUFFeEI1eEQsS0FBS3c3QixPQUFPbzJCLFFBQVExZ0UsS0FBS21DLFdBQ2YrOUQsUUFBVWw5QyxLQUFLOUcsTUFBTSxZQUMvQjhHLEtBQU9BLEtBQUt2WixRQUFReTJELFFBQVEsR0FBSSxPQUN0QkEsUUFBVWw5QyxLQUFLOUcsTUFBTSxlQUMvQjhHLEtBQU8sVUFFRnE5QyxTQUFXLElBQVFqdEQsUUFBWWhLLE9BQVc0WixPQUNsQyxJQUFicTlDLFdBQ0ZseUQsR0FBR0MsY0FBY0MsS0FDZixpR0FFRiszQixRQUFRa0osTUFBTSxzQkFBdUJ0c0IsT0FTekMyOUMsY0FBZTM5QyxLQUFNbGhCLElBQU0sVUFDekIsR0FBMkIsSUFBdkJraEIsS0FBSzI4QyxPQUFPdi9ELE9BQ2QsT0FFRixNQUFNd2dFLE9BQVM1OUMsS0FBS2pZLE1BQU0sV0FJMUIsSUFBSTRFLE1BSEFpeEQsT0FBT3hnRSxPQUFTLElBQ2xCNGlCLEtBQU80OUMsT0FBTyxJQUdoQixJQUFJUCxTQUFXLEdBQ2YsR0FDRUEsV0FDQXI5QyxLQUFPQSxLQUFLMjhDLE9BQ1pod0QsTUFBUWIsS0FBS3NDLE1BQU0sUUFBUyxDQUFFNHVELFVBQVUsRUFBT2g5QyxPQUMzQ3JULFFBQ0ZxVCxLQUFPQSxLQUFLdlosUUFBUWtHLE1BQU0sV0FBWSxXQUNOLElBQXJCYixLQUFLdzdCLE9BQU94b0MsT0FDckJnTixLQUFLdzdCLE9BQU94b0MsS0FBTyxJQUVyQmdOLEtBQUt3N0IsT0FBT3hvQyxLQUFLOUIsS0FBSyxDQUNwQnVMLEtBQU11RCxLQUFLeXdELFlBQVk1dkQsTUFBTXBFLE1BQzdCVSxNQUFPTyxPQUFPbUQsTUFBTTJ3RCxxQkFHakJELFNBQVcsR0FBSzF3RCxPQUNSLElBQWIwd0QsV0FDRmx5RCxHQUFHQyxjQUFjQyxLQUNmLGdHQUVGKzNCLFFBQVFrSixNQUFNLHFCQUFzQnRzQixPQVN4QzY5QyxjQUFlNzlDLE1BQ2IsR0FBMkIsSUFBdkJBLEtBQUsyOEMsT0FBT3YvRCxPQUNkLE9BRUYsTUFBTXdnRSxPQUFTNTlDLEtBQUtqWSxNQUFNLFdBQ3RCNjFELE9BQU94Z0UsT0FBUyxJQUNsQjRpQixLQUFPNDlDLE9BQU8sSUFFaEIsTUFBTUUsVUFBWTk5QyxLQUFLdlosUUFBUSxhQUFjLEtBQUtzQixNQUFNLGlCQUN4RCtELEtBQUtrVSxLQUFPbFUsS0FBS2tVLEtBQUt2WixRQUFRdVosS0FBSzI4QyxPQUFRLE1BQzNDLElBQUssTUFBTW9CLFNBQVNELGVBQ2dCLElBQXZCaHlELEtBQUt3N0IsT0FBT3V4QixTQUNyQi9zRCxLQUFLdzdCLE9BQU91eEIsT0FBUyxJQUV2Qi9zRCxLQUFLdzdCLE9BQU91eEIsT0FBTzc3RCxLQUFLOE8sS0FBS3l3RCxZQUFZd0IsUUFTN0MzaEUscUJBQXNCNGpCLE1BRXBCbFUsS0FBS2tVLEtBQU9uRixPQUFPbUYsTUFDaEIyOEMsT0FDQWwyRCxRQUFRLHdCQUF5QixLQUNqQ0EsUUFBUSxVQUFXLEtBQ25CQSxRQUFRLGtDQUFtQyxJQUU5QyxJQTJESXUzRCxPQTNEQTNnRSxJQUFNeU8sS0FBS2tVLEtBQUs1aUIsT0FFaEJnUixNQUFRdEMsS0FBS3NDLE1BQU0sTUFBTyxDQUFFcEgsS0FBTWcxRCxrQkFBa0JFLFdBQ3RELFVBeURGLEdBdkRLbnFELE1BQU0zRCxTQUNUL1EsSUFBTW5CLEtBQUttQixJQUFJQSxJQUFLK1EsUUFHdEJBLE1BQVF0QyxLQUFLc0MsTUFBTSxNQUFPLENBQUVwSCxLQUFNZzFELGtCQUFrQkUsV0FBWSxVQUMzRG5xRCxNQUFNM0QsU0FDVC9RLElBQU1uQixLQUFLbUIsSUFBSUEsSUFBSytRLFFBR3RCQSxNQUFRdEMsS0FBS3NDLE1BQU0sTUFBTyxDQUFFcEgsS0FBTWcxRCxrQkFBa0JFLFdBQVksVUFDM0RucUQsTUFBTTNELFNBQ1QvUSxJQUFNbkIsS0FBS21CLElBQUlBLElBQUsrUSxRQUd0QkEsTUFBUXRDLEtBQUtzQyxNQUFNLE1BQU8sQ0FBRXBILEtBQU1nMUQsa0JBQWtCRSxXQUFZLFVBQzNEbnFELE1BQU0zRCxTQUNUL1EsSUFBTW5CLEtBQUttQixJQUFJQSxJQUFLK1EsUUFHdEJBLE1BQVF0QyxLQUFLc0MsTUFBTSxNQUFPLENBQUVwSCxLQUFNZzFELGtCQUFrQkUsV0FBWSxVQUMzRG5xRCxNQUFNM0QsU0FDVC9RLElBQU1uQixLQUFLbUIsSUFBSUEsSUFBSytRLFFBR3RCQSxNQUFRdEMsS0FBS3NDLE1BQU0sTUFBTyxDQUFFcEgsS0FBTWcxRCxrQkFBa0JFLFdBQVksVUFDM0RucUQsTUFBTTNELFNBQ1QvUSxJQUFNbkIsS0FBS21CLElBQUlBLElBQUsrUSxRQUd0QkEsTUFBUXRDLEtBQUtzQyxNQUFNLE1BQU8sQ0FBRXBILEtBQU1nMUQsa0JBQWtCRSxXQUFZLFVBQzNEbnFELE1BQU0zRCxTQUNUL1EsSUFBTW5CLEtBQUttQixJQUFJQSxJQUFLK1EsUUFHdEJBLE1BQVF0QyxLQUFLc0MsTUFBTSxNQUFPLENBQUVwSCxLQUFNZzFELGtCQUFrQkUsV0FBWSxVQUMzRG5xRCxNQUFNM0QsU0FDVC9RLElBQU1uQixLQUFLbUIsSUFBSUEsSUFBSytRLFFBR3RCQSxNQUFRdEMsS0FBS3NDLE1BQU0sTUFBTyxDQUFFcEgsS0FBTWcxRCxrQkFBa0JFLFdBQVksVUFDM0RucUQsTUFBTTNELFNBQ1QvUSxJQUFNbkIsS0FBS21CLElBQUlBLElBQUsrUSxRQUd0QkEsTUFBUXRDLEtBQUtzQyxNQUFNLEtBQU0sQ0FBRXBILEtBQU1nMUQsa0JBQWtCRSxXQUFZLFVBQzFEbnFELE1BQU0zRCxTQUNUL1EsSUFBTW5CLEtBQUttQixJQUFJQSxJQUFLK1EsUUFHdEJBLE1BQVF0QyxLQUFLc0MsTUFBTSxLQUFNLENBQUVwSCxLQUFNZzFELGtCQUFrQkUsV0FBWSxVQUMxRG5xRCxNQUFNM0QsU0FDVC9RLElBQU1uQixLQUFLbUIsSUFBSUEsSUFBSytRLFFBSWxCL1EsSUFBTSxHQWtCUixHQWpCQTJnRSxPQUFTbHlELEtBQUtrVSxLQUFLaStDLE9BQU8sRUFBRzVnRSxLQUU3QitRLE1BQVF0QyxLQUFLc0MsTUFBTSxPQUFRLENBQUU0UixLQUFNZytDLFVBQ3JCLElBQVY1dkQsTUFFRnRDLEtBQUt3N0IsT0FBTy8rQixLQUFPN00sS0FBSzRQLEtBQUtDLFNBQVMsaUNBR3RDeXlELE9BQVNBLE9BQU92M0QsUUFBUTJILE1BQU0sV0FBWSxNQUc1Q0EsTUFBUXRDLEtBQUtzQyxNQUFNLE1BQU8sQ0FBRTRSLEtBQU1nK0MsVUFDcEIsSUFBVjV2RCxRQUVGNHZELE9BQVNBLE9BQU92M0QsUUFBUTJILE1BQU0sV0FBWSxRQUd2Q3RDLEtBQUtzQyxNQUFNLGFBQWMsQ0FBRTRSLEtBQU1nK0MsVUFBK0IsS0FBbEJBLE9BQU9yQixPQUFlLENBRXZFLElBQUk3NUIsV0FBYWs3QixPQUNiQSxPQUFPMzBELFFBQVEsTUFBUSxJQUV6Qnk1QixXQUFhazdCLE9BQU9DLE9BQU8sRUFBR0QsT0FBTzMwRCxRQUFRLEtBQU8sSUFFdER5QyxLQUFLdzdCLE9BQU94RSxXQUFhQSxXQUN0QnI4QixRQUFRLGFBQWMsS0FDdEJrMkQsT0FDQWwyRCxRQUFRLEtBQU0sSUFDakJxRixLQUFLa1UsS0FBT2xVLEtBQUtrVSxLQUFLdlosUUFBUXE4QixXQUFXNjVCLE9BQVEsWUFJbkQ3d0QsS0FBS3c3QixPQUFPLytCLEtBQU83TSxLQUFLNFAsS0FBS0MsU0FBUyxpQ0FHeEMsUUFDb0MsSUFBM0JPLEtBQUt3N0IsT0FBT3hFLGlCQUNRLElBQXBCaDNCLEtBQUt3N0IsT0FBTzJDLElBQ25CLENBQ0EsTUFBTWkwQixjQUFnQnB5RCxLQUFLdzdCLE9BQU94RSxXQUFXNXBCLE1BQzNDLG1DQUVFZ2xELGdCQUNGcHlELEtBQUt3N0IsT0FBTzJDLElBQU1pMEIsY0FBY3gvRCxPQUFPdXJDLElBQ3ZDbitCLEtBQUt3N0IsT0FBT3hFLFdBQWFvN0IsY0FBY3gvRCxPQUFPb2tDLFdBQVc2NUIsUUFLMUQ3d0QsS0FBS3NDLE1BQU0sUUFDWnRDLEtBQUtzQyxNQUFNLFNBQVUsQ0FDbkIydUQsZ0JBQWdCLEVBQ2hCQyxVQUFVLEVBQ1ZoOUMsS0FBTWxVLEtBQUt3N0IsT0FBT3RSLE9BR3BCbHFCLEtBQUt3N0IsT0FBT3RSLEdBQUssS0FFbkJscUIsS0FBS3c3QixPQUFPdFIsR0FBS2xxQixLQUFLMHdELGNBQWMxd0QsS0FBS3c3QixPQUFPdFIsSUFFaERscUIsS0FBS3NDLE1BQU0sU0FHUnRDLEtBQUtzQyxNQUFNLFdBQ1p0QyxLQUFLc0MsTUFBTSxZQUFhLENBQ3RCMnVELGdCQUFnQixFQUNoQkMsVUFBVSxFQUNWaDlDLEtBQU1sVSxLQUFLdzdCLE9BQU85VixVQUdwQjFsQixLQUFLdzdCLE9BQU85VixNQUFRLEtBR3RCMWxCLEtBQUtzQyxNQUFNLE1BQU8sQ0FBRXBILEtBQU1nMUQsa0JBQWtCRSxXQUU1Q3B3RCxLQUFLc0MsTUFBTSxNQUFPLENBQUVwSCxLQUFNZzFELGtCQUFrQkUsV0FFNUNwd0QsS0FBS3NDLE1BQU0sV0FDWHRDLEtBQUt3N0IsT0FBTzl4QixRQUFVMUosS0FBSzB3RCxjQUFjMXdELEtBQUt3N0IsT0FBTzl4QixTQUduRDFKLEtBQUtzQyxNQUFNLG9CQUNYdEMsS0FBS3NDLE1BQU0sc0JBQXVCLENBQ2hDMnVELGdCQUFnQixFQUNoQkMsVUFBVSxFQUNWaDlDLEtBQU1sVSxLQUFLdzdCLE9BQU8yeUIsb0JBR3BCbnVELEtBQUt3N0IsT0FBTzJ5QixnQkFBa0IsS0FHaENudUQsS0FBS2tVLEtBQU8sS0FBT2xVLEtBQUtrVSxLQUN4QixJQUFJNjdDLFNBQVcvdkQsS0FBS3N3RCxTQUFTLElBQU10d0QsS0FBSzdOLEtBQUt5OEQsZUFBaUIsSUFBSyxLQUNqQyxPQUE5QjV1RCxLQUFLa1UsS0FBSzlHLE1BQU0yaUQsWUFFbEJBLFNBQVcvdkQsS0FBS3NDLE1BQU0sbUJBQW9CLENBQ3hDNHVELFVBQVUsRUFDVkQsZ0JBQWdCLElBRWRsQixXQUVGL3ZELEtBQUtrVSxLQUFPLENBQ1ZsVSxLQUFLa1UsS0FBSzdXLE1BQU0sRUFBRzB5RCxTQUFTLFdBQzVCL3ZELEtBQUs3TixLQUFLMDhELGdCQUNWN3VELEtBQUtrVSxLQUFLN1csTUFBTTB5RCxTQUFTLFlBQ3pCcDlELEtBQUssTUFJWCxNQUFNMC9ELGVBQWlCcnlELEtBQUtzd0QsU0FBU3R3RCxLQUFLMndELE1BQU1aLFNBQVUsS0FFMUQsR0FEQUEsU0FBVy92RCxLQUFLa1UsS0FBS2pZLE1BQU1vMkQsZ0JBQ1YsT0FBYnRDLFNBQ0YsSUFBSyxJQUFJbjZDLEVBQUksRUFBR3M0QyxHQUFLNkIsU0FBU3orRCxPQUFRc2tCLEVBQUlzNEMsR0FBSXQ0QyxJQUlwQyxPQUZObTZDLFNBQVNuNkMsR0FBR3hJLE1BQ1ZwTixLQUFLc3dELFNBQVMsSUFBTXR3RCxLQUFLN04sS0FBS3k4RCxlQUFpQixJQUFLLFlBRTNCLElBQXBCbUIsU0FBU242QyxFQUFJLElBR3BCNVYsS0FBS2tVLE1BQVEsS0FBT2xVLEtBQUtrVSxLQUFPLE1BQzdCdlosUUFBUW8xRCxTQUFTbjZDLEdBQUksTUFDckJpN0MsT0FDSDd3RCxLQUFLbXhELGNBQWNwQixTQUFTbjZDLEVBQUksSUFDaENBLEtBSU0sT0FGTm02QyxTQUFTbjZDLEdBQUd4SSxNQUNWcE4sS0FBS3N3RCxTQUFTLElBQU10d0QsS0FBSzdOLEtBQUsyOEQsY0FBZ0IsSUFBSyxZQUUxQixJQUFwQmlCLFNBQVNuNkMsRUFBSSxJQUdwQjVWLEtBQUtrVSxNQUFRLEtBQU9sVSxLQUFLa1UsS0FBTyxNQUM3QnZaLFFBQVFvMUQsU0FBU242QyxHQUFJLE1BQ3JCaTdDLE9BQ0g3d0QsS0FBSzZ4RCxjQUFjOUIsU0FBU242QyxFQUFJLElBQ2hDQSxLQUlNLE9BRk5tNkMsU0FBU242QyxHQUFHeEksTUFDVnBOLEtBQUtzd0QsU0FBUyxJQUFNdHdELEtBQUs3TixLQUFLNDhELGlCQUFtQixJQUFLLFlBRTdCLElBQXBCZ0IsU0FBU242QyxFQUFJLElBR3BCNVYsS0FBS2tVLE1BQVEsS0FBT2xVLEtBQUtrVSxLQUFPLE1BQzdCdlosUUFBUW8xRCxTQUFTbjZDLEdBQUksTUFDckJpN0MsT0FDSDd3RCxLQUFLNnhELGNBQWM5QixTQUFTbjZDLEVBQUksR0FBSSxhQUNwQ0EsS0FJTSxPQUZObTZDLFNBQVNuNkMsR0FBR3hJLE1BQ1ZwTixLQUFLc3dELFNBQVMsSUFBTXR3RCxLQUFLN04sS0FBSzY4RCxjQUFnQixJQUFLLFlBRTFCLElBQXBCZSxTQUFTbjZDLEVBQUksS0FHcEI1VixLQUFLa1UsTUFBUSxLQUFPbFUsS0FBS2tVLEtBQU8sTUFDN0J2WixRQUFRbzFELFNBQVNuNkMsR0FBSSxNQUNyQmk3QyxPQUNIN3dELEtBQUsreEQsY0FBY2hDLFNBQVNuNkMsRUFBSSxJQUNoQ0EsS0FNTixPQURBNVYsS0FBS3c3QixPQUFPODJCLFFBQVV0eUQsS0FBSzR3RCxPQUFPNXdELEtBQUtrVSxNQUNoQ2xVLEtBQUt3N0IsT0FHZCsyQixrQkFBbUJ2L0QsSUFBS3cvRCxZQUFhbHdELE1BQU8rMkIsWUFDMUMsTUFBTWw4QixNQUFRL00sS0FBS2dCLElBQUksRUFBR3NNLE9BQU84MEQsY0FVakMsT0FUSXIxRCxRQUFVTyxPQUFPNEUsU0FDbkIrMkIsV0FBVyxnQkFBZ0JybUMsYUFBYyxFQUN6Q3FtQyxXQUFXLGdCQUFnQnJtQyxhQUFlbUssTUFDOUIsVUFBUm5LLElBQ0ZxbUMsV0FBVyxnQkFBZ0JybUMsZUFBaUJtSyxNQUU1Q2s4QixXQUFXLGdCQUFnQnJtQyxXQUFhbUssT0FHckNrOEIsV0FTVC9vQyxtQkFBb0JtaUUsY0FBZS8rQyxZQUNqQyxNQUFNZy9DLCtCQUNFMXlELEtBQUsyeUQsMENBQ00sUUFBZmovQyxhQUNGQSxXQUFhLFlBRWYsTUFBTStqQyxVQUFZLENBQ2hCaDdDLEtBQU1nMkQsY0FBY2gyRCxLQUNwQnZCLEtBQU13WSxXQUNOTSxPQUFRMCtDLHlCQUF5QmozRCxHQUNqQ3BJLEtBQU1vL0QsY0FBYzE1RCxPQUVoQjY1RCxVQUFZL2pELE1BQU1sVCxPQUFPODdDLGlCQUN6Qm1iLElBQUl0OEIsd0JBQXdCLE9BQVFtOEIsY0FBYzd4RCxNQUFPLENBQzdEZzJCLGFBQWEsSUFFZixNQUFNeUMsV0FBYSxHQUNuQixJQUFJbDhCLE1BQVEsT0FDeUMsSUFBMUNzMUQsY0FBYzE1RCxNQUFNNFIsUUFBUThILElBQUl0VixPQUN6QzZDLEtBQUt1eUQsa0JBQ0gsS0FDQUUsY0FBYzE1RCxNQUFNNFIsUUFBUThILEdBQUd0VixNQUMvQnkxRCxJQUFJbGdELE1BQ0oybUIsaUJBR2lELElBQTFDbzVCLGNBQWMxNUQsTUFBTTRSLFFBQVFrSSxJQUFJMVYsT0FDekM2QyxLQUFLdXlELGtCQUNILEtBQ0FFLGNBQWMxNUQsTUFBTTRSLFFBQVFrSSxHQUFHMVYsTUFDL0J5MUQsSUFBSTkvQyxNQUNKdW1CLGlCQUdrRCxJQUEzQ281QixjQUFjMTVELE1BQU00UixRQUFRd2IsS0FBS2hwQixPQUMxQzZDLEtBQUt1eUQsa0JBQ0gsTUFDQUUsY0FBYzE1RCxNQUFNNFIsUUFBUXdiLElBQUlocEIsTUFDaEN5MUQsSUFBSXpzQyxJQUNKa1QsaUJBR29ELElBQTdDbzVCLGNBQWMxNUQsTUFBTTRSLFFBQVFvYixPQUFPNW9CLE9BQzVDNkMsS0FBS3V5RCxrQkFDSCxRQUNBRSxjQUFjMTVELE1BQU00UixRQUFRb2IsTUFBTTVvQixNQUNsQ3kxRCxJQUFJN3NDLE1BQ0pzVCxpQkFHaUQsSUFBMUNvNUIsY0FBYzE1RCxNQUFNNFIsUUFBUXVmLElBQUkvc0IsUUFDekNBLE1BQVE0UixPQUFPMGpELGNBQWMxNUQsTUFBTTRSLFFBQVF1ZixHQUFHL3NCLE9BQU94QyxRQUFRLFNBQVUsSUFDbkV3QyxRQUFVNFIsT0FBTzZqRCxJQUFJMW9DLE1BQ3ZCbVAsV0FBVyx5QkFBMEIsRUFDckNBLFdBQVcseUJBQTJCbDhCLFFBR3RDL0ssT0FBT0QsS0FBS2tuQyxZQUFZL25DLE9BQVMsSUFDL0JSLE9BQU8wdkMsTUFBTTZ3QixjQUNmLzVCLFFBQVFrSixNQUFNLGNBQWVuSCxrQkFFekJ1NUIsSUFBSTFwRCxPQUFPbXdCLGFBRW5CLE1BQU13NUIsZUFBaUIsR0FDdkIsSUFBSUMsZ0JBQWtCLEtBQ3RCLElBQUssTUFBTUMsUUFBUS95RCxLQUFLZ3pELGFBQWMsRUFDcEIsSUFBWkQsS0FBSyxLQUNQRCxnQkFBa0JGLElBQUloeUQsTUFBTXZQLFFBQzFCdWtCLEdBQ0VBLEVBQUVuWixPQUFTczJELEtBQUssR0FBR3QyRCxNQUNSLFVBQVhtWixFQUFFMWEsTUFDRndDLE9BQU9rWSxFQUFFdmlCLEtBQUtBLEtBQUs4SixTQUFXTyxPQUFPcTFELEtBQUssR0FBRzEvRCxLQUFLOEosVUFHeEQsTUFBTW1ILE9BQVNzdUQsSUFBSWh5RCxNQUFNdlAsUUFDdkJ1a0IsR0FDRUEsRUFBRW5aLE9BQVNzMkQsS0FBSyxHQUFHdDJELE1BQ1IsV0FBWG1aLEVBQUUxYSxNQUNGMGEsRUFBRXZpQixLQUFLQSxLQUFLaXZCLE1BQU1DLE9BQU83ZSxTQUFXcXZELEtBQUssR0FBRzEvRCxLQUFLaXZCLE1BQU1DLE9BQU83ZSxTQUU5RG92RCxnQkFBZ0IsSUFBTXh1RCxPQUFPLElBQy9CdXVELGVBQWUzaEUsS0FBSyxDQUNsQnNqQyxJQUFLbHdCLE9BQU8sR0FBRzdJLEdBQ2YscUJBQXNCcTNELGdCQUFnQixHQUFHcjNELEdBQ3pDLHVCQUF3QnEzRCxnQkFBZ0IsR0FBR3IyRCxPQVVqRCxPQU5JbzJELGVBQWV2aEUsT0FBUyxJQUN0QlIsT0FBTzB2QyxNQUFNNndCLGNBQ2YvNUIsUUFBUWtKLE1BQU0sa0JBQW1CcXlCLHNCQUU3QkQsSUFBSXp3Qix3QkFBd0IsT0FBUTB3QixpQkFFckNELElBT1R0aUUsZ0RBQ0UsSUFBSTJpRSxXQUFhcmpFLEtBQUs0UCxLQUFLQyxTQUFTLGlDQUNqQixrQ0FBZnd6RCxhQUNGQSxXQUFhLHVCQUVmLElBQUlQLHlCQUEyQjlpRSxLQUFLcWtCLFFBQVExRixNQUMxQzRyQixPQUFTQSxNQUFNOW1DLEtBQUtvSixPQUFTdzJELFlBQWtDLFVBQXBCOTRCLE1BQU05bUMsS0FBSzZILE9BZ0J4RCxPQWJFdzNELE1BQUFBLDJCQUlBQSwrQkFBaUNRLE9BQU92M0QsT0FBTyxDQUM3Q2MsS0FBTXcyRCxXQUNOLzNELEtBQU0sUUFDTnFVLE9BQVEsT0FFVmxRLEdBQUdDLGNBQWN3UixLQUNmbGhCLEtBQUs0UCxLQUFLQyxTQUFTLDBDQUdoQml6RCx5QkFRVGpiLFVBQVcwYixJQUNULE1BQU05L0QsS0FBTyxDQUNYNkIsZ0JBQWlCLEdBQ2pCeVYsUUFBUyxHQUNUeUQsTUFBTyxHQUNQdFksUUFBUyxHQUNUKy9CLFlBQWEsQ0FDWCsyQixPQUFRLElBRVY1aEMsTUFBTyxDQUNMb1QsUUFBUSxFQUNSOGpCLGdCQUFnQixJQUdwQixJQUFLLE1BQU1sdkQsTUFBTyxDQUNoQixNQUNBLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsTUFDQSxNQUNBLFlBRXVCLElBQVptZ0UsR0FBR25nRSxPQUNaSyxLQUFLNkIsZ0JBQWdCbEMsS0FBTyxDQUMxQm1LLE1BQU9PLE9BQU95MUQsR0FBR25nRSxRQUl2QixJQUFLLE1BQU1BLE1BQU8sQ0FBQyxNQUFPLE1BQU8sUUFBUyxRQUFTLE1BQU8sS0FBTSxXQUN2QyxJQUFabWdFLEdBQUduZ0UsT0FDWkssS0FBS3NYLFFBQVEzWCxLQUFPLENBQ2xCbUssTUFBT08sT0FBT3kxRCxHQUFHbmdFLGFBSUYsSUFBVm1nRSxHQUFHanBDLEtBQ1o3MkIsS0FBS3NYLFFBQVF1ZixHQUFLLENBQ2hCL3NCLE1BQU9nMkQsR0FBR2pwQyxLQUdkLElBQUssTUFBTWwzQixNQUFPLENBQUMsTUFBTyxtQkFDRCxJQUFabWdFLEdBQUduZ0UsT0FDWkssS0FBSythLE1BQU1wYixLQUFPbWdFLEdBQUduZ0UsTUFHekIsUUFBMEIsSUFBZm1nRSxHQUFHenBELFFBQXlCLENBQ3JDLE1BQU8zQyxPQUFRRixRQUFVc3NELEdBQUd6cEQsUUFBUXpOLE1BQU0sS0FDMUM1SSxLQUFLeUMsUUFBUTRULFFBQVUsQ0FDckJvekIsWUFBYS8xQixPQUNiazJCLGFBQWNwMkIsUUFVbEIsWUFQa0MsSUFBdkJzc0QsR0FBR2hGLGtCQUNaOTZELEtBQUt5QyxRQUFRcTRELGdCQUFrQnp3RCxPQUFPeTFELEdBQUdoRixrQkFFM0M5NkQsS0FBS3dpQyxZQUFZKzJCLE9BQVN1RyxHQUFHYixRQUN6QnhoRSxPQUFPMHZDLE1BQU02d0IsY0FDZi81QixRQUFRa0osTUFBTSxhQUFjbnRDLE1BRXZCQSxLQVVUL0MsZ0JBQWlCNEssS0FBTXVCLE1BQU0sT0FBVyxNQUFTLElBQy9DQSxLQUFPQSxLQUFLWCxjQUNaLElBQUlzM0QsU0FBVyxLQUNmLElBQUssSUFBSXZHLEVBQUksRUFBR3dHLEdBQUtyekQsS0FBS213RCxjQUFjNytELE9BQVF1N0QsRUFBSXdHLEdBQUl4RyxJQUN0RCxPQUFRN3NELEtBQUttd0QsY0FBY2dDLE9BQU90RixFQUFHLElBQ25DLElBQUssSUFPSCxHQU5BdUcsU0FBV3hqRSxLQUFLZ1IsTUFBTTJOLE1BQ3BCN04sTUFDRUEsS0FBS3JOLEtBQUs2SCxPQUFTQSxNQUNuQndGLEtBQUtyTixLQUFLb0osS0FBS1gsZ0JBQWtCVyxPQUNyQixPQUFYekcsUUFBbUIwSyxLQUFLck4sS0FBSytyQixXQUFXcHBCLFNBQVdBLFVBRXBEbzlELFNBQ0YsT0FBT0EsU0FFVCxNQUNGLElBQUssSUFDTCxJQUFLLElBQ0wsSUFBSyxJQUNILElBQUssTUFBTXJqRCxRQUFRbmdCLEtBQUtvZ0IsTUFDdEIsR0FDMkIsU0FBekJELEtBQUtFLFNBQVNDLFNBQ2MsTUFBMUJsUSxLQUFLbXdELGNBQWN0RCxJQUNPLFVBQTFCOThDLEtBQUtFLFNBQVMyNUMsU0FDYSxNQUExQjVwRCxLQUFLbXdELGNBQWN0RCxJQUNRLFNBQTFCOThDLEtBQUtFLFNBQVMyNUMsU0FDVyxNQUExQjVwRCxLQUFLbXdELGNBQWN0RCxLQUNqQixDQUFDLFFBQVMsUUFBUTE3RCxTQUFTNGUsS0FBS0UsU0FBUzI1QyxVQUM5QyxDQVFBLEdBTkF3SixnQkFEd0JyakQsS0FBSzY3QyxnQkFDUnI5QyxNQUNuQjdOLE1BQ0VBLEtBQUtyTixLQUFLNkgsT0FBU0EsTUFDbkJ3RixLQUFLck4sS0FBS29KLEtBQUtYLGdCQUFrQlcsT0FDckIsT0FBWHpHLFFBQW1CMEssS0FBS3JOLEtBQUsrckIsV0FBV3BwQixTQUFXQSxVQUVwRG85RCxTQUNGLE9BQU9BLFdBY3JCOWlFLGdCQUFpQjZpRSxJQUNmLE1BQU12eUQsTUFBUSxHQUdkLEdBRkFaLEtBQUtnekQsYUFBZSxRQUVNLElBQWZHLEdBQUd2QixRQUNaLElBQUssTUFBTXo2QixVQUFVZzhCLEdBQUd2QixRQUFTLENBQy9CLElBQUkvd0QsT0FBUSxHQUNtQixJQUEzQnMyQixPQUFPOWpDLE1BQU13TixPQUFPcEYsS0FDdEJvRixZQUFjYixLQUFLc3pELFlBQVluOEIsUUFDL0J2MkIsTUFBTTFQLEtBQUsyUCxRQUViczJCLE9BQU85akMsS0FBS3dOLE1BQU1wRixHQUFLLEtBQ3ZCbUYsTUFBTTFQLEtBQUtpbUMsUUFDWG4zQixLQUFLZ3pELGFBQWE5aEUsS0FBSyxDQUFDMlAsTUFBT3MyQixTQUluQyxRQUF5QixJQUFkZzhCLEdBQUdqdUQsT0FDWixJQUFLLE1BQU1yRSxTQUFTc3lELEdBQUdqdUQsT0FBUSxDQUM3QixNQUFNa3VELGVBQWlCcHpELEtBQUt1ekQsVUFBVSxRQUFTMXlELE1BQU1wRSxNQUNyRCxRQUF3QixJQUFiMjJELFNBQTBCLENBQ25DLE1BQU1JLE9BQVNKLFNBQVNsckMsV0FDeEJzckMsT0FBT25nRSxLQUFLNG1CLEtBQU9wWixNQUFNMUQsV0FDQyxJQUFmMEQsTUFBTTNQLE9BQ2ZzaUUsT0FBT25nRSxLQUFLK3JCLFdBQVdsdUIsS0FBTzJQLE1BQU0zUCxNQUV0QzBQLE1BQU0xUCxLQUFLK00sVUFBVXUxRCxhQUNoQixDQUNMLE1BQU12aEUsUUFBVSxRQUNVLElBQWY0TyxNQUFNM1AsT0FDZmUsUUFBUWYsS0FBTzJQLE1BQU0zUCxNQUV2QjBQLE1BQU0xUCxLQUFLd2pDLFNBQVNpQyxXQUFXOTFCLE1BQU1wRSxLQUFNb0UsTUFBTTFELE1BQU9sTCxXQUs5RCxRQUE0QixJQUFqQmtoRSxHQUFHTSxVQUNaLElBQUssTUFBTTV5RCxTQUFTc3lELEdBQUdNLFVBQVcsQ0FDaEMsTUFBTUwsZUFBaUJwekQsS0FBS3V6RCxVQUFVLFFBQVMxeUQsTUFBTXBFLE1BQ3JELFFBQXdCLElBQWIyMkQsU0FBMEIsQ0FDbkMsTUFBTUksT0FBU0osU0FBU2xyQyxXQUN4QnNyQyxPQUFPbmdFLEtBQUs0bUIsS0FBT3BaLE1BQU0xRCxNQUN6QnlELE1BQU0xUCxLQUFLK00sVUFBVXUxRCxjQUVyQjV5RCxNQUFNMVAsS0FDSndqQyxTQUFTaUMsV0FBVzkxQixNQUFNcEUsS0FBTW9FLE1BQU0xRCxNQUFPLENBQzNDZ0IsSUFBS2lTLFNBQVNrNkIsYUFDZGx3QixlQUFnQixjQU8xQixRQUF5QixJQUFkKzRDLEdBQUdwRyxPQUNaLElBQUssTUFBTXR3RCxRQUFRMDJELEdBQUdwRyxPQUFRLENBQzVCLE1BQU1xRyxlQUFpQnB6RCxLQUFLdXpELFVBQVUsUUFBUzkyRCxNQUMvQyxRQUF3QixJQUFiMjJELFNBQTBCLENBQ25DLE1BQU1JLE9BQVNKLFNBQVNsckMsV0FDeEJ0bkIsTUFBTTFQLEtBQUsrTSxVQUFVdTFELGNBRXJCNXlELE1BQU0xUCxLQUFLd2pDLFNBQVNrRCxXQUFXbjdCLE9BSXJDLE9BQU9tRSxNQU1UdFEsa0JBQW1CZ1UsUUFDakIsSUFBSXpELE1BQVEsS0FpQ1osR0FoQ0liLEtBQUtzd0QsU0FBUyxXQUFXaHhCLEtBQUtoN0IsT0FBTzdILE9BQ3ZDb0UsWUFBY2IsS0FBS3V6RCxVQUFVLFFBQVMsVUFBVyxDQUFFdjlELFFBQVEsSUFDdkRsRixPQUFPMHZDLE1BQU02d0IsY0FDZi81QixRQUFRa0osTUFBTSxHQUFHbDhCLE9BQU83SCw0QkFBNEJvRSxVQUU3Q2IsS0FBS3N3RCxTQUFTLFNBQVNoeEIsS0FBS2g3QixPQUFPN0gsT0FDNUNvRSxZQUFjYixLQUFLdXpELFVBQVUsUUFBUyxnQkFBaUIsQ0FBRXY5RCxRQUFRLElBQzVENkssUUFDSEEsWUFBY2IsS0FBS3V6RCxVQUFVLFFBQVMsUUFBUyxDQUFFdjlELFFBQVEsSUFDcEQ2SyxRQUNIQSxZQUFjYixLQUFLdXpELFVBQVUsUUFBUyxVQUFXLENBQUV2OUQsUUFBUSxNQUczRGxGLE9BQU8wdkMsTUFBTTZ3QixjQUNmLzVCLFFBQVFrSixNQUFNLEdBQUdsOEIsT0FBTzdILDBCQUEwQm9FLFVBRTNDYixLQUFLc3dELFNBQVMsT0FBT2h4QixLQUFLaDdCLE9BQU83SCxPQUMxQ29FLFlBQWNiLEtBQUt1ekQsVUFBVSxRQUFTLGlCQUFrQixDQUFFdjlELFFBQVEsSUFDOURsRixPQUFPMHZDLE1BQU02d0IsY0FDZi81QixRQUFRa0osTUFBTSxHQUFHbDhCLE9BQU83SCxtQ0FBbUNvRSxVQUVwRGIsS0FBS3N3RCxTQUFTLGNBQWNoeEIsS0FBS2g3QixPQUFPN0gsT0FDakRvRSxZQUFjYixLQUFLdXpELFVBQVUsUUFBUyxjQUFlLENBQUV2OUQsUUFBUSxJQUMzRGxGLE9BQU8wdkMsTUFBTTZ3QixjQUNmLzVCLFFBQVFrSixNQUFNLEdBQUdsOEIsT0FBTzdILGdDQUFnQ29FLFVBRWpEYixLQUFLc3dELFNBQVMsWUFBWWh4QixLQUFLaDdCLE9BQU83SCxRQUMvQ29FLFlBQWNiLEtBQUt1ekQsVUFBVSxRQUFTLFNBQVUsQ0FBRXY5RCxRQUFRLElBQ3REbEYsT0FBTzB2QyxNQUFNNndCLGNBQ2YvNUIsUUFBUWtKLE1BQU0sR0FBR2w4QixPQUFPN0gsMkJBQTJCb0UsVUFHbkRBLE1BQUFBLE1BQWdELENBTWxELE9BTG1CQSxNQUFNNnlELE1BQU0sQ0FDN0JyZ0UsS0FBTSxDQUNKOEosTUFBT21ILE9BQU9qUixNQUFNd04sT0FBT3BGLE1BS2pDLE1BQU1vN0IsU0FBV3Z5QixPQUFPalIsTUFBTStyQixZQUFZL29CLEtBQ3BDbWdDLE1BQVFwbUIsU0FBU3FtQixpQkFDckJueUIsT0FBTzdILEtBQ1A3TSxLQUFLNFAsS0FBS0MsU0FDUm8zQixTQUNJLGlDQUNBLG9DQUdGODhCLFNBQVcsQ0FDZno0RCxLQUFNLFFBQ051QixLQUFNKzVCLE1BQU0vNUIsS0FDWnBKLEtBQU0sQ0FDSm0rQixVQUFXZ0YsTUFBTWhGLFVBQ2pCcFgsZUFBZ0JvYyxNQUFNcGMsZUFDdEJnRixXQUFZLENBQ1Z0cEIsU0FBUyxFQUNURyxVQUFXNGdDLFNBQ1gzZ0MsUUFBUzJnQyxTQUNUN2dDLFFBQVEsR0FFVmlrQixLQUFNM1YsT0FBT2pSLE1BQU13TixPQUFPcEYsR0FDMUIwQixNQUFPbUgsT0FBT2pSLE1BQU13TixPQUFPcEYsS0FTL0IsT0FOSTNLLE9BQU8wdkMsTUFBTTZ3QixjQUNmLzVCLFFBQVFrSixNQUNOLDhCQUE4Qmw4QixPQUFPN0gsMkJBQ3JDazNELFVBR0dBLFNBT1RDLGdCQUFpQmhCLEtBQ2YsSUFBSWlCLHVCQUF3QixFQUM1QixJQUFLLE1BQU03Z0UsTUFBTyxDQUNoQixNQUNBLE1BQ0EsTUFDQSxNQUNBLE1BQ0EsTUFDQSxNQUNBLFlBRXdCLElBQWI0L0QsSUFBSTUvRCxNQUF3QjQvRCxJQUFJNS9ELEtBQU8sS0FDaEQ2Z0UsdUJBQXdCLEdBTTVCLE9BSEkvaUUsT0FBTzB2QyxNQUFNNndCLGNBQ2YvNUIsUUFBUWtKLE1BQU0sbUJBQW9CcXpCLHVCQUU3QkEsc0JBU1R2akUsa0JBQW1Cd2pFLFFBQ2JoakUsT0FBTzB2QyxNQUFNNndCLGNBQ2YvNUIsUUFBUWtKLE1BQU0sZUFBZ0JzekIsUUFFaEMsTUFBTTdELEtBQU9ELHdCQUF3QitELGNBQWNELE9BQU83RCxNQUMxRGp3RCxLQUFLN04sS0FBTzY5RCx3QkFBd0JnRSxRQUFRL0QsTUFDNUNqd0QsS0FBSzJ3RCxNQUFRWCx3QkFBd0JpRSxzQkFBc0JoRSxNQUMzRGp3RCxLQUFLbXdELGNBQWdCMkQsT0FBT0ksT0FDeEJwakUsT0FBTzB2QyxNQUFNNndCLGNBQ2YvNUIsUUFBUWtKLE1BQU0sdUJBQXdCeXZCLEtBQU1qd0QsS0FBSzdOLEtBQU02TixLQUFLMndELE9BRTlELElBQUlwL0MsZ0JBQWtCdlIsS0FBS20wRCxlQUFlTCxPQUFPNS9DLE1BQzdDcGpCLE9BQU8wdkMsTUFBTTZ3QixjQUNmLzVCLFFBQVFrSixNQUFNLGtCQUFtQmp2QixZQUdQLGNBQXpCdWlELE9BQU9NLGVBQ05wMEQsS0FBSzR6RCxnQkFBZ0JyaUQsWUFDRSxnQkFBekJ1aUQsT0FBT00saUJBRVA3aUQsZ0JBQWtCdlIsS0FBS3EwRCxVQUFVOWlELFlBRW5DLE1BQU1raEQsY0FBZ0IsQ0FDcEJoMkQsS0FBTThVLFVBQVU5VSxLQUNoQjFELE1BQU9pSCxLQUFLeTNDLFVBQVVsbUMsV0FDdEIzUSxZQUFhWixLQUFLczBELFVBQVUvaUQsWUFHOUIsUUFBK0IsSUFBcEJ1aUQsT0FBT1MsV0FBZ0QsSUFBcEJULE9BQU9TLFNBQ25ELE9BQU85QixjQUdULGFBRGtCenlELEtBQUt3MEQsYUFBYS9CLGNBQWVxQixPQUFPNWpELFFBUzVENWYsZ0JBQWlCbWtFLFVBQ1gzakUsT0FBTzB2QyxNQUFNNndCLGNBQ2YvNUIsUUFBUWtKLE1BQU0saUJBQWtCaTBCLFVBRWxDLElBQUssTUFBTXpoRSxNQUFPLENBQUMsTUFBTyxNQUFPLE1BQU8sTUFBTyxNQUFPLE1BQU8sWUFDOUIsSUFBbEJ5aEUsU0FBU3poRSxPQUNsQnloRSxTQUFTemhFLE1BQVEsR0F1QnJCLFlBcEI0QixJQUFqQnloRSxTQUFTLytELE1BQ2QrK0QsU0FBUy8rRCxLQUFPLEdBQ2xCKytELFNBQVMvK0QsS0FBTyxFQUNQKytELFNBQVMvK0QsS0FBTyxHQUN6QisrRCxTQUFTLytELElBQU0rK0QsU0FBUy8rRCxJQUFNLEdBQUssR0FHbkMrK0QsU0FBUy8rRCxJQUFNLFNBR1EsSUFBaEIrK0QsU0FBU3ZxQyxLQUNFLFNBQWhCdXFDLFNBQVN2cUMsR0FDWHVxQyxTQUFTdnFDLElBQU0sRUFDVSxTQUFoQnVxQyxTQUFTdnFDLEtBQ2xCdXFDLFNBQVN2cUMsSUFBTSxJQUdmcDVCLE9BQU8wdkMsTUFBTTZ3QixjQUNmLzVCLFFBQVFrSixNQUFNLGNBQWVpMEIsVUFFeEJBLFVDMW1DSixNQUFNQyxnQ0FBZ0M5aUQsT0FDM0NtRixrQkFBbUJwTCxNQUNqQjdGLE1BQU1pUixrQkFBa0JwTCxNQUN4QkEsS0FDRzRDLEtBQUssZ0JBQWtCM2UsS0FBSzRQLEtBQUt5d0QsS0FBTyxLQUN4Q3p3QixLQUFLLFdBQVksWUFDcEI3ekIsS0FDRzRDLEtBQUssb0JBQ0xnSyxHQUFHLFVBQVUsU0FBVW9zQixHQUN0QjU0QixFQUFFLDhCQUE4QmpQLEtBQzlCLGNBQ0FrekQsd0JBQXdCMkUsZUFBZTVvRCxFQUFFL0wsTUFBTTB2QyxXQUdsRDhSLFFBQVEsVUFDWDcxQyxLQUFLNEMsS0FBSyw4QkFBOEJnSyxHQUFHLFNBQVMsU0FBVW9zQixHQUM1RCxNQUFNaXdCLHNCQUF3QjdvRCxFQUFFL0wsTUFDN0IwdkMsTUFDQXRpQyxNQUFNLGtDQUNIK1AsT0FBU3BSLEVBQUUsZUFDYjZvRCxzQkFDRnozQyxPQUNHeFIsS0FBSy9iLEtBQUs0UCxLQUFLQyxTQUFTLG9DQUN4Qm8xRCxTQUFTLFNBRVoxM0MsT0FDR3hSLEtBQUsvYixLQUFLNFAsS0FBS0MsU0FBUywyQkFDeEJpd0IsWUFBWSxZQVVyQm5nQyx5QkFDRSxNQUFNdWtFLE9BQVMsR0FDZkEsT0FBTzVqRCxPQUFTbkUsRUFBRSxvQkFBb0IyakMsTUFBTW1oQixPQUM1Q2lELE9BQU9NLGNBQWdCcm9ELEVBQUUsbUJBQW1CMmpDLE1BQU1taEIsT0FDOUMvL0QsT0FBTzB2QyxNQUFNNndCLGNBQ2YvNUIsUUFBUWtKLE1BQU0sZUFBZ0JzekIsT0FBTzVqRCxRQUV2QzRqRCxPQUFPN0QsS0FBT0Qsd0JBQXdCK0QsY0FDcENob0QsRUFBRSxvQkFBb0IyakMsTUFBTW1oQixRQUU5QmlELE9BQU9JLE9BQVNub0QsRUFBRSxXQUFXMmpDLE1BQU1taEIsT0FDbkMsSUFBSTM4QyxLQUFPbkksRUFBRSw4QkFBOEIyakMsTUFBTW1oQixPQVFqRCxPQVBJLy9ELE9BQU8wdkMsTUFBTTZ3QixjQUNmLzVCLFFBQVFrSixNQUFNLGdCQUFpQixLQUFPdHNCLEtBQU8sTUFFckIsTUFBdEJBLEtBQUtBLEtBQUs1aUIsVUFDWjRpQixNQUFRLEtBRVY0L0MsT0FBTzUvQyxLQUFPQSxLQUNQNC9DLE9BT1R2a0UseUJBQTBCb2MsTUFDcEI3YSxPQUFPMHZDLE1BQU02d0IsY0FDZi81QixRQUFRa0osTUFBTSxPQUFRNzBCLE1BRXhCLE1BQU1tb0QsYUFBZVksd0JBQXdCSSxZQUN2Qy83RCxNQUFRLElBQUltM0Qsa0JBQ1o2RSxtQkFBcUJoOEQsTUFBTWk4RCxZQUFZbEIsUUFFekNoakUsT0FBTzB2QyxNQUFNNndCLGNBQ2YvNUIsUUFBUWtKLE1BQU0sZ0JBQWlCdTBCLGNBRWpDMTFELEdBQUdDLGNBQWN3UixLQUNmLFdBQ0Vpa0QsYUFBYTFoRSxNQUFNNkgsTUFBTU4sY0FDekIsS0FDQW02RCxhQUFhMWhFLE1BQU1vSixZQUVqQnM0RCxhQUFheGhELE1BQU10QixRQUFPLEdBS2xDZ2pELE9BQVE3akMsUUFDTixHQUF3QixrQkFBcEJBLE9BQU9xZCxTQVV3QyxLQUFqRDFpQyxFQUFFLDhCQUE4QjJqQyxNQUFNbWhCLFFBQ3JDei9CLE9BQU90ZixVQUVSaE0sTUFBTW12RCxPQUFPN2pDLFlBYmYsQ0FDRSxNQUFNMTFCLFFBQVVzMEQsd0JBQXdCMkUsZUFDdEM1b0QsRUFBRSw4QkFBOEIyakMsT0FFbEN4aUMsY0FBYzQ2QixnQkFBZ0Jwc0MsU0FBU0UsTUFBSyxJQUNuQ3lELEdBQUdDLGNBQWN3UixLQUFLbGhCLEtBQUs0UCxLQUFLQyxTQUFTLG1CQWdCdERsUSxvQkFBcUI4RCxLQUFPLElBQzFCQSxLQUFLb2dFLFVBQVl6RCx3QkFBd0JrRixrQkFDekM3aEUsS0FBS2c2RCxTQUFXMkMsd0JBQXdCK0QsY0FBYyxNQUN0RCxNQUFNcG9ELFdBQWFDLGVBQ2pCLGtEQUNBdlksTUFFRixPQUFPLElBQUk0aEIsU0FBUUMsVUFDTCxJQUFJdy9DLHdCQUNkLENBQ0VsaEUsTUFBT0gsS0FBS0csTUFDWmtJLFFBQVNpUSxLQUNUdFksS0FDQXdlLFFBQVMsQ0FDUHNqRCxPQUFRLENBQ05yckMsS0FBTSxxQ0FDTm5iLE1BQU8vZSxLQUFLNFAsS0FBS0MsU0FBUyxlQUMxQnFTLFNBQVU0aUQsd0JBQXdCVSxhQUVwQ0MsY0FBZSxDQUNidnJDLEtBQU0scUNBQ05uYixNQUFPL2UsS0FBSzRQLEtBQUtDLFNBQVMsdUJBRTVCNjFELEdBQUksQ0FDRnhyQyxLQUFNLCtCQUNObmIsTUFBTy9lLEtBQUs0UCxLQUFLQyxTQUFTLGtCQUloQyxDQUNFaVksUUFBUyxDQUFDLE9BQVEsU0FBVSxrQkFDNUJvdkIsTUFBTyxNQUdQNzBCLFFBQU8sT0FLakJmLE1BQU1xa0QsS0FBSyxTQUFTLEtBQ2QzbEUsS0FBS0MsUUFBUUMsSUFBSSx3QkFBd0JDLFNBQzNDc2tCLE9BQU82N0Msa0JBQW9CQSxzQkNwSi9CLE1BQU1zRixzQkFBc0JDLGdCQUMxQjN4RCxjQUNFZ0MsUUFDQTlGLEtBQUswMUQsUUFBVSxHQUdOQywwQkFDVCxPQUFPM29CLFFBQVFDLE1BQU1ybUIsWUFBWTlnQixNQUFNNnZELGFBQWMsQ0FDbkRsNUQsS0FBTSxXQUNONDJDLE9BQVEsS0FJRHQvQiwwQkFDVCxNQUFPLFFBR0w2aEQsaUJBQ0YsTUFBTyxJQUlKLE1BQU1DLFNBQ1h0bUUsa0JBQW1CdW1FLFVBQ2pCbjNELE9BQU9vM0QsWUFBYyxJQUFJUCxjQUN6QixNQUFNbmlELEtBQU96akIsS0FBS29DLEtBQUtxaEIsS0FDdkJ5aUQsU0FBUzVrRSxLQUFLLENBQ1p1TCxLQUFNLFdBQ05qSixNQUFPLGVBQ1B3aUUsTUFBTyxjQUNQbHNDLEtBQU0sc0NBQ051MUIsUUFBU2hzQyxLQUNUNGlELE1BQU8sQ0FDTCxDQUNFcmxELFFBQVEsRUFDUmtaLEtBQU0seUJBQ05ydEIsS0FBTSxXQUNOMU0sT0FBUUgsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLHNCQUNsQzBELE1BQU8sZ0JBQ1AwaUUsUUFBUzVsRSxNQUFBQSxjQUFzQjRjLGNBQWNpcEQsZUFBZXZsRCxTQUU5RCxDQUNFQSxRQUFRLEVBQ1JrWixLQUFNLG1CQUNOcnRCLEtBQU0sYUFDTjFNLE9BQVFILEtBQUtJLFNBQVNGLElBQUksT0FBUSx1QkFDbEMwRCxNQUFPLHdCQUNQMGlFLFFBQVM1bEUsTUFBQUEsY0FDRDRjLGNBQWNrcEQsbUJBQW1CeGxELFNBRTNDLENBQ0V3Z0IsUUFBUSxFQUNSdEgsS0FBTSxtQkFDTnJ0QixLQUFNLGVBQ05qSixNQUFPLHFCQUNQMGlFLFFBQVM1bEUsZUFDRG9rRSx3QkFBd0IvNEQsT0FBTyxDQUNuQ25JLE1BQU81RCxLQUFLNFAsS0FBS0MsU0FBUyx5QkFHaEMsQ0FDRW1SLFFBQVEsRUFDUmtaLEtBQU0scUJBQ04yb0IsTUFBTyxZQUNQaDJDLEtBQU0sV0FDTjFNLE9BQVFILEtBQUtJLFNBQVNGLElBQUksT0FBUSxhQUNsQzBELE1BQU8sZ0JBQ1AwaUUsUUFBUzVsRSxNQUFBQSxjQUFzQjRjLGNBQWNtcEQsYUFBYXpsRCxTQUU1RCxDQUNFd2dCLFFBQVEsRUFDUnRILEtBQU0saUNBQ05ydEIsS0FBTSxXQUNOakosTUFBTyxnQkFDUDBpRSxRQUFTMTNDLFNBQVM4M0MsaUJBRXBCLENBQ0VsbEMsUUFBUSxFQUNSdEgsS0FBTSxjQUNOcnRCLEtBQU0sWUFDTmpKLE1BQU8saUJBQ1AwaUUsUUFBUzVsRSxlQUFrQjRjLGNBQWNxcEQsZ0JBTWpEaG5FLHNCQUF1QmdHLElBQUtvVyxLQUFNdFksTUFDaEMsTUFBTWdnQixLQUFPempCLEtBQUtvQyxLQUFLcWhCLEtBQ2pCbWpELFdBQWE3cUQsS0FBSzRDLEtBQUssOEJBQThCZ0IsU0FDM0RpbkQsV0FBVzNCLFNBQVMsYUFDaEJ4aEQsTUFDRm1qRCxXQUFXQyxNQUNULCtEQUNFN21FLEtBQUs0UCxLQUFLQyxTQUFTLG1CQUNuQixzQ0FHTisyRCxXQUFXQyxNQUNULDZEQUNFN21FLEtBQUs0UCxLQUFLQyxTQUFTLGlCQUNuQixrREFFSmtNLEtBQ0c0QyxLQUFLLDZCQUNMeUksT0FBTXppQixPQUFTMlksY0FBY3VDLFNBQVNsYixTQUN6Q29YLEtBQ0c0QyxLQUFLLCtCQUNMeUksT0FBTXppQixPQUFTaXdDLHVCQUF1QjdvQyxPQUFPcEgsVUM3RzdDLE1BQU1taUUsV0FDQUMsa0NBQ1QsTUFBTyxDQUFDLFFBR1ZwbkUsNkJBQThCb1AsT0FBUStCLE1BQ3BDLEdBQ0VBLEtBQUtrbkMsVUFDTDh1QixXQUFXQyxxQkFBcUJ4bEUsU0FBU3VQLEtBQUtrbkMsVUFDOUMsQ0FDQSxNQUFNZ3ZCLFNBQVdqNEQsT0FBT25DLE1BQU1uSixLQUFLMkwsS0FDN0JvRixFQUFJMUQsS0FBSzBELEVBQUl3eUQsU0FBVyxFQUN4QjNqQixFQUFJdnlDLEtBQUt1eUMsRUFBSTJqQixTQUFXLEVBQ3hCN3ZCLE9BQVM2dkIsU0FDVDl2QixNQUFROHZCLFNBQ2QsSUFBSUMsaUJBQW1CbDRELE9BQU94QyxPQUFPeTVELFdBQVd2a0UsUUFBTzZMLE1BQ3JELE1BQU1zMUMsRUFBSXQxQyxJQUFJc0IsT0FDZCxPQUNFZCxPQUFPbzVELFFBQVF0a0IsRUFBRXB1QyxFQUFHQSxFQUFHQSxFQUFJMGlDLFFBQzNCcHBDLE9BQU9vNUQsUUFBUXRrQixFQUFFUyxFQUFHQSxFQUFHQSxFQUFJbE0sV0FJL0IsR0FESzh2QixpQkFBaUJ2bEUsU0FBUXVsRSxpQkFBbUJsNEQsT0FBT3hDLE9BQU9zVixZQUV4RCxTQURDL1EsS0FBS2tuQyxTQUVULENBQ0UsTUFBTWhELFdBQWFYLFNBQVNoM0IsU0FBU3ZNLE1BQ2hDa2tDLEtBQUtBLE1BQ1J2bEMsR0FBR0MsY0FBY2tXLE1BQU0sZ0JBR3pCLE1BQU11eUIsT0FBUyxHQUtmLEdBSkFBLE9BQU8vc0MsUUFBVSxDQUNmMEIsTUFBTzlNLEtBQUtvQyxLQUFLeUssTUFHZG82RCxpQkFBaUJ2bEUsT0FnQnBCLElBQUssTUFBTUwsS0FBSzRsRSxpQkFDVjVsRSxFQUFFOEgsTUFBTWd0QyxpQkFDVmdDLE9BQU9yMkMsUUFBVVQsRUFBRThILE1BQU04akIsT0FDekJwaUIsV0FBV29tQyxjQUNULEtBQ0FqeEMsS0FBSzRQLEtBQUtZLE9BQU8sbUNBQW9DLENBQ25EM0QsS0FBTXhMLEVBQUU4SCxNQUFNMEQsS0FDZDZGLE1BQU9zaUMsS0FBS0EsT0FFZG1ELGFBekJzQixDQUM1QixNQUFNZ3ZCLGVBQWlCbm5FLEtBQUt1aEIsTUFBTWlkLFFBQVEvOEIsUUFDeENpZ0IsS0FBT0EsRUFBRUMsWUFFWCxJQUFLLE1BQU1ELEtBQUt5bEQsZUFDZGh2QixPQUFPcjJDLFFBQVUsQ0FBQzRmLEdBQ2xCN1csV0FBV29tQyxjQUNULEtBQ0FqeEMsS0FBSzRQLEtBQUtZLE9BQU8sbUNBQW9DLENBQ25EM0QsS0FBTTZVLEVBQUVDLFVBQVU5VSxLQUNsQjZGLE1BQU9zaUMsS0FBS0EsT0FFZG1ELFlDbkRYLE1BQU1pdkIsOEJBQThCQyxTQUN6Q2xnRCxrQkFBbUJwTCxNQUNqQjdGLE1BQU1pUixrQkFBa0JwTCxNQUNwQi9iLEtBQUtvQyxLQUFLcWhCLE9BQ1oxSCxLQUNHNEMsS0FBSyxrQkFDTGlsQixPQUNDLHdFQUNFNWpDLEtBQUs0UCxLQUFLQyxTQUFTLDhCQUNuQixhQUVOa00sS0FBSzRDLEtBQUssMkJBQTJCeUksT0FBTSxLQUN6QyxJQUFJcEYsT0FDRixDQUNFcGUsTUFBTzVELEtBQUs0UCxLQUFLQyxTQUFTLDZCQUMxQi9ELFFBQVM5TCxLQUFLNFAsS0FBS0MsU0FBUyxnQ0FDNUJvUyxRQUFTLENBQ1A2NUMsUUFBUyxDQUNQNWhDLEtBQU0sK0JBQ05uYixNQUFPL2UsS0FBSzRQLEtBQUtDLFNBQVMsK0JBQzFCcVMsU0FBVXhoQixnQkFDRlYsS0FBS0ksU0FBUzZnQixJQUFJLE9BQVEsc0JBQXVCLEdBQ3ZEd0QsT0FBTzZpRCxTQUFTeDBDLFdBR3BCakwsTUFBTyxDQUNMcVMsS0FBTSw2QkFDTm5iLE1BQU8vZSxLQUFLNFAsS0FBS0MsU0FBUyxVQUMxQnFTLFNBQVUsU0FHZHdJLFFBQVMsU0FFWCxJQUNBckksUUFBTyxRQ2xDVixNQUFNa2xELGdDQUFnQ0Msb0JBQzNDcmdELGtCQUFtQnBMLE1BQ2pCN0YsTUFBTWlSLGtCQUFrQnBMLE1BQ3hCLElBQUkwckQsWUFBYSxFQUNqQixHQUF1QixPQUFuQnpuRSxLQUFLNFAsS0FBS3l3RCxLQUNab0gsWUFBYSxPQUNSLFFBQTJCLElBQWhCem5FLEtBQUswbkUsT0FDckIsSUFBSyxNQUFNaGxFLEtBQUtGLE9BQU9rYyxPQUFPMWUsS0FBSzBuRSxPQUFPem5FLFNBQ3BDeUMsRUFBRTI5RCxPQUFTcmdFLEtBQUs0UCxLQUFLeXdELE9BQ3ZCb0gsWUFBYSxHQUlkQSxhQUNIMXJELEtBQ0c0QyxLQUFLLDJCQUNMaWxCLE9BQ0MsNENBQ0U1akMsS0FBSzRQLEtBQUtDLFNBQVMsNEJBQ25CLEtBQ0E3UCxLQUFLNFAsS0FBS0MsU0FBUyw0QkFDbkIsUUFFTmtNLEtBQUs0QyxLQUFLLDJCQUEyQnlJLE9BQU0sS0FDekMsTUFBTW5jLFFBQ0osTUFDQWpMLEtBQUs0UCxLQUFLQyxTQUFTLDhCQURuQixVQUlBN1AsS0FBSzRQLEtBQUtDLFNBQVMsb0NBSm5CLFVBT0E3UCxLQUFLNFAsS0FBS0MsU0FBUyx5Q0FQbkIsVUFVQTdQLEtBQUs0UCxLQUFLQyxTQUFTLHdDQVZuQixVQWFBN1AsS0FBSzRQLEtBQUtDLFNBQVMsb0NBQ25CLE9BQ0YsSUFBSW1TLE9BQ0YsQ0FDRXBlLE1BQU81RCxLQUFLNFAsS0FBS0MsU0FBUyw0QkFDMUIvRCxRQUFTYixRQUNUZ1gsUUFBUyxHQUNUeUksUUFBUyxTQUVYLElBQ0FySSxRQUFPLFFDL0NWLE1BQU1zbEQsMkJBQTJCQyxlQUN0Q3pnRCxrQkFBbUJwTCxNQUNqQjdGLE1BQU1pUixrQkFBa0JwTCxNQUN4QkEsS0FDRzRDLEtBQUssMkJBQ0xpbEIsT0FDQywyQkFDRTVqQyxLQUFLNFAsS0FBS0MsU0FBUyxzQkFDbkIsUUFFTmtNLEtBQUs0QyxLQUFLLGlCQUFpQnlJLE9BQU0sS0FDL0IwOUMsd0JBQXdCLzRELE9BQU8sQ0FDN0JuSSxNQUFPNUQsS0FBSzRQLEtBQUtDLFNBQVMsNEJDVDNCLE1BQU1nNEQsa0JBQWtCcm5ELFNBQzdCdE0sWUFBYXpRLEtBQU04MkMsY0FDTyxJQUFiOTJDLEtBQUs4SyxNQUNkOUssS0FBSzhLLElBQU0sZ0RBRWIySCxNQUFNelMsS0FBTTgyQyxTQUNabnFDLEtBQUttcUMsUUFBVUEsUUFHakI3NUMsYUFDRSxJQUFLMFAsS0FBSzAzRCxRQUVSLE9BQU9yNEQsR0FBR0MsY0FBY2tXLE1BQU01bEIsS0FBSzRQLEtBQUtDLFNBQVMsa0JBRW5ELE1BQU1rNEQsTUFBUTMzRCxLQUFLM00sS0FBS0EsS0FBS3NrRSxNQUN2QkMsT0FBUyxHQUNmLElBQUlDLDRCQUlKLEdBSEFGLE1BQU1HLFlBQWM1cUQsY0FBYzIyQixVQUFVOHpCLE1BQU1HLG9CQUN2QyxJQUFJNW5FLEtBQUt5bkUsTUFBTUcsYUFBYTduRSxLQUFLLENBQUVLLE9BQU8sS0FBU0csTUFDMUQ4QixTQUFTb2xFLE1BQU1HLGFBRWpCSCxNQUFNRyxhQUNOSCxNQUFNRyxZQUFjOTNELEtBQUtqSCxNQUFNMUYsS0FBS0EsS0FBS3NYLFFBQVFrSSxHQUFHMVYsUUFFcEQwNkQsa0NBQW9DLElBQUk1aUQsU0FBUUMsVUFDOUMsTUFBTTZpRCxtQkFDSkosTUFBTUcsWUFBYzkzRCxLQUFLakgsTUFBTTFGLEtBQUtBLEtBQUtzWCxRQUFRa0ksR0FBRzFWLE1BQ2hENjZELHFCQUF1QkwsTUFBTUcsWUFBY0MsbUJBQzNDMWtFLEtBQU8sQ0FDWEcsTUFBTyxJQUNQa0ksUUFBUzlMLEtBQUs0UCxLQUFLWSxPQUFPLDRCQUE2QixDQUNyRDYzRCxpQkFBa0JqNEQsS0FBS2pILE1BQU0xRixLQUFLQSxLQUFLc1gsUUFBUWtJLEdBQUcxVixNQUNsRDQ2RCxtQkFDQUMscUJBQ0FFLG9CQUFxQlAsTUFBTUcsWUFDM0I3RixNQUFPanlELEtBQUt2RCxPQUVkb1YsUUFBUyxDQUNQd3ZDLE9BQVEsQ0FDTnYzQixLQUFNLCtCQUNObmIsTUFBTy9lLEtBQUs0UCxLQUFLQyxTQUFTLGVBQzFCcVMsU0FBVSxJQUNEb0QsU0FBUSxJQUduQm9zQyxRQUFTLENBQ1B4M0IsS0FBTSwrQkFDTm5iLE1BQU8vZSxLQUFLNFAsS0FBS0MsU0FBUyxnQkFDMUJxUyxTQUFVLEtBQ1I2bEQsTUFBTVEsVUFBWUosbUJBQ2xCSixNQUFNRyxZQUFjRSxxQkFDYjlpRCxTQUFRLE1BSXJCb0YsUUFBUyxTQUNUNUMsUUFBUyxDQUFDLE9BQVEsV0FFcEIsSUFBSTlGLE9BQU92ZSxNQUFNNGUsUUFBTyxPQUVyQjRsRCw2QkFBNkIsT0FFcEMsSUFBSyxNQUFPN2tFLElBQUttSyxTQUFVL0ssT0FBT2dDLFFBQVF1akUsT0FDbkN4NkQsT0FBMkIsSUFBbEJPLE9BQU9QLFFBQ3JCeTZELE9BQU8xbUUsV0FBVzhPLEtBQUtvNEQsY0FBY3BsRSxJQUFLbUssUUFFNUMsTUFDTTA0QixZQUFjNzFCLEtBQUszTSxLQUFLQSxLQUFLd2lDLFlBQVkxNEIsTUFDekN3TyxXQUFhQyxlQUZGLCtDQUUyQixDQUFFaXFCLFlBQWEraEMsU0FDM0QsYUFBYWhtRSxZQUFZK0osT0FBTyxDQUM5QjNKLEtBQU1wQyxLQUFLb0MsS0FBS3lKLEdBQ2hCVCxRQUFTcEosWUFBWXFKLFdBQVcsQ0FBRWxDLE1BQU9pSCxLQUFLakgsUUFDOUNnQyxPQUFRaUYsS0FBS3ZELEtBQ2JmLFFBQVNpUSxPQUlicmIsb0JBQXFCMlMsZUFBZ0I5RixPQUNuQyxJQUFJdWhDLG1CQUNBYixLQUVGQSxLQURFM3dCLGNBQWMyMkIsVUFBVTFtQyxjQUNaLElBQUlqTixLQUFLaU4sT0FBT2xOLEtBQUssQ0FBRUssT0FBTyxLQUFTRyxNQUU5QzhCLFNBQVM0SyxPQUVsQixNQUFNczZDLFVBQVl6M0MsS0FBS2pILE1BQU0xRixLQUFLQSxLQUNsQyxPQUFRNFAsZ0JBQ04sSUFBSyxZQUNIeTdCLG1CQUFxQjl1QyxLQUFLNFAsS0FBS0MsU0FBUyxrQkFDeENPLEtBQUtqSCxNQUFNd3NCLFdBQVdzWSxLQUFNLENBQUV4VSxhQUFhLElBQzNDLE1BQ0YsSUFBSyxTQUNIcVYsbUJBQXFCOXVDLEtBQUs0UCxLQUFLQyxTQUFTLHFCQUN4Q08sS0FBS3E0RCxnQkFBZ0J4NkIsTUFDckIsTUFDRixJQUFLLGNBQ0hhLG1CQUFxQjl1QyxLQUFLNFAsS0FBS0MsU0FBUyxvQkFDeENPLEtBQUtqSCxNQUFNb25ELE1BQU0xSSxVQUFVOXNDLFFBQVFrSSxHQUFHMVYsTUFBUTBnQyxNQUM5QyxNQUNGLElBQUssUUFDSGEsbUJBQXFCOXVDLEtBQUs0UCxLQUFLQyxTQUFTLGdCQUN4Q08sS0FBS2pILE1BQU1tUSxPQUFPLENBQ2hCLGlDQUNFdXVDLFVBQVV2aUQsZ0JBQWdCTyxJQUFJMEgsTUFBUTBnQyxPQUc5QyxNQUFPLENBQUVhLG1CQUFvQmIsTUFJL0J2dEMsc0JBQXVCNk0sT0FDckIsTUFBTTBPLFNBQVdqRyxhQUFhaUcsU0FDOUIsSUFBSUYsV0FBYUMsZUFBZUMsU0FBVSxJQUMxQyxNQUFNaFIsY0FBZ0JqSixZQUFZK0osT0FBTyxDQUN2QzNKLEtBQU1wQyxLQUFLb0MsS0FBS3lKLEdBQ2hCVCxRQUFTcEosWUFBWXFKLFdBQVcsQ0FBRWxDLE1BQU9pSCxLQUFLakgsUUFDOUNnQyxPQUFRbkwsS0FBSzRQLEtBQUtZLE9BQU8sb0JBQXFCLENBQzVDNnhELE1BQU9qeUQsS0FBS3ZELE9BRWRmLFFBQVNpUSxPQUVMaE0sV0FBYTlFLFFBQVF5OUQsVUFDM0IsUUFBMkIsSUFBaEIzNEQsS0FBS3JPLFFBQTBDLElBQWhCcU8sS0FBS3JPLE9BQWMsQ0FDM0QsTUFBTWluRSxXQUFhcDdELE1BQ25Cd08sS0FBT2hNLEtBQUs0TyxLQUFLLGNBQWMsR0FDL0I1QyxLQUFLcFksUUFBUW9KLE9BQVNqSixPQUNwQkMsS0FBS0MsVUFBVSxDQUNieUksU0FBVTJELEtBQUtqSCxNQUFNMEMsR0FDckJzSSxhQUFhLEVBQ2I4QixRQUFTLENBQ1BpQixPQUFReXhELFdBQ1IzeEQsT0FBUTJ4RCxlQUlkLE1BQU1DLFlBQWM1eUQsYUFBYThHLFlBQVlmLFlBQ3ZDNnNELFlBQVlDLHNCQUNaRCxZQUFZcGtDLGNBQ2xCb2tDLFlBQVk3N0Msa0JBSWhCcnNCLGFBQWMrQyxLQUFNODJDLFNBQ2xCLFFBQ2lDLElBQXhCbnFDLEtBQUttcUMsUUFBUTU2QixhQUNXLElBQXhCdlAsS0FBS21xQyxRQUFRdXVCLE9BQ3BCLENBQ0EsSUFBSWg0RCxLQUNBaTRELEtBRXdCLE9BQXhCMzRELEtBQUttcUMsUUFBUTU2QixRQUNmN08sS0FBTzlRLEtBQUtnUixNQUFNOVEsSUFBSWtRLEtBQUttcUMsUUFBUXV1QixRQUNuQ0MsS0FBT2o0RCxLQUFLd25CLFlBRVp5d0MsS0FBTzM0RCxLQUFLbXFDLFFBQVE1NkIsT0FBTzNPLE1BQU05USxJQUFJa1EsS0FBS21xQyxRQUFRdXVCLFFBQVF4d0MsV0FFNUQsSUFBSyxJQUFJdFMsRUFBSSxFQUFHczRDLEdBQUt5SyxLQUFLdGxFLEtBQUswNUQsT0FBT3o3RCxPQUFRc2tCLEVBQUlzNEMsR0FBSXQ0QyxJQUNoRCtpRCxLQUFLdGxFLEtBQUswNUQsT0FBT24zQyxHQUFHNGUsTUFBUXgwQixLQUFLdkUsS0FDbkNrOUQsS0FBS3RsRSxLQUFLMDVELE9BQU9uM0MsR0FBS2dSLFlBQVkreEMsS0FBS3RsRSxLQUFLMDVELE9BQU9uM0MsR0FBSXZpQixPQUkvQixPQUF4QjJNLEtBQUttcUMsUUFBUTU2QixjQUNUN08sS0FBS3dJLE9BQU8sQ0FDaEIsY0FBZXl2RCxLQUFLdGxFLEtBQUswNUQsU0FFM0Ivc0QsS0FBS3VULE1BQU01VyxPQUFTLElBQUk4NkQsVUFDdEJrQixLQUFLdGxFLEtBQUswNUQsT0FBT3grQyxNQUFLMGpELE9BQVNBLE1BQU16OUIsTUFBUXgwQixLQUFLdkUsS0FDbER1RSxLQUFLbXFDLGlCQUdEbnFDLEtBQUttcUMsUUFBUTU2QixPQUFPNHlCLHdCQUF3QixPQUFRLENBQUN3MkIsT0FDM0QzNEQsS0FBS3VULE1BQU01VyxPQUFTLElBQUk4NkQsVUFDdEJrQixLQUFLdGxFLEtBQUswNUQsT0FBT3grQyxNQUFLMGpELE9BQVNBLE1BQU16OUIsTUFBUXgwQixLQUFLdkUsS0FDbER1RSxLQUFLbXFDLFVBR1RucUMsS0FBS3VULE1BQU10QixRQUFPLFFBRWxCbk0sTUFBTW9ELE9BQU83VixLQUFNODJDLFVDbExsQixNQUFNeXVCLGlCQUFpQnhvRCxTQUM1QnRNLFlBQWF6USxLQUFNODJDLGNBQ08sSUFBYjkyQyxLQUFLOEssTUFDZDlLLEtBQUs4SyxJQUFNLDZDQUViMkgsTUFBTXpTLEtBQU04MkMsU0FJZDU2Qyx5QkFBMEJxVCxZQUN4QixPQUFRQSxZQUNOLElBQUssT0FDSCxPQUFPMUMsVUFBVW1HLGdCQUFnQmhHLEtBQ25DLElBQUssVUFDSCxPQUFPSCxVQUFVbUcsZ0JBQWdCL0YsUUFDbkMsSUFBSyxXQUNILE9BQU9KLFVBQVVtRyxnQkFBZ0I5RixTQUNuQyxJQUFLLGFBQ0gsT0FBT0wsVUFBVW1HLGdCQUFnQnNjLFdBQ25DLFFBQ0UsT0FBT3ppQixVQUFVbUcsZ0JBQWdCbEcsU0FTdkM3UCxnQkFBaUJ5OEQsUUFDZixNQUFNdGlDLFdBQWF6cUIsS0FBSzNNLEtBQUtBLEtBQUswNUQsT0FDOUI5dUQsVUFBVStCLEtBQUszTSxLQUFLQSxLQUFLMDVELFFBQ3pCLEdBQ0osSUFBSyxNQUFNa0YsU0FBU2xGLE9BQ2xCdGlDLFdBQVd2NUIsS0FBSytnRSxPQUVsQixhQUFhanlELEtBQUtrSixPQUFPLENBQUUsY0FBZXVoQixhQUc1Q242QixrQkFBbUI4bUIsT0FDakIsTUFBTXloRCxTQUFXanBFLEtBQUtvQyxLQUFLcWhCLEtBQ3JCaGdCLEtBQU8yTSxLQUFLM00sS0FBS0EsS0FBSzA1RCxPQUFPMzFDLE9BQzdCN0gsT0FBU3ZQLEtBQUtqSCxNQUFRaUgsS0FBS2pILE1BQVEsS0FDbkNrNUQsTUFBUSxJQUFJd0YsVUFBVXBrRSxLQUFNLENBQUVrYyxPQUFRbXBELE9BQVExNEQsS0FBS3ZFLEtBQ3pELEdBQUlvOUQsVUFBWTVHLE1BQU01K0QsS0FBS0EsS0FBS3lsRSxRQUM5QixhQUFhN0csTUFBTTErQyxNQUFNdEIsUUFBTyxHQVFwQzNoQiw4QkFFRSxNQUFNc1MsV0FBYWcyRCxTQUFTOXFELGtCQUMxQjlOLEtBQUszTSxLQUFLQSxLQUFLZ1QsaUJBRVhnbkQsU0FBV3J0RCxLQUFLM00sS0FBS0EsS0FBS2c2RCxTQUMxQnhzRCxNQUFRYixLQUFLakgsT0FBT20rQixnQkFBZ0JtMkIsVUFDMUMsR0FBS3hzRCxNQUdFLElBQXFCLElBQWpCQSxNQUFNdlAsT0FLZixPQUFPK04sR0FBR0MsY0FBY2tXLE1BQ3RCNWxCLEtBQUs0UCxLQUFLWSxPQUFPLHVCQUF3QixDQUFFckgsTUFBT2lILEtBQUtqSCxNQUFNMEQsUUFFMUQsQ0FDTCxNQUFNNkYsTUFBUSxJQUFJcEMsVUFZbEIsT0FYQW9DLE1BQU12SixNQUFRaUgsS0FBS2pILE1BQ25CdUosTUFBTXpCLE1BQVFBLE1BQU0sR0FBR3BGLEdBQ3ZCNkcsTUFBTU0sV0FBYUEsV0FDbkJOLE1BQU1pTixPQUFTdlAsS0FBSzhzQyxLQUNwQnhxQyxNQUFNNm5DLFFBQVUsa0JBQ2hCN25DLE1BQU12SCxPQUFTbkwsS0FBSzRQLEtBQUtZLE9BQU8sbUJBQW9CLENBQ2xEdTRELEtBQU0zNEQsS0FBS3ZELEtBQ1g0d0QsU0FDQXpxRCxXQUFZNUMsS0FBSzNNLEtBQUtBLEtBQUtnVCx3QkFFdkIvRCxNQUFNclMsYUFDQ3FTLE1BQU02TCxhQXRCbkIsT0FBTzlPLEdBQUdDLGNBQWNrVyxNQUFNNWxCLEtBQUs0UCxLQUFLQyxTQUFTLGtCQWdDckRuUCxxQkFBc0J5b0UsS0FBTTU3RCxPQUMxQixJQUFLNkMsS0FBSzAzRCxTQUFvQixVQUFUcUIsS0FFbkIsT0FBTzE1RCxHQUFHQyxjQUFja1csTUFBTTVsQixLQUFLNFAsS0FBS0MsU0FBUyxrQkFFbkQsSUFBS08sS0FBSzNNLEtBQUtBLEtBQUsybEUsZ0JBQTJCLFVBQVRELEtBRXBDLE9BQU8xNUQsR0FBR0MsY0FBY2tXLE1BQ3RCNWxCLEtBQUs0UCxLQUFLWSxPQUFPLDRCQUE2QixDQUM1Q3JILE1BQU9pSCxLQUFLakgsTUFBTTBELEtBQ2xCazhELEtBQU0zNEQsS0FBS3ZELFFBSWpCLElBQUt1RCxLQUFLM00sS0FBS0EsS0FBSzZILEtBQUtuRCxRQUFtQixVQUFUZ2hFLEtBQ2pDLE9BQU8xNUQsR0FBR0MsY0FBY2tXLE1BQU01bEIsS0FBSzRQLEtBQUtDLFNBQVMsdUJBRW5ELE1BQU1rdUQsVUFBWTN0RCxLQUFLM00sS0FBS0EsS0FBSzA2RCxNQUFNSixVQUN2QyxJQUFJc0wsVUFBWWo1RCxLQUFLM00sS0FBS0EsS0FBSzRsRSxVQUMzQnBMLFNBQVc3dEQsS0FBSzNNLEtBQUtBLEtBQUswNkQsTUFBTUYsU0FDcEMsR0FBSTVuRCxNQUFNNG5ELFVBRVIsYUFBYTd0RCxLQUFLa0osT0FBTyxDQUN2QixzQkFBdUIsSUFHM0IsR0FBSS9MLE9BQVMwd0QsU0FBVzF3RCxNQVN0QixhQUpNNkMsS0FBS2tKLE9BQU8sQ0FDaEIsbUJBQW9CK3ZELFVBQ3BCLHNCQUF1Qjk3RCxjQUVaNkMsS0FBS2s1RCxvQkFFcEIsR0FBYSxhQUFUSCxNQUF1QmxMLFNBQVdGLFVBQVcsQ0FFL0MsSUFBdUMsVUFBNUIzdEQsS0FBS201RCxrQkFBOEIsT0FJOUMsU0FITW41RCxLQUFLa0osT0FBTyxDQUNoQix3QkFBeUIya0QsV0FFdkJBLFdBQWFGLFVBR2YsYUFETTN0RCxLQUFLa0osT0FBTyxDQUFFLG1CQUFvQit2RCxrQkFDM0JqNUQsS0FBS281RCxzQkFFZixHQUFhLGFBQVRMLE1BQXVCbEwsU0FBVyxFQUUzQyxhQUFhN3RELEtBQUtrSixPQUFPLENBQ3ZCLHdCQUF5QjJrRCxXQUsvQnY5RCx3QkFDRSxNQUFNK29FLGlCQUFtQnI1RCxLQUFLakgsT0FBT3FrQyxjQUMvQmt3QixhQUFldHRELEtBQUszTSxLQUFLQSxLQUFLaTZELGFBQ3BDLEdBQUl0dEQsS0FBSzNNLEtBQUtBLEtBQUsybEUsZUFDakIsT0FBSUssa0JBQW9CL0wscUJBQ2hCdHRELEtBQUtrSixPQUFPLENBQ2hCLHNCQUF1QmxKLEtBQUszTSxLQUFLQSxLQUFLMDZELE1BQU1KLFlBRXZDdHVELEdBQUdDLGNBQWNDLEtBQ3RCM1AsS0FBSzRQLEtBQUtZLE9BQU8saUNBQWtDLENBQ2pEckgsTUFBT2lILEtBQUtqSCxNQUFNMEQsS0FDbEJrOEQsS0FBTTM0RCxLQUFLdkQsU0FPckJuTSx1QkFDRSxJQUFLMFAsS0FBSzNNLEtBQUtBLEtBQUs2SCxLQUFLbkQsT0FBUSxPQUNqQyxJQUF1QyxVQUE1QmlJLEtBQUttNUQsa0JBQThCLE9BQzlDLE1BQU1FLGlCQUFtQnI1RCxLQUFLakgsTUFBTXFrQyxjQUM5Qms4QixhQUFlLEdBQ2ZoTSxhQUFldHRELEtBQUszTSxLQUFLQSxLQUFLaTZELGFBQ3BDLElBQUlpTSxZQUFjdjVELEtBQUszTSxLQUFLQSxLQUFLbW1FLE1BQU1wOEIsY0FBY3E4QixNQUNyRCxHQUFJSixpQkFBbUJFLFlBQWNqTSxhQUNuQyxJQUFLLElBQUlsMkMsTUFBUSxFQUFHQSxPQUFTbWlELFlBQWFuaUQsUUFDcENpaUQsaUJBQW1CRSxZQUFjbmlELE9BQVNrMkMsZUFDNUNpTSxhQUFlbmlELE9Bb0JyQixPQVpBa2lELGFBQWFwb0UsS0FDWCxDQUNFdUwsS0FBTTdNLEtBQUs0UCxLQUFLQyxTQUFTLDBCQUN6Qit0RCxLQUFNajdELFNBQVNnbkUsY0FFakIsQ0FDRTk4RCxLQUFNdUQsS0FBSzNNLEtBQUtBLEtBQUtnNkQsU0FDckJHLEtBQU0sc0JBR0p4dEQsS0FBSzA1RCxzQkFBc0JKLG9CQUMzQnQ1RCxLQUFLMjVELHVCQUNFMzVELEtBQUtrSixPQUFPLENBQ3ZCLHFCQUFzQmxKLEtBQUszTSxLQUFLQSxLQUFLdW1FLGNBUXpDdHBFLDRCQUVFLEdBQUkwUCxLQUFLM00sS0FBS0EsS0FBSzJsRSxlQUFnQixPQUNuQyxNQUFNTSxhQUFlLEdBQ2Z2aEUsT0FBUyxDQUNieWhFLE1BQU94NUQsS0FBSzNNLEtBQUtBLEtBQUttbUUsTUFBTXA4QixjQUFjOG9CLFFBQzFDaHJELEtBQU04RSxLQUFLM00sS0FBS0EsS0FBSzZILEtBQUtuRCxRQUV0QkMsT0FBUyxDQUNid2hFLE1BQU94NUQsS0FBSzNNLEtBQUtBLEtBQUttbUUsTUFBTXhoRSxPQUM1QmtELEtBQU04RSxLQUFLM00sS0FBS0EsS0FBSzZILEtBQUtsRCxRQUV0QkMsWUFDRytILEtBQUszTSxLQUFLQSxLQUFLbW1FLE1BQU1LLE9BRHhCNWhFLFdBRUUrSCxLQUFLM00sS0FBS0EsS0FBSzZILEtBQUtqRCxNQWM1QixHQVpJRixPQUFPbUQsTUFBUW5ELE9BQU95aEUsT0FDeEJGLGFBQWFwb0UsS0FBSyxDQUNoQnVMLEtBQU03TSxLQUFLNFAsS0FBS0MsU0FBUywwQkFDekIrdEQsS0FBTWo3RCxTQUFTd0YsT0FBT3loRSxTQUd0QnhoRSxPQUFPa0QsTUFBUWxELE9BQU93aEUsT0FDeEJGLGFBQWFwb0UsS0FBSyxDQUNoQnVMLEtBQU03TSxLQUFLNFAsS0FBS0MsU0FBUyxlQUN6Qit0RCxLQUFNajdELFNBQVN5RixPQUFPd2hFLFNBR3RCdmhFLFdBQ0YsSUFBSyxNQUFNNEksU0FBUzVJLFlBQWEsQ0FDL0IsTUFBTTZoRSxRQUFVajVELE1BQU1wRSxLQUFLMlEsTUFBTSxtQkFFN0Iwc0QsVUFDRmo1RCxNQUFNdVosZUFBaUIwL0MsUUFBUSxHQUMvQmo1RCxNQUFNcEUsS0FBT3E5RCxRQUFRLElBRUgsZ0JBQWhCajVELE1BQU0xRCxRQUNSMEQsTUFBTTFELGFBQ0UsSUFBSWpOLEtBQUsyUSxNQUFNMUQsT0FBT2xOLEtBQUssQ0FBRUssT0FBTyxLQUMxQ0csT0FFQW9RLE1BQU0xRCxPQUNSbThELGFBQWFwb0UsS0FBSyxDQUNoQnVMLEtBQU1vRSxNQUFNcEUsS0FDWit3RCxLQUFNM3NELE1BQU0xRCxNQUNaaWQsZUFBZ0J2WixNQUFNdVosaUJBVTlCLGFBTE1wYSxLQUFLMDVELHNCQUFzQkosZUFDNUJ2aEUsT0FBT21ELE1BQVFsRCxPQUFPa0QsT0FBUzhFLEtBQUszTSxLQUFLQSxLQUFLa2xFLGtCQUMzQ3Y0RCxLQUFLMjVELHVCQUdBMzVELEtBQUtrSixPQUFPLENBQUUsdUJBQXVCLElBUXBENVkseUJBQTBCeXBFLGNBQ3hCLElBQUssTUFBTTlILFNBQVNqeUQsS0FBSzNNLEtBQUtBLEtBQUswNUQsT0FDakMsR0FBSWtGLE1BQU16OUIsTUFBUXVsQyxhQUFhdmxDLElBQUssQ0FDbEN5OUIsTUFBTTUrRCxLQUFLeWxFLFNBQVUsUUFFTzk0RCxLQUFLakgsTUFBTTZILE1BQU0yTixNQUMzQzdOLE1BQ3FCLFVBQW5CQSxLQUFLck4sS0FBSzZILE1BQW9Cd0YsS0FBS3JOLEtBQUtvSixPQUFTczlELGFBQWF0OUQsT0FLaEU0QyxHQUFHQyxjQUFjQyxLQUNmM1AsS0FBSzRQLEtBQUtZLE9BQU8sMkJBQTRCLENBQzNDNnhELE1BQU84SCxhQUFhdDlELEtBQ3BCazhELEtBQU0zNEQsS0FBS3ZELFFBTGZzOUQsYUFBYTFtRSxLQUFLeWxFLFNBQVUsRUFTOUIsWUFJRTk0RCxLQUFLa0osT0FBTyxDQUFFLGNBQWVsSixLQUFLM00sS0FBS0EsS0FBSzA1RCxTQUU5Q2dOLGFBQWExbUUsS0FBS3lsRSxVQUNwQno1RCxHQUFHQyxjQUFjd1IsS0FDZmxoQixLQUFLNFAsS0FBS1ksT0FBTyxnQ0FBaUMsQ0FDaEQ2eEQsTUFBTzhILGFBQWF0OUQsS0FDcEJrOEQsS0FBTTM0RCxLQUFLdkQsY0FHVHVELEtBQUtqSCxNQUFNdTlCLHdCQUF3QixPQUFRLENBQy9DcjRCLFVBQVU4N0QsaUJBVWhCenBFLDRCQUE2QmdwRSxjQUMzQixHQUE0QixJQUF4QkEsYUFBYWhvRSxPQUFqQixDQUNBLElBQUssTUFBTXluRCxlQUFldWdCLGFBQWMsQ0FFdEMsSUFBS3ZnQixZQUFZeVUsS0FBTSxTQUN2QixJQUFJM3NELFlBQWNiLEtBQUtqSCxNQUFNbStCLGdCQUFnQjZoQixZQUFZdDhDLE1BS3pELEdBQXFCLElBQWpCb0UsTUFBTXZQLE9BQWMsQ0FDdEIsTUFBTTBvRSxvQkFBc0JwcUUsS0FBS2dSLE1BQU0yTixNQUNyQzdOLE1BQ3FCLFVBQW5CQSxLQUFLck4sS0FBSzZILE1BQW9Cd0YsS0FBS3JOLEtBQUtvSixPQUFTczhDLFlBQVl0OEMsT0FFN0R1OUQsY0FDRm41RCxZQUFjYixLQUFLakgsTUFBTXU5Qix3QkFBd0IsT0FBUSxDQUN2RHI0QixVQUFVKzdELGtCQUdabjVELFlBQWNiLEtBQUtqSCxNQUFNOCtCLFlBQVlraEIsWUFBWXQ4QyxLQUFNLEdBQ25EczhDLFlBQVkzK0Isc0JBQ1J2WixNQUFNLEdBQUdxSSxPQUFPLENBQ3BCLDJCQUEyQixFQUMzQixzQkFBdUI2dkMsWUFBWTMrQixrQkFNM0MsR0FEQXZaLE1BQVFBLE1BQU0sR0FDVyxnQkFBckJrNEMsWUFBWXlVLFdBRVIzc0QsTUFBTW16QiwwQkFDUCxDQUtMLEdBQUluekIsTUFBTTFELE1BQVE0N0MsWUFBWXlVLEtBQU8sR0FDbkMsSUFBSyxJQUFJcDJDLE1BQVEsRUFBR0EsT0FBUzJoQyxZQUFZeVUsS0FBTXAyQyxRQUN6Q3ZXLE1BQU0xRCxNQUFRNDdDLFlBQVl5VSxLQUFPcDJDLE9BQVMsS0FDNUMyaEMsWUFBWXlVLE1BQVFwMkMsWUFDZHZXLE1BQU02L0IsbUJBQW1CcVksWUFBWXlVLGFBSzNDM3NELE1BQU02L0IsbUJBQW1CcVksWUFBWXlVLE9BRy9DLE9BQU94dEQsS0FBS2k2RCxzQkFBc0JYLGVBUXBDaHBFLHNCQUVFLGFBRE0wUCxLQUFLa0osT0FBTyxDQUFFLHNCQUF1QixVQUM5QmxKLEtBQUtrSixPQUFPLENBQ3ZCLHVCQUF5RCxFQUFqQ2xKLEtBQUszTSxLQUFLQSxLQUFLMDZELE1BQU1KLFlBS2pEcjlELHVCQUNFLE1BQU02TSxNQUFRNkMsS0FBSzNNLEtBQUtBLEtBQUtrbEUsV0FDN0IsSUFBS3A3RCxPQUFtQixLQUFWQSxNQUFjLE9BQzVCLE1BQU0wTyxTQUFXakcsYUFBYWlHLFNBQzlCLElBQUlGLFdBQWFDLGVBQWVDLFNBQVUsSUFDMUMsTUFBTWhSLGNBQWdCakosWUFBWStKLE9BQU8sQ0FDdkMzSixLQUFNcEMsS0FBS29DLEtBQUt5SixHQUNoQlQsUUFBU3BKLFlBQVlxSixXQUFXLENBQUVsQyxNQUFPaUgsS0FBS2pILFFBQzlDZ0MsT0FBUW5MLEtBQUs0UCxLQUFLWSxPQUFPLHlCQUEwQixDQUNqRHU0RCxLQUFNMzRELEtBQUt2RCxPQUViZixRQUFTaVEsT0FFTGhNLFdBQWE5RSxRQUFReTlELFVBQzNCLFFBQTJCLElBQWhCMzRELEtBQUtyTyxRQUEwQyxJQUFoQnFPLEtBQUtyTyxPQUFjLENBQzNELE1BQU1pbkUsa0JBQW9CLElBQUlyb0UsS0FBS2lOLE9BQU9sTixLQUFLLENBQUVLLE9BQU8sS0FBU0csTUFDakVrYixLQUFPaE0sS0FBSzRPLEtBQUssY0FBYyxHQUMvQjVDLEtBQUtwWSxRQUFRb0osT0FBU2pKLE9BQ3BCQyxLQUFLQyxVQUFVLENBQ2J5SSxTQUFVMkQsS0FBS2pILE1BQU0wQyxHQUNyQnNJLGFBQWEsRUFDYjhCLFFBQVMsQ0FDUGlCLE9BQVF5eEQsV0FDUjN4RCxPQUFRMnhELGVBSWQsTUFBTUMsWUFBYzV5RCxhQUFhOEcsWUFBWWYsWUFDdkM2c0QsWUFBWUMsc0JBQ1pELFlBQVlwa0MsY0FDbEJva0MsWUFBWTc3QyxrQkFTaEJyc0IsNEJBQTZCZ3BFLGNBRTNCLElBQUssTUFBTXZnQixlQUFldWdCLGFBQ3BCdmdCLFlBQVkzK0IsaUJBQ2QyK0IsWUFBWXQ4QyxLQUFPLEdBQUdzOEMsWUFBWTMrQixtQkFBbUIyK0IsWUFBWXQ4QyxTQUUxQyxnQkFBckJzOEMsWUFBWXlVLEtBQ2R6VSxZQUFZeVUsS0FBTzU5RCxLQUFLNFAsS0FBS0MsU0FBUyw2QkFFdENzNUMsWUFBWXlVLEtBQU8sSUFBSXpVLFlBQVl5VSxRQUFRNTlELEtBQUs0UCxLQUFLQyxTQUNuRCxpQkFJTixNQUNNa00sV0FBYUMsZUFERixxREFDMkIsQ0FBRTB0RCxlQUM5QyxhQUFhMW5FLFlBQVkrSixPQUFPLENBQzlCM0osS0FBTXBDLEtBQUtvQyxLQUFLeUosR0FDaEJULFFBQVNwSixZQUFZcUosV0FBVyxDQUFFbEMsTUFBT2lILEtBQUtqSCxRQUM5Q2dDLE9BQVFuTCxLQUFLNFAsS0FBS1ksT0FBTyx1QkFBd0IsQ0FBRXU0RCxLQUFNMzRELEtBQUt2RCxPQUM5RGYsUUFBU2lRLE9BSWJyYiwyQkFBNEJtTCxJQUMxQixJQUFLdUUsS0FBSzAzRCxRQUVSLE9BQU9yNEQsR0FBR0MsY0FBY2tXLE1BQU01bEIsS0FBSzRQLEtBQUtDLFNBQVMsa0JBRW5ELElBQUtPLEtBQUszTSxLQUFLQSxLQUFLMmxFLGVBRWxCLE9BQU8zNUQsR0FBR0MsY0FBY2tXLE1BQ3RCNWxCLEtBQUs0UCxLQUFLWSxPQUFPLDRCQUE2QixDQUM1Q3JILE1BQU9pSCxLQUFLakgsTUFBTTBELEtBQ2xCazhELEtBQU0zNEQsS0FBS3ZELFFBSWpCLE1BQU13MUQsTUFBUWp5RCxLQUFLM00sS0FBS0EsS0FBSzA1RCxPQUFPeCtDLE1BQUswakQsT0FDaENBLE1BQU16OUIsTUFBUS80QixLQUV2QixHQUFJdzJELE1BQU8sQ0FDVCxNQUFNM3ZELE1BQVEsSUFBSXBDLFVBQ2xCb0MsTUFBTXZKLE1BQVFpSCxLQUFLakgsTUFDbkJ1SixNQUFNTSxXQUFhMUMsVUFBVW1HLGdCQUFnQmhHLEtBQzdDaUMsTUFBTWlOLE9BQVN2UCxLQUFLOHNDLEtBQ3BCeHFDLE1BQU12SCxPQUFTbkwsS0FBSzRQLEtBQUtZLE9BQU8seUJBQTBCLENBQ3hEdTRELEtBQU0zNEQsS0FBS3ZELEtBQ1h3MUQsTUFBT0EsTUFBTXgxRCxPQUVmNkYsTUFBTTZuQyxRQUFVLGlCQUNoQjduQyxNQUFNMnZELE1BQVFBLFlBQ1IzdkQsTUFBTTBXLG1CQUFtQixhQUN6QjFXLE1BQU02TCxhQUtoQjdkLGlCQUFrQkwsTUFDaEIsTUFBTXFTLE1BQVFwQyxVQUFVZzZELGVBQWVqcUUsTUFHdkMsR0FBSXFTLE1BQU15RSxPQUFRLENBQ2hCLEdBQXNCLG9CQUFsQnpFLE1BQU02bkMsUUFDUixhQUFhbnFDLEtBQUttNkQsc0JBQ2IsR0FBc0IsbUJBQWxCNzNELE1BQU02bkMsUUFDZixhQUFhbnFDLEtBQUtvNkQsbUJBQW1COTNELE1BQU0ydkQsU0N6ZTVDLE1BQU1vSSx1QkFBdUJDLFNBQ2xDeDJELFlBQWF5MkQsVUFDWHowRCxNQUFNeTBELFVBQ052NkQsS0FBS2lnQyxNQUFRLEdBR1h4dkMsWUFDRixNQUFNQSxNQUFRcVYsTUFBTXJWLE1BQ3BCLE9BQWlCLEtBQVZBLE1BQWUsRUFBWSxHQUFSQSxNQUtqQitwRSwwQkFDVCxNQUFPLEtDZEosTUFBTUMsNEJBQTRCSixlQUM1QkcsMEJBQ1QsTUFBTyxLQ0hYLE1BQU1FLFNBQVcsQ0FDZkMsVUFBVyxDQUNUbCtELEtBQU0sR0FDTml5QyxLQUFNLEdBQ05rc0IsTUFBTyxRQUNQN3ZDLFFBQVEsRUFDUnpRLFNBQVMsRUFDVHBmLEtBQU02SyxTQUVSODBELGVBQWdCLENBQ2RwK0QsS0FBTSwwQkFDTml5QyxLQUFNLDhCQUNOa3NCLE1BQU8sUUFDUDd2QyxRQUFRLEVBQ1J6USxRQUFTLFFBQ1RwZixLQUFNNlQsT0FDTmk0QixRQUFTLENBQ1AxdUMsTUFBTywrQkFDUHlmLFNBQVUsbUNBRVoraUQsU0FBVUMsTUFBUUMsc0JBQXNCRCxPQUUxQzVWLHVCQUF3QixDQUN0QjFvRCxLQUFNLGtDQUNOaXlDLEtBQU0sc0NBQ05rc0IsTUFBTyxRQUNQN3ZDLFFBQVEsRUFDUnpRLFNBQVMsRUFDVHBmLEtBQU02SyxTQUVSazFELHdCQUF5QixDQUN2QngrRCxLQUFNLCtDQUNOaXlDLEtBQU0sK0NBQ05rc0IsTUFBTyxRQUNQN3ZDLFFBQVEsRUFDUnpRLFNBQVMsRUFDVHBmLEtBQU02SyxTQUVSZzdCLDRCQUE2QixDQUMzQnRrQyxLQUFNLG1EQUNOaXlDLEtBQU0sbURBQ05rc0IsTUFBTyxRQUNQN3ZDLFFBQVEsRUFDUnpRLFNBQVMsRUFDVHBmLEtBQU02SyxTQUVSaXpDLGtCQUFtQixDQUNqQnY4QyxLQUFNLHlDQUNOaXlDLEtBQU0seUNBQ05rc0IsTUFBTyxRQUNQN3ZDLFFBQVEsRUFDUnpRLFNBQVMsRUFDVHBmLEtBQU02SyxTQUVSa3pDLHFCQUFzQixDQUNwQng4QyxLQUFNLDRDQUNOaXlDLEtBQU0sNENBQ05rc0IsTUFBTyxRQUNQN3ZDLFFBQVEsRUFDUnpRLFNBQVMsRUFDVHBmLEtBQU02SyxTQUVSbTFELGdCQUFpQixDQUNmeitELEtBQU0sdUNBQ05peUMsS0FBTSx1Q0FDTmtzQixNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsU0FBUyxFQUNUcGYsS0FBTTZLLFNBRVJvMUQsdUJBQXdCLENBQ3RCMStELEtBQU0sOENBQ05peUMsS0FBTSw4Q0FDTmtzQixNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsU0FBUyxFQUNUcGYsS0FBTTZLLFNBRVJxMUQsMEJBQTJCLENBQ3pCMytELEtBQU0saURBQ05peUMsS0FBTSxpREFDTmtzQixNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsU0FBUyxFQUNUcGYsS0FBTTZLLFNBRVJzMUQsc0JBQXVCLENBQ3JCNStELEtBQU0saUNBQ05peUMsS0FBTSxxQ0FDTmtzQixNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsU0FBUyxFQUNUcGYsS0FBTTZLLFVBSVYsU0FBU2kxRCxzQkFBdUJELE1BQzlCLElBQUlPLFNBQVcsRUFDZixPQUFRUCxNQUNOLElBQUssV0FDSE8sU0FBVyxFQUNYLE1BQ0YsSUFBSyxRQUNIQSxTQUFXLEVBR2Z4cUUsT0FBT3lxRSxPQUFPcFQsV0FBYSxDQUN6QjEwRCxRQUFTLEtBQ1Q2bkUsVUFJRyxNQUFNRSw2QkFBNkJqMUIsZ0JBQzdCMWYsNEJBQ1QsT0FBT0QsWUFBWTlnQixNQUFNK2dCLGVBQWdCLENBQ3ZDcnpCLE1BQU8sc0JBQ1BpSSxHQUFJLGlCQUNKb1EsU0FBVSxtREFDVmk3QixNQUFPLElBQ1BDLE9BQVEsT0FDUkosZUFBZSxJQUluQjd5QixVQUNFLE1BQU03aEIsUUFBVSxHQUNWMG9FLFVBQVksQ0FDaEJjLE1BQU0sRUFDTkMsT0FBTyxHQUVULElBQUssTUFBT3ZuRSxFQUFHN0IsS0FBTUYsT0FBT2dDLFFBQVFzbUUsVUFDbEN6b0UsUUFBUWtDLEdBQUssQ0FDWGdKLE1BQU92TixLQUFLSSxTQUFTRixJQUFJLE9BQVFxRSxHQUNqQ3duRSxRQUFTcnBFLEdBRVA2QixFQUFFaVosTUFBTSxxQkFDVnV0RCxVQUFVMW9FLFFBQVFrQyxHQUFHZ0osUUFBUyxHQVFsQyxPQUxBbEwsUUFBUTJwRSxjQUFnQmpCLFVBQVVjLEtBQzlCZCxVQUFVZSxNQUNSLE9BQ0EsTUFDRixPQUNHenBFLFFBR1QxQywwQkFDRSxJQUFLLE1BQU80RSxFQUFHN0IsS0FBTUYsT0FBT2dDLFFBQVFzbUUsVUFDbEM5cUUsS0FBS0ksU0FBUzZyRSxTQUFTLE9BQVExbkUsRUFBRzdCLEdBRXBDMG9FLHNCQUFzQnByRSxLQUFLSSxTQUFTRixJQUFJLE9BQVEsbUJBR2xEaW5CLGtCQUFtQnBMLE1BQ2pCN0YsTUFBTWlSLGtCQUFrQnBMLE1BQ3hCQSxLQUNHNEMsS0FBSyxvQkFDTGdLLEdBQUcsVUFBVWhrQixPQUFTeUwsS0FBSzg3RCxtQkFBbUJ2bkUsU0FDakRvWCxLQUNHNEMsS0FBSyx3Q0FDTGdLLEdBQUcsU0FBU2hrQixPQUFTeUwsS0FBSys3RCxZQUFZeG5FLFNBQ3pDb1gsS0FDRzRDLEtBQUssc0JBQ0xnSyxHQUFHLFNBQVNoa0IsT0FBU3lMLEtBQUtnOEQsZ0JBQWdCem5FLFNBRy9DdW5FLG1CQUFvQnZuRSxPQUNsQixNQUFNbTdDLElBQU0zakMsRUFBRXhYLE1BQU00aUIsZUFBZXU0QixNQUN2QixTQUFSQSxLQUEwQixRQUFSQSxLQUNwQjNqQyxFQUFFLG1CQUNDd0MsS0FBSyx3Q0FDTDhuQyxNQUFLLFdBQ0osTUFBTTRsQixTQUFXbHdELEVBQUUvTCxNQUNQLFNBQVIwdkMsSUFDRnVzQixTQUFTbi9ELEtBQUssV0FBVyxHQUV6Qm0vRCxTQUFTbi9ELEtBQUssV0FBVyxNQU1uQ2kvRCxZQUFheG5FLE9BQ1gsTUFBTW9tRSxVQUFZLENBQ2hCYyxNQUFNLEVBQ05DLE9BQU8sR0FFVDN2RCxFQUFFLG1CQUNDd0MsS0FBSyx3Q0FDTDhuQyxNQUFLLFdBQ2F0cUMsRUFBRS9MLE1BQ05sRCxLQUFLLFdBQ2hCNjlELFVBQVVjLE1BQU8sRUFFakJkLFVBQVVlLE9BQVEsS0FHeEIzdkQsRUFBRSxvQkFBb0IyakMsSUFDcEJpckIsVUFBVWMsS0FBUWQsVUFBVWUsTUFBUSxPQUFTLE1BQVMsUUFJMURwckUsc0JBQXVCaUUsT0FDckJBLE1BQU0wYSxpQkFDTixVQUFXLE1BQU85YSxFQUFHN0IsS0FBTUYsT0FBT2dDLFFBQVFzbUUsZ0JBQ2xDOXFFLEtBQUtJLFNBQVM2Z0IsSUFBSSxPQUFRMWMsRUFBRzdCLEdBQUdnb0IsU0FFeEMsT0FBT3RhLEtBQUtpUyxTQUdkM2hCLG9CQUFxQmlFLE1BQU9sQixNQUMxQixNQUFNc25FLFVBQVksQ0FDaEJjLE1BQU0sRUFDTkMsT0FBTyxHQUVULFVBQVcsTUFBTTFvRSxPQUFPWixPQUFPRCxLQUFLdW9FLFVBQ2xDOXFFLEtBQUtJLFNBQVM2Z0IsSUFBSSxPQUFRN2QsSUFBS0ssS0FBS0wsTUFDaENBLElBQUlvYSxNQUFNLHFCQUNadXRELFVBQVV0bkUsS0FBS0wsT0FBUSxHQUczQnBELEtBQUtJLFNBQVM2Z0IsSUFBSSxPQUFRLFlBQWE4cEQsVUFBVWMsT0FBU2QsVUFBVWUsUUNwTmpFLE1BQU1RLDJCQUEyQkMsVUFLdENwbEQsa0JBQW1CcEwsTUFDakI3RixNQUFNaVIsa0JBQWtCcEwsTUFFbkIzTCxLQUFLL04sUUFBUXlsRCxXQUVsQi9yQyxLQUNHNEMsS0FBSyx1QkFDTHlJLE9BQU16aUIsT0FBU3lMLEtBQUsrOEMsZUFBZXhvRCxNQUFPLFlBQzdDb1gsS0FDRzRDLEtBQUssZ0JBQ0x5SSxPQUFNemlCLE9BQVN5TCxLQUFLbzhELGNBQWM3bkUsTUFBTyxhQUc5Q2pFLGNBQWVpRSxNQUFPMkcsS0FBTyxRQUFTbWhFLGVBQWlCLFVBQ3JEOW5FLE1BQU0wYSxpQkFDTjFhLE1BQU04ekMsa0JBRU4sTUFBTXowQixlQUFpQjFHLGNBQWNvdkQscUJBQXFCL25FLE1BQU8sUUFFM0RrMkIsV0FBYXpxQixLQUFLVSxLQUFLck4sS0FBS0EsS0FBS2dwRSxnQkFDbkNwK0QsVUFBVStCLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLZ3BFLGlCQUM5QixHQUNKLElBQUssTUFBTTM3RCxRQUFRa1QsU0FDWmxULE1BQVNBLEtBQUtyTixNQUNkLENBQUM2SCxNQUFNL0osU0FBU3VQLEtBQUtyTixLQUFLNkgsU0FHMUJrVixTQUFTQyxVQUFVM1AsT0FDbEIrcEIsV0FBV2xjLE1BQUtvTCxJQUFNQSxHQUFHbGQsT0FBU2lFLEtBQUtyTixLQUFLb0osUUFLbERndUIsV0FBV3Y1QixLQUFLK00sVUFBVXlDLEtBQUtyTixjQUUzQjJNLEtBQUtVLEtBQUt3SSxPQUFPLENBQUUsQ0FBQyxRQUFRbXpELGtCQUFtQjV4QyxhQUd2RHN5QixlQUFnQnhvRCxNQUFPOG5FLGVBQWlCLFNBQ3RDOW5FLE1BQU0wYSxpQkFDTixNQUFNaUksR0FBS25MLEVBQUV4WCxNQUFNNGlCLGVBQWVnbUMsUUFBUSxTQUlwQzFyRCxTQUhPdU8sS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUtncEUsZ0JBQWdCOXRELE1BQUtuUixHQUM3Q0EsRUFBRW8zQixNQUFRdGQsR0FBRzdqQixLQUFLLGFBRUxBLEtBQUt3aUMsWUFHM0IsR0FBSTNlLEdBQUdvcEMsU0FBUyxZQUFhLENBQzNCLE1BQU1DLFFBQVVycEMsR0FBRzA3QixTQUFTLGlCQUM1QjJOLFFBQVFqRCxRQUFRLEtBQUssSUFBTWlELFFBQVFqckMsZUFDOUIsQ0FDTCxNQUFNa3JDLElBQU16MEMsRUFBRSw2QkFBNkJ0YSxTQUFTMEwsZUFDOUNndkMsTUFBUXBnQyxFQUFFLHVDQUVoQnkwQyxJQUFJaHRCLE9BQU8yWSxPQUNYajFCLEdBQUdzYyxPQUFPZ3RCLElBQUlFLFFBQ2RGLElBQUlJLFVBQVUsS0FFaEIxcEMsR0FBR2MsWUFBWSxZQUdqQjFuQixvQkFBcUJpRSxNQUFPOG5FLGVBQWlCLFNBQzNDLE1BQU1FLFVBQVl4d0QsRUFBRXhYLE1BQU00aUIsZUFBZWdtQyxRQUFRLFNBQVM5cEQsS0FBSyxXQUMzRGtwRSxpQkFBaUJ2OEQsS0FBS3c4RCxXQUFXRCxVQUFXRixnQkFHbEQvckUsaUJBQWtCcVEsT0FBUTA3RCxlQUFpQixTQUN6QyxNQUFNRSxVQUFZdjhELEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLZ3BFLGdCQUFnQjcvQixXQUFVcC9CLEdBQ3ZEQSxFQUFFbzNCLE1BQVE3ekIsU0FFbkIsR0FBSTQ3RCxXQUFhLEVBQUcsQ0FDbEIsTUFBTTl4QyxXQUFhenFCLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLZ3BFLGdCQUNuQ3ArRCxVQUFVK0IsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUtncEUsaUJBQzlCLEdBQ0o1eEMsV0FBV2MsT0FBT2d4QyxVQUFXLFNBQ3ZCdjhELEtBQUtVLEtBQUt3SSxPQUFPLENBQUUsQ0FBQyxRQUFRbXpELGtCQUFtQjV4QyxjQUk5QzVELDRCQUNULE9BQU9ELFlBQVk5Z0IsTUFBTStnQixlQUFnQixDQUN2Q25QLFFBQVMsQ0FBQyxPQUFRLFFBQVMsY0FDM0JvdkIsTUFBTyxJQUNQQyxPQUFRLElBQ1JQLFNBQVUsQ0FBQyxDQUFFQyxhQUFjLFVBQzNCMGEsUUFBUyxDQUFDLG9CQUNWNEUsS0FBTSxDQUNKLENBQ0VDLFlBQWEsb0JBQ2JDLGdCQUFpQixjQUNqQkMsUUFBUyxrQkFNYnI2QyxlQUNGLE1BQU8sOENBR1Q0d0QsYUFBY2xvRSxPQUNaLE1BQU0yaUIsR0FBSzNpQixNQUFNNGlCLGNBQWNuSyxRQUFRLFNBS2pDMHZELFNBQVcsQ0FBRXhoRSxLQUFNLE9BQVE3SCxLQUpuQjJNLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLNlIsT0FBT3FKLE1BQUtuUixHQUNyQ0EsRUFBRW8zQixNQUFRdGQsR0FBRzNqQixRQUFRb04sVUFJOUJwTSxNQUFNc2YsYUFBYWd4QixRQUFRLGFBQWNseEMsS0FBS0MsVUFBVThvRSxXQUcxRDVvRCxVQUNFLE1BQU16Z0IsS0FBT3lTLE1BQU1nTyxVQUdiczNDLFNBQVcvM0QsS0FBS0EsS0FDdEJBLEtBQUtBLEtBQU8rM0QsU0FBUy8zRCxLQUdyQkEsS0FBS3FrRSxRQUFVMTNELEtBQUtVLEtBQUtnM0QsUUFFekIsTUFBTXQ5QixvQkFBc0IsR0FDNUIsSUFBSyxNQUFPcG5DLElBQUs0TyxZQUFheFAsT0FBT2dDLFFBQ25DZixLQUFLQSxLQUFLK21DLHFCQUVWLEdBQUl4NEIsU0FBVSxDQUNaLE1BQU0rNkQsV0FBYS9zRSxLQUFLNFAsS0FBS0MsU0FBUyxVQUFVek0sSUFBSTRILGlCQUNwRHcvQixvQkFBb0JscEMsS0FBS3lyRSxZQUk3QnRwRSxLQUFLeXlELGVBQTZDLElBQTVCenlELEtBQUtBLEtBQUs2UixPQUFPNVQsT0FFdkMrQixLQUFLQSxLQUFLNlIsT0FBT2dvQixNQUFLLENBQUNwNUIsRUFBR2l0QixJQUNqQmp0QixFQUFFMkksS0FDTms4QixvQkFDQStELGNBQWMzYixFQUFFdGtCLEtBQUtrOEIsdUJBRzFCdGxDLEtBQUt1cEUsMEJBQTRCLEdBQ2pDLE1BQU1DLFNBQVcsSUFBSWp0RSxLQUFLNFAsS0FBS0MsU0FBUyxjQW1CeEMsT0FsQkkyNkIsb0JBQW9COW9DLFNBQ3RCK0IsS0FBS3VwRSwyQkFBNkJ4aUMsb0JBQW9Cem5DLEtBQUtrcUUsV0FHN0R4cEUsS0FBS3lwRSxlQUFpQixHQUV0QnpwRSxLQUFLeXBFLGVBQWU1ckUsS0FDbEIsR0FBR3RCLEtBQUs0UCxLQUFLQyxTQUFTLHdCQUF3QnBNLEtBQUtBLEtBQUsweEQsV0FFMUQxeEQsS0FBS3lwRSxlQUFlNXJFLEtBQ2xCLEdBQUd0QixLQUFLNFAsS0FBS0MsU0FBUyx3QkFBd0JwTSxLQUFLQSxLQUFLa3FDLGVBTzFEbHFDLEtBQUt3bEUsU0FBV2pwRSxLQUFLb0MsS0FBS3FoQixLQUNuQmhnQixLQUdUeXZELGNBQWV2dUQsTUFBTzJsQixVQUlwQixHQUZLQSxTQUFTN21CLE9BQU02bUIsU0FBV2tPLGFBQWFsTyxXQUV4Q0EsU0FBUzdtQixLQUFLVCxPQUFRLENBQ3hCc25CLFNBQVM3bUIsS0FBS1QsT0FBU1IsT0FBT2tjLE9BQU80TCxTQUFTN21CLE1BQU1ULFFBQVUsSUFDOUQsSUFBSyxJQUFJd2tCLE1BQVEsRUFBR0EsTUFBUXBYLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLVCxPQUFPdEIsT0FBUThsQixRQUM3RDhDLFNBQVM3bUIsS0FBS1QsT0FBT3drQixPQUFPbFMsT0FBU2pILFVBQ25DK0IsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUtULE9BQU93a0IsT0FBT2xTLFFBS3hDWSxNQUFNZzlDLGNBQWN2dUQsTUFBTzJsQixXQzNMeEIsTUFBTTZpRCxzQkFBc0JaLFVBQ3RCdDFDLDRCQUNULE9BQU9ELFlBQVk5Z0IsTUFBTStnQixlQUFnQixDQUN2Q2hiLFNBQVUsOENBQ1Y2TCxRQUFTLENBQUMsT0FBUSxPQUFRLFFBQzFCb3ZCLE1BQU8sSUFDUEMsT0FBUSxPQUNSOGIsV0FBVyxFQUNYcmMsU0FBVSxDQUFDLENBQUVDLGFBQWMsVUFBV0MsYUFBYyxPQUNwRHlhLFFBQVMsQ0FBQyxTQUNWNEUsS0FBTSxDQUNKLENBQ0VDLFlBQWEsY0FDYkMsZ0JBQWlCLFFBQ2pCQyxRQUFTLGtCQU1qQjUxRCxnQkFDRSxNQUFNK0MsS0FBT3lTLE1BQU1nTyxVQUNiczNDLFNBQVcvM0QsS0FBS0EsS0FZdEIsT0FYQUEsS0FBS0EsS0FBTyszRCxTQUFTLzNELEtBQ3JCQSxLQUFLMmxFLGVBQWlCaDVELEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLMmxFLGVBQzFDM2xFLEtBQUt3bEUsU0FBV2pwRSxLQUFLb0MsS0FBS3FoQixLQUMxQmhnQixLQUFLb2dCLFFBQVV6VCxLQUFLVSxLQUFLK1MsUUFDekJwZ0IsS0FBSzJwRSxjQUFnQmg5RCxLQUFLZzlELGNBQzFCM3BFLEtBQUs0cEUsV0FBb0QsVUFBakNqOUQsS0FBS1UsS0FBS3k0RCxrQkFDbEM5bEUsS0FBSzZwRSxlQUNIbDlELEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLMDZELE1BQU1GLFdBQWE3dEQsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUswNkQsTUFBTUosVUFFbkV0NkQsS0FBSzhwRSxlQUE2QyxJQUE1QjlwRSxLQUFLQSxLQUFLMDVELE9BQU96N0QsT0FFaEMrQixLQUdMMnBFLG9CQUNGLElBQUl6cEMsT0FBUyxFQUNiLE1BQU13NUIsT0FBUy9zRCxLQUFLVSxLQUFLck4sS0FBS0EsS0FBSzA1RCxPQUNuQyxJQUFLLE1BQU1rRixTQUFTbEYsT0FDZGtGLE1BQU01K0QsS0FBS3lsRSxTQUFTdmxDLFNBRTFCLE1BQU8sR0FBR0EsWUFBWXc1QixPQUFPejdELFNBRy9CeWxCLGtCQUFtQnBMLE1BQ2pCN0YsTUFBTWlSLGtCQUFrQnBMLE1BQ3hCQSxLQUFLNEMsS0FBSyw0QkFBNEJ5SSxPQUFNemlCLFFBQzFDQSxNQUFNMGEsaUJBQ05qUCxLQUFLVSxLQUFLMDhELDJCQUVaenhELEtBQUs0QyxLQUFLLGlCQUFpQnlJLE9BQU16aUIsT0FBU3lMLEtBQUtxOUQsVUFBVTlvRSxTQUN6RG9YLEtBQUs0QyxLQUFLLGVBQWV5SSxPQUFNemlCLE9BQVN5TCxLQUFLczlELGVBQWUvb0UsU0FDNURvWCxLQUFLNEMsS0FBSyxlQUFleUksT0FBTXppQixPQUFTeUwsS0FBS3M5RCxlQUFlL29FLFNBQzVEb1gsS0FBSzRDLEtBQUssZ0JBQWdCeUksT0FBTXppQixRQUM5QixNQUFNa0gsR0FBS3NRLEVBQUV4WCxNQUFNNGlCLGVBQWVnbUMsUUFBUSxNQUFNOXBELEtBQUssTUFDckQyTSxLQUFLVSxLQUFLNjhELHFCQUFxQjloRSxPQUVqQ2tRLEtBQUs0QyxLQUFLLGlDQUFpQ2swQyxRQUFPbHVELFFBQ2hELE1BQU00SSxNQUFRNUssU0FBU2dDLE1BQU00aUIsY0FBY2hhLE9BQzNDNkMsS0FBS1UsS0FBSzg4RCxlQUFlLFFBQVNyZ0UsVUFFcEN3TyxLQUFLNEMsS0FBSyxzQkFBc0J5SSxPQUFNLEtBQ3BDaFgsS0FBS1UsS0FBSzg4RCxlQUFlLGVBRTNCN3hELEtBQUs0QyxLQUFLLHNCQUFzQnlJLE9BQU0sS0FDcENoWCxLQUFLVSxLQUFLODhELGVBQWUsZUFFM0I3eEQsS0FBSzRDLEtBQUssb0JBQW9CeUksT0FBTXppQixRQUNsQ3lMLEtBQUt5OUQsa0JBQWtCbHBFLE1BQU8sVUFFaENvWCxLQUFLNEMsS0FBSyx1QkFBdUJrMEMsUUFBT2x1RCxRQUN0Q3lMLEtBQUt5OUQsa0JBQWtCbHBFLE1BQU8sYUFFaENvWCxLQUFLNEMsS0FBSyxvQkFBb0J5SSxPQUFNLEtBQ2xDaFgsS0FBS1UsS0FBS2c5RCxtQkFFWi94RCxLQUFLNEMsS0FBSyx1QkFBdUJ5SSxPQUFNemlCLFFBQ3JDeUwsS0FBS3k5RCxrQkFBa0JscEUsTUFBTyxhQUVoQ29YLEtBQUs0QyxLQUFLLFdBQVd5SSxPQUFNemlCLE9BQVN5TCxLQUFLMjlELFdBQVdwcEUsU0FHdERqRSxxQkFBc0JpRSxPQUNwQkEsTUFBTTBhLGlCQUNOLE1BRU1tSSxNQUZVckwsRUFBRXhYLE1BQU00aUIsZUFFRmdtQyxRQUFRLE1BQU05cEQsS0FBSyxTQUN6QyxhQUFhMk0sS0FBS1UsS0FBS2s5RCxZQUFZeG1ELE9BUXJDOW1CLGdCQUFpQmlFLE9BQ2YsSUFBSzNFLEtBQUtvQyxLQUFLcWhCLEtBQU0sT0FDckI5ZSxNQUFNMGEsaUJBQ04sTUFFTW1JLE1BRlVyTCxFQUFFeFgsTUFBTTRpQixlQUVGZ21DLFFBQVEsTUFBTTlwRCxLQUFLLFNBRW5DMDVELE9BQVMvc0QsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUswNUQsT0FDL0I5dUQsVUFBVStCLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLMDVELFFBQzlCLEdBRUosT0FESTMxQyxPQUFTLEdBQUcyMUMsT0FBT3hoQyxPQUFPblUsTUFBTyxTQUN4QnBYLEtBQUtVLEtBQUt3SSxPQUFPLENBQUUsY0FBZTZqRCxTQVNqRHo4RCxjQUFlaUUsTUFBTzJHLEtBQU8sU0FDM0IzRyxNQUFNMGEsaUJBRU4xYSxNQUFNOHpDLGtCQUVOLE1BQU16MEIsZUFBaUIxRyxjQUFjb3ZELHFCQUFxQi9uRSxNQUFPLFFBRTNEdzRELE9BQVMsR0FDZixJQUFLLE1BQU1yc0QsUUFBUWtULFNBQ1psVCxNQUFTLENBQUMsUUFBUyxTQUFTdlAsU0FBU3VQLEtBQUtyTixLQUFLNkgsUUFDN0IsVUFBbkJ3RixLQUFLck4sS0FBSzZILEtBQ1o2eEQsT0FBTzc3RCxLQUFLd1AsS0FBS3JOLE1BQ1csVUFBbkJxTixLQUFLck4sS0FBSzZILE1BQW9COEUsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUs2SCxLQUFLakQsT0FDaEUrSCxLQUFLeTlELGtCQUFrQixLQUFNLE1BQU8sQ0FBRWhoRSxLQUFNaUUsS0FBS2pFLGNBRy9DdUQsS0FBS1UsS0FBS205RCxVQUFVOVEsUUFTNUI0USxXQUFZcHBFLE9BQ1ZBLE1BQU0wYSxpQkFFTjFhLE1BQU04ekMsa0JBRU4sT0FEcUJ0OEIsRUFBRXhYLE1BQU00aUIsZUFDVDJtRCxPQUFPdGMsUUFBUSxTQVVyQ2x4RCx3QkFBeUJpRSxNQUFPd2tFLEtBQU05bUUsUUFBVSxJQUU5QyxJQUFJbWxCLE1BQVEsS0FDUnhhLFFBQVUsS0FDVnJJLFFBQ0ZBLE1BQU0wYSxpQkFDTnJTLFFBQVVtUCxFQUFFeFgsTUFBTTRpQixlQUVsQkMsTUFBUXhhLFFBQVF1Z0QsUUFBUSxNQUFNOXBELEtBQUssVUFHckMsTUFBTTZSLE9BQVNsRixLQUFLVSxLQUFLck4sS0FBS0EsS0FBS21tRSxNQUFNSyxPQUNyQzU3RCxVQUFVK0IsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUttbUUsTUFBTUssUUFDcEMsR0FDSixPQUFRZCxNQUNOLElBQUssTUFFSDd6RCxPQUFPaFUsS0FBSyxDQUVWdUwsS0FBTXhLLFFBQVF3SyxNQUFRN00sS0FBSzRQLEtBQUtDLFNBQVMscUJBRXpDdEMsTUFBTyxnQkFFVCxNQUNGLElBQUssU0FFSCtILE9BQU9rUyxPQUFTLENBQ2QzYSxLQUFNRyxRQUFRMm9DLEdBQUcsU0FBVzNvQyxRQUFROHlDLE1BQVF4cUMsT0FBT2tTLE9BQU8zYSxLQUMxRFUsTUFBT1AsUUFBUTJvQyxHQUFHLFVBQVkzb0MsUUFBUTh5QyxNQUFReHFDLE9BQU9rUyxPQUFPamEsT0FFOUQsTUFDRixJQUFLLFNBRUNpYSxPQUFTLEdBQUdsUyxPQUFPcW1CLE9BQU9uVSxNQUFPLEdBRXpDLGFBQWFwWCxLQUFLVSxLQUFLd0ksT0FBTyxDQUFFLG9CQUFxQmhFLFVDak1sRCxNQUFNNjRELDJCQUEyQnZtQixXQUszQjN3Qiw0QkFDVCxPQUFPRCxZQUFZOWdCLE1BQU0rZ0IsZUFBZ0IsQ0FDdkNuUCxRQUFTLENBQUMsT0FBUSxRQUFTLFFBQVMsV0FDcEM3TCxTQUFVLG1EQUNWaTdCLE1BQU8sSUFDUEMsT0FBUSxJQUNSUCxTQUFVLENBQUMsQ0FBRUMsYUFBYyxRQUFTQyxhQUFjLE9BQ2xEcWYsS0FBTSxDQUNKLENBQ0VDLFlBQWEsYUFDYkMsZ0JBQWlCLGNBQ2pCQyxRQUFTLFlBTWpCNTFELG9CQUFxQmlFLE1BQU9sQixNQUMxQixJQUFLMk0sS0FBS2pILE1BQU0wYSxRQUFTLE1BQU8sR0FDaEMsR0FBMEIsU0FBdEJwZ0IsS0FBSzBnQixhQUF5QixNQUFPLEdBQ3pDLE1BQU1DLE9BQVNwa0IsS0FBS3FrQixRQUFRbmtCLElBQUl1RCxLQUFLb0ksSUFDckMsSUFBS3VZLE9BQVEsTUFBTyxHQUNwQixNQUFNcFQsTUFBUW9ULE9BQU94RCxTQUNsQm5mLFFBQU9xUCxNQUFRLENBQUMsT0FBUSxPQUFRLFFBQVMsVUFBVXZQLFNBQVN1UCxLQUFLeEYsUUFDakU3SSxLQUFJcU8sTUFBUUEsS0FBSzRPLFdBQ2hCMU8sTUFBTXRQLE9BQVMsU0FDWDBPLEtBQUtqSCxNQUFNdTlCLHdCQUF3QixPQUFRMTFCLE9BSXJEZzZDLGdCQUVBdHFELGdCQUNFLE1BQU0rQyxXQUFheVMsTUFBTWdPLFVBQ25Ca3FELFVBQVkzcUUsS0FBS0EsS0FLdkIsR0FKQTJxRSxVQUFVbkYsU0FBV2pwRSxLQUFLb0MsS0FBS3FoQixLQUMvQjJxRCxVQUFVdG1CLFNBQVcxM0MsS0FBSzIzQyxXQUUxQnFtQixVQUFVcG1CLFlBQWMsR0FDcEJ2a0QsS0FBS3VOLE1BQU8sQ0FDZCxJQUFLLE1BQU1GLFFBQVFyTixLQUFLdU4sTUFFbkJ4TyxPQUFPMmxDLFVBQVVDLGVBQWV6Z0MsS0FDL0J5bUUsVUFBVXBtQixZQUNWbDNDLEtBQUt4RixRQUdQOGlFLFVBQVVwbUIsWUFBWWwzQyxLQUFLeEYsTUFBUSxJQUVyQzhpRSxVQUFVcG1CLFlBQVlsM0MsS0FBS3hGLE1BQU1oSyxLQUFLd1AsTUFFeEMsSUFBSyxNQUFNNjRDLFlBQVl5a0IsVUFBVXBtQixZQUMvQm9tQixVQUFVcG1CLFlBQVkyQixVQUFVcnNCLE1BQUssQ0FBQ3A1QixFQUFHaXRCLElBQ2hDanRCLEVBQUUySSxLQUFLaWdDLGNBQWMzYixFQUFFdGtCLFFBaUNwQyxPQTVCQXVoRSxVQUFVQyxZQUMrQyxXQUF2RHJ1RSxLQUFLSSxTQUFTRixJQUFJLE9BQVEsMEJBQzFCRixLQUFLb0MsS0FBS3FoQixLQUVaMnFELFVBQVU1akIsbUJBQ1Job0QsT0FBTzJsQyxVQUFVQyxlQUFlemdDLEtBQUt5bUUsVUFBVXBtQixZQUFhLFVBQzNEb21CLFVBQVUzcUUsS0FBSzIzQixNQUFNb1QsT0FDeEI0L0IsVUFBVTNqQixtQkFDUmpvRCxPQUFPMmxDLFVBQVVDLGVBQWV6Z0MsS0FBS3ltRSxVQUFVcG1CLFlBQWEsVUFDM0RvbUIsVUFBVTNxRSxLQUFLMjNCLE1BQU1vVCxPQUN4QjQvQixVQUFVMWpCLG9CQUNSbG9ELE9BQU8ybEMsVUFBVUMsZUFBZXpnQyxLQUFLeW1FLFVBQVVwbUIsWUFBYSxXQUMzRG9tQixVQUFVM3FFLEtBQUsyM0IsTUFBTW9ULE9BQ3hCNC9CLFVBQVV6akIscUJBQ1Jub0QsT0FBTzJsQyxVQUFVQyxlQUFlemdDLEtBQUt5bUUsVUFBVXBtQixZQUFhLFlBQzFEb21CLFVBQVUzcUUsS0FBSzIzQixNQUFNb1QsUUFDckJ4dUMsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLG1CQUM5Qmt1RSxVQUFVdmpCLHFCQUNScm9ELE9BQU8ybEMsVUFBVUMsZUFBZXpnQyxLQUFLeW1FLFVBQVVwbUIsWUFBYSxZQUMzRG9tQixVQUFVM3FFLEtBQUsyM0IsTUFBTW9ULE9BRXhCNC9CLFVBQVV6YixhQUNSeWIsVUFBVTVqQixvQkFDVjRqQixVQUFVM2pCLG9CQUNWMmpCLFVBQVUxakIscUJBQ1YwakIsVUFBVXpqQixzQkFDVnlqQixVQUFVdmpCLHFCQUVMdWpCLFVBR1RqbkQsa0JBQW1CcEwsTUFDakI3RixNQUFNaVIsa0JBQWtCcEwsTUFFeEJBLEtBQUs0QyxLQUFLLGNBQWN5SSxPQUFNa21DLEtBQzVCLE1BQU1obUMsR0FBS25MLEVBQUVteEMsR0FBRy9sQyxlQUFlZ21DLFFBQVEsU0FDMUJuOUMsS0FBS2pILE1BQU02SCxNQUFNOVEsSUFBSW9uQixHQUFHN2pCLEtBQUssV0FDckNrZ0IsTUFBTXRCLFFBQU8sTUFHcEJ0RyxLQUFLNEMsS0FBSyxxQkFBcUJ5SSxNQUFNaFgsS0FBS3c4QyxtQkFBbUI3a0QsS0FBS3FJLE9BRWxFMkwsS0FBSzRDLEtBQUssZUFBZXlJLE1BQU1oWCxLQUFLNDlDLGFBQWFqbUQsS0FBS3FJLE9BQ3REMkwsS0FBSzRDLEtBQUssZ0JBQWdCeUksTUFBTWhYLEtBQUsrOEMsZUFBZXBsRCxLQUFLcUksT0FFekQyTCxLQUFLNEMsS0FBSyxnQkFBZ0J5SSxPQUFNMW1CLE1BQUFBLEtBQzlCLE1BQU00bUIsR0FBS25MLEVBQUVteEMsR0FBRy9sQyxlQUFlZ21DLFFBQVEsU0FDakNDLGFBQWVwOUMsS0FBS2pILE1BQU02SCxNQUFNOVEsSUFBSW9uQixHQUFHN2pCLEtBQUssVUFBVyxDQUMzRGdxRCxRQUFRLFVBRUpELGFBQWFuaEIsU0FDbkIva0IsR0FBR29tQyxRQUFRLEtBQUssSUFBTXQ5QyxLQUFLaVMsUUFBTyxRQUdwQ3RHLEtBQUs0QyxLQUFLLGFBQWF5SSxPQUFNa21DLEtBQzNCLE9BQVFBLEdBQUcvbEMsY0FBYzVqQixRQUFRMkgsTUFDL0IsSUFBSyxPQUNIOEUsS0FBS2pILE1BQU13a0QsZ0JBQWdCTCxJQUMzQixNQUNGLElBQUssT0FDSGw5QyxLQUFLakgsTUFBTXlrRCxnQkFBZ0JOLElBQzNCLE1BQ0YsSUFBSyxRQUNIbDlDLEtBQUtqSCxNQUFNMGtELGlCQUFpQlAsSUFDNUIsTUFDRixJQUFLLFFBQ0hsOUMsS0FBS2pILE1BQU0ya0QsaUJBQWlCUixJQUM1QixNQUNGLElBQUssU0FDSGw5QyxLQUFLakgsTUFBTTRrRCxrQkFBa0JULFFBS25DdnhDLEtBQUs0QyxLQUFLLFNBQVN5SSxNQUFNaFgsS0FBS3E3QyxlQUFlMWpELEtBQUtxSSxPQUdwRDFQLHFCQUFzQmlFLE9BQ3BCQSxNQUFNMGEsaUJBQ04sTUFBTSt3QyxTQUFXaGdELEtBQUtqSCxNQUFNcWxDLE9BQzVCcCtCLEtBQUtqSCxNQUFNcWxDLFFBQVU0aEIsU0FHdkIxdkQsbUJBQW9CaUUsT0FDbEIsTUFBTTJpQixHQUFLbkwsRUFBRXhYLE1BQU00aUIsZUFBZWdtQyxRQUFRLFNBQ3BDejhDLEtBQU9WLEtBQUtqSCxNQUFNNkgsTUFBTTlRLElBQUlvbkIsR0FBRzdqQixLQUFLLFdBQzFDLElBQUlxSSxRQUFVLE1BQVE5TCxLQUFLNFAsS0FBS0MsU0FBUyxrQ0FDekMsTUFBTTVFLFFBQVUsQ0FDZHNrRCxVQUFXbi9DLEtBQUtqSCxNQUFNMEMsR0FDdEJlLE1BQU8sS0FDUDRpRCxRQUFTcC9DLEtBQUtqSCxNQUFNMEMsR0FDcEJpRixLQUFNQSxLQUFLakYsSUFFVHVFLEtBQUt6RCxPQUFPeEQsUUFDZDhCLFFBQVFza0QsVUFBWW4vQyxLQUFLekQsTUFBTWQsR0FDL0JaLFFBQVEyQixNQUFRd0QsS0FBS3pELE1BQU1nVCxPQUFPOVQsSUFFcEMsTUFBTVMsT0FBU3RNLEtBQUtzTSxPQUFPN0ssUUFBT3N6QyxJQUNoQyxJQUFLLENBQUMsWUFBYSxNQUFPLFdBQVksYUFBYXh6QyxTQUFTd3pDLEVBQUV6cEMsTUFDNUQsT0FBTyxFQUVULEdBQUk4RSxLQUFLakgsTUFBTTBDLEtBQU9rcEMsRUFBRWxwQyxHQUN0QixPQUFPLEVBRVQsSUFBSTRqRCxTQUFVLEVBQ2QsSUFBSyxNQUFPbHJELEVBQUc3QixLQUFNRixPQUFPZ0MsUUFBUXV3QyxFQUFFdHhDLEtBQUswcEIsWUFDL0IsWUFBTjVvQixHQUFtQkEsSUFBTXZFLEtBQUtvQyxLQUFLeUosS0FDckM0akQsUUFDRUEsU0FDQS9zRCxLQUNHNkksTUFBTTZoQiwyQkFBNkI3aEIsTUFBTThoQixvQkFBb0JxaUMsTUFHdEUsT0FBT0QsV0FFVDNqRCxTQUFvQiw2Q0FDcEIsSUFBSyxNQUFNM0MsU0FBU21ELE9BQ2xCUixRQUNFQSxRQUFVLGtCQUFvQjNDLE1BQU0wQyxHQUFLLEtBQU8xQyxNQUFNMEQsS0FBTyxZQUVqRWYsU0FBb0IsNkJBQ2RrVyxPQUFPdUwsT0FBTyxDQUNsQjNwQixNQUFPNUQsS0FBSzRQLEtBQUtDLFNBQVMsdUNBQzFCL0QsUUFDQW9XLFNBQVVuRyxPQUNSLE1BQU11TyxTQUFXLElBQUlHLFNBQVMxTyxLQUFLLEdBQUc5TCxjQUFjLGdCQUNwRCxJQUFLLE1BQU9wRCxLQUFNVSxTQUFVK2MsU0FDYixTQUFUemQsT0FDRjVCLFFBQVF1a0QsUUFBVWppRCxnQkFLcEJ2TixLQUFLMGtDLFdBQVdDLFlBQVksZ0JBQWlCMTVCLFNBR3JEa2lELGVBQWdCeG9ELE9BQ2RBLE1BQU0wYSxpQkFDTixNQUFNaUksR0FBS25MLEVBQUV4WCxNQUFNNGlCLGVBQWVnbUMsUUFBUSxTQUNwQ3o4QyxLQUFPVixLQUFLakgsTUFBTTZILE1BQU05USxJQUFJb25CLEdBQUc3akIsS0FBSyxZQUNwQzVCLFNBQVdpUCxLQUFLc3JDLFlBQVksQ0FBRXFVLFFBQVNyZ0QsS0FBS2pILE1BQU0wYSxVQUd4RCxHQUFJeUQsR0FBR29wQyxTQUFTLFlBQWEsQ0FDM0IsTUFBTUMsUUFBVXJwQyxHQUFHMDdCLFNBQVMsaUJBQzVCMk4sUUFBUWpELFFBQVEsS0FBSyxJQUFNaUQsUUFBUWpyQyxlQUM5QixDQUNMLE1BQU1rckMsSUFBTXowQyxFQUFFLG9DQUVSbWdDLE9BQVNuZ0MsRUFBRSxtQ0FDakIsSUFBSyxNQUFNc2dDLEtBQUs1NkMsU0FBU3k2QyxPQUN2QkEsT0FBTzFZLE9BQ0wsb0RBQW9ENlksRUFBRTV2QywwQ0FBMEM0dkMsRUFBRWx2QyxzQkFTdEcsR0FOQXFqRCxJQUFJaHRCLE9BQU8wWSxRQUVYc1UsSUFBSWh0QixPQUNGem5CLEVBQUUsaUNBQWlDdGEsU0FBU29rQyxZQUFZMTRCLGdCQUd0RHVELEtBQUtyTixLQUFLQSxLQUFLK3JCLFlBQVlwb0IsS0FBTSxDQUNuQyxNQUFNeXBELFdBQWExMEMsRUFDakIsNkJBQTZCdGEsU0FBU29rQyxZQUFZLy9CLGlCQUVwRDBxRCxJQUFJaHRCLE9BQU9pdEIsWUFHYixNQUFNdFUsTUFBUXBnQyxFQUFFLHVDQUNoQixJQUFLLE1BQU1zZ0MsS0FBSzU2QyxTQUFTMnRCLFdBQ3ZCK3NCLE1BQU0zWSxPQUNKLGtDQUFrQzVqQyxLQUFLNFAsS0FBS0MsU0FBUzRzQyxZQUd6RG1VLElBQUlodEIsT0FBTzJZLE9BRVhqMUIsR0FBR3NjLE9BQU9ndEIsSUFBSUUsUUFDZHp4QixXQUFXMHhCLGtCQUFrQkgsS0FDN0JBLElBQUlJLFVBQVUsS0FFaEIxcEMsR0FBR2MsWUFBWSxZQUlqQndrQyxtQkFBb0Jqb0QsT0FDbEJBLE1BQU0wYSxpQkFDTmxELEVBQUV4WCxNQUFNNGlCLGVBQWU2cEMsU0FBUyxNQUFNa2QsWUFBWSxNQ3BQL0MsTUFBTUMsdUJBQXVCaEMsVUFLdkJueEMsbUJBQ1QsTUFBTyxDQUNMb3pDLFFBQVMsV0FRRnYzQyw0QkFlVCxPQWRnQkQsWUFBWTlnQixNQUFNK2dCLGVBQWdCLENBQ2hEblAsUUFBUyxDQUFDLE9BQVEsVUFBVyxPQUFRLFNBQ3JDb3ZCLE1BQU8sSUFDUEMsT0FBUSxJQUNSOGIsV0FBVyxFQUNYa0QsS0FBTSxDQUNKLENBQ0VDLFlBQWEsYUFDYkMsZ0JBQWlCLGNBQ2pCQyxRQUFTLG1CQWNicjZDLGVBQ0YsTUFBTywwQ0FHRTNRLGtCQUNULE1BQU8saUJBVVQ0WSxRQUFTN2hCLFFBQVUsSUFDakJvTixHQUFHQyxjQUFjQyxLQUNmM1AsS0FBSzRQLEtBQUtDLFNBQVMscUNBRXJCLE1BQU1wTSxLQUFPeVMsTUFBTWdPLFFBQVE3aEIsU0FFdkIrTixLQUFLbytELFVBQVNwK0QsS0FBS3ErRCxNQUFNLEdBQUd0dUUsT0FBUyxTQUd6QyxNQUFNcTdELFNBQVcvM0QsS0FBS0EsS0F5RHRCLE9BeERBQSxLQUFLQSxLQUFPKzNELFNBQVMvM0QsS0FHckJBLEtBQUtpckUsYUFBZXQrRCxLQUFLcytELGFBQ3pCanJFLEtBQUtrckUsTUFBUXYrRCxLQUFLdStELE1BQ2xCbHJFLEtBQUttckUsUUFBVXgrRCxLQUFLdytELFFBSXBCbnJFLEtBQUtvckUsWUFBY3ByRSxLQUFLa3JFLE1BQU1qdEUsT0FDMUIrQixLQUFLa3JFLE1BQU16eUIsUUFBTyxDQUFDZ3lCLEtBQU1ub0QsVUFDekJtb0QsS0FBS1ksWUFBYy9vRCxRQUFRK29ELFlBQWNaLEtBQU9ub0QsVUFDaEQrb0QsYUFDQyxFQUVMcnJFLEtBQUtzckUsWUFBY3RyRSxLQUFLa3JFLE1BQU1qdEUsT0FDMUIrQixLQUFLa3JFLE1BQU16eUIsUUFBTyxDQUFDZ3lCLEtBQU1ub0QsVUFDekJtb0QsS0FBS1ksWUFBYy9vRCxRQUFRK29ELFlBQWNaLEtBQU9ub0QsVUFDaEQrb0QsYUFDQyxFQUVMcnJFLEtBQUt1ckUsY0FBZ0J2ckUsS0FBS21yRSxRQUFRbHRFLE9BQzlCK0IsS0FBS21yRSxRQUFRMXlCLFFBQU8sQ0FBQ2d5QixLQUFNbm9ELFVBQzNCbW9ELEtBQUtZLFlBQWMvb0QsUUFBUStvRCxZQUFjWixLQUFPbm9ELFVBQ2hEK29ELGFBQ0MsRUFFTHJyRSxLQUFLd3JFLGNBQWdCeHJFLEtBQUttckUsUUFBUWx0RSxPQUM5QitCLEtBQUttckUsUUFBUTF5QixRQUFPLENBQUNneUIsS0FBTW5vRCxVQUMzQm1vRCxLQUFLWSxZQUFjL29ELFFBQVErb0QsWUFBY1osS0FBT25vRCxVQUNoRCtvRCxhQUNDLEVBRUxyckUsS0FBS21yRSxRQUFROXNELFNBQVEyNkIsSUFDZkEsRUFBRXF5QixZQUFjcnJFLEtBQUtvckUsWUFBYXB5QixFQUFFeXlCLFVBQ25DenlCLEVBQUUweUIsaUJBQ1AxeUIsRUFBRTJ5QixRQUFVM3lCLEVBQUVxeUIsY0FBZ0JyckUsS0FBS3dyRSxjQUNuQ3h5QixFQUFFNHlCLFFBQVU1eUIsRUFBRXF5QixjQUFnQnJyRSxLQUFLdXJFLGlCQUdyQ3ZyRSxLQUFLa3JFLE1BQU03c0QsU0FBUTI2QixJQUNiQSxFQUFFcXlCLFlBQWNyckUsS0FBS3dyRSxjQUFleHlCLEVBQUUzK0IsVUFDckMyK0IsRUFBRTB5QixpQkFDUDF5QixFQUFFMnlCLFFBQVUzeUIsRUFBRXF5QixjQUFnQnJyRSxLQUFLc3JFLFlBQ25DdHlCLEVBQUU0eUIsUUFBVTV5QixFQUFFcXlCLGNBQWdCcnJFLEtBQUtvckUsZUFHckNwckUsS0FBSzZyRSxVQUFZbC9ELEtBQUtrL0QsVUFDdEI3ckUsS0FBSzhyRSxnQkFBa0JuL0QsS0FBS20vRCxnQkFDNUI5ckUsS0FBSytyRSxlQUFpQnAvRCxLQUFLby9ELGVBQzNCL3JFLEtBQUtnc0UsaUJBQW1Cci9ELEtBQUtxL0QsaUJBQzdCaHNFLEtBQUtpc0UsYUFBZXQvRCxLQUFLcy9ELGFBQ3pCanNFLEtBQUsrcUUsUUFBVXArRCxLQUFLbytELFFBQ3BCL3FFLEtBQUtrc0UscUJBQXVCdi9ELEtBQUt3L0QsNEJBRWpDbnNFLEtBQUt3bEUsU0FBV2pwRSxLQUFLb0MsS0FBS3FoQixLQUNuQmhnQixLQUdMaXJFLG1CQUNGLE1BQU1tQixNQUFRLEdBTWQsT0FMQXovRCxLQUFLVSxLQUFLck4sS0FBS0EsS0FBS2lyRSxhQUFhNXNELFNBQVEyNkIsSUFDdkNvekIsTUFBTXZ1RSxLQUFLLElBQUl3dUUsYUFBYXJ6QixJQUM1QkEsRUFBRWoxQixNQUFRcW9ELE1BQU1udUUsT0FBUyxLQUUzQm11RSxNQUFNdnlDLE1BQUssQ0FBQ3A1QixFQUFHaXRCLElBQU1qdEIsRUFBRTRxRSxZQUFjMzlDLEVBQUUyOUMsY0FDaENlLE1BSUxELGtDQUNGLE1BQU1qbUQsS0FBTyxHQXNDYixPQXJDQW1iLFNBQVNnUSw4QkFBOEJoekIsU0FBUThnQyxHQUM3Q2o1QixLQUFLcm9CLEtBQ0gsR0FBR3RCLEtBQUs0UCxLQUFLQyxTQUFTLDRCQUE0Qit5QyxFQUFFbmQsZ0JBR3hEOWIsS0FBS3JvQixLQUNILEdBQUd0QixLQUFLNFAsS0FBS0MsU0FBUyxzQkFBc0I3UCxLQUFLNFAsS0FBS0MsU0FDcEQsaUJBR0o4WixLQUFLcm9CLEtBQ0gsR0FBR3RCLEtBQUs0UCxLQUFLQyxTQUFTLHNCQUFzQjdQLEtBQUs0UCxLQUFLQyxTQUNwRCxxQkFJK0IsSUFBeEI3UCxLQUFLNDNCLEtBQUtrUixXQUNuQjlvQyxLQUFLNDNCLEtBQUtrUixVQUFVaG5CLFNBQVF0VSxJQUV2Qm1jLEtBQUtwb0IsU0FBU2lNLEVBQUVYLE9BQ2hCVyxFQUFFWCxLQUNBWCxjQUNBM0ssU0FDQyxJQUFJdkIsS0FBSzRQLEtBQUtDLFNBQVMsdUJBQXVCM0QsZ0JBR2xEeWQsS0FBS3JvQixLQUFLa00sRUFBRVgsU0FJbEJ1RCxLQUFLcytELGFBQWE1c0QsU0FBUTI2QixJQUNwQkEsRUFBRXR6QyxPQUNKc3pDLEVBQUV0ekMsTUFBTW1NLE9BQU93TSxTQUFRdFUsSUFDaEJtYyxLQUFLcG9CLFNBQVNpTSxFQUFFWCxPQUFPOGMsS0FBS3JvQixLQUFLa00sRUFBRVgsWUFJdkM4YyxLQUFLMlQsS0FBS3l5QyxLQUFLQyxXQUFXQyxTQUcvQnRCLFlBQ0YsT0FDRXYrRCxLQUFLcytELGFBQ0ZqdEUsUUFBT2c3QyxJQUFNQSxFQUFFeXpCLFVBQVl6ekIsRUFBRTB6QixVQUM3Qjd5QyxNQUFLLENBQUNwNUIsRUFBR2l0QixJQUFNanRCLEVBQUU0cUUsWUFBYzM5QyxFQUFFMjlDLGVBQWdCLEdBSXBERixjQUNGLE9BQ0V4K0QsS0FBS3MrRCxhQUNGanRFLFFBQU9nN0MsR0FBS0EsRUFBRXl6QixVQUFZenpCLEVBQUUwekIsVUFDNUI3eUMsTUFBSyxDQUFDcDVCLEVBQUdpdEIsSUFBTWp0QixFQUFFNHFFLFlBQWMzOUMsRUFBRTI5QyxlQUFnQixHQUl4RHNCLFdBQVl6bUQsTUFDVixPQUFLQSxNQUFNam9CLE9BQ0ppb0IsS0FBS3V5QixRQUFPLENBQUNneUIsS0FBTW5vRCxVQUN4Qm1vRCxLQUFLWSxZQUFjL29ELFFBQVErb0QsWUFBY1osS0FBT25vRCxVQUNoRCtvRCxhQUh5QixFQU03QnVCLFdBQVkxbUQsTUFDVixPQUFLQSxNQUFNam9CLE9BQ0ppb0IsS0FBS3V5QixRQUFPLENBQUNneUIsS0FBTW5vRCxVQUN4Qm1vRCxLQUFLWSxZQUFjL29ELFFBQVErb0QsWUFBY1osS0FBT25vRCxVQUNoRCtvRCxhQUh5QixFQU03QndCLGlCQUFrQmhCLFdBQ2hCLEdBQUtBLFdBQVc1dEUsT0FBaEIsQ0FDQTR0RSxVQUFVLEdBQUdpQixPQUFRLEVBRXJCLElBQUssSUFBSS9vRCxNQUFRLEVBQUdBLE1BQVE4bkQsVUFBVTV0RSxPQUFROGxCLFFBQVMsQ0FDckQsTUFBTU0sUUFBVSxHQUNWdy9DLFNBQVdnSSxVQUFVOW5ELE9BQ3RCOC9DLFNBQVN6NkQsTUFBTWliLFFBQVF4bUIsS0FBSyxTQUM3QmdtRSxTQUFTbm5FLFFBQVEybkIsUUFBUXhtQixLQUFLLFVBQzlCZ21FLFNBQVNrSixPQUFTcGdFLEtBQUtvK0QsU0FBUzFtRCxRQUFReG1CLEtBQUssUUFDakRnbUUsU0FBU3B3QyxXQUFhcFAsUUFBUS9rQixLQUFLLEtBR2pDdXNFLFVBQVU1dEUsT0FBUyxJQUFHNHRFLFVBQVVBLFVBQVU1dEUsT0FBUyxHQUFHK3VFLE1BQU8sR0FFakVuQixVQUFVeHRELFNBQVE0dUQsSUFDaEIsR0FBSUEsRUFBRWhDLGNBQWdCZ0MsRUFBRWhDLGFBQWFodEUsT0FBUSxDQUczQyxJQUFLLElBQUlza0IsRUFBSSxFQUFHQSxFQUFJMHFELEVBQUVoQyxhQUFhaHRFLE9BQVFza0IsSUFBSyxDQUM5QyxNQUFNd2EsS0FBT2t3QyxFQUFFaEMsYUFBYTFvRCxHQUc1QixJQUFJeTJCLEVBQ2dCLGlCQUFUamMsTUFBcUJBLGdCQUFnQnJoQixPQUM5Q3M5QixFQUFJcnNDLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLaXJFLGFBQWEvdkQsTUFBSzg5QixHQUFLamMsT0FBU2ljLEVBQUVTLE9BQ3ZCLGlCQUExQjFjLEtBQUt0c0IsWUFBWXJILE1BQzFCNHZDLE9BQUlub0MsRUFDSjdFLEdBQUdDLGNBQWNDLEtBQUssdUNBQ2pCOHNDLE9BQUlub0MsT0FFUEEsSUFBY21vQyxFQUNoQmkwQixFQUFFaEMsYUFBYTFvRCxHQUFLLElBQUk4cEQsYUFBYXJ6QixHQUdyQy9VLFFBQVE5aEIsTUFDTiw0REFJTjhxRCxFQUFFaEMsYUFBYXB4QyxLQUFLcXpDLHVCQUt0QnJCLGdCQUNGLE1BQU1BLFVBQVlsL0QsS0FBS28rRCxRQUNuQnArRCxLQUFLVSxLQUFLck4sS0FBS0EsS0FBSzZyRSxVQUFVM2xELEtBQzVCdGIsVUFBVStCLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLNnJFLFVBQVUzbEQsTUFDeEMsR0FDRnZaLEtBQUt3Z0UsVUFFVCxPQURBeGdFLEtBQUtrZ0UsaUJBQWlCaEIsV0FDZkEsVUFHTHNCLGdCQUNGLElBQ0d4Z0UsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUs2ckUsVUFBVTNsRCxNQUNlLElBQTlDdlosS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUs2ckUsVUFBVTNsRCxLQUFLam9CLE9BRW5DLE9BR0YsTUFBTTR0RSxVQUFZLEdBRVprQixLQUFPcGdFLEtBQUt5Z0UsYUFDbEIsSUFBSUMsb0JBQXFCQyxlQUFnQkMsZ0JBbUJ6QyxHQWpCRUYsb0JBREVOLEtBQUs5dUUsUUFBVSxHQUVSME8sS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUt3dEUsZUFBaUJULEtBQUs5dUUsT0FEN0IsRUFHSzh1RSxLQUFLOXVFLE9BQVMwTyxLQUFLVSxLQUFLck4sS0FBS0EsS0FBS3d0RSxjQUVuQkYsZUFBeEMzZ0UsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUt3dEUsZUFBaUIsR0FDaEM3Z0UsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUt3dEUsZUFBaUJULEtBQUs5dUUsT0FEVSxFQUdyQzBPLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLd3RFLGNBQWdCVCxLQUFLOXVFLE9BRy9Ec3ZFLGdCQUQwQixJQUF4QkYsb0JBQ2dCMWdFLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLNnJFLFVBQVUzbEQsS0FBS2pvQixPQUduRDBPLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLNnJFLFVBQVUzbEQsS0FBS2pvQixPQUFTb3ZFLG9CQUc1QixJQUFoQk4sS0FBSzl1RSxRQUNIME8sS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUt3dEUsY0FBZ0IsRUFDdEMsSUFDRSxJQUFJenBELE1BQVEsRUFDWkEsTUFBUWhuQixLQUFLQyxJQUFJMlAsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUt3dEUsZUFDckN6cEQsUUFFQWdwRCxLQUFLbHZFLEtBQUssQ0FDUjQ3QyxLQUFNOXNDLEtBQUs4Z0Usa0JBQ1hWLE1BQU0sRUFDTjlCLGFBQWMsS0FNdEIsTUFBTXlDLGVBQWlCOWlFLFVBQVUrQixLQUFLVSxLQUFLck4sS0FBS0EsS0FBSzZyRSxXQUNyRCxJQUFLLElBQUk5bkQsTUFBUSxFQUFHQSxNQUFRd3BELGdCQUFpQnhwRCxRQUFTLENBQ3BELElBQUk4L0MsU0FBVyxHQUNmLE1BQU1vSCxhQUFlLEdBRW5CbG5ELE9BQVNzcEQscUJBQ1R0cEQsTUFBUXNwRCxvQkFBc0JLLGVBQWV4bkQsS0FBS2pvQixTQUVsRDRsRSxTQUFXajVELFVBQVU4aUUsZUFBZXhuRCxLQUFLbkMsTUFBUXNwRCxzQkFDakR4SixTQUFTa0osTUFBTyxPQUNxQixJQUExQmxKLFNBQVNvSCxjQUNsQnBILFNBQVNvSCxhQUFhNXNELFNBQVEyNkIsSUFDbEIsT0FBTkEsR0FBWWl5QixhQUFhcHRFLEtBQUttN0MsT0FJcENqMUIsT0FBU3VwRCxnQkFBa0J2cEQsTUFBUXVwRCxlQUFpQlAsS0FBSzl1RSxTQUMzRHMxQixZQUFZc3dDLFNBQVVrSixLQUFLaHBELE1BQVF1cEQsZ0JBQWlCLENBQ2xEenJDLFdBQVcsU0FHNEMsSUFBOUNrckMsS0FBS2hwRCxNQUFRdXBELGdCQUFnQnJDLGNBQ3RDOEIsS0FBS2hwRCxNQUFRdXBELGdCQUFnQnJDLGFBQWE1c0QsU0FBUTI2QixJQUN0QyxPQUFOQSxHQUFZaXlCLGFBQWFwdEUsS0FBS203QyxNQUl0QzZxQixTQUFTb0gsYUFBZUEsY0FFMUJwSCxTQUFTaUosT0FBUSxFQUNqQmpKLFNBQVM4SixLQUFNLEVBQ2Y5QixVQUFVaHVFLEtBQUtnbUUsVUFHakIsT0FBT2dJLFVBR0xFLHFCQUNGLEdBQUtwL0QsS0FBS2svRCxVQUNWLE9BQU9sL0QsS0FBS2svRCxVQUFVM3dELE1BQUsreEQsR0FBS0EsRUFBRXZ3RSxTQUdoQ3N2RSx1QkFDRixJQUFLci9ELEtBQUtrL0QsVUFBVyxPQUNyQixNQUFNK0IsWUFBY2poRSxLQUFLay9ELFVBQVUxaUMsV0FBVThqQyxHQUFLQSxFQUFFdndFLFNBQ3BELE9BQXFCLElBQWpCa3hFLGFBQ2dCLElBQWhCQSxZQUNHamhFLEtBQUtrL0QsVUFBVStCLFlBQWMsUUFGcEMsRUFLRTNCLG1CQUNGLElBQUt0L0QsS0FBS2svRCxVQUFXLE9BQ3JCLE1BQU0rQixZQUFjamhFLEtBQUtrL0QsVUFBVTFpQyxXQUFVOGpDLEdBQUtBLEVBQUV2d0UsU0FDcEQsT0FBcUIsSUFBakJreEUsYUFDQUEsY0FBZ0JqaEUsS0FBS2svRCxVQUFVNXRFLE9BQVMsRUFDckMwTyxLQUFLay9ELFVBQVUrQixZQUFjLFFBRnBDLEVBS0U5QixzQkFDRixPQUFPbi9ELEtBQUtzK0QsYUFBYTRDLE9BQU12OEIsR0FBS0EsRUFBRXc4QixjQUdwQ0MsdUJBQ0YsT0FBT3BoRSxLQUFLcytELGFBQWE0QyxPQUFNNzBCLEdBQUtBLEVBQUVnMUIsWUFBWS9vRCxTQUdoRDhsRCxjQUNGLE9BQU9wK0QsS0FBS1UsS0FBS2lxQixRQUFRLE9BQVF3ekMsZUFBZW56QyxNQUFNb3pDLFNBR3hEOXRFLHNCQUNFLEdBQUswUCxLQUFLb2hFLGtCQUlWLEdBQUlwaEUsS0FBS20vRCxnQkFBaUIsQ0FJeEIsTUFBTWIsYUFBZXQrRCxLQUFLcytELGFBQ3BCZ0QsT0FBU3RoRSxLQUFLZ2dFLFdBQVcxQixjQUMvQkEsYUFBYTVzRCxTQUFRMjZCLElBQ25CQSxFQUFFaDVDLEtBQUtrdUUsZUFBc0JsMUIsRUFBRXF5QixZQUFjNEMsT0FBckIsV0FFcEJ0aEUsS0FBS3doRSxtQkFBbUJsRCxvQkFDeEJ0K0QsS0FBS3loRSxvQkFBb0J6aEUsS0FBS2svRCxpQkFDOUJsL0QsS0FBS1UsS0FBSzBtQixRQUFRLE9BQVErMkMsZUFBZW56QyxNQUFNb3pDLFNBQVMsU0FkOUQvK0QsR0FBR0MsY0FBY0MsS0FBSyxzQkFrQnRCa2hFLG1CQUVGLE1BQU1sQyxNQUFRditELEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLcXVFLGVBQzlCMWhFLEtBQUt1K0QsTUFDTHYrRCxLQUFLdStELE9BQU9sdEUsUUFBT2c3QyxJQUFNQSxFQUFFaDVDLEtBQUtxYSxVQUU5Qjh3RCxRQUFVeCtELEtBQUt3K0QsUUFhZm1ELE1BQVEsR0FFUi9DLGNBQWdCNStELEtBQUtnZ0UsV0FBV3hCLFNBQ2hDSyxjQUFnQjcrRCxLQUFLaWdFLFdBQVd6QixTQUNoQ0MsWUFBY3orRCxLQUFLZ2dFLFdBQVd6QixPQUM5QkksWUFBYzMrRCxLQUFLaWdFLFdBQVcxQixPQUVwQyxJQUF1QixJQUFuQkssZ0JBQTJDLElBQW5CQyxjQUFzQixDQUVoRCxJQUFLLElBQUkxNEMsSUFBTXk0QyxjQUFlejRDLEtBQU8wNEMsY0FBZTE0QyxNQUFPLENBRXpELE1BQU0rd0MsU0FBVyxDQUNmcHFCLEtBQU05c0MsS0FBSzhnRSxrQkFDWFYsTUFBTSxFQUNOOUIsYUFBYyxJQUVpQkUsUUFDOUJudEUsUUFBT2c3QyxHQUFLbG1CLE1BQVFrbUIsRUFBRXF5QixjQUN0Qnh4QyxNQUFLLENBQUNwNUIsRUFBR2l0QixJQUFNanRCLEVBQUV3QixJQUFNeXJCLEVBQUV6ckIsTUFDSG9jLFNBQVEyNkIsR0FDL0I2cUIsU0FBU29ILGFBQWFwdEUsS0FBS203QyxFQUFFUyxRQUUvQjYwQixNQUFNendFLEtBQUtnbUUsVUFJYixJQUFLLElBQUk5L0MsTUFBUSxFQUFHQSxNQUFRcFgsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUt1dUUsY0FBZXhxRCxRQUM3RHVxRCxNQUFNendFLEtBQUssQ0FDVDQ3QyxLQUFNOXNDLEtBQUs4Z0Usa0JBQ1hWLE1BQU0sRUFDTjlCLGFBQWMsS0FLcEIsSUFBcUIsSUFBakJHLGNBQXVDLElBQWpCRSxZQUV4QixJQUFLLElBQUl4NEMsSUFBTXM0QyxZQUFhdDRDLEtBQU93NEMsWUFBYXg0QyxNQUFPLENBRXJELE1BQU0rd0MsU0FBVyxDQUNmcHFCLEtBQU05c0MsS0FBSzhnRSxrQkFDWFYsTUFBTSxFQUNOOUIsYUFBYyxJQUVpQkMsTUFDOUJsdEUsUUFBT2c3QyxHQUFLbG1CLE1BQVFrbUIsRUFBRXF5QixjQUN0Qnh4QyxNQUFLLENBQUNwNUIsRUFBR2l0QixJQUFNanRCLEVBQUV3QixJQUFNeXJCLEVBQUV6ckIsTUFDSG9jLFNBQVEyNkIsR0FDL0I2cUIsU0FBU29ILGFBQWFwdEUsS0FBS203QyxFQUFFUyxRQUUvQjYwQixNQUFNendFLEtBQUtnbUUsVUFJZixPQUFPeUssTUFHVGIsa0JBQ0UsSUFDSWgwQixLQURBKzBCLFFBQVMsRUFFYixNQUFRQSxRQUNOLzBCLEtBQU9FLFFBQVFDLE1BQU1DLFNBQVMsSUFDOUIyMEIsT0FFSSxJQURGN2hFLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLaXJFLGFBQWFqdEUsUUFBT2c3QyxHQUFLQSxFQUFFUyxPQUFTQSxPQUFNeDdDLFFBR2hELElBRGQwTyxLQUFLVSxLQUFLck4sS0FBS0EsS0FBSzZyRSxVQUFVM2xELEtBQUtsb0IsUUFBT2c3QyxHQUFLQSxFQUFFUyxPQUFTQSxPQUN2RHg3QyxPQUdQLE9BQU93N0MsS0FJVC8xQixrQkFBbUJwTCxNQUNqQjdGLE1BQU1pUixrQkFBa0JwTCxNQUl4QkEsS0FBSzRNLEdBQUcsV0FBWSxjQUFlaUcsU0FBU3dRLGFBQWFyM0IsS0FBS3FJLE9BRTlEMkwsS0FDRzRDLEtBQUssZ0JBQ0xnSyxHQUFHLGFBQWFoa0IsT0FBU3lMLEtBQUs4aEUsd0JBQXdCdnRFLFNBQ3pEb1gsS0FDRzRDLEtBQUssZ0JBQ0xnSyxHQUFHLFlBQVloa0IsT0FBU3lMLEtBQUs4aEUsd0JBQXdCdnRFLFNBQ3hEb1gsS0FDRzRDLEtBQUssZ0JBQ0xnSyxHQUFHLGFBQWFoa0IsT0FBU3lMLEtBQUsraEUsd0JBQXdCeHRFLFNBQ3pEb1gsS0FDRzRDLEtBQUssZ0JBQ0xnSyxHQUFHLFFBQVFoa0IsT0FBU3lMLEtBQUsraEUsd0JBQXdCeHRFLFNBRXBEb1gsS0FBSzRDLEtBQUssV0FBV3lJLE1BQU1oWCxLQUFLZ2lFLGNBQWNycUUsS0FBS3FJLE9BQ25EMkwsS0FBSzRDLEtBQUssdUJBQXVCeUksTUFBTWhYLEtBQUtpaUUscUJBQXFCdHFFLEtBQUtxSSxPQUN0RTJMLEtBQUs0QyxLQUFLLGVBQWV5SSxNQUFNaFgsS0FBS2tpRSxhQUFhdnFFLEtBQUtxSSxPQUN0RDJMLEtBQUs0QyxLQUFLLGtCQUFrQnlJLE1BQU1oWCxLQUFLbWlFLGdCQUFnQnhxRSxLQUFLcUksT0FFNUQyTCxLQUNHNEMsS0FBSyxvQkFDTGdLLEdBQUcsYUFBYWhrQixPQUFTeUwsS0FBSzhoRSx3QkFBd0J2dEUsU0FDekRvWCxLQUNHNEMsS0FBSyxvQkFDTGdLLEdBQUcsWUFBWWhrQixPQUFTeUwsS0FBSzhoRSx3QkFBd0J2dEUsU0FDeERvWCxLQUNHNEMsS0FBSyxvQkFDTGdLLEdBQUcsYUFBYWhrQixPQUFTeUwsS0FBSytoRSx3QkFBd0J4dEUsU0FDekRvWCxLQUNHNEMsS0FBSyxvQkFDTGdLLEdBQUcsUUFBUWhrQixPQUFTeUwsS0FBSytoRSx3QkFBd0J4dEUsU0FFcERvWCxLQUFLNEMsS0FBSyxhQUFheUksTUFBTWhYLEtBQUtvaUUsa0JBQWtCenFFLEtBQUtxSSxPQUV6RDJMLEtBQUs0QyxLQUFLLHFCQUFxQnlJLE1BQU1oWCxLQUFLcWlFLG1CQUFtQjFxRSxLQUFLcUksT0FFbEUyTCxLQUFLNEMsS0FBSyxXQUFXeUksTUFBTWhYLEtBQUt1akQsZUFBZTVyRCxLQUFLcUksT0FFcEQyTCxLQUFLNEMsS0FBSyxtQkFBbUJ5SSxNQUFNaFgsS0FBS3NpRSxpQkFBaUIzcUUsS0FBS3FJLE9BRTlEMkwsS0FBSzRDLEtBQUssa0JBQWtCeUksTUFBTWhYLEtBQUt1aUUscUJBQXFCNXFFLEtBQUtxSSxPQUNqRTJMLEtBQUs0QyxLQUFLLG9CQUFvQnlJLE1BQU1oWCxLQUFLd2lFLHVCQUF1QjdxRSxLQUFLcUksT0FDckUyTCxLQUFLNEMsS0FBSyxXQUFXeUksTUFBTWhYLEtBQUtxbkIsVUFBVTF2QixLQUFLcUksT0FFbkIsSUFBSXlpRSxTQUFTLENBQ3ZDLzdCLGFBQWMsZUFDZGc4QixVQUFXLENBQUVDLEtBQU0zaUUsS0FBSzRpRSxtQkFBbUJqckUsS0FBS3FJLFNBRTlCckksS0FBS2dVLEtBQUssSUFROUIsR0FOK0IsSUFBSTgyRCxTQUFTLENBQzFDLzdCLGFBQWMsbUJBQ2RnOEIsVUFBVyxDQUFFQyxLQUFNM2lFLEtBQUtvaUUsa0JBQWtCenFFLEtBQUtxSSxTQUUxQnJJLEtBQUtnVSxLQUFLLElBRTdCM0wsS0FBS28rRCxRQUFTLENBQ2tCLElBQUlxRSxTQUFTLENBQzdDaDhCLGFBQWMscUJBQ2RDLGFBQWMsa0JBQ2RtOEIsWUFBYSxDQUNYQyxVQUFXOWlFLEtBQUsraUUsOEJBQThCcHJFLEtBQUtxSSxNQUNuRDJpRSxLQUFNM2lFLEtBQUtnakUsNkJBQTZCcnJFLEtBQUtxSSxPQUUvQzBpRSxVQUFXLENBQ1RJLFVBQVc5aUUsS0FBS2lqRSw2QkFBNkJ0ckUsS0FBS3FJLE1BQ2xEMmlFLEtBQU0zaUUsS0FBS2tqRSw0QkFBNEJ2ckUsS0FBS3FJLE1BQzVDbWpFLFNBQVVuakUsS0FBS29qRSxhQUFhenJFLEtBQUtxSSxTQUdYckksS0FBS2dVLEtBQUssSUFFcENBLEtBQ0c0QyxLQUFLLG1CQUNMZ0ssR0FBRyxhQUFhaGtCLE9BQVN5TCxLQUFLcWpFLGFBQWE5dUUsVUFTbEQrdUUsZUFBZ0JqcUMsV0FBYSxJQUczQixJQUFJaG1DLEtBRE8sSUFBSTQwQixpQkFBaUJqb0IsS0FBS2dvQixLQUFNLENBQUV1N0MsUUFBU3ZqRSxLQUFLdWpFLFVBQzdDcjdDLFdBWWQsR0FYZ0I3MEIsS0FBWmdtQyxXQUFtQnpTLFlBQVl2ekIsS0FBTWdtQyxZQUM3QmpSLGFBQWEvMEIsTUFJdkIyTSxLQUFLVSxLQUFLck4sS0FBS0EsS0FBSzZyRSxXQUFXM2xELE1BQU1qb0IsUUFDckMrQixLQUFLQSxLQUFLd3RFLGNBQWdCN2dFLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLNnJFLFVBQVUzbEQsS0FBS2pvQixTQUU3RCtCLEtBQUtBLEtBQUt3dEUsY0FBZ0I3Z0UsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUs2ckUsVUFBVTNsRCxLQUFLam9CLFFBRzNEK0IsS0FBS0EsS0FBS2lyRSxhQUFjLENBQzFCLE1BQU1BLGFBQWVyZ0UsVUFBVStCLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLaXJFLGNBRW5ELElBQUssTUFBT25xRSxFQUFHN0IsS0FBTUYsT0FBT2dDLFFBQVFmLEtBQUtBLEtBQUtpckUsY0FBZSxDQUMzRCxNQUFNbG5ELE1BQVFrbkQsYUFBYTloQyxXQUFVNlAsR0FBS0EsRUFBRVMsT0FBUzM0QyxJQUNyRCxJQUFlLElBQVhpakIsTUFBYy9YLEdBQUdDLGNBQWNrVyxNQUFNLG1DQUNwQyxDQUNILE1BQU1tM0MsU0FBVzJSLGFBQWFsbkQsT0FDeEJvc0QsUUFBVUMsTUFBTW54RSxHQUN0QnMwQixZQUFZK2xDLFNBQVU2VyxTQUN0QmxGLGFBQWFsbkQsT0FBU3UxQyxVQUkxQnQ1RCxLQUFLQSxLQUFLaXJFLGFBQWVBLGFBRzNCLEdBQUlqckUsS0FBSzZyRSxVQUFXLENBQ2xCLE1BQU1BLFVBQVlqaEUsVUFBVStCLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLNnJFLFVBQVUzbEQsTUFFMUQsSUFBSyxNQUFPdm1CLElBQUttSyxTQUFVL0ssT0FBT2dDLFFBQVFmLEtBQUs2ckUsV0FBWSxDQUN6RCxNQUFNd0UsY0FBZ0J4RSxVQUFVMWlDLFdBQVU4akMsR0FBS0EsRUFBRXh6QixPQUFTOTVDLE1BQzFELElBQXVCLElBQW5CMHdFLGNBQ0Zya0UsR0FBR0MsY0FBY2tXLE1BQU0saUNBQ2xCLENBQ0wsTUFBTW11RCxpQkFBbUJ6RSxVQUFVd0UsZUFDN0JGLFFBQVVDLE1BQU10bUUsT0FDdEJ5cEIsWUFBWSs4QyxpQkFBa0JILFNBQzlCdEUsVUFBVXdFLGVBQWlCQyx5QkFJeEJ0d0UsS0FBSzZyRSxVQUNaN3JFLEtBQUtBLEtBQUs2ckUsVUFBWSxDQUFFM2xELEtBQU0ybEQsV0FNaEMsT0FBTzBFLGNBQWN2d0UsTUFRdkIvQyxvQkFBcUJpRSxNQUFPMmxCLFVBQzFCLE1BQU16VixPQUFTbFEsTUFBTTRpQixjQUVyQixHQUQrQyxTQUE5QjFTLFFBQVFsUixTQUFTazNDLFNBQ3BCLENBQ1osTUFBTyxDQUFFdnZDLEtBQU00eEMsS0FBTSsyQixRQUFTeHdFLE1BQVFvUixPQUFPaEksS0FBS1IsTUFBTSxLQUNsRG1iLE1BQVFwWCxLQUFLOGpFLHFCQUFxQmgzQixNQUN4QyxHQUNXLGlCQUFUNXhDLE9BQ0MrSyxNQUFNbVIsUUFDSyxnQkFBWnlzRCxTQUVhLFNBQVR4d0UsS0FBaUIsQ0FFbkIsTUFBTWlyRSxhQUFldCtELEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLaXJFLGFBQ3JDcmdFLFVBQVUrQixLQUFLVSxLQUFLck4sS0FBS0EsS0FBS2lyRSxjQUM5QixHQU9KLE9BTklBLGFBQWFsbkQsT0FBT2lxRCxtQkFDZi9DLGFBQWFsbkQsT0FBT2lxRCxXQUFXNWxFLFVBQy9CNmlFLGFBQWFsbkQsT0FBT2lxRCxXQUFXbm1FLE1BQ2pDb2pFLGFBQWFsbkQsT0FBT2lxRCxXQUFhLEdBQ3hDL0MsYUFBYWxuRCxPQUFPaXFELFdBQVc1a0UsS0FBT2dJLE9BQU90SCxpQkFDdkM2QyxLQUFLVSxLQUFLd0ksT0FBTyxDQUFFLG9CQUFxQm8xRCxnQkFLcER4NEQsTUFBTWc5QyxjQUFjdnVELE1BQU8ybEIsVUFHN0IzcUIsaUJBQStCZ0csSUFBS29XLEtBQU10WSxNQUN4QyxNQUFNc3VFLE1BQVFoMkQsS0FBSzRDLEtBQUssVUFDeEIsSUFBS296RCxNQUFNcndFLE9BQVEsT0FDbkIsTUFBTXNMLFFBQVVtUCxFQUFFNDFELE9BQU9wekQsS0FBSyxXQUM5QixJQUFLM1IsUUFBUXRMLE9BQVEsT0FFckIsTUFBTXl5RSxpQkFBbUIxd0UsS0FBS0EsS0FBSzJ3RSxvQkFJbkMsSUFBSUMsMEJBRmdCcm5FLFFBQVEsR0FBR3NuRSxXQUNkdkMsTUFBTSxHQUFHd0MsWUFDK0IsRUFDckRGLDBCQUE0QixJQUFHQSwwQkFBNEIsR0FFL0QsTUFBTUcsYUFBZXpDLE1BQU0sSUFFRCxJQUF0Qm9DLGtCQUNGSyxhQUFhQyxTQUFTLENBQ3BCenZELElBQUssRUFDTEQsS0FBTW92RCxpQkFDTk8sU0FBVSxZQUlkRixhQUFhQyxTQUFTLENBQ3BCenZELElBQUssRUFDTEQsS0FBTXN2RCwwQkFDTkssU0FBVSxXQU1kLzBFLGVBQWdCZ0csSUFBS29XLE1BQ25CcFcsSUFBSW1MLEtBQUt3SSxPQUFPLENBQUUsNEJBQTZCLElBaUNqRDQ2RCxxQkFBc0JoM0IsTUFDcEIsT0FBTzlzQyxLQUFLVSxLQUFLck4sS0FBS0EsS0FBS2lyRSxhQUFhOWhDLFdBQVU2UCxHQUFLQSxFQUFFUyxPQUFTQSxPQUdwRXkzQixrQkFBbUJ6M0IsTUFDakIsT0FBTzlzQyxLQUFLVSxLQUFLck4sS0FBS0EsS0FBSzZyRSxVQUFVM2xELEtBQUtpakIsV0FBVTZQLEdBQUtBLEVBQUVTLE9BQVNBLE9BR3RFdFEsVUFBV2pqQixLQUFNdXpCLE1BQ2YsT0FBT3Z6QixLQUFLaWpCLFdBQVU2UCxHQUFLQSxFQUFFUyxPQUFTQSxPQUd4Q3g4QywwQkFBMkJpcEIsTUFFekIsTUFBTWlyRCxZQUFjdm1FLFVBQVVzYixNQUM5QmlyRCxZQUFZOXlELFNBQVE0dUQsSUFNbEIsVUFKT0EsRUFBRXg1QyxrQkFDRnc1QyxFQUFFSCxhQUNGRyxFQUFFRCxZQUNGQyxFQUFFVSxJQUNMVixFQUFFaEMsY0FBZ0JnQyxFQUFFaEMsYUFBYWh0RSxPQUNuQyxJQUFLLElBQUlza0IsRUFBSSxFQUFHQSxFQUFJMHFELEVBQUVoQyxhQUFhaHRFLE9BQVFza0IsSUFDckMwcUQsRUFBRWhDLGFBQWExb0QsR0FBR3ZpQixNQUFNeTVDLE9BQzFCd3pCLEVBQUVoQyxhQUFhMW9ELEdBQUswcUQsRUFBRWhDLGFBQWExb0QsR0FBR3ZpQixLQUFLeTVDLGVBSzdDOXNDLEtBQUtVLEtBQUt3SSxPQUFPLENBQUUsc0JBQXVCczdELGNBR2xEbDBFLHlCQUEwQmlwQixNQUN4QixNQUFNa3JELGlCQUFtQnprRSxLQUFLVSxLQUFLck4sS0FBS0EsS0FBS2lyRSxhQUN6Q3JnRSxVQUFVK0IsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUtpckUsY0FDOUIsR0FDSi9rRCxLQUFLN0gsU0FBUTI2QixJQUNYLElBQUloNUMsS0FFRkEsS0FEeUIsaUJBQXZCZzVDLEVBQUV2b0MsWUFBWXJILEtBQ1Q0dkMsRUFBRWg1QyxLQUNHZzVDLEVBQ2QsTUFBTWoxQixNQUFRcFgsS0FBS3c4QixVQUFVaW9DLGlCQUFrQnB4RSxLQUFLeTVDLE9BQ3JDLElBQVgxMUIsT0FDRnF0RCxpQkFBaUJ2ekUsS0FBS21DLE1BQ3RCZ00sR0FBR0MsY0FBY0MsS0FBSyw2QkFFdEJrbEUsaUJBQWlCcnRELE9BQVMvakIsY0FHeEIyTSxLQUFLVSxLQUFLd0ksT0FBTyxDQUFFLG9CQUFxQnU3RCxtQkFHaERuMEUsZ0JBQWlCaUUsT0FDZixNQUFNa1EsT0FBU2xRLE1BQU00aUIsY0FLZnZHLE9BQVNuTSxPQUFPdXJCLGFBQWEsVUFDN0IzOEIsS0FBTyswQixhQUFhLENBQ3hCLENBQUN4WCxTQUFVbk0sT0FBT3hRLFVBQVVra0IsU0FBUyxpQkFFdkMsR0FBSTlrQixLQUFLNnJFLFVBQVcsQ0FDbEIsTUFBTUEsVUFBWWpoRSxVQUFVK0IsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUs2ckUsVUFBVTNsRCxNQUMxRCxJQUFLLE1BQU92bUIsSUFBS21LLFNBQVUvSyxPQUFPZ0MsUUFBUWYsS0FBSzZyRSxXQUFZLENBQ3pELE1BQU13RSxjQUFnQnhFLFVBQVUxaUMsV0FBVThqQyxHQUFLQSxFQUFFeHpCLE9BQVM5NUMsTUFDMUQsSUFBdUIsSUFBbkIwd0UsY0FDRnJrRSxHQUFHQyxjQUFja1csTUFBTSxpQ0FDbEIsQ0FDTCxNQUFNbXVELGlCQUFtQnpFLFVBQVV3RSxlQUM3QkYsUUFBVUMsTUFBTXRtRSxPQUN0QnlwQixZQUFZKzhDLGlCQUFrQkgsU0FDOUJ0RSxVQUFVd0UsZUFBaUJDLHdCQUd6QjNqRSxLQUFLeWhFLG9CQUFvQnZDLFlBSW5DNXVFLDZCQUE4QmlFLE9BQzVCLE1BRU11NEMsS0FGU3Y0QyxNQUFNNGlCLGNBQ1VuSyxRQUFRLHNCQUNWelosUUFBUXU1QyxLQUMvQm95QixVQUFZamhFLFVBQVUrQixLQUFLVSxLQUFLck4sS0FBS0EsS0FBSzZyRSxVQUFVM2xELE1BQ3BEbXFELGNBQWdCMWpFLEtBQUt3OEIsVUFBVTBpQyxVQUFXcHlCLE1BQ2hEb3lCLFVBQVV3RSxlQUFlZ0IsVUFBWXhGLFVBQVV3RSxlQUFlZ0IsU0FDekR4RixVQUFVd0UsZUFBZWlCLGtCQUM1QnpGLFVBQVV3RSxlQUFlaUIsZ0JBQWtCLENBQ3pDQyxTQUFTLFVBR1A1a0UsS0FBS3loRSxvQkFBb0J2QyxXQUdqQzV1RSwyQkFBNEJpRSxPQUMxQixNQUFNa1EsT0FBU2xRLE1BQU00aUIsY0FFZjIxQixLQURrQnJvQyxPQUFPdUksUUFBUSxzQkFDVnpaLFFBQVF1NUMsS0FDL0JveUIsVUFBWWpoRSxVQUFVK0IsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUs2ckUsVUFBVTNsRCxNQUNwRG1xRCxjQUFnQjFqRSxLQUFLdzhCLFVBQVUwaUMsVUFBV3B5QixNQUMzQ295QixVQUFVd0UsZUFBZWlCLGtCQUM1QnpGLFVBQVV3RSxlQUFlaUIsZ0JBQWtCLElBRXpDbGdFLE9BQU94USxVQUFVa2tCLFNBQVMsWUFDNUIrbUQsVUFBVXdFLGVBQWVpQixnQkFBZ0JDLFNBQ3RDMUYsVUFBVXdFLGVBQWVpQixnQkFBZ0JDLFFBQzVDMUYsVUFBVXdFLGVBQWVpQixnQkFBZ0JFLFFBQ3RDM0YsVUFBVXdFLGVBQWVpQixnQkFBZ0JDLFNBQ25DbmdFLE9BQU94USxVQUFVa2tCLFNBQVMsWUFDbkMrbUQsVUFBVXdFLGVBQWVpQixnQkFBZ0JFLFFBQ3RDM0YsVUFBVXdFLGVBQWVpQixnQkFBZ0JFLE9BQzVDM0YsVUFBVXdFLGVBQWVpQixnQkFBZ0JDLFNBQ3RDMUYsVUFBVXdFLGVBQWVpQixnQkFBZ0JFLGNBRXhDN2tFLEtBQUt5aEUsb0JBQW9CdkMsV0FHakM1dUUsdUJBQXdCaUUsT0FDdEIsTUFBTWtRLE9BQVNsUSxNQUFNNGlCLGNBQ2Z3cUQsTUFBUWw5RCxPQUFPdUksUUFBUSxnQkFDdkJoTixLQUFLVSxLQUFLd0ksT0FBTyxDQUFFLDJCQUE0Qnk0RCxNQUFNbUQsYUFDM0QsTUFBTS8wRSxPQUFTMFUsT0FBT3hRLFVBQVVra0IsU0FBUyxVQUNuQyttRCxVQUFZamhFLFVBQVUrQixLQUFLVSxLQUFLck4sS0FBS0EsS0FBSzZyRSxVQUFVM2xELE1BQzFEMmxELFVBQVV4dEQsU0FBUTR1RCxHQUFNQSxFQUFFdndFLFFBQVMsSUFDbkMsTUFDTSs4QyxLQURrQnJvQyxPQUFPdUksUUFBUSxtQkFDVnpaLFFBQVF1NUMsS0FDL0I0MkIsY0FBZ0IxakUsS0FBS3c4QixVQUFVMGlDLFVBQVdweUIsT0FDekIsSUFBbkI0MkIsZ0JBQ0czekUsU0FBUW12RSxVQUFVd0UsZUFBZTN6RSxRQUFTLFNBQ3pDaVEsS0FBS3loRSxvQkFBb0J2QyxZQUluQzV1RSxxQkFBc0JpRSxPQUNwQixNQUNNa08sT0FEU2xPLE1BQU00aUIsY0FDQzVqQixTQUFTa1AsT0FDL0IsR0FBS0EsT0FDTCxPQUFRQSxRQUNOLElBQUssT0FDSCxJQUNHd0QsTUFBTWpHLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLNnJFLFVBQVV6dUUsUUFDckN1UCxLQUFLVSxLQUFLck4sS0FBS0EsS0FBSzZyRSxVQUFVenVFLE1BQVEsRUFDdEMsQ0FDQSxNQUFNeXVFLFVBQVl6MUIsTUFBTXM3QixNQUN0QixLQUNBdDdCLE1BQU16cEMsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUs2ckUsVUFBVXp1RSxRQUNwQzRCLEtBQUksV0FDSixNQUFPLENBQUV5NkMsS0FBTUUsUUFBUUMsTUFBTUMsU0FBUyxRQUV4Q2d5QixVQUFVLEdBQUd6aUUsS0FBTyxRQUNoQnlpRSxVQUFVNXRFLE9BQVMsSUFBRzR0RSxVQUFVQSxVQUFVNXRFLE9BQVMsR0FBR21MLEtBQU8sYUFDM0R1RCxLQUFLeWhFLG9CQUFvQnZDLFdBR2pDLE1BQ0YsSUFBSyxRQUNIdHRELE9BQU9tb0IsUUFBUSxDQUNidm1DLE1BQU8sR0FBRzVELEtBQUs0UCxLQUFLQyxTQUFTLDRCQUM3Qi9ELFFBQVMsTUFBTTlMLEtBQUs0UCxLQUFLQyxTQUFTLG9DQUNsQ3U2QixJQUFLMXBDLGdCQUNHMFAsS0FBS3loRSxvQkFBb0IsVUFDekJ6aEUsS0FBS1UsS0FBS2tvQixVQUFVLE9BQVF1MUMsZUFBZW56QyxNQUFNb3pDLFlBRzNELE1BRUYsSUFBSyxZQUNIeHNELE9BQU9tb0IsUUFBUSxDQUNidm1DLE1BQU8sR0FBRzVELEtBQUs0UCxLQUFLQyxTQUFTLDJCQUM3Qi9ELFFBQVMsTUFBTTlMLEtBQUs0UCxLQUFLQyxTQUFTLG1DQUNsQ3U2QixJQUFLLElBQU1oNkIsS0FBS2dsRSxrQkFFbEIsTUFFRixJQUFLLFVBQ0hwekQsT0FBT21vQixRQUFRLENBQ2J2bUMsTUFBTyxHQUFHNUQsS0FBSzRQLEtBQUtDLFNBQVMsOEJBQzdCL0QsUUFBUyxNQUFNOUwsS0FBSzRQLEtBQUtDLFNBQ3ZCLHNDQUVGdTZCLElBQUsxcEMsVUFDSCxNQUFNNHVFLFVBQVlsL0QsS0FBS2svRCxVQUFVN3RFLFFBQU9pdkUsSUFBTUEsRUFBRUYsT0FDaEQsSUFBSyxJQUFJeHFELEVBQUksRUFBR0EsRUFBSXNwRCxVQUFVNXRFLE9BQVFza0IsSUFDaENzcEQsVUFBVXRwRCxHQUFHMG9ELGVBQWNZLFVBQVV0cEQsR0FBRzBvRCxhQUFlLFVBRXZEdCtELEtBQUt5aEUsb0JBQW9CdkMsaUJBQ3pCbC9ELEtBQUtVLEtBQUtrb0IsVUFBVSxPQUFRdTFDLGVBQWVuekMsTUFBTW96QyxhQVVqRTJFLDhCQUErQmtDLFVBQzdCLFFBQUlyMUUsS0FBS29DLEtBQUtxaEIsS0FJaEIydkQsNkJBQThCaUMsVUFDNUIsUUFBSXIxRSxLQUFLb0MsS0FBS3FoQixLQUloQi9pQixtQ0FBb0M0MEUsV0FDbEMsTUFDTXhJLFNBQVcsQ0FBRTV2QixLQURKbzRCLFVBQVUvdEQsY0FDTzVqQixRQUFRdTVDLE1BQ3hDbzRCLFVBQVVyeEQsYUFBYWd4QixRQUFRLGFBQWNseEMsS0FBS0MsVUFBVThvRSxXQUc5RHBzRSxrQ0FBbUM0MEUsV0FDakM3bEUsR0FBR0MsY0FBY3dSLEtBQUssV0FDdEI5USxLQUFLcWpFLGFBQWE2QixXQUVsQixNQUNNQyxhQURTRCxVQUFVL3RELGNBQ0c1akIsUUFBUXU1QyxLQUM5QjlsQixXQUFhaytDLFVBQVVyeEQsYUFBYUMsUUFBUSxjQUM1Q3pnQixLQUFPTSxLQUFLaVosTUFBTW9hLFlBQ3hCM25CLEdBQUdDLGNBQWN3UixLQUNmLHNCQUFzQnpkLEtBQUt5NUMsc0JBQXNCcTRCLHNCQUU3Q25sRSxLQUFLb2xFLGdCQUFnQi94RSxLQUFLeTVDLEtBQU1xNEIsY0FHeENFLFlBQWFILFdBQ1hsbEUsS0FBS29qRSxhQUFhOEIsV0FHcEI5QixhQUFjOEIsV0FDR0EsVUFBVS90RCxjQUNsQmxqQixVQUFVQyxJQUFJLGFBR3ZCbXZFLGFBQWM2QixXQUNaLE1BQU16Z0UsT0FBU3lnRSxVQUFVL3RELG1CQUNPLElBQXJCMVMsT0FBT3hRLFdBQ2hCd1EsT0FBT3hRLFVBQVVxaEIsT0FBTyxhQUk1QmhsQix5QkFBMEJpRSxPQUN4QixNQUNNdTRDLEtBRFN2NEMsTUFBTTRpQixjQUNENWpCLFNBQVN1NUMsS0FDdkI5bEIsV0FBYXp5QixNQUFNc2YsYUFBYUMsUUFBUSxjQUN4Q3pnQixLQUFPTSxLQUFLaVosTUFBTW9hLGtCQUNsQmhuQixLQUFLc2xFLGlCQUFpQmp5RSxLQUFNeTVDLE1BR3BDeDhDLHdCQUF5QmlFLE9BQ3ZCLElBQUlsQixLQUFPLEdBQ1gsR0FBSWtCLE1BQU1zZixhQUFjLENBQ3RCLE1BQU1tVCxXQUFhenlCLE1BQU1zZixhQUFhQyxRQUFRLGNBQzlDemdCLEtBQU9NLEtBQUtpWixNQUFNb2Esa0JBRWRobkIsS0FBS3VsRSxlQUFlbHlFLE1BRzVCL0MseUJBQTBCaUUsT0FDeEIsTUFFTXU0QyxLQUZTdjRDLE1BQU00aUIsY0FDYW5LLFFBQVEsZ0JBQ1Z6WixRQUFRdTVDLEtBQ2xDMTFCLE1BQVFwWCxLQUFLOGpFLHFCQUFxQmgzQixNQUNsQ3d4QixhQUFldCtELEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLaXJFLGFBQ3JDcmdFLFVBQVUrQixLQUFLVSxLQUFLck4sS0FBS0EsS0FBS2lyRSxjQUM5QixHQUVFa0gsWUFBYyxJQUFJOUYsYUFBYXBCLGFBQWFsbkQsUUFDbEQsR0FBSW91RCxZQUFZbkUsV0FBV29FLE9BQVEsQ0FDakMsTUFBTXgxRSxLQUFPLElBQUlpUSxVQUNqQmpRLEtBQUtzZixPQUFTdlAsS0FBS1UsS0FBS29zQyxLQUN4QjA0QixZQUFZbnlFLEtBQUtpbEIsUUFBUyxFQUMxQmt0RCxZQUFZbnlFLEtBQUtxeUUsU0FBV3oxRSxLQUFLNjhDLEtBQ2pDNzhDLEtBQUs4SSxNQUFReXNFLFlBQVl6c0UsTUFBTXNELFVBQzFCOUgsTUFBTTRhLFVBQVlxMkQsWUFBWXpzRSxNQUFNb3FDLFNBQ3ZDbHpDLEtBQUs2akMsU0FBVSxFQUNmN2pDLEtBQUswMUUsWUFBYyxhQUNuQjExRSxLQUFLMjFFLGlCQUFtQiwrQ0FHdEJKLFlBQVluRSxXQUFXd0Usd0JBQ25CNTFFLEtBQUsrb0IsbUJBQW1Cd3NELFlBQVluRSxXQUFXeUUsSUFBSTl5RSxXQUNuRC9DLEtBQUtrZSxZQUNYcTNELFlBQVlueUUsS0FBS2d1RSxXQUFXMEUsZUFBaUI5MUUsS0FBSzBnRCxnQkFDekM2MEIsWUFBWW5FLFdBQVd0eEIsU0FDaEM5L0MsS0FBSzRRLE1BQVEya0UsWUFBWW5FLFdBQVd5RSxVQUM5QjcxRSxLQUFLQSxhQUNMQSxLQUFLa2UsWUFDWHEzRCxZQUFZbnlFLEtBQUtndUUsV0FBVzBFLGVBQWlCOTFFLEtBQUswZ0QsZ0JBQ3pDNjBCLFlBQVluRSxXQUFXcnhCLG9CQUMxQi8vQyxLQUFLd3VDLGNBQWMrbUMsWUFBWW5FLFdBQVd5RSxJQUFJOXlFLFdBQzlDL0MsS0FBS2tlLFlBQ1hxM0QsWUFBWW55RSxLQUFLZ3VFLFdBQVcwRSxlQUFpQjkxRSxLQUFLMGdELHFCQUUvQyxHQUFJNjBCLFlBQVluRSxXQUFXNWdDLE1BQU8sQ0FDdkMsTUFBTXVsQyxTQUFXLENBQ2ZsakUsU0FBVTBpRSxZQUFZbkUsV0FBVzVnQyxNQUNqQzlCLFlBQWE2bUMsWUFBWW5FLFdBQVc1a0UsS0FDcENxbUIsVUFBVzBpRCxZQUFZL29FLEtBQU8rb0UsWUFBWS9vRSxVQUFPeUgsR0FFL0NzaEUsWUFBWVMsV0FBVUQsU0FBU2p0RSxNQUFReXNFLFlBQVl6c0UsTUFBTXNELFVBQzdELE1BQU1wTSxLQUFPaVEsVUFBVXZFLE9BQU9xcUUsVUFDOUIvMUUsS0FBS3NmLE9BQVN2UCxLQUFLVSxLQUFLb3NDLFdBQ2xCNzhDLEtBQUtBLGFBQ0xBLEtBQUtrZSxZQUNYcTNELFlBQVlueUUsS0FBS2d1RSxXQUFXMEUsZUFBaUI5MUUsS0FBSzBnRCxlQUNsRDYwQixZQUFZbnlFLEtBQUtpbEIsUUFBUyxFQUMxQmt0RCxZQUFZbnlFLEtBQUtxeUUsU0FBV3oxRSxLQUFLNjhDLFdBRzdCOXNDLEtBQUtVLEtBQUt3SSxPQUFPLENBQUUsb0JBQXFCbzFELGVBR2hEd0Qsd0JBQXlCdnRFLE9BQ1JBLE1BQU00aUIsY0FDZGxqQixVQUFVQyxJQUFJLGFBR3ZCNnRFLHdCQUF5Qnh0RSxPQUNSQSxNQUFNNGlCLGNBQ2RsakIsVUFBVXFoQixPQUFPLGFBRzFCaGxCLG9CQUFxQmlFLE9BSW5CLE1BRU11NEMsS0FGU3Y0QyxNQUFNNGlCLGNBQ01uSyxRQUFRLGdCQUNWelosUUFBUXU1QyxLQUMzQjExQixNQUFRcFgsS0FBSzhqRSxxQkFBcUJoM0IsTUFDbEN3eEIsYUFBZXQrRCxLQUFLVSxLQUFLck4sS0FBS0EsS0FBS2lyRSxhQUNyQ3JnRSxVQUFVK0IsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUtpckUsY0FDOUIsR0FDSkEsYUFBYWxuRCxPQUFPOHVELFFBQVU1SCxhQUFhbG5ELE9BQU84dUQsYUFDNUNsbUUsS0FBS1UsS0FBS3dJLE9BQU8sQ0FBRSxvQkFBcUJvMUQsZUFHaERodUUsc0JBQXVCaUUsT0FDckIsTUFFTXU0QyxLQUZTdjRDLE1BQU00aUIsY0FDQ25LLFFBQVEsV0FDVnpaLFFBQVF1NUMsS0FDdEIxMUIsTUFBUXBYLEtBQUs4akUscUJBQXFCaDNCLE1BQ2xDd3hCLGFBQWV0K0QsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUtpckUsYUFDckNyZ0UsVUFBVStCLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLaXJFLGNBQzlCLFVBQ2dCQSxhQUFhbG5ELE9BQ2QvYSxlQUNiMkQsS0FBS1UsS0FBS3dJLE9BQU8sQ0FBRSxvQkFBcUJvMUQsZUFHaERodUUsMkJBQTRCaUUsT0FDMUIsTUFFTXU0QyxLQUZTdjRDLE1BQU00aUIsY0FDTW5LLFFBQVEsZ0JBQ1Z6WixRQUFRdTVDLEtBQzNCMTFCLE1BQVFwWCxLQUFLOGpFLHFCQUFxQmgzQixNQUNsQ3d4QixhQUFldCtELEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLaXJFLGFBQ3JDcmdFLFVBQVUrQixLQUFLVSxLQUFLck4sS0FBS0EsS0FBS2lyRSxjQUM5QixHQUNKQSxhQUFhL3lDLE9BQU9uVSxNQUFPLFNBQ3JCcFgsS0FBS1UsS0FBS3dJLE9BQU8sQ0FBRSxvQkFBcUJvMUQsZUFHaERodUUsbUJBQW9CaUUsT0FDbEIsTUFFTXU0QyxLQUZTdjRDLE1BQU00aUIsY0FDTW5LLFFBQVEsZ0JBQ1Z6WixRQUFRdTVDLEtBQzNCMTFCLE1BQVFwWCxLQUFLOGpFLHFCQUFxQmgzQixNQUNsQ3d4QixhQUFldCtELEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLaXJFLGFBQ3JDcmdFLFVBQVUrQixLQUFLVSxLQUFLck4sS0FBS0EsS0FBS2lyRSxjQUM5QixVQUNHQSxhQUFhbG5ELE9BQU9pcUQsV0FBVzBFLHFCQUNoQy9sRSxLQUFLVSxLQUFLd0ksT0FBTyxDQUFFLG9CQUFxQm8xRCxlQUdoRGh1RSx1QkFBd0IrQyxLQUFNeTVDLE1BQzVCLE1BQU16d0MsU0FDSmhKLEtBQUswSSxTQUFXMUksS0FBSzJJLFFBQ2pCLEdBQUczSSxLQUFLMEksV0FBVzFJLEtBQUsySSxVQUNWLFVBQWQzSSxLQUFLNkgsS0FDSDdILEtBQUtvSSxHQUNMcEksS0FBSytQLFNBQVcvUCxLQUFLZ0osU0FDdkJtcEUsWUFBYyxHQUNkenNFLE1BQVEwQixXQUFXNkIsZ0JBQWdCRCxVQU16QyxPQUxJdEQsUUFDc0IsWUFBcEJBLE1BQU0xRixLQUFLNkgsS0FBb0JzcUUsWUFBWVcsV0FBYTlwRSxTQUN2RG1wRSxZQUFZbnBFLFNBQVdBLFVBR3RCaEosS0FBSzZILE1BQU1ZLGVBQ2pCLElBQUssUUFxQkwsUUFDRSxNQXBCRixJQUFLLE9BQ0gwcEUsWUFBWW5FLFdBQWEsQ0FDdkI1bEUsR0FBSXBJLEtBQUtBLE1BQU1taEMsS0FBT25oQyxLQUFLb0ksR0FDM0JQLEtBQU0sUUFFUixNQUNGLElBQUssaUJBQ0hzcUUsWUFBWW5FLFdBQWEsQ0FDdkI1bEUsR0FBSXBJLEtBQUtvSixLQUNUdkIsS0FBTSxrQkFFUixNQUNGLElBQUssWUFDSHNxRSxZQUFZbkUsV0FBYSxDQUN2QjVsRSxHQUFJcEksS0FBS29KLEtBQ1R2QixLQUFNLGFBYVosTUFBTW9qRSxhQUFldCtELEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLaXJFLGFBQ3JDcmdFLFVBQVUrQixLQUFLVSxLQUFLck4sS0FBS0EsS0FBS2lyRSxjQUM5QixHQUVFOEgsZUFBaUI5SCxhQURUdCtELEtBQUs4akUscUJBQXFCaDNCLE9BRXBDczVCLGVBQWVqZ0QsWUFBWWlnRCxlQUFlamdELElBQzlDUyxZQUFZdy9DLGVBQWdCWixtQkFDdEJ4bEUsS0FBS1UsS0FBS3dJLE9BQU8sQ0FBRSxvQkFBcUJvMUQsZUFHaERodUUscUJBQXNCK0MsTUFDcEIsTUFBTWdKLFNBQ0poSixLQUFLMEksU0FBVzFJLEtBQUsySSxRQUNqQixHQUFHM0ksS0FBSzBJLFdBQVcxSSxLQUFLMkksVUFDeEIzSSxLQUFLK1AsU0FBVy9QLEtBQUtnSixVQUFZaEosS0FBS29JLEdBQ3RDK3BFLFlBQWMsR0FDZHpzRSxNQUFRMEIsV0FBVzZCLGdCQUFnQkQsVUFZekMsT0FYSXRELFFBQ3NCLFlBQXBCQSxNQUFNMUYsS0FBSzZILEtBQW9Cc3FFLFlBQVlXLFdBQWE5cEUsU0FDdkRtcEUsWUFBWW5wRSxTQUFXQSxVQVN0QmhKLEtBQUs2SCxNQUFNWSxlQUNqQixJQUFLLFFBMEJMLFFBQ0UsTUF6QkYsSUFBSyxPQUNILEdBQUl6SSxLQUFLb0ksR0FBSSxDQUVYLEdBQXlCLFVBRFo3TCxLQUFLZ1IsTUFBTTlRLElBQUl1RCxLQUFLb0ksS0FDdkJwSSxNQUFNNkgsS0FBa0IsT0FHcENzcUUsWUFBWW5FLFdBQWEsQ0FDdkI1bEUsR0FBSXBJLEtBQUtBLE1BQU1taEMsS0FBT25oQyxLQUFLb0ksR0FDM0JQLEtBQU0sUUFFUixNQUNGLElBQUssaUJBQ0hzcUUsWUFBWW5FLFdBQWEsQ0FDdkI1bEUsR0FBSXBJLEtBQUtvSixLQUNUdkIsS0FBTSxrQkFFUixNQUNGLElBQUssWUFDSHNxRSxZQUFZbkUsV0FBYSxDQUN2QjVsRSxHQUFJcEksS0FBS29KLEtBQ1R2QixLQUFNLGFBY1BzcUUsWUFBWW5FLGFBQ1ZyaEUsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUtnekUsU0FPdkJiLFlBQVluRSxXQUFhLENBQ3ZCbm1FLEtBQU0sT0FDTnVCLEtBQU03TSxLQUFLNFAsS0FBS0MsU0FBUyw0QkFSM0IrbEUsWUFBWW5FLFdBQWEsQ0FDdkI1bEUsR0FBSSxNQUNKUCxLQUFNLGlCQUNOdUIsS0FBTTdNLEtBQUs0UCxLQUFLQyxTQUFTLHlCQVMvQixNQUFNNitELGFBQWV0K0QsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUtpckUsYUFDckNyZ0UsVUFBVStCLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLaXJFLGNBQzlCLEdBRUosSUFBSXVELFFBQVMsRUFDYixNQUFRQSxRQUNOMkQsWUFBWTE0QixLQUFPRSxRQUFRQyxNQUFNQyxTQUFTLElBQzFDMjBCLE9BQ21FLElBQWpFdkQsYUFBYWp0RSxRQUFPZzdDLEdBQUtBLEVBQUVTLE9BQVMwNEIsWUFBWTE0QixPQUFNeDdDLE9BRzFEZ3RFLGFBQWFwdEUsS0FBS3MwRSxtQkFDWnhsRSxLQUFLVSxLQUFLd0ksT0FBTyxDQUFFLG9CQUFxQm8xRCxlQUdoRGh1RSxpQkFBa0I2NUIsWUFDaEIsR0FBSXY2QixLQUFLb0MsS0FBS3FoQixLQUFNLENBQ2xCLE1BQU1wakIsS0FBT2lRLFVBQVVnNkQsZUFBZS92QyxZQUNoQ20wQyxhQUFldCtELEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLaXJFLGFBQ3JDcmdFLFVBQVUrQixLQUFLVSxLQUFLck4sS0FBS0EsS0FBS2lyRSxjQUM5QixHQUNFbG5ELE1BQVFrbkQsYUFBYTloQyxXQUFVNlAsR0FBS0EsRUFBRXE1QixXQUFhejFFLEtBQUs2OEMsT0FDMUQxMUIsT0FBUyxJQUNYa25ELGFBQWFsbkQsT0FBT2lxRCxXQUFXMEUsZUFBaUI5MUUsS0FBSzBnRCxxQkFDL0Mzd0MsS0FBS1UsS0FBS3dJLE9BQU8sQ0FBRSxvQkFBcUJvMUQsb0JBRTNDLENBQ0wsTUFBTWpyRSxLQUFPLENBQ1hBLEtBQU04MkIsV0FDTmp2QixLQUFNLFNBQ05vckUsT0FBUSxhQUNSNWxFLEtBQU1WLEtBQUtVLEtBQUtvc0MsTUFFbEJsOUMsS0FBS21oQixPQUFPQyxLQUFLLGNBQWUzZCxPQUlwQy9DLHNCQUF1QmkyRSxnQkFBaUJwQixjQUN0QyxNQUFNakcsVUFBWWpoRSxVQUFVK0IsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUs2ckUsVUFBVTNsRCxNQUdwRGl0RCxZQUFjdEgsVUFBVTN3RCxNQUFLK3hELEdBQUs2RSxlQUFpQjdFLEVBQUV4ekIsT0FDM0QsSUFBSzA1QixZQUlILFlBSEFsdkMsUUFBUTloQixNQUNOLGtCQUFrQit3RCw2QkFBNkJwQix3QkFNbkQsTUFBTXYxRCxPQUFTc3ZELFVBQVUzd0QsTUFBSyt4RCxHQUM1QkEsRUFBRWhDLGNBQWNudEUsU0FBU28xRSxtQkFRM0IsSUFBSzMyRCxPQUVILFlBREEwbkIsUUFBUTloQixNQUFNLGtCQUFrQit3RCxnQ0FJN0JDLFlBQVlsSSxlQUFja0ksWUFBWWxJLGFBQWUsSUFDMURrSSxZQUFZbEksYUFBYXB0RSxLQUFLcTFFLGlCQUc5QixNQUFNRSxvQkFBc0I3MkQsT0FBTzB1RCxhQUFhanRFLFFBQzlDZzdDLEdBQUtrNkIsa0JBQW9CbDZCLElBRTNCejhCLE9BQU8wdUQsYUFBZW1JLDBCQUVoQnptRSxLQUFLeWhFLG9CQUFvQnZDLFlBSTVCLFNBQVNxQixpQkFBa0J6c0UsRUFBR2l0QixHQUVuQyxPQUFJQSxFQUFFbWxELFNBQVdweUUsRUFBRW95RSxPQUFlLEVBQzlCcHlFLEVBQUVveUUsU0FBV25sRCxFQUFFbWxELFFBQWdCLEVBRTVCcHlFLEVBQUV3QixJQUFNeXJCLEVBQUV6ckIsSUFHWixTQUFTbXVFLE1BQU92bUUsS0FDckIsSUFBSyxNQUFNMHRDLFlBQVkxdEMsSUFBSyxDQUMxQixNQUFNd3BFLEdBQUtDLFFBQVF6cEUsSUFBSTB0QyxXQUNaLFdBQVA4N0IsS0FDRnhwRSxJQUFJMHRDLFVBQVk2NEIsTUFBTXZtRSxJQUFJMHRDLGFBR2pCLFdBQVA4N0IsSUFBb0J0MEUsT0FBT2dDLFFBQVE4SSxJQUFJMHRDLFdBQVd0NUMsVUFFcEMsV0FBUG8xRSxJQUFvQnhwRSxJQUFJMHRDLFVBQVV0NUMsUUFFM0IsV0FBUG8xRSxJQUFvQnpnRSxNQUFNdkksT0FBT1IsSUFBSTB0QyxjQUM5QzF0QyxJQUFJMHRDLFVBQVlsdEMsT0FBT1IsSUFBSTB0QyxZQUozQjF0QyxJQUFJMHRDLFVBQVksS0FPcEIsT0FBTzF0QyxJQUdGLE1BQU13aUUsYUFDWDU3RCxZQUFhelEsS0FBTyxJQUNsQjJNLEtBQUszTSxLQUFPQSxLQUdWMEYsWUFJRixPQUhLaUgsS0FBS3NtQixTQUNSdG1CLEtBQUtzbUIsT0FBUzdyQixXQUFXNkIsZ0JBQWdCMEQsS0FBSzNNLEtBQUtnSixXQUU5QzJELEtBQUtzbUIsT0FHVnNnRCxjQUNGLE9BQU81bUUsS0FBS2ltRSxVQUFZam1FLEtBQUs2bUUsV0FHM0I3ekUsVUFDRixPQUFJZ04sS0FBSzZtRSxXQUFtQjdtRSxLQUFLOG1FLFFBQVF6cUUsU0FDckMyRCxLQUFLaW1FLFNBQWlCam1FLEtBQUtqSCxNQUFNc0QsY0FBckMsRUFJRXl0QixXQUNGLE9BQUs5cEIsS0FBSzRtRSxRQUdONW1FLEtBQUs2bUUsV0FBbUI3bUUsS0FBSzhtRSxRQUFRM29FLElBQ3JDNkIsS0FBS2ltRSxTQUFpQmptRSxLQUFLakgsTUFBTW9GLFNBQXJDLEVBSFMsd0RBT1A0b0UsYUFJRixPQUhLL21FLEtBQUtnbkUsVUFDUmhuRSxLQUFLZ25FLFFBQVV2c0UsV0FBVzZCLGdCQUFnQjBELEtBQUszTSxLQUFLZ0osV0FFL0MyRCxLQUFLZ25FLFFBR1ZGLGNBSUYsT0FISTltRSxLQUFLM00sS0FBSzh5RSxhQUNabm1FLEtBQUtpbkUsU0FBV3hzRSxXQUFXNkIsZ0JBQWdCMEQsS0FBSzNNLEtBQUs4eUUsYUFFaERubUUsS0FBS2luRSxTQUdWaEIsZUFDRixRQUFTam1FLEtBQUtqSCxNQUdaOHRFLGlCQUNGLFFBQVM3bUUsS0FBSzhtRSxRQUdacnFFLFdBQ0YsT0FBSXVELEtBQUs2bUUsV0FBbUI3bUUsS0FBSzhtRSxRQUFRcnFFLEtBQ3JDdUQsS0FBS2ltRSxTQUFpQmptRSxLQUFLakgsTUFBTTBELEtBQzlCdUQsS0FBSzNNLEtBQUtvSixXQUFReUgsRUFHdkJpaUIsVUFjRixPQWJLbm1CLEtBQUszTSxLQUFLOHlCLE1BQ1RubUIsS0FBSzZtRSxXQUFZN21FLEtBQUszTSxLQUFLOHlCLElBQU1ubUIsS0FBSzhtRSxRQUFRM2dELElBQ3pDbm1CLEtBQUtpbUUsV0FBVWptRSxLQUFLM00sS0FBSzh5QixJQUFNbm1CLEtBQUtqSCxNQUFNb3RCLE1BR2pEbm1CLEtBQUszTSxLQUFLOHlCLE1BQ1BsZ0IsTUFBTXZJLE9BQU9zQyxLQUFLM00sS0FBSzh5QixPQUUxQm5tQixLQUFLM00sS0FBSzh0RSxhQUFjLEVBQ3hCbmhFLEtBQUszTSxLQUFLOHlCLFNBQU1qaUIsR0FIaUJsRSxLQUFLM00sS0FBSzh0RSxhQUFjLEdBT3REbmhFLEtBQUszTSxLQUFLOHlCLElBR2YybUIsV0FDRixPQUFPOXNDLEtBQUszTSxLQUFLeTVDLEtBR2Z4M0MsVUFpQkYsT0FoQkswSyxLQUFLM00sS0FBS2lDLE1BQ1QwSyxLQUFLNm1FLFlBQWM3bUUsS0FBS2tuRSxVQUMxQmxuRSxLQUFLM00sS0FBS2lDLElBQU0wSyxLQUFLK21FLE9BQU83eEUsZ0JBQWdCSSxJQUFJNkgsTUFDdkM2QyxLQUFLaW1FLFdBQ2RqbUUsS0FBSzNNLEtBQUtpQyxJQUFNMEssS0FBS2pILE1BQU03RCxnQkFBZ0JJLElBQUk2SCxRQUkvQzZDLEtBQUszTSxLQUFLaUMsTUFDUDJRLE1BQU12SSxPQUFPc0MsS0FBSzNNLEtBQUtpQyxPQUUxQjBLLEtBQUszTSxLQUFLOHpFLGFBQWMsRUFDeEJubkUsS0FBSzNNLEtBQUtpQyxJQUFNLEdBSGlCMEssS0FBSzNNLEtBQUs4ekUsYUFBYyxHQU90RG5uRSxLQUFLM00sS0FBS2lDLElBR2Z3cUUsZUFDRixRQUFTOS9ELEtBQUszTSxLQUFLNnlFLE9BR2pCbkcsY0FDRixPQUFPLy9ELEtBQUttbkUsYUFBZW5uRSxLQUFLbWhFLFlBRzlCZ0csa0JBQ0YsT0FBUWxoRSxNQUFNdkksT0FBT3NDLEtBQUszTSxLQUFLaUMsTUFHN0I2ckUsa0JBQ0YsT0FBUWw3RCxNQUFNdkksT0FBT3NDLEtBQUszTSxLQUFLOHlCLE1BRzdCK2dELGdCQUNGLE9BQU9sbkUsS0FBSzZtRSxZQUFjN21FLEtBQUtpbUUsU0FHN0JtQixvQkFDRixHQUFJcG5FLEtBQUszTSxLQUFLZ3VFLFlBQVkwRSxlQUFnQixDQUN4QyxNQUFNOTFFLEtBQU9pUSxVQUFVZzZELGVBQWVsNkQsS0FBSzNNLEtBQUtndUUsV0FBVzBFLGdCQUMzRCxHQUFJOTFFLE9BQ0dBLEtBQUs2akMsUUFBUyxDQUNqQixHQUFJN2pDLEtBQUtnUSxjQUFnQkMsVUFBVUQsYUFBYUssUUFBUyxPQUFPLEVBQzNELEdBQUlyUSxLQUFLNFcsT0FBUSxPQUFRLEdBSXBDLE9BQU8sRUFHTDYzRCxrQkFDRixRQUF3QixJQUFiMStELEtBQUttbUIsTUFDWmxnQixNQUFNdkksT0FBT3NDLEtBQUttbUIsTUFDdEIsT0FBT3pvQixPQUFPc0MsS0FBS21tQixLQUFPbm1CLEtBQUtvbkUsY0FHN0JDLHVCQUNGLE9BQU9ybkUsS0FBS3NuRSxhQUFldG5FLEtBQUt1bkUsWUFHOUJELGtCQUNGLE9BQUl0bkUsS0FBSzNNLEtBQUsrekUsY0FBZ0IsRUFJNUJHLGtCQUNGLE9BQUl2bkUsS0FBSzNNLEtBQUsrekUsY0FBZ0IsRUFvQmhDdEksVUFDRTkrRCxLQUFLM00sS0FBS20wRSxVQUFXLEVBR3ZCekksaUJBQ0UvK0QsS0FBSzNNLEtBQUttMEUsVUFBVyxFQUNyQnhuRSxLQUFLM00sS0FBS3FhLFNBQVUsRUFHdEJBLFVBQ0UxTixLQUFLM00sS0FBS3FhLFNBQVUsRUFHbEJ1eEQsWUFBUzc2RCxHQUNYcEUsS0FBSzNNLEtBQUs0ckUsUUFBVTc2RCxFQUdsQjY2RCxjQUNGLE9BQU9qL0QsS0FBSzNNLEtBQUs0ckUsUUFHZkQsWUFBUzU2RCxHQUNYcEUsS0FBSzNNLEtBQUsyckUsUUFBVTU2RCxFQUdsQjQ2RCxjQUNGLE9BQU9oL0QsS0FBSzNNLEtBQUsyckUsUUFHZnVDLG1CQUFnQm45RCxHQUNsQnBFLEtBQUszTSxLQUFLa3VFLGVBQWlCbjlELEVBR3pCbTlELHFCQUNGLE9BQU92aEUsS0FBSzNNLEtBQUtrdUUsZUFHZjl5QixlQUNGLE1BQU0zbkIsV0FBYSxHQU9uQixPQU5JOW1CLEtBQUs4L0QsU0FBVWg1QyxXQUFXNTFCLEtBQUssVUFDOUI0MUIsV0FBVzUxQixLQUFLLFFBQ2pCOE8sS0FBSzNNLEtBQUttMEUsVUFBVTFnRCxXQUFXNTFCLEtBQUssV0FBWSxZQUNoRDhPLEtBQUszTSxLQUFLcWEsU0FBU29aLFdBQVc1MUIsS0FBSyxXQUNuQzhPLEtBQUszTSxLQUFLMnJFLFNBQVNsNEMsV0FBVzUxQixLQUFLLFdBQ25DOE8sS0FBSzNNLEtBQUs0ckUsU0FBU240QyxXQUFXNTFCLEtBQUssV0FDaEM0MUIsV0FBV24wQixLQUFLLEtBR3JCMHVFLGlCQUNGLE1BQU0vK0QsTUFBUSxHQXlCZCxHQXhCSXRDLEtBQUszTSxLQUFLZ3VFLFlBQVk1a0UsT0FBTTZGLE1BQU03RixLQUFPdUQsS0FBSzNNLEtBQUtndUUsV0FBVzVrRSxNQUM5RHVELEtBQUszTSxLQUFLZ3VFLFlBQVk1Z0MsUUFBT24rQixNQUFNbStCLE1BQVF6Z0MsS0FBSzNNLEtBQUtndUUsV0FBVzVnQyxPQUNwRW4rQixNQUFNd2tCLFdBQWEsR0FDZjltQixLQUFLM00sS0FBS2d1RSxZQUFZMEUsaUJBQ3hCempFLE1BQU1yUyxLQUFPaVEsVUFBVWc2RCxlQUFlbDZELEtBQUszTSxLQUFLZ3VFLFdBQVcwRSxnQkFDdkR6akUsTUFBTXJTLE9BQ0hxUyxNQUFNclMsS0FBSzZqQyxVQUFXeHhCLE1BQU1yUyxLQUFLazlDLFVBQ3BDN3FDLE1BQU1nVyxRQUFTLEVBQ2ZoVyxNQUFNbWxFLFdBQWFubEUsTUFBTXJTLEtBQUtzYixZQUFZQyxVQUMxQ2xKLE1BQU13a0IsWUFBYyxTQUNmeGtCLE1BQU1yUyxLQUFLNmpDLFVBQ1Z4eEIsTUFBTXJTLEtBQUtnUSxjQUFnQkMsVUFBVUQsYUFBYUssUUFDcERnQyxNQUFNb2xFLFlBQWMsVUFDWHBsRSxNQUFNclMsS0FBSzRXLFNBQVF2RSxNQUFNb2xFLFlBQWMsY0FFaERwbEUsTUFBTXJTLEtBQUtnUSxjQUFnQkMsVUFBVUQsYUFBYUssU0FDbERnQyxNQUFNclMsS0FBSzRXLFVBRVh2RSxNQUFNMHJDLGFBQWMsT0FNMUJodUMsS0FBS2ltRSxTQUFVLENBQ2pCM2pFLE1BQU1yUSxRQUFVLEdBQ2hCLElBQUssTUFBTXVnRCxJQUFLLENBQUMsT0FBUSxDQUN2QixNQUFNbTFCLGVBQWlCM25FLEtBQUtqSCxNQUFNb2dDLGtCQUFrQnFaLEdBQ2hEbTFCLGdCQUFnQnhxRSxPQUFPbUYsTUFBTXJRLFFBQVFmLEtBQUt5MkUsZUFBZWg1RCxPQUcvRCxJQUFLLE1BQU12UixLQUFLNEMsS0FBS2pILE1BQU0ybUMsWUFDekJwOUIsTUFBTXJRLFFBQVFmLEtBQUtrTSxFQUFFWCxNQUd2QixJQUFLLE1BQU1XLEtBQUs0QyxLQUFLakgsTUFBTTBtQyxZQUN6Qm45QixNQUFNclEsUUFBUWYsS0FBS2tNLEVBQUVYLE1BSXZCLEdBRkE2RixNQUFNc2xFLGFBQWV0bEUsTUFBTXJRLFFBQVFYLE9BRS9CME8sS0FBSzNNLEtBQUtndUUsWUFBWTVsRSxHQUFJLENBQzVCLElBQUlpRixLQUFPVixLQUFLakgsTUFBTXdWLEtBQUt2TyxLQUFLM00sS0FBS2d1RSxXQUFXNWxFLElBQ2hELElBQUtpRixLQUFNLENBQ1QsTUFBTW1uRSxTQUFXajRFLEtBQUtnUixNQUFNOVEsSUFBSWtRLEtBQUszTSxLQUFLZ3VFLFdBQVc1bEUsSUFDakRvc0UsV0FBVW5uRSxLQUFPVixLQUFLakgsTUFBTXdWLEtBQUtzNUQsU0FBU3ByRSxPQUc1Q2lFLE9BQ2dCLFNBQWRBLEtBQUt4RixNQUE2QyxVQUExQndGLEtBQUt2RCxNQUFNOUosTUFBTTZILE9BQzNDb0gsTUFBTXdqRSxJQUFNcGxFLEtBQUt2RCxNQUNqQm1GLE1BQU03RixLQUFPaUUsS0FBS3ZELE1BQU1WLEtBQ3hCNkYsTUFBTXBILEtBQU8sUUFDYm9ILE1BQU15dEMsU0FBVSxFQUNoQnp0QyxNQUFNbWpFLFFBQVMsRUFDZm5qRSxNQUFNbStCLE1BQVEvL0IsS0FBS3ZELE1BQU1BLE9BRVQsbUJBQWR1RCxLQUFLeEYsT0FDUG9ILE1BQU13akUsSUFBTXBsRSxLQUFLdkQsTUFDakJtRixNQUFNN0YsS0FBT2lFLEtBQUt2RCxNQUFNd1IsTUFDeEJyTSxNQUFNcEgsS0FBTyxpQkFDYm9ILE1BQU11akUsa0JBQW1CLEVBQ3pCdmpFLE1BQU1takUsUUFBUyxFQUNmbmpFLE1BQU1tK0IsTUFBUS8vQixLQUFLdkQsTUFBTUEsT0FFVCxjQUFkdUQsS0FBS3hGLE9BQ1BvSCxNQUFNd2pFLElBQU1wbEUsS0FBS3ZELE1BQ2pCbUYsTUFBTTdGLEtBQU9pRSxLQUFLdkQsTUFBTXdSLE1BQ3hCck0sTUFBTXBILEtBQU8sWUFDYm9ILE1BQU0wdEMsYUFBYyxFQUNwQjF0QyxNQUFNbWpFLFFBQVMsRUFDZm5qRSxNQUFNbStCLE1BQVEvL0IsS0FBS3ZELE1BQU1BLGFBR3hCLEdBQUk2QyxLQUFLM00sS0FBS2d1RSxZQUFZNWtFLEtBQU0sQ0FDckMsTUFBTWlFLEtBQU9WLEtBQUtqSCxNQUFNd1YsS0FBS3ZPLEtBQUszTSxLQUFLZ3VFLFdBQVc1a0UsTUFDOUNpRSxPQUNnQixTQUFkQSxLQUFLeEYsTUFBNkMsVUFBMUJ3RixLQUFLdkQsTUFBTTlKLE1BQU02SCxPQUMzQ29ILE1BQU13akUsSUFBTXBsRSxLQUFLdkQsTUFDakJtRixNQUFNN0YsS0FBT2lFLEtBQUt2RCxNQUFNVixLQUN4QjZGLE1BQU1wSCxLQUFPLFFBQ2JvSCxNQUFNeXRDLFNBQVUsRUFDaEJ6dEMsTUFBTW1qRSxRQUFTLEVBQ2ZuakUsTUFBTW0rQixNQUFRLy9CLEtBQUt2RCxNQUFNQSxPQUVULG1CQUFkdUQsS0FBS3hGLE9BQ1BvSCxNQUFNd2pFLElBQU1wbEUsS0FBS3ZELE1BQ2pCbUYsTUFBTTdGLEtBQU9pRSxLQUFLdkQsTUFBTXdSLE1BQ3hCck0sTUFBTXBILEtBQU8saUJBQ2JvSCxNQUFNdWpFLGtCQUFtQixFQUN6QnZqRSxNQUFNbWpFLFFBQVMsRUFDZm5qRSxNQUFNbStCLE1BQVEvL0IsS0FBS3ZELE1BQU1BLE9BRVQsY0FBZHVELEtBQUt4RixPQUNQb0gsTUFBTXdqRSxJQUFNcGxFLEtBQUt2RCxNQUNqQm1GLE1BQU03RixLQUFPaUUsS0FBS3ZELE1BQU13UixNQUN4QnJNLE1BQU1wSCxLQUFPLFlBQ2JvSCxNQUFNMHRDLGFBQWMsRUFDcEIxdEMsTUFBTW1qRSxRQUFTLEVBQ2ZuakUsTUFBTW0rQixNQUFRLy9CLEtBQUt2RCxNQUFNQSxjQUkxQixHQUFJNkMsS0FBSzNNLEtBQUtndUUsWUFBWTVsRSxHQUFJLENBQ25DLE1BQU1pRixLQUFPOVEsS0FBS2dSLE1BQU05USxJQUFJa1EsS0FBSzNNLEtBQUtndUUsV0FBVzVsRSxJQUM3Q2lGLE1BQ3NCLFVBQXBCQSxLQUFLck4sTUFBTTZILE9BQ2JvSCxNQUFNd2pFLElBQU1wbEUsS0FDWjRCLE1BQU03RixLQUFPaUUsS0FBS2pFLEtBQ2xCNkYsTUFBTXBILEtBQU8sUUFDYm9ILE1BQU15dEMsU0FBVSxFQUNoQnp0QyxNQUFNbWpFLFFBQVMsRUFDZm5qRSxNQUFNbStCLE1BQVEvL0IsS0FBS3VaLE1BUXpCLE9BSEszWCxNQUFNZ1csUUFBV2hXLE1BQU1tK0IsUUFBT24rQixNQUFNd2tCLFlBQWMsWUFDdkR4a0IsTUFBTXk5RCxRQUFVejlELE1BQU1nVyxTQUFXclMsTUFBTTNELE1BQU1tK0IsT0FFdENuK0IsT0M1b0RKLE1BQU13bEUsd0JBQXdCM0wsVUFDbkNyNEQsZUFBZ0J3SSxNQUNkeEcsU0FBU3dHLE1BQ1R0TSxLQUFLK25FLFVBQVksUUFPUmxoRCw0QkFDVCxPQUFPRCxZQUFZOWdCLE1BQU0rZ0IsZUFBZ0IsQ0FDdkNuUCxRQUFTLENBQUMsT0FBUSxVQUFXLFFBQzdCb3ZCLE1BQU8sSUFDUEMsT0FBUSxJQUNSb2EsUUFBUyxDQUFDLG9CQUNWNEUsS0FBTSxDQUNKLENBQ0VDLFlBQWEsb0JBQ2JDLGdCQUFpQixjQUNqQkMsUUFBUyxrQkFTYnI2QyxlQUNGLE1BQU8saURBV1RpSSxRQUFTN2hCLFFBQVUsSUFFakIsTUFBTW9CLEtBQU95UyxNQUFNZ08sUUFBUTdoQixTQUdyQm01RCxTQUFXLzNELEtBQUtBLEtBTXRCLEdBTEFBLEtBQUtBLEtBQU8rM0QsU0FBUy8zRCxLQUdyQkEsS0FBSzIwRSxTQUErQixPQUFwQmhvRSxLQUFLVSxLQUFLM0gsTUFFRSxVQUF4QmlILEtBQUtVLEtBQUtyTixLQUFLNkgsS0FBa0IsQ0FDbkM3SCxLQUFLeW1ELFlBQWMsR0FDbkIsSUFBSyxNQUFPOW1ELElBQUttSyxTQUFVL0ssT0FBT2dDLFFBQVFqQixLQUFLd0MsaUJBQWtCLENBQy9ELE1BQU1vOEIsU0FBVyxHQUNqQkEsU0FBU3QyQixHQUFLekksSUFDZCsrQixTQUFTdDFCLEtBQU9VLE1BQ2hCNDBCLFNBQVNrMkMsV0FBb0QsSUFBeENqb0UsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUsrckIsV0FBV3BzQixLQUNwREssS0FBS3ltRCxZQUFZNW9ELEtBQUs2Z0MsVUFHeEIxK0IsS0FBSzYwRSxNQUFRLEdBQ2IsSUFBSyxNQUFPbDFFLElBQUttSyxTQUFVL0ssT0FBT2dDLFFBQVFqQixLQUFLd0IsTUFBTyxDQUNwRCxNQUFNd3pFLElBQU0sR0FDWkEsSUFBSTFzRSxHQUFLekksSUFDVG0xRSxJQUFJMXJFLEtBQU9VLE1BQ1hnckUsSUFBSUYsV0FBOEMsSUFBbENqb0UsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUtzQixLQUFLM0IsS0FDekNLLEtBQUs2MEUsTUFBTWgzRSxLQUFLaTNFLEtBR2xCOTBFLEtBQUsrMEUsY0FBZ0Jwb0UsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUsrckIsV0FBV3RwQixRQUNwRHpDLEtBQUtnMUUsZUFDRnJvRSxLQUFLVSxLQUFLck4sS0FBS0EsS0FBSytyQixXQUFXbHBCLFVBQy9COEosS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUsrckIsV0FBV25wQixTQUlwQyxPQURBNUMsS0FBS3dsRSxTQUFXanBFLEtBQUtvQyxLQUFLcWhCLEtBQ25CaGdCLEtBU1QwakIsa0JBQW1CcEwsTUFDakI3RixNQUFNaVIsa0JBQWtCcEwsTUFFbkIzTCxLQUFLL04sUUFBUXlsRCxVQUVsQi9yQyxLQUFLNEMsS0FBSyxrQkFBa0J5SSxNQUFNaFgsS0FBS3NvRSxlQUFlM3dFLEtBQUtxSSxPQUs3RDFQLHFCQUFzQmlFLE9BQ3BCQSxNQUFNMGEsaUJBQ04sTUFBTXU3QixXQUNKajJDLE1BQU00aUIsY0FBY25LLFFBQVEsa0JBQWtCelosUUFBUXcrQixlQUNsRC94QixLQUFLVSxLQUFLbS9DLGVBQ2RyVixXQUNBajJDLE1BQU1DLFNBQ0pELE1BQU1FLFNBQ1ksS0FBbEJGLE1BQU1HLFNBQ1ksTUFBbEJILE1BQU1HLFVDMUdQLE1BQU02ekUsc0JBQXNCVCxnQkFLdEJqaEQsNEJBQ1QsT0FBT0QsWUFBWTlnQixNQUFNK2dCLGVBQWdCLENBQ3ZDaWdCLE1BQU8sSUFDUEMsT0FBUSxPQ0xQLE1BQU15aEMsNEJBQTRCck0sVUFLdkNwbEQsa0JBQW1CcEwsTUFHakIsR0FGQTdGLE1BQU1pUixrQkFBa0JwTCxPQUVuQjNMLEtBQUsvTixRQUFReWxELFNBQVUsT0FFNUIvckMsS0FDRzRDLEtBQUssdUJBQ0x5SSxPQUFNemlCLE9BQVN5TCxLQUFLKzhDLGVBQWV4b0QsTUFBTyxZQUM3Q29YLEtBQ0c0QyxLQUFLLGdCQUNMeUksT0FBTXppQixPQUFTeUwsS0FBS284RCxjQUFjN25FLE1BQU8sWUFFNUNvWCxLQUFLNEMsS0FBSyxzQkFBc0J5SSxNQUFNaFgsS0FBS3lvRSxtQkFBbUI5d0UsS0FBS3FJLE9BQ25FMkwsS0FBSzRDLEtBQUssa0JBQWtCeUksTUFBTWhYLEtBQUswb0UsZ0JBQWdCL3dFLEtBQUtxSSxPQUUzQyxJQUFJeWlFLFNBQVMsQ0FDNUIvN0IsYUFBYyxhQUNkZzhCLFVBQVcsQ0FBRUMsS0FBTTNpRSxLQUFLdy9DLFFBQVE3bkQsS0FBS3FJLFNBRTlCckksS0FBS2dVLEtBQUssSUFHckJyYixjQUFlaUUsTUFBTzJHLEtBQU8sUUFBU21oRSxlQUFpQixVQUNyRDluRSxNQUFNMGEsaUJBQ04xYSxNQUFNOHpDLGtCQUVOLE1BQU1zZ0MsY0FDSnAwRSxPQUFPNGlCLGVBQWVsakIsV0FBV2trQixTQUFTLG1CQUN0Q3l3RCxHQUFLcjBFLE9BQU80aUIsZUFBZW5LLFFBQVEsTUFDbkNvSyxNQUFRd3hELElBQUlyMUUsU0FBU3kwQyxNQUVyQnAwQixlQUFpQjFHLGNBQWNvdkQscUJBQXFCL25FLE1BQU8sUUFFM0RrMkIsV0FBYXpxQixLQUFLVSxLQUFLck4sS0FBS0EsS0FBS2dwRSxnQkFDbkNwK0QsVUFBVStCLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLZ3BFLGlCQUM5QixHQUNFenBFLE9BQVNvTixLQUFLVSxLQUFLck4sS0FBS0EsS0FBS1QsT0FDL0JxTCxVQUFVK0IsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUtULFFBQzlCLEdBRUosSUFBSyxNQUFNOE4sUUFBUWtULFNBQ2pCLEdBQUtsVCxNQUFTQSxLQUFLck4sTUFDZCxDQUFDNkgsTUFBTS9KLFNBQVN1UCxLQUFLck4sS0FBSzZILE1BSS9CLEdBQUl5dEUsY0FBZSxDQUNqQixJQUFLdjRELFNBQVNDLFVBQVUzUCxNQUFPLENBRTdCLEdBQUkrcEIsV0FBV2xjLE1BQUtvTCxJQUFNQSxHQUFHbGQsT0FBU2lFLEtBQUtyTixLQUFLb0osT0FDOUMsU0FFRixHQUFJN0osT0FBT3drQixPQUFPbFMsT0FBT3FKLE1BQUtvTCxJQUFNQSxHQUFHbGQsT0FBU2lFLEtBQUtqRSxPQUNuRCxTQUlKN0osT0FBT3drQixPQUFPbFMsT0FBU3RTLE9BQU93a0IsT0FBT2xTLE9BQU82akIsT0FBTyxDQUFDcm9CLEtBQUtyTixXQUNwRCxDQUNMLElBQUsrYyxTQUFTQyxVQUFVM1AsTUFBTyxDQUU3QixHQUFJK3BCLFdBQVdsYyxNQUFLb0wsSUFBTUEsR0FBR2xkLE9BQVNpRSxLQUFLck4sS0FBS29KLE9BQzlDLFNBR0YsSUFBSyxJQUFJbVosRUFBSSxFQUFHQSxFQUFJaGpCLE9BQU90QixPQUFRc2tCLElBQUssQ0FFdEMsTUFBTXdCLE1BQVF4a0IsT0FBT2dqQixHQUFHMVEsT0FBT3MzQixXQUM3QjdpQixJQUFNQSxHQUFHbGQsT0FBU2lFLEtBQUtyTixLQUFLb0osUUFFZixJQUFYMmEsT0FDRnhrQixPQUFPZ2pCLEdBQUcxUSxPQUFPcW1CLE9BQU9uVSxNQUFPLElBSXJDcVQsV0FBV3Y1QixLQUFLK00sVUFBVXlDLEtBQUtyTixhQUc3QjJNLEtBQUtVLEtBQUt3SSxPQUFPLENBQUUsY0FBZXRXLGVBQ2xDb04sS0FBS1UsS0FBS3dJLE9BQU8sQ0FBRSxDQUFDLFFBQVFtekQsa0JBQW1CNXhDLGFBR3ZEbjZCLHNCQUF1QmlFLE9BQ3JCQSxNQUFNMGEsaUJBQ04sTUFBTW5iLEVBQUlTLE1BQU00aUIsY0FHaEIsR0FBSXJqQixFQUFFRyxVQUFVa2tCLFNBQVMsYUFBYyxPQUMvQm5ZLEtBQUt5WSxVQUFVbGtCLE9BQ3JCLE1BQU0zQixPQUFTb04sS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUtULGFBQzdCb04sS0FBS1UsS0FBS3dJLE9BQU8sQ0FDckIsY0FBZXRXLE9BQU9tMkIsT0FBTyxDQUFDLENBQUU5MkIsUUFBUyxFQUFHaVQsT0FBUSxRQUl4RCxHQUFJcFIsRUFBRUcsVUFBVWtrQixTQUFTLGdCQUFpQixPQUNsQ25ZLEtBQUt5WSxVQUFVbGtCLE9BQ3JCLE1BQU0zQixPQUFTcUwsVUFBVStCLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLVCxRQUN2Q2cyRSxHQUFLOTBFLEVBQUVrWixRQUFRLG9CQUNyQnBhLE9BQU8yNEIsT0FBTzd0QixPQUFPa3JFLEdBQUdyMUUsUUFBUXkwQyxPQUFRLFNBQ2xDaG9DLEtBQUtVLEtBQUt3SSxPQUFPLENBQUUsY0FBZXRXLFVBSTVDbXFELGVBQWdCeG9ELE1BQU84bkUsZUFBaUIsU0FDdEM5bkUsTUFBTTBhLGlCQUNOLE1BQU1pSSxHQUFLbkwsRUFBRXhYLE1BQU00aUIsZUFBZWdtQyxRQUFRLFNBSXBDMXJELFNBSE91TyxLQUFLVSxLQUFLck4sS0FBS0EsS0FBS2dwRSxnQkFBZ0I5dEQsTUFBS25SLEdBQzdDQSxFQUFFbzNCLE1BQVF0ZCxHQUFHN2pCLEtBQUssYUFFTEEsS0FBS3dpQyxZQUczQixHQUFJM2UsR0FBR29wQyxTQUFTLFlBQWEsQ0FDM0IsTUFBTUMsUUFBVXJwQyxHQUFHMDdCLFNBQVMsaUJBQzVCMk4sUUFBUWpELFFBQVEsS0FBSyxJQUFNaUQsUUFBUWpyQyxlQUM5QixDQUNMLE1BQU1rckMsSUFBTXowQyxFQUFFLDZCQUE2QnRhLFNBQVMwTCxlQUM5Q2d2QyxNQUFRcGdDLEVBQUUsdUNBRWhCeTBDLElBQUlodEIsT0FBTzJZLE9BQ1hqMUIsR0FBR3NjLE9BQU9ndEIsSUFBSUUsUUFDZEYsSUFBSUksVUFBVSxLQUVoQjFwQyxHQUFHYyxZQUFZLFlBR2pCMW5CLG9CQUFxQmlFLE1BQU84bkUsZUFBaUIsU0FDM0MsTUFBTUUsVUFBWXh3RCxFQUFFeFgsTUFBTTRpQixlQUFlZ21DLFFBQVEsU0FBUzlwRCxLQUFLLFdBQzNEa3BFLGlCQUFpQnY4RCxLQUFLdzhELFdBQVdELFVBQVdGLGdCQUdsRC9yRSx5QkFBMEJpRSxPQUN4QixNQUNNMmlCLEdBREkzaUIsTUFBTTRpQixjQUNIbkssUUFBUSxTQUNmNDdELEdBQUsxeEQsR0FBR2xLLFFBQVEsb0JBQ2hCcGEsT0FBU3FMLFVBQVUrQixLQUFLVSxLQUFLck4sS0FBS0EsS0FBS1QsUUFDN0NBLE9BQU84SyxPQUFPa3JFLEdBQUdyMUUsUUFBUXkwQyxRQUFROWlDLE9BQU9xbUIsT0FDdEM3dEIsT0FBT3daLEdBQUczakIsUUFBUWdwRSxXQUNsQixTQUVJdjhELEtBQUtVLEtBQUt3SSxPQUFPLENBQUUsY0FBZXRXLFNBRzFDdEMsaUJBQWtCcVEsT0FBUTA3RCxlQUFpQixTQUN6QyxNQUFNRSxVQUFZdjhELEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLZ3BFLGdCQUFnQjcvQixXQUFVcC9CLEdBQ3ZEQSxFQUFFbzNCLE1BQVE3ekIsU0FFbkIsR0FBSTQ3RCxXQUFhLEVBQUcsQ0FDbEIsTUFBTTl4QyxXQUFhenFCLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLZ3BFLGdCQUNuQ3ArRCxVQUFVK0IsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUtncEUsaUJBQzlCLEdBQ0o1eEMsV0FBV2MsT0FBT2d4QyxVQUFXLFNBQ3ZCdjhELEtBQUtVLEtBQUt3SSxPQUFPLENBQUUsQ0FBQyxRQUFRbXpELGtCQUFtQjV4QyxjQUk5QzVELDRCQUNULE9BQU9ELFlBQVk5Z0IsTUFBTStnQixlQUFnQixDQUN2Q25QLFFBQVMsQ0FBQyxPQUFRLFFBQVMsY0FDM0JvdkIsTUFBTyxJQUNQQyxPQUFRLElBQ1JQLFNBQVUsQ0FBQyxDQUFFQyxhQUFjLFVBQzNCMGEsUUFBUyxDQUFDLG9CQUNWNEUsS0FBTSxDQUNKLENBQ0VDLFlBQWEsb0JBQ2JDLGdCQUFpQixjQUNqQkMsUUFBUyxrQkFNYnI2QyxlQUNGLE1BQU8sK0NBR1Q0d0QsYUFBY2xvRSxPQUNaLE1BQU0yaUIsR0FBSzNpQixNQUFNNGlCLGNBQWNuSyxRQUFRLFNBS2pDMHZELFNBQVcsQ0FBRXhoRSxLQUFNLE9BQVE3SCxLQUpuQjJNLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLNlIsT0FBT3FKLE1BQUtuUixHQUNyQ0EsRUFBRW8zQixNQUFRdGQsR0FBRzNqQixRQUFRb04sVUFJOUJwTSxNQUFNc2YsYUFBYWd4QixRQUFRLGFBQWNseEMsS0FBS0MsVUFBVThvRSxXQUcxRDVvRCxVQUNFLE1BQU16Z0IsS0FBT3lTLE1BQU1nTyxVQUdiczNDLFNBQVcvM0QsS0FBS0EsS0FDdEJBLEtBQUtBLEtBQU8rM0QsU0FBUy8zRCxLQUdyQkEsS0FBS3FrRSxRQUFVMTNELEtBQUtVLEtBQUtnM0QsUUFFekIsTUFBTW1SLFVBQVksR0FDWkMsVUFBWSxHQUNsQixJQUFLLE1BQU85MUUsSUFBSysxRSxTQUFVMzJFLE9BQU9nQyxRQUNoQ2YsS0FBS0EsS0FBS3FuQyx1QkFFVixHQUFJcXVDLE1BQU05d0QsV0FBWSxDQUNwQixNQUFNK3dELFVBQVlwNUUsS0FBSzRQLEtBQUtDLFNBQVMsVUFBVXpNLElBQUk0SCxpQkFDL0NtdUUsTUFBTW5uRSxVQUFZbW5FLE1BQU1oeEQsVUFDMUI4d0QsVUFBVTMzRSxLQUFLLEdBQUc4M0UsYUFBYUQsTUFBTTl3RCxjQUVuQzh3RCxNQUFNbm5FLFdBQWFtbkUsTUFBTWh4RCxVQUMzQit3RCxVQUFVNTNFLEtBQUssR0FBRzgzRSxhQUFhRCxNQUFNOXdELGNBSzNDNWtCLEtBQUt5eUQsZUFBNkMsSUFBNUJ6eUQsS0FBS0EsS0FBSzZSLE9BQU81VCxPQUV2QytCLEtBQUtBLEtBQUs2UixPQUFPZ29CLE1BQUssQ0FBQ3A1QixFQUFHaXRCLElBQ2pCanRCLEVBQUUySSxLQUNOazhCLG9CQUNBK0QsY0FBYzNiLEVBQUV0a0IsS0FBS2s4Qix1QkFHMUIsSUFBSyxJQUFJdmhCLE1BQVEsRUFBR0EsTUFBUS9qQixLQUFLQSxLQUFLVCxPQUFPdEIsT0FBUThsQixRQUNuRC9qQixLQUFLQSxLQUFLVCxPQUFPd2tCLE9BQU82eEQsUUFDb0IsSUFBMUM1MUUsS0FBS0EsS0FBS1QsT0FBT3drQixPQUFPbFMsT0FBTzVULE9BRWpDK0IsS0FBS0EsS0FBS1QsT0FBT3drQixPQUFPbFMsT0FBT2dvQixNQUFLLENBQUNwNUIsRUFBR2l0QixJQUMvQmp0QixFQUFFMkksS0FDTms4QixvQkFDQStELGNBQWMzYixFQUFFdGtCLEtBQUtrOEIsdUJBSTVCdGxDLEtBQUs2MUUsdUJBQXlCLEdBQzlCLE1BQU1yTSxTQUFXLElBQUlqdEUsS0FBSzRQLEtBQUtDLFNBQVMsY0FDcENxcEUsVUFBVXgzRSxTQUFRK0IsS0FBSzYxRSx3QkFBMEJKLFVBQVVuMkUsS0FBSyxRQUNoRWsyRSxVQUFVdjNFLFFBQVV3M0UsVUFBVXgzRSxTQUNoQytCLEtBQUs2MUUsd0JBQTBCLE9BQU9MLFVBQVVsMkUsS0FBS2txRSxjQUVuRGdNLFVBQVV2M0UsU0FBV3czRSxVQUFVeDNFLFNBQ2pDK0IsS0FBSzYxRSx3QkFBMEJMLFVBQVVsMkUsS0FBS2txRSxXQUdoRHhwRSxLQUFLeXBFLGVBQWlCLEdBRXRCLElBQUssTUFBTzlwRSxJQUFLbUssU0FBVS9LLE9BQU9nQyxRQUFRZixLQUFLQSxLQUFLNkgsTUFDOUNpQyxPQUNGOUosS0FBS3lwRSxlQUFlNXJFLEtBQ2xCaUMsS0FBS3dGLHFCQUFxQjNGLEtBQU9HLEtBQUt3RixxQkFBcUIzRixLQUFPLE1BTXhFLE9BREFLLEtBQUt3bEUsU0FBV2pwRSxLQUFLb0MsS0FBS3FoQixLQUNuQmhnQixLQUdUeXZELGNBQWV2dUQsTUFBTzJsQixVQUlwQixHQUZLQSxTQUFTN21CLE9BQU02bUIsU0FBV2tPLGFBQWFsTyxXQUV4Q0EsU0FBUzdtQixLQUFLVCxPQUFRLENBQ3hCc25CLFNBQVM3bUIsS0FBS1QsT0FBU1IsT0FBT2tjLE9BQU80TCxTQUFTN21CLE1BQU1ULFFBQVUsSUFDOUQsSUFBSyxJQUFJd2tCLE1BQVEsRUFBR0EsTUFBUXBYLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLVCxPQUFPdEIsT0FBUThsQixRQUM3RDhDLFNBQVM3bUIsS0FBS1QsT0FBT3drQixPQUFPbFMsT0FBU2pILFVBQ25DK0IsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUtULE9BQU93a0IsT0FBT2xTLFFBS3hDWSxNQUFNZzlDLGNBQWN2dUQsTUFBTzJsQixXQ2xSeEIsTUFBTWl2RCx1QkFBdUJoTixVQUtsQ3BsRCxrQkFBbUJwTCxNQUNqQjdGLE1BQU1pUixrQkFBa0JwTCxNQUVuQjNMLEtBQUsvTixRQUFReWxELFdBRWxCL3JDLEtBQ0c0QyxLQUFLLHVCQUNMeUksT0FBTXppQixPQUFTeUwsS0FBSys4QyxlQUFleG9ELE1BQU8sV0FDN0NvWCxLQUFLNEMsS0FBSyxnQkFBZ0J5SSxPQUFNemlCLE9BQVN5TCxLQUFLbzhELGNBQWM3bkUsTUFBTyxXQUNuRW9YLEtBQUs0QyxLQUFLLFlBQVl5SSxPQUFNMW1CLGVBQWtCMFAsS0FBS29wRSxjQUNuRHo5RCxLQUFLNEMsS0FBSyxtQkFBbUJ5SSxNQUFNaFgsS0FBS3FwRSxpQkFBaUIxeEUsS0FBS3FJLE9BQzlEMkwsS0FBSzRDLEtBQUssa0JBQWtCeUksTUFBTWhYLEtBQUtzb0UsZUFBZTN3RSxLQUFLcUksUUFZN0QxUCxxQkFBc0JpRSxPQUNwQkEsTUFBTTBhLGlCQUNOLE1BQU11N0IsV0FDSmoyQyxNQUFNNGlCLGNBQWNuSyxRQUFRLGtCQUFrQnpaLFFBQVF3K0IsZUFDbEQveEIsS0FBS1UsS0FBS20vQyxlQUNkclYsV0FDQWoyQyxNQUFNQyxTQUNKRCxNQUFNRSxTQUNZLEtBQWxCRixNQUFNRyxTQUNZLE1BQWxCSCxNQUFNRyxTQUlacEUsY0FBZWlFLE1BQU84bkUsZUFBaUIsU0FDckM5bkUsTUFBTTBhLGlCQUNOMWEsTUFBTTh6QyxrQkFFTixNQUFNejBCLGVBQWlCMUcsY0FBY292RCxxQkFBcUIvbkUsTUFBTyxRQUUzRGsyQixXQUFhenFCLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLZ3BFLGdCQUNuQ3ArRCxVQUFVK0IsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUtncEUsaUJBQzlCLEdBQ0osSUFBSyxNQUFNMzdELFFBQVFrVCxTQUNabFQsTUFBU0EsS0FBS3JOLE1BRWhCLENBQUMsT0FBUSxTQUFVLFFBQVMsT0FBUSxTQUFTbEMsU0FBU3VQLEtBQUtyTixLQUFLNkgsU0FLOURrVixTQUFTQyxVQUFVM1AsT0FDbEIrcEIsV0FBV2xjLE1BQUtvTCxJQUFNQSxHQUFHbGQsT0FBU2lFLEtBQUtyTixLQUFLb0osUUFLbERndUIsV0FBV3Y1QixLQUFLK00sVUFBVXlDLEtBQUtyTixjQUUzQjJNLEtBQUtVLEtBQUt3SSxPQUFPLENBQUUsQ0FBQyxRQUFRbXpELGtCQUFtQjV4QyxhQUd2RG42Qix1QkFBd0JpRSxPQUN0QixNQUNNaXNELElBRElqc0QsTUFBTTRpQixjQUNGbkssUUFBUSxTQUNoQmlyQixJQUFNaDZCLFVBQVUrQixLQUFLVSxLQUFLck4sS0FBS0EsS0FBS3VtQyxhQUMxQzNCLElBQUkxTSxPQUFPN3RCLE9BQU84aUQsSUFBSWp0RCxRQUFRNmpCLE9BQVEsU0FDaENwWCxLQUFLVSxLQUFLd0ksT0FBTyxDQUFFLG1CQUFvQit1QixNQUcvQzNuQyxrQkFDRSxNQUFNMm5DLElBQU1qNEIsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUt1bUMsWUFDNUIzN0IsVUFBVStCLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLdW1DLGFBQzlCLEdBQ0ozQixJQUFJL21DLEtBQUssWUFDSDhPLEtBQUtVLEtBQUt3SSxPQUFPLENBQUUsbUJBQW9CK3VCLE1BRy9DOGtCLGVBQWdCeG9ELE1BQU84bkUsZUFBaUIsU0FDdEM5bkUsTUFBTTBhLGlCQUNOLE1BQU1pSSxHQUFLbkwsRUFBRXhYLE1BQU00aUIsZUFBZWdtQyxRQUFRLFNBSXBDMXJELFNBSE91TyxLQUFLVSxLQUFLck4sS0FBS0EsS0FBS2dwRSxnQkFBZ0I5dEQsTUFBS25SLEdBQzdDQSxFQUFFbzNCLE1BQVF0ZCxHQUFHN2pCLEtBQUssYUFFTEEsS0FBS3dpQyxZQUczQixHQUFJM2UsR0FBR29wQyxTQUFTLFlBQWEsQ0FDM0IsTUFBTUMsUUFBVXJwQyxHQUFHMDdCLFNBQVMsaUJBQzVCMk4sUUFBUWpELFFBQVEsS0FBSyxJQUFNaUQsUUFBUWpyQyxlQUM5QixDQUNMLE1BQU1rckMsSUFBTXowQyxFQUFFLDZCQUE2QnRhLFNBQVMwTCxlQUM5Q2d2QyxNQUFRcGdDLEVBQUUsdUNBRWhCeTBDLElBQUlodEIsT0FBTzJZLE9BQ1hqMUIsR0FBR3NjLE9BQU9ndEIsSUFBSUUsUUFDZEYsSUFBSUksVUFBVSxLQUVoQjFwQyxHQUFHYyxZQUFZLFlBR2pCMW5CLG9CQUFxQmlFLE1BQU84bkUsZUFBaUIsU0FDM0MsTUFBTUUsVUFBWXh3RCxFQUFFeFgsTUFBTTRpQixlQUFlZ21DLFFBQVEsU0FBUzlwRCxLQUFLLFdBQzNEa3BFLGlCQUFpQnY4RCxLQUFLdzhELFdBQVdELFVBQVdGLGdCQUdsRGlOLFFBQVMzb0UsT0FBUTA3RCxlQUFpQixTQUNoQyxPQUFPcjhELEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLZ3BFLGdCQUFnQjl0RCxNQUFLblIsR0FDdkNBLEVBQUVvM0IsTUFBUTd6QixTQUlyQnJRLGlCQUFrQnFRLE9BQVEwN0QsZUFBaUIsU0FDekMsTUFBTUUsVUFBWXY4RCxLQUFLVSxLQUFLck4sS0FBS0EsS0FBS2dwRSxnQkFBZ0I3L0IsV0FBVXAvQixHQUN2REEsRUFBRW8zQixNQUFRN3pCLFNBRW5CLEdBQUk0N0QsV0FBYSxFQUFHLENBQ2xCLE1BQU05eEMsV0FBYXpxQixLQUFLVSxLQUFLck4sS0FBS0EsS0FBS2dwRSxnQkFDbkNwK0QsVUFBVStCLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLZ3BFLGlCQUM5QixHQUNKNXhDLFdBQVdjLE9BQU9neEMsVUFBVyxTQUN2QnY4RCxLQUFLVSxLQUFLd0ksT0FBTyxDQUFFLENBQUMsUUFBUW16RCxrQkFBbUI1eEMsY0FJOUM1RCw0QkFDVCxPQUFPRCxZQUFZOWdCLE1BQU0rZ0IsZUFBZ0IsQ0FDdkNuUCxRQUFTLENBQUMsT0FBUSxRQUFTLFNBQzNCb3ZCLE1BQU8sSUFDUEMsT0FBUSxJQUNSUCxTQUFVLENBQUMsQ0FBRUMsYUFBYyxVQUMzQjBhLFFBQVMsQ0FBQyxvQkFDVjRFLEtBQU0sQ0FDSixDQUNFQyxZQUFhLG9CQUNiQyxnQkFBaUIsY0FDakJDLFFBQVMsa0JBTWJyNkMsZUFDRixNQUFPLDBDQUdUNHdELGFBQWNsb0UsT0FDWixNQUFNMmlCLEdBQUszaUIsTUFBTTRpQixjQUFjbkssUUFBUSxTQUtqQzB2RCxTQUFXLENBQUV4aEUsS0FBTSxPQUFRN0gsS0FKbkIyTSxLQUFLVSxLQUFLck4sS0FBS0EsS0FBS3VOLE1BQU0yTixNQUFLblIsR0FDcENBLEVBQUVvM0IsTUFBUXRkLEdBQUczakIsUUFBUW9OLFVBSTlCcE0sTUFBTXNmLGFBQWFneEIsUUFBUSxhQUFjbHhDLEtBQUtDLFVBQVU4b0UsV0FHMUQ1b0QsVUFDRSxNQUFNemdCLEtBQU95UyxNQUFNZ08sVUFFbkJ6Z0IsS0FBS3FrRSxRQUFVMTNELEtBQUtVLEtBQUtnM0QsUUFHekIsTUFBTXRNLFNBQVcvM0QsS0FBS0EsS0FDdEJBLEtBQUtBLEtBQU8rM0QsU0FBUy8zRCxLQU1yQkEsS0FBSzZSLE9BQVM3UixLQUFLQSxLQUFLdU4sTUFBTXZQLFFBQU9pb0MsSUFBa0IsVUFBWkEsR0FBR3ArQixPQUM5QzdILEtBQUtrMkUsV0FBYWwyRSxLQUFLQSxLQUFLdU4sTUFBTXZQLFFBQU9pb0MsSUFBa0IsVUFBWkEsR0FBR3ArQixPQUVsRDdILEtBQUt5eUQsZUFBd0MsSUFBdkJ6eUQsS0FBSzZSLE9BQU81VCxPQUNsQytCLEtBQUttMkUsZUFBNEMsSUFBM0JuMkUsS0FBS2syRSxXQUFXajRFLE9BRXRDK0IsS0FBSzZSLE9BQU9nb0IsTUFBSyxDQUFDcDVCLEVBQUdpdEIsSUFDWmp0QixFQUFFMkksS0FDTms4QixvQkFDQStELGNBQWMzYixFQUFFdGtCLEtBQUtrOEIsdUJBRzFCdGxDLEtBQUtzQixLQUFPLEdBQ1p0QixLQUFLeXBFLGVBQWlCLEdBRXRCenBFLEtBQUs2MEUsTUFBUSxHQUNiLElBQUssTUFBT2wxRSxJQUFLbUssU0FBVS9LLE9BQU9nQyxRQUFRakIsS0FBS3dCLE1BQU8sQ0FDcEQsTUFBTXd6RSxJQUFNLEdBQ1pBLElBQUkxc0UsR0FBS3pJLElBQ1RtMUUsSUFBSTFyRSxLQUFPVSxNQUNYZ3JFLElBQUlGLFdBQThDLElBQWxDam9FLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLc0IsS0FBSzNCLEtBQ3pDSyxLQUFLNjBFLE1BQU1oM0UsS0FBS2kzRSxLQU1sQixPQUhBOTBFLEtBQUtpeUQsa0JBQW9CMTFELEtBQUtJLFNBQVNGLElBQUksT0FBUSxxQkFFbkR1RCxLQUFLd2xFLFNBQVdqcEUsS0FBS29DLEtBQUtxaEIsS0FDbkJoZ0IsS0FHVHl2RCxjQUFldnVELE1BQU8ybEIsVUFFZkEsU0FBUzdtQixPQUFNNm1CLFNBQVdrTyxhQUFhbE8sV0FFeENBLFNBQVM3bUIsS0FBS3VtQyxjQUNoQjFmLFNBQVM3bUIsS0FBS3VtQyxZQUFjeG5DLE9BQU9rYyxPQUNqQzRMLFNBQVM3bUIsTUFBTXVtQyxhQUFlLEtBT0Esd0NBQTlCcmxDLE1BQU00aUIsZUFBZTFhLE9BQ3ZCeWQsU0FBUzdtQixLQUFLNkIsZ0JBQWdCeU8sTUFBTStWLFNBQVdubEIsTUFBTTRpQixjQUFjeEYsU0FHbkMsdUNBQTlCcGQsTUFBTTRpQixlQUFlMWEsT0FDdkJ5ZCxTQUFTN21CLEtBQUs2QixnQkFBZ0Jza0IsT0FBT0UsU0FDbENubEIsTUFBTTRpQixjQUFjeEYsU0FHekI3TCxNQUFNZzlDLGNBQWN2dUQsTUFBTzJsQixXQ3hPeEIsTUFBTXV2RCx1QkFBdUJ0TixVQUNsQ3I0RCxlQUFnQndJLE1BQ2R4RyxTQUFTd0csTUFDVHRNLEtBQUsrbkUsVUFBWSxRQU9SbGhELDRCQUNULE9BQU9ELFlBQVk5Z0IsTUFBTStnQixlQUFnQixDQUN2Q25QLFFBQVMsQ0FBQyxPQUFRLFFBQVMsUUFDM0JvdkIsTUFBTyxJQUNQQyxPQUFRLElBQ1JvYSxRQUFTLENBQUMsb0JBQ1Y0RSxLQUFNLENBQ0osQ0FDRUMsWUFBYSxvQkFDYkMsZ0JBQWlCLGNBQ2pCQyxRQUFTLGtCQVNicjZDLGVBQ0YsTUFBTyxnQ0FBZ0M3TCxLQUFLVSxLQUFLck4sS0FBSzZILGtCQVd4RDRZLFVBRUUsTUFBTXpnQixLQUFPeVMsTUFBTWdPLFVBR2JzM0MsU0FBVy8zRCxLQUFLQSxLQU10QixHQUxBQSxLQUFLQSxLQUFPKzNELFNBQVMvM0QsS0FHckJBLEtBQUsyMEUsU0FBK0IsT0FBcEJob0UsS0FBS1UsS0FBSzNILE1BRUUsVUFBeEJpSCxLQUFLVSxLQUFLck4sS0FBSzZILEtBQWtCLENBQ25DN0gsS0FBS3ltRCxZQUFjLEdBQ25CLElBQUssTUFBTzltRCxJQUFLbUssU0FBVS9LLE9BQU9nQyxRQUFRakIsS0FBS3dDLGlCQUFrQixDQUMvRCxNQUFNbzhCLFNBQVcsR0FDakJBLFNBQVN0MkIsR0FBS3pJLElBQ2QrK0IsU0FBU3QxQixLQUFPVSxNQUNoQjQwQixTQUFTazJDLFdBQW9ELElBQXhDam9FLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLK3JCLFdBQVdwc0IsS0FDcERLLEtBQUt5bUQsWUFBWTVvRCxLQUFLNmdDLFVBR3hCMStCLEtBQUs2MEUsTUFBUSxHQUNiLElBQUssTUFBT2wxRSxJQUFLbUssU0FBVS9LLE9BQU9nQyxRQUFRakIsS0FBS3dCLE1BQU8sQ0FDcEQsTUFBTXd6RSxJQUFNLEdBQ1pBLElBQUkxc0UsR0FBS3pJLElBQ1RtMUUsSUFBSTFyRSxLQUFPVSxNQUNYZ3JFLElBQUlGLFdBQThDLElBQWxDam9FLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLc0IsS0FBSzNCLEtBQ3pDSyxLQUFLNjBFLE1BQU1oM0UsS0FBS2kzRSxLQUdsQjkwRSxLQUFLKzBFLGNBQWdCcG9FLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLK3JCLFdBQVd0cEIsUUFDcER6QyxLQUFLZzFFLGVBQ0Zyb0UsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUsrckIsV0FBV2xwQixVQUMvQjhKLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLK3JCLFdBQVducEIsU0FJcEMsT0FEQTVDLEtBQUt3bEUsU0FBV2pwRSxLQUFLb0MsS0FBS3FoQixLQUNuQmhnQixLQVNUMGpCLGtCQUFtQnBMLE1BQ2pCN0YsTUFBTWlSLGtCQUFrQnBMLE1BRW5CM0wsS0FBSy9OLFFBQVF5bEQsVUFFbEIvckMsS0FBSzRDLEtBQUssa0JBQWtCeUksTUFBTWhYLEtBQUtzb0UsZUFBZTN3RSxLQUFLcUksT0FLN0QxUCxxQkFBc0JpRSxPQUNwQkEsTUFBTTBhLGlCQUNOLE1BQU11N0IsV0FDSmoyQyxNQUFNNGlCLGNBQWNuSyxRQUFRLGtCQUFrQnpaLFFBQVF3K0IsZUFDbEQveEIsS0FBS1UsS0FBS20vQyxlQUNkclYsV0FDQWoyQyxNQUFNQyxTQUNKRCxNQUFNRSxTQUNZLEtBQWxCRixNQUFNRyxTQUNZLE1BQWxCSCxNQUFNRyxTQStEWnBFLG9CQUFxQmlFLE1BQU8ybEIsVUFDMUIsTUFBTXNYLFVBQ0p0WCxTQUFTLG1CQUFxQmxhLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLbStCLFVBQ3BELEdBQUl4eEIsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUsrckIsWUFBWXRwQixRQUFTLENBQzNDLE1BQU1za0IsZUFDSkYsU0FBUyx3QkFBMEJsYSxLQUFLVSxLQUFLck4sS0FBS0EsS0FBSyttQixlQUN6REYsU0FBU3pkLEtBQU8yZCxlQUFpQixLQUFPb1gsVUFBWSxTQUVwRHRYLFNBQVN6ZCxLQUFPKzBCLFVBRWxCLE9BQU8xckIsTUFBTWc5QyxjQUFjdnVELE1BQU8ybEIsV0N4TC9CLE1BQU13dkQsdUJBQXVCdk4sVUFDdkJ0MUMsNEJBQ1QsT0FBT0QsWUFBWTlnQixNQUFNK2dCLGVBQWdCLENBQ3ZDaGIsU0FBVSwrQ0FDVjZMLFFBQVMsQ0FBQyxPQUFRLE9BQVEsU0FDMUJvdkIsTUFBTyxJQUNQQyxPQUFRLE9BQ1I4YixXQUFXLEVBQ1gxQixRQUFTLENBQUMsU0FDVjRFLEtBQU0sQ0FDSixDQUNFQyxZQUFhLGNBQ2JDLGdCQUFpQixRQUNqQkMsUUFBUyxrQkFNakI1MUQsZ0JBQ0UsTUFBTStDLEtBQU95UyxNQUFNZ08sVUFDYnMzQyxTQUFXLzNELEtBQUtBLEtBSXRCLE9BSEFBLEtBQUtBLEtBQU8rM0QsU0FBUy8zRCxLQUNyQkEsS0FBS3dsRSxTQUFXanBFLEtBQUtvQyxLQUFLcWhCLEtBQzFCaGdCLEtBQUtvZ0IsUUFBVXpULEtBQUtVLEtBQUsrUyxRQUNsQnBnQixLQUdUMGpCLGtCQUFtQnBMLE1BQ2pCN0YsTUFBTWlSLGtCQUFrQnBMLE1BQ3hCQSxLQUFLNEMsS0FBSyxXQUFXeUksT0FBTXppQixPQUFTeUwsS0FBSzI5RCxXQUFXcHBFLFNBQ3BEb1gsS0FBSzRDLEtBQUssZUFBZXlJLE9BQU16aUIsUUFDN0JBLE1BQU0wYSxpQkFDTmpQLEtBQUtVLEtBQUtpcEUsVUFVZGhNLFdBQVlwcEUsT0FDVkEsTUFBTTBhLGlCQUVOMWEsTUFBTTh6QyxrQkFFTixPQURxQnQ4QixFQUFFeFgsTUFBTTRpQixlQUNUMm1ELE9BQU90YyxRQUFRLFVDMUNoQyxNQUFNb29CLHdCQUF3QnpOLFVBSXhCdDFDLDRCQUNULE9BQU9ELFlBQVk5Z0IsTUFBTStnQixlQUFnQixDQUN2Q25QLFFBQVMsQ0FBQyxPQUFRLFFBQVMsVUFDM0JvdkIsTUFBTyxJQUNQQyxPQUFRLElBQ1JvYSxRQUFTLENBQUMsb0JBQ1Y0RSxLQUFNLENBQ0osQ0FDRUMsWUFBYSxvQkFDYkMsZ0JBQWlCLGNBQ2pCQyxRQUFTLGtCQVNicjZDLGVBQ0YsTUFBTywyQ0FNVGlJLFVBRUUsTUFBTXpnQixLQUFPeVMsTUFBTWdPLFVBR2JzM0MsU0FBVy8zRCxLQUFLQSxLQUN0QkEsS0FBS0EsS0FBTyszRCxTQUFTLzNELEtBR3JCQSxLQUFLeXBFLGVBQWlCLEdBRXRCLElBQUssTUFBTzlwRSxJQUFLbUssU0FBVS9LLE9BQU9nQyxRQUFRZixLQUFLQSxLQUFLNkgsTUFDOUNpQyxPQUNGOUosS0FBS3lwRSxlQUFlNXJFLEtBQ2xCaUMsS0FBS3FGLFdBQVd4RixLQUFPRyxLQUFLcUYsV0FBV3hGLEtBQU8sTUFNcEQsT0FEQUssS0FBS3dsRSxTQUFXanBFLEtBQUtvQyxLQUFLcWhCLEtBQ25CaGdCLE1DbERKLE1BQU13MkUsd0JBQXdCMU4sVUFJeEJ0MUMsNEJBQ1QsT0FBT0QsWUFBWTlnQixNQUFNK2dCLGVBQWdCLENBQ3ZDblAsUUFBUyxDQUFDLE9BQVEsUUFBUyxVQUMzQm92QixNQUFPLElBQ1BDLE9BQVEsSUFDUm9hLFFBQVMsQ0FBQyxvQkFDVjRFLEtBQU0sQ0FDSixDQUNFQyxZQUFhLG9CQUNiQyxnQkFBaUIsY0FDakJDLFFBQVMsa0JBU2JyNkMsZUFDRixNQUFPLDJDQU1UaUksVUFFRSxNQUFNemdCLEtBQU95UyxNQUFNZ08sVUFHYnMzQyxTQUFXLzNELEtBQUtBLEtBQ3RCQSxLQUFLQSxLQUFPKzNELFNBQVMvM0QsS0FHckJBLEtBQUt5cEUsZUFBaUIsR0FFdEIsSUFBSyxNQUFPOXBFLElBQUttSyxTQUFVL0ssT0FBT2dDLFFBQVFmLEtBQUtBLEtBQUs2SCxNQUM5Q2lDLE9BQ0Y5SixLQUFLeXBFLGVBQWU1ckUsS0FDbEJpQyxLQUFLK0UsV0FBV2xGLEtBQU9HLEtBQUsrRSxXQUFXbEYsS0FBTyxNQU1wRCxPQURBSyxLQUFLd2xFLFNBQVdqcEUsS0FBS29DLEtBQUtxaEIsS0FDbkJoZ0IsTUN0REosTUFBTXkyRSx5QkFBeUJ2eUIsZUFDekIxd0IsNEJBQ1QsT0FBT0QsWUFBWTlnQixNQUFNK2dCLGVBQWdCLENBQ3ZDblAsUUFBUyxDQUFDLE9BQVEsVUFBVyxRQUFTLE9BQVEsV0FDOUNvdkIsTUFBTyxJQUNQQyxPQUFRLElBQ1I4YixXQUFXLEVBQ1hoM0MsU0FBVSw2Q0FDVjI2QixTQUFVLENBQUMsQ0FBRUMsYUFBYyxTQUFVQyxhQUFjLGNBQ25EcWYsS0FBTSxDQUNKLENBQ0VDLFlBQWEsYUFDYkMsZ0JBQWlCLGNBQ2pCQyxRQUFTLGtCQU1qQjUxRCxnQkFDRStPLEdBQUdDLGNBQWNDLEtBQ2YzUCxLQUFLNFAsS0FBS0MsU0FBUyxxQ0FFckIsTUFBTXBNLFdBQWF5UyxNQUFNZ08sVUFFekJ6Z0IsS0FBSytyQixXQUFhLEdBQ2RwZixLQUFLakgsTUFBTTFGLEtBQUtBLEtBQUsrckIsV0FBVzJxRCxPQUNsQzEyRSxLQUFLK3JCLFdBQVdsdUIsS0FBS3RCLEtBQUs0UCxLQUFLQyxTQUFTLHNCQUUxQ3BNLEtBQUswRixNQUFRaUgsS0FBS2pILE1BRWxCLE1BQU1peEUsU0FBV2hxRSxLQUFLakgsTUFBTTR4QixRQUFRLE9BQVEsWUFVNUMsT0FUNEJ0M0IsS0FBSzIyRSxjQUE3QjlsRSxJQUFjOGxFLFVBQ0dBLFNBQ2pCMzJFLEtBQUsyMkUsU0FDUDMyRSxLQUFLcEIsUUFBUTgwQyxPQUFTLElBQ2pCMXpDLEtBQUtwQixRQUFRODBDLE9BQVMsT0FLdEIxekMsS0FHVDBqQixrQkFBbUJwTCxNQUNqQjdGLE1BQU1pUixrQkFBa0JwTCxNQUN4QkEsS0FBSzRDLEtBQUssY0FBY3lJLE9BQU0xbUIsZUFBa0IwUCxLQUFLaXFFLGdCQUNyRHQrRCxLQUNHNEMsS0FBSyxpQkFDTHlJLE9BQU0xbUIsTUFBQUEsYUFBcUIwUCxLQUFLa3FFLGVBQWUzMUUsU0FDbERvWCxLQUFLNEMsS0FBSyxrQkFBa0J5SSxNQUFNaFgsS0FBS21xRSxnQkFBZ0J4eUUsS0FBS3FJLE9BUTlEMVAsd0JBQ0UsTUFBTTA1RSxTQUFXaHFFLEtBQUtqSCxNQUFNNHhCLFFBQVEsT0FBUSxZQUN4Q3EvQyxVQUNGaHFFLEtBQUtvcUUsUUFBVXBxRSxLQUFLMFUsU0FBU3F5QixPQUM3Qi9tQyxLQUFLMFUsU0FBU3F5QixPQUFTLFFBRXZCL21DLEtBQUswVSxTQUFTcXlCLE9BQVMvbUMsS0FBS29xRSxTQUFXLFVBRW5DcHFFLEtBQUtqSCxNQUFNcXVCLFFBQVEsT0FBUSxZQUFhNGlELFVBR2hEMTVFLG9CQUNFLE1BQU00dUUsVUFBWWpoRSxVQUNoQitCLEtBQUtqSCxNQUFNMUYsS0FBS0EsS0FBS3NYLFFBQVErYSxNQUFNdzVDLFdBQWEsSUFFbERBLFVBQVVodUUsS0FBSyxDQUFFdUwsS0FBTSxLQUFNVSxNQUFPLGFBQzlCNkMsS0FBS2pILE1BQU1tUSxPQUFPLENBQUUsK0JBQWdDZzJELFlBRzVENXVFLHFCQUFzQmlFLE9BQ3BCLE1BRU02aUIsTUFGUzdpQixNQUFNNGlCLGNBQ0duSyxRQUFRLFVBQ1R6WixRQUFRNmpCLE1BQ3pCOG5ELFVBQVlqaEUsVUFDaEIrQixLQUFLakgsTUFBTTFGLEtBQUtBLEtBQUtzWCxRQUFRK2EsTUFBTXc1QyxXQUFhLE1BRTdDQSxZQUNMQSxVQUFVM3pDLE9BQU9uVSxNQUFPLFNBQ2xCcFgsS0FBS2pILE1BQU1tUSxPQUFPLENBQUUsK0JBQWdDZzJELGFBRzVEdGtCLGVBQ0U5MEMsTUFBTTgwQyxlQVNSMG9CLGVBQWdCanFDLFdBQWEsSUFHM0IsSUFBSWhtQyxLQURPLElBQUk0MEIsaUJBQWlCam9CLEtBQUtnb0IsS0FBTSxDQUFFdTdDLFFBQVN2akUsS0FBS3VqRSxVQUM3Q3I3QyxXQUtkLEdBSmdCNzBCLEtBQVpnbUMsV0FBbUJ6UyxZQUFZdnpCLEtBQU1nbUMsWUFDN0JqUixhQUFhLzBCLE1BR3JCQSxLQUFLQSxLQUFLc1gsUUFBUSthLE9BQU8ya0QsVUFBVyxDQUN0QyxNQUFNM2tELE1BQVFyeUIsS0FBS0EsTUFBTXNYLFFBQVErYSxNQUM3QkEsUUFDRkEsTUFBTXc1QyxVQUFZOXNFLE9BQU9rYyxPQUN2Qm9YLE9BQU93NUMsV0FBYWwvRCxLQUFLakgsTUFBTTFGLEtBQUtBLEtBQUtzWCxRQUFRK2EsTUFBTXc1QyxXQUFhLEtBTTFFLE9BQU8wRSxjQUFjdndFLE9DakhsQixNQUFNaTNFLHdCQUF3Qm5PLFVBSXhCdDFDLDRCQUNULE9BQU9ELFlBQVk5Z0IsTUFBTStnQixlQUFnQixDQUN2Q25QLFFBQVMsQ0FBQyxPQUFRLFFBQVMsUUFDM0JvdkIsTUFBTyxJQUNQQyxPQUFRLElBQ1JnZixLQUFNLENBQ0osQ0FDRUMsWUFBYSxjQUNiQyxnQkFBaUIsY0FDakJDLFFBQVMsYUFTYnI2QyxlQUVGLE1BQU8saURBT1RpSSxVQUNFLE1BQU16Z0IsS0FBT3lTLE1BQU1nTyxVQUNuQnpnQixLQUFLazNFLE9BQVMsQ0FBQyxTQUFVLFNBQVUsV0FFbkMsTUFBTW5mLFNBQVcvM0QsS0FBS0EsS0FDdEJBLEtBQUtBLEtBQU8rM0QsU0FBUy8zRCxLQUdyQkEsS0FBSzIwRSxTQUE4QixNQUFuQmhvRSxLQUFLVSxLQUFLM0gsTUFDdEIxRixLQUFLMjBFLFdBQVUzMEUsS0FBS2dKLFNBQVcyRCxLQUFLVSxLQUFLM0gsTUFBTXNELFVBRW5EaEosS0FBS20zRSxZQUFjLEdBQ2ZuM0UsS0FBSzIwRSxXQUNQMzBFLEtBQUtzdkMsY0FBZ0IzaUMsS0FBS2pILE1BQU00cEMsY0FDaEN0dkMsS0FBS212QyxlQUFpQnhpQyxLQUFLakgsTUFBTXlwQyxlQUNqQ252QyxLQUFLbTNFLFlBQWN4cUUsS0FBS1UsS0FBSzNILE1BQU02SCxNQUFNdlAsUUFBT3FQLFFBQzVCLFVBQWRBLEtBQUt4RixPQUNId0YsS0FBS3JOLEtBQUtBLEtBQUsrckIsV0FBV3BwQixVQU9sQzNDLEtBQUttM0UsWUFBWXQ5QyxNQUFLLENBQUNwNUIsRUFBR2l0QixJQUNqQmp0QixFQUFFMkksS0FDTms4QixvQkFDQStELGNBQWMzYixFQUFFdGtCLEtBQUtrOEIsd0JBSTVCdGxDLEtBQUt5bUQsWUFBYyxHQUNuQixJQUFLLE1BQU85bUQsSUFBS21LLFNBQVUvSyxPQUFPZ0MsUUFBUWpCLEtBQUtnRCxrQkFBbUIsQ0FDaEUsTUFBTTQ3QixTQUFXLEdBQ2pCQSxTQUFTdDJCLEdBQUt6SSxJQUNkKytCLFNBQVN0MUIsS0FBT1UsTUFDaEI0MEIsU0FBU2syQyxXQUFvRCxJQUF4Q2pvRSxLQUFLVSxLQUFLck4sS0FBS0EsS0FBSytyQixXQUFXcHNCLEtBQ3BESyxLQUFLeW1ELFlBQVk1b0QsS0FBSzZnQyxVQUduQi94QixLQUFLVSxLQUFLck4sS0FBS0EsS0FBS28zRSxRQUFPenFFLEtBQUtVLEtBQUtyTixLQUFLQSxLQUFLbzNFLE1BQVEsSUFFNURwM0UsS0FBSzYwRSxNQUFRLEdBQ2IsSUFBSyxNQUFPbDFFLElBQUttSyxTQUFVL0ssT0FBT2dDLFFBQVFqQixLQUFLd0IsTUFBTyxDQUNwRCxNQUFNd3pFLElBQU0sR0FDUG5vRSxLQUFLVSxLQUFLck4sS0FBS0EsS0FBS28zRSxNQUFNejNFLE9BQU1nTixLQUFLVSxLQUFLck4sS0FBS0EsS0FBS28zRSxNQUFNejNFLEtBQU8sR0FDdEVtMUUsSUFBSXNDLE1BQVF6cUUsS0FBS1UsS0FBS3JOLEtBQUtBLEtBQUtvM0UsTUFBTXozRSxLQUN0Q20xRSxJQUFJMXNFLEdBQUt6SSxJQUNUbTFFLElBQUkxckUsS0FBT1UsTUFDWGdyRSxJQUFJRixXQUE4QyxJQUFsQ2pvRSxLQUFLVSxLQUFLck4sS0FBS0EsS0FBS3NCLEtBQUszQixLQUN6Q0ssS0FBSzYwRSxNQUFNaDNFLEtBQUtpM0UsS0FRbEIsT0FOQTkwRSxLQUFLdW1ELG9CQUNxQyxJQUF4QzU1QyxLQUFLVSxLQUFLck4sS0FBS0EsS0FBSytyQixXQUFXeG9CLE9BQ1MsSUFBeENvSixLQUFLVSxLQUFLck4sS0FBS0EsS0FBSytyQixXQUFXem9CLE9BQ1csSUFBMUNxSixLQUFLVSxLQUFLck4sS0FBS0EsS0FBSytyQixXQUFXN29CLE9BRWpDbEQsS0FBS3dsRSxTQUFXanBFLEtBQUtvQyxLQUFLcWhCLEtBQ25CaGdCLEtBU1QwakIsa0JBQW1CcEwsTUFDakI3RixNQUFNaVIsa0JBQWtCcEwsTUFHbkIzTCxLQUFLL04sUUFBUXlsRCxXQUNsQi9yQyxLQUFLNEMsS0FBSyxrQkFBa0J5SSxNQUFNaFgsS0FBS3NvRSxlQUFlM3dFLEtBQUtxSSxPQUMzRDJMLEtBQUs0QyxLQUFLLG9CQUFvQnlJLE1BQU1oWCxLQUFLMHFFLGlCQUFpQi95RSxLQUFLcUksUUFPakUxUCxxQkFBc0JpRSxPQUNwQkEsTUFBTTBhLGlCQUNOLE1BQU11N0IsV0FDSmoyQyxNQUFNNGlCLGNBQWNuSyxRQUFRLGtCQUFrQnpaLFFBQVF3K0IsZUFDbEQveEIsS0FBS1UsS0FBS20vQyxlQUNkclYsV0FDQWoyQyxNQUFNQyxTQUNKRCxNQUFNRSxTQUNZLEtBQWxCRixNQUFNRyxTQUNZLE1BQWxCSCxNQUFNRyxTQUlacEUsdUJBQXdCaUUsT0FDdEJBLE1BQU0wYSxpQkFDTixNQUFNOGlCLFNBQ0p4OUIsTUFBTTRpQixjQUFjbkssUUFBUSxvQkFBb0J6WixRQUFRdytCLFNBQ3BEM1UsU0FBVzdvQixNQUFNNGlCLGNBQWNuSyxRQUFRLFdBQVd6WixRQUFRb04sT0FDMUR0RSxTQUFXOUgsTUFBTTRpQixjQUFjbkssUUFBUSxXQUFXelosUUFBUThJLFNBQ2hFLElBQUlpSSxPQUFTLEtBQ2IsR0FBSWpJLFNBQVUsQ0FFWmlJLE9BRGNvd0IsU0FBU3A0QixnQkFBZ0JELFVBQ3hCdUUsTUFBTTlRLElBQUlzdEIsZUFFekI5WSxPQUFTMVUsS0FBS2dSLE1BQU05USxJQUFJc3RCLGdCQUVwQjlZLE9BQU91N0MsZUFBZTl0QixXQzlJaEN6aEMsZUFBZXE2RSxjQUFlaG1DLEdBQzVCLE1BQU1pbUMsTUFBUWptQyxFQUFFeHRCLGNBQWMxYSxLQUFLOUIsUUFBUSxxQkFBc0IsTUFDM0RwRixJQUFNd1csRUFBRSxRQUFVNitELE9BQ2xCMXZFLEtBQU8zRixJQUFJZ1osS0FBSyx1QkFBeUJxOEQsTUFBUSxLQUFLbDdCLE1BQ3REanpDLEtBQU9sSCxJQUFJZ1osS0FBSyxzQkFBd0JxOEQsTUFBUSxLQUFLbDdCLE1BQ3JEbTdCLFdBQWF0MUUsSUFBSWdaLEtBQUssc0JBQXdCcThELE1BQVEsS0FDNUQsSUFBSXpDLElBQU0sR0FDVixPQUFRanRFLE1BQ04sSUFBSyxRQUNMLElBQUssUUFDTCxJQUFLLFNBQ0gydkUsV0FBVzc5RCxRQUFRLGtCQUFrQjVMLE9BQ3JDK21FLElBQU0wQyxXQUFXbjdCLE1BQ2pCLE1BQ0YsUUFDRW03QixXQUFXNzlELFFBQVEsa0JBQWtCMHpDLE9BRXpDLE1BQU05L0MsWUFBY2hSLEtBQUtvZ0IsTUFBTWxnQixJQUFJeUYsSUFBSWxDLEtBQUssWUFBWXU0RCxnQkFDeEQsUUFBcUIsSUFBVmhyRCxNQUNULE9BRUYsTUFBTVEsS0FBTyxHQUNQMHBFLFdBQWEsSUFBSTNoQyxPQUFPQSxPQUFPejFDLE9BQU8rSSxNQUFPLEtBQ25ELElBQUssTUFBTyxDQUFFaUUsUUFBU3RPLE9BQU9nQyxRQUFRd00sT0FBUSxDQUM1QyxJQUFJdlAsUUFBUyxFQUNUQSxRQUFtQixLQUFUb0wsT0FDWnBMLE9BQVNxUCxLQUFLakUsS0FBSzJRLE1BQU0wOUQsYUFFdkJ6NUUsUUFBbUIsS0FBVDZKLE9BQ1o3SixPQUFTcVAsS0FBS3hGLE9BQVNBLE1BRXJCN0osUUFBa0IsS0FBUjgyRSxNQUtWOTJFLFFBSDZCLElBQTdCcVAsS0FBS3JOLEtBQUtBLEtBQUtzQixLQUFLd3pFLE9BQ1MsSUFBN0J6bkUsS0FBS3JOLEtBQUtBLEtBQUtzQixLQUFLd3pFLEtBRVh6bkUsS0FBS3JOLEtBQUtBLEtBQUtzQixLQUFLd3pFLEtBRXBCem5FLEtBQUtyTixLQUFLQSxLQUFLc0IsS0FBS3d6RSxNQUFNdm1FLFdBQVksR0FHL0N2USxRQUNGK1AsS0FBS2xRLEtBQUt3UCxLQUFLakYsSUFHbkJsRyxJQUFJZ1osS0FBSyx3QkFBd0I4bkMsTUFBSyxXQUNwQ3IyQyxLQUFLeVUsTUFBTTRDLFFBQVVqVyxLQUFLalEsU0FBUzZPLEtBQUt6TSxRQUFRdzNFLFlBQzVDLE9BQ0EsVUMzQ0QsU0FBU0MsU0FDZDk1RCxNQUFNcWtELEtBQUssUUFBUWpsRSxVQ0RuQlEsT0FBTytkLE1BQU13OEMsY0FBZ0IzMkIsU0FDN0I1akMsT0FBTytkLE1BQU11N0IsZ0JBQWtCLEdBQy9CdDVDLE9BQU9vNUMsS0FBS21oQixjQUFnQmo3QyxTQUM1QnRmLE9BQU9vNUMsS0FBS0UsZ0JBQWtCLENBQzVCdXVCLEtBQU1DLFNBQ04zRyxNQUFPd0YsV0NOK0JubkUsaUJBeUJqQzI2RSxjQXZCZSxDQUNwQixzREFDQSxzREFFQSwyREFDQSxpRUFDQSw0REFDQSxpRUFDQSx3RUFDQSwyREFDQSw0REFDQSxvRUFDQSxnRUFDQSxrREFDQSxrREFDQSx3REFDQSx1REFFQSxpREFDQSxvREZqQkFDLEdHTkcsV0E0V0wsR0F4V0F0N0UsS0FBS0ksU0FBU203RSxhQUFhLE9BQVEsWUFBYSxDQUM5QzF1RSxLQUFNLDJCQUNOa1MsTUFBTyw0QkFDUCsvQixLQUFNLDJCQUNONWtCLEtBQU0sY0FDTjV1QixLQUFNc2dFLHFCQUNONFAsWUFBWSxJQUVkNVAscUJBQXFCNlAsbUJBTXJCejdFLEtBQUtJLFNBQVM2ckUsU0FBUyxPQUFRLG1CQUFvQixDQUNqRHAvRCxLQUFNLDRCQUNOaXlDLEtBQU0sZ0NBQ05rc0IsTUFBTyxRQUNQN3ZDLFFBQVEsRUFDUnpRLFNBQVMsRUFDVHBmLEtBQU02SyxVQUdSblcsS0FBS0ksU0FBUzZyRSxTQUFTLE9BQVEsb0JBQXFCLENBQ2xEcC9ELEtBQU0sNkJBQ05peUMsS0FBTSxpQ0FDTmtzQixNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsU0FBUyxFQUNUcGYsS0FBTTZLLFVBT1JuVyxLQUFLSSxTQUFTNnJFLFNBQVMsT0FBUSxnQkFBaUIsQ0FDOUNwL0QsS0FBTSx5QkFDTml5QyxLQUFNLDZCQUNOa3NCLE1BQU8sUUFDUDd2QyxRQUFRLEVBQ1J6USxTQUFTLEVBQ1RwZixLQUFNNkssVUFHUm5XLEtBQUtJLFNBQVM2ckUsU0FBUyxPQUFRLHdCQUF5QixDQUN0RHAvRCxLQUFNLGlDQUNOaXlDLEtBQU0scUNBQ05rc0IsTUFBTyxRQUNQN3ZDLFFBQVEsRUFDUnpRLFNBQVMsRUFDVHBmLEtBQU02SyxVQUdSblcsS0FBS0ksU0FBUzZyRSxTQUFTLE9BQVEsNkJBQThCLENBQzNEcC9ELEtBQU0sc0NBQ05peUMsS0FBTSwwQ0FDTmtzQixNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsU0FBUyxFQUNUcGYsS0FBTTZLLFVBRVJuVyxLQUFLSSxTQUFTNnJFLFNBQVMsT0FBUSx5QkFBMEIsQ0FDdkRwL0QsS0FBTSw2QkFDTml5QyxLQUFNLGlDQUNOa3NCLE1BQU8sUUFDUDd2QyxRQUFRLEVBQ1J6USxRQUFTLFVBQ1RwZixLQUFNNlQsT0FDTmk0QixRQUFTLENBQ1A3bUMsUUFBUyxrQ0FDVDZPLFFBQVMscUNBR2JwZixLQUFLSSxTQUFTNnJFLFNBQVMsT0FBUSx3QkFBeUIsQ0FDdERwL0QsS0FBTSxpQ0FDTml5QyxLQUFNLHFDQUNOa3NCLE1BQU8sUUFDUDd2QyxRQUFRLEVBQ1J6USxRQUFTLFdBQ1RwZixLQUFNNlQsT0FDTmk0QixRQUFTLENBQ1Bza0MsT0FBUSx1QkFDUnp1RCxPQUFRLDRCQUNSMHVELFNBQVUsOEJBUWQzN0UsS0FBS0ksU0FBUzZyRSxTQUFTLE9BQVEscUJBQXNCLENBQ25EcC9ELEtBQU0sOEJBQ05peUMsS0FBTSxrQ0FDTmtzQixNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsU0FBUyxFQUNUcGYsS0FBTTZLLFVBRVJuVyxLQUFLSSxTQUFTNnJFLFNBQVMsT0FBUSwyQkFBNEIsQ0FDekRwL0QsS0FBTSxvQ0FDTm0rRCxNQUFPLFNBQ1A3dkMsUUFBUSxFQUNSelEsU0FBUyxFQUNUcGYsS0FBTTZLLFVBRVJuVyxLQUFLSSxTQUFTNnJFLFNBQVMsT0FBUSxvQkFBcUIsQ0FDbERwL0QsS0FBTSw2QkFDTm0rRCxNQUFPLFNBQ1A3dkMsUUFBUSxFQUNSelEsU0FBUyxFQUNUcGYsS0FBTTZLLFVBR1JuVyxLQUFLSSxTQUFTNnJFLFNBQVMsT0FBUSxXQUFZLENBQ3pDcC9ELEtBQU0sb0JBQ05peUMsS0FBTSx3QkFDTmtzQixNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsU0FBUyxFQUNUcGYsS0FBTTZLLFVBTVJuVyxLQUFLSSxTQUFTNnJFLFNBQVMsT0FBUSxvQkFBcUIsQ0FDbERwL0QsS0FBTSw2QkFDTml5QyxLQUFNLGlDQUNOa3NCLE1BQU8sUUFDUDd2QyxRQUFRLEVBQ1I3dkIsS0FBTTZLLFFBQ051VSxTQUFTLElBRVgxcUIsS0FBS0ksU0FBUzZyRSxTQUFTLE9BQVEsYUFBYyxDQUMzQ3AvRCxLQUFNLDhCQUNOaXlDLEtBQU0sa0NBQ05rc0IsTUFBTyxRQUNQN3ZDLFFBQVEsRUFDUnpRLFNBQVMsRUFDVHBmLEtBQU02SyxVQUVSblcsS0FBS0ksU0FBUzZyRSxTQUFTLE9BQVEsb0JBQXFCLENBQ2xEcC9ELEtBQU0sMEJBQ05peUMsS0FBTSw4QkFDTmtzQixNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsU0FBUyxFQUNUcGYsS0FBTTZLLFVBTVJuVyxLQUFLSSxTQUFTNnJFLFNBQVMsT0FBUSxzQkFBdUIsQ0FDcERwL0QsS0FBTSwrQkFDTml5QyxLQUFNLG1DQUNOa3NCLE1BQU8sUUFDUDd2QyxRQUFRLEVBQ1J6USxTQUFTLEVBQ1RwZixLQUFNNkssVUFFSm5XLEtBQUtJLFNBQVNGLElBQUksT0FBUSx5QkFDNUJGLEtBQUtJLFNBQVM2ckUsU0FBUyxPQUFRLGdCQUFpQixDQUM5Q3AvRCxLQUFNLHlCQUNOaXlDLEtBQU0sNkJBQ05rc0IsTUFBTyxRQUNQN3ZDLFFBQVEsRUFDUnpRLFFBQVMsMENBQ1RwZixLQUFNNlQsU0FFUm5mLEtBQUtJLFNBQVM2ckUsU0FBUyxPQUFRLGVBQWdCLENBQzdDcC9ELEtBQU0sd0JBQ05peUMsS0FBTSw0QkFDTmtzQixNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsUUFBUyxxQ0FDVHBmLEtBQU02VCxVQU9WbmYsS0FBS0ksU0FBUzZyRSxTQUFTLE9BQVEsMkJBQTRCLENBQ3pEcC9ELEtBQU0sb0NBQ05tK0QsTUFBTyxRQUNQN3ZDLFFBQVEsRUFDUnpRLFNBQVMsRUFDVHBmLEtBQU02SyxVQUVSblcsS0FBS0ksU0FBUzZyRSxTQUFTLE9BQVEsZUFBZ0IsQ0FDN0NwL0QsS0FBTSxvQkFDTm0rRCxNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsUUFBUyxJQUNUcGYsS0FBTXdDLFNBRVI5TixLQUFLSSxTQUFTNnJFLFNBQVMsT0FBUSxnQkFBaUIsQ0FDOUNwL0QsS0FBTSx5QkFDTm0rRCxNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsU0FBUyxFQUNUcGYsS0FBTTZLLFVBR1JuVyxLQUFLSSxTQUFTNnJFLFNBQVMsT0FBUSx3QkFBeUIsQ0FDdERwL0QsS0FBTSxpQ0FDTm0rRCxNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsUUFBUyxTQUNUcGYsS0FBTTZULE9BQ05pNEIsUUFBUyxDQUNQd2tDLE9BQVEsMEJBQ1JDLFNBQVUsNEJBQ1ZDLE1BQU8sNEJBSVg5N0UsS0FBS0ksU0FBUzZyRSxTQUFTLE9BQVEsdUJBQXdCLENBQ3JEcC9ELEtBQU0sZ0NBQ05peUMsS0FBTSxvQ0FDTmtzQixNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsU0FBUyxFQUNUcGYsS0FBTTZLLFVBRVJuVyxLQUFLSSxTQUFTNnJFLFNBQVMsT0FBUSxvQkFBcUIsQ0FDbERwL0QsS0FBTSw2QkFDTml5QyxLQUFNLGlDQUNOa3NCLE1BQU8sUUFDUDd2QyxRQUFRLEVBQ1J6USxTQUFTLEVBQ1RwZixLQUFNNkssVUFFUm5XLEtBQUtJLFNBQVM2ckUsU0FBUyxPQUFRLHVCQUF3QixDQUNyRHAvRCxLQUFNLGdDQUNOaXlDLEtBQU0sb0NBQ05rc0IsTUFBTyxRQUNQN3ZDLFFBQVEsRUFDUnpRLFNBQVMsRUFDVHBmLEtBQU02SyxVQUVKblcsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLDBCQUM1QkYsS0FBS0ksU0FBUzZyRSxTQUFTLE9BQVEseUJBQTBCLENBQ3ZEcC9ELEtBQU0sa0NBQ05peUMsS0FBTSxzQ0FDTmtzQixNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsUUFBUyxrREFDVHBmLEtBQU02VCxTQUVSbmYsS0FBS0ksU0FBUzZyRSxTQUFTLE9BQVEsNkJBQThCLENBQzNEcC9ELEtBQU0sc0NBQ05tK0QsTUFBTyxRQUNQN3ZDLFFBQVEsRUFDUnpRLFFBQVMsUUFDVHBmLEtBQU02VCxPQUNOaTRCLFFBQVMsQ0FDUDNwQyxNQUFPLDJCQUNQekcsS0FBTSwwQkFDTiswRSxRQUFTLDZCQUNUanRELE1BQU8sOEJBR1g5dUIsS0FBS0ksU0FBUzZyRSxTQUFTLE9BQVEsOEJBQStCLENBQzVEcC9ELEtBQU0sdUNBQ05peUMsS0FBTSwyQ0FDTmtzQixNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsUUFBUywwQ0FDVHBmLEtBQU02VCxTQUVSbmYsS0FBS0ksU0FBUzZyRSxTQUFTLE9BQVEsb0JBQXFCLENBQ2xEcC9ELEtBQU0sNkJBQ05peUMsS0FBTSxpQ0FDTmtzQixNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsUUFBUyx3Q0FDVHBmLEtBQU02VCxTQUVSbmYsS0FBS0ksU0FBUzZyRSxTQUFTLE9BQVEsb0JBQXFCLENBQ2xEcC9ELEtBQU0sNkJBQ05peUMsS0FBTSxpQ0FDTmtzQixNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsUUFBUyxtQkFDVHBmLEtBQU02VCxTQUVSbmYsS0FBS0ksU0FBUzZyRSxTQUFTLE9BQVEseUJBQTBCLENBQ3ZEcC9ELEtBQU0sa0NBQ05peUMsS0FBTSxzQ0FDTmtzQixNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsUUFBUyxvQkFDVHBmLEtBQU02VCxTQUVSbmYsS0FBS0ksU0FBUzZyRSxTQUFTLE9BQVEsMEJBQTJCLENBQ3hEcC9ELEtBQU0sbUNBQ05peUMsS0FBTSx1Q0FDTmtzQixNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsUUFBUyxvQkFDVHBmLEtBQU02VCxTQUVSbmYsS0FBS0ksU0FBUzZyRSxTQUFTLE9BQVEsMEJBQTJCLENBQ3hEcC9ELEtBQU0sbUNBQ05peUMsS0FBTSx1Q0FDTmtzQixNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsU0FBUyxFQUNUcGYsS0FBTTZLLFVBRVJuVyxLQUFLSSxTQUFTNnJFLFNBQVMsT0FBUSxrQkFBbUIsQ0FDaERwL0QsS0FBTSwyQkFDTm0rRCxNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsUUFBUyxHQUNUcGYsS0FBTTZULFNBRVJuZixLQUFLSSxTQUFTNnJFLFNBQVMsT0FBUSxzQkFBdUIsQ0FDcERwL0QsS0FBTSwrQkFDTm0rRCxNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsUUFBUyxHQUNUcGYsS0FBTTZULFNBRVJuZixLQUFLSSxTQUFTNnJFLFNBQVMsT0FBUSxzQkFBdUIsQ0FDcERwL0QsS0FBTSwrQkFDTm0rRCxNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsUUFBUyxHQUNUcGYsS0FBTXdDLFVBT1Y5TixLQUFLSSxTQUFTNnJFLFNBQVMsT0FBUSx1QkFBd0IsQ0FDckRwL0QsS0FBTSxnQ0FDTml5QyxLQUFNLG9DQUNOa3NCLE1BQU8sUUFDUDd2QyxRQUFRLEVBQ1J6USxTQUFTLEVBQ1RwZixLQUFNNkssVUFFUm5XLEtBQUtJLFNBQVM2ckUsU0FBUyxPQUFRLGdCQUFpQixDQUM5Q3AvRCxLQUFNLHlCQUNOaXlDLEtBQU0sNkJBQ05rc0IsTUFBTyxRQUNQN3ZDLFFBQVEsRUFDUnpRLFNBQVMsRUFDVHBmLEtBQU02SyxVQU1KblcsS0FBS0MsUUFBUUMsSUFBSSxpQkFBaUJDLE9BQVEsQ0FDNUNILEtBQUtJLFNBQVM2ckUsU0FBUyxPQUFRLGFBQWMsQ0FDM0NwL0QsS0FBTSxzQkFDTml5QyxLQUFNLDBCQUNOa3NCLE1BQU8sUUFDUDd2QyxRQUFRLEVBQ1J6USxTQUFTLEVBQ1RwZixLQUFNNkssVUFFUixNQUFPMGpELFNBQVc3NUQsS0FBS0MsUUFBUUMsSUFBSSxpQkFBaUJ1RCxLQUFLbzJELFFBQVF4dEQsTUFBTSxNQUNsRWdLLE1BQU12SSxPQUFPK3JELFdBQWEvckQsT0FBTytyRCxVQUFZLElBQ2hENzVELEtBQUtJLFNBQVM2ckUsU0FBUyxPQUFRLGNBQWUsQ0FDNUNwL0QsS0FBTSx1QkFDTml5QyxLQUFNLDJCQUNOa3NCLE1BQU8sU0FDUDd2QyxRQUFRLEVBQ1J6USxRQUFTLFNBQ1RwZixLQUFNNlQsU0FFUm5mLEtBQUtJLFNBQVM2ckUsU0FBUyxPQUFRLGdCQUFpQixDQUM5Q3AvRCxLQUFNLHlCQUNOaXlDLEtBQU0sNkJBQ05rc0IsTUFBTyxTQUNQN3ZDLFFBQVEsRUFDUnpRLFFBQVMsWUFDVHBmLEtBQU02VCxVQVFabmYsS0FBS0ksU0FBUzZyRSxTQUFTLE9BQVEsWUFBYSxDQUMxQ3AvRCxLQUFNLHFCQUNOaXlDLEtBQU0seUJBQ05rc0IsTUFBTyxRQUNQN3ZDLFFBQVEsRUFDUjd2QixLQUFNNkssUUFDTnVVLFNBQVMsSUFFWDFxQixLQUFLSSxTQUFTNnJFLFNBQVMsT0FBUSx1QkFBd0IsQ0FDckRwL0QsS0FBTSxvQ0FDTml5QyxLQUFNLHdDQUNOa3NCLE1BQU8sUUFDUDd2QyxRQUFRLEVBQ1I3dkIsS0FBTTZLLFFBQ051VSxTQUFTLElBS1gxcUIsS0FBS0ksU0FBUzZyRSxTQUFTLE9BQVEscUJBQXNCLENBQ25EcC9ELEtBQU0scUJBQ05tK0QsTUFBTyxRQUNQN3ZDLFFBQVEsRUFDUjd2QixLQUFNNkssUUFDTnVVLFNBQVMsSUFHWDFxQixLQUFLSSxTQUFTNnJFLFNBQVMsT0FBUSxxQkFBc0IsQ0FDbkRwL0QsS0FBTSw4QkFDTml5QyxLQUFNLDhCQUNOa3NCLE1BQU8sUUFDUDd2QyxRQUFRLEVBQ1J6USxTQUFTLEVBQ1RwZixLQUFNNkssVUFFUm5XLEtBQUtJLFNBQVM2ckUsU0FBUyxPQUFRLHNCQUF1QixDQUNwRHAvRCxLQUFNLHdCQUNObStELE1BQU8sUUFDUDd2QyxRQUFRLEVBQ1I3dkIsS0FBTTZLLFFBQ051VSxTQUFTLElBRVgxcUIsS0FBS0ksU0FBUzZyRSxTQUFTLE9BQVEsc0JBQXVCLENBQ3BEcC9ELEtBQU0sd0JBQ05tK0QsTUFBTyxRQUNQN3ZDLFFBQVEsRUFDUjd2QixLQUFNNlQsT0FDTnVMLFFBQVMxcUIsS0FBS2dmLE9BQU92YixLQUFLbzJELFVBRTVCNzVELEtBQUtJLFNBQVM2ckUsU0FBUyxPQUFRLDZCQUE4QixDQUMzRGpCLE1BQU8sUUFDUDd2QyxRQUFRLEVBQ1J6USxRQUFTLEtBRVgxcUIsS0FBS0ksU0FBUzZyRSxTQUFTLE9BQVEsWUFBYSxDQUMxQ3AvRCxLQUFNLGlCQUNObStELE1BQU8sUUFDUDd2QyxRQUFRLEVBQ1I3dkIsS0FBTTZLLFFBQ051VSxTQUFTLElBR1h4cEIsT0FBT3lxRSxPQUFPcFQsV0FBYSxDQUN6QjEwRCxRQUFTLDZCQUNUNm5FLFNBQVUsR0FFWnhxRSxPQUFPMHZDLE1BQU1vckMsUUFBVWg4RSxLQUFLSSxTQUFTRixJQUFJLE9BQVEsYUFDakRnQixPQUFPQyxLQUFLQyxNQUFNQyxFQUFJb3BFLGVBQ3RCdnBFLE9BQU9DLEtBQUtDLE1BQU02N0QsRUFBSTROLG9CSDFjcEI0USxHSVNGUSxPQUFPQyxnQkFBZ0IsT0FBUXQwQixZQUMvQnEwQixPQUFPRSxjQUFjLE9BQVEvcEIsYUFBYyxDQUN6Q3pNLE1BQU8sQ0FBQyxPQUNSeTJCLGFBQWEsSUFFZkgsT0FBT0UsY0FBYyxPQUFRakMsaUJBQWtCLENBQzdDdjBCLE1BQU8sQ0FBQyxXQUNSeTJCLGFBQWEsSUFFZkgsT0FBT0UsY0FBYyxPQUFRNW9CLGtCQUFtQixDQUM5QzVOLE1BQU8sQ0FBQyxZQUNSeTJCLGFBQWEsSUFFZkgsT0FBT0UsY0FBYyxPQUFRaE8sbUJBQW9CLENBQy9DeG9CLE1BQU8sQ0FBQyxhQUNSeTJCLGFBQWEsSUFFZkgsT0FBT0UsY0FBYyxPQUFRdm9CLG1CQUFvQixDQUMvQ2pPLE1BQU8sQ0FBQyxhQUNSeTJCLGFBQWEsSUFFZkMsTUFBTUgsZ0JBQWdCLE9BQVEzUCxXQUM5QjhQLE1BQU1GLGNBQWMsT0FBUXRDLGVBQWdCLENBQzFDbDBCLE1BQU8sQ0FBQyxTQUNSeTJCLGFBQWEsSUFFZkMsTUFBTUYsY0FBYyxPQUFRekIsZ0JBQWlCLENBQzNDLzBCLE1BQU8sQ0FBQyxVQUNSeTJCLGFBQWEsSUFFZkMsTUFBTUYsY0FBYyxPQUFRaFAsY0FBZSxDQUN6Q3huQixNQUFPLENBQUMsUUFDUnkyQixhQUFhLElBRWZDLE1BQU1GLGNBQWMsT0FBUXJDLGVBQWdCLENBQzFDbjBCLE1BQU8sQ0FBQyxTQUNSeTJCLGFBQWEsSUFFZkMsTUFBTUYsY0FBYyxPQUFRbEMsZ0JBQWlCLENBQzNDdDBCLE1BQU8sQ0FBQyxVQUNSeTJCLGFBQWEsSUFFZkMsTUFBTUYsY0FBYyxPQUFRbkMsZ0JBQWlCLENBQzNDcjBCLE1BQU8sQ0FBQyxVQUNSeTJCLGFBQWEsSUFFZkMsTUFBTUYsY0FBYyxPQUFRdkQsb0JBQXFCLENBQy9DanpCLE1BQU8sQ0FBQyxjQUNSeTJCLGFBQWEsSUFFZkMsTUFBTUYsY0FBYyxPQUFRN1AsbUJBQW9CLENBQzlDM21CLE1BQU8sQ0FBQyxhQUNSeTJCLGFBQWEsSUFFZkMsTUFBTUYsY0FBYyxPQUFRNUMsZUFBZ0IsQ0FDMUM1ekIsTUFBTyxDQUFDLFNBQ1J5MkIsYUFBYSxJQUVmQyxNQUFNRixjQUFjLE9BQVE1TixlQUFnQixDQUMxQzVvQixNQUFPLENBQUMsU0FDUnkyQixhQUFhLElBRWZDLE1BQU1GLGNBQWMsT0FBUXhELGNBQWUsQ0FBRWh6QixNQUFPLENBQUMsVUFDckQwMkIsTUFBTUYsY0FBYyxPQUFRakUsZ0JBQWlCLENBQzNDdnlCLE1BQU8sQ0FBQyxRQUNSeTJCLGFBQWEsSUNsRmZFLFdBQVdDLGVBQWUsZ0JBQWdCLFNBQVU5dkUsVUFFbEQsT0FEWTVCLFdBQVc0SyxtQkFBbUJoSixXQUVuQyx3Q05nREosV0FDTDZVLE1BQU1xSCxHQUFHLG9CQUFvQmpvQixNQUFPaUYsSUFBS29XLEtBQU10WSxRQUM3QyxHQUFvQyxTQUFoQ2tDLElBQUlrMUIsV0FBVzFXLGFBQXlCLENBQzFDLE1BQU13aEMsTUFBUSxJQUFJLElBQUk2MkIsSUFBSS80RSxLQUFLK2pCLE1BQU0va0IsS0FBSXFPLE1BQVFBLEtBQUt4RixTQUNoRDhaLE9BQVMsR0FDZkEsT0FBTzlqQixLQUNMLG9CQUFzQnRCLEtBQUs0UCxLQUFLQyxTQUFTLFlBQWMsYUFFckQ4MUMsTUFBTXBrRCxTQUFTLGNBQ2pCNmpCLE9BQU85akIsS0FDTCw2QkFDRXRCLEtBQUs0UCxLQUFLQyxTQUFTLDJCQUNuQixhQUdGODFDLE1BQU1wa0QsU0FBUyxTQUNqQjZqQixPQUFPOWpCLEtBQ0wsd0JBQ0V0QixLQUFLNFAsS0FBS0MsU0FBUyxzQkFDbkIsYUFHRjgxQyxNQUFNcGtELFNBQVMsU0FDakI2akIsT0FBTzlqQixLQUNMLHdCQUNFdEIsS0FBSzRQLEtBQUtDLFNBQVMsc0JBQ25CLGFBR0Y4MUMsTUFBTXBrRCxTQUFTLGVBQ2pCNmpCLE9BQU85akIsS0FDTCw4QkFDRXRCLEtBQUs0UCxLQUFLQyxTQUFTLDRCQUNuQixhQUdGODFDLE1BQU1wa0QsU0FBUyxVQUNqQjZqQixPQUFPOWpCLEtBQ0wseUJBQ0V0QixLQUFLNFAsS0FBS0MsU0FBUyx1QkFDbkIsYUFHRjgxQyxNQUFNcGtELFNBQVMsVUFDakI2akIsT0FBTzlqQixLQUNMLHlCQUNFdEIsS0FBSzRQLEtBQUtDLFNBQVMsdUJBQ25CLGFBR0Y4MUMsTUFBTXBrRCxTQUFTLFVBQ2pCNmpCLE9BQU85akIsS0FDTCx5QkFDRXRCLEtBQUs0UCxLQUFLQyxTQUFTLHVCQUNuQixhQUdGODFDLE1BQU1wa0QsU0FBUyxXQUNqQjZqQixPQUFPOWpCLEtBQ0wsMEJBQ0V0QixLQUFLNFAsS0FBS0MsU0FBUyx3QkFDbkIsYUFHRjgxQyxNQUFNcGtELFNBQVMsV0FDakI2akIsT0FBTzlqQixLQUNMLDBCQUNFdEIsS0FBSzRQLEtBQUtDLFNBQVMsd0JBQ25CLGFBR0Y4MUMsTUFBTXBrRCxTQUFTLFdBQ2pCNmpCLE9BQU85akIsS0FDTCwwQkFDRXRCLEtBQUs0UCxLQUFLQyxTQUFTLHdCQUNuQixhQUdOLE1BQU05SyxLQUFPLEdBQ2JBLEtBQUt6RCxLQUNILG9CQUFzQnRCLEtBQUs0UCxLQUFLQyxTQUFTLFlBQWMsYUFFekQsSUFBSyxNQUFPek0sSUFBS21LLFNBQVUvSyxPQUFPZ0MsUUFBUWpCLEtBQUt3QixNQUM3Q0EsS0FBS3pELEtBQ0gsa0JBQ0U4QixJQUNBLEtBQ0FwRCxLQUFLNFAsS0FBS0MsU0FBU3RDLE9BQ25CLGFBR053TyxLQUFLdFksS0FBSyxTQUFVa0MsSUFBSTBhLFNBQVMyNUMsUUFBVSxJQUFNcjBELElBQUkwYSxTQUFTeFQsTUFDOURrUCxLQUFLNEMsS0FBSywyQkFBMkIrRyxTQUNyQzNKLEtBQ0c0QyxLQUFLLDRCQUNMODlELE9BQ0MsOEdBQ0U5MkUsSUFBSXExRSxNQUNKLGNBQ0E1MUQsT0FBT3JpQixLQUFLLElBQ1oscUdBQ0E0QyxJQUFJcTFFLE1BQ0osa0JBQ0FoN0UsS0FBSzRQLEtBQUtDLFNBQVMsZ0JBQ25CLDBJQUNBbEssSUFBSXExRSxNQUNKLGNBQ0FqMkUsS0FBS2hDLEtBQUssSUFDVix5QkFFTmdaLEtBQUs0QyxLQUFLLFVBQVVrMEMsT0FBT2tvQixjQUFjaHpFLEtBQUtxSSxPQUM5QzJMLEtBQUs0QyxLQUFLLFNBQVMrOUQsTUFBTTNCLGNBQWNoekUsS0FBS3FJLFdDdko5Q3VzRSxNTWRHLE1BQU1DLG9CQUNYQyxhQUNFenNFLEtBQUs0QixTQUFXLEdBR2xCOHFFLFdBQ0UsSUFBSTlxRSxTQUFXaFMsS0FBS29DLEtBQUsyNEIsUUFBUSxlQUFnQixlQUFlZ2lELE9BQzdELzlELE9BQ0gsR0FBSWhOLFdBQWE1QixLQUFLNEIsU0FBVSxDQUM5QixJQUFJdk8sS0FDQW16RSxZQUNBb0csVUFBWWg5RSxLQUFLa0MsT0FBTys2RSxZQUFZQyxRQUFRbHJFLFdBQVcvUSxLQUFLMGQsTUFDOUQzZCxHQUFnQixTQUFYQSxFQUFFc0ssWUFFZ0IsSUFBZDB4RSxZQUNUQSxVQUFZaDlFLEtBQUtrQyxPQUFPKzZFLFlBQVlDLFFBQVFDLFNBQVNsOEUsS0FBSzBkLE1BQ3hEM2QsR0FBZ0IsU0FBWEEsRUFBRXNLLE9BRVQwRyxTQUFXLGlCQUVZLElBQWRnckUsWUFDVHBHLFlBQWM1MkUsS0FBS2tDLE9BQU8rNkUsWUFBWUMsUUFBUUMsU0FBU2w4RSxLQUFLMnJDLFdBQzFENXJDLEdBQWdCLE9BQVhBLEVBQUVzSyxPQUVUN0gsS0FBT2pCLE9BQU8yYSxPQUFPLEdBQUk2L0QsV0FDekJ2NUUsS0FBSzZILEtBQU8sS0FDWnRMLEtBQUtrQyxPQUFPKzZFLFlBQVlDLFFBQVFDLFNBQVNsOEUsS0FBSzIxRSxhQUM1Q3AwRSxPQUFPMmEsT0FBTzYvRCxVQUFVOW9FLFlBQVlpMEIsVUFBVzFrQyxPQUVuRDJNLEtBQUs0QixTQUFXQSxXQzdCZixNQUFNMDhDLGFBQ1h4NkMsY0FDRTlELEtBQUs2K0MsYUFBZSxLQUNwQjcrQyxLQUFLOCtDLGFBQWUsS0FHdEJFLGVBQWdCRCxTQUNkLFFBQWlDLElBQXRCLytDLEtBQUs2K0MsYUFBOEIsQ0FDNUMsTUFBTW11QixPQUFTaHRFLEtBQUs2K0MsYUFBYS9MLHdCQUNqQyxJQUFLN3NDLE1BQU0rbUUsT0FBT3I0RCxNQUFRLE1BQVExTyxNQUFNK21FLE9BQU9wNEQsS0FBTyxJQUFLLENBQ3pELElBQUlELEtBQU9xNEQsT0FBT3I0RCxLQUNkQyxJQUFNbzRELE9BQU9wNEQsSUFDakIsTUFBTXE0RCxXQUFhbGhFLEVBQUUvTCxLQUFLNitDLGNBQWNxdUIsY0FDeENuaEUsRUFBRSxRQUFReW5CLE9BQU8sMEJBQTRCdXJCLFFBQVUsVUFDdkQsTUFBTXBNLElBQU01bUMsRUFBRSxpQkFDUm9oRSxVQUFZeDZCLElBQUl1NkIsY0FDaEJFLFNBQVd6NkIsSUFBSTA2QixhQUNqQmg1RCxPQUFPNitCLFlBQTJCLElBQWIrNUIsV0FBbUJFLFVBQVl2NEQsSUFDdERBLEtBQVl1NEQsVUFFWnY0RCxLQUF5QixJQUFicTRELFdBRVY1NEQsT0FBTzIrQixXQUFhbzZCLFNBQVd6NEQsT0FDakNBLEtBQU9OLE9BQU8yK0IsV0FBYW82QixVQUU3Qno2QixJQUFJb0QsSUFBSSxDQUNOcGhDLEtBQU1BLEtBQU8sS0FDYkMsSUFBS0EsSUFBTSxTQU1uQjJwQyxhQUFjaHFELE9BQ1IzRSxLQUFLMHVELGFBQWFPLGVBQWlCdHFELE1BQU00aUIsZ0JBQzNDbTJELGFBQWExOUUsS0FBSzB1RCxhQUFhUSxjQUMvQmx2RCxLQUFLMHVELGFBQWFPLGFBQWUsS0FDakM5eUMsRUFBRSxpQkFBaUJ1SixXQzVCbEIsTUFBTWk0RCxVQUFZLENBQ3ZCdkMsU0FDRSxTQ05GOTVELE1BQU1xa0QsS0FBSyxTQUFTamxFLFVBQ2xCZ25DLFFBQVEreUIsSUFBSSx1Q0FDUno2RCxLQUFLSSxTQUFTRixJQUFJLE9BQVEsdUJBQXlCRixLQUFLb0MsS0FBS3FoQixLQUlqRXpqQixLQUFLMHVELGFBQWUsSUFBSUEsZ0JDVDFCcHRDLE1BQU1xSCxHQUFHLG9CQUFvQmpvQixNQUFPK0MsS0FBTXNZLEtBQU0xWixlQ0FoRGlmLE1BQU1xSCxHQUFHLHFCQUFxQixTQ0Q5QnJILE1BQU1xSCxHQUFHLGdCQUFnQixDQUFDaTFELE9BQVE3aEUsUUFDaEMsTUFBTXFjLEtBQU9yYyxLQUFLNEMsS0FBSyxRQUN2QixHQUFJeVosS0FBS3VkLEdBQUcscUJBQXNELElBQS9CdmQsS0FBS3paLEtBQUssVUFBVWpkLE9BQWMsQ0FDbkUsTUFBTW04RSxzQkFBd0J6bEQsS0FBS3paLEtBQUssaUJBQ2xDbS9ELGlCQUFtQixHQUNuQkMsbUJBQXFCLzlFLEtBQUtJLFNBQVNGLElBQ3ZDLE9BQ0Esd0JBRUYyOUUsc0JBQXNCNzZCLFdBQVd5RCxNQUFLLENBQUN3VyxFQUFHK2dCLGdCQUN4QyxNQUFNNTZFLElBQU00NkUsYUFBYUMsYUFBYUMsYUFDbENsK0UsS0FBSzRQLEtBQUtrdEQsSUFBSSxpQkFBaUIxNUQsU0FDakM0NkUsYUFBYUMsWUFBY2orRSxLQUFLNFAsS0FBS0MsU0FBUyxpQkFBaUJ6TSxTQUcvRDI2RSxrQkFDQyxDQUFDLFFBQVMsV0FBV3g4RSxTQUFTeThFLGFBQWF6d0UsUUFFNUN1d0UsaUJBQWlCeDhFLEtBQUswOEUsaUJBRzFCSCxzQkFBc0JNLFFBQ3RCTixzQkFBc0JqNkMsT0FDcEJrNkMsaUJBQWlCeGdELE1BQUssQ0FBQ2l6QyxNQUFPNk4sU0FDNUI3TixNQUFNNW9ELFVBQVVtbEIsY0FBY3N4QyxPQUFPejJELGNBR0wsVUFBaENrMkQsc0JBQXNCLzlCLE1BQ3hCKzlCLHNCQUFzQi85QixJQUFJLGFBQ2UsU0FBaEMrOUIsc0JBQXNCLzlCLE9BQy9CKzlCLHNCQUFzQi85QixJQUFJLFlDN0JoQ3grQixNQUFNcUgsR0FBRyxtQkFBbUJqb0IsTUFBTytDLEtBQU1zWSxLQUFNMVosZUNBL0NpZixNQUFNcUgsR0FBRyxlQUFlam9CLE1BQU8rQyxLQUFNc1ksS0FBTTFaLFdBQ3JDckMsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLHlCQUNxQyxTQUE3REYsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLGlCQUFpQmdNLGVBQzdDNlAsS0FBSzRDLEtBQUssT0FBTytHLFNBRWdDLEtBQS9DMWxCLEtBQUtJLFNBQVNGLElBQUksT0FBUSxrQkFDNUI2YixLQUFLNEMsS0FBSyxPQUFPaXhCLEtBQUssTUFBTzV2QyxLQUFLSSxTQUFTRixJQUFJLE9BQVEsa0JBR1AsS0FBOUNGLEtBQUtJLFNBQVNGLElBQUksT0FBUSxpQkFDNUI2YixLQUFLNEMsS0FBSyxNQUFNNUMsS0FBSy9iLEtBQUtJLFNBQVNGLElBQUksT0FBUSxxQkNUckRvaEIsTUFBTXFrRCxLQUFLLG1CQUFtQnpqRSxTQUM1QkEsT0FBT204RSxjQUFjLENBQ25CL3lFLEtBQU0sS0FDTmd4QyxPQUFRLENBQUMsS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sTUFDL0RnaUMsVUFBVyxJQUNYdC9ELE9BQVEsYUFFVjljLE9BQU9tOEUsY0FBYyxDQUNuQi95RSxLQUFNLEtBQ05neEMsT0FBUSxDQUFDLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLE1BQy9EZ2lDLFVBQVcsSUFDWHQvRCxPQUFRLGFBRVZoZixLQUFLNDhFLG9CQUFzQixJQUFJQSx1QkNmakN0N0QsTUFBTXFILEdBQUcsdUJBQXVCem1CLFNBQzlCbEMsS0FBSzQ4RSxvQkFBb0JFLGdCQ003QnA4RSxlQUFlNjlFLGtCQUFtQjk2RSxNQUNoQyxNQUFNKzZFLFlBQWMsSUFBSTF6RCxnQkFDdEJybkIsS0FBSzJSLFVBQ0wzUixLQUFLOFksVUFDTDlZLEtBQUswUSxhQUVQcXFFLFlBQVk1eUQsYUFBZW5vQixLQUFLZ0osU0FFaEMsYUFEc0IreEUsWUFBWXB2QyxpQkFJcEMxdUMsZUFBZSs5RSxjQUFlaDdFLE1BQzVCLElBQ0UsSUFBSTBGLE1BRUZBLE1BREUxRixLQUFLbUosTUFDQzVNLEtBQUtpTyxPQUFPL04sSUFBSXVELEtBQUttSixPQUFPTCxPQUFPck0sSUFBSXVELEtBQUs4ckQsV0FBV3BtRCxNQUV2RG5KLEtBQUtzTSxPQUFPcE0sSUFBSXVELEtBQUs4ckQsV0FFL0IsTUFBTXorQyxLQUFPM0gsTUFBTTZILE1BQU05USxJQUFJdUQsS0FBS3FOLFlBQ1o5USxLQUFLc00sT0FDeEJwTSxJQUFJdUQsS0FBSytyRCxTQUNUOW9CLHdCQUF3QixPQUFRLENBQUM1MUIsS0FBSzRPLFlBRXZDdlcsTUFBTXVwQyx3QkFBd0IsT0FBUSxDQUFDNWhDLEtBQUtqRixLQUU5QyxNQUFPa3BDLEdBRVAsT0FEQXRsQyxHQUFHQyxjQUFja1csTUFBTW12QixJQUNoQixFQUVULE9BQU8sRUNzZVQsU0FBUzJwQyxhQUFjLzVFLE9BQ3JCLE9BQU9BLE1BQU00YSxTQWxmWGhVLE1BQU1vekUsc0JBQXdCL2tCLGVBQWU1NUQsS0FBSzY1RCxRQUFTLFlBRTdEMzRELE9BQU8wOUUsY0FBY3pWLEtBQU81OUQsTUFBTW96RSxvQkFBb0JFLFFBR3hEdjlELE1BQU1xSCxHQUFHLHdCQUF3QixDQUFDaGpCLElBQUtvVyxLQUFNMVosV0FDM0MsTUFBTXk4RSxVQUFZM2lFLEVBQUV4VyxJQUFJeXlCLE1BQU16WixLQUFLLHlCQUNuQ21nRSxVQUNHbmdFLEtBQUssdUNBQ0x2QixRQUFRLGtCQUNScS9ELE9BQ0MsOEJBQ0V6OEUsS0FBSzRQLEtBQUtDLFNBQVMsNEJBQ25CLFNBRU5pdkUsVUFDR25nRSxLQUFLLG9DQUNMdkIsUUFBUSxrQkFDUnEvRCxPQUNDLDhCQUNFejhFLEtBQUs0UCxLQUFLQyxTQUFTLHNCQUNuQixTQUVOaXZFLFVBQ0duZ0UsS0FBSyx5Q0FDTHZCLFFBQVEsa0JBQ1JxL0QsT0FDQyw4QkFDRXo4RSxLQUFLNFAsS0FBS0MsU0FBUywyQkFDbkIsU0FFTml2RSxVQUNHbmdFLEtBQUssd0NBQ0x2QixRQUFRLGtCQUNScS9ELE9BQ0MsOEJBQ0V6OEUsS0FBSzRQLEtBQUtDLFNBQVMsdUJBQ25CLFNBRU5pdkUsVUFDR25nRSxLQUFLLDBDQUNMdkIsUUFBUSxrQkFDUnEvRCxPQUNDLDhCQUNFejhFLEtBQUs0UCxLQUFLQyxTQUFTLDZCQUNuQixTQUVOaXZFLFVBQ0duZ0UsS0FBSywrQ0FDTHZCLFFBQVEsa0JBQ1JxL0QsT0FDQyw4QkFDRXo4RSxLQUFLNFAsS0FBS0MsU0FBUyx1QkFDbkIsU0FFTml2RSxVQUNHbmdFLEtBQUssMkNBQ0x2QixRQUFRLGtCQUNScS9ELE9BQ0MsOEJBQ0V6OEUsS0FBSzRQLEtBQUtDLFNBQVMsd0JBQ25CLFNBRU5pdkUsVUFDR25nRSxLQUFLLGlDQUNMdkIsUUFBUSxrQkFDUnEvRCxPQUNDLDhCQUNFejhFLEtBQUs0UCxLQUFLQyxTQUFTLDRCQUNuQixTQUVOaXZFLFVBQ0duZ0UsS0FBSyxnQ0FDTHZCLFFBQVEsa0JBQ1JxL0QsT0FDQyw4QkFDRXo4RSxLQUFLNFAsS0FBS0MsU0FBUyxnQ0FDbkIsU0FFTml2RSxVQUNHbmdFLEtBQUssaURBQ0x2QixRQUFRLGtCQUNScS9ELE9BQ0MsOEJBQ0V6OEUsS0FBSzRQLEtBQUtDLFNBQVMsMkJBQ25CLFlBSVJ5UixNQUFNcWtELEtBQUssUUFBUWpsRSxpQkFDakJWLEtBQUs0M0IsS0FBTyxDQUNWalgsT0FBUSxDQUNOckIsV0FBWWhDLGNBQWN5aEUsZ0JBQzFCbi9ELFlBQWF0QyxjQUFjMGhFLGlCQUMzQnRzRSxNQUFPNEssY0FBYzJoRSxZQUV2QnBuRCxNQUFPLENBQ0xxQixhQUdKeXlDLE9BQU94akMsVUFBVSt3QixlQUFpQkEsa0J2RC9HN0IsWUFBcUJnbUIsV0FJMUI1OUQsTUFBTXFILEdBQUcsaUJBQWlCLENBQUNoakIsSUFBS29XLEtBQU10WSxPQUNwQ2lpRCxvQkFBb0J5NUIsVUFBVXg1RSxJQUFLb1csS0FBTXRZLFFBRzNDNmQsTUFBTXFrRCxLQUFLLG1CQUFtQixXQUM1QmpnQixvQkFBb0J1bUIsU0FBU2lULFdBQzdCeDVCLG9CQUFvQnZrQyxPQUFTaStELFVBQVVDLGVBQWVyL0UsS0FBS2dmLE9BQU9uVCxJQUNsRTY1QyxvQkFBb0J2a0MsT0FBTzhxRCxTQUFTLGdCQUFpQnh2RCxlQUNyRGlwQyxvQkFBb0J2a0MsT0FBTzhxRCxTQUFTLFNBQVV4bUIsV0FJaERua0MsTUFBTXFILEdBQUcscUJBQXFCLENBQUNoakIsSUFBS29XLEtBQU10WSxPQUN4Q3VpRCxpQkFBaUJubUIsY0FBYzlqQixRdURpR25DdWpFLENBQVE3M0IsVUFFUm5tQyxNQUFNcUgsR0FBRyx1QkFBdUIsQ0FBQ2hqQixJQUFLb1csS0FBTXRZLE9BQzFDcTBELFdBQVd5bkIsb0JBQW9CNTVFLElBQUtvVyxLQUFNdFksUUM3SDFDNmQsTUFBTXFILEdBQUcsZUFBZSxDQUFDNU0sS0FBTWpRLFdBRTdCLEdBQUlBLFFBQVEwUixNQUFNLGdCQUFpQixDQUVqQyxNQUFNZ2lFLFNBQVcxekUsUUFBUTBSLE1BQU0sVUFnQy9CLE9BL0JJZ2lFLFNBQ0YsSUFBSWwvRSxLQUFLLFNBQVNELEtBQUssQ0FBRUssT0FBTyxJQUFRc0wsTUFBS2dJLElBQzNDLE1BQU14RyxFQUFJd0csRUFBRXJULE9BQ044K0UsSUFBTUQsU0FDVC84RSxLQUFJb2UsSUFDSCxJQUFJNCtELElBQU0sR0FjVixPQWJZQSxJQUFSanlFLEdBQUssRUFBU3hOLEtBQUs0UCxLQUFLQyxTQUFTLHdCQUM1QnJDLEdBQUssSUFBV3hOLEtBQUs0UCxLQUFLQyxTQUFTLGVBQ25DckMsR0FBS3FULEVBQUksRUFDVjdnQixLQUFLNFAsS0FBS0MsU0FBUyx1QkFDaEJyQyxHQUFLcVQsRUFBSSxFQUNaN2dCLEtBQUs0UCxLQUFLQyxTQUFTLG9CQUNoQnJDLEdBQUtxVCxFQUFTN2dCLEtBQUs0UCxLQUFLQyxTQUFTLHVCQUNuQ3JDLEdBQUssSUFDUnFULEVBQUksR0FBVTdnQixLQUFLNFAsS0FBS0MsU0FBUyxlQUUxQjdQLEtBQUs0UCxLQUFLQyxTQUFTLGdCQUVoQzR2RSxLQUFPLElBQU16L0UsS0FBSzRQLEtBQUtDLFNBQVMsY0FBZ0IsSUFBTWdSLEVBQy9DNCtELE9BRVIxOEUsS0FBSyxPQUNSaVIsRUFBRXVLLFVBQVUsQ0FDVm5ULFFBQVNwSixZQUFZcUosYUFDckJGLE9BQVFzMEUsU0FJWmh3RSxHQUFHQyxjQUFja1csTUFBTSwrQkFHbEIsTUQ2RmIrM0QsVUFBVXZDLFNBRVY5NUQsTUFBTXFrRCxLQUFLLG1CRHpJSixXQUNMM2xFLEtBQUswa0MsV0FBYTA2QyxVQUFVQyxlQUFlLFFBQzNDci9FLEtBQUswa0MsV0FBV3VuQyxTQUFTLG9CQUFxQnNTLG1CQUM5Q3YrRSxLQUFLMGtDLFdBQVd1bkMsU0FBUyxnQkFBaUJ3UyxrQkN3STVDbjlELE1BQU1xa0QsS0FBSyxTQUFTLFdBRWxCLE1BQU0rWixXQUFhLENBQ2pCLGtCQUNBLFdBQ0EsYUFDQSx1QkFDQSxjQUdGLElBQUssTUFBTXppQixLQUFLeWlCLFdBQVksQ0FDMUIsTUFBTWpGLFVBQVlqNEUsT0FBT2dDLFFBQVFqQixLQUFLMDVELElBQUl4NkQsS0FBSXN5QyxHQUNyQyxDQUFDQSxFQUFFLEdBQUkvMEMsS0FBSzRQLEtBQUtDLFNBQVNrbEMsRUFBRSxPQUVyQ3h4QyxLQUFLMDVELEdBQUt3ZCxVQUFVditCLFFBQU8sQ0FBQzV1QyxJQUFLeW5DLEtBQy9Cem5DLElBQUl5bkMsRUFBRSxJQUFNQSxFQUFFLEdBQ1B6bkMsTUFDTixJQUdMLElBQUlxeUUsWUFBY3orRSxPQUFPa3hDLGNBQWN4RixXQUNyQ3ZyQyxHQUFLQSxFQUFFd0ssS0FBT3RJLEtBQUs4RixPQUFPTyxRQUVQLElBQWpCKzFFLGNBQ0Z6K0UsT0FBT2t4QyxjQUFjdXRDLGFBQWF6bEQsS0FDaEMsMkNBRUp5bEQsWUFBY3orRSxPQUFPa3hDLGNBQWN4RixXQUNqQ3ZyQyxHQUFLQSxFQUFFd0ssS0FBT3RJLEtBQUs4RixPQUFPRyxlQUVQLElBQWpCbTJFLGNBQ0Z6K0UsT0FBT2t4QyxjQUFjdXRDLGFBQWF6bEQsS0FDaEMsbURBRUpoNUIsT0FBT2t4QyxjQUFjd3RDLFFBQ25CLENBQ0UvekUsR0FBSXRJLEtBQUs4RixPQUFPQyxZQUNoQnlWLE1BQU8seUJBQ1BtYixLQUFNLGdEQUVSLENBQ0VydUIsR0FBSXRJLEtBQUs4RixPQUFPRSxZQUNoQndWLE1BQU8sb0JBQ1BtYixLQUFNLGlEQUVSLENBQ0VydUIsR0FBSXRJLEtBQUs4RixPQUFPSSxlQUNoQnNWLE1BQU8sc0JBQ1BtYixLQUFNLDJDQUVSLENBQ0VydUIsR0FBSXRJLEtBQUs4RixPQUFPSyxNQUNoQnFWLE1BQU8sYUFDUG1iLEtBQU0saURBS1o1WSxNQUFNcUgsR0FBRyxzQkFBc0IsQ0FBQ2xsQixLQUFNcEIsUUFBU3c5RSxVQUM3QyxHQUNFNy9FLEtBQUs2L0UsU0FBV0EsYUFDZ0IsSUFBekJwOEUsS0FBS0EsS0FBSzIzQixNQUFNMFcsV0FDa0IsSUFBbENydUMsS0FBS0EsS0FBSzIzQixNQUFNMFcsS0FBS0MsU0FFNUIsT0FBUXR1QyxLQUFLQSxLQUFLMjNCLE1BQU0wVyxLQUFLQyxVQUMzQixLQUFLeHVDLEtBQUs4RixPQUFPRSxZQUNqQixLQUFLaEcsS0FBSzhGLE9BQU9HLFlBQ2pCLEtBQUtqRyxLQUFLOEYsT0FBT0ksZUFDakIsS0FBS2xHLEtBQUs4RixPQUFPSyxNQUNqQixLQUFLbkcsS0FBSzhGLE9BQU9NLE1BQ2pCLEtBQUtwRyxLQUFLOEYsT0FBT08sS0FDZm5HLEtBQUtrYyxPQUFPbkUsYUFBYS9YLEtBQUtBLEtBQUsyM0IsTUFBTTBXLEtBQUtDLFNBQVUsQ0FDdERKLFlBQVksSUFFZCxNQUNGLEtBQUtwdUMsS0FBSzhGLE9BQU9DLFlBQ2YsQ0FDRSxNQUFNdzhCLFNBQVdyaUMsS0FBS0EsS0FBSzIzQixNQUFNeEQsTUFBTWtPLFNBQ3ZDLElBQUlDLFNBQVcsTUFDRSxJQUFiRCxTQUNGQyxTQUFXdGlDLEtBQUtBLEtBQUtzaUMsVUFBVW1NLFFBQ1QsSUFBYnBNLFdBQ1RDLFNBQVd0aUMsS0FBS0EsS0FBS3NpQyxVQUFVb00sUUFDMUI5N0IsTUFBTTB2QixZQUNUQSxTQUFXdmxDLEtBQUt1aUIsTUFBTWdqQixTQUFXLFFBR3JDdGlDLEtBQUtrYyxPQUFPbkUsYUFBYWpZLEtBQUs4RixPQUFPQyxZQUFhLENBQ2hEcW9DLFlBQVksRUFDWjdMLFNBQ0FDLGdCQVFaemtCLE1BQU1xSCxHQUFHLHNCQUFzQixDQUFDbGxCLEtBQU1wQixRQUFTdzlFLFVBQzdDLEdBQ0U3L0UsS0FBSzYvRSxTQUFXQSxhQUNnQixJQUF6QnA4RSxLQUFLQSxLQUFLMjNCLE1BQU0wVyxXQUNrQixJQUFsQ3J1QyxLQUFLQSxLQUFLMjNCLE1BQU0wVyxLQUFLQyxTQUU1QixPQUFRdHVDLEtBQUtBLEtBQUsyM0IsTUFBTTBXLEtBQUtDLFVBQzNCLEtBQUt4dUMsS0FBSzhGLE9BQU9DLFlBQ2pCLEtBQUsvRixLQUFLOEYsT0FBT0UsWUFDakIsS0FBS2hHLEtBQUs4RixPQUFPRyxZQUNqQixLQUFLakcsS0FBSzhGLE9BQU9JLGVBQ2pCLEtBQUtsRyxLQUFLOEYsT0FBT0ssTUFDakIsS0FBS25HLEtBQUs4RixPQUFPTSxNQUNqQixLQUFLcEcsS0FBSzhGLE9BQU9PLEtBQ2ZuRyxLQUFLa2MsT0FBTzdHLGVBQWVyVixLQUFLQSxLQUFLMjNCLE1BQU0wVyxLQUFLQyxTQUFVLENBQ3hESixZQUFZLFFBTXRCcndCLE1BQU1xSCxHQUFHLGNBQWNqb0IsTUFBT29mLElBQUtyYyxLQUFNc2MsT0FDdkN6QyxjQUFjd2lFLFlBQVloZ0UsSUFBS3JjLEtBQU1zYyxRQUd2Q3VCLE1BQU1xSCxHQUFHLGlCQUFpQixDQUFDaGpCLElBQUtvVyxLQUFNdFksT0FDcENtckIsU0FBU214RCxjQUFjcDZFLElBQUtvVyxLQUFNdFksUUFFcEM2ZCxNQUFNcUgsR0FBRyxxQkFBcUIsQ0FBQ2hqQixJQUFLb1csS0FBTXRZLE9BQ3hDbXJCLFNBQVNveEQsa0JBQWtCcjZFLElBQUtvVyxLQUFNdFksUUFFeEM2ZCxNQUFNcUgsR0FBRyxxQkFBcUIsQ0FBQ3RNLFlBQWF4YSxTQUFVbytFLEtBQU03MEUsVUFDMUR3akIsU0FBU3N4RCxvQkFBb0I3akUsWUFBYXhhLFNBQVVvK0UsS0FBTTcwRSxXQUc1RGtXLE1BQU1xSCxHQUFHLFNBQVNqb0IsVUF1Q2hCLFNBQVN5L0Usc0JBQXVCdmxCLE1BQU8vdUQsSUFDbEI3TCxLQUFLNDNCLEtBQUt1TyxPQUFPeTBCLE9BQXpCLFNBQVAvdUQsR0FBeUMsS0FDZDdMLEtBQUttbUMsT0FBT2ptQyxJQUFJMkwsVUF4QzNDNHRELFFBQVEybUIsaUJBZ05EamtFLEVBQUUsUUFDVndNLEdBQUcsUUFBUyxzQkFBdUJyWSxVQUFVK3ZFLG9CQUNsRGw4RSxTQUFTNm9ELGlCQUFpQixZQUFhMHhCLGNBUXZDNEIsUUFBUUMsY0FBY2o4RSxJQUFJLHNCQUFzQixTQUFVazBDLFFBQ3hEQSxPQUFPN3ZCLEdBQUcsUUFBUWhrQixPQUFTMDZCLFdBQVdtaEQsYUFBYTc3RSxNQUFPNnpDLGFBSzVEdDNDLE9BQU91L0UsUUFBUUMsUUFBVSxzQkFBc0J4L0UsT0FBT3UvRSxRQUFRQyxVQXROOUQxZ0YsS0FBSzQzQixLQUFLa1IsZ0JBQWtCOW9DLEtBQUtvZ0IsTUFBTWxnQixJQUFJLGdCQUFnQjg3RCxnQkFFM0RoOEQsS0FBS21oQixPQUFPd0gsR0FBRyxlQUFlam9CLE1BQUFBLE9BRzVCLEdBRmtCLGVBQWQrQyxLQUFLNkgsTUFBdUJnUyxjQUFjK0QsbUJBRTFDcmhCLEtBQUtvQyxLQUFLcWhCLE9BQ1JzWSxpQkFBaUJqQixjQUFjeHZCLE9BQVM3SCxLQUFLNkgsTUFDL0N5d0IsaUJBQWlCa3BCLFNBQVN4aEQsTUFHeEJpNkIsa0JBQWtCNUMsY0FBY3h2QixPQUFTN0gsS0FBSzZILE1BQ2hEb3lCLGtCQUFrQnVuQixTQUFTeGhELE1BR1gsV0FBZEEsS0FBSzZILE1BQW1CLFFBQ1B3MUMsU0FBU3I5QyxLQUFLcU4sT0FDNUJyTixLQUFLaXpFLFFBQVFqekUsS0FBS0EsVUFxQjdCLE1BQU1rOUUsWUFBYyxDQUFFQyxLQUFNLDRCQUM1QixJQUFLLE1BQU12L0UsS0FBS3JCLEtBQUttbUMsT0FDbkJ3NkMsWUFBWXQvRSxFQUFFb0MsS0FBS21oQyxLQUFPdmpDLEVBQUVvQyxLQUFLb0osS0FHbkM3TSxLQUFLSSxTQUFTNnJFLFNBQVMsT0FBUSw0QkFBNkIsQ0FDMURwL0QsS0FBTSxxQ0FDTm0rRCxNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsUUFBUyxPQUNUcGYsS0FBTTZULE9BQ05pNEIsUUFBU3VwQyxZQUNUelYsU0FBVXIvRCxJQUFNczBFLHNCQUFzQix3QkFBeUJ0MEUsTUFHakU3TCxLQUFLSSxTQUFTNnJFLFNBQVMsT0FBUSw2QkFBOEIsQ0FDM0RwL0QsS0FBTSxzQ0FDTm0rRCxNQUFPLFFBQ1A3dkMsUUFBUSxFQUNSelEsUUFBUyxPQUNUcGYsS0FBTTZULE9BQ05pNEIsUUFBU3VwQyxZQUNUelYsU0FBVXIvRCxJQUFNczBFLHNCQUFzQix5QkFBMEJ0MEUsTUEyQ2xFN0wsS0FBSzQzQixLQUFLdU8sT0FBUyxDQUNqQjA2QyxzQkFDNkQsU0FBM0Q3Z0YsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLDZCQUN0QixLQUNBRixLQUFLbW1DLE9BQU9qbUMsSUFDWkYsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLDhCQUVoQzRnRix1QkFDOEQsU0FBNUQ5Z0YsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLDhCQUN0QixLQUNBRixLQUFLbW1DLE9BQU9qbUMsSUFDWkYsS0FBS0ksU0FBU0YsSUFBSSxPQUFRLG1DQVdwQ29oQixNQUFNcUgsR0FDSix3QkFDYSxDQUFDaGpCLElBQUtvVyxLQUFNdFksT0FDVjhxRSxlQUFld1MsVUFBVXA3RSxJQUFLb1csS0FBTXRZLFFBR3JENmQsTUFBTXFILEdBQUcsdUJBQXVCLENBQUNoakIsSUFBS29XLE9BQ3BDd3lELGVBQWV5UyxRQUFRcjdFLElBQUtvVyxRQUk5QnVGLE1BQU1xSCxHQUFHLG1CQUFtQnM0RCxnQkFBa0JBLGVBQWVqMkIsaUJBQzdEMXBDLE1BQU1xSCxHQUFHLDJCQUEyQixDQUFDaGpCLElBQUtvVyxLQUFNdFksT0FDOUM4dkQsa0JBQWtCRCxVQUFVM3RELElBQUtvVyxLQUFNdFksUUFFekM2ZCxNQUFNcUgsR0FBRyxzQkFBc0IsQ0FBQ2hqQixJQUFLb1csS0FBTXRZLE9BQ3pDMnVELGFBQWFrQixVQUFVM3RELElBQUtvVyxLQUFNdFksUUFLcEM2ZCxNQUFNcUgsR0FBRyxjQUFlckwsY0FBYzRqRSxnQkFLdEM1L0QsTUFBTXFILEdBQUcsMEJBQTBCLFNBd0JuQ3JILE1BQU1xSCxHQUFHLGtCQUFtQjBXLFdBQVc4aEQsbUJBQ3ZDNy9ELE1BQU1xSCxHQUFHLHFCQUFzQjBXLFdBQVc4aEQsbUJBQzFDNy9ELE1BQU1xSCxHQUFHLG1CQUFvQjBXLFdBQVc4aEQsbUJBSXhDNy9ELE1BQU1xSCxHQUFHLHFCQUFxQixDQUFDaGpCLElBQUtvVyxLQUFNdFksUUFDeENtckIsU0FBU3d5RCxzQkFBc0J6N0UsSUFBS29XLEtBQU10WSxNQUMxQzQ3QixXQUFXZ2lELGFBQWExN0UsSUFBS29XLEtBQU10WSxTQUlyQzZkLE1BQU1xSCxHQUFHLG1CQUFvQmlyQyxtQkFBbUI1c0IsYUFDaEQxbEIsTUFBTXFILEdBQUcsa0JBQW1CaXJDLG1CQUFtQjVzQixhQUcvQzFsQixNQUFNcUgsR0FBRyx5QkFBMEJzOUMsU0FBU3FiLFlBQzVDaGdFLE1BQU1xSCxHQUFHLHNCQUF1QnM5QyxTQUFTc2IsZ0JBRXpDamdFLE1BQU1xSCxHQUFHLGlCQUFrQm0rQyxXQUFXMGEsaUJBRXRDbGdFLE1BQU1xSCxHQUFHLHNCRWhlRixTQUE2QnhmLE1BQU93YSxNQUFPbGdCLE1BQ2hELEdBQWtCLFNBQWRBLEtBQUs2SCxNQUFtQjdILEtBQUsrUCxRQUFTLENBQ3hDLEdBQUlySyxNQUFNMUYsS0FBS21oQyxNQUFRbmhDLEtBQUsrUCxRQUMxQixPQUVGLElBQUkrN0MsVUFBWSxLQU1oQixPQUpFQSxVQURFOXJELEtBQUswSSxTQUFXMUksS0FBSzJJLFFBQ1hwTSxLQUFLaU8sT0FBTy9OLElBQUl1RCxLQUFLMEksU0FBU0ksT0FBT3JNLElBQUl1RCxLQUFLMkksU0FBU2pELE1BRXZEbkosS0FBS3NNLE9BQU9wTSxJQUFJdUQsS0FBSytQLFNBRTNCckssTUFBTTFGLEtBQUs2SCxNQUNqQixJQUFLLFlBQ0wsSUFBSyxNQUNMLElBQUssV0FDSCxJQUFLLENBQUMsU0FBUy9KLFNBQVNrQyxLQUFLQSxLQUFLNkgsTUFDaEMsT0FFRixNQUNGLElBQUssVUFDSCxPQUNGLElBQUssWUFDSCxJQUFLLENBQUMsT0FBUSxPQUFRLFFBQVMsVUFBVS9KLFNBQVNrQyxLQUFLQSxLQUFLNkgsTUFDMUQsT0FHRmlrRCxXQUNGQSxVQUFVN2Msd0JBQXdCLE9BQVEsQ0FBQ2p2QyxLQUFLQSxLQUFLbWhDLFVGcWYzRDFqQyxPQUFPdU8sR0FBR3JQLFNBQVdnbkUsc0JBQ3JCbG1FLE9BQU91TyxHQUFHMjZDLFdBQWFtZCx3QkFDdkJybUUsT0FBT3VPLEdBQUduRCxPQUFTcTdELG9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2RpY2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NvbmZpZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9oZWxwZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZC1hY3Rvci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9zYW4tY2hlY2suanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3V0aWxpdGllcy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jb25jaGVjay5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9za2lsbC1zZWxlY3Rpb24tZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3BvaW50LXNlbGVjdGlvbi1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY2hhci1zZWxlY3Rpb24tZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NoYXItcm9sbC1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvc2tpbGwtc3BlYy1zZWxlY3QtZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NvbWJhdC9tZWxlZS1yZXNvbHV0aW9uLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NvbWJhdC9tZWxlZS10YXJnZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvcmFuZ2Vjb21iYXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvaW50ZXJhY3RpdmUtY2hhdC1jYXJkLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmRzL2RhbWFnZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9yb2xsLWNhcmQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZHMvb3Bwb3NlZC1yb2xsLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmRzL2NvbWJpbmVkLXJvbGwuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL2FjdG9yLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3NraWxsLXZhbHVlLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9saW5rLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2xpbmstY3JlYXRpb24tZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3BhcnNlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvaXRlbS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hlY2suanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvc2FuZGF0YS1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY29jNy1jaGF0LW1lc3NhZ2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvcm9sbC1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NvbW1vbi9jaGF0Y2FyZGxpYi9zcmMvY2hhdGNhcmRsaWIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZHMvdGVzdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL3NoZWV0cy9iYXNlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL25wYy1zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL3NoZWV0cy9jcmVhdHVyZS1zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jcmVhdGUtbXl0aG9zLWVuY291bnRlcnMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvY2hhcmFjdGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jb21iYXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3VwZGF0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvYWN0b3ItaW1wb3J0ZXItcmVnZXhwLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2FjdG9yLWltcG9ydGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2FjdG9yLWltcG9ydGVyLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvbWVudS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jYW52YXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NldHRpbmdzLWRpcmVjdG9yeS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY29tcGVuZGl1bS1kaXJlY3RvcnkuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9yLWRpcmVjdG9yeS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc3BlbGwvZGF0YS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvYm9vay9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2RlY2FkZXItZGllLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2RlY2FkZXItZGllLW90aGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2dhbWUtcnVsZXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9hcmNoZXR5cGUuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL2Jvb2svc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvY29udGFpbmVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvY2hhc2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9pdGVtLXNoZWV0VjIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9pdGVtLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvb2NjdXBhdGlvbi5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL3NldHVwLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvc2tpbGwuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NwZWxsL3NoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvc3RhdHVzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvdGFsZW50LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL3ZlaGljbGUuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy93ZWFwb24tc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvY29tcGVuZGl1bS1maWx0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2luaXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvY29uZmlndXJlLWRvY3VtZW50cy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9sb2FkLXRlbXBsYXRlcy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9yZWdpc3Rlci1zZXR0aW5ncy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9yZWdpc3Rlci1zaGVldHMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvaGFuZGxlYmFycy1oZWxwZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvZGVjYWRlci1kc24tZmFjZXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvdG9vbHRpcHMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2luZGV4LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZWFkeS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVuZGVyLWFjdG9yLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItY2hhdC1tZXNzYWdlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItaXRlbS1zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVuZGVyLXBhdXNlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9kaWNlLXNvLW5pY2UtcmVhZHkuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2RpY2Utc28tbmljZS1yb2xsLXN0YXJ0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9zb2NrZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NvYzcuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2RpY2Vib3QuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2Ryb3AtYWN0b3Itc2hlZXQtZGF0YS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIENPTkZJRywgZ2FtZSwgUm9sbCAqL1xuXG5leHBvcnQgY2xhc3MgQ29DN0RpY2Uge1xuICBzdGF0aWMgYXN5bmMgcm9sbCAobW9kaWYgPSAwLCByb2xsTW9kZSA9IG51bGwsIGhpZGVEaWNlID0gZmFsc2UpIHtcbiAgICBsZXQgYWx0ZXJuYXRpdmVEaWNlID0gJydcbiAgICBpZiAoZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZSkge1xuICAgICAgaWYgKG1vZGlmIDwgMCkge1xuICAgICAgICBhbHRlcm5hdGl2ZURpY2UgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0ZW5EaWVQZW5hbHR5JylcbiAgICAgIH0gZWxzZSBpZiAobW9kaWYgPiAwKSB7XG4gICAgICAgIGFsdGVybmF0aXZlRGljZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3RlbkRpZUJvbnVzJylcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgcm9sbCA9IGF3YWl0IG5ldyBSb2xsKFxuICAgICAgJzFkdCcgK1xuICAgICAgICAoYWx0ZXJuYXRpdmVEaWNlICE9PSAnJ1xuICAgICAgICAgID8gJysxZG9bJyArIGFsdGVybmF0aXZlRGljZSArICddJ1xuICAgICAgICAgIDogJysxZHQnXG4gICAgICAgICkucmVwZWF0KE1hdGguYWJzKG1vZGlmKSkgK1xuICAgICAgICAnKzFkMTAnXG4gICAgKS5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICB1bml0OiB7XG4gICAgICAgIHRvdGFsOiAwLFxuICAgICAgICByZXN1bHRzOiBbXVxuICAgICAgfSxcbiAgICAgIHRlbnM6IHtcbiAgICAgICAgdG90YWw6IDAsXG4gICAgICAgIHJlc3VsdHM6IFtdXG4gICAgICB9LFxuICAgICAgdG90YWw6IDAsXG4gICAgICByb2xsOiByb2xsXG4gICAgfVxuICAgIGlmIChyb2xsTW9kZSkgcmVzdWx0LnJvbGxNb2RlID0gcm9sbE1vZGVcbiAgICBpZiAoaGlkZURpY2UpIHJlc3VsdC5oaWRlRGljZSA9IGhpZGVEaWNlXG4gICAgZm9yIChjb25zdCBkIG9mIHJvbGwuZGljZSkge1xuICAgICAgaWYgKGQgaW5zdGFuY2VvZiBDT05GSUcuRGljZS50ZXJtcy50KSB7XG4gICAgICAgIHJlc3VsdC50ZW5zLnJlc3VsdHMucHVzaChkLnRvdGFsKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LnVuaXQudG90YWwgPSBkLnRvdGFsID09PSAxMCA/IDAgOiBkLnRvdGFsXG4gICAgICAgIHJlc3VsdC51bml0LnJlc3VsdHMucHVzaChyZXN1bHQudW5pdC50b3RhbClcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG1vZGlmIDwgMCkge1xuICAgICAgcmVzdWx0LnRlbnMudG90YWwgPVxuICAgICAgICByZXN1bHQudW5pdC50b3RhbCA9PT0gMCAmJiByZXN1bHQudGVucy5yZXN1bHRzLmluY2x1ZGVzKDApXG4gICAgICAgICAgPyAxMDBcbiAgICAgICAgICA6IE1hdGgubWF4KC4uLnJlc3VsdC50ZW5zLnJlc3VsdHMpXG4gICAgfSBlbHNlIGlmIChyZXN1bHQudW5pdC50b3RhbCA9PT0gMCkge1xuICAgICAgY29uc3QgZGljZSA9IHJlc3VsdC50ZW5zLnJlc3VsdHMuZmlsdGVyKHQgPT4gdCA+IDApXG4gICAgICByZXN1bHQudGVucy50b3RhbCA9IGRpY2UubGVuZ3RoID09PSAwID8gMTAwIDogTWF0aC5taW4oLi4uZGljZSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0LnRlbnMudG90YWwgPSBNYXRoLm1pbiguLi5yZXN1bHQudGVucy5yZXN1bHRzKVxuICAgIH1cbiAgICByZXN1bHQudG90YWwgPSByZXN1bHQudW5pdC50b3RhbCArIHJlc3VsdC50ZW5zLnRvdGFsXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHNob3dSb2xsRGljZTNkIChyb2xsKSB7XG4gICAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcbiAgICAgIGNvbnN0IHN5bmNEaWNlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3luY0RpY2UzZCcpXG5cbiAgICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgICB3aGlzcGVyOiBudWxsLFxuICAgICAgICBibGluZDogZmFsc2VcbiAgICAgIH1cbiAgICAgIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoY2hhdERhdGEsIGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykpXG5cbiAgICAgIGF3YWl0IGdhbWUuZGljZTNkLnNob3dGb3JSb2xsKFxuICAgICAgICByb2xsLFxuICAgICAgICBnYW1lLnVzZXIsXG4gICAgICAgIHN5bmNEaWNlLFxuICAgICAgICBjaGF0RGF0YS53aGlzcGVyLFxuICAgICAgICBjaGF0RGF0YS5ibGluZFxuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjb21iaW5lZFJvbGwgKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zLnBvb2wgPSBvcHRpb25zLnBvb2wgPz8ge31cbiAgICBvcHRpb25zLnBvb2xbJzAnXSA9IGZhbHNlXG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9wdGlvbnMucG9vbCkubWFwKHYgPT4gcGFyc2VJbnQodiwgMTApKVxuICAgIGxldCBwZW5hbHR5RGljZSA9IE1hdGguYWJzKE1hdGgubWluKDAsIE1hdGgubWluKC4uLmtleXMpKSlcbiAgICBsZXQgYm9udXNEaWNlID0gTWF0aC5tYXgoMCwgTWF0aC5tYXgoLi4ua2V5cykpXG4gICAgY29uc3QgaGFzRFNOID0gZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZVxuXG4gICAgY29uc3QgcG9vbCA9IFtdXG4gICAgcG9vbC5wdXNoKCcxZHQrMWQxMCcpXG5cbiAgICBpZiAocGVuYWx0eURpY2UgPiAwKSB7XG4gICAgICBwb29sLnB1c2goXG4gICAgICAgIChoYXNEU05cbiAgICAgICAgICA/ICcrMWRvWycgKyBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0ZW5EaWVQZW5hbHR5JykgKyAnXSdcbiAgICAgICAgICA6ICcxZHQnXG4gICAgICAgICkucmVwZWF0KE1hdGguYWJzKHBlbmFsdHlEaWNlKSlcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKGJvbnVzRGljZSA+IDApIHtcbiAgICAgIHBvb2wucHVzaChcbiAgICAgICAgKGhhc0RTTlxuICAgICAgICAgID8gJysxZG9bJyArIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3RlbkRpZUJvbnVzJykgKyAnXSdcbiAgICAgICAgICA6ICcxZHQnXG4gICAgICAgICkucmVwZWF0KE1hdGguYWJzKGJvbnVzRGljZSkpXG4gICAgICApXG4gICAgfVxuICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBuZXcgUm9sbChwb29sLmpvaW4oJycpKS5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICBncm91cHM6IHtcbiAgICAgICAgYmFzZURpZTogMCxcbiAgICAgICAgcGVuYWx0eURpY2U6IFtdLFxuICAgICAgICBib251c0RpY2U6IFtdXG4gICAgICB9LFxuICAgICAgdW5pdDogMCxcbiAgICAgIHJvbGw6IHJvbGxcbiAgICB9XG4gICAgbGV0IGJhc2VTZXQgPSBmYWxzZVxuICAgIGZvciAoY29uc3QgZCBvZiByb2xsLmRpY2UpIHtcbiAgICAgIGlmIChkIGluc3RhbmNlb2YgQ09ORklHLkRpY2UudGVybXMudCkge1xuICAgICAgICBpZiAoIWJhc2VTZXQpIHtcbiAgICAgICAgICByZXN1bHQuZ3JvdXBzLmJhc2VEaWUgPSBkLnRvdGFsXG4gICAgICAgICAgYmFzZVNldCA9IHRydWVcbiAgICAgICAgfSBlbHNlIGlmIChwZW5hbHR5RGljZSA+IDApIHtcbiAgICAgICAgICByZXN1bHQuZ3JvdXBzLnBlbmFsdHlEaWNlLnB1c2goZC50b3RhbClcbiAgICAgICAgICBwZW5hbHR5RGljZS0tXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0Lmdyb3Vwcy5ib251c0RpY2UucHVzaChkLnRvdGFsKVxuICAgICAgICAgIGJvbnVzRGljZS0tXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC51bml0ID0gZC50b3RhbCA9PT0gMTAgPyAwIDogZC50b3RhbFxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG91dHB1dCA9IHt9XG5cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvcHRpb25zLnBvb2wpIHtcbiAgICAgIG91dHB1dFtrZXldID0ge1xuICAgICAgICB1bml0OiB7XG4gICAgICAgICAgdG90YWw6IHJlc3VsdC51bml0LFxuICAgICAgICAgIHJlc3VsdHM6IFtyZXN1bHQudW5pdF1cbiAgICAgICAgfSxcbiAgICAgICAgdGVuczoge1xuICAgICAgICAgIHRvdGFsOiAwLFxuICAgICAgICAgIHJlc3VsdHM6IFtdXG4gICAgICAgIH0sXG4gICAgICAgIHRvdGFsOiAwLFxuICAgICAgICByb2xsOiByb2xsXG4gICAgICB9XG4gICAgICBjb25zdCBtb2RpZiA9IHBhcnNlSW50KGtleSwgMTApXG4gICAgICBsZXQgbW9kaWZpZXIgPSBtb2RpZlxuICAgICAgb3V0cHV0W2tleV0udGVucy5yZXN1bHRzLnB1c2gocmVzdWx0Lmdyb3Vwcy5iYXNlRGllKVxuICAgICAgZm9yIChjb25zdCBvZmZzZXQgPSBNYXRoLmFicyhtb2RpZmllcik7IG1vZGlmaWVyIDwgMDsgbW9kaWZpZXIrKykge1xuICAgICAgICBvdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMucHVzaChcbiAgICAgICAgICByZXN1bHQuZ3JvdXBzLnBlbmFsdHlEaWNlW21vZGlmaWVyICsgb2Zmc2V0XVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IG9mZnNldCA9IG1vZGlmaWVyOyBtb2RpZmllciA+IDA7IG1vZGlmaWVyLS0pIHtcbiAgICAgICAgb3V0cHV0W2tleV0udGVucy5yZXN1bHRzLnB1c2goXG4gICAgICAgICAgcmVzdWx0Lmdyb3Vwcy5ib251c0RpY2VbTWF0aC5hYnMobW9kaWZpZXIgLSBvZmZzZXQpXVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAobW9kaWYgPCAwKSB7XG4gICAgICAgIG91dHB1dFtrZXldLnRlbnMudG90YWwgPVxuICAgICAgICAgIG91dHB1dFtrZXldLnVuaXQudG90YWwgPT09IDAgJiYgb3V0cHV0W2tleV0udGVucy5yZXN1bHRzLmluY2x1ZGVzKDApXG4gICAgICAgICAgICA/IDEwMFxuICAgICAgICAgICAgOiBNYXRoLm1heCguLi5vdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMpXG4gICAgICB9IGVsc2UgaWYgKG91dHB1dFtrZXldLnVuaXQudG90YWwgPT09IDApIHtcbiAgICAgICAgY29uc3QgZGljZSA9IG91dHB1dFtrZXldLnRlbnMucmVzdWx0cy5maWx0ZXIodCA9PiB0ID4gMClcbiAgICAgICAgb3V0cHV0W2tleV0udGVucy50b3RhbCA9IGRpY2UubGVuZ3RoID09PSAwID8gMTAwIDogTWF0aC5taW4oLi4uZGljZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG91dHB1dFtrZXldLnRlbnMudG90YWwgPSBNYXRoLm1pbiguLi5vdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMpXG4gICAgICB9XG4gICAgICBvdXRwdXRba2V5XS50b3RhbCA9IG91dHB1dFtrZXldLnVuaXQudG90YWwgKyBvdXRwdXRba2V5XS50ZW5zLnRvdGFsXG4gICAgfVxuICAgIHJldHVybiBvdXRwdXRcbiAgfVxufVxuIiwiLy8gTmFtZXNwYWNlIENPQzcgQ29uZmlndXJhdGlvbiBWYWx1ZXNcbmV4cG9ydCBjb25zdCBDT0M3ID0ge31cblxuLy8gQ3VzdG9tIGNoYXRNZXNzYWdlXG4vLyBDT05GSUcuQ2hhdE1lc3NhZ2UudGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NoYXQtbWVzc2FnZS5odG1sJztcblxuLyoqXG4gKiBUaGUgc2V0IG9mIEVyYXMgdXNlZCB3aXRoaW4gdGhlIHN5c3RlbVxuICogQHR5cGUge09iamVjdH1cbiAqL1xuQ09DNy5lcmFzID0ge1xuICBudmN0OiAnQ29DNy5FcmFOdmN0JyxcbiAgZHJrYTogJ0NvQzcuRXJhRHJrYScsXG4gIGRkdHM6ICdDb0M3LkVyYURkdHMnLFxuICBnbGl0OiAnQ29DNy5FcmFHbGl0JyxcbiAgMTkyMDogJ0NvQzcuRXJhMTkyMCcsXG4gIHB1bHA6ICdDb0M3LkVyYVB1bHAnLFxuICBtZHJuOiAnQ29DNy5FcmFNZHJuJ1xufVxuXG5DT0M3LmNoYXJhY3RlcmlzdGljcyA9IHtcbiAgc3RyOiAnQ29DNy5DaGFyYWNTdHInLFxuICBjb246ICdDb0M3LkNoYXJhY0NvbicsXG4gIHNpejogJ0NvQzcuQ2hhcmFjU2l6JyxcbiAgZGV4OiAnQ29DNy5DaGFyYWNEZXgnLFxuICBhcHA6ICdDb0M3LkNoYXJhY0FwcCcsXG4gIGludDogJ0NvQzcuQ2hhcmFjSW50JyxcbiAgcG93OiAnQ29DNy5DaGFyYWNQb3cnLFxuICBlZHU6ICdDb0M3LkNoYXJhY0VkdSdcbn1cblxuLyoqXG4gKiBUaGUgc2V0IG9mIFNraWxscyBhdHRyaWJ1dGVzIHVzZWQgd2l0aGluIHRoZSBzeXN0ZW1cbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbkNPQzcuc2tpbGxQcm9wZXJ0aWVzID0ge1xuICBub2FkanVzdG1lbnRzOiAnQ29DNy5Ta2lsbE5vQWRqdXN0bWVudHMnLFxuICBub3hwZ2FpbjogJ0NvQzcuU2tpbGxOb1hwR2FpbicsXG4gIHNwZWNpYWw6ICdDb0M3LlNraWxsU3BlY2lhbCcsXG4gIHJhcml0eTogJ0NvQzcuU2tpbGxSYXJpdHknLFxuICBwdXNoOiAnQ29DNy5Ta2lsbFB1c2gnLFxuICBjb21iYXQ6ICdDb0M3LlNraWxsQ29tYmF0JyxcbiAgZmlnaHRpbmc6ICdDb0M3LlNraWxsRmlnaHRpbmcnLFxuICBmaXJlYXJtOiAnQ29DNy5Ta2lsbEZpcmVhcm0nXG59XG5cbkNPQzcud2VhcG9uUHJvcGVydGllcyA9IHtcbiAgbWVsZWU6ICdDb0M3LldlYXBvbi5Qcm9wZXJ0eS5NZWxlZScsXG4gIHJuZ2Q6ICdDb0M3LldlYXBvblJuZ2QnLFxuICBtbnZyOiAnQ29DNy5XZWFwb25Qcm9wZXJ5TWFuZXV2ZXInLFxuICB0aHJvd246ICdDb0M3LldlYXBvbi5Qcm9wZXJ0eS5UaHJvd24nLFxuICBzaG90Z3VuOiAnQ29DNy5XZWFwb24uUHJvcGVydHkuU2hvdGd1bicsXG4gIGRicmw6ICdDb0M3LldlYXBvbkRicmwnLFxuICBpbXBsOiAnQ29DNy5XZWFwb25JbXBsJyxcbiAgYnJzdDogJ0NvQzcuV2VhcG9uQnJzdCcsXG4gIGF1dG86ICdDb0M3LldlYXBvbkF1dG8nLFxuICBhaGRiOiAnQ29DNy5XZWFwb25BaGRiJyxcbiAgYWRkYjogJ0NvQzcuV2VhcG9uQWRkYicsXG4gIHNsbnQ6ICdDb0M3LldlYXBvblNsbnQnLFxuICBzcGNsOiAnQ29DNy5XZWFwb25TcGNsJyxcbiAgbW9udDogJ0NvQzcuV2VhcG9uTW9udCcsXG4gIGJsc3Q6ICdDb0M3LldlYXBvbkJsc3QnLFxuICBzdHVuOiAnQ29DNy5XZWFwb25TdHVuJyxcbiAgcmFyZTogJ0NvQzcuV2VhcG9uUmFyZScsXG4gIGJ1cm46ICdDb0M3LldlYXBvbi5Qcm9wZXJ0eS5CdXJuJ1xufVxuXG5DT0M3LnNwZWxsUHJvcGVydGllcyA9IHtcbiAgY2FsbDogJ0NvQzcuQ2FsbFNwZWxsJyxcbiAgZGlzbWlzczogJ0NvQzcuRGlzbWlzc1NwZWxsJyxcbiAgY29udGFjdDogJ0NvQzcuQ29udGFjdFNwZWxsJyxcbiAgc3VtbW9uOiAnQ29DNy5TdW1tb25TcGVsbCcsXG4gIGJpbmQ6ICdDb0M3LkJpbmRTcGVsbCcsXG4gIGVuY2hhbnRtZW50OiAnQ29DNy5FbmNoYW50bWVudFNwZWxsJyxcbiAgZ2F0ZTogJ0NvQzcuR2F0ZVNwZWxsJyxcbiAgY29tYmF0OiAnQ29DNy5Db21iYXRTcGVsbCdcbn1cblxuQ09DNy5ib29rVHlwZSA9IHtcbiAgbXl0aG9zOiAnQ29DNy5NeXRob3NCb29rJyxcbiAgb2NjdWx0OiAnQ29DNy5PY2N1bHRCb29rJyxcbiAgb3RoZXI6ICdDb0M3Lk90aGVyJ1xufVxuXG5DT0M3LnRhbGVudFR5cGUgPSB7XG4gIHBoeXNpY2FsOiAnQ29DNy5QaHlzaWNhbFRhbGVudCcsXG4gIG1lbnRhbDogJ0NvQzcuTWVudGFsVGFsZW50JyxcbiAgY29tYmF0OiAnQ29DNy5Db21iYXRUYWxlbnQnLFxuICBtaXNjZWxsYW5lb3VzOiAnQ29DNy5NaXNjZWxsYW5lb3VzVGFsZW50JyxcbiAgYmFzaWM6ICdDb0M3LkJhc2ljVGFsZW50JyxcbiAgaW5zYW5lOiAnQ29DNy5JbnNhbmVUYWxlbnQnLFxuICBvdGhlcjogJ0NvQzcuT3RoZXJUYWxlbnQnXG59XG5cbkNPQzcuc3RhdHVzVHlwZSA9IHtcbiAgbWFuaWE6ICdDb0M3Lk1hbmlhJyxcbiAgcGhvYmlhOiAnQ29DNy5QaG9iaWEnXG59XG5cbkNPQzcub2NjdXBhdGlvblByb3BlcnRpZXMgPSB7XG4gIGNsYXNzaWM6ICdDb0M3LkNsYXNzaWMnLFxuICBsb3ZlY3JhZnRpYW46ICdDb0M3LkxvdmVjcmFmdGlhbicsXG4gIG1vZGVybjogJ0NvQzcuTW9kZXJuJyxcbiAgcHVscDogJ0NvQzcuUHVscCdcbn1cblxuQ09DNy5mb3JtdWxhID0ge31cblxuQ09DNy5mb3JtdWxhLmFjdG9yID0ge1xuICAnQFNUUic6ICd0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Muc3RyLnZhbHVlJyxcbiAgJ0BDT04nOiAndGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmNvbi52YWx1ZScsXG4gICdAU0laJzogJ3RoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUnLFxuICAnQERFWCc6ICd0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlJyxcbiAgJ0BBUFAnOiAndGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmFwcC52YWx1ZScsXG4gICdASU5UJzogJ3RoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5pbnQudmFsdWUnLFxuICAnQFBPVyc6ICd0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlJyxcbiAgJ0BFRFUnOiAndGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmVkdS52YWx1ZSdcbn1cblxuQ09DNy5mb3JtdWxhLmFjdG9yc2hlZXQgPSB7XG4gICdAU1RSJzogJ3RoaXMuYWN0b3IuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUnLFxuICAnQENPTic6ICd0aGlzLmFjdG9yLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuY29uLnZhbHVlJyxcbiAgJ0BTSVonOiAndGhpcy5hY3Rvci5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZScsXG4gICdAREVYJzogJ3RoaXMuYWN0b3IuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUnLFxuICAnQEFQUCc6ICd0aGlzLmFjdG9yLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuYXBwLnZhbHVlJyxcbiAgJ0BJTlQnOiAndGhpcy5hY3Rvci5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmludC52YWx1ZScsXG4gICdAUE9XJzogJ3RoaXMuYWN0b3IuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUnLFxuICAnQEVEVSc6ICd0aGlzLmFjdG9yLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuZWR1LnZhbHVlJ1xufVxuXG5DT0M3LnN0YXR1cyA9IHtcbiAgdGVtcG9JbnNhbmU6ICd0ZW1wb0luc2FuZScsXG4gIGluZGVmSW5zYW5lOiAnaW5kZWZJbnNhbmUnLFxuICB1bmNvbnNjaW91czogJ3VuY29uc2Npb3VzJyxcbiAgY3JpdGljYWxXb3VuZHM6ICdjcml0aWNhbFdvdW5kcycsXG4gIGR5aW5nOiAnZHlpbmcnLFxuICBwcm9uZTogJ3Byb25lJyxcbiAgZGVhZDogJ2RlYWQnXG59XG5cbkNPQzcubmV3Qm9va05hbWUgPSAnQ29DNy5OZXdCb29rTmFtZSdcbkNPQzcubmV3U2tpbGxOYW1lID0gJ0NvQzcuTmV3U2tpbGxOYW1lJ1xuQ09DNy5uZXdTcGVsbE5hbWUgPSAnQ29DNy5OZXdTcGVsbE5hbWUnXG5DT0M3Lm5ld0l0ZW1OYW1lID0gJ0NvQzcuTmV3SXRlbU5hbWUnXG5DT0M3Lm5ld1dlYXBvbk5hbWUgPSAnQ29DNy5OZXdXZWFwb25OYW1lJ1xuXG5DT0M3LmNyZWF0dXJlRmlnaHRpbmdTa2lsbCA9ICdDb0M3LmNyZWF0dXJlRmlnaHRpbmdTa2lsbCdcblxuQ09DNy5kb2RnZVNraWxsTmFtZSA9ICdDb0M3LkRvZGdlU2tpbGxOYW1lJ1xuQ09DNy5jcmVkaXRSYXRpbmdTa2lsbE5hbWUgPSAnQ29DNy5DcmVkaXRSYXRpbmdTa2lsbE5hbWUnXG5DT0M3LkN0aHVsaHVNeXRob3NOYW1lID0gJ0NvQzcuQ3RodWxodU15dGhvc05hbWUnXG5DT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lID0gJ0NvQzcuRmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUnXG5DT0M3LmZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUgPSAnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJ1xuXG5DT0M3LmNvbWJhdENhcmRzID0ge1xuICBmaWdodEJhY2s6ICdDb0M3LkZpZ2h0QmFjaycsXG4gIGRvZGdlOiAnQ29DNy5Eb2RnZScsXG4gIG1hbmV1dmVyOiAnQ29DNy5NYW5ldXZlcicsXG4gIG5vUmVzcG9uc2U6ICdDb0M3Lk5vUmVzcG9uc2UnXG59XG4iLCIvKiBnbG9iYWwgY2FudmFzLCBDaGF0TWVzc2FnZSwgQ09OU1QsIGR1cGxpY2F0ZSwgZ2FtZSwgUmF5LCBUb2tlbiwgdWkgKi9cblxuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5cbi8qKlxuICogUmV0dXJuIDxhPiBlbGVtZW50IG9mIGEgcm9sbCBpbnN0YW5jZS4gZm91bmRyeS5qcyByZWY6VGV4dEVkaXRvci5fY3JlYXRlSW5saW5lUm9sbFxuICogQHBhcmFtIHtSb2xsfSByb2xsICAgICAgVGhlIHJvbGwgb2JqZWN0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVJbmxpbmVSb2xsIChyb2xsKSB7XG4gIGNvbnN0IGRhdGEgPSB7XG4gICAgY2xzOiBbJ2lubGluZS1yb2xsJ10sXG4gICAgZGF0YXNldDoge31cbiAgfVxuXG4gIHRyeSB7XG4gICAgZGF0YS5jbHMucHVzaCgnaW5saW5lLXJlc3VsdCcpXG4gICAgZGF0YS5yZXN1bHQgPSByb2xsLnRvdGFsXG4gICAgZGF0YS50aXRsZSA9IHJvbGwuZm9ybXVsYVxuICAgIGRhdGEuZGF0YXNldC5yb2xsID0gZXNjYXBlKEpTT04uc3RyaW5naWZ5KHJvbGwpKVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgLy8gQ29uc3RydWN0IGFuZCByZXR1cm4gdGhlIGZvcm1lZCBsaW5rIGVsZW1lbnRcbiAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKVxuICBhLmNsYXNzTGlzdC5hZGQoLi4uZGF0YS5jbHMpXG4gIGEudGl0bGUgPSBkYXRhLnRpdGxlXG4gIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuZGF0YXNldCkpIHtcbiAgICBhLmRhdGFzZXRba10gPSB2XG4gIH1cbiAgYS5pbm5lckhUTUwgPSBgPGkgY2xhc3M9XCJmYXMgZmEtZGljZS1kMjBcIj48L2k+ICR7ZGF0YS5yZXN1bHR9YFxuICByZXR1cm4gYVxufVxuXG4vKipcbiAqIEZ1bmN0aW9uIHVzZWQgZm9yIEpTT04uc3RyaW5naWZ5IHJlcGxhY2VyLlxuICogRXhjbHVkZSBhbnkga2V5IHN0YXJ0aW5nIHdpdGggX1xuICogQHBhcmFtIHsqfSBrZXkgICAgIFRoZSBvYmplY3QncyBwcm9wZXJ0eSBLZXlcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgICBUaGUgYXNzb2NpYXRlZCB2YWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXhjbHVkZV8gKGtleSwgdmFsdWUpIHtcbiAgLy8gY29udmVydCBSZWdFeHAgdG8gc3RyaW5nXG4gIGlmIChrZXkuc3RhcnRzV2l0aCgnXycpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZCAvLyByZW1vdmUgZnJvbSByZXN1bHRcbiAgfVxuICByZXR1cm4gdmFsdWUgLy8gcmV0dXJuIGFzIGlzXG59XG5cbi8qKlxuICogRnVuY3Rpb24gdXNlZCBmb3IgSlNPTi5zdHJpbmdpZnkgcmVwbGFjZXIuXG4gKiBFeGNsdWRlIGFueSBrZXkgc3RhcnRpbmcgd2l0aCBfX1xuICogQHBhcmFtIHsqfSBrZXkgICAgIFRoZSBvYmplY3QncyBwcm9wZXJ0eSBLZXlcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgICBUaGUgYXNzb2NpYXRlZCB2YWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXhjbHVkZV9fIChrZXksIHZhbHVlKSB7XG4gIC8vIGNvbnZlcnQgUmVnRXhwIHRvIHN0cmluZ1xuICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ19fJykpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkIC8vIHJlbW92ZSBmcm9tIHJlc3VsdFxuICB9XG4gIHJldHVybiB2YWx1ZSAvLyByZXR1cm4gYXMgaXNcbn1cblxuLyoqXG4gKiBSZXR1cm4gdHJ1ZSBpcyBDVFJMIGtleSBpcyBwcmVzc2VkXG4gKiBVc2VkIGZvciBNQUMgY29tcGF0LlxuICogQHBhcmFtIHtTLkV2ZW50fSBldmVudFxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQ3RybEtleSAoZXZlbnQpIHtcbiAgcmV0dXJuIChcbiAgICBldmVudC5tZXRhS2V5IHx8XG4gICAgZXZlbnQuY3RybEtleSB8fFxuICAgIGV2ZW50LmtleUNvZGUgPT09IDkxIHx8XG4gICAgZXZlbnQua2V5Q29kZSA9PT0gMjI0XG4gIClcbn1cblxuZXhwb3J0IGNsYXNzIGNoYXRIZWxwZXIge1xuICBzdGF0aWMgaHlwaGVuVG9DYW1lbENhc2UgKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvLShbYS16XSkvZywgZnVuY3Rpb24gKHN0cmluZykge1xuICAgICAgcmV0dXJuIHN0cmluZ1sxXS50b1VwcGVyQ2FzZSgpXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVNZXNzYWdlICh0aXRsZSwgbWVzc2FnZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgbWVzc2FnZURhdGEgPSB7fVxuICAgIG1lc3NhZ2VEYXRhLmZsYXZvciA9IHRpdGxlXG4gICAgbWVzc2FnZURhdGEuc3BlYWtlciA9IG9wdGlvbnMuc3BlYWtlciB8fCBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICBpZiAob3B0aW9ucy53aGlzcGVyKSB7XG4gICAgICBtZXNzYWdlRGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLldISVNQRVJcbiAgICAgIG1lc3NhZ2VEYXRhLndoaXNwZXIgPSBvcHRpb25zLndoaXNwZXJcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnJvbGwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBtZXNzYWdlRGF0YS5yb2xsID0gb3B0aW9ucy5yb2xsXG4gICAgICBtZXNzYWdlRGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLlJPTExcbiAgICAgIG1lc3NhZ2VEYXRhLnJvbGxNb2RlID0gQ09OU1QuRElDRV9ST0xMX01PREVTLlNFTEZcbiAgICB9XG4gICAgbWVzc2FnZURhdGEudXNlciA9IGdhbWUudXNlci5pZFxuICAgIG1lc3NhZ2VEYXRhLmNvbnRlbnQgPSBtZXNzYWdlXG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUobWVzc2FnZURhdGEpLnRoZW4obXNnID0+IHtcbiAgICAgIHJldHVybiBtc2dcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGNhbWVsQ2FzZVRvSHlwaGVuIChzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLyhbQS1aXSkvZywgZnVuY3Rpb24gKHN0cmluZykge1xuICAgICAgcmV0dXJuICctJyArIHN0cmluZy50b0xvd2VyQ2FzZSgpXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvckZyb21LZXkgKGtleSkge1xuICAgIGlmICgha2V5KSByZXR1cm4gbnVsbFxuICAgIC8vIENhc2UgMSAtIGEgc3ludGhldGljIGFjdG9yIGZyb20gYSBUb2tlblxuICAgIGlmIChrZXkuaW5jbHVkZXMoJy4nKSkge1xuICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSBrZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkoa2V5KVxuICAgICAgcmV0dXJuIHRva2VuPy5hY3RvclxuICAgIH1cblxuICAgIC8vIENhc2UgMiAtIHVzZSBBY3RvciBJRCBkaXJlY3RvcnlcbiAgICByZXR1cm4gZ2FtZS5hY3RvcnMuZ2V0KGtleSkgfHwgbnVsbFxuICB9XG5cbiAgc3RhdGljIGdldFNwZWFrZXJGcm9tS2V5IChhY3RvcktleSkge1xuICAgIGNvbnN0IHNwZWFrZXIgPSB7fVxuICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIGlmIChhY3RvcktleS5pbmNsdWRlcygnLicpKSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSBhY3RvcktleS5zcGxpdCgnLicpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgc3BlYWtlci50b2tlbiA9IHRva2VuSWRcbiAgICAgIHNwZWFrZXIuc2NlbmUgPSBzY2VuZUlkXG4gICAgICBpZiAoYWN0b3IudG9rZW4/Lm5hbWUpIHNwZWFrZXIuYWxpYXMgPSBhY3Rvci50b2tlbi5uYW1lXG4gICAgICBzcGVha2VyLmFjdG9yID0gYWN0b3IuaWRcbiAgICB9IGVsc2Uge1xuICAgICAgc3BlYWtlci5hY3RvciA9IGFjdG9yS2V5XG4gICAgICBzcGVha2VyLmFsaWFzID0gYWN0b3IubmFtZVxuICAgIH1cbiAgICByZXR1cm4gc3BlYWtlclxuICB9XG5cbiAgc3RhdGljIGF0dGFjaE9iamVjdFRvRWxlbWVudCAob2JqZWN0LCBlbGVtZW50LCBvYmplY3ROYW1lID0gJycpIHtcbiAgICBmb3IgKGNvbnN0IHByb3Agb2YgT2JqZWN0LmtleXMob2JqZWN0KSkge1xuICAgICAgaWYgKCFwcm9wLnN0YXJ0c1dpdGgoJ18nKSkge1xuICAgICAgICBpZiAodHlwZW9mIG9iamVjdFtwcm9wXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBjaGF0SGVscGVyLmF0dGFjaE9iamVjdFRvRWxlbWVudChcbiAgICAgICAgICAgIG9iamVjdFtwcm9wXSxcbiAgICAgICAgICAgIGVsZW1lbnQsXG4gICAgICAgICAgICBgJHtvYmplY3ROYW1lfToke3Byb3B9OmBcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWxlbWVudC5kYXRhc2V0W2Ake29iamVjdE5hbWV9JHtwcm9wfWBdID0gb2JqZWN0W3Byb3BdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0T2JqZWN0RnJvbUVsZW1lbnQgKG9iamVjdCwgZWxlbWVudCkge1xuICAgIGZ1bmN0aW9uIGRlc2VyaWFsaXplIChvYmosIGtleSwgdmFsdWUpIHtcbiAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgnOicpKSB7XG4gICAgICAgIGNvbnN0IHMgPSBrZXkuc2xpY2UoMSlcbiAgICAgICAgY29uc3Qgb2JqUHJvcCA9IHMuc2xpY2Uocy5pbmRleE9mKCc6JykgKyAxKVxuICAgICAgICBjb25zdCBvYmpOYW1lID0gcy5zdWJzdHJpbmcoMCwgcy5pbmRleE9mKCc6JykpXG4gICAgICAgIGlmICh0eXBlb2Ygb2JqW29iak5hbWVdID09PSAndW5kZWZpbmVkJykgb2JqW29iak5hbWVdID0ge31cbiAgICAgICAgZGVzZXJpYWxpemUob2JqW29iak5hbWVdLCBvYmpQcm9wLCB2YWx1ZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gJ3RydWUnKSBvYmpba2V5XSA9IHRydWVcbiAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09ICdmYWxzZScpIG9ialtrZXldID0gZmFsc2VcbiAgICAgICAgZWxzZSBpZiAoTnVtYmVyKHZhbHVlKS50b1N0cmluZygpID09PSB2YWx1ZSkgb2JqW2tleV0gPSBOdW1iZXIodmFsdWUpXG4gICAgICAgIGVsc2Ugb2JqW2tleV0gPSB2YWx1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZWxlbWVudCB8fCAhb2JqZWN0KSByZXR1cm5cbiAgICBmb3IgKGNvbnN0IHByb3Agb2YgT2JqZWN0LmtleXMoZWxlbWVudC5kYXRhc2V0KSkge1xuICAgICAgaWYgKHByb3AgPT09ICd0ZW1wbGF0ZScpIHJldHVyblxuICAgICAgZGVzZXJpYWxpemUob2JqZWN0LCBwcm9wLCBlbGVtZW50LmRhdGFzZXRbcHJvcF0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldFRva2VuRnJvbUtleSAoa2V5KSB7XG4gICAgaWYgKCFrZXkpIHJldHVybiBudWxsXG4gICAgaWYgKGtleS5pbmNsdWRlcygnLicpKSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSBrZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgY29uc3QgdG9rZW5Eb2MgPSBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0/LnRva2VuXG4gICAgICAgIHJldHVybiB0b2tlbkRvYy5vYmplY3QgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbkRhdGEgPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXG4gICAgICAgIGlmICghdG9rZW5EYXRhKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbiA9IG5ldyBUb2tlbih0b2tlbkRhdGEpXG4gICAgICAgIGlmICghdG9rZW4uc2NlbmUpIHRva2VuLnNjZW5lID0gZHVwbGljYXRlKHNjZW5lLmRhdGEpXG4gICAgICAgIHJldHVybiB0b2tlblxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChrZXkpXG4gICAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvclRva2VuKGFjdG9yKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvclRva2VuIChhY3Rvcikge1xuICAgIGlmICghYWN0b3IpIHJldHVybiBudWxsXG4gICAgLyoqICogTU9ESUYgMC44LnggKioqL1xuICAgIHJldHVybiBhY3Rvci50b2tlbiB8fCB7IGRhdGE6IGFjdG9yLmRhdGEudG9rZW4gfVxuICAgIC8qKioqKioqKioqKioqKioqKioqL1xuICAgIC8vIC8vIENhc2UgMCAtIEFjdG9yIGlzIGEgdG9rZW4gKHN5bnRoZXRpYyBhY3RvciksIHJldHVybiB0aGF0IHRva2VuLlxuICAgIC8vIGlmKGFjdG9yLmlzVG9rZW4pIHJldHVybiBhY3Rvci50b2tlbjtcbiAgICAvLyBlbHNle1xuICAgIC8vICAvLyBDYXNlIDEgLSBBY3RvciBpcyBub3QgYSB0b2tlbiwgZmluZCBpZiBhIHRva2VuIGV4aXN0IGZvciB0aGF0IGFjdG9yLlxuICAgIC8vICBjb25zdCBhY3RvclRva2VucyA9IGFjdG9yLmdldEFjdGl2ZVRva2VucygpO1xuICAgIC8vICBpZiggYWN0b3JUb2tlbnMubGVuZ3RoKXtcbiAgICAvLyAgICAvLyBDYXNlIDEuMSAtIElmIGhlIGhhcyBvbmx5IG9uZSBUb2tlbiByZXR1cm4gaXQuXG4gICAgLy8gICAgaWYoIDEgPT09IGFjdG9yVG9rZW5zLmxlbmd0aCkgcmV0dXJuIGFjdG9yVG9rZW5zWzBdO1xuXG4gICAgLy8gICAgLy8gQ2FzZSAxLjIgLSBBY3RvciBoYXMgbXVsdGlwbGUgdG9rZW5zLCBmaW5kIGlmIG9uZSBvZiB0aGVtIGlzIHRoZSBjb250cm9sbGVkIHRva2VuLlxuICAgIC8vICAgIGNvbnN0IGNvbnRyb2xsZWRUb2tlbnMgPSBhY3RvclRva2Vucy5maWx0ZXIoIHQgPT4gdC5fY29udHJvbGxlZCk7XG4gICAgLy8gICAgaWYoIGNvbnRyb2xsZWRUb2tlbnMubGVuZ3RoKXtcbiAgICAvLyAgICAgIC8vIFJldHVybiB0aGUgMXN0IGNvbnRyb2xsZWQgdG9rZW4sIHJpc2UgYSB3YXJuaW5nIGlmIGhlIGhhcyBtdWx0aXBsZSBjb250cm9sbGVkIHRva2Vucy5cbiAgICAvLyAgICAgIGlmKCB2ZXJib3NlICYmIGNvbnRyb2xsZWRUb2tlbnMubGVuZ3RoID4gMSkgdWkubm90aWZpY2F0aW9ucy53YXJuKCBgQWN0b3IgJHthY3Rvci5uYW1lfSBoYXMgJHtjb250cm9sbGVkVG9rZW5zLmxlbmd0aH0gY29udHJvbGxlZCB0b2tlbnMuIFVzaW5nIHRoZSBmaXJzdCBmb3VuZGApO1xuICAgIC8vICAgICAgcmV0dXJuIGNvbnRyb2xsZWRUb2tlbnNbMF07XG4gICAgLy8gICAgfVxuXG4gICAgLy8gICAgLy8gQ2FzZSAxLjMgYWN0b3IgZG9lc24ndCBoYXZlIGFueSBhY3RpdmUgdG9rZW4uIFJldHVybiB0aGUgZmlyc3QgdmFsaWQgdG9rZW4gZm9yIHRoYXQgYWN0b3IgYW5kIHJhaXNlIGEgd2FybmluZy5cbiAgICAvLyAgICBpZiggdmVyYm9zZSkgdWkubm90aWZpY2F0aW9ucy53YXJuKCBgQWN0b3IgJHthY3Rvci5uYW1lfSBkb2Vzbid0IGhhdmUgYW55IGNvbnRyb2xsZWQgdG9rZW4uIFVzaW5nIGZpcnN0IHRva2VuIGZvdW5kLmApO1xuICAgIC8vICAgIHJldHVybiBhY3RvclRva2Vuc1swXTtcbiAgICAvLyAgfVxuXG4gICAgLy8gIGlmKCB2ZXJib3NlKSB1aS5ub3RpZmljYXRpb25zLmVycm9yKCBgQ291bGQgbm90IGZpbiBhbnkgdG9rZW4gZm9yICR7YWN0b3IubmFtZX0uYCk7XG4gICAgLy8gIHJldHVybiBudWxsO1xuICAgIC8vIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvckltZ0Zyb21LZXkgKGFjdG9yS2V5KSB7XG4gICAgaWYgKCFhY3RvcktleSkgcmV0dXJuIG51bGxcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlVG9rZW4nKSkge1xuICAgICAgLy8gVHJ5IHRvIGZpbmQgYSB0b2tlbi5cbiAgICAgIGNvbnN0IHRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkoYWN0b3JLZXkpXG4gICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgLy8gRm91bmRyeSBWVFQgdjlcbiAgICAgICAgaWYgKHRva2VuLmRhdGEuaW1nKSB7XG4gICAgICAgICAgaWYgKHRva2VuLmRhdGEuaW1nLmluZGV4T2YoJyonKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiB0b2tlbi5kYXRhLmltZ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBGb3VuZHJ5IFZUVCB2MTBcbiAgICAgICAgaWYgKHRva2VuLmRhdGEudGV4dHVyZS5zcmMpIHtcbiAgICAgICAgICBpZiAodG9rZW4uZGF0YS50ZXh0dXJlLnNyYy5pbmRleE9mKCcqJykgPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gdG9rZW4uZGF0YS50ZXh0dXJlLnNyY1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlVG9rZW4nKSkge1xuICAgICAgLy8gaWYgbm8gdG9rZW4gZm91bmQgZm9yIHRoYXQgYWN0b3IgcmV0dXJuIHRoZSBwcm90b3R5cGUgdG9rZW4gaW1hZ2UuXG4gICAgICBpZiAoYWN0b3IuZGF0YS50b2tlbikge1xuICAgICAgICAvLyBGb3VuZHJ5IFZUVCB2OVxuICAgICAgICBpZiAoYWN0b3IuZGF0YS50b2tlbi5pbWcpIHtcbiAgICAgICAgICBpZiAoYWN0b3IuZGF0YS50b2tlbi5pbWcuaW5kZXhPZignKicpID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIGFjdG9yLmRhdGEudG9rZW4uaW1nXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEZvdW5kcnkgVlRUIHYxMFxuICAgICAgICBpZiAoYWN0b3IuZGF0YS50b2tlbi50ZXh0dXJlLnNyYykge1xuICAgICAgICAgIGlmIChhY3Rvci5kYXRhLnRva2VuLnRleHR1cmUuc3JjPy5pbmRleE9mKCcqJykgPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gYWN0b3IuZGF0YS50b2tlbi50ZXh0dXJlLnNyY1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYWN0b3IuZGF0YS5pbWdcbiAgfVxuXG4gIHN0YXRpYyBnZXREaXN0YW5jZSAoc3RhcnRUb2tlbiwgZW5kVG9rZW4pIHtcbiAgICAvLyBzdGFydFRva2VuLnVwZGF0ZVNvdXJjZSgpO1xuICAgIC8vIGNhbnZhcy5zaWdodC5pbml0aWFsaXplVG9rZW5zKCk7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIGVuZFRva2VuLmNlbnRlciA9PT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBlbmRUb2tlbi5kYXRhLmRvY3VtZW50Py5pZCAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGlmIChzdGFydFRva2VuLnNjZW5lPy5pZCB8fCBmYWxzZSkge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzdGFydFRva2VuLnNjZW5lLmlkKVxuICAgICAgICBpZiAodHlwZW9mIHNjZW5lPy50b2tlbnMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgdG9rZW5zID0gc2NlbmU/LnRva2Vuc1xuICAgICAgICAgICAgLmZpbHRlcih0b2tlbiA9PiB0b2tlbi5hY3Rvci5pZCA9PT0gZW5kVG9rZW4uZGF0YS5kb2N1bWVudC5pZClcbiAgICAgICAgICAgIC5tYXAodG9rZW4gPT4gdG9rZW4ub2JqZWN0KVxuICAgICAgICAgIGlmICh0b2tlbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBlbmRUb2tlbiA9IHRva2Vuc1swXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBsZXQgZGlzdGFuY2UgPSB7XG4gICAgICBncmlkVW5pdDogMCxcbiAgICAgIHZhbHVlOiAwLFxuICAgICAgdW5pdDogY2FudmFzLnNjZW5lLmRhdGEuZ3JpZFVuaXRzXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHR5cGVvZiBzdGFydFRva2VuICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIHN0YXJ0VG9rZW4uY2VudGVyICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIGVuZFRva2VuICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIGVuZFRva2VuLmNlbnRlciAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGNvbnN0IHJheSA9IG5ldyBSYXkoc3RhcnRUb2tlbi5jZW50ZXIsIGVuZFRva2VuLmNlbnRlcilcbiAgICAgIGNvbnN0IHNlZ21lbnQgPSBbeyByYXkgfV1cbiAgICAgIGRpc3RhbmNlID0ge1xuICAgICAgICBncmlkVW5pdDogcmF5LmRpc3RhbmNlIC8gY2FudmFzLnNjZW5lLmRhdGEuZ3JpZCxcbiAgICAgICAgLy8gdmFsdWU6IChyYXkuZGlzdGFuY2UvY2FudmFzLnNjZW5lLmRhdGEuZ3JpZCkqY2FudmFzLnNjZW5lLmRhdGEuZ3JpZERpc3RhbmNlLFxuICAgICAgICB2YWx1ZTogY2FudmFzLmdyaWQubWVhc3VyZURpc3RhbmNlcyhzZWdtZW50LCB7XG4gICAgICAgICAgZ3JpZFNwYWNlczogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZ3JpZFNwYWNlcycpXG4gICAgICAgIH0pWzBdLFxuICAgICAgICB1bml0OiBjYW52YXMuc2NlbmUuZGF0YS5ncmlkVW5pdHNcbiAgICAgIH1cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXN0YW5jZUVsZXZhdGlvbicpKSB7XG4gICAgICAgIGNvbnN0IGVsZXZhdGlvbiA9IE1hdGguYWJzKFxuICAgICAgICAgIChzdGFydFRva2VuLmRhdGEuZWxldmF0aW9uIHx8IDApIC0gKGVuZFRva2VuLmRhdGEuZWxldmF0aW9uIHx8IDApXG4gICAgICAgIClcbiAgICAgICAgZGlzdGFuY2UudmFsdWUgPSBNYXRoLnNxcnQoXG4gICAgICAgICAgZGlzdGFuY2UudmFsdWUgKiBkaXN0YW5jZS52YWx1ZSArIGVsZXZhdGlvbiAqIGVsZXZhdGlvblxuICAgICAgICApXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VEaXN0YW5jZUNhbGN1bGF0aW9uRmFpbHVyZScpXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBkaXN0YW5jZVxuICB9XG5cbiAgc3RhdGljIHRvWWFyZHMgKGRpc3RhbmNlKSB7XG4gICAgc3dpdGNoIChkaXN0YW5jZS51bml0KSB7XG4gICAgICBjYXNlICdmdCc6XG4gICAgICAgIHJldHVybiBkaXN0YW5jZS52YWx1ZSAvIDNcblxuICAgICAgY2FzZSAneWQnOlxuICAgICAgICByZXR1cm4gZGlzdGFuY2UudmFsdWVcblxuICAgICAgY2FzZSAnbSc6XG4gICAgICAgIHJldHVybiBkaXN0YW5jZS52YWx1ZVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZGlzdGFuY2UudmFsdWVcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvQzdSb2xsIHtcbiAgc3RhdGljIGdldEZyb21DYXJkIChjYXJkKSB7XG4gICAgY29uc3Qgcm9sbERpdiA9IGNhcmQucXVlcnlTZWxlY3RvcignZGl2LmRpY2Utcm9sbCcpXG4gICAgaWYgKCFyb2xsRGl2KSByZXR1cm4gbnVsbFxuXG4gICAgY29uc3Qgcm9sbCA9IG5ldyBDb0M3Um9sbCgpXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChyb2xsLCByb2xsRGl2KVxuXG4gICAgcmV0dXJuIHJvbGxcbiAgfVxuXG4gIGdldCByZXN1bHRUeXBlICgpIHtcbiAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IHBhcnNlSW50KHRoaXMuc3VjY2Vzc0xldmVsKVxuICAgIHN3aXRjaCAodGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGU6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkZ1bWJsZScpXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZTpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRmFpbHVyZScpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAodGhpcy5hY3RvcktleSkgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgaXRlbSAoKSB7XG4gICAgaWYgKHRoaXMuaXRlbUlkICYmIHRoaXMuYWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNraWxsICgpIHtcbiAgICBpZiAodGhpcy5za2lsbElkICYmIHRoaXMuYWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLnNraWxsSWQpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHNob3dEaWNlUm9sbCAoKSB7XG4gICAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcbiAgICAgIGNvbnN0IGRpY2VSZXN1bHRzID0gW11cbiAgICAgIGZvciAoY29uc3QgZGllUmVzdWx0IG9mIHRoaXMuZGljZXMudGVucykge1xuICAgICAgICBkaWNlUmVzdWx0cy5wdXNoKGRpZVJlc3VsdC52YWx1ZSA9PT0gMTAwID8gMCA6IGRpZVJlc3VsdC52YWx1ZSAvIDEwKVxuICAgICAgfVxuICAgICAgZGljZVJlc3VsdHMucHVzaCh0aGlzLmRpY2VzLnVuaXQudmFsdWUpXG5cbiAgICAgIGNvbnN0IGRpY2VEYXRhID0ge1xuICAgICAgICBmb3JtdWxhOiBgJHt0aGlzLmRpY2VzLnRlbnMubGVuZ3RofWQxMDArMWQxMGAsXG4gICAgICAgIHJlc3VsdHM6IGRpY2VSZXN1bHRzLFxuICAgICAgICB3aGlzcGVyOiBudWxsLFxuICAgICAgICBibGluZDogZmFsc2VcbiAgICAgIH1cbiAgICAgIGdhbWUuZGljZTNkLnNob3coZGljZURhdGEpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldEZyb21FbGVtZW50IChlbGVtZW50LCBvYmplY3QgPSBudWxsKSB7XG4gICAgaWYgKCFlbGVtZW50KSByZXR1cm5cbiAgICBjb25zdCByb2xsID0gb2JqZWN0IHx8IG5ldyBDb0M3Um9sbCgpXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChyb2xsLCBlbGVtZW50KVxuICAgIHJvbGwuZGljZXMgPSB7XG4gICAgICB0ZW5zOiBbXSxcbiAgICAgIHVuaXQ6IHt9XG4gICAgfVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQoXG4gICAgICByb2xsLmRpY2VzLFxuICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZGljZS1yZXN1bHQnKVxuICAgIClcbiAgICByb2xsLmRpY2VzLmhhc0JvbnVzID0gcm9sbC5kaWNlTW9kaWZpZXIgIT09IDBcbiAgICByb2xsLmRpY2VzLmJvbnVzID0gTWF0aC5hYnMocm9sbC5kaWNlTW9kaWZpZXIpXG4gICAgcm9sbC5kaWNlcy5ib251c1R5cGUgPVxuICAgICAgcm9sbC5kaWNlTW9kaWZpZXIgPCAwXG4gICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EaWNlTW9kaWZpZXJQZW5hbHR5JylcbiAgICAgICAgOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRpY2VNb2RpZmllckJvbnVzJylcbiAgICBjb25zdCB0ZW5EaWNlID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudGVuLWRpY2UnKVxuICAgIGlmICh0ZW5EaWNlKSB7XG4gICAgICBmb3IgKGNvbnN0IGQgb2YgdGVuRGljZS5xdWVyeVNlbGVjdG9yQWxsKCdsaScpKSB7XG4gICAgICAgIGNvbnN0IGRpZSA9IHtcbiAgICAgICAgICBzZWxlY3RlZDogZmFsc2UsXG4gICAgICAgICAgaXNNYXg6IGZhbHNlLFxuICAgICAgICAgIGlzTWluOiBmYWxzZSxcbiAgICAgICAgICB2YWx1ZTogLTFcbiAgICAgICAgfVxuICAgICAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KGRpZSwgZClcbiAgICAgICAgcm9sbC5kaWNlcy50ZW5zLnB1c2goZGllKVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB1bml0RGllID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdC1kaWUnKVxuICAgICAgPyBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0LWRpZScpLnF1ZXJ5U2VsZWN0b3IoJ2xpJylcbiAgICAgIDogbnVsbFxuICAgIHJvbGwuZGljZXMudW5pdC52YWx1ZSA9IHVuaXREaWUgPyBwYXJzZUludCh1bml0RGllLmRhdGFzZXQudmFsdWUpIDogbnVsbFxuXG4gICAgcm9sbC5pbmNyZWFzZVN1Y2Nlc3MgPSBbXVxuICAgIGNvbnN0IGluY3JlYXNlU3VjY2VzcyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmluY3JlYXNlLXN1Y2Nlc3MnKVxuICAgIGlmIChpbmNyZWFzZVN1Y2Nlc3MgJiYgaW5jcmVhc2VTdWNjZXNzLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpKSB7XG4gICAgICBmb3IgKGNvbnN0IGlzbCBvZiBpbmNyZWFzZVN1Y2Nlc3MucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJykpIHtcbiAgICAgICAgY29uc3QgbmV3U3VjY2VzTGV2ZWwgPSB7fVxuICAgICAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KG5ld1N1Y2Nlc0xldmVsLCBpc2wpXG4gICAgICAgIHJvbGwuaW5jcmVhc2VTdWNjZXNzLnB1c2gobmV3U3VjY2VzTGV2ZWwpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHJvbGwubHVja05lZWRlZCkge1xuICAgICAgcm9sbC5sdWNrTmVlZGVkVHh0ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TcGVuZEx1Y2snLCB7XG4gICAgICAgIGx1Y2tOZWVkZWRWYWx1ZTogcm9sbC5sdWNrTmVlZGVkXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAoIW9iamVjdCkgcmV0dXJuIHJvbGxcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2hlY2sgKGNoZWNrKSB7XG4gICAgY29uc3Qgcm9sbCA9IG5ldyBDb0M3Um9sbCgpXG5cbiAgICByb2xsLnJvbGxUeXBlID0gY2hlY2sucm9sbFR5cGVcbiAgICByb2xsLnNpZGUgPSBjaGVjay5zaWRlXG4gICAgcm9sbC5hY3Rpb24gPSBjaGVjay5hY3Rpb25cbiAgICByb2xsLnJlZk1lc3NhZ2VJZCA9IGNoZWNrLnJlZk1lc3NhZ2VJZFxuICAgIHJvbGwucmVmZXJlbmNlTWVzc2FnZUlkID0gY2hlY2sucmVmZXJlbmNlTWVzc2FnZUlkXG5cbiAgICByb2xsLnN1Y2Nlc3NMZXZlbCA9IGNoZWNrLnN1Y2Nlc3NMZXZlbFxuICAgIHJvbGwuZGlmZmljdWx0eSA9IGNoZWNrLmRpZmZpY3VsdHlcbiAgICByb2xsLnNraWxsSWQgPSBjaGVjay5za2lsbCA/IGNoZWNrLnNraWxsLmlkIDogbnVsbFxuICAgIHJvbGwuaXRlbUlkID0gY2hlY2suaXRlbSA/IGNoZWNrLml0ZW0uaWQgOiBudWxsXG4gICAgcm9sbC5kaWNlTW9kID0gY2hlY2suZGljZU1vZGlmaWVyXG4gICAgcm9sbC52YWx1ZSA9IHBhcnNlSW50KGNoZWNrLnJhd1ZhbHVlKVxuICAgIHJvbGwuZnVtYmxlID0gY2hlY2suaXNGdW1ibGVcbiAgICByb2xsLmNyaXRpY2FsID0gY2hlY2suaXNDcml0aWNhbFxuICAgIHJvbGwuY2hhcmFjdGVyaXN0aWMgPSBjaGVjay5jaGFyYWN0ZXJpc3RpYyA/IGNoZWNrLmNoYXJhY3RlcmlzdGljIDogbnVsbFxuICAgIHJvbGwucmVzdWx0ID0gY2hlY2suZGljZS50b3RhbFxuXG4gICAgcm9sbC5hY3RvcktleSA9IGNoZWNrLmFjdG9yLnRva2VuS2V5IC8vIFJFRkFDVE9SSU5HICgyKVxuXG4gICAgaWYgKGNoZWNrLmFjdG9yLmlzVG9rZW4pIHtcbiAgICAgIHJvbGwudG9rZW5JZCA9IGNoZWNrLmFjdG9yLnRva2VuS2V5IC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgcm9sbC5hY3RvcklkID0gbnVsbFxuICAgIH0gZWxzZSB7XG4gICAgICByb2xsLnRva2VuS2V5ID0gbnVsbFxuICAgICAgcm9sbC5hY3RvcklkID0gY2hlY2suYWN0b3IudG9rZW5LZXkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgfVxuXG4gICAgcmV0dXJuIHJvbGxcbiAgfVxuXG4gIHN0YXRpYyBhdHRhY2hDaGVja1RvRWxlbWVudCAoaHRtbEVsZW1lbnQsIGNoZWNrKSB7XG4gICAgY29uc3Qgcm9sbCA9IENvQzdSb2xsLmdldEZyb21DaGVjayhjaGVjaylcbiAgICByb2xsLmF0dGFjaFRvRWxlbWVudChodG1sRWxlbWVudClcblxuICAgIHJldHVybiByb2xsXG4gIH1cblxuICBhdHRhY2hUb0VsZW1lbnQgKGh0bWxFbGVtZW50KSB7XG4gICAgY2hhdEhlbHBlci5hdHRhY2hPYmplY3RUb0VsZW1lbnQodGhpcywgaHRtbEVsZW1lbnQpXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvQzdEYW1hZ2Uge1xuICBzdGF0aWMgZ2V0TWFpbkRpZSAoZGFtYWdlU3RyaW5nKSB7XG4gICAgaWYgKGRhbWFnZVN0cmluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkMjAnKSkgcmV0dXJuICdkMjAnXG4gICAgaWYgKGRhbWFnZVN0cmluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkMTInKSkgcmV0dXJuICdkMTInXG4gICAgaWYgKGRhbWFnZVN0cmluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkMTAnKSkgcmV0dXJuICdkMTAnXG4gICAgaWYgKGRhbWFnZVN0cmluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkOCcpKSByZXR1cm4gJ2Q4J1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDQnKSkgcmV0dXJuICdkNCdcbiAgICByZXR1cm4gJ2Q2J1xuICB9XG5cbiAgc3RhdGljIGdldEZyb21FbGVtZW50IChlbGVtZW50LCBvYmplY3QgPSBudWxsKSB7XG4gICAgaWYgKCFlbGVtZW50KSByZXR1cm5cbiAgICBjb25zdCBkYW1hZ2UgPSBvYmplY3QgfHwge31cbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KGRhbWFnZSwgZWxlbWVudClcbiAgICBjb25zdCByb2xscyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmRpY2Utcm9sbHMnKS5xdWVyeVNlbGVjdG9yQWxsKCdsaScpXG4gICAgZGFtYWdlLnJvbGxzID0gW11cbiAgICBmb3IgKGNvbnN0IHIgb2Ygcm9sbHMpIHtcbiAgICAgIGNvbnN0IHJvbGwgPSB7fVxuICAgICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChyb2xsLCByKVxuICAgICAgZGFtYWdlLnJvbGxzLnB1c2gocm9sbClcbiAgICB9XG5cbiAgICBpZiAoIW9iamVjdCkgcmV0dXJuIGRhbWFnZVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIGdhbWUgKi9cblxuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4vaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ2hhdENhcmRBY3RvciB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSA9IG51bGwsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICB0aGlzLmFjdG9yS2V5ID0gYWN0b3JLZXlcbiAgICB0aGlzLmZhc3RGb3J3YXJkID0gZmFzdEZvcndhcmRcbiAgfVxuXG4gIGdldCBkaXNwbGF5QWN0b3JPbkNhcmQgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5QWN0b3JPbkNhcmQnKVxuICB9XG5cbiAgZ2V0IGlzQmxpbmQgKCkge1xuICAgIGlmICghdGhpcy5yb2xsTW9kZSkgcmV0dXJuIG51bGxcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9pc0JsaW5kKSB7XG4gICAgICB0aGlzLl9pc0JsaW5kID0gdGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCdcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2lzQmxpbmRcbiAgfVxuXG4gIHNldCBpc0JsaW5kICh4KSB7XG4gICAgdGhpcy5faXNCbGluZCA9IHhcbiAgfVxuXG4gIGdldCByb2xsTW9kZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgcmV0dXJuIHRoaXMuX3JvbGxNb2RlXG4gIH1cblxuICBzZXQgcm9sbE1vZGUgKHgpIHtcbiAgICB0aGlzLl9yb2xsTW9kZSA9IHhcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLmFjdG9yS2V5KSByZXR1cm4gbnVsbFxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgfVxuXG4gIGdldCB0b2tlbiAoKSB7XG4gICAgaWYgKCF0aGlzLmFjdG9yKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICB9XG5cbiAgZ2V0IGl0ZW0gKCkge1xuICAgIGlmICghdGhpcy5pdGVtSWQpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuaXRlbUlkKVxuICB9XG5cbiAgZ2V0IHdlYXBvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbVxuICB9XG5cbiAgZ2V0IHRhcmdldGVkVG9rZW5zICgpIHtcbiAgICByZXR1cm4gWy4uLmdhbWUudXNlci50YXJnZXRzXVxuICB9XG5cbiAgZ2V0IHRhcmdldCAoKSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0VG9rZW4pIHJldHVybiB0aGlzLnRhcmdldFRva2VuXG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0QWN0b3JcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiBhIHRhcmdldEtleSB3YXMgcHJvdmlkZWQgdHJ5IHRvIGZpbmQgYSB0b2tlbiB3aXRoIHRoYXQga2V5IGFuZCB1c2UgaXQuXG4gICAqIElmIG5vdCB0YXJnZXRLZXkgcHJvdmlkZWQgcmV0dXJuIHRoZSBmaXJzdCB0YXJnZXQuXG4gICAqL1xuICBnZXQgdGFyZ2V0VG9rZW4gKCkge1xuICAgIGlmICghdGhpcy5fdGFyZ2V0VG9rZW4pIHtcbiAgICAgIGlmICh0aGlzLl90YXJnZXRLZXkpIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0VG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLl90YXJnZXRLZXkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IHRoaXMudGFyZ2V0ZWRUb2tlbnMucG9wKClcbiAgICAgICAgaWYgKHRoaXMuX3RhcmdldFRva2VuKSB7XG4gICAgICAgICAgdGhpcy5fdGFyZ2V0S2V5ID0gYCR7dGhpcy5fdGFyZ2V0VG9rZW4uc2NlbmUuaWR9LiR7dGhpcy5fdGFyZ2V0VG9rZW4uaWR9YFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gbnVsbFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90YXJnZXRUb2tlblxuICB9XG5cbiAgZ2V0IHRhcmdldEFjdG9yICgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldEFjdG9yKSB7XG4gICAgICBpZiAodGhpcy50YXJnZXRUb2tlbikgdGhpcy5fdGFyZ2V0QWN0b3IgPSB0aGlzLnRhcmdldFRva2VuLmFjdG9yXG4gICAgICBlbHNlIHRoaXMuX3RhcmdldEFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5fdGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldEFjdG9yXG4gIH1cblxuICBnZXQgdGFyZ2V0S2V5ICgpIHtcbiAgICBpZiAoIXRoaXMudGFyZ2V0VG9rZW4gJiYgIXRoaXMudGFyZ2V0QWN0b3IpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldEtleVxuICB9XG5cbiAgZ2V0IGhhc1RhcmdldCAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldFRva2VuICYmICF0aGlzLnRhcmdldEFjdG9yKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgc2V0IHRhcmdldEtleSAoeCkge1xuICAgIHRoaXMuX3RhcmdldEtleSA9IHhcbiAgfVxuXG4gIGdldCBza2lsbHMgKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLmdldFdlYXBvblNraWxscyh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB0YXJnZXRJbWcgKCkge1xuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KHRoaXMudGFyZ2V0S2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cblxuICBnZXQgbmFtZSAoKSB7XG4gICAgaWYgKHRoaXMudG9rZW4pIHJldHVybiB0aGlzLnRva2VuLm5hbWVcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5uYW1lXG4gIH1cblxuICBnZXQgdGFyZ2V0TmFtZSAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldCkgcmV0dXJuICdkdW1teSdcbiAgICByZXR1cm4gdGhpcy50YXJnZXQubmFtZVxuICB9XG5cbiAgZ2V0IGFjdG9ySW1nICgpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cblxuICBhc3luYyBzYXkgKG1lc3NhZ2UsIGZsYXZvciA9IG51bGwpIHtcbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgbGV0IHNwZWFrZXJcbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLmFjdG9yXG4gICAgICBpZiAodGhpcy50b2tlbikge1xuICAgICAgICBzcGVha2VyRGF0YS50b2tlbiA9IHRoaXMudG9rZW4uZG9jdW1lbnRcbiAgICAgIH1cbiAgICAgIHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHNwZWFrZXJEYXRhKVxuICAgIH0gZWxzZSB7XG4gICAgICBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXG4gICAgfVxuXG4gICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgc3BlYWtlcjogc3BlYWtlcixcbiAgICAgIGZsYXZvcjogZmxhdm9yLFxuICAgICAgY29udGVudDogbWVzc2FnZVxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykpXG4gICAgKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJykgLy8gQ2hhbmdlIGZvciB1c2VyXG4gICAgfVxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJykgY2hhdERhdGEuYmxpbmQgPSB0cnVlXG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpLnRoZW4obXNnID0+IHtcbiAgICAgIHJldHVybiBtc2dcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIFJvbGwsIHVpICovXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4uLy4uL2RpY2UuanMnXG5pbXBvcnQgeyBDaGF0Q2FyZEFjdG9yIH0gZnJvbSAnLi4vY2FyZC1hY3Rvci5qcydcbmltcG9ydCB7IGNyZWF0ZUlubGluZVJvbGwsIGNoYXRIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXIuanMnXG5cbmZ1bmN0aW9uIHJlcGxhY2VyIChrZXksIHZhbHVlKSB7XG4gIGlmIChrZXkuc3RhcnRzV2l0aCgnX18nKSkge1xuICAgIHJldHVybiB1bmRlZmluZWQgLy8gcmVtb3ZlIGZyb20gcmVzdWx0XG4gIH1cblxuICBjb25zdCBleGNsdWRlID0gWydfYWN0b3InXVxuICBpZiAoZXhjbHVkZS5pbmNsdWRlcyhrZXkpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgY29uc3QgY2hlY2tzID0gWydzYW5DaGVjaycsICdpbnRDaGVjayddXG4gIGlmIChjaGVja3MuaW5jbHVkZXMoa2V5KSkge1xuICAgIHJldHVybiB2YWx1ZS5KU09OUm9sbERhdGFcbiAgfVxuXG4gIHJldHVybiB2YWx1ZSAvLyByZXR1cm4gYXMgaXNcbn1cblxuZXhwb3J0IGNsYXNzIFNhbkNoZWNrQ2FyZCBleHRlbmRzIENoYXRDYXJkQWN0b3Ige1xuICBjb25zdHJ1Y3RvciAoYWN0b3JLZXkgPSBudWxsLCBzYW5EYXRhID0ge30sIG9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKFxuICAgICAgYWN0b3JLZXksXG4gICAgICB0eXBlb2Ygb3B0aW9ucy5mYXN0Rm9yd2FyZCAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgPyBCb29sZWFuKG9wdGlvbnMuZmFzdEZvcndhcmQpXG4gICAgICAgIDogZmFsc2VcbiAgICApXG4gICAgc2FuRGF0YS5zYW5SZWFzb24gPSBzYW5EYXRhLnNhblJlYXNvbiA/PyAnJ1xuICAgIHRoaXMuc2FuRGF0YSA9IHNhbkRhdGFcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgaWYgKHNhbkRhdGEubW9kaWZpZXIgJiYgIWlzTmFOKE51bWJlcihzYW5EYXRhLm1vZGlmaWVyKSkpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5zYW5Nb2RpZmllciA9IE51bWJlcihzYW5EYXRhLm1vZGlmaWVyKVxuICAgIH1cbiAgICBpZiAoc2FuRGF0YS5kaWZmaWN1bHR5ICYmICFpc05hTihOdW1iZXIoc2FuRGF0YS5kaWZmaWN1bHR5KSkpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5zYW5EaWZmaWN1bHR5ID0gTnVtYmVyKHNhbkRhdGEuZGlmZmljdWx0eSlcbiAgICB9XG4gICAgdGhpcy5zdGF0ZSA9IHt9XG4gIH1cblxuICBnZXQgaXNCbGluZCAoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGlzLm9wdGlvbnMuaXNCbGluZCAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgID8gQm9vbGVhbih0aGlzLm9wdGlvbnMuaXNCbGluZClcbiAgICAgIDogc3VwZXIuaXNCbGluZFxuICB9XG5cbiAgZ2V0IGRpZmZpY3VsdHkgKCkge1xuICAgIHJldHVybiB0eXBlb2YgdGhpcy5vcHRpb25zLmRpZmZpY3VsdHkgIT09ICd1bmRlZmluZWQnXG4gICAgICA/IHRoaXMub3B0aW9ucy5kaWZmaWN1bHR5XG4gICAgICA6IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICB9XG5cbiAgZ2V0IG1vZGlmaWVyICgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaXMub3B0aW9ucy5tb2RpZmllciAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgID8gdGhpcy5vcHRpb25zLm1vZGlmaWVyXG4gICAgICA6IDBcbiAgfVxuXG4gIGdldCBzYW5Mb3NzU291cmNlICgpIHtcbiAgICBpZiAoIXRoaXMuc2FuRGF0YS50b2tlbktleSkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5zYW5EYXRhLnRva2VuS2V5KVxuICB9XG5cbiAgZ2V0IGludm9sdW50YXJ5QWN0aW9uICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLnN0YXRlLnNhblJvbGxlZCAmJlxuICAgICAgKHRoaXMuc2FuQ2hlY2suaXNGYWlsdXJlIHx8IHRoaXMuc2FuQ2hlY2suaXNGdW1ibGUpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBzYW5Mb3NzRm9ybXVsYSAoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuc2FuUm9sbGVkKSB7XG4gICAgICBpZiAodGhpcy5zYW5EYXRhLnNhbk1heCAmJiB0aGlzLnNhbkNoZWNrLmZhaWxlZCkge1xuICAgICAgICByZXR1cm4gIWlzTmFOKE51bWJlcih0aGlzLnNhbkRhdGEuc2FuTWF4KSlcbiAgICAgICAgICA/IE51bWJlcih0aGlzLnNhbkRhdGEuc2FuTWF4KVxuICAgICAgICAgIDogdGhpcy5zYW5EYXRhLnNhbk1heFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc2FuRGF0YS5zYW5NaW4gJiYgdGhpcy5zYW5DaGVjay5wYXNzZWQpIHtcbiAgICAgICAgcmV0dXJuICFpc05hTihOdW1iZXIodGhpcy5zYW5EYXRhLnNhbk1pbikpXG4gICAgICAgICAgPyBOdW1iZXIodGhpcy5zYW5EYXRhLnNhbk1pbilcbiAgICAgICAgICA6IHRoaXMuc2FuRGF0YS5zYW5NaW5cbiAgICAgIH1cbiAgICAgIHJldHVybiAwXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgc2FuTG9zdFRvUmVhc29uICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5zYW5Mb3N0VG9SZWFzb24odGhpcy5zYW5EYXRhLnNhblJlYXNvbilcbiAgfVxuXG4gIGdldCBtYXhQb3NzaWJsZVNhbkxvc3MgKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLm1heExvc3NUb1NhblJlYXNvbihcbiAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXG4gICAgICB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgKVxuICB9XG5cbiAgZ2V0IG1heFNhbkxvc3MgKCkge1xuICAgIHJldHVybiBuZXcgUm9sbCh0aGlzLnNhbkRhdGEuc2FuTWF4LnRvU3RyaW5nKCkpLmV2YWx1YXRlKHtcbiAgICAgIG1heGltaXplOiB0cnVlXG4gICAgfSkudG90YWxcbiAgfVxuXG4gIGdldCBzYW5Mb3NzUmVhc29uRW5jb3VudGVyZWQgKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLnNhbkxvc3NSZWFzb25FbmNvdW50ZXJlZCh0aGlzLnNhbkRhdGEuc2FuUmVhc29uKVxuICB9XG5cbiAgZ2V0IGZpcnN0RW5jb3VudGVyICgpIHtcbiAgICByZXR1cm4gIXRoaXMuYWN0b3IubXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZFxuICB9XG5cbiAgZ2V0IGlzQWN0b3JMb29zaW5nU2FuICgpIHtcbiAgICAvLyBObyBzYW4gbG9zcyBkdXJpbmcgYm91dCBvZiBtYWQuXG4gICAgaWYgKHRoaXMuYWN0b3IuaGFzVGVtcG9JbnNhbmUpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIC8vIFRoZSBzYW4gbG9zcyBpcyBhIDBcbiAgICBpZiAodGhpcy5zYW5Mb3NzRm9ybXVsYSA9PT0gMCkgcmV0dXJuIGZhbHNlXG5cbiAgICBpZiAoXG4gICAgICB0aGlzLnNhbkRhdGEuc2FuUmVhc29uICYmXG4gICAgICB0aGlzLmFjdG9yLm1heExvc3NUb1NhblJlYXNvbihcbiAgICAgICAgdGhpcy5zYW5EYXRhLnNhblJlYXNvbixcbiAgICAgICAgdGhpcy5zYW5EYXRhLnNhbk1heFxuICAgICAgKSA9PT0gMFxuICAgICkge1xuICAgICAgdGhpcy5zdGF0ZS5pbW11bmVUb0NyZWF0dXJlID0gdHJ1ZVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGdldCBib3V0RHVyYXRpb25UZXh0ICgpIHtcbiAgICBpZiAodGhpcy5ib3V0RHVyYXRpb24pIHtcbiAgICAgIGlmICh0aGlzLmJvdXRSZWFsVGltZSkgcmV0dXJuIGAke3RoaXMuYm91dER1cmF0aW9ufSByb3VuZHNgXG4gICAgICBpZiAodGhpcy5ib3V0U3VtbWFyeSkgcmV0dXJuIGAke3RoaXMuYm91dER1cmF0aW9ufSBob3Vyc2BcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCB5b3VHYWluQ3RodWxodU15dGhvc1N0cmluZyAoKSB7XG4gICAgaWYgKHRoaXMubXl0aG9zR2Fpbikge1xuICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuWW91R2FpbmVkQ3RodWxodU15dGhvcycsIHtcbiAgICAgICAgdmFsdWU6IHRoaXMubXl0aG9zR2FpblxuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIGFkdmFuY2VTdGF0ZSAoc3RhdGUpIHtcbiAgICBzd2l0Y2ggKHN0YXRlKSB7XG4gICAgICBjYXNlICdrZWVwQ3JlYXR1cmVTYW5EYXRhJzoge1xuICAgICAgICB0aGlzLnN0YXRlLmtlZXBDcmVhdHVyZVNhbkRhdGEgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdpbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCc6IHtcbiAgICAgICAgdGhpcy5zdGF0ZVtzdGF0ZV0gPSB0cnVlXG4gICAgICAgIGlmICghdGhpcy5pc0FjdG9yTG9vc2luZ1NhbikgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdzYW5Mb3NzQXBwbGllZCc6IHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHBseVNhbkxvc3MoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnZW50ZXJCb3V0T2ZNYWRuZXNzUmVhbFRpbWUnOiB7XG4gICAgICAgIHRoaXMuYm91dER1cmF0aW9uID0gKGF3YWl0IG5ldyBSb2xsKCcxRDEwJykucm9sbCh7IGFzeW5jOiB0cnVlIH0pKS50b3RhbFxuICAgICAgICB0aGlzLmJvdXRSZWFsVGltZSA9IHRydWVcbiAgICAgICAgdGhpcy5ib3V0U3VtbWFyeSA9IGZhbHNlXG4gICAgICAgIHRoaXMuYm91dFJlc3VsdCA9IGF3YWl0IHRoaXMuYWN0b3IuZW50ZXJCb3V0T2ZNYWRuZXNzKFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgdGhpcy5ib3V0RHVyYXRpb25cbiAgICAgICAgKVxuICAgICAgICB0aGlzLnN0YXRlLmJvdXRPZk1hZG5lc3NSZXNvbHZlZCA9IHRydWVcbiAgICAgICAgdGhpcy5zdGF0ZS5ib3V0T2ZNYWRuZXNzT3ZlciA9IGZhbHNlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdlbnRlckJvdXRPZk1hZG5lc3NTdW1tYXJ5Jzoge1xuICAgICAgICB0aGlzLmJvdXREdXJhdGlvbiA9IChhd2FpdCBuZXcgUm9sbCgnMUQxMCcpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcbiAgICAgICAgdGhpcy5ib3V0UmVhbFRpbWUgPSBmYWxzZVxuICAgICAgICB0aGlzLmJvdXRTdW1tYXJ5ID0gdHJ1ZVxuICAgICAgICB0aGlzLmJvdXRSZXN1bHQgPSBhd2FpdCB0aGlzLmFjdG9yLmVudGVyQm91dE9mTWFkbmVzcyhcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICB0aGlzLmJvdXREdXJhdGlvblxuICAgICAgICApXG4gICAgICAgIHRoaXMuc3RhdGUuYm91dE9mTWFkbmVzc1Jlc29sdmVkID0gdHJ1ZVxuICAgICAgICBhd2FpdCB0aGlzLnRyaWdnZXJJbnNhbml0eSgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdib3V0T2ZNYWRuZXNzT3Zlcic6IHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci51bnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSlcbiAgICAgICAgYXdhaXQgdGhpcy50cmlnZ2VySW5zYW5pdHkoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnbm9NeXRob3NHYWluZWQnOiB7XG4gICAgICAgIHRoaXMuc3RhdGUuY3RodWxodU15dGhvc0F3YXJkZWQgPSB0cnVlXG4gICAgICAgIHRoaXMubXl0aG9zR2FpbiA9IDBcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2N0aHVsaHVNeXRob3NBd2FyZGVkJzoge1xuICAgICAgICBsZXQgYW1vdW50R2FpbmVkID0gMVxuICAgICAgICBpZiAoIXRoaXMuYWN0b3IubXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCkge1xuICAgICAgICAgIGFtb3VudEdhaW5lZCA9IDVcbiAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLmV4cGVyaWVuY2VGaXJzdE15dGhvc0luc2FuaXR5KClcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlLmN0aHVsaHVNeXRob3NBd2FyZGVkID0gdHJ1ZVxuICAgICAgICBjb25zdCBjdGh1bGh1TXl0aG9zU2tpbGwgPSB0aGlzLmFjdG9yLmN0aHVsaHVNeXRob3NTa2lsbFxuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9XG4gICAgICAgICAgY3RodWxodU15dGhvc1NraWxsLmRhdGEuZGF0YS5hZGp1c3RtZW50cy5leHBlcmllbmNlIHx8IDBcbiAgICAgICAgaWYgKGN0aHVsaHVNeXRob3NTa2lsbCkge1xuICAgICAgICAgIGF3YWl0IGN0aHVsaHVNeXRob3NTa2lsbC51cGRhdGUoe1xuICAgICAgICAgICAgJ2RhdGEuYWRqdXN0bWVudHMuZXhwZXJpZW5jZSc6IG9sZFZhbHVlICsgYW1vdW50R2FpbmVkXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm15dGhvc0dhaW4gPSBhbW91bnRHYWluZWRcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBieXBhc3NSb2xsU2FuICgpIHtcbiAgICB0aGlzLmlzQnlwYXNzZWQgPSB0cnVlXG4gICAgdGhpcy5zYW5DaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIHRoaXMuc2FuQ2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgdGhpcy5zYW5DaGVjay5hdHRyaWJ1dGUgPSAnc2FuJ1xuICAgIHRoaXMuc2FuQ2hlY2suZGlmZmljdWx0eSA9XG4gICAgICB0aGlzLm9wdGlvbnMuc2FuRGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB0aGlzLnNhbkNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMub3B0aW9ucy5zYW5Nb2RpZmllciB8fCAwXG4gICAgYXdhaXQgdGhpcy5zYW5DaGVjay5fcGVyZm9ybSh7IGZvcmNlRFNOOiB0cnVlIH0pXG4gICAgdGhpcy5zdGF0ZS5zYW5Sb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5zdGF0ZS5pbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCA9IHRoaXMuc2FuQ2hlY2sucGFzc2VkXG4gICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMuc3RhdGUuaWdub3JlU2FuQ2hlY2sgPSB0cnVlXG4gICAgdGhpcy5zYW5Mb3NzID0gdGhpcy5zYW5Mb3NzRm9ybXVsYVxuICB9XG5cbiAgYXN5bmMgcm9sbFNhbiAoKSB7XG4gICAgdGhpcy5zYW5DaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIHRoaXMuc2FuQ2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgdGhpcy5zYW5DaGVjay5hdHRyaWJ1dGUgPSAnc2FuJ1xuICAgIHRoaXMuc2FuQ2hlY2suZGlmZmljdWx0eSA9XG4gICAgICB0aGlzLm9wdGlvbnMuc2FuRGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB0aGlzLnNhbkNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMub3B0aW9ucy5zYW5Nb2RpZmllciB8fCAwXG4gICAgYXdhaXQgdGhpcy5zYW5DaGVjay5fcGVyZm9ybSh7IGZvcmNlRFNOOiB0cnVlIH0pXG4gICAgdGhpcy5zdGF0ZS5zYW5Sb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5zdGF0ZS5pbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCA9IHRoaXMuc2FuQ2hlY2sucGFzc2VkXG4gICAgaWYgKCF0aGlzLmlzQWN0b3JMb29zaW5nU2FuKSB7XG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IHRydWVcbiAgICAgIGlmICh0aGlzLmFjdG9yLmhhc1RlbXBvSW5zYW5lKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuaW1tdW5lQWxyZWFkeUluQm91dCA9IHRydWVcbiAgICAgICAgaWYgKCF0aGlzLnNhbkNoZWNrLnBhc3NlZCkgdGhpcy5zdGF0ZS5maW5pc2ggPSBmYWxzZVxuICAgICAgfVxuICAgICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5zYW5Mb3NzQXBwbGllZCA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IGZhbHNlXG4gICAgICB0aGlzLnNhbkxvc3MgPSAwXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5zYW5Mb3NzRm9ybXVsYSA9PT0gJ251bWJlcicpIHtcbiAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICAgIGlmICh0aGlzLnNhbkRhdGEuc2FuUmVhc29uKSB7XG4gICAgICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXG4gICAgICAgICAgdGhpcy5zYW5Mb3NzRm9ybXVsYVxuICAgICAgICApXG4gICAgICAgIGlmICh0aGlzLnNhbkxvc3MgPCB0aGlzLnNhbkxvc3NGb3JtdWxhKSB7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5saW1pdGVkTG9zc1RvQ3JlYXR1cmUgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMuc2FuTG9zc0Zvcm11bGFcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuc2FuQ2hlY2suaXNGdW1ibGUpIHtcbiAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuUmVhc29uLFxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgICApXG4gICAgfSBlbHNlIGlmICh0aGlzLnNhbkRhdGEuc2FuUmVhc29uKSB7XG4gICAgICBjb25zdCBtaW4gPSBuZXcgUm9sbCh0aGlzLnNhbkxvc3NGb3JtdWxhKS5ldmFsdWF0ZSh7XG4gICAgICAgIG1pbmltaXplOiB0cnVlXG4gICAgICB9KS50b3RhbFxuICAgICAgY29uc3QgbWF4ID0gdGhpcy5hY3Rvci5tYXhMb3NzVG9TYW5SZWFzb24oXG4gICAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXG4gICAgICAgIHRoaXMuc2FuRGF0YS5zYW5NYXhcbiAgICAgIClcbiAgICAgIGlmIChtaW4gPj0gbWF4KSB7XG4gICAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICAgICAgdGhpcy5zYW5Mb3NzID0gbWF4XG4gICAgICAgIHRoaXMuc3RhdGUubGltaXRlZExvc3NUb0NyZWF0dXJlID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJvbGxTYW5Mb3NzICgpIHtcbiAgICB0aGlzLnNhbkxvc3NSb2xsID0gbmV3IFJvbGwoYCR7dGhpcy5zYW5Mb3NzRm9ybXVsYX1gKVxuXG4gICAgYXdhaXQgdGhpcy5zYW5Mb3NzUm9sbC5yb2xsKHsgYXN5bmM6IHRydWUgfSlcblxuICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMuc2FuTG9zc1JvbGwpXG5cbiAgICBjb25zdCBtYXggPSB0aGlzLmFjdG9yLm1heExvc3NUb1NhblJlYXNvbihcbiAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXG4gICAgICB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgKVxuXG4gICAgaWYgKHRoaXMuc2FuTG9zc1JvbGwudG90YWwgPiBtYXgpIHtcbiAgICAgIHRoaXMuc3RhdGUubGltaXRlZExvc3NUb0NyZWF0dXJlID0gdHJ1ZVxuICAgIH1cblxuICAgIHRoaXMuc2FuTG9zcyA9IE1hdGgubWluKHRoaXMuc2FuTG9zc1JvbGwudG90YWwsIG1heClcbiAgICB0aGlzLnN0YXRlLnNhbkxvc3NSb2xsZWQgPSB0cnVlXG4gIH1cblxuICBhc3luYyBhcHBseVNhbkxvc3MgKCkge1xuICAgIGF3YWl0IHRoaXMuYWN0b3IubG9vc2VTYW4odGhpcy5zYW5EYXRhLnNhblJlYXNvbiwgdGhpcy5zYW5Mb3NzKVxuXG4gICAgaWYgKHRoaXMuc2FuTG9zcyA+IDApIHRoaXMuc3RhdGUuYWN0b3JMb3N0U2FuID0gdHJ1ZVxuICAgIHRoaXMuc3RhdGUuc2FuTG9zc0FwcGxpZWQgPSB0cnVlXG4gICAgaWYgKHRoaXMuYWN0b3Iuc2FuIDw9IDApIHtcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5ib3V0T2ZNYWRuZXNzT3ZlciA9IHRydWVcblxuICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUucGVybWFuZW50bHlJbnNhbmUgPSB0cnVlXG5cbiAgICAgIHRoaXMuc3RhdGUuZmluaXNoID0gdHJ1ZVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2FuTG9zcyA8IDUpIHtcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgaWYgKHRoaXMuYWN0b3IuaGFzSW5kZWZJbnNhbmUpIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgICAgdGhpcy5zdGF0ZS5zaGFrZW4gPSB0cnVlXG4gICAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHlUYWJsZVJvbGxlZCA9IGZhbHNlXG4gICAgICAgIHRoaXMuc3RhdGUuZmluaXNoID0gZmFsc2VcbiAgICAgICAgdGhpcy5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gZmFsc2VcbiAgICAgICAgdGhpcy5zdGF0ZS5zaGFrZW4gPSB0cnVlXG4gICAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHlUYWJsZVJvbGxlZCA9IHRydWVcbiAgICAgICAgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gZmFsc2VcbiAgICB9XG5cbiAgICBsZXQgb25lRmlmdGhTYW5pdHkgPSB0aGlzLmFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzLnNhbi5vbmVGaWZ0aFNhbml0eVxuICAgIG9uZUZpZnRoU2FuaXR5ID0gcGFyc2VJbnQob25lRmlmdGhTYW5pdHkucmVwbGFjZSgvXFxEL2csICcnKSlcbiAgICBpZiAodGhpcy5hY3Rvci5kYWlseVNhbkxvc3MgPj0gb25lRmlmdGhTYW5pdHkpIHtcbiAgICAgIC8vIHRoaXMuYWN0b3Iuc2FuLzVcbiAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHkgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLmludFJvbGxlZCA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUudGVtcG9yYXJ5SW5zYW5lID0gZmFsc2VcbiAgICAgIHRoaXMuc3RhdGUuaW5kZWZpbml0ZWx5SW5zYW5lID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eVRhYmxlUm9sbGVkID0gZmFsc2VcbiAgICAgIHRoaXMuc3RhdGUubWVtb3J5UmVwcmVzc2VkID0gZmFsc2VcbiAgICAgIHRoaXMuc3RhdGUuZmluaXNoID0gZmFsc2VcbiAgICB9XG4gIH1cblxuICBhc3luYyByb2xsSW50ICgpIHtcbiAgICB0aGlzLmludENoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgdGhpcy5pbnRDaGVjay5hY3RvciA9IHRoaXMuYWN0b3JLZXlcbiAgICB0aGlzLmludENoZWNrLmNoYXJhY3RlcmlzdGljID0gJ2ludCdcbiAgICB0aGlzLmludENoZWNrLmRpZmZpY3VsdHkgPVxuICAgICAgdGhpcy5vcHRpb25zLmludERpZmZpY3VsdHkgfHwgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgdGhpcy5pbnRDaGVjay5kaWNlTW9kaWZpZXIgPSB0aGlzLm9wdGlvbnMuaW50TW9kaWZpZXIgfHwgMFxuICAgIGF3YWl0IHRoaXMuaW50Q2hlY2suX3BlcmZvcm0oeyBmb3JjZURTTjogdHJ1ZSB9KVxuICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgIGlmICh0aGlzLmludENoZWNrLnBhc3NlZCB8fCB0aGlzLnN0YXRlLmFscmVhZHlJbnNhbmUpIHtcbiAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHkgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLnRlbXBvcmFyeUluc2FuZSA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuaW5kZWZpbml0ZWx5SW5zYW5lID0gZmFsc2VcbiAgICAgIHRoaXMuc3RhdGUubWVtb3J5UmVwcmVzc2VkID0gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLnRlbXBvcmFyeUluc2FuZSA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLmluZGVmaW5pdGVseUluc2FuZSA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLm1lbW9yeVJlcHJlc3NlZCA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuZmluaXNoID0gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHRyaWdnZXJJbnNhbml0eSAoKSB7XG4gICAgdGhpcy5zdGF0ZS5ib3V0T2ZNYWRuZXNzT3ZlciA9IHRydWVcbiAgICBpZiAodGhpcy5zdGF0ZS5pbmRlZmluaXRlbHlJbnNhbmUpIHtcbiAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmluZGVmSW5zYW5lKVxuICAgIH1cbiAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IHRydWVcbiAgfVxuXG4gIGFzeW5jIGNsZWFyU2FuTG9zc1JlYXNvbiAoKSB7XG4gICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRSZWFzb25TYW5Mb3NzKHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sIDApXG4gICAgaWYgKCF0aGlzLnNhbkxvc3NSZWFzb25FbmNvdW50ZXJlZCkge1xuICAgICAgdGhpcy5zdGF0ZS5rZWVwQ3JlYXR1cmVTYW5EYXRhID0gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICgpIHtcbiAgICAvLyBBdHRhY2hlIHRoZSBzYW5DaGVjayByZXN1bHQgdG8gdGhlIG1lc3NhZ2UuXG4gICAgaWYgKHRoaXMuc3RhdGUuc2FuUm9sbGVkKSB7XG4gICAgICB0aGlzLl9faW5saW5lU2FuQ2hlY2sgPSB0aGlzLnNhbkNoZWNrLmlubGluZUNoZWNrLm91dGVySFRNTFxuICAgIH1cblxuICAgIGlmICh0aGlzLnNhbkxvc3NSb2xsKSB7XG4gICAgICBjb25zdCBhID0gY3JlYXRlSW5saW5lUm9sbCh0aGlzLnNhbkxvc3NSb2xsKVxuICAgICAgdGhpcy5fX2lubGluZVNhbkxvc3NSb2xsID0gYS5vdXRlckhUTUxcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0ZS5pbnRSb2xsZWQgJiYgdGhpcy5pbnRDaGVjaykge1xuICAgICAgdGhpcy5fX2lubGluZUludENoZWNrID0gdGhpcy5pbnRDaGVjay5pbmxpbmVDaGVjay5vdXRlckhUTUxcbiAgICB9XG5cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoU2FuQ2hlY2tDYXJkLnRlbXBsYXRlLCB0aGlzKVxuICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICAvLyBBdHRhY2ggdGhlIHNhbkNoZWNrQ2FyZCBvYmplY3QgdG8gdGhlIG1lc3NhZ2UuXG4gICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKEpTT04uc3RyaW5naWZ5KHRoaXMsIHJlcGxhY2VyKSlcblxuICAgIC8vIFVwZGF0ZSB0aGUgbWVzc2FnZS5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgY2hhdE1lc3NhZ2UudXBkYXRlKHtcbiAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUxcbiAgICB9KVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIHN0YXRpYyBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NhcmRzL3Nhbi1jaGVjay5odG1sJ1xuICB9XG5cbiAgc3RhdGljIGNoZWNrVGFyZ2V0cyAoc2FuRGF0YSwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIGNvbnN0IHRhcmdldHMgPSBbLi4uZ2FtZS51c2VyLnRhcmdldHNdXG4gICAgaWYgKHRhcmdldHMubGVuZ3RoKSB7XG4gICAgICBmb3IgKGNvbnN0IHQgb2YgdGFyZ2V0cykge1xuICAgICAgICBpZiAodC5hY3Rvci5pc1Rva2VuKSB7XG4gICAgICAgICAgU2FuQ2hlY2tDYXJkLmNyZWF0ZSh0LmFjdG9yLnRva2VuS2V5LCBzYW5EYXRhLCB7XG4gICAgICAgICAgICBmYXN0Rm9yd2FyZDogZmFzdEZvcndhcmRcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIFNhbkNoZWNrQ2FyZC5jcmVhdGUodC5hY3Rvci5pZCwgc2FuRGF0YSwgeyBmYXN0Rm9yd2FyZDogZmFzdEZvcndhcmQgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5Ob1RhcmdldHNTYW5DaGVjaycpKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKC4uLmFyZ3MpIHtcbiAgICBjb25zdCBjaGF0Q2FyZCA9IG5ldyBTYW5DaGVja0NhcmQoLi4uYXJncylcbiAgICBpZiAoY2hhdENhcmQuYWN0b3IuaGFzSW5kZWZJbnNhbmUpIHtcbiAgICAgIGNoYXRDYXJkLnN0YXRlLmFscmVhZHlJbnNhbmUgPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKGNoYXRDYXJkLmFjdG9yLnNhbiA8PSAwKSB7XG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5ib3V0T2ZNYWRuZXNzT3ZlciA9IHRydWVcblxuICAgICAgY2hhdENhcmQuc3RhdGUuaW5zYW5pdHkgPSB0cnVlXG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5wZXJtYW5lbnRseUluc2FuZSA9IHRydWVcblxuICAgICAgY2hhdENhcmQuc3RhdGUuZmluaXNoID0gdHJ1ZVxuICAgIH1cblxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShTYW5DaGVja0NhcmQudGVtcGxhdGUsIGNoYXRDYXJkKVxuICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUoSlNPTi5zdHJpbmdpZnkoY2hhdENhcmQsIHJlcGxhY2VyKSlcbiAgICBhd2FpdCBjaGF0Q2FyZC5zYXkoaHRtbENhcmRFbGVtZW50Lm91dGVySFRNTClcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGNvbnN0IGh0bWxNZXNzYWdlID0gJC5wYXJzZUhUTUwobWVzc2FnZS5kYXRhLmNvbnRlbnQpWzBdXG5cbiAgICBjb25zdCBodG1sQ2FyZCA9IGh0bWxNZXNzYWdlLnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LWNhcmQnKVxuXG4gICAgcmV0dXJuIFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChodG1sQ2FyZClcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCkge1xuICAgIGNvbnN0IHNhbkNoZWNrQ2FyZERhdGEgPSBKU09OLnBhcnNlKHVuZXNjYXBlKGNhcmQuZGF0YXNldC5vYmplY3QpKVxuXG4gICAgY29uc3Qgc2FuQ2hlY2tDYXJkID0gbmV3IFNhbkNoZWNrQ2FyZCgpXG4gICAgT2JqZWN0LmFzc2lnbihzYW5DaGVja0NhcmQsIHNhbkNoZWNrQ2FyZERhdGEpXG4gICAgaWYgKCFzYW5DaGVja0NhcmQubWVzc2FnZUlkKSB7XG4gICAgICBzYW5DaGVja0NhcmQubWVzc2FnZUlkID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgfVxuXG4gICAgaWYgKHNhbkNoZWNrQ2FyZC5zYW5DaGVjaz8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICBzYW5DaGVja0NhcmQuc2FuQ2hlY2sgPSBPYmplY3QuYXNzaWduKFxuICAgICAgICBuZXcgQ29DN0NoZWNrKCksXG4gICAgICAgIHNhbkNoZWNrQ2FyZC5zYW5DaGVja1xuICAgICAgKVxuICAgIH1cblxuICAgIGlmIChzYW5DaGVja0NhcmQuaW50Q2hlY2s/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgc2FuQ2hlY2tDYXJkLmludENoZWNrID0gT2JqZWN0LmFzc2lnbihcbiAgICAgICAgbmV3IENvQzdDaGVjaygpLFxuICAgICAgICBzYW5DaGVja0NhcmQuaW50Q2hlY2tcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoc2FuQ2hlY2tDYXJkLnNhbkxvc3NSb2xsPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgIHNhbkNoZWNrQ2FyZC5zYW5Mb3NzUm9sbCA9IFJvbGwuZnJvbURhdGEoc2FuQ2hlY2tDYXJkLnNhbkxvc3NSb2xsKVxuICAgIH1cblxuICAgIHJldHVybiBzYW5DaGVja0NhcmRcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgQ2hhdE1lc3NhZ2UsIENPTlNULCBEaWFsb2csIGdhbWUsIGdldERvY3VtZW50Q2xhc3MsIEhvb2tzLCBNYWNybywgUm9sbCwgdWkgKi9cblxuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi9pdGVtcy9pdGVtLmpzJ1xuaW1wb3J0IHsgUm9sbERpYWxvZyB9IGZyb20gJy4vYXBwcy9yb2xsLWRpYWxvZy5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuL2NoYXQvaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1V0aWxpdGllcyB7XG4gIC8vIHN0YXRpYyB0ZXN0KGV2ZW50KXtcbiAgLy8gICBpZiggZXZlbnQuc2hpZnRLZXkpIHVpLm5vdGlmaWNhdGlvbnMuaW5mbygnSGVsbG8gZnJvbSBTSElGVCB1dGlsaXRpZXMnKTtcbiAgLy8gICBlbHNlIHVpLm5vdGlmaWNhdGlvbnMuaW5mbygnSGVsbG8gZnJvbSB1dGlsaXRpZXMnKTtcbiAgLy8gICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpO1xuICAvLyAgIGxldCBhY3RvcjtcbiAgLy8gICBpZiAoc3BlYWtlci50b2tlbikgYWN0b3IgPSBnYW1lLmFjdG9ycy50b2tlbnNbc3BlYWtlci50b2tlbl07XG4gIC8vICAgaWYgKCFhY3RvcikgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoc3BlYWtlci5hY3Rvcik7XG5cbiAgLy8gIGFjdG9yLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcyk7XG4gIC8vIH1cblxuICBzdGF0aWMgaXNGb3JtdWxhICh4KSB7XG4gICAgaWYgKHR5cGVvZiB4ICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlXG4gICAgaWYgKCFpc05hTihOdW1iZXIoeCkpKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gUm9sbC52YWxpZGF0ZSh4KVxuICB9XG5cbiAgc3RhdGljIFBhcnNlQ2hhdEVudHJ5IChodG1sLCBjb250ZW50KSB7XG4gICAgY29uc3QgcmVnWCA9IC8oXFxTKykvZ1xuICAgIGNvbnN0IHRlcm1zID0gY29udGVudC5tYXRjaChyZWdYKVxuICAgIGlmIChcbiAgICAgIHRlcm1zWzBdPy50b0xvd2VyQ2FzZSgpLm1hdGNoKC9eXFwvcihvbGwpPyQvKSAmJlxuICAgICAgdGVybXNbMV0/LnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCgnMWQlJylcbiAgICApIHtcbiAgICAgIC8vIERlbGF5IGNhbGxpbmcgZnVuY3Rpb24gdG8gcHJldmVudCBjaGF0bWVzc2FnZSBrZXkgZG93biB0cmlnZ2VyaW5nIGRlZmF1bHRcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBDb0M3VXRpbGl0aWVzLl9FeGVjQ29tbWFuZChjb250ZW50KVxuICAgICAgfSwgMjAwKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9FeGVjQ29tbWFuZCAoY29udGVudCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBjb250ZW50XG4gICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgLnNwbGl0KCcgJylcbiAgICAgID8uam9pbignJylcbiAgICAgID8ucmVwbGFjZSgvXFwvcihvbGwpPzFkJS8sICcnKVxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgaWYgKG9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICBsZXQgZXNjYXBlZCA9IG9wdGlvbnNcbiAgICAgIGxldCB0aHJlc2hvbGRcbiAgICAgIGxldCBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICBsZXQgZGljZU1vZGlmaWVyID0gMFxuICAgICAgbGV0IGFzayA9IGZhbHNlXG4gICAgICBsZXQgZmxhdERpY2VNb2RpZmllclxuICAgICAgbGV0IGZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgICAgY29uc3QgdGhyZXNob2xkU3RyID0gZXNjYXBlZC5tYXRjaCgvW14oXSsoPz1cXCkpLylcbiAgICAgIGlmICh0aHJlc2hvbGRTdHIgJiYgdGhyZXNob2xkU3RyLmxlbmd0aCkge1xuICAgICAgICB0aHJlc2hvbGQgPSBOdW1iZXIodGhyZXNob2xkU3RyWzBdKVxuICAgICAgICBmb3IgKGNvbnN0IG1hdGNoIG9mIHRocmVzaG9sZFN0cikge1xuICAgICAgICAgIGVzY2FwZWQgPSBlc2NhcGVkLnJlcGxhY2UoYCgke21hdGNofSlgLCAnJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgZGlmZmljdWx0eVN0ciA9IGVzY2FwZWQubWF0Y2goL1teW10rKD89XFxdKS8pXG4gICAgICBpZiAoZGlmZmljdWx0eVN0ciAmJiBkaWZmaWN1bHR5U3RyLmxlbmd0aCkge1xuICAgICAgICBkaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShkaWZmaWN1bHR5U3RyWzBdKVxuICAgICAgICBmb3IgKGNvbnN0IG1hdGNoIG9mIGRpZmZpY3VsdHlTdHIpIHtcbiAgICAgICAgICBlc2NhcGVkID0gZXNjYXBlZC5yZXBsYWNlKGBbJHttYXRjaH1dYCwgJycpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChlc2NhcGVkLmluY2x1ZGVzKCc/JykpIHtcbiAgICAgICAgYXNrID0gdHJ1ZVxuICAgICAgICBlc2NhcGVkID0gZXNjYXBlZC5yZXBsYWNlKCc/JywgJycpXG4gICAgICB9XG4gICAgICBpZiAoIWlzTmFOKE51bWJlcihlc2NhcGVkKSkpIGRpY2VNb2RpZmllciA9IE51bWJlcihlc2NhcGVkKVxuXG4gICAgICBpZiAoYXNrKSB7XG4gICAgICAgIGNvbnN0IGRpYWxvZ09wdGlvbnMgPSB7XG4gICAgICAgICAgdGhyZXNob2xkOiB0aHJlc2hvbGQsXG4gICAgICAgICAgbW9kaWZpZXI6IGRpY2VNb2RpZmllcixcbiAgICAgICAgICBkaWZmaWN1bHR5OiBkaWZmaWN1bHR5LFxuICAgICAgICAgIGFza1ZhbHVlOiB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShkaWFsb2dPcHRpb25zKVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBkaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICBkaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICAgIHRocmVzaG9sZCA9IE51bWJlcih1c2FnZS5nZXQoJ3RocmVzaG9sZCcpKSB8fCB0aHJlc2hvbGRcbiAgICAgICAgICBmbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IGRpY2VNb2RpZmllciB8fCAwXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgIGNoZWNrLnJhd1ZhbHVlID0gdGhyZXNob2xkXG4gICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gZmxhdERpY2VNb2RpZmllclxuICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgICBpZiAodGhyZXNob2xkKSBjaGVjay5yYXdWYWx1ZSA9ICFpc05hTih0aHJlc2hvbGQpID8gdGhyZXNob2xkIDogdW5kZWZpbmVkXG4gICAgfVxuICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICBpZiAoc3BlYWtlci50b2tlbiAmJiBzcGVha2VyLnNjZW5lKSB7XG4gICAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICBgJHtzcGVha2VyLnNjZW5lfS4ke3NwZWFrZXIudG9rZW59YFxuICAgICAgKSAvLyBSRUZBQ1RPUklORyAoMikgKysrIHdoeSBzcGVha2VyLnNjZW5lLlxuICAgICAgaWYgKGFjdG9yKSBjaGVjay5hY3RvciA9IGFjdG9yXG4gICAgfSBlbHNlIGlmIChzcGVha2VyLmFjdG9yKSB7XG4gICAgICBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKVxuICAgICAgaWYgKGFjdG9yKSBjaGVjay5hY3RvciA9IGFjdG9yXG4gICAgfVxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdGVzdCAoKSB7XG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvcygnRG8gc29tZSBzdHVmZicpXG4gIH1cblxuICBzdGF0aWMgZ2V0QWN0b3JGcm9tU3RyaW5nIChhY3RvclN0cmluZykge1xuICAgIGxldCBhY3RvclxuXG4gICAgLy8gVG9rZW4gaXMgYmV0dGVyIHRoYW4gYWN0b3IuXG4gICAgLy8gQ2FzZSAxIDogdHJ5aW5nIHdpdGggSUQuXG4gICAgLy8gQ2FzZSAxLjEgOiB0b2tlbiBmb3VuZC5cbiAgICBpZiAoZ2FtZS5hY3RvcnMudG9rZW5zW2FjdG9yU3RyaW5nXSkgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1thY3RvclN0cmluZ11cbiAgICAvLyBDYXNlIDEuMiA6IGFjdG9yIGZvdW5kLlxuICAgIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KGFjdG9yU3RyaW5nKVxuICAgIGlmIChhY3RvcikgcmV0dXJuIGFjdG9yXG5cbiAgICAvLyBDYXNlIDIgOiB0cnlpbmcgd2l0aCBuYW1lXG4gICAgLy8gQ2FzZSAyLjEgOiB0b2tlbiBmb3VuZC5cbiAgICBhY3RvciA9IE9iamVjdC52YWx1ZXMoZ2FtZS5hY3RvcnMudG9rZW5zKS5maW5kKHQgPT4ge1xuICAgICAgaWYgKHQubmFtZS50b0xvd2VyQ2FzZSgpID09PSBhY3RvclN0cmluZy50b0xvd2VyQ2FzZSgpKSByZXR1cm4gdHJ1ZVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSlcbiAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAvLyBDYXNlIDIuMiA6IGFjdG9yIGZvdW5kLlxuICAgICAgYWN0b3IgPSBnYW1lLmFjdG9ycy5maW5kKGEgPT4ge1xuICAgICAgICBpZiAoYS5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IGFjdG9yU3RyaW5nLnRvTG93ZXJDYXNlKCkpIHJldHVybiB0cnVlXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKGFjdG9yKSByZXR1cm4gYWN0b3JcblxuICAgIC8vIC8vIENhc2UgMyBzdHJpbmcgbWF5YmUgYW4gYWN0b3JLZXlcbiAgICAvLyBpZiAoY3JlYXR1cmUuaW5jbHVkZXMoJy4nKSkge1xuICAgIC8vICAgY29uc3QgWywgYWN0b3JJZF0gPSBrZXkuc3BsaXQoJy4nKVxuICAgIC8vICAgcmV0dXJuIENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tU3RyaW5nKGFjdG9ySWQpXG4gICAgLy8gfVxuXG4gICAgLy8gTm8gam95XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHN0YXRpYyBnZXRDaGFyYWN0ZXJpc3RpY05hbWVzIChjaGFyKSB7XG4gICAgY29uc3QgY2hhcktleSA9IGNoYXIudG9Mb3dlckNhc2UoKVxuXG4gICAgc3dpdGNoIChjaGFyS2V5KSB7XG4gICAgICBjYXNlICdzdHInOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5TVFInKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuU3RyZW5ndGgnKVxuICAgICAgICB9XG4gICAgICBjYXNlICdjb24nOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5DT04nKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuQ29uc3RpdHV0aW9uJylcbiAgICAgICAgfVxuICAgICAgY2FzZSAnc2l6JzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuU0laJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLlNpemUnKVxuICAgICAgICB9XG4gICAgICBjYXNlICdkZXgnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5ERVgnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuRGV4dGVyaXR5JylcbiAgICAgICAgfVxuICAgICAgY2FzZSAnYXBwJzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuQVBQJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkFwcGVhcmFuY2UnKVxuICAgICAgICB9XG4gICAgICBjYXNlICdpbnQnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5JTlQnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuSW50ZWxsaWdlbmNlJylcbiAgICAgICAgfVxuICAgICAgY2FzZSAncG93JzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuUE9XJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLlBvd2VyJylcbiAgICAgICAgfVxuICAgICAgY2FzZSAnZWR1JzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuRURVJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkVkdWNhdGlvbicpXG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgZm9yIChjb25zdCBbLCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICAgICAgZ2FtZS5zeXN0ZW0udGVtcGxhdGUuQWN0b3IudGVtcGxhdGVzLmNoYXJhY3RlcmlzdGljcy5jaGFyYWN0ZXJpc3RpY3NcbiAgICAgICAgKSkge1xuICAgICAgICAgIGlmIChjaGFyS2V5ID09PSBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUuc2hvcnQpLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUuc2hvcnQpLFxuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBjb252ZXJ0RGlmZmljdWx0eSAoZGlmZmljdWx0eSkge1xuICAgIGlmIChTdHJpbmcoZGlmZmljdWx0eSkgPT09ICcwJykgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIGlmICh0eXBlb2YgZGlmZmljdWx0eSAhPT0gJ3N0cmluZycpIHJldHVybiBkaWZmaWN1bHR5XG4gICAgaWYgKCFpc05hTihOdW1iZXIoZGlmZmljdWx0eSkpKSByZXR1cm4gTnVtYmVyKGRpZmZpY3VsdHkpXG5cbiAgICBzd2l0Y2ggKGRpZmZpY3VsdHkpIHtcbiAgICAgIGNhc2UgJz8nOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duXG4gICAgICBjYXNlICcrJzpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZFxuICAgICAgY2FzZSAnKysnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgICBjYXNlICcrKysnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBza2lsbENoZWNrTWFjcm8gKHNraWxsLCBldmVudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICBsZXQgYWN0b3JcbiAgICBpZiAoc3BlYWtlci50b2tlbikgYWN0b3IgPSBnYW1lLmFjdG9ycy50b2tlbnNbc3BlYWtlci50b2tlbl1cbiAgICBpZiAoIWFjdG9yKSBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKSAvLyBObyBuZWVkIHRvIGZpbGwgYWN0b3IgdG9rZW5cblxuICAgIGlmICghYWN0b3IpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vQWN0b3JBdmFpbGFibGUnKSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGFjdG9yLnNraWxsQ2hlY2soc2tpbGwsIGV2ZW50LnNoaWZ0S2V5LCBvcHRpb25zKVxuICB9XG5cbiAgc3RhdGljIHdlYXBvbkNoZWNrTWFjcm8gKHdlYXBvbiwgZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIGxldCBhY3RvclxuICAgIGlmIChzcGVha2VyLnRva2VuKSBhY3RvciA9IGdhbWUuYWN0b3JzLnRva2Vuc1tzcGVha2VyLnRva2VuXVxuICAgIGlmICghYWN0b3IpIHtcbiAgICAgIGlmIChzcGVha2VyLnNjZW5lICYmIHNwZWFrZXIudG9rZW4pIHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgc3ludGhldGljIGFjdG9yIGxpbmtlZCB3aXRoIHRoZSBhY3RpdmUgdG9rZW4uXG4gICAgICAgIGNvbnN0IGJhc2VBY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKVxuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzcGVha2VyLnNjZW5lKVxuICAgICAgICBjb25zdCB0b2tlbiA9IHNjZW5lLnRva2Vucy5nZXQoc3BlYWtlci50b2tlbilcblxuICAgICAgICBjb25zdCBBY3RvckNsYXNzID0gZ2V0RG9jdW1lbnRDbGFzcygnQWN0b3InKVxuICAgICAgICBjb25zdCB0b2tlbkFjdG9yID0gbmV3IEFjdG9yQ2xhc3MoYmFzZUFjdG9yLnRvSlNPTigpLCB7XG4gICAgICAgICAgcGFyZW50OiB0b2tlblxuICAgICAgICB9KVxuICAgICAgICBhY3RvciA9IHRva2VuQWN0b3JcbiAgICAgIH0gZWxzZSBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKVxuICAgIH1cblxuICAgIGlmICghYWN0b3IpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vQWN0b3JBdmFpbGFibGUnKSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGFjdG9yLndlYXBvbkNoZWNrKHdlYXBvbiwgZXZlbnQuc2hpZnRLZXkpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY2hlY2tNYWNybyAodGhyZXNob2xkID0gdW5kZWZpbmVkLCBldmVudCA9IG51bGwpIHtcbiAgICBhd2FpdCBDb0M3VXRpbGl0aWVzLnJvbGxEaWNlKGV2ZW50LCB7IHRocmVzaG9sZDogdGhyZXNob2xkIH0pXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlTWFjcm8gKGJhciwgZGF0YSwgc2xvdCkge1xuICAgIGlmIChkYXRhLnR5cGUgIT09ICdJdGVtJykgcmV0dXJuXG5cbiAgICBsZXQgaXRlbVxuICAgIGxldCBvcmlnaW5cbiAgICBsZXQgcGFja05hbWUgPSBudWxsXG5cbiAgICBpZiAoZGF0YS5wYWNrKSB7XG4gICAgICBjb25zdCBwYWNrID0gZ2FtZS5wYWNrcy5nZXQoZGF0YS5wYWNrKVxuICAgICAgaWYgKHBhY2subWV0YWRhdGEuZW50aXR5ICE9PSAnSXRlbScpIHJldHVyblxuICAgICAgcGFja05hbWUgPSBkYXRhLnBhY2tcbiAgICAgIGl0ZW0gPSBhd2FpdCBwYWNrLmdldERvY3VtZW50KGRhdGEuaWQpXG4gICAgICBvcmlnaW4gPSAncGFjaydcbiAgICB9IGVsc2UgaWYgKGRhdGEuZGF0YSkge1xuICAgICAgaXRlbSA9IGRhdGEuZGF0YVxuICAgICAgb3JpZ2luID0gJ2FjdG9yJ1xuICAgIH0gZWxzZSB7XG4gICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQoZGF0YS5pZClcbiAgICAgIG9yaWdpbiA9ICdnYW1lJ1xuICAgIH1cblxuICAgIGlmICghaXRlbSkge1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5NYWNyb05vSXRlbUZvdW5kJylcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKCEoaXRlbS50eXBlID09PSAnd2VhcG9uJykgJiYgIShpdGVtLnR5cGUgPT09ICdza2lsbCcpKSB7XG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk1hY3JvSW5jb3JyZWN0VHlwZScpXG4gICAgICApXG4gICAgfVxuXG4gICAgbGV0IGNvbW1hbmRcblxuICAgIGlmIChpdGVtLnR5cGUgPT09ICd3ZWFwb24nKSB7XG4gICAgICBjb21tYW5kID0gYGdhbWUuQ29DNy5tYWNyb3Mud2VhcG9uQ2hlY2soe25hbWU6JyR7aXRlbS5uYW1lfScsIGlkOicke2l0ZW0uaWR9Jywgb3JpZ2luOicke29yaWdpbn0nLCBwYWNrOiAnJHtwYWNrTmFtZX0nfSwgZXZlbnQpO2BcbiAgICB9XG5cbiAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICBpZiAoQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pKSB7XG4gICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5Ob0dsb2JhbFNwZWMnKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBjb21tYW5kID0gYGdhbWUuQ29DNy5tYWNyb3Muc2tpbGxDaGVjayh7bmFtZTonJHtpdGVtLm5hbWV9JywgaWQ6JyR7aXRlbS5pZH0nLCBvcmlnaW46JyR7b3JpZ2lufScsIHBhY2s6ICcke3BhY2tOYW1lfSd9LCBldmVudCk7YFxuICAgIH1cblxuICAgIC8vIENyZWF0ZSB0aGUgbWFjcm8gY29tbWFuZFxuICAgIGxldCBtYWNybyA9IGdhbWUubWFjcm9zLmNvbnRlbnRzLmZpbmQoXG4gICAgICBtID0+IG0ubmFtZSA9PT0gaXRlbS5uYW1lICYmIG0uY29tbWFuZCA9PT0gY29tbWFuZFxuICAgIClcbiAgICBpZiAoIW1hY3JvKSB7XG4gICAgICBtYWNybyA9IGF3YWl0IE1hY3JvLmNyZWF0ZSh7XG4gICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgdHlwZTogJ3NjcmlwdCcsXG4gICAgICAgIGltZzogaXRlbS5pbWcsXG4gICAgICAgIGNvbW1hbmQ6IGNvbW1hbmRcbiAgICAgIH0pXG4gICAgfVxuICAgIGdhbWUudXNlci5hc3NpZ25Ib3RiYXJNYWNybyhtYWNybywgc2xvdClcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB0b2dnbGVEZXZQaGFzZSAodG9nZ2xlKSB7XG4gICAgYXdhaXQgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJywgdG9nZ2xlKVxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgIHRvZ2dsZVxuICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5EZXZQaGFzZUVuYWJsZWQnKVxuICAgICAgICA6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5EZXZQaGFzZURpc2FibGVkJylcbiAgICApXG4gICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCB7XG4gICAgICB0eXBlOiAndXBkYXRlQ2hhcidcbiAgICB9KVxuICAgIENvQzdVdGlsaXRpZXMudXBkYXRlQ2hhclNoZWV0cygpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdG9nZ2xlQ2hhckNyZWF0aW9uICh0b2dnbGUpIHtcbiAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJywgdG9nZ2xlKVxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgIHRvZ2dsZVxuICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGFyQ3JlYXRpb25FbmFibGVkJylcbiAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhckNyZWF0aW9uRGlzYWJsZWQnKVxuICAgIClcbiAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIHtcbiAgICAgIHR5cGU6ICd1cGRhdGVDaGFyJ1xuICAgIH0pXG4gICAgQ29DN1V0aWxpdGllcy51cGRhdGVDaGFyU2hlZXRzKClcbiAgICBIb29rcy5jYWxsKCd0b2dnbGVDaGFyQ3JlYXRpb24nLCB0b2dnbGUpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ2V0VGFyZ2V0ICgpIHtcbiAgICBjb25zdCB1c2VycyA9IGdhbWUudXNlcnMuZmlsdGVyKHVzZXIgPT4gdXNlci5hY3RpdmUpXG4gICAgY29uc3QgYWN0b3JzID0gZ2FtZS5hY3RvcnNcbiAgICBsZXQgY2hlY2tPcHRpb25zID0gYDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuYW1lPVwiQ09DQ2hlY2tBbGxQQ1wiIGlkPVwiQ09DQ2hlY2tBbGxQQ1wiPlxcblxuICAgIDxsYWJlbCBmb3I9XCJDT0NDaGVja0FsbFBDXCI+JHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuYWxsQWN0b3JzJyl9PC9sYWJlbD5gXG4gICAgY29uc3QgcGxheWVyVG9rZW5JZHMgPSB1c2Vyc1xuICAgICAgLm1hcCh1ID0+IHUuY2hhcmFjdGVyPy5pZClcbiAgICAgIC5maWx0ZXIoaWQgPT4gaWQgIT09IHVuZGVmaW5lZClcbiAgICBjb25zdCBzZWxlY3RlZFBsYXllcklkcyA9IGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5tYXAodG9rZW4gPT4ge1xuICAgICAgcmV0dXJuIHRva2VuLmFjdG9yLmlkXG4gICAgfSlcblxuICAgIC8vIEJ1aWxkIGNoZWNrYm94IGxpc3QgZm9yIGFsbCBhY3RpdmUgcGxheWVyc1xuICAgIGFjdG9ycy5mb3JFYWNoKGFjdG9yID0+IHtcbiAgICAgIGNvbnN0IGNoZWNrZWQgPVxuICAgICAgICAoc2VsZWN0ZWRQbGF5ZXJJZHMuaW5jbHVkZXMoYWN0b3IuaWQpIHx8XG4gICAgICAgICAgcGxheWVyVG9rZW5JZHMuaW5jbHVkZXMoYWN0b3IuaWQpKSAmJlxuICAgICAgICAnY2hlY2tlZCdcbiAgICAgIGNoZWNrT3B0aW9ucyArPSBgXG4gICAgIDxicj5cbiAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCIke2FjdG9yLmlkfVwiIGlkPVwiJHthY3Rvci5pZH1cIiB2YWx1ZT1cIiR7YWN0b3IubmFtZX1cIiAke2NoZWNrZWR9PlxcblxuICAgICA8bGFiZWwgZm9yPVwiJHthY3Rvci5pZH1cIj4ke2FjdG9yLm5hbWV9PC9sYWJlbD5cbiAgICAgICBgXG4gICAgfSlcblxuICAgIG5ldyBEaWFsb2coe1xuICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5kcmVhbWluZycpfWAsXG4gICAgICBjb250ZW50OiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICdDb0M3LnJlc3RUYXJnZXRzJ1xuICAgICAgKX06ICR7Y2hlY2tPcHRpb25zfSA8YnI+YCxcbiAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgd2hpc3Blcjoge1xuICAgICAgICAgIGxhYmVsOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuc3RhcnRSZXN0Jyl9YCxcbiAgICAgICAgICBjYWxsYmFjazogYXN5bmMgaHRtbCA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRzID0gW11cbiAgICAgICAgICAgIGxldCBhbGwgPSBmYWxzZVxuICAgICAgICAgICAgY29uc3QgdXNlcnMgPSBodG1sLmZpbmQoJ1t0eXBlPVwiY2hlY2tib3hcIl0nKVxuICAgICAgICAgICAgZm9yIChjb25zdCB1c2VyIG9mIHVzZXJzKSB7XG4gICAgICAgICAgICAgIGlmICh1c2VyLm5hbWUgPT09ICdDT0NDaGVja0FsbFBDJyAmJiB1c2VyLmNoZWNrZWQpIGFsbCA9IHRydWVcbiAgICAgICAgICAgICAgaWYgKHVzZXIuY2hlY2tlZCB8fCBhbGwpIHRhcmdldHMucHVzaCh1c2VyLmlkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgQ29DN1V0aWxpdGllcy5zdGFydFJlc3QodGFyZ2V0cylcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KS5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBzdGFydFJlc3QgKHRhcmdldHMpIHtcbiAgICBpZiAoIXRhcmdldHMubGVuZ3RoKSByZXR1cm5cbiAgICBjb25zdCBhY3RvcnMgPSBnYW1lLmFjdG9ycy5maWx0ZXIoYWN0b3IgPT4gdGFyZ2V0cy5pbmNsdWRlcyhhY3Rvci5pZCkpXG4gICAgbGV0IGNoYXRDb250ZW50ID0gYDxpPiR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LmRyZWFtaW5nJyl9Li4uPC9pPjxicj5gXG4gICAgZm9yIChjb25zdCBhY3RvciBvZiBhY3RvcnMpIHtcbiAgICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyhhY3Rvci50eXBlKSkge1xuICAgICAgICBsZXQgcXVpY2tIZWFsZXIgPSBmYWxzZVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYWN0b3IuZGF0YS5pdGVtcykge1xuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICd0YWxlbnQnKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5uYW1lID09PSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucXVpY2tIZWFsZXInKX1gKSB7XG4gICAgICAgICAgICAgIHF1aWNrSGVhbGVyID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc0NyaXRpY2FsV291bmRzID1cbiAgICAgICAgICAhZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVJZ25vcmVNYWpvcldvdW5kcycpICYmXG4gICAgICAgICAgYWN0b3IuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzKVxuICAgICAgICBjb25zdCBkYWlseVNhbml0eUxvc3MgPSBhY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5zYW4uZGFpbHlMb3NzXG4gICAgICAgIGNvbnN0IGhwVmFsdWUgPSBhY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZVxuICAgICAgICBjb25zdCBocE1heCA9IGFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heFxuICAgICAgICBjb25zdCBvbmVGaWZ0aFNhbml0eSA9XG4gICAgICAgICAgJyAvICcgKyBNYXRoLmZsb29yKGFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzLnNhbi52YWx1ZSAvIDUpXG4gICAgICAgIGNvbnN0IG1wVmFsdWUgPSBhY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5tcC52YWx1ZVxuICAgICAgICBjb25zdCBtcE1heCA9IGFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzLm1wLm1heFxuICAgICAgICBjb25zdCBwb3cgPSBhY3Rvci5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZVxuICAgICAgICBjaGF0Q29udGVudCA9IGNoYXRDb250ZW50ICsgYDxicj48Yj4ke2FjdG9yLm5hbWV9LiA8L2I+YFxuICAgICAgICBpZiAoaHBWYWx1ZSA8IGhwTWF4KSB7XG4gICAgICAgICAgaWYgKGlzQ3JpdGljYWxXb3VuZHMgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGNoYXRDb250ZW50ID1cbiAgICAgICAgICAgICAgY2hhdENvbnRlbnQgK1xuICAgICAgICAgICAgICBgPGIgc3R5bGU9XCJjb2xvcjpkYXJrcmVkXCI+JHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgJ0NvQzcuaGFzQ3JpdGljYWxXb3VuZHMnXG4gICAgICAgICAgICAgICl9LiA8L2I+YFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgaGVhbEFtb3VudCA9IDFcbiAgICAgICAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUZhc3RlclJlY292ZXJ5JykpIHtcbiAgICAgICAgICAgICAgaGVhbEFtb3VudCA9IDJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChxdWlja0hlYWxlciA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICBoZWFsQW1vdW50KytcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhlYWxBbW91bnQgPSBNYXRoLm1pbihoZWFsQW1vdW50LCBocE1heCAtIGhwVmFsdWUpXG4gICAgICAgICAgICBpZiAoaGVhbEFtb3VudCA9PT0gMSkge1xuICAgICAgICAgICAgICBjaGF0Q29udGVudCA9XG4gICAgICAgICAgICAgICAgY2hhdENvbnRlbnQgK1xuICAgICAgICAgICAgICAgIGA8YiBzdHlsZT1cImNvbG9yOmRhcmtvbGl2ZWdyZWVuXCI+JHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICAnQ29DNy5oZWFsdGhSZWNvdmVyZWQnXG4gICAgICAgICAgICAgICAgKX0uIDwvYj5gXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjaGF0Q29udGVudCA9XG4gICAgICAgICAgICAgICAgY2hhdENvbnRlbnQgK1xuICAgICAgICAgICAgICAgIGA8YiBzdHlsZT1cImNvbG9yOmRhcmtvbGl2ZWdyZWVuXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgJ0NvQzcucHVscEhlYWx0aFJlY292ZXJlZCcsXG4gICAgICAgICAgICAgICAgICB7IG51bWJlcjogaGVhbEFtb3VudCB9XG4gICAgICAgICAgICAgICAgKX0uIDwvYj5gXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhY3Rvci51cGRhdGUoe1xuICAgICAgICAgICAgICAnZGF0YS5hdHRyaWJzLmhwLnZhbHVlJzpcbiAgICAgICAgICAgICAgICBhY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSArIGhlYWxBbW91bnRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkYWlseVNhbml0eUxvc3MgPiAwKSB7XG4gICAgICAgICAgY2hhdENvbnRlbnQgPVxuICAgICAgICAgICAgY2hhdENvbnRlbnQgK1xuICAgICAgICAgICAgYDxiIHN0eWxlPVwiY29sb3I6ZGFya29saXZlZ3JlZW5cIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuZGFpbHlTYW5Mb3NzUmVzdGFydGVkJ1xuICAgICAgICAgICAgKX0uPC9iPmBcbiAgICAgICAgICBhY3Rvci51cGRhdGUoe1xuICAgICAgICAgICAgJ2RhdGEuYXR0cmlicy5zYW4uZGFpbHlMb3NzJzogMCxcbiAgICAgICAgICAgICdkYXRhLmF0dHJpYnMuc2FuLm9uZUZpZnRoU2FuaXR5Jzogb25lRmlmdGhTYW5pdHlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhvdXJzID0gN1xuICAgICAgICBpZiAoaG91cnMgPiAwICYmIG1wVmFsdWUgPCBtcE1heCkge1xuICAgICAgICAgIGxldCBtYWdpY0Ftb3VudCA9IGhvdXJzICogTWF0aC5jZWlsKHBvdyAvIDEwMClcbiAgICAgICAgICBtYWdpY0Ftb3VudCA9IE1hdGgubWluKG1hZ2ljQW1vdW50LCBtcE1heCAtIG1wVmFsdWUpXG4gICAgICAgICAgY2hhdENvbnRlbnQgPVxuICAgICAgICAgICAgY2hhdENvbnRlbnQgK1xuICAgICAgICAgICAgYDxiIHN0eWxlPVwiY29sb3I6ZGFya29saXZlZ3JlZW5cIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICdDb0M3Lm1hZ2ljUG9pbnRzUmVjb3ZlcmVkJ1xuICAgICAgICAgICAgKX06ICR7bWFnaWNBbW91bnR9LjwvYj5gXG4gICAgICAgICAgYWN0b3IudXBkYXRlKHtcbiAgICAgICAgICAgICdkYXRhLmF0dHJpYnMubXAudmFsdWUnOlxuICAgICAgICAgICAgICBhY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5tcC52YWx1ZSArIG1hZ2ljQW1vdW50XG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKSxcbiAgICAgIGNvbnRlbnQ6IGNoYXRDb250ZW50LFxuICAgICAgdHlwZTogQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLk9USEVSXG4gICAgfVxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB0b2dnbGVYUEdhaW4gKHRvZ2dsZSkge1xuICAgIGF3YWl0IGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3hwRW5hYmxlZCcsIHRvZ2dsZSlcbiAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICB0b2dnbGVcbiAgICAgICAgPyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuWFBHYWluRW5hYmxlZCcpXG4gICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlhQR2FpbkRpc2FibGVkJylcbiAgICApXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcm9sbERpY2UgKGV2ZW50LCBvcHRpb25zID0ge30pIHtcbiAgICBvcHRpb25zLmFza1ZhbHVlID0gIW9wdGlvbnMudGhyZXNob2xkXG4gICAgbGV0IGRpY2VNb2RpZmllciwgZGlmZmljdWx0eSwgZmxhdERpY2VNb2RpZmllciwgZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgbGV0IHRocmVzaG9sZCA9IG9wdGlvbnMudGhyZXNob2xkXG5cbiAgICBpZiAodW5kZWZpbmVkICE9PSBvcHRpb25zLm1vZGlmaWVyKSBkaWNlTW9kaWZpZXIgPSBOdW1iZXIob3B0aW9ucy5tb2RpZmllcilcbiAgICBpZiAodW5kZWZpbmVkICE9PSBvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgIGRpZmZpY3VsdHkgPSBDb0M3VXRpbGl0aWVzLmNvbnZlcnREaWZmaWN1bHR5KG9wdGlvbnMuZGlmZmljdWx0eSlcbiAgICB9XG5cbiAgICBpZiAoIWV2ZW50Py5zaGlmdEtleSAmJiAhb3B0aW9ucy5mYXN0Rm9yd2FyZCkge1xuICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShvcHRpb25zKVxuICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgIGRpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgICBkaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICB0aHJlc2hvbGQgPSBOdW1iZXIodXNhZ2UuZ2V0KCd0aHJlc2hvbGQnKSlcbiAgICAgICAgZmxhdERpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXREaWNlTW9kaWZpZXInKSlcbiAgICAgICAgZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdFRocmVzaG9sZE1vZGlmaWVyJykpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYWN0b3JzID0gW11cblxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSAmJiBjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQubGVuZ3RoKSB7XG4gICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIGNhbnZhcy50b2tlbnMuY29udHJvbGxlZCkge1xuICAgICAgICBhY3RvcnMucHVzaCh0b2tlbi5hY3Rvci50b2tlbktleSlcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGdhbWUudXNlci5jaGFyYWN0ZXIpIHtcbiAgICAgIGFjdG9ycy5wdXNoKGdhbWUudXNlci5jaGFyYWN0ZXIudG9rZW5LZXkpXG4gICAgfVxuXG4gICAgZm9yIChjb25zdCB0ayBvZiBhY3RvcnMpIHtcbiAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kaWZpZXIgfHwgMFxuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IGRpZmZpY3VsdHkgfHwgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICBjaGVjay5yYXdWYWx1ZSA9IHRocmVzaG9sZFxuICAgICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IGZsYXREaWNlTW9kaWZpZXJcbiAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgICAgY2hlY2suYWN0b3IgPSB0a1xuICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgIH1cblxuICAgIGlmICghYWN0b3JzLmxlbmd0aCkge1xuICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IGRpY2VNb2RpZmllciB8fCAwXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgIGNoZWNrLnJhd1ZhbHVlID0gdGhyZXNob2xkXG4gICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gZmxhdERpY2VNb2RpZmllclxuICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHVwZGF0ZUNoYXJTaGVldHMgKCkge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgZm9yIChjb25zdCBhIG9mIGdhbWUuYWN0b3JzLmNvbnRlbnRzKSB7XG4gICAgICAgIGlmIChhPy5kYXRhPy50eXBlID09PSAnY2hhcmFjdGVyJyAmJiBhPy5zaGVldCAmJiBhPy5zaGVldD8ucmVuZGVyZWQpIHtcbiAgICAgICAgICBhLnVwZGF0ZSh7ICdkYXRhLmZsYWdzLmxvY2tlZCc6IHRydWUgfSlcbiAgICAgICAgICBhLnJlbmRlcihmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGNvbnN0IGEgb2YgZ2FtZS5hY3RvcnMuY29udGVudHMpIHtcbiAgICAgICAgaWYgKGEuaXNPd25lcikge1xuICAgICAgICAgIGEudXBkYXRlKHsgJ2RhdGEuZmxhZ3MubG9ja2VkJzogdHJ1ZSB9KVxuICAgICAgICAgIGEucmVuZGVyKGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCBmcm9tIF9vbkRyb3AgdG8gZ2V0IHRoZSBkcm9wcGVkIGVudGl0eVR5cGUgb3IgZW50aXR5VHlwZSBmcm9tIGEgZm9sZGVyXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXG4gICAqIEByZXR1cm5zIFtpdGVtc10gYXJyYXkgb2YgaXRlbXNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXREYXRhRnJvbURyb3BFdmVudCAoZXZlbnQsIGVudGl0eVR5cGUgPSAnSXRlbScpIHtcbiAgICBpZiAoZXZlbnQub3JpZ2luYWxFdmVudCkgcmV0dXJuIFtdXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGFMaXN0ID0gSlNPTi5wYXJzZShldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpKVxuICAgICAgaWYgKGRhdGFMaXN0LnR5cGUgPT09ICdGb2xkZXInICYmIGRhdGFMaXN0LmRvY3VtZW50TmFtZSA9PT0gZW50aXR5VHlwZSkge1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBnYW1lLmZvbGRlcnMuZ2V0KGRhdGFMaXN0LmlkKVxuICAgICAgICBpZiAoIWZvbGRlcikgcmV0dXJuIFtdXG4gICAgICAgIHJldHVybiBmb2xkZXIuY29udGVudHNcbiAgICAgIH0gZWxzZSBpZiAoZGF0YUxpc3QudHlwZSA9PT0gZW50aXR5VHlwZSkge1xuICAgICAgICBpZiAoZGF0YUxpc3QucGFjaykge1xuICAgICAgICAgIGNvbnN0IHBhY2sgPSBnYW1lLnBhY2tzLmdldChkYXRhTGlzdC5wYWNrKVxuICAgICAgICAgIGlmIChwYWNrLm1ldGFkYXRhLmVudGl0eSAhPT0gZW50aXR5VHlwZSkgcmV0dXJuIFtdXG4gICAgICAgICAgcmV0dXJuIFthd2FpdCBwYWNrLmdldERvY3VtZW50KGRhdGFMaXN0LmlkKV1cbiAgICAgICAgfSBlbHNlIGlmIChkYXRhTGlzdC5kYXRhKSB7XG4gICAgICAgICAgcmV0dXJuIFtkYXRhTGlzdF1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gW2dhbWUuaXRlbXMuZ2V0KGRhdGFMaXN0LmlkKV1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtdXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY29weVRvQ2xpcGJvYXJkICh0ZXh0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChuYXZpZ2F0b3IuY2xpcGJvYXJkICYmIHdpbmRvdy5pc1NlY3VyZUNvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHRleHQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJylcbiAgICAgICAgdGV4dEFyZWEudmFsdWUgPSB0ZXh0XG4gICAgICAgIHRleHRBcmVhLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJ1xuICAgICAgICB0ZXh0QXJlYS5zdHlsZS5sZWZ0ID0gJy05OTlweCdcbiAgICAgICAgdGV4dEFyZWEuc3R5bGUudG9wID0gJy05OTlweCdcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZXh0QXJlYSlcbiAgICAgICAgdGV4dEFyZWEuZm9jdXMoKVxuICAgICAgICB0ZXh0QXJlYS5zZWxlY3QoKVxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5JylcbiAgICAgICAgICAgID8gcmVzb2x2ZSgpXG4gICAgICAgICAgICA6IHJlamVjdChcbiAgICAgICAgICAgICAgbmV3IEVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5VbmFibGVUb0NvcHlUb0NsaXBib2FyZCcpKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIHRleHRBcmVhLnJlbW92ZSgpXG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVycikpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5VbmFibGVUb0NvcHlUb0NsaXBib2FyZCcpKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBxdW90ZVJlZ0V4cCAoc3RyaW5nKSB7XG4gICAgLy8gaHR0cHM6Ly9iaXRidWNrZXQub3JnL2NnZ2FlcnRuZXIvanMtaGFja3MvcmF3L21hc3Rlci9xdW90ZS5qc1xuICAgIGNvbnN0IGxlbiA9IHN0cmluZy5sZW5ndGhcbiAgICBsZXQgcVN0cmluZyA9ICcnXG5cbiAgICBmb3IgKGxldCBjdXJyZW50LCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICBjdXJyZW50ID0gc3RyaW5nLmNoYXJBdChpKVxuXG4gICAgICBpZiAoY3VycmVudCA+PSAnICcgJiYgY3VycmVudCA8PSAnficpIHtcbiAgICAgICAgaWYgKGN1cnJlbnQgPT09ICdcXFxcJyB8fCBjdXJyZW50ID09PSBcIidcIikge1xuICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFwnXG4gICAgICAgIH1cblxuICAgICAgICBxU3RyaW5nICs9IGN1cnJlbnQucmVwbGFjZSgvWy1bXFxdL3t9KCkqKz8uXFxcXF4kfF0vZywgJ1xcXFwkJicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzd2l0Y2ggKGN1cnJlbnQpIHtcbiAgICAgICAgICBjYXNlICdcXGInOlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXGInXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnXFxmJzpcbiAgICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFxmJ1xuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgJ1xcbic6XG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcbidcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdcXHInOlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXHInXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnXFx0JzpcbiAgICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFx0J1xuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgJ1xcdic6XG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcdidcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXHUnXG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KVxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDQ7IC0taiA+PSBjdXJyZW50Lmxlbmd0aDsgcVN0cmluZyArPSAnMCcpO1xuICAgICAgICAgICAgcVN0cmluZyArPSBjdXJyZW50XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcVN0cmluZ1xuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIGdhbWUsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBDb0M3Um9sbCB9IGZyb20gJy4vaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NvbkNoZWNrIHtcbiAgY29uc3RydWN0b3IgKGFjdG9ySWQgPSBudWxsLCBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyKSB7XG4gICAgdGhpcy5jaGVjayA9IG5ldyBDb0M3Q2hlY2soYWN0b3JJZClcbiAgICB0aGlzLmNoZWNrLmNoYXJhY3RlcmlzdGljID0gJ2NvbidcbiAgICB0aGlzLmNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgdGhpcy5jaGVjay5kZW55UHVzaCA9IHRydWVcbiAgICB0aGlzLmFjdG9ySWQgPSBhY3RvcklkXG4gIH1cblxuICBnZXQgaXNCbGluZCAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5faXNCbGluZCkge1xuICAgICAgdGhpcy5faXNCbGluZCA9IHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pc0JsaW5kXG4gIH1cblxuICBzZXQgaXNCbGluZCAoeCkge1xuICAgIHRoaXMuX2lzQmxpbmQgPSB4XG4gIH1cblxuICBnZXQgcm9sbE1vZGUgKCkge1xuICAgIGlmICghdGhpcy5fcm9sbE1vZGUpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHJldHVybiB0aGlzLl9yb2xsTW9kZVxuICB9XG5cbiAgc2V0IHJvbGxNb2RlICh4KSB7XG4gICAgaWYgKHggPT09IGZhbHNlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICB0aGlzLl9yb2xsTW9kZSA9IHhcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3JJZCkgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JJZCkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHNldCBhY3RvcklkICh4KSB7XG4gICAgdGhpcy5fYWN0b3JJZCA9IHhcbiAgICB0aGlzLmNoZWNrLmFjdG9yID0geFxuICB9XG5cbiAgZ2V0IGFjdG9ySWQgKCkge1xuICAgIGlmICh0aGlzLl9hY3RvcklkKSByZXR1cm4gdGhpcy5fYWN0b3JJZFxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgdG9rZW5LZXkgKCkge1xuICAgIGlmICh0aGlzLmFjdG9yLmlzVG9rZW4pIHJldHVybiB0aGlzLmFjdG9yLnRva2VuS2V5XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBpc1N1Y2Nlc3MgKCkge1xuICAgIGlmICh0aGlzLmNoZWNrKSByZXR1cm4gdGhpcy5jaGVjay5pc1N1Y2Nlc3NcbiAgICBlbHNlIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGlzUm9sbGVkICgpIHtcbiAgICBpZiAodGhpcy5jaGVjayAmJiB0aGlzLmNoZWNrLmRpY2VzICYmIHRoaXMuY2hlY2suZGljZXMudG90YWwpIHJldHVybiB0cnVlXG4gICAgZWxzZSByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCkge1xuICAgIGNvbnN0IGNvbkNoZWNrID0gbmV3IENvQzdDb25DaGVjaygpXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChjb25DaGVjaywgY2FyZClcbiAgICBjb25zdCBodG1sQ2hlY2sgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yb2xsLXJlc3VsdCcpXG4gICAgQ29DN1JvbGwuZ2V0RnJvbUVsZW1lbnQoaHRtbENoZWNrLCBjb25DaGVjay5jaGVjaylcbiAgICBjb25DaGVjay5tZXNzYWdlSWQgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWRcbiAgICByZXR1cm4gY29uQ2hlY2tcbiAgfVxuXG4gIGFzeW5jIGdldENoZWNrRWxlbWVudCAoKSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGwtcmVzdWx0Lmh0bWwnXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzLmNoZWNrKVxuICAgIGNvbnN0IGh0bWxFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cbiAgICBpZiAoaHRtbEVsZW1lbnQpIHtcbiAgICAgIGh0bWxFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2NoYXQtY2FyZCcsICdpdGVtLWNhcmQnLCAncm9sbC1jYXJkJylcbiAgICAgIHJldHVybiBodG1sRWxlbWVudFxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgYXN5bmMgdG9NZXNzYWdlIChmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2Nvbi1jaGVjay5odG1sJ1xuXG4gICAgaWYgKGZhc3RGb3J3YXJkKSB7XG4gICAgICBhd2FpdCB0aGlzLnJvbGxDb24oKVxuICAgIH1cblxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcylcbiAgICBjb25zdCBodG1sRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICBpZiAoZmFzdEZvcndhcmQpIHtcbiAgICAgIGNvbnN0IGNoZWNrID0gaHRtbEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnJvbGwtcmVzdWx0JylcbiAgICAgIGNoZWNrLnJlcGxhY2VXaXRoKGF3YWl0IHRoaXMuZ2V0Q2hlY2tFbGVtZW50KCkpXG4gICAgfVxuXG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGxldCBzcGVha2VyXG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLnRva2VuKSBzcGVha2VyRGF0YS50b2tlbiA9IHRoaXMudG9rZW5cbiAgICAgIGVsc2Ugc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLmFjdG9yXG4gICAgICBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIH1cblxuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yLnVzZXIgPyB0aGlzLmFjdG9yLnVzZXIgOiBnYW1lLnVzZXJcblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IHNwZWFrZXIsXG4gICAgICBmbGF2b3I6IHRoaXMuZmxhdm9yLFxuICAgICAgY29udGVudDogaHRtbEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXMoZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSlcbiAgICApIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKSAvLyBDaGFuZ2UgZm9yIHVzZXJcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSkudGhlbihtc2cgPT4ge1xuICAgICAgcmV0dXJuIG1zZ1xuICAgIH0pXG4gIH1cblxuICBhc3luYyByb2xsQ29uICgpIHtcbiAgICB0aGlzLmNoZWNrLmhpZGVEaWNlUmVzdWx0ID0gdHJ1ZVxuICAgIGF3YWl0IHRoaXMuY2hlY2suX3BlcmZvcm0oKVxuICAgIGlmICghdGhpcy5pc0JsaW5kICYmICF0aGlzLmlzUm9sbGVkICYmICF0aGlzLmlzU3VjY2Vzcykge1xuICAgICAgaWYgKHRoaXMuc3RheUFsaXZlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmRlYWQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy51bmNvbnNjaW91cylcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5hcHBsaWVkID0gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb24tY2hlY2suaHRtbCdcblxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcylcbiAgICBjb25zdCBodG1sRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICBjb25zdCBjaGVjayA9IGh0bWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yb2xsLXJlc3VsdCcpXG4gICAgY2hlY2sucmVwbGFjZVdpdGgoYXdhaXQgdGhpcy5nZXRDaGVja0VsZW1lbnQoKSlcblxuICAgIGlmICghdGhpcy5pc0JsaW5kICYmIHRoaXMuaXNSb2xsZWQgJiYgIXRoaXMuaXNTdWNjZXNzKSB7XG4gICAgICBpZiAodGhpcy5zdGF5QWxpdmUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZGVhZClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghdGhpcy5tZXNzYWdlSWQpIHJldHVyblxuICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG5cbiAgICBjb25zdCBtc2cgPSBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBodG1sRWxlbWVudC5vdXRlckhUTUwgfSlcbiAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICByZXR1cm4gbXNnXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEaWFsb2csIHJlbmRlclRlbXBsYXRlICovXG5cbmV4cG9ydCBjbGFzcyBTa2lsbFNlbGVjdERpYWxvZyBleHRlbmRzIERpYWxvZyB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuc2VsZWN0LXNraWxsJylcbiAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiB0aGlzLl9vblNlbGVjdFNraWxsQ2xpY2tlZChldmVudCkpXG4gIH1cblxuICBhc3luYyBfb25TZWxlY3RTa2lsbENsaWNrZWQgKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICAvLyBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldCggdGhpcy5kYXRhLmRhdGEuYWN0b3JJZCk7XG4gICAgLy8gYXdhaXQgYWN0b3IuYWRkU2tpbGwoIHRoaXMuZGF0YS5kYXRhLnNraWxsc1tOdW1iZXIobGkuZGF0YXNldC5pbmRleCldLCB0aGlzLmRhdGEuZGF0YS50eXBlKTtcbiAgICB0aGlzLmRhdGEuZGF0YS5za2lsbHNbTnVtYmVyKGxpLmRhdGFzZXQuaW5kZXgpXS5zZWxlY3RlZCA9IHRydWVcbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLmFkZGVkKSB0aGlzLmRhdGEuZGF0YS5hZGRlZCA9IDBcbiAgICB0aGlzLmRhdGEuZGF0YS5hZGRlZCsrXG4gICAgY29uc3QgZm9ybSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnNraWxsLXNlbGVjdG9yJylcbiAgICBjb25zdCBkaXZDb3VudCA9IGZvcm0ucXVlcnlTZWxlY3RvcignLmNvdW50JylcbiAgICBkaXZDb3VudC5pbm5lclRleHQgPSB0aGlzLmRhdGEuZGF0YS5hZGRlZFxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hZGRlZCA+PSB0aGlzLmRhdGEuZGF0YS5vcHRpb25zQ291bnQpIHtcbiAgICAgIHRoaXMuY2xvc2UoKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKGRhdGEpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NraWxsLXNlbGVjdC5odG1sJyxcbiAgICAgIGRhdGFcbiAgICApIC8vIFJlbmRlciB0ZW1wbGF0ZSBidWcgYXZlYyBjZXJ0YWluZXMgZGF0YVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBTa2lsbFNlbGVjdERpYWxvZyhcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICBidXR0b25zOiB7fSxcbiAgICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFkYXRhLmFkZGVkID49IGRhdGEub3B0aW9uc0NvdW50KSByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gZGF0YS5za2lsbHMuZmlsdGVyKHNraWxsID0+IHNraWxsLnNlbGVjdGVkKVxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoc2VsZWN0ZWQpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7IGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnc2tpbGwtc2VsZWN0J10gfVxuICAgICAgKVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBEaWFsb2csIHJlbmRlclRlbXBsYXRlICovXG5cbmV4cG9ydCBjbGFzcyBQb2ludFNlbGVjdERpYWxvZyBleHRlbmRzIERpYWxvZyB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbS1uYW1lJylcbiAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiB0aGlzLl9vblNlbGVjdENoYXJhY3RlcmlzdGljKGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJ2J1dHRvbicpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uQnV0dG9uQ2xpY2tlZChldmVudCkpXG4gIH1cblxuICBhc3luYyBfb25TZWxlY3RDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW1MaXN0ID0gbGkuY2xvc2VzdCgnLml0ZW0tbGlzdCcpXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1MaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWxlY3RhYmxlJykpIHtcbiAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKVxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2l0ZW0uZGF0YXNldC5rZXldLnNlbGVjdGVkID0gZmFsc2VcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljc1tpdGVtLmRhdGFzZXQua2V5XS5vcHRpb25hbCA9IGZhbHNlXG4gICAgfVxuICAgICQobGkpLnRvZ2dsZUNsYXNzKCdzZWxlY3RlZCcpXG4gICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2xpLmRhdGFzZXQua2V5XS5zZWxlY3RlZCA9IHRydWVcbiAgICBjb25zdCB0b3RhbFBvaW50cyA9IGxpXG4gICAgICAuY2xvc2VzdCgnI3NraWxsLXNlbGVjdGlvbi1mb3JtJylcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcucG9pbnRzJylcbiAgICB0b3RhbFBvaW50cy5pbm5lclRleHQgPVxuICAgICAgdGhpcy5kYXRhLmRhdGEudG90YWwgK1xuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2xpLmRhdGFzZXQua2V5XS5tdWx0aXBsaWVyICpcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2xpLmRhdGFzZXQua2V5XS52YWx1ZVxuICAgIGNvbnN0IGJ1dHRvbiA9IGxpXG4gICAgICAuY2xvc2VzdCgnI3NraWxsLXNlbGVjdGlvbi1mb3JtJylcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCdidXR0b24udmFsaWRhdGUnKVxuICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdpbmFjdGl2ZScpXG4gICAgdGhpcy5kYXRhLmRhdGEucmVzb2x2ZWQgPSB0cnVlXG4gICAgLy8gY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoIHRoaXMuZGF0YS5kYXRhLmFjdG9ySWQpO1xuICAgIC8vIGF3YWl0IGFjdG9yLmFkZFNraWxsKCB0aGlzLmRhdGEuZGF0YS5za2lsbHNbTnVtYmVyKGxpLmRhdGFzZXQuaW5kZXgpXSwgdGhpcy5kYXRhLmRhdGEudHlwZSk7XG4gICAgLy8gZXZlbnQuY3VycmVudFRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIC8vIGlmKCAhdGhpcy5kYXRhLmRhdGEuYWRkZWQpIHRoaXMuZGF0YS5kYXRhLmFkZGVkID0gMDtcbiAgICAvLyB0aGlzLmRhdGEuZGF0YS5hZGRlZCsrO1xuICAgIC8vIGNvbnN0IGZvcm0gPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5wb2ludC1zZWxlY3RvcicpO1xuICAgIC8vIGNvbnN0IGRpdkNvdW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcuY291bnQnKTtcbiAgICAvLyBkaXZDb3VudC5pbm5lclRleHQgPSB0aGlzLmRhdGEuZGF0YS5hZGRlZDtcbiAgICAvLyBpZiggdGhpcy5kYXRhLmRhdGEuYWRkZWQgPj0gdGhpcy5kYXRhLmRhdGEub3B0aW9ucykgdGhpcy5jbG9zZSgpO1xuICAgIC8vIHJldHVybiBldmVudDtcbiAgfVxuXG4gIGFzeW5jIF9vbkJ1dHRvbkNsaWNrZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaW5hY3RpdmUnKSkgcmV0dXJuXG4gICAgc3VwZXIuY2xvc2UoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvcG9pbnQtc2VsZWN0Lmh0bWwnLFxuICAgICAgZGF0YVxuICAgIClcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBjb25zdCBkbGcgPSBuZXcgUG9pbnRTZWxlY3REaWFsb2coXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgYnV0dG9uczoge30sXG4gICAgICAgICAgY2xvc2U6ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChkYXRhLnJlc29sdmVkKSByZXR1cm4gcmVzb2x2ZShkYXRhKVxuICAgICAgICAgICAgZWxzZSByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHsgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjaGFyLXNlbGVjdCddIH1cbiAgICAgIClcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCByZW5kZXJUZW1wbGF0ZSAqL1xuXG5leHBvcnQgY2xhc3MgQ2hhcmFjU2VsZWN0RGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5pdGVtLW5hbWUnKVxuICAgICAgLmNsaWNrKGFzeW5jIGV2ZW50ID0+IHRoaXMuX29uU2VsZWN0Q2hhcmFjdGVyaXN0aWMoZXZlbnQpKVxuICB9XG5cbiAgYXN5bmMgX29uU2VsZWN0Q2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICB0aGlzLmRhdGEuZGF0YS5zZWxlY3RlZCA9IGxpLmRhdGFzZXQua2V5XG4gICAgdGhpcy5jbG9zZSgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9jaGFyLXNlbGVjdC5odG1sJyxcbiAgICAgIGRhdGFcbiAgICApXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IENoYXJhY1NlbGVjdERpYWxvZyhcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICBidXR0b25zOiB7fSxcbiAgICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRhdGEuc2VsZWN0ZWQpIHJldHVybiByZXNvbHZlKGRhdGEuc2VsZWN0ZWQpXG4gICAgICAgICAgICBlbHNlIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgeyBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2NoYXItc2VsZWN0J10gfVxuICAgICAgKVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEaWFsb2csIHJlbmRlclRlbXBsYXRlLCBSb2xsICovXG5cbmV4cG9ydCBjbGFzcyBDaGFyYWNSb2xsRGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcbiAgY29uc3RydWN0b3IgKGRhdGEsIG9wdGlvbnMpIHtcbiAgICBzdXBlcihkYXRhLCBvcHRpb25zKVxuXG4gICAgdGhpcy5yb2xsZWQgPSBkYXRhLnJvbGxlZCB8fCB7fVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGh0bWwub24oJ2NoYW5nZScsICdpbnB1dCcsIHRoaXMuX29uQ2hhbmdlSW5wdXQuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdzdWJtaXQnLCAnZm9ybScsIHRoaXMuX29uU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJvbGwtY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgdGhpcy5fb25Sb2xsQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuaW5jcmVhc2UtY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgdGhpcy5fb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLmRlY3JlYXNlLWNoYXJhY3RlcmlzdGljJyxcbiAgICAgIHRoaXMuX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYy5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yZXNldC1jaGFyYWN0ZXJpc3RpYycsXG4gICAgICB0aGlzLl9vblJlc2V0Q2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKCdjbGljaycsICdidXR0b24nLCB0aGlzLl9vbkJ1dHRvbi5iaW5kKHRoaXMpKVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbENoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGNoYXJhY0tleSA9IGxpLmRhdGFzZXQua2V5XG4gICAgYXdhaXQgdGhpcy5yb2xsQ2hhcmFjdGVyaXN0aWMoY2hhcmFjS2V5KVxuICB9XG5cbiAgYXN5bmMgX29uSW5jcmVhc2VDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBjaGFyYWNLZXkgPSBsaS5kYXRhc2V0LmtleVxuICAgIHRoaXMuaW5jcmVhc2VDaGFyYWN0ZXJpc3RpYyhjaGFyYWNLZXkpXG4gIH1cblxuICBhc3luYyBfb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGNoYXJhY0tleSA9IGxpLmRhdGFzZXQua2V5XG4gICAgdGhpcy5kZWNyZWFzZUNoYXJhY3RlcmlzdGljKGNoYXJhY0tleSlcbiAgfVxuXG4gIGFzeW5jIF9vblJlc2V0Q2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgY2hhcmFjS2V5ID0gbGkuZGF0YXNldC5rZXlcbiAgICB0aGlzLnJlc2V0Q2hhcmFjdGVyaXN0aWMoY2hhcmFjS2V5KVxuICB9XG5cbiAgYXN5bmMgX29uQnV0dG9uIChldmVudCkge1xuICAgIGNvbnN0IGFjdGlvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25cbiAgICBpZiAoYWN0aW9uID09PSAncm9sbCcpIHtcbiAgICAgIGZvciAoY29uc3QgY2hhciBvZiBbXG4gICAgICAgICdzdHInLFxuICAgICAgICAnY29uJyxcbiAgICAgICAgJ3NpeicsXG4gICAgICAgICdkZXgnLFxuICAgICAgICAnYXBwJyxcbiAgICAgICAgJ2ludCcsXG4gICAgICAgICdwb3cnLFxuICAgICAgICAnZWR1JyxcbiAgICAgICAgJ2x1Y2snXG4gICAgICBdKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucm9sbENoYXJhY3RlcmlzdGljKGNoYXIpXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChcbiAgICAgIGFjdGlvbiA9PT0gJ3ZhbGlkYXRlJyAmJlxuICAgICAgIWV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbmFjdGl2ZScpXG4gICAgKSB7XG4gICAgICB0aGlzLmNoZWNrVG90YWwoKVxuICAgICAgdGhpcy5jbG9zZSgpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcm9sbENoYXJhY3RlcmlzdGljIChrZXkpIHtcbiAgICBjb25zdCBsaSA9IHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcihgbGkuaXRlbVtkYXRhLWtleT0ke2tleX1dYClcbiAgICBjb25zdCBpbnB1dCA9IGxpPy5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpXG4gICAgY29uc3QgZm9ybXVsYSA9IHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5yb2xsc1trZXldXG4gICAgaWYgKGlucHV0ICYmIGZvcm11bGEpIHtcbiAgICAgIGlmIChpc05hTihOdW1iZXIoZm9ybXVsYSkpKSB7XG4gICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgUm9sbChmb3JtdWxhKVxuICAgICAgICBhd2FpdCByb2xsLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgcm9sbC50b01lc3NhZ2Uoe1xuICAgICAgICAgIGZsYXZvcjogYFJvbGxpbmcgY2hhcmFjdGVyaXNpdGljICR7dGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmxpc3Rba2V5XS5sYWJlbH06ICR7Zm9ybXVsYX1gXG4gICAgICAgIH0pXG4gICAgICAgIGlucHV0LnZhbHVlID0gcm9sbC50b3RhbFxuICAgICAgfSBlbHNlIGlucHV0LnZhbHVlID0gTnVtYmVyKGZvcm11bGEpXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzW2tleV0gPSBOdW1iZXIoaW5wdXQudmFsdWUpXG4gICAgICBpZiAoIXRoaXMucm9sbGVkKSB0aGlzLnJvbGxlZCA9IHt9XG4gICAgICB0aGlzLnJvbGxlZFtrZXldID0gdHJ1ZVxuICAgIH1cbiAgICB0aGlzLmNoZWNrVG90YWwoKVxuICB9XG5cbiAgYXN5bmMgaW5jcmVhc2VDaGFyYWN0ZXJpc3RpYyAoa2V5KSB7XG4gICAgY29uc3QgbGkgPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoYGxpLml0ZW1bZGF0YS1rZXk9JHtrZXl9XWApXG4gICAgY29uc3QgaW5wdXQgPSBsaT8ucXVlcnlTZWxlY3RvcignaW5wdXQnKVxuICAgIGlmIChpbnB1dCkge1xuICAgICAgaW5wdXQudmFsdWUgPSBOdW1iZXIoaW5wdXQudmFsdWUpICsgMVxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldID0gTnVtYmVyKGlucHV0LnZhbHVlKVxuICAgIH1cbiAgICB0aGlzLmNoZWNrVG90YWwoKVxuICB9XG5cbiAgYXN5bmMgZGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyAoa2V5KSB7XG4gICAgY29uc3QgbGkgPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoYGxpLml0ZW1bZGF0YS1rZXk9JHtrZXl9XWApXG4gICAgY29uc3QgaW5wdXQgPSBsaT8ucXVlcnlTZWxlY3RvcignaW5wdXQnKVxuICAgIGlmIChpbnB1dCAmJiBOdW1iZXIoaW5wdXQudmFsdWUpID4gMCkge1xuICAgICAgaW5wdXQudmFsdWUgPSBOdW1iZXIoaW5wdXQudmFsdWUpIC0gMVxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldID0gTnVtYmVyKGlucHV0LnZhbHVlKVxuICAgIH1cbiAgICB0aGlzLmNoZWNrVG90YWwoKVxuICB9XG5cbiAgYXN5bmMgcmVzZXRDaGFyYWN0ZXJpc3RpYyAoa2V5KSB7XG4gICAgY29uc3QgbGkgPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoYGxpLml0ZW1bZGF0YS1rZXk9JHtrZXl9XWApXG4gICAgY29uc3QgaW5wdXQgPSBsaT8ucXVlcnlTZWxlY3RvcignaW5wdXQnKVxuICAgIGlmIChpbnB1dCkge1xuICAgICAgaW5wdXQudmFsdWUgPSBudWxsXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzW2tleV0gPSAwXG4gICAgfVxuICAgIHRoaXMuY2hlY2tUb3RhbCgpXG4gIH1cblxuICBhc3luYyBfb25DaGFuZ2VJbnB1dCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaW5wdXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgdmFsdWUgPSBOdW1iZXIoaW5wdXQudmFsdWUpXG4gICAgaWYgKCFpc05hTih2YWx1ZSkpIHtcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNbaW5wdXQubmFtZV0gPSB2YWx1ZVxuICAgIH1cblxuICAgIHRoaXMuY2hlY2tUb3RhbCgpXG4gIH1cblxuICBjaGVja1RvdGFsICgpIHtcbiAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsID0gMFxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1xuICAgICkpIHtcbiAgICAgIGlmIChrZXkgIT09ICdsdWNrJykge1xuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsICs9IHZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignLnBvaW50cycpXG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMuZW5hYmxlZCkge1xuICAgICAgaWYgKFxuICAgICAgICBOdW1iZXIodGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbCkgIT09XG4gICAgICAgIE51bWJlcih0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnZhbHVlKVxuICAgICAgKSB7XG4gICAgICAgIHZhbGlkYXRpb24uY2xhc3NMaXN0LmFkZCgnd2FybmluZycpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWxpZGF0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ3dhcm5pbmcnKVxuICAgICAgICBjb25zdCB2YWxpZGF0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignYnV0dG9uLnZhbGlkYXRlJylcbiAgICAgICAgdmFsaWRhdGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaW5hY3RpdmUnKVxuICAgICAgICB0aGlzLmRhdGEuZGF0YS52YWxpZGF0ZSA9IHRydWVcbiAgICAgIH1cbiAgICAgIGNvbnN0IHZhbHVlID0gdmFsaWRhdGlvbi5xdWVyeVNlbGVjdG9yKCcudmFsdWUnKVxuICAgICAgdmFsdWUuaW5uZXJUZXh0ID0gdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy52YWx1ZVxuICAgIH1cblxuICAgIGNvbnN0IHRvdGFsID0gdmFsaWRhdGlvbi5xdWVyeVNlbGVjdG9yKCcudG90YWwnKVxuICAgIHRvdGFsLmlubmVyVGV4dCA9IHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWxcblxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuZW5hYmxlZCkge1xuICAgICAgaWYgKHRoaXMucm9sbGVkKSB7XG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLnZhbGlkYXRlID1cbiAgICAgICAgICAhT2JqZWN0LmVudHJpZXModGhpcy5yb2xsZWQpLmZpbmQoZWwgPT4gIWVsKSAmJlxuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHRoaXMucm9sbGVkKS5sZW5ndGggPT09IDlcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5kYXRhLnZhbGlkYXRlKSB7XG4gICAgICAgICAgY29uc3QgdmFsaWRhdGVCdXR0b24gPVxuICAgICAgICAgICAgdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCdidXR0b24udmFsaWRhdGUnKVxuICAgICAgICAgIHZhbGlkYXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2luYWN0aXZlJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblN1Ym1pdCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhKSB7XG4gICAgY29uc3Qgcm9sbGVkID0ge31cbiAgICBkYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwgPSAwXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzKSkge1xuICAgICAgaWYgKGtleSAhPT0gJ2x1Y2snKSB7XG4gICAgICAgIGRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbCArPSB2YWx1ZSB8fCAwXG4gICAgICB9XG4gICAgICBpZiAoIWlzTmFOKHZhbHVlKSAmJiB2YWx1ZSA+IDApIHtcbiAgICAgICAgcm9sbGVkW2tleV0gPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy5lbmFibGVkKSB7XG4gICAgICBpZiAoXG4gICAgICAgIE51bWJlcihkYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwpICE9PVxuICAgICAgICBOdW1iZXIoZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnZhbHVlKVxuICAgICAgKSB7XG4gICAgICAgIGRhdGEucG9pbnRzV2FybmluZyA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2NoYXItcm9sbC5odG1sJyxcbiAgICAgIGRhdGFcbiAgICApXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IENoYXJhY1JvbGxEaWFsb2coXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgcm9sbGVkOiByb2xsZWQsXG4gICAgICAgICAgYnV0dG9uczoge30sXG4gICAgICAgICAgY2xvc2U6ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChkYXRhLnZhbGlkYXRlKSByZXR1cm4gcmVzb2x2ZSh0cnVlKVxuICAgICAgICAgICAgZWxzZSByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHsgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjaGFyLXNlbGVjdCddIH1cbiAgICAgIClcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUgKi9cblxuZXhwb3J0IGNsYXNzIFNraWxsU3BlY1NlbGVjdERpYWxvZyB7XG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKFxuICAgIHNraWxscyxcbiAgICBzcGVjaWFsaXphdGlvbk5hbWUsXG4gICAgYmFzZVZhbHVlID0gbnVsbCxcbiAgICBuYW1lID0gbnVsbFxuICApIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NraWxsLXNwZWMtc2VsZWN0Lmh0bWwnLFxuICAgICAge1xuICAgICAgICBoYXNTa2lsbHM6IHNraWxscy5sZW5ndGggPiAwLFxuICAgICAgICBza2lsbHM6IHNraWxscyxcbiAgICAgICAgYmFzZTogYmFzZVZhbHVlLFxuICAgICAgICBuYW1lOiBuYW1lXG4gICAgICB9XG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGxldCBmb3JtRGF0YSA9IG51bGxcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBEaWFsb2coe1xuICAgICAgICB0aXRsZTogbmFtZVxuICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ta2lsbFNlbGVjdEJhc2UnLCB7IG5hbWU6IG5hbWUgfSlcbiAgICAgICAgICA6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2tpbGxTcGVjU2VsZWN0VGl0bGUnLCB7XG4gICAgICAgICAgICBzcGVjaWFsaXphdGlvbjogc3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICAgICAgfSksXG4gICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5WYWxpZGF0ZScpLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGh0bWwgPT4ge1xuICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShcbiAgICAgICAgICAgICAgICBodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNza2lsbC1zZWxlY3QtZm9ybScpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZm9ybURhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0OiAndmFsaWRhdGUnLFxuICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIHVpICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVJbml0aWF0b3IgfSBmcm9tICcuL21lbGVlLWluaXRpYXRvci5qcydcbmltcG9ydCB7IENvQzdNZWxlZVRhcmdldCB9IGZyb20gJy4vbWVsZWUtdGFyZ2V0LmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN01lbGVlUmVzb2x0aW9uIHtcbiAgY29uc3RydWN0b3IgKFxuICAgIGluaXRpYXRvck1lc3NhZ2UgPSBudWxsLFxuICAgIHRhcmdldE1lc3NhZ2UgPSBudWxsLFxuICAgIG1lc3NhZ2VJZCA9IG51bGxcbiAgKSB7XG4gICAgdGhpcy5pbml0aWF0b3JNZXNzYWdlID0gaW5pdGlhdG9yTWVzc2FnZVxuICAgIHRoaXMudGFyZ2V0TWVzc2FnZSA9IHRhcmdldE1lc3NhZ2VcbiAgICB0aGlzLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICB9XG5cbiAgYXN5bmMgcHJlQ3JlYXRlTWVzc2FnZSAoKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG5cbiAgICAvLyBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcih7YWN0b3I6IHRoaXMuYWN0b3J9KTtcbiAgICAvLyBpZiggdGhpcy5hY3Rvci5pc1Rva2VuKSBzcGVha2VyLmFsaWFzID0gdGhpcy5hY3Rvci50b2tlbi5uYW1lO1xuXG4gICAgLy8gY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlcjtcblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH1cblxuICAgIC8vIEFkZCBpbWFnZSB0byBjYXJkLlxuICAgIC8vIGRhdGEuZmxhZ3MgPSB7XG4gICAgLy8gICBpbWc6IHRoaXMuYWN0b3IuaXNUb2tlbiA/IHRoaXMuYWN0b3IudG9rZW4uZGF0YS5pbWc6IHRoaXMuYWN0b3IuaW1nXG4gICAgLy8gfTtcblxuICAgIGNvbnN0IHJvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyhyb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICAvLyBpZiAoIHJvbGxNb2RlID09PSAnYmxpbmRyb2xsJyApIGNoYXREYXRhWydibGluZCddID0gdHJ1ZTtcbiAgICBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXG5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcbiAgICB0aGlzLm1lc3NhZ2VJZCA9IGNoYXRNZXNzYWdlLmlkXG4gICAgcmV0dXJuIGNoYXRNZXNzYWdlXG4gIH1cblxuICBnZXQgZGlzcGxheUFjdG9yT25DYXJkICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgfVxuXG4gIGdldCB0YXJnZXQgKCkge1xuICAgIGlmICh0aGlzLnRhcmdldE1lc3NhZ2UpIHtcbiAgICAgIHJldHVybiBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbU1lc3NhZ2VJZCh0aGlzLnRhcmdldE1lc3NhZ2UpXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgdGFyZ2V0VG9rZW4gKCkge1xuICAgIGlmICh0aGlzLnRhcmdldCkgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMudGFyZ2V0LmFjdG9yS2V5KVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgaW5pdGlhdG9yICgpIHtcbiAgICBpZiAodGhpcy5pbml0aWF0b3JNZXNzYWdlKSB7XG4gICAgICByZXR1cm4gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQodGhpcy5pbml0aWF0b3JNZXNzYWdlKVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGluaXRpYXRvclRva2VuICgpIHtcbiAgICBpZiAodGhpcy5pbml0aWF0b3IpIHtcbiAgICAgIHJldHVybiBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmluaXRpYXRvci5hY3RvcktleSlcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIHJlc29sdmUgKCkge1xuICAgIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgc3dpdGNoICh0aGlzLnRhcmdldC5hY3Rpb24pIHtcbiAgICAgICAgY2FzZSAnbm9SZXNwb25zZSc6XG4gICAgICAgICAgaWYgKHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsID4gMCkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLmFjdGlvbiA9ICdyb2xsLW1lbGVlLWRhbWFnZSdcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IHRydWVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluaXRpYXRvck1pc3NlZCcsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5pbWdcbiAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLm5hbWVcbiAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdkb2RnZSc6XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMCAmJlxuICAgICAgICAgICAgdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9XaW5uZXInKVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSBudWxsXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA+IHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLmltZ1xuICAgICAgICAgICAgdGhpcy53aW5uZXJUaXRsZSA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5uYW1lXG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLmFjdGlvbiA9ICdyb2xsLW1lbGVlLWRhbWFnZSdcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IHRydWVcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWxcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Eb2RnZVN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMudGFyZ2V0Lm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMudGFyZ2V0LnNraWxsLmRhdGEuaW1nXG4gICAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy50YXJnZXQuc2tpbGwubmFtZVxuICAgICAgICAgICAgdGhpcy5hY3Rpb24gPSAnZG9kZ2UnXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnZmlnaHRCYWNrJzpcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSAwICYmXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSAwXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1dpbm5lcicpXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IG51bGxcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IGZhbHNlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsID49IHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLmltZ1xuICAgICAgICAgICAgdGhpcy53aW5uZXJUaXRsZSA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5uYW1lXG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsIDw9IHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBUT0RPIHZlcmlmaWVyIGxhIGNvbmRpdGlvbiA8PSB2cyA8XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy50YXJnZXQubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy50YXJnZXQud2VhcG9uLmltZ1xuICAgICAgICAgICAgdGhpcy53aW5uZXJUaXRsZSA9IHRoaXMudGFyZ2V0LndlYXBvbi5uYW1lXG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdtYW5ldXZlcic6XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMCAmJlxuICAgICAgICAgICAgdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9XaW5uZXInKVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSBudWxsXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5pbWdcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLmluaXRpYXRvci53ZWFwb24ubmFtZVxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLnRhcmdldFxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1hbmV1dmVyU3VjY2VzcycsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy50YXJnZXQubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy50YXJnZXQuc2tpbGwuZGF0YS5pbWdcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLnRhcmdldC5za2lsbC5uYW1lXG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPiAwKSB7XG4gICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcbiAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgfSlcbiAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgIHRoaXMucm9sbERhbWFnZSA9IHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluaXRpYXRvck1pc3NlZCcsIHtcbiAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgfSlcbiAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgIHRoaXMucm9sbERhbWFnZSA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKHRoaXMud2lubmVyKSB7XG4gICAgICBpZiAodGhpcy53aW5uZXIucm9sbC5zdWNjZXNzTGV2ZWwgPj0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lKSB7XG4gICAgICAgIHRoaXMud2lubmVyLnJvbGwuY3JpdGljYWxEYW1hZ2UgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLndpbm5lci5yb2xsLmNyaXRpY2FsRGFtYWdlID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuICAgIGlmICh0aGlzLm1lc3NhZ2VJZCkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuICAgICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgICAgaWYgKHRoaXMud2lubmVyKSB7XG4gICAgICAgIGlmICh0aGlzLndpbm5lci50b2tlbikgc3BlYWtlckRhdGEudG9rZW4gPSB0aGlzLndpbm5lci50b2tlbi5kb2N1bW1lbnRcbiAgICAgICAgaWYgKHRoaXMud2lubmVyLmFjdG9yKSBzcGVha2VyRGF0YS5hY3RvciA9IHRoaXMud2lubmVyLmFjdG9yXG4gICAgICB9XG4gICAgICBjb25zdCBzcGVha2VyID0gdGhpcy53aW5uZXIgPyBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHNwZWFrZXJEYXRhKSA6IG51bGxcbiAgICAgIGNvbnN0IHVzZXIgPVxuICAgICAgICB0aGlzLndpbm5lciAmJiB0aGlzLndpbm5lci5hY3Rvci51c2VyXG4gICAgICAgICAgPyB0aGlzLndpbm5lci5hY3Rvci51c2VyXG4gICAgICAgICAgOiBnYW1lLnVzZXJcblxuICAgICAgbGV0IG1zZ1xuICAgICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICAgIC8vIFRPRE86IElmIGNhcmQgaXNuJ3QgZm91bmQgKGNhcmQgd2FzIGRlbGV0ZWQgYmVmb3JlIGNvbXBsZXRpb24pID9cbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKCdSZXNvbGl0aW9uIGNhcmQgbWlzc2luZywgd2FzIGRlbGV0ZWQgPycpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgaWYgKHNwZWFrZXIpIHtcbiAgICAgICAgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoe1xuICAgICAgICAgIC8vIFRPRE86IElmIGNhcmQgaXNuJ3QgZm91bmQgKGNhcmQgd2FzIGRlbGV0ZWQgYmVmb3JlIGNvbXBsZXRpb24pID9cbiAgICAgICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgICAgIHNwZWFrZXIsXG4gICAgICAgICAgY29udGVudDogaHRtbFxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoe1xuICAgICAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICAgICAgY29udGVudDogaHRtbFxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgICByZXR1cm4gbXNnXG4gICAgfVxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb21iYXQvbWVsZWUtcmVzb2x1dGlvbi5odG1sJ1xuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIENPTlNULCBEaWFsb2csIEZvcm1EYXRhLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cblxuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBDb0M3Um9sbCB9IGZyb20gJy4uL2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdDaGF0IH0gZnJvbSAnLi4vLi4vY2hhdC5qcydcbmltcG9ydCB7IENoYXRDYXJkQWN0b3IgfSBmcm9tICcuLi9jYXJkLWFjdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlUmVzb2x0aW9uIH0gZnJvbSAnLi9tZWxlZS1yZXNvbHV0aW9uLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlSW5pdGlhdG9yIH0gZnJvbSAnLi9tZWxlZS1pbml0aWF0b3IuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3TWVsZWVUYXJnZXQgZXh0ZW5kcyBDaGF0Q2FyZEFjdG9yIHtcbiAgY29uc3RydWN0b3IgKGFjdG9yS2V5LCBwYXJlbnRNZXNzYWdlSWQgPSBudWxsLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgc3VwZXIoYWN0b3JLZXksIGZhc3RGb3J3YXJkKVxuICAgIHRoaXMuYWN0b3JLZXkgPSBhY3RvcktleVxuICAgIHRoaXMuaW5pdGlhdG9yS2V5ID0gbnVsbFxuICAgIHRoaXMucGFyZW50TWVzc2FnZUlkID0gcGFyZW50TWVzc2FnZUlkXG4gICAgdGhpcy5mYXN0Rm9yd2FyZCA9IGZhc3RGb3J3YXJkXG4gICAgdGhpcy5yZXNvbHZlZCA9IGZhbHNlXG5cbiAgICB0aGlzLm91dG51bWJlcmVkID0gZmFsc2VcbiAgICB0aGlzLnN1cnByaXNlZCA9IGZhbHNlXG4gICAgdGhpcy5hdXRvU3VjY2VzcyA9IGZhbHNlXG4gICAgdGhpcy5hZHZhbnRhZ2UgPSBmYWxzZVxuICAgIHRoaXMuZGlzYWR2YW50YWdlID0gZmFsc2VcblxuICAgIHRoaXMubWVzc2FnZUlkID0gbnVsbFxuICAgIHRoaXMuc2tpbGxJZCA9IG51bGxcbiAgICB0aGlzLml0ZW1JZCA9IG51bGxcbiAgICB0aGlzLmRvZGdpbmcgPSBmYWxzZVxuICAgIHRoaXMubm90UmVzcG9uZGluZyA9IGZhbHNlXG4gICAgdGhpcy5maWdodGluZ0JhY2sgPSBmYWxzZVxuICAgIHRoaXMubWFuZXV2ZXJpbmcgPSBmYWxzZVxuICB9XG5cbiAgZ2V0IGFjdGlvblNlbGVjdGVkICgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5kb2RnaW5nIHx8XG4gICAgICB0aGlzLm5vdFJlc3BvbmRpbmcgfHxcbiAgICAgIHRoaXMuZmlnaHRpbmdCYWNrIHx8XG4gICAgICB0aGlzLm1hbmV1dmVyaW5nXG4gICAgKVxuICB9XG5cbiAgZ2V0IGFjdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuZG9kZ2luZykgcmV0dXJuICdkb2RnZSdcbiAgICBpZiAodGhpcy5ub3RSZXNwb25kaW5nKSByZXR1cm4gJ25vUmVzcG9uc2UnXG4gICAgaWYgKHRoaXMuZmlnaHRpbmdCYWNrKSByZXR1cm4gJ2ZpZ2h0QmFjaydcbiAgICBpZiAodGhpcy5tYW5ldXZlcmluZykgcmV0dXJuICdtYW5ldXZlcidcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHdlYXBvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuaXRlbUlkKVxuICB9XG5cbiAgZ2V0IHNraWxsICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5za2lsbElkKVxuICB9XG5cbiAgc2V0IGluaXRpYXRvcktleSAoeCkge1xuICAgIHRoaXMuX2luaXRpYXRvcktleSA9IHhcbiAgICB0aGlzLnRhcmdldEtleSA9IHhcbiAgfVxuXG4gIGdldCBpbml0aWF0b3JLZXkgKCkge1xuICAgIGlmICghdGhpcy5faW5pdGlhdG9yS2V5KSB7XG4gICAgICBpZiAoIXRoaXMuX2luaXRpYXRvciAmJiB0aGlzLnBhcmVudE1lc3NhZ2VJZCkge1xuICAgICAgICB0aGlzLl9pbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZChcbiAgICAgICAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5faW5pdGlhdG9yKSB0aGlzLl9pbml0aWF0b3JLZXkgPSB0aGlzLl9pbml0aWF0b3IuYWN0b3JLZXlcbiAgICB9XG4gICAgaWYgKCF0aGlzLl9pbml0aWF0b3JLZXkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGBObyBpbml0aWF0b3IgZm91bmQgZm9yIHRhcmdldCA6ICR7dGhpcy5hY3Rvci5uYW1lfWBcbiAgICAgIClcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pbml0aWF0b3JLZXlcbiAgfVxuXG4gIGdldCBpbml0aWF0b3IgKCkge1xuICAgIGlmICghdGhpcy5pbml0aWF0b3JLZXkpIHtcbiAgICAgIGlmICh0aGlzLnBhcmVudE1lc3NhZ2VJZCkge1xuICAgICAgICB0aGlzLl9pbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZChcbiAgICAgICAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZFxuICAgICAgICApXG4gICAgICAgIHRoaXMuaW5pdGlhdG9yS2V5ID0gdGhpcy5faW5pdGlhdG9yLmFjdG9yS2V5XG4gICAgICB9IGVsc2UgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuaW5pdGlhdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgfVxuXG4gIGdldCBtZWxlZUluaXRpYXRvciAoKSB7XG4gICAgaWYgKCF0aGlzLl9pbml0aWF0b3IpIHtcbiAgICAgIHRoaXMuX2luaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tTWVzc2FnZUlkKFxuICAgICAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZFxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faW5pdGlhdG9yXG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NvbWJhdC9tZWxlZS10YXJnZXQuaHRtbCdcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuIG51bGxcbiAgICBjb25zdCBjYXJkID0gJChtZXNzYWdlLmRhdGEuY29udGVudClbMF1cblxuICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkLCBtZXNzYWdlSWQpXG4gICAgdGFyZ2V0Lm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuXG4gICAgcmV0dXJuIHRhcmdldFxuICB9XG5cbiAgc3RhdGljIHVwZGF0ZUNhcmRTd2l0Y2ggKGV2ZW50LCBwdWJsaXNoVXBkYXRlID0gdHJ1ZSkge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5tZWxlZS50YXJnZXQnKVxuICAgIGNvbnN0IGZsYWcgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZ1xuICAgIGNvbnN0IGNhbWVsRmxhZyA9IGNoYXRIZWxwZXIuaHlwaGVuVG9DYW1lbENhc2UoZmxhZylcblxuICAgIC8vIHVwZGF0ZSBvbmx5IGZvciBsb2NhbCBwbGF5ZXJcbiAgICBpZiAoIXB1Ymxpc2hVcGRhdGUpIHtcbiAgICAgIGNhcmQuZGF0YXNldFtjYW1lbEZsYWddID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ10gIT09ICd0cnVlJ1xuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdzd2l0Y2hlZC1vbicpXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2VsZWN0ZWQgPSBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyB1cGRhdGUgY2FyZCBmb3IgYWxsIHBsYXllclxuICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21DYXJkKGNhcmQpXG4gICAgICB0YXJnZXQudG9nZ2xlRmxhZyhmbGFnKVxuICAgICAgdGFyZ2V0LnVwZGF0ZUNoYXRDYXJkKClcbiAgICB9XG4gIH1cblxuICB0b2dnbGVGbGFnIChmbGFnTmFtZSkge1xuICAgIGNvbnN0IGZsYWcgPSBmbGFnTmFtZS5pbmNsdWRlcygnLScpXG4gICAgICA/IGNoYXRIZWxwZXIuaHlwaGVuVG9DYW1lbENhc2UoZmxhZ05hbWUpXG4gICAgICA6IGZsYWdOYW1lXG4gICAgdGhpc1tmbGFnXSA9ICF0aGlzW2ZsYWddXG4gIH1cblxuICBhc3luYyBjcmVhdGVDaGF0Q2FyZCAoKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG5cbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgY29uc3QgdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGlmICh0b2tlbikgc3BlYWtlckRhdGEudG9rZW4gPSB0b2tlbi5kb2N1bWVudFxuICAgIGVsc2Ugc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLmFjdG9yXG5cbiAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcbiAgICBpZiAodGhpcy5hY3Rvci5pc1Rva2VuKSBzcGVha2VyLmFsaWFzID0gdGhpcy5hY3Rvci50b2tlbi5uYW1lXG5cbiAgICBsZXQgdXNlciA9IGdhbWUudXNlclxuICAgIGlmICh0eXBlb2YgdGhpcy5hY3Rvci51c2VyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgbGV0IG93bmVycyA9IFtdXG4gICAgICBjb25zdCBnbXMgPSBnYW1lLnVzZXJzLmZpbHRlcihhID0+IGEuaXNHTSkubWFwKGEgPT4gYS5pZClcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuYWN0b3IuZGF0YS5wZXJtaXNzaW9uKSkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdiA9PT1cbiAgICAgICAgICAoQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUyB8fCBDT05TVC5FTlRJVFlfUEVSTUlTU0lPTlMpLk9XTkVSXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChrID09PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgICAgIG93bmVycyA9IGdhbWUudXNlcnMubWFwKGEgPT4gYS5pZClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfSBlbHNlIGlmICghZ21zLmluY2x1ZGVzKGspKSB7XG4gICAgICAgICAgICBvd25lcnMucHVzaChrKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IGNvbnRlbnQgPSAnJ1xuICAgICAgc3dpdGNoIChvd25lcnMubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAvLyBHTVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBpZiAodHlwZW9mIGdhbWUudXNlcnMuZ2V0KG93bmVyc1swXSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB1c2VyID0gZ2FtZS51c2Vycy5nZXQob3duZXJzWzBdKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGNvbnRlbnQgPVxuICAgICAgICAgICAgJzxwPicgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZVNlbGVjdFNpbmdsZVVzZXJGb3JUYXJnZXQnKVxuICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50ICsgJzxmb3JtIGlkPVwic2VsZWN0Zm9ybVwiPjxzZWxlY3QgbmFtZT1cInVzZXJcIj4nXG4gICAgICAgICAgZm9yIChjb25zdCBrIG9mIG93bmVycykge1xuICAgICAgICAgICAgY29udGVudCA9XG4gICAgICAgICAgICAgIGNvbnRlbnQgK1xuICAgICAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cIicgK1xuICAgICAgICAgICAgICBrICtcbiAgICAgICAgICAgICAgJ1wiPicgK1xuICAgICAgICAgICAgICBnYW1lLnVzZXJzLmdldChrKS5uYW1lICtcbiAgICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGVudCA9IGNvbnRlbnQgKyAnPC9zZWxlY3Q+PC9mb3JtPjwvcD4nXG4gICAgICAgICAgYXdhaXQgRGlhbG9nLnByb21wdCh7XG4gICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5NZXNzYWdlVGl0bGVTZWxlY3RTaW5nbGVVc2VyRm9yVGFyZ2V0J1xuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICAgICAgICBjYWxsYmFjazogaHRtbCA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKFxuICAgICAgICAgICAgICAgIGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3NlbGVjdGZvcm0nKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBmb3JtRGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAndXNlcicpIHtcbiAgICAgICAgICAgICAgICAgIHVzZXIgPSBnYW1lLnVzZXJzLmdldCh2YWx1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMuYWN0b3IudXNlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHVzZXIgPSB0aGlzLmFjdG9yLnVzZXJcbiAgICB9XG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICBzcGVha2VyLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH1cblxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyh0aGlzLnJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIC8vIGlmICggdGhpcy5pc0JsaW5kICkgY2hhdERhdGFbJ2JsaW5kJ10gPSB0cnVlO1xuICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpXG5cbiAgICB0aGlzLm1lc3NhZ2VJZCA9IG1lc3NhZ2UuaWRcbiAgICByZXR1cm4gbWVzc2FnZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcbiAgICBpZiAoIWdhbWUudXNlci5pc0dNICYmIG1lc3NhZ2UudXNlci5pZCAhPT0gZ2FtZS51c2VyLmlkKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5VbmFibGVUb0ludGVyYWN0V2l0aENoYXRDYXJkJylcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHsgY29udGVudDogaHRtbCB9KVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIGFzeW5jIGdldFVwZGF0ZWRDaGF0Q2FyZCAoKSB7XG4gICAgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcykudGhlbihodG1sID0+IHtcbiAgICAgIHJldHVybiBodG1sXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVTZWxlY3RlZCAoY2FyZCwgZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZClcblxuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAnZG9kZ2UnOlxuICAgICAgICB0YXJnZXQuZG9kZ2luZyA9IHRydWVcbiAgICAgICAgdGFyZ2V0Lm5vdFJlc3BvbmRpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQuZmlnaHRpbmdCYWNrID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0Lm1hbmV1dmVyaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICB0YXJnZXQuaXRlbUlkID0gbnVsbFxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdub1Jlc3BvbnNlJzpcbiAgICAgICAgdGFyZ2V0LmRvZGdpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQubm90UmVzcG9uZGluZyA9IHRydWVcbiAgICAgICAgdGFyZ2V0LmZpZ2h0aW5nQmFjayA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5tYW5ldXZlcmluZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5za2lsbElkID0gbnVsbFxuICAgICAgICB0YXJnZXQuaXRlbUlkID0gbnVsbFxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdmaWdodEJhY2snOlxuICAgICAgICB0YXJnZXQuZG9kZ2luZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5ub3RSZXNwb25kaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LmZpZ2h0aW5nQmFjayA9IHRydWVcbiAgICAgICAgdGFyZ2V0Lm1hbmV1dmVyaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICB0YXJnZXQuaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LndlYXBvbklkXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ21hbmV1dmVyJzpcbiAgICAgICAgdGFyZ2V0LmRvZGdpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQubm90UmVzcG9uZGluZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5maWdodGluZ0JhY2sgPSBmYWxzZVxuICAgICAgICB0YXJnZXQubWFuZXV2ZXJpbmcgPSB0cnVlXG4gICAgICAgIHRhcmdldC5za2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgdGFyZ2V0Lml0ZW1JZCA9IG51bGxcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICB0YXJnZXQudXBkYXRlQ2hhdENhcmQoKVxuXG4gICAgcmV0dXJuIHRhcmdldFxuICB9XG5cbiAgYXN5bmMgcGVyZm9ybVNraWxsQ2hlY2sgKHNraWxsSWQgPSBudWxsLCBwdWJsaXNoID0gZmFsc2UpIHtcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIC8vIENvbWJhdCByb2xsIGNhbm5vdCBiZSBibGluZCBvciB1bmtub3duXG4gICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgY2hlY2suaXNVbmtvbnduID0gZmFsc2VcbiAgICBjaGVjay5yZWZlcmVuY2VNZXNzYWdlSWQgPSB0aGlzLm1lc3NhZ2VJZFxuICAgIGNoZWNrLnJvbGxUeXBlID0gJ29wcG9zZWQnXG4gICAgY2hlY2suc2lkZSA9ICd0YXJnZXQnXG4gICAgY2hlY2suYWN0aW9uID0gdGhpcy5hY3Rpb25cbiAgICBjaGVjay5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICBjaGVjay5pdGVtID0gdGhpcy5pdGVtSWRcbiAgICBjaGVjay5za2lsbCA9IHNraWxsSWRcbiAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgY2hlY2suZGljZU1vZGlmaWVyID0gMFxuXG4gICAgaWYgKHRoaXMuZGlzYWR2YW50YWdlKSBjaGVjay5kaWNlTW9kaWZpZXIgLT0gMVxuICAgIGlmICh0aGlzLmFkdmFudGFnZSkgY2hlY2suZGljZU1vZGlmaWVyICs9IDFcblxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIHRoaXMuY2hlY2sgPSBjaGVja1xuICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgaWYgKHB1Ymxpc2gpIGNoZWNrLnRvTWVzc2FnZSgpXG5cbiAgICByZXR1cm4gY2hlY2tcbiAgfVxuXG4gIGFzeW5jIHB1Ymxpc2hOb1JlcG9uc2VSZXN1bHQgKCkge1xuICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgdGhpcy5ub3RSZXNwb25kaW5nID0gdHJ1ZVxuICAgIGNvbnN0IHJlc29sdXRpb25DYXJkID0gbmV3IENvQzdNZWxlZVJlc29sdGlvbihcbiAgICAgIHRoaXMucGFyZW50TWVzc2FnZUlkLFxuICAgICAgdGhpcy5tZXNzYWdlSWRcbiAgICApXG5cbiAgICBjb25zdCByZXNvbHV0aW9uTWVzc2FnZSA9IGF3YWl0IHJlc29sdXRpb25DYXJkLnByZUNyZWF0ZU1lc3NhZ2UoKVxuXG4gICAgdGhpcy5yZXNvbHV0aW9uQ2FyZCA9IHJlc29sdXRpb25NZXNzYWdlLmlkXG4gICAgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBhc3luYyBwdWJsaXNoQ2hlY2tSZXN1bHQgKGNoZWNrID0gbnVsbCkge1xuICAgIGlmICghY2hlY2sgJiYgIXRoaXMuY2hlY2spIHJldHVybiBudWxsXG5cbiAgICBpZiAoY2hlY2spIHRoaXMuY2hlY2sgPSBjaGVja1xuICAgIHRoaXMucm9sbCA9IENvQzdSb2xsLmdldEZyb21DaGVjayh0aGlzLmNoZWNrKVxuICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxuXG4gICAgdGhpcy5yb2xsLnJvbGxJY29ucyA9IFtdXG4gICAgaWYgKHRoaXMucm9sbC5jcml0aWNhbCkge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdnb2xkZW5yb2QnXG4gICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgNDsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ21lZGFsJylcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMucm9sbC5mdW1ibGUpIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnZGFya3JlZCdcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRnVtYmxlJylcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCA0OyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnc3BpZGVyJylcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMucm9sbC5zdWNjZXNzKSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2dvbGRlbnJvZCdcbiAgICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgfVxuICAgICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsOyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnc3RhcicpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnYmxhY2snXG4gICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZhaWx1cmUnKVxuICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdza3VsbCcpXG4gICAgfVxuXG4gICAgY29uc3QgcmVzb2x1dGlvbkNhcmQgPSBuZXcgQ29DN01lbGVlUmVzb2x0aW9uKFxuICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWQsXG4gICAgICB0aGlzLm1lc3NhZ2VJZFxuICAgIClcbiAgICBjb25zdCByZXNvbHV0aW9uTWVzc2FnZSA9IGF3YWl0IHJlc29sdXRpb25DYXJkLnByZUNyZWF0ZU1lc3NhZ2UoKVxuXG4gICAgdGhpcy5yZXNvbHV0aW9uQ2FyZCA9IHJlc29sdXRpb25NZXNzYWdlLmlkXG4gICAgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUNhcmQgKGNhcmQsIG1lc3NhZ2VJZCA9IG51bGwpIHtcbiAgICBjb25zdCBhY3RvcktleSA9IGNhcmQuZGF0YXNldC5hY3RvcktleVxuICAgIGNvbnN0IHBhcmVudE1lc3NhZ2VJZCA9IGNhcmQuZGF0YXNldC5wYXJlbnRNZXNzYWdlSWRcbiAgICBjb25zdCBmYXN0Rm9yd2FyZCA9IGNhcmQuZGF0YXNldC5mYXN0Rm9yd2FyZCA9PT0gJ3RydWUnXG4gICAgY29uc3QgdGFyZ2V0ID0gbmV3IENvQzdNZWxlZVRhcmdldChhY3RvcktleSwgcGFyZW50TWVzc2FnZUlkLCBmYXN0Rm9yd2FyZClcblxuICAgIHRhcmdldC5yb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KHRhcmdldCwgY2FyZClcblxuICAgIGlmIChjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykpIHtcbiAgICAgIHRhcmdldC5tZXNzYWdlSWQgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWRcbiAgICB9IGVsc2UgdGFyZ2V0Lm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIHJldHVybiB0YXJnZXRcbiAgfVxuXG4gIHVwZ3JhZGVSb2xsIChsdWNrQW1vdW50LCBuZXdTdWNjZXNzTGV2ZWwsIG9sZENhcmQpIHtcbiAgICAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICAgIGlmICghdGhpcy5hY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudCkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGAke3RoaXMuYWN0b3IubmFtZX0gZGlkbid0IGhhdmUgZW5vdWdoIGx1Y2sgdG8gcGFzcyB0aGUgY2hlY2tgXG4gICAgICApXG4gICAgfVxuICAgIHRoaXMucm9sbC52YWx1ZSA9IG51bGxcbiAgICB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXG4gICAgdGhpcy5yb2xsLmx1Y2tTcGVudCA9IHRydWVcbiAgICBvbGRDYXJkLmRhdGFzZXQucHJvY2Vzc2VkID0gZmFsc2VcblxuICAgIGNvbnN0IGRpY2VSb2xscyA9IG9sZENhcmQucXVlcnlTZWxlY3RvcignLmRpY2Utcm9sbCcpXG4gICAgZGljZVJvbGxzLmRhdGFzZXQudmFsdWUgPSBudWxsXG4gICAgZGljZVJvbGxzLmRhdGFzZXQuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXG4gICAgZGljZVJvbGxzLmRhdGFzZXQubHVja1NwZW50ID0gdHJ1ZVxuXG4gICAgY29uc3QgcmVzdWxEZXRhaWxzID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcucmVzdWx0LWRldGFpbHMnKVxuICAgIGNvbnN0IGRpY2VUb3RhbCA9IG9sZENhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG90YWwnKVxuICAgIHN3aXRjaCAobmV3U3VjY2Vzc0xldmVsKSB7XG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudDogbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQ6XG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQ6IGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50OiBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50OiBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBkaWNlVG90YWwuY2xhc3NMaXN0LnJlcGxhY2UoJ2ZhaWx1cmUnLCAnc3VjY2VzcycpXG4gICAgb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1idXR0b25zJykucmVtb3ZlKClcbiAgICBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvb2x0aXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQob2xkQ2FyZCkgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCwgdWkgKi9cblxuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi9kaWNlLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBDb0M3Um9sbCwgQ29DN0RhbWFnZSB9IGZyb20gJy4vaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1JhbmdlSW5pdGlhdG9yIHtcbiAgY29uc3RydWN0b3IgKGFjdG9yS2V5ID0gbnVsbCwgaXRlbUlkID0gbnVsbCwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIHRoaXMuYWN0b3JLZXkgPSBhY3RvcktleVxuICAgIHRoaXMuaXRlbUlkID0gaXRlbUlkXG4gICAgdGhpcy5mYXN0Rm9yd2FyZCA9IGZhc3RGb3J3YXJkXG4gICAgdGhpcy5yZXNvbHZlZCA9IGZhbHNlXG4gICAgdGhpcy5jb3ZlciA9IGZhbHNlXG4gICAgdGhpcy5zdXJwcmlzZWQgPSBmYWxzZVxuICAgIHRoaXMuYXV0b1N1Y2Nlc3MgPSBmYWxzZVxuICAgIHRoaXMuYWR2YW50YWdlID0gZmFsc2VcbiAgICB0aGlzLmRpc2FkdmFudGFnZSA9IGZhbHNlXG4gICAgdGhpcy5tZXNzYWdlSWQgPSBudWxsXG4gICAgdGhpcy50YXJnZXRDYXJkID0gbnVsbFxuICAgIHRoaXMucm9sbGVkID0gZmFsc2VcbiAgICB0aGlzLnNpbmdsZVNob3QgPSBmYWxzZVxuICAgIHRoaXMubXVsdGlwbGVTaG90cyA9IGZhbHNlXG4gICAgdGhpcy5idXJzdCA9IGZhbHNlXG4gICAgdGhpcy5mdWxsQXV0byA9IGZhbHNlXG4gICAgdGhpcy50b2tlbktleSA9IG51bGxcbiAgICB0aGlzLmFpbWVkID0gZmFsc2VcbiAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID0gMFxuICAgIHRoaXMuX3RhcmdldHMgPSBbXVxuICAgIGZvciAoY29uc3QgdCBvZiBbLi4uZ2FtZS51c2VyLnRhcmdldHNdKSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBuZXcgQ29DN1JhbmdlVGFyZ2V0KGAke3Quc2NlbmUuaWR9LiR7dC5pZH1gKSAvL1xuICAgICAgdGFyZ2V0LnRva2VuID0gdFxuICAgICAgdGhpcy5fdGFyZ2V0cy5wdXNoKHRhcmdldClcbiAgICB9XG4gICAgaWYgKHRoaXMuX3RhcmdldHMubGVuZ3RoKSB0aGlzLl90YXJnZXRzWzBdLmFjdGl2ZSA9IHRydWVcbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IG5ldyBDb0M3UmFuZ2VUYXJnZXQoKVxuICAgICAgdGFyZ2V0LmFjdGl2ZSA9IHRydWVcbiAgICAgIHRoaXMuX3RhcmdldHMucHVzaCh0YXJnZXQpXG4gICAgfVxuICAgIGlmIChhY3RvcktleSkge1xuICAgICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB0aGlzLnRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkoYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgaWYgKHRoaXMudG9rZW4pIHRoaXMudG9rZW5LZXkgPSBhY3Rvci50b2tlbktleVxuICAgICAgaWYgKGl0ZW1JZCkge1xuICAgICAgICBjb25zdCB3ZWFwb24gPSBhY3Rvci5pdGVtcy5nZXQoaXRlbUlkKVxuICAgICAgICBpZiAod2VhcG9uKSB7XG4gICAgICAgICAgaWYgKHRoaXMud2VhcG9uLnNpbmdsZVNob3QpIHRoaXMuc2luZ2xlU2hvdCA9IHRydWVcbiAgICAgICAgICBlbHNlIGlmICh0aGlzLndlYXBvbi5kYXRhLmRhdGEucHJvcGVydGllcy5hdXRvKSB0aGlzLmZ1bGxBdXRvID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnRva2VuS2V5KSB7XG4gICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5fdGFyZ2V0cykge1xuICAgICAgICBpZiAodC50b2tlbiAmJiB0aGlzLnRva2VuKSB7XG4gICAgICAgICAgdC5kaXN0YW5jZSA9IGNoYXRIZWxwZXIuZ2V0RGlzdGFuY2UodC50b2tlbiwgdGhpcy50b2tlbilcbiAgICAgICAgICB0LnJvdW5kZWREaXN0YW5jZSA9IE1hdGgucm91bmQodC5kaXN0YW5jZS52YWx1ZSAqIDEwMCkgLyAxMDBcbiAgICAgICAgICB0LmRpc3RhbmNlVW5pdCA9IHQuZGlzdGFuY2UudW5pdFxuICAgICAgICAgIGNvbnN0IGRpc3RJbllkID1cbiAgICAgICAgICAgIE1hdGgucm91bmQoY2hhdEhlbHBlci50b1lhcmRzKHQuZGlzdGFuY2UpICogMTAwKSAvIDEwMFxuICAgICAgICAgIC8vIGlmKCBkaXN0SW5ZZCl7XG4gICAgICAgICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgICAgICAgIHQucG9pbnRCbGFua1JhbmdlID0gZmFsc2VcbiAgICAgICAgICAgIGNvbnN0IHBiUmFuZ2VJbllkID1cbiAgICAgICAgICAgICAgdGhpcy5hY3Rvci5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZSAvIDE1XG4gICAgICAgICAgICBpZiAoZGlzdEluWWQgPD0gcGJSYW5nZUluWWQpIHQucG9pbnRCbGFua1JhbmdlID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodGhpcy53ZWFwb24pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLndlYXBvbi5iYXNlUmFuZ2UpIHtcbiAgICAgICAgICAgICAgdC5iYXNlUmFuZ2UgPSBmYWxzZVxuICAgICAgICAgICAgICB0LmxvbmdSYW5nZSA9IGZhbHNlXG4gICAgICAgICAgICAgIHQuZXh0cmVtZVJhbmdlID0gZmFsc2VcbiAgICAgICAgICAgICAgdC5vdXRPZlJhbmdlID0gZmFsc2VcbiAgICAgICAgICAgICAgaWYgKHRoaXMud2VhcG9uLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLnNob3RndW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlzdEluWWQgPD0gdGhpcy53ZWFwb24uYmFzZVJhbmdlKSB0LmJhc2VSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA+IHRoaXMud2VhcG9uLmJhc2VSYW5nZSAmJlxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPD0gdGhpcy53ZWFwb24ubG9uZ1JhbmdlXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICB0LmxvbmdSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPiB0aGlzLndlYXBvbi5sb25nUmFuZ2UgJiZcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkIDw9IHRoaXMud2VhcG9uLmV4dHJlbWVSYW5nZVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgdC5leHRyZW1lUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkaXN0SW5ZZCA+IHRoaXMud2VhcG9uLmV4dHJlbWVSYW5nZSkgdC5vdXRPZlJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5iYXNlUmFuZ2UpIHQuYmFzZVJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkID4gdGhpcy53ZWFwb24uYmFzZVJhbmdlICYmXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgKiAyXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICB0LmxvbmdSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPiB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgKiAyICYmXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgKiA0XG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICB0LmV4dHJlbWVSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRpc3RJbllkID4gdGhpcy53ZWFwb24uYmFzZVJhbmdlICogNCkgdC5vdXRPZlJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhKHQuYmFzZVJhbmdlIHx8IHQubG9uZ1JhbmdlIHx8IHQuZXh0cmVtZVJhbmdlIHx8IHQub3V0T2ZSYW5nZSlcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdC5iYXNlUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gfVxuICAgICAgICB9IGVsc2UgdC5iYXNlUmFuZ2UgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0IGRpc3BsYXlBY3Rvck9uQ2FyZCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcpXG4gIH1cblxuICBnZXQgYWN0b3JJbWcgKCkge1xuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gICAgaWYgKGltZykgcmV0dXJuIGltZ1xuICAgIHJldHVybiAnLi4vaWNvbnMvc3ZnL215c3RlcnktbWFuLWJsYWNrLnN2ZydcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICB9XG5cbiAgZ2V0IGl0ZW0gKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB3ZWFwb24gKCkge1xuICAgIHJldHVybiB0aGlzLml0ZW1cbiAgfVxuXG4gIGdldCB0YXJnZXRzICgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldHMpIHRoaXMuX3RhcmdldHMgPSBbXVxuICAgIHJldHVybiB0aGlzLl90YXJnZXRzXG4gIH1cblxuICBnZXQgdGFyZ2V0ICgpIHtcbiAgICBpZiAodGhpcy50YXJnZXRzICYmIHRoaXMudGFyZ2V0cy5sZW5ndGgpIHJldHVybiB0aGlzLnRhcmdldHMucG9wKClcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNraWxscyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuZ2V0V2VhcG9uU2tpbGxzKHRoaXMuaXRlbUlkKVxuICB9XG5cbiAgZ2V0IG1haW5XZWFwb25Ta2lsbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMud2VhcG9uLmRhdGEuZGF0YS5za2lsbC5tYWluLmlkKVxuICB9XG5cbiAgZ2V0IGF1dG9XZWFwb25Ta2lsbCAoKSB7XG4gICAgaWYgKHRoaXMud2VhcG9uLmRhdGEuZGF0YS5za2lsbC5hbHRlcm5hdGl2LmlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy53ZWFwb24uZGF0YS5kYXRhLnNraWxsLmFsdGVybmF0aXYuaWQpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLm1haW5XZWFwb25Ta2lsbFxuICB9XG5cbiAgZ2V0IGF1dG9GaXJlICgpIHtcbiAgICByZXR1cm4gdGhpcy5idXJzdCB8fCB0aGlzLmZ1bGxBdXRvXG4gIH1cblxuICBnZXQgbXVsdGlUYXJnZXQgKCkge1xuICAgIHJldHVybiB0aGlzLmZ1bGxBdXRvIHx8IHRoaXMubXVsdGlwbGVTaG90c1xuICB9XG5cbiAgZ2V0IGFpbWluZyAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5fYWltaW5nKSB7XG4gICAgICB0aGlzLl9haW1pbmcgPSB0aGlzLmFjdG9yLmdldEFjdG9yRmxhZygnYWltaW5nJylcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FpbWluZ1xuICB9XG5cbiAgZ2V0IGFjdGl2ZVRhcmdldCAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRzLmxlbmd0aCkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0cy5maW5kKHQgPT4gdC5hY3RpdmUpXG4gIH1cblxuICBnZXQgc2hvdHMgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX3Nob3RzKSB0aGlzLl9zaG90cyA9IFtdXG4gICAgcmV0dXJuIHRoaXMuX3Nob3RzXG4gIH1cblxuICBnZXQgY3VycmVudFNob3RSYW5rICgpIHtcbiAgICByZXR1cm4gdGhpcy5zaG90cy5sZW5ndGggKyAxXG4gIH1cblxuICBnZXQgYWN0aXZlVGFyZ2V0U2hvdERpZmZpY3VsdHkgKCkge1xuICAgIHJldHVybiB0aGlzLnNob3REaWZmaWN1bHR5KClcbiAgfVxuXG4gIHNldCBhaW1pbmcgKGIpIHtcbiAgICB0aGlzLl9haW1pbmcgPSBiXG4gIH1cblxuICBnZXQgZGlkQW55U2hvdEhpdCAoKSB7XG4gICAgbGV0IGFueUhpdCA9IGZhbHNlXG4gICAgZm9yIChjb25zdCByIG9mIHRoaXMucm9sbHMpIHtcbiAgICAgIGFueUhpdCA9IGFueUhpdCB8fCByLmlzU3VjY2Vzc1xuICAgIH1cbiAgICByZXR1cm4gYW55SGl0XG4gIH1cblxuICBnZXQgc3VjY2Vzc2Z1bEhpdHMgKCkge1xuICAgIGNvbnN0IGhpdHMgPSBbXVxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnJvbGxzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKHRoaXMucm9sbHNbaW5kZXhdLmlzU3VjY2Vzcykge1xuICAgICAgICBjb25zdCBoaXQgPSB7XG4gICAgICAgICAgcm9sbDogdGhpcy5yb2xsc1tpbmRleF0sXG4gICAgICAgICAgc2hvdDogdGhpcy5zaG90c1tpbmRleF1cbiAgICAgICAgfVxuICAgICAgICBoaXRzLnB1c2goaGl0KVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaGl0cy5sZW5ndGggIT09IDApIHJldHVybiBoaXRzXG4gICAgZWxzZSByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNob3RGaXJlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2hvdHMgPyB0aGlzLnNob3RzLmxlbmd0aCA6IDBcbiAgfVxuXG4gIGdldCB0b3RhbEFtbW8gKCkge1xuICAgIHJldHVybiB0aGlzLndlYXBvbi5nZXRCdWxsZXRMZWZ0KClcbiAgfVxuXG4gIGdldCBtYXhTaG90cyAoKSB7XG4gICAgaWYgKHRoaXMuZnVsbEF1dG8pIHJldHVybiAn4oieJ1xuICAgIC8vIHJldHVybiB0aGlzLndlYXBvbi5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm1heDtcblxuICAgIHJldHVybiB0aGlzLndlYXBvbi5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm1heFxuICAgICAgPyBwYXJzZUludCh0aGlzLndlYXBvbi5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm1heClcbiAgICAgIDogMVxuICB9XG5cbiAgZ2V0IGlnbm9yZUFtbW8gKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNyZWdhcmRBbW1vJylcbiAgfVxuXG4gIGdldCBpZ25vcmVVc2VzUGVyUm91bmQgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNyZWdhcmRVc2VQZXJSb3VuZCcpXG4gIH1cblxuICBnZXQgb3V0T2ZBbW1vICgpIHtcbiAgICBpZiAodGhpcy5pZ25vcmVBbW1vKSByZXR1cm4gZmFsc2VcbiAgICBpZiAodGhpcy50b3RhbEJ1bGxldHNGaXJlZCA+PSB0aGlzLndlYXBvbi5nZXRCdWxsZXRMZWZ0KCkpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgb3V0T2ZTaG90cyAoKSB7XG4gICAgaWYgKHRoaXMuaWdub3JlVXNlc1BlclJvdW5kKSByZXR1cm4gZmFsc2VcbiAgICBpZiAodGhpcy5zaG90cykgcmV0dXJuIHRoaXMuc2hvdHMubGVuZ3RoID49IHRoaXMubWF4U2hvdHNcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCB2b2xsZXlTaXplICgpIHtcbiAgICBpZiAoIXRoaXMud2VhcG9uLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmF1dG8pIHJldHVybiAxXG4gICAgaWYgKHRoaXMuX3ZvbGxleVNpemUpIHJldHVybiB0aGlzLl92b2xsZXlTaXplXG4gICAgY29uc3Qgc2l6ZSA9IE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMClcbiAgICByZXR1cm4gc2l6ZSA8IDMgPyAzIDogc2l6ZVxuICB9XG5cbiAgc2V0IHZvbGxleVNpemUgKHgpIHtcbiAgICBpZiAoeCA+PSBNYXRoLmZsb29yKHRoaXMuYXV0b1dlYXBvblNraWxsLnZhbHVlIC8gMTApKSB7XG4gICAgICB0aGlzLl92b2xsZXlTaXplID0gTWF0aC5mbG9vcih0aGlzLmF1dG9XZWFwb25Ta2lsbC52YWx1ZSAvIDEwKVxuICAgIH0gZWxzZSBpZiAoeCA8PSAzKSB7XG4gICAgICB0aGlzLl92b2xsZXlTaXplID0gM1xuICAgIH1cbiAgICB0aGlzLl92b2xsZXlTaXplID0gcGFyc2VJbnQoeClcbiAgfVxuXG4gIGdldCBpc1ZvbGxleU1pblNpemUgKCkge1xuICAgIGlmICh0aGlzLnZvbGxleVNpemUgPT09IDMpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaXNWb2xsZXlNYXhTaXplICgpIHtcbiAgICBjb25zdCBtYXhTaXplID1cbiAgICAgIE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMCkgPCAzXG4gICAgICAgID8gM1xuICAgICAgICA6IE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMClcbiAgICBpZiAobWF4U2l6ZSA9PT0gdGhpcy52b2xsZXlTaXplKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0VGFyZ2V0RnJvbUtleSAoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldHMuZmluZCh0ID0+IGtleSA9PT0gdC5hY3RvcktleSlcbiAgfVxuXG4gIGNhbGNUYXJnZXRzRGlmZmljdWx0eSAoKSB7XG4gICAgZm9yIChjb25zdCB0IG9mIHRoaXMudGFyZ2V0cykge1xuICAgICAgdC5zaG90RGlmZmljdWx0eSA9IHRoaXMuc2hvdERpZmZpY3VsdHkodClcbiAgICB9XG4gIH1cblxuICBzaG90RGlmZmljdWx0eSAodCA9IG51bGwpIHtcbiAgICBjb25zdCB0YXJnZXQgPSB0IHx8IHRoaXMuYWN0aXZlVGFyZ2V0XG4gICAgbGV0IGRhbWFnZSA9IHRoaXMud2VhcG9uLmRhdGEuZGF0YS5yYW5nZS5ub3JtYWwuZGFtYWdlXG4gICAgaWYgKHRoaXMud2VhcG9uLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLnNob3RndW4pIHtcbiAgICAgIGlmICh0LmxvbmdSYW5nZSkgZGFtYWdlID0gdGhpcy53ZWFwb24uZGF0YS5kYXRhLnJhbmdlLmxvbmcuZGFtYWdlXG4gICAgICBpZiAodC5leHRyZW1lUmFuZ2UpIGRhbWFnZSA9IHRoaXMud2VhcG9uLmRhdGEuZGF0YS5yYW5nZS5leHRyZW1lLmRhbWFnZVxuICAgIH1cbiAgICBsZXQgbW9kaWZpZXIgPSB0YXJnZXQubW9kaWZpZXJcbiAgICBsZXQgZGlmZmljdWx0eVxuICAgIHRoaXMud2VhcG9uLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLnNob3RndW5cbiAgICAgID8gKGRpZmZpY3VsdHkgPSAxKVxuICAgICAgOiAoZGlmZmljdWx0eSA9IHRhcmdldC5kaWZmaWN1bHR5KVxuICAgIGxldCBkaWZmaWN1bHR5TmFtZSA9ICcnXG4gICAgaWYgKHRoaXMuYWltaW5nICYmIHRoaXMuY3VycmVudFNob3RSYW5rID09PSAxKSBtb2RpZmllcisrXG4gICAgaWYgKHRoaXMuYWR2YW50YWdlKSBtb2RpZmllcisrXG4gICAgaWYgKHRoaXMuZGlzYWR2YW50YWdlKSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMucmVsb2FkKSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMubXVsdGlwbGVTaG90cyAmJiAhdGhpcy5mdWxsQXV0bykgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLmZ1bGxBdXRvKSBtb2RpZmllciAtPSB0aGlzLmN1cnJlbnRTaG90UmFuayAtIDFcbiAgICBpZiAobW9kaWZpZXIgPCAtMikge1xuICAgICAgY29uc3QgZXhjZXNzID0gTWF0aC5hYnMobW9kaWZpZXIgKyAyKVxuICAgICAgZGlmZmljdWx0eSArPSBleGNlc3NcbiAgICAgIGlmIChkaWZmaWN1bHR5ID4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbCkge1xuICAgICAgICBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5pbXBvc3NpYmxlXG4gICAgICB9XG4gICAgICBtb2RpZmllciA9IC0yXG4gICAgfVxuXG4gICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA9PT0gZGlmZmljdWx0eSkge1xuICAgICAgZGlmZmljdWx0eU5hbWUgPSAnUmVndWxhcidcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZCA9PT0gZGlmZmljdWx0eSkgZGlmZmljdWx0eU5hbWUgPSAnSGFyZCdcbiAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lID09PSBkaWZmaWN1bHR5KSB7XG4gICAgICBkaWZmaWN1bHR5TmFtZSA9ICdFeHRyZW1lJ1xuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbCA9PT0gZGlmZmljdWx0eSkge1xuICAgICAgZGlmZmljdWx0eU5hbWUgPSAnQ3JpdGljYWwnXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmltcG9zc2libGUgPT09IGRpZmZpY3VsdHkpIHtcbiAgICAgIGRpZmZpY3VsdHlOYW1lID0gJ0ltcG9zc2libGUnXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxldmVsOiBkaWZmaWN1bHR5LFxuICAgICAgbmFtZTogZGlmZmljdWx0eU5hbWUsXG4gICAgICBtb2RpZmllcjogbW9kaWZpZXIsXG4gICAgICBkYW1hZ2U6IGRhbWFnZSxcbiAgICAgIGltcG9zc2libGU6IGRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaW1wb3NzaWJsZVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG9vdCBhdCB0aGUgYWN0aXZlIHRhcmdldC4gQWRkIGl0IHRvIHRoZSBsaXN0IG9mIHNob3RzLlxuICAgKiBUT0RPIDogcmVjYWxjdWxlciBsYSBkaWZmaWN1bHTDqSBkZSB0b3VzIGxlcyBzaG90cyAhLlxuICAgKi9cbiAgYWRkU2hvdEF0Q3VycmVudFRhcmdldCAoKSB7XG4gICAgdGhpcy5jYWxjVGFyZ2V0c0RpZmZpY3VsdHkoKVxuICAgIGNvbnN0IHNob3QgPSB7XG4gICAgICB0YXJnZXQ6IHRoaXMuYWN0aXZlVGFyZ2V0LFxuICAgICAgZXh0cmVtZVJhbmdlOiB0aGlzLmFjdGl2ZVRhcmdldC5leHRyZW1lUmFuZ2UsXG4gICAgICBhY3RvcktleTogdGhpcy5hY3RpdmVUYXJnZXQuYWN0b3JLZXksXG4gICAgICBhY3Rvck5hbWU6IHRoaXMuYWN0aXZlVGFyZ2V0Lm5hbWUsXG4gICAgICBkaWZmaWN1bHR5OiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5sZXZlbCxcbiAgICAgIG1vZGlmaWVyOiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5tb2RpZmllcixcbiAgICAgIGRhbWFnZTogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkuZGFtYWdlLFxuICAgICAgYnVsbGV0c1Nob3Q6IDEsXG4gICAgICB0cmFuc2l0QnVsbGV0czogMCxcbiAgICAgIGJ1bGxldHNTaG90VHJhbnNpdDogMSxcbiAgICAgIHRyYW5zaXQ6IGZhbHNlXG4gICAgfVxuXG4gICAgbGV0IGJ1bGxldExlZnQgPSB0aGlzLnRvdGFsQW1tbyAtIHRoaXMudG90YWxCdWxsZXRzRmlyZWRcblxuICAgIGlmICh0aGlzLmZ1bGxBdXRvKSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW50U2hvdFJhbmsgPiAxKSB7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzU2hvdCA9IHRoaXMuc2hvdHNbdGhpcy5jdXJyZW50U2hvdFJhbmsgLSAyXVxuICAgICAgICBpZiAocHJldmlvdXNTaG90LmFjdG9yS2V5ICE9PSB0aGlzLmFjdGl2ZVRhcmdldC5hY3RvcktleSkge1xuICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gY2hhdEhlbHBlci5nZXREaXN0YW5jZShcbiAgICAgICAgICAgIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHByZXZpb3VzU2hvdC5hY3RvcktleSksXG4gICAgICAgICAgICBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdGl2ZVRhcmdldC5hY3RvcktleSlcbiAgICAgICAgICApXG4gICAgICAgICAgc2hvdC50cmFuc2l0QnVsbGV0cyA9IE1hdGguZmxvb3IoY2hhdEhlbHBlci50b1lhcmRzKGRpc3RhbmNlKSlcbiAgICAgICAgICBpZiAoc2hvdC50cmFuc2l0QnVsbGV0cyA+PSBidWxsZXRMZWZ0ICYmICF0aGlzLmlnbm9yZUFtbW8pIHtcbiAgICAgICAgICAgIHNob3QudHJhbnNpdEJ1bGxldHMgPSBidWxsZXRMZWZ0XG4gICAgICAgICAgICBidWxsZXRMZWZ0ID0gMFxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID1cbiAgICAgICAgICAgIHBhcnNlSW50KHRoaXMudG90YWxCdWxsZXRzRmlyZWQpICsgc2hvdC50cmFuc2l0QnVsbGV0c1xuICAgICAgICAgIHNob3QudHJhbnNpdCA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IHRoaXMudm9sbGV5U2l6ZVxuICAgICAgaWYgKHNob3QuYnVsbGV0c1Nob3QgPD0gMykgc2hvdC5idWxsZXRzU2hvdCA9IDNcbiAgICAgIGlmIChzaG90LmJ1bGxldHNTaG90ID49IGJ1bGxldExlZnQgJiYgIXRoaXMuaWdub3JlQW1tbykge1xuICAgICAgICBzaG90LmJ1bGxldHNTaG90ID0gYnVsbGV0TGVmdFxuICAgICAgICBidWxsZXRMZWZ0ID0gMFxuICAgICAgfVxuICAgICAgLy8gYnVsbGV0c1Nob3RUcmFuc2l0IGlzIGZvciBsb2NhbGl6aW5nIENvQzcuU2hvdEJ1bGxldHMgdXNpbmcgcGFyYW1ldGVycywgbG9jYWxpemUgZG9lcyBub3QgYWNjZXB0IGFkZGluZyBhIHBhcmFtZXRlciBhcyBhIHN1bSBvZiBzaG90LmJ1bGxldHNTaG90ICsgc2hvdC50cmFuc2l0QnVsbGV0cywgc28gSSBjcmVhdGUgYSBuZXcgdmFsdWUgaW4gYWR2YW5jZSB0byB1c2UgaW5zdGVhZFxuICAgICAgc2hvdC5idWxsZXRzU2hvdFRyYW5zaXQgPSBzaG90LmJ1bGxldHNTaG90ICsgc2hvdC50cmFuc2l0QnVsbGV0c1xuICAgIH1cbiAgICBpZiAodGhpcy5idXJzdCkge1xuICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IHBhcnNlSW50KHRoaXMud2VhcG9uLmRhdGEuZGF0YS51c2VzUGVyUm91bmQuYnVyc3QpXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy53ZWFwb24uZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5idXJzdClcbiAgICAgICAgOiAxXG4gICAgICBpZiAoc2hvdC5idWxsZXRzU2hvdCA+PSBidWxsZXRMZWZ0ICYmICF0aGlzLmlnbm9yZUFtbW8pIHtcbiAgICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IGJ1bGxldExlZnRcbiAgICAgICAgYnVsbGV0TGVmdCA9IDBcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID0gcGFyc2VJbnQodGhpcy50b3RhbEJ1bGxldHNGaXJlZCkgKyBzaG90LmJ1bGxldHNTaG90XG5cbiAgICBpZiAodGhpcy5haW1pbmcpIHtcbiAgICAgIHRoaXMuYWltaW5nID0gZmFsc2VcbiAgICAgIHRoaXMuYWltZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgdGhpcy5zaG90cy5wdXNoKHNob3QpXG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NvbWJhdC9yYW5nZS1pbml0aWF0b3IuaHRtbCdcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUNoYXRDYXJkICgpIHtcbiAgICB0aGlzLmNhbGNUYXJnZXRzRGlmZmljdWx0eSgpXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG5cbiAgICAvLyBjb25zdCBlbGVtZW50ID0gJChodG1sKVswXTtcbiAgICAvLyBjb25zdCB0YXJnZXRFbGVtZW50ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudGFyZ2V0VGVzdCcpO1xuICAgIC8vIHRoaXMudGFyZ2V0LmF0dGFjaFRvRWxlbWVudCh0YXJnZXRFbGVtZW50KTtcbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgY29uc3QgdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGlmICh0b2tlbikgc3BlYWtlckRhdGEudG9rZW4gPSB0b2tlbi5kb2N1bWVudFxuICAgIGVsc2Ugc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLmFjdG9yXG5cbiAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcbiAgICAvLyBpZiggdGhpcy5hY3Rvci5pc1Rva2VuKSBzcGVha2VyLmFsaWFzID0gdGhpcy5hY3Rvci50b2tlbi5uYW1lO1xuXG4gICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXIsXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfVxuXG4gICAgY29uc3Qgcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIC8vIGlmICggcm9sbE1vZGUgPT09ICdibGluZHJvbGwnICkgY2hhdERhdGFbJ2JsaW5kJ10gPSB0cnVlO1xuICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcblxuICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuXG4gICAgcmV0dXJuIGNoYXRNZXNzYWdlXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgdGhpcy5jYWxjVGFyZ2V0c0RpZmZpY3VsdHkoKVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBodG1sIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBjb25zdCBmbGFnID0gZmxhZ05hbWUuaW5jbHVkZXMoJy0nKVxuICAgICAgPyBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWdOYW1lKVxuICAgICAgOiBmbGFnTmFtZVxuICAgIGlmIChcbiAgICAgIGZsYWcgPT09ICdzaW5nbGVTaG90JyB8fFxuICAgICAgZmxhZyA9PT0gJ211bHRpcGxlU2hvdHMnIHx8XG4gICAgICBmbGFnID09PSAnZnVsbEF1dG8nXG4gICAgKSB7XG4gICAgICB0aGlzLnNpbmdsZVNob3QgPSBmYWxzZVxuICAgICAgdGhpcy5tdWx0aXBsZVNob3RzID0gZmFsc2VcbiAgICAgIHRoaXMuZnVsbEF1dG8gPSBmYWxzZVxuICAgICAgaWYgKGZsYWcgPT09ICdmdWxsQXV0bycpIHRoaXMuYnVyc3QgPSBmYWxzZVxuICAgICAgdGhpc1tmbGFnXSA9IHRydWVcbiAgICB9IGVsc2UgaWYgKGZsYWcgPT09ICdidXJzdCcpIHtcbiAgICAgIHRoaXMuZnVsbEF1dG8gPSBmYWxzZVxuICAgICAgaWYgKCF0aGlzLnNpbmdsZVNob3QgJiYgIXRoaXMubXVsdGlwbGVTaG90cykgdGhpcy5zaW5nbGVTaG90ID0gdHJ1ZVxuICAgICAgdGhpcy5idXJzdCA9ICF0aGlzLmJ1cnN0XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXNbZmxhZ10gPSAhdGhpc1tmbGFnXVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlc29sdmVDYXJkICgpIHtcbiAgICB0aGlzLnJvbGxzID0gW11cbiAgICBpZiAodGhpcy5tdWx0aVRhcmdldCkge1xuICAgICAgbGV0IHdlYXBvbk1hbGZ1bmN0aW9uID0gZmFsc2VcbiAgICAgIGxldCBpbmRleCA9IDBcbiAgICAgIHdoaWxlICghd2VhcG9uTWFsZnVuY3Rpb24gJiYgdGhpcy5zaG90cy5sZW5ndGggPiBpbmRleCkge1xuICAgICAgICBjb25zdCByb2xsID0gYXdhaXQgdGhpcy5zaG9vdEF0VGFyZ2V0KHRoaXMuc2hvdHNbaW5kZXhdKVxuICAgICAgICBpZiAocm9sbC5kaWNlPy5yb2xsKSB7XG4gICAgICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2Qocm9sbC5kaWNlLnJvbGwpXG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy53ZWFwb24uc2hvb3RCdWxsZXRzKFxuICAgICAgICAgIHBhcnNlSW50KHRoaXMuc2hvdHNbaW5kZXhdLmJ1bGxldHNTaG90KSArXG4gICAgICAgICAgICBwYXJzZUludCh0aGlzLnNob3RzW2luZGV4XS50cmFuc2l0QnVsbGV0cylcbiAgICAgICAgKVxuICAgICAgICBpZiAocm9sbC5oYXNNYWxmdW5jdGlvbikge1xuICAgICAgICAgIHJvbGwuaXNTdWNjZXNzID0gZmFsc2VcbiAgICAgICAgICB3ZWFwb25NYWxmdW5jdGlvbiA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpbmRleCsrXG4gICAgICAgIHRoaXMucm9sbHMucHVzaChyb2xsKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByb2xsID0gYXdhaXQgdGhpcy5zaG9vdEF0VGFyZ2V0KClcbiAgICAgIGlmIChyb2xsLmRpY2U/LnJvbGwpIHtcbiAgICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2Qocm9sbC5kaWNlLnJvbGwpXG4gICAgICB9XG4gICAgICBsZXQgYnVsbGV0RmlyZWQgPSB0aGlzLmJ1cnN0XG4gICAgICAgID8gcGFyc2VJbnQodGhpcy53ZWFwb24uZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5idXJzdClcbiAgICAgICAgOiAxXG4gICAgICBpZiAoYnVsbGV0RmlyZWQgPj0gdGhpcy50b3RhbEFtbW8pIGJ1bGxldEZpcmVkID0gdGhpcy50b3RhbEFtbW9cbiAgICAgIGNvbnN0IHNob3QgPSB7XG4gICAgICAgIHRhcmdldDogdGhpcy5hY3RpdmVUYXJnZXQsXG4gICAgICAgIGV4dHJlbWVSYW5nZTogdGhpcy5hY3RpdmVUYXJnZXQuZXh0cmVtZVJhbmdlLFxuICAgICAgICBhY3RvcktleTogdGhpcy5hY3RpdmVUYXJnZXQuYWN0b3JLZXksXG4gICAgICAgIGFjdG9yTmFtZTogdGhpcy5hY3RpdmVUYXJnZXQubmFtZSxcbiAgICAgICAgZGlmZmljdWx0eTogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubGV2ZWwsXG4gICAgICAgIG1vZGlmaWVyOiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5tb2RpZmllcixcbiAgICAgICAgZGFtYWdlOiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5kYW1hZ2UsXG4gICAgICAgIGJ1bGxldHNTaG90OiBidWxsZXRGaXJlZCxcbiAgICAgICAgdHJhbnNpdEJ1bGxldHM6IDAsXG4gICAgICAgIHRyYW5zaXQ6IGZhbHNlXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLndlYXBvbi5zaG9vdEJ1bGxldHMoYnVsbGV0RmlyZWQpXG5cbiAgICAgIGlmIChyb2xsLmhhc01hbGZ1bmN0aW9uKSB7XG4gICAgICAgIHJvbGwuaXNTdWNjZXNzID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIHRoaXMuc2hvdHMucHVzaChzaG90KVxuICAgICAgdGhpcy5yb2xscy5wdXNoKHJvbGwpXG4gICAgfVxuICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIHNob290QXRUYXJnZXQgKHNob3QgPSBudWxsKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gc2hvdFxuICAgICAgPyB0aGlzLmdldFRhcmdldEZyb21LZXkoc2hvdC5hY3RvcktleSlcbiAgICAgIDogdGhpcy5hY3RpdmVUYXJnZXRcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIGNoZWNrLmFjdG9yS2V5ID0gdGhpcy5hY3RvcktleVxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy5hY3RvcktleVxuICAgIGNoZWNrLml0ZW0gPSB0aGlzLml0ZW1JZFxuICAgIC8vIENvbWJhdCByb2xsIGNhbm5vdCBiZSBibGluZCBvciB1bmtub3duXG4gICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgY2hlY2suaXNVbmtvbnduID0gZmFsc2VcbiAgICBpZiAodGhpcy5hdXRvRmlyZSkgY2hlY2suc2tpbGwgPSB0aGlzLmF1dG9XZWFwb25Ta2lsbFxuICAgIGVsc2UgY2hlY2suc2tpbGwgPSB0aGlzLm1haW5XZWFwb25Ta2lsbFxuICAgIGlmICh0aGlzLm11bHRpVGFyZ2V0KSB7XG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gc2hvdC5kaWZmaWN1bHR5XG4gICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBzaG90Lm1vZGlmaWVyXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2FsY1RhcmdldHNEaWZmaWN1bHR5KClcbiAgICAgIHRoaXMudG90YWxCdWxsZXRzRmlyZWQgPSBwYXJzZUludCh0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkKSArIDFcbiAgICAgIGlmICh0aGlzLmFpbWluZykge1xuICAgICAgICB0aGlzLmFpbWluZyA9IGZhbHNlXG4gICAgICAgIHRoaXMuYWltZWQgPSB0cnVlXG4gICAgICB9XG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubGV2ZWxcbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5Lm1vZGlmaWVyXG4gICAgfVxuXG4gICAgY2hlY2suZGV0YWlscyA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UYXJnZXQnKX06ICR7dGFyZ2V0Lm5hbWV9YFxuICAgIGNoZWNrLnRhcmdldEtleSA9IHRhcmdldC5hY3RvcktleVxuXG4gICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgcmV0dXJuIGNoZWNrXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiBudWxsXG4gICAgY29uc3QgY2FyZCA9ICQobWVzc2FnZS5kYXRhLmNvbnRlbnQpWzBdXG5cbiAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZCwgbWVzc2FnZUlkKVxuICAgIGluaXRpYXRvci5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcblxuICAgIHJldHVybiBpbml0aWF0b3JcbiAgfVxuXG4gIGNoYW5nZVZvbGxleVNpemUgKHgpIHtcbiAgICB0aGlzLnZvbGxleVNpemUgPSB0aGlzLnZvbGxleVNpemUgKyB4XG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBzdGF0aWMgdXBkYXRlQ2FyZFN3aXRjaCAoZXZlbnQsIHB1Ymxpc2hVcGRhdGUgPSB0cnVlKSB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnJhbmdlLmluaXRpYXRvcicpXG4gICAgY29uc3QgZmxhZyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnXG4gICAgY29uc3QgY2FtZWxGbGFnID0gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShmbGFnKVxuXG4gICAgLy8gdXBkYXRlIG9ubHkgZm9yIGxvY2FsIHBsYXllclxuICAgIGlmICghcHVibGlzaFVwZGF0ZSkge1xuICAgICAgY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ10gPSBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSAhPT0gJ3RydWUnXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ3N3aXRjaGVkLW9uJylcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5zZWxlY3RlZCA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHVwZGF0ZSBjYXJkIGZvciBhbGwgcGxheWVyXG4gICAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0LWZsYWcnKSkge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50YXJnZXQnKVxuICAgICAgICBjb25zdCBrZXkgPSBwYXJzZUludCh0YXJnZXQuZGF0YXNldC50YXJnZXRLZXkpXG4gICAgICAgIGluaXRpYXRvci50YXJnZXRzW2tleV0udG9nZ2xlRmxhZyhjYW1lbEZsYWcpXG4gICAgICB9IGVsc2UgaW5pdGlhdG9yLnRvZ2dsZUZsYWcoY2FtZWxGbGFnKVxuICAgICAgaW5pdGlhdG9yLnVwZGF0ZUNoYXRDYXJkKClcbiAgICB9XG4gIH1cblxuICBwYXNzUm9sbCAocm9sbEluZGV4KSB7XG4gICAgY29uc3Qgcm9sbCA9IHRoaXMucm9sbHNbcm9sbEluZGV4XVxuICAgIGNvbnN0IGx1Y2tBbW91bnQgPSBwYXJzZUludChyb2xsLmx1Y2tOZWVkZWQpXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgYCR7dGhpcy5hY3Rvci5uYW1lfSBkb2VzIG5vdCBoYXZlIGVub3VnaCBsdWNrIHRvIHBhc3MgdGhlIGNoZWNrYFxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHJvbGwuc3VjY2Vzc0xldmVsID0gcm9sbC5kaWZmaWN1bHR5XG4gICAgcm9sbC5pc1N1Y2Nlc3MgPSB0cnVlXG4gICAgcm9sbC5sdWNrU3BlbnQgPSB0cnVlXG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICB1cGdyYWRlUm9sbCAocm9sbEluZGV4LCB1cGdyYWRlaW5kZXgpIHtcbiAgICAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICAgIGNvbnN0IHJvbGwgPSB0aGlzLnJvbGxzW3JvbGxJbmRleF1cbiAgICBjb25zdCBpbmNyZWFzZWRTdWNjZXNzID0gcm9sbC5pbmNyZWFzZVN1Y2Nlc3NbdXBncmFkZWluZGV4XVxuICAgIGNvbnN0IGx1Y2tBbW91bnQgPSBwYXJzZUludChpbmNyZWFzZWRTdWNjZXNzLmx1Y2tBbW91bnQpXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgYCR7dGhpcy5hY3Rvci5uYW1lfSBkb2VzIG5vdCBoYXZlIGVub3VnaCBsdWNrIHRvIHBhc3MgdGhlIGNoZWNrYFxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IG5ld1N1Y2Nlc3NMZXZlbCA9IHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MubmV3U3VjY2Vzc0xldmVsKVxuICAgIHJvbGwuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXG4gICAgaWYgKHJvbGwuZGlmZmljdWx0eSA8PSBuZXdTdWNjZXNzTGV2ZWwpIHJvbGwuaXNTdWNjZXNzID0gdHJ1ZVxuICAgIHJvbGwubHVja1NwZW50ID0gdHJ1ZVxuICAgIHRoaXMudXBkYXRlQ2hhdENhcmQoKSAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICB9XG5cbiAgc3RhdGljIGdldEZyb21DYXJkIChjYXJkLCBtZXNzYWdlSWQgPSBudWxsKSB7XG4gICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBuZXcgQ29DN1JhbmdlSW5pdGlhdG9yKClcbiAgICByYW5nZUluaXRpYXRvci5fdGFyZ2V0cyA9IFtdXG4gICAgaWYgKG1lc3NhZ2VJZCkgcmFuZ2VJbml0aWF0b3IubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgZWxzZSBpZiAoY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpKSB7XG4gICAgICByYW5nZUluaXRpYXRvci5tZXNzYWdlSWQgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWRcbiAgICB9XG5cbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KHJhbmdlSW5pdGlhdG9yLCBjYXJkKVxuICAgIGNvbnN0IGNhcmRUYXJnZXRzID0gY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcudGFyZ2V0JylcbiAgICBmb3IgKGNvbnN0IHQgb2YgY2FyZFRhcmdldHMpIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IENvQzdSYW5nZVRhcmdldC5nZXRGcm9tRWxlbWVudCh0KVxuICAgICAgcmFuZ2VJbml0aWF0b3IudGFyZ2V0cy5wdXNoKHRhcmdldClcbiAgICB9XG5cbiAgICBjb25zdCBjYXJkU2hvdHMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaG90JylcbiAgICBpZiAoY2FyZFNob3RzKSB7XG4gICAgICBmb3IgKGNvbnN0IHMgb2YgY2FyZFNob3RzKSB7XG4gICAgICAgIGNvbnN0IHNob3QgPSB7fVxuICAgICAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KHNob3QsIHMpXG4gICAgICAgIHJhbmdlSW5pdGlhdG9yLnNob3RzLnB1c2goc2hvdClcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gZWxzZSB7XG4gICAgLy8gIGNvbnN0IHNob3QgPSB7XG4gICAgLy8gICAgICBzaG90T3JkZXI6IDAsXG4gICAgLy8gICAgICBhY3RvcktleTogbnVsbCxcbiAgICAvLyAgICAgIGFjdG9yTmFtZTogJ2R1bW15J1xuICAgIC8vICB9XG4gICAgLy8gfVxuXG4gICAgcmFuZ2VJbml0aWF0b3Iucm9sbHMgPSBbXVxuICAgIGNvbnN0IHJvbGxzID0gY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcucm9sbC1yZXN1bHQnKVxuICAgIGZvciAoY29uc3QgciBvZiByb2xscykge1xuICAgICAgY29uc3Qgcm9sbCA9IENvQzdSb2xsLmdldEZyb21FbGVtZW50KHIpXG4gICAgICByYW5nZUluaXRpYXRvci5yb2xscy5wdXNoKHJvbGwpXG4gICAgfVxuXG4gICAgcmFuZ2VJbml0aWF0b3IuZGFtYWdlID0gW11cbiAgICBjb25zdCBkYW1hZ2VSb2xscyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnLmRhbWFnZS1yZXN1bHRzJylcbiAgICBmb3IgKGNvbnN0IGRyIG9mIGRhbWFnZVJvbGxzKSB7XG4gICAgICBjb25zdCBkYW1hZ2VSb2xsID0gQ29DN0RhbWFnZS5nZXRGcm9tRWxlbWVudChkcilcbiAgICAgIHJhbmdlSW5pdGlhdG9yLmRhbWFnZS5wdXNoKGRhbWFnZVJvbGwpXG4gICAgfVxuXG4gICAgcmV0dXJuIHJhbmdlSW5pdGlhdG9yXG4gIH1cblxuICBhc3luYyByb2xsRGFtYWdlICgpIHtcbiAgICB0aGlzLmRhbWFnZSA9IFtdXG4gICAgY29uc3QgaGl0cyA9IHRoaXMuc3VjY2Vzc2Z1bEhpdHNcblxuICAgIC8vIGxldCB2b2xsZXlTaXplID0gMTtcbiAgICAvLyBpZiggdGhpcy5mdWxsQXV0bykge1xuICAgIC8vICB2b2xsZXlTaXplID0gdGhpcy52b2xsZXlTaXplO1xuICAgIC8vICBpZih2b2xsZXlTaXplIDwgMykgdm9sbGV5U2l6ZSA9IDM7XG4gICAgLy8gfVxuICAgIC8vIGlmKCB0aGlzLmJ1cnN0KSB2b2xsZXlTaXplID0gcGFyc2VJbnQodGhpcy53ZWFwb24uZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5idXJzdCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoaXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBoID0gaGl0c1tpXVxuICAgICAgY29uc3Qgdm9sbGV5U2l6ZSA9IHBhcnNlSW50KGguc2hvdC5idWxsZXRzU2hvdClcbiAgICAgIGNvbnN0IGRhbWFnZVJvbGxzID0gW11cblxuICAgICAgbGV0IGRhbWFnZUZvcm11bGEgPSBTdHJpbmcoaC5zaG90LmRhbWFnZSlcbiAgICAgIGlmICghZGFtYWdlRm9ybXVsYSB8fCBkYW1hZ2VGb3JtdWxhID09PSAnJykgZGFtYWdlRm9ybXVsYSA9ICcwJ1xuICAgICAgY29uc3QgZGFtYWdlRGllID0gQ29DN0RhbWFnZS5nZXRNYWluRGllKGRhbWFnZUZvcm11bGEpXG4gICAgICBjb25zdCBtYXhEYW1hZ2UgPSBuZXcgUm9sbChkYW1hZ2VGb3JtdWxhKS5ldmFsdWF0ZSh7XG4gICAgICAgIG1heGltaXplOiB0cnVlXG4gICAgICB9KS50b3RhbFxuICAgICAgY29uc3QgY3JpdGljYWxEYW1hZ2VGb3JtdWxhID0gdGhpcy53ZWFwb24uaW1wYWxlXG4gICAgICAgID8gYCR7ZGFtYWdlRm9ybXVsYX0gKyAke21heERhbWFnZX1gXG4gICAgICAgIDogYCR7bWF4RGFtYWdlfWBcbiAgICAgIGNvbnN0IGNyaXRpY2FsRGFtYWdlRGllID0gQ29DN0RhbWFnZS5nZXRNYWluRGllKGNyaXRpY2FsRGFtYWdlRm9ybXVsYSlcblxuICAgICAgbGV0IGltcGFsaW5nU2hvdHMgPSAwXG4gICAgICBsZXQgc3VjY2Vzc2Z1bFNob3RzID0gMFxuICAgICAgbGV0IGNyaXRpY2FsID0gZmFsc2VcbiAgICAgIGlmICh0aGlzLmZ1bGxBdXRvIHx8IHRoaXMuYnVyc3QpIHtcbiAgICAgICAgc3VjY2Vzc2Z1bFNob3RzID0gTWF0aC5mbG9vcih2b2xsZXlTaXplIC8gMilcbiAgICAgIH1cbiAgICAgIGlmIChzdWNjZXNzZnVsU2hvdHMgPT09IDApIHN1Y2Nlc3NmdWxTaG90cyA9IDFcbiAgICAgIGlmIChoLnJvbGwuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZSkge1xuICAgICAgICBpbXBhbGluZ1Nob3RzID0gc3VjY2Vzc2Z1bFNob3RzXG4gICAgICAgIHN1Y2Nlc3NmdWxTaG90cyA9IHZvbGxleVNpemUgLSBpbXBhbGluZ1Nob3RzXG4gICAgICAgIGNyaXRpY2FsID0gdHJ1ZVxuICAgICAgICBpZiAoXG4gICAgICAgICAgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbCAhPT0gaC5yb2xsLnN1Y2Nlc3NMZXZlbCAmJlxuICAgICAgICAgIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWUgPD0gaC5yb2xsLmRpZmZpY3VsdHkgfHxcbiAgICAgICAgICAgIGguc2hvdC5leHRyZW1lUmFuZ2UpXG4gICAgICAgICkge1xuICAgICAgICAgIHN1Y2Nlc3NmdWxTaG90cyA9IHZvbGxleVNpemVcbiAgICAgICAgICBpbXBhbGluZ1Nob3RzID0gMFxuICAgICAgICAgIGNyaXRpY2FsID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsZXQgdG90YWwgPSAwXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgc3VjY2Vzc2Z1bFNob3RzOyBpbmRleCsrKSB7XG4gICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgUm9sbChkYW1hZ2VGb3JtdWxhKVxuICAgICAgICAvKiogTU9ESUYgMC44LnggKiovXG4gICAgICAgIGF3YWl0IHJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChyb2xsKVxuICAgICAgICAvKioqKioqKioqKioqKioqKiovXG4gICAgICAgIGRhbWFnZVJvbGxzLnB1c2goe1xuICAgICAgICAgIGZvcm11bGE6IGRhbWFnZUZvcm11bGEsXG4gICAgICAgICAgdG90YWw6IHJvbGwudG90YWwsXG4gICAgICAgICAgZGllOiBkYW1hZ2VEaWUsXG4gICAgICAgICAgY3JpdGljYWw6IGZhbHNlXG4gICAgICAgIH0pXG4gICAgICAgIHRvdGFsICs9IHJvbGwudG90YWxcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBpbXBhbGluZ1Nob3RzOyBpbmRleCsrKSB7XG4gICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgUm9sbChjcml0aWNhbERhbWFnZUZvcm11bGEpXG4gICAgICAgIC8qKiBNT0RJRiAwLjgueCAqKi9cbiAgICAgICAgYXdhaXQgcm9sbC5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHJvbGwpXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKi9cbiAgICAgICAgZGFtYWdlUm9sbHMucHVzaCh7XG4gICAgICAgICAgZm9ybXVsYTogY3JpdGljYWxEYW1hZ2VGb3JtdWxhLFxuICAgICAgICAgIHRvdGFsOiByb2xsLnRvdGFsLFxuICAgICAgICAgIGRpZTogY3JpdGljYWxEYW1hZ2VEaWUsXG4gICAgICAgICAgY3JpdGljYWw6IHRydWVcbiAgICAgICAgfSlcbiAgICAgICAgdG90YWwgKz0gcm9sbC50b3RhbFxuICAgICAgfVxuXG4gICAgICBsZXQgdGFyZ2V0TmFtZSA9ICdkdW1teSdcbiAgICAgIGxldCB0YXJnZXQgPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleShoLnJvbGwudGFyZ2V0S2V5KVxuICAgICAgaWYgKCF0YXJnZXQpIHRhcmdldCA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGgucm9sbC50YXJnZXRLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgaWYgKHRhcmdldCkgdGFyZ2V0TmFtZSA9IHRhcmdldC5uYW1lXG5cbiAgICAgIHRoaXMuZGFtYWdlLnB1c2goe1xuICAgICAgICB0YXJnZXRLZXk6IGgucm9sbC50YXJnZXRLZXksXG4gICAgICAgIHRhcmdldE5hbWU6IHRhcmdldE5hbWUsXG4gICAgICAgIHJvbGxzOiBkYW1hZ2VSb2xscyxcbiAgICAgICAgdG90YWw6IHRvdGFsLFxuICAgICAgICBjcml0aWNhbDogY3JpdGljYWwsXG4gICAgICAgIGRlYWx0OiBmYWxzZSxcbiAgICAgICAgcmVzdWx0U3RyaW5nOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LnJhbmdlQ29tYmF0RGFtYWdlJywge1xuICAgICAgICAgIG5hbWU6IHRhcmdldE5hbWUsXG4gICAgICAgICAgdG90YWw6IHRvdGFsXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH1cblxuICAgIHRoaXMuZGFtYWdlUm9sbGVkID0gdGhpcy5kYW1hZ2UubGVuZ3RoICE9PSAwXG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBhc3luYyBkZWFsRGFtYWdlICgpIHtcbiAgICBmb3IgKGxldCBkSW5kZXggPSAwOyBkSW5kZXggPCB0aGlzLmRhbWFnZS5sZW5ndGg7IGRJbmRleCsrKSB7XG4gICAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuZGFtYWdlW2RJbmRleF0udGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmIChhY3RvciA9PT0gbnVsbCkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1RhcmdldFRvRGFtYWdlJykpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsVGFrZW4gPSAwXG4gICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0udG90YWxBYnNvcmJlZCA9IDBcbiAgICAgICAgZm9yIChcbiAgICAgICAgICBsZXQgckluZGV4ID0gMDtcbiAgICAgICAgICBySW5kZXggPCB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzLmxlbmd0aDtcbiAgICAgICAgICBySW5kZXgrK1xuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBkZWFsdEFtb3VudCA9IGF3YWl0IGFjdG9yLmRlYWxEYW1hZ2UoXG4gICAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzW3JJbmRleF0udG90YWxcbiAgICAgICAgICApXG4gICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS50b3RhbFRha2VuICs9IGRlYWx0QW1vdW50XG4gICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yb2xsc1tySW5kZXhdLnRha2VuID0gZGVhbHRBbW91bnRcbiAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzW3JJbmRleF0uYWJzb3JiZWQgPVxuICAgICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yb2xsc1tySW5kZXhdLnRvdGFsIC0gZGVhbHRBbW91bnRcbiAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsQWJzb3JiZWQgKz1cbiAgICAgICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0ucm9sbHNbckluZGV4XS50b3RhbCAtIGRlYWx0QW1vdW50XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5kZWFsdCA9IHRydWVcbiAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LnJhbmdlQ29tYmF0RGFtYWdlQXJtb3InLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGFtYWdlW2RJbmRleF0udGFyZ2V0TmFtZSxcbiAgICAgICAgICAgIHRvdGFsOiB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsVGFrZW4sXG4gICAgICAgICAgICBhcm1vcjogdGhpcy5kYW1hZ2VbZEluZGV4XS50b3RhbEFic29yYmVkXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuZGFtYWdlRGVhbHQgPSB0cnVlXG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvQzdSYW5nZVRhcmdldCB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSA9IG51bGwpIHtcbiAgICB0aGlzLmFjdG9yS2V5ID0gYWN0b3JLZXlcbiAgICB0aGlzLmNvdmVyID0gZmFsc2VcbiAgICB0aGlzLnBvaW50QmxhbmtSYW5nZSA9IGZhbHNlXG4gICAgdGhpcy5iYXNlUmFuZ2UgPSB0cnVlXG4gICAgdGhpcy5sb25nUmFuZ2UgPSBmYWxzZVxuICAgIHRoaXMuZXh0cmVtZVJhbmdlID0gZmFsc2VcbiAgICB0aGlzLmluTWVsZWUgPSBmYWxzZVxuICB9XG5cbiAgZ2V0IGJpZyAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5fYmlnKSB7XG4gICAgICBpZiAodGhpcy5hY3RvciAmJiB0aGlzLmFjdG9yLmJ1aWxkKSB0aGlzLl9iaWcgPSB0aGlzLmFjdG9yLmJ1aWxkID49IDRcbiAgICAgIGVsc2UgdGhpcy5fYmlnID0gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2JpZ1xuICB9XG5cbiAgc2V0IGJpZyAoYikge1xuICAgIHRoaXMuX2JpZyA9IGJcbiAgfVxuXG4gIGdldCBzbWFsbCAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5fc21hbGwpIHtcbiAgICAgIGlmICh0aGlzLmFjdG9yICYmIHRoaXMuYWN0b3IuYnVpbGQpIHRoaXMuX3NtYWxsID0gdGhpcy5hY3Rvci5idWlsZCA8PSAtMlxuICAgICAgZWxzZSB0aGlzLl9zbWFsbCA9IGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9zbWFsbFxuICB9XG5cbiAgc2V0IHNtYWxsIChiKSB7XG4gICAgdGhpcy5fc21hbGwgPSBiXG4gIH1cblxuICBnZXQgbm9ybWFsICgpIHtcbiAgICByZXR1cm4gIXRoaXMuYmlnICYmICF0aGlzLnNtYWxsXG4gIH1cblxuICBzZXQgbm9ybWFsIChiKSB7XG4gICAgdGhpcy5fYmlnID0gZmFsc2VcbiAgICB0aGlzLl9zbWFsbCA9IGZhbHNlXG4gIH1cblxuICBnZXQgaXNGYXN0ICgpIHtcbiAgICBpZiAodGhpcy5hY3RvciAmJiB0aGlzLmFjdG9yLm1vdikgcmV0dXJuIHRoaXMuYWN0b3IubW92ID49IDhcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBmYXN0ICgpIHtcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9mYXN0KSB7XG4gICAgICAvLyBpZiggdGhpcy5hY3RvciAmJiB0aGlzLmFjdG9yLm1vdikgdGhpcy5fZmFzdCA9IHRoaXMuYWN0b3IubW92ID49IDg7XG4gICAgICAvLyBlbHNlIHRoaXMuX2Zhc3QgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2Zhc3QgPSBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZmFzdFxuICB9XG5cbiAgc2V0IGZhc3QgKGIpIHtcbiAgICB0aGlzLl9mYXN0ID0gYlxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAodGhpcy5hY3RvcktleSAmJiAhdGhpcy5fYWN0b3IpIHtcbiAgICAgIHRoaXMuX2FjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9hY3RvclxuICB9XG5cbiAgZ2V0IG5hbWUgKCkge1xuICAgIGlmICh0aGlzLnRva2VuKSByZXR1cm4gdGhpcy50b2tlbi5uYW1lXG4gICAgaWYgKHRoaXMuYWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLm5hbWVcbiAgICByZXR1cm4gJ0R1bW15J1xuICB9XG5cbiAgZ2V0IGltZyAoKSB7XG4gICAgaWYgKHRoaXMudG9rZW4pIHtcbiAgICAgIC8vIEZvdW5kcnkgVlRUIHY5XG4gICAgICBpZiAodGhpcy50b2tlbi5kYXRhLmltZykge1xuICAgICAgICByZXR1cm4gdGhpcy50b2tlbi5kYXRhLmltZ1xuICAgICAgfVxuICAgICAgLy8gRm91bmRyeSBWVFQgdjEwXG4gICAgICBpZiAodGhpcy50b2tlbi5kb2N1bWVudD8udGV4dHVyZS5zcmMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9rZW4uZG9jdW1lbnQ/LnRleHR1cmUuc3JjXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmFjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5kYXRhLmltZ1xuICAgIHJldHVybiAnLi4vaWNvbnMvc3ZnL215c3RlcnktbWFuLWJsYWNrLnN2ZydcbiAgfVxuXG4gIGdldCB0b2tlbiAoKSB7XG4gICAgaWYgKCF0aGlzLl90b2tlbiAmJiB0aGlzLmFjdG9yS2V5KSB7XG4gICAgICB0aGlzLl90b2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90b2tlblxuICB9XG5cbiAgZ2V0IHNpemVUZXh0ICgpIHtcbiAgICBpZiAodGhpcy5iaWcpIHtcbiAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucmFuZ2VDb21iYXRDYXJkLkJpZ1RhcmdldFRpdGxlJylcbiAgICB9XG4gICAgaWYgKHRoaXMuc21hbGwpIHtcbiAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucmFuZ2VDb21iYXRDYXJkLlNtYWxsVGFyZ2V0VGl0bGUnKVxuICAgIH1cbiAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnJhbmdlQ29tYmF0Q2FyZC5Ob3JtYWxUYXJnZXRUaXRsZScpXG4gIH1cblxuICBnZXQgc2l6ZUxhYmVsICgpIHtcbiAgICBpZiAodGhpcy5iaWcpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucmFuZ2VDb21iYXRDYXJkLkJpZ1RhcmdldCcpXG4gICAgaWYgKHRoaXMuc21hbGwpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuY29tYmF0Q2FyZC5TbWFsbFRhcmdldCcpXG4gICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yYW5nZUNvbWJhdENhcmQuTm9ybWFsVGFyZ2V0JylcbiAgfVxuXG4gIGdldCBkaWZmaWN1bHR5ICgpIHtcbiAgICBpZiAodGhpcy5iYXNlUmFuZ2UgfHwgdGhpcy5wb2ludEJsYW5rUmFuZ2UpIHtcbiAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB9XG4gICAgaWYgKHRoaXMubG9uZ1JhbmdlKSByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkXG4gICAgaWYgKHRoaXMuZXh0cmVtZVJhbmdlKSByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaW1wb3NzaWJsZVxuICB9XG5cbiAgZ2V0IG1vZGlmaWVyICgpIHtcbiAgICBsZXQgbW9kaWZpZXIgPSAwXG4gICAgaWYgKHRoaXMuY292ZXIpIG1vZGlmaWVyLS1cbiAgICBpZiAodGhpcy5wb2ludEJsYW5rUmFuZ2UpIG1vZGlmaWVyKytcbiAgICBpZiAodGhpcy5mYXN0KSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMuc21hbGwpIG1vZGlmaWVyLS1cbiAgICBpZiAodGhpcy5iaWcpIG1vZGlmaWVyKytcbiAgICBpZiAodGhpcy5pbk1lbGVlKSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMuc3VycHJpc2VkKSBtb2RpZmllcisrXG4gICAgcmV0dXJuIG1vZGlmaWVyXG4gIH1cblxuICBzZXQgdG9rZW4gKHQpIHtcbiAgICB0aGlzLl90b2tlbiA9IHRcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tRWxlbWVudCAoZWxlbWVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IG5ldyBDb0M3UmFuZ2VUYXJnZXQoKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQodGFyZ2V0LCBlbGVtZW50KVxuICAgIHJldHVybiB0YXJnZXRcbiAgfVxuXG4gIHN0YXRpYyBjaGFuZ2VEaXNwbGF5ZWRUYXJnZXQgKGV2ZW50KSB7XG4gICAgaWYgKCFldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0LXNlbGVjdG9yJykpIHJldHVybiBudWxsXG4gICAgY29uc3QgdGFyZ2V0U2VsZWN0b3IgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgdGFyZ2V0cyA9IHRhcmdldFNlbGVjdG9yLmNsb3Nlc3QoJy50YXJnZXRzJylcbiAgICBjb25zdCB0YXJnZXRMaXN0ID0gdGFyZ2V0cy5xdWVyeVNlbGVjdG9yQWxsKCcudGFyZ2V0JylcbiAgICByZXR1cm4gdGFyZ2V0TGlzdFxuICB9XG5cbiAgYXR0YWNoVG9FbGVtZW50IChlbGVtZW50KSB7XG4gICAgY2hhdEhlbHBlci5hdHRhY2hPYmplY3RUb0VsZW1lbnQodGhpcywgZWxlbWVudClcbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWcpIHtcbiAgICBpZiAoXG4gICAgICBmbGFnID09PSAnYmFzZVJhbmdlJyB8fFxuICAgICAgZmxhZyA9PT0gJ2xvbmdSYW5nZScgfHxcbiAgICAgIGZsYWcgPT09ICdleHRyZW1lUmFuZ2UnIHx8XG4gICAgICBmbGFnID09PSAncG9pbnRCbGFua1JhbmdlJ1xuICAgICkge1xuICAgICAgdGhpcy5wb2ludEJsYW5rUmFuZ2UgPSBmYWxzZVxuICAgICAgdGhpcy5iYXNlUmFuZ2UgPSBmYWxzZVxuICAgICAgdGhpcy5sb25nUmFuZ2UgPSBmYWxzZVxuICAgICAgdGhpcy5leHRyZW1lUmFuZ2UgPSBmYWxzZVxuICAgICAgdGhpcy5vdXRPZlJhbmdlID0gZmFsc2VcbiAgICAgIHRoaXNbZmxhZ10gPSB0cnVlXG4gICAgfSBlbHNlIGlmIChmbGFnID09PSAnc2l6ZScpIHtcbiAgICAgIGlmICh0aGlzLnNtYWxsKSB7XG4gICAgICAgIHRoaXMuc21hbGwgPSBmYWxzZVxuICAgICAgICB0aGlzLmJpZyA9IHRydWVcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5iaWcpIHtcbiAgICAgICAgdGhpcy5zbWFsbCA9IGZhbHNlXG4gICAgICAgIHRoaXMuYmlnID0gZmFsc2VcbiAgICAgIH0gZWxzZSB0aGlzLnNtYWxsID0gdHJ1ZVxuICAgIH0gZWxzZSB0aGlzW2ZsYWddID0gIXRoaXNbZmxhZ11cbiAgICBpZiAoZmxhZyA9PT0gJ2Zhc3QnICYmIHRoaXMuZmFzdCAmJiAhdGhpcy5pc0Zhc3QpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5XYXJuRmFzdFRhcmdldFdpdGhXcm9uZ01PVicsIHtcbiAgICAgICAgICBtb3Y6IHRoaXMuYWN0b3IubW92XG4gICAgICAgIH0pXG4gICAgICApXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIGRpZmZPYmplY3QsIGV4cGFuZE9iamVjdCwgRm9ybURhdGFFeHRlbmRlZCwgZ2FtZSwgbWVyZ2VPYmplY3QsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi9oZWxwZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBJbnRlcmFjdGl2ZUNoYXRDYXJkIHtcbiAgY29uc3RydWN0b3IgKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zXG4gIH1cblxuICBnZXQgb3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHRoaXMuY29uc3RydWN0b3IuZGVmYXVsdE9wdGlvbnMsIHRoaXMuX29wdGlvbnMpXG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMudGVtcGxhdGVcbiAgfVxuXG4gIGdldCBjc3NDbGFzc2VzICgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmNsYXNzZXNcbiAgfVxuXG4gIGFzeW5jIHRvTWVzc2FnZSAob3B0aW9ubmFsQ2hhdERhdGEgPSB7fSkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQoaHRtbClbMF1cbiAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUodGhpcy5kYXRhU3RyaW5nKVxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzcyA9IHRoaXMuY29uc3RydWN0b3IubmFtZVxuICAgIGh0bWxDYXJkRWxlbWVudC5jbGFzc0xpc3QuYWRkKC4uLnRoaXMuY3NzQ2xhc3NlcylcblxuICAgIGNvbnN0IGNoYXREYXRhID0gbWVyZ2VPYmplY3QoXG4gICAgICB7XG4gICAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgICAgZmxhdm9yOiBnYW1lLmkxOG4ubG9jYWxpemUodGhpcy5vcHRpb25zLnRpdGxlKSxcbiAgICAgICAgY29udGVudDogaHRtbENhcmRFbGVtZW50Lm91dGVySFRNTFxuICAgICAgfSxcbiAgICAgIG9wdGlvbm5hbENoYXREYXRhXG4gICAgKVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSkudGhlbihtc2cgPT4ge1xuICAgICAgcmV0dXJuIG1zZ1xuICAgIH0pXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAob3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKG9wdGlvbnMuY29tcHV0ZSkgdGhpcy5jb21wdXRlKClcbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSB7XG4gICAgICB0aGlzLnRvTWVzc2FnZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuICAgICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cblxuICAgICAgLy8gQXR0YWNoIHRoZSBzYW5DaGVja0NhcmQgb2JqZWN0IHRvIHRoZSBtZXNzYWdlLlxuICAgICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKHRoaXMuZGF0YVN0cmluZylcbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzcyA9IHRoaXMuY29uc3RydWN0b3IubmFtZVxuICAgICAgaHRtbENhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4udGhpcy5jc3NDbGFzc2VzKVxuXG4gICAgICAvLyBVcGRhdGUgdGhlIG1lc3NhZ2UuXG4gICAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuICAgICAgaWYgKHRoaXMuY2xvc2VkKSBhd2FpdCBjaGF0TWVzc2FnZS5zZXRGbGFnKCdDb0M3JywgJ3N0YXRlJywgJ3Jlc29sdmVkJylcblxuICAgICAgY29uc3QgbXNnID0gYXdhaXQgY2hhdE1lc3NhZ2UudXBkYXRlKHtcbiAgICAgICAgY29udGVudDogaHRtbENhcmRFbGVtZW50Lm91dGVySFRNTFxuICAgICAgfSlcbiAgICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgICAgcmV0dXJuIG1zZ1xuICAgIH1cbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLmludGVyYWN0aXZlLWNhcmQgLmljLXJhZGlvLXN3aXRjaCcsXG4gICAgICB0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oJ2NsaWNrJywgJy5pbnRlcmFjdGl2ZS1jYXJkIC5pYy1zd2l0Y2gnLCB0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2NsaWNrJywgJy5pbnRlcmFjdGl2ZS1jYXJkIC5zdWJtaXQnLCB0aGlzLl9vblN1Ym1pdC5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2ZvY3Vzb3V0JywgJ2lucHV0JywgdGhpcy5fb25TdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdjbGljaycsICcuaW50ZXJhY3RpdmUtY2FyZCBidXR0b24nLCB0aGlzLl9vbkJ1dHRvbi5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2tleWRvd24nLCAnZm9ybScsIHRoaXMuX29uS2V5LmJpbmQodGhpcykpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgYmluZExpc3RlbmVycyAoaHRtbCkge1xuICAgIGNvbnN0IGh0bWxNZXNzYWdlRWxlbWVudCA9IGh0bWxbMF1cbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSBodG1sTWVzc2FnZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtY2FyZCcpXG4gICAgaWYgKCFodG1sQ2FyZEVsZW1lbnQpIHJldHVyblxuICAgIGlmICghaHRtbENhcmRFbGVtZW50LmRhdGFzZXQuY2FyZENsYXNzKSByZXR1cm5cbiAgICBpZiAoXG4gICAgICAhT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZ2FtZS5Db0M3LmNhcmRzKS5pbmNsdWRlcyhcbiAgICAgICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQuY2FyZENsYXNzXG4gICAgICApXG4gICAgKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IEludGVyYWN0aXZlQ2hhdENhcmQuZnJvbUhUTUxDYXJkRWxlbWVudChodG1sQ2FyZEVsZW1lbnQpXG4gICAgY29uc3QgdHlwZWRDYXJkID0gT2JqZWN0LmFzc2lnbihcbiAgICAgIG5ldyBnYW1lLkNvQzcuY2FyZHNbaHRtbENhcmRFbGVtZW50LmRhdGFzZXQuY2FyZENsYXNzXSgpLFxuICAgICAgY2FyZFxuICAgIClcbiAgICB0eXBlZENhcmQuYXNzaWduT2JqZWN0KClcbiAgICB0eXBlZENhcmQuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgfVxuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0byByZWFzc2lnbiBvYmplY3QgdHlwZVxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgYXNzaWduT2JqZWN0ICgpIHt9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZXZlbnQgd2lsbCBjaGVjayBmb3IgYW4gYWN0aW9uIChkYXRhLWFjdGlvbilcbiAgICogaWYgYSBtZXRob2Qgd2l0aCB0aGF0IG5hbWUgZXhpc3QgaXQgd2lsbCBiZSB0cmlnZ2VyZWQuXG4gICAqL1xuICBfb25CdXR0b24gKGV2ZW50KSB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIC8vIGJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnIC8vQXZvaWQgbXVsdGlwbGUgcHVzaFxuICAgIGNvbnN0IGFjdGlvbiA9IGJ1dHRvbi5kYXRhc2V0LmFjdGlvblxuICAgIGlmICh0aGlzW2FjdGlvbl0pIHRoaXNbYWN0aW9uXSh7IGV2ZW50OiBldmVudCwgdXBkYXRlOiB0cnVlIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKiBAcmV0dXJucyBmYWxzZSBpZiBrZXkgaXMgZW50ZXIgdG8gYXZvaWQgZ2xvYmFsIHN1Ym1pc3Npb25cbiAgICovXG4gIF9vbktleSAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgICByZXR1cm4gZXZlbnQua2V5ICE9PSAnRW50ZXInXG4gIH1cblxuICBfb25TdWJtaXQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGNhcmQgPSB0YXJnZXQuY2xvc2VzdCgnLmludGVyYWN0aXZlLWNhcmQnKVxuICAgIGlmICghY2FyZCkgcmV0dXJuXG4gICAgY29uc3QgdXBkYXRlcyA9IHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgIGlmICh1cGRhdGVzKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIF91cGRhdGUgKGNhcmQpIHtcbiAgICBjb25zdCBmb3JtcyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnZm9ybScpXG4gICAgbGV0IHVwZGF0ZXMgPSBmYWxzZVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm9ybXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGZvcm0gPSBmb3Jtc1tpXVxuICAgICAgY29uc3QgZmQgPSBuZXcgRm9ybURhdGFFeHRlbmRlZChmb3JtKVxuICAgICAgbGV0IGRhdGEgPSBmZC50b09iamVjdCgpXG4gICAgICBkYXRhID0gZGlmZk9iamVjdCh0aGlzLCBleHBhbmRPYmplY3QoZGF0YSkpXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhKSkge1xuICAgICAgICB0aGlzW2tleV0gPSB2YWx1ZVxuICAgICAgICB1cGRhdGVzID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlc1xuICB9XG5cbiAgZ2V0IG1lc3NhZ2UgKCkge1xuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZVxuICAgIGlmICh0aGlzLl9tZXNzYWdlSWQpIHJldHVybiBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLl9tZXNzYWdlSWQpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IG1lc3NhZ2UgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlID0geFxuICB9XG5cbiAgZ2V0IG1lc3NhZ2VJZCAoKSB7XG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIHRoaXMuX21lc3NhZ2VJZFxuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZS5pZFxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlSWQgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlSWQgPSB4XG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2xhc3NlczogWydpbnRlcmFjdGl2ZS1jYXJkJ10sXG4gICAgICBleGNsdWRlOiBbJ19hY3RvcicsICdfc2tpbGwnLCAnX2l0ZW0nLCAnX21lc3NhZ2UnLCAnX2h0bWxSb2xsJ10sXG4gICAgICBleGNsdWRlU3RhcnRXaXRoOiAnX18nXG4gICAgfVxuICB9XG5cbiAgZ2V0IGRhdGEgKCkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKHRoaXMuZGF0YVN0cmluZylcbiAgfVxuXG4gIGdldCBkYXRhU3RyaW5nICgpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcywgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5leGNsdWRlPy5pbmNsdWRlcyhrZXkpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgodGhpcy5vcHRpb25zLmV4Y2x1ZGVTdGFydFdpdGgpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9KVxuICB9XG5cbiAgZ2V0IHJvbGxNb2RlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGxNb2RlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICByZXR1cm4gdGhpcy5fcm9sbE1vZGVcbiAgfVxuXG4gIHNldCByb2xsTW9kZSAoeCkge1xuICAgIGlmICh4ID09PSBmYWxzZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tTWVzc2FnZShtZXNzYWdlKVxuICAgIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tTWVzc2FnZSAobWVzc2FnZSkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gJChtZXNzYWdlLmRhdGEuY29udGVudClbMF1cbiAgICBpZiAoIWNhcmRFbGVtZW50KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbUhUTUxDYXJkRWxlbWVudChjYXJkRWxlbWVudClcbiAgICBjYXJkLm1lc3NhZ2UgPSBtZXNzYWdlXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tSFRNTENhcmRFbGVtZW50IChjYXJkKSB7XG4gICAgY29uc3QgY2FyZERhdGEgPSBKU09OLnBhcnNlKHVuZXNjYXBlKGNhcmQuZGF0YXNldC5vYmplY3QpKVxuICAgIGlmICghY2FyZERhdGEubWVzc2FnZUlkKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpXG4gICAgICBjYXJkRGF0YS5tZXNzYWdlSWQgPSBtZXNzYWdlPy5kYXRhc2V0Py5tZXNzYWdlSWRcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZnJvbURhdGEoY2FyZERhdGEpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbURhdGEgKGRhdGEpIHtcbiAgICBjb25zdCBjYXJkID0gT2JqZWN0LmFzc2lnbihuZXcgdGhpcygpLCBkYXRhKVxuICAgIGF3YWl0IGNhcmQuYXNzaWduT2JqZWN0KClcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgLy8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIHNldEZsYWcgKGZsYWdOYW1lKSB7XG4gICAgaWYgKCFmbGFnTmFtZSAmJiAhKCQudHlwZShmbGFnTmFtZSkgPT09ICdzdHJpbmcnKSkgcmV0dXJuXG4gICAgdGhpc1tmbGFnTmFtZV0gPSB0cnVlXG4gIH1cblxuICB1bnNldEZsYWcgKGZsYWdOYW1lKSB7XG4gICAgaWYgKCFmbGFnTmFtZSAmJiAhKCQudHlwZShmbGFnTmFtZSkgPT09ICdzdHJpbmcnKSkgcmV0dXJuXG4gICAgdGhpc1tmbGFnTmFtZV0gPSBmYWxzZVxuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcbiAgICB0aGlzW2ZsYWdOYW1lXSA9ICF0aGlzW2ZsYWdOYW1lXVxuICB9XG5cbiAgYXN5bmMgX29uVG9nZ2xlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBpZiAoJ2FjdGlvbicgaW4gdGFyZ2V0LmRhdGFzZXQpIHJldHVybiB0aGlzLl9vbkJ1dHRvbihldmVudClcbiAgICBpZiAoXG4gICAgICB0YXJnZXQgJiZcbiAgICAgIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2dtLXNlbGVjdC1vbmx5JykgJiZcbiAgICAgICFnYW1lLnVzZXIuaXNHTVxuICAgICkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGZsYWcgPSB0YXJnZXQuZGF0YXNldC5mbGFnXG4gICAgaWYgKCFmbGFnKSByZXR1cm5cbiAgICBjb25zdCB0b2dnbGUgPSB0YXJnZXQuY2xvc2VzdCgnLmljLXJhZGlvJylcbiAgICBpZiAoIXRvZ2dsZSkge1xuICAgICAgdGhpcy50b2dnbGVGbGFnKGZsYWcpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGJ1dHRvbnMgPSB0b2dnbGUucXVlcnlTZWxlY3RvckFsbCgnLmljLXJhZGlvLXN3aXRjaCcpXG4gICAgICBmb3IgKGNvbnN0IGIgb2YgYnV0dG9ucykge1xuICAgICAgICB0aGlzLnVuc2V0RmxhZyhiLmRhdGFzZXQuZmxhZylcbiAgICAgIH1cbiAgICAgIHRoaXMuc2V0RmxhZyhmbGFnKVxuICAgIH1cbiAgICBjb25zdCBjYXJkID0gdGFyZ2V0LmNsb3Nlc3QoJy5pbnRlcmFjdGl2ZS1jYXJkJylcbiAgICBpZiAoY2FyZCkgdGhpcy5fdXBkYXRlKGNhcmQpXG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICAvLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIGdldCBkaXNwbGF5QWN0b3JPbkNhcmQgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5QWN0b3JPbkNhcmQnKVxuICB9XG5cbiAgZ2V0IGlzQmxpbmQgKCkge1xuICAgIGlmICghdGhpcy5yb2xsTW9kZSkgcmV0dXJuIG51bGxcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9pc0JsaW5kKSB7XG4gICAgICB0aGlzLl9pc0JsaW5kID0gdGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCdcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2lzQmxpbmRcbiAgfVxuXG4gIHNldCBpc0JsaW5kICh4KSB7XG4gICAgdGhpcy5faXNCbGluZCA9IHhcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLmFjdG9yS2V5KSByZXR1cm4gbnVsbFxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgfVxuXG4gIGdldCB0b2tlbiAoKSB7XG4gICAgaWYgKCF0aGlzLmFjdG9yKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICB9XG5cbiAgZ2V0IGl0ZW0gKCkge1xuICAgIGlmICghdGhpcy5pdGVtSWQpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuaXRlbUlkKVxuICB9XG5cbiAgZ2V0IHdlYXBvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbVxuICB9XG5cbiAgZ2V0IHRhcmdldGVkVG9rZW5zICgpIHtcbiAgICByZXR1cm4gWy4uLmdhbWUudXNlci50YXJnZXRzXVxuICB9XG5cbiAgZ2V0IHRhcmdldCAoKSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0VG9rZW4pIHJldHVybiB0aGlzLnRhcmdldFRva2VuXG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0QWN0b3JcbiAgfVxuXG4gIGdldCBpc1RhcmdldE93bmVyICgpIHtcbiAgICByZXR1cm4gdGhpcy50YXJnZXQuaXNPd25lclxuICB9XG5cbiAgZ2V0IGlzR00gKCkge1xuICAgIHJldHVybiBnYW1lLnVzZXIuaXNHTVxuICB9XG5cbiAgLyoqXG4gICAqIElmIGEgdGFyZ2V0S2V5IHdhcyBwcm92aWRlZCB0cnkgdG8gZmluZCBhIHRva2VuIHdpdGggdGhhdCBrZXkgYW5kIHVzZSBpdC5cbiAgICogSWYgbm90IHRhcmdldEtleSBwcm92aWRlZCByZXR1cm4gdGhlIGZpcnN0IHRhcmdldC5cbiAgICovXG4gIGdldCB0YXJnZXRUb2tlbiAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRUb2tlbikge1xuICAgICAgaWYgKHRoaXMuX3RhcmdldEtleSkge1xuICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuX3RhcmdldEtleSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gdGhpcy50YXJnZXRlZFRva2Vucy5wb3AoKVxuICAgICAgICBpZiAodGhpcy5fdGFyZ2V0VG9rZW4pIHtcbiAgICAgICAgICB0aGlzLl90YXJnZXRLZXkgPSBgJHt0aGlzLl90YXJnZXRUb2tlbi5zY2VuZS5pZH0uJHt0aGlzLl90YXJnZXRUb2tlbi5pZH1gXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICAgICAgdGhpcy5fdGFyZ2V0VG9rZW4gPSBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldFRva2VuXG4gIH1cblxuICBnZXQgdGFyZ2V0QWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5fdGFyZ2V0QWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLnRhcmdldFRva2VuKSB7XG4gICAgICAgIHRoaXMuX3RhcmdldEFjdG9yID1cbiAgICAgICAgICB0aGlzLnRhcmdldFRva2VuLmFjdG9yIHx8XG4gICAgICAgICAgdGhpcy50YXJnZXRUb2tlbi5kYXRhLmFjdG9yIHx8XG4gICAgICAgICAgdGhpcy50YXJnZXRUb2tlbi5kYXRhLmRvY3VtZW50XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl90YXJnZXRBY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuX3RhcmdldEtleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90YXJnZXRBY3RvclxuICB9XG5cbiAgZ2V0IHRhcmdldEtleSAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldFRva2VuICYmICF0aGlzLnRhcmdldEFjdG9yKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiB0aGlzLl90YXJnZXRLZXlcbiAgfVxuXG4gIGdldCBoYXNUYXJnZXQgKCkge1xuICAgIGlmICghdGhpcy50YXJnZXRUb2tlbiAmJiAhdGhpcy50YXJnZXRBY3RvcikgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHNldCB0YXJnZXRLZXkgKHgpIHtcbiAgICB0aGlzLl90YXJnZXRLZXkgPSB4XG4gIH1cblxuICBnZXQgc2tpbGxzICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5nZXRXZWFwb25Ta2lsbHModGhpcy5pdGVtSWQpXG4gIH1cblxuICBnZXQgdGFyZ2V0SW1nICgpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLnRhcmdldEtleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG5cbiAgZ2V0IG5hbWUgKCkge1xuICAgIGlmICh0aGlzLnRva2VuKSByZXR1cm4gdGhpcy50b2tlbi5uYW1lXG4gICAgcmV0dXJuIHRoaXMuYWN0b3IubmFtZVxuICB9XG5cbiAgZ2V0IHRhcmdldE5hbWUgKCkge1xuICAgIGlmICghdGhpcy50YXJnZXQpIHJldHVybiAnZHVtbXknXG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0Lm5hbWVcbiAgfVxuXG4gIGdldCBhY3RvckltZyAoKSB7XG4gICAgY29uc3QgaW1nID0gY2hhdEhlbHBlci5nZXRBY3RvckltZ0Zyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG59XG4iLCIvKiBnbG9iYWwgY2FudmFzLCBDaGF0TWVzc2FnZSwgRGlhbG9nLCBnYW1lLCBtZXJnZU9iamVjdCwgUm9sbCwgdWkgKi9cblxuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi8uLi9kaWNlLmpzJ1xuaW1wb3J0IHsgSW50ZXJhY3RpdmVDaGF0Q2FyZCB9IGZyb20gJy4uL2ludGVyYWN0aXZlLWNoYXQtY2FyZC5qcydcbmltcG9ydCB7IGNyZWF0ZUlubGluZVJvbGwgfSBmcm9tICcuLi9oZWxwZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBEYW1hZ2VDYXJkIGV4dGVuZHMgSW50ZXJhY3RpdmVDaGF0Q2FyZCB7XG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgNWUgQWN0b3IgU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgZXhjbHVkZTogW1xuICAgICAgICAnX3RhcmdldFRva2VuJyxcbiAgICAgICAgJ190YXJnZXRBY3RvcicsXG4gICAgICAgICdfaHRtbFJvbGwnLFxuICAgICAgICAnX2h0bWxJbmxpbmVSb2xsJ1xuICAgICAgXS5jb25jYXQoc3VwZXIuZGVmYXVsdE9wdGlvbnMuZXhjbHVkZSksXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jYXJkcy9kYW1hZ2UuaHRtbCdcbiAgICB9KVxuICB9XG5cbiAgLy8gYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgLy8gICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAvLyB9XG5cbiAgYXN5bmMgYXNzaWduT2JqZWN0ICgpIHtcbiAgICBpZiAodGhpcy5kYW1hZ2VSb2xsICYmIHRoaXMuZGFtYWdlUm9sbC5jb25zdHJ1Y3Rvci5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgdGhpcy5kYW1hZ2VSb2xsID0gUm9sbC5mcm9tRGF0YSh0aGlzLmRhbWFnZVJvbGwpXG4gICAgfVxuICB9XG5cbiAgX29uQnV0dG9uIChldmVudCkge1xuICAgIHN1cGVyLl9vbkJ1dHRvbihldmVudClcbiAgfVxuXG4gIGdldCBjcml0aWNhbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jcml0aWNhbFxuICB9XG5cbiAgc2V0IGNyaXRpY2FsICh4KSB7XG4gICAgdGhpcy5fb3B0aW9ucy5jcml0aWNhbCA9IHhcbiAgfVxuXG4gIGdldCBpbXBhbGUgKCkge1xuICAgIGlmICh0aGlzLl9pbXBhbGUgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gdGhpcy53ZWFwb24uaW1wYWxlXG4gICAgcmV0dXJuIHRoaXMuX2ltcGFsZVxuICB9XG5cbiAgc2V0IGltcGFsZSAoeCkge1xuICAgIHRoaXMuX2ltcGFsZSA9IHhcbiAgfVxuXG4gIGdldCBpc0RhbWFnZUZvcm11bGEgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5kYW1hZ2VGb3JtdWxhICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlXG4gICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5kYW1hZ2VGb3JtdWxhKSkpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiBSb2xsLnZhbGlkYXRlKHRoaXMuZGFtYWdlRm9ybXVsYSlcbiAgfVxuXG4gIGdldCBpc0RhbWFnZU51bWJlciAoKSB7XG4gICAgcmV0dXJuICFpc05hTihOdW1iZXIodGhpcy5kYW1hZ2VGb3JtdWxhKSlcbiAgfVxuXG4gIGdldCBpc0FybW9yRm9ydWxhICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuYXJtb3IgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2VcbiAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmFybW9yKSkpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiBSb2xsLnZhbGlkYXRlKHRoaXMuYXJtb3IpXG4gIH1cblxuICBnZXQgdG90YWxEYW1hZ2VTdHJpbmcgKCkge1xuICAgIGxldCBkYW1hZ2UgPSBOdW1iZXIoXG4gICAgICB0aGlzLmlzRGFtYWdlTnVtYmVyID8gdGhpcy5kYW1hZ2VGb3JtdWxhIDogdGhpcy5yb2xsLnRvdGFsXG4gICAgKVxuICAgIGlmICghdGhpcy5pZ25vcmVBcm1vcikge1xuICAgICAgaWYgKGlzTmFOKE51bWJlcih0aGlzLmFybW9yKSkgfHwgTnVtYmVyKHRoaXMuYXJtb3IpID4gMCkge1xuICAgICAgICBkYW1hZ2UgPSBkYW1hZ2UgLSBOdW1iZXIodGhpcy5hcm1vcilcbiAgICAgIH1cbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuYXJtb3IpKSkge1xuICAgICAgICBpZiAoZGFtYWdlIDw9IDApIHtcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFybW9yQWJzb3Jic0RhbWFnZScpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhbWFnZVxuICB9XG5cbiAgZ2V0IG5vRGFtYWdlICgpIHtcbiAgICBpZiAodGhpcy5yb2xsZWQpIHtcbiAgICAgIGNvbnN0IGRhbWFnZSA9IHRoaXMuaXNEYW1hZ2VOdW1iZXIgPyB0aGlzLmRhbWFnZUZvcm11bGEgOiB0aGlzLnJvbGwudG90YWxcbiAgICAgIGlmICghdGhpcy5pZ25vcmVBcm1vcikge1xuICAgICAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmFybW9yKSkpIHtcbiAgICAgICAgICByZXR1cm4gISEoZGFtYWdlIC0gTnVtYmVyKHRoaXMuYXJtb3IpIDw9IDApXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gISEoZGFtYWdlIDw9IDApXG4gICAgICB9XG4gICAgfSBlbHNlIHJldHVybiBmYWxzZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMuZmFzdEZvcndhcmQgJiYgIXRoaXMucm9sbCAmJiAhdGhpcy5pc0RhbWFnZU51bWJlcikge1xuICAgICAgYXdhaXQgdGhpcy5yb2xsRGFtYWdlKHsgdXBkYXRlOiBmYWxzZSB9KVxuICAgIH1cbiAgICBpZiAoXG4gICAgICB0aGlzLmlzRGFtYWdlTnVtYmVyIHx8XG4gICAgICAodGhpcy5yb2xsICYmIHRoaXMucm9sbC50b3RhbCAhPSBudWxsKSB8fFxuICAgICAgdGhpcy5oYXJkcm9sbGVkXG4gICAgKSB7XG4gICAgICB0aGlzLnJvbGxlZCA9IHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yb2xsZWQgPSBmYWxzZVxuICAgIH1cbiAgICBpZiAodGhpcy5vcHRpb25zLmZhc3RGb3J3YXJkICYmICF0aGlzLmRhbWFnZUluZmxpY3RlZCAmJiAhdGhpcy5ub0RhbWFnZSkge1xuICAgICAgYXdhaXQgdGhpcy5kZWFsRGFtYWdlKHsgdXBkYXRlOiBmYWxzZSB9KVxuICAgIH1cblxuICAgIGlmICh0aGlzLnJvbGxlZCAmJiB0aGlzLnJvbGwpIHtcbiAgICAgIGlmICh0aGlzLnJvbGwuY29uc3RydWN0b3IubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgICAgdGhpcy5yb2xsID0gUm9sbC5mcm9tRGF0YSh0aGlzLnJvbGwpXG4gICAgICB9XG4gICAgICBjb25zdCBhID0gY3JlYXRlSW5saW5lUm9sbCh0aGlzLnJvbGwpXG4gICAgICB0aGlzLl9odG1sSW5saW5lUm9sbCA9IGEub3V0ZXJIVE1MXG4gICAgICB0aGlzLl9odG1sUm9sbCA9IGF3YWl0IHRoaXMucm9sbC5yZW5kZXIoKVxuICAgIH1cbiAgICBhd2FpdCBzdXBlci51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBhc3luYyByb2xsRGFtYWdlIChvcHRpb25zID0geyB1cGRhdGU6IHRydWUgfSkge1xuICAgIHRoaXMucm9sbCA9IGF3YWl0IG5ldyBSb2xsKHRoaXMuZGFtYWdlRm9ybXVsYSB8fCAnMCcpLmV2YWx1YXRlKHtcbiAgICAgIGFzeW5jOiB0cnVlXG4gICAgfSlcbiAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZCh0aGlzLnJvbGwpXG4gICAgdGhpcy5oYXJkcm9sbGVkID0gdHJ1ZVxuICAgIG9wdGlvbnMudXBkYXRlID1cbiAgICAgIHR5cGVvZiBvcHRpb25zLnVwZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgPyB0cnVlIDogb3B0aW9ucy51cGRhdGVcbiAgICBpZiAob3B0aW9ucy51cGRhdGUpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgYXN5bmMgcm9sbEFybW9yIChvcHRpb25zID0geyB1cGRhdGU6IHRydWUgfSkge1xuICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBuZXcgUm9sbCh0aGlzLmFybW9yKS5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgdGhpcy5hcm1vciA9IHJvbGwudG90YWxcbiAgICBvcHRpb25zLnVwZGF0ZSA9XG4gICAgICB0eXBlb2Ygb3B0aW9ucy51cGRhdGUgPT09ICd1bmRlZmluZWQnID8gdHJ1ZSA6IG9wdGlvbnMudXBkYXRlXG4gICAgaWYgKG9wdGlvbnMudXBkYXRlKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIGRlYWxEYW1hZ2VUb1NlbGVjdGVkVGFyZ2V0IChvcHRpb25zID0geyB1cGRhdGU6IHRydWUgfSkge1xuICAgIGlmICh0aGlzLmlzQXJtb3JGb3J1bGEpIGF3YWl0IHRoaXMucm9sbEFybW9yKClcbiAgICBpZiAoaXNOYU4oTnVtYmVyKHRoaXMudG90YWxEYW1hZ2VTdHJpbmcpKSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignRXJyb3IgZXZhbHVhdGluZyBkYW1hZ2UnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IHRhcmdldHMgPSBbXVxuICAgIGNvbnN0IHRhcmdldE5hbWUgPSBbXVxuICAgIGNvbnN0IHNlbGVjdGVkUGxheWVycyA9IGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5tYXAodG9rZW4gPT4ge1xuICAgICAgcmV0dXJuIHRva2VuLmFjdG9yXG4gICAgfSlcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgc2VsZWN0ZWRQbGF5ZXJzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKHRoaXMuYWN0b3IuaWQgPT09IHNlbGVjdGVkUGxheWVyc1tpbmRleF0uaWQpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICAgIHRhcmdldE5hbWUucHVzaChzZWxlY3RlZFBsYXllcnNbaW5kZXhdLm5hbWUpXG4gICAgICB0YXJnZXRzLnB1c2goc2VsZWN0ZWRQbGF5ZXJzW2luZGV4XSlcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIHRpdGxlOiAnICcsXG4gICAgICBjb250ZW50OiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRlYWxEYW1hZ2UnLCB7XG4gICAgICAgIGRhbWFnZTogdGhpcy50b3RhbERhbWFnZVN0cmluZyxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXROYW1lXG4gICAgICB9KSxcbiAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgb25lOiB7XG4gICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicsXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Qcm9jZWVkJyksXG4gICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlybURhbWFnZSh0YXJnZXRzKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdHdvOiB7XG4gICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzXCI+PC9pPicsXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DYW5jZWwnKSxcbiAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge31cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRlZmF1bHQ6ICd0d28nXG4gICAgfVxuICAgIGlmICh0YXJnZXROYW1lLmxlbmd0aCA+IDApIHtcbiAgICAgIG5ldyBEaWFsb2coZGF0YSkucmVuZGVyKHRydWUpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY29uZmlybURhbWFnZSAodGFyZ2V0cykge1xuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0YXJnZXRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgYXdhaXQgdGFyZ2V0c1tpbmRleF0uZGVhbERhbWFnZShOdW1iZXIodGhpcy50b3RhbERhbWFnZVN0cmluZyksIHtcbiAgICAgICAgaWdub3JlQXJtb3I6IGZhbHNlXG4gICAgICB9KVxuICAgICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgICAgY29udGVudDogYERhbWFnZSAke3RhcmdldHNbaW5kZXhdLm5hbWV9ICR7dGhpcy50b3RhbERhbWFnZVN0cmluZ31IUGBcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGVhbERhbWFnZSAob3B0aW9ucyA9IHsgdXBkYXRlOiB0cnVlIH0pIHtcbiAgICBpZiAodGhpcy5pc0FybW9yRm9ydWxhKSBhd2FpdCB0aGlzLnJvbGxBcm1vcigpXG4gICAgbGV0IGRhbWFnZSA9IHRoaXMudG90YWxEYW1hZ2VTdHJpbmdcbiAgICBpZiAoaXNOYU4oTnVtYmVyKGRhbWFnZSkpKSB7XG4gICAgICBpZiAoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFybW9yQWJzb3Jic0RhbWFnZScpID09PSBkYW1hZ2UpIHtcbiAgICAgICAgZGFtYWdlID0gMFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignRXJyb3IgZXZhbHVhdGluZyBkYW1hZ2UnKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMudGFyZ2V0QWN0b3IpIHtcbiAgICAgIGF3YWl0IHRoaXMudGFyZ2V0QWN0b3IuZGVhbERhbWFnZShOdW1iZXIoZGFtYWdlKSwge1xuICAgICAgICBpZ25vcmVBcm1vcjogdHJ1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgdGhpcy5kYW1hZ2VJbmZsaWN0ZWQgPSB0cnVlXG4gICAgb3B0aW9ucy51cGRhdGUgPVxuICAgICAgdHlwZW9mIG9wdGlvbnMudXBkYXRlID09PSAndW5kZWZpbmVkJyA/IHRydWUgOiBvcHRpb25zLnVwZGF0ZVxuICAgIGlmIChvcHRpb25zLnVwZGF0ZSkgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBnZXQgcmFuZ2UgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMucmFuZ2UgfHwgJ25vcm1hbCdcbiAgfVxuXG4gIHNldCByYW5nZSAoeCkge1xuICAgIGNvbnN0IHJhbmdlcyA9IFsnbm9ybWFsJywgJ2xvbmcnLCAnZXh0cmVtZSddXG4gICAgaWYgKCFyYW5nZXMuaW5jbHVlcyh4LnRvTG93ZXJDYXNlKCkpKSByZXR1cm5cbiAgICB0aGlzLl9vcHRpb25zLnJhbmdlID0geFxuICB9XG5cbiAgZ2V0IGRhbWFnZUZvcm11bGEgKCkge1xuICAgIGNvbnN0IHJhbmdlID0gdGhpcy5yYW5nZVxuICAgIGxldCBmb3JtdWxhID0gdGhpcy53ZWFwb24/LmRhdGE/LmRhdGE/LnJhbmdlW3JhbmdlXT8uZGFtYWdlXG4gICAgbGV0IGRiID0gdGhpcy5hY3Rvci5kYlxuICAgIGlmIChkYiA9PT0gbnVsbCkge1xuICAgICAgZGIgPSAnJ1xuICAgIH0gZWxzZSB7XG4gICAgICBkYiA9IGAke2RifWBcbiAgICB9XG5cbiAgICBpZiAoZGIgJiYgIWRiLnN0YXJ0c1dpdGgoJy0nKSkgZGIgPSAnKycgKyBkYlxuICAgIGlmICh0aGlzLndlYXBvbi5kYXRhLmRhdGEucHJvcGVydGllcy5hZGRiKSBmb3JtdWxhID0gZm9ybXVsYSArIGRiXG4gICAgaWYgKHRoaXMud2VhcG9uLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmFoZGIpIGZvcm11bGEgPSBmb3JtdWxhICsgZGIgKyAnLzInXG5cbiAgICBpZiAoZm9ybXVsYSkge1xuICAgICAgY29uc3QgbWF4RGFtYWdlID0gbmV3IFJvbGwoZm9ybXVsYSkuZXZhbHVhdGUoeyBtYXhpbWl6ZTogdHJ1ZSB9KS50b3RhbFxuICAgICAgbGV0IHJvbGxTdHJpbmdcbiAgICAgIGlmICh0aGlzLmNyaXRpY2FsKSB7XG4gICAgICAgIGlmICh0aGlzLmltcGFsZSkge1xuICAgICAgICAgIHJvbGxTdHJpbmcgPSBmb3JtdWxhICsgJysnICsgbWF4RGFtYWdlXG4gICAgICAgICAgcmV0dXJuIHJvbGxTdHJpbmdcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbWF4RGFtYWdlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmb3JtdWxhXG4gICAgICB9XG4gICAgfSBlbHNlIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBhcm1vciAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCAhPT0gdGhpcy5fYXJtb3IgJiYgdGhpcy5fYXJtb3IgIT09ICcnKSByZXR1cm4gdGhpcy5fYXJtb3JcbiAgICBpZiAodGhpcy50YXJnZXQpIHtcbiAgICAgIHJldHVybiB0aGlzLnRhcmdldEFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzLmFybW9yLnZhbHVlXG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBzZXQgYXJtb3IgKHgpIHtcbiAgICB0aGlzLl9hcm1vciA9IHhcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cblxuLy8gaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi8uLi9hY3RvcnMvYWN0b3IuanMnO1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5cbmV4cG9ydCBjbGFzcyBSb2xsQ2FyZCB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICB0aGlzLnJvbGxzID0gW11cbiAgICB0aGlzLmluaXRpYXRvciA9IG51bGxcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21NZXNzYWdlKG1lc3NhZ2UpXG4gICAgY2FyZC5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21NZXNzYWdlIChtZXNzYWdlKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSAkKG1lc3NhZ2UuZGF0YS5jb250ZW50KVswXVxuICAgIGlmICghY2FyZEVsZW1lbnQpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tSFRNTENhcmRFbGVtZW50KGNhcmRFbGVtZW50KVxuICAgIGNhcmQubWVzc2FnZSA9IG1lc3NhZ2VcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21IVE1MQ2FyZEVsZW1lbnQgKGNhcmQpIHtcbiAgICBjb25zdCBjYXJkRGF0YSA9IEpTT04ucGFyc2UodW5lc2NhcGUoY2FyZC5kYXRhc2V0Lm9iamVjdCkpXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZnJvbURhdGEoY2FyZERhdGEpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbURhdGEgKGRhdGEpIHtcbiAgICBjb25zdCBjYXJkID0gT2JqZWN0LmFzc2lnbihuZXcgdGhpcygpLCBkYXRhKVxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjYXJkLnJvbGxzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKGNhcmQucm9sbHNbaW5kZXhdPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgICAgY2FyZC5yb2xsc1tpbmRleF0gPSBPYmplY3QuYXNzaWduKG5ldyBDb0M3Q2hlY2soKSwgY2FyZC5yb2xsc1tpbmRleF0pXG4gICAgICAgIGlmIChjYXJkLnJvbGxzW2luZGV4XS5yb2xsZWQpIHtcbiAgICAgICAgICBjYXJkLnJvbGxzW2luZGV4XS5faHRtbFJvbGwgPSBhd2FpdCBjYXJkLnJvbGxzW2luZGV4XS5nZXRIdG1sUm9sbCgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25Ub2dnbGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3Qgc3BhbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBpZiAoc3BhbiAmJiBzcGFuLmNsYXNzTGlzdC5jb250YWlucygnZ20tc2VsZWN0LW9ubHknKSAmJiAhZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBtZXNzYWdlID0gc3Bhbi5jbG9zZXN0KCcuY2hhdC1tZXNzYWdlJylcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tTWVzc2FnZUlkKG1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQpXG4gICAgaWYgKCFjYXJkKSByZXR1cm5cbiAgICBjb25zdCBmbGFnID0gc3Bhbi5kYXRhc2V0LmZsYWdcbiAgICBpZiAoIWZsYWcpIHJldHVyblxuICAgIGNvbnN0IHRvZ2dsZSA9IHNwYW4uY2xvc2VzdCgnLnRvZ2dsZScpXG4gICAgaWYgKCF0b2dnbGUpIHtcbiAgICAgIGNhcmQudG9nZ2xlRmxhZyhmbGFnKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBidXR0b25zID0gdG9nZ2xlLnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2dnbGUtc3dpdGNoJylcbiAgICAgIGZvciAoY29uc3QgYiBvZiBidXR0b25zKSB7XG4gICAgICAgIGNhcmQudW5zZXRGbGFnKGIuZGF0YXNldC5mbGFnKVxuICAgICAgfVxuICAgICAgY2FyZC5zZXRGbGFnKGZsYWcpXG4gICAgfVxuICAgIGNhcmQudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGRpc3BhdGNoIChkYXRhKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBsZXQgbWVzc2FnZXMgPSB1aS5jaGF0LmNvbGxlY3Rpb24uZmlsdGVyKG1lc3NhZ2UgPT4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdGhpcy5kZWZhdWx0Q29uZmlnLnR5cGUgPT09IG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICd0eXBlJykgJiZcbiAgICAgICAgICBtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAnc3RhdGUnKSAhPT0gJ3Jlc29sdmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoWydjb21iaW5lZENhcmQnXS5pbmNsdWRlcyh0aGlzLmRlZmF1bHRDb25maWcudHlwZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAnaW5pdGlhdG9yJykgPT09IGRhdGEucm9sbC5pbml0aWF0b3JcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH0pXG5cbiAgICAgIGlmIChtZXNzYWdlcy5sZW5ndGgpIHtcbiAgICAgICAgLy8gT2xkIG1lc3NhZ2VzIGNhbid0IGJlIHVzZWQgaWYgbWVzc2FnZSBpcyBtb3JlIHRoYW4gYSBkYXkgb2xkIG1hcmsgaXQgYXMgcmVzb2x2ZWRcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUobWVzc2FnZXNbMF0uZGF0YS50aW1lc3RhbXApXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcbiAgICAgICAgY29uc3QgdGltZURpZmZTZWMgPSAobm93IC0gdGltZXN0YW1wKSAvIDEwMDBcbiAgICAgICAgaWYgKDI0ICogNjAgKiA2MCA8IHRpbWVEaWZmU2VjKSB7XG4gICAgICAgICAgYXdhaXQgbWVzc2FnZXNbMF0uc2V0RmxhZygnQ29DNycsICdzdGF0ZScsICdyZXNvbHZlZCcpXG4gICAgICAgICAgbWVzc2FnZXMgPSBbXVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxldCBjYXJkXG4gICAgICBpZiAoIW1lc3NhZ2VzLmxlbmd0aCkgY2FyZCA9IG5ldyB0aGlzKClcbiAgICAgIGVsc2UgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbU1lc3NhZ2UobWVzc2FnZXNbMF0pXG4gICAgICBpZiAodHlwZW9mIGRhdGEuX3JvbGxNb2RlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjYXJkLl9yb2xsTW9kZSA9IGRhdGEuX3JvbGxNb2RlXG4gICAgICB9XG4gICAgICBhd2FpdCBjYXJkLnByb2Nlc3MoZGF0YSlcbiAgICB9IGVsc2UgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICB9XG5cbiAgYXN5bmMgdG9NZXNzYWdlICgpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy5jb25maWcudGVtcGxhdGUsIHRoaXMpXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJChodG1sKVxuICAgIGh0bWxDYXJkRWxlbWVudFswXS5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLmRhdGFTdHJpbmcpXG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmxvY2FsaXplKHRoaXMuY29uZmlnLnRpdGxlKSxcbiAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudFswXS5vdXRlckhUTUwsXG4gICAgICBmbGFnczoge1xuICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgdHlwZTogdGhpcy5jb25maWcudHlwZSxcbiAgICAgICAgICBzdGF0ZTogJ2luaXRpYXRlZCcsXG4gICAgICAgICAgaW5pdGlhdG9yOiB0aGlzLmluaXRpYXRvclxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcbiAgICByZXR1cm4gbXNnXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgYXdhaXQgdGhpcy5jb21wdXRlKClcbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSB7XG4gICAgICBhd2FpdCB0aGlzLnRvTWVzc2FnZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLmNvbmZpZy50ZW1wbGF0ZSwgdGhpcylcbiAgICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICAgIC8vIEF0dGFjaCB0aGUgc2FuQ2hlY2tDYXJkIG9iamVjdCB0byB0aGUgbWVzc2FnZS5cbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLmRhdGFTdHJpbmcpXG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgbWVzc2FnZS5cbiAgICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG4gICAgICBpZiAodGhpcy5jbG9zZWQpIGF3YWl0IGNoYXRNZXNzYWdlLnNldEZsYWcoJ0NvQzcnLCAnc3RhdGUnLCAncmVzb2x2ZWQnKVxuXG4gICAgICBjb25zdCBtc2cgPSBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoe1xuICAgICAgICBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgICB9KVxuICAgICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgICByZXR1cm4gbXNnXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlUm9sbCAoZGF0YSkge1xuICAgIGlmICghZGF0YS5mcm9tR00pIHtcbiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5yb2xsc1tkYXRhLnJhbmtdLCBkYXRhLnJvbGwpXG4gICAgfVxuICB9XG5cbiAgYWRkUm9sbERhdGEgKGRhdGEpIHtcbiAgICBjb25zdCBjaGVjayA9IE9iamVjdC5hc3NpZ24obmV3IENvQzdDaGVjaygpLCBkYXRhLnJvbGwpXG4gICAgdGhpcy5yb2xscy5wdXNoKGNoZWNrKVxuICAgIGlmICh0aGlzLmNvbmZpZy50eXBlID09PSAnY29tYmluZWRDYXJkJykge1xuICAgICAgdGhpcy5pbml0aWF0b3IgPSBkYXRhLnJvbGwuaW5pdGlhdG9yXG4gICAgfVxuICB9XG5cbiAgYWRkUm9sbCAoZGF0YSkge1xuICAgIHRoaXMucm9sbHMucHVzaChkYXRhKVxuICB9XG5cbiAgcmVtb3ZlUm9sbCAocmFuaykge1xuICAgIHRoaXMucm9sbHMuc3BsaWNlKHJhbmssIDEpXG4gIH1cblxuICBzZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gdHJ1ZVxuICB9XG5cbiAgdW5zZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gZmFsc2VcbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgdGhpc1tmbGFnTmFtZV0gPSAhdGhpc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGdldCBtZXNzYWdlICgpIHtcbiAgICBpZiAodGhpcy5fbWVzc2FnZSkgcmV0dXJuIHRoaXMuX21lc3NhZ2VcbiAgICBpZiAodGhpcy5fbWVzc2FnZUlkKSByZXR1cm4gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5fbWVzc2FnZUlkKVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlICh4KSB7XG4gICAgdGhpcy5fbWVzc2FnZSA9IHhcbiAgfVxuXG4gIGdldCBtZXNzYWdlSWQgKCkge1xuICAgIGlmICh0aGlzLl9tZXNzYWdlSWQpIHJldHVybiB0aGlzLl9tZXNzYWdlSWRcbiAgICBpZiAodGhpcy5fbWVzc2FnZSkgcmV0dXJuIHRoaXMuX21lc3NhZ2UuaWRcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBzZXQgbWVzc2FnZUlkICh4KSB7XG4gICAgdGhpcy5fbWVzc2FnZUlkID0geFxuICB9XG5cbiAgLy8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRDb25maWcgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBleGNsdWRlOiBbJ19hY3RvcicsICdfc2tpbGwnLCAnX2l0ZW0nLCAnX21lc3NhZ2UnLCAnX2h0bWxSb2xsJ10sXG4gICAgICBleGNsdWRlU3RhcnRXaXRoOiAnX18nXG4gICAgfVxuICB9XG5cbiAgLy8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIGdldCB3aW5uZXJzICgpIHtcbiAgICByZXR1cm4gdGhpcy5yb2xscy5maWx0ZXIociA9PiByLndpbm5lcilcbiAgfVxuXG4gIGdldCB3aW5uZXIgKCkge1xuICAgIGlmICh0aGlzLndpbm5lcnMubGVuZ3RoKSByZXR1cm4gdGhpcy53aW5uZXJzWzBdXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGxvb3NlcnMgKCkge1xuICAgIHJldHVybiB0aGlzLnJvbGxzLmZpbHRlcihyID0+ICFyLndpbm5lcilcbiAgfVxuXG4gIGdldCBsb29zZXIgKCkge1xuICAgIGlmICh0aGlzLmxvb3NlcnMubGVuZ3RoKSByZXR1cm4gdGhpcy5sb29zZXJzWzBdXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGhhc1dpbm5lciAoKSB7XG4gICAgaWYgKHRoaXMud2lubmVycy5sZW5ndGggPiAwKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGlzR00gKCkge1xuICAgIHJldHVybiBnYW1lLnVzZXIuaXNHTVxuICB9XG5cbiAgZ2V0IHJvbGxNb2RlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGxNb2RlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICByZXR1cm4gdGhpcy5fcm9sbE1vZGVcbiAgfVxuXG4gIHNldCByb2xsTW9kZSAoeCkge1xuICAgIGlmICh4ID09PSBmYWxzZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XG4gIH1cblxuICBnZXQgZGF0YSAoKSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UodGhpcy5kYXRhU3RyaW5nKVxuICB9XG5cbiAgZ2V0IGRhdGFTdHJpbmcgKCkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLCAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICBpZiAodGhpcy5jb25maWcuZXhjbHVkZT8uaW5jbHVkZXMoa2V5KSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKHRoaXMuY29uZmlnLmV4Y2x1ZGVTdGFydFdpdGgpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIGdhbWUsIG1lcmdlT2JqZWN0ICovXG5cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgRGFtYWdlQ2FyZCB9IGZyb20gJy4vZGFtYWdlLmpzJ1xuaW1wb3J0IHsgUm9sbENhcmQgfSBmcm9tICcuL3JvbGwtY2FyZC5qcydcblxuZXhwb3J0IGNsYXNzIE9wcG9zZWRDaGVja0NhcmQgZXh0ZW5kcyBSb2xsQ2FyZCB7XG4gIHN0YXRpYyBhc3luYyBiaW5kTGlzdGVybmVycyAoaHRtbCkge1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNhcmQub3Bwb3NlZCAudG9nZ2xlLXN3aXRjaCcsXG4gICAgICB0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpXG4gICAgKVxuICAgIC8vIHN1cGVyLmJpbmRMaXN0ZXJuZXJzKCBodG1sKTtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jYXJkLm9wcG9zZWQgYScsXG4gICAgICBPcHBvc2VkQ2hlY2tDYXJkLl9vbkNsaWNrLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJvbGwtY2FyZC5vcHBvc2VkIGJ1dHRvbicsXG4gICAgICBPcHBvc2VkQ2hlY2tDYXJkLl9vbkNsaWNrLmJpbmQodGhpcylcbiAgICApXG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRDb25maWcgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0Q29uZmlnLCB7XG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jYXJkcy9vcHBvc2VkLXJvbGwuaHRtbCcsXG4gICAgICB0eXBlOiAnb3Bwb3NlZENhcmQnXG4gICAgfSlcbiAgfVxuXG4gIGdldCBjb25maWcgKCkge1xuICAgIHJldHVybiBPcHBvc2VkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWdcbiAgfVxuXG4gIGdldCBhdHRhY2tlclJvbGwgKCkge1xuICAgIGlmICh0aGlzLmNvbWJhdCkge1xuICAgICAgaWYgKHRoaXMucm9sbHM/Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCBhdHRhY2tlciA9IHRoaXMucm9sbHMuZmlsdGVyKHIgPT4gci5pbmRleCA9PT0gMCB8fCByLmF0dGFja2VyKVxuICAgICAgICBpZiAoYXR0YWNrZXIubGVuZ3RoKSByZXR1cm4gYXR0YWNrZXJbMF1cbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGRlZmVuZGVyUm9sbCAoKSB7XG4gICAgaWYgKHRoaXMuY29tYmF0KSB7XG4gICAgICBpZiAodGhpcy5yb2xscz8ubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGRlZmVuZGVyID0gdGhpcy5yb2xscy5maWx0ZXIociA9PiByLmluZGV4ICE9PSAwIHx8ICFyLmF0dGFja2VyKVxuICAgICAgICBpZiAoZGVmZW5kZXIubGVuZ3RoKSByZXR1cm4gZGVmZW5kZXJbMF1cbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGRlZmVuZGVySXNEb2RnaW5nICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmRlZmVuZGVyUm9sbD8uYWN0b3I/LmRvZGdlU2tpbGw/Lm5hbWUgJiZcbiAgICAgIHRoaXMuZGVmZW5kZXJSb2xsPy5za2lsbD8ubmFtZVxuICAgICkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy5kZWZlbmRlclJvbGwuYWN0b3IuZG9kZ2VTa2lsbC5uYW1lLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgIHRoaXMuZGVmZW5kZXJSb2xsLnNraWxsLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBhZHZhbnRhZ2VBdHRhY2tlciAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9hYSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0aGlzLmRlZmVuZGVyUm9sbCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuZGVmZW5kZXJJc0RvZGdpbmdcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYWFcbiAgfVxuXG4gIGdldCB3aW5uZXJSb2xsc0RhbWFnZSAoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5jb21iYXQgJiZcbiAgICAgIHRoaXMucm9sbHMubGVuZ3RoID49IDIgJiZcbiAgICAgIHRoaXMuaGFzV2lubmVyICYmXG4gICAgICB0aGlzLndpbm5lcj8uaXRlbT8udHlwZSA9PT0gJ3dlYXBvbidcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgc2V0IGFkdmFudGFnZUF0dGFja2VyICh4KSB7XG4gICAgdGhpcy5fYWEgPSB0cnVlXG4gICAgdGhpcy5fYWQgPSBmYWxzZVxuICB9XG5cbiAgZ2V0IGFkdmFudGFnZURlZmVuZGVyICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuX2FkID09PSAndW5kZWZpbmVkJykgcmV0dXJuIHRoaXMuZGVmZW5kZXJJc0RvZGdpbmdcbiAgICByZXR1cm4gdGhpcy5fYWRcbiAgfVxuXG4gIHNldCBhZHZhbnRhZ2VEZWZlbmRlciAoeCkge1xuICAgIHRoaXMuX2FkID0gdHJ1ZVxuICAgIHRoaXMuX2FhID0gZmFsc2VcbiAgfVxuXG4gIGdldCBpc1RpZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMud2lubmVyQ291bnQgPiAxXG4gIH1cblxuICBnZXQgbmVlZHNUaWVCcmVha2VyICgpIHtcbiAgICBpZiAoIXRoaXMuY29tYmF0KSByZXR1cm4gZmFsc2VcbiAgICBpZiAoXG4gICAgICB0aGlzLmF0dGFja2VyUm9sbCAmJlxuICAgICAgdGhpcy5kZWZlbmRlclJvbGwgJiZcbiAgICAgIHRoaXMuYXR0YWNrZXJSb2xsLnN1Y2Nlc3NMZXZlbCA9PT0gdGhpcy5kZWZlbmRlclJvbGwuc3VjY2Vzc0xldmVsXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCB3aW5uZXJDb3VudCAoKSB7XG4gICAgbGV0IGNvdW50ID0gMFxuICAgIGZvciAoY29uc3QgciBvZiB0aGlzLnJvbGxzKSB7XG4gICAgICBpZiAoci53aW5uZXIpIGNvdW50ICs9IDFcbiAgICB9XG4gICAgcmV0dXJuIGNvdW50XG4gIH1cblxuICBnZXQgaXNBdHRhY2tNYW5ldXZlciAoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5jb21iYXQgJiZcbiAgICAgIHRoaXMuYXR0YWNrZXJSb2xsICYmXG4gICAgICAoIXRoaXMuYXR0YWNrZXJSb2xsPy5pdGVtIHx8XG4gICAgICAgIHRoaXMuYXR0YWNrZXJSb2xsPy5pdGVtLmRhdGEuZGF0YS5wcm9wZXJ0aWVzPy5tbnZyKVxuICAgICkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgcmVzdWx0VGV4dCAoKSB7XG4gICAgaWYgKHRoaXMuY29tYmF0ICYmIHRoaXMuYXR0YWNrZXJSb2xsICYmIHRoaXMuZGVmZW5kZXJSb2xsKSB7XG4gICAgICBpZiAoIXRoaXMuYXR0YWNrZXJSb2xsLndpbm5lciAmJiAhdGhpcy5kZWZlbmRlclJvbGwud2lubmVyKSB7XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9XaW5uZXInKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYXR0YWNrZXJSb2xsLndpbm5lcikge1xuICAgICAgICBpZiAodGhpcy5hdHRhY2tlclJvbGwubWFuZXV2ZXIpIHtcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NYW5ldXZlclN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmF0dGFja2VyUm9sbC5hY3Rvci5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BdHRhY2tTdWNjZXNzJywge1xuICAgICAgICAgIG5hbWU6IHRoaXMuYXR0YWNrZXJSb2xsLmFjdG9yLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmRlZmVuZGVyUm9sbC53aW5uZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVmZW5kZXJSb2xsLm1hbmV1dmVyKSB7XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWFuZXV2ZXJTdWNjZXNzJywge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5kZWZlbmRlclJvbGwuYWN0b3IubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGVmZW5kZXJJc0RvZGdpbmcpIHtcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Eb2RnZVN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRlZmVuZGVyUm9sbC5hY3Rvci5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BdHRhY2tTdWNjZXNzJywge1xuICAgICAgICAgIG5hbWU6IHRoaXMuZGVmZW5kZXJSb2xsLmFjdG9yLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgYXN5bmMgcHJvY2VzcyAoZGF0YSkge1xuICAgIHN3aXRjaCAoZGF0YS5hY3Rpb24pIHtcbiAgICAgIGNhc2UgJ25ldyc6XG4gICAgICAgIGlmICghdGhpcy5yb2xscz8ubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5jb21iYXQgPSBkYXRhLmNvbWJhdCB8fCB1bmRlZmluZWRcbiAgICAgICAgICBpZiAodGhpcy5jb21iYXQpIHtcbiAgICAgICAgICAgIGRhdGEucm9sbC5hdHRhY2tlciA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZGF0YS5yb2xsLmluZGV4ID0gdGhpcy5yb2xscy5sZW5ndGhcbiAgICAgICAgdGhpcy5hZGRSb2xsRGF0YShkYXRhKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdyb2xsJzpcbiAgICAgICAgdGhpcy5hZGRSb2xsRGF0YShkYXRhKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICd1cGRhdGVSb2xsJzpcbiAgICAgICAgdGhpcy51cGRhdGVSb2xsKGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgICBlbHNlIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3JywgZGF0YSlcbiAgfVxuXG4gIGFzeW5jIHJvbGwgKHJhbmspIHtcbiAgICBhd2FpdCB0aGlzLnJvbGxzW3JhbmtdLl9wZXJmb3JtKClcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgdHlwZTogdGhpcy5jb25maWcudHlwZSxcbiAgICAgIGFjdGlvbjogJ3VwZGF0ZVJvbGwnLFxuICAgICAgcmFuazogcmFuayxcbiAgICAgIGZyb21HTTogZ2FtZS51c2VyLmlzR01cbiAgICB9XG4gICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkgZGF0YS5yb2xsID0gdGhpcy5yb2xsc1tyYW5rXS5KU09OUm9sbERhdGFcbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbkNsaWNrIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgYWN0aW9uID0gYS5kYXRhc2V0LmFjdGlvblxuICAgIGNvbnN0IGxpID0gYS5jbG9zZXN0KCdsaS5hY3Rvci1yb2xsJylcbiAgICBjb25zdCBtZXNzYWdlID0gYS5jbG9zZXN0KCcuY2hhdC1tZXNzYWdlJylcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGEuY2xvc2VzdCgnZGl2LnJvbGwtY2FyZCcpXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IE9wcG9zZWRDaGVja0NhcmQuZnJvbUhUTUxDYXJkRWxlbWVudChjYXJkRWxlbWVudClcbiAgICBjYXJkLm1lc3NhZ2VJZCA9IG1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWRcbiAgICBjb25zdCByYW5rID0gTnVtYmVyKGxpPy5kYXRhc2V0Py5yYW5rKVxuXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ3RvZ2dsZS1jb21iYXQnOiB7XG4gICAgICAgIGNhcmQuY29tYmF0ID0gIWNhcmQuY29tYmF0XG4gICAgICAgIC8vIGlmKCAhY2FyZC5hZHZhbnRhZ2VBdHRhY2tlciAmJiAhY2FyZC5hZHZhbnRhZ2VEZWZlbmRlcikgY2FyZC5hZHZhbnRhZ2VBdHRhY2tlciA9IHRydWU7XG4gICAgICAgIGF3YWl0IGNhcmQudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyZW1vdmUtcm9sbCc6IHtcbiAgICAgICAgY2FyZC5yZW1vdmVSb2xsKHJhbmspXG4gICAgICAgIGF3YWl0IGNhcmQudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdjbG9zZS1jYXJkJzoge1xuICAgICAgICBjYXJkLmNsb3NlQ2FyZCgpXG4gICAgICAgIGF3YWl0IGNhcmQudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyb2xsLWNoZWNrJzoge1xuICAgICAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXG4gICAgICAgIGlmICghY2FyZC5yb2xsc1tyYW5rXS5hY3RvcktleSkge1xuICAgICAgICAgIGNhcmQucm9sbHNbcmFua10uYWN0b3JLZXkgPSBgJHtzcGVha2VyLnNjZW5lfS4ke3NwZWFrZXIudG9rZW59YFxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGNhcmQucm9sbChyYW5rKVxuICAgICAgICBhd2FpdCBjYXJkLnByb2Nlc3MoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1kYW1hZ2UnOiB7XG4gICAgICAgIGNhcmQuY2xvc2VDYXJkKClcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGNvbnN0IGRhbWFnZUNoYXRDYXJkID0gbmV3IERhbWFnZUNhcmQoe1xuICAgICAgICAgIGNyaXRpY2FsOiBjYXJkLndpbm5lci5pc0V4dHJlbWVTdWNjZXNzLFxuICAgICAgICAgIGZhc3RGb3J3YXJkOiBldmVudC5zaGlmdEtleVxuICAgICAgICB9KVxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC5hY3RvcktleSA9IGNhcmQud2lubmVyLmFjdG9yLmFjdG9yS2V5XG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLnRhcmdldEtleSA9IGNhcmQubG9vc2VyLmFjdG9yLmFjdG9yS2V5XG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLml0ZW1JZCA9IGNhcmQud2lubmVyLml0ZW1JZFxuICAgICAgICAvLyBpZiggb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCkgZGFtYWdlQ2hhdENhcmQubWVzc2FnZUlkID0gb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZDtcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgdXBkYXRlOiBmYWxzZSxcbiAgICAgICAgICBkYXRhOiBhLmRhdGFzZXQsXG4gICAgICAgICAgY2xhc3NlczogYS5jbGFzc0xpc3QsXG4gICAgICAgICAgdGFyZ2V0OiBhXG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgQ29DN0NoZWNrLmFsdGVyKGNhcmQucm9sbHNbcmFua10sIGFjdGlvbiwgb3B0aW9ucylcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiB0aGlzLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgICAgICBhY3Rpb246ICd1cGRhdGVSb2xsJyxcbiAgICAgICAgICByYW5rOiByYW5rLFxuICAgICAgICAgIGZyb21HTTogZ2FtZS51c2VyLmlzR01cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWdhbWUudXNlci5pc0dNKSBkYXRhLnJvbGwgPSBjYXJkLnJvbGxzW3JhbmtdLkpTT05Sb2xsRGF0YVxuICAgICAgICBjYXJkLnByb2Nlc3MoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBjb21wdXRlIChyYW5rID0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5yb2xscyA9IHRoaXMucm9sbHMuZmlsdGVyKHJvbGwgPT4ge1xuICAgICAgcmV0dXJuIHR5cGVvZiByb2xsLmFjdG9yLmRhdGEgIT09ICd1bmRlZmluZWQnIC8vIHJlbW92ZSBhbnkgYWN0b3JzIHRoYXQgbm8gbG9uZ2VyIGV4aXN0XG4gICAgfSlcblxuICAgIGlmICghcmFuaykge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnJvbGxzW2ldLm1hbmV1dmVyXG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLmNvbWJhdCAmJlxuICAgICAgICAgICghdGhpcy5yb2xsc1tpXS5pdGVtIHx8XG4gICAgICAgICAgICB0aGlzLnJvbGxzW2ldLml0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXM/Lm1udnIpICYmXG4gICAgICAgICAgKCh0aGlzLnJvbGxzW2ldPy5hY3Rvcj8uZG9kZ2VTa2lsbD8ubmFtZSAmJlxuICAgICAgICAgICAgdGhpcy5yb2xsc1tpXT8uc2tpbGw/Lm5hbWUgJiZcbiAgICAgICAgICAgIHRoaXMucm9sbHNbaV0uYWN0b3IuZG9kZ2VTa2lsbC5uYW1lLnRvTG93ZXJDYXNlKCkgIT09XG4gICAgICAgICAgICAgIHRoaXMucm9sbHNbaV0uc2tpbGwubmFtZS50b0xvd2VyQ2FzZSgpKSB8fFxuICAgICAgICAgICAgIXRoaXMucm9sbHNbaV0/LmFjdG9yPy5kb2RnZVNraWxsPy5uYW1lKVxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLnJvbGxzW2ldLm1hbmV1dmVyID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJvbGxzW2ldLnJvbGxlZCkge1xuICAgICAgICAgIHRoaXMucm9sbHNbaV0uX2h0bWxSb2xsID0gYXdhaXQgdGhpcy5yb2xsc1tpXS5nZXRIdG1sUm9sbCh7XG4gICAgICAgICAgICBoaWRlRGljZVJlc3VsdDogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMucm9sbHNbcmFua10ucm9sbGVkKSB7XG4gICAgICAgIHRoaXMucm9sbHNbcmFua10uX2h0bWxSb2xsID0gYXdhaXQgdGhpcy5yb2xsc1tyYW5rXS5nZXRIdG1sUm9sbCh7XG4gICAgICAgICAgaGlkZURpY2VSZXN1bHQ6IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb21iYXQpIHtcbiAgICAgIC8vIFNvcnQgY29tYmF0IHJvbGxzIGJ5IGluZGV4LlxuICAgICAgdGhpcy5yb2xscy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGlmIChhLmluZGV4ID4gYi5pbmRleCkgcmV0dXJuIDFcbiAgICAgICAgaWYgKGEuaW5kZXggPCBiLmluZGV4KSByZXR1cm4gLTFcbiAgICAgICAgcmV0dXJuIDBcbiAgICAgIH0pXG5cbiAgICAgIC8vIENvbWJhdCByb2xsIGluY2x1ZGVzIG9ubHkgMiBwZXJzb25zLCByZW1vdmUgdGhlIHJlc3QuXG4gICAgICBpZiAodGhpcy5yb2xscy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHRoaXMucm9sbHMgPSBbdGhpcy5yb2xsc1swXSwgdGhpcy5yb2xsc1sxXV1cbiAgICAgICAgZm9yIChjb25zdCByIG9mIHRoaXMucm9sbHMpIHtcbiAgICAgICAgICBkZWxldGUgci53aW5uZXJcbiAgICAgICAgICBkZWxldGUgci50aWVcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBGaXJzdCBwZXJzb24gYWRkZWQgaXMgdGhlIGF0dGFja2VyLlxuICAgICAgaWYgKHRoaXMucm9sbHNbMF0pIHRoaXMucm9sbHNbMF0uYXR0YWNrZXIgPSB0cnVlXG5cbiAgICAgIGlmICh0aGlzLnJvbGxzWzBdPy5yb2xsZWQgJiYgdGhpcy5yb2xsc1sxXT8ucm9sbGVkKSB7XG4gICAgICAgIGlmICh0aGlzLnJvbGxzWzBdLnBhc3NlZCB8fCB0aGlzLnJvbGxzWzFdLnBhc3NlZCkge1xuICAgICAgICAgIGlmICh0aGlzLnJvbGxzWzBdLnN1Y2Nlc3NMZXZlbCA+IHRoaXMucm9sbHNbMV0uc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgICAgICB0aGlzLnJvbGxzWzBdLndpbm5lciA9IHRydWVcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucm9sbHNbMV0uc3VjY2Vzc0xldmVsID4gdGhpcy5yb2xsc1swXS5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgICAgIHRoaXMucm9sbHNbMV0ud2lubmVyID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hZHZhbnRhZ2VBdHRhY2tlcikgdGhpcy5yb2xsc1swXS53aW5uZXIgPSB0cnVlXG4gICAgICAgICAgICBlbHNlIHRoaXMucm9sbHNbMV0ud2lubmVyID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJvbGxzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgaWYgKGEucm9sbGVkICYmICFiLnJvbGxlZCkgcmV0dXJuIC0xXG4gICAgICAgIGlmICghYS5yb2xsZWQgJiYgYi5yb2xsZWQpIHJldHVybiAxXG4gICAgICAgIGlmICghYS5yb2xsZWQgJiYgIWIucm9sbGVkKSByZXR1cm4gMFxuICAgICAgICBpZiAoYS5zdWNjZXNzTGV2ZWwgPiBiLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgICAgcmV0dXJuIC0xXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGEuc3VjY2Vzc0xldmVsIDwgYi5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgICAgICAgIHJldHVybiAxXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ29wcG9zZWRSb2xsVGllQnJlYWtlcicpKSB7XG4gICAgICAgICAgaWYgKGEubW9kaWZpZWRSZXN1bHQgPiBiLm1vZGlmaWVkUmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIC0xXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChhLm1vZGlmaWVkUmVzdWx0IDwgYi5tb2RpZmllZFJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICAgICAgICAgIHJldHVybiAxXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChhLnJhd1ZhbHVlID4gYi5yYXdWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICAgICAgICAgIHJldHVybiAtMVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYS5yYXdWYWx1ZSA8IGIucmF3VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgICAgICByZXR1cm4gMVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMFxuICAgICAgfSlcblxuICAgICAgdGhpcy53aW5Db3VudCA9IDBcbiAgICAgIGlmICh0aGlzLnJvbGxzWzBdICYmIHRoaXMucm9sbHNbMF0ucm9sbGVkICYmICF0aGlzLnJvbGxzWzBdLmZhaWxlZCkge1xuICAgICAgICB0aGlzLndpbkNvdW50ID0gMVxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMucm9sbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLnJvbGxzW2ldICYmXG4gICAgICAgICAgICB0aGlzLnJvbGxzW2ldLnJvbGxlZCAmJlxuICAgICAgICAgICAgdGhpcy5yb2xsc1swXS5zdWNjZXNzTGV2ZWwgPT09IHRoaXMucm9sbHNbaV0uc3VjY2Vzc0xldmVsICYmXG4gICAgICAgICAgICAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb3Bwb3NlZFJvbGxUaWVCcmVha2VyJylcbiAgICAgICAgICAgICAgPyB0aGlzLnJvbGxzWzBdLm1vZGlmaWVkUmVzdWx0ID09PSB0aGlzLnJvbGxzW2ldLm1vZGlmaWVkUmVzdWx0XG4gICAgICAgICAgICAgIDogdGhpcy5yb2xsc1swXS5yYXdWYWx1ZSA9PT0gdGhpcy5yb2xsc1tpXS5yYXdWYWx1ZSlcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMud2luQ291bnQgPSB0aGlzLndpbkNvdW50ICsgMVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucm9sbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5yb2xsc1tpXS53aW5uZXIgPSBpIDwgdGhpcy53aW5Db3VudFxuICAgICAgICB0aGlzLnJvbGxzW2ldLnRpZSA9IHRoaXMucm9sbHNbaV0ud2lubmVyICYmIHRoaXMud2luQ291bnQgPiAxXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY2xvc2VDYXJkICgpIHtcbiAgICB0aGlzLmNsb3NlZCA9IHRydWVcbiAgfVxufVxuIiwiLyogZ2xvYmFsIEF1ZGlvSGVscGVyLCBDT05GSUcsIGdhbWUsIG1lcmdlT2JqZWN0ICovXG5cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi8uLi9kaWNlLmpzJ1xuaW1wb3J0IHsgUm9sbENhcmQgfSBmcm9tICcuL3JvbGwtY2FyZC5qcydcblxuZXhwb3J0IGNsYXNzIENvbWJpbmVkQ2hlY2tDYXJkIGV4dGVuZHMgUm9sbENhcmQge1xuICBzdGF0aWMgYXN5bmMgYmluZExpc3Rlcm5lcnMgKGh0bWwpIHtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jYXJkLmNvbWJpbmVkIC50b2dnbGUtc3dpdGNoJyxcbiAgICAgIHRoaXMuX29uVG9nZ2xlLmJpbmQodGhpcylcbiAgICApXG4gICAgLy8gaHRtbC5maW5kKCcucm9sbC1jYXJkIGEnKS5jbGljayhhc3luYyAoZXZlbnQpID0+IENvbWJpbmVkQ2hlY2tDYXJkLl9vbkNsaWNrKCBldmVudCkpO1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNhcmQuY29tYmluZWQgYScsXG4gICAgICBDb21iaW5lZENoZWNrQ2FyZC5fb25DbGljay5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNhcmQuY29tYmluZWQgYnV0dG9uJyxcbiAgICAgIENvbWJpbmVkQ2hlY2tDYXJkLl9vbkNsaWNrLmJpbmQodGhpcylcbiAgICApXG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRDb25maWcgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0Q29uZmlnLCB7XG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jYXJkcy9jb21iaW5lZC1yb2xsLmh0bWwnLFxuICAgICAgdHlwZTogJ2NvbWJpbmVkQ2FyZCcsXG4gICAgICB0aXRsZTogJ0NvQzcuQ29tYmluZWRSb2xsQ2FyZCdcbiAgICB9KVxuICB9XG5cbiAgZ2V0IGNvbmZpZyAoKSB7XG4gICAgcmV0dXJuIENvbWJpbmVkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWdcbiAgfVxuXG4gIGdldCBzdWNjZXNzQ291bnQgKCkge1xuICAgIGlmICh0aGlzLnJvbGxlZCkge1xuICAgICAgbGV0IGNvdW50ID0gMFxuICAgICAgZm9yIChjb25zdCByIG9mIHRoaXMucm9sbHMpIHtcbiAgICAgICAgaWYgKHIucGFzc2VkKSBjb3VudCArPSAxXG4gICAgICB9XG4gICAgICByZXR1cm4gY291bnRcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IG1haW5BY3RvcktleSAoKSB7XG4gICAgcmV0dXJuIHRoaXMucm9sbHNbMF0/LmFjdG9yPy5hY3RvcktleSB8fCB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBzdWNjZXNzICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuc3VjY2Vzc0NvdW50ID09PSAndW5kZWZpbmVkJykgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICh0aGlzLmFueSkge1xuICAgICAgaWYgKHRoaXMuc3VjY2Vzc0NvdW50ID4gMCkgcmV0dXJuIHRydWVcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBpZiAodGhpcy5hbGwpIHtcbiAgICAgIGlmICh0aGlzLnN1Y2Nlc3NDb3VudCA9PT0gdGhpcy5yb2xscy5sZW5ndGgpIHJldHVybiB0cnVlXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGZhaWx1cmUgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5zdWNjZXNzID09PSAndW5kZWZpbmVkJykgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiAhdGhpcy5zdWNjZXNzXG4gIH1cblxuICBnZXQgY2hlY2tHTUluaXRpYXRvciAoKSB7XG4gICAgcmV0dXJuIGdhbWUudXNlcnMuZ2V0KHRoaXMuaW5pdGlhdG9yKT8uaXNHTVxuICB9XG5cbiAgYXN5bmMgZ2V0SHRtbFJvbGwgKCkge1xuICAgIGlmICghdGhpcy5yb2xsZWQpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIGF3YWl0IGNoZWNrLl9wZXJmb3JtKHtcbiAgICAgIHJvbGw6IHRoaXMuX3JvbGxbY2hlY2suZGljZU1vZGlmaWVyIHx8IDBdLFxuICAgICAgc2lsZW50OiB0cnVlXG4gICAgfSlcbiAgICByZXR1cm4gYXdhaXQgY2hlY2suZ2V0SHRtbFJvbGwoeyBoaWRlU3VjY2VzczogdHJ1ZSB9KVxuICB9XG5cbiAgcHJvY2VzcyAoZGF0YSkge1xuICAgIHN3aXRjaCAoZGF0YS5hY3Rpb24pIHtcbiAgICAgIGNhc2UgJ25ldyc6XG4gICAgICAgIHRoaXMuYWRkUm9sbERhdGEoZGF0YSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAncm9sbCc6XG4gICAgICAgIHRoaXMuYWRkUm9sbERhdGEoZGF0YSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAndXBkYXRlUm9sbCc6IHtcbiAgICAgICAgdGhpcy51cGRhdGVSb2xsKGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2Fzc2lnblJvbGwnOiB7XG4gICAgICAgIHRoaXMuYXNzaWduUm9sbChkYXRhKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gICAgZWxzZSBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXG4gIH1cblxuICBhc3luYyBhc3NpZ25Sb2xsIChkYXRhKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBpZiAoIXRoaXMucm9sbGVkKSB7XG4gICAgICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxuICAgICAgICB0aGlzLl9yb2xsID0gZGF0YS5yb2xsXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbkNsaWNrIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgYWN0aW9uID0gYS5kYXRhc2V0LmFjdGlvblxuICAgIGNvbnN0IGxpID0gYS5jbG9zZXN0KCdsaS5hY3Rvci1yb2xsJylcbiAgICBjb25zdCBtZXNzYWdlID0gYS5jbG9zZXN0KCcuY2hhdC1tZXNzYWdlJylcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGEuY2xvc2VzdCgnZGl2LnJvbGwtY2FyZCcpXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IENvbWJpbmVkQ2hlY2tDYXJkLmZyb21IVE1MQ2FyZEVsZW1lbnQoY2FyZEVsZW1lbnQpXG4gICAgY2FyZC5tZXNzYWdlSWQgPSBtZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgY29uc3QgcmFuayA9IE51bWJlcihsaT8uZGF0YXNldD8ucmFuaylcblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICdyZW1vdmUtcm9sbCc6IHtcbiAgICAgICAgY2FyZC5yZW1vdmVSb2xsKHJhbmspXG4gICAgICAgIGF3YWl0IGNhcmQudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdjbG9zZS1jYXJkJzoge1xuICAgICAgICBjYXJkLmNsb3NlQ2FyZCgpXG4gICAgICAgIGF3YWl0IGNhcmQudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyb2xsLWNhcmQnOiB7XG4gICAgICAgIGNvbnN0IHBvb2wgPSB7fVxuICAgICAgICBmb3IgKGNvbnN0IGRpY2Ugb2YgY2FyZC5yb2xscykge1xuICAgICAgICAgIGNvbnN0IGRpY2VNb2RpZmllciA9IHBhcnNlSW50KGRpY2UuZGljZU1vZGlmaWVyLCAxMClcbiAgICAgICAgICBpZiAoIWlzTmFOKGRpY2VNb2RpZmllcikpIHtcbiAgICAgICAgICAgIHBvb2xbZGljZU1vZGlmaWVyXSA9IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgcm9sbCA9IGF3YWl0IENvQzdEaWNlLmNvbWJpbmVkUm9sbCh7IHBvb2w6IHBvb2wgfSlcbiAgICAgICAgcm9sbC5pbml0aWF0b3IgPSBnYW1lLnVzZXIuaWRcblxuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgIHR5cGU6IHRoaXMuZGVmYXVsdENvbmZpZy50eXBlLFxuICAgICAgICAgIGFjdGlvbjogJ2Fzc2lnblJvbGwnLFxuICAgICAgICAgIGZyb21HTTogZ2FtZS51c2VyLmlzR00sXG4gICAgICAgICAgcm9sbDogcm9sbFxuICAgICAgICB9XG4gICAgICAgIEF1ZGlvSGVscGVyLnBsYXkoeyBzcmM6IENPTkZJRy5zb3VuZHMuZGljZSB9KVxuICAgICAgICBjYXJkLnByb2Nlc3MoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgIHVwZGF0ZTogZmFsc2UsXG4gICAgICAgICAgZGF0YTogYS5kYXRhc2V0LFxuICAgICAgICAgIGNsYXNzZXM6IGEuY2xhc3NMaXN0LFxuICAgICAgICAgIHRhcmdldDogYVxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IENvQzdDaGVjay5hbHRlcihjYXJkLnJvbGxzW3JhbmtdLCBhY3Rpb24sIG9wdGlvbnMpXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgdHlwZTogdGhpcy5kZWZhdWx0Q29uZmlnLnR5cGUsXG4gICAgICAgICAgYWN0aW9uOiAndXBkYXRlUm9sbCcsXG4gICAgICAgICAgcmFuazogcmFuayxcbiAgICAgICAgICBmcm9tR006IGdhbWUudXNlci5pc0dNLFxuICAgICAgICAgIHJvbGw6IHtcbiAgICAgICAgICAgIGluaXRpYXRvcjogZ2FtZS51c2VyLmlkXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghZ2FtZS51c2VyLmlzR00pIGRhdGEucm9sbCA9IGNhcmQucm9sbHNbcmFua10uSlNPTlJvbGxEYXRhXG4gICAgICAgIGNhcmQucHJvY2VzcyhkYXRhKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNvbXB1dGUgKCkge1xuICAgIGlmICghdGhpcy5fcm9sbCkgcmV0dXJuXG5cbiAgICB0aGlzLnJvbGxzID0gdGhpcy5yb2xscy5maWx0ZXIocm9sbCA9PiB7XG4gICAgICByZXR1cm4gdHlwZW9mIHJvbGwuYWN0b3IuZGF0YSAhPT0gJ3VuZGVmaW5lZCcgLy8gcmVtb3ZlIGFueSBhY3RvcnMgdGhhdCBubyBsb25nZXIgZXhpc3RcbiAgICB9KVxuXG4gICAgZm9yIChjb25zdCByIG9mIHRoaXMucm9sbHMpIHtcbiAgICAgIGlmICghci5yb2xsZWQpIHtcbiAgICAgICAgci5tb2RpZmllciA9IHIuZGljZU1vZGlmaWVyIHx8IDBcbiAgICAgICAgci5kaWZmaWN1bHR5ID0gci5kaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgICByLmZsYXREaWNlTW9kaWZpZXIgPSByLmZsYXREaWNlTW9kaWZpZXIgfHwgMFxuICAgICAgICByLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IHIuZmxhdFRocmVzaG9sZE1vZGlmaWVyIHx8IDBcbiAgICAgICAgYXdhaXQgci5fcGVyZm9ybSh7IHJvbGw6IHRoaXMuX3JvbGxbci5tb2RpZmllcl0sIHNpbGVudDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucm9sbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLnJvbGxzW2ldLnJvbGxlZCkge1xuICAgICAgICB0aGlzLnJvbGxzW2ldLl9odG1sUm9sbCA9IGF3YWl0IHRoaXMucm9sbHNbaV0uZ2V0SHRtbFJvbGwoe1xuICAgICAgICAgIGhpZGVEaWNlUmVzdWx0OiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5faHRtbFJvbGwgPSBhd2FpdCB0aGlzLmdldEh0bWxSb2xsKClcbiAgfVxuXG4gIGNsb3NlQ2FyZCAoKSB7XG4gICAgdGhpcy5jbG9zZWQgPSB0cnVlXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgQ09OU1QsIGdhbWUsIFRva2VuLCB0b2tlbkRhdGEsIHVpICovXG5cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4vY2hlY2suanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVJbml0aWF0b3IgfSBmcm9tICcuL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5qcydcbmltcG9ydCB7IENvQzdNZWxlZVRhcmdldCB9IGZyb20gJy4vY2hhdC9jb21iYXQvbWVsZWUtdGFyZ2V0LmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlUmVzb2x0aW9uIH0gZnJvbSAnLi9jaGF0L2NvbWJhdC9tZWxlZS1yZXNvbHV0aW9uLmpzJ1xuaW1wb3J0IHsgQ29DN1JhbmdlSW5pdGlhdG9yIH0gZnJvbSAnLi9jaGF0L3JhbmdlY29tYmF0LmpzJ1xuaW1wb3J0IHsgQ29DN1JvbGwsIGNoYXRIZWxwZXIgfSBmcm9tICcuL2NoYXQvaGVscGVyLmpzJ1xuLy8gaW1wb3J0IHsgQ29DN0RhbWFnZVJvbGwgfSBmcm9tICcuL2NoYXQvZGFtYWdlY2FyZHMuanMnO1xuaW1wb3J0IHsgQ29DN0NvbkNoZWNrIH0gZnJvbSAnLi9jaGF0L2NvbmNoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN1BhcnNlciB9IGZyb20gJy4vYXBwcy9wYXJzZXIuanMnXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuaW1wb3J0IHsgT3Bwb3NlZENoZWNrQ2FyZCB9IGZyb20gJy4vY2hhdC9jYXJkcy9vcHBvc2VkLXJvbGwuanMnXG5pbXBvcnQgeyBDb21iaW5lZENoZWNrQ2FyZCB9IGZyb20gJy4vY2hhdC9jYXJkcy9jb21iaW5lZC1yb2xsLmpzJ1xuaW1wb3J0IHsgSW50ZXJhY3RpdmVDaGF0Q2FyZCB9IGZyb20gJy4vY2hhdC9pbnRlcmFjdGl2ZS1jaGF0LWNhcmQuanMnXG5pbXBvcnQgeyBEYW1hZ2VDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL2RhbWFnZS5qcydcbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi9kaWNlLmpzJ1xuXG5jb25zdCBDSEFUX0NPQzdfTUVTU0FHRSA9IHtcbiAgRkFLRVJPTEw6XG4gICAgJzxkaXYgY2xhc3M9XCJkaWNlLXJvbGxcIj48ZGl2IGNsYXNzPVwiZGljZS1yZXN1bHRcIj48ZGl2IGNsYXNzPVwiZGljZS1mb3JtdWxhXCI+Pz8/PC9kaXY+PGg0IGNsYXNzPVwiZGljZS10b3RhbFwiPj88L2g0PjwvZGl2PjwvZGl2Pidcbn1cbmV4cG9ydCBjbGFzcyBDb0M3Q2hhdCB7XG4gIC8vIHN0YXRpYyBjcmVhdGVDaGF0TWVzc2FnZUhvb2soY2hhdE1lc3NhZ2UsIG9wdGlvbnMsIHVzZXIpe1xuICAvLyB9XG5cbiAgc3RhdGljIHJlbmRlckNoYXRNZXNzYWdlSG9vayAoY2hhdE1lc3NhZ2UsIGh0bWwpIHtcbiAgICBpZiAoY2hhdE1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICdHTVNlbGZSb2xsJykgJiYgIWdhbWUudXNlci5pc0dNKSB7XG4gICAgICBodG1sLmZpbmQoJy53aGlzcGVyLXRvJykucmVtb3ZlKClcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5mbGF2b3ItdGV4dCcpXG4gICAgICAgIC5yZXBsYWNlV2l0aChcbiAgICAgICAgICBgPHNwYW4gY2xhc3M9XCJmbGF2b3ItdGV4dFwiPiR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuUm9sbFNlY3JldERpY2UnXG4gICAgICAgICAgKX08L3NwYW4+YFxuICAgICAgICApXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcubWVzc2FnZS1jb250ZW50JylcbiAgICAgICAgLnJlcGxhY2VXaXRoKFxuICAgICAgICAgIGA8ZGl2IGNsYXNzPVwibWVzc2FnZS1jb250ZW50XCI+JHtDSEFUX0NPQzdfTUVTU0FHRS5GQUtFUk9MTH08L2Rpdj5gXG4gICAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoY2hhdE1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICdyZW1vdmVXaXNwZXJUYXJnZXRzJykgJiYgIWdhbWUudXNlci5pc0dNKSB7XG4gICAgICBodG1sLmZpbmQoJy53aGlzcGVyLXRvJykucmVtb3ZlKClcbiAgICB9XG5cbiAgICBpZiAoY2hhdE1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICdmYWtlUm9sbCcpICYmIGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuZmxhdm9yLXRleHQnKVxuICAgICAgICAucmVwbGFjZVdpdGgoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LktlZXBlclNlbnREZWNveScpKVxuICAgICAgaHRtbC5maW5kKCcubWVzc2FnZS1jb250ZW50JykucmVtb3ZlKClcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZmFrZVJvbGxNZXNzYWdlICgpIHtcbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGxTZWNyZXREaWNlJyksXG4gICAgICB3aGlzcGVyOiBnYW1lLnVzZXJzLnBsYXllcnMsXG4gICAgICB0eXBlOiBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuV0hJU1BFUixcbiAgICAgIGZsYWdzOiB7XG4gICAgICAgIENvQzc6IHtcbiAgICAgICAgICBHTVNlbGZSb2xsOiBmYWxzZSxcbiAgICAgICAgICByZW1vdmVXaXNwZXJUYXJnZXRzOiB0cnVlLFxuICAgICAgICAgIGZha2VSb2xsOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjb250ZW50OiBDSEFUX0NPQzdfTUVTU0FHRS5GQUtFUk9MTFxuICAgIH1cblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcbiAgfVxuXG4gIC8vIFRPRE8gcmVtcGxhY2VyIGxlcyBnZXRFbGVtZW50c0J5eHh4eCBwYXIgcXVlcnlTZWxlY3RvclxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcbiAgICogIEluaXQgc29ja2V0cyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICBzdGF0aWMgcmVhZHkgKCkge1xuICAgIC8vIGNvbnNvbGUubG9nKCctLT5Db0M3Q2hhdC5yZWFkeScpO1xuICAgIGdhbWUuQ29DNyA9ICdpbml0J1xuICB9XG5cbiAgLy8gc3RhdGljIG9uTWVzc2FnZSggZGF0YSkge1xuICAvLyAgY29uc29sZS5sb2coJy0tPkNvQzdDaGF0Lm9uTWVzc2FnZScpO1xuICAvLyAgY29uc29sZS5sb2coYG1lc3NhZ2UgcmVjZWl2ZWQgc2VuZCZlciA6JHtkYXRhLnVzZXJ9IG1lc3NhZ2UgdHlwZSA6ICR7ZGF0YS5hY3Rpb259IGZvciBtZXNzYWdlIDoke2RhdGEubWVzc2FnZUlkfWApO1xuICAvLyB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuICAgKiAgQ2hhdCBNZXNzYWdlIEhlbHBlcnMgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgc3RhdGljIGFzeW5jIGNoYXRMaXN0ZW5lcnMgKGFwcCwgaHRtbCkge1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5jYXJkLWJ1dHRvbnMgYnV0dG9uJyxcbiAgICAgIENvQzdDaGF0Ll9vbkNoYXRDYXJkQWN0aW9uLmJpbmQodGhpcylcbiAgICApXG4gICAgLy8gaHRtbC5vbignY2xpY2snLCAnLmNhcmQtYnV0dG9ucyBidXR0b24nLCBDb0M3Q2hhdC5fb25DaGF0Q2FyZFRlc3QuYmluZCh0aGlzKSk7XG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLmNhcmQtdGl0bGUnLFxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRUb2dnbGVDb250ZW50LmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJhZGlvLXN3aXRjaCcsXG4gICAgICBDb0M3Q2hhdC5fb25DaGF0Q2FyZFJhZGlvU3dpdGNoLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnBhbmVsLXN3aXRjaCcsXG4gICAgICBDb0M3Q2hhdC5fb25DaGF0Q2FyZFRvZ2dsZVN3aXRjaC5iaW5kKHRoaXMpXG4gICAgKVxuXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnNpbXBsZS1mbGFnJyxcbiAgICAgIENvQzdDaGF0Ll9vbkNoYXRDYXJkVG9nZ2xlU3dpdGNoLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbignY2xpY2snLCAnLnZvbGxleS1zaXplJywgQ29DN0NoYXQuX29uQ2hhdENhcmRWb2xsZXlTaXplLmJpbmQodGhpcykpXG5cbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuZHJvcGRvd24tZWxlbWVudCcsXG4gICAgICBDb0M3Q2hhdC5fb25Ecm9wRG93bkVsZW1lbnRTZWxlY3RlZC5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oJ2NsaWNrJywgJy5zaW1wbGUtdG9nZ2xlJywgQ29DN0NoYXQuX29uVG9nZ2xlU2VsZWN0ZWQuYmluZCh0aGlzKSlcbiAgICAvLyBodG1sLm9uKCdjbGljaycsICcuaXMtb3V0bnVtYmVyZWQnLCBDb0M3Q2hhdC5fb25PdXRudW1iZXJlZFNlbGVjdGVkLmJpbmQodGhpcykpO1xuXG4gICAgaHRtbC5vbignY2xpY2snLCAnLnRhcmdldC1zZWxlY3RvcicsIENvQzdDaGF0Ll9vblRhcmdldFNlbGVjdC5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5vbignZGJsY2xpY2snLCAnLm9wZW4tYWN0b3InLCBDb0M3Q2hhdC5fb25PcGVuQWN0b3IuYmluZCh0aGlzKSlcblxuICAgIGh0bWwub24oJ2NsaWNrJywgJy5jb2M3LWxpbmsnLCBhd2FpdCBDb0M3UGFyc2VyLl9vbkNoZWNrLmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignZHJhZ3N0YXJ0JywgJ2EuY29jNy1saW5rJywgQ29DN1BhcnNlci5fb25EcmFnQ29DN0xpbmsuYmluZCh0aGlzKSlcblxuICAgIGh0bWwub24oJ2NsaWNrJywgJ2NvYzctaW5saW5lLXJlc3VsdCcsIENvQzdDaGF0Ll9vbklubGluZS5iaW5kKHRoaXMpKVxuXG4gICAgLy8gUm9sbENhcmQuYmluZExpc3Rlcm5lcnMoIGh0bWwpO1xuICAgIE9wcG9zZWRDaGVja0NhcmQuYmluZExpc3Rlcm5lcnMoaHRtbClcbiAgICBDb21iaW5lZENoZWNrQ2FyZC5iaW5kTGlzdGVybmVycyhodG1sKVxuICB9XG5cbiAgc3RhdGljIF9vbk9wZW5BY3RvciAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYWN0b3JLZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0b3JLZXlcbiAgICBpZiAoYWN0b3JLZXkpIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgaWYgKGFjdG9yLmlzT3duZXIpIGFjdG9yLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBvblVwZGF0ZUNoYXRNZXNzYWdlIChjaGF0TWVzc2FnZSkge1xuICAgIHVpLmNoYXQuc2Nyb2xsQm90dG9tKClcblxuICAgIC8vIGlmKCBjaGF0TWVzc2FnZS5nZXRGbGFnKCAnQ29DNycsICdyZXZlbGVkJykpe1xuICAgIC8vIH1cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00gJiYgY2hhdE1lc3NhZ2UuZGF0YS50eXBlID09PSAwKSB7XG4gICAgICBjb25zdCBjYXJkID0gJChjaGF0TWVzc2FnZS5kYXRhLmNvbnRlbnQpWzBdXG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ21lbGVlJykpIHtcbiAgICAgICAgaWYgKGNhcmQuZGF0YXNldC5yZXNvbHZlZCA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbml0aWF0b3InKSkge1xuICAgICAgICAgICAgaWYgKGNhcmQuZGF0YXNldC50YXJnZXRDYXJkKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tTWVzc2FnZUlkKFxuICAgICAgICAgICAgICAgIGNoYXRNZXNzYWdlLmlkXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21NZXNzYWdlSWQoXG4gICAgICAgICAgICAgICAgaW5pdGlhdG9yLnRhcmdldENhcmRcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpZiAodGFyZ2V0LnJlc29sdmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzb2x1dGlvbkNhcmQgPSBuZXcgQ29DN01lbGVlUmVzb2x0aW9uKFxuICAgICAgICAgICAgICAgICAgY2hhdE1lc3NhZ2UuaWQsXG4gICAgICAgICAgICAgICAgICB0YXJnZXQubWVzc2FnZUlkLFxuICAgICAgICAgICAgICAgICAgdGFyZ2V0LnJlc29sdXRpb25DYXJkXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGF3YWl0IHJlc29sdXRpb25DYXJkLnJlc29sdmUoKVxuICAgICAgICAgICAgICAgIGlmICghaW5pdGlhdG9yLmNoZWNrUmV2ZWFsZWQpIGF3YWl0IGluaXRpYXRvci5yZXZlYWxDaGVjaygpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tTWVzc2FnZUlkKFxuICAgICAgICAgICAgICAgIGNoYXRNZXNzYWdlLmlkXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaWYgKGluaXRpYXRvci5yZXNvbHV0aW9uQ2FyZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc29sdXRpb25DYXJkID0gbmV3IENvQzdNZWxlZVJlc29sdGlvbihcbiAgICAgICAgICAgICAgICAgIGNoYXRNZXNzYWdlLmlkLFxuICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgIGluaXRpYXRvci5yZXNvbHV0aW9uQ2FyZFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBhd2FpdCByZXNvbHV0aW9uQ2FyZC5yZXNvbHZlKClcbiAgICAgICAgICAgICAgICBpZiAoIWluaXRpYXRvci5jaGVja1JldmVhbGVkKSBhd2FpdCBpbml0aWF0b3IucmV2ZWFsQ2hlY2soKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0JykpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tTWVzc2FnZUlkKGNoYXRNZXNzYWdlLmlkKVxuICAgICAgICAgICAgY29uc3QgcmVzb2x1dGlvbkNhcmQgPSBuZXcgQ29DN01lbGVlUmVzb2x0aW9uKFxuICAgICAgICAgICAgICB0YXJnZXQucGFyZW50TWVzc2FnZUlkLFxuICAgICAgICAgICAgICBjaGF0TWVzc2FnZS5pZCxcbiAgICAgICAgICAgICAgdGFyZ2V0LnJlc29sdXRpb25DYXJkXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBhd2FpdCByZXNvbHV0aW9uQ2FyZC5yZXNvbHZlKClcbiAgICAgICAgICAgIGlmICghdGFyZ2V0Lm1lbGVlSW5pdGlhdG9yLmNoZWNrUmV2ZWFsZWQpIHtcbiAgICAgICAgICAgICAgYXdhaXQgdGFyZ2V0Lm1lbGVlSW5pdGlhdG9yLnJldmVhbENoZWNrKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcmVuZGVyTWVzc2FnZUhvb2sgKG1lc3NhZ2UsIGh0bWwpIHtcbiAgICB1aS5jaGF0LnNjcm9sbEJvdHRvbSgpXG5cbiAgICBJbnRlcmFjdGl2ZUNoYXRDYXJkLmJpbmRMaXN0ZW5lcnMoaHRtbClcblxuICAgIGlmIChtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAnY2hlY2tSZXZlYWxlZCcpKSB7XG4gICAgICBodG1sLmZpbmQoJy5kaWNlLXJvbGwnKS5yZW1vdmVDbGFzcygnZ20tdmlzaWJsZS1vbmx5JylcbiAgICAgIGh0bWxbMF0uZGF0YXNldC5jaGVja1JldmVhbGVkID0gdHJ1ZVxuICAgIH1cblxuICAgIC8vIEhhbmRsZSBzaG93aW5nIGRyb3Bkb3duIHNlbGVjdGlvblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZHJvcGJ0bicpXG4gICAgICAuY2xpY2soZXZlbnQgPT5cbiAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgICAgIC5jbG9zZXN0KCcuZHJvcGRvd24nKVxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tY29udGVudCcpXG4gICAgICAgICAgLmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKVxuICAgICAgKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZHJvcGRvd24nKVxuICAgICAgLm1vdXNlbGVhdmUoZXZlbnQgPT5cbiAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tY29udGVudCcpXG4gICAgICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKVxuICAgICAgKVxuXG4gICAgLy8gY29uc29sZS5sb2coJyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi0tPkNvQzdDaGF0Lm1lc3NhZ2VMaXN0ZW5lcnMgbWVzc2FnZSA6JyArIG1lc3NhZ2UuaWQpO1xuICAgIC8vIG1lc3NhZ2UuZGF0YS5jb250ZW50ID0gXCJcIjtcbiAgICAvLyBkYXRhLm1lc3NhZ2UuY29udGVudCA9IFwiXCI7XG5cbiAgICAvLyBXaGVuIGEgbmV3IGNhcmQgaXMgcHVibGlzaGVkLCBjaGVjayB3ZXRoZXIgaXQncyBhIHJvbGwgdGhhdCBtb2RpZmllcyBhbiBvdGhlciBjYXJkLlxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgY29uc3QgY2FyZCA9IGh0bWxbMF0ucXVlcnlTZWxlY3RvcignLmNvYzcuY2hhdC1jYXJkJylcbiAgICAgIGlmIChjYXJkKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBjYXJkLmNsYXNzTGlzdC5jb250YWlucygncm9sbC1jYXJkJykgJiZcbiAgICAgICAgICAhKGNhcmQuZGF0YXNldC5wcm9jZXNzZWQgPT09ICd0cnVlJykgJiZcbiAgICAgICAgICBjYXJkLmRhdGFzZXQucmVmTWVzc2FnZUlkXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IHJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tRWxlbWVudChjYXJkKVxuXG4gICAgICAgICAgaWYgKGNhcmQuZGF0YXNldC5zaWRlID09PSAndGFyZ2V0Jykge1xuICAgICAgICAgICAgcm9sbC5kZWZlbmRhbnRJZCA9IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgICAgICAgICAgID8gY2FyZC5kYXRhc2V0LnRva2VuSWRcbiAgICAgICAgICAgICAgOiBjYXJkLmRhdGFzZXQuYWN0b3JJZFxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2FyZC5kYXRhc2V0LnNpZGUgPT09ICdpbml0aWF0b3InKSB7XG4gICAgICAgICAgICByb2xsLmluaXRpYXRvcklkID0gY2FyZC5kYXRhc2V0LnRva2VuSWRcbiAgICAgICAgICAgICAgPyBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgICAgICAgICAgICA6IGNhcmQuZGF0YXNldC5hY3RvcklkXG4gICAgICAgICAgfVxuICAgICAgICAgIGNhcmQuZGF0YXNldC5wcm9jZXNzZWQgPSAndHJ1ZSdcblxuICAgICAgICAgIENvQzdDaGF0LnVwZGF0ZUNvbWJhdENhcmRUYXJnZXQocm9sbClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHVzZXJPbmx5ID0gaHRtbC5maW5kKCcudGFyZ2V0LW9ubHknKVxuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiB1c2VyT25seSkge1xuICAgICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgICAgY29uc3QgYWN0b3JJZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWFjdG9yLWlkJylcbiAgICAgICAgaWYgKGFjdG9ySWQpIHtcbiAgICAgICAgICBpZiAoZ2FtZS5hY3RvcnMuZ2V0KGFjdG9ySWQpLmlzT3duZXIpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBnbU9ubHkgPSBodG1sLmZpbmQoJy5nbS1vbmx5JylcbiAgICBmb3IgKGNvbnN0IHpvbmUgb2YgZ21Pbmx5KSB7XG4gICAgICBpZiAoIWdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIHpvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHVzZXJWaXNpYmxlT25seSA9IGh0bWwuZmluZCgnLnVzZXItdmlzaWJsZS1vbmx5JylcbiAgICBmb3IgKGNvbnN0IGVsZW0gb2YgdXNlclZpc2libGVPbmx5KSB7XG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIGVsZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIH1cblxuICAgIGNvbnN0IGdtVmlzaWJsZU9ubHkgPSBodG1sLmZpbmQoJy5nbS12aXNpYmxlLW9ubHknKVxuICAgIGZvciAoY29uc3QgZWxlbSBvZiBnbVZpc2libGVPbmx5KSB7XG4gICAgICBpZiAoIWdhbWUudXNlci5pc0dNKSBlbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICB9XG5cbiAgICBjb25zdCBvd25lclZpc2libGVPbmx5ID0gaHRtbC5maW5kKCcub3duZXItdmlzaWJsZS1vbmx5JylcbiAgICBmb3IgKGNvbnN0IHpvbmUgb2Ygb3duZXJWaXNpYmxlT25seSkge1xuICAgICAgLy8gVHJ5IHJldHJpZXZpbmcgYWN0b3JcbiAgICAgIGxldCBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoem9uZS5kYXRhc2V0Py5hY3RvcktleSkgLy8gVHJ5IHdpdGggc2VsZi5cbiAgICAgIGlmICghYWN0b3IpIGFjdG9yID0gQ29DN0NoYXQuX2dldENoYXRDYXJkQWN0b3Ioem9uZS5jbG9zZXN0KCcuY2hhdC1jYXJkJykpIC8vIFRyeSB3aXRoIGNsb3Nlc3QgY2hhdCBjYXJkLlxuICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoem9uZS5wYXJlbnRFbGVtZW50LmRhdGFzZXQuYWN0b3JLZXkpIC8vIFRyeSB3aXRoIHBhcmVudCBlbGVtZW50LlxuICAgICAgfVxuICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoXG4gICAgICAgICAgem9uZS5jbG9zZXN0KCdbZGF0YS1hY3Rvci1rZXldJyk/LmRhdGFzZXQuYWN0b3JLZXlcbiAgICAgICAgKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGRhdGEtYWN0b3Ita2V5XG4gICAgICB9XG4gICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleShcbiAgICAgICAgICB6b25lLmNsb3Nlc3QoJ1tkYXRhLXRva2VuLWtleV0nKT8uZGF0YXNldC5hY3RvcktleVxuICAgICAgICApIC8vIFRyeSB3aXRoIGNsb3Nlc3QgZGF0YS10b2tlbi1rZXlcbiAgICAgIH1cblxuICAgICAgLy8gY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoIGFjdG9ySWQpO1xuICAgICAgaWYgKChhY3RvciAmJiAhYWN0b3IuaXNPd25lcikgfHwgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgem9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICB9IC8vIGlmIGN1cnJlbnQgdXNlciBkb2Vzbid0IG93biB0aGlzIGhlIGNhbid0IGludGVycmFjdFxuICAgICAgLy8gaWYoICFDb0M3Q2hhdC5pc0NhcmRPd25lciggem9uZS5jbG9zZXN0KCcuY2hhdC1jYXJkJykpKSB7em9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO31cbiAgICB9XG5cbiAgICBpZiAoIWdhbWUudXNlci5pc0dNKSB7XG4gICAgICAvLyBHTSBjYW4gc2VlIGV2ZXJ5dGhpbmdcbiAgICAgIGNvbnN0IG93bmVyT25seSA9IGh0bWwuZmluZCgnLm93bmVyLW9ubHknKVxuICAgICAgZm9yIChjb25zdCB6b25lIG9mIG93bmVyT25seSkge1xuICAgICAgICAvLyBUcnkgcmV0cmlldmluZyBhY3RvclxuICAgICAgICBsZXQgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KHpvbmUuZGF0YXNldD8uYWN0b3JLZXkpIC8vIFRyeSB3aXRoIHNlbGYuXG4gICAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRDaGF0Q2FyZEFjdG9yKHpvbmUuY2xvc2VzdCgnLmNoYXQtY2FyZCcpKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGNoYXQgY2FyZC5cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KHpvbmUucGFyZW50RWxlbWVudC5kYXRhc2V0LmFjdG9yS2V5KSAvLyBUcnkgd2l0aCBwYXJlbnQgZWxlbWVudC5cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICAgICAgem9uZS5jbG9zZXN0KCdbZGF0YS1hY3Rvci1rZXldJyk/LmRhdGFzZXQuYWN0b3JLZXlcbiAgICAgICAgICApIC8vIFRyeSB3aXRoIGNsb3Nlc3QgZGF0YS1hY3Rvci1rZXlcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICAgICAgem9uZS5jbG9zZXN0KCdbZGF0YS10b2tlbi1rZXldJyk/LmRhdGFzZXQuYWN0b3JLZXlcbiAgICAgICAgICApIC8vIFRyeSB3aXRoIGNsb3Nlc3QgZGF0YS10b2tlbi1rZXlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KCBhY3RvcklkKTtcbiAgICAgICAgaWYgKChhY3RvciAmJiAhYWN0b3IuaXNPd25lcikgfHwgKCFhY3RvciAmJiAhZ2FtZS51c2VyLmlzR00pKSB7XG4gICAgICAgICAgem9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgIH0gLy8gaWYgY3VycmVudCB1c2VyIGRvZXNuJ3Qgb3duIHRoaXMgaGUgY2FuJ3QgaW50ZXJyYWN0XG4gICAgICAgIC8vIGlmKCAhQ29DN0NoYXQuaXNDYXJkT3duZXIoIHpvbmUuY2xvc2VzdCgnLmNoYXQtY2FyZCcpKSkge3pvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJzt9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGdtU2VsZWN0T25seSA9IGh0bWwuZmluZCgnLmdtLXNlbGVjdC1vbmx5JylcbiAgICAgIGZvciAoY29uc3Qgc2VsZWN0IG9mIGdtU2VsZWN0T25seSkge1xuICAgICAgICBzZWxlY3QuY2xhc3NMaXN0LmFkZCgnaW5hY3RpdmUnKVxuICAgICAgICBzZWxlY3QuY2xhc3NMaXN0LnJlbW92ZSgnc2ltcGxlLWZsYWcnKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgYWN0aW9uVHlwZVN0cmluZyAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGZpZ2h0QmFjazogJ0NvQzcuZmlnaHRCYWNrJyxcbiAgICAgIG1hbmV1dmVyOiAnQ29DNy5tYW5ldXZlcicsXG4gICAgICBkb2RnaW5nOiAnQ29DNy5kb2RnZSdcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX29uVGFyZ2V0U2VsZWN0IChldmVudCkge1xuICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmtleSlcbiAgICBjb25zdCB0YXJnZXRzU2VsZWN0b3IgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50YXJnZXRzLXNlbGVjdG9yJylcbiAgICBmb3IgKGNvbnN0IGkgb2YgdGFyZ2V0c1NlbGVjdG9yLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpKSB7XG4gICAgICBpLnN0eWxlLmJvcmRlciA9ICdub25lJ1xuICAgIH1cbiAgICB0YXJnZXRzU2VsZWN0b3JcbiAgICAgIC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1rZXk9XCIke2luZGV4fVwiXWApXG4gICAgICAucXVlcnlTZWxlY3RvcignaW1nJykuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCAjMDAwJ1xuICAgIGNvbnN0IHRhcmdldHMgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50YXJnZXRzJylcbiAgICBmb3IgKGNvbnN0IHQgb2YgdGFyZ2V0cy5xdWVyeVNlbGVjdG9yQWxsKCcudGFyZ2V0JykpIHtcbiAgICAgIHQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgdC5kYXRhc2V0LmFjdGl2ZSA9ICdmYWxzZSdcbiAgICB9XG4gICAgY29uc3QgdGFyZ2V0VG9EaXNwbGF5ID0gdGFyZ2V0cy5xdWVyeVNlbGVjdG9yKFxuICAgICAgYFtkYXRhLXRhcmdldC1rZXk9XCIke2luZGV4fVwiXWBcbiAgICApXG4gICAgdGFyZ2V0VG9EaXNwbGF5LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgdGFyZ2V0VG9EaXNwbGF5LmRhdGFzZXQuYWN0aXZlID0gJ3RydWUnXG4gICAgLy8gY29uc3QgY2hhdENhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGF0LWNhcmQucmFuZ2UnKTtcbiAgICAvLyBjb25zdCByYW5nZUluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZCggY2hhdENhcmQpO1xuICB9XG5cbiAgc3RhdGljIF9vbkRyb3BEb3duRWxlbWVudFNlbGVjdGVkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0JykpIHtcbiAgICAgIENvQzdNZWxlZVRhcmdldC51cGRhdGVTZWxlY3RlZChjYXJkLCBldmVudClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIGNsZWFyIGFsbCBkcm9wIGRvd24gYW5kIGhpZ2hsaWdodCB0aGlzIHBhcnRpY3VsYXIgb25lXG4gICAgY29uc3QgZHJvcERvd25Cb3hlcyA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIC5jbG9zZXN0KCcucmVzcG9uc2Utc2VsZWN0aW9uJylcbiAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCcudG9nZ2xlLXN3aXRjaCcpXG4gICAgZm9yIChjb25zdCBkcGRuQm94IG9mIGRyb3BEb3duQm94ZXMpIHtcbiAgICAgIGRwZG5Cb3guY2xhc3NMaXN0LnJlbW92ZSgnc3dpdGNoZWQtb24nKVxuICAgIH1cbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50b2dnbGUtc3dpdGNoJykuY2xhc3NMaXN0LmFkZCgnc3dpdGNoZWQtb24nKVxuXG4gICAgLy8gY2xvc2UgZHJvcGRvd25cbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5kcm9wZG93bi1jb250ZW50JykuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpXG5cbiAgICAvLyBEaXNwbGF5IHRoZSByb2xsIGJ1dHRvblxuICAgIGNvbnN0IHNlbGVjdGVkQm94ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgLmNsb3Nlc3QoJy5kZWZlbmRlci1hY3Rpb24tc2VsZWN0JylcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0ZWQtYWN0aW9uJylcbiAgICBzZWxlY3RlZEJveC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgIGNvbnN0IGJ1dHRvbiA9IHNlbGVjdGVkQm94LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpXG5cbiAgICAvLyBQYXNzIHRoZSBpbml0aWF0b3IgSWQgLSBCdWlsZCBjYW4gYmUgcmV0cmlldmVkIGZyb20gdGhhdFxuXG4gICAgLy8gUGFzcyB0aGUgaW5pdGlhdG9yIGl0ZW1cblxuICAgIC8vIFBhc3MgdGhlIGRlZmVuZGFudCBJZFxuXG4gICAgLy8gUGFzcyB0aGUgZGVmZW5kYW50IGFjdGlvblxuICAgIGJ1dHRvbi5kYXRhc2V0LmFjdGlvbiA9ICdkZWZlbmRpbmcnXG4gICAgYnV0dG9uLmRhdGFzZXQuYWN0aW9uVHlwZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25cbiAgICBidXR0b24uZGF0YXNldC5kZWZlbmRlckNob2ljZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25cbiAgICBidXR0b24uZGF0YXNldC5za2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICBidXR0b24uZGF0YXNldC5za2lsbFZhbHVlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsVmFsdWVcbiAgICBidXR0b24uZGF0YXNldC5za2lsbE5hbWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxOYW1lXG4gICAgYnV0dG9uLmRhdGFzZXQuaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LndlYXBvbklkXG4gICAgYnV0dG9uLmRhdGFzZXQuaXRlbU5hbWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQud2VhcG9uTmFtZVxuXG4gICAgLy8gUHV0IHNvbWUgdGV4dCBpbiB0aGUgYnV0dG9uXG4gICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uKSB7XG4gICAgICBjYXNlICdtYW5ldXZlcic6XG4gICAgICAgIGJ1dHRvbi5pbm5lclRleHQgPSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgQ09DNy5jb21iYXRDYXJkc1tldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXVxuICAgICAgICApfSA6ICR7ZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsTmFtZX0gKCR7XG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsVmFsdWVcbiAgICAgICAgfSUpYFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnZmlnaHRCYWNrJzpcbiAgICAgICAgYnV0dG9uLmlubmVyVGV4dCA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmNvbWJhdENhcmRzW2V2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25dXG4gICAgICAgICl9IDogJHtldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQud2VhcG9uTmFtZX0gKCR7XG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsVmFsdWVcbiAgICAgICAgfSUpYFxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cbiAgICAvLyBTYXZlIGFjdGlvbiBmb3IgdGhlIHJvbGxcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25JbmxpbmUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG5cbiAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ2lubGluZS1yZXN1bHQnKSkge1xuICAgICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdleHBhbmRlZCcpKSB7XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suX2NvbGxhcHNlSW5saW5lUmVzdWx0KGEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLl9leHBhbmRJbmxpbmVSZXN1bHQoYSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX29uVG9nZ2xlU2VsZWN0ZWQgKGV2ZW50KSB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQnKSkge1xuICAgICAgQ29DN01lbGVlVGFyZ2V0LnVwZGF0ZVNlbGVjdGVkKGNhcmQsIGV2ZW50KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkID09PSAnJykge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JOb0RvZGdlU2tpbGwnKSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIGNsZWFyIGFsbCBkcm9wIGRvd24gYW5kIGhpZ2hsaWdodCB0aGlzIHBhcnRpY3VsYXIgb25lXG4gICAgY29uc3QgZHJvcERvd25Cb3hlcyA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIC5jbG9zZXN0KCcucmVzcG9uc2Utc2VsZWN0aW9uJylcbiAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCcudG9nZ2xlLXN3aXRjaCcpXG4gICAgZm9yIChjb25zdCBkcGRuQm94IG9mIGRyb3BEb3duQm94ZXMpIHtcbiAgICAgIGRwZG5Cb3guY2xhc3NMaXN0LnJlbW92ZSgnc3dpdGNoZWQtb24nKVxuICAgIH1cbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3N3aXRjaGVkLW9uJykgLy8gTmVlZCB0byB0ZXN0IGlmIGl0J3MgcmVhbGx5IGEgZG9kZ2UgISEhXG5cbiAgICAvLyBTYXZlIGFjdGlvbiBmb3IgdGhlIHJvbGxcbiAgICBjb25zdCBzZWxlY3RlZEJveCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIC5jbG9zZXN0KCcuZGVmZW5kZXItYWN0aW9uLXNlbGVjdCcpXG4gICAgICAucXVlcnlTZWxlY3RvcignLnNlbGVjdGVkLWFjdGlvbicpXG4gICAgc2VsZWN0ZWRCb3guc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICBjb25zdCBidXR0b24gPSBzZWxlY3RlZEJveC5xdWVyeVNlbGVjdG9yKCdidXR0b24nKVxuXG4gICAgYnV0dG9uLmRhdGFzZXQuYWN0aW9uID0gJ2RlZmVuZGluZydcbiAgICBidXR0b24uZGF0YXNldC5hY3Rpb25UeXBlID0gJ2RvZGdpbmcnXG4gICAgYnV0dG9uLmRhdGFzZXQuZGVmZW5kZXJDaG9pY2UgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXG4gICAgYnV0dG9uLmRhdGFzZXQuc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgYnV0dG9uLmRhdGFzZXQuc2tpbGxWYWx1ZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbFZhbHVlXG4gICAgYnV0dG9uLmRhdGFzZXQuc2tpbGxOYW1lID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsTmFtZVxuXG4gICAgYnV0dG9uLmlubmVyVGV4dCA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgIENPQzcuY29tYmF0Q2FyZHNbZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbl1cbiAgICApfSA6ICR7ZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsTmFtZX0gKCR7XG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxWYWx1ZVxuICAgIH0lKWBcbiAgfVxuXG4gIHN0YXRpYyBfb25DaGF0Q2FyZFJhZGlvU3dpdGNoIChldmVudCkge1xuICAgIC8vIGNvbnNvbGUubG9nKCctLT5Db0M3Q2hhdC5fb25DaGF0Q2FyZFJhZGlvU3dpdGNoJyk7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IG9wdGlvbkxpc3QgPVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3JhZGlvLXN3aXRjaCcpXG4gICAgbGV0IGluZGV4XG4gICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgb3B0aW9uTGlzdC5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBvcHRpb25MaXN0W2luZGV4XVxuICAgICAgaWYgKGVsZW1lbnQuZGF0YXNldC5wcm9wZXJ0eSA9PT0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnByb3BlcnR5KSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc3dpdGNoZWQtb24nKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdzd2l0Y2hlZC1vbicpXG4gICAgICB9XG4gICAgfVxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LnNlbGVjdGVkID1cbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wcm9wZXJ0eVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbkNoYXRDYXJkVm9sbGV5U2l6ZSAoZXZlbnQpIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhdC1jYXJkJylcblxuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygncmFuZ2UnKSkge1xuICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbml0aWF0b3InKSkge1xuICAgICAgICBjb25zdCByYW5nZUNhcmQgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbmNyZWFzZScpKSB7XG4gICAgICAgICAgcmFuZ2VDYXJkLmNoYW5nZVZvbGxleVNpemUoMSlcbiAgICAgICAgfSBlbHNlIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZGVjcmVhc2UnKSkge1xuICAgICAgICAgIHJhbmdlQ2FyZC5jaGFuZ2VWb2xsZXlTaXplKC0xKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbkNoYXRDYXJkVG9nZ2xlU3dpdGNoIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnbWVsZWUnKSkge1xuICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbml0aWF0b3InKSkge1xuICAgICAgICBDb0M3TWVsZWVJbml0aWF0b3IudXBkYXRlQ2FyZFN3aXRjaChldmVudClcbiAgICAgIH1cblxuICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQnKSkge1xuICAgICAgICBDb0M3TWVsZWVUYXJnZXQudXBkYXRlQ2FyZFN3aXRjaChldmVudClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JhbmdlJykpIHtcbiAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnaW5pdGlhdG9yJykpIHtcbiAgICAgICAgQ29DN1JhbmdlSW5pdGlhdG9yLnVwZGF0ZUNhcmRTd2l0Y2goZXZlbnQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkYW1hZ2UnKSkge1xuICAgICAgLy8gQ29DN0l0ZW0udXBkYXRlQ2FyZFN3aXRjaCggZXZlbnQpO1xuICAgIH1cblxuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygncm9sbC1jYXJkJykpIHtcbiAgICAgIENvQzdDaGVjay51cGRhdGVDYXJkU3dpdGNoKGV2ZW50KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIEFjdG9yIHdoaWNoIGlzIHRoZSBhdXRob3Igb2YgYSBjaGF0IGNhcmRcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY2FyZCAgICBUaGUgY2hhdCBjYXJkIGJlaW5nIHVzZWRcbiAgICogQHJldHVybiB7QWN0b3J8bnVsbH0gICAgICAgICBUaGUgQWN0b3IgZW50aXR5IG9yIG51bGxcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXRpYyBfZ2V0Q2hhdENhcmRBY3RvciAoY2FyZCkge1xuICAgIC8vIGlmIGRhdGFzZXQub2JqZWN0IGlzIHRoZXJlID0+IG5lZWQgdG8gdW5lc2NhcGUgdGhpbmdzICEhXG4gICAgLy8gaWYgbm90IHVzZSB0aGUgZGF0YXNldCBkaXJlY3RseS5cbiAgICBjb25zdCBjYXJkRGF0YSA9IGNhcmQuZGF0YXNldC5vYmplY3RcbiAgICAgID8gSlNPTi5wYXJzZSh1bmVzY2FwZShjYXJkLmRhdGFzZXQub2JqZWN0KSlcbiAgICAgIDogY2FyZC5kYXRhc2V0XG5cbiAgICBpZiAoY2FyZERhdGEuYWN0b3JLZXkpIHJldHVybiBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KGNhcmREYXRhLmFjdG9yS2V5KVxuXG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXG4gICAgY29uc3QgdG9rZW5LZXkgPSBjYXJkRGF0YS50b2tlbklkXG4gICAgaWYgKHRva2VuS2V5KSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSB0b2tlbktleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW4gPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXG4gICAgICAgIGlmICghdG9rZW4pIHJldHVybiBudWxsXG4gICAgICAgIHJldHVybiB0b2tlbi5hY3RvciB8fCBuZXcgVG9rZW4odG9rZW5EYXRhKS5hY3RvclxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENhc2UgMiAtIHVzZSBBY3RvciBJRCBkaXJlY3RvcnlcbiAgICBjb25zdCBhY3RvcklkID0gY2FyZERhdGEuYWN0b3JJZFxuICAgIGlmIChhY3RvcklkKSByZXR1cm4gZ2FtZS5hY3RvcnMuZ2V0KGFjdG9ySWQpXG5cbiAgICBjb25zdCBtZXNzYWdlID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpXG4gICAgY29uc3QgbWVzc2FnZUlkID0gbWVzc2FnZSA/IG1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQgOiBudWxsXG4gICAgaWYgKG1lc3NhZ2VJZCkge1xuICAgICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgICBpZiAoY2hhdE1lc3NhZ2UudXNlcikgcmV0dXJuIGNoYXRNZXNzYWdlLnVzZXIuY2hhcmFjdGVyXG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHN0YXRpYyBpc0NhcmRPd25lciAoY2FyZCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJylcbiAgICBjb25zdCBtZXNzYWdlSWQgPSBtZXNzYWdlID8gbWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCA6IG51bGxcbiAgICBpZiAobWVzc2FnZUlkKSB7XG4gICAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICAgIHJldHVybiBjaGF0TWVzc2FnZS5vd25uZXIgfHwgZmFsc2VcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHN0YXRpYyBfZ2V0QWN0b3JGcm9tS2V5IChrZXkpIHtcbiAgICBpZiAoIWtleSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIC8vIENhc2UgMSAtIGEgc3ludGhldGljIGFjdG9yIGZyb20gYSBUb2tlblxuICAgIGlmIChrZXkuaW5jbHVkZXMoJy4nKSkge1xuICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSBrZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuKSByZXR1cm4gbnVsbFxuICAgICAgICByZXR1cm4gdG9rZW4uYWN0b3IgfHwgbmV3IFRva2VuKHRva2VuRGF0YSkuYWN0b3JcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYXNlIDIgLSB1c2UgQWN0b3IgSUQgZGlyZWN0b3J5XG4gICAgcmV0dXJuIGdhbWUuYWN0b3JzLmdldChrZXkpIHx8IG51bGxcbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvckZyb21Ub2tlbiAodG9rZW5LZXkpIHtcbiAgICBjb25zdCB0b2tlbiA9IENvQzdDaGF0LmdldFRva2VuKHRva2VuS2V5KVxuICAgIHJldHVybiB0b2tlbiA/IHRva2VuLmFjdG9yIDogbnVsbFxuICB9XG5cbiAgc3RhdGljIGdldFRva2VuICh0b2tlbktleSkge1xuICAgIGlmICh0b2tlbktleSkge1xuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0gdG9rZW5LZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgY29uc3QgdG9rZW5Eb2MgPSBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0/LnRva2VuXG4gICAgICAgIHJldHVybiB0b2tlbkRvYy5vYmplY3QgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbiA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGxcbiAgICAgICAgcmV0dXJuIHRva2VuIHx8IG5ldyBUb2tlbih0b2tlbkRhdGEpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICAvKipcbiAgICogdXBkYXRlIGEgY2hhdCBtZXNzYWdlIHdpdGggYSBuZXcgSFRNTCBjb250ZW50IGFuZCBwb3B1bGF0ZSBpdC5cbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY2FyZFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZUNoYXRDYXJkIChjYXJkLCBtZXNzSWQgPSBudWxsKSB7XG4gICAgY29uc3QgbWVzc2FnZUlkID1cbiAgICAgIG1lc3NJZCA9PSBudWxsID8gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkIDogbWVzc0lkXG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHsgY29udGVudDogY2FyZC5vdXRlckhUTUwgfSlcbiAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICByZXR1cm4gbXNnXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2hhdENhcmRBY3Rpb24gKGV2ZW50KSB7XG4gICAgLy8gY29uc29sZS5sb2coJy0tPkNvQzdDaGF0Ll9vbkNoYXRDYXJkQWN0aW9uJyk7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGNhcmQgPSBidXR0b24uY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgaWYgKCFjYXJkKSByZXR1cm5cbiAgICBjb25zdCBvcmlnaW5NZXNzYWdlID0gYnV0dG9uLmNsb3Nlc3QoJy5tZXNzYWdlJylcbiAgICAvLyBjb25zdCBtZXNzYWdlSWQgPSBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkO1xuICAgIGNvbnN0IGFjdGlvbiA9IGJ1dHRvbi5kYXRhc2V0LmFjdGlvblxuXG4gICAgaWYgKCFDb0M3Q2hhdC5fZ2V0Q2hhdENhcmRBY3RvcihjYXJkKSkgcmV0dXJuXG5cbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAndXNlTHVjayc6IHtcbiAgICAgICAgY29uc3QgbHVja0Ftb3VudCA9IHBhcnNlSW50KGJ1dHRvbi5kYXRhc2V0Lmx1Y2tBbW91bnQpXG4gICAgICAgIGNvbnN0IG5ld1N1Y2Nlc3NMZXZlbCA9IHBhcnNlSW50KFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5uZXdTdWNjZXNzTGV2ZWxcbiAgICAgICAgKVxuXG4gICAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnbWVsZWUnKSkge1xuICAgICAgICAgIGxldCBtZWxlZUNhcmRcbiAgICAgICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldCcpKSB7XG4gICAgICAgICAgICBtZWxlZUNhcmQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbml0aWF0b3InKSkge1xuICAgICAgICAgICAgbWVsZWVDYXJkID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgICAgfVxuICAgICAgICAgIG1lbGVlQ2FyZC51cGdyYWRlUm9sbChsdWNrQW1vdW50LCBuZXdTdWNjZXNzTGV2ZWwsIGNhcmQpIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gICAgICAgIH0gZWxzZSBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JhbmdlJykpIHtcbiAgICAgICAgICBjb25zdCByYW5nZUNhcmQgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgICBjb25zdCByb2xsUmVzdWx0ID0gYnV0dG9uLmNsb3Nlc3QoJy5yb2xsLXJlc3VsdCcpXG4gICAgICAgICAgY29uc3Qgcm9sbEluZGV4ID0gcm9sbFJlc3VsdFxuICAgICAgICAgICAgPyBwYXJzZUludChyb2xsUmVzdWx0LmRhdGFzZXQuaW5kZXgpXG4gICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICBpZiAoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygncGFzcy1jaGVjaycpKSB7XG4gICAgICAgICAgICByYW5nZUNhcmQucGFzc1JvbGwocm9sbEluZGV4KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB1cGdyYWRlSW5kZXggPSBwYXJzZUludChidXR0b24uZGF0YXNldC5pbmRleClcbiAgICAgICAgICAgIHJhbmdlQ2FyZC51cGdyYWRlUm9sbChyb2xsSW5kZXgsIHVwZ3JhZGVJbmRleCkgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JvbGwtY2FyZCcpIHx8XG4gICAgICAgICAgY2FyZC5xdWVyeVNlbGVjdG9yKCcucm9sbC1yZXN1bHQnKSAhPSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgICAgaWYgKGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3Bhc3MtY2hlY2snKSkge1xuICAgICAgICAgICAgY29uc3QgbHVja0Ftb3VudCA9IHBhcnNlSW50KGJ1dHRvbi5kYXRhc2V0Lmx1Y2tBbW91bnQpXG4gICAgICAgICAgICBjaGVjay5mb3JjZVBhc3MobHVja0Ftb3VudClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdXBncmFkZUluZGV4ID0gcGFyc2VJbnQoYnV0dG9uLmRhdGFzZXQuaW5kZXgpXG4gICAgICAgICAgICBhd2FpdCBjaGVjay51cGdyYWRlQ2hlY2sodXBncmFkZUluZGV4KVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBhY3RvciA9IENvQzdDaGF0Ll9nZXRDaGF0Q2FyZEFjdG9yKGNhcmQpXG4gICAgICAgICAgY29uc3QgZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlciA9XG4gICAgICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yZXN1bHQtZGV0YWlscycpXG5cbiAgICAgICAgICBpZiAoYWN0b3Iuc3BlbmRMdWNrKGx1Y2tBbW91bnQpKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvdGFsJylcbiAgICAgICAgICAgIGNhcmQuZGF0YXNldC5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICAgICAgICAgIGNhcmQuZGF0YXNldC5wcm9jZXNzZWQgPSAnZmFsc2UnIC8vIHRyaWdnZXIgMyB1cGRhdGVzIGRlIGNhcmRcbiAgICAgICAgICAgIHN3aXRjaCAobmV3U3VjY2Vzc0xldmVsKSB7XG4gICAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICAgICAgICAgIHJlc3VsdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgICAgICAgICAgIGRldGFpbGVkUmVzdWx0UGxhY2VIb2xkZXIuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGx1Y2tBbW91bnQ6IGx1Y2tBbW91bnQsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgICAgICAgICByZXN1bHQuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgICAgICAgICAgICBkZXRhaWxlZFJlc3VsdFBsYWNlSG9sZGVyLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsdWNrQW1vdW50OiBsdWNrQW1vdW50LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XG4gICAgICAgICAgICAgICAgcmVzdWx0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICAgICAgICAgICAgZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlci5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbHVja0Ftb3VudDogbHVja0Ftb3VudCxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgICAgICAgICByZXN1bHQuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXG4gICAgICAgICAgICAgICAgZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlci5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbHVja0Ftb3VudDogbHVja0Ftb3VudCxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXN1bHQuY2xhc3NMaXN0LnJlcGxhY2UoJ2ZhaWx1cmUnLCAnc3VjY2VzcycpXG4gICAgICAgICAgICByZXN1bHQuY2xhc3NMaXN0LnJlbW92ZSgnZnVtYmxlJylcbiAgICAgICAgICAgIGNhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtYnV0dG9ucycpLnJlbW92ZSgpXG4gICAgICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvb2x0aXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgICAgICBhd2FpdCBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZChjYXJkKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yTm90RW5vdWdoTHVjaycsIHtcbiAgICAgICAgICAgICAgICBhY3RvcjogYWN0b3IubmFtZVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAncHVzaCc6IHtcbiAgICAgICAgY29uc3QgbmV3Q2FyZCA9IGNhcmQuY2xvbmVOb2RlKHRydWUpIC8vIFRPRE8gbm90IG5lY2Vzc2FyeVxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvdGFsJylcbiAgICAgICAgcmVzdWx0LmlubmVyVGV4dCA9XG4gICAgICAgICAgcmVzdWx0LmlubmVyVGV4dCArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QdXNoaW5nU2tpbGwnKVxuICAgICAgICByZXN1bHQuY2xhc3NMaXN0LnJlbW92ZSgnZmFpbHVyZScpXG4gICAgICAgIG5ld0NhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtYnV0dG9ucycpLnJlbW92ZSgpXG4gICAgICAgIG5ld0NhcmQuZGF0YXNldC5wdXNoZWRSb2xsID0gdHJ1ZVxuICAgICAgICBhd2FpdCBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZChuZXdDYXJkLCBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKVxuICAgICAgICBhd2FpdCBDb0M3Q2hlY2sucHVzaChjYXJkKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnZGVmZW5kaW5nJzoge1xuICAgICAgICBsZXQgZGVmZW5kZXJLZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5kZWZlbmRlci1hY3Rpb24tc2VsZWN0JylcbiAgICAgICAgICAuZGF0YXNldC50b2tlbklkXG4gICAgICAgIGxldCBkZWZlbmRlclxuICAgICAgICBpZiAoIWRlZmVuZGVyS2V5KSB7XG4gICAgICAgICAgZGVmZW5kZXJLZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5kZWZlbmRlci1hY3Rpb24tc2VsZWN0JylcbiAgICAgICAgICAgIC5kYXRhc2V0LmFjdG9ySWRcbiAgICAgICAgICBkZWZlbmRlciA9IGdhbWUuYWN0b3JzLmdldChkZWZlbmRlcktleSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWZlbmRlciA9IHRoaXMuZ2V0QWN0b3JGcm9tVG9rZW4oZGVmZW5kZXJLZXkpXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXNwb25zZVR5cGUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uVHlwZVxuICAgICAgICBjb25zdCBvdXRudW1iZXJlZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5vdXRudW1iZXJlZCA9PT0gJ3RydWUnXG4gICAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICAgIGNoZWNrLnJlZmVyZW5jZU1lc3NhZ2VJZCA9IG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWRcbiAgICAgICAgY2hlY2sucm9sbFR5cGUgPSAnb3Bwb3NlZCdcbiAgICAgICAgY2hlY2suc2lkZSA9ICd0YXJnZXQnXG4gICAgICAgIGNoZWNrLmFjdGlvbiA9IHJlc3BvbnNlVHlwZVxuICAgICAgICBzd2l0Y2ggKHJlc3BvbnNlVHlwZSkge1xuICAgICAgICAgIGNhc2UgJ2RvZGdpbmcnOlxuICAgICAgICAgICAgY2hlY2suYWN0b3IgPSBkZWZlbmRlclxuICAgICAgICAgICAgY2hlY2suc2tpbGwgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgICAgICAgaWYgKG91dG51bWJlcmVkKSBjaGVjay5kaWNlTW9kaWZpZXIgPSAtMVxuXG4gICAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgICAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ2ZpZ2h0QmFjayc6XG4gICAgICAgICAgICBjaGVjay5hY3RvciA9IGRlZmVuZGVyXG4gICAgICAgICAgICBjaGVjay5za2lsbCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICAgICAgICBjaGVjay5pdGVtID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0Lml0ZW1JZFxuICAgICAgICAgICAgaWYgKG91dG51bWJlcmVkKSBjaGVjay5kaWNlTW9kaWZpZXIgPSAtMVxuXG4gICAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgICAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ21hbmV1dmVyJzoge1xuICAgICAgICAgICAgY29uc3QgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0Q2hhdENhcmRBY3RvcihjYXJkKVxuICAgICAgICAgICAgaWYgKGRlZmVuZGVyLmJ1aWxkIDw9IGFjdG9yLmJ1aWxkIC0gMykge1xuICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvck1hbmV1dmVyTm90UG9zc2libGUnKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hlY2suYWN0b3IgPSBkZWZlbmRlclxuICAgICAgICAgICAgY2hlY2suc2tpbGwgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgICAgICAgaWYgKG91dG51bWJlcmVkKSBjaGVjay5kaWNlTW9kaWZpZXIgPSAtMVxuICAgICAgICAgICAgaWYgKGRlZmVuZGVyLmJ1aWxkIDwgYWN0b3IuYnVpbGQpIHtcbiAgICAgICAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyID1cbiAgICAgICAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgLSAoYWN0b3IuYnVpbGQgLSBkZWZlbmRlci5idWlsZClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNoZWNrLmRpY2VNb2RpZmllciA8IC0yKSB7XG4gICAgICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPVxuICAgICAgICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgKyBNYXRoLmFicyhjaGVjay5kaWNlTW9kaWZpZXIpIC0gMlxuICAgICAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSAtMlxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgICAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdtZWxlZS1pbml0aWF0b3Itcm9sbCc6IHtcbiAgICAgICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgaW5pdGlhdG9yLnBlcmZvcm1Ta2lsbENoZWNrKFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbFxuICAgICAgICApXG4gICAgICAgICQoYnV0dG9uKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpXG4gICAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKGNoZWNrLmRpY2Uucm9sbClcbiAgICAgICAgYXdhaXQgaW5pdGlhdG9yLnB1Ymxpc2hDaGVja1Jlc3VsdCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ21lbGVlLXRhcmdldC1uby1yZXNwb25zZSc6IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHRhcmdldC5wdWJsaXNoTm9SZXBvbnNlUmVzdWx0KClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnbWVsZWUtdGFyZ2V0LXJvbGwnOiB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IHRhcmdldC5wZXJmb3JtU2tpbGxDaGVjayhcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxcbiAgICAgICAgKVxuICAgICAgICAkKGJ1dHRvbikucHJvcCgnZGlzYWJsZWQnLCB0cnVlKVxuICAgICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChjaGVjay5kaWNlLnJvbGwpXG4gICAgICAgIGF3YWl0IHRhcmdldC5wdWJsaXNoQ2hlY2tSZXN1bHQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAncm9sbC1tZWxlZS1kYW1hZ2UnOiB7XG4gICAgICAgIGNvbnN0IGRhbWFnZUNoYXRDYXJkID0gbmV3IERhbWFnZUNhcmQoe1xuICAgICAgICAgIGNyaXRpY2FsOiBidXR0b24uZGF0YXNldC5jcml0aWNhbCA9PT0gJ3RydWUnLFxuICAgICAgICAgIGZhc3RGb3J3YXJkOiBldmVudC5zaGlmdEtleVxuICAgICAgICB9KVxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC5hY3RvcktleSA9IGJ1dHRvbi5kYXRhc2V0LmRlYWxlclxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC50YXJnZXRLZXkgPSBidXR0b24uZGF0YXNldC50YXJnZXRcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQuaXRlbUlkID0gYnV0dG9uLmRhdGFzZXQud2VhcG9uXG4gICAgICAgIGlmIChvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKSB7XG4gICAgICAgICAgZGFtYWdlQ2hhdENhcmQubWVzc2FnZUlkID0gb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgICAgICB9XG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLnVwZGF0ZUNoYXRDYXJkKClcblxuICAgICAgICAvLyBjb25zdCBkYW1hZ2VDYXJkID0gbmV3IENvQzdEYW1hZ2VSb2xsKFxuICAgICAgICAvLyAgYnV0dG9uLmRhdGFzZXQud2VhcG9uLFxuICAgICAgICAvLyAgYnV0dG9uLmRhdGFzZXQuZGVhbGVyLFxuICAgICAgICAvLyAge1xuICAgICAgICAvLyAgICB0YXJnZXRLZXk6IGJ1dHRvbi5kYXRhc2V0LnRhcmdldCxcbiAgICAgICAgLy8gICAgY3JpdGljYWw6ICd0cnVlJyA9PSBidXR0b24uZGF0YXNldC5jcml0aWNhbCxcbiAgICAgICAgLy8gICAgZmFzdEZvcndhcmQ6IGV2ZW50LnNoaWZ0S2V5XG4gICAgICAgIC8vICB9KTtcbiAgICAgICAgLy8gaWYoIG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQpIGRhbWFnZUNhcmQubWVzc2FnZUlkID0gb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZDtcbiAgICAgICAgLy8gZGFtYWdlQ2FyZC5yb2xsRGFtYWdlKCk7XG4gICAgICAgIC8vIGlmKCBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKSB7XG4gICAgICAgIC8vICBmb3IgKGNvbnN0IGIgb2YgY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FyZC1idXR0b25zJykpIHsgYi5yZW1vdmUoKSB9XG4gICAgICAgIC8vICBhd2FpdCBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZCggY2FyZCk7XG4gICAgICAgIC8vIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3JhbmdlLWluaXRpYXRvci1zaG9vdCc6IHtcbiAgICAgICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgcmFuZ2VJbml0aWF0b3IuYWRkU2hvdEF0Q3VycmVudFRhcmdldCgpXG4gICAgICAgIGF3YWl0IHJhbmdlSW5pdGlhdG9yLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3JhbmdlLWluaXRpYXRvci1yb2xsJzoge1xuICAgICAgICBjb25zdCByYW5nZUluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCByYW5nZUluaXRpYXRvci5yZXNvbHZlQ2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdyb2xsLXJhbmdlLWRhbWFnZSc6IHtcbiAgICAgICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgcmFuZ2VJbml0aWF0b3Iucm9sbERhbWFnZSgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdkZWFsLW1lbGVlLWRhbWFnZSc6IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0S2V5ID0gY2FyZC5kYXRhc2V0LnRhcmdldEtleVxuICAgICAgICBjb25zdCBhbW91bnQgPSBjYXJkLmRhdGFzZXQucmVzdWx0XG4gICAgICAgIGNvbnN0IHRhcmdldEFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgYXdhaXQgdGFyZ2V0QWN0b3IuZGVhbERhbWFnZShhbW91bnQpXG4gICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJ1dHRvbnMnKVxuICAgICAgICBjb25zdCBkaWNlVG90YWwgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvdGFsJylcbiAgICAgICAgJChkaWNlVG90YWwpLmFwcGVuZCgnPGkgY2xhc3M9XCJmYXMgZmEtY2hlY2tcIj48L2k+JylcbiAgICAgICAgaWYgKGJ1dHRvbnMpIGJ1dHRvbnMucmVtb3ZlKClcbiAgICAgICAgYXdhaXQgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQoY2FyZClcblxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWFsLXJhbmdlLWRhbWFnZSc6IHtcbiAgICAgICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgcmFuZ2VJbml0aWF0b3IuZGVhbERhbWFnZSgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3Rlc3RjaGVjayc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suZm9yY2VQYXNzKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZm9yY2UtcGFzcyc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suZm9yY2VQYXNzKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZm9yY2UtZmFpbCc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suZm9yY2VGYWlsKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnaW5jcmVhc2Utc3VjY2Vzcy1sZXZlbCc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suaW5jcmVhc2VTdWNjZXNzTGV2ZWwoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWNyZWFzZS1zdWNjZXNzLWxldmVsJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5kZWNyZWFzZVN1Y2Nlc3NMZXZlbCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JldmVhbC1jaGVjayc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgICAgIGNoZWNrLmNvbXB1dGVDaGVjaygpXG4gICAgICAgIGlmIChcbiAgICAgICAgICBldmVudC5tZXRhS2V5IHx8XG4gICAgICAgICAgZXZlbnQuY3RybEtleSB8fFxuICAgICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDkxIHx8XG4gICAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gMjI0XG4gICAgICAgICkge1xuICAgICAgICAgIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKHsgbWFrZVB1YmxpYzogdHJ1ZSB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKHsgbWFrZVB1YmxpYzogdHJ1ZSB9KVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtY2hlY2stY2FyZCc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suc3RhbmRieSA9IGZhbHNlXG4gICAgICAgIGF3YWl0IGNoZWNrLl9wZXJmb3JtKClcbiAgICAgICAgY2hlY2sudXBkYXRlQ2hhdENhcmQoeyBmb3JjZVJvbGw6IHRydWUgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZmxhZy1mb3ItZGV2ZWxvcG1lbnQnOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IGNoZWNrLmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICAgICAgICBjaGVjay5jb21wdXRlQ2hlY2soKVxuICAgICAgICBjaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3Jlc2V0LWNyZWF0dXJlLXNhbi1kYXRhJzoge1xuICAgICAgICBjb25zdCBzYW5DaGVjayA9IFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay5jbGVhclNhbkxvc3NSZWFzb24oKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtc2FuLWNoZWNrJzoge1xuICAgICAgICBjb25zdCBzYW5DaGVjayA9IFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay5yb2xsU2FuKClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdhZHZhbmNlLXN0YXRlJzoge1xuICAgICAgICBjb25zdCBzYW5DaGVjayA9IFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay5hZHZhbmNlU3RhdGUoXG4gICAgICAgICAgYnV0dG9uLmRhdGFzZXQuc3RhdGUgLyosIGJ1dHRvbi5kYXRhc2V0LnBhcmFtICovXG4gICAgICAgIClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyb2xsLXNhbi1sb3NzJzoge1xuICAgICAgICBjb25zdCBzYW5DaGVjayA9IFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay5yb2xsU2FuTG9zcygpXG4gICAgICAgIHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1pbnQtY2hlY2snOiB7XG4gICAgICAgIGNvbnN0IHNhbkNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLnJvbGxJbnQoKVxuICAgICAgICBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIC8vIGNhc2UgJ2FwcGx5LXNhbi1sb3NzJzp7XG4gICAgICAvLyAgY29uc3Qgc2FuQ2hlY2sgPSBDb0M3U2FuQ2hlY2suZ2V0RnJvbUNhcmQoIGNhcmQpO1xuICAgICAgLy8gIGF3YWl0IHNhbkNoZWNrLmFwcGx5U2FuTG9zcygpO1xuICAgICAgLy8gIHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKCk7XG4gICAgICAvLyAgYnJlYWs7XG4gICAgICAvLyB9XG5cbiAgICAgIC8vIGNhc2UgJ3JldmVhbC1zYW4tY2hlY2snOntcbiAgICAgIC8vICBjb25zdCBzYW5DaGVjayA9IENvQzdTYW5DaGVjay5nZXRGcm9tQ2FyZCggY2FyZCk7XG4gICAgICAvLyAgc2FuQ2hlY2suaXNCbGluZCA9IGZhbHNlO1xuICAgICAgLy8gIHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKCk7XG4gICAgICAvLyAgYnJlYWs7XG4gICAgICAvLyB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtY29uLWNoZWNrJzoge1xuICAgICAgICBjb25zdCBjb25DaGVjayA9IENvQzdDb25DaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBjb25DaGVjay5yb2xsQ29uKClcbiAgICAgICAgY29uQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyZXZlYWwtY29uLWNoZWNrJzoge1xuICAgICAgICBjb25zdCBjb25DaGVjayA9IENvQzdDb25DaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjb25DaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICAgICAgY29uQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgdG9nZ2xpbmcgdGhlIHZpc2liaWxpdHkgb2YgY2hhdCBjYXJkIGNvbnRlbnQgd2hlbiB0aGUgbmFtZSBpcyBjbGlja2VkXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50ICAgVGhlIG9yaWdpbmF0aW5nIGNsaWNrIGV2ZW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgX29uQ2hhdENhcmRUb2dnbGVDb250ZW50IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBoZWFkZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgY2FyZCA9IGhlYWRlci5jbG9zZXN0KCcuY2hhdC1jYXJkJylcbiAgICBjb25zdCBjb250ZW50ID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1jb250ZW50JylcbiAgICBpZiAoY29udGVudCkge1xuICAgICAgaWYgKCFjb250ZW50LnN0eWxlLmRpc3BsYXkpIHtcbiAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID1cbiAgICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPT09ICdub25lJyA/ICdibG9jaycgOiAnbm9uZSdcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIHVpICovXG5cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgQ29DN1JvbGwgfSBmcm9tICcuLi9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4uLy4uL2NoYXQuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVSZXNvbHRpb24gfSBmcm9tICcuL21lbGVlLXJlc29sdXRpb24uanMnXG5pbXBvcnQgeyBDaGF0Q2FyZEFjdG9yIH0gZnJvbSAnLi4vY2FyZC1hY3Rvci5qcydcblxuLy8gVE9ETyA6IHLDqWN1cMOpcmVyIGxlIGpldCBlbiB0YW50IHF1J29iamV0ICEhIVxuZXhwb3J0IGNsYXNzIENvQzdNZWxlZUluaXRpYXRvciBleHRlbmRzIENoYXRDYXJkQWN0b3Ige1xuICBjb25zdHJ1Y3RvciAoYWN0b3JLZXkgPSBudWxsLCBpdGVtSWQgPSBudWxsLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgc3VwZXIoYWN0b3JLZXksIGZhc3RGb3J3YXJkKVxuICAgIHRoaXMuaXRlbUlkID0gaXRlbUlkXG4gICAgdGhpcy5yZXNvbHZlZCA9IGZhbHNlXG4gICAgdGhpcy5vdXRudW1iZXJlZCA9IGZhbHNlXG4gICAgdGhpcy5zdXJwcmlzZWQgPSBmYWxzZVxuICAgIHRoaXMuYXV0b1N1Y2Nlc3MgPSBmYWxzZVxuICAgIHRoaXMuYWR2YW50YWdlID0gZmFsc2VcbiAgICB0aGlzLmRpc2FkdmFudGFnZSA9IGZhbHNlXG4gICAgdGhpcy5tZXNzYWdlSWQgPSBudWxsXG4gICAgdGhpcy50YXJnZXRDYXJkID0gbnVsbFxuICAgIHRoaXMucm9sbGVkID0gZmFsc2VcbiAgfVxuXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5odG1sJ1xuICB9XG5cbiAgYXN5bmMgcmV2ZWFsQ2hlY2sgKCkge1xuICAgIC8vIFRPRE8gOiBvbiB1dGlsaXNlIGwndXBkYXRlIGR1IG1lc3NhZ2UgYXUgbGlldSBkZSByZWNvbnN0cnVpcmUgbCdvYmpldC4gQ2hhbmdlciBjZSBjb21wb3J0ZW1lbnQuXG4gICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcblxuICAgIGF3YWl0IGNoYXRNZXNzYWdlLnNldEZsYWcoJ0NvQzcnLCAnY2hlY2tSZXZlYWxlZCcsIHRydWUpXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKGNoYXRNZXNzYWdlLCBmYWxzZSlcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUNoYXRDYXJkICgpIHtcbiAgICBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGlmICh0aGlzLnRva2VuKSBzcGVha2VyRGF0YS50b2tlbiA9IHRoaXNcbiAgICBlbHNlIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpc1xuICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHNwZWFrZXJEYXRhKVxuXG4gICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgc3BlYWtlcixcbiAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICB9XG5cbiAgICBpZiAoWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXModGhpcy5yb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICAvLyBpZiAoIHRoaXMuaXNCbGluZCApIGNoYXREYXRhWydibGluZCddID0gdHJ1ZTtcbiAgICBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXG5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcblxuICAgIHJldHVybiBjaGF0TWVzc2FnZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBodG1sIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBjb25zdCBmbGFnID0gZmxhZ05hbWUuaW5jbHVkZXMoJy0nKVxuICAgICAgPyBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWdOYW1lKVxuICAgICAgOiBmbGFnTmFtZVxuICAgIHRoaXNbZmxhZ10gPSAhdGhpc1tmbGFnXVxuICB9XG5cbiAgYXN5bmMgcGVyZm9ybVNraWxsQ2hlY2sgKHNraWxsSWQgPSBudWxsLCBwdWJsaXNoID0gZmFsc2UpIHtcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIC8vIENvbWJhdCByb2xsIGNhbm5vdCBiZSBibGluZCBvciB1bmtub3duXG4gICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgY2hlY2suaXNVbmtvbnduID0gZmFsc2VcbiAgICBjaGVjay5yZWZlcmVuY2VNZXNzYWdlSWQgPSB0aGlzLm1lc3NhZ2VJZFxuICAgIGNoZWNrLnJvbGxUeXBlID0gJ29wcG9zZWQnXG4gICAgY2hlY2suc2lkZSA9ICdpbml0aWF0b3InXG4gICAgY2hlY2suYWN0aW9uID0gJ2F0dGFjaydcbiAgICBjaGVjay5hY3RvciA9IHRoaXMuYWN0b3JLZXlcbiAgICBjaGVjay5pdGVtID0gdGhpcy5pdGVtSWRcbiAgICBjaGVjay5za2lsbCA9IHNraWxsSWRcbiAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgY2hlY2suZGljZU1vZGlmaWVyID0gMFxuXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB0aGlzLmNoZWNrUmV2ZWFsZWQgPSBmYWxzZVxuICAgIGVsc2UgdGhpcy5jaGVja1JldmVhbGVkID0gdHJ1ZVxuXG4gICAgaWYgKHRoaXMub3V0bnVtYmVyZWQpIGNoZWNrLmRpY2VNb2RpZmllciArPSAxXG4gICAgaWYgKHRoaXMuc3VycHJpc2VkKSBjaGVjay5kaWNlTW9kaWZpZXIgKz0gMVxuICAgIGlmICh0aGlzLmRpc2FkdmFudGFnZSkgY2hlY2suZGljZU1vZGlmaWVyIC09IDFcbiAgICBpZiAodGhpcy5hZHZhbnRhZ2UpIGNoZWNrLmRpY2VNb2RpZmllciArPSAxXG5cbiAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICB0aGlzLmNoZWNrID0gY2hlY2tcbiAgICB0aGlzLnJvbGxlZCA9IHRydWVcbiAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgIGlmIChwdWJsaXNoKSBjaGVjay50b01lc3NhZ2UoKVxuXG4gICAgdGhpcy5jcml0aWNhbERhbWFnZSA9XG4gICAgICBjaGVjay5zdWNjZXNzTGV2ZWwgPT09IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSB8fFxuICAgICAgY2hlY2suc3VjY2Vzc0xldmVsID09PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsXG4gICAgaWYgKHRoaXMuaGFzVGFyZ2V0ICYmICF0aGlzLmF1dG9TdWNjZXNzKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgZ2FtZS5Db0M3c29ja2V0LmV4ZWN1dGVBc0dNKCdnbWNyZWF0ZW1lc3NhZ2VhcycsIHtcbiAgICAgICAgdGFyZ2V0S2V5OiB0aGlzLnRhcmdldEtleSxcbiAgICAgICAgbWVzc2FnZUlkOiB0aGlzLm1lc3NhZ2VJZCxcbiAgICAgICAgZmFzdEZvcndhcmQ6IHRoaXMuZmFzdEZvcndhcmQsXG4gICAgICAgIGFjdG9yS2V5OiB0aGlzLmFjdG9yS2V5XG4gICAgICB9KVxuICAgICAgdGhpcy50YXJnZXRDYXJkID0gbWVzc2FnZS5pZCB8fCBtZXNzYWdlLl9pZFxuICAgIH1cblxuICAgIGlmICh0aGlzLmF1dG9TdWNjZXNzICYmICF0aGlzLmNoZWNrLmlzRnVtYmxlKSB7XG4gICAgICB0aGlzLmNoZWNrLmZvcmNlUGFzcygpXG4gICAgfVxuICAgIHJldHVybiBjaGVja1xuICB9XG5cbiAgYXN5bmMgcHVibGlzaENoZWNrUmVzdWx0IChjaGVjayA9IG51bGwpIHtcbiAgICBpZiAoIWNoZWNrICYmICF0aGlzLmNoZWNrKSByZXR1cm4gbnVsbFxuXG4gICAgaWYgKGNoZWNrKSB0aGlzLmNoZWNrID0gY2hlY2tcbiAgICB0aGlzLnJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tQ2hlY2sodGhpcy5jaGVjaylcbiAgICB0aGlzLnJvbGxlZCA9IHRydWVcblxuICAgIHRoaXMucm9sbC5yb2xsSWNvbnMgPSBbXVxuICAgIGlmICh0aGlzLnJvbGwuY3JpdGljYWwpIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnZ29sZGVucm9kJ1xuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IDQ7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdtZWRhbCcpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnJvbGwuZnVtYmxlKSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2RhcmtyZWQnXG4gICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZ1bWJsZScpXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgNDsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3NwaWRlcicpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnJvbGwuc3VjY2Vzcykge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdnb2xkZW5yb2QnXG4gICAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgfVxuICAgICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbDsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3N0YXInKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2JsYWNrJ1xuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJylcbiAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnc2t1bGwnKVxuICAgIH1cblxuICAgIGlmICghdGhpcy50YXJnZXRDYXJkICYmICF0aGlzLmF1dG9TdWNjZXNzICYmIHRoaXMuaGFzVGFyZ2V0KSB7XG4gICAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXG4gICAgICAgIHRoaXMucGFyZW50TWVzc2FnZUlkLFxuICAgICAgICB0aGlzLm1lc3NhZ2VJZFxuICAgICAgKVxuICAgICAgY29uc3QgcmVzb2x1dGlvbk1lc3NhZ2UgPSBhd2FpdCByZXNvbHV0aW9uQ2FyZC5wcmVDcmVhdGVNZXNzYWdlKClcbiAgICAgIHRoaXMucmVzb2x1dGlvbkNhcmQgPSByZXNvbHV0aW9uTWVzc2FnZS5pZFxuICAgIH1cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCwgbWVzc2FnZUlkID0gbnVsbCkge1xuICAgIGNvbnN0IGluaXRpYXRvciA9IG5ldyBDb0M3TWVsZWVJbml0aWF0b3IoKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQoaW5pdGlhdG9yLCBjYXJkKVxuICAgIGluaXRpYXRvci5yb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUNhcmQoY2FyZClcblxuICAgIGlmIChjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykpIHtcbiAgICAgIGluaXRpYXRvci5tZXNzYWdlSWQgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWRcbiAgICB9IGVsc2UgaW5pdGlhdG9yLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIHJldHVybiBpbml0aWF0b3JcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuIG51bGxcbiAgICBjb25zdCBjYXJkID0gJChtZXNzYWdlLmRhdGEuY29udGVudClbMF1cblxuICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkLCBtZXNzYWdlSWQpXG4gICAgaW5pdGlhdG9yLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuXG4gICAgcmV0dXJuIGluaXRpYXRvclxuICB9XG5cbiAgc3RhdGljIHVwZGF0ZUNhcmRTd2l0Y2ggKGV2ZW50LCBwdWJsaXNoVXBkYXRlID0gdHJ1ZSkge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5tZWxlZS5pbml0aWF0b3InKVxuICAgIGNvbnN0IGZsYWcgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZ1xuICAgIGNvbnN0IGNhbWVsRmxhZyA9IGNoYXRIZWxwZXIuaHlwaGVuVG9DYW1lbENhc2UoZmxhZylcblxuICAgIC8vIHVwZGF0ZSBvbmx5IGZvciBsb2NhbCBwbGF5ZXJcbiAgICBpZiAoIXB1Ymxpc2hVcGRhdGUpIHtcbiAgICAgIGNhcmQuZGF0YXNldFtjYW1lbEZsYWddID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ10gIT09ICd0cnVlJ1xuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdzd2l0Y2hlZC1vbicpXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2VsZWN0ZWQgPSBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyB1cGRhdGUgY2FyZCBmb3IgYWxsIHBsYXllclxuICAgICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICBpbml0aWF0b3IudG9nZ2xlRmxhZyhmbGFnKVxuICAgICAgaW5pdGlhdG9yLnVwZGF0ZUNoYXRDYXJkKClcbiAgICB9XG4gIH1cblxuICB1cGdyYWRlUm9sbCAobHVja0Ftb3VudCwgbmV3U3VjY2Vzc0xldmVsLCBvbGRDYXJkKSB7XG4gICAgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgICBpZiAoIXRoaXMuYWN0b3Iuc3BlbmRMdWNrKGx1Y2tBbW91bnQpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBgJHt0aGlzLmFjdG9yLm5hbWV9IGRpZG4ndCBoYXZlIGVub3VnaCBsdWNrIHRvIHBhc3MgdGhlIGNoZWNrYFxuICAgICAgKVxuICAgIH1cbiAgICB0aGlzLnJvbGwudmFsdWUgPSBudWxsXG4gICAgdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgIHRoaXMucm9sbC5sdWNrU3BlbnQgPSB0cnVlXG4gICAgb2xkQ2FyZC5kYXRhc2V0LnByb2Nlc3NlZCA9IGZhbHNlXG5cbiAgICBjb25zdCBkaWNlUm9sbHMgPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXJvbGwnKVxuICAgIGRpY2VSb2xscy5kYXRhc2V0LnZhbHVlID0gbnVsbFxuICAgIGRpY2VSb2xscy5kYXRhc2V0LnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgIGRpY2VSb2xscy5kYXRhc2V0Lmx1Y2tTcGVudCA9IHRydWVcblxuICAgIGNvbnN0IHJlc3VsRGV0YWlscyA9IG9sZENhcmQucXVlcnlTZWxlY3RvcignLnJlc3VsdC1kZXRhaWxzJylcbiAgICBjb25zdCBkaWNlVG90YWwgPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvdGFsJylcbiAgICBjb25zdCByb2xsRGFtYWdlQnV0dG9uID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKFxuICAgICAgJ2J1dHRvbltkYXRhLWFjdGlvbj1cInJvbGwtbWVsZWUtZGFtYWdlXCJdJ1xuICAgIClcbiAgICBpZiAocm9sbERhbWFnZUJ1dHRvbikgcm9sbERhbWFnZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdpbnZpc2libGUnKVxuXG4gICAgc3dpdGNoIChuZXdTdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50OiBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudDogbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XG4gICAgICAgIGlmIChyb2xsRGFtYWdlQnV0dG9uKSByb2xsRGFtYWdlQnV0dG9uLmRhdGFzZXQuY3JpdGljYWwgPSB0cnVlXG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQ6IGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgaWYgKHJvbGxEYW1hZ2VCdXR0b24pIHJvbGxEYW1hZ2VCdXR0b24uZGF0YXNldC5jcml0aWNhbCA9IHRydWVcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQ6IGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbERpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGRpY2VUb3RhbC5jbGFzc0xpc3QucmVwbGFjZSgnZmFpbHVyZScsICdzdWNjZXNzJylcbiAgICBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJ1dHRvbnMnKS5yZW1vdmUoKVxuICAgIG9sZENhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG9vbHRpcCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZChvbGRDYXJkKSAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICB9XG59XG4iLCIvKiBnbG9iYWwgQWN0b3IsIENPTkZJRywgQ09OU1QsIERpYWxvZywgRGllLCBkdXBsaWNhdGUsIGdhbWUsIGdldFByb3BlcnR5LCBIb29rcywgbWVyZ2VPYmplY3QsIFJvbGwsIFRleHRFZGl0b3IsIFRva2VuLCB1aSAqL1xuXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3Q29uQ2hlY2sgfSBmcm9tICcuLi9jaGF0L2NvbmNoZWNrLmpzJ1xuaW1wb3J0IHsgUm9sbERpYWxvZyB9IGZyb20gJy4uL2FwcHMvcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBTa2lsbFNlbGVjdERpYWxvZyB9IGZyb20gJy4uL2FwcHMvc2tpbGwtc2VsZWN0aW9uLWRpYWxvZy5qcydcbmltcG9ydCB7IFBvaW50U2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9wb2ludC1zZWxlY3Rpb24tZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ2hhcmFjU2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9jaGFyLXNlbGVjdGlvbi1kaWFsb2cuanMnXG5pbXBvcnQgeyBDaGFyYWNSb2xsRGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9jaGFyLXJvbGwtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgU2tpbGxTcGVjU2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9za2lsbC1zcGVjLXNlbGVjdC1kaWFsb2cuanMnXG5pbXBvcnQgeyBTa2lsbFZhbHVlRGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9za2lsbC12YWx1ZS1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVJbml0aWF0b3IgfSBmcm9tICcuLi9jaGF0L2NvbWJhdC9tZWxlZS1pbml0aWF0b3IuanMnXG5pbXBvcnQgeyBDb0M3UmFuZ2VJbml0aWF0b3IgfSBmcm9tICcuLi9jaGF0L3JhbmdlY29tYmF0LmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi9kaWNlLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtcy9pdGVtLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2UgQWN0b3IgY2xhc3MgdG8gaW1wbGVtZW50IGFkZGl0aW9uYWwgbG9naWMgc3BlY2lhbGl6ZWQgZm9yIENvQyA3dGguXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0NBY3RvciBleHRlbmRzIEFjdG9yIHtcbiAgYXN5bmMgaW5pdGlhbGl6ZSAoKSB7XG4gICAgc3VwZXIuaW5pdGlhbGl6ZSgpXG4gICAgYXdhaXQgdGhpcy5jcmVhdHVyZUluaXQoKSAvLyBUT0RPIDogbW92ZSB0aGlzIGluIENvQ0FjdG9yLmNyZWF0ZShkYXRhLCBvcHRpb25zKVxuICB9XG5cbiAgLy8gKioqKioqKioqKioqKioqKioqKioqKiBUZXN0aW5nXG4gIC8vIGFzeW5jIHVwZGF0ZShkYXRhLCBvcHRpb25zPXt9KSB7XG4gIC8vICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKCdyZXR1cm4gc3VwZXIudXBkYXRlKGRhdGEsIG9wdGlvbnMpOycpO1xuICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhgaW50IDogJHt0aGlzLmNoYXJhY3RlcmlzdGljcy5pbnR9YCk7XG4gIC8vICAgdGhpcy5jaGFyYWN0ZXJpc3RpY3MuaW50ID0gMTU7XG4gIC8vICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKGBtb2RpZmllZCBpbnQgOiAke3RoaXMuY2hhcmFjdGVyaXN0aWNzLmludH1gKTtcbiAgLy8gICByZXR1cm4gc3VwZXIudXBkYXRlKGRhdGEsIG9wdGlvbnMpO1xuICAvLyB9XG5cbiAgLy8gZ2V0IGNoYXJhY3RlcmlzdGljcygpe1xuICAvLyAgIGNvbnN0IGFjdG9yID0gdGhpcztcbiAgLy8gICAgIHJldHVybiB7XG4gIC8vICAgICAgIGdldCBpbnQoKXtcbiAgLy8gICAgICAgICByZXR1cm4gYWN0b3IuZ2V0UHJvcCgnX2ludCcpO1xuICAvLyAgICAgICB9LFxuXG4gIC8vICAgICAgIHNldCBpbnQoeCl7XG4gIC8vICAgICAgICAgYWN0b3Iuc2V0UHJvcCgnX2ludCcsIHgpO1xuICAvLyAgICAgICB9XG4gIC8vICAgIH07XG4gIC8vIH1cblxuICAvLyBzZXRQcm9wKGtleSwgeCl7XG4gIC8vICAgdGhpc1trZXldID0geDtcbiAgLy8gfVxuXG4gIC8vIGdldFByb3Aoa2V5KXtcbiAgLy8gICByZXR1cm4gdGhpc1trZXldfHwwO1xuICAvLyB9XG4gIC8vXG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhLCBvcHRpb25zID0ge30pIHtcbiAgICBkYXRhLnRva2VuID0gZGF0YS50b2tlbiB8fCB7fVxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICBtZXJnZU9iamVjdChcbiAgICAgICAgZGF0YS50b2tlbixcbiAgICAgICAge1xuICAgICAgICAgIHZpc2lvbjogdHJ1ZSxcbiAgICAgICAgICBkaW1TaWdodDogMzAsXG4gICAgICAgICAgYnJpZ2h0U2lnaHQ6IDAsXG4gICAgICAgICAgYWN0b3JMaW5rOiB0cnVlLFxuICAgICAgICAgIGRpc3Bvc2l0aW9uOiAxXG4gICAgICAgIH0sXG4gICAgICAgIHsgb3ZlcndyaXRlOiBmYWxzZSB9XG4gICAgICApXG4gICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICd2ZWhpY2xlJykge1xuICAgICAgZGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9qZWVwLnN2ZydcbiAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2NvbnRhaW5lcicpIHtcbiAgICAgIGRhdGEuaW1nID0gJ2ljb25zL3N2Zy9jaGVzdC5zdmcnXG4gICAgICBtZXJnZU9iamVjdChkYXRhLnRva2VuLCB7XG4gICAgICAgIGFjdG9yTGluazogdHJ1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLmNyZWF0ZShkYXRhLCBvcHRpb25zKVxuICB9XG5cbiAgLyoqXG4gICAqIEVhcmx5IHZlcnNpb24gb24gdGVtcGxhdGVzIGRpZCBub3QgaW5jbHVkZSBwb3NzaWJpbGl0eSBvZiBhdXRvIGNhbGNcbiAgICogSnVzdCBjaGVjayBpZiBhdXRvIGlzIHVuZGVmaW5lZCwgaW4gd2hpY2ggY2FzZSBpdCB3aWxsIGJlIHNldCB0byB0cnVlXG4gICAqL1xuICBjaGVja1VuZGVmaW5lZEF1dG8gKCkge1xuICAgIGNvbnN0IHJldHVybkRhdGEgPSB7XG4gICAgICBhdHRyaWJzOiB7XG4gICAgICAgIGhwOiB7fSxcbiAgICAgICAgbXA6IHt9LFxuICAgICAgICBzYW46IHt9LFxuICAgICAgICBtb3Y6IHt9LFxuICAgICAgICBkYjoge30sXG4gICAgICAgIGJ1aWxkOiB7fVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuYXR0cmlicz8uaHA/LmF1dG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuRGF0YS5hdHRyaWJzLmhwLmF1dG8gPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzPy5tcD8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMubXAuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmF0dHJpYnM/LnNhbj8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMuc2FuLmF1dG8gPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzPy5tb3Y/LmF1dG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuRGF0YS5hdHRyaWJzLm1vdi5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuYXR0cmlicz8uZGI/LmF1dG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuRGF0YS5hdHRyaWJzLmRiLmF1dG8gPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzPy5idWlsZD8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMuYnVpbGQuYXV0byA9IHRydWVcbiAgICB9XG5cbiAgICByZXR1cm4gcmV0dXJuRGF0YVxuICB9XG5cbiAgZ2V0IGNoYXJhY3RlcmlzdGljcyAoKSB7XG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWNzID0ge1xuICAgICAgc3RyOiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuU1RSJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuU3RyZW5ndGgnLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgY29uOiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuQ09OJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuQ29uc3RpdHV0aW9uJyxcbiAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgfSxcbiAgICAgIHNpejoge1xuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgc2hvcnROYW1lOiAnQ0hBUkFDLlNJWicsXG4gICAgICAgIGxhYmVsOiAnQ0hBUkFDLlNpemUnLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgZGV4OiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuREVYJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuRGV4dGVyaXR5JyxcbiAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgfSxcbiAgICAgIGFwcDoge1xuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgc2hvcnROYW1lOiAnQ0hBUkFDLkFQUCcsXG4gICAgICAgIGxhYmVsOiAnQ0hBUkFDLkFwcGVhcmFuY2UnLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgaW50OiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuSU5UJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuSW50ZWxsaWdlbmNlJyxcbiAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgfSxcbiAgICAgIHBvdzoge1xuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgc2hvcnROYW1lOiAnQ0hBUkFDLlBPVycsXG4gICAgICAgIGxhYmVsOiAnQ0hBUkFDLlBvd2VyJyxcbiAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgfSxcbiAgICAgIGVkdToge1xuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgc2hvcnROYW1lOiAnQ0hBUkFDLkVEVScsXG4gICAgICAgIGxhYmVsOiAnQ0hBUkFDLkVkdWNhdGlvbicsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcykge1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljc1xuICAgICAgKSkge1xuICAgICAgICBjaGFyYWN0ZXJpc3RpY3Nba2V5XSA9IHtcbiAgICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgICBzaG9ydE5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5sYWJlbCksXG4gICAgICAgICAgdmFsdWU6IHZhbHVlLnZhbHVlLFxuICAgICAgICAgIGhhcmQ6IE1hdGguZmxvb3IodmFsdWUudmFsdWUgLyAyKSB8fCBudWxsLFxuICAgICAgICAgIGV4dHJlbWU6IE1hdGguZmxvb3IodmFsdWUudmFsdWUgLyA1KSB8fCBudWxsLFxuICAgICAgICAgIGZvcm11bGE6IHZhbHVlLmZvcm11bGFcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2hhcmFjdGVyaXN0aWNzXG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHVwb24gdG9rZW4gY3JlYXRpb24gZnJvbSBwcmVDcmVhdGVBY3RvciBob29rXG4gICAqIEBwYXJhbSB7Kn0gY3JlYXRlRGF0YVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGluaXRUb2tlbiAoY3JlYXRlRGF0YSkge1xuICAgIC8vIGNhbGxlZCB1cG9uIHRva2VuIGNyZWF0aW9uLmFjdGl2ZVxuICAgIGlmIChjcmVhdGVEYXRhKSB7XG4gICAgICAvL1xuICAgIH1cbiAgfVxuXG4gIGdldCBoYXNUZW1wb0luc2FuZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lKVxuICB9XG5cbiAgZ2V0IGdldFRlbXBvSW5zYW5lRHVyYXRpb25UZXh0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25WYWx1ZShDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSwgJ2R1cmF0aW9uVGV4dCcpXG4gIH1cblxuICBnZXQgaGFzSW5kZWZJbnNhbmUgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5pbmRlZkluc2FuZSlcbiAgfVxuXG4gIGdldCBwb3J0cmFpdCAoKSB7XG4gICAgaWYgKCFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VUb2tlbicpKSByZXR1cm4gdGhpcy5pbWdcbiAgICBpZiAodGhpcy5pc1Rva2VuKSB7XG4gICAgICByZXR1cm4gdGhpcy50b2tlbj8uZGF0YT8uaW1nIHx8IHRoaXMuaW1nXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmRhdGEudG9rZW4/LmltZyB8fCB0aGlzLmltZ1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGVudGVyQm91dE9mTWFkbmVzcyAocmVhbFRpbWUgPSB0cnVlLCBkdXJhdGlvbiA9IDEpIHtcbiAgICAvLyBjb25zdCBkdXJhdGlvbiA9IHtyb3VuZHM6IDEsXG4gICAgLy8gICBzZWNvbmRzOiAxNyxcbiAgICAvLyAgIHN0YXJ0Um91bmQ6IDMsXG4gICAgLy8gICBzdGFydFRpbWU6IDU4LFxuICAgIC8vICAgc3RhcnRUdXJuOiA0LFxuICAgIC8vICAgdHVybnM6IDJ9O1xuICAgIC8vIGF3YWl0IHRoaXMuYm91dE9mTWFkbmVzcz8uc2V0RmxhZyggJ0NvQzcnLCAnbWFkbmVzcycsIHRydWUpO1xuXG4gICAgbGV0IHJlc3VsdCA9IG51bGxcbiAgICBjb25zdCBib3V0T2ZNYWRuZXNzVGFibGVJZCA9IHJlYWxUaW1lXG4gICAgICA/IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NSZWFsVGltZVRhYmxlJylcbiAgICAgIDogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZScpXG4gICAgaWYgKGJvdXRPZk1hZG5lc3NUYWJsZUlkICE9PSAnbm9uZScpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgcGhvYmlhOiBmYWxzZSxcbiAgICAgICAgbWFuaWE6IGZhbHNlLFxuICAgICAgICBkZXNjcmlwdGlvbjogbnVsbFxuICAgICAgfVxuICAgICAgY29uc3QgYm91dE9mTWFkbmVzc1RhYmxlID0gZ2FtZS50YWJsZXMuZ2V0KGJvdXRPZk1hZG5lc3NUYWJsZUlkKVxuICAgICAgcmVzdWx0LnRhYmxlUm9sbCA9IGF3YWl0IGJvdXRPZk1hZG5lc3NUYWJsZS5yb2xsKClcbiAgICAgIGlmICh0eXBlb2YgcmVzdWx0LnRhYmxlUm9sbC5yZXN1bHRzWzBdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgQ09OU1QuVEFCTEVfUkVTVUxUX1RZUEVTLkRPQ1VNRU5UID09PVxuICAgICAgICAgIHJlc3VsdC50YWJsZVJvbGwucmVzdWx0c1swXS5kYXRhLnR5cGVcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHJlc3VsdC50YWJsZVJvbGwucmVzdWx0c1swXS5kYXRhLnJlc3VsdElkKVxuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLmRhdGE/LmRhdGE/LnR5cGU/LnBob2JpYSkgcmVzdWx0LnBob2JpYSA9IHRydWVcbiAgICAgICAgICAgIGlmIChpdGVtLmRhdGE/LmRhdGE/LnR5cGU/Lm1hbmlhKSByZXN1bHQubWFuaWEgPSB0cnVlXG4gICAgICAgICAgICByZXN1bHQuZGVzY3JpcHRpb24gPSBgJHtpdGVtLm5hbWV9OiR7VGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgICBpdGVtLmRhdGEuZGF0YS5kZXNjcmlwdGlvbi52YWx1ZVxuICAgICAgICAgICAgKX1gXG4gICAgICAgICAgICByZXN1bHQubmFtZSA9IGl0ZW0ubmFtZVxuICAgICAgICAgICAgZGVsZXRlIGl0ZW0uZGF0YS5faWRcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbaXRlbS5kYXRhXSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VCb3V0T2ZNYWRuZXNzSXRlbU5vdEZvdW5kJylcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIENPTlNULlRBQkxFX1JFU1VMVF9UWVBFUy5URVhUID09PVxuICAgICAgICAgIHJlc3VsdC50YWJsZVJvbGwucmVzdWx0c1swXS5kYXRhLnR5cGVcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmVzdWx0LmRlc2NyaXB0aW9uID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgcmVzdWx0LnRhYmxlUm9sbC5yZXN1bHRzWzBdLmRhdGEudGV4dFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZUJvdXRPZk1hZG5lc3NUYWJsZU5vdEZvdW5kJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIGl0J3Mgbm90IGEgcmVhbCB0aW1lIG5vIG5lZWQgdG8gYWN0aXZhdGUgdGhlIGJvdXRcbiAgICBpZiAoIXJlYWxUaW1lKSByZXR1cm4gcmVzdWx0XG5cbiAgICB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSwge1xuICAgICAgcmVhbFRpbWU6IHJlYWxUaW1lLFxuICAgICAgZHVyYXRpb246IGR1cmF0aW9uXG4gICAgfSlcblxuICAgIC8vIGNvbnN0IGVmZmVjdCA9IHRoaXMuZWZmZWN0cy5nZXQoIGVmZmVjdERhdGEuX2lkKTtcbiAgICAvLyBlZmZlY3Quc2hlZXQucmVuZGVyKHRydWUpO1xuXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB1cG9uIG5ldyBhY3RvciBjcmVhdGlvbi5cbiAgICogQHBhcmFtIHsqfSBkYXRhXG4gICAqIEBwYXJhbSB7Kn0gb3B0aW9uc1xuICAgKi9cbiAgLy8gc3RhdGljIGFzeW5jIGNyZWF0ZShkYXRhLCBvcHRpb25zKSB7XG4gIC8vICAvLyBJZiB0aGUgY3JlYXRlZCBhY3RvciBoYXMgaXRlbXMgKG9ubHkgYXBwbGljYWJsZSB0byBkdXBsaWNhdGVkIGFjdG9ycykgYnlwYXNzIHRoZSBuZXcgYWN0b3IgY3JlYXRpb24gbG9naWNcbiAgLy8gIGlmIChkYXRhLml0ZW1zKSB7XG4gIC8vICAgIHJldHVybiBzdXBlci5jcmVhdGUoZGF0YSwgb3B0aW9ucyk7XG4gIC8vICB9XG4gIC8vICByZXR1cm4gc3VwZXIuY3JlYXRlKGRhdGEsIG9wdGlvbnMpO1xuICAvLyB9XG5cbiAgc3RhdGljIGVtcHR5U2tpbGwgKFxuICAgIHNraWxsTmFtZSxcbiAgICB2YWx1ZSxcbiAgICB7XG4gICAgICByYXJpdHkgPSBmYWxzZSxcbiAgICAgIHB1c2ggPSB0cnVlLFxuICAgICAgY29tYmF0ID0gZmFsc2UsXG4gICAgICBpbWcgPSBmYWxzZSxcbiAgICAgIHNwZWNpYWxpemF0aW9uID0gZmFsc2VcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IHNraWxsTmFtZSxcbiAgICAgIHR5cGU6ICdza2lsbCcsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgc2tpbGxOYW1lOiBza2lsbE5hbWUsXG4gICAgICAgIHNwZWNpYWxpemF0aW9uOiAnJyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIHNwZWNpYWw6IGZhbHNlLFxuICAgICAgICAgIHJhcml0eTogcmFyaXR5LFxuICAgICAgICAgIHB1c2g6IHB1c2gsXG4gICAgICAgICAgY29tYmF0OiBjb21iYXRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW1nICE9PSBmYWxzZSkge1xuICAgICAgZGF0YS5pbWcgPSBpbWdcbiAgICB9XG4gICAgaWYgKHNwZWNpYWxpemF0aW9uICE9PSBmYWxzZSkge1xuICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKHNraWxsTmFtZSwgc3BlY2lhbGl6YXRpb24pXG4gICAgICBkYXRhLmRhdGEuc3BlY2lhbGl6YXRpb24gPSBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgZGF0YS5kYXRhLnNraWxsTmFtZSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgZGF0YS5uYW1lID0gcGFydHMubmFtZVxuICAgICAgZGF0YS5kYXRhLnByb3BlcnRpZXMuc3BlY2lhbCA9IHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXN5bmMgY3JlYXRlU2tpbGwgKHNraWxsTmFtZSwgdmFsdWUsIHNob3dTaGVldCA9IGZhbHNlKSB7XG4gICAgY29uc3QgZGF0YSA9IENvQ0FjdG9yLmVtcHR5U2tpbGwoc2tpbGxOYW1lLCB2YWx1ZSlcbiAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgcmVuZGVyU2hlZXQ6IHNob3dTaGVldFxuICAgIH0pXG4gICAgcmV0dXJuIGNyZWF0ZWRcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZVdlYXBvblNraWxsIChuYW1lLCBmaXJlYXJtcyA9IGZhbHNlLCBiYXNlID0gbnVsbCkge1xuICAgIC8vIFRPRE8gOiBBc2sgZm9yIGJhc2UgdmFsdWUgaWYgbnVsbFxuXG4gICAgY29uc3Qgc2tpbGxEYXRhID0gYXdhaXQgU2tpbGxTcGVjU2VsZWN0RGlhbG9nLmNyZWF0ZShcbiAgICAgIFtdLFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICBmaXJlYXJtc1xuICAgICAgICAgID8gJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICA6ICdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgKSxcbiAgICAgIDAsXG4gICAgICBuYW1lXG4gICAgKVxuICAgIGNvbnN0IHZhbHVlID0gTnVtYmVyKHNraWxsRGF0YS5nZXQoJ2Jhc2UtdmFsdWUnKSlcbiAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICBuYW1lLFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICBmaXJlYXJtc1xuICAgICAgICAgID8gJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICA6ICdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgKVxuICAgIClcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbmFtZTogcGFydHMubmFtZSxcbiAgICAgIHR5cGU6ICdza2lsbCcsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGJhc2U6IGlzTmFOKHZhbHVlKSA/IDAgOiB2YWx1ZSxcbiAgICAgICAgYWRqdXN0bWVudHM6IHtcbiAgICAgICAgICBwZXJzb25hbDogbnVsbCxcbiAgICAgICAgICBvY2N1cGF0aW9uOiBudWxsLFxuICAgICAgICAgIGFyY2hldHlwZTogbnVsbCxcbiAgICAgICAgICBleHBlcmllbmNlOiBudWxsXG4gICAgICAgIH0sXG4gICAgICAgIHNraWxsTmFtZTogcGFydHMuc2tpbGxOYW1lLFxuICAgICAgICBzcGVjaWFsaXphdGlvbjogcGFydHMuc3BlY2lhbGl6YXRpb24sXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBzcGVjaWFsOiB0cnVlLFxuICAgICAgICAgIGZpZ2h0aW5nOiAhZmlyZWFybXMsXG4gICAgICAgICAgZmlyZWFybTogZmlyZWFybXMsXG4gICAgICAgICAgY29tYmF0OiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgcmVuZGVyU2hlZXQ6ICFiYXNlXG4gICAgfSlcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKG5hbWUpXG4gICAgcmV0dXJuIHNraWxsWzBdXG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBhIGNyZWF0dXJlIHdpdGggbWluaW11bXMgc2tpbGxzXG4gICAqL1xuICBhc3luYyBjcmVhdHVyZUluaXQgKCkge1xuICAgIGlmICh0aGlzLmRhdGEudHlwZSAhPT0gJ2NyZWF0dXJlJykgcmV0dXJuXG4gICAgaWYgKHRoaXMuZ2V0QWN0b3JGbGFnKCdpbml0aWFsaXplZCcpKSByZXR1cm4gLy8gQ2hhbmdlIHRvIHJldHVybiBza2lsbCA/XG5cbiAgICAvLyBDaGVjayBpZiBmaWdodGluZyBza2lsbHMgZXhpc3RzLCBpZiBub3QgY3JlYXRlIGl0IGFuZCB0aGUgYXNzb2NpYXRlZCBhdHRhY2suXG4gICAgY29uc3Qgc2tpbGxzID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5jcmVhdHVyZUZpZ2h0aW5nU2tpbGwpXG4gICAgKVxuICAgIGlmIChza2lsbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBDcmVhdGluZyBuYXR1cmFsIGF0dGFjayBza2lsbFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3LmNyZWF0dXJlRmlnaHRpbmdTa2lsbCksXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUpXG4gICAgICAgIClcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiAnc2tpbGwnLFxuICAgICAgICAgIG5hbWU6IHBhcnRzLm5hbWUsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgYmFzZTogMCxcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2tpbGxOYW1lOiBwYXJ0cy5za2lsbE5hbWUsXG4gICAgICAgICAgICBzcGVjaWFsaXphdGlvbjogcGFydHMuc3BlY2lhbGl6YXRpb24sXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGNvbWJhdDogdHJ1ZSxcbiAgICAgICAgICAgICAgZmlnaHRpbmc6IHRydWUsXG4gICAgICAgICAgICAgIHNwZWNpYWw6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmbGFnczoge31cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2tpbGwgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgYXR0YWNrID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cyhcbiAgICAgICAgICAnSXRlbScsXG4gICAgICAgICAgW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBuYW1lOiAnSW5uYXRlIGF0dGFjaycsXG4gICAgICAgICAgICAgIHR5cGU6ICd3ZWFwb24nLFxuICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHtcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkNyZWF0dXJlJ3MgbmF0dXJhbCBhdHRhY2tcIixcbiAgICAgICAgICAgICAgICAgIGNoYXQ6IFwiQ3JlYXR1cmUncyBuYXR1cmFsIGF0dGFja1wiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB3cG5UeXBlOiAnaW5uYXRlJyxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICBhZGRiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgc2xudDogdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0sXG4gICAgICAgICAgeyByZW5kZXJTaGVldDogZmFsc2UgfVxuICAgICAgICApXG4gICAgICAgIGlmIChza2lsbC5sZW5ndGggPiAwICYmIGF0dGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgY3JlYXRlZEF0dGFjayA9IHRoaXMuaXRlbXMuZ2V0KGF0dGFja1swXS5pZClcbiAgICAgICAgICBhd2FpdCBjcmVhdGVkQXR0YWNrLnVwZGF0ZSh7XG4gICAgICAgICAgICAnZGF0YS5za2lsbC5tYWluLmlkJzogc2tpbGxbMF0uaWQsXG4gICAgICAgICAgICAnZGF0YS5za2lsbC5tYWluLm5hbWUnOiBza2lsbFswXS5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NyZWF0dXJlIGluaXQ6ICcgKyBlcnIubWVzc2FnZSlcbiAgICAgIH1cbiAgICAgIC8vIGNvbnNvbGUubG9nKCAnU2tpbGwgY3JlYXRlZCcpO1xuICAgICAgYXdhaXQgdGhpcy5zZXRBY3RvckZsYWcoJ2luaXRpYWxpemVkJylcbiAgICAgIC8vIENyZWF0aW5nIGNvcnJlc3BvbmRpbmcgd2VhcG9uLlxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUl0ZW0gKGl0ZW1OYW1lLCBxdWFudGl0eSA9IDEsIHNob3dTaGVldCA9IGZhbHNlKSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IGl0ZW1OYW1lLFxuICAgICAgdHlwZTogJ2l0ZW0nLFxuICAgICAgZGF0YToge1xuICAgICAgICBxdWFudGl0eTogcXVhbnRpdHlcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgY3JlYXRlZCA9IGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YV0sIHtcbiAgICAgIHJlbmRlclNoZWV0OiBzaG93U2hlZXRcbiAgICB9KVxuICAgIHJldHVybiBjcmVhdGVkXG4gIH1cblxuICBhc3luYyBjcmVhdGVFbXB0eUJvb2sgKGV2ZW50ID0gbnVsbCkge1xuICAgIGNvbnN0IHNob3dTaGVldCA9IGV2ZW50ID8gIWV2ZW50LnNoaWZ0S2V5IDogdHJ1ZVxuICAgIGlmICghdGhpcy5nZXRJdGVtSWRCeU5hbWUoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3Qm9va05hbWUpKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlQm9vayhnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdCb29rTmFtZSksIHNob3dTaGVldClcbiAgICB9XG4gICAgbGV0IGluZGV4ID0gMFxuICAgIGxldCBpdGVtTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0Jvb2tOYW1lKSArICcgJyArIGluZGV4XG4gICAgd2hpbGUgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKGl0ZW1OYW1lKSkge1xuICAgICAgaW5kZXgrK1xuICAgICAgaXRlbU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdCb29rTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jcmVhdGVCb29rKGl0ZW1OYW1lLCBzaG93U2hlZXQpXG4gIH1cblxuICBhc3luYyBjcmVhdGVCb29rIChpdGVtTmFtZSwgc2hvd1NoZWV0ID0gZmFsc2UpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbmFtZTogaXRlbU5hbWUsXG4gICAgICB0eXBlOiAnYm9vaycsXG4gICAgICBkYXRhOiB7fVxuICAgIH1cbiAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgcmVuZGVyU2hlZXQ6IHNob3dTaGVldFxuICAgIH0pXG4gICAgcmV0dXJuIGNyZWF0ZWRcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUVtcHR5U3BlbGwgKGV2ZW50ID0gbnVsbCkge1xuICAgIGNvbnN0IHNob3dTaGVldCA9IGV2ZW50ID8gIWV2ZW50LnNoaWZ0S2V5IDogdHJ1ZVxuICAgIGlmICghdGhpcy5nZXRJdGVtSWRCeU5hbWUoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U3BlbGxOYW1lKSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVNwZWxsKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NwZWxsTmFtZSksIHNob3dTaGVldClcbiAgICB9XG4gICAgbGV0IGluZGV4ID0gMFxuICAgIGxldCBpdGVtTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NwZWxsTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIHdoaWxlICh0aGlzLmdldEl0ZW1JZEJ5TmFtZShpdGVtTmFtZSkpIHtcbiAgICAgIGluZGV4KytcbiAgICAgIGl0ZW1OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U3BlbGxOYW1lKSArICcgJyArIGluZGV4XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNyZWF0ZVNwZWxsKGl0ZW1OYW1lLCBzaG93U2hlZXQpXG4gIH1cblxuICBzdGF0aWMgZW1wdHlTcGVsbCAoaXRlbU5hbWUpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbmFtZTogaXRlbU5hbWUsXG4gICAgICB0eXBlOiAnc3BlbGwnLFxuICAgICAgZGF0YToge31cbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZVNwZWxsIChpdGVtTmFtZSwgc2hvd1NoZWV0ID0gZmFsc2UpIHtcbiAgICBjb25zdCBkYXRhID0gQ29DQWN0b3IuZW1wdHlTcGVsbChpdGVtTmFtZSlcbiAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgcmVuZGVyU2hlZXQ6IHNob3dTaGVldFxuICAgIH0pXG4gICAgcmV0dXJuIGNyZWF0ZWRcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUVtcHR5U2tpbGwgKGV2ZW50ID0gbnVsbCkge1xuICAgIGNvbnN0IHNob3dTaGVldCA9IGV2ZW50ID8gIWV2ZW50LnNoaWZ0S2V5IDogdHJ1ZVxuICAgIGlmICghdGhpcy5nZXRJdGVtSWRCeU5hbWUoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U2tpbGxOYW1lKSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVNraWxsKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTa2lsbE5hbWUpLFxuICAgICAgICBudWxsLFxuICAgICAgICBzaG93U2hlZXRcbiAgICAgIClcbiAgICB9XG4gICAgbGV0IGluZGV4ID0gMFxuICAgIGxldCBza2lsbE5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTa2lsbE5hbWUpICsgJyAnICsgaW5kZXhcbiAgICB3aGlsZSAodGhpcy5nZXRJdGVtSWRCeU5hbWUoc2tpbGxOYW1lKSkge1xuICAgICAgaW5kZXgrK1xuICAgICAgc2tpbGxOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U2tpbGxOYW1lKSArICcgJyArIGluZGV4XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlU2tpbGwoc2tpbGxOYW1lLCBudWxsLCBzaG93U2hlZXQpXG4gIH1cblxuICBhc3luYyBjcmVhdGVFbXB0eUl0ZW0gKGV2ZW50ID0gbnVsbCkge1xuICAgIGNvbnN0IHNob3dTaGVldCA9IGV2ZW50ID8gIWV2ZW50LnNoaWZ0S2V5IDogdHJ1ZVxuICAgIGlmICghdGhpcy5nZXRJdGVtSWRCeU5hbWUoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3SXRlbU5hbWUpKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlSXRlbShnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdJdGVtTmFtZSksIDEsIHNob3dTaGVldClcbiAgICB9XG4gICAgbGV0IGluZGV4ID0gMFxuICAgIGxldCBpdGVtTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0l0ZW1OYW1lKSArICcgJyArIGluZGV4XG4gICAgd2hpbGUgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKGl0ZW1OYW1lKSkge1xuICAgICAgaW5kZXgrK1xuICAgICAgaXRlbU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdJdGVtTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jcmVhdGVJdGVtKGl0ZW1OYW1lLCAxLCBzaG93U2hlZXQpXG4gIH1cblxuICBhc3luYyBjcmVhdGVFbXB0eVdlYXBvbiAoZXZlbnQgPSBudWxsLCBwcm9wZXJ0aWVzID0ge30pIHtcbiAgICBjb25zdCBzaG93U2hlZXQgPSBldmVudCA/ICFldmVudC5zaGlmdEtleSA6IHRydWVcbiAgICBsZXQgd2VhcG9uTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1dlYXBvbk5hbWUpXG4gICAgaWYgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1dlYXBvbk5hbWUpKSkge1xuICAgICAgbGV0IGluZGV4ID0gMFxuICAgICAgd2VhcG9uTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1dlYXBvbk5hbWUpICsgJyAnICsgaW5kZXhcbiAgICAgIHdoaWxlICh0aGlzLmdldEl0ZW1JZEJ5TmFtZSh3ZWFwb25OYW1lKSkge1xuICAgICAgICBpbmRleCsrXG4gICAgICAgIHdlYXBvbk5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdXZWFwb25OYW1lKSArICcgJyArIGluZGV4XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IHdlYXBvbk5hbWUsXG4gICAgICB0eXBlOiAnd2VhcG9uJyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgcHJvcGVydGllczoge31cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IFtrZXldIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcbiAgICAgIGRhdGEuZGF0YS5wcm9wZXJ0aWVzW2tleV0gPVxuICAgICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocHJvcGVydGllcywga2V5KSA/PyBmYWxzZVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YV0sIHtcbiAgICAgIHJlbmRlclNoZWV0OiBzaG93U2hlZXRcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlQmlvU2VjdGlvbiAodGl0bGUgPSBudWxsKSB7XG4gICAgY29uc3QgYmlvID0gdGhpcy5kYXRhLmRhdGEuYmlvZ3JhcGh5XG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLmRhdGEuZGF0YS5iaW9ncmFwaHkpXG4gICAgICA6IFtdXG4gICAgYmlvLnB1c2goe1xuICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgdmFsdWU6IG51bGxcbiAgICB9KVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuYmlvZ3JhcGh5JzogYmlvIH0pXG4gIH1cblxuICBhc3luYyB1cGRhdGVCaW9WYWx1ZSAoaW5kZXgsIGNvbnRlbnQpIHtcbiAgICBjb25zdCBiaW8gPSBkdXBsaWNhdGUodGhpcy5kYXRhLmRhdGEuYmlvZ3JhcGh5KVxuICAgIGJpb1tpbmRleF0udmFsdWUgPSBjb250ZW50XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5iaW9ncmFwaHknOiBiaW8gfSwgeyByZW5kZXI6IGZhbHNlIH0pXG4gIH1cblxuICBhc3luYyB1cGRhdGVCaW9UaXRsZSAoaW5kZXgsIHRpdGxlKSB7XG4gICAgY29uc3QgYmlvID0gZHVwbGljYXRlKHRoaXMuZGF0YS5kYXRhLmJpb2dyYXBoeSlcbiAgICBiaW9baW5kZXhdLnRpdGxlID0gdGl0bGVcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmJpb2dyYXBoeSc6IGJpbyB9KVxuICB9XG5cbiAgYXN5bmMgZGVsZXRlQmlvU2VjdGlvbiAoaW5kZXgpIHtcbiAgICBjb25zdCBiaW8gPSBkdXBsaWNhdGUodGhpcy5kYXRhLmRhdGEuYmlvZ3JhcGh5KVxuICAgIGJpby5zcGxpY2UoaW5kZXgsIDEpXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5iaW9ncmFwaHknOiBiaW8gfSlcbiAgfVxuXG4gIGFzeW5jIG1vdmVCaW9TZWN0aW9uVXAgKGluZGV4KSB7XG4gICAgaWYgKGluZGV4ID09PSAwKSByZXR1cm5cbiAgICBjb25zdCBiaW8gPSBkdXBsaWNhdGUodGhpcy5kYXRhLmRhdGEuYmlvZ3JhcGh5KVxuICAgIGlmIChpbmRleCA+PSBiaW8ubGVuZ3RoKSByZXR1cm5cbiAgICBjb25zdCBlbGVtID0gYmlvLnNwbGljZShpbmRleCwgMSlbMF1cbiAgICBiaW8uc3BsaWNlKGluZGV4IC0gMSwgMCwgZWxlbSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmJpb2dyYXBoeSc6IGJpbyB9KVxuICB9XG5cbiAgYXN5bmMgbW92ZUJpb1NlY3Rpb25Eb3duIChpbmRleCkge1xuICAgIGNvbnN0IGJpbyA9IGR1cGxpY2F0ZSh0aGlzLmRhdGEuZGF0YS5iaW9ncmFwaHkpXG4gICAgaWYgKGluZGV4ID49IGJpby5sZW5ndGggLSAxKSByZXR1cm5cbiAgICBjb25zdCBlbGVtID0gYmlvLnNwbGljZShpbmRleCwgMSlbMF1cbiAgICBiaW8uc3BsaWNlKGluZGV4ICsgMSwgMCwgZWxlbSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmJpb2dyYXBoeSc6IGJpbyB9KVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlVGV4dEFyZWEgKHRleHRBcmVhKSB7XG4gICAgY29uc3QgbmFtZSA9ICdkYXRhLicgKyB0ZXh0QXJlYS5kYXRhc2V0LmFyZWFOYW1lXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbbmFtZV06IHRleHRBcmVhLnZhbHVlIH0pXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGl0ZW0gZm9yIHRoYXQgYWN0b3IuXG4gICAqIElmIGl0J3MgYSBza2lsbCBmaXJzdCBjaGVjayBpZiB0aGUgc2tpbGwgaXMgYWxyZWFkeSBvd25lZC4gSWYgaXQgaXMgZG9uJ3QgY3JlYXRlIGEgc2Vjb25kIHRpbWUuXG4gICAqIEZpbGwgdGhlIHZhbHVlIG9mIHRoZSBza2lsbCB3aXRoIGJhc2Ugb3IgdHJ5IHRvIGV2YWx1YXRlIHRoZSBmb3JtdWxhLlxuICAgKiBAcGFyYW0geyp9IGVtYmVkZGVkTmFtZVxuICAgKiBAcGFyYW0geyp9IGRhdGFcbiAgICogQHBhcmFtIHsqfSBvcHRpb25zXG4gICAqL1xuICBhc3luYyBjcmVhdGVFbWJlZGRlZERvY3VtZW50cyAoZW1iZWRkZWROYW1lLCBkYXRhQXJyYXksIG9wdGlvbnMpIHtcbiAgICBjb25zdCBwcm9jZXNzZWREYXRhQXJyYXkgPSBbXVxuICAgIGxldCBiYXNlVmFsdWUgPSAwXG4gICAgbGV0IGJhc2VDYWxjdWxhdGVkID0gMFxuICAgIGxldCBhcmNoZXR5cGUgPSBmYWxzZVxuICAgIGxldCBvY2N1cGF0aW9uID0gZmFsc2VcbiAgICBmb3IgKGNvbnN0IGRhdGEgb2YgZGF0YUFycmF5KSB7XG4gICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xuICAgICAgICBjYXNlICdza2lsbCc6XG4gICAgICAgICAgYmFzZVZhbHVlID0gZGF0YS5kYXRhLmJhc2VcbiAgICAgICAgICBiYXNlQ2FsY3VsYXRlZCA9IGF3YWl0IENvQzdJdGVtLmNhbGN1bGF0ZUJhc2UodGhpcywgZGF0YSlcbiAgICAgICAgICBpZiAodGhpcy5kYXRhLnR5cGUgIT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICAgICAgICAvLyBJZiBub3QgYSBQQyBzZXQgc2tpbGwgdmFsdWUgdG8gYmFzZVxuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKGRhdGEubmFtZSkpIHJldHVybiAvLyBJZiBza2lsbCB3aXRoIHRoaXMgbmFtZSBleGlzdCByZXR1cm5cblxuICAgICAgICAgICAgaWYgKGJhc2VWYWx1ZSkge1xuICAgICAgICAgICAgICBpZiAoU3RyaW5nKGJhc2VWYWx1ZSkgIT09IFN0cmluZyhkYXRhLmRhdGEudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgZGF0YS5kYXRhLnZhbHVlID0gYmFzZUNhbGN1bGF0ZWRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNOYU4oTnVtYmVyKGRhdGEuZGF0YS52YWx1ZSkpKSB7XG4gICAgICAgICAgICAgIGxldCB2YWx1ZVxuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gKFxuICAgICAgICAgICAgICAgICAgYXdhaXQgbmV3IFJvbGwoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZUNoYXJhY3RlcmlzdGljcygpXG4gICAgICAgICAgICAgICAgICApLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICAgICAgICApLnRvdGFsXG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbnVsbFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICh2YWx1ZSkgZGF0YS5kYXRhLnZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgZGF0YS5kYXRhLnZhbHVlID0gbnVsbFxuXG4gICAgICAgICAgaWYgKENvQzdJdGVtLmlzQW55U3BlYyhkYXRhKSkge1xuICAgICAgICAgICAgbGV0IHNraWxsTGlzdCA9IFtdXG4gICAgICAgICAgICBpZiAoZGF0YS5kYXRhPy5mbGFncz8ub2NjdXBhdGlvbiB8fCBkYXRhLmRhdGE/LmZsYWdzPy5hcmNoZXR5cGUpIHtcbiAgICAgICAgICAgICAgc2tpbGxMaXN0ID0gdGhpcy5za2lsbHMuZmlsdGVyKGVsID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWVsLmRhdGEuZGF0YS5zcGVjaWFsaXphdGlvbikgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhPy5mbGFncz8ub2NjdXBhdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgZWwuZGF0YS5kYXRhLmZsYWdzPy5vY2N1cGF0aW9uXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhPy5mbGFncz8uYXJjaGV0eXBlICYmXG4gICAgICAgICAgICAgICAgICBlbC5kYXRhLmRhdGEuZmxhZ3M/LmFyY2hldHlwZVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICBkYXRhLmRhdGEuc3BlY2lhbGl6YXRpb24udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgIGVsLmRhdGEuZGF0YS5zcGVjaWFsaXphdGlvbi50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2tpbGxEYXRhID0gYXdhaXQgU2tpbGxTcGVjU2VsZWN0RGlhbG9nLmNyZWF0ZShcbiAgICAgICAgICAgICAgc2tpbGxMaXN0LFxuICAgICAgICAgICAgICBkYXRhLmRhdGEuc3BlY2lhbGl6YXRpb24sXG4gICAgICAgICAgICAgIGJhc2VDYWxjdWxhdGVkXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBpZiAoc2tpbGxEYXRhKSB7XG4gICAgICAgICAgICAgIGJhc2VDYWxjdWxhdGVkID0gc2tpbGxEYXRhLmdldCgnYmFzZS12YWx1ZScpXG4gICAgICAgICAgICAgIGRhdGEuZGF0YS52YWx1ZSA9IGJhc2VDYWxjdWxhdGVkXG4gICAgICAgICAgICAgIGlmIChza2lsbERhdGEuZ2V0KCdleGlzdGluZy1za2lsbCcpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdJdGVtID0gdGhpcy5pdGVtcy5nZXQoXG4gICAgICAgICAgICAgICAgICBza2lsbERhdGEuZ2V0KCdleGlzdGluZy1za2lsbCcpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuZGF0YS5mbGFncykpIHtcbiAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkgYXdhaXQgZXhpc3RpbmdJdGVtLnNldEl0ZW1GbGFnKGtleSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGF0YS5uYW1lID0gQ29DN0l0ZW0uZ2V0TmFtZVdpdGhvdXRTcGVjKGV4aXN0aW5nSXRlbSlcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgICAgICBza2lsbERhdGEuZ2V0KCduZXctc2tpbGwtbmFtZScpLFxuICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgICAgICAgICAgICBkYXRhLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoU3RyaW5nKGJhc2VWYWx1ZSkgIT09IFN0cmluZyhiYXNlQ2FsY3VsYXRlZCkpIHtcbiAgICAgICAgICAgIGRhdGEuZGF0YS5iYXNlID0gYmFzZUNhbGN1bGF0ZWRcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBwcm9jZXNzZWREYXRhQXJyYXkucHVzaChkdXBsaWNhdGUoZGF0YSkpXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICd3ZWFwb24nOiB7XG4gICAgICAgICAgaWYgKHRoaXMuZGF0YS50eXBlICE9PSAnY29udGFpbmVyJykge1xuICAgICAgICAgICAgY29uc3QgbWFpblNraWxsID0gZGF0YS5kYXRhPy5za2lsbD8ubWFpbj8ubmFtZVxuICAgICAgICAgICAgaWYgKG1haW5Ta2lsbCkge1xuICAgICAgICAgICAgICBsZXQgc2tpbGwgPSB0aGlzLmdldFNraWxsc0J5TmFtZShtYWluU2tpbGwpWzBdXG4gICAgICAgICAgICAgIGlmICghc2tpbGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gbWFpblNraWxsLm1hdGNoKC9cXCgoW14pXSspXFwpLylcbiAgICAgICAgICAgICAgICAgID8gbWFpblNraWxsLm1hdGNoKC9cXCgoW14pXSspXFwpLylbMV1cbiAgICAgICAgICAgICAgICAgIDogbWFpblNraWxsXG4gICAgICAgICAgICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLmNyZWF0ZVdlYXBvblNraWxsKFxuICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgICEhZGF0YS5kYXRhLnByb3BlcnRpZXM/LnJuZ2RcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHNraWxsKSBkYXRhLmRhdGEuc2tpbGwubWFpbi5pZCA9IHNraWxsLmlkXG4gICAgICAgICAgICB9IC8vIFRPRE8gOiBFbHNlIDogc2VsZWN0aW9ubmVyIGxlIHNraWxsIGRhbnMgbGEgbGlzdGUgb3UgZW4gY3LDqWVyIHVuIG5vdXZlYXUuXG5cbiAgICAgICAgICAgIGNvbnN0IHNlY29uZFNraWxsID0gZGF0YS5kYXRhPy5za2lsbD8uYWx0ZXJuYXRpdj8ubmFtZVxuICAgICAgICAgICAgaWYgKHNlY29uZFNraWxsKSB7XG4gICAgICAgICAgICAgIGxldCBza2lsbCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKHNlY29uZFNraWxsKVswXVxuICAgICAgICAgICAgICBpZiAoIXNraWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IG1haW5Ta2lsbC5tYXRjaCgvXFwoKFteKV0rKVxcKS8pXG4gICAgICAgICAgICAgICAgICA/IG1haW5Ta2lsbC5tYXRjaCgvXFwoKFteKV0rKVxcKS8pWzFdXG4gICAgICAgICAgICAgICAgICA6IG1haW5Ta2lsbFxuICAgICAgICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5jcmVhdGVXZWFwb25Ta2lsbChcbiAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAhIWRhdGEuZGF0YS5wcm9wZXJ0aWVzPy5ybmdkXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChza2lsbCkgZGF0YS5kYXRhLnNraWxsLmFsdGVybmF0aXYuaWQgPSBza2lsbC5pZFxuICAgICAgICAgICAgfSAvLyBUT0RPIDogRWxzZSA6IHNlbGVjdGlvbm5lciBsZSBza2lsbCBkYW5zIGxhIGxpc3RlIG91IGVuIGNyw6llciB1biBub3V2ZWF1LlxuICAgICAgICAgIH1cblxuICAgICAgICAgIHByb2Nlc3NlZERhdGFBcnJheS5wdXNoKGR1cGxpY2F0ZShkYXRhKSlcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG5cbiAgICAgICAgY2FzZSAnc2V0dXAnOiB7XG4gICAgICAgICAgaWYgKGRhdGEuZGF0YS5lbmFibGVDaGFyYWN0ZXJpc2l0aWNzKSB7XG4gICAgICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmxpc3QgPSB7fVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LnN0ciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ3N0cicpXG4gICAgICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmxpc3QuY29uID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnY29uJylcbiAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5zaXogPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdzaXonKVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LmRleCA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ2RleCcpXG4gICAgICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmxpc3QuYXBwID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnYXBwJylcbiAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5pbnQgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdpbnQnKVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LnBvdyA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ3BvdycpXG4gICAgICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmxpc3QuZWR1ID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnZWR1JylcblxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2sgPSB7fVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2sudmFsdWUgPSBpc05hTih0aGlzLmx1Y2spXG4gICAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgICA6IHRoaXMubHVja1xuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2subGFiZWwgPVxuICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG4gICAgICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmxpc3QubHVjay5zaG9ydE5hbWUgPVxuICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG5cbiAgICAgICAgICAgIGlmICghZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMpIHtcbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMgPSB7fVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuc3RyID1cbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LnN0ci52YWx1ZVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuY29uID1cbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LmNvbi52YWx1ZVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuc2l6ID1cbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LnNpei52YWx1ZVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuZGV4ID1cbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LmRleC52YWx1ZVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuYXBwID1cbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LmFwcC52YWx1ZVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuaW50ID1cbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LmludC52YWx1ZVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93ID1cbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LnBvdy52YWx1ZVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuZWR1ID1cbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5saXN0LmVkdS52YWx1ZVxuICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMubHVjayA9XG4gICAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5sdWNrLnZhbHVlXG4gICAgICAgICAgICBpZiAoZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMuZW5hYmxlZCkge1xuICAgICAgICAgICAgICBkYXRhLmRhdGEudGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU3BlbmRQb2ludHMnKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGF0YS5kYXRhLnRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGxDaGFyYWMnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YS5kYXRhLnBvaW50c1dhcm5pbmcgPSAhKFxuICAgICAgICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5zdHIgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuY29uICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnNpeiAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5kZXggIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuYXBwICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmludCAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3cgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuZWR1ICE9PSBudWxsXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBjb25zdCByb2xsZWQgPSBhd2FpdCBDaGFyYWNSb2xsRGlhbG9nLmNyZWF0ZShkYXRhLmRhdGEpXG4gICAgICAgICAgICBpZiAocm9sbGVkKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fVxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBbXG4gICAgICAgICAgICAgICAgJ3N0cicsXG4gICAgICAgICAgICAgICAgJ2NvbicsXG4gICAgICAgICAgICAgICAgJ3NpeicsXG4gICAgICAgICAgICAgICAgJ2RleCcsXG4gICAgICAgICAgICAgICAgJ2FwcCcsXG4gICAgICAgICAgICAgICAgJ2ludCcsXG4gICAgICAgICAgICAgICAgJ3BvdycsXG4gICAgICAgICAgICAgICAgJ2VkdSdcbiAgICAgICAgICAgICAgXSkge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldKSB7XG4gICAgICAgICAgICAgICAgICB1cGRhdGVEYXRhW2BkYXRhLmNoYXJhY3RlcmlzdGljcy4ke2tleX0udmFsdWVgXSA9XG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzW2tleV1cbiAgICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbYGRhdGEuY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS5mb3JtdWxhYF0gPVxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnJvbGxzW2tleV1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmx1Y2spIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmF0dHJpYnMubGNrLnZhbHVlJ10gPVxuICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMubHVja1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3cpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmF0dHJpYnMuc2FuLnZhbHVlJ10gPVxuICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93XG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5hdHRyaWJzLnNhbi5vbmVGaWZ0aFNhbml0eSddID1cbiAgICAgICAgICAgICAgICAgICcgLyAnICsgTWF0aC5mbG9vcihkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3cgLyA1KVxuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwubWF4J10gPVxuICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5hdHRyaWJzLm1wLnZhbHVlJ10gPVxuICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5hdHRyaWJzLm1wLm1heCddID1cbiAgICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcihkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3cgLyA1KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHVwZGF0ZURhdGEpXG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAgICAgICAnZGF0YS5hdHRyaWJzLmhwLnZhbHVlJzogdGhpcy5ocE1heCxcbiAgICAgICAgICAgICAgICAnZGF0YS5hdHRyaWJzLmhwLm1heCc6IHRoaXMuaHBNYXhcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gZWxzZSByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3Qgc2tpbGxzID0gZGF0YS5kYXRhLml0ZW1zLmZpbHRlcihpdCA9PiBpdC50eXBlID09PSAnc2tpbGwnKVxuICAgICAgICAgIGNvbnN0IG90aGVyc0l0ZW1zID0gZGF0YS5kYXRhLml0ZW1zLmZpbHRlcihpdCA9PiBpdC50eXBlICE9PSAnc2tpbGwnKVxuICAgICAgICAgIGF3YWl0IHRoaXMuYWRkVW5pcXVlSXRlbXMoc2tpbGxzKVxuICAgICAgICAgIGF3YWl0IHRoaXMuYWRkSXRlbXMob3RoZXJzSXRlbXMpXG4gICAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ29uZUJsb2NrQmFja3N0b3J5JykpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuYmFja3N0b3J5JzogZGF0YS5kYXRhLmJhY2tzdG9yeSB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNlY3Rpb25OYW1lIG9mIGRhdGEuZGF0YS5iaW9TZWN0aW9ucykge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgIXRoaXMuZGF0YS5kYXRhLmJpb2dyYXBoeT8uZmluZChcbiAgICAgICAgICAgICAgICAgIGVsID0+IHNlY3Rpb25OYW1lID09PSBlbC50aXRsZVxuICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICBzZWN0aW9uTmFtZVxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZUJpb1NlY3Rpb24oc2VjdGlvbk5hbWUpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgSG9va3MuY2FsbCgnc2V0dXBGaW5pc2hlZENvQzcnKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnYXJjaGV0eXBlJzpcbiAgICAgICAgICBpZiAodGhpcy5kYXRhLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICAgICAgICAvLyBBcmNoZXR5cHJlIG9ubHkgZm9yIFBDc1xuICAgICAgICAgICAgaWYgKHRoaXMuYXJjaGV0eXBlKSB7XG4gICAgICAgICAgICAgIGxldCByZXNldEFyY2hldHlwZSA9IGZhbHNlXG4gICAgICAgICAgICAgIGF3YWl0IERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlc2V0QXJjaGV0eXBlJyksXG4gICAgICAgICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZXNldEFyY2hldHlwZUhpbnQnLCB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWVcbiAgICAgICAgICAgICAgICB9KX08L3A+YCxcbiAgICAgICAgICAgICAgICB5ZXM6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJlc2V0QXJjaGV0eXBlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGVmYXVsdFllczogZmFsc2VcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgaWYgKHJlc2V0QXJjaGV0eXBlKSBhd2FpdCB0aGlzLnJlc2V0QXJjaGV0eXBlKClcbiAgICAgICAgICAgICAgZWxzZSByZXR1cm5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY29yZUNoYXJhYyA9IFtdXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuZGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzKSkge1xuICAgICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBlbnRyeVxuICAgICAgICAgICAgICBkYXRhLmRhdGEuY29yZUNoYXJhY3RlcmlzdGljc1trZXldID0gZmFsc2VcbiAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoa2V5KVxuICAgICAgICAgICAgICAgIGNoYXIua2V5ID0ga2V5XG4gICAgICAgICAgICAgICAgY29yZUNoYXJhYy5wdXNoKGNoYXIpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGNoYXJhY1xuXG4gICAgICAgICAgICBpZiAoY29yZUNoYXJhYy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNoYXJEaWFsb2dEYXRhID0ge31cbiAgICAgICAgICAgICAgY2hhckRpYWxvZ0RhdGEuY2hhcmFjdGVyaXN0aWNzID0gY29yZUNoYXJhY1xuICAgICAgICAgICAgICBjaGFyRGlhbG9nRGF0YS50aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TZWxlY3RDb3JlQ2hhcmFjJylcbiAgICAgICAgICAgICAgY2hhcmFjID0gYXdhaXQgQ2hhcmFjU2VsZWN0RGlhbG9nLmNyZWF0ZShjaGFyRGlhbG9nRGF0YSlcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29yZUNoYXJhYy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgY2hhcmFjID0gY29yZUNoYXJhY1swXS5rZXlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFjaGFyYWMpIHJldHVyblxuICAgICAgICAgICAgZGF0YS5kYXRhLmNvcmVDaGFyYWN0ZXJpc3RpY3NbY2hhcmFjXSA9IHRydWVcbiAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuY29yZUNoYXJhY3RlcmlzdGljc0Zvcm11bGEuZW5hYmxlZCkge1xuICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBOdW1iZXIoZGF0YS5kYXRhLmNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhLnZhbHVlKVxuICAgICAgICAgICAgICBpZiAoaXNOYU4odmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoY2hhcmFjKVxuICAgICAgICAgICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgUm9sbChcbiAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS52YWx1ZVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBhd2FpdCByb2xsLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgIHJvbGwudG9NZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgIGZsYXZvcjogYFJvbGxpbmcgY2hhcmFjdGVyaXNpdGljICR7Y2hhci5sYWJlbH06ICR7ZGF0YS5kYXRhLmNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhLnZhbHVlfWBcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHZhbHVlID0gY2hhci52YWx1ZSA8IHJvbGwudG90YWwgPyByb2xsLnRvdGFsIDogY2hhci52YWx1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAgICAgICBbYGRhdGEuY2hhcmFjdGVyaXN0aWNzLiR7Y2hhcmFjfS52YWx1ZWBdOiB2YWx1ZVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgYWxsIHNraWxsc1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyhkYXRhLmRhdGEuc2tpbGxzLCAnYXJjaGV0eXBlJylcblxuICAgICAgICAgICAgcHJvY2Vzc2VkRGF0YUFycmF5LnB1c2goZHVwbGljYXRlKGRhdGEpKVxuICAgICAgICAgICAgYXJjaGV0eXBlID0gdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ29jY3VwYXRpb24nOlxuICAgICAgICAgIGlmICh0aGlzLmRhdGEudHlwZSA9PT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgICAgICAgIC8vIE9jY3VwYXRpb24gb25seSBmb3IgUENzXG4gICAgICAgICAgICBpZiAodGhpcy5vY2N1cGF0aW9uKSB7XG4gICAgICAgICAgICAgIGxldCByZXNldE9jY3VwYXRpb24gPSBmYWxzZVxuICAgICAgICAgICAgICBhd2FpdCBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZXNldE9jY3VwYXRpb24nKSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlc2V0T2NjdXBhdGlvbkhpbnQnLCB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWVcbiAgICAgICAgICAgICAgICB9KX08L3A+YCxcbiAgICAgICAgICAgICAgICB5ZXM6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJlc2V0T2NjdXBhdGlvbiA9IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlZmF1bHRZZXM6IGZhbHNlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGlmIChyZXNldE9jY3VwYXRpb24pIGF3YWl0IHRoaXMucmVzZXRPY2N1cGF0aW9uKClcbiAgICAgICAgICAgICAgZWxzZSByZXR1cm5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2VsZWN0IGNoYXJhY3RlcmlzdGljXG4gICAgICAgICAgICBjb25zdCBwb2ludHNEaWFsb2dEYXRhID0ge31cbiAgICAgICAgICAgIHBvaW50c0RpYWxvZ0RhdGEuY2hhcmFjdGVyaXN0aWNzID0gZGF0YS5kYXRhLm9jY3VwYXRpb25Ta2lsbFBvaW50c1xuICAgICAgICAgICAgbGV0IHRvdGFsID0gMFxuICAgICAgICAgICAgbGV0IG9wdGlvbmFsQ2hhciA9IGZhbHNlXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgICAgICAgICBkYXRhLmRhdGEub2NjdXBhdGlvblNraWxsUG9pbnRzXG4gICAgICAgICAgICApKSB7XG4gICAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IGVudHJ5XG4gICAgICAgICAgICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGtleSlcbiAgICAgICAgICAgICAgcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XS5uYW1lID0gY2hhci5sYWJlbFxuICAgICAgICAgICAgICBwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLnZhbHVlID0gY2hhci52YWx1ZVxuICAgICAgICAgICAgICBpZiAodmFsdWUuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLnRvdGFsID1cbiAgICAgICAgICAgICAgICAgIGNoYXIudmFsdWUgKlxuICAgICAgICAgICAgICAgICAgTnVtYmVyKHBvaW50c0RpYWxvZ0RhdGEuY2hhcmFjdGVyaXN0aWNzW2tleV0ubXVsdGlwbGllcilcbiAgICAgICAgICAgICAgICBpZiAoIXZhbHVlLm9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgICB0b3RhbCArPSBwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLnRvdGFsXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG9wdGlvbmFsQ2hhciA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvaW50c0RpYWxvZ0RhdGEudG90YWwgPSB0b3RhbFxuICAgICAgICAgICAgaWYgKG9wdGlvbmFsQ2hhcikge1xuICAgICAgICAgICAgICAvLyBJcyB0aGVyZSBhbnkgb3B0aW9uYWwgY2hhciB0byBjaG9vc2UgZm9yIHBvaW50cyBjYWxjID9cbiAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUG9pbnRTZWxlY3REaWFsb2cuY3JlYXRlKHBvaW50c0RpYWxvZ0RhdGEpXG4gICAgICAgICAgICAgIGlmICghcmVzdWx0KSByZXR1cm4gLy8gUG9pbnQgbm90IHNlbGVjdGVkID0+IGV4aXQuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFkZCBvcHRpb25hbCBza2lsbHNcbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBkYXRhLmRhdGEuZ3JvdXBzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICBjb25zdCBkaWFsb2dEYXRhID0ge31cbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5za2lsbHMgPSBbXVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnR5cGUgPSAnb2NjdXBhdGlvbidcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5hY3RvcklkID0gdGhpcy5pZFxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudCA9IE51bWJlcihkYXRhLmRhdGEuZ3JvdXBzW2luZGV4XS5vcHRpb25zKVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNraWxsU2VsZWN0aW9uV2luZG93JylcblxuICAgICAgICAgICAgICAvLyBTZWxlY3Qgb25seSBza2lsbHMgdGhhdCBhcmUgbm90IHByZXNlbnQgb3IgYXJlIG5vdCBmbGFnZ2VkIGFzIG9jY3VwYXRpb24uXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgZGF0YS5kYXRhLmdyb3Vwc1tpbmRleF0uc2tpbGxzKSB7XG4gICAgICAgICAgICAgICAgaWYgKENvQzdJdGVtLmlzQW55U3BlYyh2YWx1ZSkpIGRpYWxvZ0RhdGEuc2tpbGxzLnB1c2godmFsdWUpXG4gICAgICAgICAgICAgICAgLy8gSWYgaXQncyBhIGdlbmVyaWMgc3BlYyB3ZSBhbHdheXMgYWRkIGl0XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuaXRlbXMuZmluZChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gdmFsdWUubmFtZSAmJiBpdGVtLnR5cGUgPT09ICdza2lsbCdcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBpZiAoIXNraWxsIHx8ICFza2lsbC5kYXRhLmRhdGEuZmxhZ3M/Lm9jY3VwYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgc2tpbGwgd2FzIGFkZGVkIHRvIHNraWxsIGxpc3QgcHJldmlvdXNseSwgcmVtb3ZlIGl0XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFscmVhZHlTZWxlY3RlZFNraWxsID0gZGF0YS5kYXRhLnNraWxscy5maW5kKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT09IHZhbHVlLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhbHJlYWR5U2VsZWN0ZWRTa2lsbCkgZGlhbG9nRGF0YS5za2lsbHMucHVzaCh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBpZiB0aGVyZSdzIG5vbmUsIGRvIG5vdGhpbmcuXG4gICAgICAgICAgICAgIGlmIChkaWFsb2dEYXRhLnNraWxscy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlhbG9nRGF0YS5za2lsbHMubGVuZ3RoIDw9IGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50KSB7XG4gICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGlzIGxlc3Mgc2tpbGwgdGhhbiBvcHRpb25zLCBhZGQgdGhlbSBhbGwuXG4gICAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0xlc3NTa2lsbFRoYW5PcHRpb25zJywge1xuICAgICAgICAgICAgICAgICAgICAgIHNraWxsQ291bnQ6IGRpYWxvZ0RhdGEuc2tpbGxzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zQ291bnQ6IGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAvLyBhd2FpdCB0aGlzLmFkZFVuaXF1ZUl0ZW1zKCBkaWFsb2dEYXRhLnNraWxscywgJ29jY3VwYXRpb24nKTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IENvQzdJdGVtLm1lcmdlT3B0aW9uYWxTa2lsbHMoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5za2lsbHMsXG4gICAgICAgICAgICAgICAgICAgIGRpYWxvZ0RhdGEuc2tpbGxzXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBkYXRhLmRhdGEuc2tpbGxzID0gbWVyZ2VkXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIHNraWxsIHNlbGVjdGlvbi5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gYXdhaXQgU2tpbGxTZWxlY3REaWFsb2cuY3JlYXRlKGRpYWxvZ0RhdGEpXG4gICAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdGVkKSByZXR1cm5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IENvQzdJdGVtLm1lcmdlT3B0aW9uYWxTa2lsbHMoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5za2lsbHMsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBkYXRhLmRhdGEuc2tpbGxzID0gbWVyZ2VkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbmZvQWxsU2tpbGxzQWxyZWFkeVNlbGVjdGVkJylcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQWRkIGV4dHJhIHNraWxsc1xuICAgICAgICAgICAgaWYgKE51bWJlcihkYXRhLmRhdGEucGVyc29uYWwpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRpYWxvZ0RhdGEgPSB7fVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnNraWxscyA9IFtdXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEudHlwZSA9ICdvY2N1cGF0aW9uJ1xuICAgICAgICAgICAgICBkaWFsb2dEYXRhLmFjdG9ySWQgPSB0aGlzLmlkXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50ID0gTnVtYmVyKGRhdGEuZGF0YS5wZXJzb25hbClcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS50aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2VsZWN0UGVyc29uYWxTa2lsbHMnLCB7XG4gICAgICAgICAgICAgICAgbnVtYmVyOiBOdW1iZXIoZGF0YS5kYXRhLnBlcnNvbmFsKVxuICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgIC8vIFNlbGVjdCBvbmx5IHNraWxscyB0aGF0IGFyZSBub3QgcHJlc2VudCBvciBhcmUgbm90IGZsYWdnZWQgYXMgb2NjdXBhdGlvbi5cbiAgICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIHRoaXMuc2tpbGxzKSB7XG4gICAgICAgICAgICAgICAgLy8gU2VsZWN0IGFsbCBza2lsbHMgdGhhdCBhcmUgbm90IGFscmVhZHkgZmxhZ2dlZCBhcyBvY2N1cGF0aW9uLCBjYW4gaGF2ZSBhZGp1c3RtZW50cyBhbmQgWFAuXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgIXMuZGF0YS5kYXRhLmZsYWdzLm9jY3VwYXRpb24gJiZcbiAgICAgICAgICAgICAgICAgICFzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLm5vYWRqdXN0bWVudHMgJiZcbiAgICAgICAgICAgICAgICAgICFzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLm5veHBnYWluXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAvLyBpZiBza2lsbCBhbHJlYWR5IHNlbGVjdGVkIGRvbid0IGFkZCBpdFxuICAgICAgICAgICAgICAgICAgY29uc3QgYWxyZWFkeVNlbGVjdGVkU2tpbGwgPSBkYXRhLmRhdGEuc2tpbGxzLmZpbmQoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT09IHMubmFtZVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGlmICghYWxyZWFkeVNlbGVjdGVkU2tpbGwpIGRpYWxvZ0RhdGEuc2tpbGxzLnB1c2gocy5kYXRhKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIGlmIHRoZXJlJ3Mgbm9uZSwgZG8gbm90aGluZy5cbiAgICAgICAgICAgICAgaWYgKGRpYWxvZ0RhdGEuc2tpbGxzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChkaWFsb2dEYXRhLnNraWxscy5sZW5ndGggPD0gZGlhbG9nRGF0YS5vcHRpb25zQ291bnQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgaXMgbGVzcyBza2lsbCB0aGFuIG9wdGlvbnMsIGFkZCB0aGVtIGFsbC5cbiAgICAgICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JbmZvTGVzc1NraWxsVGhhbk9wdGlvbnMnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgc2tpbGxDb3VudDogZGlhbG9nRGF0YS5za2lsbHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnNDb3VudDogZGlhbG9nRGF0YS5vcHRpb25zQ291bnRcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIC8vIGF3YWl0IHRoaXMuYWRkVW5pcXVlSXRlbXMoIGRpYWxvZ0RhdGEuc2tpbGxzLCAnb2NjdXBhdGlvbicpO1xuICAgICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gQ29DN0l0ZW0ubWVyZ2VPcHRpb25hbFNraWxscyhcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhLnNraWxscyxcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nRGF0YS5za2lsbHNcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5za2lsbHMgPSBtZXJnZWRcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8gV2FpdCBmb3Igc2tpbGwgc2VsZWN0aW9uLlxuICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBhd2FpdCBTa2lsbFNlbGVjdERpYWxvZy5jcmVhdGUoZGlhbG9nRGF0YSkgLy8gRGlhbG9nIGRhdGEgYnVnID8/P1xuICAgICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZCkgcmV0dXJuXG4gICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWQgPSBDb0M3SXRlbS5tZXJnZU9wdGlvbmFsU2tpbGxzKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLmRhdGEuc2tpbGxzLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhLnNraWxscyA9IG1lcmdlZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW5mb0FsbFNraWxsc0FscmVhZHlTZWxlY3RlZCcpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFkZCBhbGwgc2tpbGxzXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFkZFVuaXF1ZUl0ZW1zKGRhdGEuZGF0YS5za2lsbHMsICdvY2N1cGF0aW9uJylcbiAgICAgICAgICAgIC8vIENyZWRpdCByYXRpbmcgaXMgYWx3YXlzIHBhcnQgb2Ygb2NjdXBhdGlvblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVkaXRSYXRpbmdTa2lsbD8uc2V0SXRlbUZsYWcoJ29jY3VwYXRpb24nKVxuICAgICAgICAgICAgLy8gc2V0dGluZyBpdCB0byBtaW4gY3JlZGl0IHJhdGluZ1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVkaXRSYXRpbmdTa2lsbD8udXBkYXRlKHtcbiAgICAgICAgICAgICAgJ2RhdGEuYWRqdXN0bWVudHMub2NjdXBhdGlvbic6IE51bWJlcihkYXRhLmRhdGEuY3JlZGl0UmF0aW5nLm1pbilcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHByb2Nlc3NlZERhdGFBcnJheS5wdXNoKGR1cGxpY2F0ZShkYXRhKSlcbiAgICAgICAgICAgIG9jY3VwYXRpb24gPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBwcm9jZXNzZWREYXRhQXJyYXkucHVzaChkdXBsaWNhdGUoZGF0YSkpXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwcm9jZXNzZWREYXRhQXJyYXkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gICAgY29uc3QgcHJvY2Vzc2VkID0gYXdhaXQgc3VwZXIuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoXG4gICAgICBlbWJlZGRlZE5hbWUsXG4gICAgICBwcm9jZXNzZWREYXRhQXJyYXksXG4gICAgICBvcHRpb25zXG4gICAgKVxuXG4gICAgaWYgKGFyY2hldHlwZSkge1xuICAgICAgLy8gc2V0dGluZyBwb2ludHNcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ2RhdGEuZGV2ZWxvcG1lbnQuYXJjaGV0eXBlJzogdGhpcy5hcmNoZXR5cGVQb2ludHNcbiAgICAgIH0pXG4gICAgICBIb29rcy5jYWxsKCdhcmNoZXR5cGVGaW5pc2hlZENvQzcnKVxuICAgIH1cbiAgICBpZiAob2NjdXBhdGlvbikge1xuICAgICAgLy8gc2V0dGluZyBwb2ludHNcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ2RhdGEuZGV2ZWxvcG1lbnQub2NjdXBhdGlvbic6IHRoaXMub2NjdXBhdGlvblBvaW50cyxcbiAgICAgICAgJ2RhdGEuZGV2ZWxvcG1lbnQucGVyc29uYWwnOiB0aGlzLnBlcnNvbmFsUG9pbnRzXG4gICAgICB9KVxuICAgICAgSG9va3MuY2FsbCgnb2NjdXBhdGlvbkZpbmlzaGVkQ29DNycpXG4gICAgfVxuXG4gICAgcmV0dXJuIHByb2Nlc3NlZFxuICB9XG5cbiAgLy8gZ2V0U2tpbGxJZEJ5TmFtZSggc2tpbGxOYW1lKXtcbiAgLy8gICBsZXQgaWQgPSBudWxsO1xuICAvLyAgICBmb3IgKGNvbnN0IFttYXAsIGtleSwgdmFsdWVdIG9mIHRoaXMuaXRlbXMpIHtcbiAgLy8gICAgIGlmKCB2YWx1ZS5uYW1lID09IHNraWxsTmFtZSkgaWQgPSB2YWx1ZS5pZDtcbiAgLy8gICB9O1xuXG4gIC8vICAgcmV0dXJuIGlkO1xuICAvLyB9XG5cbiAgZ2V0SXRlbUlkQnlOYW1lIChpdGVtTmFtZSkge1xuICAgIGxldCBpZCA9IG51bGxcbiAgICBjb25zdCBuYW1lID0gaXRlbU5hbWUubWF0Y2goL1xcKChbXildKylcXCkvKVxuICAgICAgPyBpdGVtTmFtZS5tYXRjaCgvXFwoKFteKV0rKVxcKS8pWzFdXG4gICAgICA6IGl0ZW1OYW1lXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAoXG4gICAgICAgIENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyh2YWx1ZSkudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICApIHtcbiAgICAgICAgaWQgPSB2YWx1ZS5pZFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBpZFxuICB9XG5cbiAgZ2V0SXRlbXNCeU5hbWUgKGl0ZW1OYW1lKSB7XG4gICAgY29uc3QgaXRlbUxpc3QgPSBbXVxuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5pdGVtcykge1xuICAgICAgaWYgKHZhbHVlLm5hbWUgPT09IGl0ZW1OYW1lKSBpdGVtTGlzdC5wdXNoKHZhbHVlKVxuICAgIH1cblxuICAgIHJldHVybiBpdGVtTGlzdFxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqXG4gICAqL1xuICBnZXRTa2lsbHNCeU5hbWUgKHNraWxsTmFtZSkge1xuICAgIC8vIFRPRE8gOiBtb3JlIGFnZ3Jlc3NpdmUgZmluZGluZyBpbmNsdWRpbmcgc3BlY3NcbiAgICBjb25zdCBza2lsbExpc3QgPSBbXVxuICAgIGNvbnN0IG5hbWUgPSBza2lsbE5hbWUubWF0Y2goL1xcKChbXildKylcXCkvKVxuICAgICAgPyBza2lsbE5hbWUubWF0Y2goL1xcKChbXildKylcXCkvKVsxXVxuICAgICAgOiBza2lsbE5hbWVcblxuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5pdGVtcykge1xuICAgICAgaWYgKFxuICAgICAgICBDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWModmFsdWUpLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgbmFtZS50b0xvd2VyQ2FzZSgpICYmXG4gICAgICAgIHZhbHVlLnR5cGUgPT09ICdza2lsbCdcbiAgICAgICkge1xuICAgICAgICBza2lsbExpc3QucHVzaCh2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNraWxsTGlzdFxuICB9XG5cbiAgcGFyc2VGb3JtdWxhIChmb3JtdWxhKSB7XG4gICAgbGV0IHBhcnNlZEZvcm11bGEgPSBmb3JtdWxhXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5mb3JtdWxhLmFjdG9yKSkge1xuICAgICAgcGFyc2VkRm9ybXVsYSA9IHBhcnNlZEZvcm11bGEucmVwbGFjZShrZXksIHZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VkRm9ybXVsYVxuICB9XG5cbiAgcGFyc2VDaGFyYWN0ZXJpc3RpY3MgKCkge1xuICAgIGNvbnN0IHBhcnNlZCA9IHt9XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5mb3JtdWxhLmFjdG9yKSkge1xuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCdAJykgJiYgdmFsdWUuc3RhcnRzV2l0aCgndGhpcy4nKSkge1xuICAgICAgICBwYXJzZWRba2V5LnN1YnN0cmluZygxKV0gPSBnZXRQcm9wZXJ0eSh0aGlzLCB2YWx1ZS5zdWJzdHJpbmcoNSkpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwYXJzZWRcbiAgfVxuXG4gIHN0YXRpYyBnZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24gKCkge1xuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICBnYW1lLnN5c3RlbS50ZW1wbGF0ZS5BY3Rvci50ZW1wbGF0ZXMuY2hhcmFjdGVyaXN0aWNzLmNoYXJhY3RlcmlzdGljc1xuICAgICkpIHtcbiAgICAgIGNoYXJhY3RlcmlzdGljcy5wdXNoKHtcbiAgICAgICAga2V5OiBrZXksXG4gICAgICAgIHNob3J0TmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLnNob3J0KSxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5sYWJlbClcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBjaGFyYWN0ZXJpc3RpY3NcbiAgfVxuXG4gIGdldENoYXJhY3RlcmlzdGljIChjaGFyTmFtZSkge1xuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NcbiAgICAgICkpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCkudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgIGNoYXJOYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUubGFiZWwpLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICBjaGFyTmFtZS50b0xvd2VyQ2FzZSgpIHx8XG4gICAgICAgICAga2V5ID09PSBjaGFyTmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgICAgIHNob3J0TmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLnNob3J0KSxcbiAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUubGFiZWwpLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXRBdHRyaWJ1dGUgKGF0dHJpYk5hbWUpIHtcbiAgICBpZiAoXG4gICAgICBbJ2xjaycsICdsdWNrJywgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKS50b0xvd2VyQ2FzZSgpXS5pbmNsdWRlcyhcbiAgICAgICAgYXR0cmliTmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBrZXk6ICdsY2snLFxuICAgICAgICBzaG9ydE5hbWU6ICdsdWNrJyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJyksXG4gICAgICAgIHZhbHVlOiB0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmxjay52YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoXG4gICAgICBbXG4gICAgICAgICdzYW4nLFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU0FOJykudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eScpLnRvTG93ZXJDYXNlKClcbiAgICAgIF0uaW5jbHVkZXMoYXR0cmliTmFtZS50b0xvd2VyQ2FzZSgpKVxuICAgICkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAga2V5OiAnc2FuJyxcbiAgICAgICAgc2hvcnROYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU0FOJyksXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5JyksXG4gICAgICAgIHZhbHVlOiB0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLnNhbi52YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IG9jY3VwYXRpb24gKCkge1xuICAgIGNvbnN0IG9jY3VwYXRpb24gPSB0aGlzLml0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gJ29jY3VwYXRpb24nKVxuICAgIHJldHVybiBvY2N1cGF0aW9uWzBdXG4gIH1cblxuICBnZXQgYXJjaGV0eXBlICgpIHtcbiAgICBjb25zdCBhcmNoZXR5cGUgPSB0aGlzLml0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gJ2FyY2hldHlwZScpXG4gICAgcmV0dXJuIGFyY2hldHlwZVswXVxuICB9XG5cbiAgYXN5bmMgcmVzZXRPY2N1cGF0aW9uIChlcmFzZU9sZCA9IHRydWUpIHtcbiAgICBpZiAoZXJhc2VPbGQpIHtcbiAgICAgIGNvbnN0IG9jY3VwYXRpb25Ta2lsbCA9IHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT5cbiAgICAgICAgaXRlbS5nZXRJdGVtRmxhZygnb2NjdXBhdGlvbicpXG4gICAgICApXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgb2NjdXBhdGlvblNraWxsLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBhd2FpdCBvY2N1cGF0aW9uU2tpbGxbaW5kZXhdLnVuc2V0SXRlbUZsYWcoJ29jY3VwYXRpb24nKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5vY2N1cGF0aW9uKSBhd2FpdCB0aGlzLm9jY3VwYXRpb24uZGVsZXRlKClcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmRldmVsb3BtZW50Lm9jY3VwYXRpb24nOiBudWxsIH0pXG4gIH1cblxuICBhc3luYyByZXNldEFyY2hldHlwZSAoZXJhc2VPbGQgPSB0cnVlKSB7XG4gICAgaWYgKGVyYXNlT2xkKSB7XG4gICAgICBjb25zdCBhcmNoZXR5cGVTa2lsbCA9IHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT5cbiAgICAgICAgaXRlbS5nZXRJdGVtRmxhZygnYXJjaGV0eXBlJylcbiAgICAgIClcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBhcmNoZXR5cGVTa2lsbC5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgYXdhaXQgYXJjaGV0eXBlU2tpbGxbaW5kZXhdLnVuc2V0SXRlbUZsYWcoJ2FyY2hldHlwZScpXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmFyY2hldHlwZSkgYXdhaXQgdGhpcy5hcmNoZXR5cGUuZGVsZXRlKClcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmRldmVsb3BtZW50LmFyY2hldHlwZSc6IG51bGwgfSlcbiAgfVxuXG4gIGdldCBsdWNrICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuYXR0cmlicz8ubGNrPy52YWx1ZSlcbiAgfVxuXG4gIGFzeW5jIHNldEx1Y2sgKHZhbHVlKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuYXR0cmlicy5sY2sudmFsdWUnOiB2YWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgc3BlbmRMdWNrIChhbW91bnQpIHtcbiAgICBhbW91bnQgPSBwYXJzZUludChhbW91bnQpXG4gICAgaWYgKCEodGhpcy5sdWNrID49IGFtb3VudCkpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiB0aGlzLnNldEx1Y2sodGhpcy5sdWNrIC0gYW1vdW50KVxuICB9XG5cbiAgZ2V0IGhwICgpIHtcbiAgICBpZiAoWyd2ZWhpY2xlJ10uaW5jbHVkZXModGhpcy5kYXRhLnR5cGUpKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMuYnVpbGQuY3VycmVudCA9PT0gbnVsbCB8fFxuICAgICAgICB1bmRlZmluZWQgPT09IHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMuYnVpbGQuY3VycmVudCB8fFxuICAgICAgICB0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQgPT09ICcnXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVpbGRcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5idWlsZC5jdXJyZW50ID5cbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5idWlsZC52YWx1ZVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1aWxkXG4gICAgICB9XG4gICAgICBjb25zdCBocCA9IHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMuYnVpbGQuY3VycmVudClcbiAgICAgIHJldHVybiBpc05hTihocCkgPyBudWxsIDogaHBcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMuaHAudmFsdWUpXG4gIH1cblxuICBnZXQgaHBNYXggKCkge1xuICAgIGlmIChbJ3ZlaGljbGUnXS5pbmNsdWRlcyh0aGlzLmRhdGEudHlwZSkpIHJldHVybiB0aGlzLmJ1aWxkXG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMuaHAuYXV0bykge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlICE9IG51bGwgJiZcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmNvbi52YWx1ZSAhPSBudWxsXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoXG4gICAgICAgICAgKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgK1xuICAgICAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmNvbi52YWx1ZSkgL1xuICAgICAgICAgICAgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlRG91YmxlTWF4SGVhbHRoJykgJiZcbiAgICAgICAgICAgIHRoaXMuZGF0YS50eXBlID09PSAnY2hhcmFjdGVyJ1xuICAgICAgICAgICAgICA/IDVcbiAgICAgICAgICAgICAgOiAxMClcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMuaHAubWF4KSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heClcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heClcbiAgfVxuXG4gIGFzeW5jIHNldEhwICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMFxuICAgIGlmIChbJ3ZlaGljbGUnXS5pbmNsdWRlcyh0aGlzLmRhdGEudHlwZSkpIHtcbiAgICAgIGlmICh2YWx1ZSA+IHRoaXMuYnVpbGQpIHZhbHVlID0gcGFyc2VJbnQodGhpcy5idWlsZClcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmF0dHJpYnMuYnVpbGQuY3VycmVudCc6IHZhbHVlIH0pXG4gICAgfVxuICAgIGlmICh2YWx1ZSA+IHRoaXMuaHBNYXgpIHZhbHVlID0gcGFyc2VJbnQodGhpcy5ocE1heClcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5hdHRyaWJzLmhwLnZhbHVlJzogdmFsdWUgfSlcbiAgfVxuXG4gIGFzeW5jIGFkZFVuaXF1ZUl0ZW1zIChza2lsbExpc3QsIGZsYWcgPSBudWxsKSB7XG4gICAgY29uc3QgcHJvY2Vzc2VkID0gW11cbiAgICBmb3IgKGNvbnN0IHNraWxsIG9mIHNraWxsTGlzdCkge1xuICAgICAgaWYgKENvQzdJdGVtLmlzQW55U3BlYyhza2lsbCkpIHtcbiAgICAgICAgaWYgKCFza2lsbC5kYXRhLmZsYWdzKSBza2lsbC5kYXRhLmZsYWdzID0ge31cbiAgICAgICAgaWYgKGZsYWcpIHNraWxsLmRhdGEuZmxhZ3NbZmxhZ10gPSB0cnVlXG4gICAgICAgIHByb2Nlc3NlZC5wdXNoKGR1cGxpY2F0ZShza2lsbCkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBpdGVtSWQgPSB0aGlzLmdldEl0ZW1JZEJ5TmFtZShza2lsbC5uYW1lKVxuICAgICAgICBpZiAoIWl0ZW1JZCkge1xuICAgICAgICAgIGlmIChmbGFnKSB7XG4gICAgICAgICAgICBpZiAoIXNraWxsLmRhdGEuZmxhZ3MpIHNraWxsLmRhdGEuZmxhZ3MgPSB7fVxuICAgICAgICAgICAgc2tpbGwuZGF0YS5mbGFnc1tmbGFnXSA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgICAgcHJvY2Vzc2VkLnB1c2goZHVwbGljYXRlKHNraWxsKSlcbiAgICAgICAgfSBlbHNlIGlmIChmbGFnKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICAgICAgICBhd2FpdCBpdGVtLnNldEl0ZW1GbGFnKGZsYWcpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHByb2Nlc3NlZC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgcHJvY2Vzc2VkLCB7XG4gICAgICByZW5kZXJTaGVldDogZmFsc2VcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgYWRkSXRlbXMgKGl0ZW1MaXN0LCBmbGFnID0gbnVsbCkge1xuICAgIGNvbnN0IHByb2Nlc3NlZCA9IFtdXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1MaXN0KSB7XG4gICAgICBpZiAoZmxhZykge1xuICAgICAgICBpZiAoIWl0ZW0uZGF0YS5mbGFncykgaXRlbS5kYXRhLmZsYWdzID0ge31cbiAgICAgICAgaXRlbS5kYXRhLmZsYWdzW2ZsYWddID0gdHJ1ZVxuICAgICAgfVxuICAgICAgcHJvY2Vzc2VkLnB1c2goZHVwbGljYXRlKGl0ZW0pKVxuICAgIH1cbiAgICBpZiAocHJvY2Vzc2VkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgcHJvY2Vzc2VkLCB7XG4gICAgICByZW5kZXJTaGVldDogZmFsc2VcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgYWRkVW5pcXVlSXRlbSAoc2tpbGwsIGZsYWcgPSBudWxsKSB7XG4gICAgY29uc3QgaXRlbUlkID0gdGhpcy5nZXRJdGVtSWRCeU5hbWUoc2tpbGwubmFtZSlcbiAgICBpZiAoIWl0ZW1JZCkge1xuICAgICAgaWYgKGZsYWcpIHtcbiAgICAgICAgaWYgKCFza2lsbC5kYXRhLmZsYWdzKSBza2lsbC5kYXRhLmZsYWdzID0ge31cbiAgICAgICAgc2tpbGwuZGF0YS5mbGFnc1tmbGFnXSA9IHRydWVcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbc2tpbGxdLCB7XG4gICAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKGZsYWcpIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW1zLmdldChpdGVtSWQpXG4gICAgICBhd2FpdCBpdGVtLnNldEl0ZW1GbGFnKGZsYWcpXG4gICAgfVxuICB9XG5cbiAgZ2V0IG1wTWF4ICgpIHtcbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuYXR0cmlicy5tcC5hdXRvKSB7XG4gICAgICBpZiAodGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUgLyA1KVxuICAgICAgfSBlbHNlIHJldHVybiBudWxsXG4gICAgfVxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLm1wLm1heClcbiAgfVxuXG4gIGdldFJlYXNvblNhbkxvc3MgKHNhblJlYXNvbikge1xuICAgIGlmICh0eXBlb2Ygc2FuUmVhc29uID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuc2FuaXR5TG9zc0V2ZW50cy5maWx0ZXIoXG4gICAgICAgICAgciA9PiByLnR5cGUudG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2FuUmVhc29uLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICAgICAgKVswXSA/PyB7IHR5cGU6ICcnLCB0b3RhbExvc3M6IDAsIGltbXVuaXR5OiBmYWxzZSB9XG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiB7IHR5cGU6ICcnLCB0b3RhbExvc3M6IDAsIGltbXVuaXR5OiBmYWxzZSB9XG4gIH1cblxuICBzYW5Mb3N0VG9SZWFzb24gKHNhblJlYXNvbikge1xuICAgIGlmIChzYW5SZWFzb24pIHtcbiAgICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudCA9IHRoaXMuZ2V0UmVhc29uU2FuTG9zcyhzYW5SZWFzb24pXG4gICAgICByZXR1cm4gc2FuaXR5TG9zc0V2ZW50LnRvdGFsTG9zc1xuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgc2FuTG9zc1JlYXNvbkVuY291bnRlcmVkIChzYW5SZWFzb24pIHtcbiAgICBpZiAoc2FuUmVhc29uKSB7XG4gICAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnQgPSB0aGlzLmdldFJlYXNvblNhbkxvc3Moc2FuUmVhc29uKVxuICAgICAgcmV0dXJuIHNhbml0eUxvc3NFdmVudC50eXBlICE9PSAnJ1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHNldFJlYXNvblNhbkxvc3MgKHNhblJlYXNvbiwgc2FuTG9zcykge1xuICAgIGlmICh0eXBlb2Ygc2FuUmVhc29uID09PSAnc3RyaW5nJyAmJiBzYW5SZWFzb24gIT09ICcnKSB7XG4gICAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnRzID0gZHVwbGljYXRlKHRoaXMuZGF0YS5kYXRhLnNhbml0eUxvc3NFdmVudHMpXG4gICAgICBjb25zdCBpbmRleCA9IHNhbml0eUxvc3NFdmVudHMuZmluZEluZGV4KFxuICAgICAgICByID0+IHIudHlwZS50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBzYW5SZWFzb24udG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgKVxuICAgICAgaWYgKHNhbkxvc3MgPiAwKSB7XG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICBzYW5pdHlMb3NzRXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgdHlwZTogc2FuUmVhc29uLFxuICAgICAgICAgICAgdG90YWxMb3NzOiBzYW5Mb3NzLFxuICAgICAgICAgICAgaW1tdW5pdHk6IGZhbHNlXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzYW5pdHlMb3NzRXZlbnRzW2luZGV4XS50b3RhbExvc3MgKz0gc2FuTG9zc1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgc2FuaXR5TG9zc0V2ZW50cy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgIHNhbml0eUxvc3NFdmVudHMuc29ydChmdW5jdGlvbiAobGVmdCwgcmlnaHQpIHtcbiAgICAgICAgICByZXR1cm4gbGVmdC50eXBlLmxvY2FsZUNvbXBhcmUocmlnaHQudHlwZSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdkYXRhLnNhbml0eUxvc3NFdmVudHMnOiBzYW5pdHlMb3NzRXZlbnRzXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIG1heExvc3NUb1NhblJlYXNvbiAoc2FuUmVhc29uLCBzYW5NYXhGb3JtdWxhKSB7XG4gICAgY29uc3Qgc2FuTWF4ID0gbmV3IFJvbGwoc2FuTWF4Rm9ybXVsYS50b1N0cmluZygpKS5ldmFsdWF0ZSh7XG4gICAgICBtYXhpbWl6ZTogdHJ1ZVxuICAgIH0pLnRvdGFsXG4gICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50ID0gdGhpcy5nZXRSZWFzb25TYW5Mb3NzKHNhblJlYXNvbilcbiAgICBpZiAoc2FuaXR5TG9zc0V2ZW50LmltbXVuaXR5KSB7XG4gICAgICByZXR1cm4gMFxuICAgIH1cbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgc2FuTWF4IC0gc2FuaXR5TG9zc0V2ZW50LnRvdGFsTG9zcylcbiAgfVxuXG4gIGFzeW5jIGxvb3NlU2FuIChzYW5SZWFzb24sIHNhbkxvc3MpIHtcbiAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnQgPSB0aGlzLmdldFJlYXNvblNhbkxvc3Moc2FuUmVhc29uKVxuICAgIGlmICghc2FuaXR5TG9zc0V2ZW50LmltbXVuaXR5KSB7XG4gICAgICBhd2FpdCB0aGlzLnNldFNhbih0aGlzLnNhbiAtIHNhbkxvc3MpXG4gICAgICB0aGlzLnNldFJlYXNvblNhbkxvc3Moc2FuUmVhc29uLCBzYW5Mb3NzKVxuICAgICAgcmV0dXJuIHNhbkxvc3NcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIHNhbkxvc3MgKGNoZWNrUGFzc2VkKSB7XG4gICAgaWYgKGNoZWNrUGFzc2VkKSByZXR1cm4gdGhpcy5zYW5Mb3NzQ2hlY2tQYXNzZWRcbiAgICByZXR1cm4gdGhpcy5zYW5Mb3NzQ2hlY2tGYWlsbGVkXG4gIH1cblxuICBnZXQgc2FuTG9zc0NoZWNrUGFzc2VkICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmRhdGEuc3BlY2lhbD8uc2FuTG9zcz8uY2hlY2tQYXNzZWRcbiAgfVxuXG4gIGdldCBzYW5Mb3NzQ2hlY2tGYWlsbGVkICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmRhdGEuc3BlY2lhbD8uc2FuTG9zcz8uY2hlY2tGYWlsbGVkXG4gIH1cblxuICBnZXQgc2FuTG9zc01heCAoKSB7XG4gICAgaWYgKHRoaXMuc2FuTG9zc0NoZWNrRmFpbGxlZCkge1xuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5zYW5Mb3NzQ2hlY2tGYWlsbGVkKSkpIHtcbiAgICAgICAgcmV0dXJuIE51bWJlcih0aGlzLnNhbkxvc3NDaGVja0ZhaWxsZWQpXG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IFJvbGwodGhpcy5zYW5Mb3NzQ2hlY2tGYWlsbGVkKS5ldmFsdWF0ZSh7XG4gICAgICAgIG1heGltaXplOiB0cnVlXG4gICAgICB9KS50b3RhbFxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NNaW4gKCkge1xuICAgIGlmICh0aGlzLnNhbkxvc3NDaGVja1Bhc3NlZCkge1xuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5zYW5Mb3NzQ2hlY2tQYXNzZWQpKSkge1xuICAgICAgICByZXR1cm4gTnVtYmVyKHRoaXMuc2FuTG9zc0NoZWNrUGFzc2VkKVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBSb2xsKHRoaXMuc2FuTG9zc0NoZWNrUGFzc2VkKS5ldmFsdWF0ZSh7XG4gICAgICAgIG1heGltaXplOiB0cnVlXG4gICAgICB9KS50b3RhbFxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgZ2V0IGRhaWx5U2FuTG9zcyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMuc2FuPy5kYWlseUxvc3MgfHwgMFxuICB9XG5cbiAgZ2V0IHNhbk1heCAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5hdHRyaWJzKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmF0dHJpYnM/LnNhbj8uYXV0bykge1xuICAgICAgaWYgKHRoaXMuY3RodWxodU15dGhvcykgcmV0dXJuIE1hdGgubWF4KDk5IC0gdGhpcy5jdGh1bGh1TXl0aG9zLCAwKVxuICAgICAgcmV0dXJuIDk5XG4gICAgfVxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLnNhbi5tYXgpXG4gIH1cblxuICBnZXQgbXAgKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLm1wLnZhbHVlKVxuICB9XG5cbiAgYXN5bmMgc2V0TXAgKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAwXG4gICAgaWYgKHZhbHVlID4gcGFyc2VJbnQodGhpcy5tcE1heCkpIHZhbHVlID0gcGFyc2VJbnQodGhpcy5tcE1heClcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5hdHRyaWJzLm1wLnZhbHVlJzogdmFsdWUgfSlcbiAgfVxuXG4gIGdldCBzYW4gKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLnNhbi52YWx1ZSlcbiAgfVxuXG4gIGdldCBpbnQgKCkge1xuICAgIHJldHVybiB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdpbnQnKVxuICB9XG5cbiAgZ2V0IG9jY3VwYXRpb25Qb2ludHNTcGVudCAoKSB7XG4gICAgbGV0IG9jY3VwYXRpb25Qb2ludHMgPSAwXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKHNraWxsLmRhdGEuZGF0YS5hZGp1c3RtZW50cz8ub2NjdXBhdGlvbikge1xuICAgICAgICBvY2N1cGF0aW9uUG9pbnRzICs9IHNraWxsLmRhdGEuZGF0YS5hZGp1c3RtZW50cy5vY2N1cGF0aW9uXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvY2N1cGF0aW9uUG9pbnRzXG4gIH1cblxuICBnZXQgb2NjdXBhdGlvblBvaW50cyAoKSB7XG4gICAgaWYgKCF0aGlzLm9jY3VwYXRpb24pIHJldHVybiAwXG4gICAgbGV0IHBvaW50cyA9IDBcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgdGhpcy5vY2N1cGF0aW9uLmRhdGEuZGF0YS5vY2N1cGF0aW9uU2tpbGxQb2ludHNcbiAgICApKSB7XG4gICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBlbnRyeVxuICAgICAgY29uc3QgY2hhciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoa2V5KVxuICAgICAgaWYgKHZhbHVlLnNlbGVjdGVkKSB7XG4gICAgICAgIHBvaW50cyArPSBjaGFyLnZhbHVlICogTnVtYmVyKHZhbHVlLm11bHRpcGxpZXIpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwb2ludHNcbiAgfVxuXG4gIGFzeW5jIHJlc2V0T2NjdXBhdGlvblBvaW50cyAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ2RhdGEuZGV2ZWxvcG1lbnQub2NjdXBhdGlvbic6IHRoaXMub2NjdXBhdGlvblBvaW50c1xuICAgIH0pXG4gIH1cblxuICBhc3luYyByZXNldEFyY2hldHlwZVBvaW50cyAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ2RhdGEuZGV2ZWxvcG1lbnQuYXJjaGV0eXBlJzogdGhpcy5vY2N1cGF0aW9uUG9pbnRzXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIHJlc2V0UGVyc29uYWxQb2ludHMgKCkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICdkYXRhLmRldmVsb3BtZW50LnBlcnNvbmFsJzogdGhpcy5wZXJzb25hbFBvaW50c1xuICAgIH0pXG4gIH1cblxuICBnZXQgYXJjaGV0eXBlUG9pbnRzU3BlbnQgKCkge1xuICAgIGxldCBhcmNoZXR5cGVQb2ludHMgPSAwXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKHNraWxsLmRhdGEuZGF0YS5hZGp1c3RtZW50cz8uYXJjaGV0eXBlKSB7XG4gICAgICAgIGFyY2hldHlwZVBvaW50cyArPSBza2lsbC5kYXRhLmRhdGEuYWRqdXN0bWVudHMuYXJjaGV0eXBlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcmNoZXR5cGVQb2ludHNcbiAgfVxuXG4gIGdldCBhcmNoZXR5cGVQb2ludHMgKCkge1xuICAgIGlmICghdGhpcy5hcmNoZXR5cGUpIHJldHVybiAwXG4gICAgcmV0dXJuIHRoaXMuYXJjaGV0eXBlLmRhdGEuZGF0YS5ib251c1BvaW50c1xuICB9XG5cbiAgZ2V0IGV4cGVyaWVuY2VQb2ludHMgKCkge1xuICAgIGxldCBleHBlcmllbmNlUG9pbnRzID0gMFxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgIGlmIChza2lsbC5kYXRhLmRhdGEuYWRqdXN0bWVudHM/LmV4cGVyaWVuY2UpIHtcbiAgICAgICAgZXhwZXJpZW5jZVBvaW50cyArPSBza2lsbC5kYXRhLmRhdGEuYWRqdXN0bWVudHMuZXhwZXJpZW5jZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZXhwZXJpZW5jZVBvaW50c1xuICB9XG5cbiAgZ2V0IHBlcnNvbmFsUG9pbnRzU3BlbnQgKCkge1xuICAgIGxldCBwZXJzb25hbFBvaW50cyA9IDBcbiAgICBmb3IgKGNvbnN0IHNraWxsIG9mIHRoaXMuc2tpbGxzKSB7XG4gICAgICBpZiAoc2tpbGwuZGF0YS5kYXRhLmFkanVzdG1lbnRzPy5wZXJzb25hbCkge1xuICAgICAgICBwZXJzb25hbFBvaW50cyArPSBza2lsbC5kYXRhLmRhdGEuYWRqdXN0bWVudHMucGVyc29uYWxcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBlcnNvbmFsUG9pbnRzXG4gIH1cblxuICBnZXQgcGVyc29uYWxQb2ludHMgKCkge1xuICAgIHJldHVybiAyICogTnVtYmVyKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5pbnQudmFsdWUpXG4gIH1cblxuICBnZXQgaGFzRGV2ZWxvcG1lbnRQaGFzZSAoKSB7XG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKHNraWxsLmRhdGEuZGF0YS5mbGFncz8uZGV2ZWxvcGVtZW50KSByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5vbmx5UnVuT25jZVBlclNlc3Npb24pIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHNhbml0eUxvc3NFdmVudCBvZiB0aGlzLmRhdGEuZGF0YS5zYW5pdHlMb3NzRXZlbnRzKSB7XG4gICAgICBpZiAoIXNhbml0eUxvc3NFdmVudC5pbW11bml0eSkgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhc3luYyBzZXRTYW4gKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAwXG4gICAgaWYgKHZhbHVlID4gdGhpcy5zYW5NYXgpIHZhbHVlID0gdGhpcy5zYW5NYXhcbiAgICBjb25zdCBsb3NzID0gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuYXR0cmlicy5zYW4udmFsdWUpIC0gdmFsdWVcblxuICAgIGlmIChsb3NzID4gMCkge1xuICAgICAgbGV0IHRvdGFsTG9zcyA9IHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMuc2FuLmRhaWx5TG9zcylcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLnNhbi5kYWlseUxvc3MpXG4gICAgICAgIDogMFxuICAgICAgdG90YWxMb3NzID0gdG90YWxMb3NzICsgbG9zc1xuICAgICAgaWYgKGxvc3MgPj0gNSkgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUpXG4gICAgICBpZiAodG90YWxMb3NzID49IE1hdGguZmxvb3IodGhpcy5zYW4gLyA1KSkge1xuICAgICAgICB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5pbmRlZkluc2FuZSlcbiAgICAgIH1cbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdkYXRhLmF0dHJpYnMuc2FuLnZhbHVlJzogdmFsdWUsXG4gICAgICAgICdkYXRhLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyc6IHRvdGFsTG9zc1xuICAgICAgfSlcbiAgICB9IGVsc2UgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuYXR0cmlicy5zYW4udmFsdWUnOiB2YWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgc2V0QXR0cmliQXV0byAodmFsdWUsIGF0dHJpYikge1xuICAgIGNvbnN0IHVwZGF0ZWRLZXkgPSBgZGF0YS5hdHRyaWJzLiR7YXR0cmlifS5hdXRvYFxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7IFt1cGRhdGVkS2V5XTogdmFsdWUgfSlcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZUF0dHJpYkF1dG8gKGF0dHJpYikge1xuICAgIHRoaXMuc2V0QXR0cmliQXV0byghdGhpcy5kYXRhLmRhdGEuYXR0cmlic1thdHRyaWJdLmF1dG8sIGF0dHJpYilcbiAgfVxuXG4gIGdldCBidWlsZCAoKSB7XG4gICAgaWYgKFsndmVoaWNsZSddLmluY2x1ZGVzKHRoaXMuZGF0YS50eXBlKSkge1xuICAgICAgY29uc3QgYnVpbGQgPSBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmJ1aWxkLnZhbHVlKVxuICAgICAgcmV0dXJuIGlzTmFOKGJ1aWxkKSA/IG51bGwgOiBidWlsZFxuICAgIH1cbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLmF0dHJpYnMpIHJldHVybiBudWxsXG4gICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmJ1aWxkKSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmJ1aWxkLnZhbHVlID09PSAnYXV0bycpIHtcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMuYnVpbGQuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMuYnVpbGQuYXV0bykge1xuICAgICAgY29uc3Qgc3VtID1cbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZSArXG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWVcbiAgICAgIGlmIChzdW0gPiAxNjQpIHJldHVybiBNYXRoLmZsb29yKChzdW0gLSA0NSkgLyA4MCkgKyAxXG4gICAgICBpZiAoc3VtIDwgNjUpIHJldHVybiAtMlxuICAgICAgaWYgKHN1bSA8IDg1KSByZXR1cm4gLTFcbiAgICAgIGlmIChzdW0gPCAxMjUpIHJldHVybiAwXG4gICAgICBpZiAoc3VtIDwgMTY1KSByZXR1cm4gMVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmJ1aWxkLnZhbHVlXG4gIH1cblxuICBnZXQgZGIgKCkge1xuICAgIGlmIChbJ3ZlaGljbGUnXS5pbmNsdWRlcyh0aGlzLmRhdGEudHlwZSkpIHJldHVybiAwXG4gICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5hdHRyaWJzKSByZXR1cm4gbnVsbFxuICAgIGlmICghdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5kYikgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuYXR0cmlicy5kYi52YWx1ZSA9PT0gJ2F1dG8nKSB7XG4gICAgICB0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmRiLmF1dG8gPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmRiLmF1dG8pIHtcbiAgICAgIGNvbnN0IHN1bSA9XG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUgK1xuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlXG4gICAgICBpZiAoc3VtID4gMTY0KSByZXR1cm4gYCR7TWF0aC5mbG9vcigoc3VtIC0gNDUpIC8gODApfUQ2YFxuICAgICAgaWYgKHN1bSA8IDY1KSByZXR1cm4gLTJcbiAgICAgIGlmIChzdW0gPCA4NSkgcmV0dXJuIC0xXG4gICAgICBpZiAoc3VtIDwgMTI1KSByZXR1cm4gMFxuICAgICAgaWYgKHN1bSA8IDE2NSkgcmV0dXJuICcxRDQnXG4gICAgfVxuICAgIHJldHVybiB0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmRiLnZhbHVlXG4gIH1cblxuICBnZXQgbW92ICgpIHtcbiAgICBpZiAoWyd2ZWhpY2xlJ10uaW5jbHVkZXModGhpcy5kYXRhLnR5cGUpKSB7XG4gICAgICByZXR1cm4gdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5tb3YudmFsdWVcbiAgICB9XG4gICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5hdHRyaWJzKSByZXR1cm4gbnVsbFxuICAgIGlmICghdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5tb3YpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMubW92LnZhbHVlID09PSAnYXV0bycpIHtcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMubW92LmF1dG8gPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLm1vdi5hdXRvKSB7XG4gICAgICBsZXQgTU9WXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUgPlxuICAgICAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgJiZcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZSA+XG4gICAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZVxuICAgICAgKSB7XG4gICAgICAgIE1PViA9IDkgLy8gQnVnIGNvcnJlY3Rpb24gYnkgQWRtaXJhbE55YXIuXG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlID49XG4gICAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZSB8fFxuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Muc3RyLnZhbHVlID49XG4gICAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZVxuICAgICAgKSB7XG4gICAgICAgIE1PViA9IDhcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIE1PViA9IDdcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmRhdGEuZGF0YS50eXBlICE9PSAnY3JlYXR1cmUnKSB7XG4gICAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuaW5mb3MuYWdlKSkpIHtcbiAgICAgICAgICBNT1YgPVxuICAgICAgICAgICAgcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuaW5mb3MuYWdlKSA+PSA0MFxuICAgICAgICAgICAgICA/IE1PViAtIE1hdGguZmxvb3IocGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuaW5mb3MuYWdlKSAvIDEwKSArIDNcbiAgICAgICAgICAgICAgOiBNT1ZcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKE1PViA+IDApIHJldHVybiBNT1ZcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMubW92LnZhbHVlXG4gIH1cblxuICBnZXQgdG9rZW5JZCAoKSB7XG4gICAgLy8gVE9ETyBjbGFyaWZpZXIgY2EgZXQgdG9rZW5rZXlcbiAgICByZXR1cm4gdGhpcy50b2tlbiA/IGAke3RoaXMudG9rZW4uc2NlbmUuX2lkfS4ke3RoaXMudG9rZW4uaWR9YCA6IG51bGwgLy8gUkVGQUNUT1JJTkcgKDIpXG4gIH1cblxuICBnZXQgbG9ja2VkICgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLmZsYWdzKSB7XG4gICAgICB0aGlzLmRhdGEuZGF0YS5mbGFncyA9IHt9XG4gICAgICB0aGlzLmRhdGEuZGF0YS5mbGFncy5sb2NrZWQgPSB0cnVlIC8vIExvY2tlZCBieSBkZWZhdWx0XG4gICAgICB0aGlzLnVwZGF0ZSh7ICdkYXRhLmZsYWdzJzoge30gfSlcbiAgICAgIHRoaXMudXBkYXRlKHsgJ2RhdGEuZmxhZ3MubG9ja2VkJzogZmFsc2UgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kYXRhLmRhdGEuZmxhZ3MubG9ja2VkXG4gIH1cblxuICBnZXRJdGVtc0Zyb21OYW1lIChuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbXMuZmlsdGVyKGkgPT4gaS5uYW1lID09PSBuYW1lKVxuICB9XG5cbiAgc2V0IGxvY2tlZCAodmFsdWUpIHtcbiAgICB0aGlzLnVwZGF0ZSh7ICdkYXRhLmZsYWdzLmxvY2tlZCc6IHZhbHVlIH0pXG4gIH1cblxuICBhc3luYyB0b2dnbGVBY3RvckZsYWcgKGZsYWdOYW1lKSB7XG4gICAgY29uc3QgZmxhZ1ZhbHVlID0gIXRoaXMuZGF0YS5kYXRhLmZsYWdzW2ZsYWdOYW1lXVxuICAgIGNvbnN0IG5hbWUgPSBgZGF0YS5mbGFncy4ke2ZsYWdOYW1lfWBcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtuYW1lXTogZmxhZ1ZhbHVlIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBhdHRyaWJ1dGVOYW1lIGtleSBvZiBhdHRyaWJ1dGUgdG8gY2hlY2sgaW4gWydsY2snXVxuICAgKiBAcGFyYW0geyp9IGZhc3RGb3J3YXJkXG4gICAqIEBwYXJhbSB7Kn0gb3B0aW9ucyBkaWZmaWN1bHR5IGluIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwsIG1vZGlmaWVyICgtMiArMiksIG5hbWVcbiAgICovXG4gIGFzeW5jIGF0dHJpYnV0ZUNoZWNrIChhdHRyaWJ1dGVOYW1lLCBmYXN0Rm9yd2FyZCA9IGZhbHNlLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBhdHRyaWIgPSB0aGlzLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLnRvTG93ZXJDYXNlKCkpXG4gICAgaWYgKCFhdHRyaWIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RGb3VuZCcsIHtcbiAgICAgICAgICBtaXNzaW5nOiBhdHRyaWJ1dGVOYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG5cbiAgICBpZiAob3B0aW9ucy5tb2RpZmllcikgY2hlY2suZGljZU1vZGlmaWVyID0gTnVtYmVyKG9wdGlvbnMubW9kaWZpZXIpXG4gICAgaWYgKG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkob3B0aW9ucy5kaWZmaWN1bHR5KVxuICAgIH1cblxuICAgIGlmICghZmFzdEZvcndhcmQpIHtcbiAgICAgIGlmICh1bmRlZmluZWQgPT09IG9wdGlvbnMuZGlmZmljdWx0eSB8fCB1bmRlZmluZWQgPT09IG9wdGlvbnMubW9kaWZpZXIpIHtcbiAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShvcHRpb25zKVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICAgICAgdXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy50b2tlbktleVxuICAgIGlmIChvcHRpb25zLmJsaW5kID09PSAnZmFsc2UnKSBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICBlbHNlIGNoZWNrLmlzQmxpbmQgPSAhIW9wdGlvbnMuYmxpbmRcbiAgICBhd2FpdCBjaGVjay5yb2xsQXR0cmlidXRlKGF0dHJpYi5rZXkpXG4gICAgY2hlY2sudG9NZXNzYWdlKClcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGNoYXJhY3RlcmlzdGljTmFtZSBrZXkgb2YgY2hhcmFjdGVyaXN0aWMgdG8gY2hlY2sgaW4gWydzdHInLCdjb24nLCdzaXonLCdkZXgnLCdhcHAnLCdpbnQnLCdwb3cnLCdlZHUnXVxuICAgKiBAcGFyYW0geyp9IGZhc3RGb3J3YXJkXG4gICAqIEBwYXJhbSB7Kn0gb3B0aW9ucyBkaWZmaWN1bHR5IGluIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwsIG1vZGlmaWVyICgtMiArMiksIG5hbWVcbiAgICovXG4gIGFzeW5jIGNoYXJhY3RlcmlzdGljQ2hlY2sgKFxuICAgIGNoYXJhY3RlcmlzdGljTmFtZSxcbiAgICBmYXN0Rm9yd2FyZCA9IGZhbHNlLFxuICAgIG9wdGlvbnMgPSB7fVxuICApIHtcbiAgICBjb25zdCBjaGFyID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYyhjaGFyYWN0ZXJpc3RpY05hbWUpXG5cbiAgICBpZiAoIWNoYXIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RGb3VuZEZvckFjdG9yJywge1xuICAgICAgICAgIG1pc3Npbmc6IGNoYXJhY3RlcmlzdGljTmFtZSxcbiAgICAgICAgICBhY3RvcjogdGhpcy5uYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuXG4gICAgaWYgKG9wdGlvbnMubW9kaWZpZXIpIGNoZWNrLmRpY2VNb2RpZmllciA9IE51bWJlcihvcHRpb25zLm1vZGlmaWVyKVxuICAgIGlmIChvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3VXRpbGl0aWVzLmNvbnZlcnREaWZmaWN1bHR5KG9wdGlvbnMuZGlmZmljdWx0eSlcbiAgICB9XG5cbiAgICBpZiAoIWZhc3RGb3J3YXJkKSB7XG4gICAgICBpZiAodW5kZWZpbmVkID09PSBvcHRpb25zLmRpZmZpY3VsdHkgfHwgdW5kZWZpbmVkID09PSBvcHRpb25zLm1vZGlmaWVyKSB7XG4gICAgICAgIG9wdGlvbnMuZGlzcGxheU5hbWUgPSBjaGFyLmxhYmVsXG4gICAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUob3B0aW9ucylcbiAgICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXG4gICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IE51bWJlcih1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKSlcbiAgICAgICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcihcbiAgICAgICAgICAgIHVzYWdlLmdldCgnZmxhdFRocmVzaG9sZE1vZGlmaWVyJylcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjaGVjay5hY3RvciA9IHRoaXMudG9rZW5LZXlcbiAgICBpZiAob3B0aW9ucy5ibGluZCA9PT0gJ2ZhbHNlJykgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgZWxzZSBjaGVjay5pc0JsaW5kID0gISFvcHRpb25zLmJsaW5kXG4gICAgYXdhaXQgY2hlY2sucm9sbENoYXJhY3RlcmlzdGljKGNoYXIua2V5KVxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gIH1cblxuICBhc3luYyBza2lsbENoZWNrIChza2lsbERhdGEsIGZhc3RGb3J3YXJkLCBvcHRpb25zID0ge30pIHtcbiAgICBsZXQgc2tpbGwgPSB0aGlzLmdldFNraWxsc0J5TmFtZShcbiAgICAgIHNraWxsRGF0YS5uYW1lID8gc2tpbGxEYXRhLm5hbWUgOiBza2lsbERhdGFcbiAgICApXG4gICAgaWYgKCFza2lsbC5sZW5ndGgpIHtcbiAgICAgIGxldCBpdGVtID0gbnVsbFxuICAgICAgaWYgKHNraWxsRGF0YS5wYWNrKSB7XG4gICAgICAgIGNvbnN0IHBhY2sgPSBnYW1lLnBhY2tzLmdldChza2lsbERhdGEucGFjaylcbiAgICAgICAgaWYgKHBhY2subWV0YWRhdGEuZW50aXR5ICE9PSAnSXRlbScpIHJldHVyblxuICAgICAgICBpdGVtID0gYXdhaXQgcGFjay5nZXREb2N1bWVudChza2lsbERhdGEuaWQpXG4gICAgICB9IGVsc2UgaWYgKHNraWxsRGF0YS5pZCkge1xuICAgICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQoc2tpbGxEYXRhLmlkKVxuICAgICAgfVxuXG4gICAgICAvLyBObyBza2lsbCBmb3VuZCwgdHJ5IHRvIGdldCBnZXQgaXQgZnJvbSBjb21wZW5kaXVtICFcbiAgICAgIGlmICghaXRlbSkge1xuICAgICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgcmV0cmlldmFsIG9mIHNraWxsIGZyb20gY29tcGVuZGl1bSAhIVxuICAgICAgICAvLyBnYW1lLnNldHRpbmdzLmdldCggJ0NvQzcnLCAnRGVmYXVsdENvbXBlbmRpdW0nKTtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgICAgY2hlY2suX3Jhd1ZhbHVlID0gJz8nXG4gICAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgICAgfVxuICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ob1NraWxsJykgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEZvdW5kRm9yQWN0b3InLCB7XG4gICAgICAgICAgICAgIG1pc3Npbmc6IHNraWxsRGF0YS5uYW1lID8gc2tpbGxEYXRhLm5hbWUgOiBza2lsbERhdGEsXG4gICAgICAgICAgICAgIGFjdG9yOiB0aGlzLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgbGV0IGNyZWF0ZSA9IGZhbHNlXG4gICAgICBhd2FpdCBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgIHRpdGxlOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWRkV2VhcG9uJyl9YCxcbiAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BZGRXZWFwb250SGludCcsIHtcbiAgICAgICAgICB3ZWFwb246IHNraWxsRGF0YS5uYW1lLFxuICAgICAgICAgIGFjdG9yOiB0aGlzLm5hbWVcbiAgICAgICAgfSl9PC9wPmAsXG4gICAgICAgIHllczogKCkgPT4ge1xuICAgICAgICAgIGNyZWF0ZSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgaWYgKGNyZWF0ZSA9PT0gdHJ1ZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2R1cGxpY2F0ZShpdGVtKV0pXG4gICAgICB9IGVsc2UgcmV0dXJuXG5cbiAgICAgIHNraWxsID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoaXRlbS5uYW1lKVxuXG4gICAgICBpZiAoIXNraWxsLmxlbmd0aCkgcmV0dXJuXG5cbiAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICBjb25zdCBza2lsbFZhbHVlID0gYXdhaXQgU2tpbGxWYWx1ZURpYWxvZy5jcmVhdGUoXG4gICAgICAgICAgc2tpbGxbMF0ubmFtZSxcbiAgICAgICAgICBza2lsbFswXS5iYXNlXG4gICAgICAgIClcbiAgICAgICAgY29uc3QgdmFsdWUgPSBOdW1iZXIoc2tpbGxWYWx1ZS5nZXQoJ2Jhc2UtdmFsdWUnKSlcbiAgICAgICAgYXdhaXQgc2tpbGxbMF0udXBkYXRlVmFsdWUodmFsdWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcblxuICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMubW9kaWZpZXIpIHtcbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IE51bWJlcihvcHRpb25zLm1vZGlmaWVyKVxuICAgIH1cbiAgICBpZiAodW5kZWZpbmVkICE9PSBvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3VXRpbGl0aWVzLmNvbnZlcnREaWZmaWN1bHR5KG9wdGlvbnMuZGlmZmljdWx0eSlcbiAgICB9XG5cbiAgICBpZiAoIWZhc3RGb3J3YXJkKSB7XG4gICAgICBpZiAodW5kZWZpbmVkID09PSBvcHRpb25zLmRpZmZpY3VsdHkgfHwgdW5kZWZpbmVkID09PSBvcHRpb25zLm1vZGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUob3B0aW9ucylcbiAgICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXG4gICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IE51bWJlcih1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKSlcbiAgICAgICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcihcbiAgICAgICAgICAgIHVzYWdlLmdldCgnZmxhdFRocmVzaG9sZE1vZGlmaWVyJylcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjaGVjay5hY3RvciA9IHRoaXMudG9rZW5LZXlcbiAgICBjaGVjay5za2lsbCA9IHNraWxsWzBdLmlkXG4gICAgaWYgKG9wdGlvbnMuYmxpbmQgPT09ICdmYWxzZScpIGNoZWNrLmlzQmxpbmQgPSBmYWxzZVxuICAgIGVsc2UgY2hlY2suaXNCbGluZCA9ICEhb3B0aW9ucy5ibGluZFxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gIH1cblxuICBhc3luYyB3ZWFwb25DaGVjayAod2VhcG9uRGF0YSwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGl0ZW1JZCA9IHdlYXBvbkRhdGEuaWRcbiAgICBsZXQgd2VhcG9uXG4gICAgd2VhcG9uID0gdGhpcy5pdGVtcy5nZXQoaXRlbUlkKVxuICAgIGlmICghd2VhcG9uKSB7XG4gICAgICBsZXQgd2VhcG9ucyA9IHRoaXMuZ2V0SXRlbXNGcm9tTmFtZSh3ZWFwb25EYXRhLm5hbWUpXG4gICAgICBpZiAod2VhcG9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgbGV0IGl0ZW0gPSBudWxsXG4gICAgICAgICAgY29uc3QgcGFjayA9IHdlYXBvbkRhdGEucGFjayA/IGdhbWUucGFja3MuZ2V0KHdlYXBvbkRhdGEucGFjaykgOiBudWxsXG4gICAgICAgICAgaWYgKHBhY2spIHtcbiAgICAgICAgICAgIGlmIChwYWNrLm1ldGFkYXRhLmVudGl0eSAhPT0gJ0l0ZW0nKSByZXR1cm5cbiAgICAgICAgICAgIGl0ZW0gPSBhd2FpdCBwYWNrLmdldERvY3VtZW50KHdlYXBvbkRhdGEuaWQpXG4gICAgICAgICAgfSBlbHNlIGlmICh3ZWFwb25EYXRhLmlkKSB7XG4gICAgICAgICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQod2VhcG9uRGF0YS5pZClcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTWFjcm9Ob0l0ZW1Gb3VuZCcpXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IGNyZWF0ZSA9IGZhbHNlXG4gICAgICAgICAgYXdhaXQgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BZGRXZWFwb24nKX1gLFxuICAgICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BZGRXZWFwb250SGludCcsIHtcbiAgICAgICAgICAgICAgd2VhcG9uOiB3ZWFwb25EYXRhLm5hbWUsXG4gICAgICAgICAgICAgIGFjdG9yOiB0aGlzLm5hbWVcbiAgICAgICAgICAgIH0pfTwvcD5gLFxuICAgICAgICAgICAgeWVzOiAoKSA9PiB7XG4gICAgICAgICAgICAgIGNyZWF0ZSA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIGNvbnN0IGFjdG9yID1cbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLnBhcmVudD8uYWN0b3IgIT09ICd1bmRlZmluZWQnID8gdGhpcy5wYXJlbnQuYWN0b3IgOiB0aGlzXG5cbiAgICAgICAgICBpZiAoY3JlYXRlID09PSB0cnVlKSB7XG4gICAgICAgICAgICBhd2FpdCBhY3Rvci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtpdGVtLnRvSlNPTigpXSlcbiAgICAgICAgICB9IGVsc2UgcmV0dXJuXG4gICAgICAgICAgd2VhcG9ucyA9IGFjdG9yLmdldEl0ZW1zRnJvbU5hbWUoaXRlbS5uYW1lKVxuICAgICAgICAgIGlmICghd2VhcG9ucy5sZW5ndGgpIHJldHVyblxuICAgICAgICAgIGF3YWl0IHdlYXBvbnNbMF0ucmVsb2FkKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICBgQWN0b3IgJHt0aGlzLm5hbWV9IGhhcyBubyB3ZWFwb24gbmFtZWQgJHt3ZWFwb25EYXRhLm5hbWV9YFxuICAgICAgICAgIClcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh3ZWFwb25zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgIGBBY3RvciAke3RoaXMubmFtZX0gaGFzIG1vcmUgdGhhbiBvbmUgd2VhcG9uIG5hbWVkICR7d2VhcG9uRGF0YS5uYW1lfS4gVGhlIGZpcnN0IGZvdW5kIHdpbGwgYmUgdXNlZGBcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgd2VhcG9uID0gd2VhcG9uc1swXVxuICAgIH1cblxuICAgIGlmICghd2VhcG9uLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLnJuZ2QpIHtcbiAgICAgIGlmIChnYW1lLnVzZXIudGFyZ2V0cy5zaXplID4gMSkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5Ub29NYW55VGFyZ2V0JykpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ29DN01lbGVlSW5pdGlhdG9yKHRoaXMudG9rZW5LZXksIHdlYXBvbi5pZCwgZmFzdEZvcndhcmQpXG4gICAgICBjYXJkLmNyZWF0ZUNoYXRDYXJkKClcbiAgICB9XG4gICAgaWYgKHdlYXBvbi5kYXRhLmRhdGEucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICBjb25zdCBjYXJkID0gbmV3IENvQzdSYW5nZUluaXRpYXRvcih0aGlzLnRva2VuS2V5LCB3ZWFwb24uaWQsIGZhc3RGb3J3YXJkKVxuICAgICAgY2FyZC5jcmVhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcm9sbEluaXRpYXRpdmUgKGhhc0d1biA9IGZhbHNlKSB7XG4gICAgc3dpdGNoIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdpbml0aWF0aXZlUnVsZScpKSB7XG4gICAgICBjYXNlICdvcHRpb25hbCc6IHtcbiAgICAgICAgY29uc3Qgcm9sbCA9IG5ldyBDb0M3Q2hlY2sodGhpcy5hY3RvcktleSlcbiAgICAgICAgcm9sbC5kZW55UHVzaCA9IHRydWVcbiAgICAgICAgcm9sbC5kZW55THVjayA9IHRydWVcbiAgICAgICAgcm9sbC5kZW55QmxpbmRUYW1wZXJpbmcgPSB0cnVlXG4gICAgICAgIHJvbGwuaGlkZURpY2UgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5SW5pdERpY2VzJykgPT09IGZhbHNlXG4gICAgICAgIHJvbGwuZmxhdm9yID0gJ0luaXRpYXRpdmUgcm9sbCdcbiAgICAgICAgYXdhaXQgcm9sbC5yb2xsQ2hhcmFjdGVyaXN0aWMoJ2RleCcsIGhhc0d1biA/IDEgOiAwKVxuICAgICAgICByb2xsLnRvTWVzc2FnZSgpXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgcm9sbC5zdWNjZXNzTGV2ZWwgKyB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlIC8gMTAwXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGhhc0d1blxuICAgICAgICAgID8gdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZSArIDUwXG4gICAgICAgICAgOiB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlXG4gICAgfVxuICB9XG5cbiAgZ2V0QWN0b3JGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghdGhpcy5kYXRhLmRhdGEuZmxhZ3MpIHtcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmZsYWdzID0ge31cbiAgICAgIHRoaXMuZGF0YS5kYXRhLmZsYWdzLmxvY2tlZCA9IHRydWVcbiAgICAgIHRoaXMudXBkYXRlKHsgJ2RhdGEuZmxhZ3MnOiB7fSB9KVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5mbGFnc1tmbGFnTmFtZV0pIHJldHVybiBmYWxzZVxuICAgIHJldHVybiB0aGlzLmRhdGEuZGF0YS5mbGFnc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGFzeW5jIHNldEFjdG9yRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtgZGF0YS5mbGFncy4ke2ZsYWdOYW1lfWBdOiB0cnVlIH0pXG4gIH1cblxuICBhc3luYyB1bnNldEFjdG9yRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtgZGF0YS5mbGFncy4ke2ZsYWdOYW1lfWBdOiBmYWxzZSB9KVxuICB9XG5cbiAgZ2V0V2VhcG9uU2tpbGxzIChpdGVtSWQpIHtcbiAgICBjb25zdCB3ZWFwb24gPSB0aGlzLml0ZW1zLmdldChpdGVtSWQpXG4gICAgaWYgKHdlYXBvbi5kYXRhLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IHNraWxscyA9IFtdXG4gICAgaWYgKHdlYXBvbi5kYXRhLmRhdGEuc2tpbGwubWFpbi5pZCkge1xuICAgICAgc2tpbGxzLnB1c2godGhpcy5pdGVtcy5nZXQod2VhcG9uLmRhdGEuZGF0YS5za2lsbC5tYWluLmlkKSlcbiAgICB9XG5cbiAgICBpZiAod2VhcG9uLnVzZXNBbHRlcm5hdGl2ZVNraWxsICYmIHdlYXBvbi5kYXRhLmRhdGEuc2tpbGwuYWx0ZXJuYXRpdi5pZCkge1xuICAgICAgc2tpbGxzLnB1c2godGhpcy5pdGVtcy5nZXQod2VhcG9uLmRhdGEuZGF0YS5za2lsbC5hbHRlcm5hdGl2LmlkKSlcbiAgICB9XG5cbiAgICByZXR1cm4gc2tpbGxzXG4gIH1cblxuICAvKiogVHJ5IHRvIGZpbmQgYSBjaGFyYWN0ZXJpc3RpYywgYXR0cmlidXRlIG9yIHNraWxsIHRoYXQgbWF0Y2hlcyB0aGUgbmFtZSAqL1xuICBmaW5kIChuYW1lKSB7XG4gICAgLy8gVHJ5IElEXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuaXRlbXMuZ2V0KG5hbWUpXG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdpdGVtJyxcbiAgICAgICAgdmFsdWU6IGl0ZW1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCByZWdFeHAgPSAvXFwoKFteKV0rKVxcKS9cbiAgICBjb25zdCBtYXRjaGVzID0gcmVnRXhwLmV4ZWMobmFtZSlcbiAgICBsZXQgc2hvcnROYW1lID0gbnVsbFxuICAgIGlmIChtYXRjaGVzICYmIG1hdGNoZXMubGVuZ3RoKSBzaG9ydE5hbWUgPSBtYXRjaGVzWzFdXG4gICAgLy8gVHJ5IHRvIGZpbmQgYSBza2lsbCB3aXRoIGV4YWN0IG5hbWUuXG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLnNraWxscy5maWx0ZXIocyA9PiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICAhIXMubmFtZSAmJlxuICAgICAgICAocy5uYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICcnKSA9PT1cbiAgICAgICAgICBuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICcnKSB8fFxuICAgICAgICAgIHMubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgPT09XG4gICAgICAgICAgICBuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICcnKSB8fFxuICAgICAgICAgIHMubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgPT09XG4gICAgICAgICAgICBzaG9ydE5hbWU/LnRvTG9jYWxlTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICcnKSlcbiAgICAgIClcbiAgICB9KVxuICAgIGlmIChza2lsbC5sZW5ndGgpIHJldHVybiB7IHR5cGU6ICdpdGVtJywgdmFsdWU6IHNraWxsWzBdIH1cblxuICAgIC8vIFRyeSB0byBmaW5kIGEgY2hhcmFjdGVyaXN0aWMuXG4gICAgY29uc3QgY2hhcktleSA9IFsnc3RyJywgJ2NvbicsICdzaXonLCAnZGV4JywgJ2FwcCcsICdpbnQnLCAncG93JywgJ2VkdSddXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFyS2V5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjaGFyID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYyhjaGFyS2V5W2ldKVxuICAgICAgaWYgKGNoYXIpIHtcbiAgICAgICAgaWYgKGNoYXIua2V5Py50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnLCB2YWx1ZTogY2hhciB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYXIuc2hvcnROYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnLCB2YWx1ZTogY2hhciB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYXIubGFiZWw/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdjaGFyYWN0ZXJpc3RpYycsIHZhbHVlOiBjaGFyIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRyeSB0byBmaW5kIGEgYXR0cmlidXRlLlxuICAgIGNvbnN0IGF0dHJpYktleSA9IFsnbGNrJywgJ3NhbiddXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdHRyaWJLZXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGF0dHIgPSB0aGlzLmdldEF0dHJpYnV0ZShhdHRyaWJLZXlbaV0pXG4gICAgICBpZiAoYXR0cikge1xuICAgICAgICBpZiAoYXR0ci5rZXk/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdhdHRyaWJ1dGUnLCB2YWx1ZTogYXR0ciB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF0dHIuc2hvcnROYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnYXR0cmlidXRlJywgdmFsdWU6IGF0dHIgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRyLmxhYmVsPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnYXR0cmlidXRlJywgdmFsdWU6IGF0dHIgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVHJ5IHdpdGggcGFydGlhbCA/P1xuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBwaWxvdFNraWxscyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2tpbGxzLmZpbHRlcihzID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHMuZGF0YS5kYXRhLnByb3BlcnRpZXM/LnNwZWNpYWwgJiZcbiAgICAgICAgcy5kYXRhLmRhdGEuc3BlY2lhbGl6YXRpb24/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgZ2FtZS5pMThuXG4gICAgICAgICAgICAubG9jYWxpemUoJ0NvQzcuUGlsb3RTcGVjaWFsaXphdGlvbk5hbWUnKVxuICAgICAgICAgICAgPy50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgfSlcbiAgfVxuXG4gIGdldCBkcml2ZVNraWxscyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2tpbGxzLmZpbHRlcihzID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHMuZGF0YS5kYXRhLnByb3BlcnRpZXM/LnNwZWNpYWwgJiZcbiAgICAgICAgcy5kYXRhLmRhdGEuc3BlY2lhbGl6YXRpb24/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgZ2FtZS5pMThuXG4gICAgICAgICAgICAubG9jYWxpemUoJ0NvQzcuRHJpdmVTcGVjaWFsaXphdGlvbk5hbWUnKVxuICAgICAgICAgICAgPy50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgfSlcbiAgfVxuXG4gIGdldCB0b2tlbktleSAoKSB7XG4gICAgLy8gQ2xhcmlmaWVyIGNhIGV0IHRva2VuaWRcbiAgICAvKiogKiBNT0RJRiAwLjgueCAqL1xuICAgIC8vIGlmIHRoaXMuc2hlZXQudG9rZW4gPT4gd2FzIG9wZW5lZCBmcm9tIHRva2VuXG4gICAgLy8gaWYgdGhpcy50b2tlbiA9PiBzeW50aGV0aWMgYWN0b3IgPT0gdGhpcy5pc1Rva2VuXG4gICAgaWYgKHRoaXMuc2hlZXQudG9rZW4pIHtcbiAgICAgIHJldHVybiBgJHt0aGlzLnNoZWV0LnRva2VuLnBhcmVudC5pZH0uJHt0aGlzLnNoZWV0LnRva2VuLmlkfWBcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gcmV0dXJuIG51bGw7XG4gICAgICByZXR1cm4gdGhpcy5pZFxuICAgIH1cbiAgICAvKioqKioqKioqKioqKioqKiovXG4gICAgLy8gLy9DYXNlIDE6IHRoZSBhY3RvciBpcyBhIHN5bnRoZXRpYyBhY3RvciBhbmQgaGFzIGEgdG9rZW4sIHJldHVybiB0b2tlbiBrZXkuXG4gICAgLy8gaWYoIHRoaXMuaXNUb2tlbikgcmV0dXJuIGAke3RoaXMudG9rZW4uc2NlbmU/Ll9pZD90aGlzLnRva2VuLnNjZW5lLl9pZDonVE9LRU4nfS4ke3RoaXMudG9rZW4uaWR9YDsgIC8vUkVGQUNUT1JJTkcgKDIpXG5cbiAgICAvLyAvL0Nhc2UgMjogdGhlIGFjdG9yIGlzIG5vdCBhIHRva2VuIChsaW5rZWQgYWN0b3IpLiBJZiB0aGUgc2hlZXQgaGF2ZSBhbiBhc3NvY2lhdGVkIHRva2VuIHJldHVybiB0aGUgdG9rZW4ga2V5LlxuICAgIC8vIGlmKCB0aGlzLnNoZWV0LnRva2VuKSByZXR1cm4gYCR7dGhpcy5zaGVldC50b2tlbi5zY2VuZT8uaWQ/dGhpcy5zaGVldC50b2tlbi5zY2VuZS5pZDonVE9LRU4nfS4ke3RoaXMuc2hlZXQudG9rZW4uaWR9YDtcblxuICAgIC8vIC8vQ2FzZSAzOiBBY3RvciBoYXMgbm8gdG9rZW4gcmV0dXJuIGhpcyBJRDtcbiAgICAvLyByZXR1cm4gdGhpcy5pZDtcbiAgfVxuXG4gIGdldCBhY3RvcktleSAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS50b2tlbi5hY3RvckxpbmspIHJldHVybiB0aGlzLmlkIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIHJldHVybiB0aGlzLnRva2VuS2V5XG4gIH1cblxuICBzdGF0aWMgZ2V0QWN0b3JGcm9tS2V5IChrZXkpIHtcbiAgICAvLyBDYXNlIDEgLSBhIHN5bnRoZXRpYyBhY3RvciBmcm9tIGEgVG9rZW5cbiAgICBpZiAoa2V5LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0ga2V5LnNwbGl0KCcuJylcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XG4gICAgICAgIHJldHVybiBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0gLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbkRhdGEgPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXG4gICAgICAgIGlmICghdG9rZW5EYXRhKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbiA9IG5ldyBUb2tlbih0b2tlbkRhdGEpXG4gICAgICAgIHJldHVybiB0b2tlbi5hY3RvclxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENhc2UgMiAtIHVzZSBBY3RvciBJRCBkaXJlY3RvcnlcbiAgICByZXR1cm4gZ2FtZS5hY3RvcnMuZ2V0KGtleSkgfHwgbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIFVzZSB0aGUgZm9ybXVsYSBpZiBhdmFpbGFibGUgdG8gcm9sbCBzb21lIGNoYXJhY3Rlcml0aWNzLlxuICAgKi9cbiAgYXN5bmMgcm9sbENoYXJhY3RlcmlzdGljc1ZhbHVlICgpIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY3MgPSB7fVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcykpIHtcbiAgICAgIGlmICh2YWx1ZS5mb3JtdWxhICYmICF2YWx1ZS5mb3JtdWxhLnN0YXJ0c1dpdGgoJ0AnKSkge1xuICAgICAgICBjb25zdCByID0gbmV3IFJvbGwodmFsdWUuZm9ybXVsYSlcbiAgICAgICAgYXdhaXQgci5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgaWYgKHIudG90YWwpIHtcbiAgICAgICAgICBjaGFyYWN0ZXJpc3RpY3NbYGRhdGEuY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS52YWx1ZWBdID0gTWF0aC5mbG9vcihcbiAgICAgICAgICAgIHIudG90YWxcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShjaGFyYWN0ZXJpc3RpY3MpXG4gICAgYXdhaXQgdGhpcy5yZXBvcnRDaGFyYWN0ZWRyaXRpY3NWYWx1ZSgpXG4gIH1cblxuICAvKipcbiAgICogSWYgdGhlcmUgaXMgYSBmb3JtdWxhLCB3aWxsIHNldCB0aGUgY2hhcmFjdGVyaXN0aWMgdG8gdGhlIGF2ZXJhZ2UgdmFsdWUgLGlmIGRpdmlzaWJsZSBieSA1LCBvciB0aGUgY2xvc2VzdCAxMC5cbiAgICovXG4gIGFzeW5jIGF2ZXJhZ2VDaGFyYWN0ZXJpc3RpY3NWYWx1ZSAoKSB7XG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWNzID0ge31cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MpKSB7XG4gICAgICBpZiAodmFsdWUuZm9ybXVsYSAmJiAhdmFsdWUuZm9ybXVsYS5zdGFydHNXaXRoKCdAJykpIHtcbiAgICAgICAgY29uc3QgbWF4ID0gbmV3IFJvbGwodmFsdWUuZm9ybXVsYSkuZXZhbHVhdGUoeyBtYXhpbWl6ZTogdHJ1ZSB9KS50b3RhbFxuICAgICAgICBjb25zdCBtaW4gPSBuZXcgUm9sbCh2YWx1ZS5mb3JtdWxhKS5ldmFsdWF0ZSh7IG1pbmltaXplOiB0cnVlIH0pLnRvdGFsXG4gICAgICAgIGNvbnN0IGF2ZXJhZ2UgPSBNYXRoLmZsb29yKChtYXggKyBtaW4pIC8gMilcbiAgICAgICAgY29uc3QgY2hhclZhbHVlID1cbiAgICAgICAgICBhdmVyYWdlICUgNSA9PT0gMCA/IGF2ZXJhZ2UgOiBNYXRoLnJvdW5kKGF2ZXJhZ2UgLyAxMCkgKiAxMFxuICAgICAgICBpZiAoY2hhclZhbHVlKSB7XG4gICAgICAgICAgY2hhcmFjdGVyaXN0aWNzW2BkYXRhLmNoYXJhY3RlcmlzdGljcy4ke2tleX0udmFsdWVgXSA9IGNoYXJWYWx1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoY2hhcmFjdGVyaXN0aWNzKVxuICAgIGF3YWl0IHRoaXMucmVwb3J0Q2hhcmFjdGVkcml0aWNzVmFsdWUoKVxuICB9XG5cbiAgLyoqXG4gICAqIFRlc3QgaWYgYSBjaGFyYWN0ZXJpc2l0YyBmb3JtdWxhIGlzIGEgcmVmZXJlbmNlIHRvIGFuIG90aGVyIGNoYXJhY3RlcmlzdGljIGFuZCBzZXQgaXQgYWNjb3JkaW5nbHkuXG4gICAqL1xuICBhc3luYyByZXBvcnRDaGFyYWN0ZWRyaXRpY3NWYWx1ZSAoKSB7XG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWNzID0ge31cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MpKSB7XG4gICAgICBpZiAodmFsdWUuZm9ybXVsYSAmJiB2YWx1ZS5mb3JtdWxhLnN0YXJ0c1dpdGgoJ0AnKSkge1xuICAgICAgICBsZXQgY2hhclZhbHVlXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY2hhclZhbHVlID0gbmV3IFJvbGwoXG4gICAgICAgICAgICB2YWx1ZS5mb3JtdWxhLFxuICAgICAgICAgICAgdGhpcy5wYXJzZUNoYXJhY3RlcmlzdGljcygpXG4gICAgICAgICAgKS5ldmFsdWF0ZSh7IG1heGltaXplOiB0cnVlIH0pLnRvdGFsXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNoYXJWYWx1ZSA9IG51bGxcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhclZhbHVlKSB7XG4gICAgICAgICAgY2hhcmFjdGVyaXN0aWNzW2BkYXRhLmNoYXJhY3RlcmlzdGljcy4ke2tleX0udmFsdWVgXSA9IGNoYXJWYWx1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoY2hhcmFjdGVyaXN0aWNzKVxuICB9XG5cbiAgYXN5bmMgc2V0Q2hhcmFjdGVyaXN0aWMgKG5hbWUsIHZhbHVlKSB7XG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWMgPSB7fVxuICAgIGNvbnN0IGNoYXJWYWx1ZSA9IGlzTmFOKHBhcnNlSW50KHZhbHVlKSkgPyBudWxsIDogcGFyc2VJbnQodmFsdWUpXG4gICAgY2hhcmFjdGVyaXN0aWNbbmFtZV0gPSBjaGFyVmFsdWVcbiAgICBpZiAoIWNoYXJWYWx1ZSkge1xuICAgICAgaWYgKHZhbHVlLnN0YXJ0c1dpdGgoJ0AnKSkge1xuICAgICAgICBjb25zdCBmb3JtdWxhID0gbmFtZS5yZXBsYWNlKCcudmFsdWUnLCAnLmZvcm11bGEnKVxuICAgICAgICBjaGFyYWN0ZXJpc3RpY1tmb3JtdWxhXSA9IHZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoY2hhcmFjdGVyaXN0aWMpXG4gICAgYXdhaXQgdGhpcy5yZXBvcnRDaGFyYWN0ZWRyaXRpY3NWYWx1ZSgpXG4gIH1cblxuICBhc3luYyBkZXZlbG9wZW1lbnRQaGFzZSAoZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGZhaWx1cmUgPSBbXVxuICAgIGNvbnN0IHN1Y2Nlc3MgPSBbXVxuICAgIGNvbnN0IHNraWxsTWFzdGVyaW5nVGhyZXNob2xkID0gOTBcbiAgICBjb25zdCBhbHdheXNTdWNjZXNzVGhyZXNob2xkID0gOTVcblxuICAgIGNvbnN0IHRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGxBbGw0RGV2JylcbiAgICBsZXQgc2tpbGxzUm9sbGVkID0gMFxuICAgIGxldCBtZXNzYWdlID0gJzxwIGNsYXNzPVwiY2hhdC1jYXJkXCI+J1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgIGlmIChpdGVtLmRldmVsb3BlbWVudEZsYWcpIHtcbiAgICAgICAgICBza2lsbHNSb2xsZWQrK1xuICAgICAgICAgIGNvbnN0IGRpZSA9IGF3YWl0IG5ldyBEaWUoeyBmYWNlczogMTAwIH0pLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICBjb25zdCBza2lsbFZhbHVlID0gaXRlbS52YWx1ZVxuICAgICAgICAgIGxldCBhdWdtZW50ID0gbnVsbFxuICAgICAgICAgIGxldCBza2lsbE1hc3RlcmluZ01lc3NhZ2UgPSBudWxsXG4gICAgICAgICAgaWYgKGRpZS50b3RhbCA+IHNraWxsVmFsdWUgfHwgZGllLnRvdGFsID49IGFsd2F5c1N1Y2Nlc3NUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgIGNvbnN0IGF1Z21lbnREaWUgPSBhd2FpdCBuZXcgRGllKHsgZmFjZXM6IDEwIH0pLmV2YWx1YXRlKHtcbiAgICAgICAgICAgICAgYXN5bmM6IHRydWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBzdWNjZXNzLnB1c2goaXRlbS5pZClcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBTQU4gYXVnbWVudCB3aGVuIHRoZSBza2lsbCBnb2VzIGJleW9uZCB0aGUgc2tpbGwgbWFzdGVyaW5nIHRocmVzaG9sZC5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgc2tpbGxWYWx1ZSA8IHNraWxsTWFzdGVyaW5nVGhyZXNob2xkICYmXG4gICAgICAgICAgICAgIHNraWxsVmFsdWUgKyBhdWdtZW50RGllLnRvdGFsID49IHNraWxsTWFzdGVyaW5nVGhyZXNob2xkXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgYXVnbWVudFNBTkRpZSA9IGF3YWl0IG5ldyBEaWUoe1xuICAgICAgICAgICAgICAgIGZhY2VzOiA2LFxuICAgICAgICAgICAgICAgIG51bWJlcjogMlxuICAgICAgICAgICAgICB9KS5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgICAgIGNvbnN0IHNhbkdhaW5lZCA9IGF1Z21lbnRTQU5EaWUudG90YWxcbiAgICAgICAgICAgICAgY29uc3Qgc2FuR2FpbmVkTWVzc2FnZSA9IGBHYWluZWQgMmQ2ICgke2F1Z21lbnRTQU5EaWUudmFsdWVzWzBdfSArICR7YXVnbWVudFNBTkRpZS52YWx1ZXNbMV19ID0gJHtzYW5HYWluZWR9KSBTQU5gXG4gICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoc2FuR2FpbmVkTWVzc2FnZSlcbiAgICAgICAgICAgICAgc2tpbGxNYXN0ZXJpbmdNZXNzYWdlID0gYDxzcGFuIGNsYXNzPVwidXBncmFkZS1zdWNjZXNzXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICdDb0M3LlNhbkdhaW5lZCcsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgcmVzdWx0czogYCR7YXVnbWVudFNBTkRpZS52YWx1ZXNbMF19ICsgJHthdWdtZW50U0FORGllLnZhbHVlc1sxXX1gLFxuICAgICAgICAgICAgICAgICAgc2FuR2FpbmVkOiBzYW5HYWluZWQsXG4gICAgICAgICAgICAgICAgICBza2lsbDogaXRlbS5kYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgICBza2lsbFZhbHVlOiBza2lsbFZhbHVlICsgYXVnbWVudERpZS50b3RhbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKX08L3NwYW4+PGJyPmBcbiAgICAgICAgICAgICAgLy8gU2V0IHNhbiBjb250cm9scyB0aGF0IGl0IGRvZXNuJ3QgYXVnbWVudCBiZXlvbmQgc2FuTWF4XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0U2FuKHRoaXMuc2FuICsgc2FuR2FpbmVkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXVnbWVudCArPSBhdWdtZW50RGllLnRvdGFsXG4gICAgICAgICAgICBtZXNzYWdlICs9IGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtc3VjY2Vzc1wiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgJ0NvQzcuRGV2U3VjY2VzcycsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpdGVtOiBpdGVtLmRhdGEubmFtZSxcbiAgICAgICAgICAgICAgICBkaWU6IGRpZS50b3RhbCxcbiAgICAgICAgICAgICAgICBzY29yZTogaXRlbS52YWx1ZSxcbiAgICAgICAgICAgICAgICBhdWdtZW50OiBhdWdtZW50RGllLnRvdGFsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICl9PC9zcGFuPjxicj5gXG4gICAgICAgICAgICBpZiAoc2tpbGxNYXN0ZXJpbmdNZXNzYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIG1lc3NhZ2UgKz0gc2tpbGxNYXN0ZXJpbmdNZXNzYWdlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBpdGVtLmluY3JlYXNlRXhwZXJpZW5jZShhdWdtZW50KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtZmFpbGVkXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAnQ29DNy5EZXZGYWlsdXJlJyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGl0ZW06IGl0ZW0uZGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgIGRpZTogZGllLnRvdGFsLFxuICAgICAgICAgICAgICAgIHNjb3JlOiBpdGVtLnZhbHVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICl9PC9zcGFuPjxicj5gXG4gICAgICAgICAgICBmYWlsdXJlLnB1c2goaXRlbS5pZClcbiAgICAgICAgICB9XG4gICAgICAgICAgYXdhaXQgaXRlbS51bmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudHMgPSBbXVxuICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcbiAgICBmb3IgKGNvbnN0IHNhbml0eUxvc3NFdmVudCBvZiB0aGlzLmRhdGEuZGF0YS5zYW5pdHlMb3NzRXZlbnRzKSB7XG4gICAgICBpZiAoc2FuaXR5TG9zc0V2ZW50LmltbXVuaXR5KSB7XG4gICAgICAgIHNhbml0eUxvc3NFdmVudHMucHVzaChzYW5pdHlMb3NzRXZlbnQpXG4gICAgICB9IGVsc2UgaWYgKHNhbml0eUxvc3NFdmVudC50b3RhbExvc3MgPiAxKSB7XG4gICAgICAgIHNhbml0eUxvc3NFdmVudC50b3RhbExvc3MtLVxuICAgICAgICBzYW5pdHlMb3NzRXZlbnRzLnB1c2goc2FuaXR5TG9zc0V2ZW50KVxuICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hhbmdlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgIGlmIChza2lsbHNSb2xsZWQpIHtcbiAgICAgICAgbWVzc2FnZSArPSAnPGJyPidcbiAgICAgIH1cbiAgICAgIG1lc3NhZ2UgKz0gYDxzcGFuPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWR1Y2VTYW5pdHlMaW1pdHMnKX08L3NwYW4+YFxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnZGF0YS5zYW5pdHlMb3NzRXZlbnRzJzogc2FuaXR5TG9zc0V2ZW50c1xuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkge1xuICAgICAgbWVzc2FnZSArPSAnPC9wPidcbiAgICAgIGNvbnN0IHNwZWFrZXIgPSB7IGFjdG9yOiB0aGlzIH1cbiAgICAgIGF3YWl0IGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZShza2lsbHNSb2xsZWQgPyB0aXRsZSA6ICcnLCBtZXNzYWdlLCB7XG4gICAgICAgIHNwZWFrZXI6IHNwZWFrZXJcbiAgICAgIH0pXG4gICAgICB0aGlzLm9ubHlSdW5PbmNlUGVyU2Vzc2lvbiA9IHRydWVcbiAgICB9XG4gICAgcmV0dXJuIHsgZmFpbHVyZTogZmFpbHVyZSwgc3VjY2Vzczogc3VjY2VzcyB9XG4gIH1cblxuICBhc3luYyBkZXZlbG9wTHVjayAoZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGN1cnJlbnRMdWNrID0gdGhpcy5kYXRhLmRhdGEuYXR0cmlicy5sY2sudmFsdWVcbiAgICBpZiAoIWN1cnJlbnRMdWNrKSBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmF0dHJpYnMubGNrLnZhbHVlJzogMCB9KVxuICAgIGNvbnN0IHB1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjayA9IGdhbWUuc2V0dGluZ3MuZ2V0KFxuICAgICAgJ0NvQzcnLFxuICAgICAgJ3B1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjaydcbiAgICApXG4gICAgY29uc3QgdXBncmFkZVJvbGwgPSAoYXdhaXQgbmV3IFJvbGwoJzFEMTAwJykucm9sbCh7IGFzeW5jOiB0cnVlIH0pKS50b3RhbFxuICAgIGNvbnN0IGhpZ2hlclRoYW5DdXJyZW50THVjayA9IHVwZ3JhZGVSb2xsID4gY3VycmVudEx1Y2tcbiAgICBsZXQgYXVnbWVudFJvbGxcbiAgICBpZiAocHVscFJ1bGVEZXZlbG9wbWVudFJvbGxMdWNrKSB7XG4gICAgICBoaWdoZXJUaGFuQ3VycmVudEx1Y2tcbiAgICAgICAgPyAoYXVnbWVudFJvbGwgPSAnMkQxMCsxMCcpXG4gICAgICAgIDogKGF1Z21lbnRSb2xsID0gJzFEMTArNScpXG4gICAgfSBlbHNlIGlmIChoaWdoZXJUaGFuQ3VycmVudEx1Y2spIHtcbiAgICAgIGF1Z21lbnRSb2xsID0gJzFEMTAnXG4gICAgfVxuICAgIGNvbnN0IHRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGxMdWNrNERldicpXG4gICAgbGV0IG1lc3NhZ2UgPSAnPHAgY2xhc3M9XCJjaGF0LWNhcmRcIj4nXG4gICAgaWYgKHB1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjayB8fCBoaWdoZXJUaGFuQ3VycmVudEx1Y2spIHtcbiAgICAgIGNvbnN0IGF1Z21lbnRWYWx1ZSA9IChhd2FpdCBuZXcgUm9sbChhdWdtZW50Um9sbCkucm9sbCh7IGFzeW5jOiB0cnVlIH0pKVxuICAgICAgICAudG90YWxcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ2RhdGEuYXR0cmlicy5sY2sudmFsdWUnOlxuICAgICAgICAgIHRoaXMuZGF0YS5kYXRhLmF0dHJpYnMubGNrLnZhbHVlICsgYXVnbWVudFZhbHVlXG4gICAgICB9KVxuICAgICAgbWVzc2FnZSArPSBgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLXN1Y2Nlc3NcIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICdDb0M3Lkx1Y2tJbmNyZWFzZWQnLFxuICAgICAgICB7XG4gICAgICAgICAgZGllOiB1cGdyYWRlUm9sbCxcbiAgICAgICAgICBzY29yZTogY3VycmVudEx1Y2ssXG4gICAgICAgICAgYXVnbWVudDogYXVnbWVudFZhbHVlXG4gICAgICAgIH1cbiAgICAgICl9PC9zcGFuPmBcbiAgICB9IGVsc2Uge1xuICAgICAgbWVzc2FnZSArPSBgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLWZhaWxlZFwiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgJ0NvQzcuTHVja05vdEluY3JlYXNlZCcsXG4gICAgICAgIHsgZGllOiB1cGdyYWRlUm9sbCwgc2NvcmU6IGN1cnJlbnRMdWNrIH1cbiAgICAgICl9PC9zcGFuPmBcbiAgICB9XG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkge1xuICAgICAgbWVzc2FnZSArPSAnPC9wPidcbiAgICAgIGNvbnN0IHNwZWFrZXIgPSB7IGFjdG9yOiB0aGlzIH1cbiAgICAgIGF3YWl0IGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZSh0aXRsZSwgbWVzc2FnZSwgeyBzcGVha2VyOiBzcGVha2VyIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGV2ZWxvcFNraWxsIChza2lsbElkLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLml0ZW1zLmdldChza2lsbElkKVxuICAgIGlmICghc2tpbGwpIHJldHVyblxuICAgIGxldCB0aXRsZSA9ICcnXG4gICAgbGV0IG1lc3NhZ2UgPSAnJ1xuICAgIGNvbnN0IHVwZ3JhZGVSb2xsID0gbmV3IFJvbGwoJzFEMTAwJylcbiAgICBhd2FpdCB1cGdyYWRlUm9sbC5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICBpZiAoIWZhc3RGb3J3YXJkKSBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZCh1cGdyYWRlUm9sbClcbiAgICBpZiAodXBncmFkZVJvbGwudG90YWwgPiBza2lsbC52YWx1ZSB8fCB1cGdyYWRlUm9sbC50b3RhbCA+PSA5NSkge1xuICAgICAgY29uc3QgYXVnbWVudFJvbGwgPSBuZXcgUm9sbCgnMUQxMCcpXG4gICAgICBhd2FpdCBhdWdtZW50Um9sbC5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgIGlmICghZmFzdEZvcndhcmQpIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKGF1Z21lbnRSb2xsKVxuICAgICAgbWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGV2U3VjY2Vzc0RldGFpbHMnLCB7XG4gICAgICAgIGl0ZW06IHNraWxsLm5hbWUsXG4gICAgICAgIGF1Z21lbnQ6IGF1Z21lbnRSb2xsLnRvdGFsXG4gICAgICB9KVxuICAgICAgdGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRldlJvbGxUaXRsZScsIHtcbiAgICAgICAgaXRlbTogc2tpbGwubmFtZSxcbiAgICAgICAgZGllOiB1cGdyYWRlUm9sbC50b3RhbCxcbiAgICAgICAgc2NvcmU6IHNraWxsLnZhbHVlXG4gICAgICB9KVxuICAgICAgYXdhaXQgc2tpbGwuaW5jcmVhc2VFeHBlcmllbmNlKGF1Z21lbnRSb2xsLnRvdGFsKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGV2Um9sbFRpdGxlJywge1xuICAgICAgICBpdGVtOiBza2lsbC5uYW1lLFxuICAgICAgICBkaWU6IHVwZ3JhZGVSb2xsLnRvdGFsLFxuICAgICAgICBzY29yZTogc2tpbGwudmFsdWVcbiAgICAgIH0pXG4gICAgICBtZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EZXZGYWlsdXJlRGV0YWlscycsIHtcbiAgICAgICAgaXRlbTogc2tpbGwubmFtZVxuICAgICAgfSlcbiAgICB9XG4gICAgY29uc3Qgc3BlYWtlciA9IHsgYWN0b3I6IHRoaXMuX2lkIH1cbiAgICBhd2FpdCBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UodGl0bGUsIG1lc3NhZ2UsIHsgc3BlYWtlcjogc3BlYWtlciB9KVxuICAgIGF3YWl0IHNraWxsLnVuZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gIH1cblxuICBoYXNDb25kaXRpb25TdGF0dXMgKGNvbmRpdGlvbk5hbWUpIHtcbiAgICBjb25zdCBjb25kaXRpb25WYWx1ZSA9IHRoaXMuZGF0YS5kYXRhLmNvbmRpdGlvbnM/Lltjb25kaXRpb25OYW1lXT8udmFsdWVcbiAgICBpZiAodHlwZW9mIGNvbmRpdGlvblZhbHVlICE9PSAnYm9vbGVhbicpIHtcbiAgICAgIHJldHVybiBmYWxzZSAvLyBOZWNlc3NhcnksIGluY29ycmVjdCB0ZW1wbGF0ZSBpbml0aWFsaXphdGlvblxuICAgIH1cbiAgICByZXR1cm4gY29uZGl0aW9uVmFsdWVcbiAgfVxuXG4gIGhhc0NvbmRpdGlvblZhbHVlIChjb25kaXRpb25OYW1lLCBmaWVsZCkge1xuICAgIGlmICghdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoY29uZGl0aW9uTmFtZSkpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgaWYgKGNvbmRpdGlvbk5hbWUgPT09IENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lICYmIGZpZWxkID09PSAnZHVyYXRpb25UZXh0Jykge1xuICAgICAgY29uc3QgcmVhbFRpbWUgPSB0aGlzLmhhc0NvbmRpdGlvblZhbHVlKGNvbmRpdGlvbk5hbWUsICdyZWFsVGltZScpXG4gICAgICBjb25zdCBkdXJhdGlvbiA9IHRoaXMuaGFzQ29uZGl0aW9uVmFsdWUoY29uZGl0aW9uTmFtZSwgJ2R1cmF0aW9uJylcbiAgICAgIGlmICh0eXBlb2YgZHVyYXRpb24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChyZWFsVGltZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVybiBkdXJhdGlvbiArICcgJyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yb3VuZHMnKVxuICAgICAgICB9IGVsc2UgaWYgKHJlYWxUaW1lID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybiBkdXJhdGlvbiArICcgJyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5ob3VycycpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5kYXRhLmRhdGEuY29uZGl0aW9ucz8uW2NvbmRpdGlvbk5hbWVdPy5bZmllbGRdXG4gIH1cblxuICBhc3luYyB0b2dnbGVDb25kaXRpb24gKGNvbmRpdGlvbk5hbWUpIHtcbiAgICBjb25zdCBjb25kaXRpb25WYWx1ZSA9IHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKGNvbmRpdGlvbk5hbWUpXG4gICAgaWYgKCFjb25kaXRpb25WYWx1ZSkge1xuICAgICAgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oY29uZGl0aW9uTmFtZSlcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgdGhpcy51bnNldENvbmRpdGlvbihjb25kaXRpb25OYW1lKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNldENvbmRpdGlvbiAoXG4gICAgY29uZGl0aW9uTmFtZSxcbiAgICB7XG4gICAgICBmb3JjZVZhbHVlID0gZmFsc2UsXG4gICAgICBqdXN0VGhpcyA9IGZhbHNlLFxuICAgICAgcmVhbFRpbWUgPSBudWxsLFxuICAgICAgZHVyYXRpb24gPSBudWxsXG4gICAgfSA9IHt9XG4gICkge1xuICAgIGlmICghZm9yY2VWYWx1ZSAmJiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdlbmFibGVTdGF0dXNJY29ucycpKSB7XG4gICAgICBjb25zdCBlZmZlY3RzID0gdGhpcy5lZmZlY3RzXG4gICAgICAgIC5maWx0ZXIoZWZmZWN0ID0+IGVmZmVjdC5kYXRhLmZsYWdzLmNvcmU/LnN0YXR1c0lkID09PSBjb25kaXRpb25OYW1lKVxuICAgICAgICAubWFwKGVmZmVjdCA9PiBlZmZlY3QuaWQpXG4gICAgICBjb25zdCBjdXN0b20gPSB7fVxuICAgICAgc3dpdGNoIChjb25kaXRpb25OYW1lKSB7XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgICBjdXN0b20uZmxhZ3MgPSB7XG4gICAgICAgICAgICBjb3JlOiB7XG4gICAgICAgICAgICAgIG92ZXJsYXk6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy50ZW1wb0luc2FuZTpcbiAgICAgICAgICBjdXN0b20uZmxhZ3MgPSB7XG4gICAgICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgICAgIHJlYWxUaW1lOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY3VzdG9tLmR1cmF0aW9uID0ge1xuICAgICAgICAgICAgcm91bmRzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBzZWNvbmRzOiB1bmRlZmluZWRcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHJlYWxUaW1lID09PSB0cnVlIHx8IHJlYWxUaW1lID09PSBmYWxzZSkge1xuICAgICAgICAgICAgY3VzdG9tLmZsYWdzLkNvQzcucmVhbFRpbWUgPSByZWFsVGltZVxuICAgICAgICAgICAgY3VzdG9tLmZsYWdzID0ge1xuICAgICAgICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgICAgICAgcmVhbFRpbWU6IHJlYWxUaW1lXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkdXJhdGlvbiAhPT0gbnVsbCAmJiB0eXBlb2YgZHVyYXRpb24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIGlmIChyZWFsVGltZSkge1xuICAgICAgICAgICAgICAgIGN1c3RvbS5kdXJhdGlvbi5yb3VuZHMgPSBkdXJhdGlvblxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGN1c3RvbS5kdXJhdGlvbi5zZWNvbmRzID0gZHVyYXRpb24gKiAzNjAwXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGlmIChlZmZlY3RzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zdCBlZmZlY3QgPSBDT05GSUcuc3RhdHVzRWZmZWN0cy5maWx0ZXIoXG4gICAgICAgICAgZWZmZWN0ID0+IGVmZmVjdC5pZCA9PT0gY29uZGl0aW9uTmFtZVxuICAgICAgICApXG4gICAgICAgIGlmIChlZmZlY3QubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgY29uc3QgZWZmZWN0RGF0YSA9IG1lcmdlT2JqZWN0KFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKGVmZmVjdFswXS5sYWJlbCksXG4gICAgICAgICAgICAgIGljb246IGVmZmVjdFswXS5pY29uLFxuICAgICAgICAgICAgICBmbGFnczoge1xuICAgICAgICAgICAgICAgIGNvcmU6IHtcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkOiBlZmZlY3RbMF0uaWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGN1c3RvbVxuICAgICAgICAgIClcbiAgICAgICAgICBhd2FpdCBzdXBlci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW2VmZmVjdERhdGFdKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFRoaXMgZG9lc24ndCBleGlzdCBpbiBGb3VuZHJ5VlRUIEFjdGl2ZUVmZmVjdHM/XG4gICAgICAgICAgZm9yY2VWYWx1ZSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VzdG9tLl9pZCA9IGVmZmVjdHNbMF1cbiAgICAgICAgYXdhaXQgc3VwZXIudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFtjdXN0b21dKVxuICAgICAgICBmb3JjZVZhbHVlID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZm9yY2VWYWx1ZSB8fCAhZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnKSkge1xuICAgICAgc3dpdGNoIChjb25kaXRpb25OYW1lKSB7XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudW5jb25zY2lvdXM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZHlpbmc6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMucHJvbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICBbYGRhdGEuY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9LnZhbHVlYF06IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudGVtcG9JbnNhbmU6XG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgZmllbGRzID0ge31cbiAgICAgICAgICAgIGZpZWxkc1tgZGF0YS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0udmFsdWVgXSA9IHRydWVcbiAgICAgICAgICAgIGlmIChyZWFsVGltZSA9PT0gdHJ1ZSB8fCByZWFsVGltZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgZmllbGRzW2BkYXRhLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS5yZWFsVGltZWBdID0gcmVhbFRpbWVcbiAgICAgICAgICAgICAgaWYgKGR1cmF0aW9uICE9PSBudWxsICYmIHR5cGVvZiBkdXJhdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBmaWVsZHNbYGRhdGEuY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9LmR1cmF0aW9uYF0gPSBkdXJhdGlvblxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoXG4gICAgICAgICAgICAgICAgZmllbGRzLFxuICAgICAgICAgICAgICAgIGBkYXRhLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS5yZWFsVGltZWBcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGZpZWxkc1tgZGF0YS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0uLT1yZWFsVGltZWBdID0gbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFxuICAgICAgICAgICAgICAgIGZpZWxkcyxcbiAgICAgICAgICAgICAgICBgZGF0YS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0uZHVyYXRpb25gXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBmaWVsZHNbYGRhdGEuY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9Li09ZHVyYXRpb25gXSA9IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKGZpZWxkcylcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGlmICghanVzdFRoaXMpIHtcbiAgICAgICAgLy8gRG9lcyBzZXR0aW5nIHRoZSBjb25kaXRpb24gYWxzbyB0cmlnZ2VyIG90aGVyIGFjdGlvbnM/XG4gICAgICAgIC8vIC0gSWYgQWN0aXZlRWZmZWN0cyBhcmUgYWRkZWQgaGFzQ29uZGl0aW9uU3RhdHVzIGZvciByZWNlbnRseSBhZGRlZCBjb25kaXRpb25zIG1heSByZXR1cm4gaW5jb3JyZWN0bHlcbiAgICAgICAgc3dpdGNoIChjb25kaXRpb25OYW1lKSB7XG4gICAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kczpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnByb25lKVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAhdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMudW5jb25zY2lvdXMpICYmXG4gICAgICAgICAgICAgICF0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5kZWFkKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNvbkNoZWNrID0gbmV3IENvQzdDb25DaGVjayhcbiAgICAgICAgICAgICAgICB0aGlzLmlzVG9rZW4gPyB0aGlzLnRva2VuS2V5IDogdGhpcy5pZFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGNvbkNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudW5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmR5aW5nKVxuICAgICAgICAgICAgYXdhaXQgdGhpcy51bnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy51bmNvbnNjaW91cylcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyB1bnNldENvbmRpdGlvbiAoY29uZGl0aW9uTmFtZSwgeyBmb3JjZVZhbHVlID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKCFmb3JjZVZhbHVlICYmIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2VuYWJsZVN0YXR1c0ljb25zJykpIHtcbiAgICAgIGNvbnN0IGVmZmVjdHMgPSB0aGlzLmVmZmVjdHNcbiAgICAgICAgLmZpbHRlcihlZmZlY3QgPT4gZWZmZWN0LmRhdGEuZmxhZ3MuY29yZT8uc3RhdHVzSWQgPT09IGNvbmRpdGlvbk5hbWUpXG4gICAgICAgIC5tYXAoZWZmZWN0ID0+IGVmZmVjdC5pZClcbiAgICAgIGlmIChlZmZlY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuZGVsZXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIGVmZmVjdHMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3JjZVZhbHVlID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZm9yY2VWYWx1ZSB8fCAhZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnKSkge1xuICAgICAgc3dpdGNoIChjb25kaXRpb25OYW1lKSB7XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudGVtcG9JbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudW5jb25zY2lvdXM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZHlpbmc6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMucHJvbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICBbYGRhdGEuY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9LnZhbHVlYF06IGZhbHNlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlc2V0Q291bnRlciAoY291bnRlcikge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW2NvdW50ZXJdOiAwIH0pXG4gIH1cblxuICBhc3luYyBzZXRPbmVGaWZ0aFNhbml0eSAob25lRmlmdGhTYW5pdHkpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmF0dHJpYnMuc2FuLm9uZUZpZnRoU2FuaXR5Jzogb25lRmlmdGhTYW5pdHkgfSlcbiAgfVxuXG4gIGdldCBmaWdodGluZ1NraWxscyAoKSB7XG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gW11cbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmICh2YWx1ZS50eXBlID09PSAnc2tpbGwnICYmIHZhbHVlLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmZpZ2h0aW5nKSB7XG4gICAgICAgIHNraWxsTGlzdC5wdXNoKHZhbHVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHNraWxsTGlzdC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKVxuICAgIH0pXG5cbiAgICByZXR1cm4gc2tpbGxMaXN0XG4gIH1cblxuICBnZXQgY2xvc2VDb21iYXRXZWFwb25zICgpIHtcbiAgICBjb25zdCB3ZWFwb25MaXN0ID0gW11cbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmICh2YWx1ZS50eXBlID09PSAnd2VhcG9uJyAmJiAhdmFsdWUuZGF0YS5kYXRhLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuaXRlbXMuZ2V0KHZhbHVlLmRhdGEuZGF0YS5za2lsbC5tYWluLmlkKVxuICAgICAgICB2YWx1ZS5kYXRhLmRhdGEuc2tpbGwubWFpbi52YWx1ZSA9IHNraWxsID8gc2tpbGwudmFsdWUgOiAwXG4gICAgICAgIHdlYXBvbkxpc3QucHVzaCh2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICB3ZWFwb25MaXN0LnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpXG4gICAgfSlcblxuICAgIHJldHVybiB3ZWFwb25MaXN0XG4gIH1cblxuICBnZXQgZmlyZWFybVNraWxscyAoKSB7XG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gW11cbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmICh2YWx1ZS50eXBlID09PSAnc2tpbGwnICYmIHZhbHVlLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmZpcmVhcm0pIHtcbiAgICAgICAgc2tpbGxMaXN0LnB1c2godmFsdWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgc2tpbGxMaXN0LnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpXG4gICAgfSlcblxuICAgIHJldHVybiBza2lsbExpc3RcbiAgfVxuXG4gIGdldCB1c2VyICgpIHtcbiAgICAvLyBpcyB0aGF0IGFjdG9yIGltcGVyc29uYW50ZWQgYnkgYSB1c2VyID9cbiAgICByZXR1cm4gZ2FtZS51c2Vycy5maW5kKHVzZXIgPT4ge1xuICAgICAgaWYgKHVzZXIuY2hhcmFjdGVyKSB7XG4gICAgICAgIGlmICh1c2VyLmNoYXJhY3Rlci5pZCA9PT0gdGhpcy5pZCkgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0pXG4gIH1cblxuICBnZXQgZG9kZ2VTa2lsbCAoKSB7XG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5kb2RnZVNraWxsTmFtZSlcbiAgICApXG4gICAgaWYgKHNraWxsTGlzdC5sZW5ndGggIT09IDApIHJldHVybiBza2lsbExpc3RbMF1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGNyZWRpdFJhdGluZ1NraWxsICgpIHtcbiAgICBjb25zdCBza2lsbExpc3QgPSB0aGlzLmdldFNraWxsc0J5TmFtZShcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3LmNyZWRpdFJhdGluZ1NraWxsTmFtZSlcbiAgICApXG4gICAgaWYgKHNraWxsTGlzdC5sZW5ndGggIT09IDApIHJldHVybiBza2lsbExpc3RbMF1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGN0aHVsaHVNeXRob3NTa2lsbCAoKSB7XG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5DdGh1bGh1TXl0aG9zTmFtZSlcbiAgICApXG4gICAgaWYgKHNraWxsTGlzdC5sZW5ndGggIT09IDApIHJldHVybiBza2lsbExpc3RbMF1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGN0aHVsaHVNeXRob3MgKCkge1xuICAgIGNvbnN0IENNID0gdGhpcy5jdGh1bGh1TXl0aG9zU2tpbGxcbiAgICBpZiAoQ00pIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gQ00udmFsdWVcbiAgICAgIGlmICh2YWx1ZSkgcmV0dXJuIHZhbHVlXG4gICAgICByZXR1cm4gcGFyc2VJbnQoQ00uZGF0YS5kYXRhLnZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgZ2V0IG15dGhvc0hhcmRlbmVkICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRGbGFnKCdDb0M3JywgJ215dGhvc0hhcmRlbmVkJykgfHwgZmFsc2VcbiAgfVxuXG4gIGFzeW5jIHNldE15dGhvc0hhcmRlbmVkICgpIHtcbiAgICBhd2FpdCB0aGlzLnNldEZsYWcoJ0NvQzcnLCAnbXl0aG9zSGFyZGVuZWQnLCB0cnVlKVxuICB9XG5cbiAgZ2V0IG15dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQgKCkge1xuICAgIHJldHVybiB0aGlzLmdldEZsYWcoJ0NvQzcnLCAnbXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCcpIHx8IGZhbHNlXG4gIH1cblxuICBhc3luYyBleHBlcmllbmNlRmlyc3RNeXRob3NJbnNhbml0eSAoKSB7XG4gICAgYXdhaXQgdGhpcy5zZXRGbGFnKCdDb0M3JywgJ215dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQnLCB0cnVlKVxuICB9XG5cbiAgZ2V0IGNyZWRpdFJhdGluZyAoKSB7XG4gICAgY29uc3QgQ1IgPSB0aGlzLmNyZWRpdFJhdGluZ1NraWxsXG4gICAgaWYgKENSKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IENSLnZhbHVlXG4gICAgICBpZiAodmFsdWUpIHJldHVybiB2YWx1ZVxuICAgICAgcmV0dXJuIHBhcnNlSW50KENSLmRhdGEuZGF0YS52YWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIGdldCBzcGVuZGluZ0xldmVsICgpIHtcbiAgICBjb25zdCBDUiA9IHRoaXMuY3JlZGl0UmF0aW5nXG4gICAgaWYgKENSID49IDk5KSByZXR1cm4gNTAwMFxuICAgIGlmIChDUiA+PSA5MCkgcmV0dXJuIDI1MFxuICAgIGlmIChDUiA+PSA1MCkgcmV0dXJuIDUwXG4gICAgaWYgKENSID49IDEwKSByZXR1cm4gMTBcbiAgICBpZiAoQ1IgPj0gMSkgcmV0dXJuIDJcbiAgICByZXR1cm4gMC41XG4gIH1cblxuICBnZXQgY2FzaCAoKSB7XG4gICAgY29uc3QgQ1IgPSB0aGlzLmNyZWRpdFJhdGluZ1xuICAgIGlmIChDUiA+PSA5OSkgcmV0dXJuIDUwMDAwXG4gICAgaWYgKENSID49IDkwKSByZXR1cm4gQ1IgKiAyMFxuICAgIGlmIChDUiA+PSA1MCkgcmV0dXJuIENSICogNVxuICAgIGlmIChDUiA+PSAxMCkgcmV0dXJuIENSICogMlxuICAgIGlmIChDUiA+PSAxKSByZXR1cm4gQ1JcbiAgICByZXR1cm4gMC41XG4gIH1cblxuICBnZXQgYXNzZXRzICgpIHtcbiAgICBjb25zdCBDUiA9IHRoaXMuY3JlZGl0UmF0aW5nXG4gICAgaWYgKENSID49IDk5KSByZXR1cm4gNTAwMDAwMFxuICAgIGlmIChDUiA+PSA5MCkgcmV0dXJuIENSICogMjAwMFxuICAgIGlmIChDUiA+PSA1MCkgcmV0dXJuIENSICogNTAwXG4gICAgaWYgKENSID49IDEwKSByZXR1cm4gQ1IgKiA1MFxuICAgIGlmIChDUiA+PSAxKSByZXR1cm4gQ1IgKiAxMFxuICAgIHJldHVybiAwXG4gIH1cblxuICBnZXQgc2tpbGxzICgpIHtcbiAgICBjb25zdCBza2lsbExpc3QgPSBbXVxuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5pdGVtcykge1xuICAgICAgaWYgKHZhbHVlLnR5cGUgPT09ICdza2lsbCcpIHNraWxsTGlzdC5wdXNoKHZhbHVlKVxuICAgIH1cblxuICAgIHNraWxsTGlzdC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKVxuICAgIH0pXG5cbiAgICByZXR1cm4gc2tpbGxMaXN0XG4gIH1cblxuICBnZXQgb3duZXJzICgpIHtcbiAgICByZXR1cm4gZ2FtZS51c2Vycy5maWx0ZXIoXG4gICAgICB1ID0+IHRoaXMudGVzdFVzZXJQZXJtaXNzaW9uKHUsICdPV05FUicpICYmICF1LmlzR01cbiAgICApXG4gIH1cblxuICBnZXQgcGxheWVyICgpIHtcbiAgICByZXR1cm4gdGhpcy5vd25lcnMuZmlsdGVyKHUgPT4gdS5jaGFyYWN0ZXI/LmlkID09PSB0aGlzLmlkKVxuICB9XG5cbiAgZ2V0IGNoYXJhY3RlclVzZXIgKCkge1xuICAgIHJldHVybiAoXG4gICAgICBnYW1lLnVzZXJzLmNvbnRlbnRzLmZpbHRlcih1ID0+IHUuY2hhcmFjdGVyPy5pZCA9PT0gdGhpcy5pZClbMF0gfHwgbnVsbFxuICAgIClcbiAgfVxuXG4gIGFzeW5jIHNldEhlYWx0aFN0YXR1c01hbnVhbGx5IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAoZXZlbnQub3JpZ2luYWxFdmVudCkge1xuICAgICAgY29uc3QgaGVhbHRoQmVmb3JlID0gcGFyc2VJbnQoXG4gICAgICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQuY3VycmVudFRhcmdldC5kZWZhdWx0VmFsdWVcbiAgICAgIClcbiAgICAgIGNvbnN0IGhlYWx0aEFmdGVyID0gcGFyc2VJbnQoZXZlbnQub3JpZ2luYWxFdmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgbGV0IGRhbWFnZVRha2VuXG4gICAgICAvLyBpcyBoZWFsaW5nXG4gICAgICBpZiAoaGVhbHRoQWZ0ZXIgPiBoZWFsdGhCZWZvcmUpIHJldHVybiBhd2FpdCB0aGlzLnNldEhwKGhlYWx0aEFmdGVyKVxuICAgICAgZWxzZSBpZiAoaGVhbHRoQWZ0ZXIgPCAwKSBkYW1hZ2VUYWtlbiA9IE1hdGguYWJzKGhlYWx0aEFmdGVyKVxuICAgICAgZWxzZSBkYW1hZ2VUYWtlbiA9IGhlYWx0aEJlZm9yZSAtIGhlYWx0aEFmdGVyXG4gICAgICB0aGlzLnJlbmRlcih0cnVlKSAvLyBuZWVkZWQsIG9yIG5lZ2F0aXZlIHZhbHVlcyB3aWxsIG5vdCB3b3JrXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5kZWFsRGFtYWdlKGRhbWFnZVRha2VuLCB7IGlnbm9yZUFybW9yOiB0cnVlIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGVhbERhbWFnZSAoYW1vdW50LCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBhcm1vckRhdGEgPSB0aGlzLmRhdGEuZGF0YS5hdHRyaWJzLmFybW9yLnZhbHVlXG4gICAgY29uc3QgZ3Jvc3NEYW1hZ2UgPSBwYXJzZUludChhbW91bnQpXG4gICAgbGV0IGFybW9yVmFsdWUgPSAwXG4gICAgaWYgKCFvcHRpb25zLmlnbm9yZUFybW9yKSB7XG4gICAgICBpZiAoYXJtb3JEYXRhID09PSBudWxsKSB7XG4gICAgICAgIC8vIG5vcFxuICAgICAgfSBlbHNlIGlmIChDb0M3VXRpbGl0aWVzLmlzRm9ybXVsYShhcm1vckRhdGEpKSB7XG4gICAgICAgIGFybW9yVmFsdWUgPSAoYXdhaXQgbmV3IFJvbGwoYXJtb3JEYXRhKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgICB9IGVsc2UgaWYgKCFpc05hTihOdW1iZXIoYXJtb3JEYXRhKSkpIHtcbiAgICAgICAgYXJtb3JWYWx1ZSA9IE51bWJlcihhcm1vckRhdGEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgYFVuYWJsZSB0byBwcm9jZXNzIGFybW9yIHZhbHVlOiAke2FybW9yRGF0YX0uIElnbm9yaW5nIGFybW9yLmBcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBuZXREYW1hZ2UgPSBncm9zc0RhbWFnZSAtIGFybW9yVmFsdWVcbiAgICBpZiAobmV0RGFtYWdlIDw9IDApIHJldHVybiAwXG4gICAgYXdhaXQgdGhpcy5zZXRIcCh0aGlzLmhwIC0gbmV0RGFtYWdlKVxuICAgIGlmIChuZXREYW1hZ2UgPj0gdGhpcy5ocE1heCkge1xuICAgICAgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZGVhZClcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlSWdub3JlTWFqb3JXb3VuZHMnKSkge1xuICAgICAgICBpZiAodGhpcy5ocCA9PT0gMCkge1xuICAgICAgICAgIGlmIChuZXREYW1hZ2UgPj0gTWF0aC5jZWlsKHRoaXMuaHBNYXggLyAyKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZHlpbmcpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChuZXREYW1hZ2UgPj0gTWF0aC5jZWlsKHRoaXMuaHBNYXggLyAyKSkge1xuICAgICAgICAgIGNvbnN0IGNvbkNoZWNrID0gbmV3IENvQzdDb25DaGVjayhcbiAgICAgICAgICAgIHRoaXMuaXNUb2tlbiA/IHRoaXMudG9rZW5LZXkgOiB0aGlzLmlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGNvbkNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBoYXNNYWpvcldvdW5kID0gZmFsc2VcbiAgICAgICAgaWYgKG5ldERhbWFnZSA+PSBNYXRoLmNlaWwodGhpcy5ocE1heCAvIDIpKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXG4gICAgICAgICAgaGFzTWFqb3JXb3VuZCA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBoYXNNYWpvcldvdW5kID0gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaHAgPT09IDApIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy51bmNvbnNjaW91cylcbiAgICAgICAgICBpZiAoaGFzTWFqb3JXb3VuZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZHlpbmcpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXREYW1hZ2VcbiAgfVxuXG4gIGdldCBtYWpvcldvdW5kICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXG4gIH1cblxuICBnZXQgZHlpbmcgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5keWluZylcbiAgfVxuXG4gIGdldCB1bmNvbnNjaW91cyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKVxuICB9XG5cbiAgZ2V0IGRlYWQgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5kZWFkKVxuICB9XG5cbiAgZ2V0IHByb25lICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMucHJvbmUpXG4gIH1cblxuICAvLyBzdGF0aWMgdXBkYXRlQWN0b3IoIGFjdG9yLCBkYXRhVXBkYXRlKXtcbiAgLy8gICBpZiggZ2FtZS51c2VyLmlzR00pe1xuICAvLyAgICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCBgdXBkYXRpbmcgYWN0b3IgJHthY3Rvci5uYW1lfWApO1xuICAvLyAgICAgY29uc3QgcHJvbmUgPSBkYXRhVXBkYXRlPy5mbGFncz8uQ29DN1tDT0M3LnN0YXR1cy5wcm9uZV07XG4gIC8vICAgICBjb25zdCB1bmNvbnNjaW91cyA9IGRhdGFVcGRhdGU/LmZsYWdzPy5Db0M3W0NPQzcuc3RhdHVzLnVuY29uc2Npb3VzXTtcbiAgLy8gICAgIGNvbnN0IGNyaXRpY2FsV291bmRzID0gZGF0YVVwZGF0ZT8uZmxhZ3M/LkNvQzdbQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHNdO1xuICAvLyAgICAgY29uc3QgZHlpbmcgPSBkYXRhVXBkYXRlPy5mbGFncz8uQ29DN1tDT0M3LnN0YXR1cy5keWluZ107XG4gIC8vICAgICBpZiggcHJvbmUpIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JbmZvQWN0b3JQcm9uZScsIHthY3RvcjogYWN0b3IubmFtZX0pKTtcbiAgLy8gICAgIGlmKCB1bmNvbnNjaW91cykgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9BY3RvclVuY29uc2Npb3VzJywge2FjdG9yOiBhY3Rvci5uYW1lfSkpO1xuICAvLyAgICAgaWYoIGNyaXRpY2FsV291bmRzKSB1aS5ub3RpZmljYXRpb25zLmluZm8oIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0FjdG9yTWFqb3JXb3VuZCcsIHthY3RvcjogYWN0b3IubmFtZX0pKTtcbiAgLy8gICAgIGlmKCBkeWluZykgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9BY3RvckR5aW5nJywge2FjdG9yOiBhY3Rvci5uYW1lfSkpO1xuICAvLyAgIH1cbiAgLy8gICByZXR1cm47XG4gIC8vIH1cblxuICAvLyBcIkNvQzcuSW5mb0FjdG9yUHJvbmVcIjogXCJ7YWN0b3J9IGZhbGwgcHJvbmVcIixcbiAgLy8gXCJDb0M3LkluZm9BY3RvclVuY29uc2Npb3VzXCI6IFwie2FjdG9yfSBmYWxsIHVuY29uc2Npb3VzXCIsXG4gIC8vIFwiQ29DNy5JbmZvQWN0b3JNYWpvcldvdW5kXCI6IFwie2FjdG9yfSBnZXQgYSBtYWpvciB3b3VuZFwiLFxuICAvLyBcIkNvQzcuSW5mb0FjdG9yRHlpbmdcIjogXCJ7YWNvcn0gaXMgZHlpbmdcIixcbiAgLy8gXCJDb0M3LkluZm9BY3RvckluanVyaWVkXCI6IFwie2FjdG9yfSBpcyBpbmp1cmllZFwiLFxuXG4gIC8vIHN0YXRpYyB1cGRhdGVUb2tlbiggc2NlbmUsIHRva2VuLCBkYXRhVXBkYXRlKXtcbiAgLy8gICBjb25zdCBpbmp1cmllZCA9IGRhdGFVcGRhdGU/LmFjdG9yRGF0YT8uZmxhZ3M/LkNvQzc/LmluanVyaWVkO1xuICAvLyAgIGlmKCBpbmp1cmllZCkgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9BY3RvckluanVyaWVkJywge2FjdG9yOiB0b2tlbi5uYW1lfSkpO1xuICAvLyAgIHJldHVybjtcbiAgLy8gfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIHJlbmRlclRlbXBsYXRlICovXG5cbmV4cG9ydCBjbGFzcyBTa2lsbFZhbHVlRGlhbG9nIHtcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAobmFtZSA9IG51bGwsIGJhc2VWYWx1ZSA9IG51bGwpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NraWxsLXZhbHVlLmh0bWwnLFxuICAgICAgeyBiYXNlOiBiYXNlVmFsdWUsIG5hbWU6IG5hbWUgfVxuICAgIClcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBsZXQgZm9ybURhdGEgPSBudWxsXG4gICAgICBjb25zdCBkbGcgPSBuZXcgRGlhbG9nKHtcbiAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2tpbGxWYWx1ZScsIHsgbmFtZTogbmFtZSB9KSxcbiAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlZhbGlkYXRlJyksXG4gICAgICAgICAgICBjYWxsYmFjazogaHRtbCA9PiB7XG4gICAgICAgICAgICAgIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKFxuICAgICAgICAgICAgICAgIGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3NraWxsLXNlbGVjdC1mb3JtJylcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmb3JtRGF0YSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHQ6ICd2YWxpZGF0ZScsXG4gICAgICAgIGNsb3NlOiAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUoZmFsc2UpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGR1cGxpY2F0ZSwgZ2FtZSwgbWVyZ2VPYmplY3QgKi9cblxuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3TGlua0NyZWF0aW9uRGlhbG9nIH0gZnJvbSAnLi9saW5rLWNyZWF0aW9uLWRpYWxvZy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdMaW5rIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMuX2xpbmtEYXRhID0ge1xuICAgICAgdHlwZTogQ29DN0xpbmsuTElOS19UWVBFLkNIRUNLLFxuICAgICAgY2hlY2s6IENvQzdMaW5rLkNIRUNLX1RZUEUuU0tJTExcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbURhdGEgKGxpbmtEYXRhKSB7XG4gICAgY29uc3QgbGFiZWwgPSBDb0M3TGlua0NyZWF0aW9uRGlhbG9nLmF0dHJpYnV0ZXNcbiAgICAgIC5jb25jYXQoQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKCkpXG4gICAgICAuZmlsdGVyKGUgPT4gZS5rZXkgPT09IGxpbmtEYXRhLm5hbWUpXG4gICAgICAubWFwKGUgPT4gZS5sYWJlbClcbiAgICBpZiAobGFiZWwubGVuZ3RoID4gMCkge1xuICAgICAgbGlua0RhdGEubGFiZWwgPSBsYWJlbFswXVxuICAgIH1cbiAgICBjb25zdCBsaW5rID0gbmV3IENvQzdMaW5rKClcbiAgICBhd2FpdCBsaW5rLnNldERhdGEobGlua0RhdGEpXG4gICAgcmV0dXJuIGxpbmtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgVFlQRV9LRVlXT1JEICgpIHtcbiAgICByZXR1cm4gWydjaGVjaycsICdzYW5sb3NzJywgJ2l0ZW0nXVxuICB9XG5cbiAgc3RhdGljIGdldCBDSEFSQUNfS0VZV09SRCAoKSB7XG4gICAgcmV0dXJuIFsnY2hhcmFjJywgJ2NoYXInLCAnY2hhcmFjdGVyaXN0aWMnLCAnY2hhcmFjdGVyaXN0aWNzJ11cbiAgfVxuXG4gIHN0YXRpYyBnZXQgQVRUUklCX0tFWVdPUkQgKCkge1xuICAgIHJldHVybiBbJ2F0dHJpYnV0ZXMnLCAnYXR0cmlidXRlJywgJ2F0dHJpYicsICdhdHRyaWJzJ11cbiAgfVxuXG4gIHN0YXRpYyBnZXQgU0tJTExfS0VZV09SRCAoKSB7XG4gICAgcmV0dXJuIFsnc2tpbGwnXVxuICB9XG5cbiAgc3RhdGljIGdldCBMSU5LX1RZUEUgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBDSEVDSzogMSxcbiAgICAgIFNBTkxPU1M6IDIsXG4gICAgICBJVEVNOiAzXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBDSEVDS19UWVBFICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgQ0hBUkFDVEVSSVNUSUM6IDEsXG4gICAgICBBVFRSSUJVVEU6IDIsXG4gICAgICBTS0lMTDogM1xuICAgIH1cbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3JLZXkpIHtcbiAgICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBkYXRhICgpIHtcbiAgICBjb25zdCBkYXRhID0gZHVwbGljYXRlKHRoaXMuX2xpbmtEYXRhKVxuICAgIGRhdGEuaXNDaGVjayA9IHRoaXMuaXMuY2hlY2tcbiAgICBkYXRhLmlzU2FubG9zcyA9IHRoaXMuaXMuc2FubG9zc1xuICAgIGRhdGEuaXNJdGVtID0gdGhpcy5pcy5pdGVtXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGFzeW5jIGZldGNoSXRlbSAoKSB7XG4gICAgdGhpcy5fbGlua0RhdGEudmFsaWRJdGVtID0gZmFsc2VcbiAgICBpZiAoIXRoaXMuX2xpbmtEYXRhLmZyb21Db21wZW5kaXVtICYmICF0aGlzLl9saW5rRGF0YS5mcm9tRGlyZWN0b3J5KSB7XG4gICAgICB0aGlzLl9pdGVtID0gdW5kZWZpbmVkXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0pIHtcbiAgICAgIGNvbnN0IHBhY2sgPSBnYW1lLnBhY2tzLmdldCh0aGlzLl9saW5rRGF0YS5wYWNrKVxuICAgICAgaWYgKCFwYWNrKSByZXR1cm4gZmFsc2VcbiAgICAgIGlmIChwYWNrLm1ldGFkYXRhLmVudGl0eSAhPT0gJ0l0ZW0nKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICB0aGlzLl9pdGVtID0gYXdhaXQgcGFjay5nZXREb2N1bWVudCh0aGlzLl9saW5rRGF0YS5pZClcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSkge1xuICAgICAgdGhpcy5faXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHRoaXMuX2xpbmtEYXRhLmlkKVxuICAgIH1cblxuICAgIHRoaXMuX2xpbmtEYXRhLnNraWxsTmFtZSA9IG51bGxcbiAgICB0aGlzLl9saW5rRGF0YS5pdGVtTmFtZSA9IG51bGxcblxuICAgIGlmICh0aGlzLl9pdGVtKSB7XG4gICAgICBpZiAodGhpcy5faXRlbS5kYXRhLnR5cGUgPT09ICd3ZWFwb24nKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5JVEVNXG4gICAgICAgIHRoaXMuX2xpbmtEYXRhLml0ZW1OYW1lID0gdGhpcy5faXRlbS5kYXRhLm5hbWVcbiAgICAgICAgdGhpcy5fbGlua0RhdGEudmFsaWRJdGVtID0gdHJ1ZVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5faXRlbS5kYXRhLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgdGhpcy50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLkNIRUNLXG4gICAgICAgIHRoaXMuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLlNLSUxMXG4gICAgICAgIHRoaXMuX2xpbmtEYXRhLnNraWxsTmFtZSA9IHRoaXMuX2l0ZW0uZGF0YS5uYW1lXG4gICAgICAgIHRoaXMuX2xpbmtEYXRhLnZhbGlkSXRlbSA9IHRydWVcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhc3luYyBzZXREYXRhICh4KSB7XG4gICAgLy8gdGhpcy5fbGlua0RhdGEgPSB4O1xuICAgIC8vIHRoaXMuX2xpbmtEYXRhLmZvcmNlTW9kaWZpZXJzID0gZmFsc2U7XG4gICAgdGhpcy5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0gPSBmYWxzZVxuICAgIHRoaXMuX2xpbmtEYXRhLmZyb21EaXJlY3RvcnkgPSBmYWxzZVxuICAgIHRoaXMuaGFzUGxheWVyT3duZXIgPSBmYWxzZVxuXG4gICAgaWYgKHguaGFzUGxheWVyT3duZXIpIHtcbiAgICAgIHRoaXMuaGFzUGxheWVyT3duZXIgPSB0cnVlXG4gICAgICB0aGlzLmFjdG9yS2V5ID0geC5hY3RvcktleVxuICAgIH1cblxuICAgIC8vIFJldHJpZXZlIGl0ZW1cbiAgICBpZiAoeC5wYWNrICYmIHguaWQpIHtcbiAgICAgIHRoaXMuX2xpbmtEYXRhLmZyb21Db21wZW5kaXVtID0gdHJ1ZVxuICAgICAgdGhpcy5fbGlua0RhdGEucGFjayA9IHgucGFja1xuICAgICAgdGhpcy5fbGlua0RhdGEuaWQgPSB4LmlkXG4gICAgfVxuXG4gICAgaWYgKHguaWQgJiYgIXgucGFjaykge1xuICAgICAgdGhpcy5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSA9IHRydWVcbiAgICAgIHRoaXMuX2xpbmtEYXRhLmlkID0geC5pZFxuICAgIH1cblxuICAgIGNvbnN0IGxpbmtTZXQgPSBhd2FpdCB0aGlzLmZldGNoSXRlbSgpXG5cbiAgICBpZiAoIWxpbmtTZXQpIHtcbiAgICAgIC8vIExpbmsgZGVmaW5pdGlvblxuICAgICAgaWYgKHguY2hlY2spIHRoaXMudHlwZSA9IHguY2hlY2tcbiAgICAgIGVsc2UgdGhpcy50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLkNIRUNLIC8vIGNoZWNrLCBzYW5sb3NzLCBpdGVtXG4gICAgICBpZiAoeC50eXBlKSB0aGlzLmNoZWNrID0geC50eXBlXG4gICAgICAvLyBhdHRyaWIsIGNoYXJhYywgc2tpbGxcbiAgICAgIGVsc2UgaWYgKHRoaXMudHlwZSkgdGhpcy5jaGVjayA9IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hBUkFDVEVSSVNUSUNcblxuICAgICAgLy8gTGluayBuYW1lXG4gICAgICBpZiAoeC5uYW1lKSB7XG4gICAgICAgIHRoaXMuX2xpbmtEYXRhLml0ZW1OYW1lID0gbnVsbFxuICAgICAgICB0aGlzLl9saW5rRGF0YS5za2lsbE5hbWUgPSBudWxsXG4gICAgICAgIHRoaXMuX2xpbmtEYXRhLmNoYXJhY3RlcmlzdGljS2V5ID0gbnVsbFxuICAgICAgICB0aGlzLl9saW5rRGF0YS5hdHRyaWJ1dGVLZXkgPSBudWxsXG4gICAgICAgIGlmICh0aGlzLmlzLmNoZWNrKSB7XG4gICAgICAgICAgc3dpdGNoICh0aGlzLmNoZWNrKSB7XG4gICAgICAgICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuU0tJTEw6XG4gICAgICAgICAgICAgIHRoaXMuX2xpbmtEYXRhLnNraWxsTmFtZSA9IHgubmFtZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkNIQVJBQ1RFUklTVElDOlxuICAgICAgICAgICAgICB0aGlzLl9saW5rRGF0YS5jaGFyYWN0ZXJpc3RpY0tleSA9IHgubmFtZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkFUVFJJQlVURTpcbiAgICAgICAgICAgICAgdGhpcy5fbGlua0RhdGEuYXR0cmlidXRlS2V5ID0geC5uYW1lXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzLml0ZW0pIHRoaXMuX2xpbmtEYXRhLml0ZW1OYW1lID0geC5uYW1lXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTW9kaWZpZXJzXG4gICAgaWYgKHguZGlmZmljdWx0eSB8fCAhaXNOYU4oTnVtYmVyKHguZGlmZmljdWx0eSkpKSB7XG4gICAgICB0aGlzLl9saW5rRGF0YS5kaWZmaWN1bHR5ID0gTnVtYmVyKHguZGlmZmljdWx0eSlcbiAgICB9XG4gICAgaWYgKHgubW9kaWZpZXIgfHwgIWlzTmFOKE51bWJlcih4Lm1vZGlmaWVyKSkpIHtcbiAgICAgIHRoaXMuX2xpbmtEYXRhLm1vZGlmaWVyID0gTnVtYmVyKHgubW9kaWZpZXIpXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHR5cGVvZiB4LmRpZmZpY3VsdHkgIT09ICd1bmRlZmluZWQnIHx8XG4gICAgICB0eXBlb2YgeC5tb2RpZmllciAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIHRoaXMuX2xpbmtEYXRhLmZvcmNlTW9kaWZpZXJzID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAoeC5mb3JjZU1vZGlmaWVycykgdGhpcy5fbGlua0RhdGEuZm9yY2VNb2RpZmllcnMgPSB0cnVlXG5cbiAgICAvLyBGb3JjZSBkaXNwbGF5ZWQgbmFtZVxuICAgIGlmICh4LmRpc3BsYXlOYW1lID09PSAndHJ1ZScgfHwgeC5kaXNwbGF5TmFtZSA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy5fbGlua0RhdGEuZGlzcGxheU5hbWUgPSB0cnVlXG4gICAgfVxuICAgIGlmICh4LmxhYmVsKSB7XG4gICAgICB0aGlzLl9saW5rRGF0YS5oYXNMYWJlbCA9IHRydWVcbiAgICAgIHRoaXMuX2xpbmtEYXRhLmxhYmVsID0geC5sYWJlbFxuICAgIH1cblxuICAgIC8vIEljb25cbiAgICBpZiAoeC5pY29uKSB7XG4gICAgICB0aGlzLl9saW5rRGF0YS5oYXNJY29uID0gdHJ1ZVxuICAgICAgdGhpcy5fbGlua0RhdGEuaWNvbiA9IHguaWNvblxuICAgIH1cblxuICAgIC8vIEJsaW5kXG4gICAgaWYgKHguYmxpbmQgPT09ICd0cnVlJyB8fCB4LmJsaW5kID09PSB0cnVlKSB0aGlzLl9saW5rRGF0YS5ibGluZCA9IHRydWVcblxuICAgIC8vIFNhbiBEYXRhXG4gICAgdGhpcy5fbGlua0RhdGEuc2FuTWluID0geC5zYW5NaW5cbiAgICB0aGlzLl9saW5rRGF0YS5zYW5NYXggPSB4LnNhbk1heFxuICB9XG5cbiAgZ2V0IHR5cGUgKCkge1xuICAgIHJldHVybiB0aGlzLl9saW5rRGF0YS50eXBlXG4gIH1cblxuICBnZXQgY2hlY2tUeXBlICgpIHtcbiAgICBzd2l0Y2ggKHRoaXMuY2hlY2spIHtcbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEFSQUNURVJJU1RJQzpcbiAgICAgICAgcmV0dXJuICdjaGFyYWN0ZXJpc3RpYydcbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5BVFRSSUJVVEU6XG4gICAgICAgIHJldHVybiAnYXR0cmlidXRlJ1xuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLlNLSUxMOlxuICAgICAgICByZXR1cm4gJ3NraWxsJ1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgfVxuXG4gIHNldCB0eXBlICh4KSB7XG4gICAgaWYgKCFpc05hTihOdW1iZXIoeCkpKSB0aGlzLl9saW5rRGF0YS50eXBlID0geFxuICAgIGVsc2Uge1xuICAgICAgc3dpdGNoICh4LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgY2FzZSAnY2hlY2snOlxuICAgICAgICAgIHRoaXMuX2xpbmtEYXRhLnR5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuQ0hFQ0tcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdzYW5sb3NzJzpcbiAgICAgICAgICB0aGlzLl9saW5rRGF0YS50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLlNBTkxPU1NcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdpdGVtJzpcbiAgICAgICAgICB0aGlzLl9saW5rRGF0YS50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLklURU1cbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRoaXMuX2xpbmtEYXRhLnR5cGUgPSB1bmRlZmluZWRcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldCBjaGVjayAoKSB7XG4gICAgcmV0dXJuICFpc05hTihOdW1iZXIodGhpcy5fbGlua0RhdGEuY2hlY2spKVxuICAgICAgPyBOdW1iZXIodGhpcy5fbGlua0RhdGEuY2hlY2spXG4gICAgICA6IHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IGNoZWNrICh4KSB7XG4gICAgaWYgKCFpc05hTihOdW1iZXIoeCkpKSB0aGlzLl9saW5rRGF0YS5jaGVjayA9IE51bWJlcih4KVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5fbGlua0RhdGEuY2hlY2sgPSB1bmRlZmluZWRcbiAgICAgIGlmIChDb0M3TGluay5DSEFSQUNfS0VZV09SRC5pbmNsdWRlcyh4KSkge1xuICAgICAgICB0aGlzLnR5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuQ0hFQ0tcbiAgICAgICAgdGhpcy5fbGlua0RhdGEuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLkNIQVJBQ1RFUklTVElDXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0xpbmsuQVRUUklCX0tFWVdPUkQuaW5jbHVkZXMoeCkpIHtcbiAgICAgICAgdGhpcy50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLkNIRUNLXG4gICAgICAgIHRoaXMuX2xpbmtEYXRhLmNoZWNrID0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5BVFRSSUJVVEVcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3TGluay5TS0lMTF9LRVlXT1JELmluY2x1ZGVzKHgpKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5DSEVDS1xuICAgICAgICB0aGlzLl9saW5rRGF0YS5jaGVjayA9IENvQzdMaW5rLkNIRUNLX1RZUEUuU0tJTExcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXQgbmFtZSAoKSB7XG4gICAgaWYgKHRoaXMuaXMuY2hlY2spIHtcbiAgICAgIHN3aXRjaCAodGhpcy5jaGVjaykge1xuICAgICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hBUkFDVEVSSVNUSUM6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2xpbmtEYXRhLmNoYXJhY3RlcmlzdGljS2V5XG4gICAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5BVFRSSUJVVEU6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2xpbmtEYXRhLmF0dHJpYnV0ZUtleVxuICAgICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuU0tJTEw6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2xpbmtEYXRhLnNraWxsTmFtZVxuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5pcy5pdGVtKSByZXR1cm4gdGhpcy5fbGlua0RhdGEuaXRlbU5hbWVcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBzZXQgbmFtZSAoeCkge1xuICAgIGlmICh0aGlzLmlzLmNoZWNrKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuY2hlY2spIHtcbiAgICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkNIQVJBQ1RFUklTVElDOlxuICAgICAgICAgIHRoaXMuX2xpbmtEYXRhLmNoYXJhY3RlcmlzdGljS2V5ID0geFxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5BVFRSSUJVVEU6XG4gICAgICAgICAgdGhpcy5fbGlua0RhdGEuYXR0cmlidXRlS2V5ID0geFxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TS0lMTDpcbiAgICAgICAgICB0aGlzLl9saW5rRGF0YS5za2lsbE5hbWUgPSB4XG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzLml0ZW0pIHRoaXMuX2xpbmtEYXRhLml0ZW1OYW1lID0geFxuICB9XG5cbiAgZ2V0IGlzICgpIHtcbiAgICBjb25zdCBsaW5rID0gdGhpc1xuICAgIHJldHVybiB7XG4gICAgICBnZXQgY2hlY2sgKCkge1xuICAgICAgICByZXR1cm4gbGluay50eXBlID09PSBDb0M3TGluay5MSU5LX1RZUEUuQ0hFQ0tcbiAgICAgIH0sXG4gICAgICBzZXQgY2hlY2sgKHgpIHtcbiAgICAgICAgaWYgKHggPT09IHRydWUpIGxpbmsudHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5DSEVDS1xuICAgICAgfSxcbiAgICAgIGdldCBzYW5sb3NzICgpIHtcbiAgICAgICAgcmV0dXJuIGxpbmsudHlwZSA9PT0gQ29DN0xpbmsuTElOS19UWVBFLlNBTkxPU1NcbiAgICAgIH0sXG4gICAgICBzZXQgc2FubG9zcyAoeCkge1xuICAgICAgICBpZiAoeCA9PT0gdHJ1ZSkgbGluay50eXBlID0gQ29DN0xpbmsuTElOS19UWVBFLlNBTkxPU1NcbiAgICAgIH0sXG4gICAgICBnZXQgaXRlbSAoKSB7XG4gICAgICAgIHJldHVybiBsaW5rLnR5cGUgPT09IENvQzdMaW5rLkxJTktfVFlQRS5JVEVNXG4gICAgICB9LFxuICAgICAgc2V0IGl0ZW0gKHgpIHtcbiAgICAgICAgaWYgKHggPT09IHRydWUpIGxpbmsudHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5JVEVNXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlICh1cGRhdGVEYXRhKSB7XG4gICAgdGhpcy5fbGlua0RhdGEgPSBtZXJnZU9iamVjdCh0aGlzLl9saW5rRGF0YSwgdXBkYXRlRGF0YSlcbiAgICBpZiAodGhpcy5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSB8fCB0aGlzLl9saW5rRGF0YS5mcm9tQ29tcGVuZGl1bSkge1xuICAgICAgYXdhaXQgdGhpcy5mZXRjaEl0ZW0oKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUZyb21MaW5rIChsaW5rRGF0YSkge1xuICAgIGF3YWl0IHRoaXMuc2V0RGF0YShsaW5rRGF0YSlcbiAgICBpZiAodGhpcy5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSB8fCB0aGlzLl9saW5rRGF0YS5mcm9tQ29tcGVuZGl1bSkge1xuICAgICAgYXdhaXQgdGhpcy5mZXRjaEl0ZW0oKVxuICAgIH1cbiAgfVxuXG4gIGdldCBsaW5rICgpIHtcbiAgICBpZiAoIXRoaXMudHlwZSkgcmV0dXJuIG51bGxcbiAgICBzd2l0Y2ggKHRoaXMudHlwZSkge1xuICAgICAgY2FzZSBDb0M3TGluay5MSU5LX1RZUEUuQ0hFQ0s6IHtcbiAgICAgICAgLy8gQGNvYzcuY2hlY2tbdHlwZTpjaGFyYWMsbmFtZTpTVFIsZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIFNUUiBjaGVjaygtMSl9XG4gICAgICAgIGlmICghdGhpcy50eXBlIHx8ICF0aGlzLm5hbWUpIHJldHVybiBudWxsXG4gICAgICAgIGxldCBvcHRpb25zID0gYCR7dGhpcy5fbGlua0RhdGEuYmxpbmQgPyAnYmxpbmQsJyA6ICcnfXR5cGU6JHtcbiAgICAgICAgICB0aGlzLmNoZWNrVHlwZVxuICAgICAgICB9LG5hbWU6JHt0aGlzLm5hbWV9YFxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuX2xpbmtEYXRhLmRpZmZpY3VsdHkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLGRpZmZpY3VsdHk6JHt0aGlzLl9saW5rRGF0YS5kaWZmaWN1bHR5fWBcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuX2xpbmtEYXRhLm1vZGlmaWVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxtb2RpZmllcjoke3RoaXMuX2xpbmtEYXRhLm1vZGlmaWVyfWBcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fbGlua0RhdGEuaWNvbikgb3B0aW9ucyArPSBgLGljb246JHt0aGlzLl9saW5rRGF0YS5pY29ufWBcblxuICAgICAgICAvLyBUT0RPOiBDaGVjayBpZiBuZWVkZWRcbiAgICAgICAgaWYgKHRoaXMuX2xpbmtEYXRhLmZyb21Db21wZW5kaXVtKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLHBhY2s6JHt0aGlzLl9saW5rRGF0YS5wYWNrfWBcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0gfHwgdGhpcy5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSkge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxpZDoke3RoaXMuX2xpbmtEYXRhLmlkfWBcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsaW5rID0gYEBjb2M3LmNoZWNrWyR7b3B0aW9uc31dYFxuICAgICAgICBpZiAodGhpcy5fbGlua0RhdGEuaGFzTGFiZWwgJiYgdGhpcy5fbGlua0RhdGEubGFiZWwpIHtcbiAgICAgICAgICBsaW5rICs9IGB7JHt0aGlzLl9saW5rRGF0YS5sYWJlbH19YFxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMubmFtZSkge1xuICAgICAgICAgIGxpbmsgKz0gYHske3RoaXMubmFtZX19YFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaW5rXG4gICAgICB9XG5cbiAgICAgIGNhc2UgQ29DN0xpbmsuTElOS19UWVBFLlNBTkxPU1M6IHtcbiAgICAgICAgLy8gQGNvYzcuc2FubG9zc1tzYW5NYXg6MUQ2LHNhbk1pbjoxLGRpZmZpY3VsdHk6KyssbW9kaWZpZXI6LTFde0hhcmQgU2FuIExvc3MgKC0xKSAxLzFENn1cbiAgICAgICAgaWYgKCF0aGlzLl9saW5rRGF0YS5zYW5NYXggfHwgIXRoaXMuX2xpbmtEYXRhLnNhbk1pbikgcmV0dXJuIG51bGxcblxuICAgICAgICAvLyBUT0RPIDogQmxpbmQgU0FOIHRlc3QgPz9cbiAgICAgICAgLy8gbGV0IG9wdGlvbnMgPSBgJHt0aGlzLl9saW5rRGF0YS5ibGluZD8nYmxpbmQsJzonJ31zYW5NYXg6JHt0aGlzLl9saW5rRGF0YS5zYW5NYXh9LHNhbk1pbjoke3RoaXMuX2xpbmtEYXRhLnNhbk1pbn1gO1xuICAgICAgICBsZXQgb3B0aW9ucyA9IGBzYW5NYXg6JHt0aGlzLl9saW5rRGF0YS5zYW5NYXh9LHNhbk1pbjoke3RoaXMuX2xpbmtEYXRhLnNhbk1pbn1gXG5cbiAgICAgICAgaWYgKHRoaXMuX2xpbmtEYXRhLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAsZGlmZmljdWx0eToke3RoaXMuX2xpbmtEYXRhLmRpZmZpY3VsdHl9YFxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9saW5rRGF0YS5zYW5SZWFzb24pIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAsc2FuUmVhc29uOiR7dGhpcy5fbGlua0RhdGEuc2FuUmVhc29ufWBcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fbGlua0RhdGEubW9kaWZpZXIpIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAsbW9kaWZpZXI6JHt0aGlzLl9saW5rRGF0YS5tb2RpZmllcn1gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2xpbmtEYXRhLmljb24pIG9wdGlvbnMgKz0gYCxpY29uOiR7dGhpcy5fbGlua0RhdGEuaWNvbn1gXG4gICAgICAgIGxldCBsaW5rID0gYEBjb2M3LnNhbmxvc3NbJHtvcHRpb25zfV1gXG4gICAgICAgIGlmICh0aGlzLl9saW5rRGF0YS5oYXNMYWJlbCkgbGluayArPSBgeyR7dGhpcy5fbGlua0RhdGEubGFiZWx9fWBcbiAgICAgICAgcmV0dXJuIGxpbmtcbiAgICAgIH1cblxuICAgICAgLy8gRG8gd2UgbmVlZCB0aGF0ID8/P1xuICAgICAgY2FzZSBDb0M3TGluay5MSU5LX1RZUEUuSVRFTToge1xuICAgICAgICAvLyBAY29jNy5pdGVtW3R5cGU6b3B0aW9uYWwsbmFtZTpTaG90Z3VuLGRpZmZpY3VsdHk6Kyxtb2RpZmllcjotMV17SGFyZCBTaGl0Z3VuIGNoZWNrKC0xKX1cbiAgICAgICAgaWYgKCF0aGlzLnR5cGUgfHwgIXRoaXMubmFtZSkgcmV0dXJuIG51bGxcbiAgICAgICAgbGV0IG9wdGlvbnMgPSBgbmFtZToke3RoaXMubmFtZX1gXG4gICAgICAgIGlmICh0aGlzLl9saW5rRGF0YS5pY29uKSBvcHRpb25zICs9IGAsaWNvbjoke3RoaXMuX2xpbmtEYXRhLmljb259YFxuXG4gICAgICAgIC8vIFRPRE86IENoZWNrIGlmIG5lZWRlZFxuICAgICAgICBpZiAodGhpcy5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0pIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAscGFjazoke3RoaXMuX2xpbmtEYXRhLnBhY2t9YFxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9saW5rRGF0YS5mcm9tQ29tcGVuZGl1bSB8fCB0aGlzLl9saW5rRGF0YS5mcm9tRGlyZWN0b3J5KSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLGlkOiR7dGhpcy5fbGlua0RhdGEuaWR9YFxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxpbmsgPSBgQGNvYzcuaXRlbVske29wdGlvbnN9XWBcbiAgICAgICAgaWYgKHRoaXMuX2xpbmtEYXRhLmhhc0xhYmVsKSBsaW5rICs9IGB7JHt0aGlzLl9saW5rRGF0YS5sYWJlbH19YFxuICAgICAgICByZXR1cm4gbGlua1xuICAgICAgfVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgZGlmZk9iamVjdCwgZXhwYW5kT2JqZWN0LCBGb3JtQXBwbGljYXRpb24sIGdhbWUsIG1lcmdlT2JqZWN0LCB1aSAqL1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdMaW5rIH0gZnJvbSAnLi9saW5rLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdMaW5rQ3JlYXRpb25EaWFsb2cgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICAvKiogQG92ZXJyaWRlICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgaWQ6ICdsaW5rLWNyZWF0aW9uJyxcbiAgICAgIGNsYXNzZXM6IFsnY29jNyddLFxuICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DcmVhdGVMaW5rJyksXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiBudWxsLCBkcm9wU2VsZWN0b3I6ICcuY29udGFpbmVyJyB9XSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2xpbmstY3JlYXRpb24uaHRtbCcsXG4gICAgICBjbG9zZU9uU3VibWl0OiBmYWxzZSxcbiAgICAgIHN1Ym1pdE9uQ2xvc2U6IHRydWUsXG4gICAgICBzdWJtaXRPbkNoYW5nZTogdHJ1ZSxcbiAgICAgIHdpZHRoOiA0MDAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJyxcbiAgICAgIGNob2ljZXM6IHt9LFxuICAgICAgYWxsb3dDdXN0b206IHRydWUsXG4gICAgICBtaW5pbXVtOiAwLFxuICAgICAgbWF4aW11bTogbnVsbFxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbUxpbmtEYXRhIChsaW5rRGF0YSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgbGluayA9IGF3YWl0IENvQzdMaW5rLmZyb21EYXRhKGxpbmtEYXRhKVxuICAgIHJldHVybiBuZXcgQ29DN0xpbmtDcmVhdGlvbkRpYWxvZyhsaW5rLCBvcHRpb25zKVxuICB9XG5cbiAgc3RhdGljIGdldCBhdHRyaWJ1dGVzICgpIHtcbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICBrZXk6ICdsY2snLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKSxcbiAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBrZXk6ICdzYW4nLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eScpLFxuICAgICAgICBzZWxlY3RlZDogZmFsc2VcbiAgICAgIH1cbiAgICBdXG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIGRhdGEubGluayA9IHRoaXMubGlua1xuICAgIGRhdGEuZGF0YSA9IHRoaXMubGluay5kYXRhXG4gICAgZGF0YS5mcm9tR2FtZSA9XG4gICAgICB0aGlzLmxpbmsuaXMuaXRlbSB8fFxuICAgICAgKHRoaXMubGluay5pcy5jaGVjayAmJiB0aGlzLmxpbmsuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuU0tJTEwpXG4gICAgZGF0YS5hc2tJZCA9XG4gICAgICBkYXRhLmZyb21HYW1lICYmXG4gICAgICAodGhpcy5saW5rLmRhdGEuZnJvbURpcmVjdG9yeSB8fCB0aGlzLmxpbmsuZGF0YS5mcm9tQ29tcGVuZGl1bSlcbiAgICBkYXRhLmFza1BhY2sgPSBkYXRhLmZyb21HYW1lICYmIHRoaXMubGluay5kYXRhLmZyb21Db21wZW5kaXVtXG4gICAgZGF0YS5pc1NldEZyb21HYW1lID0gZGF0YS5hc2tJZCB8fCBkYXRhLmFza1BhY2tcblxuICAgIC8vIFByZXBhcmUgZGlmZmljdWx0eSBzZWxlY3QgZGF0YVxuICAgIGRhdGEuZGlmZmljdWx0eUxldmVsID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbFxuICAgIGRhdGEuc2VsZWN0ZWREaWZmaWN1bHR5ID0ge1xuICAgICAgdW5rbm93bjogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duID09PSB0aGlzLmxpbmsuZGF0YS5kaWZmaWN1bHR5LFxuICAgICAgcmVndWxhcjogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID09PSB0aGlzLmxpbmsuZGF0YS5kaWZmaWN1bHR5LFxuICAgICAgaGFyZDogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkID09PSB0aGlzLmxpbmsuZGF0YS5kaWZmaWN1bHR5LFxuICAgICAgZXh0cmVtZTogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lID09PSB0aGlzLmxpbmsuZGF0YS5kaWZmaWN1bHR5LFxuICAgICAgY3JpdGljYWw6IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWwgPT09IHRoaXMubGluay5kYXRhLmRpZmZpY3VsdHlcbiAgICB9XG4gICAgaWYgKCF0aGlzLmxpbmsuZGF0YS5kaWZmaWN1bHR5KSB7XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGVmYXVsdENoZWNrRGlmZmljdWx0eScpID09PSAndW5rbm93bicpIHtcbiAgICAgICAgZGF0YS5zZWxlY3RlZERpZmZpY3VsdHkudW5rbm93biA9IHRydWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGEuc2VsZWN0ZWREaWZmaWN1bHR5LnJlZ3VsYXIgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUHJlcGFyZSBsaW5rIHR5cGVcbiAgICBkYXRhLmxpbmtUeXBlID0gW1xuICAgICAge1xuICAgICAgICBrZXk6IENvQzdMaW5rLkxJTktfVFlQRS5DSEVDSyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGVjaycpLFxuICAgICAgICBzZWxlY3RlZDogdGhpcy5saW5rLmlzLmNoZWNrXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBrZXk6IENvQzdMaW5rLkxJTktfVFlQRS5TQU5MT1NTLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eUNoZWNrJyksXG4gICAgICAgIHNlbGVjdGVkOiB0aGlzLmxpbmsuaXMuc2FubG9zc1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5MSU5LX1RZUEUuSVRFTSxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JdGVtV2VhcG9uJyksXG4gICAgICAgIHNlbGVjdGVkOiB0aGlzLmxpbmsuaXMuaXRlbVxuICAgICAgfVxuICAgIF1cblxuICAgIC8vIFByZXBhcmUgY2hlY2sgdHlwZSBkYXRhXG4gICAgZGF0YS5jaGVja1R5cGUgPSBDb0M3TGluay5DSEVDS19UWVBFXG4gICAgZGF0YS5zZWxlY3RlZENoZWNrVHlwZSA9IHtcbiAgICAgIGNoYXJhY3RlcmlzdGljOiBDb0M3TGluay5DSEVDS19UWVBFLkNIQVJBQ1RFUklTVElDID09PSB0aGlzLmxpbmsuY2hlY2ssXG4gICAgICBhdHRyaWJ1dGU6IENvQzdMaW5rLkNIRUNLX1RZUEUuQVRUUklCVVRFID09PSB0aGlzLmxpbmsuY2hlY2ssXG4gICAgICBza2lsbDogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TS0lMTCA9PT0gdGhpcy5saW5rLmNoZWNrXG4gICAgfVxuICAgIGlmICghdGhpcy5saW5rLmNoZWNrKSBkYXRhLnNlbGVjdGVkQ2hlY2tUeXBlLmNoYXJhY3RlcmlzdGljID0gdHJ1ZVxuXG4gICAgLy8gUHJlcGFyZSBjaGFyYWN0ZXJpc3RpY3NcbiAgICBkYXRhLmNoYXJhY3RlcmlzdGljcyA9IENvQ0FjdG9yLmdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbigpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmNoYXJhY3RlcmlzdGljcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKFxuICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNLZXkgPT09IGRhdGEuY2hhcmFjdGVyaXN0aWNzW2ldLmtleSB8fFxuICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNLZXkgPT09IGRhdGEuY2hhcmFjdGVyaXN0aWNzW2ldLnNob3J0TmFtZSB8fFxuICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNLZXkgPT09IGRhdGEuY2hhcmFjdGVyaXN0aWNzW2ldLmxhYmVsXG4gICAgICApIHtcbiAgICAgICAgZGF0YS5jaGFyYWN0ZXJpc3RpY3NbaV0uc2VsZWN0ZWQgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhLmNoYXJhY3RlcmlzdGljc1tpXS5zZWxlY3RlZCA9IGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUHJlcGFyZSBjaGFyYWN0ZXJpc3RpY3NcbiAgICBkYXRhLmF0dHJpYnV0ZXMgPSBDb0M3TGlua0NyZWF0aW9uRGlhbG9nLmF0dHJpYnV0ZXMubWFwKGUgPT4ge1xuICAgICAgZS5zZWxlY3RlZCA9IGRhdGEuZGF0YS5hdHRyaWJ1dGVLZXkgPT09IGUua2V5XG4gICAgICByZXR1cm4gZVxuICAgIH0pXG5cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgZ2V0IGxpbmsgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdFxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBodG1sLmZpbmQoJy5zdWJtaXQtYnV0dG9uJykuY2xpY2sodGhpcy5fb25DbGlja1N1Ym1pdC5iaW5kKHRoaXMpKVxuXG4gICAgLy8gUmVwbGFjZWQgaW4gb3B0aW9ucyBieSBkcmFnRHJvcDogW3tkcmFnU2VsZWN0b3I6IG51bGwsIGRyb3BTZWxlY3RvcjogJy5jb250YWluZXInfV1cbiAgICAvLyBjb25zdCBkcmFnRHJvcCA9IG5ldyBEcmFnRHJvcCh7XG4gICAgLy8gICBkcm9wU2VsZWN0b3I6ICcuY29udGFpbmVyJyxcbiAgICAvLyAgIGNhbGxiYWNrczogeyBkcm9wOiB0aGlzLl9vbkRyb3AuYmluZCh0aGlzKSB9XG4gICAgLy8gfSk7XG4gICAgLy8gY29uc3QgdGVzdCA9IGRyYWdEcm9wLmJpbmQoaHRtbFswXSk7XG5cbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQpIHtcbiAgICBjb25zdCBkYXRhU3RyaW5nID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKVxuICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpXG4gICAgaWYgKGRhdGEuQ29DN1R5cGUgPT09ICdsaW5rJykge1xuICAgICAgYXdhaXQgdGhpcy5saW5rLnVwZGF0ZUZyb21MaW5rKGRhdGEpXG4gICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZGF0YS5hY3RvcklkKSB7XG4gICAgICAgIGNvbnN0IGFjdG9yS2V5ID1cbiAgICAgICAgICBkYXRhLnNjZW5lSWQgJiYgZGF0YS50b2tlbklkXG4gICAgICAgICAgICA/IGAke2RhdGEuc2NlbmVJZH0uJHtkYXRhLnRva2VuSWR9YFxuICAgICAgICAgICAgOiBkYXRhLmFjdG9ySWRcbiAgICAgICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSlcbiAgICAgICAgaWYgKGFjdG9yLmhhc1BsYXllck93bmVyKSB7XG4gICAgICAgICAgdGhpcy5saW5rLmhhc1BsYXllck93bmVyID0gdHJ1ZVxuICAgICAgICAgIHRoaXMubGluay5hY3RvcktleSA9IGFjdG9yLmFjdG9yS2V5XG4gICAgICAgIH0gZWxzZSB0aGlzLmxpbmsuaGFzUGxheWVyT3duZXIgPSBmYWxzZVxuICAgICAgfVxuICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ0l0ZW0nKSB7XG4gICAgICAgIGlmICghZGF0YS5kYXRhKSB7XG4gICAgICAgICAgaWYgKGRhdGEuaWQpIHtcbiAgICAgICAgICAgIHRoaXMubGluay5fbGlua0RhdGEuaWQgPSBkYXRhLmlkXG4gICAgICAgICAgICB0aGlzLmxpbmsuX2xpbmtEYXRhLmZyb21EaXJlY3RvcnkgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChkYXRhLnBhY2spIHtcbiAgICAgICAgICAgIHRoaXMubGluay5fbGlua0RhdGEucGFjayA9IGRhdGEucGFja1xuICAgICAgICAgICAgdGhpcy5saW5rLl9saW5rRGF0YS5mcm9tRGlyZWN0b3J5ID0gZmFsc2VcbiAgICAgICAgICAgIHRoaXMubGluay5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0gPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGF3YWl0IHRoaXMubGluay5mZXRjaEl0ZW0oKVxuICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3dpdGNoIChkYXRhLmRhdGEudHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnc2tpbGwnOlxuICAgICAgICAgICAgICB0aGlzLmxpbmsuX2xpbmtEYXRhLmZyb21EaXJlY3RvcnkgPSBmYWxzZVxuICAgICAgICAgICAgICB0aGlzLmxpbmsuX2xpbmtEYXRhLmZyb21Db21wZW5kaXVtID0gZmFsc2VcbiAgICAgICAgICAgICAgdGhpcy5saW5rLnR5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuQ0hFQ0tcbiAgICAgICAgICAgICAgdGhpcy5saW5rLmNoZWNrID0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TS0lMTFxuICAgICAgICAgICAgICB0aGlzLmxpbmsubmFtZSA9IGRhdGEuZGF0YS5uYW1lXG4gICAgICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICd3ZWFwb24nOlxuICAgICAgICAgICAgICB0aGlzLmxpbmsuX2xpbmtEYXRhLmZyb21EaXJlY3RvcnkgPSBmYWxzZVxuICAgICAgICAgICAgICB0aGlzLmxpbmsuX2xpbmtEYXRhLmZyb21Db21wZW5kaXVtID0gZmFsc2VcbiAgICAgICAgICAgICAgdGhpcy5saW5rLnR5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuSVRFTVxuICAgICAgICAgICAgICB0aGlzLmxpbmsubmFtZSA9IGRhdGEuZGF0YS5uYW1lXG4gICAgICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG5cbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX29uQ2xpY2tTdWJtaXQgKGV2ZW50KSB7XG4gICAgY29uc3QgYWN0aW9uID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblxuICAgIGlmICghdGhpcy5saW5rLmxpbmspIHtcbiAgICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMud2FybiggJ0xpbmsgaXMgaW52YWxpZCAhJyk7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ2NsaXBib2FyZCc6XG4gICAgICAgIENvQzdVdGlsaXRpZXMuY29weVRvQ2xpcGJvYXJkKHRoaXMubGluay5saW5rKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdjaGF0JzpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IHt9XG4gICAgICAgICAgb3B0aW9uLnNwZWFrZXIgPSB7XG4gICAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgICB9XG4gICAgICAgICAgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWVzc2FnZUNoZWNrUmVxdWVzdGVkV2FpdCcsIHtcbiAgICAgICAgICAgICAgY2hlY2s6IHRoaXMubGluay5saW5rXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG9wdGlvblxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICd3aGlzcGVyLW93bmVyJzpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IHt9XG4gICAgICAgICAgb3B0aW9uLnNwZWFrZXIgPSB7XG4gICAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgICB9XG4gICAgICAgICAgb3B0aW9uLndoaXNwZXIgPSB0aGlzLmxpbmsuYWN0b3Iub3duZXJzXG4gICAgICAgICAgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWVzc2FnZVRhcmdldENoZWNrUmVxdWVzdGVkJywge1xuICAgICAgICAgICAgICBuYW1lOiB0aGlzLmxpbmsuYWN0b3IubmFtZSxcbiAgICAgICAgICAgICAgY2hlY2s6IHRoaXMubGluay5saW5rXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG9wdGlvblxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICd3aGlzcGVyLXNlbGVjdGVkJzpcbiAgICAgICAge1xuICAgICAgICAgIGlmICghY2FudmFzLnRva2Vucy5jb250cm9sbGVkLmxlbmd0aCkge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKCdObyB0b2tlbnMgc2VsZWN0ZWQnKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IHt9XG4gICAgICAgICAgb3B0aW9uLnNwZWFrZXIgPSB7XG4gICAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChjb25zdCB0IG9mIGNhbnZhcy50b2tlbnMuY29udHJvbGxlZCkge1xuICAgICAgICAgICAgaWYgKHQuYWN0b3IuaGFzUGxheWVyT3duZXIpIHtcbiAgICAgICAgICAgICAgb3B0aW9uLndoaXNwZXIgPSB0LmFjdG9yLm93bmVyc1xuICAgICAgICAgICAgICBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UoXG4gICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VUYXJnZXRDaGVja1JlcXVlc3RlZCcsIHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IHQuYWN0b3IubmFtZSxcbiAgICAgICAgICAgICAgICAgIGNoZWNrOiB0aGlzLmxpbmsubGlua1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG9wdGlvblxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIHRoaXMuY2xvc2UoKVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZVxuICAgKiBBIHN1YmNsYXNzIG9mIHRoZSBGb3JtQXBwbGljYXRpb24gbXVzdCBpbXBsZW1lbnQgdGhlIF91cGRhdGVPYmplY3QgbWV0aG9kLlxuICAgKi9cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGdyb3VwID0gdGFyZ2V0Py5jbG9zZXN0KCcuZm9ybS1ncm91cCcpXG4gICAgY29uc3QgZ3JvdXBOYW1lID0gZ3JvdXA/LmRhdGFzZXQuZ3JvdXBcbiAgICBpZiAoZ3JvdXBOYW1lID09PSAnb3JpZ2luJykge1xuICAgICAgLy8gRGVwcmVjYXRlZFxuICAgICAgaWYgKHRhcmdldC5uYW1lID09PSAnZnJvbUNvbXBlbmRpdW0nKSB7XG4gICAgICAgIHRoaXMubGluay5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0gPSAhdGhpcy5saW5rLl9saW5rRGF0YS5mcm9tQ29tcGVuZGl1bVxuICAgICAgICBpZiAodGhpcy5saW5rLl9saW5rRGF0YS5mcm9tQ29tcGVuZGl1bSkge1xuICAgICAgICAgIHRoaXMubGluay5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0YXJnZXQubmFtZSA9PT0gJ2Zyb21EaXJlY3RvcnknKSB7XG4gICAgICAgIHRoaXMubGluay5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSA9ICF0aGlzLmxpbmsuX2xpbmtEYXRhLmZyb21EaXJlY3RvcnlcbiAgICAgICAgaWYgKHRoaXMubGluay5fbGlua0RhdGEuZnJvbURpcmVjdG9yeSkge1xuICAgICAgICAgIHRoaXMubGluay5fbGlua0RhdGEuZnJvbUNvbXBlbmRpdW0gPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLmxpbmsuZmV0Y2hJdGVtKClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZm9ybURhdGFFeCA9IGV4cGFuZE9iamVjdChmb3JtRGF0YSlcbiAgICAgIGlmIChmb3JtRGF0YUV4LmNoZWNrKSBmb3JtRGF0YUV4LmNoZWNrID0gTnVtYmVyKGZvcm1EYXRhRXguY2hlY2spXG4gICAgICBpZiAoZm9ybURhdGFFeC5kaWZmaWN1bHR5KSB7XG4gICAgICAgIGZvcm1EYXRhRXguZGlmZmljdWx0eSA9IE51bWJlcihmb3JtRGF0YUV4LmRpZmZpY3VsdHkpXG4gICAgICB9XG4gICAgICBpZiAoZm9ybURhdGFFeC50eXBlKSBmb3JtRGF0YUV4LnR5cGUgPSBOdW1iZXIoZm9ybURhdGFFeC50eXBlKVxuICAgICAgY29uc3QgZGlmZkRhdGEgPSBkaWZmT2JqZWN0KHRoaXMubGluay5kYXRhLCBmb3JtRGF0YUV4KVxuICAgICAgYXdhaXQgdGhpcy5saW5rLnVwZGF0ZShkaWZmRGF0YSlcbiAgICB9XG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIC8vIC8qKiBAb3ZlcnJpZGUgKi9cbiAgLy8gX2dldFN1Ym1pdERhdGEodXBkYXRlRGF0YT17fSkge1xuICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhgX2dldFN1Ym1pdERhdGE6ICR7dXBkYXRlRGF0YX1gKTtcblxuICAvLyAgIC8vIENyZWF0ZSB0aGUgZXhwYW5kZWQgdXBkYXRlIGRhdGEgb2JqZWN0XG4gIC8vICAgY29uc3QgZmQgPSBuZXcgRm9ybURhdGFFeHRlbmRlZCh0aGlzLmZvcm0sIHtlZGl0b3JzOiB0aGlzLmVkaXRvcnN9KTtcbiAgLy8gICBsZXQgZGF0YSA9IGZkLnRvT2JqZWN0KCk7XG4gIC8vICAgaWYgKCB1cGRhdGVEYXRhICkgZGF0YSA9IG1lcmdlT2JqZWN0KGRhdGEsIHVwZGF0ZURhdGEpO1xuICAvLyAgIGVsc2UgZGF0YSA9IGV4cGFuZE9iamVjdChkYXRhKTtcblxuICAvLyAgIC8vIEhhbmRsZSBEYW1hZ2UgYXJyYXlcbiAgLy8gICBjb25zdCBkYW1hZ2UgPSBkYXRhLmRhdGE/LmRhbWFnZTtcbiAgLy8gICBpZiAoIGRhbWFnZSApIGRhbWFnZS5wYXJ0cyA9IE9iamVjdC52YWx1ZXMoZGFtYWdlPy5wYXJ0cyB8fCB7fSkubWFwKGQgPT4gW2RbMF0gfHwgJycsIGRbMV0gfHwgJyddKTtcblxuICAvLyAgIC8vIFJldHVybiB0aGUgZmxhdHRlbmVkIHN1Ym1pc3Npb24gZGF0YVxuICAvLyAgIHJldHVybiBmbGF0dGVuT2JqZWN0KGRhdGEpO1xuICAvLyB9XG5cbiAgLy8gLyoqIEBvdmVycmlkZSAqL1xuICAvLyBfb25TdWJtaXRcblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlICgpIHtcbiAgICBjb25zdCBsaW5rID0gbmV3IENvQzdMaW5rKClcbiAgICBuZXcgQ29DN0xpbmtDcmVhdGlvbkRpYWxvZyhsaW5rLCB7fSkucmVuZGVyKHRydWUpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBjYW52YXMsIENoYXRNZXNzYWdlLCBkdXBsaWNhdGUsIGdhbWUsIE5vZGVGaWx0ZXIsIFRleHRFZGl0b3IsIHVpICovXG5cbi8qKlxuICogQWxsb3cgZm9yIHBhcnNpbmcgb2YgQ29DNyBlbGVtZW50cyBpbiBjaGF0IG1lc3NhZ2UgYW5kIHNoZWV0cy5cbiAqIEZvcm1hdCBpcyA6XG4gKiBAY29jNy5UWVBFX09GX1JFUVVFU1RbT1BUSU9OU117RElTUExBWUVEX05BTUV9XG4gKiBUWVBFX09GX1JFUVVFU1QgOlxuICogLSBzYW5sb3NzIDogdHJpZ2dlciBhIHNhbiBjaGVjaywgdXBvbiBmYWlsdXJlIHdpbGwgcHJvcG9zZSB0byBkZWR1Y3QgdGhlIGNvcnJlc3BvbmRpbmcgU0FOLlxuICogLSBjaGVjayA6IHRyaWdnZXIgYSBjaGVjayBkZXBlbmRpbmcgb24gdGhlIG9wdGlvbnMuXG4gKlxuICogT1BUSU9OUzogW10gPSBvcHRpb25hbFxuICogc2FubG9zczpcbiAqICAgc2FuTWF4OiBtYXggU0FOIGxvc3NcbiAqICAgc2FuTWluOiBtaW4gU0FOIGxvc3NcbiAqIGNoZWNrOlxuICogICB0eXBlOiB0eXBlIG9mIGNoZWNrIChjaGFyYWN0ZXJpc3RpYywgc2tpbGwsIGF0dHJpYikuXG4gKiAgIG5hbWU6IG5hbWUgb2YgdGhlIHNraWxsL2NoYXJhY3RlcmlzdGljLlxuICogICBbZGlmZmljdWx0eV06ID8gKGJsaW5kKSwgMCAocmVndWxhciksICsgKGhhcmQpLCArKyAoZXh0cmVtZSksICsrKyAoY3JpdGljYWwpLlxuICogICBbbW9kaWZpZXJdOiAteCAoeCBwZW5hbHR5IGRpY2UpLCAreCAoeCBib251cyBkaWNlKSwgMCAobm8gbW9kaWZpZXIpLlxuICogICBbaWNvbl06IGljb24gdHUgdXNlIChmb250IGF3c29tZSkuXG4gKiAgIFtibGluZF06IHdpbGwgdHJpZ2dlciBhIGJsaW5kIHJvbGwuXG4gKlxuICogW0RJU1BMQVlFRF9OQU1FOiBuYW1lIHRvIGRpc3BsYXkuXVxuICpcbiAqL1xuXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuLi9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcydcbmltcG9ydCB7IGlzQ3RybEtleSwgY2hhdEhlbHBlciB9IGZyb20gJy4uL2NoYXQvaGVscGVyLmpzJ1xuXG4vLyBpbXBvcnQgeyBDb0M3U2FuQ2hlY2sgfSBmcm9tICcuLi9jaGF0L3NhbmNoZWNrLmpzJztcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IENvQzdMaW5rQ3JlYXRpb25EaWFsb2cgfSBmcm9tICcuL2xpbmstY3JlYXRpb24tZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29DN0xpbmsgfSBmcm9tICcuL2xpbmsuanMnXG5pbXBvcnQgeyBSb2xsRGlhbG9nIH0gZnJvbSAnLi9yb2xsLWRpYWxvZy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdQYXJzZXIge1xuICBzdGF0aWMgYXN5bmMgb25FZGl0b3JEcm9wIChldmVudCwgZWRpdG9yKSB7XG4gICAgLy8gVE9ETzogTUFOQUdFIEZMQVQgTU9ESUZJRVIgVEhFUkVcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAvLyBjaGVjayBrZXkgcHJlc3NlZCAoQ1RSTCA/KVxuICAgIC8vIGlmIENUUkwgY2hlY2sgaWYgaXRlbSBpcyBza2lsbC93ZWFwb25cbiAgICAvLyBpZiBpdGVtIGZyb20gZ2FtZSBvciBwYWNrIGFkZCByZWYgdG8gdGhlIGxpbmsgIVxuICAgIC8vIGNvbnN0IGRhdGFTdHJpbmcgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpO1xuICAgIGNvbnN0IGRhdGFTdHJpbmcgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpXG4gICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZGF0YVN0cmluZylcbiAgICBpZiAoZGF0YS5saW5rVHlwZSA9PT0gJ2NvYzctbGluaycpIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICBpZiAoXG4gICAgICAgICFldmVudC5zaGlmdEtleSAmJlxuICAgICAgICAodHlwZW9mIGRhdGEuZGlmZmljdWx0eSA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICB0eXBlb2YgZGF0YS5tb2RpZmllciA9PT0gJ3VuZGVmaW5lZCcpXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZSh7XG4gICAgICAgICAgZGlzYWJsZUZsYXREaWNlTW9kaWZpZXI6IHRydWVcbiAgICAgICAgfSlcbiAgICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgICAgZGF0YS5tb2RpZmllciA9IHVzYWdlLmdldCgnYm9udXNEaWNlJylcbiAgICAgICAgICBkYXRhLmRpZmZpY3VsdHkgPSB1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSA9PT0gJ2JsaW5kcm9sbCcpIHtcbiAgICAgICAgZGF0YS5ibGluZCA9IHRydWVcbiAgICAgIH1cblxuICAgICAgY29uc3QgbGluayA9IENvQzdQYXJzZXIuY3JlYXRlQ29DN0xpbmsoZGF0YSlcblxuICAgICAgaWYgKGxpbmspIHtcbiAgICAgICAgZWRpdG9yLmluc2VydENvbnRlbnQobGluaylcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzQ3RybEtleShldmVudCkpIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICAgIGlmIChkYXRhLnR5cGUgIT09ICdJdGVtJykgcmV0dXJuXG5cbiAgICAgIGxldCBpdGVtXG4gICAgICBjb25zdCBsaW5rRGF0YSA9IHt9XG5cbiAgICAgIGlmIChkYXRhLnBhY2spIHtcbiAgICAgICAgY29uc3QgcGFjayA9IGdhbWUucGFja3MuZ2V0KGRhdGEucGFjaylcbiAgICAgICAgaWYgKHBhY2subWV0YWRhdGEuZW50aXR5ICE9PSAnSXRlbScpIHJldHVyblxuICAgICAgICBpdGVtID0gYXdhaXQgcGFjay5nZXREb2N1bWVudChkYXRhLmlkKVxuICAgICAgfSBlbHNlIGlmIChkYXRhLmRhdGEpIHtcbiAgICAgICAgaXRlbSA9IGRhdGEuZGF0YVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KGRhdGEuaWQpXG4gICAgICB9XG5cbiAgICAgIGlmICghaXRlbSkgcmV0dXJuXG5cbiAgICAgIGxpbmtEYXRhLm5hbWUgPSBpdGVtLm5hbWVcbiAgICAgIGlmIChkYXRhLnBhY2spIGxpbmtEYXRhLnBhY2sgPSBkYXRhLnBhY2tcbiAgICAgIGlmIChkYXRhLmlkKSBsaW5rRGF0YS5pZCA9IGRhdGEuaWRcblxuICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICBpZiAoIWV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZSh7XG4gICAgICAgICAgICBkaXNhYmxlRmxhdERpY2VNb2RpZmllcjogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgICAgICBsaW5rRGF0YS5tb2RpZmllciA9IHVzYWdlLmdldCgnYm9udXNEaWNlJylcbiAgICAgICAgICAgIGxpbmtEYXRhLmRpZmZpY3VsdHkgPSB1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsaW5rRGF0YS5jaGVjayA9ICdjaGVjaydcbiAgICAgICAgbGlua0RhdGEudHlwZSA9ICdza2lsbCdcbiAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykgPT09ICdibGluZHJvbGwnKSB7XG4gICAgICAgICAgbGlua0RhdGEuYmxpbmQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnd2VhcG9uJykge1xuICAgICAgICBsaW5rRGF0YS5jaGVjayA9ICdpdGVtJ1xuICAgICAgICBsaW5rRGF0YS50eXBlID0gJ3dlYXBvbidcbiAgICAgIH0gZWxzZSByZXR1cm5cblxuICAgICAgY29uc3QgbGluayA9IENvQzdQYXJzZXIuY3JlYXRlQ29DN0xpbmsobGlua0RhdGEpXG4gICAgICBpZiAobGluaykge1xuICAgICAgICBlZGl0b3IuaW5zZXJ0Q29udGVudChsaW5rKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBQYXJzZU1lc3NhZ2UgKFxuICAgIG1lc3NhZ2UsXG4gICAgaHRtbCxcbiAgICBkYXRhIC8qIGNoYXRNZXNzYWdlLCBkYXRhLyosIG9wdGlvbiwgdXNlciAqL1xuICApIHtcbiAgICAvLyBAY29jNy5zYW5sb3NzW3Nhbk1heDoxRDYsc2FuTWluOjEsc2FuUmVhc29uOkdob3VscyxkaWZmaWN1bHR5OisrLG1vZGlmaWVyOi0xXXtIYXJkIFNhbiBMb3NzICgtMSkgMS8xRDZ9XG4gICAgLy8gQGNvYzcuY2hlY2tbdHlwZTpjaGFyYWMsbmFtZTpTVFIsZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIFNUUiBjaGVjaygtMSl9XG4gICAgLy8gQGNvYzcuY2hlY2tbdHlwZTphdHRyaWIsbmFtZTpsY2ssZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIGx1Y2sgY2hlY2soLTEpfVxuICAgIC8vIEBjb2M3LmNoZWNrW3R5cGU6c2tpbGwsbmFtZTphbnRocm9wb2xvZ3ksZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIEFudGhyb3BvbG9neSBjaGVjaygtMSl9XG4gICAgLy8gQGNvYzcuY2hlY2tbdHlwZTpza2lsbCxpY29uOmZhcyBmYS1hcnJvdy1hbHQtY2lyY2xlLXJpZ2h0LG5hbWU6YW50aHJvcG9sb2d5LGRpZmZpY3VsdHk6Kyxtb2RpZmllcjotMV17SGFyZCBBbnRocm9wb2xvZ3kgY2hlY2soLTEpfVxuICAgIC8vIEBjb2M3Lml0ZW1bbmFtZTpTaG90Z3VuLGljb246ZmFzIGZhLWJ1bGxzZXllLGRpZmZpY3VsdHk6Kyxtb2RpZmllcjotMV17VXNlIHNob3RndW59XG4gICAgLy8gW1RCSV1AY29jNy5kYW1hZ2VbZm9ybXVsYToxRDZde0RhbWFnZSAxRDZ9XG4gICAgLy8gW1RCSV1AY29jNy5yb2xsW3RocmVzaG9sZDo1MF17U2ltcGxlIHJvbGx9XG5cbiAgICBpZiAoIW1lc3NhZ2UuaXNDb250ZW50VmlzaWJsZSkgcmV0dXJuXG5cbiAgICBpZiAoZGF0YS5tZXNzYWdlLmNvbnRlbnQudG9Mb2NhbGVMb3dlckNhc2UoKS5pbmNsdWRlcygnQGNvYzcnKSkge1xuICAgICAgY29uc3QgcGFyc2VkQ29udGVudCA9IENvQzdQYXJzZXIuZW5yaWNoSFRNTChkYXRhLm1lc3NhZ2UuY29udGVudClcbiAgICAgIGh0bWwuZmluZCgnLm1lc3NhZ2UtY29udGVudCcpLmh0bWwocGFyc2VkQ29udGVudClcbiAgICAgIC8vIGNoYXRNZXNzYWdlLmRhdGEuY29udGVudCA9IHBhcnNlZENvbnRlbnQ7XG4gICAgICBkYXRhLm1lc3NhZ2UuY29udGVudCA9IHBhcnNlZENvbnRlbnRcbiAgICB9XG4gICAgcmV0dXJuIHRydWUgLy8gYWxsb3cgbWVzc2FnZSB0byBiZSBwdWJsaXNoZWQgIVxuICB9XG5cbiAgc3RhdGljIGNyZWF0ZUNvQzdMaW5rIChkYXRhKSB7XG4gICAgaWYgKCFkYXRhLmNoZWNrKSByZXR1cm5cbiAgICBzd2l0Y2ggKGRhdGEuY2hlY2sudG9Mb3dlckNhc2UoKSkge1xuICAgICAgY2FzZSAnY2hlY2snOiB7XG4gICAgICAgIC8vIEBjb2M3LmNoZWNrW3R5cGU6Y2hhcmFjLG5hbWU6U1RSLGRpZmZpY3VsdHk6Kyxtb2RpZmllcjotMV17SGFyZCBTVFIgY2hlY2soLTEpfVxuICAgICAgICBpZiAoIWRhdGEudHlwZSB8fCAhZGF0YS5uYW1lKSByZXR1cm5cbiAgICAgICAgbGV0IG9wdGlvbnMgPSBgJHtkYXRhLmJsaW5kID8gJ2JsaW5kLCcgOiAnJ310eXBlOiR7ZGF0YS50eXBlfSxuYW1lOiR7XG4gICAgICAgICAgZGF0YS5uYW1lXG4gICAgICAgIH1gXG4gICAgICAgIGlmICh0eXBlb2YgZGF0YS5kaWZmaWN1bHR5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxkaWZmaWN1bHR5OiR7ZGF0YS5kaWZmaWN1bHR5fWBcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGRhdGEubW9kaWZpZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLG1vZGlmaWVyOiR7ZGF0YS5tb2RpZmllcn1gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGEuaWNvbikgb3B0aW9ucyArPSBgLGljb246JHtkYXRhLmljb259YFxuICAgICAgICBpZiAoZGF0YS5wYWNrKSBvcHRpb25zICs9IGAscGFjazoke2RhdGEucGFja31gXG4gICAgICAgIGlmIChkYXRhLmlkKSBvcHRpb25zICs9IGAsaWQ6JHtkYXRhLmlkfWBcbiAgICAgICAgbGV0IGxpbmsgPSBgQGNvYzcuY2hlY2tbJHtvcHRpb25zfV1gXG4gICAgICAgIGlmIChkYXRhLmRpc3BsYXlOYW1lKSBsaW5rICs9IGB7JHtkYXRhLmRpc3BsYXlOYW1lfX1gXG4gICAgICAgIHJldHVybiBsaW5rXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3Nhbmxvc3MnOiB7XG4gICAgICAgIC8vIEBjb2M3LnNhbmxvc3Nbc2FuTWF4OjFENixzYW5NaW46MSxkaWZmaWN1bHR5OisrLG1vZGlmaWVyOi0xXXtIYXJkIFNhbiBMb3NzICgtMSkgMS8xRDZ9XG4gICAgICAgIGlmICghZGF0YS5zYW5NYXggfHwgIWRhdGEuc2FuTWluKSByZXR1cm5cbiAgICAgICAgbGV0IG9wdGlvbnMgPSBgJHtkYXRhLmJsaW5kID8gJ2JsaW5kLCcgOiAnJ31zYW5NYXg6JHtcbiAgICAgICAgICBkYXRhLnNhbk1heFxuICAgICAgICB9LHNhbk1pbjoke2RhdGEuc2FuTWlufWBcbiAgICAgICAgaWYgKGRhdGEuZGlmZmljdWx0eSkgb3B0aW9ucyArPSBgLGRpZmZpY3VsdHk6JHtkYXRhLmRpZmZpY3VsdHl9YFxuICAgICAgICBpZiAoZGF0YS5tb2RpZmllcikgb3B0aW9ucyArPSBgLG1vZGlmaWVyOiR7ZGF0YS5tb2RpZmllcn1gXG4gICAgICAgIGlmIChkYXRhLmljb24pIG9wdGlvbnMgKz0gYCxpY29uOiR7ZGF0YS5pY29ufWBcbiAgICAgICAgbGV0IGxpbmsgPSBgQGNvYzcuc2FubG9zc1ske29wdGlvbnN9XWBcbiAgICAgICAgaWYgKGRhdGEuZGlzcGxheU5hbWUpIGxpbmsgKz0gYHske2RhdGEuZGlzcGxheU5hbWV9fWBcbiAgICAgICAgcmV0dXJuIGxpbmtcbiAgICAgIH1cblxuICAgICAgLy8gRG8gd2UgbmVlZCB0aGF0ID8/P1xuICAgICAgY2FzZSAnaXRlbSc6IHtcbiAgICAgICAgLy8gQGNvYzcuaXRlbVt0eXBlOm9wdGlvbmFsLG5hbWU6U2hvdGd1bixkaWZmaWN1bHR5OissbW9kaWZpZXI6LTFde0hhcmQgU2hpdGd1biBjaGVjaygtMSl9XG4gICAgICAgIGlmICghZGF0YS50eXBlIHx8ICFkYXRhLm5hbWUpIHJldHVyblxuICAgICAgICBsZXQgb3B0aW9ucyA9IGAke2RhdGEuYmxpbmQgPyAnYmxpbmQsJyA6ICcnfXR5cGU6JHtkYXRhLnR5cGV9LG5hbWU6JHtcbiAgICAgICAgICBkYXRhLm5hbWVcbiAgICAgICAgfWBcbiAgICAgICAgLy8gaWYoIGRhdGEuZGlmZmljdWx0eSkgb3B0aW9ucyArPSBgLGRpZmZpY3VsdHk6JHtkYXRhLmRpZmZpY3VsdHl9YDtcbiAgICAgICAgLy8gaWYoIGRhdGEubW9kaWZpZXIpIG9wdGlvbnMgKz0gYCxtb2RpZmllcjoke2RhdGEubW9kaWZpZXJ9YDtcbiAgICAgICAgaWYgKGRhdGEuaWNvbikgb3B0aW9ucyArPSBgLGljb246JHtkYXRhLmljb259YFxuICAgICAgICBpZiAoZGF0YS5wYWNrKSBvcHRpb25zICs9IGAscGFjazoke2RhdGEucGFja31gXG4gICAgICAgIGlmIChkYXRhLmlkKSBvcHRpb25zICs9IGAsaWQ6JHtkYXRhLmlkfWBcbiAgICAgICAgbGV0IGxpbmsgPSBgQGNvYzcuaXRlbVske29wdGlvbnN9XWBcbiAgICAgICAgaWYgKGRhdGEuZGlzcGxheU5hbWUpIGxpbmsgKz0gYHske2RhdGEuZGlzcGxheU5hbWV9fWBcbiAgICAgICAgcmV0dXJuIGxpbmtcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgUGFyc2VTaGVldENvbnRlbnQgKGFwcCwgaHRtbCkge1xuICAgIC8vIENoZWNrIGluIGFsbCBlZGl0b3JzIGNvbnRlbnQgZm9yIGEgbGluay5cbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgaHRtbC5maW5kKCdkaXYuZWRpdG9yLWNvbnRlbnQgPiAqLCBwJykpIHtcbiAgICAgIGlmIChlbGVtZW50Lm91dGVySFRNTC50b0xvY2FsZUxvd2VyQ2FzZSgpLmluY2x1ZGVzKCdAY29jNycpKSB7XG4gICAgICAgIGVsZW1lbnQub3V0ZXJIVE1MID0gQ29DN1BhcnNlci5lbnJpY2hIVE1MKGVsZW1lbnQub3V0ZXJIVE1MKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEJpbmQgdGhlIGNsaWNrIHRvIGV4ZWN1dGUgdGhlIGNoZWNrLlxuICAgIC8vIGh0bWwub24oJ2NsaWNrJywgJ2EuY29jNy1saW5rJywgQ29DN1BhcnNlci5fb25DaGVjay5iaW5kKHRoaXMpKTtcbiAgICBodG1sXG4gICAgICAuZmluZCgnYS5jb2M3LWxpbmsnKVxuICAgICAgLm9uKCdjbGljaycsIGFzeW5jIGV2ZW50ID0+IGF3YWl0IENvQzdQYXJzZXIuX29uQ2hlY2soZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCdhLmNvYzctbGluaycpXG4gICAgICAub24oJ2RyYWdzdGFydCcsIGV2ZW50ID0+IENvQzdQYXJzZXIuX29uRHJhZ0NvQzdMaW5rKGV2ZW50KSlcbiAgfVxuXG4gIHN0YXRpYyBfZ2V0VGV4dE5vZGVzIChwYXJlbnQpIHtcbiAgICBjb25zdCB0ZXh0ID0gW11cbiAgICBjb25zdCB3YWxrID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihcbiAgICAgIHBhcmVudCxcbiAgICAgIE5vZGVGaWx0ZXIuU0hPV19URVhULFxuICAgICAgbnVsbCxcbiAgICAgIGZhbHNlXG4gICAgKVxuICAgIHdoaWxlICh3YWxrLm5leHROb2RlKCkpIHRleHQucHVzaCh3YWxrLmN1cnJlbnROb2RlKVxuICAgIHJldHVybiB0ZXh0XG4gIH1cblxuICBzdGF0aWMgZW5yaWNoSFRNTCAoY29udGVudCkge1xuICAgIGNvbnN0IGh0bWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGh0bWwuaW5uZXJIVE1MID0gU3RyaW5nKGNvbnRlbnQpXG5cbiAgICBsZXQgdGV4dCA9IFtdXG5cbiAgICB0ZXh0ID0gVGV4dEVkaXRvci5fZ2V0VGV4dE5vZGVzKGh0bWwpXG4gICAgLy8gQWx0ZXJuYXRpdmUgcmVnZXggOiAnQChjb2M3KS4oW15cXFtdKylcXFsoW15cXF1dKylcXF0oPzp7KFtefV0rKX0pPydcbiAgICBjb25zdCByZ3ggPSBuZXcgUmVnRXhwKFxuICAgICAgJ0AoY29jNykuKC4qPylcXFxcWyhbXlxcXFxdXSspXFxcXF0nICsgJyg/OnsoW159XSspfSk/JyxcbiAgICAgICdnaSdcbiAgICApXG4gICAgVGV4dEVkaXRvci5fcmVwbGFjZVRleHRDb250ZW50KHRleHQsIHJneCwgQ29DN1BhcnNlci5fY3JlYXRlTGluaylcbiAgICByZXR1cm4gaHRtbC5pbm5lckhUTUxcbiAgfVxuXG4gIHN0YXRpYyBiaW5kRXZlbnRzSGFuZGxlciAoaHRtbCkge1xuICAgIGh0bWxcbiAgICAgIC5maW5kKCdhLmNvYzctbGluaycpXG4gICAgICAub24oJ2NsaWNrJywgYXN5bmMgZXZlbnQgPT4gYXdhaXQgQ29DN1BhcnNlci5fb25DaGVjayhldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ2EuY29jNy1saW5rJylcbiAgICAgIC5vbignZHJhZ3N0YXJ0JywgZXZlbnQgPT4gQ29DN1BhcnNlci5fb25EcmFnQ29DN0xpbmsoZXZlbnQpKVxuICB9XG5cbiAgc3RhdGljIF9vbkRyYWdDb0M3TGluayAoZXZlbnQpIHtcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGkgPSBhLnF1ZXJ5U2VsZWN0b3IoJ2kubGluay1pY29uJylcbiAgICBjb25zdCBkYXRhID0gZHVwbGljYXRlKGEuZGF0YXNldClcbiAgICBkYXRhLmxpbmtUeXBlID0gJ2NvYzctbGluaydcbiAgICBkYXRhLkNvQzdUeXBlID0gJ2xpbmsnXG4gICAgZGF0YS5pY29uID0gbnVsbFxuXG4gICAgaWYgKFxuICAgICAgaS5kYXRhc2V0ICYmXG4gICAgICBpLmRhdGFzZXQubGlua0ljb24gJiZcbiAgICAgIGkuZGF0YXNldC5saW5rSWNvbiAhPT0gJ2ZhcyBmYS1kaWNlJ1xuICAgICkge1xuICAgICAgZGF0YS5pY29uID0gaS5kYXRhc2V0LmxpbmtJY29uXG4gICAgfVxuICAgIGRhdGEuZGlzcGxheU5hbWUgPSBhLmRhdGFzZXQuZGlzcGxheU5hbWUgPyBhLmlubmVyVGV4dCA6IG51bGxcbiAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gIH1cblxuICBzdGF0aWMgX2NyZWF0ZUxpbmsgKG1hdGNoLCB0YWcsIHR5cGUsIG9wdGlvbnMsIG5hbWUpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgY2xzOiBbJ2NvYzctbGluayddLFxuICAgICAgZGF0YXNldDogeyBjaGVjazogdHlwZSB9LFxuICAgICAgaWNvbjogJ2ZhcyBmYS1kaWNlJyxcbiAgICAgIGJsaW5kOiBmYWxzZSxcbiAgICAgIG5hbWU6IG5hbWVcbiAgICB9XG5cbiAgICBjb25zdCBtYXRjaGVzID0gb3B0aW9ucy5tYXRjaEFsbCgvW14sXSsvZ2kpXG4gICAgZm9yIChjb25zdCBtYXRjaCBvZiBBcnJheS5mcm9tKG1hdGNoZXMpKSB7XG4gICAgICBsZXQgW2tleSwgdmFsdWVdID0gbWF0Y2hbMF0uc3BsaXQoJzonKVxuICAgICAgaWYgKGtleSA9PT0gJ2ljb24nKSBkYXRhLmljb24gPSB2YWx1ZVxuICAgICAgaWYgKGtleSA9PT0gJ2JsaW5kJyAmJiB0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhbHVlID0gdHJ1ZVxuICAgICAgICBkYXRhLmJsaW5kID0gdHJ1ZSAmJiBbJ2NoZWNrJ10uaW5jbHVkZXModHlwZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgfVxuICAgICAgZGF0YS5kYXRhc2V0W2tleV0gPSB2YWx1ZVxuICAgIH1cblxuICAgIGxldCB0aXRsZVxuICAgIGNvbnN0IGRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eVN0cmluZyhkYXRhLmRhdGFzZXQuZGlmZmljdWx0eSlcblxuICAgIHN3aXRjaCAodHlwZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlICdjaGVjayc6IHtcbiAgICAgICAgbGV0IGh1bWFuTmFtZSA9IGRhdGEuZGF0YXNldC5uYW1lXG4gICAgICAgIGlmIChcbiAgICAgICAgICBbJ2F0dHJpYnV0ZXMnLCAnYXR0cmlidXRlJywgJ2F0dHJpYicsICdhdHRyaWJzJ10uaW5jbHVkZXMoXG4gICAgICAgICAgICBkYXRhLmRhdGFzZXQudHlwZT8udG9Mb3dlckNhc2UoKVxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKGRhdGEuZGF0YXNldC5uYW1lID09PSAnbGNrJykge1xuICAgICAgICAgICAgaHVtYW5OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZGF0YS5kYXRhc2V0Lm5hbWUgPT09ICdzYW4nKSB7XG4gICAgICAgICAgICBodW1hbk5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5JylcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIFsnY2hhcmFjJywgJ2NoYXInLCAnY2hhcmFjdGVyaXN0aWMnLCAnY2hhcmFjdGVyaXN0aWNzJ10uaW5jbHVkZXMoXG4gICAgICAgICAgICBkYXRhLmRhdGFzZXQudHlwZT8udG9Mb3dlckNhc2UoKVxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgaHVtYW5OYW1lID0gQ29DN1V0aWxpdGllcy5nZXRDaGFyYWN0ZXJpc3RpY05hbWVzKFxuICAgICAgICAgICAgZGF0YS5kYXRhc2V0Lm5hbWVcbiAgICAgICAgICApPy5sYWJlbFxuICAgICAgICB9XG4gICAgICAgIHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rQ2hlY2skeyFkYXRhLmRhdGFzZXQuZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnfSR7XG4gICAgICAgICAgICAhZGF0YS5kYXRhc2V0Lm1vZGlmaWVyID8gJycgOiAnTW9kaWYnXG4gICAgICAgICAgfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eTogZGlmZmljdWx0eSxcbiAgICAgICAgICAgIG1vZGlmaWVyOiBkYXRhLmRhdGFzZXQubW9kaWZpZXIsXG4gICAgICAgICAgICBuYW1lOiBodW1hbk5hbWVcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3Nhbmxvc3MnOlxuICAgICAgICB0aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgYENvQzcuTGlua1Nhbkxvc3MkeyFkYXRhLmRhdGFzZXQuZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnfSR7XG4gICAgICAgICAgICAhZGF0YS5kYXRhc2V0Lm1vZGlmaWVyID8gJycgOiAnTW9kaWYnXG4gICAgICAgICAgfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eTogZGlmZmljdWx0eSxcbiAgICAgICAgICAgIG1vZGlmaWVyOiBkYXRhLmRhdGFzZXQubW9kaWZpZXIsXG4gICAgICAgICAgICBzYW5NaW46IGRhdGEuZGF0YXNldC5zYW5NaW4sXG4gICAgICAgICAgICBzYW5NYXg6IGRhdGEuZGF0YXNldC5zYW5NYXhcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICB0aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgYENvQzcuTGlua0l0ZW0keyFkYXRhLmRhdGFzZXQuZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnfSR7XG4gICAgICAgICAgICAhZGF0YS5kYXRhc2V0Lm1vZGlmaWVyID8gJycgOiAnTW9kaWYnXG4gICAgICAgICAgfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eTogZGlmZmljdWx0eSxcbiAgICAgICAgICAgIG1vZGlmaWVyOiBkYXRhLmRhdGFzZXQubW9kaWZpZXIsXG4gICAgICAgICAgICBuYW1lOiBkYXRhLmRhdGFzZXQubmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBpZiAoIW5hbWUpIHtcbiAgICAgIGRhdGEubmFtZSA9IHRpdGxlXG4gICAgfSBlbHNlIGRhdGEuZGF0YXNldC5kaXNwbGF5TmFtZSA9IHRydWVcblxuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgICBhLnRpdGxlID0gZ2FtZS51c2VyLmlzR00gPyBkYXRhLm5hbWUgOiB0aXRsZVxuICAgIGEuY2xhc3NMaXN0LmFkZCguLi5kYXRhLmNscylcbiAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmRhdGFzZXQpKSB7XG4gICAgICBhLmRhdGFzZXRba10gPSB2XG4gICAgfVxuICAgIGEuZHJhZ2dhYmxlID0gdHJ1ZVxuICAgIGEuaW5uZXJIVE1MID0gYCR7XG4gICAgICBkYXRhLmJsaW5kID8gJzxpIGNsYXNzPVwiZmFzIGZhLWV5ZS1zbGFzaFwiPjwvaT4nIDogJydcbiAgICB9PGkgZGF0YS1saW5rLWljb249XCIke2RhdGEuaWNvbn1cIiBjbGFzcz1cImxpbmstaWNvbiAke2RhdGEuaWNvbn1cIj48L2k+JHtcbiAgICAgIGRhdGEubmFtZVxuICAgIH1gXG5cbiAgICByZXR1cm4gYVxuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXIgYSBjaGVjayB3aGVuIGEgbGluayBpcyBjbGljcXVlZC5cbiAgICogRGVwZW5kaW5nIHRoZSBvcmlnaW5cbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKlxuICAgKi9cbiAgc3RhdGljIGFzeW5jIF9vbkNoZWNrIChldmVudCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXRcblxuICAgIGlmIChvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgIG9wdGlvbnMuZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkob3B0aW9ucy5kaWZmaWN1bHR5KVxuICAgIH1cblxuICAgIC8vIENsaWNrIG9yaWdpbiAoZnJvbSBtZXNzYWdlIG9yIGZyb20gc2hlZXQpXG4gICAgLy8gY29uc3QgZnJvbVNoZWV0ID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhdC1tZXNzYWdlJyk/ZmFsc2U6dHJ1ZTtcblxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaWYgKGlzQ3RybEtleShldmVudCkpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuZGlzcGxheU5hbWUpIG9wdGlvbnMubGFiZWwgPSBldmVudC5jdXJyZW50VGFyZ2V0LmlubmVyVGV4dFxuICAgICAgICBjb25zdCBsaW5rID0gYXdhaXQgQ29DN0xpbmsuZnJvbURhdGEob3B0aW9ucylcbiAgICAgICAgY29uc3QgbGlua0RpYWxvZyA9IG5ldyBDb0M3TGlua0NyZWF0aW9uRGlhbG9nKGxpbmspXG4gICAgICAgIGxpbmtEaWFsb2cucmVuZGVyKHRydWUpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgaWYgKGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5sZW5ndGgpIHtcbiAgICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiBjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQpIHtcbiAgICAgICAgICBzd2l0Y2ggKG9wdGlvbnMuY2hlY2spIHtcbiAgICAgICAgICAgIGNhc2UgJ2NoZWNrJzpcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICdjaGFyYWMnLFxuICAgICAgICAgICAgICAgICAgJ2NoYXInLFxuICAgICAgICAgICAgICAgICAgJ2NoYXJhY3RlcmlzdGljJyxcbiAgICAgICAgICAgICAgICAgICdjaGFyYWN0ZXJpc3RpY3MnXG4gICAgICAgICAgICAgICAgXS5pbmNsdWRlcyhvcHRpb25zLnR5cGUudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRva2VuLmFjdG9yLmNoYXJhY3RlcmlzdGljQ2hlY2soXG4gICAgICAgICAgICAgICAgICBvcHRpb25zLm5hbWUsXG4gICAgICAgICAgICAgICAgICBldmVudC5zaGlmdEtleSxcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnNcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKFsnc2tpbGwnXS5pbmNsdWRlcyhvcHRpb25zLnR5cGUudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9rZW4uYWN0b3Iuc2tpbGxDaGVjayhvcHRpb25zLCBldmVudC5zaGlmdEtleSwgb3B0aW9ucylcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgWydhdHRyaWJ1dGVzJywgJ2F0dHJpYnV0ZScsICdhdHRyaWInLCAnYXR0cmlicyddLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgb3B0aW9ucy50eXBlLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0b2tlbi5hY3Rvci5hdHRyaWJ1dGVDaGVjayhcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnMubmFtZSxcbiAgICAgICAgICAgICAgICAgIGV2ZW50LnNoaWZ0S2V5LFxuICAgICAgICAgICAgICAgICAgb3B0aW9uc1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICBjYXNlICdzYW5sb3NzJzoge1xuICAgICAgICAgICAgICBTYW5DaGVja0NhcmQuY3JlYXRlKHRva2VuLmFjdG9yLmFjdG9yS2V5LCBvcHRpb25zLCB7XG4gICAgICAgICAgICAgICAgZmFzdEZvcndhcmQ6IGV2ZW50LnNoaWZ0S2V5XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhc2UgJ2l0ZW0nOiB7XG4gICAgICAgICAgICAgIHJldHVybiB0b2tlbi5hY3Rvci53ZWFwb25DaGVjayhvcHRpb25zLCBldmVudC5zaGlmdEtleSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChnYW1lLnVzZXIuZGF0YS5kb2N1bWVudC5jaGFyYWN0ZXI/LmRhdGEpIHtcbiAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgICAgIGdhbWUudXNlci5kYXRhLmRvY3VtZW50LmNoYXJhY3Rlci5kYXRhLml0ZW1zLm1hcChhc3luYyB2ID0+IHtcbiAgICAgICAgICAgICAgaWYgKHYubmFtZSA9PT0gb3B0aW9ucy5uYW1lKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgICAgICAgICAgICBjaGVjay5fcmF3VmFsdWUgPSB2LmRhdGEuZGF0YS5iYXNlXG4gICAgICAgICAgICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICAgICAgICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2UgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgY29uc3Qgb3B0aW9uID0ge1xuICAgICAgICAgICAgc3BlYWtlcjoge1xuICAgICAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWVzc2FnZUNoZWNrUmVxdWVzdGVkV2FpdCcsIHtcbiAgICAgICAgICAgICAgY2hlY2s6IChhd2FpdCBDb0M3TGluay5mcm9tRGF0YShvcHRpb25zKSkubGlua1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBvcHRpb25cbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgICAgY29uc3QgYWN0b3IgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyQWN0b3Ioc3BlYWtlcilcbiAgICAgIGlmIChhY3Rvcikge1xuICAgICAgICBzd2l0Y2ggKG9wdGlvbnMuY2hlY2spIHtcbiAgICAgICAgICBjYXNlICdjaGVjayc6XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIFsnY2hhcmFjJywgJ2NoYXInLCAnY2hhcmFjdGVyaXN0aWMnLCAnY2hhcmFjdGVyaXN0aWNzJ10uaW5jbHVkZXMoXG4gICAgICAgICAgICAgICAgb3B0aW9ucy50eXBlLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHJldHVybiBhY3Rvci5jaGFyYWN0ZXJpc3RpY0NoZWNrKFxuICAgICAgICAgICAgICAgIG9wdGlvbnMubmFtZSxcbiAgICAgICAgICAgICAgICBldmVudC5zaGlmdEtleSxcbiAgICAgICAgICAgICAgICBvcHRpb25zXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChbJ3NraWxsJ10uaW5jbHVkZXMob3B0aW9ucy50eXBlLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBhY3Rvci5za2lsbENoZWNrKG9wdGlvbnMsIGV2ZW50LnNoaWZ0S2V5LCBvcHRpb25zKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBbJ2F0dHJpYnV0ZXMnLCAnYXR0cmlidXRlJywgJ2F0dHJpYicsICdhdHRyaWJzJ10uaW5jbHVkZXMoXG4gICAgICAgICAgICAgICAgb3B0aW9ucy50eXBlLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHJldHVybiBhY3Rvci5hdHRyaWJ1dGVDaGVjayhvcHRpb25zLm5hbWUsIGV2ZW50LnNoaWZ0S2V5LCBvcHRpb25zKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgJ3Nhbmxvc3MnOiB7XG4gICAgICAgICAgICBTYW5DaGVja0NhcmQuY3JlYXRlKGFjdG9yLmlkLCBvcHRpb25zLCB7XG4gICAgICAgICAgICAgIGZhc3RGb3J3YXJkOiBldmVudC5zaGlmdEtleVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vIGNvbnN0IGNoZWNrID0gbmV3IENvQzdTYW5DaGVjayhcbiAgICAgICAgICAgIC8vICAgYWN0b3IuaWQsXG4gICAgICAgICAgICAvLyAgIG9wdGlvbnMuc2FuTWluLFxuICAgICAgICAgICAgLy8gICBvcHRpb25zLnNhbk1heCxcbiAgICAgICAgICAgIC8vICAgdW5kZWZpbmVkICE9IG9wdGlvbnMuZGlmZmljdWx0eT9Db0M3VXRpbGl0aWVzLmNvbnZlcnREaWZmaWN1bHR5KG9wdGlvbnMuZGlmZmljdWx0eSk6Q29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyLFxuICAgICAgICAgICAgLy8gICB1bmRlZmluZWQgIT0gb3B0aW9ucy5tb2RpZmllcj9OdW1iZXIob3B0aW9ucy5tb2RpZmllcik6MCk7XG4gICAgICAgICAgICAvLyBjaGVjay50b01lc3NhZ2UoIGV2ZW50LnNoaWZ0S2V5KTtcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSAnaXRlbSc6IHtcbiAgICAgICAgICAgIHJldHVybiBhY3Rvci53ZWFwb25DaGVjayhvcHRpb25zLCBldmVudC5zaGlmdEtleSlcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGdhbWUudXNlci5kYXRhLmRvY3VtZW50LmNoYXJhY3Rlcj8uZGF0YSkge1xuICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICAgICAgZ2FtZS51c2VyLmRhdGEuZG9jdW1lbnQuY2hhcmFjdGVyLmRhdGEuaXRlbXMubWFwKGFzeW5jIHYgPT4ge1xuICAgICAgICAgICAgICBpZiAodi5uYW1lID09PSBvcHRpb25zLm5hbWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgICAgICAgICAgIGNoZWNrLl9yYXdWYWx1ZSA9IHYuZGF0YS5kYXRhLmJhc2VcbiAgICAgICAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgICAgICAgICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5Ob0NvbnRyb2xsZWRBY3RvcicpXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ09ORklHLCBkdXBsaWNhdGUsIGdhbWUsIGdldFByb3BlcnR5LCBJdGVtLCBSb2xsLCBUZXh0RWRpdG9yLCBUb2tlbiwgdWkgKi9cbmltcG9ydCB7IENvQzdQYXJzZXIgfSBmcm9tICcuLi9hcHBzL3BhcnNlci5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG4vKipcbiAqIE92ZXJyaWRlIGFuZCBleHRlbmQgdGhlIGJhc2ljIDpjbGFzczpgSXRlbWAgaW1wbGVtZW50YXRpb25cbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdJdGVtIGV4dGVuZHMgSXRlbSB7XG4gIC8qKiBDcmVhdGUgZGVyaXZlZCBkb2N1bWVudCBjbGFzc2VzIGZvciBzcGVjaWZpYyBJdGVtIHR5cGVzICovXG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgLyoqIEBzZWUgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzc2VzIGluIG1vZHVsZS9zY3JpcHRzL2NvbmZpZ3VyZS1kb2N1bWVudHMgKi9cbiAgICBpZiAoZGF0YS50eXBlIGluIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3NlcyAmJiAhY29udGV4dD8uZXh0ZW5kZWQpIHtcbiAgICAgIC8qKlxuICAgICAgICogV2hlbiB0aGUgY29uc3RydWN0b3IgZm9yIHRoZSBuZXcgY2xhc3Mgd2lsbCBjYWxsIGl0J3Mgc3VwZXIoKSxcbiAgICAgICAqIHRoZSBleHRlbmRlZCBmbGFnIHdpbGwgYmUgdHJ1ZSwgdGh1cyBieXBhc3NpbmcgdGhpcyB3aG9sZSBwcm9jZXNzXG4gICAgICAgKiBhbmQgcmVzdW1lIGRlZmF1bHQgYmVoYXZpb3JcbiAgICAgICAqL1xuICAgICAgcmV0dXJuIG5ldyBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzZXNbZGF0YS50eXBlXShkYXRhLCB7XG4gICAgICAgIC4uLnsgZXh0ZW5kZWQ6IHRydWUgfSxcbiAgICAgICAgLi4uY29udGV4dFxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdjaGFzZScpIHtcbiAgICAgICAgZGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9ydW5uaW5nLXNvbGlkLnN2ZydcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvc2tpbGxzLnN2ZydcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnc3RhdHVzJykge1xuICAgICAgICBkYXRhLmltZyA9ICdpY29ucy9zdmcvYXVyYS5zdmcnXG4gICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAgICAgZGF0YS5pbWcgPSAnaWNvbnMvc3ZnL3N3b3JkLnN2ZydcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqIERlZmF1bHQgYmVoYXZpb3IsIGp1c3QgY2FsbCBzdXBlcigpIGFuZCBkbyBhbGwgdGhlIGRlZmF1bHQgSXRlbSBpbml0cyAqL1xuICAgIHN1cGVyKGRhdGEsIGNvbnRleHQpXG4gIH1cblxuICBzdGF0aWMgZ2V0IGljb25MYW5ndWFnZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3NraWxscy9sYW5ndWFnZS5zdmcnXG4gIH1cblxuICBzdGF0aWMgZ2V0IGZsYWdzICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbWFsZnVuY3Rpb246ICdtYWxmYydcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlIG9uIG9mIHRoZSBpdGVtIHByb3BlcnR5IGluIGRhdGEuZGF0YS5wcm9wZXJ0aWVzXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eUlkIDogbmFtZSBmb3IgdGhlIHByb3BlcnR5IHRvIHRvZ2dsZVxuICAgKi9cbiAgYXN5bmMgdG9nZ2xlUHJvcGVydHkgKHByb3BlcnR5SWQsIG92ZXJyaWRlID0gZmFsc2UpIHtcbiAgICBsZXQgY2hlY2tlZFByb3BzID0ge31cbiAgICBsZXQgZmlnaHRpbmdcbiAgICBsZXQgZmlyZWFybXNcbiAgICBpZiAodHlwZW9mIENPQzcuZXJhc1twcm9wZXJ0eUlkXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgWydkYXRhLmVyYXMuJyArIHByb3BlcnR5SWRdOiAhKHRoaXMuZGF0YS5kYXRhLmVyYXNbcHJvcGVydHlJZF0gPz8gZmFsc2UpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT09ICd3ZWFwb24nICYmICFvdmVycmlkZSkge1xuICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdhaGRiJykge1xuICAgICAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMuYWhkYikge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuYWhkYic6IHRydWUsXG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLmFkZGInOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLmFoZGInOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ2FkZGInKSB7XG4gICAgICAgIGlmICghdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5hZGRiKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5hZGRiJzogdHJ1ZSxcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuYWhkYic6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuYWRkYic6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnc2hvdGd1bicpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLnNob3RndW4pIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLnJuZ2QnOiB0cnVlLFxuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5tZWxlZSc6IGZhbHNlLFxuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5zaG90Z3VuJzogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLnNob3RndW4nOiBmYWxzZSxcbiAgICAgICAgICAgICdkYXRhLnJhbmdlLmV4dHJlbWUudmFsdWUnOiBudWxsLFxuICAgICAgICAgICAgJ2RhdGEucmFuZ2UuZXh0cmVtZS5kYW1hZ2UnOiBudWxsLFxuICAgICAgICAgICAgJ2RhdGEucmFuZ2UubG9uZy52YWx1ZSc6IG51bGwsXG4gICAgICAgICAgICAnZGF0YS5yYW5nZS5sb25nLmRhbWFnZSc6IG51bGxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdtZWxlZScgfHwgcHJvcGVydHlJZCA9PT0gJ3JuZ2QnKSB7XG4gICAgICAgIGxldCBtZWxlZVdlYXBvblxuICAgICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ21lbGVlJyAmJiAhdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5tZWxlZSkge1xuICAgICAgICAgIG1lbGVlV2VhcG9uID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnbWVsZWUnICYmIHRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMubWVsZWUpIHtcbiAgICAgICAgICBtZWxlZVdlYXBvbiA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdybmdkJyAmJiAhdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICAgICAgbWVsZWVXZWFwb24gPSBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAncm5nZCcgJiYgdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICAgICAgbWVsZWVXZWFwb24gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lbGVlV2VhcG9uKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5tZWxlZSc6IHRydWUsXG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLnJuZ2QnOiBmYWxzZSxcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuc2hvdGd1bic6IGZhbHNlLFxuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5icnN0JzogZmFsc2UsXG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLmF1dG8nOiBmYWxzZSxcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuZGJybCc6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMubWVsZWUnOiBmYWxzZSxcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMucm5nZCc6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gJ3NraWxsJyAmJiAhb3ZlcnJpZGUpIHtcbiAgICAgIGxldCBtb2RpZiA9IGZhbHNlXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ2NvbWJhdCcpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmNvbWJhdCkge1xuICAgICAgICAgIC8vIENsb3NlIGNvbWJhdCBieSBkZWZhdWx0XG4gICAgICAgICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmZpcmVhcm0pIHtcbiAgICAgICAgICAgIGZpZ2h0aW5nID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBmaXJlYXJtcyA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLmNvbWJhdCc6IGZhbHNlLFxuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5zcGVjaWFsJzogZmFsc2UsXG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLmZpZ2h0aW5nJzogZmFsc2UsXG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLmZpcmVhcm0nOiBmYWxzZSxcbiAgICAgICAgICAgICdkYXRhLnNwZWNpYWxpemF0aW9uJzogJycsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRhdGEuZGF0YS5za2lsbE5hbWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbW9kaWYgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnZmlnaHRpbmcnKSB7XG4gICAgICAgIGlmICghdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5maWdodGluZykge1xuICAgICAgICAgIGZpcmVhcm1zID0gZmFsc2VcbiAgICAgICAgICBmaWdodGluZyA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmaXJlYXJtcyA9IHRydWVcbiAgICAgICAgICBmaWdodGluZyA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgbW9kaWYgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnZmlyZWFybScpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmZpcmVhcm0pIHtcbiAgICAgICAgICBmaXJlYXJtcyA9IHRydWVcbiAgICAgICAgICBmaWdodGluZyA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmlyZWFybXMgPSBmYWxzZVxuICAgICAgICAgIGZpZ2h0aW5nID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIG1vZGlmID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBpZiAobW9kaWYpIHtcbiAgICAgICAgLy8gc2V0IHNwZWNpYWxpc2F0aW9uIGlmIGZpZ2h0aW5nIG9yIGZpcmVhcm1cbiAgICAgICAgaWYgKGZpZ2h0aW5nKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5maWdodGluZyc6IHRydWUsXG4gICAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLmZpcmVhcm0nOiBmYWxzZSxcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuY29tYmF0JzogdHJ1ZSxcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuc3BlY2lhbCc6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgICAgICAgdGhpcy5kYXRhLmRhdGEuc2tpbGxOYW1lLFxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUpXG4gICAgICAgICAgKVxuICAgICAgICAgIGNoZWNrZWRQcm9wcy5uYW1lID0gcGFydHMubmFtZVxuICAgICAgICAgIGNoZWNrZWRQcm9wcy5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgICAgICBjaGVja2VkUHJvcHNbJ2RhdGEuc3BlY2lhbGl6YXRpb24nXSA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpcmVhcm1zKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5maWdodGluZyc6IGZhbHNlLFxuICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5maXJlYXJtJzogdHJ1ZSxcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuY29tYmF0JzogdHJ1ZSxcbiAgICAgICAgICAgICdkYXRhLnByb3BlcnRpZXMuc3BlY2lhbCc6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgICAgICAgdGhpcy5kYXRhLmRhdGEuc2tpbGxOYW1lLFxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSlcbiAgICAgICAgICApXG4gICAgICAgICAgY2hlY2tlZFByb3BzLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgY2hlY2tlZFByb3BzLnNraWxsTmFtZSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgIGNoZWNrZWRQcm9wc1snZGF0YS5zcGVjaWFsaXphdGlvbiddID0gcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwcm9wZXJ0eUlkID09PSAnc3BlY2lhbCcpIHtcbiAgICAgIGlmICh0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzW3Byb3BlcnR5SWRdKSB7XG4gICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLnNwZWNpYWwnOiBmYWxzZSxcbiAgICAgICAgICAnZGF0YS5wcm9wZXJ0aWVzLmZpZ2h0aW5nJzogZmFsc2UsXG4gICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5maXJlYXJtJzogZmFsc2UsXG4gICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5jb21iYXQnOiBmYWxzZSxcbiAgICAgICAgICAnZGF0YS5zcGVjaWFsaXphdGlvbic6ICcnLFxuICAgICAgICAgIG5hbWU6IHRoaXMuZGF0YS5kYXRhLnNraWxsTmFtZVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5zcGVjaWFsJzogdHJ1ZSxcbiAgICAgICAgICBuYW1lOlxuICAgICAgICAgICAgdGhpcy5kYXRhLmRhdGEuc3BlY2lhbGl6YXRpb24gK1xuICAgICAgICAgICAgJyAoJyArXG4gICAgICAgICAgICB0aGlzLmRhdGEuZGF0YS5za2lsbE5hbWUgK1xuICAgICAgICAgICAgJyknXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXMoY2hlY2tlZFByb3BzKS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBpdGVtID0gYXdhaXQgdGhpcy51cGRhdGUoY2hlY2tlZFByb3BzKVxuICAgICAgcmV0dXJuIGl0ZW1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcHJvcE5hbWUgPSBgZGF0YS5wcm9wZXJ0aWVzLiR7cHJvcGVydHlJZH1gXG4gICAgICBjb25zdCBwcm9wVmFsdWUgPSAhdGhpcy5kYXRhLmRhdGEucHJvcGVydGllc1twcm9wZXJ0eUlkXVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbcHJvcE5hbWVdOiBwcm9wVmFsdWUgfSkudGhlbihpdGVtID0+IHtcbiAgICAgICAgcmV0dXJuIGl0ZW1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgaGFzUHJvcGVydHkgKHByb3BlcnR5SWQpIHtcbiAgICByZXR1cm4gdGhpcy5pc0luY2x1ZGVkSW5TZXQoJ3Byb3BlcnRpZXMnLCBwcm9wZXJ0eUlkKVxuICB9XG5cbiAgZ2V0IHNob3J0TmFtZSAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMuc3BlY2lhbCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YS5kYXRhLnNraWxsTmFtZVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5uYW1lXG4gIH1cblxuICBhc3luYyB1cGRhdGVSb2xsIChyb2xsKSB7XG4gICAgaWYgKCd1cGRhdGVSb2xsJyBpbiB0aGlzLnNoZWV0KSByZXR1cm4gYXdhaXQgdGhpcy5zaGVldC51cGRhdGVSb2xsKHJvbGwpXG4gICAgZWxzZSBpZiAoJ3VwZGF0ZVJvbGwnIGluIHRoaXMpIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZVJvbGwocm9sbClcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBzdGF0aWMgZ2V0TmFtZVBhcnRzU3BlYyAoc2tpbGxOYW1lLCBzcGVjaWFsaXphdGlvbikge1xuICAgIGlmICghc3BlY2lhbGl6YXRpb24pIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IHNraWxsTmFtZSxcbiAgICAgICAgc3BlY2lhbGl6YXRpb246ICcnLFxuICAgICAgICBza2lsbE5hbWU6IHNraWxsTmFtZVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBzcGVjTmFtZVJlZ2V4ID0gbmV3IFJlZ0V4cChcbiAgICAgICdeKCcgKyBDb0M3VXRpbGl0aWVzLnF1b3RlUmVnRXhwKHNwZWNpYWxpemF0aW9uKSArICcpXFxcXHMqXFxcXCgoLispXFxcXCkkJyxcbiAgICAgICdpJ1xuICAgIClcbiAgICBjb25zdCBtYXRjaCA9IHNraWxsTmFtZS5tYXRjaChzcGVjTmFtZVJlZ2V4KVxuICAgIGlmIChtYXRjaCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogbWF0Y2hbMF0sXG4gICAgICAgIHNwZWNpYWxpemF0aW9uOiBtYXRjaFsxXSxcbiAgICAgICAgc2tpbGxOYW1lOiBtYXRjaFsyXVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogc3BlY2lhbGl6YXRpb24gKyAnICgnICsgc2tpbGxOYW1lICsgJyknLFxuICAgICAgc3BlY2lhbGl6YXRpb246IHNwZWNpYWxpemF0aW9uLFxuICAgICAgc2tpbGxOYW1lOiBza2lsbE5hbWVcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0TmFtZVdpdGhvdXRTcGVjIChpdGVtKSB7XG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBDb0M3SXRlbSkge1xuICAgICAgaWYgKGl0ZW0uZGF0YS5kYXRhPy5wcm9wZXJ0aWVzPy5zcGVjaWFsKSB7XG4gICAgICAgIHJldHVybiBpdGVtLmRhdGEuZGF0YS5za2lsbE5hbWVcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGl0ZW0uZGF0YS5wcm9wZXJ0aWVzPy5zcGVjaWFsKSB7XG4gICAgICAgIHJldHVybiBpdGVtLmRhdGEuc2tpbGxOYW1lXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpdGVtLm5hbWVcbiAgfVxuXG4gIHN0YXRpYyBpc0FueVNwZWMgKGl0ZW0pIHtcbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIENvQzdJdGVtKSB7XG4gICAgICBpZiAoaXRlbS50eXBlICE9PSAnc2tpbGwnIHx8ICFpdGVtLmRhdGEuZGF0YS5wcm9wZXJ0aWVzPy5zcGVjaWFsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgcmV0dXJuIFtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueVNwZWNOYW1lJykudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgJ2FueSdcbiAgICAgIF0uaW5jbHVkZXMoQ29DN0l0ZW0uZ2V0TmFtZVdpdGhvdXRTcGVjKGl0ZW0pLnRvTG93ZXJDYXNlKCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEFzc3VtZSBpdCdzIGRhdGEgb25seVxuICAgICAgaWYgKGl0ZW0udHlwZSAhPT0gJ3NraWxsJyB8fCAhaXRlbS5kYXRhLnByb3BlcnRpZXM/LnNwZWNpYWwpIHJldHVybiBmYWxzZVxuICAgICAgcmV0dXJuIFtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueVNwZWNOYW1lJykudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgJ2FueSdcbiAgICAgIF0uaW5jbHVkZXMoQ29DN0l0ZW0uZ2V0TmFtZVdpdGhvdXRTcGVjKGl0ZW0pLnRvTG93ZXJDYXNlKCkpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY2hlY2tTa2lsbFByb3BlcnRpZXMgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcpIHJldHVyblxuICAgIGNvbnN0IGNoZWNrZWRQcm9wcyA9IHt9XG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMuY29tYmF0KSB7XG4gICAgICAvLyBpZiBza2lsbCBpcyBub3QgYSBzcGVjaWFsaXNhdGlvbiBtYWtlIGl0IGEgc3BlY2lhbGlzYXRpb25cbiAgICAgIGlmICghdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5zcGVjaWFsKSB7XG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMuc3BlY2lhbCA9IHRydWVcbiAgICAgICAgY2hlY2tlZFByb3BzWydkYXRhLnByb3BlcnRpZXMuc3BlY2lhbCddID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICAvLyBJZiBza2lsbCBpcyBjb21iYXQgc2tpbGwgYW5kIG5vIHNwZWNpYWxpc2F0aW9uIHNldCB0aGVuIG1ha2UgaXQgYSBmaWdodGluZyggY2xvc2Vjb21iYXQpIHNraWxsXG4gICAgICBpZiAoXG4gICAgICAgICF0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmZpZ2h0aW5nICYmXG4gICAgICAgICF0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmZpcmVhcm1cbiAgICAgICkge1xuICAgICAgICB0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmZpZ2h0aW5nID0gdHJ1ZVxuICAgICAgICBjaGVja2VkUHJvcHNbJ2RhdGEucHJvcGVydGllcy5maWdodGluZyddID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICAvLyBpZiBza2lsbCBpcyBjbG9zZSBjb21iYXQgd2l0aG91dCBzcGVjaWFsaXNhdGlvbiBuYW1lIG1ha2Ugc2V0IGl0IGFjY29yZGluZyB0byB0aGUgZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5maWdodGluZyAmJlxuICAgICAgICAoIXRoaXMuZGF0YS5kYXRhLnNwZWNpYWxpemF0aW9uIHx8IHRoaXMuZGF0YS5kYXRhLnNwZWNpYWxpemF0aW9uID09PSAnJylcbiAgICAgICkge1xuICAgICAgICB0aGlzLmRhdGEuZGF0YS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICAgIClcbiAgICAgICAgY2hlY2tlZFByb3BzWydkYXRhLnNwZWNpYWxpemF0aW9uJ10gPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgQ09DNy5maWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIC8vIGlmIHNraWxsIGlzIHJhbmdlIGNvbWJhdCB3aXRob3V0IGEgc3BlY2lhbGlzYXRpb24gbmFtZSBtYWtlIHNldCBpdCBhY2NvcmRpbmcgdG8gdGhlIGZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5maXJlYXJtICYmXG4gICAgICAgICghdGhpcy5kYXRhLmRhdGEuc3BlY2lhbGl6YXRpb24gfHwgdGhpcy5kYXRhLmRhdGEuc3BlY2lhbGl6YXRpb24gPT09ICcnKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLnNwZWNpYWxpemF0aW9uID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIENPQzcuZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgICApXG4gICAgICAgIGNoZWNrZWRQcm9wc1snZGF0YS5zcGVjaWFsaXphdGlvbiddID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIENPQzcuZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgICApXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmZpZ2h0aW5nKSB7XG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMuZmlnaHRpbmcgPSBmYWxzZVxuICAgICAgICBjaGVja2VkUHJvcHNbJ2RhdGEucHJvcGVydGllcy5maWdodGluZyddID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmZpcmVhcm0pIHtcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5maXJlYXJtID0gZmFsc2VcbiAgICAgICAgY2hlY2tlZFByb3BzWydkYXRhLnByb3BlcnRpZXMuZmlyZWFybSddID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXMoY2hlY2tlZFByb3BzKS5sZW5ndGggPiAwKSB7XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZShjaGVja2VkUHJvcHMpXG4gICAgfVxuXG4gICAgcmV0dXJuIGNoZWNrZWRQcm9wc1xuXG4gICAgLy8gZm9yIChjb25zdCBwcm9wZXJ0eSBpbiB0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgLy8gIGNoZWNrZWRQcm9wc1tgZGF0YS5kYXRhLnByb3BlcnRpZXMke3Byb3BlcnR5fWBdID0gdHJ1ZTtcbiAgICAvLyB9XG4gIH1cblxuICAvLyBhc3luYyB0b2dnbGVJblNldCggc2V0LCBwcm9wZXJ0eUlkKXtcbiAgLy8gIGlmKCB0aGlzLmRhdGEuZGF0YVtzZXRdW3Byb3BlcnR5SWRdID09IFwiZmFsc2VcIikgdGhpcy5kYXRhLmRhdGFbc2V0XVtwcm9wZXJ0eUlkXSA9IFwidHJ1ZVwiOyBlbHNlIHRoaXMuZGF0YS5kYXRhW3NldF1bcHJvcGVydHlJZF0gPSBcImZhbHNlXCI7XG4gIC8vIH1cblxuICBpc0luY2x1ZGVkSW5TZXQgKHNldCwgcHJvcGVydHlJZCkge1xuICAgIGlmICghdGhpcy5kYXRhLmRhdGFbc2V0XSkgdGhpcy5kYXRhLmRhdGFbc2V0XSA9IFtdXG4gICAgY29uc3QgcHJvcGVydHlJbmRleCA9IHRoaXMuZGF0YS5kYXRhW3NldF0uaW5kZXhPZihwcm9wZXJ0eUlkKVxuICAgIGlmIChwcm9wZXJ0eUluZGV4ID4gLTEpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhc3luYyBmbGFnRm9yRGV2ZWxvcGVtZW50ICgpIHtcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAneHBFbmFibGVkJykgfHwgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGlmICghdGhpcy5kYXRhLmRhdGEuZmxhZ3MpIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5mbGFncyc6IHt9IH0pXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmZsYWdzLmRldmVsb3BlbWVudCc6IHRydWUgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyB1bmZsYWdGb3JEZXZlbG9wZW1lbnQgKCkge1xuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd4cEVuYWJsZWQnKSB8fCBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5mbGFncykge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmZsYWdzJzoge30gfSlcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEuZmxhZ3MuZGV2ZWxvcGVtZW50JzogZmFsc2UgfSlcbiAgICB9XG4gIH1cblxuICBnZXQgZGV2ZWxvcGVtZW50RmxhZyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0SXRlbUZsYWcoJ2RldmVsb3BlbWVudCcpXG4gIH1cblxuICBhc3luYyB0b2dnbGVJdGVtRmxhZyAoZmxhZ05hbWUsIGVyYXNlQWRqdXN0bWVudCA9IHRydWUpIHtcbiAgICBjb25zdCBmbGFnVmFsdWUgPSAhdGhpcy5nZXRJdGVtRmxhZyhmbGFnTmFtZSlcbiAgICBjb25zdCBuYW1lID0gYGRhdGEuZmxhZ3MuJHtmbGFnTmFtZX1gXG4gICAgaWYgKFxuICAgICAgKGZsYWdOYW1lID09PSAnb2NjdXBhdGlvbicgfHwgZmxhZ05hbWUgPT09ICdhcmNoZXR5cGUnKSAmJlxuICAgICAgIWZsYWdWYWx1ZSAmJlxuICAgICAgZXJhc2VBZGp1c3RtZW50XG4gICAgKSB7XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgIFtgZGF0YS5hZGp1c3RtZW50cy4ke2ZsYWdOYW1lfWBdOiBudWxsLFxuICAgICAgICBbbmFtZV06IGZsYWdWYWx1ZVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKGZsYWdOYW1lID09PSAnZGV2ZWxvcGVtZW50Jykge1xuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3hwRW5hYmxlZCcpIHx8IGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiBmbGFnVmFsdWUgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbygnWFAgR2FpbiBkaXNhYmxlZC4nKVxuICAgICAgfVxuICAgIH0gZWxzZSBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtuYW1lXTogZmxhZ1ZhbHVlIH0pXG4gIH1cblxuICBhc3luYyBzZXRJdGVtRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtgZGF0YS5mbGFncy4ke2ZsYWdOYW1lfWBdOiB0cnVlIH0pXG4gIH1cblxuICBhc3luYyB1bnNldEl0ZW1GbGFnIChmbGFnTmFtZSwgZXJhc2VBZGp1c3RtZW50ID0gdHJ1ZSkge1xuICAgIGNvbnN0IG5hbWUgPSBgZGF0YS5mbGFncy4ke2ZsYWdOYW1lfWBcbiAgICBpZiAoXG4gICAgICAoZmxhZ05hbWUgPT09ICdvY2N1cGF0aW9uJyB8fCBmbGFnTmFtZSA9PT0gJ2FyY2hldHlwZScpICYmXG4gICAgICBlcmFzZUFkanVzdG1lbnRcbiAgICApIHtcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgW2BkYXRhLmFkanVzdG1lbnRzLiR7ZmxhZ05hbWV9YF06IG51bGwsXG4gICAgICAgIFtuYW1lXTogZmFsc2VcbiAgICAgIH0pXG4gICAgfSBlbHNlIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiBmYWxzZSB9KVxuICB9XG5cbiAgZ2V0SXRlbUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5mbGFncykge1xuICAgICAgdGhpcy5kYXRhLmRhdGEuZmxhZ3MgPSB7fVxuICAgICAgdGhpcy5kYXRhLmRhdGEuZmxhZ3MubG9ja2VkID0gdHJ1ZVxuICAgICAgdGhpcy51cGRhdGUoeyAnZGF0YS5mbGFncyc6IHt9IH0pXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLmZsYWdzW2ZsYWdOYW1lXSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIHRoaXMuZGF0YS5kYXRhLmZsYWdzW2ZsYWdOYW1lXVxuICB9XG5cbiAgZ2V0IHVzZXNBbHRlcm5hdGl2ZVNraWxsICgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy50eXBlID09PSAnd2VhcG9uJyAmJlxuICAgICAgKHRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXM/LmF1dG8gPT09IHRydWUgfHxcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEucHJvcGVydGllcz8uYnJzdCA9PT0gdHJ1ZSB8fFxuICAgICAgICB0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzPy50aHJvd24gPT09IHRydWUpXG4gICAgKVxuICB9XG5cbiAgZ2V0IG1heFVzZXNQZXJSb3VuZCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgY29uc3QgbXVsdGlTaG90ID0gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm1heClcbiAgICBpZiAoaXNOYU4obXVsdGlTaG90KSkgcmV0dXJuIDBcbiAgICByZXR1cm4gbXVsdGlTaG90XG4gIH1cblxuICBnZXQgdXNlc1BlclJvdW5kICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBjb25zdCBzaW5nbGVTaG90ID0gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm5vcm1hbClcbiAgICBpZiAoaXNOYU4oc2luZ2xlU2hvdCkpIHJldHVybiAwXG4gICAgcmV0dXJuIHNpbmdsZVNob3RcbiAgfVxuXG4gIGdldCB1c2VzUGVyUm91bmRTdHJpbmcgKCkge1xuICAgIGxldCB1c2VzUGVyUm91bmRcbiAgICBpZiAodGhpcy5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm5vcm1hbCkge1xuICAgICAgdXNlc1BlclJvdW5kID0gdGhpcy5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm5vcm1hbFxuICAgIH0gZWxzZSB7XG4gICAgICB1c2VzUGVyUm91bmQgPSAnMSdcbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5tYXgpIHtcbiAgICAgIHVzZXNQZXJSb3VuZCArPSBgKCR7dGhpcy5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm1heH0pYFxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5hdXRvKSB7XG4gICAgICB1c2VzUGVyUm91bmQgKz0gYCAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25BdXRvJyl9YFxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLmRhdGEucHJvcGVydGllcy5icnN0KSB7XG4gICAgICB1c2VzUGVyUm91bmQgKz0gYCAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25CcnN0Jyl9YFxuICAgICAgaWYgKHRoaXMuZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5idXJzdCkge1xuICAgICAgICB1c2VzUGVyUm91bmQgKz0gYCgke3RoaXMuZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5idXJzdH0pYFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB1c2VzUGVyUm91bmRcbiAgfVxuXG4gIGdldCBtdWx0aXBsZVNob3RzICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5tYXhVc2VzUGVyUm91bmQgPD0gMSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBnZXQgc2luZ2xlU2hvdCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgaWYgKCF0aGlzLnVzZXNQZXJSb3VuZCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBnZXQgYmFzZVJhbmdlICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEucmFuZ2Uubm9ybWFsLnZhbHVlKVxuICB9XG5cbiAgZ2V0IGxvbmdSYW5nZSAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLnJhbmdlLmxvbmcudmFsdWUpXG4gIH1cblxuICBnZXQgZXh0cmVtZVJhbmdlICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEucmFuZ2UuZXh0cmVtZS52YWx1ZSlcbiAgfVxuXG4gIGdldCBza2lsbFByb3BlcnRpZXMgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcpIHJldHVybiBbXVxuXG4gICAgY29uc3Qgc2tpbGxQcm9wZXJ0aWVzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LnNraWxsUHJvcGVydGllcykpIHtcbiAgICAgIGlmICh0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWUpIHtcbiAgICAgICAgc2tpbGxQcm9wZXJ0aWVzLnB1c2goZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNraWxsUHJvcGVydGllc1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNhbGN1bGF0ZUJhc2UgKGFjdG9yLCBkYXRhKSB7XG4gICAgaWYgKGRhdGEudHlwZSAhPT0gJ3NraWxsJykgcmV0dXJuIG51bGxcbiAgICBpZiAoU3RyaW5nKGRhdGEuZGF0YS5iYXNlKS5pbmNsdWRlcygnQCcpKSB7XG4gICAgICBjb25zdCBwYXJzZWQgPSB7fVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5mb3JtdWxhLmFjdG9yc2hlZXQpKSB7XG4gICAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgnQCcpICYmIHZhbHVlLnN0YXJ0c1dpdGgoJ3RoaXMuYWN0b3IuJykpIHtcbiAgICAgICAgICBwYXJzZWRba2V5LnN1YnN0cmluZygxKV0gPSBnZXRQcm9wZXJ0eShhY3RvciwgdmFsdWUuc3Vic3RyaW5nKDExKSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IHZhbHVlXG4gICAgICB0cnkge1xuICAgICAgICB2YWx1ZSA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgbmV3IFJvbGwoZGF0YS5kYXRhLmJhc2UsIHBhcnNlZCkuZXZhbHVhdGUoe1xuICAgICAgICAgICAgbWF4aW1pemU6IHRydWVcbiAgICAgICAgICB9KS50b3RhbFxuICAgICAgICApXG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdmFsdWUgPSAwXG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9XG4gICAgcmV0dXJuICFpc05hTihwYXJzZUludChkYXRhLmRhdGEuYmFzZSkpID8gcGFyc2VJbnQoZGF0YS5kYXRhLmJhc2UpIDogbnVsbFxuICB9XG5cbiAgZ2V0IF9iYXNlICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gW251bGwsIGZhbHNlXVxuICAgIGlmICh0eXBlb2YgdGhpcy5kYXRhLmRhdGEuYmFzZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBbdGhpcy5kYXRhLmRhdGEuYmFzZSwgZmFsc2VdXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmJhc2UuaW5jbHVkZXMoJ0AnKSkge1xuICAgICAgY29uc3QgcGFyc2VkID0ge31cbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZm9ybXVsYS5hY3RvcnNoZWV0KSkge1xuICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ0AnKSAmJiB2YWx1ZS5zdGFydHNXaXRoKCd0aGlzLicpKSB7XG4gICAgICAgICAgcGFyc2VkW2tleS5zdWJzdHJpbmcoMSldID0gZ2V0UHJvcGVydHkodGhpcywgdmFsdWUuc3Vic3RyaW5nKDUpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgdmFsdWVcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhbHVlID0gTWF0aC5mbG9vcihcbiAgICAgICAgICBuZXcgUm9sbCh0aGlzLmRhdGEuZGF0YS5iYXNlLCBwYXJzZWQpLmV2YWx1YXRlKHtcbiAgICAgICAgICAgIG1heGltaXplOiB0cnVlXG4gICAgICAgICAgfSkudG90YWxcbiAgICAgICAgKVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHZhbHVlID0gMFxuICAgICAgfVxuXG4gICAgICByZXR1cm4gW3ZhbHVlLCB0cnVlXVxuICAgIH1cbiAgICByZXR1cm4gW1xuICAgICAgIWlzTmFOKHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmJhc2UpKVxuICAgICAgICA/IHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmJhc2UpXG4gICAgICAgIDogbnVsbCxcbiAgICAgIGZhbHNlXG4gICAgXVxuICB9XG5cbiAgYXN5bmMgYXN5bmNCYXNlICgpIHtcbiAgICBjb25zdCBlID0gdGhpcy5fYmFzZVxuICAgIGlmIChlWzFdKSB7XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmJhc2UnOiBlWzBdIH0pXG4gICAgfVxuICAgIHJldHVybiBlWzBdXG4gIH1cblxuICBnZXQgYmFzZSAoKSB7XG4gICAgY29uc3QgZSA9IHRoaXMuX2Jhc2VcbiAgICBpZiAoZVsxXSkge1xuICAgICAgdGhpcy51cGRhdGUoeyAnZGF0YS5iYXNlJzogZVswXSB9KVxuICAgIH1cbiAgICByZXR1cm4gZVswXVxuICB9XG5cbiAgZ2V0IHZhbHVlICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gbnVsbFxuICAgIGxldCB2YWx1ZSA9IDBcbiAgICBpZiAodGhpcy5hY3Rvci5kYXRhLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICB2YWx1ZSA9IHRoaXMuYmFzZVxuICAgICAgdmFsdWUgKz0gdGhpcy5kYXRhLmRhdGEuYWRqdXN0bWVudHM/LnBlcnNvbmFsXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuYWRqdXN0bWVudHM/LnBlcnNvbmFsKVxuICAgICAgICA6IDBcbiAgICAgIHZhbHVlICs9IHRoaXMuZGF0YS5kYXRhLmFkanVzdG1lbnRzPy5vY2N1cGF0aW9uXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuYWRqdXN0bWVudHM/Lm9jY3VwYXRpb24pXG4gICAgICAgIDogMFxuICAgICAgdmFsdWUgKz0gdGhpcy5kYXRhLmRhdGEuYWRqdXN0bWVudHM/LmV4cGVyaWVuY2VcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZSlcbiAgICAgICAgOiAwXG4gICAgICBpZiAoXG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlQXJjaGV0eXBlJykgJiZcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuYWRqdXN0bWVudHM/LmFyY2hldHlwZVxuICAgICAgKSB7XG4gICAgICAgIHZhbHVlICs9IHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmFkanVzdG1lbnRzPy5hcmNoZXR5cGUpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlID0gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEudmFsdWUpXG4gICAgfVxuICAgIHJldHVybiAhaXNOYU4odmFsdWUpID8gdmFsdWUgOiBudWxsXG4gIH1cblxuICBhc3luYyB1cGRhdGVWYWx1ZSAodmFsdWUpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLmFjdG9yLmRhdGEudHlwZSA9PT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgIGNvbnN0IGRlbHRhID0gcGFyc2VJbnQodmFsdWUpIC0gdGhpcy52YWx1ZVxuICAgICAgY29uc3QgZXhwID1cbiAgICAgICAgKHRoaXMuZGF0YS5kYXRhLmFkanVzdG1lbnRzPy5leHBlcmllbmNlXG4gICAgICAgICAgPyBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5hZGp1c3RtZW50cy5leHBlcmllbmNlKVxuICAgICAgICAgIDogMCkgKyBkZWx0YVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnZGF0YS5hZGp1c3RtZW50cy5leHBlcmllbmNlJzogZXhwID4gMCA/IGV4cCA6IDBcbiAgICAgIH0pXG4gICAgfSBlbHNlIGF3YWl0IHRoaXMudXBkYXRlKHsgJ2RhdGEudmFsdWUnOiB2YWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgaW5jcmVhc2VFeHBlcmllbmNlICh4KSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3NraWxsJykgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5hY3Rvci5kYXRhLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICBjb25zdCBleHAgPVxuICAgICAgICAodGhpcy5kYXRhLmRhdGEuYWRqdXN0bWVudHM/LmV4cGVyaWVuY2VcbiAgICAgICAgICA/IHBhcnNlSW50KHRoaXMuZGF0YS5kYXRhLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UpXG4gICAgICAgICAgOiAwKSArIHBhcnNlSW50KHgpXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdkYXRhLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UnOiBleHAgPiAwID8gZXhwIDogMFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBnZXRCdWxsZXRMZWZ0ICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLmFtbW8pIHtcbiAgICAgIHRoaXMuc2V0QnVsbGV0cygwKVxuICAgICAgcmV0dXJuIDBcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5kYXRhLmFtbW9cbiAgfVxuXG4gIGFzeW5jIHJlbG9hZCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgY29uc3QgbWF4QnVsbGV0ID0gdGhpcy5kYXRhLmRhdGEuYnVsbGV0c1xuICAgICAgPyBwYXJzZUludCh0aGlzLmRhdGEuZGF0YS5idWxsZXRzKVxuICAgICAgOiAxXG4gICAgYXdhaXQgdGhpcy5zZXRCdWxsZXRzKG1heEJ1bGxldClcbiAgfVxuXG4gIGFzeW5jIHNldEJ1bGxldHMgKGJ1bGxldHMpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmFtbW8nOiBidWxsZXRzIHx8IDAgfSlcbiAgfVxuXG4gIGFzeW5jIGFkZEJ1bGxldCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgY29uc3QgYnVsbGV0cyA9IGF3YWl0IHRoaXMuZ2V0QnVsbGV0TGVmdCgpXG4gICAgY29uc3QgbWF4QnVsbGV0cyA9IHRoaXMuZGF0YS5kYXRhLmJ1bGxldHNcbiAgICAgID8gcGFyc2VJbnQodGhpcy5kYXRhLmRhdGEuYnVsbGV0cylcbiAgICAgIDogMVxuICAgIGlmIChidWxsZXRzICsgMSA+PSBtYXhCdWxsZXRzKSBhd2FpdCB0aGlzLnNldEJ1bGxldHMobWF4QnVsbGV0cylcbiAgICBlbHNlIGF3YWl0IHRoaXMuc2V0QnVsbGV0cyhidWxsZXRzICsgMSlcbiAgfVxuXG4gIGFzeW5jIHNob290QnVsbGV0cyAoeCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IGJ1bGxldHMgPSBhd2FpdCB0aGlzLmdldEJ1bGxldExlZnQoKVxuICAgIGlmICh4ID4gYnVsbGV0cykgYXdhaXQgdGhpcy5zZXRCdWxsZXRzKDApXG4gICAgZWxzZSBhd2FpdCB0aGlzLnNldEJ1bGxldHMoYnVsbGV0cyAtIHgpXG4gIH1cblxuICBzdGF0aWMgbWVyZ2VPcHRpb25hbFNraWxscyAoc2tpbGxMaXN0LCBvcHRpb25zKSB7XG4gICAgY29uc3Qgam9pbnRBcnJheSA9IHNraWxsTGlzdC5jb25jYXQob3B0aW9ucylcbiAgICByZXR1cm4gam9pbnRBcnJheVxuICAgICAgLnJlZHVjZSgobmV3QXJyYXksIGl0ZW0pID0+IHtcbiAgICAgICAgLy8gSWYgc2tpbGwgaXMgbm90IGEgZ2VuZXJpYyBzcGVjIGFuZCBpcyBhbHJlYWR5IGluY2x1ZGVkIHdlIGRvbid0IGFkZCBpdGVtXG4gICAgICAgIGlmIChcbiAgICAgICAgICAhQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pICYmXG4gICAgICAgICAgbmV3QXJyYXkuZmluZChza2lsbCA9PiBza2lsbC5uYW1lID09PSBpdGVtLm5hbWUpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiBuZXdBcnJheVxuICAgICAgICB9XG4gICAgICAgIC8vIEVsc2UgaXRlbSBpcyBhZGRlZFxuICAgICAgICByZXR1cm4gWy4uLm5ld0FycmF5LCBpdGVtXVxuICAgICAgfSwgW10pXG4gICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICByZXR1cm4gYS5uYW1lXG4gICAgICAgICAgLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICAgICAgICAubG9jYWxlQ29tcGFyZShiLm5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKSlcbiAgICAgIH0pXG4gIH1cblxuICAvKiogVE9ETyA6IHJpZW4gYSBmYWlyZSBpY2kgISFcbiAgICogR2V0IHRoZSBBY3RvciB3aGljaCBpcyB0aGUgYXV0aG9yIG9mIGEgY2hhdCBjYXJkXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhcmQgICAgVGhlIGNoYXQgY2FyZCBiZWluZyB1c2VkXG4gICAqIEByZXR1cm4ge0FjdG9yfG51bGx9ICAgICAgICAgVGhlIEFjdG9yIGVudGl0eSBvciBudWxsXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgX2dldENoYXRDYXJkQWN0b3IgKGNhcmQpIHtcbiAgICAvLyBDYXNlIDEgLSBhIHN5bnRoZXRpYyBhY3RvciBmcm9tIGEgVG9rZW5cbiAgICBjb25zdCB0b2tlbktleSA9IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgaWYgKHRva2VuS2V5KSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSB0b2tlbktleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuRGF0YSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW4gPSBuZXcgVG9rZW4odG9rZW5EYXRhKVxuICAgICAgICByZXR1cm4gdG9rZW4uYWN0b3JcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYXNlIDIgLSB1c2UgQWN0b3IgSUQgZGlyZWN0b3J5XG4gICAgY29uc3QgYWN0b3JJZCA9IGNhcmQuZGF0YXNldC5hY3RvcklkXG4gICAgcmV0dXJuIGdhbWUuYWN0b3JzLmdldChhY3RvcklkKSB8fCBudWxsXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAvKiAgQ2hhdCBNZXNzYWdlIEhlbHBlcnMgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBQcmVwYXJlIGFuIG9iamVjdCBvZiBjaGF0IGRhdGEgdXNlZCB0byBkaXNwbGF5IGEgY2FyZCBmb3IgdGhlIEl0ZW0gaW4gdGhlIGNoYXQgbG9nXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBodG1sT3B0aW9ucyAgICBPcHRpb25zIHVzZWQgYnkgdGhlIFRleHRFZGl0b3IuZW5yaWNoSFRNTCBmdW5jdGlvblxuICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICAgICAgICAgQW4gb2JqZWN0IG9mIGNoYXQgZGF0YSB0byByZW5kZXJcbiAgICovXG4gIGdldENoYXREYXRhIChodG1sT3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgZGF0YSA9IGR1cGxpY2F0ZSh0aGlzLmRhdGEuZGF0YSlcbiAgICAvLyBGaXggOiBkYXRhIGNhbiBoYXZlIGRlc2NyaXB0aW9uIGRpcmVjdGx5IGluIGZpZWxkLCBub3QgdW5kZXIgdmFsdWUuXG4gICAgaWYgKHR5cGVvZiBkYXRhLmRlc2NyaXB0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgZGF0YS5kZXNjcmlwdGlvbiA9IHtcbiAgICAgICAgdmFsdWU6IGRhdGEuZGVzY3JpcHRpb24sXG4gICAgICAgIHNwZWNpYWw6ICcnXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgZGF0YS5kZXNjcmlwdGlvbi52YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuZGVzY3JpcHRpb24udmFsdWUgPSAnJ1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGRhdGEuZGVzY3JpcHRpb24uc3BlY2lhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuZGVzY3JpcHRpb24uc3BlY2lhbCA9ICcnXG4gICAgfVxuICAgIGNvbnN0IGxhYmVscyA9IFtdXG5cbiAgICAvLyBSaWNoIHRleHQgZGVzY3JpcHRpb25cbiAgICBkYXRhLmRlc2NyaXB0aW9uLnZhbHVlID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgZGF0YS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIGh0bWxPcHRpb25zXG4gICAgKVxuICAgIGRhdGEuZGVzY3JpcHRpb24udmFsdWUgPSBDb0M3UGFyc2VyLmVucmljaEhUTUwoZGF0YS5kZXNjcmlwdGlvbi52YWx1ZSlcbiAgICBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwsXG4gICAgICBodG1sT3B0aW9uc1xuICAgIClcbiAgICBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwgPSBDb0M3UGFyc2VyLmVucmljaEhUTUwoZGF0YS5kZXNjcmlwdGlvbi5zcGVjaWFsKVxuXG4gICAgLy8gSXRlbSB0eXBlIHNwZWNpZmljIHByb3BlcnRpZXNcbiAgICBjb25zdCBwcm9wcyA9IFtdXG4gICAgY29uc3QgZm4gPSB0aGlzW2BfJHt0aGlzLmRhdGEudHlwZX1DaGF0RGF0YWBdXG4gICAgaWYgKGZuKSBmbi5iaW5kKHRoaXMpKGRhdGEsIGxhYmVscywgcHJvcHMsIGh0bWxPcHRpb25zKVxuXG4gICAgaWYgKHRoaXMudHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5za2lsbFByb3BlcnRpZXMpKSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWUpIHByb3BzLnB1c2godmFsdWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRmlsdGVyIHByb3BlcnRpZXMgYW5kIHJldHVyblxuICAgIGRhdGEucHJvcGVydGllcyA9IHByb3BzLmZpbHRlcihwID0+ICEhcClcbiAgICBkYXRhLmxhYmVscyA9IGxhYmVsc1xuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBfd2VhcG9uQ2hhdERhdGEgKGRhdGEsIGxhYmVscywgcHJvcHMpIHtcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LndlYXBvblByb3BlcnRpZXMpKSB7XG4gICAgICBpZiAodGhpcy5kYXRhLmRhdGEucHJvcGVydGllc1trZXldID09PSB0cnVlKSBwcm9wcy5wdXNoKHZhbHVlKVxuICAgIH1cblxuICAgIGxldCBza2lsbExhYmVsID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNraWxsJylcbiAgICBsZXQgc2tpbGxOYW1lID0gJydcbiAgICBsZXQgZm91bmQgPSBmYWxzZVxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5za2lsbC5tYWluLmlkKSB7XG4gICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3I/Lml0ZW1zLmdldCh0aGlzLmRhdGEuZGF0YS5za2lsbC5tYWluLmlkKVxuICAgICAgaWYgKHNraWxsKSB7XG4gICAgICAgIHNraWxsTmFtZSArPSBDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWMoc2tpbGwpXG4gICAgICAgIGZvdW5kID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnVzZXNBbHRlcm5hdGl2ZVNraWxsICYmIHRoaXMuZGF0YS5kYXRhLnNraWxsLmFsdGVybmF0aXYuaWQpIHtcbiAgICAgIHNraWxsTGFiZWwgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxzJylcbiAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvcj8uaXRlbXMuZ2V0KHRoaXMuZGF0YS5kYXRhLnNraWxsLmFsdGVybmF0aXYuaWQpXG4gICAgICBpZiAoc2tpbGwpIHtcbiAgICAgICAgc2tpbGxOYW1lICs9IGAvJHtDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWMoc2tpbGwpfWBcbiAgICAgICAgZm91bmQgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFmb3VuZCkge1xuICAgICAgc2tpbGxOYW1lID0gdGhpcy5kYXRhLmRhdGEuc2tpbGwubWFpbi5uYW1lXG4gICAgICBpZiAodGhpcy51c2VzQWx0ZXJuYXRpdmVTa2lsbCAmJiB0aGlzLmRhdGEuZGF0YS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUpIHtcbiAgICAgICAgc2tpbGxOYW1lICs9IGAvJHt0aGlzLmRhdGEuZGF0YS5za2lsbC5hbHRlcm5hdGl2Lm5hbWV9YFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChza2lsbE5hbWUpIHtcbiAgICAgIGxhYmVscy5wdXNoKHtcbiAgICAgICAgbmFtZTogc2tpbGxMYWJlbCxcbiAgICAgICAgdmFsdWU6IHNraWxsTmFtZVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBsYWJlbHMucHVzaCh7XG4gICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uVXNlc1BlclJvdW5kJyksXG4gICAgICB2YWx1ZTogdGhpcy51c2VzUGVyUm91bmRTdHJpbmdcbiAgICB9KVxuXG4gICAgbGFiZWxzLnB1c2goe1xuICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LldlYXBvbk1hbGZ1bmN0aW9uJyksXG4gICAgICB2YWx1ZTogdGhpcy5kYXRhLmRhdGEubWFsZnVuY3Rpb24gPyB0aGlzLmRhdGEuZGF0YS5tYWxmdW5jdGlvbiA6ICctJ1xuICAgIH0pXG5cbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuYnVsbGV0cykge1xuICAgICAgbGFiZWxzLnB1c2goe1xuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uQnVsbGV0c0luTWFnJyksXG4gICAgICAgIHZhbHVlOiB0aGlzLmRhdGEuZGF0YS5idWxsZXRzXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGNhbkJlUHVzaGVkICgpIHtcbiAgICBpZiAodGhpcy50eXBlID09PSAnc2tpbGwnICYmIHRoaXMuZGF0YS5kYXRhLnByb3BlcnRpZXMucHVzaCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBpbXBhbGUgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmltcGxcbiAgfVxuXG4gIGdldCBpc0RvZGdlICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5uYW1lLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRG9kZ2VTa2lsbE5hbWUnKS50b0xvd2VyQ2FzZSgpXG4gICAgKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQWN0b3IsIEF1ZGlvSGVscGVyLCBDaGF0TWVzc2FnZSwgQ09ORklHLCBDT05TVCwgZHVwbGljYXRlLCBmb3VuZHJ5LCBmcm9tVXVpZCwgZ2FtZSwgZ2V0Q29tcHV0ZWRTdHlsZSwgSXRlbSwgbWVyZ2VPYmplY3QsIHJlbmRlclRlbXBsYXRlLCBUb2tlbiwgdWkgKi9cblxuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuL2RpY2UuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIsIENvQzdSb2xsIH0gZnJvbSAnLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q2hlY2sge1xuICBjb25zdHJ1Y3RvciAoXG4gICAgYWN0b3IgPSBudWxsLFxuICAgIHNraWxsID0gbnVsbCxcbiAgICBpdGVtID0gbnVsbCxcbiAgICBkaWNlTW9kID0gMCxcbiAgICBkaWZmaWN1bHR5ID0gbnVsbCxcbiAgICBmbGF0VGhyZXNob2xkTW9kaWZpZXIgPSAwLFxuICAgIGZsYXREaWNlTW9kaWZpZXIgPSAwXG4gICkge1xuICAgIHRoaXMuYWN0b3IgPSBhY3RvclxuICAgIHRoaXMuc2tpbGwgPSBza2lsbFxuICAgIHRoaXMuaXRlbSA9IGl0ZW1cbiAgICB0aGlzLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgdGhpcy5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXG4gICAgdGhpcy5yYXdWYWx1ZSA9IDAgLy8gdmFsdWUgbmVlZGVkIGJlZm9yZSBkaWZmaWN1bHR5XG4gICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBudWxsXG4gICAgdGhpcy5yZWZlcmVuY2VNZXNzYWdlSWQgPSBudWxsXG4gICAgdGhpcy5wdXNoaW5nID0gZmFsc2VcbiAgICB0aGlzLmZsYXREaWNlTW9kaWZpZXIgPSBmbGF0RGljZU1vZGlmaWVyXG4gICAgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmbGF0VGhyZXNob2xkTW9kaWZpZXJcblxuICAgIGlmIChkaWZmaWN1bHR5ID09PSBudWxsKSB7XG4gICAgICBjb25zdCBpc1Vua25vd24gPVxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZWZhdWx0Q2hlY2tEaWZmaWN1bHR5JykgPT09ICd1bmtub3duJ1xuICAgICAgdGhpcy5kaWZmaWN1bHR5ID0gaXNVbmtub3duXG4gICAgICAgID8gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duXG4gICAgICAgIDogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBjYXJkVHlwZSAoKSB7XG4gICAgcmV0dXJuICdyb2xsQ2FyZCdcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGlmZmljdWx0eUxldmVsICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdW5rbm93bjogLTEsXG4gICAgICByZWd1bGFyOiAxLFxuICAgICAgaGFyZDogMixcbiAgICAgIGV4dHJlbWU6IDMsXG4gICAgICBjcml0aWNhbDogNCxcbiAgICAgIGltcG9zc2libGU6IDlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN1Y2Nlc3NMZXZlbCAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGZ1bWJsZTogLTk5LFxuICAgICAgZmFpbHVyZTogMCxcbiAgICAgIHJlZ3VsYXI6IDEsXG4gICAgICBoYXJkOiAyLFxuICAgICAgZXh0cmVtZTogMyxcbiAgICAgIGNyaXRpY2FsOiA0XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGRpZmZpY3VsdHlTdHJpbmcgKGRpZmZpY3VsdHlMZXZlbCkge1xuICAgIHN3aXRjaCAoXG4gICAgICAhaXNOYU4oTnVtYmVyKGRpZmZpY3VsdHlMZXZlbCkpXG4gICAgICAgID8gTnVtYmVyKGRpZmZpY3VsdHlMZXZlbClcbiAgICAgICAgOiBkaWZmaWN1bHR5TGV2ZWxcbiAgICApIHtcbiAgICAgIGNhc2UgJz8nOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVua25vd25EaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgJysnOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgJysrJzpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICBjYXNlICcrKysnOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsRGlmZmljdWx0eScpXG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd246XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVW5rbm93bkRpZmZpY3VsdHknKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXI6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQ6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWU6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsRGlmZmljdWx0eScpXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIGdldCByYXdWYWx1ZSAoKSB7XG4gICAgLy8gaWYgKCF0aGlzLmFjdG9yIHx8ICF0aGlzLmFjdG9yLmlkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKCF0aGlzLl9yYXdWYWx1ZSkge1xuICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9XG4gICAgICAgICAgdGhpcy5hY3Rvci5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW3RoaXMuY2hhcmFjdGVyaXN0aWNdLnZhbHVlXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5za2lsbCkgdGhpcy5yYXdWYWx1ZSA9IHRoaXMuc2tpbGwudmFsdWVcbiAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSkge1xuICAgICAgICB0aGlzLnJhd1ZhbHVlID0gdGhpcy5hY3Rvci5kYXRhLmRhdGEuYXR0cmlic1t0aGlzLmF0dHJpYnV0ZV0udmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuX3Jhd1ZhbHVlKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyICYmXG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVyJylcbiAgICAgICkge1xuICAgICAgICBpZiAodGhpcy5fcmF3VmFsdWUgKyB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllciA8IDEpIHJldHVybiAxXG4gICAgICAgIHJldHVybiB0aGlzLl9yYXdWYWx1ZSArIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fcmF3VmFsdWVcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IHJhd1ZhbHVlICh4KSB7XG4gICAgdGhpcy5fcmF3VmFsdWUgPSB4XG4gIH1cblxuICBzZXQgdXVpZCAoeCkge1xuICAgIHRoaXMuX3V1aWQgPSB4XG4gIH1cblxuICBnZXQgdXVpZCAoKSB7XG4gICAgaWYgKCF0aGlzLl91dWlkKSB0aGlzLl91dWlkID0gZm91bmRyeS51dGlscy5yYW5kb21JRCgxNilcbiAgICByZXR1cm4gdGhpcy5fdXVpZFxuICB9XG5cbiAgZ2V0IGhhc0NhcmQgKCkge1xuICAgIGNvbnN0IGNoYXRDYXJkID0gdWkuY2hhdC5jb2xsZWN0aW9uLmZpbHRlcihtZXNzYWdlID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHRoaXMudXVpZCA9PT0gbWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ3V1aWQnKSAmJlxuICAgICAgICBDb0M3Q2hlY2suY2FyZFR5cGUgPT09IG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICd0eXBlJylcbiAgICAgIClcbiAgICB9KVxuICAgIGlmIChjaGF0Q2FyZC5sZW5ndGggPiAwKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IHJhd1ZhbHVlU3RyaW5nICgpIHtcbiAgICBpZiAoIXRoaXMuX3Jhd1ZhbHVlKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKFxuICAgICAgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgJiZcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVyJylcbiAgICApIHtcbiAgICAgIGlmICh0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllciA8IDApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jhd1ZhbHVlLnRvU3RyaW5nKCkgKyB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllci50b1N0cmluZygpXG4gICAgICB9XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLl9yYXdWYWx1ZS50b1N0cmluZygpICsgJysnICsgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIudG9TdHJpbmcoKVxuICAgICAgKVxuICAgIH0gZWxzZSByZXR1cm4gdGhpcy5fcmF3VmFsdWUudG9TdHJpbmcoKVxuICB9XG5cbiAgZ2V0IGNyaXRpY2FsVGhyZXNob2xkICgpIHtcbiAgICByZXR1cm4gMVxuICB9XG5cbiAgZ2V0IHJlZ3VsYXJUaHJlc2hvbGQgKCkge1xuICAgIGlmICh0aGlzLnJhd1ZhbHVlKSB7XG4gICAgICBpZiAodGhpcy5yYXdWYWx1ZSA+PSAxMDApIHJldHVybiA5OVxuICAgICAgcmV0dXJuIHBhcnNlSW50KHRoaXMucmF3VmFsdWUpXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgaGFyZFRocmVzaG9sZCAoKSB7XG4gICAgaWYgKHRoaXMucmF3VmFsdWUpIHJldHVybiBNYXRoLmZsb29yKHRoaXMucmF3VmFsdWUgLyAyKVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgZXh0cmVtZVRocmVzaG9sZCAoKSB7XG4gICAgaWYgKHRoaXMucmF3VmFsdWUpIHJldHVybiBNYXRoLmZsb29yKHRoaXMucmF3VmFsdWUgLyA1KVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgZnVtYmxlVGhyZXNob2xkICgpIHtcbiAgICBpZiAodGhpcy5yYXdWYWx1ZSkge1xuICAgICAgaWYgKHRoaXMuZGlmZmljdWx0eSkge1xuICAgICAgICBpZiAodGhpcy5kaWZmaWN1bHR5ID49IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmV4dHJlbWVUaHJlc2hvbGQgPCA1MCA/IDk2IDogMTAwXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5kaWZmaWN1bHR5ID49IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmhhcmRUaHJlc2hvbGQgPCA1MCA/IDk2IDogMTAwXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnJhd1ZhbHVlIDwgNTAgPyA5NiA6IDEwMFxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHN1Y2Nlc1RocmVzaG9sZCAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmRpZmZpY3VsdHkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGlmZmljdWx0eSkge1xuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgICByZXR1cm4gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkOlxuICAgICAgICAgIHJldHVybiB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXI6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWw6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY3JpdGljYWxUaHJlc2hvbGRcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd246XG4gICAgICAgICAgcmV0dXJuIC0xXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucmF3VmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBkaWZmaWN1bHR5U3RyaW5nICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHN3aXRjaCAodGhpcy5kaWZmaWN1bHR5KSB7XG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lOlxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkV4dHJlbWVEaWZmaWN1bHR5JylcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQ6XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcjpcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWd1bGFyRGlmZmljdWx0eScpXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Dcml0aWNhbERpZmZpY3VsdHknKVxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93bjpcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Vbmtub3duRGlmZmljdWx0eScpXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuICcnXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgZ2V0IG1vZGlmaWVkUmVzdWx0ICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHR5cGVvZiB0aGlzLl9tb2RpZmllZFJlc3VsdCAhPT0gJ3VuZGVmaW5lZCcpIHJldHVybiB0aGlzLl9tb2RpZmllZFJlc3VsdFxuICAgIGlmICh0aGlzLmZsYXREaWNlTW9kaWZpZXIpIHtcbiAgICAgIGNvbnN0IG1vZGlmaWVkID0gdGhpcy5kaWNlcy50b3RhbCArIHRoaXMuZmxhdERpY2VNb2RpZmllclxuICAgICAgaWYgKG1vZGlmaWVkIDwgMSkgcmV0dXJuIDFcbiAgICAgIGlmIChtb2RpZmllZCA+IDEwMCkgcmV0dXJuIDEwMFxuICAgICAgcmV0dXJuIG1vZGlmaWVkXG4gICAgfVxuICAgIHJldHVybiB0aGlzLmRpY2VzLnRvdGFsXG4gIH1cblxuICBzZXQgbW9kaWZpZWRSZXN1bHQgKHgpIHtcbiAgICB0aGlzLl9tb2RpZmllZFJlc3VsdCA9IHhcbiAgfVxuXG4gIGdldCBmbGF0RGljZU1vZGlmaWVyU3RyaW5nICgpIHtcbiAgICBpZiAoIXRoaXMuZmxhdERpY2VNb2RpZmllcikgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5mbGF0RGljZU1vZGlmaWVyID4gMCkgcmV0dXJuIGArJHt0aGlzLmZsYXREaWNlTW9kaWZpZXJ9YFxuICAgIHJldHVybiB0aGlzLmZsYXREaWNlTW9kaWZpZXIudG9TdHJpbmcoKVxuICB9XG5cbiAgZ2V0IGlzRnVtYmxlICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHRoaXMuaXNTaW1wbGVSb2xsKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMubW9kaWZpZWRSZXN1bHQgPj0gdGhpcy5mdW1ibGVUaHJlc2hvbGRcbiAgfVxuXG4gIGdldCBpc0NyaXRpY2FsICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMubW9kaWZpZWRSZXN1bHQgPT09IDFcbiAgfVxuXG4gIGdldCBpc0V4dHJlbWVTdWNjZXNzICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZVxuICB9XG5cbiAgZ2V0IHBhc3NlZCAoKSB7XG4gICAgaWYgKHRoaXMuc3RhbmRieSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICh0aGlzLmlzU2ltcGxlUm9sbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICh0aGlzLmx1Y2tTcGVudCkgcmV0dXJuIHRoaXMuZGlmZmljdWx0eSA8PSB0aGlzLnN1Y2Nlc3NMZXZlbFxuICAgIHJldHVybiB0aGlzLnN1Y2Nlc1RocmVzaG9sZCA+PSB0aGlzLm1vZGlmaWVkUmVzdWx0IHx8IHRoaXMuaXNDcml0aWNhbFxuICB9XG5cbiAgZ2V0IGZhaWxlZCAoKSB7XG4gICAgaWYgKHRoaXMuc3RhbmRieSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICh0aGlzLmlzU2ltcGxlUm9sbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiAhdGhpcy5wYXNzZWRcbiAgfVxuXG4gIGdldCBpc1NpbXBsZVJvbGwgKCkge1xuICAgIHJldHVybiB0eXBlb2YgdGhpcy5yYXdWYWx1ZSA9PT0gJ3VuZGVmaW5lZCdcbiAgfVxuXG4gIGdldCBoYXNCb251cyAoKSB7XG4gICAgaWYgKHRoaXMuZGljZU1vZGlmaWVyICYmIHRoaXMuZGljZU1vZGlmaWVyID4gMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBoYXNQZW5hbHR5ICgpIHtcbiAgICBpZiAodGhpcy5kaWNlTW9kaWZpZXIgJiYgdGhpcy5kaWNlTW9kaWZpZXIgPCAwKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGhhc01vZGlmaWVyICgpIHtcbiAgICBpZiAodGhpcy5kaWNlTW9kaWZpZXIgJiYgdGhpcy5kaWNlTW9kaWZpZXIgIT09IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgZGljZU1vZGlmaWVyICgpIHtcbiAgICBpZiAodGhpcy5fZGljZU1vZGlmaWVyKSByZXR1cm4gdGhpcy5fZGljZU1vZGlmaWVyXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHNldCBkaWNlTW9kaWZpZXIgKHgpIHtcbiAgICB0aGlzLl9kaWNlTW9kaWZpZXIgPSBwYXJzZUludCh4KVxuICB9XG5cbiAgZ2V0IG5hbWUgKCkge1xuICAgIGlmICh0aGlzLmFjdG9yKSB7XG4gICAgICBpZiAodGhpcy5za2lsbCkgcmV0dXJuIHRoaXMuc2tpbGwuc2hvcnROYW1lXG4gICAgICBpZiAodGhpcy5pdGVtKSByZXR1cm4gdGhpcy5pdGVtLm5hbWVcbiAgICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgIHJldHVybiBDb0M3VXRpbGl0aWVzLmdldENoYXJhY3RlcmlzdGljTmFtZXModGhpcy5jaGFyYWN0ZXJpc3RpYyk/LmxhYmVsXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlID09PSAnbGNrJykgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJylcbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlID09PSAnc2FuJykgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNob3J0TmFtZSAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLnNraWxsKSByZXR1cm4gdGhpcy5za2lsbC5zaG9ydE5hbWVcbiAgICAgIGlmICh0aGlzLml0ZW0pIHJldHVybiB0aGlzLml0ZW0ubmFtZVxuICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgcmV0dXJuIENvQzdVdGlsaXRpZXMuZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyh0aGlzLmNoYXJhY3RlcmlzdGljKT8uc2hvcnRcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSkge1xuICAgICAgICBpZiAodGhpcy5hdHRyaWJ1dGUgPT09ICdsY2snKSByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKVxuICAgICAgICBpZiAodGhpcy5hdHRyaWJ1dGUgPT09ICdzYW4nKSByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgZnVsbE5hbWUgKCkge1xuICAgIGNvbnN0IGRpZmZpY3VsdHkgPVxuICAgICAgdGhpcy5fZGlmZmljdWx0eSA9PT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICAgID8gZmFsc2VcbiAgICAgICAgOiBDb0M3Q2hlY2suZGlmZmljdWx0eVN0cmluZyh0aGlzLl9kaWZmaWN1bHR5KVxuICAgIGNvbnN0IG1vZGlmaWVyID1cbiAgICAgIHRoaXMuX2RpY2VNb2RpZmllciA+IDBcbiAgICAgICAgPyBgKyR7dGhpcy5fZGljZU1vZGlmaWVyfWBcbiAgICAgICAgOiB0aGlzLl9kaWNlTW9kaWZpZXIudG9TdHJpbmcoKVxuICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgYENvQzcuTGlua0NoZWNrJHshZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnfSR7XG4gICAgICAgICF0aGlzLl9kaWNlTW9kaWZpZXIgPyAnJyA6ICdNb2RpZidcbiAgICAgIH1gLFxuICAgICAgeyBkaWZmaWN1bHR5OiBkaWZmaWN1bHR5LCBtb2RpZmllcjogbW9kaWZpZXIsIG5hbWU6IHRoaXMubmFtZSB9XG4gICAgKVxuICB9XG5cbiAgZ2V0IHJvbGxlZCAoKSB7XG4gICAgaWYgKHRoaXMuZGljZSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBjaGVjayBmcm9tIGFuIEhUTUxFbGVtZW50IG9yIGEgY2hhdCBjYXJkLlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjYXJkICBUaGUgSFRNTEVsZW1lbnQgdGhhdCBpcyBhIHJvbGwtcmVzdWx0IG9yIGEgY2hhdCBjYXJkIGNvbnRhaW5pbmcgYSBzaW5nbGUgcm9sbC1yZXN1bHQuXG4gICAqIEByZXR1cm4ge0NvQzdDaGVja30gICAgICBBIENvQzdDaGVjay5cbiAgICovXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCkge1xuICAgIGNvbnN0IHJvbGxSZXN1bHQgPSBjYXJkLmNsYXNzTGlzdC5jb250YWlucygncm9sbC1yZXN1bHQnKVxuICAgICAgPyBjYXJkXG4gICAgICA6IGNhcmQucXVlcnlTZWxlY3RvcignLnJvbGwtcmVzdWx0JylcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIENvQzdSb2xsLmdldEZyb21FbGVtZW50KHJvbGxSZXN1bHQsIGNoZWNrKVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJylcbiAgICBjaGVjay5tZXNzYWdlSWQgPSBtZXNzYWdlID8gbWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCA6IG51bGxcbiAgICByZXR1cm4gY2hlY2tcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBwdXNoIChjYXJkLCBwdWJsaXNoID0gdHJ1ZSkge1xuICAgIGNvbnN0IG9sZENoZWNrID0gQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpIC8vIFRPRE86IFJlZmFjdG9yaW5nXG4gICAgY29uc3QgYWN0b3JJZCA9IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgICA/IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgICA6IGNhcmQuZGF0YXNldC5hY3RvcklkXG4gICAgY29uc3Qgc2tpbGxJZCA9IGNhcmQuZGF0YXNldC5za2lsbElkXG4gICAgY29uc3QgY2hhcmFjID0gY2FyZC5kYXRhc2V0LmNoYXJhY3RlcmlzdGljXG4gICAgY29uc3QgaXRlbUlkID0gY2FyZC5kYXRhc2V0Lml0ZW1JZFxuICAgIGNvbnN0IGRpY2VNb2QgPSBjYXJkLmRhdGFzZXQuZGljZU1vZFxuICAgIGNvbnN0IGRpZmZpY3VsdHkgPSBjYXJkLmRhdGFzZXQuZGlmZmljdWx0eVxuXG4gICAgbGV0IHB1c2hlZFJvbGxcbiAgICBpZiAoc2tpbGxJZCkge1xuICAgICAgcHVzaGVkUm9sbCA9IG5ldyBDb0M3Q2hlY2soYWN0b3JJZCwgc2tpbGxJZCwgaXRlbUlkLCBkaWNlTW9kLCBkaWZmaWN1bHR5KVxuICAgIH0gZWxzZSBpZiAoY2hhcmFjKSB7XG4gICAgICBwdXNoZWRSb2xsID0gbmV3IENvQzdDaGVjaygpXG4gICAgICBwdXNoZWRSb2xsLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICAgIHB1c2hlZFJvbGwuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICAgIHB1c2hlZFJvbGwuYWN0b3IgPSBhY3RvcklkXG4gICAgICBwdXNoZWRSb2xsLmNoYXJhY3RlcmlzdGljID0gY2hhcmFjXG4gICAgfSBlbHNlIHJldHVyblxuICAgIGlmIChvbGRDaGVjay51dWlkKSB7XG4gICAgICBwdXNoZWRSb2xsLmNvbnRleHQgPSBvbGRDaGVjay5jb250ZXh0XG4gICAgICBwdXNoZWRSb2xsLnV1aWQgPSBvbGRDaGVjay51dWlkXG4gICAgfVxuICAgIGlmIChvbGRDaGVjay5wYXJlbnQpIHB1c2hlZFJvbGwucGFyZW50ID0gb2xkQ2hlY2sucGFyZW50XG4gICAgcHVzaGVkUm9sbC5wdXNoaW5nID0gdHJ1ZVxuICAgIGF3YWl0IHB1c2hlZFJvbGwucm9sbCgpXG4gICAgaWYgKHB1Ymxpc2gpIHB1c2hlZFJvbGwudG9NZXNzYWdlKHRydWUsIGNhcmQpXG4gIH1cblxuICBnZXQgdG9rZW4gKCkge1xuICAgIGlmICghdGhpcy5hY3RvcikgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgfVxuXG4gIHNldCBhY3RvciAoeCkge1xuICAgIHRoaXMuYWN0b3JLZXkgPSB4XG4gICAgaWYgKHggPT0gbnVsbCkge1xuICAgICAgdGhpcy5fYWN0b3IgPSB4XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoeCBpbnN0YW5jZW9mIEFjdG9yKSB7XG4gICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIHRoaXMuX2FjdG9yID0geFxuICAgICAgdGhpcy5fYWN0b3IuYWxpYXMgPSB0aGlzLmFjdG9yLm5hbWVcbiAgICAgIGlmICh4LnRva2VuICYmIHgudG9rZW4uc2NlbmUgJiYgeC50b2tlbi5zY2VuZS5pZCkge1xuICAgICAgICB0aGlzLmFjdG9yS2V5ID0gYCR7eC50b2tlbi5zY2VuZS5pZH0uJHt4LnRva2VuLmlkfWBcbiAgICAgIH0gZWxzZSB0aGlzLmFjdG9yS2V5ID0geC5pZCAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICh4LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IHguc3BsaXQoJy4nKSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XG4gICAgICAgIHRoaXMuX2FjdG9yID0gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgICB0aGlzLl9hY3Rvci5hbGlhcyA9IHRoaXMuX2FjdG9yLm5hbWUgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm5cbiAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuRGF0YSkgcmV0dXJuXG4gICAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgICAgdGhpcy5fYWN0b3IgPSB0b2tlbi5hY3RvclxuICAgICAgICB0aGlzLl9hY3Rvci5hbGlhcyA9IHRva2VuLm5hbWVcbiAgICAgIH1cbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuX2FjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHgpXG4gICAgdGhpcy5hY3Rvci5hbGlhcyA9IHRoaXMuYWN0b3IubmFtZVxuICB9XG5cbiAgZ2V0IHN1Y2Nlc3NMZXZlbEljb25zICgpIHtcbiAgICBpZiAodGhpcy51bmtub3duRGlmZmljdWx0eSkgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5pc1NpbXBsZVJvbGwpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuc3VjY2Vzc0xldmVsID49IHRoaXMuZGlmZmljdWx0eSkge1xuICAgICAgY29uc3QgaWNvbnMgPSBbXVxuICAgICAgZm9yIChcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgICAgaW5kZXggPCB0aGlzLnN1Y2Nlc3NMZXZlbCAtIHRoaXMuZGlmZmljdWx0eSArIDE7XG4gICAgICAgIGluZGV4KytcbiAgICAgICkge1xuICAgICAgICBpY29ucy5wdXNoKHRoaXMuaXNDcml0aWNhbCA/ICdtZWRhbCcgOiAnc3RhcicpXG4gICAgICB9XG4gICAgICBjb25zdCBzdWNjZXNzSGludCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU3VjY2VzTGV2ZWxIaW50Jywge1xuICAgICAgICB2YWx1ZTogdGhpcy5zdWNjZXNzTGV2ZWwgLSB0aGlzLmRpZmZpY3VsdHkgKyAxXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgY3NzQ2xhc3M6IHRoaXMuaXNDcml0aWNhbCA/ICdjcml0aWNhbCcgOiAnc3VjY2VzcycsXG4gICAgICAgIGhpbnQ6IHN1Y2Nlc3NIaW50LFxuICAgICAgICBpY29uczogaWNvbnNcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaWNvbnMgPSBbXVxuICAgICAgY29uc3Qgc3VjY2Vzc0xldmVsID0gdGhpcy5pc0Z1bWJsZSA/IC0xIDogdGhpcy5zdWNjZXNzTGV2ZWxcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLmRpZmZpY3VsdHkgLSBzdWNjZXNzTGV2ZWw7IGluZGV4KyspIHtcbiAgICAgICAgaWNvbnMucHVzaCh0aGlzLmlzRnVtYmxlID8gJ3NrdWxsJyA6ICdzcGlkZXInKVxuICAgICAgfVxuICAgICAgY29uc3QgZmFpbHVyZUhpbnQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkZhaWx1cmVMZXZlbEhpbnQnLCB7XG4gICAgICAgIHZhbHVlOiB0aGlzLmRpZmZpY3VsdHkgLSBzdWNjZXNzTGV2ZWxcbiAgICAgIH0pXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgY3NzQ2xhc3M6IHRoaXMuaXNGdW1ibGUgPyAnZnVtYmxlJyA6ICdmYWlsdXJlJyxcbiAgICAgICAgaGludDogZmFpbHVyZUhpbnQsXG4gICAgICAgIGljb25zOiBpY29uc1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9pc0JsaW5kKSB7XG4gICAgICB0aGlzLl9pc0JsaW5kID0gdGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCdcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2lzQmxpbmRcbiAgfVxuXG4gIHNldCBpc0JsaW5kICh4KSB7XG4gICAgdGhpcy5faXNCbGluZCA9IHhcbiAgfVxuXG4gIGdldCB1bmtub3duRGlmZmljdWx0eSAoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5nbURpZmZpY3VsdHlDcml0aWNhbCB8fFxuICAgICAgdGhpcy5nbURpZmZpY3VsdHlFeHRyZW1lIHx8XG4gICAgICB0aGlzLmdtRGlmZmljdWx0eUhhcmQgfHxcbiAgICAgIHRoaXMuZ21EaWZmaWN1bHR5UmVndWxhclxuICAgICkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd24gPT09IHRoaXMuZGlmZmljdWx0eVxuICB9XG5cbiAgZ2V0IHJvbGxNb2RlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGxNb2RlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICByZXR1cm4gdGhpcy5fcm9sbE1vZGVcbiAgfVxuXG4gIHNldCByb2xsTW9kZSAoeCkge1xuICAgIGlmICh4ID09PSBmYWxzZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XG4gIH1cblxuICBzZXQgc2tpbGwgKHgpIHtcbiAgICB0aGlzLl9za2lsbCA9IHRoaXMuX2dldEl0ZW1Gcm9tSWQoeClcbiAgICB0aGlzLnNraWxsSWQgPSB4XG4gIH1cblxuICBzZXQgaXRlbSAoeCkge1xuICAgIHRoaXMuX2l0ZW0gPSB0aGlzLl9nZXRJdGVtRnJvbUlkKHgpXG4gICAgaWYgKHRoaXMuX2l0ZW0/LnR5cGUgPT09ICd3ZWFwb24nKSB7XG4gICAgICB0aGlzLml0ZW1JZCA9IHhcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faXRlbSA9IHVuZGVmaW5lZFxuICAgICAgdGhpcy5pdGVtSWQgPSB1bmRlZmluZWRcbiAgICB9XG4gIH1cblxuICBfZ2V0SXRlbUZyb21JZCAoeCkge1xuICAgIGlmICh4ID09IG51bGwpIHJldHVybiBudWxsXG4gICAgaWYgKHggaW5zdGFuY2VvZiBJdGVtKSByZXR1cm4geFxuICAgIGlmICh0aGlzLl9hY3RvcikgcmV0dXJuIHRoaXMuX2FjdG9yLml0ZW1zLmdldCh4KVxuICAgIHJldHVybiBnYW1lLml0ZW1zLmdldCh4KVxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAoIXRoaXMuX2FjdG9yIHx8ICF0aGlzLl9hY3Rvcj8uaWQpIHtcbiAgICAgIGlmICh0aGlzLmFjdG9yS2V5KSB0aGlzLl9hY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgaWYgKHRoaXMuYWN0b3JJZCkgdGhpcy5fYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9ySWQpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgaWYgKCF0aGlzLl9hY3Rvcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlzRHVtbXk6IHRydWUsXG4gICAgICAgICAgbmFtZTogdGhpcy5hY3Rvck5hbWUgPyB0aGlzLmFjdG9yTmFtZSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBpZDogdW5kZWZpbmVkLFxuICAgICAgICAgIGltZzogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvcXVlc3Rpb24tY2lyY2xlLXJlZ3VsYXIuc3ZnJyxcbiAgICAgICAgICBwb3J0cmFpdDogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvcXVlc3Rpb24tY2lyY2xlLXJlZ3VsYXIuc3ZnJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLl9hY3Rvci5jb25zdHJ1Y3Rvci5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgY29uc3QgYWN0b3IgPSBuZXcgQ29DQWN0b3IodGhpcy5fYWN0b3IpXG4gICAgICB0aGlzLl9hY3RvciA9IGFjdG9yXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9hY3RvclxuICB9XG5cbiAgZ2V0IHNraWxsICgpIHtcbiAgICBpZiAoIXRoaXMuX3NraWxsICYmIHRoaXMuc2tpbGxJZCkge1xuICAgICAgdGhpcy5fc2tpbGwgPSB0aGlzLmFjdG9yPy5pdGVtcy5nZXQodGhpcy5za2lsbElkKVxuICAgIH1cbiAgICBpZiAoIXRoaXMuX3NraWxsICYmIHRoaXMuaXRlbSkge1xuICAgICAgaWYgKHRoaXMuaXRlbS5kYXRhLmRhdGEuc2tpbGwpIHtcbiAgICAgICAgaWYgKHRoaXMuaXRlbS5kYXRhLmRhdGEuc2tpbGwubWFpbi5pZCAmJiAhdGhpcy53ZWFwb25BbHRTa2lsbCkge1xuICAgICAgICAgIHRoaXMuX3NraWxsID0gdGhpcy5fYWN0b3IuaXRlbXMuZ2V0KHRoaXMuaXRlbS5kYXRhLmRhdGEuc2tpbGwubWFpbi5pZClcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICB0aGlzLml0ZW0uZGF0YS5kYXRhLnNraWxsLmFsdGVybmF0aXYuaWQgJiZcbiAgICAgICAgICB0aGlzLndlYXBvbkFsdFNraWxsXG4gICAgICAgICkge1xuICAgICAgICAgIHRoaXMuX3NraWxsID0gdGhpcy5fYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgdGhpcy5pdGVtLmRhdGEuZGF0YS5za2lsbC5hbHRlcm5hdGl2LmlkXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9za2lsbFxuICB9XG5cbiAgZ2V0IGl0ZW0gKCkge1xuICAgIGlmICghdGhpcy5faXRlbSAmJiB0aGlzLml0ZW1JZCAmJiB0aGlzLmFjdG9yKSB7XG4gICAgICB0aGlzLl9pdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5pdGVtSWQpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pdGVtXG4gIH1cblxuICBnZXQgZGlzcGxheVJlc3VsdFR5cGUgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5UmVzdWx0VHlwZScpXG4gIH1cblxuICBnZXQgZGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsJylcbiAgfVxuXG4gIGdldCBkaXNwbGF5Qm90aFN1Y2Nlc3NMZXZlbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzcGxheVJlc3VsdFR5cGUgJiYgdGhpcy5kaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWxcbiAgfVxuXG4gIGdldCBkb250RGlzcGxheVN1Y2Nlc3NMZXZlbCAoKSB7XG4gICAgcmV0dXJuICF0aGlzLmRpc3BsYXlSZXN1bHRUeXBlICYmICF0aGlzLmRpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbFxuICB9XG5cbiAgZ2V0IGltYWdlICgpIHtcbiAgICBpZiAodGhpcy5za2lsbCkgcmV0dXJuIHRoaXMuc2tpbGwuaW1nXG4gICAgaWYgKHRoaXMuaXRlbSkgcmV0dXJuIHRoaXMuaXRlbS5pbWdcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgbGluayAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0TGlua0VsZW1lbnQoKS5vdXRlckhUTUxcbiAgfVxuXG4gIGdldCBkaXNwbGF5QWN0b3JPbkNhcmQgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5QWN0b3JPbkNhcmQnKVxuICB9XG5cbiAgZ2V0TGlua0VsZW1lbnQgKGNsYXNzZXMgPSBudWxsKSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIGNsczogWydjb2M3LWxpbmsnLCAnY29jNy1yb2xsJ10uY29uY2F0KGNsYXNzZXMpLFxuICAgICAgZGF0YXNldDogeyBjaGVjazogJ2NoZWNrJyB9LFxuICAgICAgaWNvbjogdGhpcy5pbWFnZVxuICAgICAgICA/IGA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCR7dGhpcy5pbWFnZX0pXCI+PC9kaXY+YFxuICAgICAgICA6ICc8aSBjbGFzcz1cImZhcyBmYS1kaWNlXCI+PC9pPicsXG4gICAgICBibGluZDogdGhpcy5pc0JsaW5kXG4gICAgfVxuXG4gICAgY29uc3QgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5U3RyaW5nKHRoaXMuX2RpZmZpY3VsdHkpXG4gICAgY29uc3QgdGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgYENvQzcuTGlua0NoZWNrJHshdGhpcy5fZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnfSR7XG4gICAgICAgICF0aGlzLl9kaWNlTW9kaWZpZXIgPyAnJyA6ICdNb2RpZidcbiAgICAgIH1gLFxuICAgICAge1xuICAgICAgICBkaWZmaWN1bHR5OiBkaWZmaWN1bHR5LFxuICAgICAgICBtb2RpZmllcjogdGhpcy5fZGljZU1vZGlmaWVyLFxuICAgICAgICBuYW1lOiB0aGlzLm5hbWVcbiAgICAgIH1cbiAgICApXG5cbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG4gICAgYS50aXRsZSA9IHRpdGxlXG4gICAgYS5jbGFzc0xpc3QuYWRkKC4uLmRhdGEuY2xzKVxuICAgIGEuaW5uZXJIVE1MID0gYCR7ZGF0YS5ibGluZCA/ICc8aSBjbGFzcz1cImZhcyBmYS1leWUtc2xhc2hcIj48L2k+JyA6ICcnfSR7XG4gICAgICBkYXRhLmljb25cbiAgICB9JHt0aGlzLm5hbWV9YFxuXG4gICAgcmV0dXJuIGFcbiAgfVxuXG4gIGFzeW5jIHJvbGwgKGRpY2VNb2QgPSBudWxsLCBkaWZmaWN1bHR5ID0gbnVsbCkge1xuICAgIGlmIChkaWNlTW9kKSB0aGlzLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICBpZiAoZGlmZmljdWx0eSkgdGhpcy5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIGlmICghdGhpcy5zdGFuZGJ5KSBhd2FpdCB0aGlzLl9wZXJmb3JtKClcbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGUgKHtcbiAgICBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyLFxuICAgIGRpY2VNb2RpZmllciA9IG51bGwsXG4gICAgYWN0b3JLZXkgPSBudWxsLFxuICAgIGNoYXJhY3RlcmlzdGljID0gbnVsbCxcbiAgICBhdHRyaWJ1dGUgPSBudWxsLFxuICAgIHJhd1ZhbHVlID0gMCxcbiAgICBza2lsbCA9IG51bGwsXG4gICAgZmxhdERpY2VNb2RpZmllciA9IDAsXG4gICAgZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gMCxcbiAgICBkaXNwbGF5TmFtZSA9IG51bGwsXG4gICAgYWN0b3JOYW1lID0gbnVsbFxuICB9ID0ge30pIHtcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgaWYgKGRpY2VNb2RpZmllcikgY2hlY2suZGljZU1vZGlmaWVyID0gZGljZU1vZGlmaWVyXG4gICAgaWYgKGZsYXREaWNlTW9kaWZpZXIpIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBmbGF0RGljZU1vZGlmaWVyXG4gICAgaWYgKGZsYXRUaHJlc2hvbGRNb2RpZmllcikge1xuICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgfVxuICAgIGlmIChkaXNwbGF5TmFtZSkgY2hlY2suZGlzcGxheU5hbWUgPSBkaXNwbGF5TmFtZVxuICAgIGlmIChhY3RvcktleSkgY2hlY2suYWN0b3IgPSBhY3RvcktleVxuICAgIGlmIChhY3Rvck5hbWUpIGNoZWNrLmFjdG9yTmFtZSA9IGFjdG9yTmFtZVxuICAgIGlmICghaXNOYU4oTnVtYmVyKHJhd1ZhbHVlKSkpIGNoZWNrLnJhd1ZhbHVlID0gTnVtYmVyKHJhd1ZhbHVlKVxuICAgIGlmIChjaGVjay5hY3RvciAmJiAhY2hlY2suYWN0b3IuaXNEdW1teSkge1xuICAgICAgLy8gVE9ETyA6IEFkZCBjaGVjayBmb3IgdmFsaWRpdHkgb2YgY2hhcmFjdGVyaXN0aWMsIGF0dHJpYnV0ZSwgc2tpbGxJZFxuICAgICAgaWYgKHNraWxsKSBjaGVjay5za2lsbCA9IHNraWxsXG4gICAgICAvLyBUT0RPIDogdHJ5IHJldHJpZXZlIHNraWxsIGJ5IG5hbWVcbiAgICAgIGVsc2UgaWYgKGNoYXJhY3RlcmlzdGljKSBjaGVjay5jaGFyYWN0ZXJpc3RpYyA9IGNoYXJhY3RlcmlzdGljXG4gICAgICBlbHNlIGlmIChhdHRyaWJ1dGUpIGNoZWNrLmF0dHJpYnV0ZSA9IGF0dHJpYnV0ZVxuICAgIH1cbiAgICByZXR1cm4gY2hlY2tcbiAgfVxuXG4gIGFzeW5jIHJvbGxDaGFyYWN0ZXJpc3RpYyAoY2hhciwgZGljZU1vZCA9IG51bGwsIGRpZmZpY3VsdHkgPSBudWxsKSB7XG4gICAgaWYgKGRpY2VNb2QpIHRoaXMuZGljZU1vZGlmaWVyID0gZGljZU1vZFxuICAgIGlmIChkaWZmaWN1bHR5KSB0aGlzLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgdGhpcy5jaGFyYWN0ZXJpc3RpYyA9IGNoYXJcbiAgICBpZiAoIXRoaXMuc3RhbmRieSkgYXdhaXQgdGhpcy5fcGVyZm9ybSgpXG4gIH1cblxuICBhc3luYyByb2xsQXR0cmlidXRlIChhdHRyaWIsIGRpY2VNb2QgPSBudWxsLCBkaWZmaWN1bHR5ID0gbnVsbCkge1xuICAgIGlmIChkaWNlTW9kKSB0aGlzLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICBpZiAoZGlmZmljdWx0eSkgdGhpcy5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIHRoaXMuYXR0cmlidXRlID0gYXR0cmliXG4gICAgaWYgKCF0aGlzLnN0YW5kYnkpIGF3YWl0IHRoaXMuX3BlcmZvcm0oKVxuICB9XG5cbiAgYXN5bmMgcm9sbFZhbHVlICh2YWwsIGRpY2VNb2QgPSBudWxsLCBkaWZmaWN1bHR5ID0gbnVsbCkge1xuICAgIGlmIChkaWNlTW9kKSB0aGlzLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICBpZiAoZGlmZmljdWx0eSkgdGhpcy5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIHRoaXMucmF3VmFsdWUgPSB2YWxcbiAgICBpZiAoIXRoaXMuc3RhbmRieSkgYXdhaXQgdGhpcy5fcGVyZm9ybSgpXG4gIH1cblxuICBhc3luYyBfcGVyZm9ybSAob3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5kaWNlID1cbiAgICAgIG9wdGlvbnMucm9sbCB8fFxuICAgICAgKGF3YWl0IENvQzdEaWNlLnJvbGwodGhpcy5kaWNlTW9kaWZpZXIsIHRoaXMucm9sbE1vZGUsIHRoaXMuaXNCbGluZCkpXG4gICAgaWYgKCFvcHRpb25zLnNpbGVudCkgQXVkaW9IZWxwZXIucGxheSh7IHNyYzogQ09ORklHLnNvdW5kcy5kaWNlIH0pXG5cbiAgICBpZiAob3B0aW9ucy5mb3JjZURTTikge1xuICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QodGhpcy5kaWNlLnJvbGwpXG4gICAgfVxuXG4gICAgdGhpcy5kaWNlcyA9IHtcbiAgICAgIHRlbnM6IFtdLFxuICAgICAgdW5pdDoge1xuICAgICAgICB2YWx1ZTogdGhpcy5kaWNlLnVuaXQudG90YWxcbiAgICAgIH0sXG4gICAgICB0b3RhbDogdGhpcy5kaWNlLnRvdGFsLFxuICAgICAgdGVuUmVzdWx0OiB0aGlzLmRpY2UudG90YWwgLSB0aGlzLmRpY2UudW5pdC50b3RhbCxcbiAgICAgIGhhc0JvbnVzOiAhIXRoaXMuZGljZU1vZGlmaWVyLFxuICAgICAgYm9udXM6IE1hdGguYWJzKHRoaXMuZGljZU1vZGlmaWVyKSxcbiAgICAgIGJvbnVzVHlwZTpcbiAgICAgICAgdGhpcy5kaWNlTW9kaWZpZXIgPCAwXG4gICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRpY2VNb2RpZmllclBlbmFsdHknKVxuICAgICAgICAgIDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EaWNlTW9kaWZpZXJCb251cycpLFxuICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5XG4gICAgfVxuXG4gICAgY29uc3QgbWF4ID0gdGhpcy5kaWNlLnVuaXQudG90YWwgPT09IDAgPyAxMDAgOiA5MFxuICAgIGNvbnN0IG1pbiA9IHRoaXMuZGljZS51bml0LnRvdGFsID09PSAwID8gMTAgOiAwXG4gICAgbGV0IHNlbGVjdGVkID0gdGhpcy5kaWNlLnRvdGFsIC0gdGhpcy5kaWNlLnVuaXQudG90YWxcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kaWNlLnRlbnMucmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZGllID0ge31cbiAgICAgIGRpZS52YWx1ZSA9IHRoaXMuZGljZS50ZW5zLnJlc3VsdHNbaV1cbiAgICAgIGlmIChkaWUudmFsdWUgPT09IHNlbGVjdGVkKSB7XG4gICAgICAgIHNlbGVjdGVkID0gMTAxXG4gICAgICAgIGRpZS5zZWxlY3RlZCA9IHRydWVcbiAgICAgICAgaWYgKHRoaXMuZGljZXMuaGFzQm9udXMpIHtcbiAgICAgICAgICBkaWUuaXNNYXggPSB0cnVlXG4gICAgICAgICAgZGllLmlzTWluID0gZmFsc2VcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkaWUuaXNNaW4gPSB0cnVlXG4gICAgICAgICAgZGllLmlzTWF4ID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRpZS52YWx1ZSA9PT0gbWF4KSBkaWUuaXNNYXggPSB0cnVlXG4gICAgICAgIGVsc2UgZGllLmlzTWF4ID0gZmFsc2VcbiAgICAgICAgaWYgKGRpZS52YWx1ZSA9PT0gbWluKSBkaWUuaXNNaW4gPSB0cnVlXG4gICAgICAgIGVsc2UgZGllLmlzTWluID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIC8vIGlmKCBkaWUudmFsdWUgPT0gMTAwKSBkaWUudmFsdWUgPSBcIjAwXCI7XG4gICAgICB0aGlzLmRpY2VzLnRlbnMucHVzaChkaWUpXG4gICAgfVxuICAgIHRoaXMuY29tcHV0ZUNoZWNrKClcbiAgfVxuXG4gIGFzeW5jIGNvbXB1dGVDaGVjayAoKSB7XG4gICAgdGhpcy5pc1Vua25vd24gPSB0aGlzLnVua25vd25EaWZmaWN1bHR5XG5cbiAgICBpZiAodGhpcy5nbURpZmZpY3VsdHlSZWd1bGFyKSB7XG4gICAgICB0aGlzLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB9XG4gICAgaWYgKHRoaXMuZ21EaWZmaWN1bHR5SGFyZCkgdGhpcy5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkXG4gICAgaWYgKHRoaXMuZ21EaWZmaWN1bHR5RXh0cmVtZSkge1xuICAgICAgdGhpcy5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgfVxuICAgIGlmICh0aGlzLmdtRGlmZmljdWx0eUNyaXRpY2FsKSB7XG4gICAgICB0aGlzLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsXG4gICAgfVxuXG4gICAgdGhpcy50ZW5Pbmx5T25lRGllID0gdGhpcy5kaWNlcy50ZW5zLmxlbmd0aCA9PT0gMVxuXG4gICAgdGhpcy5pc1ZhbHVlID0gZmFsc2VcbiAgICB0aGlzLmlzQ2hhcmFjdGlyaXN0aWMgPSBmYWxzZVxuICAgIHRoaXMuaXNTa2lsbCA9IGZhbHNlXG4gICAgdGhpcy5pc0l0ZW0gPSBmYWxzZVxuICAgIHRoaXMuaXNBdHRyaWJ1dGUgPSBmYWxzZVxuICAgIGlmICh0aGlzLmlzU2ltcGxlUm9sbCkge1xuICAgICAgdGhpcy5kZW55UHVzaCA9IHRydWVcbiAgICAgIHRoaXMuZGVueUx1Y2sgPSB0cnVlXG4gICAgfSBlbHNlIGlmICh0aGlzLmFjdG9yID09IG51bGwpIHtcbiAgICAgIHRoaXMuaXNWYWx1ZSA9IHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgdGhpcy5pc0NoYXJhY3RpcmlzdGljID0gdHJ1ZVxuICAgICAgICB0aGlzLnJhd1ZhbHVlID1cbiAgICAgICAgICB0aGlzLmFjdG9yLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbdGhpcy5jaGFyYWN0ZXJpc3RpY10udmFsdWVcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuc2tpbGwpIHtcbiAgICAgICAgdGhpcy5pc1NraWxsID0gdHJ1ZVxuICAgICAgICB0aGlzLnJhd1ZhbHVlID0gdGhpcy5za2lsbC52YWx1ZVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcbiAgICAgICAgdGhpcy5pc0F0dHJpYnV0ZSA9IHRydWVcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9IHRoaXMuYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnNbdGhpcy5hdHRyaWJ1dGVdLnZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmx1Y2tTcGVudCAmJiAhdGhpcy5pc1NpbXBsZVJvbGwpIHtcbiAgICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0IDw9IHRoaXMucmF3VmFsdWUpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXJcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0IDw9IHRoaXMuaGFyZFRocmVzaG9sZCkge1xuICAgICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMubW9kaWZpZWRSZXN1bHQgPD0gdGhpcy5leHRyZW1lVGhyZXNob2xkKSB7XG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5tb2RpZmllZFJlc3VsdCA+IHRoaXMucmF3VmFsdWUpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmVcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0ID09PSAxKSB7XG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZnVtYmxlVGhyZXNob2xkIDw9IHRoaXMubW9kaWZpZWRSZXN1bHQpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZVxuICAgICAgfVxuICAgIH1cblxuICAgIHN3aXRjaCAodGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkOlxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZTpcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5GdW1ibGUnKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmU6XG4gICAgICAgIHRoaXMucmVzdWx0VHlwZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRmFpbHVyZScpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgaWYgKHRoaXMudW5rbm93bkRpZmZpY3VsdHkpIHtcbiAgICAgIHRoaXMuc3VjY2Vzc1JlcXVpcmVkID0gJydcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmlzU2ltcGxlUm9sbCkge1xuICAgICAgdGhpcy5zdWNjZXNzUmVxdWlyZWQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlN1Y2Nlc3NSZXF1aXJlZCcsIHtcbiAgICAgICAgc3VjY2Vzc1JlcXVpcmVkOiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKHRoaXMubW9kaWZpZWRSZXN1bHQgPT09IDEpIHtcbiAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbFxuICAgIH1cbiAgICBpZiAoIXRoaXMubHVja1NwZW50ICYmICF0aGlzLmlzVW5rbm93biAmJiAhdGhpcy5pc1NpbXBsZVJvbGwpIHtcbiAgICAgIHRoaXMuaXNGYWlsdXJlID0gdGhpcy5mYWlsZWRcbiAgICAgIHRoaXMuaXNTdWNjZXNzID0gdGhpcy5wYXNzZWRcbiAgICB9XG5cbiAgICB0aGlzLmhhc01hbGZ1bmN0aW9uID0gZmFsc2VcbiAgICBpZiAodGhpcy5pc0Z1bWJsZSkgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZVxuXG4gICAgaWYgKHRoaXMuaXRlbSkge1xuICAgICAgdGhpcy5pc0l0ZW0gPSB0cnVlXG4gICAgICBpZiAodGhpcy5pdGVtLmRhdGEuZGF0YS5tYWxmdW5jdGlvbikge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgTnVtYmVyKHRoaXMubW9kaWZpZWRSZXN1bHQpID49IE51bWJlcih0aGlzLml0ZW0uZGF0YS5kYXRhLm1hbGZ1bmN0aW9uKVxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLmhhc01hbGZ1bmN0aW9uID0gdHJ1ZVxuICAgICAgICAgIHRoaXMubWFsZnVuY3Rpb25UeHQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1hbGZ1bmN0aW9uJywge1xuICAgICAgICAgICAgaXRlbU5hbWU6IHRoaXMuaXRlbS5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlSXRlbUZsYWcoQ29DN0l0ZW0uZmxhZ3MubWFsZnVuY3Rpb24pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmNhbkJlUHVzaGVkID0gdGhpcy5za2lsbCA/IHRoaXMuc2tpbGwuY2FuQmVQdXNoZWQoKSA6IGZhbHNlXG4gICAgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMgIT0gbnVsbCkgdGhpcy5jYW5CZVB1c2hlZCA9IHRydWVcbiAgICBpZiAodGhpcy5pc0Z1bWJsZSkgdGhpcy5jYW5CZVB1c2hlZCA9IGZhbHNlXG4gICAgaWYgKHRoaXMuZGVueVB1c2gpIHRoaXMuY2FuQmVQdXNoZWQgPSBmYWxzZVxuXG4gICAgaWYgKCF0aGlzLmRlbnlMdWNrICYmIHRoaXMuYWN0b3IpIHtcbiAgICAgIGlmIChcbiAgICAgICAgIXRoaXMubHVja1NwZW50ICYmXG4gICAgICAgICF0aGlzLnBhc3NlZCAmJlxuICAgICAgICAhdGhpcy5pc0Z1bWJsZSAmJlxuICAgICAgICB0aGlzLmRpZmZpY3VsdHkgIT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWwgJiZcbiAgICAgICAgIXRoaXMudW5rbm93bkRpZmZpY3VsdHlcbiAgICAgICkge1xuICAgICAgICBpZiAodGhpcy5za2lsbCB8fCB0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgICAgY29uc3QgbHVja05lZWRlZCA9IHRoaXMubW9kaWZpZWRSZXN1bHQgLSB0aGlzLnN1Y2Nlc1RocmVzaG9sZFxuICAgICAgICAgIGlmICh0aGlzLmFjdG9yLmx1Y2sgPiBsdWNrTmVlZGVkKSB7XG4gICAgICAgICAgICB0aGlzLmhhc0Vub3VnaEx1Y2sgPSB0cnVlXG4gICAgICAgICAgICB0aGlzLmx1Y2tOZWVkZWQgPSBsdWNrTmVlZGVkXG4gICAgICAgICAgICB0aGlzLmx1Y2tOZWVkZWRUeHQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNwZW5kTHVjaycsIHtcbiAgICAgICAgICAgICAgbHVja05lZWRlZFZhbHVlOiBsdWNrTmVlZGVkXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMubHVja1NwZW50KSB7XG4gICAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzID0gW11cblxuICAgICAgICAvLyBDYW4ndCBzcGVuZCBsdWNrIG9uIHB1c2hlZCByb2xscy5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICF0aGlzLnB1c2hpbmcgJiZcbiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZSAhPT0gJ2xjaycgJiZcbiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZSAhPT0gJ3NhbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy51bmtub3duRGlmZmljdWx0eSAmJlxuICAgICAgICAgICAgdGhpcy5tb2RpZmllZFJlc3VsdCA+IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY29uc3QgbmV4dExldmVsID0ge31cbiAgICAgICAgICAgIG5leHRMZXZlbC5kaWZmaWN1bHR5TmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICAgICAgICAgIG5leHRMZXZlbC5sdWNrVG9TcGVuZCA9IHRoaXMubW9kaWZpZWRSZXN1bHQgLSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGQgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgICAgICAgICBuZXh0TGV2ZWwuaGFzRW5vdWdoTHVjayA9IG5leHRMZXZlbC5sdWNrVG9TcGVuZCA8PSB0aGlzLmFjdG9yLmx1Y2tcbiAgICAgICAgICAgIGlmIChuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrKSB7XG4gICAgICAgICAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzLnB1c2gobmV4dExldmVsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA8PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgJiZcbiAgICAgICAgICAgIHRoaXMubW9kaWZpZWRSZXN1bHQgPiB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRMZXZlbCA9IHt9XG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxuICAgICAgICAgICAgbmV4dExldmVsLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgICAgICAgICBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPSB0aGlzLm1vZGlmaWVkUmVzdWx0IC0gdGhpcy5oYXJkVGhyZXNob2xkIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgICAgICAgICAgbmV4dExldmVsLmhhc0Vub3VnaEx1Y2sgPSBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrXG4gICAgICAgICAgICBpZiAobmV4dExldmVsLmx1Y2tUb1NwZW5kIDw9IHRoaXMuYWN0b3IubHVjaykge1xuICAgICAgICAgICAgICB0aGlzLmluY3JlYXNlU3VjY2Vzcy5wdXNoKG5leHRMZXZlbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPD0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkICYmXG4gICAgICAgICAgICB0aGlzLm1vZGlmaWVkUmVzdWx0ID4gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0TGV2ZWwgPSB7fVxuICAgICAgICAgICAgbmV4dExldmVsLmRpZmZpY3VsdHlOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5FeHRyZW1lRGlmZmljdWx0eSdcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIG5leHRMZXZlbC5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgICAgICAgICBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPSB0aGlzLm1vZGlmaWVkUmVzdWx0IC0gdGhpcy5leHRyZW1lVGhyZXNob2xkIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgICAgICAgICAgbmV4dExldmVsLmhhc0Vub3VnaEx1Y2sgPSBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgICAgICAgICAgaWYgKG5leHRMZXZlbC5sdWNrVG9TcGVuZCA8PSB0aGlzLmFjdG9yLmx1Y2spIHtcbiAgICAgICAgICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MucHVzaChuZXh0TGV2ZWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2FuSW5jcmVhc2VTdWNjZXNzID0gdGhpcy5pbmNyZWFzZVN1Y2Nlc3MubGVuZ3RoID4gMFxuICAgICAgaWYgKHRoaXMuaXNGdW1ibGUpIHRoaXMuY2FuSW5jcmVhc2VTdWNjZXNzID0gZmFsc2VcbiAgICB9XG5cbiAgICB0aGlzLmNhbkF3YXJkRXhwZXJpZW5jZSA9XG4gICAgICB0aGlzLnNraWxsICYmICF0aGlzLnNraWxsLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLm5veHBnYWluXG5cbiAgICBpZiAoXG4gICAgICB0aGlzLnBhc3NlZCAmJlxuICAgICAgdGhpcy5kaWNlTW9kaWZpZXIgPD0gMCAmJlxuICAgICAgdGhpcy5za2lsbCAmJlxuICAgICAgIXRoaXMuc2tpbGwuZGF0YS5kYXRhLnByb3BlcnRpZXMubm94cGdhaW4gJiZcbiAgICAgICF0aGlzLmx1Y2tTcGVudCAmJlxuICAgICAgIXRoaXMuZm9yY2VkICYmXG4gICAgICAhdGhpcy5pc0JsaW5kICYmXG4gICAgICAhdGhpcy5pc1Vua25vd25cbiAgICApIHtcbiAgICAgIHRoaXMuZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICBjb25zdCBwYXJlbnQgPSBhd2FpdCBmcm9tVXVpZCh0aGlzLnBhcmVudClcbiAgICAgIGlmIChwYXJlbnQgJiYgJ3VwZGF0ZVJvbGwnIGluIHBhcmVudCkge1xuICAgICAgICBhd2FpdCBwYXJlbnQudXBkYXRlUm9sbCh0aGlzLkpTT05Sb2xsU3RyaW5nKVxuICAgICAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oIGBSb2xsICR7dGhpcy51dWlkfSBkZXBlbmRzIG9mICR7dGhpcy5wYXJlbnR9YClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzaG93RGljZVJvbGwgKCkge1xuICAgIGlmIChnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlKSB7XG4gICAgICBjb25zdCBkaWNlUmVzdWx0cyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IGRpZVJlc3VsdCBvZiB0aGlzLmRpY2VzLnRlbnMpIHtcbiAgICAgICAgZGljZVJlc3VsdHMucHVzaChkaWVSZXN1bHQudmFsdWUgPT09IDEwMCA/IDAgOiBkaWVSZXN1bHQudmFsdWUgLyAxMClcbiAgICAgIH1cbiAgICAgIGRpY2VSZXN1bHRzLnB1c2godGhpcy5kaWNlcy51bml0LnZhbHVlKVxuXG4gICAgICBjb25zdCBkaWNlRGF0YSA9IHtcbiAgICAgICAgZm9ybXVsYTogYCR7dGhpcy5kaWNlcy50ZW5zLmxlbmd0aH1kMTAwKzFkMTBgLFxuICAgICAgICByZXN1bHRzOiBkaWNlUmVzdWx0cyxcbiAgICAgICAgd2hpc3BlcjogbnVsbCxcbiAgICAgICAgYmxpbmQ6IGZhbHNlXG4gICAgICB9XG4gICAgICBnYW1lLmRpY2UzZC5zaG93KGRpY2VEYXRhKVxuICAgIH1cbiAgfVxuXG4gIGdldCBjc3NDbGFzcyAoKSB7XG4gICAgbGV0IGNzc0NsYXNzID0gJydcbiAgICBpZiAodGhpcy5pc1N1Y2Nlc3MpIGNzc0NsYXNzID0gJ3N1Y2Nlc3MnXG4gICAgaWYgKHRoaXMuaXNGYWlsdXJlKSBjc3NDbGFzcyA9ICdmYWlsdXJlJ1xuICAgIGlmICh0aGlzLmlzQ3JpdGljYWwgJiYgIXRoaXMuaXNGYWlsdXJlKSBjc3NDbGFzcyA9ICdzdWNjZXNzIGNyaXRpY2FsJ1xuICAgIGlmICh0aGlzLmlzRnVtYmxlICYmICF0aGlzLmlzU3VjY2VzcykgY3NzQ2xhc3MgPSAnZmFpbHVyZSBmdW1ibGUnXG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNzc0NsYXNzICs9ICcgcmVndWxhci1zdWNjZXNzJ1xuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY3NzQ2xhc3MgKz0gJyBoYXJkLXN1Y2Nlc3MnXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjc3NDbGFzcyArPSAnIGV4dHJlbWUtc3VjY2VzcydcbiAgICB9XG5cbiAgICByZXR1cm4gY3NzQ2xhc3NcbiAgfVxuXG4gIGdldCBjc3NDbGFzc0xpc3QgKCkge1xuICAgIGNvbnN0IGNzc0NsYXNzID0gW11cbiAgICBpZiAodGhpcy5pc1N1Y2Nlc3MpIGNzc0NsYXNzLnB1c2goJ3N1Y2Nlc3MnKVxuICAgIGlmICh0aGlzLmlzRmFpbHVyZSkgY3NzQ2xhc3MucHVzaCgnZmFpbHVyZScpXG4gICAgaWYgKHRoaXMuaXNDcml0aWNhbCAmJiAhdGhpcy5pc0ZhaWx1cmUpIGNzc0NsYXNzLnB1c2goJ3N1Y2Nlc3MnLCAnY3JpdGljYWwnKVxuICAgIGlmICh0aGlzLmlzRnVtYmxlICYmICF0aGlzLmlzU3VjY2VzcykgY3NzQ2xhc3MucHVzaCgnZmFpbHVyZScsICdmdW1ibGUnKVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjc3NDbGFzcy5wdXNoKCdyZWd1bGFyLXN1Y2Nlc3MnKVxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY3NzQ2xhc3MucHVzaCgnaGFyZC1zdWNjZXNzJylcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNzc0NsYXNzLnB1c2goJ2V4dHJlbWUtc3VjY2VzcycpXG4gICAgfVxuXG4gICAgcmV0dXJuIGNzc0NsYXNzXG4gIH1cblxuICBnZXQgcGxheWVyQ3NzQ2xhc3MgKCkge1xuICAgIGlmICh0aGlzLmlzU3VjY2VzcyB8fCB0aGlzLmZvcmNlZFN1Y2Nlc3MpIHJldHVybiAnc3VjY2VzcydcbiAgICBpZiAodGhpcy5pc0ZhaWx1cmUgfHwgdGhpcy5mb3JjZWRGYWlsdXJlKSByZXR1cm4gJ2ZhaWx1cmUnXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIHVwZ3JhZGVDaGVjayAodXBncmFkZWluZGV4LCB1cGRhdGUgPSB0cnVlKSB7XG4gICAgY29uc3QgaW5jcmVhc2VkU3VjY2VzcyA9IHRoaXMuaW5jcmVhc2VTdWNjZXNzW3VwZ3JhZGVpbmRleF1cbiAgICBjb25zdCBsdWNrQW1vdW50ID1cbiAgICAgIHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MubHVja0Ftb3VudCkgfHxcbiAgICAgIHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MubHVja1RvU3BlbmQpIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgIGlmICghdGhpcy5hY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudCkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RFbm91Z2hMdWNrJywge1xuICAgICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLnRvdGFsTHVja1NwZW50ID0gIXBhcnNlSW50KHRoaXMudG90YWxMdWNrU3BlbnQpXG4gICAgICA/IDBcbiAgICAgIDogcGFyc2VJbnQodGhpcy50b3RhbEx1Y2tTcGVudClcbiAgICB0aGlzLnRvdGFsTHVja1NwZW50ICs9IHBhcnNlSW50KGx1Y2tBbW91bnQpXG4gICAgY29uc3QgbmV3U3VjY2Vzc0xldmVsID1cbiAgICAgIHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MubmV3U3VjY2Vzc0xldmVsKSB8fFxuICAgICAgcGFyc2VJbnQoaW5jcmVhc2VkU3VjY2Vzcy5kaWZmaWN1bHR5KSAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgIGlmICh0aGlzLmRpZmZpY3VsdHkgPD0gbmV3U3VjY2Vzc0xldmVsKSB7XG4gICAgICB0aGlzLmlzU3VjY2VzcyA9IHRydWVcbiAgICAgIHRoaXMuaXNGYWlsdXJlID0gZmFsc2VcbiAgICB9XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHVwZ3JhZGVpbmRleCArIDE7IGluZGV4KyspIHtcbiAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzLnNoaWZ0KClcbiAgICB9XG4gICAgZm9yIChjb25zdCBzIG9mIHRoaXMuaW5jcmVhc2VTdWNjZXNzKSB7XG4gICAgICBzLmx1Y2tUb1NwZW5kID0gcy5sdWNrVG9TcGVuZCAtIGx1Y2tBbW91bnRcbiAgICB9XG4gICAgdGhpcy5sdWNrU3BlbnQgPSB0cnVlXG4gICAgdGhpcy5jb21wdXRlQ2hlY2soKVxuICAgIGlmICh1cGRhdGUpIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIHJlbW92ZVVwZ3JhZGVzICgpIHtcbiAgICB0aGlzLmNhbkluY3JlYXNlU3VjY2VzcyA9IGZhbHNlXG4gICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MgPSBbXVxuICAgIHRoaXMubHVja05lZWRlZCA9IDBcbiAgICB0aGlzLmx1Y2tOZWVkZWRUeHQgPSBudWxsXG4gICAgdGhpcy5jYW5CZVB1c2hlZCA9IGZhbHNlXG4gIH1cblxuICBmb3JjZVBhc3MgKGx1Y2tBbW91bnQgPSBudWxsLCB1cGRhdGUgPSB0cnVlKSB7XG4gICAgaWYgKGx1Y2tBbW91bnQpIHtcbiAgICAgIHRoaXMuYWN0b3Iuc3BlbmRMdWNrKGx1Y2tBbW91bnQpXG4gICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IHRoaXMuZGlmZmljdWx0eVxuICAgICAgZm9yIChjb25zdCBzIG9mIHRoaXMuaW5jcmVhc2VTdWNjZXNzKSB7XG4gICAgICAgIHMubHVja1RvU3BlbmQgPSBzLmx1Y2tUb1NwZW5kIC0gbHVja0Ftb3VudFxuICAgICAgfVxuICAgICAgdGhpcy5sdWNrU3BlbnQgPSB0cnVlXG4gICAgICB0aGlzLmlzU3VjY2VzcyA9IHRydWVcbiAgICAgIHRoaXMudG90YWxMdWNrU3BlbnQgPSAhcGFyc2VJbnQodGhpcy50b3RhbEx1Y2tTcGVudClcbiAgICAgICAgPyAwXG4gICAgICAgIDogcGFyc2VJbnQodGhpcy50b3RhbEx1Y2tTcGVudClcbiAgICAgIHRoaXMudG90YWxMdWNrU3BlbnQgKz0gcGFyc2VJbnQobHVja0Ftb3VudClcbiAgICAgIHRoaXMuY29tcHV0ZUNoZWNrKClcbiAgICAgIGlmICh1cGRhdGUpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZvcmNlZCA9IHRydWVcbiAgICAgIHRoaXMuZm9yY2VkU3VjY2VzcyA9IHRydWVcbiAgICAgIGlmICh0aGlzLmlzVW5rbm93bikge1xuICAgICAgICB0aGlzLmZvcmNlU3VjY2Vzc0xldmVsKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciwgdXBkYXRlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5mb3JjZVN1Y2Nlc3NMZXZlbCh0aGlzLmRpZmZpY3VsdHksIHVwZGF0ZSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmb3JjZUZhaWwgKHVwZGF0ZSA9IHRydWUpIHtcbiAgICB0aGlzLmZvcmNlZCA9IHRydWVcbiAgICB0aGlzLmZvcmNlZEZhaWx1cmUgPSB0cnVlXG4gICAgaWYgKHRoaXMuaXNVbmtub3duKSB7XG4gICAgICB0aGlzLmZvcmNlU3VjY2Vzc0xldmVsKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZSwgdXBkYXRlKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZvcmNlU3VjY2Vzc0xldmVsKHRoaXMuZGlmZmljdWx0eSAtIDEsIHVwZGF0ZSlcbiAgICB9XG4gIH1cblxuICBfZm9yY2VDaGVjayAoaGlnaCwgbG93LCB1cGRhdGUgPSB0cnVlKSB7XG4gICAgbGV0IHRvdGFsID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGhpZ2ggLSBsb3cpKSArIGxvdyArIDFcbiAgICBjb25zdCB1bml0VG90YWwgPSB0b3RhbCAlIDEwXG4gICAgbGV0IHRlblRvdGFsID0gTWF0aC5mbG9vcih0b3RhbCAvIDEwKVxuICAgIGNvbnN0IHRlbnMgPSBbXVxuXG4gICAgbGV0IGhhc0Vub3VnaCA9IE1hdGguYWJzKHRoaXMuZGljZU1vZGlmaWVyKSA9PT0gdGVucy5sZW5ndGhcbiAgICB3aGlsZSAoIWhhc0Vub3VnaCkge1xuICAgICAgbGV0IHRlbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKVxuICAgICAgbGV0IHJvbGwgPSB0ZW4gKiAxMCArIHVuaXRUb3RhbFxuICAgICAgaWYgKHJvbGwgPT09IDApIHtcbiAgICAgICAgcm9sbCA9IDEwMFxuICAgICAgICB0ZW4gPSAxMDBcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhhc1BlbmFsdHkgJiYgcm9sbCA8PSBoaWdoKSB7XG4gICAgICAgIHRlbnMucHVzaCh0ZW4pXG4gICAgICAgIGlmIChyb2xsID4gdG90YWwpIHRvdGFsID0gcm9sbFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGFzQm9udXMgJiYgcm9sbCA+IGxvdykge1xuICAgICAgICB0ZW5zLnB1c2godGVuKVxuICAgICAgICBpZiAocm9sbCA8IHRvdGFsKSB0b3RhbCA9IHJvbGxcbiAgICAgIH1cbiAgICAgIGhhc0Vub3VnaCA9IHRlbnMubGVuZ3RoID09PSBNYXRoLmFicyh0aGlzLmRpY2VNb2RpZmllcilcbiAgICB9XG5cbiAgICAvLyBJbnNlcnQgcmVzdWx0IGF0IHJhbmRvbSBwb3NpdGlvbi5cbiAgICBpZiAodGVuVG90YWwgPT09IDEwICYmIHVuaXRUb3RhbCA9PT0gMCkge1xuICAgICAgdGVuVG90YWwgPSAxMDBcbiAgICB9XG4gICAgdGVucy5zcGxpY2UoXG4gICAgICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0ZW5zLmxlbmd0aCArIDEpLFxuICAgICAgMCxcbiAgICAgIHRlblRvdGFsID09PSAxMCA/IDAgOiB0ZW5Ub3RhbFxuICAgIClcblxuICAgIHRoaXMuZGljZXMudGVucyA9IFtdXG4gICAgdGhpcy5kaWNlcy51bml0LnZhbHVlID0gdW5pdFRvdGFsXG4gICAgdGhpcy5tb2RpZmllZFJlc3VsdCA9IHRvdGFsXG4gICAgdGhpcy5kaWNlcy50b3RhbCA9IHRvdGFsXG4gICAgdGhpcy5kaWNlcy50ZW5SZXN1bHQgPSB0b3RhbCAtIHVuaXRUb3RhbFxuXG4gICAgY29uc3QgbWF4ID0gdW5pdFRvdGFsID09PSAwID8gMTAwIDogOTBcbiAgICBjb25zdCBtaW4gPSB1bml0VG90YWwgPT09IDAgPyAxMCA6IDBcbiAgICBsZXQgc2VsZWN0ZWQgPSB0b3RhbCAtIHVuaXRUb3RhbFxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBkaWUgPSB7fVxuICAgICAgZGllLnZhbHVlID0gdGVuc1tpXVxuICAgICAgaWYgKGRpZS52YWx1ZSA9PT0gc2VsZWN0ZWQpIHtcbiAgICAgICAgc2VsZWN0ZWQgPSAxMDFcbiAgICAgICAgZGllLnNlbGVjdGVkID0gdHJ1ZVxuICAgICAgICBpZiAodGhpcy5oYXNCb251cykge1xuICAgICAgICAgIGRpZS5pc01heCA9IHRydWVcbiAgICAgICAgICBkaWUuaXNNaW4gPSBmYWxzZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRpZS5pc01pbiA9IHRydWVcbiAgICAgICAgICBkaWUuaXNNYXggPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZGllLnZhbHVlID09PSBtYXgpIGRpZS5pc01heCA9IHRydWVcbiAgICAgICAgZWxzZSBkaWUuaXNNYXggPSBmYWxzZVxuICAgICAgICBpZiAoZGllLnZhbHVlID09PSBtaW4pIGRpZS5pc01pbiA9IHRydWVcbiAgICAgICAgZWxzZSBkaWUuaXNNaW4gPSBmYWxzZVxuICAgICAgfVxuICAgICAgLy8gaWYoIGRpZS52YWx1ZSA9PSAxMDApIGRpZS52YWx1ZSA9IFwiMDBcIjtcbiAgICAgIHRoaXMuZGljZXMudGVucy5wdXNoKGRpZSlcbiAgICB9XG5cbiAgICB0aGlzLmNvbXB1dGVDaGVjaygpXG4gICAgaWYgKHVwZGF0ZSkgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBmb3JjZVN1Y2Nlc3NMZXZlbCAoc3VjY2Vzc0xldmVsLCB1cGRhdGUgPSB0cnVlKSB7XG4gICAgbGV0IGhpZ2gsIGxvd1xuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZSA9PT0gc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gMTAwXG4gICAgICBsb3cgPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZSA9PT0gc3VjY2Vzc0xldmVsKSB7XG4gICAgICBpZiAodGhpcy5yZWd1bGFyVGhyZXNob2xkID09PSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDEpIHtcbiAgICAgICAgaGlnaCA9IDEwMFxuICAgICAgfSBlbHNlIGhpZ2ggPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICAgIGxvdyA9IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSBzdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSBzdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSBzdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICAgIGxvdyA9IDFcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWwgPT09IHN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IDFcbiAgICAgIGxvdyA9IDBcbiAgICB9XG4gICAgaWYgKGhpZ2ggPT09IGxvdykgbG93LS1cbiAgICBpZiAoaGlnaCA9PT0gMCkgaGlnaCA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgIHRoaXMuX2ZvcmNlQ2hlY2soaGlnaCwgbG93LCB1cGRhdGUpXG4gIH1cblxuICBpbmNyZWFzZVN1Y2Nlc3NMZXZlbCAodXBkYXRlID0gdHJ1ZSkge1xuICAgIGxldCBoaWdoLCBsb3dcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgICBpZiAodGhpcy5yZWd1bGFyVGhyZXNob2xkID09PSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDEpIHtcbiAgICAgICAgbG93ID0gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb3cgPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgICBsb3cgPSB0aGlzLmNyaXRpY2FsVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5jcml0aWNhbFRocmVzaG9sZFxuICAgICAgbG93ID0gMFxuICAgIH1cbiAgICBpZiAoaGlnaCA9PT0gbG93KSBsb3ctLVxuICAgIHRoaXMuX2ZvcmNlQ2hlY2soaGlnaCwgbG93LCB1cGRhdGUpXG4gIH1cblxuICBkZWNyZWFzZVN1Y2Nlc3NMZXZlbCAodXBkYXRlID0gdHJ1ZSkge1xuICAgIGxldCBoaWdoLCBsb3dcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IDEwMFxuICAgICAgbG93ID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgICBsb3cgPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgICAgbG93ID0gMVxuICAgIH1cbiAgICBpZiAoaGlnaCA9PT0gMCkgaGlnaCA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgIHRoaXMuX2ZvcmNlQ2hlY2soaGlnaCwgbG93LCB1cGRhdGUpXG4gIH1cblxuICBhc3luYyBmbGFnRm9yRGV2ZWxvcGVtZW50ICgpIHtcbiAgICB0aGlzLmZsYWdnZWRGb3JEZXZlbG9wbWVudCA9IHRydWVcbiAgICBpZiAodGhpcy5za2lsbCkgYXdhaXQgdGhpcy5za2lsbC5mbGFnRm9yRGV2ZWxvcGVtZW50KClcbiAgfVxuXG4gIHNldCBkaWZmaWN1bHR5ICh4KSB7XG4gICAgdGhpcy5fZGlmZmljdWx0eSA9IHBhcnNlSW50KHgpXG4gIH1cblxuICBnZXQgZGlmZmljdWx0eSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RpZmZpY3VsdHlcbiAgfVxuXG4gIHNldCBmbGF2b3IgKHgpIHtcbiAgICB0aGlzLl9mbGF2b3IgPSB4XG4gIH1cblxuICBzZXQgY29udGV4dCAoeCkge1xuICAgIHRoaXMuX2NvbnRleHQgPSB4XG4gIH1cblxuICBnZXQgY29udGV4dCAoKSB7XG4gICAgaWYgKCF0aGlzLl9jb250ZXh0KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMuX2NvbnRleHRcbiAgfVxuXG4gIHNldCBwYXJlbnQgKHgpIHtcbiAgICBpZiAoIXRoaXMudXVpZCkgdGhpcy51dWlkID0gZm91bmRyeS51dGlscy5yYW5kb21JRCgxNilcbiAgICB0aGlzLnBhcmVudFV1aWQgPSB4XG4gIH1cblxuICBnZXQgcGFyZW50ICgpIHtcbiAgICBpZiAoIXRoaXMucGFyZW50VXVpZCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLnBhcmVudFV1aWRcbiAgfVxuXG4gIGdldCBmbGF2b3IgKCkge1xuICAgIGlmICh0aGlzLl9mbGF2b3IpIHJldHVybiB0aGlzLl9mbGF2b3JcbiAgICBsZXQgZmxhdm9yID0gJydcbiAgICBpZiAodGhpcy5hY3Rvcj8uZGF0YSkge1xuICAgICAgaWYgKHRoaXMuc2tpbGwpIHtcbiAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jlc3VsdCcsIHtcbiAgICAgICAgICBuYW1lOiB0aGlzLnNraWxsLnNob3J0TmFtZSxcbiAgICAgICAgICB2YWx1ZTogdGhpcy5yYXdWYWx1ZVN0cmluZyxcbiAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pdGVtKSB7XG4gICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSXRlbUNoZWNrUmVzdWx0Jywge1xuICAgICAgICAgIGl0ZW06IHRoaXMuaXRlbS5uYW1lLFxuICAgICAgICAgIHNraWxsOiB0aGlzLnNraWxsLm5hbWUsXG4gICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jlc3VsdCcsIHtcbiAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgdGhpcy5hY3Rvci5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW3RoaXMuY2hhcmFjdGVyaXN0aWNdLmxhYmVsXG4gICAgICAgICAgKSxcbiAgICAgICAgICB2YWx1ZTogdGhpcy5yYXdWYWx1ZVN0cmluZyxcbiAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcbiAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jlc3VsdCcsIHtcbiAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgYENvQzcuJHt0aGlzLmFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzW3RoaXMuYXR0cmlidXRlXS5sYWJlbH1gXG4gICAgICAgICAgKSxcbiAgICAgICAgICB2YWx1ZTogdGhpcy5yYXdWYWx1ZVN0cmluZyxcbiAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5kaXNwbGF5TmFtZSkge1xuICAgICAgICBmbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNoZWNrUmVzdWx0Jywge1xuICAgICAgICAgIG5hbWU6IHRoaXMuZGlzcGxheU5hbWUsXG4gICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFmbGF2b3IpIHtcbiAgICAgIGlmICh0aGlzLnJhd1ZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc3BsYXlOYW1lKSB7XG4gICAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jlc3VsdCcsIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGlzcGxheU5hbWUsXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy5yYXdWYWx1ZVN0cmluZyxcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jhd1ZhbHVlJywge1xuICAgICAgICAgICAgcmF3dmFsdWU6IHRoaXMucmF3VmFsdWUsXG4gICAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHVzaGluZykge1xuICAgICAgZmxhdm9yID0gYCR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5QdXNoaW5nJyl9ICR7Zmxhdm9yfWBcbiAgICB9XG5cbiAgICByZXR1cm4gZmxhdm9yXG4gIH1cblxuICBnZXQgdG9vbHRpcEhlYWRlciAoKSB7XG4gICAgaWYgKHRoaXMuYXR0cmlidXRlKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtDaGVjayR7XG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA/ICcnIDogJ0RpZmYnXG4gICAgICAgICAgfSR7IXRoaXMuZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nLFxuICAgICAgICAgICAgbW9kaWZpZXI6IHRoaXMuZGljZU1vZGlmaWVyLFxuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgYENvQzcuJHt0aGlzLmFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzW3RoaXMuYXR0cmlidXRlXS5sYWJlbH1gXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICApICsgYCAoJHt0aGlzLmFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzW3RoaXMuYXR0cmlidXRlXS52YWx1ZX0lKWBcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgYENvQzcuTGlua0NoZWNrJHtcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA9PT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID8gJycgOiAnRGlmZidcbiAgICAgICAgICB9JHshdGhpcy5kaWNlTW9kaWZpZXIgPyAnJyA6ICdNb2RpZid9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmcsXG4gICAgICAgICAgICBtb2RpZmllcjogdGhpcy5kaWNlTW9kaWZpZXIsXG4gICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgIHRoaXMuYWN0b3IuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljc1t0aGlzLmNoYXJhY3RlcmlzdGljXS5sYWJlbFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgKSArXG4gICAgICAgIGAgKCR7dGhpcy5hY3Rvci5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW3RoaXMuY2hhcmFjdGVyaXN0aWNdLnZhbHVlfSUpYFxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodGhpcy5za2lsbCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rQ2hlY2ske1xuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPyAnJyA6ICdEaWZmJ1xuICAgICAgICAgIH0keyF0aGlzLmRpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZyxcbiAgICAgICAgICAgIG1vZGlmaWVyOiB0aGlzLmRpY2VNb2RpZmllcixcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuc2tpbGwubmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgKSArIGAgKCR7dGhpcy5za2lsbC52YWx1ZX0lKWBcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHRoaXMuZGlzcGxheU5hbWUpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgYENvQzcuTGlua0NoZWNrJHtcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA9PT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID8gJycgOiAnRGlmZidcbiAgICAgICAgICB9JHshdGhpcy5kaWNlTW9kaWZpZXIgPyAnJyA6ICdNb2RpZid9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmcsXG4gICAgICAgICAgICBtb2RpZmllcjogdGhpcy5kaWNlTW9kaWZpZXIsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRpc3BsYXlOYW1lXG4gICAgICAgICAgfVxuICAgICAgICApICsgYCAoJHt0aGlzLnJhd1ZhbHVlU3RyaW5nfSUpYFxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgYXN5bmMgZ2V0SHRtbFJvbGxFbGVtZW50IChvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbHMvaW4tY2FyZC1yb2xsLmh0bWwnXG4gICAgaWYgKHRoaXMub3B0aW9ucykgdGhpcy5vcHRpb25zID0gbWVyZ2VPYmplY3QodGhpcy5vcHRpb25zLCBvcHRpb25zKVxuICAgIGVsc2UgdGhpcy5vcHRpb25zID0gb3B0aW9uc1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcylcbiAgICBpZiAoaHRtbCkgcmV0dXJuICQucGFyc2VIVE1MKGh0bWwpWzBdXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIGdldEh0bWxSb2xsIChvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbHMvaW4tY2FyZC1yb2xsLmh0bWwnXG4gICAgaWYgKHRoaXMub3B0aW9ucykgdGhpcy5vcHRpb25zID0gbWVyZ2VPYmplY3QodGhpcy5vcHRpb25zLCBvcHRpb25zKVxuICAgIGVsc2UgdGhpcy5vcHRpb25zID0gb3B0aW9uc1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcylcbiAgICByZXR1cm4gaHRtbCB8fCB1bmRlZmluZWRcbiAgfVxuXG4gIGFzeW5jIHRvTWVzc2FnZSAocHVzaGluZyA9IGZhbHNlKSB7XG4gICAgLy8gSWYgY2FyZCBpcyBwcm92aWRlZCBhdHR0YWNoZWQgdGhlIHJvbGwgdG8gdGhlIGNhcmQuIElmIFVSSUQgcHJvdmlkZWQgYXR0YWNoIGF0IHRoaXMgcG9zaXRpb24uP1xuICAgIHRoaXMucHVzaGluZyA9IHB1c2hpbmdcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbC1yZXN1bHQuaHRtbCdcblxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcylcblxuICAgIGNvbnN0IHNwZWFrZXJEYXRhID0ge31cbiAgICBsZXQgc3BlYWtlclxuICAgIGlmICh0aGlzLmFjdG9yKSB7XG4gICAgICBpZiAodGhpcy5hY3Rvci5pc1Rva2VuKSB7XG4gICAgICAgIHNwZWFrZXJEYXRhLnRva2VuID0gdGhpcy50b2tlbi5kb2N1bWVudFxuICAgICAgfSBlbHNlIGlmICh0aGlzLmFjdG9yLmlzRHVtbXkpIHtcbiAgICAgICAgaWYgKHRoaXMuYWN0b3IubmFtZSkgc3BlYWtlciA9IHsgYWxpYXM6IHRoaXMuYWN0b3IubmFtZSB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzcGVha2VyRGF0YS5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICAgIH1cbiAgICAgIHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHNwZWFrZXJEYXRhKVxuICAgIH0gZWxzZSB7XG4gICAgICBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXG4gICAgfVxuXG4gICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3I/LnVzZXIgPyB0aGlzLmFjdG9yLnVzZXIgOiBnYW1lLnVzZXJcblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IHNwZWFrZXIsXG4gICAgICBmbGF2b3I6IHRoaXMuZmxhdm9yLFxuICAgICAgY29udGVudDogaHRtbCxcbiAgICAgIGZsYWdzOiB7XG4gICAgICAgIENvQzc6IHtcbiAgICAgICAgICB0eXBlOiBDb0M3Q2hlY2suY2FyZFR5cGVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnV1aWQpIGNoYXREYXRhLmZsYWdzLkNvQzcudXVpZCA9IHRoaXMudXVpZFxuICAgIGlmICh0aGlzLmNvbnRleHQpIGNoYXREYXRhLmZsYWdzLkNvQzcuY29udGV4dCA9IHRoaXMuY29udGV4dFxuXG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdzZWxmcm9sbCcpIHtcbiAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICBjaGF0RGF0YS51c2VyID0gZ2FtZS51c2VyLmlkXG4gICAgICAgIGNoYXREYXRhLmZsYXZvciA9IGBbJHt0aGlzLmFjdG9yLm5hbWV9XSAke2NoYXREYXRhLmZsYXZvcn1gXG4gICAgICAgIGNoYXREYXRhLmZsYWdzID0ge1xuICAgICAgICAgIENvQzc6IHtcbiAgICAgICAgICAgIEdNU2VsZlJvbGw6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBjaGF0RGF0YS5zcGVha2VyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNoYXREYXRhLmZsYWdzLkNvQzcub3JpZ2luYWxTcGVha2VyID0gZHVwbGljYXRlKGNoYXREYXRhLnNwZWFrZXIpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgc3dpdGNoIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzZWxmUm9sbFdoaXNwZXJUYXJnZXQnKSkge1xuICAgICAgICAgICAgY2FzZSAnb3duZXJzJzpcbiAgICAgICAgICAgICAgZGVsZXRlIGNoYXREYXRhLnNwZWFrZXJcbiAgICAgICAgICAgICAgY2hhdERhdGEud2hpc3BlciA9IHRoaXMuYWN0b3Iub3duZXJzXG4gICAgICAgICAgICAgIGNoYXREYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuV0hJU1BFUlxuICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICBjYXNlICdldmVyeW9uZSc6XG4gICAgICAgICAgICAgIGRlbGV0ZSBjaGF0RGF0YS5zcGVha2VyXG4gICAgICAgICAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBnYW1lLnVzZXJzLnBsYXllcnNcbiAgICAgICAgICAgICAgY2hhdERhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5XSElTUEVSXG4gICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoY2hhdERhdGEsIHRoaXMucm9sbE1vZGUpXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgQ2hhdE1lc3NhZ2UuYXBwbHlSb2xsTW9kZShjaGF0RGF0YSwgdGhpcy5yb2xsTW9kZSlcbiAgICB9XG5cbiAgICBpZiAoWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXModGhpcy5yb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCcpIGNoYXREYXRhLmJsaW5kID0gdHJ1ZVxuXG4gICAgLy8gQ2hhdE1lc3NhZ2UuYXBwbHlSb2xsTW9kZSggY2hhdERhdGEsIHRoaXMucm9sbE1vZGUpO1xuICAgIGlmICh0aGlzLmRpY2U/LnJvbGwgJiYgIXRoaXMuZGljZT8uaGlkZURpY2UpIHtcbiAgICAgIGNoYXREYXRhLnJvbGwgPSB0aGlzLmRpY2Uucm9sbFxuICAgICAgY2hhdERhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5ST0xMXG4gICAgICBjaGF0RGF0YS5yb2xsTW9kZSA9IHRoaXMuaXNCbGluZCA/ICdibGluZHJvbGwnIDogdGhpcy5yb2xsTW9kZVxuICAgIH1cblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSkudGhlbihtc2cgPT4ge1xuICAgICAgcmV0dXJuIG1zZ1xuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBtYWtlUHVibGljICBXaWxsIGNoYW5nZSB0aGUgcm9sbCBtb2RlIHRvIHB1YmxpY1xuICAgKi9cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKHsgbWFrZVB1YmxpYyA9IGZhbHNlLCBmb3JjZVJvbGwgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBpZiAobWFrZVB1YmxpYykgdGhpcy5yb2xsTW9kZSA9IGZhbHNlIC8vIHJlc2V0IHJvbGwgbW9kZVxuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7IGZsYXZvcjogdGhpcy5mbGF2b3IgfVxuXG4gICAgaWYgKG1ha2VQdWJsaWMpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBbXVxuICAgICAgY2hhdERhdGEuYmxpbmQgPSBmYWxzZVxuICAgICAgQ2hhdE1lc3NhZ2UuYXBwbHlSb2xsTW9kZShjaGF0RGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IFtdXG4gICAgICBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXG4gICAgICBDaGF0TWVzc2FnZS5hcHBseVJvbGxNb2RlKGNoYXREYXRhLCBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpKVxuICAgIH1cblxuICAgIGlmIChjaGF0RGF0YS5ibGluZCkge1xuICAgICAgdGhpcy5pc0JsaW5kID0gdHJ1ZVxuICAgIH1cblxuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xsLXJlc3VsdC5odG1sJ1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcylcbiAgICBsZXQgbmV3Q29udGVudCA9IGh0bWxcblxuICAgIGlmICghdGhpcy5tZXNzYWdlSWQpIHJldHVybiAkLnBhcnNlSFRNTChodG1sKVswXSAvLyBJZiBubyBtZXNzYWdlSWQgcmV0dXJuIHRoZSBIVE1MRWxlbWVudCBjb250YWluaW5nIHRoZSByb2xsLlxuICAgIC8vIElmIG5vIG1lc3NhZ2VJZFxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuICAgIGNvbnN0IGh0bWxNZXNzYWdlID0gJC5wYXJzZUhUTUwobWVzc2FnZS5kYXRhLmNvbnRlbnQpWzBdXG4gICAgaWYgKCFodG1sTWVzc2FnZS5jbGFzc0xpc3QuY29udGFpbnMoJ3JvbGwtcmVzdWx0JykpIHtcbiAgICAgIGNvbnN0IGh0bWxDaGVjayA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG4gICAgICBjb25zdCByb2xsUmVzdWx0RWxlbWVudCA9IGh0bWxNZXNzYWdlLnF1ZXJ5U2VsZWN0b3IoJy5yb2xsLXJlc3VsdCcpXG4gICAgICBpZiAocm9sbFJlc3VsdEVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgICAgcm9sbFJlc3VsdEVsZW1lbnQucmVwbGFjZVdpdGgoaHRtbENoZWNrKVxuICAgICAgfVxuICAgICAgbmV3Q29udGVudCA9IGh0bWxNZXNzYWdlLm91dGVySFRNTFxuICAgIH1cblxuICAgIGNoYXREYXRhLmNvbnRlbnQgPSBuZXdDb250ZW50XG5cbiAgICBpZiAoQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLlJPTEwgPT09IG1lc3NhZ2UuZGF0YS50eXBlKSB7XG4gICAgICBpZiAobWVzc2FnZS5kYXRhLndoaXNwZXI/Lmxlbmd0aCkge1xuICAgICAgICBjaGF0RGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLldISVNQRVJcbiAgICAgIH0gZWxzZSBjaGF0RGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLk9USEVSXG4gICAgfVxuXG4gICAgaWYgKGZvcmNlUm9sbCAmJiB0aGlzLmRpY2U/LnJvbGwpIHtcbiAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMuZGljZS5yb2xsKVxuICAgIH1cblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKGNoYXREYXRhKVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVDYXJkU3dpdGNoIChldmVudCkge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgY2hlY2suZ21EaWZmaWN1bHR5UmVndWxhciA9IGZhbHNlXG4gICAgY2hlY2suZ21EaWZmaWN1bHR5SGFyZCA9IGZhbHNlXG4gICAgY2hlY2suZ21EaWZmaWN1bHR5RXh0cmVtZSA9IGZhbHNlXG4gICAgY2hlY2suZ21EaWZmaWN1bHR5Q3JpdGljYWwgPSBmYWxzZVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZyA9PT0gJ2dtRGlmZmljdWx0eVJlZ3VsYXInKSB7XG4gICAgICBjaGVjay5nbURpZmZpY3VsdHlSZWd1bGFyID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWcgPT09ICdnbURpZmZpY3VsdHlIYXJkJykge1xuICAgICAgY2hlY2suZ21EaWZmaWN1bHR5SGFyZCA9IHRydWVcbiAgICB9XG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnID09PSAnZ21EaWZmaWN1bHR5RXh0cmVtZScpIHtcbiAgICAgIGNoZWNrLmdtRGlmZmljdWx0eUV4dHJlbWUgPSB0cnVlXG4gICAgfVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZyA9PT0gJ2dtRGlmZmljdWx0eUNyaXRpY2FsJykge1xuICAgICAgY2hlY2suZ21EaWZmaWN1bHR5Q3JpdGljYWwgPSB0cnVlXG4gICAgfVxuICAgIGNoZWNrLmNvbXB1dGVDaGVjaygpXG4gICAgY2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgLy8gT0JTT0xFVEUgIVxuICBhc3luYyBzaG9ydFJlc3VsdCAoZGV0YWlscyA9IGZhbHNlKSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGwuaHRtbCdcbiAgICB0aGlzLmRldGFpbHMgPSBkZXRhaWxzIHx8IGZhbHNlXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxuICAgIHJldHVybiBodG1sXG4gIH1cblxuICBnZXQgdG9vbHRpcCAoKSB7XG4gICAgcmV0dXJuIHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xscy9yb2xsLXRvb2x0aXAuaHRtbCcsXG4gICAgICB0aGlzXG4gICAgKVxuICB9XG5cbiAgZ2V0IGlubGluZUNoZWNrICgpIHtcbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG4gICAgYS5jbGFzc0xpc3QuYWRkKCdjb2M3LWlubGluZS1jaGVjaycpXG4gICAgYS5jbGFzc0xpc3QuYWRkKCdjb2M3LWNoZWNrLXJlc3VsdCcpXG4gICAgYS5jbGFzc0xpc3QuYWRkKCdjb2M3LWlubGluZScpXG4gICAgYS5jbGFzc0xpc3QuYWRkKC4uLnRoaXMuY3NzQ2xhc3NMaXN0KVxuICAgIGEudGl0bGUgPSB0aGlzLnRvb2x0aXBIZWFkZXJcbiAgICBhLmRhdGFzZXQucm9sbCA9IGVzY2FwZSh0aGlzLkpTT05Sb2xsU3RyaW5nKSAvLyBUT0RPIUlNUE9SVEFOVCEhIVxuICAgIGEuaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZ2FtZS1pY29uIGdhbWUtaWNvbi1kMTBcIj48L2k+ICR7XG4gICAgICB0aGlzLm1vZGlmaWVkUmVzdWx0IHx8ICc/PydcbiAgICB9YFxuICAgIHJldHVybiBhXG4gIH1cblxuICBnZXQgcm9sbFRvb2xUaXAgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBwYXJ0cyA9IFtdXG4gICAgY29uc3QgdGVucyA9IHRoaXMuZGljZXMudGVucy5tYXAociA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZXN1bHQ6IHIudmFsdWUsXG4gICAgICAgIHNlbGVjdGVkOiByLnNlbGVjdGVkLFxuICAgICAgICBjbGFzc2VzOiBbXG4gICAgICAgICAgJ2RpZScsXG4gICAgICAgICAgJ2QxMCcsXG4gICAgICAgICAgIXIuc2VsZWN0ZWQgPyAnZGlzY2FyZGVkJyA6IG51bGwsXG4gICAgICAgICAgci5pc01pbiA/ICdtaW4nIDogbnVsbCxcbiAgICAgICAgICByLmlzTWF4ID8gJ21heCcgOiBudWxsXG4gICAgICAgIF1cbiAgICAgICAgICAuZmlsdGVyKGMgPT4gYylcbiAgICAgICAgICAuam9pbignICcpXG4gICAgICB9XG4gICAgfSlcbiAgICBjb25zdCB1bml0ID0gW1xuICAgICAge1xuICAgICAgICByZXN1bHQ6IHRoaXMuZGljZXMudW5pdC52YWx1ZSxcbiAgICAgICAgc2VsZWN0ZWQ6IHRydWUsXG4gICAgICAgIGNsYXNzZXM6ICdkaWUgZDEwJ1xuICAgICAgfVxuICAgIF1cblxuICAgIHBhcnRzLnB1c2goe1xuICAgICAgZm9ybXVsYTogdGhpcy50b29sdGlwSGVhZGVyLFxuICAgICAgdG90YWw6IHRoaXMubW9kaWZpZWRSZXN1bHQsXG4gICAgICBpY29uczogdGhpcy5zdWNjZXNzTGV2ZWxJY29ucyxcbiAgICAgIGNsYXNzOiB0aGlzLmNzc0NsYXNzLFxuICAgICAgc3VjY2Vzc1JlcXVpcmVkOiB0aGlzLnN1Y2Nlc3NSZXF1aXJlZCxcbiAgICAgIHJlc3VsdFR5cGU6IHRoaXMucmVzdWx0VHlwZSxcbiAgICAgIGZhY2U6IDEwLFxuICAgICAgcm9sbHM6IFsuLi50ZW5zLCAuLi51bml0XVxuICAgIH0pXG4gICAgcmV0dXJuIHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xscy9yb2xsLXRvb2x0aXAuaHRtbCcsXG4gICAgICB7IHBhcnRzIH1cbiAgICApXG4gIH1cblxuICBnZXQgSlNPTlJvbGxEYXRhICgpIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLkpTT05Sb2xsU3RyaW5nKVxuICB9XG5cbiAgZ2V0IEpTT05Sb2xsU3RyaW5nICgpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcywgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgY29uc3QgZXhjbHVkZSA9IFsnX2FjdG9yJywgJ19za2lsbCcsICdfaXRlbSddXG4gICAgICBpZiAoZXhjbHVkZS5pbmNsdWRlcyhrZXkpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGZyb21EYXRhIChkYXRhKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IENvQzdDaGVjaygpLCBkYXRhKVxuICB9XG5cbiAgc3RhdGljIGZyb21Sb2xsU3RyaW5nIChkYXRhU3RyaW5nKSB7XG4gICAgbGV0IGRhdGFcbiAgICB0cnkge1xuICAgICAgZGF0YSA9IEpTT04ucGFyc2UodW5lc2NhcGUoZGF0YVN0cmluZykpXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlKVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgcmV0dXJuIENvQzdDaGVjay5mcm9tRGF0YShkYXRhKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGFsdGVyIChjaGVjaywgY29tbWFuZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgc3dpdGNoIChjb21tYW5kKSB7XG4gICAgICBjYXNlICd1c2VMdWNrJzoge1xuICAgICAgICBpZiAob3B0aW9ucy50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwYXNzLWNoZWNrJykpIHtcbiAgICAgICAgICBjb25zdCBsdWNrQW1vdW50ID0gcGFyc2VJbnQob3B0aW9ucy50YXJnZXQuZGF0YXNldC5sdWNrQW1vdW50KVxuICAgICAgICAgIGNoZWNrLmZvcmNlUGFzcyhsdWNrQW1vdW50LCBvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB1cGdyYWRlSW5kZXggPSBwYXJzZUludChvcHRpb25zLnRhcmdldC5kYXRhc2V0LmluZGV4KVxuICAgICAgICAgIGF3YWl0IGNoZWNrLnVwZ3JhZGVDaGVjayh1cGdyYWRlSW5kZXgsIG9wdGlvbnMudXBkYXRlKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2ZvcmNlLXBhc3MnOiB7XG4gICAgICAgIGNoZWNrLmZvcmNlUGFzcyhudWxsLCBvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZm9yY2UtZmFpbCc6IHtcbiAgICAgICAgY2hlY2suZm9yY2VGYWlsKG9wdGlvbnMudXBkYXRlKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdpbmNyZWFzZS1zdWNjZXNzLWxldmVsJzoge1xuICAgICAgICBjaGVjay5pbmNyZWFzZVN1Y2Nlc3NMZXZlbChvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVjcmVhc2Utc3VjY2Vzcy1sZXZlbCc6IHtcbiAgICAgICAgY2hlY2suZGVjcmVhc2VTdWNjZXNzTGV2ZWwob3B0aW9ucy51cGRhdGUpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JldmVhbC1jaGVjayc6IHtcbiAgICAgICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgICAgIGNoZWNrLnJvbGxNb2RlID0gZmFsc2VcbiAgICAgICAgY2hlY2suY29tcHV0ZUNoZWNrKClcbiAgICAgICAgaWYgKG9wdGlvbnMudXBkYXRlKSBjaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2ZsYWctZm9yLWRldmVsb3BtZW50Jzoge1xuICAgICAgICBhd2FpdCBjaGVjay5mbGFnRm9yRGV2ZWxvcGVtZW50KClcbiAgICAgICAgY2hlY2suY29tcHV0ZUNoZWNrKClcbiAgICAgICAgaWYgKG9wdGlvbnMudXBkYXRlKSBjaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3B1c2gnOiB7XG4gICAgICAgIGF3YWl0IGNoZWNrLl9wZXJmb3JtKClcbiAgICAgICAgY2hlY2sucHVzaGluZyA9IHRydWVcbiAgICAgICAgaWYgKG9wdGlvbnMudXBkYXRlKSBjaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbkNsaWNrSW5saW5lUm9sbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcblxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnY29jNy1jaGVjay1yZXN1bHQnKSkge1xuICAgICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdleHBhbmRlZCcpKSB7XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suX2NvbGxhcHNlSW5saW5lUmVzdWx0KGEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLl9leHBhbmRJbmxpbmVSZXN1bHQoYSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX2NvbGxhcHNlSW5saW5lUmVzdWx0IChhKSB7XG4gICAgaWYgKCFhLmNsYXNzTGlzdC5jb250YWlucygnY29jNy1pbmxpbmUtY2hlY2snKSkgcmV0dXJuXG4gICAgaWYgKCFhLmNsYXNzTGlzdC5jb250YWlucygnZXhwYW5kZWQnKSkgcmV0dXJuXG4gICAgY29uc3QgdG9vbHRpcCA9IGEucXVlcnlTZWxlY3RvcignLmNvYzctY2hlY2stdG9vbHRpcCcpXG4gICAgaWYgKHRvb2x0aXApIHRvb2x0aXAucmVtb3ZlKClcbiAgICByZXR1cm4gYS5jbGFzc0xpc3QucmVtb3ZlKCdleHBhbmRlZCcpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX2V4cGFuZElubGluZVJlc3VsdCAoYSkge1xuICAgIGlmICghYS5jbGFzc0xpc3QuY29udGFpbnMoJ2NvYzctaW5saW5lLWNoZWNrJykpIHJldHVyblxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnZXhwYW5kZWQnKSkgcmV0dXJuXG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgdG9vbHRpcFxuICAgIGNvbnN0IGNoZWNrID0gT2JqZWN0LmFzc2lnbihcbiAgICAgIG5ldyBDb0M3Q2hlY2soKSxcbiAgICAgIEpTT04ucGFyc2UodW5lc2NhcGUoYS5kYXRhc2V0LnJvbGwpKVxuICAgICkgLy8gVE9ETyA6IGZpbmQgc3RyaW5naWZ5IHVuZXNjYXBlICEhIDIwMjEwMjA1XG4gICAgaWYgKGNoZWNrLnN0YW5kYnkpIHJldHVyblxuXG4gICAgY29uc3QgdGlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0aXAuaW5uZXJIVE1MID0gYXdhaXQgY2hlY2sucm9sbFRvb2xUaXBcblxuICAgIC8vIEFkZCB0aGUgdG9vbHRpcFxuICAgIGNvbnN0IHRvb2x0aXAgPSB0aXAuY2hpbGRyZW5bMF1cbiAgICBhLmFwcGVuZENoaWxkKHRvb2x0aXApXG4gICAgYS5jbGFzc0xpc3QuYWRkKCdleHBhbmRlZCcpXG5cbiAgICAvLyBTZXQgdGhlIHBvc2l0aW9uXG4gICAgY29uc3QgcGEgPSBhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgY29uc3QgcHQgPSB0b29sdGlwLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgdG9vbHRpcC5zdHlsZS5sZWZ0ID0gYCR7TWF0aC5taW4oXG4gICAgICBwYS54LFxuICAgICAgd2luZG93LmlubmVyV2lkdGggLSAocHQud2lkdGggKyAzKVxuICAgICl9cHhgXG4gICAgdG9vbHRpcC5zdHlsZS50b3AgPSBgJHtNYXRoLm1pbihcbiAgICAgIHBhLnkgKyBwYS5oZWlnaHQgKyAzLFxuICAgICAgd2luZG93LmlubmVySGVpZ2h0IC0gKHB0LmhlaWdodCArIDMpXG4gICAgKX1weGBcbiAgICBjb25zdCB6aSA9IGdldENvbXB1dGVkU3R5bGUoYSkuekluZGV4XG4gICAgdG9vbHRpcC5zdHlsZS56SW5kZXggPSBOdW1iZXIuaXNOdW1lcmljKHppKSA/IHppICsgMSA6IDEwMFxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUgKi9cblxuZXhwb3J0IGNsYXNzIFNhbkRhdGFEaWFsb2cgZXh0ZW5kcyBEaWFsb2cge1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5maW5kKCc6Y2hlY2tib3gnKS5jbGljaygoKSA9PiB0aGlzLl90b2dnbGVJbnB1dChodG1sKSlcbiAgfVxuXG4gIF90b2dnbGVJbnB1dCAoaHRtbCkge1xuICAgIGh0bWwuZmluZCgnKltuYW1lPVwiY3VzdG9tbmFtZVwiXScpLnRvZ2dsZSgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NhbmRhdGEuaHRtbCcsXG4gICAgICBvcHRpb25zXG4gICAgKVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgbGV0IGZvcm1EYXRhID0gbnVsbFxuICAgICAgY29uc3QgZGxnID0gbmV3IFNhbkRhdGFEaWFsb2coe1xuICAgICAgICB0aXRsZTogb3B0aW9ucy5kaXNwbGF5TmFtZVxuICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TYW5EYXRhU2VsZWN0aW9uV2luZG93TmFtZWQnLCB7XG4gICAgICAgICAgICBuYW1lOiBvcHRpb25zLmRpc3BsYXlOYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgICA6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5EYXRhU2VsZWN0aW9uV2luZG93JyksIC8vIFRPRE86IFJlbW92ZSBTYW5EYXRhU2VsZWN0aW9uV2luZG93TmFtZWRcbiAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgIFZhbGlkYXRlOiB7XG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlZhbGlkYXRlJyksXG4gICAgICAgICAgICBjYWxsYmFjazogaHRtbCA9PiB7XG4gICAgICAgICAgICAgIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3Nhbi1kYXRhLWZvcm0nKSlcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZm9ybURhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0OiAnVmFsaWRhdGUnLFxuICAgICAgICBjbG9zZTogKCkgPT4ge31cbiAgICAgIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIHVpICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdMaW5rQ3JlYXRpb25EaWFsb2cgfSBmcm9tICcuL2xpbmstY3JlYXRpb24tZGlhbG9nLmpzJ1xuaW1wb3J0IHsgaXNDdHJsS2V5IH0gZnJvbSAnLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBSb2xsRGlhbG9nIH0gZnJvbSAnLi9yb2xsLWRpYWxvZy5qcydcbmltcG9ydCB7IENvbWJpbmVkQ2hlY2tDYXJkIH0gZnJvbSAnLi4vY2hhdC9jYXJkcy9jb21iaW5lZC1yb2xsLmpzJ1xuaW1wb3J0IHsgT3Bwb3NlZENoZWNrQ2FyZCB9IGZyb20gJy4uL2NoYXQvY2FyZHMvb3Bwb3NlZC1yb2xsLmpzJ1xuaW1wb3J0IHsgU2FuQ2hlY2tDYXJkIH0gZnJvbSAnLi4vY2hhdC9jYXJkcy9zYW4tY2hlY2suanMnXG5pbXBvcnQgeyBTYW5EYXRhRGlhbG9nIH0gZnJvbSAnLi9zYW5kYXRhLWRpYWxvZy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDaGF0TWVzc2FnZSB7XG4gIHN0YXRpYyBnZXQgUk9MTF9UWVBFX0FUVFJJQlVURSAoKSB7XG4gICAgcmV0dXJuICdSL0FUJ1xuICB9XG5cbiAgc3RhdGljIGdldCBST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMgKCkge1xuICAgIHJldHVybiAnUi9DSCdcbiAgfVxuXG4gIHN0YXRpYyBnZXQgUk9MTF9UWVBFX0NPTUJBVCAoKSB7XG4gICAgcmV0dXJuICdSL0NPJ1xuICB9XG5cbiAgc3RhdGljIGdldCBST0xMX1RZUEVfU0tJTEwgKCkge1xuICAgIHJldHVybiAnUi9TSydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgQ0FSRF9UWVBFX0NPTUJJTkVEICgpIHtcbiAgICByZXR1cm4gJ0MvQ08nXG4gIH1cblxuICBzdGF0aWMgZ2V0IENBUkRfVFlQRV9HUk9VUCAoKSB7XG4gICAgcmV0dXJuICdDL0dSJ1xuICB9XG5cbiAgc3RhdGljIGdldCBDQVJEX1RZUEVfTk9STUFMICgpIHtcbiAgICByZXR1cm4gJ0MvTk8nXG4gIH1cblxuICBzdGF0aWMgZ2V0IENBUkRfVFlQRV9PUFBPU0VEICgpIHtcbiAgICByZXR1cm4gJ0MvT1AnXG4gIH1cblxuICBzdGF0aWMgZ2V0IENBUkRfVFlQRV9TQU5fQ0hFQ0sgKCkge1xuICAgIHJldHVybiAnQy9TQydcbiAgfVxuXG4gIHN0YXRpYyBjYXJkVHlwZXMgKGNvbmZpZykge1xuICAgIGlmIChjb25maWcucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ09NQkFUKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICBjb25zdCBzZWxlY3QgPSB7XG4gICAgICBbQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUxdOiAnQ29DNy5SZWd1bGFyUm9sbENhcmQnLFxuICAgICAgW0NvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfQ09NQklORURdOiAnQ29DNy5Db21iaW5lZFJvbGxDYXJkJyxcbiAgICAgIFtDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX09QUE9TRURdOiAnQ29DNy5PcHBvc2VkUm9sbENhcmQnXG4gICAgICAvLyBbQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9HUk9VUF06ICdDb0M3Lkdyb3VwUm9sbENhcmQnIC0gTllJXG4gICAgfVxuICAgIGlmIChcbiAgICAgIGNvbmZpZy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEUgJiZcbiAgICAgIGNvbmZpZy5hdHRyaWJ1dGUgPT09ICdzYW4nXG4gICAgKSB7XG4gICAgICBzZWxlY3RbQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0tdID0gJ0NvQzcuU2FuaXR5TG9zc0VuY291bnRlcidcbiAgICB9XG4gICAgcmV0dXJuIHNlbGVjdFxuICB9XG5cbiAgc3RhdGljIG5vcm1hbGl6ZVJlcXVlc3QgKG9wdGlvbnMpIHtcbiAgICBpZiAoXG4gICAgICB0eXBlb2Ygb3B0aW9ucy5ldmVudCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgIHR5cGVvZiBvcHRpb25zLmNhcmRUeXBlID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgdHlwZW9mIG9wdGlvbnMucm9sbFR5cGUgPT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yTm90Rm91bmQnLCB7XG4gICAgICAgICAgdmFsdWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsJylcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBpZiAoXG4gICAgICAhW1xuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0NPTUJJTkVELFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0dST1VQLFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9PUFBPU0VELFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX1NBTl9DSEVDS1xuICAgICAgXS5pbmNsdWRlcyhvcHRpb25zLmNhcmRUeXBlKVxuICAgICkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JJbnZhbGlkQ2FyZFR5cGUnKVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGlmIChcbiAgICAgICFbXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEwsXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMsXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFXG4gICAgICBdLmluY2x1ZGVzKG9wdGlvbnMucm9sbFR5cGUpXG4gICAgKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XG4gICAgICAgICAgdmFsdWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvckludmFsaWRSb2xsVHlwZScpXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgb3B0aW9uczoge1xuICAgICAgICBjYXJkVHlwZTogb3B0aW9ucy5jYXJkVHlwZSxcbiAgICAgICAgc2hpZnRLZXk6IG9wdGlvbnMuZXZlbnQuc2hpZnRLZXksXG4gICAgICAgIGFsdEtleTogb3B0aW9ucy5ldmVudC5hbHRLZXksXG4gICAgICAgIGlzQ3RybEtleTogaXNDdHJsS2V5KG9wdGlvbnMuZXZlbnQpLFxuICAgICAgICBpc0NvbWJhdDogb3B0aW9ucy5ldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdD8uY29udGFpbnMoJ2NvbWJhdCcpXG4gICAgICB9LFxuICAgICAgZGlhbG9nT3B0aW9uczoge1xuICAgICAgICByb2xsVHlwZTogb3B0aW9ucy5yb2xsVHlwZSxcbiAgICAgICAgY2FyZFR5cGU6IG9wdGlvbnMuY2FyZFR5cGUsXG4gICAgICAgIGF0dHJpYnV0ZTogJydcbiAgICAgIH1cbiAgICB9XG4gICAgc3dpdGNoIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSkge1xuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMOlxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDOlxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURTpcbiAgICAgICAgY29uZmlnLm9wdGlvbnMuc2tpbGxJZCA9XG4gICAgICAgICAgb3B0aW9ucy5ldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJyk/LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICBjb25maWcub3B0aW9ucy5pdGVtSWQgPVxuICAgICAgICAgIG9wdGlvbnMuZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpPy5kYXRhc2V0Lml0ZW1JZFxuICAgICAgICBjb25maWcub3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyA9XG4gICAgICAgICAgb3B0aW9ucy5ldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5jaGFyYWN0ZXJpc3RpY1xuICAgICAgICBjb25maWcub3B0aW9ucy5hdHRyaWJ1dGUgPVxuICAgICAgICAgIG9wdGlvbnMuZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuYXR0cmliXG4gICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmF0dHJpYnV0ZSA9IGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZVxuICAgICAgICBjb25maWcub3B0aW9ucy5hY3RvcklkID1cbiAgICAgICAgICBvcHRpb25zLmV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnZm9ybScpLmRhdGFzZXQuYWN0b3JJZFxuICAgICAgICBjb25maWcub3B0aW9ucy50b2tlbktleSA9XG4gICAgICAgICAgb3B0aW9ucy5ldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LnRva2VuSWRcbiAgICAgICAgY29uZmlnLm9wdGlvbnMud2VhcG9uQWx0U2tpbGwgPVxuICAgICAgICAgIG9wdGlvbnMuZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2FsdGVybmF0aXYtc2tpbGwnKVxuICAgICAgICBjb25maWcub3B0aW9ucy5hY3RvciA9IG9wdGlvbnMuYWN0b3JcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMICYmXG4gICAgICAgICAgY29uZmlnLm9wdGlvbnMuaXNDb21iYXRcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGNvbmZpZy5vcHRpb25zLmFjdG9yLml0ZW1zLmdldChjb25maWcub3B0aW9ucy5pdGVtSWQpXG4gICAgICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zLndlYXBvbk5hbWUgPSBpdGVtLm5hbWVcbiAgICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DT01CQVRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBjb25maWcub3B0aW9ucy5hY3RvcklkID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICh0eXBlb2YgY29uZmlnLm9wdGlvbnMudG9rZW5LZXkgPT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICB0eXBlb2YgY29uZmlnLm9wdGlvbnMuYWN0b3IgPT09ICd1bmRlZmluZWQnKVxuICAgICAgICApIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yQWN0b3InKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMICYmXG4gICAgICAgICAgdHlwZW9mIGNvbmZpZy5vcHRpb25zLnNraWxsSWQgPT09ICd1bmRlZmluZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XG4gICAgICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuU2tpbGwnKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09XG4gICAgICAgICAgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQ1xuICAgICAgICApIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhcmFjdGVyaXN0aWMnKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICFnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgICAgICAgIWNvbmZpZy5vcHRpb25zLmFjdG9yLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbXG4gICAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljXG4gICAgICAgICAgICBdPy52YWx1ZVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkF0dHJpYnV0ZScpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgIWdhbWUudXNlci5pc0dNICYmXG4gICAgICAgICAgICAhY29uZmlnLm9wdGlvbnMuYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnNbY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlXVxuICAgICAgICAgICAgICA/LnZhbHVlXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ09NQkFUXG4gICAgICAgICkge1xuICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnLm9wdGlvbnMuaXRlbUlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuV2VhcG9uJylcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLm9wdGlvbnMuYWx0S2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uZmlnLm9wdGlvbnMuaGFzUGxheWVyT3duZXIgPVxuICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmFjdG9yLmhhc1BsYXllck93bmVyID8/IGZhbHNlXG4gICAgICAgIGlmIChcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT1cbiAgICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpc2FibGVGbGF0VGhyZXNob2xkTW9kaWZpZXIgPVxuICAgICAgICAgICAgY29uZmlnLm9wdGlvbnMuaXNDdHJsS2V5XG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlzYWJsZUZsYXREaWNlTW9kaWZpZXIgPVxuICAgICAgICAgICAgY29uZmlnLm9wdGlvbnMuaXNDdHJsS2V5XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlzYWJsZUZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZhbHNlXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlzYWJsZUZsYXREaWNlTW9kaWZpZXIgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyID0gMFxuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5kaWZmaWN1bHR5ID1cbiAgICAgICAgICBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsW1xuICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGVmYXVsdENoZWNrRGlmZmljdWx0eScpXG4gICAgICAgICAgXVxuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0RGljZU1vZGlmaWVyID0gMFxuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSAwXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIHJldHVybiBjb25maWdcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB0cmlnZ2VyIChvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBjb25maWcgPSBDb0M3Q2hhdE1lc3NhZ2Uubm9ybWFsaXplUmVxdWVzdChvcHRpb25zKVxuICAgIGlmIChjb25maWcgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKFxuICAgICAgY29uZmlnLm9wdGlvbnMuaXNDdHJsS2V5ICYmXG4gICAgICBnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgW1xuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0tcbiAgICAgIF0uaW5jbHVkZXMoY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGUpXG4gICAgKSB7XG4gICAgICBDb0M3Q2hhdE1lc3NhZ2UuY3JlYXRlTGluayhjb25maWcpXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghY29uZmlnLm9wdGlvbnMuc2hpZnRLZXkpIHtcbiAgICAgICAgYXdhaXQgQ29DN0NoYXRNZXNzYWdlLmNyZWF0ZVJvbGwoY29uZmlnKVxuICAgICAgfVxuICAgICAgQ29DN0NoYXRNZXNzYWdlLnJ1blJvbGwoY29uZmlnKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGVMaW5rIChjb25maWcpIHtcbiAgICBzd2l0Y2ggKGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlKSB7XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFOlxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDOlxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NPTUJBVDpcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTDpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IGxpbmtEYXRhID0ge1xuICAgICAgICAgICAgY2hlY2s6ICdjaGVjaycsXG4gICAgICAgICAgICB0eXBlOiAnJyxcbiAgICAgICAgICAgIG5hbWU6ICcnLFxuICAgICAgICAgICAgaGFzUGxheWVyT3duZXI6IGNvbmZpZy5vcHRpb25zLmhhc1BsYXllck93bmVyLFxuICAgICAgICAgICAgYWN0b3JLZXk6IGNvbmZpZy5vcHRpb25zLmFjdG9yLmFjdG9yS2V5LFxuICAgICAgICAgICAgZm9yY2VNb2RpZmllcnM6IGNvbmZpZy5vcHRpb25zLnNoaWZ0S2V5XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBsaW5rRGF0YS50eXBlID0gJ3NraWxsJ1xuICAgICAgICAgICAgbGlua0RhdGEubmFtZSA9IGNvbmZpZy5vcHRpb25zLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgICAgICAgY29uZmlnLm9wdGlvbnMuc2tpbGxJZFxuICAgICAgICAgICAgKT8uc2hvcnROYW1lXG4gICAgICAgICAgICBpZiAoIWxpbmtEYXRhLm5hbWUpIHJldHVyblxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT1cbiAgICAgICAgICAgIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUNcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGxpbmtEYXRhLnR5cGUgPSAnY2hhcmFjdGVyaXN0aWMnXG4gICAgICAgICAgICBsaW5rRGF0YS5uYW1lID0gY29uZmlnLm9wdGlvbnMuY2hhcmFjdGVyaXN0aWNcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09XG4gICAgICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgaWYgKGNvbmZpZy5vcHRpb25zLmFsdEtleSAmJiBjb25maWcub3B0aW9ucy5hdHRyaWJ1dGUgPT09ICdzYW4nKSB7XG4gICAgICAgICAgICAgIGxpbmtEYXRhLmNoZWNrID0gJ3Nhbmxvc3MnXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBsaW5rRGF0YS50eXBlID0gJ2F0dHJpYnV0ZSdcbiAgICAgICAgICAgICAgbGlua0RhdGEubmFtZSA9IGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DT01CQVRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGxpbmtEYXRhLmNoZWNrID0gJ2l0ZW0nXG4gICAgICAgICAgICBsaW5rRGF0YS50eXBlID0gJ3dlYXBvbidcbiAgICAgICAgICAgIGxpbmtEYXRhLm5hbWUgPSBjb25maWcub3B0aW9ucy53ZWFwb25OYW1lXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSA9PT0gJ2JsaW5kcm9sbCcpIHtcbiAgICAgICAgICAgIGxpbmtEYXRhLmJsaW5kID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBDb0M3TGlua0NyZWF0aW9uRGlhbG9nLmZyb21MaW5rRGF0YShsaW5rRGF0YSkudGhlbihkbGcgPT5cbiAgICAgICAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlUm9sbCAoY29uZmlnKSB7XG4gICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShjb25maWcuZGlhbG9nT3B0aW9ucylcbiAgICBpZiAodXNhZ2UpIHtcbiAgICAgIGNvbnN0IGNhcmRUeXBlID0gdXNhZ2UuZ2V0KCdjYXJkVHlwZScpXG4gICAgICBpZiAoY2FyZFR5cGUpIHtcbiAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGUgPSBjYXJkVHlwZVxuICAgICAgfVxuICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMubW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICB1c2FnZS5nZXQoJ2ZsYXREaWNlTW9kaWZpZXInKVxuICAgICAgKVxuICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICB1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHJ1blJvbGwgKGNvbmZpZykge1xuICAgIHN3aXRjaCAoY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGUpIHtcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0s6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBzYW5EYXRhID0gYXdhaXQgU2FuRGF0YURpYWxvZy5jcmVhdGUoe1xuICAgICAgICAgICAgcHJvbXB0TGFiZWw6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGlmIChzYW5EYXRhKSB7XG4gICAgICAgICAgICBsZXQgc2FuTWluID0gc2FuRGF0YS5nZXQoJ3Nhbk1pbicpIHx8IDBcbiAgICAgICAgICAgIGxldCBzYW5NYXggPSBzYW5EYXRhLmdldCgnc2FuTWF4JykgfHwgMFxuICAgICAgICAgICAgY29uc3Qgc2FuUmVhc29uID0gc2FuRGF0YS5nZXQoJ3NhblJlYXNvbicpXG5cbiAgICAgICAgICAgIGlmICghaXNOYU4oTnVtYmVyKHNhbk1pbikpKSBzYW5NaW4gPSBOdW1iZXIoc2FuTWluKVxuICAgICAgICAgICAgaWYgKCFpc05hTihOdW1iZXIoc2FuTWF4KSkpIHNhbk1heCA9IE51bWJlcihzYW5NYXgpXG5cbiAgICAgICAgICAgIFNhbkNoZWNrQ2FyZC5jcmVhdGUoXG4gICAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmFjdG9yLmFjdG9yS2V5LFxuICAgICAgICAgICAgICB7IHNhbk1pbjogc2FuTWluLCBzYW5NYXg6IHNhbk1heCwgc2FuUmVhc29uOiBzYW5SZWFzb24gfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNhbk1vZGlmaWVyOiBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllcixcbiAgICAgICAgICAgICAgICBzYW5EaWZmaWN1bHR5OiBjb25maWcuZGlhbG9nT3B0aW9ucy5kaWZmaWN1bHR5LFxuICAgICAgICAgICAgICAgIGZhc3RGb3J3YXJkOiBjb25maWcub3B0aW9ucy5zaGlmdEtleVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllclxuICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBjb25maWcuZGlhbG9nT3B0aW9ucy5kaWZmaWN1bHR5XG4gICAgICAgICAgY2hlY2suYWN0b3IgPSAhY29uZmlnLm9wdGlvbnMudG9rZW5LZXlcbiAgICAgICAgICAgID8gY29uZmlnLm9wdGlvbnMuYWN0b3JJZFxuICAgICAgICAgICAgOiBjb25maWcub3B0aW9ucy50b2tlbktleVxuICAgICAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0RGljZU1vZGlmaWVyXG4gICAgICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID1cbiAgICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgICAgICAgIGNoZWNrLnN0YW5kYnkgPVxuICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycpICYmXG4gICAgICAgICAgICBnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgICAgICAgY29uZmlnLm9wdGlvbnMuaGFzUGxheWVyT3duZXJcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY2hlY2suc2tpbGwgPSBjb25maWcub3B0aW9ucy5za2lsbElkXG4gICAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09XG4gICAgICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgYXdhaXQgY2hlY2sucm9sbEF0dHJpYnV0ZShjb25maWcub3B0aW9ucy5hdHRyaWJ1dGUpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IGNoZWNrLnJvbGxDaGFyYWN0ZXJpc3RpYyhjb25maWcub3B0aW9ucy5jaGFyYWN0ZXJpc3RpYylcbiAgICAgICAgICB9XG4gICAgICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX09QUE9TRUQ6XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfQ09NQklORUQ6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgICAgIGNoZWNrLmFjdG9yID0gIWNvbmZpZy5vcHRpb25zLnRva2VuS2V5XG4gICAgICAgICAgICA/IGNvbmZpZy5vcHRpb25zLmFjdG9ySWRcbiAgICAgICAgICAgIDogY29uZmlnLm9wdGlvbnMudG9rZW5LZXlcbiAgICAgICAgICBjaGVjay5jaGFyYWN0ZXJpc3RpYyA9IGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljXG4gICAgICAgICAgY2hlY2suYXR0cmlidXRlID0gY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlXG4gICAgICAgICAgY2hlY2suc2tpbGxJZCA9IGNvbmZpZy5vcHRpb25zLnNraWxsSWRcbiAgICAgICAgICBjaGVjay5yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICAgICAgICBjaGVjay5pbml0aWF0b3IgPSBnYW1lLnVzZXIuaWRcbiAgICAgICAgICBsZXQgZGF0YSA9IHt9XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgZGF0YSA9IHtcbiAgICAgICAgICAgICAgdHlwZTogT3Bwb3NlZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnLnR5cGUsXG4gICAgICAgICAgICAgIGNvbWJhdDogY29uZmlnLm9wdGlvbnMuaXNDb21iYXQsXG4gICAgICAgICAgICAgIGFjdGlvbjogJ25ldydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNoZWNrLml0ZW0gPSBjb25maWcub3B0aW9ucy5pdGVtSWRcbiAgICAgICAgICAgIGNoZWNrLndlYXBvbkFsdFNraWxsID0gY29uZmlnLm9wdGlvbnMud2VhcG9uQWx0U2tpbGxcbiAgICAgICAgICAgIGNoZWNrLmRlbnlQdXNoID0gdHJ1ZSAvLyBPcHBvc2VkIHJvbGxlZCBjYW4ndCBiZSBwdXNoZWQuXG4gICAgICAgICAgICBhd2FpdCBjaGVjay5fcGVyZm9ybSgpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRhdGEgPSB7XG4gICAgICAgICAgICAgIHR5cGU6IENvbWJpbmVkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgICAgICAgICAgYWN0aW9uOiAnbmV3J1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpZmZpY3VsdHlcbiAgICAgICAgICB9XG4gICAgICAgICAgZGF0YS5yb2xsID0gY2hlY2suSlNPTlJvbGxEYXRhXG4gICAgICAgICAgZGF0YS5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgT3Bwb3NlZENoZWNrQ2FyZC5kaXNwYXRjaChkYXRhKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBDb21iaW5lZENoZWNrQ2FyZC5kaXNwYXRjaChkYXRhKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIHJlbmRlclRlbXBsYXRlICovXG5cbmltcG9ydCB7IENvQzdDaGF0TWVzc2FnZSB9IGZyb20gJy4vY29jNy1jaGF0LW1lc3NhZ2UuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcblxuZXhwb3J0IGNsYXNzIFJvbGxEaWFsb2cge1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChvcHRpb25zID0ge30pIHtcbiAgICBpZiAob3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICBvcHRpb25zLmRpZmZpY3VsdHlMZXZlbCA9IHt9XG4gICAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duID09PSBvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5TGV2ZWwudW5rbm93biA9IHRydWVcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPT09IG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgICBvcHRpb25zLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID0gdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZCA9PT0gb3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICAgIG9wdGlvbnMuZGlmZmljdWx0eUxldmVsLmhhcmQgPSB0cnVlXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lID09PSBvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gaWYoIHVuZGVmaW5lZCA9PSBvcHRpb25zLmFza1ZhbHVlKSBvcHRpb25zLmFza1ZhbHVlID0gdHJ1ZTtcbiAgICBpZiAob3B0aW9ucy5uYW1lICYmICFvcHRpb25zLmRpc3BsYXlOYW1lKSBvcHRpb25zLmRpc3BsYXlOYW1lID0gb3B0aW9ucy5uYW1lXG4gICAgY29uc3QgdW5rbm93bkRpZmZpY3VsdHlEZWZhdWx0ID1cbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RlZmF1bHRDaGVja0RpZmZpY3VsdHknKSA9PT0gJ3Vua25vd24nXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIGFsbG93RmxhdERpY2VNb2RpZmllcjpcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYWxsb3dGbGF0RGljZU1vZGlmaWVyJykgJiZcbiAgICAgICAgIW9wdGlvbnMuZGlzYWJsZUZsYXREaWNlTW9kaWZpZXIsXG4gICAgICBhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcjpcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInKSAmJlxuICAgICAgICAhb3B0aW9ucy5kaXNhYmxlRmxhdFRocmVzaG9sZE1vZGlmaWVyLFxuICAgICAgZGlmZmljdWx0eTogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbCxcbiAgICAgIHVua25vd25EaWZmaWN1bHR5RGVmYXVsdDogdW5rbm93bkRpZmZpY3VsdHlEZWZhdWx0LFxuICAgICAgb3B0aW9uc1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuY2FyZFR5cGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmNhcmRUeXBlcyA9IENvQzdDaGF0TWVzc2FnZS5jYXJkVHlwZXMob3B0aW9ucylcbiAgICB9XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9ib251cy5odG1sJyxcbiAgICAgIGRhdGFcbiAgICApXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgbGV0IGZvcm1EYXRhID0gbnVsbFxuICAgICAgY29uc3QgZGxnID0gbmV3IERpYWxvZyh7XG4gICAgICAgIHRpdGxlOiBvcHRpb25zLmRpc3BsYXlOYW1lXG4gICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkJvbnVzU2VsZWN0aW9uV2luZG93TmFtZWQnLCB7XG4gICAgICAgICAgICBuYW1lOiBvcHRpb25zLmRpc3BsYXlOYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgICA6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Cb251c1NlbGVjdGlvbldpbmRvdycpLFxuICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgcm9sbDoge1xuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsRGljZScpLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGh0bWwgPT4ge1xuICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNib251cy1yb2xsLWZvcm0nKSlcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZm9ybURhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0OiAncm9sbCcsXG4gICAgICAgIGNsb3NlOiAoKSA9PiB7fVxuICAgICAgfSlcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIGRlZXBDbG9uZSwgRm9ybURhdGFFeHRlbmRlZCwgZm91bmRyeSwgZnJvbVV1aWQsIGdhbWUsIEhvb2tzLCBtZXJnZU9iamVjdCwgcmVuZGVyVGVtcGxhdGUsIHNvY2tldGxpYiwgdWkgKi9cblxuY29uc3QgRUNDX0NMQVNTID0gJ2VuaGFuY2VkLWNoYXQtY2FyZCdcblxuY29uc3QgUEVSTUlTU0lPTl9UWVBFID0ge1xuICBHTTogJ2dtJywgLy8gdXNlciBpcyBHTVxuICBTUEVBS0VSOiAnc3BlYWtlcicsIC8vIHRoZSBzcGVha2VyIGlzIGFuIGFjdG9yIGNvbnRyb2xlZC9vd25lZCBieSB0aGUgdXNlclxuICBVU0VSOiAndXNlcicsIC8vIHRoZSB1c2VyIGlzIHRoZSBtZXNzYWdlJ3MgYXV0aG9yXG4gIEVWRVJZT05FOiAnYWxsJywgLy8gZXF1aXZhbGVudCB0byBlbXB0eSBzdHJpbmdcbiAgQkxBQ0tMSVNUOiAnYmxhY2tsaXN0JyAvLyBpbnZlcnQgdGhlIGxvZ2ljXG59XG5cbmNvbnN0IFNUQVRFID0ge1xuICBPTjogJ3N3aXRjaGVkLW9uJyxcbiAgT0ZGOiAnc3dpdGNoZWQtb2ZmJ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdEVDQyAoLi4uY2FyZGNsYXNzKSB7XG4gIC8vIEhvb2tzLm9uY2UoJ2luaXQnLCBmdW5jdGlvbiAoKSB7XG4gIC8vIH0pXG5cbiAgSG9va3Mub24oJ3JlbmRlckNoYXRMb2cnLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICAgIEVuaGFuY2VkQ2hhdENhcmRMaWIuaW5qZWN0Q1NTKGFwcCwgaHRtbCwgZGF0YSlcbiAgKVxuXG4gIEhvb2tzLm9uY2UoJ3NvY2tldGxpYi5yZWFkeScsIGZ1bmN0aW9uICgpIHtcbiAgICBFbmhhbmNlZENoYXRDYXJkTGliLnJlZ2lzdGVyKGNhcmRjbGFzcylcbiAgICBFbmhhbmNlZENoYXRDYXJkTGliLnNvY2tldCA9IHNvY2tldGxpYi5yZWdpc3RlclN5c3RlbShnYW1lLnN5c3RlbS5pZCkgLy8gU29ja2V0IGlzIGF0dGFjaGVkIHRvIGN1cnJlbnQgc3lzdGVtXG4gICAgRW5oYW5jZWRDaGF0Q2FyZExpYi5zb2NrZXQucmVnaXN0ZXIoJ3VwZGF0ZU1lc3NhZ2UnLCB1cGRhdGVNZXNzYWdlKVxuICAgIEVuaGFuY2VkQ2hhdENhcmRMaWIuc29ja2V0LnJlZ2lzdGVyKCdhZHZpc2UnLCBhZHZpc2UpXG4gICAgLy8gRW5oYW5jZWRDaGF0Q2FyZExpYi5zb2NrZXQucmVnaXN0ZXIoJ2dtdHJhZGVpdGVtdG8nLCBnbXRyYWRlaXRlbXRvKVxuICB9KVxuXG4gIEhvb2tzLm9uKCdyZW5kZXJDaGF0TWVzc2FnZScsIChhcHAsIGh0bWwsIGRhdGEpID0+XG4gICAgRW5oYW5jZWRDaGF0Q2FyZC5iaW5kTGlzdGVuZXJzKGh0bWwpXG4gIClcbn1cblxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlTWVzc2FnZSAobWVzc2FnZUlkLCBuZXdDb250ZW50KSB7XG4gIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuXG4gIGF3YWl0IGNoYXRNZXNzYWdlLnVwZGF0ZSh7XG4gICAgY29udGVudDogbmV3Q29udGVudFxuICB9KVxufVxuXG5hc3luYyBmdW5jdGlvbiBhZHZpc2UgKCkge31cblxuY2xhc3MgRW5oYW5jZWRDaGF0Q2FyZExpYiB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICB0aGlzLnR5cGVzID0gbmV3IE1hcCgpXG4gICAgdGhpcy5zb2NrZXQgPSBudWxsXG4gICAgLy8gdGhpcy5lbmhhbmNlZENoYXRDYXJkQ2xhc3MgPSBFbmhhbmNlZENoYXRDYXJkXG4gIH1cblxuICBzdGF0aWMgaW5qZWN0Q1NTICgpIHtcbiAgICBsZXQgc3R5bGUgPSAkKCdoZWFkJykuZmluZCgnc3R5bGUnKVxuICAgIGlmICghc3R5bGU/Lmxlbmd0aCkge1xuICAgICAgJCgnaGVhZCcpLmFwcGVuZCgkKCc8c3R5bGUgIHR5cGU9XCJ0ZXh0L2Nzc1wiPjwvc3R5bGU+JykpXG4gICAgICBzdHlsZSA9ICQoJ2hlYWQnKS5maW5kKCdzdHlsZScpXG4gICAgfVxuICAgIHN0eWxlLmFwcGVuZChcbiAgICAgIGAuZWNjLXJlc3RyaWN0ZWQge2NvbG9yOiByZWR9XG4gICAgLmVjYy1yZXN0cmljdGVkOmhvdmVyIHtjdXJzb3I6IG5vdC1hbGxvd2VkfWBcbiAgICApXG4gIH1cblxuICBzdGF0aWMgc2V0IHNvY2tldCAoeCkge1xuICAgIGlmICghZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYikge1xuICAgICAgZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYiA9IG5ldyBFbmhhbmNlZENoYXRDYXJkTGliKClcbiAgICB9XG4gICAgZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYi5zb2NrZXQgPSB4XG4gIH1cblxuICBzdGF0aWMgZ2V0IHNvY2tldCAoKSB7XG4gICAgaWYgKCFnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdFQ0Mgbm90IEluaXRpYWxpemVkJylcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgaWYgKCFnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliLnNvY2tldCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignRUNDIG5vIHNvY2tldCcpXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuICAgIHJldHVybiBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliLnNvY2tldFxuICB9XG5cbiAgc3RhdGljIGdldCB0eXBlcyAoKSB7XG4gICAgaWYgKCFnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliKSB7XG4gICAgICBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliID0gbmV3IEVuaGFuY2VkQ2hhdENhcmRMaWIoKVxuICAgIH1cbiAgICByZXR1cm4gZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYi50eXBlc1xuICB9XG5cbiAgc3RhdGljIHJlZ2lzdGVyIChjYXJkQ29uc3RydWN0b3JzKSB7XG4gICAgY2FyZENvbnN0cnVjdG9ycy5mb3JFYWNoKGNhcmRDb25zdHJ1Y3RvciA9PiB7XG4gICAgICBpZiAoIUVuaGFuY2VkQ2hhdENhcmRMaWIudHlwZXMuZ2V0KGNhcmRDb25zdHJ1Y3Rvci5uYW1lKSkge1xuICAgICAgICBFbmhhbmNlZENoYXRDYXJkTGliLnR5cGVzLnNldChjYXJkQ29uc3RydWN0b3IubmFtZSwgY2FyZENvbnN0cnVjdG9yKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyBzdGF0aWMgZ21fb25Ub2dnbGUgKGRhdGEpe1xuICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggJ2dtX29uVG9nZ2xlJylcbiAgLy8gfVxufVxuXG5leHBvcnQgY2xhc3MgRW5oYW5jZWRDaGF0Q2FyZCB7XG4gIC8vIHN0YXRpYyByZWdpc3RlciAoY2FyZENvbnN0cnVjdG9yKSB7XG4gIC8vICAgRW5oYW5jZWRDaGF0Q2FyZExpYi5yZWdpc3RlcihjYXJkQ29uc3RydWN0b3IpXG4gIC8vIH1cblxuICBjb25zdHJ1Y3RvciAoZGF0YSA9IHt9LCBvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmluaXRpYWxpemUoZGF0YSlcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9uc1xuICB9XG5cbiAgaW5pdGlhbGl6ZSAoZGF0YSkge1xuICAgIHRoaXMuX2RhdGEgPSBkYXRhXG4gICAgaWYgKCF0aGlzLl9kYXRhLmZsYWdzKSB0aGlzLl9kYXRhLmZsYWdzID0ge31cbiAgfVxuXG4gIGdldCBvcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3QodGhpcy5jb25zdHJ1Y3Rvci5kZWZhdWx0T3B0aW9ucywgdGhpcy5fb3B0aW9ucylcbiAgfVxuXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy50ZW1wbGF0ZVxuICB9XG5cbiAgZ2V0IGNzc0NsYXNzZXMgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY2xhc3Nlcz8uam9pbignICcpXG4gIH1cblxuICBnZXQgc3BlYWtlciAoKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5vb2MpIHJldHVybiBnYW1lLnVzZXJcbiAgICBpZiAoXG4gICAgICB0aGlzLm9wdGlvbnMuc3BlYWtlciAmJlxuICAgICAgQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlckFjdG9yKHRoaXMub3B0aW9ucy5zcGVha2VyKVxuICAgICkge1xuICAgICAgcmV0dXJuIENoYXRNZXNzYWdlLmdldFNwZWFrZXJBY3Rvcih0aGlzLm9wdGlvbnMuc3BlYWtlcilcbiAgICB9XG4gICAgcmV0dXJuIGdhbWUudXNlclxuICB9XG5cbiAgZ2V0RGF0YSAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNhcmQ6IHRoaXMsXG4gICAgICBmbGFnczogdGhpcy5mbGFncyxcbiAgICAgIGRhdGE6IHRoaXMudG9PYmplY3QoKSxcbiAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucyxcbiAgICAgIGNzczogdGhpcy5jc3NDbGFzc2VzLFxuICAgICAgdXNlcjogZ2FtZS51c2VyLFxuICAgICAgc3BlYWtlcjogdGhpcy5zcGVha2VyXG4gICAgfVxuICB9XG5cbiAgdG9PYmplY3QgKCkge1xuICAgIGlmICghdGhpcy5fZGF0YSkgcmV0dXJuXG4gICAgY29uc3QgZGF0YSA9IHt9XG4gICAgZm9yIChjb25zdCBrIG9mIE9iamVjdC5rZXlzKHRoaXMuX2RhdGEpKSB7XG4gICAgICBjb25zdCB2ID0gdGhpcy5fZGF0YVtrXVxuICAgICAgaWYgKHYgaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgZGF0YVtrXSA9IHYudG9PYmplY3QgPyB2LnRvT2JqZWN0KCkgOiBkZWVwQ2xvbmUodilcbiAgICAgIH0gZWxzZSBkYXRhW2tdID0gdlxuICAgIH1cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgYXN5bmMgdG9NZXNzYWdlIChvcHRpb25uYWxDaGF0RGF0YSA9IHt9KSB7XG4gICAgLy8gTWFwIGVjYyBjYXJkIHR5cGUgaWYgbm90IHJlZ2lzdGVyZWQgYWxyZWFkeVxuICAgIC8vIHRoaXMucmVnaXN0ZXJFQ0NDbGFzcygpXG5cbiAgICAvLyBQdWJsaXNoIGJ5IGN1cnJlbnQgdXNlciBieSBkZWZhdWx0IHVubGVzcyBvcHRpb25zLkdNY2hhdENhcmRcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcy5nZXREYXRhKCkpXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJChodG1sKVswXVxuICAgIGlmICh0aGlzLm9wdGlvbnMuYXR0YWNoT2JqZWN0KSB7XG4gICAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUodGhpcy5vYmplY3REYXRhU3RyaW5nKVxuICAgIH1cbiAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5lY2NDbGFzcyA9IHRoaXMuY29uc3RydWN0b3IubmFtZVxuICAgIGh0bWxDYXJkRWxlbWVudC5jbGFzc0xpc3QuYWRkKC4uLnRoaXMub3B0aW9ucy5jbGFzc2VzKVxuXG4gICAgY29uc3Qgc3BlYWtlciA9XG4gICAgICB0aGlzLm9wdGlvbnMuc3BlYWtlciAmJiAhdGhpcy5vcHRpb25zLm9vY1xuICAgICAgICA/IENoYXRNZXNzYWdlLmdldFNwZWFrZXIodGhpcy5vcHRpb25zLnNwZWFrZXIpXG4gICAgICAgIDoge31cblxuICAgIGNvbnN0IGNoYXREYXRhID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChcbiAgICAgIHtcbiAgICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgICBzcGVha2VyOiBzcGVha2VyLFxuICAgICAgICBmbGF2b3I6IGdhbWUuaTE4bi5sb2NhbGl6ZSh0aGlzLm9wdGlvbnMudGl0bGUpLFxuICAgICAgICBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgICB9LFxuICAgICAgb3B0aW9ubmFsQ2hhdERhdGFcbiAgICApXG5cbiAgICBpZiAoWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXModGhpcy5yb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ3NlbGZyb2xsJykgY2hhdERhdGEud2hpc3BlciA9IFtnYW1lLnVzZXIuaWRdXG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSkudGhlbihtc2cgPT4ge1xuICAgICAgcmV0dXJuIG1zZ1xuICAgIH0pXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAob3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKG9wdGlvbnMuY29tcHV0ZSkgdGhpcy5jb21wdXRlKClcbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSB7XG4gICAgICB0aGlzLnRvTWVzc2FnZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzLmdldERhdGEoKSlcbiAgICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICAgIC8vIEF0dGFjaCB0aGUgc2FuQ2hlY2tDYXJkIG9iamVjdCB0byB0aGUgbWVzc2FnZS5cbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLm9iamVjdERhdGFTdHJpbmcpXG4gICAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5lY2NDbGFzcyA9IHRoaXMuY29uc3RydWN0b3IubmFtZVxuICAgICAgaHRtbENhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4udGhpcy5vcHRpb25zLmNsYXNzZXMpXG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgbWVzc2FnZS5cbiAgICAgIGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIuc29ja2V0LmV4ZWN1dGVBc0dNKFxuICAgICAgICAndXBkYXRlTWVzc2FnZScsXG4gICAgICAgIHRoaXMubWVzc2FnZUlkLFxuICAgICAgICBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgICApXG4gICAgICAvLyBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgICAvLyBjb25zdCBtc2cgPSBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoeyAvL0Rpc3BhdGNoIHJlcXVlc3QgYnkgc29ja2V0XG4gICAgICAvLyBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MIC8vRGlzcGF0Y2ggcmVxdWVzdCBieSBzb2NrZXRcbiAgICAgIC8vIH0pIC8vRGlzcGF0Y2ggcmVxdWVzdCBieSBzb2NrZXRcbiAgICAgIC8vIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKSAvL0Rpc3BhdGNoIHJlcXVlc3QgYnkgc29ja2V0XG4gICAgICAvLyByZXR1cm4gbXNnIC8vRGlzcGF0Y2ggcmVxdWVzdCBieSBzb2NrZXRcbiAgICB9XG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIC8vIGh0bWwub24oXG4gICAgLy8gICAnY2xpY2snLFxuICAgIC8vICAgYC4ke0VDQ19DTEFTU30gLmVjYy1yYWRpby1zd2l0Y2hgLFxuICAgIC8vICAgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKVxuICAgIC8vIClcbiAgICBodG1sLm9uKCdjaGFuZ2UnLCAnaW5wdXQsc2VsZWN0LHRleHRhcmVhJywgdGhpcy5fb25DaGFuZ2UuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdjbGljaycsIGAuJHtFQ0NfQ0xBU1N9IC5lY2Mtc3dpdGNoYCwgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdjbGljaycsIGAuJHtFQ0NfQ0xBU1N9IC5zdWJtaXRgLCB0aGlzLl9vblN1Ym1pdC5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2ZvY3Vzb3V0JywgYC4ke0VDQ19DTEFTU30gaW5wdXRgLCB0aGlzLl9vbkNoYW5nZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2NsaWNrJywgYC4ke0VDQ19DTEFTU30gYnV0dG9uYCwgdGhpcy5fb25CdXR0b24uYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdrZXlkb3duJywgYC4ke0VDQ19DTEFTU30gZm9ybWAsIHRoaXMuX29uS2V5LmJpbmQodGhpcykpXG5cbiAgICAvLyBjb25zdCB2aXNpID0gaHRtbC5maW5kKCdbZGF0YS1lY2MtdmlzaWJpbGl0eV0nKVxuICAgIC8vIGZvciAobGV0IGkgPSAwOyBpIDwgdmlzaS5sZW5ndGg7IGkrKykge1xuICAgIC8vICAgY29uc3QgZWwgPSB2aXNpW2ldO1xuICAgIC8vICAgYXdhaXQgdGhpcy5zZXRWaXNpYmlsaXR5KGVsKVxuXG4gICAgLy8gfVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ1tkYXRhLWVjYy12aXNpYmlsaXR5XScpXG4gICAgICAuZWFjaChhc3luYyAoaSwgZWwpID0+IGF3YWl0IHRoaXMuc2V0VmlzaWJpbGl0eShlbCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ1tkYXRhLWVjYy1wZXJtaXNzaW9uc10nKVxuICAgICAgLmVhY2goYXN5bmMgKGksIGVsKSA9PiBhd2FpdCB0aGlzLnNldFBlcm1pc3Npb24oZWwpKVxuICAgIGh0bWwuZmluZChgLiR7RUNDX0NMQVNTfSAuZWNjLXN3aXRjaGApLmVhY2goKGksIGVsKSA9PiB0aGlzLnNldFN0YXRlKGVsKSlcbiAgICBodG1sXG4gICAgICAuZmluZChgLiR7RUNDX0NMQVNTfSBpbnB1dFt0eXBlPVwicmFkaW9cIl1gKVxuICAgICAgLmVhY2goKGksIGVsKSA9PiB0aGlzLnNldFJhZGlvU3RhdGUoZWwpKVxuICAgIC8vIGh0bWwuZmluZChgLiR7RUNDX0NMQVNTfSAuZWNjLXJhZGlvLXN3aXRjaGApLmVhY2goIChpLCBlbCkgPT4gdGhpcy5zZXRTdGF0ZShlbCkpXG4gIH1cblxuICBzZXRTdGF0ZSAoZWxlbWVudCkge1xuICAgIGlmICghZWxlbWVudCB8fCAhZWxlbWVudC5kYXRhc2V0LmZsYWcpIHJldHVyblxuICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcbiAgICAgIHRoaXMuZmxhZ3NbZWxlbWVudC5kYXRhc2V0LmZsYWddID8gU1RBVEUuT04gOiBTVEFURS5PRkZcbiAgICApXG4gIH1cblxuICBzZXRSYWRpb1N0YXRlIChlbGVtZW50KSB7XG4gICAgaWYgKCFlbGVtZW50IHx8ICFlbGVtZW50Lm5hbWUpIHJldHVyblxuICAgIGNvbnN0IHNwbGl0ZWQgPSBlbGVtZW50Lm5hbWUuc3BsaXQoJy4nKVxuICAgIGlmIChzcGxpdGVkWzBdLnRvTG93ZXJDYXNlKCkgIT09ICdkYXRhJykgcmV0dXJuXG4gICAgaWYgKHRoaXMuX2RhdGEgJiYgdW5kZWZpbmVkICE9PSB0aGlzLl9kYXRhW3NwbGl0ZWRbMV1dKSB7XG4gICAgICBpZiAodGhpcy5fZGF0YVtzcGxpdGVkWzFdXSA9PT0gZWxlbWVudC52YWx1ZSkge1xuICAgICAgICBlbGVtZW50LmNoZWNrZWQgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc2V0VmlzaWJpbGl0eSAoZWxlbWVudCkge1xuICAgIGlmICghZWxlbWVudC5kYXRhc2V0LmVjY1Zpc2liaWxpdHkpIHJldHVyblxuICAgIGNvbnN0IGNhbllvdVNlZSA9IGF3YWl0IHRoaXMuaGFzUGVybShlbGVtZW50LmRhdGFzZXQuZWNjVmlzaWJpbGl0eSwgdHJ1ZSlcbiAgICBpZiAoIWNhbllvdVNlZSkgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gIH1cblxuICBhc3luYyBzZXRQZXJtaXNzaW9uIChlbGVtZW50KSB7XG4gICAgaWYgKCFlbGVtZW50LmRhdGFzZXQuZWNjUGVybWlzc2lvbnMpIHJldHVyblxuICAgIGNvbnN0IGNhbllvdU1vZCA9IGF3YWl0IHRoaXMuaGFzUGVybShlbGVtZW50LmRhdGFzZXQuZWNjUGVybWlzc2lvbnMpXG4gICAgaWYgKCFjYW5Zb3VNb2QpIHtcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZWNjLXJlc3RyaWN0ZWQnKVxuICAgICAgaWYgKCQoZWxlbWVudCkuaXMoJ2lucHV0JykpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQudHlwZSA9PT0gJ3JhbmdlJykgJChlbGVtZW50KS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpXG4gICAgICAgIGVsc2UgJChlbGVtZW50KS5hdHRyKCdyZWFkb25seScsIHRydWUpXG4gICAgICB9XG4gICAgICBpZiAoJChlbGVtZW50KS5pcygnc2VsZWN0JykpICQoZWxlbWVudCkuYXR0cignZGlzYWJsZWQnLCB0cnVlKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgY3VycmVudCB1c2VyIGFzIHBlcm1pc3Npb24gYWdhaW5zdCBhIHN0cmluZyBvZiBhbGxvd2VkIHBlcnNvbnMuXG4gICAqIElmIHRoZSBzdHJpbmcgaXMgZW1wdHkgcGVybWlzc2lvbiBhcmUgYWxsIGdyYW50ZWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlc3RyaWN0ZWRUbyAgIEEgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIHNldCBvZiBwbGF5ZXIgYWxsb3dlZC4gVmFsdWUgY2FuIGJlIG93bmVyLCBnbSwgcGxheWVycywgdXVpZCBzZXBhcmF0ZWQgYnkgc3BhY2VcbiAgICogQHBhcmFtIHtib29sZWFufSB2aXNpb24gICAgICAgIGlmIHRydWUgZ20gd2lsbCBiZSBjb25zaWRlcmVkIGZvciBwZXJtaXNzaW9ucy4gZmFsc2UgPSBnbSBoYXMgYWx3YXlzIHJpZ2h0LiB0cnVlIEdNIHBlcm1pc3Npb24gd2lsbCBiZSBjaGVja2VkXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBhc3luYyBoYXNQZXJtIChyZXN0cmljdGVkVG8sIHZpc2lvbiA9IGZhbHNlKSB7XG4gICAgaWYgKCFyZXN0cmljdGVkVG8ubGVuZ3RoKSByZXR1cm4gdHJ1ZVxuICAgIGxldCBwZXJtaXNzaW9uc0FycmF5ID0gcmVzdHJpY3RlZFRvLnNwbGl0KCcgJylcbiAgICBjb25zdCB3aGl0ZUxpc3QgPSAhcGVybWlzc2lvbnNBcnJheS5pbmNsdWRlcyhQRVJNSVNTSU9OX1RZUEUuQkxBQ0tMSVNUKVxuICAgIGlmICghd2hpdGVMaXN0KSB7XG4gICAgICBwZXJtaXNzaW9uc0FycmF5ID0gcGVybWlzc2lvbnNBcnJheS5maWx0ZXIoXG4gICAgICAgIGUgPT4gZSAhPT0gUEVSTUlTU0lPTl9UWVBFLkJMQUNLTElTVFxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGlmICghdmlzaW9uKSByZXR1cm4gdHJ1ZSAvLyBHTSBjYW4gYWx3YXlzIG1vZGlmeSBldmVyeXRoaW5nICEgTmFoXG4gICAgICBpZiAocGVybWlzc2lvbnNBcnJheS5pbmNsdWRlcyhQRVJNSVNTSU9OX1RZUEUuR00pKSB7XG4gICAgICAgIHJldHVybiB0cnVlICYmIHdoaXRlTGlzdFxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlIHx8ICF3aGl0ZUxpc3QgLy8gSWYgcGFzcyB0aGUgZmlsdGVyIHJldHVybiBmYWxzZSB1bmxlc3MgaXQncyBhIGJsYWNrbGlzdFxuICAgIH0gZWxzZSB7XG4gICAgICBwZXJtaXNzaW9uc0FycmF5ID0gcGVybWlzc2lvbnNBcnJheS5maWx0ZXIoZSA9PiBlICE9PSBQRVJNSVNTSU9OX1RZUEUuR00pXG4gICAgfVxuXG4gICAgaWYgKHBlcm1pc3Npb25zQXJyYXkuaW5jbHVkZXMoUEVSTUlTU0lPTl9UWVBFLlVTRVIpKSB7XG4gICAgICBpZiAodGhpcy5tZXNzYWdlLmlzQXV0aG9yKSByZXR1cm4gdHJ1ZSAmJiB3aGl0ZUxpc3QgLy8gaXNBdXRob3IgdnMgdXNlci5pc093bmVyID9cbiAgICAgIHBlcm1pc3Npb25zQXJyYXkgPSBwZXJtaXNzaW9uc0FycmF5LmZpbHRlcihcbiAgICAgICAgZSA9PiBlICE9PSBQRVJNSVNTSU9OX1RZUEUuVVNFUlxuICAgICAgKVxuICAgIH1cblxuICAgIGlmIChwZXJtaXNzaW9uc0FycmF5LmluY2x1ZGVzKFBFUk1JU1NJT05fVFlQRS5TUEVBS0VSKSkge1xuICAgICAgY29uc3Qgc3BlYWtlciA9IHRoaXMubWVzc2FnZS5kYXRhLnNwZWFrZXJcbiAgICAgIGlmIChzcGVha2VyLnRva2VuICYmIHNwZWFrZXIuc2NlbmUpIHtcbiAgICAgICAgY29uc3QgYWN0b3IgPSBhd2FpdCBmcm9tVXVpZChcbiAgICAgICAgICBgU2NlbmUuJHtzcGVha2VyLnNjZW5lfS5Ub2tlbi4ke3NwZWFrZXIudG9rZW59YFxuICAgICAgICApXG4gICAgICAgIGlmIChhY3Rvcikge1xuICAgICAgICAgIGlmIChhY3Rvci5pc093bmVyKSByZXR1cm4gdHJ1ZSAmJiB3aGl0ZUxpc3RcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzcGVha2VyLmFjdG9yKSB7XG4gICAgICAgIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHNwZWFrZXIuYWN0b3IpXG4gICAgICAgIGlmIChhY3Rvcikge1xuICAgICAgICAgIGlmIChhY3Rvci5pc093bmVyKSByZXR1cm4gdHJ1ZSAmJiB3aGl0ZUxpc3RcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gZWxzZSBpZiAoc3BlYWtlci51c2VyKSB7XG4gICAgICAvLyAgIGlmIChnYW1lLnVzZXIuaWQgPT0gc3BlYWtlci51c2VyKSByZXR1cm4gdHJ1ZSAmJiB3aGl0ZUxpc3RcbiAgICAgIC8vIH1cbiAgICAgIHBlcm1pc3Npb25zQXJyYXkgPSBwZXJtaXNzaW9uc0FycmF5LmZpbHRlcihcbiAgICAgICAgZSA9PiBlICE9PSBQRVJNSVNTSU9OX1RZUEUuU1BFQUtFUlxuICAgICAgKVxuICAgIH1cbiAgICAvLyBBbGwgZmlsdGVyIHBhc3NlZCwgYXJyYXkgc2hvdWxkIGNvbnRhaW5zIG9ubHkgdXVpZHMgb3IgYWN0b3IvdG9rZW4gaWRzXG4gICAgaWYgKHBlcm1pc3Npb25zQXJyYXkubGVuZ3RoKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oJ0FycmF5IHBlcm1pc3Npb24gaXMgbm90IGVtcHR5ICEnKVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2UgfHwgIXdoaXRlTGlzdCAvLyBJZiBwYXNzIHRoZSBmaWx0ZXIgcmV0dXJuIGZhbHNlIHVubGVzcyBpdCdzIGEgYmxhY2tsaXN0XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgYmluZExpc3RlbmVycyAoaHRtbCkge1xuICAgIGNvbnN0IGh0bWxNZXNzYWdlRWxlbWVudCA9IGh0bWxbMF1cbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSBodG1sTWVzc2FnZUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7RUNDX0NMQVNTfWApXG4gICAgaWYgKCFodG1sQ2FyZEVsZW1lbnQpIHJldHVyblxuXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IEVuaGFuY2VkQ2hhdENhcmQuZnJvbUhUTUxDYXJkRWxlbWVudChodG1sQ2FyZEVsZW1lbnQpXG4gICAgY2FyZC5hc3NpZ25PYmplY3QoKVxuICAgIGNhcmQuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgfVxuXG4gIGdldCBmbGFncyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGEuZmxhZ3NcbiAgfVxuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0byByZWFzc2lnbiBvYmplY3QgZnJvbSB0aGUgZGF0YSBzdHJ1Y3R1cmUuXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBhc3NpZ25PYmplY3QgKCkge31cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudCB3aWxsIGNoZWNrIGZvciBhbiBhY3Rpb24gKGRhdGEtYWN0aW9uKVxuICAgKiBpZiBhIG1ldGhvZCB3aXRoIHRoYXQgbmFtZSBleGlzdCBpdCB3aWxsIGJlIHRyaWdnZXJlZC5cbiAgICovXG4gIF9vbkJ1dHRvbiAoZXZlbnQpIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgLy8gYnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScgLy9Bdm9pZCBtdWx0aXBsZSBwdXNoXG4gICAgY29uc3QgYWN0aW9uID0gYnV0dG9uLmRhdGFzZXQuYWN0aW9uXG4gICAgaWYgKCFhY3Rpb24pIHtcbiAgICAgIGNvbnNvbGUud2Fybignbm8gYWN0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGJ1dHRvbicpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKCF0aGlzW2FjdGlvbl0pIHtcbiAgICAgIGNvbnNvbGUud2Fybihgbm8gJHthY3Rpb259IGFjdGlvbiBmb3VuZCBmb3IgdGhpcyBjYXJkYClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodGhpc1thY3Rpb25dKSB0aGlzW2FjdGlvbl0oeyBldmVudDogZXZlbnQsIHVwZGF0ZTogdHJ1ZSB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZXZlbnRcbiAgICogQHJldHVybnMgZmFsc2UgaWYga2V5IGlzIGVudGVyIHRvIGF2b2lkIGdsb2JhbCBzdWJtaXNzaW9uXG4gICAqL1xuICBfb25LZXkgKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykgdGhpcy5fb25TdWJtaXQoZXZlbnQpXG4gICAgcmV0dXJuIGV2ZW50LmtleSAhPT0gJ0VudGVyJ1xuICB9XG5cbiAgX29uQ2hhbmdlIChldmVudCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMuc3VibWl0T25DaGFuZ2UpIHtcbiAgICAgIHJldHVybiB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgICB9XG4gIH1cblxuICBfb25TdWJtaXQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGNhcmQgPSB0YXJnZXQuY2xvc2VzdChgLiR7RUNDX0NMQVNTfWApXG4gICAgaWYgKCFjYXJkKSByZXR1cm5cbiAgICBjb25zdCB1cGRhdGVzID0gdGhpcy5fdXBkYXRlKGNhcmQpXG4gICAgaWYgKHVwZGF0ZXMpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIHRoZSBmb3JtIGZyb20gdGhlIGNhcmQgYW5kIHVwZGF0ZSB0aGUgZGF0YSBzdHJ1Y3R1cmVcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY2FyZFxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgX3VwZGF0ZSAoY2FyZCkge1xuICAgIGNvbnN0IGZvcm1zID0gY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCdmb3JtJylcbiAgICBsZXQgdXBkYXRlcyA9IGZhbHNlXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3Jtcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZm9ybSA9IGZvcm1zW2ldXG4gICAgICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YUV4dGVuZGVkKGZvcm0pXG4gICAgICBsZXQgZGF0YSA9IGZkLnRvT2JqZWN0KClcbiAgICAgIGRhdGEgPSBmb3VuZHJ5LnV0aWxzLmRpZmZPYmplY3QoXG4gICAgICAgIHRoaXMuX2RhdGEsXG4gICAgICAgIGZvdW5kcnkudXRpbHMuZXhwYW5kT2JqZWN0KGRhdGEpXG4gICAgICApXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmRhdGEpKSB7XG4gICAgICAgIHRoaXMuX2RhdGFba2V5XSA9IHZhbHVlXG4gICAgICAgIHVwZGF0ZXMgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVzXG4gIH1cblxuICBnZXQgbWVzc2FnZSAoKSB7XG4gICAgaWYgKHRoaXMuX21lc3NhZ2UpIHJldHVybiB0aGlzLl9tZXNzYWdlXG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMuX21lc3NhZ2VJZClcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBzZXQgbWVzc2FnZSAoeCkge1xuICAgIHRoaXMuX21lc3NhZ2UgPSB4XG4gIH1cblxuICBnZXQgbWVzc2FnZUlkICgpIHtcbiAgICBpZiAodGhpcy5fbWVzc2FnZUlkKSByZXR1cm4gdGhpcy5fbWVzc2FnZUlkXG4gICAgaWYgKHRoaXMuX21lc3NhZ2UpIHJldHVybiB0aGlzLl9tZXNzYWdlLmlkXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IG1lc3NhZ2VJZCAoeCkge1xuICAgIHRoaXMuX21lc3NhZ2VJZCA9IHhcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhdHRhY2hPYmplY3Q6IHRydWUsXG4gICAgICBjbGFzc2VzOiBbRUNDX0NMQVNTXSxcbiAgICAgIGV4Y2x1ZGU6IFtdLFxuICAgICAgZXhjbHVkZVN0YXJ0V2l0aDogJ18nLFxuICAgICAgc3VibWl0T25DaGFuZ2U6IHRydWUsXG4gICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKCksXG4gICAgICBvb2M6IGZhbHNlIC8vICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMub29jPWZhbHNlXSAgVXNlIHRoZSBzcGVha2VyL2dldHNwZWFrZXIuIGlmIHRydWUgdXNlIHRoZSB1c2VyIGluc3RlYWRcbiAgICB9XG4gIH1cblxuICAvLyBnZXQgb2JqZWN0RGF0YSAoKSB7XG4gIC8vICAgcmV0dXJuIEpTT04ucGFyc2UodGhpcy5vYmplY3REYXRhU3RyaW5nKVxuICAvLyB9XG5cbiAgZ2V0IG9iamVjdERhdGFTdHJpbmcgKCkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLl9kYXRhLCAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmV4Y2x1ZGU/LmluY2x1ZGVzKGtleSkpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCh0aGlzLm9wdGlvbnMuZXhjbHVkZVN0YXJ0V2l0aCkpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIHJldHVybiB2YWx1ZVxuICAgIH0pXG4gIH1cblxuICBnZXQgcm9sbE1vZGUgKCkge1xuICAgIGlmICghdGhpcy5fcm9sbE1vZGUpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHJldHVybiB0aGlzLl9yb2xsTW9kZVxuICB9XG5cbiAgc2V0IHJvbGxNb2RlICh4KSB7XG4gICAgaWYgKHggPT09IGZhbHNlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICB0aGlzLl9yb2xsTW9kZSA9IHhcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21NZXNzYWdlKG1lc3NhZ2UpXG4gICAgY2FyZC5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21NZXNzYWdlIChtZXNzYWdlKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSAkKG1lc3NhZ2UuZGF0YS5jb250ZW50KVswXVxuICAgIGlmICghY2FyZEVsZW1lbnQpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tSFRNTENhcmRFbGVtZW50KGNhcmRFbGVtZW50KVxuICAgIGNhcmQubWVzc2FnZSA9IG1lc3NhZ2VcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21IVE1MQ2FyZEVsZW1lbnQgKGh0bW1sQ2FyZCkge1xuICAgIGlmICghaHRtbWxDYXJkKSByZXR1cm5cbiAgICBpZiAoIWh0bW1sQ2FyZC5kYXRhc2V0LmVjY0NsYXNzKSByZXR1cm5cbiAgICBjb25zdCBjYXJkRGF0YSA9IEpTT04ucGFyc2UodW5lc2NhcGUoaHRtbWxDYXJkLmRhdGFzZXQub2JqZWN0KSlcbiAgICBjb25zdCBtZXNzYWdlID0gaHRtbWxDYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJylcbiAgICBjb25zdCBtZXNzYWdlSWQgPSBtZXNzYWdlPy5kYXRhc2V0Py5tZXNzYWdlSWRcblxuICAgIHJldHVybiBhd2FpdCB0aGlzLmZyb21EYXRhKGNhcmREYXRhLCBodG1tbENhcmQuZGF0YXNldC5lY2NDbGFzcywgbWVzc2FnZUlkKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21EYXRhIChkYXRhLCBjYXJkQ2xhc3NOYW1lLCBtZXNzYWdlSWQgPSBudWxsKSB7XG4gICAgY29uc3QgQ2FyZENsYXNzID0gZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYi50eXBlcy5nZXQoY2FyZENsYXNzTmFtZSlcblxuICAgIGlmICghQ2FyZENsYXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBVbmtub3duIGNoYXQgY2FyZCB0eXBlOiAke2NhcmRDbGFzc05hbWV9YClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZENsYXNzKGRhdGEpXG4gICAgaWYgKG1lc3NhZ2VJZCkgY2FyZC5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcbiAgICBhd2FpdCBjYXJkLmFzc2lnbk9iamVjdCgpXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHNldEZsYWcgKGZsYWdOYW1lKSB7XG4gICAgaWYgKCFmbGFnTmFtZSAmJiAhKCQudHlwZShmbGFnTmFtZSkgPT09ICdzdHJpbmcnKSkgcmV0dXJuXG4gICAgdGhpcy5fZGF0YS5mbGFnc1tmbGFnTmFtZV0gPSB0cnVlXG4gIH1cblxuICB1bnNldEZsYWcgKGZsYWdOYW1lKSB7XG4gICAgaWYgKCFmbGFnTmFtZSAmJiAhKCQudHlwZShmbGFnTmFtZSkgPT09ICdzdHJpbmcnKSkgcmV0dXJuXG4gICAgdGhpcy5fZGF0YS5mbGFnc1tmbGFnTmFtZV0gPSBmYWxzZVxuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcbiAgICB0aGlzLmZsYWdzW2ZsYWdOYW1lXSA9ICF0aGlzLmZsYWdzW2ZsYWdOYW1lXVxuICB9XG5cbiAgYXN5bmMgX29uVG9nZ2xlIChldmVudCkge1xuICAgIC8vIGNvbnN0IGFuc3dlciA9IGF3YWl0IEVuaGFuY2VkQ2hhdENhcmRMaWIuc29ja2V0LmV4ZWN1dGVBc0dNKCdnbV9vblRvZ2dsZScsIHtcbiAgICAvLyAgIGV2ZW50OiBldmVudCxcbiAgICAvLyAgIGNhcmQ6IHRoaXNcbiAgICAvLyB9KVxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBpZiAoJ2FjdGlvbicgaW4gdGFyZ2V0LmRhdGFzZXQpIHJldHVybiB0aGlzLl9vbkJ1dHRvbihldmVudClcbiAgICBpZiAoXG4gICAgICB0YXJnZXQgJiZcbiAgICAgIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2dtLXNlbGVjdC1vbmx5JykgJiZcbiAgICAgICFnYW1lLnVzZXIuaXNHTVxuICAgICkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGZsYWcgPSB0YXJnZXQuZGF0YXNldC5mbGFnXG4gICAgaWYgKCFmbGFnKSByZXR1cm5cbiAgICBjb25zdCB0b2dnbGUgPSB0YXJnZXQuY2xvc2VzdCgnLmVjYy1yYWRpbycpXG4gICAgaWYgKCF0b2dnbGUpIHtcbiAgICAgIHRoaXMudG9nZ2xlRmxhZyhmbGFnKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBidXR0b25zID0gdG9nZ2xlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lY2Mtc3dpdGNoJylcbiAgICAgIGZvciAoY29uc3QgYiBvZiBidXR0b25zKSB7XG4gICAgICAgIHRoaXMudW5zZXRGbGFnKGIuZGF0YXNldC5mbGFnKVxuICAgICAgfVxuICAgICAgdGhpcy5zZXRGbGFnKGZsYWcpXG4gICAgfVxuICAgIGNvbnN0IGNhcmQgPSB0YXJnZXQuY2xvc2VzdChgLiR7RUNDX0NMQVNTfWApXG4gICAgaWYgKHRoaXMub3B0aW9ucy5zdWJtaXRPbkNoYW5nZSkge1xuICAgICAgaWYgKGNhcmQpIHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgbWVyZ2VPYmplY3QgKi9cbi8vIFRPIEJFIFJFTU9WRUQgRk9SIFBST0RcbmltcG9ydCB7IEVuaGFuY2VkQ2hhdENhcmQgfSBmcm9tICcuLi8uLi9jb21tb24vY2hhdGNhcmRsaWIvc3JjL2NoYXRjYXJkbGliLmpzJ1xuZXhwb3J0IGNsYXNzIFRlc3RDYXJkIGV4dGVuZHMgRW5oYW5jZWRDaGF0Q2FyZCB7XG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnNcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2FyZHMvdGVzdC5odG1sJ1xuICAgIH0pXG4gIH1cblxuICBnZXREYXRhICgpIHtcbiAgICBjb25zdCBkYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG4gICAgZGF0YS5teVNlbGVjdE9wdGlvbnMgPSB7XG4gICAgICAwOiAnb3B0aW9uIDEnLFxuICAgICAgMTogJ29wdGlvbiAyJ1xuICAgIH1cblxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICAvLyBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAvLyAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gIC8vIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBBY3RvclNoZWV0LCBDaGF0TWVzc2FnZSwgQ09OU1QsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIGdldFByb3BlcnR5LCBIb29rcywgbWVyZ2VPYmplY3QsIFJvbGwsIFRleHRFZGl0b3IsIHVpICovXG5cbmltcG9ydCB7IFJvbGxEaWFsb2cgfSBmcm9tICcuLi8uLi9hcHBzL3JvbGwtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXRNZXNzYWdlIH0gZnJvbSAnLi4vLi4vYXBwcy9jb2M3LWNoYXQtbWVzc2FnZS5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vLi4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IENvQzdNZWxlZUluaXRpYXRvciB9IGZyb20gJy4uLy4uL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5qcydcbmltcG9ydCB7IENvQzdSYW5nZUluaXRpYXRvciB9IGZyb20gJy4uLy4uL2NoYXQvcmFuZ2Vjb21iYXQuanMnXG4vLyBpbXBvcnQgeyBDb0M3RGFtYWdlUm9sbCB9IGZyb20gJy4uLy4uL2NoYXQvZGFtYWdlY2FyZHMuanMnO1xuaW1wb3J0IHsgQ29DN0NvbkNoZWNrIH0gZnJvbSAnLi4vLi4vY2hhdC9jb25jaGVjay5qcydcbmltcG9ydCB7IGlzQ3RybEtleSB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN1BhcnNlciB9IGZyb20gJy4uLy4uL2FwcHMvcGFyc2VyLmpzJ1xuaW1wb3J0IHsgRGFtYWdlQ2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvZGFtYWdlLmpzJ1xuaW1wb3J0IHsgQ29DN0xpbmtDcmVhdGlvbkRpYWxvZyB9IGZyb20gJy4uLy4uL2FwcHMvbGluay1jcmVhdGlvbi1kaWFsb2cuanMnXG5pbXBvcnQgeyBUZXN0Q2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvdGVzdC5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEFjdG9yU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdBY3RvclNoZWV0IGV4dGVuZHMgQWN0b3JTaGVldCB7XG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIC8qKiBNT0RJRjogMC44LnggKiovXG4gICAgY29uc3QgYWN0b3JEYXRhID0gdGhpcy5hY3Rvci5kYXRhLnRvT2JqZWN0KGZhbHNlKVxuICAgIGRhdGEuZGF0YSA9IGFjdG9yRGF0YS5kYXRhIC8vIE1vZGlmIDAuOC54IDogZGF0YS5kYXRhXG4gICAgZGF0YS5lZGl0YWJsZSA9IHRoaXMuaXNFZGl0YWJsZSAvLyBNT0RJRiAwLjgueCA6IGVkaXRhYmxlIHJlbW92ZWRcbiAgICAvKioqKioqKioqKioqKioqKioqL1xuXG4gICAgZGF0YS5pc1Rva2VuID0gdGhpcy5hY3Rvci5pc1Rva2VuXG4gICAgZGF0YS5pdGVtc0J5VHlwZSA9IHt9XG4gICAgZGF0YS5za2lsbHMgPSB7fVxuICAgIGRhdGEuY29tYmF0U2tpbGxzID0ge31cbiAgICBkYXRhLndlYXBvbnMgPSB7fVxuICAgIGRhdGEucmFuZ2VXcG4gPSBbXVxuICAgIGRhdGEubWVsZWVXcG4gPSBbXVxuICAgIGRhdGEuYWN0b3JGbGFncyA9IHt9XG5cbiAgICBkYXRhLnBlcm1pc3Npb25MaW1pdGVkID1cbiAgICAgICFnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgKHRoaXMuYWN0b3IuZGF0YS5wZXJtaXNzaW9uW2dhbWUudXNlci5pZF0gPz9cbiAgICAgICAgdGhpcy5hY3Rvci5kYXRhLnBlcm1pc3Npb24uZGVmYXVsdCkgPT09XG4gICAgICAgIChDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTIHx8IENPTlNULkVOVElUWV9QRVJNSVNTSU9OUykuTElNSVRFRFxuXG4gICAgZGF0YS5pc0dNID0gZ2FtZS51c2VyLmlzR01cbiAgICBkYXRhLmFsb3dVbmxvY2sgPVxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncGxheWVyVW5sb2NrU2hlZXRNb2RlJykgPT09ICdhbHdheXMnIHx8XG4gICAgICBnYW1lLnVzZXIuaXNHTSB8fFxuICAgICAgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3BsYXllclVubG9ja1NoZWV0TW9kZScpID09PSAnY3JlYXRpb24nICYmXG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnKSlcbiAgICBpZiAoXG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwbGF5ZXJVbmxvY2tTaGVldE1vZGUnKSA9PT0gJ2NyZWF0aW9uJyAmJlxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcpXG4gICAgKSB7XG4gICAgICBkYXRhWydkYXRhLmZsYWdzLmxvY2tlZCddID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoIVsndmVoaWNsZSddLmluY2x1ZGVzKHRoaXMuYWN0b3IuZGF0YS50eXBlKSkge1xuICAgICAgaWYgKCFkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MgPSB7XG4gICAgICAgICAgc3RyOiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLlNUUicsXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5TdHJlbmd0aCcsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjb246IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuQ09OJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkNvbnN0aXR1dGlvbicsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzaXo6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuU0laJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLlNpemUnLFxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGV4OiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLkRFWCcsXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5EZXh0ZXJpdHknLFxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYXBwOiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLkFQUCcsXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5BcHBlYXJhbmNlJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGludDoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5JTlQnLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuSW50ZWxsaWdlbmNlJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHBvdzoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5QT1cnLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuUG93ZXInLFxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZWR1OiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLkVEVScsXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5FZHVjYXRpb24nLFxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIWRhdGEuZGF0YS5hdHRyaWJzKSB7XG4gICAgICAgIGRhdGEuZGF0YS5hdHRyaWJzID0ge1xuICAgICAgICAgIGhwOiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIG1heDogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnSFAnLFxuICAgICAgICAgICAgbGFiZWw6ICdIaXQgcG9pbnRzJyxcbiAgICAgICAgICAgIGF1dG86IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1wOiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIG1heDogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnSFAnLFxuICAgICAgICAgICAgbGFiZWw6ICdNYWdpYyBwb2ludHMnLFxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgbGNrOiB7IHZhbHVlOiBudWxsLCBzaG9ydDogJ0xDSycsIGxhYmVsOiAnTHVjaycgfSxcbiAgICAgICAgICBzYW46IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgbWF4OiA5OSxcbiAgICAgICAgICAgIHNob3J0OiAnU0FOJyxcbiAgICAgICAgICAgIGxhYmVsOiAnU2FuaXR5JyxcbiAgICAgICAgICAgIGF1dG86IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1vdjoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ01PVicsXG4gICAgICAgICAgICBsYWJlbDogJ01vdmVtZW50IHJhdGUnLFxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGI6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdEQicsXG4gICAgICAgICAgICBsYWJlbDogJ0RhbWFnZSBib251cycsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBidWlsZDoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0JMRCcsXG4gICAgICAgICAgICBsYWJlbDogJ0J1aWxkJyxcbiAgICAgICAgICAgIGF1dG86IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFybW9yOiB7IHZhbHVlOiBudWxsLCBhdXRvOiBmYWxzZSB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFkYXRhLmRhdGEuYmlvZ3JhcGh5KSB7XG4gICAgICAgIGRhdGEuZGF0YS5iaW9ncmFwaHkgPSB7XG4gICAgICAgICAgcGVyc29uYWxEZXNjcmlwdGlvbjogeyB0eXBlOiAnc3RyaW5nJywgdmFsdWU6ICcnIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIWRhdGEuZGF0YS5pbmZvcykge1xuICAgICAgICBkYXRhLmRhdGEuaW5mb3MgPSB7XG4gICAgICAgICAgb2NjdXBhdGlvbjogJycsXG4gICAgICAgICAgYWdlOiAnJyxcbiAgICAgICAgICBzZXg6ICcnLFxuICAgICAgICAgIHJlc2lkZW5jZTogJycsXG4gICAgICAgICAgYmlydGhwbGFjZTogJycsXG4gICAgICAgICAgYXJjaGV0eXBlOiAnJyxcbiAgICAgICAgICBvcmdhbml6YXRpb246ICcnLFxuICAgICAgICAgIHBsYXllcm5hbWU6ICcnXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFkYXRhLmRhdGEuZmxhZ3MpIHtcbiAgICAgICAgZGF0YS5kYXRhLmZsYWdzID0geyBsb2NrZWQ6IHRydWUsIG1hbnVhbENyZWRpdDogZmFsc2UgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIWRhdGEuZGF0YS5jcmVkaXQpIHtcbiAgICAgICAgZGF0YS5kYXRhLmNyZWRpdCA9IHtcbiAgICAgICAgICBtb25ldGFyeVN5bWJvbDogbnVsbCxcbiAgICAgICAgICBtdWx0aXBsaWVyOiBudWxsLFxuICAgICAgICAgIHNwZW50OiBudWxsLFxuICAgICAgICAgIGFzc2V0c0RldGFpbHM6IG51bGxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIWRhdGEuZGF0YS5kZXZlbG9wbWVudCkge1xuICAgICAgICBkYXRhLmRhdGEuZGV2ZWxvcG1lbnQgPSB7XG4gICAgICAgICAgcGVyc29uYWw6IG51bGwsXG4gICAgICAgICAgb2NjdXBhdGlvbjogbnVsbCxcbiAgICAgICAgICBhcmNoZXR5cGU6IG51bGxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIWRhdGEuZGF0YS5iaW9ncmFwaHkpIGRhdGEuZGF0YS5iaW9ncmFwaHkgPSBbXVxuXG4gICAgICBkYXRhLnB1bHBSdWxlQXJjaGV0eXBlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVBcmNoZXR5cGUnKVxuICAgICAgZGF0YS5wdWxwUnVsZU9yZ2FuaXphdGlvbiA9IGdhbWUuc2V0dGluZ3MuZ2V0KFxuICAgICAgICAnQ29DNycsXG4gICAgICAgICdwdWxwUnVsZU9yZ2FuaXphdGlvbidcbiAgICAgIClcbiAgICB9XG5cbiAgICBkYXRhLmlzRGVhZCA9IHRoaXMuYWN0b3IuZGVhZFxuICAgIGRhdGEuaXNEeWluZyA9IHRoaXMuYWN0b3IuZHlpbmdcblxuICAgIGlmIChkYXRhLml0ZW1zKSB7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGF0YS5pdGVtcykge1xuICAgICAgICAvLyBzaSBjJ2VzdCB1bmUgZm9ybXVsZSBldCBxdSdvbiBwZXV0IGwnZXZhbHVlclxuICAgICAgICAvLyBjZSBibG9jIGRldnJhaXQgZXRyZSBkw6lwbGFjw6kgZGFucyBsZSBibG9jIF91cGRhdGVGb3JtRGF0YVxuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgaWYgKGl0ZW0uZGF0YS5wcm9wZXJ0aWVzLnNwZWNpYWwpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLmRhdGEucHJvcGVydGllcy5maWdodGluZykge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgaXRlbS5kYXRhLnNwZWNpYWxpemF0aW9uICE9PVxuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZScpXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1Ub1VwZGF0ZSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW0uX2lkKVxuICAgICAgICAgICAgICAgIGF3YWl0IGl0ZW1Ub1VwZGF0ZS51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgJ2RhdGEuc3BlY2lhbGl6YXRpb24nOiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgICAgICdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgaXRlbS5kYXRhLnNwZWNpYWxpemF0aW9uID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgJ0NvQzcuRmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICAgICAgICAgICAgKSAvLyBUT0RPIDogQ2xpZW50IHdpdGggZGlmZmVyZW50IGxhbmd1YWdlID0gcmVjdXJzaXZlIGNhbGwgd2hlbiBvcGVuaW5nIHRoZSBzYW1lIHNoZWV0LlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS5kYXRhLnByb3BlcnRpZXMuZmlyZWFybSkge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgaXRlbS5kYXRhLnNwZWNpYWxpemF0aW9uICE9PVxuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJylcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbVRvVXBkYXRlID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoaXRlbS5faWQpXG4gICAgICAgICAgICAgICAgYXdhaXQgaXRlbVRvVXBkYXRlLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAnZGF0YS5zcGVjaWFsaXphdGlvbic6IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAgICAgJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGl0ZW0uZGF0YS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAgICdDb0M3LkZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMuYWN0b3IuZGF0YS50eXBlICE9PSAnY2hhcmFjdGVyJykge1xuICAgICAgICAgICAgaWYgKGlzTmFOKE51bWJlcihpdGVtLmRhdGEudmFsdWUpKSkge1xuICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBudWxsXG4gICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IHt9XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgICAgICAgICAgIENPQzcuZm9ybXVsYS5hY3RvcnNoZWV0XG4gICAgICAgICAgICAgICkpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ0AnKSAmJiB2YWx1ZS5zdGFydHNXaXRoKCd0aGlzLicpKSB7XG4gICAgICAgICAgICAgICAgICBwYXJzZWRba2V5LnN1YnN0cmluZygxKV0gPSBnZXRQcm9wZXJ0eShcbiAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUuc3Vic3RyaW5nKDUpXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSAoXG4gICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUm9sbChpdGVtLmRhdGEudmFsdWUsIHBhcnNlZCkuZXZhbHVhdGUoe1xuICAgICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApLnRvdGFsXG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgICAgIGB1bmFibGUgdG8gcGFyc2UgZm9ybXVsYSA6JHtpdGVtLmRhdGEudmFsdWV9IGZvciBza2lsbCAke2l0ZW0ubmFtZX1gXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHZhbHVlID0gbnVsbFxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5kYXRhLnZhbHVlID0gdmFsdWVcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtVG9VcGRhdGUgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtLl9pZClcbiAgICAgICAgICAgICAgICBhd2FpdCBpdGVtVG9VcGRhdGUudXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICdkYXRhLnZhbHVlJzogdmFsdWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoaXRlbS5faWQpXG4gICAgICAgICAgICBpdGVtLmRhdGEuYmFzZSA9IGF3YWl0IHNraWxsLmFzeW5jQmFzZSgpXG5cbiAgICAgICAgICAgIGlmIChpdGVtLmRhdGEudmFsdWUpIHtcbiAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBpdGVtLmRhdGEudmFsdWVcbiAgICAgICAgICAgICAgY29uc3QgZXhwID0gaXRlbS5kYXRhLmFkanVzdG1lbnRzPy5leHBlcmllbmNlXG4gICAgICAgICAgICAgICAgPyBwYXJzZUludChpdGVtLmRhdGEuYWRqdXN0bWVudHMuZXhwZXJpZW5jZSlcbiAgICAgICAgICAgICAgICA6IDBcbiAgICAgICAgICAgICAgbGV0IHVwZGF0ZWRFeHAgPSBleHAgKyBwYXJzZUludChpdGVtLmRhdGEudmFsdWUpIC0gc2tpbGwudmFsdWVcbiAgICAgICAgICAgICAgaWYgKHVwZGF0ZWRFeHAgPD0gMCkgdXBkYXRlZEV4cCA9IG51bGxcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBfaWQ6IGl0ZW0uX2lkLFxuICAgICAgICAgICAgICAgICAgJ2RhdGEuYWRqdXN0bWVudHMuZXhwZXJpZW5jZSc6IHVwZGF0ZWRFeHAsXG4gICAgICAgICAgICAgICAgICAnZGF0YS52YWx1ZSc6IG51bGxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgIGlmICghaXRlbS5kYXRhLmFkanVzdG1lbnRzKSBpdGVtLmRhdGEuYWRqdXN0bWVudHMgPSB7fVxuICAgICAgICAgICAgICBpdGVtLmRhdGEuYWRqdXN0bWVudHMuZXhwZXJpZW5jZSA9IHVwZGF0ZWRFeHBcbiAgICAgICAgICAgICAgaXRlbS5kYXRhLnZhbHVlID0gdmFsdWVcbiAgICAgICAgICAgIH0gZWxzZSBpdGVtLmRhdGEudmFsdWUgPSBza2lsbC52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsaXN0ID0gZGF0YS5pdGVtc0J5VHlwZVtpdGVtLnR5cGVdXG4gICAgICAgIGlmICghbGlzdCkge1xuICAgICAgICAgIGxpc3QgPSBbXVxuICAgICAgICAgIGRhdGEuaXRlbXNCeVR5cGVbaXRlbS50eXBlXSA9IGxpc3RcbiAgICAgICAgfVxuICAgICAgICBsaXN0LnB1c2goaXRlbSlcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBpdGVtVHlwZSBpbiBkYXRhLml0ZW1zQnlUeXBlKSB7XG4gICAgICAgIGRhdGEuaXRlbXNCeVR5cGVbaXRlbVR5cGVdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICByZXR1cm4gYS5uYW1lXG4gICAgICAgICAgICAubm9ybWFsaXplKCdORkQnKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKVxuICAgICAgICAgICAgLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICAgICAgICAgIC5sb2NhbGVDb21wYXJlKFxuICAgICAgICAgICAgICBiLm5hbWVcbiAgICAgICAgICAgICAgICAubm9ybWFsaXplKCdORkQnKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCAnJylcbiAgICAgICAgICAgICAgICAudG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgICAgICAgKVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICAvLyByZWRvbmRhbnQgYXZlYyBtYXRyaWNlIGl0ZW1ieXR5cGVcbiAgICAgIGRhdGEuc2tpbGxzID0gZGF0YS5pdGVtc1xuICAgICAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSAnc2tpbGwnKVxuICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgIHJldHVybiBhLm5hbWVcbiAgICAgICAgICAgIC5ub3JtYWxpemUoJ05GRCcpXG4gICAgICAgICAgICAucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgJycpXG4gICAgICAgICAgICAudG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgICAgICAgLmxvY2FsZUNvbXBhcmUoXG4gICAgICAgICAgICAgIGIubmFtZVxuICAgICAgICAgICAgICAgIC5ub3JtYWxpemUoJ05GRCcpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKVxuICAgICAgICAgICAgICAgIC50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICAgICAgICApXG4gICAgICAgIH0pXG5cbiAgICAgIGRhdGEubWVsZWVTa2lsbHMgPSBkYXRhLnNraWxscy5maWx0ZXIoXG4gICAgICAgIHNraWxsID0+XG4gICAgICAgICAgc2tpbGwuZGF0YS5wcm9wZXJ0aWVzLmNvbWJhdCA9PT0gdHJ1ZSAmJlxuICAgICAgICAgIHNraWxsLmRhdGEucHJvcGVydGllcy5maWdodGluZyA9PT0gdHJ1ZVxuICAgICAgKVxuICAgICAgZGF0YS5yYW5nZVNraWxscyA9IGRhdGEuc2tpbGxzLmZpbHRlcihcbiAgICAgICAgc2tpbGwgPT5cbiAgICAgICAgICBza2lsbC5kYXRhLnByb3BlcnRpZXMuY29tYmF0ID09PSB0cnVlICYmXG4gICAgICAgICAgc2tpbGwuZGF0YS5wcm9wZXJ0aWVzLmZpcmVhcm0gPT09IHRydWVcbiAgICAgIClcblxuICAgICAgY29uc3QgY2J0U2tpbGxzID0gZGF0YS5za2lsbHMuZmlsdGVyKFxuICAgICAgICBza2lsbCA9PiBza2lsbC5kYXRhLnByb3BlcnRpZXMuY29tYmF0ID09PSB0cnVlXG4gICAgICApXG4gICAgICBpZiAoY2J0U2tpbGxzKSB7XG4gICAgICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgY2J0U2tpbGxzKSB7XG4gICAgICAgICAgZGF0YS5jb21iYXRTa2lsbHNbc2tpbGwuX2lkXSA9IHNraWxsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgd2VhcG9ucyA9IGRhdGEuaXRlbXNCeVR5cGUud2VhcG9uXG5cbiAgICAgIGlmICh3ZWFwb25zKSB7XG4gICAgICAgIGZvciAoY29uc3Qgd2VhcG9uIG9mIHdlYXBvbnMpIHtcbiAgICAgICAgICB3ZWFwb24udXNlc0FsdGVybmF0ZVNraWxsID1cbiAgICAgICAgICAgIHdlYXBvbi5kYXRhLnByb3BlcnRpZXMuYXV0byA9PT0gdHJ1ZSB8fFxuICAgICAgICAgICAgd2VhcG9uLmRhdGEucHJvcGVydGllcy5icnN0ID09PSB0cnVlXG4gICAgICAgICAgaWYgKCF3ZWFwb24uZGF0YS5hbW1vKSB3ZWFwb24uZGF0YS5hbW1vID0gMFxuXG4gICAgICAgICAgd2VhcG9uLnNraWxsU2V0ID0gdHJ1ZVxuICAgICAgICAgIC8vIHdlYXBvbi5kYXRhLnNraWxsLm1haW4ubmFtZSA9ICcnO1xuICAgICAgICAgIC8vIHdlYXBvbi5kYXRhLnNraWxsLm1haW4udmFsdWUgPSAwO1xuICAgICAgICAgIC8vIHdlYXBvbi5kYXRhLnNraWxsLmFsdGVybmF0aXYubmFtZSA9ICcnO1xuICAgICAgICAgIC8vIHdlYXBvbi5kYXRhLnNraWxsLmFsdGVybmF0aXYudmFsdWUgPSAwO1xuICAgICAgICAgIGlmICh3ZWFwb24uZGF0YS5za2lsbC5tYWluLmlkID09PSAnJykge1xuICAgICAgICAgICAgLy8gVE9ETyA6IHNpIGwnSUQgbidlc3RzIHBhcyBkw6lmaW5pZSBtYWlzIHF1J3VuIG5vbSBhIMOpdMOpIGRvbm7DqSwgdXRpbGlzZXIgY2Ugbm9tIGV0IHRhbnRlciBkZSByZXRyb3V2ZXIgbGUgc2tpbGxcbiAgICAgICAgICAgIHdlYXBvbi5za2lsbFNldCA9IGZhbHNlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFRPRE8gOiBhdmFudCBkJ2Fzc2lnZXIgbGUgc2tpbGwgdsOpcmlmaWVyIHF1J2lsIGV4aXN0ZSB0b3Vqb3Vycy5cbiAgICAgICAgICAgIC8vIHNpIGlsIG4nZXhpc3RlIHBsdXMgaWwgZmF1dCBsZSByZXRyb3V2ZXIgb3UgcGFzc2VyIHNraWxsc2V0IGEgZmFsc2UuXG4gICAgICAgICAgICBpZiAoZGF0YS5jb21iYXRTa2lsbHNbd2VhcG9uLmRhdGEuc2tpbGwubWFpbi5pZF0pIHtcbiAgICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yLml0ZW1zLmdldCh3ZWFwb24uZGF0YS5za2lsbC5tYWluLmlkKVxuICAgICAgICAgICAgICB3ZWFwb24uZGF0YS5za2lsbC5tYWluLm5hbWUgPVxuICAgICAgICAgICAgICAgIGRhdGEuY29tYmF0U2tpbGxzW3dlYXBvbi5kYXRhLnNraWxsLm1haW4uaWRdLm5hbWVcbiAgICAgICAgICAgICAgd2VhcG9uLmRhdGEuc2tpbGwubWFpbi52YWx1ZSA9IHNraWxsLnZhbHVlXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB3ZWFwb24uc2tpbGxTZXQgPSBmYWxzZVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAod2VhcG9uLmRhdGEuc2tpbGwuYWx0ZXJuYXRpdi5pZCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgaWYgKGRhdGEuY29tYmF0U2tpbGxzW3dlYXBvbi5kYXRhLnNraWxsLmFsdGVybmF0aXYuaWRdKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgICAgICAgICAgIHdlYXBvbi5kYXRhLnNraWxsLmFsdGVybmF0aXYuaWRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgd2VhcG9uLmRhdGEuc2tpbGwuYWx0ZXJuYXRpdi5uYW1lID1cbiAgICAgICAgICAgICAgICAgIGRhdGEuY29tYmF0U2tpbGxzW3dlYXBvbi5kYXRhLnNraWxsLmFsdGVybmF0aXYuaWRdLm5hbWVcbiAgICAgICAgICAgICAgICB3ZWFwb24uZGF0YS5za2lsbC5hbHRlcm5hdGl2LnZhbHVlID0gc2tpbGwudmFsdWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHdlYXBvbi5kYXRhLl9wcm9wZXJ0aWVzID0gW11cbiAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LndlYXBvblByb3BlcnRpZXMpKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IHt9XG4gICAgICAgICAgICBwcm9wZXJ0eS5pZCA9IGtleVxuICAgICAgICAgICAgcHJvcGVydHkubmFtZSA9IHZhbHVlXG4gICAgICAgICAgICBwcm9wZXJ0eS52YWx1ZSA9IHdlYXBvbi5kYXRhLnByb3BlcnRpZXNba2V5XSA9PT0gdHJ1ZVxuICAgICAgICAgICAgd2VhcG9uLmRhdGEuX3Byb3BlcnRpZXMucHVzaChwcm9wZXJ0eSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkYXRhLndlYXBvbnNbd2VhcG9uLl9pZF0gPSB3ZWFwb25cbiAgICAgICAgICBpZiAod2VhcG9uLmRhdGEucHJvcGVydGllcy5ybmdkKSBkYXRhLnJhbmdlV3BuLnB1c2god2VhcG9uKVxuICAgICAgICAgIGVsc2UgZGF0YS5tZWxlZVdwbi5wdXNoKHdlYXBvbilcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCB0b2tlbiA9IHRoaXMudG9rZW5cbiAgICAgIGRhdGEudG9rZW5JZCA9IHRva2VuXG4gICAgICAgID8gYCR7dG9rZW4ucGFyZW50Py5pZCA/IHRva2VuLnBhcmVudC5pZCA6ICdUT0tFTid9LiR7dG9rZW4uaWR9YFxuICAgICAgICA6IG51bGwgLy8gUkVGQUNUT1JJTkcgKDIpXG5cbiAgICAgIGRhdGEuaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhID0gZmFsc2VcbiAgICAgIGlmIChkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2hhcmFjdGVyaXN0aWMgb2YgT2JqZWN0LnZhbHVlcyhkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzKSkge1xuICAgICAgICAgIGlmICghY2hhcmFjdGVyaXN0aWMudmFsdWUpIGNoYXJhY3RlcmlzdGljLmVkaXRhYmxlID0gdHJ1ZVxuICAgICAgICAgIGNoYXJhY3RlcmlzdGljLmhhcmQgPSBNYXRoLmZsb29yKGNoYXJhY3RlcmlzdGljLnZhbHVlIC8gMilcbiAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5leHRyZW1lID0gTWF0aC5mbG9vcihjaGFyYWN0ZXJpc3RpYy52YWx1ZSAvIDUpXG5cbiAgICAgICAgICAvLyBJZiBubyB2YWx1ZSAmJiBubyBmb3JtdWxhIGRvbid0IGRpc3BsYXkgY2hhcmFjLlxuICAgICAgICAgIGlmICghY2hhcmFjdGVyaXN0aWMudmFsdWUgJiYgIWNoYXJhY3RlcmlzdGljLmZvcm11bGEpIHtcbiAgICAgICAgICAgIGNoYXJhY3RlcmlzdGljLmRpc3BsYXkgPSBmYWxzZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5kaXNwbGF5ID0gdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGlmIGFueSBjaGFyYWN0ZXJpc3RpYyBoYXMgbm8gdmFsdWUgYnV0IGhhcyBhIGZvcm11bGEuXG4gICAgICAgICAgaWYgKCFjaGFyYWN0ZXJpc3RpYy52YWx1ZSAmJiBjaGFyYWN0ZXJpc3RpYy5mb3JtdWxhKSB7XG4gICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5oYXNFbXB0eVZhbHVlV2l0aEZvcm11bGEgPSB0cnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZGF0YS5oYXNFbXB0eVZhbHVlV2l0aEZvcm11bGEgPVxuICAgICAgICAgICAgZGF0YS5oYXNFbXB0eVZhbHVlV2l0aEZvcm11bGEgfHxcbiAgICAgICAgICAgIGNoYXJhY3RlcmlzdGljLmhhc0VtcHR5VmFsdWVXaXRoRm9ybXVsYVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRm9yIGNvbXBhdCB3aXRoIHByZXZpb3VzIGNoYXJhY3RlcnMgdGVzdCBpZiBhdXRvIGlzIGRlZmluaWVkLCBpZiBub3Qgd2UgZGVmaW5lIGl0XG4gICAgaWYgKCFbJ3ZlaGljbGUnLCAnY29udGFpbmVyJ10uaW5jbHVkZXModGhpcy5hY3Rvci5kYXRhLnR5cGUpKSB7XG4gICAgICBjb25zdCBhdXRvID0gdGhpcy5hY3Rvci5jaGVja1VuZGVmaW5lZEF1dG8oKVxuICAgICAgZGF0YS5kYXRhID0gbWVyZ2VPYmplY3QoZGF0YS5kYXRhLCBhdXRvKVxuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhLmRhdGEuYXR0cmlicy5ocC5hdXRvID0gZmFsc2VcbiAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLmF1dG8gPSBmYWxzZVxuICAgICAgZGF0YS5kYXRhLmF0dHJpYnMuc2FuLmF1dG8gPSBmYWxzZVxuICAgICAgZGF0YS5kYXRhLmF0dHJpYnMubW92LmF1dG8gPSBmYWxzZVxuICAgICAgZGF0YS5kYXRhLmF0dHJpYnMuZGIuYXV0byA9IGZhbHNlXG4gICAgICBkYXRhLmRhdGEuYXR0cmlicy5idWlsZC5hdXRvID0gZmFsc2VcbiAgICB9XG5cbiAgICBkYXRhLmRhdGEuYXR0cmlicy5tb3YudmFsdWUgPSB0aGlzLmFjdG9yLm1vdiAvLyByZXR1cm4gY29tcHV0ZWQgdmFsdWVzIG9yIGZpeGVkIHZhbHVlcyBpZiBub3QgYXV0by5cbiAgICBkYXRhLmRhdGEuYXR0cmlicy5kYi52YWx1ZSA9IHRoaXMuYWN0b3IuZGJcbiAgICBkYXRhLmRhdGEuYXR0cmlicy5idWlsZC52YWx1ZSA9IHRoaXMuYWN0b3IuYnVpbGRcblxuICAgIGlmICh0eXBlb2YgdGhpcy5hY3Rvci5jb21wZW5kaXVtID09PSAndW5kZWZpbmVkJyAmJiB0aGlzLmFjdG9yLmlzT3duZXIpIHtcbiAgICAgIHRoaXMuYWN0b3IudXBkYXRlKFxuICAgICAgICB7ICdkYXRhLmF0dHJpYnMubW92LnZhbHVlJzogdGhpcy5hY3Rvci5tb3YgfSxcbiAgICAgICAgeyByZW5kZXI6IGZhbHNlIH1cbiAgICAgIClcbiAgICAgIHRoaXMuYWN0b3IudXBkYXRlKFxuICAgICAgICB7ICdkYXRhLmF0dHJpYnMubW92Lm1heCc6IHRoaXMuYWN0b3IubW92IH0sXG4gICAgICAgIHsgcmVuZGVyOiBmYWxzZSB9XG4gICAgICApXG4gICAgICB0aGlzLmFjdG9yLnVwZGF0ZShcbiAgICAgICAgeyAnZGF0YS5hdHRyaWJzLmRiLnZhbHVlJzogdGhpcy5hY3Rvci5kYiB9LFxuICAgICAgICB7IHJlbmRlcjogZmFsc2UgfVxuICAgICAgKVxuICAgICAgdGhpcy5hY3Rvci51cGRhdGUoXG4gICAgICAgIHsgJ2RhdGEuYXR0cmlicy5idWlsZC5jdXJyZW50JzogdGhpcy5hY3Rvci5idWlsZCB9LFxuICAgICAgICB7IHJlbmRlcjogZmFsc2UgfVxuICAgICAgKVxuICAgICAgdGhpcy5hY3Rvci51cGRhdGUoXG4gICAgICAgIHsgJ2RhdGEuYXR0cmlicy5idWlsZC52YWx1ZSc6IHRoaXMuYWN0b3IuYnVpbGQgfSxcbiAgICAgICAgeyByZW5kZXI6IGZhbHNlIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBpZiggZGF0YS5kYXRhLmF0dHJpYnMuaHAudmFsdWUgPCAwKSBkYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSA9IG51bGw7XG4gICAgaWYgKGRhdGEuZGF0YS5hdHRyaWJzLm1wLnZhbHVlIDwgMCkgZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgPSBudWxsXG4gICAgaWYgKGRhdGEuZGF0YS5hdHRyaWJzLnNhbi52YWx1ZSA8IDApIGRhdGEuZGF0YS5hdHRyaWJzLnNhbi52YWx1ZSA9IG51bGxcbiAgICAvLyBkYXRhLmRhdGEuYXR0cmlicy5zYW4uZmlmdHlPZkN1cnJlbnQgPSBkYXRhLmRhdGEuYXR0cmlicy5zYW4udmFsdWUgPj0gMCA/ICcgLyAnK01hdGguZmxvb3IoZGF0YS5kYXRhLmF0dHJpYnMuc2FuLnZhbHVlLzUpOicnO1xuICAgIGlmIChkYXRhLmRhdGEuYXR0cmlicy5ocC5hdXRvKSB7XG4gICAgICAvLyBUT0RPIGlmIGFueSBpcyBudWxsIHNldCBtYXggYmFjayB0byBudWxsLlxuICAgICAgaWYgKFxuICAgICAgICBkYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZSAhPSBudWxsICYmXG4gICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MuY29uLnZhbHVlICE9IG51bGxcbiAgICAgICkge1xuICAgICAgICBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXggPSB0aGlzLmFjdG9yLmhwTWF4XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRhdGEuZGF0YS5hdHRyaWJzLm1wLmF1dG8pIHtcbiAgICAgIC8vIFRPRE8gaWYgYW55IGlzIG51bGwgc2V0IG1heCBiYWNrIHRvIG51bGwuXG4gICAgICBpZiAoZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUgIT0gbnVsbCkge1xuICAgICAgICBkYXRhLmRhdGEuYXR0cmlicy5tcC5tYXggPSBNYXRoLmZsb29yKFxuICAgICAgICAgIGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlIC8gNVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRhdGEuZGF0YS5hdHRyaWJzLnNhbi5hdXRvKSB7XG4gICAgICBkYXRhLmRhdGEuYXR0cmlicy5zYW4ubWF4ID0gdGhpcy5hY3Rvci5zYW5NYXhcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBkYXRhLmRhdGEuYXR0cmlicy5tcC52YWx1ZSA+IGRhdGEuZGF0YS5hdHRyaWJzLm1wLm1heCB8fFxuICAgICAgZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4ID09IG51bGxcbiAgICApIHtcbiAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLnZhbHVlID0gZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4XG4gICAgfVxuICAgIGlmIChcbiAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLmhwLnZhbHVlID4gZGF0YS5kYXRhLmF0dHJpYnMuaHAubWF4IHx8XG4gICAgICBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXggPT0gbnVsbFxuICAgICkge1xuICAgICAgZGF0YS5kYXRhLmF0dHJpYnMuaHAudmFsdWUgPSBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXhcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBkYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSA9PSBudWxsICYmXG4gICAgICBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXggIT0gbnVsbFxuICAgICkge1xuICAgICAgZGF0YS5kYXRhLmF0dHJpYnMuaHAudmFsdWUgPSBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXhcbiAgICB9XG4gICAgaWYgKFxuICAgICAgZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgPT0gbnVsbCAmJlxuICAgICAgZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4ICE9IG51bGxcbiAgICApIHtcbiAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLnZhbHVlID0gZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4XG4gICAgfVxuXG4gICAgaWYgKCFbJ3ZlaGljbGUnXS5pbmNsdWRlcyh0aGlzLmFjdG9yLmRhdGEudHlwZSkpIHtcbiAgICAgIGlmIChcbiAgICAgICAgZGF0YS5kYXRhLmF0dHJpYnMuc2FuLnZhbHVlID09IG51bGwgJiZcbiAgICAgICAgZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUgIT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIGRhdGEuZGF0YS5hdHRyaWJzLnNhbi52YWx1ZSA9IGRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlXG4gICAgICB9XG4gICAgICBpZiAoZGF0YS5kYXRhLmF0dHJpYnMuc2FuLnZhbHVlID4gZGF0YS5kYXRhLmF0dHJpYnMuc2FuLm1heCkge1xuICAgICAgICBkYXRhLmRhdGEuYXR0cmlicy5zYW4udmFsdWUgPSBkYXRhLmRhdGEuYXR0cmlicy5zYW4ubWF4XG4gICAgICB9XG5cbiAgICAgIGlmIChkYXRhLmRhdGEuYmlvZ3JhcGh5IGluc3RhbmNlb2YgQXJyYXkgJiYgZGF0YS5kYXRhLmJpb2dyYXBoeS5sZW5ndGgpIHtcbiAgICAgICAgZGF0YS5kYXRhLmJpb2dyYXBoeVswXS5pc0ZpcnN0ID0gdHJ1ZVxuICAgICAgICBkYXRhLmRhdGEuYmlvZ3JhcGh5W2RhdGEuZGF0YS5iaW9ncmFwaHkubGVuZ3RoIC0gMV0uaXNMYXN0ID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBkYXRhLmRhdGEuaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwgPSB7fVxuICAgICAgZGF0YS5kYXRhLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLnZhbHVlID0gZGF0YS5kYXRhLmF0dHJpYnMuc2FuLmRhaWx5TG9zc1xuICAgICAgICA/IGRhdGEuZGF0YS5hdHRyaWJzLnNhbi5kYWlseUxvc3NcbiAgICAgICAgOiAwXG4gICAgICBkYXRhLmRhdGEuaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwubWF4ID0gTWF0aC5mbG9vcihcbiAgICAgICAgZGF0YS5kYXRhLmF0dHJpYnMuc2FuLnZhbHVlIC8gNVxuICAgICAgKVxuICAgIH1cbiAgICBkYXRhLnNob3dJbnZlbnRvcnlJdGVtcyA9IGZhbHNlXG4gICAgZGF0YS5zaG93SW52ZW50b3J5Qm9va3MgPSBmYWxzZVxuICAgIGRhdGEuc2hvd0ludmVudG9yeVNwZWxscyA9IGZhbHNlXG4gICAgZGF0YS5zaG93SW52ZW50b3J5VGFsZW50cyA9IGZhbHNlXG4gICAgZGF0YS5zaG93SW52ZW50b3J5U3RhdHVzZXMgPSBmYWxzZVxuICAgIGRhdGEuc2hvd0ludmVudG9yeVdlYXBvbnMgPSBmYWxzZVxuXG4gICAgZGF0YS5oYXNDb25kaXRpb25zID1cbiAgICAgIHRoaXMuYWN0b3IuZWZmZWN0cy5zaXplID4gMCB8fFxuICAgICAgKHR5cGVvZiB0aGlzLmFjdG9yLmRhdGEuZGF0YS5jb25kaXRpb25zICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmFjdG9yLmRhdGEuZGF0YS5jb25kaXRpb25zKS5maWx0ZXIoXG4gICAgICAgICAgY29uZGl0aW9uID0+IHRoaXMuYWN0b3IuZGF0YS5kYXRhLmNvbmRpdGlvbnNbY29uZGl0aW9uXS52YWx1ZVxuICAgICAgICApLmxlbmd0aCA+IDApXG4gICAgLy8gY29uc3QgZmlyc3QgPSBkYXRhLmRhdGEuYmlvZ3JhcGh5WzBdO1xuICAgIC8vIGZpcnN0LmlzRmlyc3QgPSB0cnVlO1xuICAgIC8vIGRhdGEuZGF0YS5iaW9ncmFwaHlbMF0gPSBmaXJzdDtcbiAgICAvLyBjb25zdCBsYXN0ID0gZGF0YS5kYXRhLmJpb2dyYXBoeVtkYXRhLmRhdGEuYmlvZ3JhcGh5Lmxlbmd0aCAtIDFdO1xuICAgIC8vIGxhc3QuaXNMYXN0ID0gdHJ1ZTtcbiAgICAvLyBkYXRhLmRhdGEuYmlvZ3JhcGh5W2RhdGEuZGF0YS5iaW9ncmFwaHkubGVuZ3RoIC0gMV0gPSBsYXN0O1xuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICBzdGF0aWMgcGFyc2VGb3JtdWxhIChmb3JtdWxhKSB7XG4gICAgbGV0IHBhcnNlZEZvcm11bGEgPSBmb3JtdWxhXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5mb3JtdWxhLmFjdG9yc2hlZXQpKSB7XG4gICAgICBwYXJzZWRGb3JtdWxhID0gcGFyc2VkRm9ybXVsYS5yZXBsYWNlKGtleSwgdmFsdWUpXG4gICAgfVxuICAgIHJldHVybiBwYXJzZWRGb3JtdWxhXG4gIH1cblxuICBnZXQgdG9rZW5LZXkgKCkge1xuICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0RFUFJFQ0FURUQgU0hPVUxEIE5PVCBIQVBQRU4hJylcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2Jhc2UuanMgZ2V0IHRva2VuS2V5KCk6IERFUFJFQ0FURUQgU0hPVUxEIE5PVCBIQVBQRU4hJylcbiAgICAvLyBpZiggdGhpcy50b2tlbikgcmV0dXJuIGAke3RoaXMudG9rZW4uc2NlbmU/Ll9pZD90aGlzLnRva2VuLnNjZW5lLl9pZDonVE9LRU4nfS4ke3RoaXMudG9rZW4uZGF0YS5faWR9YDsgIC8vUkVGQUNUT1JJTkcgKDIpXG4gICAgLy8gcmV0dXJuIHRoaXMuYWN0b3IuaWQ7XG4gIH1cblxuICBvbkNsb3NlU2hlZXQgKCkge1xuICAgIC8vIHRoaXMuYWN0b3IubG9ja2VkID0gdHJ1ZTtcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICAvLyBPd25lciBPbmx5IExpc3RlbmVyc1xuICAgIGlmICh0aGlzLmFjdG9yLmlzT3duZXIgJiYgdHlwZW9mIHRoaXMuYWN0b3IuY29tcGVuZGl1bSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5jaGFyYWN0ZXJpc3RpYy1sYWJlbCcpXG4gICAgICAgIC5vbignZHJhZ3N0YXJ0JywgZXZlbnQgPT4gdGhpcy5fb25EcmFnQ2hhcmFjdGVyaXN0aWMoZXZlbnQpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmF0dHJpYnV0ZS1sYWJlbCcpXG4gICAgICAgIC5vbignZHJhZ3N0YXJ0JywgZXZlbnQgPT4gdGhpcy5fb25EcmFnQXR0cmlidXRlKGV2ZW50KSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5zYW4tY2hlY2snKVxuICAgICAgICAub24oJ2RyYWdzdGFydCcsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ1NhbkNoZWNrKGV2ZW50KSlcblxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmNoYXJhY3RlcmlzdGljLWxhYmVsJylcbiAgICAgICAgLmNvbnRleHRtZW51KHRoaXMuX29uT3Bwb3NlZFJvbGwuYmluZCh0aGlzKSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5za2lsbC1uYW1lLnJvbGxhYmxlJylcbiAgICAgICAgLmNvbnRleHRtZW51KHRoaXMuX29uT3Bwb3NlZFJvbGwuYmluZCh0aGlzKSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5hdHRyaWJ1dGUtbGFiZWwucm9sbGFibGUnKVxuICAgICAgICAuY29udGV4dG1lbnUodGhpcy5fb25PcHBvc2VkUm9sbC5iaW5kKHRoaXMpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLndlYXBvbi1uYW1lLnJvbGxhYmxlJylcbiAgICAgICAgLmNvbnRleHRtZW51KHRoaXMuX29uT3Bwb3NlZFJvbGwuYmluZCh0aGlzKSlcblxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmNoYXJhY3RlcmlzdGljLWxhYmVsJylcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uUm9sbENoYXJhY3Rlcml0aWNUZXN0LmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy5za2lsbC1uYW1lLnJvbGxhYmxlJykuY2xpY2sodGhpcy5fb25Sb2xsU2tpbGxUZXN0LmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy5za2lsbC1pbWFnZScpLmNsaWNrKHRoaXMuX29uUm9sbFNraWxsVGVzdC5iaW5kKHRoaXMpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmF0dHJpYnV0ZS1sYWJlbC5yb2xsYWJsZScpXG4gICAgICAgIC5jbGljayh0aGlzLl9vblJvbGxBdHRyaWJUZXN0LmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy5sb2NrJykuY2xpY2sodGhpcy5fb25Mb2NrQ2xpY2tlZC5iaW5kKHRoaXMpKVxuICAgICAgaHRtbC5maW5kKCcuZmxhZycpLmNsaWNrKHRoaXMuX29uRmxhZ0NsaWNrZWQuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLmZvcm11bGEnKS5jbGljayh0aGlzLl9vbkZvcm11bGFDbGlja2VkLmJpbmQodGhpcykpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcucm9sbC1jaGFyYWN0ZXJpdGljcycpXG4gICAgICAgIC5jbGljayh0aGlzLl9vblJvbGxDaGFyYWN0ZXJpdGljc1ZhbHVlLmJpbmQodGhpcykpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuYXZlcmFnZS1jaGFyYWN0ZXJpdGljcycpXG4gICAgICAgIC5jbGljayh0aGlzLl9vbkF2ZXJhZ2VDaGFyYWN0ZXJpdGljc1ZhbHVlLmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy50b2dnbGUtc3dpdGNoJykuY2xpY2sodGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLmF1dG8tdG9nZ2xlJykuY2xpY2sodGhpcy5fb25BdXRvVG9nZ2xlLmJpbmQodGhpcykpXG5cbiAgICAgIC8vIFN0YXR1cyBtb25pdG9yXG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00gfHwgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhdHVzUGxheWVyRWRpdGFibGUnKSkge1xuICAgICAgICBodG1sLmZpbmQoJy5yZXNldC1jb3VudGVyJykuY2xpY2sodGhpcy5fb25SZXNldENvdW50ZXIuYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcuY29uZGl0aW9uLW1vbml0b3InKVxuICAgICAgICAgIC5jbGljayh0aGlzLl9vbkNvbmRpdGlvblRvZ2dsZS5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sLmZpbmQoJy5pcy1keWluZycpLmNsaWNrKHRoaXMuaGVhbC5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sLmZpbmQoJy5pcy1kZWFkJykuY2xpY2sodGhpcy5yZXZpdmUuYmluZCh0aGlzKSlcbiAgICAgIH1cblxuICAgICAgaHRtbC5maW5kKCcuZHlpbmctY2hlY2snKS5jbGljayh0aGlzLmNoZWNrRm9yRGVhdGguYmluZCh0aGlzKSlcblxuICAgICAgaHRtbC5maW5kKCcuaXRlbSAuaXRlbS1pbWFnZScpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbVJvbGwoZXZlbnQpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLndlYXBvbi1uYW1lLnJvbGxhYmxlJylcbiAgICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uV2VhcG9uUm9sbChldmVudCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcud2VhcG9uLXNraWxsLnJvbGxhYmxlJylcbiAgICAgICAgLmNsaWNrKGFzeW5jIGV2ZW50ID0+IHRoaXMuX29uV2VhcG9uU2tpbGxSb2xsKGV2ZW50KSlcbiAgICAgIGh0bWwuZmluZCgnLnJlbG9hZC13ZWFwb24nKS5jbGljayhldmVudCA9PiB0aGlzLl9vblJlbG9hZFdlYXBvbihldmVudCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcucmVsb2FkLXdlYXBvbicpXG4gICAgICAgIC5vbignY29udGV4dG1lbnUnLCBldmVudCA9PiB0aGlzLl9vblJlbG9hZFdlYXBvbihldmVudCkpXG4gICAgICBodG1sLmZpbmQoJy5hZGQtYW1tbycpLmNsaWNrKHRoaXMuX29uQWRkQW1vLmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy5yZWFkLW9ubHknKS5kYmxjbGljayh0aGlzLl90b2dnbGVSZWFkT25seS5iaW5kKHRoaXMpKVxuICAgICAgaHRtbC5vbignY2xpY2snLCAnLndlYXBvbi1kYW1hZ2UnLCB0aGlzLl9vbldlYXBvbkRhbWFnZS5iaW5kKHRoaXMpKVxuXG4gICAgICBodG1sLmZpbmQoJy5pbnZlbnRvcnktaGVhZGVyJykuY2xpY2sodGhpcy5fb25JbnZlbnRvcnlIZWFkZXIuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLnNlY3Rpb24taGVhZGVyJykuY2xpY2sodGhpcy5fb25TZWN0aW9uSGVhZGVyLmJpbmQodGhpcykpXG5cbiAgICAgIGNvbnN0IHdoZWVsSW5wdXRzID0gaHRtbC5maW5kKCcuYXR0cmlidXRlLXZhbHVlJylcbiAgICAgIGZvciAoY29uc3Qgd2hlZWxJbnB1dCBvZiB3aGVlbElucHV0cykge1xuICAgICAgICB3aGVlbElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgZXZlbnQgPT4gdGhpcy5fb25XaGVlbChldmVudCksIHtcbiAgICAgICAgICBwYXNzaXZlOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWwuZmluZCgnLnNob3ctZGV0YWlsJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtU3VtbWFyeShldmVudCkpXG4gICAgaHRtbC5maW5kKCcuaXRlbS1wb3B1cCcpLmNsaWNrKHRoaXMuX29uSXRlbVBvcHVwLmJpbmQodGhpcykpXG5cbiAgICAvLyBVcGRhdGUgSW52ZW50b3J5IEl0ZW1cbiAgICBodG1sLmZpbmQoJy5zaG93LWRldGFpbCcpLmRibGNsaWNrKGV2ZW50ID0+IHRoaXMuX29uUmVuZGVySXRlbVNoZWV0KGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy5pdGVtLWVkaXQnKS5jbGljayhldmVudCA9PiB0aGlzLl9vblJlbmRlckl0ZW1TaGVldChldmVudCkpXG5cbiAgICAvLyBEZWxldGUgSW52ZW50b3J5IEl0ZW1cbiAgICBodG1sLmZpbmQoJy5pdGVtLWRlbGV0ZScpLmNsaWNrKGFzeW5jIGV2ID0+IHtcbiAgICAgIGNvbnN0IGxpID0gJChldi5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgICBjb25zdCBpdGVtVG9EZWxldGUgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtSWQnKSwge1xuICAgICAgICBzdHJpY3Q6IHRydWVcbiAgICAgIH0pXG4gICAgICBhd2FpdCBpdGVtVG9EZWxldGUuZGVsZXRlKClcbiAgICAgIGxpLnNsaWRlVXAoMjAwLCAoKSA9PiB0aGlzLnJlbmRlcihmYWxzZSkpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmFkZC1pdGVtJykuY2xpY2soZXYgPT4ge1xuICAgICAgc3dpdGNoIChldi5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudHlwZSkge1xuICAgICAgICBjYXNlICdib29rJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5Qm9vayhldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdpdGVtJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5SXRlbShldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdza2lsbCc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eVNraWxsKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3NwZWxsJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5U3BlbGwoZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnd2VhcG9uJzpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0ge31cbiAgICAgICAgICAgIGlmIChldi5jdXJyZW50VGFyZ2V0LmRhdGFzZXQubWVsZWUpIHtcbiAgICAgICAgICAgICAgcHJvcGVydGllcy5tZWxlZSA9IHRydWVcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXYuY3VycmVudFRhcmdldC5kYXRhc2V0LnJuZ2QpIHtcbiAgICAgICAgICAgICAgcHJvcGVydGllcy5ybmdkID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eVdlYXBvbihldiwgcHJvcGVydGllcylcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcuaXRlbS10cmFkZScpLmNsaWNrKHRoaXMuX29uVHJhZGVJdGVtLmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5hZGQtbmV3LXNlY3Rpb24nKS5jbGljaygoKSA9PiB7XG4gICAgICB0aGlzLmFjdG9yLmNyZWF0ZUJpb1NlY3Rpb24oKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5kZWxldGUtc2VjdGlvbicpLmNsaWNrKGV2ID0+IHtcbiAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoXG4gICAgICAgIGV2LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmJpby1zZWN0aW9uJykuZGF0YXNldC5pbmRleFxuICAgICAgKVxuICAgICAgdGhpcy5hY3Rvci5kZWxldGVCaW9TZWN0aW9uKGluZGV4KVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5tb3ZlLXNlY3Rpb24tdXAnKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5iaW8tc2VjdGlvbicpLmRhdGFzZXQuaW5kZXhcbiAgICAgIClcbiAgICAgIHRoaXMuYWN0b3IubW92ZUJpb1NlY3Rpb25VcChpbmRleClcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcubW92ZS1zZWN0aW9uLWRvd24nKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5iaW8tc2VjdGlvbicpLmRhdGFzZXQuaW5kZXhcbiAgICAgIClcbiAgICAgIHRoaXMuYWN0b3IubW92ZUJpb1NlY3Rpb25Eb3duKGluZGV4KVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5kZXZlbG9wbWVudC1mbGFnJykuZGJsY2xpY2soZXYgPT4ge1xuICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgIClcbiAgICAgIGl0ZW0udG9nZ2xlSXRlbUZsYWcoJ2RldmVsb3BlbWVudCcpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLm9jY3VwYXRpb24tc2tpbGwtZmxhZy5jbGlja2FibGUnKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgIGV2LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgKVxuICAgICAgaXRlbS50b2dnbGVJdGVtRmxhZygnb2NjdXBhdGlvbicpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmFyY2hldHlwZS1za2lsbC1mbGFnLmNsaWNrYWJsZScpLmNsaWNrKGV2ID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgZXYuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICApXG4gICAgICBpdGVtLnRvZ2dsZUl0ZW1GbGFnKCdhcmNoZXR5cGUnKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5za2lsbC1kZXZlbG9wZW1lbnQnKS5jbGljayhldmVudCA9PiB7XG4gICAgICB0aGlzLmFjdG9yLmRldmVsb3BlbWVudFBoYXNlKGV2ZW50LnNoaWZ0S2V5KVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5sdWNrLWRldmVsb3BtZW50JykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgaWYgKCFldmVudC5kZXRhaWwgfHwgZXZlbnQuZGV0YWlsID09PSAxKSB7XG4gICAgICAgIHRoaXMuYWN0b3IuZGV2ZWxvcEx1Y2soZXZlbnQuc2hpZnRLZXkpXG4gICAgICB9XG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmNsZWFyX2NvbmRpdGlvbnMnKS5jbGljayhldmVudCA9PiB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuYWN0b3IuZGF0YS5kYXRhLmNvbmRpdGlvbnMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnN0IGRpc2FibGUgPSB7fVxuICAgICAgICBmb3IgKGNvbnN0IGNvbmRpdGlvbiBpbiB0aGlzLmFjdG9yLmRhdGEuZGF0YS5jb25kaXRpb25zKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdHlwZW9mIHRoaXMuYWN0b3IuZGF0YS5kYXRhLmNvbmRpdGlvbnNbY29uZGl0aW9uXS52YWx1ZSAhPT1cbiAgICAgICAgICAgICAgJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgIHRoaXMuYWN0b3IuZGF0YS5kYXRhLmNvbmRpdGlvbnNbY29uZGl0aW9uXS52YWx1ZSA9PT0gdHJ1ZVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgZGlzYWJsZVtgZGF0YS5jb25kaXRpb25zLiR7Y29uZGl0aW9ufS52YWx1ZWBdID0gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGRpc2FibGUpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLmFjdG9yLnVwZGF0ZShkaXNhYmxlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBlZmZlY3RzID0gdGhpcy5hY3Rvci5lZmZlY3RzLm1hcChlZmZlY3QgPT4gZWZmZWN0LmlkKVxuICAgICAgaWYgKGVmZmVjdHMubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLmFjdG9yLmRlbGV0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBlZmZlY3RzKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJ2EuY29jNy1saW5rJykub24oJ2NsaWNrJywgZXZlbnQgPT4gQ29DN1BhcnNlci5fb25DaGVjayhldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ2EuY29jNy1saW5rJylcbiAgICAgIC5vbignZHJhZ3N0YXJ0JywgZXZlbnQgPT4gQ29DN1BhcnNlci5fb25EcmFnQ29DN0xpbmsoZXZlbnQpKVxuXG4gICAgaHRtbC5maW5kKCcudGVzdC10cmlnZ2VyJykuY2xpY2soYXN5bmMgZXZlbnQgPT4ge1xuICAgICAgY29uc3QgdGVzdCA9IG5ldyBUZXN0Q2FyZCh7fSlcbiAgICAgIHRlc3QudG9NZXNzYWdlKClcbiAgICAgIC8vIGF3YWl0IE9wcG9zZWRDaGVja0NhcmQuZGlzcGF0Y2goe1xuICAgICAgLy8gICB0eXBlOiBPcHBvc2VkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgIC8vICAgY29tYmF0OiBmYWxzZSxcbiAgICAgIC8vICAgYWN0aW9uOiAnbmV3JyxcbiAgICAgIC8vICAgcm9sbDoge1xuICAgICAgLy8gICAgIGNoYXJhY3RlcmlzdGljOiAnc3RyJyxcbiAgICAgIC8vICAgICBhY3RvcjogdGhpcy5hY3Rvci5hY3RvcktleVxuICAgICAgLy8gICB9XG4gICAgICAvLyB9KVxuXG4gICAgICAvLyBhd2FpdCBPcHBvc2VkQ2hlY2tDYXJkLmRpc3BhdGNoKHtcbiAgICAgIC8vICAgdHlwZTogT3Bwb3NlZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnLnR5cGUsXG4gICAgICAvLyAgIGNvbWJhdDogZmFsc2UsXG4gICAgICAvLyAgIGFjdGlvbjogJ25ldycsXG4gICAgICAvLyAgIHJvbGw6IHtcbiAgICAgIC8vICAgICBjaGFyYWN0ZXJpc3RpYzogJ2NvbidcbiAgICAgIC8vIGFjdG9yOiB0aGlzLmFjdG9yLmFjdG9yS2V5XG4gICAgICAvLyAgIH1cbiAgICAgIC8vIH0pXG4gICAgICAvLyBjb25zdCB2YWwgPSBnZXRQcm9wZXJ0eSggdGhpcy5hY3RvciwgJ2RhdGEuZGF0YS5hdHRyaWJzLnNhbi52YWx1ZScpO1xuXG4gICAgICAvLyB0aGlzLmFjdG9yLmVudGVyQm91dE9mTWFkbmVzcyggdHJ1ZSwgMTApO1xuXG4gICAgICAvLyBjb25zdCByb2xsID0gbmV3IENvQzdDaGVjaygpO1xuICAgICAgLy8gcm9sbC5hY3RvciA9IHRoaXMuYWN0b3JLZXk7XG4gICAgICAvLyByb2xsLmF0dHJpYnV0ZSA9ICdzYW4nO1xuICAgICAgLy8gcm9sbC5kaWZmaWN1bHR5ID0gdGhpcy5vcHRpb25zLnNhbkRpZmZpY3VsdHkgfHwgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyO1xuICAgICAgLy8gcm9sbC5kaWNlTW9kaWZpZXIgPSB0aGlzLm9wdGlvbnMuc2FuTW9kaWZpZXIgfHwgMDtcbiAgICAgIC8vIGF3YWl0IHJvbGwuX3BlcmZvcm0oKTtcblxuICAgICAgLy8gZm9yIChjb25zdCBlZmZlY3Qgb2YgdGhpcy5hY3Rvci5lZmZlY3RzKSB7XG4gICAgICAvLyAgYXdhaXQgZWZmZWN0LnNoZWV0LnJlbmRlcih0cnVlKTtcbiAgICAgIC8vICAvLyBlZmZlY3QuZGVsZXRlKCk7XG4gICAgICAvLyB9XG4gICAgICAvLyBmb3IgKGNvbnN0IGUgb2YgdGhpcy5hY3Rvci5lZmZlY3RzKSB7IGUuZGVsZXRlKCkgfVxuICAgICAgLy8gYXdhaXQgc2V0UHJvcGVydHkoIHRoaXMuYWN0b3IsICdkYXRhLmRhdGEuZW5jb3VudGVyZWRDcmVhdHVyZXMnLCBbXSk7XG5cbiAgICAgIC8vIGF3YWl0IHRoaXMuYWN0b3IudXBkYXRlKCB7WydkYXRhLmVuY291bnRlcmVkQ3JlYXR1cmVzJ10gOiBbXX0pO1xuICAgICAgLy8gaWYgKGV2ZW50LnNoaWZ0S2V5KSB1aS5ub3RpZmljYXRpb25zLmluZm8oJ1NoaWZ0IGNsaWVja2VkJylcbiAgICAgIC8vIFNhbkNoZWNrQ2FyZC5jcmVhdGUoIHRoaXMuYWN0b3IuYWN0b3JLZXksIHttaW46JzFEMTAnLG1heDonMUQxMid9LCB7ZmFzdEZvcndhcmQ6ZXZlbnQuc2hpZnRLZXl9KTtcbiAgICB9KVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuc2tpbGwtbmFtZS5yb2xsYWJsZScpXG4gICAgICAubW91c2VlbnRlcih0aGlzLnRvb2xUaXBTa2lsbEVudGVyLmJpbmQodGhpcykpXG4gICAgICAubW91c2VsZWF2ZShnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwTGVhdmUuYmluZCh0aGlzKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLmNoYXJhY3RlcmlzdGljLWxhYmVsJylcbiAgICAgIC5tb3VzZWVudGVyKHRoaXMudG9vbFRpcENoYXJhY3RlcmlzdGljRW50ZXIuYmluZCh0aGlzKSlcbiAgICAgIC5tb3VzZWxlYXZlKGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBMZWF2ZS5iaW5kKHRoaXMpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuYXR0cmlidXRlLWxhYmVsLnJvbGxhYmxlJylcbiAgICAgIC5tb3VzZWVudGVyKHRoaXMudG9vbFRpcEF0dHJpYnV0ZUVudGVyLmJpbmQodGhpcykpXG4gICAgICAubW91c2VsZWF2ZShnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwTGVhdmUuYmluZCh0aGlzKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLmF1dG8tdG9nZ2xlJylcbiAgICAgIC5tb3VzZWVudGVyKHRoaXMudG9vbFRpcEF1dG9FbnRlci5iaW5kKHRoaXMpKVxuICAgICAgLm1vdXNlbGVhdmUoZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcExlYXZlLmJpbmQodGhpcykpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5pdGVtLWNvbnRyb2wuZGV2ZWxvcG1lbnQtZmxhZycpXG4gICAgICAubW91c2VlbnRlcih0aGlzLnRvb2xUaXBGbGFnRm9yRGV2ZWxvcG1lbnQuYmluZCh0aGlzKSlcbiAgICAgIC5tb3VzZWxlYXZlKGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBMZWF2ZS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgdG9vbFRpcFNraWxsRW50ZXIgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBjb25zdCBzaGVldCA9IHRoaXNcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXNDb21iYXQgPVxuICAgICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyLmNsYXNzTGlzdD8uY29udGFpbnMoJ2NvbWJhdCcpXG4gICAgICAgICAgY29uc3QgaXRlbSA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbG9zZXN0KCcuaXRlbScpXG4gICAgICAgICAgaWYgKHR5cGVvZiBpdGVtICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY29uc3Qgc2tpbGxJZCA9IGl0ZW0uZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgICBjb25zdCBza2lsbCA9IHNoZWV0LmFjdG9yLml0ZW1zLmdldChza2lsbElkKVxuICAgICAgICAgICAgbGV0IHRvb2xUaXAgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICBpc0NvbWJhdCA/ICdDb0M3LlRvb2xUaXBDb21iYXQnIDogJ0NvQzcuVG9vbFRpcFNraWxsJyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNraWxsOiBza2lsbC5uYW1lLFxuICAgICAgICAgICAgICAgIHJlZ3VsYXI6IHNraWxsLnZhbHVlLFxuICAgICAgICAgICAgICAgIGhhcmQ6IE1hdGguZmxvb3Ioc2tpbGwudmFsdWUgLyAyKSxcbiAgICAgICAgICAgICAgICBleHRyZW1lOiBNYXRoLmZsb29yKHNraWxsLnZhbHVlIC8gNSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgICAgIHRvb2xUaXAgPVxuICAgICAgICAgICAgICAgIHRvb2xUaXAgK1xuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclNraWxsJywge1xuICAgICAgICAgICAgICAgICAgb3RoZXI6XG4gICAgICAgICAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnKSAmJlxuICAgICAgICAgICAgICAgICAgICBzaGVldC5hY3Rvci5oYXNQbGF5ZXJPd25lclxuICAgICAgICAgICAgICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU3RhbmRieVNraWxsJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc2hlZXQuYWN0b3IubmFtZVxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5kaXNwbGF5VG9vbFRpcCh0b29sVGlwKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgZGVsYXkpXG4gICAgfVxuICB9XG5cbiAgdG9vbFRpcENoYXJhY3RlcmlzdGljRW50ZXIgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBjb25zdCBzaGVldCA9IHRoaXNcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgY2hhciA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbG9zZXN0KCcuY2hhci1ib3gnKVxuICAgICAgICAgIGlmICh0eXBlb2YgY2hhciAhPT0gJ3VuZGVmaW5lZCcgJiYgISFjaGFyKSB7XG4gICAgICAgICAgICBjb25zdCBjaGFySWQgPSBjaGFyLmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNcbiAgICAgICAgICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljID0gc2hlZXQuYWN0b3IuY2hhcmFjdGVyaXN0aWNzW2NoYXJJZF1cbiAgICAgICAgICAgIGxldCB0b29sVGlwID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwU2tpbGwnLCB7XG4gICAgICAgICAgICAgIHNraWxsOiBjaGFyYWN0ZXJpc3RpYy5sYWJlbCxcbiAgICAgICAgICAgICAgcmVndWxhcjogY2hhcmFjdGVyaXN0aWMudmFsdWUgPz8gMCxcbiAgICAgICAgICAgICAgaGFyZDogY2hhcmFjdGVyaXN0aWMuaGFyZCA/PyAwLFxuICAgICAgICAgICAgICBleHRyZW1lOiBjaGFyYWN0ZXJpc3RpYy5leHRyZW1lID8/IDBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgICAgICAgdG9vbFRpcCA9XG4gICAgICAgICAgICAgICAgdG9vbFRpcCArXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICBvdGhlcjpcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycpICYmXG4gICAgICAgICAgICAgICAgICAgIHNoZWV0LmFjdG9yLmhhc1BsYXllck93bmVyXG4gICAgICAgICAgICAgICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTdGFuZGJ5U2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzaGVldC5hY3Rvci5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBkZWxheSlcbiAgICB9XG4gIH1cblxuICB0b29sVGlwQXR0cmlidXRlRW50ZXIgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBjb25zdCBzaGVldCA9IHRoaXNcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgYXR0cmliID0gZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyLmNsb3Nlc3QoJy5hdHRyaWJ1dGUnKVxuICAgICAgICAgIGlmICh0eXBlb2YgYXR0cmliICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlSWQgPSBhdHRyaWIuZGF0YXNldC5hdHRyaWJcbiAgICAgICAgICAgIGxldCB0b29sVGlwID0gJydcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBzaGVldC5hY3Rvci5kYXRhLmRhdGEuYXR0cmlic1thdHRyaWJ1dGVJZF1cbiAgICAgICAgICAgIHN3aXRjaCAoYXR0cmlidXRlSWQpIHtcbiAgICAgICAgICAgICAgY2FzZSAnbGNrJzpcbiAgICAgICAgICAgICAgICB0b29sVGlwID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwU2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICBza2lsbDogYXR0cmlidXRlcy5sYWJlbCxcbiAgICAgICAgICAgICAgICAgIHJlZ3VsYXI6IGF0dHJpYnV0ZXMudmFsdWUgPz8gMCxcbiAgICAgICAgICAgICAgICAgIGhhcmQ6IE1hdGguZmxvb3IoKGF0dHJpYnV0ZXMudmFsdWUgPz8gMCkgLyAyKSxcbiAgICAgICAgICAgICAgICAgIGV4dHJlbWU6IE1hdGguZmxvb3IoKGF0dHJpYnV0ZXMudmFsdWUgPz8gMCkgLyA1KVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgICAgICAgICB0b29sVGlwID1cbiAgICAgICAgICAgICAgICAgICAgdG9vbFRpcCArXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclNraWxsJywge1xuICAgICAgICAgICAgICAgICAgICAgIG90aGVyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGVldC5hY3Rvci5oYXNQbGF5ZXJPd25lclxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclN0YW5kYnlTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzaGVldC5hY3Rvci5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogJydcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuZGlzcGxheVRvb2xUaXAodG9vbFRpcClcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICBjYXNlICdkYic6XG4gICAgICAgICAgICAgICAgdG9vbFRpcCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ub29sVGlwREInKVxuICAgICAgICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgY2FzZSAnc2FuJzpcbiAgICAgICAgICAgICAgICB0b29sVGlwID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwU2FuaXR5Jywge1xuICAgICAgICAgICAgICAgICAgc2tpbGw6ICdTYW5pdHknLFxuICAgICAgICAgICAgICAgICAgcmVndWxhcjogYXR0cmlidXRlcy52YWx1ZSA/PyAwLFxuICAgICAgICAgICAgICAgICAgaGFyZDogTWF0aC5mbG9vcigoYXR0cmlidXRlcy52YWx1ZSA/PyAwKSAvIDIpLFxuICAgICAgICAgICAgICAgICAgZXh0cmVtZTogTWF0aC5mbG9vcigoYXR0cmlidXRlcy52YWx1ZSA/PyAwKSAvIDUpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgICAgICAgICAgIHRvb2xUaXAgPVxuICAgICAgICAgICAgICAgICAgICB0b29sVGlwICtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgb3RoZXI6XG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9vbFRpcEtlZXBlclNhbml0eScpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzdGFuYnlHTVJvbGxzJykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoZWV0LmFjdG9yLmhhc1BsYXllck93bmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU3RhbmRieVNraWxsJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHNoZWV0LmFjdG9yLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnJylcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuZGlzcGxheVRvb2xUaXAodG9vbFRpcClcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgZGVsYXkpXG4gICAgfVxuICB9XG5cbiAgdG9vbFRpcEF1dG9FbnRlciAoZXZlbnQpIHtcbiAgICBjb25zdCBkZWxheSA9IHBhcnNlSW50KGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Rvb2xUaXBEZWxheScpKVxuICAgIGlmIChkZWxheSA+IDApIHtcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgdG9vbFRpcCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ub29sVGlwQXV0b1RvZ2dsZScpXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuZGlzcGxheVRvb2xUaXAodG9vbFRpcClcbiAgICAgICAgfVxuICAgICAgfSwgZGVsYXkpXG4gICAgfVxuICB9XG5cbiAgdG9vbFRpcEZsYWdGb3JEZXZlbG9wbWVudCAoZXZlbnQpIHtcbiAgICBjb25zdCBkZWxheSA9IHBhcnNlSW50KGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Rvb2xUaXBEZWxheScpKVxuICAgIGlmIChkZWxheSA+IDApIHtcbiAgICAgIGNvbnN0IHNoZWV0ID0gdGhpc1xuICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gbnVsbFxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyLmNsb3Nlc3QoJy5pdGVtJylcbiAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjb25zdCBza2lsbElkID0gaXRlbS5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgICAgIGNvbnN0IHNraWxsID0gc2hlZXQuYWN0b3IuaXRlbXMuZ2V0KHNraWxsSWQpXG4gICAgICAgICAgICBjb25zdCB0b29sVGlwID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwU2tpbGxGbGFnVG9nZ2xlJywge1xuICAgICAgICAgICAgICBzdGF0dXM6IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICBza2lsbC5kYXRhLmRhdGEuZmxhZ3MuZGV2ZWxvcGVtZW50XG4gICAgICAgICAgICAgICAgICA/ICdDb0M3LlRvb2xUaXBTa2lsbEZsYWdnZWQnXG4gICAgICAgICAgICAgICAgICA6ICdDb0M3LlRvb2xUaXBTa2lsbFVuZmxhZ2dlZCdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBkZWxheSlcbiAgICB9XG4gIH1cblxuICBfb25SZW5kZXJJdGVtU2hlZXQgKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJykpXG4gICAgaXRlbS5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vblRyYWRlSXRlbSAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtSWQnKSlcbiAgICBsZXQgY29udGVudCA9ICc8cD4nICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VTZWxlY3RVc2VyVG9HaXZlVG8nKVxuICAgIGNvbnN0IG1lc3NhZ2UgPSB7XG4gICAgICBhY3RvckZyb206IHRoaXMuYWN0b3IuaWQsXG4gICAgICBzY2VuZTogbnVsbCxcbiAgICAgIGFjdG9yVG86IHRoaXMuYWN0b3IuaWQsXG4gICAgICBpdGVtOiBpdGVtLmlkXG4gICAgfVxuICAgIGlmICh0aGlzLnRva2VuPy5hY3Rvcikge1xuICAgICAgbWVzc2FnZS5hY3RvckZyb20gPSB0aGlzLnRva2VuLmlkXG4gICAgICBtZXNzYWdlLnNjZW5lID0gdGhpcy50b2tlbi5wYXJlbnQuaWRcbiAgICB9XG4gICAgY29uc3QgYWN0b3JzID0gZ2FtZS5hY3RvcnMuZmlsdGVyKGUgPT4ge1xuICAgICAgaWYgKCFbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnLCAnY29udGFpbmVyJ10uaW5jbHVkZXMoZS50eXBlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmFjdG9yLmlkID09PSBlLmlkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgbGV0IHZpc2libGUgPSBmYWxzZVxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZS5kYXRhLnBlcm1pc3Npb24pKSB7XG4gICAgICAgIGlmIChrID09PSAnZGVmYXVsdCcgfHwgayA9PT0gZ2FtZS51c2VyLmlkKSB7XG4gICAgICAgICAgdmlzaWJsZSA9XG4gICAgICAgICAgICB2aXNpYmxlIHx8XG4gICAgICAgICAgICB2ICE9PVxuICAgICAgICAgICAgICAoQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUyB8fCBDT05TVC5FTlRJVFlfUEVSTUlTU0lPTlMpLk5PTkVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHZpc2libGVcbiAgICB9KVxuICAgIGNvbnRlbnQgPSBjb250ZW50ICsgJzxmb3JtIGlkPVwic2VsZWN0Zm9ybVwiPjxzZWxlY3QgbmFtZT1cInVzZXJcIj4nXG4gICAgZm9yIChjb25zdCBhY3RvciBvZiBhY3RvcnMpIHtcbiAgICAgIGNvbnRlbnQgPVxuICAgICAgICBjb250ZW50ICsgJzxvcHRpb24gdmFsdWU9XCInICsgYWN0b3IuaWQgKyAnXCI+JyArIGFjdG9yLm5hbWUgKyAnPC9vcHRpb24+J1xuICAgIH1cbiAgICBjb250ZW50ID0gY29udGVudCArICc8L3NlbGVjdD48L2Zvcm0+PC9wPidcbiAgICBtZXNzYWdlLmFjdG9yVG8gPSBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBEaWFsb2coe1xuICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VUaXRsZVNlbGVjdFVzZXJUb0dpdmVUbycpLFxuICAgICAgICBjb250ZW50OiBjb250ZW50LFxuICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgY29uZmlybToge1xuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5WYWxpZGF0ZScpLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGh0bWwgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShcbiAgICAgICAgICAgICAgICBodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNzZWxlY3Rmb3JtJylcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtuYW1lLCB2YWx1ZV0gb2YgZm9ybURhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gJ3VzZXInKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh2YWx1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHQ6ICdjb25maXJtJyxcbiAgICAgICAgY2xvc2U6ICgpID0+IHt9XG4gICAgICB9KVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gICAgYXdhaXQgZ2FtZS5Db0M3c29ja2V0LmV4ZWN1dGVBc0dNKCdnbXRyYWRlaXRlbXRvJywgbWVzc2FnZSlcbiAgfVxuXG4gIF9vbkRyYWdDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBjb25zdCBib3ggPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnRcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgQ29DN1R5cGU6ICdsaW5rJyxcbiAgICAgIGxpbmtUeXBlOiAnY29jNy1saW5rJyxcbiAgICAgIGNoZWNrOiAnY2hlY2snLFxuICAgICAgdHlwZTogJ2NoYXJhY3RlcmlzdGljJyxcbiAgICAgIGhhc1BsYXllck93bmVyOiB0aGlzLmFjdG9yLmhhc1BsYXllck93bmVyLFxuICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuYWN0b3JLZXksXG4gICAgICBuYW1lOiBib3guZGF0YXNldC5jaGFyYWN0ZXJpc3RpYyxcbiAgICAgIGljb246IG51bGxcbiAgICB9XG5cbiAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gIH1cblxuICBfb25EcmFnQXR0cmlidXRlIChldmVudCkge1xuICAgIGNvbnN0IGJveCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudFxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBDb0M3VHlwZTogJ2xpbmsnLFxuICAgICAgbGlua1R5cGU6ICdjb2M3LWxpbmsnLFxuICAgICAgY2hlY2s6ICdjaGVjaycsXG4gICAgICB0eXBlOiAnYXR0cmlidXRlJyxcbiAgICAgIGhhc1BsYXllck93bmVyOiB0aGlzLmFjdG9yLmhhc1BsYXllck93bmVyLFxuICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuYWN0b3JLZXksXG4gICAgICBuYW1lOiBib3guZGF0YXNldC5hdHRyaWIsXG4gICAgICBpY29uOiBudWxsXG4gICAgfVxuXG4gICAgZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuICB9XG5cbiAgX29uRHJhZ1NhbkNoZWNrIChldmVudCkge1xuICAgIGNvbnN0IHNhbk1pbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucXVlcnlTZWxlY3RvcignLnNhbi12YWx1ZS5wYXNzJylcbiAgICBjb25zdCBzYW5NYXggPSBldmVudC5jdXJyZW50VGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5zYW4tdmFsdWUuZmFpbGVkJylcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgQ29DN1R5cGU6ICdsaW5rJyxcbiAgICAgIGxpbmtUeXBlOiAnY29jNy1saW5rJyxcbiAgICAgIGNoZWNrOiAnc2FubG9zcycsXG4gICAgICBoYXNQbGF5ZXJPd25lcjogdGhpcy5hY3Rvci5oYXNQbGF5ZXJPd25lcixcbiAgICAgIGFjdG9yS2V5OiB0aGlzLmFjdG9yLmFjdG9yS2V5LFxuICAgICAgc2FuTWluOiBzYW5NaW4uaW5uZXJUZXh0LFxuICAgICAgc2FuTWF4OiBzYW5NYXguaW5uZXJUZXh0LFxuICAgICAgaWNvbjogbnVsbFxuICAgIH1cblxuICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50KSB7XG4gICAgYXdhaXQgc3VwZXIuX29uRHJvcChldmVudClcbiAgfVxuXG4gIGFzeW5jIF9vbkNvbmRpdGlvblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5jb25kaXRpb24pIHtcbiAgICAgIGF3YWl0IHRoaXMuYWN0b3IudG9nZ2xlQ29uZGl0aW9uKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5jb25kaXRpb24pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmV2aXZlICgpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHRoaXMuYWN0b3IudW5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZGVhZClcbiAgfVxuXG4gIGFzeW5jIGhlYWwgKCkge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgdGhpcy5hY3Rvci51bnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5keWluZylcbiAgfVxuXG4gIGFzeW5jIGNoZWNrRm9yRGVhdGggKGV2ZW50KSB7XG4gICAgY29uc3QgY29uQ2hlY2sgPSBuZXcgQ29DN0NvbkNoZWNrKFxuICAgICAgdGhpcy5hY3Rvci5pc1Rva2VuID8gdGhpcy5hY3Rvci50b2tlbktleSA6IHRoaXMuYWN0b3IuaWRcbiAgICApXG4gICAgY29uQ2hlY2suc3RheUFsaXZlID0gdHJ1ZVxuICAgIGNvbkNoZWNrLnRvTWVzc2FnZShldmVudC5zaGlmdEtleSlcbiAgfVxuXG4gIGFzeW5jIF9vblJlc2V0Q291bnRlciAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgY291bnRlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5jb3VudGVyXG4gICAgY29uc3Qgb25lRmlmdGhTYW5pdHkgPVxuICAgICAgJyAvICcgKyBNYXRoLmZsb29yKHRoaXMuYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnMuc2FuLnZhbHVlIC8gNSlcbiAgICB0aGlzLmFjdG9yLnNldE9uZUZpZnRoU2FuaXR5KG9uZUZpZnRoU2FuaXR5KVxuICAgIGlmIChjb3VudGVyKSB0aGlzLmFjdG9yLnJlc2V0Q291bnRlcihjb3VudGVyKVxuICB9XG5cbiAgYXN5bmMgX29uQXV0b1RvZ2dsZSAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYXR0cmlidXRlJykpIHtcbiAgICAgIGNvbnN0IGF0dHJpYiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmF0dHJpYnV0ZScpLmRhdGFzZXQuYXR0cmliXG4gICAgICB0aGlzLmFjdG9yLnRvZ2dsZUF0dHJpYkF1dG8oYXR0cmliKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgIClcbiAgICBpZiAod2VhcG9uKSB7XG4gICAgICB3ZWFwb24udG9nZ2xlUHJvcGVydHkoXG4gICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wcm9wZXJ0eSxcbiAgICAgICAgZXZlbnQubWV0YUtleSB8fFxuICAgICAgICAgIGV2ZW50LmN0cmxLZXkgfHxcbiAgICAgICAgICBldmVudC5rZXlDb2RlID09PSA5MSB8fFxuICAgICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDIyNFxuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIC8vIHJvbGwgdGhlIGFjdG9yIGNoYXJhY3RlcmlzdGljIGZyb20gZm9ybXVsYSB3aGVuIHBvc3NpYmxlLlxuICBhc3luYyBfb25Sb2xsQ2hhcmFjdGVyaXRpY3NWYWx1ZSAoKSB7XG4gICAgYXdhaXQgdGhpcy5hY3Rvci5yb2xsQ2hhcmFjdGVyaXN0aWNzVmFsdWUoKVxuICB9XG5cbiAgYXN5bmMgX29uQXZlcmFnZUNoYXJhY3Rlcml0aWNzVmFsdWUgKCkge1xuICAgIHRoaXMuYWN0b3IuYXZlcmFnZUNoYXJhY3RlcmlzdGljc1ZhbHVlKClcbiAgfVxuXG4gIGFzeW5jIF9vbkxvY2tDbGlja2VkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBpc0xvY2tlZCA9IHRoaXMuYWN0b3IubG9ja2VkXG4gICAgdGhpcy5hY3Rvci5sb2NrZWQgPSAhaXNMb2NrZWRcbiAgICBIb29rcy5jYWxsKCdhY3RvckxvY2tDbGlja2VkQ29DNycsIFshaXNMb2NrZWRdKVxuICB9XG5cbiAgYXN5bmMgX29uRmxhZ0NsaWNrZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGZsYWdOYW1lID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWdcbiAgICB0aGlzLmFjdG9yLnRvZ2dsZUFjdG9yRmxhZyhmbGFnTmFtZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkZvcm11bGFDbGlja2VkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICB0aGlzLmFjdG9yLnRvZ2dsZUFjdG9yRmxhZygnZGlzcGxheUZvcm11bGEnKVxuICB9XG5cbiAgYXN5bmMgX29uV2hlZWwgKGV2ZW50KSB7XG4gICAgbGV0IHZhbHVlID0gcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICBpZiAoZXZlbnQuZGVsdGFZID4gMCkge1xuICAgICAgdmFsdWUgPSB2YWx1ZSA9PT0gMCA/IDAgOiB2YWx1ZSAtIDFcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuZGVsdGFZIDwgMCkge1xuICAgICAgdmFsdWUgPSB2YWx1ZSArIDFcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSkge1xuICAgICAgY2FzZSAnZGF0YS5hdHRyaWJzLmhwLnZhbHVlJzpcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRIcCh2YWx1ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2RhdGEuYXR0cmlicy5tcC52YWx1ZSc6XG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0TXAodmFsdWUpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdkYXRhLmF0dHJpYnMuc2FuLnZhbHVlJzpcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRTYW4odmFsdWUpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdkYXRhLmF0dHJpYnMubGNrLnZhbHVlJzpcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRMdWNrKHZhbHVlKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnZGF0YS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldEhwKHZhbHVlKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIF90b2dnbGVSZWFkT25seSAoZXZlbnQpIHtcbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LnJlYWRPbmx5ID0gIWV2ZW50LmN1cnJlbnRUYXJnZXQucmVhZE9ubHlcbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ3JlYWQtb25seScpXG4gIH1cblxuICBfb25JdGVtU3VtbWFyeSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbS1pZCcpKVxuICAgIGNvbnN0IGNoYXREYXRhID0gaXRlbS5nZXRDaGF0RGF0YSh7IHNlY3JldHM6IHRoaXMuYWN0b3IuaXNPd25lciB9KVxuXG4gICAgLy8gVG9nZ2xlIHN1bW1hcnlcbiAgICBpZiAobGkuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBsaS5jaGlsZHJlbignLml0ZW0tc3VtbWFyeScpXG4gICAgICBzdW1tYXJ5LnNsaWRlVXAoMjAwLCAoKSA9PiBzdW1tYXJ5LnJlbW92ZSgpKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkaXYgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1zdW1tYXJ5XCI+PC9kaXY+JylcblxuICAgICAgY29uc3QgbGFiZWxzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tbGFiZWxzXCI+PC9kaXY+JylcbiAgICAgIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5sYWJlbHMpIHtcbiAgICAgICAgbGFiZWxzLmFwcGVuZChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cIml0ZW0tbGFiZWxcIj48c3BhbiBjbGFzcz1cImxhYmVsLW5hbWVcIj4ke3AubmFtZX0gOjwvc3Bhbj48c3BhbiBjbGFzcz1cImxhYmVsLXZhbHVlXCI+JHtwLnZhbHVlfTwvc3Bhbj48L2Rpdj5gXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGRpdi5hcHBlbmQobGFiZWxzKVxuXG4gICAgICBkaXYuYXBwZW5kKFxuICAgICAgICAkKGA8ZGl2IGNsYXNzPVwiaXRlbS1kZXNjcmlwdGlvblwiPiR7Y2hhdERhdGEuZGVzY3JpcHRpb24udmFsdWV9PC9kaXY+YClcbiAgICAgIClcblxuICAgICAgaWYgKGl0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXM/LnNwY2wpIHtcbiAgICAgICAgY29uc3Qgc3BlY2lhbERpdiA9ICQoXG4gICAgICAgICAgYDxkaXYgY2xhc3M9XCJpdGVtLXNwZWNpYWxcIj4ke2NoYXREYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWx9PC9kaXY+YFxuICAgICAgICApXG4gICAgICAgIGRpdi5hcHBlbmQoc3BlY2lhbERpdilcbiAgICAgIH1cblxuICAgICAgY29uc3QgcHJvcHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1wcm9wZXJ0aWVzXCI+PC9kaXY+JylcbiAgICAgIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgIHByb3BzLmFwcGVuZChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cInRhZyBpdGVtLXByb3BlcnR5XCI+JHtnYW1lLmkxOG4ubG9jYWxpemUocCl9PC9kaXY+YFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBkaXYuYXBwZW5kKHByb3BzKVxuXG4gICAgICBsaS5hcHBlbmQoZGl2LmhpZGUoKSlcbiAgICAgIENvQzdQYXJzZXIuYmluZEV2ZW50c0hhbmRsZXIoZGl2KVxuICAgICAgZGl2LnNsaWRlRG93bigyMDApXG4gICAgfVxuICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gICAgLy8gJChldmVudC5jdXJyZW50VGFyZ2V0KS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKTtcbiAgfVxuXG4gIF9vblNlY3Rpb25IZWFkZXIgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIC8vIGxldCBzZWN0aW9uID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCdzZWN0aW9uJyksXG4gICAgLy8gIHBhbm5lbENsYXNzID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5kYXRhKCdwYW5uZWwnKSxcbiAgICAvLyAgcGFubmVsID0gc2VjdGlvbi5maW5kKCBgLiR7cGFubmVsQ2xhc3N9YCk7XG4gICAgLy8gcGFubmVsLnRvZ2dsZSgpO1xuICAgIGNvbnN0IHNlY3Rpb24gPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ3NlY3Rpb24nKVxuICAgIGNvbnN0IHBhbm5lbENsYXNzID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnBhbm5lbFxuICAgIGNvbnN0IHBhbm5lbCA9ICQoc2VjdGlvbikuZmluZChgLnBhbm5lbC4ke3Bhbm5lbENsYXNzfWApXG4gICAgLy8gcGFubmVsLnRvZ2dsZSgpO1xuICAgIGlmIChwYW5uZWwuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgIHBhbm5lbC5zbGlkZVVwKDIwMClcbiAgICB9IGVsc2Uge1xuICAgICAgcGFubmVsLnNsaWRlRG93bigyMDApXG4gICAgfVxuICAgIHBhbm5lbC50b2dnbGVDbGFzcygnZXhwYW5kZWQnKVxuICB9XG5cbiAgX29uSW52ZW50b3J5SGVhZGVyIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnNpYmxpbmdzKCdsaScpLnRvZ2dsZSgpXG4gIH1cblxuICBhc3luYyBfb25JdGVtUG9wdXAgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW0taWQnKSlcblxuICAgIENvQzdBY3RvclNoZWV0LnBvcHVwU2tpbGwoaXRlbSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBwb3B1cFNraWxsIChza2lsbCkge1xuICAgIHNraWxsLmRhdGEuZGF0YS5kZXNjcmlwdGlvbi5lbnJpY2hlZFZhbHVlID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2tpbGwuZGF0YS5kYXRhLmRlc2NyaXB0aW9uLnZhbHVlXG4gICAgKVxuICAgIC8vIGdhbWUuQ29DNy5lbnJpY2hlciggc2tpbGwuZGF0YS5kYXRhLmRlc2NyaXB0aW9uLmVucmljaGVkVmFsdWUpO1xuICAgIGNvbnN0IGRsZyA9IG5ldyBEaWFsb2coXG4gICAgICB7XG4gICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxEZXRhaWxzV2luZG93JyksXG4gICAgICAgIGNvbnRlbnQ6IHNraWxsLFxuICAgICAgICBidXR0b25zOiB7fSxcbiAgICAgICAgY2xvc2U6ICgpID0+IHt9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnc2tpbGwnXSxcbiAgICAgICAgd2lkdGg6IDUyMCxcbiAgICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICAgIHNjcm9sbFk6IFsnLml0ZW0tZGVzY3JpcHRpb24nXSxcbiAgICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2tpbGwtZGV0YWlscy5odG1sJ1xuICAgICAgfVxuICAgIClcbiAgICBkbGcucmVuZGVyKHRydWUpXG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHJvbGxpbmcgb2YgYW4gaXRlbSBmcm9tIHRoZSBBY3RvciBzaGVldCwgb2J0YWluaW5nIHRoZSBJdGVtIGluc3RhbmNlIGFuZCBkaXNwYXRjaGluZyB0byBpdCdzIHJvbGwgbWV0aG9kXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhc3luYyBfb25JdGVtUm9sbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLy8gY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkO1xuICAgIC8vIGNvbnN0IGFjdG9ySWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LmFjdG9ySWQ7XG4gICAgLy8gY29uc3QgdG9rZW5LZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LnRva2VuSWQ7XG4gICAgLy8gbGV0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpO1xuXG4gICAgLy8gY2hlY2suYWN0b3IgPSAhdG9rZW5LZXkgPyBhY3RvcklkIDogdG9rZW5LZXk7XG4gICAgLy8gY2hlY2suaXRlbSA9IGl0ZW1JZDtcbiAgICAvLyBjaGVjay5yb2xsKCk7XG4gICAgLy8gY2hlY2sudG9NZXNzYWdlKCk7XG4gIH1cblxuICBhc3luYyBfb25XZWFwb25Sb2xsIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBpdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2xpJykuZGF0YXNldC5pdGVtSWRcbiAgICBjb25zdCBmYXN0Rm9yd2FyZCA9IGV2ZW50LnNoaWZ0S2V5XG4gICAgY29uc3Qgd2VhcG9uID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoaXRlbUlkKVxuICAgIC8vIGNvbnN0IGFjdG9yS2V5ID0gIXRoaXMudG9rZW4/IHRoaXMuYWN0b3IuYWN0b3JLZXkgOiBgJHt0aGlzLnRva2VuLnNjZW5lPy5faWQ/dGhpcy50b2tlbi5zY2VuZS5faWQ6J1RPS0VOJ30uJHt0aGlzLnRva2VuLmRhdGEuX2lkfWA7IC8vUkVGQUNUT1JJTkcgKDIpXG4gICAgLyoqICogTU9ESUYgMC44LnggKioqL1xuICAgIGxldCBhY3RvcktleVxuICAgIGlmICghdGhpcy50b2tlbikgYWN0b3JLZXkgPSB0aGlzLmFjdG9yLmlkXG4gICAgLy8gU2hlZXQgd2FzIG9wZW5lZCBmcm9tIGFjdG9yIGRpcmVjdG9yeVxuICAgIGVsc2Uge1xuICAgICAgLy8gT3BlbmVkIGZyb20gdG9rZW5cbiAgICAgIGlmICh0aGlzLmFjdG9yLmlzVG9rZW4gJiYgZ2FtZS5hY3RvcnMudG9rZW5zW3RoaXMudG9rZW4uaWRdKSB7XG4gICAgICAgIGFjdG9yS2V5ID0gYFRPS0VOLiR7dGhpcy50b2tlbi5pZH1gXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY3RvcktleSA9IGAke3RoaXMudG9rZW4ucGFyZW50LmlkfS4ke3RoaXMudG9rZW4uaWR9YFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpc0N0cmxLZXkoZXZlbnQpICYmIGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBjb25zdCBsaW5rRGF0YSA9IHtcbiAgICAgICAgY2hlY2s6ICdpdGVtJyxcbiAgICAgICAgdHlwZTogJ3dlYXBvbicsXG4gICAgICAgIG5hbWU6IHdlYXBvbi5uYW1lLFxuICAgICAgICBoYXNQbGF5ZXJPd25lcjogdGhpcy5hY3Rvci5oYXNQbGF5ZXJPd25lcixcbiAgICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuYWN0b3JLZXlcbiAgICAgIH1cblxuICAgICAgQ29DN0xpbmtDcmVhdGlvbkRpYWxvZy5mcm9tTGlua0RhdGEobGlua0RhdGEpLnRoZW4oZGxnID0+XG4gICAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHByb2NlZWRXaXRob3V0VGFyZ2V0XG4gICAgICBpZiAoZ2FtZS51c2VyLnRhcmdldHMuc2l6ZSA8PSAwKSB7XG4gICAgICAgIHByb2NlZWRXaXRob3V0VGFyZ2V0ID0gYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICAgIHRpdGxlOiAnICcsXG4gICAgICAgICAgICBjb250ZW50OiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk5vVGFyZ2V0U2VsZWN0ZWQnLCB7XG4gICAgICAgICAgICAgIHdlYXBvbjogd2VhcG9uLm5hbWVcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgICBjYW5jZWw6IHtcbiAgICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtdGltZXNcIj48L2k+JyxcbiAgICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNhbmNlbCcpLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHByb2NlZWQ6IHtcbiAgICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtY2hlY2tcIj48L2k+JyxcbiAgICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlByb2NlZWQnKSxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodHJ1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWZhdWx0OiAnY2FuY2VsJyxcbiAgICAgICAgICAgIGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnXVxuICAgICAgICAgIH1cbiAgICAgICAgICBuZXcgRGlhbG9nKGRhdGEpLnJlbmRlcih0cnVlKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgaWYgKGdhbWUudXNlci50YXJnZXRzLnNpemUgPiAwIHx8IHByb2NlZWRXaXRob3V0VGFyZ2V0KSB7XG4gICAgICAgIGlmICghd2VhcG9uLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLnJuZ2QpIHtcbiAgICAgICAgICBpZiAoZ2FtZS51c2VyLnRhcmdldHMuc2l6ZSA+IDEpIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2FyblRvb01hbnlUYXJnZXQnKSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBjYXJkID0gbmV3IENvQzdNZWxlZUluaXRpYXRvcihhY3RvcktleSwgaXRlbUlkLCBmYXN0Rm9yd2FyZClcbiAgICAgICAgICBjYXJkLmNyZWF0ZUNoYXRDYXJkKClcbiAgICAgICAgfVxuICAgICAgICBpZiAod2VhcG9uLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLnJuZ2QpIHtcbiAgICAgICAgICBjb25zdCBjYXJkID0gbmV3IENvQzdSYW5nZUluaXRpYXRvcihhY3RvcktleSwgaXRlbUlkLCBmYXN0Rm9yd2FyZClcbiAgICAgICAgICBjYXJkLmNyZWF0ZUNoYXRDYXJkKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblJlbG9hZFdlYXBvbiAoZXZlbnQpIHtcbiAgICBjb25zdCBpdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICAgID8gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICA6IG51bGxcbiAgICBpZiAoIWl0ZW1JZCkgcmV0dXJuXG4gICAgY29uc3Qgd2VhcG9uID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoaXRlbUlkKVxuICAgIGlmIChldmVudC5idXR0b24gPT09IDApIHtcbiAgICAgIGlmIChldmVudC5zaGlmdEtleSkgYXdhaXQgd2VhcG9uLnJlbG9hZCgpXG4gICAgICBlbHNlIGF3YWl0IHdlYXBvbi5hZGRCdWxsZXQoKVxuICAgIH0gZWxzZSBpZiAoZXZlbnQuYnV0dG9uID09PSAyKSB7XG4gICAgICBpZiAoZXZlbnQuc2hpZnRLZXkpIGF3YWl0IHdlYXBvbi5zZXRCdWxsZXRzKDApXG4gICAgICBlbHNlIGF3YWl0IHdlYXBvbi5zaG9vdEJ1bGxldHMoMSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25BZGRBbW8gKGV2ZW50KSB7XG4gICAgY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgICA/IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgOiBudWxsXG4gICAgaWYgKCFpdGVtSWQpIHJldHVyblxuICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICBhd2FpdCB3ZWFwb24uYWRkQnVsbGV0KClcbiAgfVxuXG4gIGFzeW5jIF9vbldlYXBvblNraWxsUm9sbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgY29uc3QgYWN0b3JJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnZm9ybScpLmRhdGFzZXQuYWN0b3JJZFxuICAgIGNvbnN0IHRva2VuS2V5ID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC50b2tlbklkXG4gICAgY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdsaScpXG4gICAgICA/IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnbGknKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgOiBudWxsXG5cbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuXG4gICAgaWYgKCFldmVudC5zaGlmdEtleSkge1xuICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZSgpXG4gICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gdXNhZ2UuZ2V0KCdib251c0RpY2UnKVxuICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gdXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JylcbiAgICAgICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXREaWNlTW9kaWZpZXInKSlcbiAgICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdFRocmVzaG9sZE1vZGlmaWVyJykpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY2hlY2suYWN0b3IgPSAhdG9rZW5LZXkgPyBhY3RvcklkIDogdG9rZW5LZXlcbiAgICBjaGVjay5za2lsbCA9IHNraWxsSWRcbiAgICBjaGVjay5pdGVtID0gaXRlbUlkXG4gICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgY2hlY2sudG9NZXNzYWdlKClcblxuICAgIC8vIEhBQ0s6IGp1c3QgdG8gcG9wIHRoZSBhZHZhbmNlZCByb2xsIHdpbmRvd1xuICAgIC8vIGNoZWNrLml0ZW0ucm9sbCgpO1xuICB9XG5cbiAgYXN5bmMgX29uV2VhcG9uRGFtYWdlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBpdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy53ZWFwb24nKS5kYXRhc2V0Lml0ZW1JZFxuICAgIGNvbnN0IHJhbmdlID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcud2VhcG9uLWRhbWFnZScpLmRhdGFzZXQucmFuZ2VcbiAgICBjb25zdCBkYW1hZ2VDaGF0Q2FyZCA9IG5ldyBEYW1hZ2VDYXJkKHtcbiAgICAgIGZhc3RGb3J3YXJkOiBldmVudC5zaGlmdEtleSxcbiAgICAgIHJhbmdlOiByYW5nZVxuICAgIH0pXG4gICAgZGFtYWdlQ2hhdENhcmQuYWN0b3JLZXkgPSB0aGlzLmFjdG9yLnRva2VuS2V5XG4gICAgZGFtYWdlQ2hhdENhcmQuaXRlbUlkID0gaXRlbUlkXG4gICAgZGFtYWdlQ2hhdENhcmQudXBkYXRlQ2hhdENhcmQoKVxuICAgIC8vIGNvbnNvbGUubG9nKCAnV2VhcG9uIGRhbWFnZSBDbGlja2VkJyk7XG4gIH1cblxuICBhc3luYyBfb25PcHBvc2VkUm9sbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuYXR0cmliID09PSAnZGInKSByZXR1cm5cblxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCxcbiAgICAgIGNhcmRUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX09QUE9TRUQsXG4gICAgICBldmVudDogZXZlbnQsXG4gICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgIH1cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NoYXJhY3RlcmlzdGljLWxhYmVsJykpIHtcbiAgICAgIGRhdGEucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDXG4gICAgfSBlbHNlIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYXR0cmlidXRlLWxhYmVsJykpIHtcbiAgICAgIGRhdGEucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURVxuICAgIH1cblxuICAgIGlmIChldmVudC5hbHRLZXkpIHtcbiAgICAgIGRhdGEuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0NPTUJJTkVEXG4gICAgfVxuXG4gICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoZGF0YSlcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcm9sbGluZyBhIFNraWxsIGNoZWNrXG4gICAqIEAgIHBhcmFtIHtFdmVudH0gZXZlbnQgICBUaGUgb3JpZ2luYXRpbmcgY2xpY2sgZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFzeW5jIF9vblJvbGxDaGFyYWN0ZXJpdGljVGVzdCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmbGFnZ2VkNGRldicpKSByZXR1cm5cbiAgICBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcih7XG4gICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQyxcbiAgICAgIGNhcmRUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgIGV2ZW50OiBldmVudCxcbiAgICAgIGFjdG9yOiB0aGlzLmFjdG9yXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIF9vblJvbGxBdHRyaWJUZXN0IChldmVudCkge1xuICAgIC8vIEZMQVRNT0RJRklFUlxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBhdHRyaWIgPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5hdHRyaWJcbiAgICBpZiAoYXR0cmliID09PSAnZGInKSB7XG4gICAgICBpZiAoXG4gICAgICAgICEvXi17MCwxfVxcZCskLy50ZXN0KFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LnJvbGxGb3JtdWxhXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICBjb25zdCByID0gbmV3IFJvbGwoXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQucm9sbEZvcm11bGFcbiAgICAgICAgKVxuICAgICAgICBhd2FpdCByLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICBpZiAoIWlzTmFOKHIudG90YWwpICYmICEoci50b3RhbCA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgIHIudG9NZXNzYWdlKHtcbiAgICAgICAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKSxcbiAgICAgICAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJvbnVzRGFtYWdlUm9sbCcpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoe1xuICAgICAgcm9sbFR5cGU6IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFLFxuICAgICAgY2FyZFR5cGU6XG4gICAgICAgIGV2ZW50LmFsdEtleSAmJiBhdHRyaWIgPT09ICdzYW4nXG4gICAgICAgICAgPyBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX1NBTl9DSEVDS1xuICAgICAgICAgIDogQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUwsXG4gICAgICBldmVudDogZXZlbnQsXG4gICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHJvbGxpbmcgYSBTa2lsbCBjaGVja1xuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCAgIFRoZSBvcmlnaW5hdGluZyBjbGljayBldmVudFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX29uUm9sbFNraWxsVGVzdCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmbGFnZ2VkNGRldicpKSByZXR1cm5cbiAgICBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcih7XG4gICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCxcbiAgICAgIGNhcmRUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgIGV2ZW50OiBldmVudCxcbiAgICAgIGFjdG9yOiB0aGlzLmFjdG9yXG4gICAgfSlcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgLy8gX2dldFN1Ym1pdERhdGEodXBkYXRlRGF0YT17fSkge1xuXG4gIC8vICAvLyBDcmVhdGUgdGhlIGV4cGFuZGVkIHVwZGF0ZSBkYXRhIG9iamVjdFxuICAvLyAgY29uc3QgZmQgPSBuZXcgRm9ybURhdGFFeHRlbmRlZCh0aGlzLmZvcm0sIHtlZGl0b3JzOiB0aGlzLmVkaXRvcnN9KTtcbiAgLy8gIGxldCBkYXRhID0gZmQudG9PYmplY3QoKTtcbiAgLy8gIGlmICggdXBkYXRlRGF0YSApIGRhdGEgPSBtZXJnZU9iamVjdChkYXRhLCB1cGRhdGVEYXRhKTtcbiAgLy8gIGVsc2UgZGF0YSA9IGV4cGFuZE9iamVjdChkYXRhKTtcblxuICAvLyAgLy8gSGFuZGxlIERhbWFnZSBhcnJheVxuICAvLyAgY29uc3QgZGFtYWdlID0gZGF0YS5kYXRhPy5kYW1hZ2U7XG4gIC8vICBpZiAoIGRhbWFnZSApIGRhbWFnZS5wYXJ0cyA9IE9iamVjdC52YWx1ZXMoZGFtYWdlPy5wYXJ0cyB8fCB7fSkubWFwKGQgPT4gW2RbMF0gfHwgJycsIGRbMV0gfHwgJyddKTtcblxuICAvLyAgLy8gUmV0dXJuIHRoZSBmbGF0dGVuZWQgc3VibWlzc2lvbiBkYXRhXG4gIC8vICByZXR1cm4gZmxhdHRlbk9iamVjdChkYXRhKTtcbiAgLy8gfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEltcGxlbWVudCB0aGUgX3VwZGF0ZU9iamVjdCBtZXRob2QgYXMgcmVxdWlyZWQgYnkgdGhlIHBhcmVudCBjbGFzcyBzcGVjXG4gICAqIFRoaXMgZGVmaW5lcyBob3cgdG8gdXBkYXRlIHRoZSBzdWJqZWN0IG9mIHRoZSBmb3JtIHdoZW4gdGhlIGZvcm0gaXMgc3VibWl0dGVkXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbygnX3VwZGF0ZU9iamVjdCcpO1xuICAgIC8vIFRPRE86IFJlcGxhY2Ugd2l0aCAgIF9nZXRTdWJtaXREYXRhKHVwZGF0ZURhdGE9e30pIENmLiBzaGVldC5qcygyNDMpXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdCkge1xuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3NraWxsLWFkanVzdG1lbnQnKSkge1xuICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgID8gcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgICAgOiBudWxsXG5cbiAgICAgICAgICAgIGlmICghZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSkge1xuICAgICAgICAgICAgICBhd2FpdCBpdGVtLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgW2V2ZW50LmN1cnJlbnRUYXJnZXQubmFtZV06IG51bGxcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmICghaXNOYU4odmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgaXRlbS51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgW2V2ZW50LmN1cnJlbnRUYXJnZXQubmFtZV06IHZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3LmNyZWRpdFJhdGluZ1NraWxsTmFtZSkgPT09IGl0ZW0ubmFtZSkge1xuICAgICAgICAgICAgICBjb25zdCBjcmVkaXRWYWx1ZSA9XG4gICAgICAgICAgICAgICAgKGl0ZW0udmFsdWUgfHwgMCkgLVxuICAgICAgICAgICAgICAgIChpdGVtLmRhdGEuZGF0YS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZSB8fCAwKVxuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgY3JlZGl0VmFsdWUgPlxuICAgICAgICAgICAgICAgICAgTnVtYmVyKHRoaXMuYWN0b3Iub2NjdXBhdGlvbi5kYXRhLmRhdGEuY3JlZGl0UmF0aW5nLm1heCkgfHxcbiAgICAgICAgICAgICAgICBjcmVkaXRWYWx1ZSA8XG4gICAgICAgICAgICAgICAgICBOdW1iZXIodGhpcy5hY3Rvci5vY2N1cGF0aW9uLmRhdGEuZGF0YS5jcmVkaXRSYXRpbmcubWluKVxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNyZWRpdE91dE9mUmFuZ2UnLCB7XG4gICAgICAgICAgICAgICAgICAgIG1pbjogTnVtYmVyKFxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0b3Iub2NjdXBhdGlvbi5kYXRhLmRhdGEuY3JlZGl0UmF0aW5nLm1pblxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBtYXg6IE51bWJlcihcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yLm9jY3VwYXRpb24uZGF0YS5kYXRhLmNyZWRpdFJhdGluZy5tYXhcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2F0dHJpYnV0ZS12YWx1ZScpKSB7XG4gICAgICAgICAgLy8gVE9ETyA6IGNoZWNrIHdoeSBTQU4gb25seSA/XG4gICAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSA9PT0gJ2RhdGEuYXR0cmlicy5zYW4udmFsdWUnKSB7XG4gICAgICAgICAgICB0aGlzLmFjdG9yLnNldFNhbihwYXJzZUludChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKSlcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndGV4dC1hcmVhJykpIHtcbiAgICAgICAgICB0aGlzLmFjdG9yLnVwZGF0ZVRleHRBcmVhKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Jpby1zZWN0aW9uLXZhbHVlJykpIHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYmlvLXNlY3Rpb24nKS5kYXRhc2V0LmluZGV4XG4gICAgICAgICAgKVxuICAgICAgICAgIGF3YWl0IHRoaXMuYWN0b3IudXBkYXRlQmlvVmFsdWUoaW5kZXgsIGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Jpby1zZWN0aW9uLXRpdGxlJykpIHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYmlvLXNlY3Rpb24nKS5kYXRhc2V0LmluZGV4XG4gICAgICAgICAgKVxuICAgICAgICAgIHRoaXMuYWN0b3IudXBkYXRlQmlvVGl0bGUoaW5kZXgsIGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ25wYy1za2lsbC1zY29yZScpKSB7XG4gICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgICApXG4gICAgICAgICAgaWYgKHNraWxsKSB7XG4gICAgICAgICAgICBhd2FpdCBza2lsbC51cGRhdGVWYWx1ZShldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc2tpbGwtbmFtZScpIHx8XG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2l0ZW0tbmFtZScpXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgICApXG4gICAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7fVxuICAgICAgICAgICAgaWYgKGl0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXMuc3BlY2lhbCkge1xuICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICBpdGVtLmRhdGEuZGF0YS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGRhdGEubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICAgICAgZGF0YVsnZGF0YS5za2lsbE5hbWUnXSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgICAgICBkYXRhWydkYXRhLnNwZWNpYWxpemF0aW9uJ10gPSBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGF0YVsnZGF0YS5za2lsbE5hbWUnXSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgZGF0YS5uYW1lID0gZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgaXRlbS51cGRhdGUoZGF0YSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NoYXJhY3RlcmlzdGljLWZvcm11bGEnKSkge1xuICAgICAgICAgIC8vIHRlc3RlciBzaSBjJ2VzdCB2aWRlXG4gICAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAvLyBPbiB0ZXN0ZSBzaSBjJ2VzdCB1bmUgZm9ybXVsZSB2YWxpZGUgIVxuICAgICAgICAgICAgY29uc3QgciA9IG5ldyBSb2xsKGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXG4gICAgICAgICAgICBhd2FpdCByLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgaWYgKGlzTmFOKHIudG90YWwpIHx8IHR5cGVvZiByLnRvdGFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBmb3JtRGF0YVtldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWVdID1cbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZCcpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhdHRyaWJ1dGUtdmFsdWUnKSkge1xuICAgICAgICAgIC8vIHRlc3RlciBzaSBsZSBkYiByZXRvdXJuw6kgZXN0IHZhbGlkZS5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLmxlbmd0aCAhPT0gMCAmJlxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYXR0cmlidXRlJykuZGF0YXNldC5hdHRyaWIgPT09ICdkYidcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIE9uIHRlc3RlIHNpIGMnZXN0IHVuZSBmb3JtdWxlIHZhbGlkZSAhXG4gICAgICAgICAgICBjb25zdCByID0gbmV3IFJvbGwoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgIGF3YWl0IHIucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgICBpZiAoaXNOYU4oci50b3RhbCkgfHwgci50b3RhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICAgICAgdmFsdWU6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGZvcm1EYXRhW2V2ZW50LmN1cnJlbnRUYXJnZXQubmFtZV0gPVxuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBsZSBza2lsbCBhc3NvY2nDqSBhIGwnYXJtZSBhIGNoYW5nw6lcbiAgICAgICAgLy8gVE9ETyA6IEZhY3RvcmlzYXRpb24gZHUgc3dpdGNoXG4gICAgICAgIC8vIFRPRE8gOiByZW1wbGFjZXIgbGVzIHN0cmluZ3MgcGFyIGRlIGNvbnN0YW50ZXMgKGl0ZW0uc2tpbGwubWFpbiAuLi4pXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnd2VhcG9uLXNraWxsJykpIHtcbiAgICAgICAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgICAgIClcbiAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5vcHRpb25zW2V2ZW50LmN1cnJlbnRUYXJnZXQuc2VsZWN0ZWRJbmRleF0udmFsdWVcbiAgICAgICAgICApXG4gICAgICAgICAgaWYgKHdlYXBvbiAmJiBza2lsbCkge1xuICAgICAgICAgICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGwpIHtcbiAgICAgICAgICAgICAgY2FzZSAnbWFpbic6XG4gICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAnZGF0YS5za2lsbC5tYWluLmlkJzogc2tpbGwuaWQsXG4gICAgICAgICAgICAgICAgICAnZGF0YS5za2lsbC5tYWluLm5hbWUnOiBza2lsbC5uYW1lXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICBjYXNlICdhbHRlcm5hdGl2JzpcbiAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICdkYXRhLnNraWxsLmFsdGVybmF0aXYuaWQnOiBza2lsbC5pZCxcbiAgICAgICAgICAgICAgICAgICdkYXRhLnNraWxsLmFsdGVybmF0aXYubmFtZSc6IHNraWxsLm5hbWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gTGUgbm9tIGRlIGwnYXJtZSBhIGNoYW5nw6lcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd3ZWFwb24tbmFtZScpKSB7XG4gICAgICAgICAgY29uc3Qgd2VhcG9uID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgICAgICApXG4gICAgICAgICAgaWYgKHdlYXBvbikge1xuICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7IG5hbWU6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBsZXMgZGVnYXRzIGRlIGwnYXJtZSBvbiBjaGFuZ8Opcy5cbiAgICAgICAgLy8gVE9ETyA6IEZhY3RvcmlzYXRpb24gZHUgc3dpdGNoXG4gICAgICAgIC8vIFRPRE8gOiByZW1wbGFjZXIgbGVzIHN0cmluZ3MgcGFyIGRlIGNvbnN0YW50ZXMgKGl0ZW0ucmFuZ2Uubm9ybWFsIC4uLilcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkYW1hZ2UtZm9ybXVsYScpKSB7XG4gICAgICAgICAgY29uc3Qgd2VhcG9uID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgICAgICApXG4gICAgICAgICAgaWYgKHdlYXBvbikge1xuICAgICAgICAgICAgLy8gdGVzdGUgbGEgdmFsaWRpdMOpIGRlIGxhIGZvcm11bGUuXG4gICAgICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgY29uc3QgciA9IG5ldyBSb2xsKGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXG4gICAgICAgICAgICAgIGF3YWl0IHIucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgICAgIGlmIChpc05hTihyLnRvdGFsKSB8fCB0eXBlb2Ygci50b3RhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSArICcgaXMgbm90IGEgdmFsaWQgZm9ybXVsYSdcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgJ25vcm1hbCc6XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICdkYXRhLnJhbmdlLm5vcm1hbC5kYW1hZ2UnOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICBjYXNlICdsb25nJzpcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgJ2RhdGEucmFuZ2UubG9uZy5kYW1hZ2UnOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICBjYXNlICdleHRyZW1lJzpcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgJ2RhdGEucmFuZ2UuZXh0cmVtZS5kYW1hZ2UnOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5yYW5nZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ25vcm1hbCc6XG4gICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEucmFuZ2Uubm9ybWFsLmRhbWFnZSc6IG51bGxcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xvbmcnOlxuICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICdkYXRhLnJhbmdlLmxvbmcuZGFtYWdlJzogbnVsbFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAnZXh0cmVtZSc6XG4gICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEucmFuZ2UuZXh0cmVtZS5kYW1hZ2UnOiBudWxsXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5vYmplY3QudXBkYXRlKGZvcm1EYXRhKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgbWVyZ2VPYmplY3QgKi9cblxuaW1wb3J0IHsgQ29DN0FjdG9yU2hlZXQgfSBmcm9tICcuL2Jhc2UuanMnXG5pbXBvcnQgeyBSb2xsRGlhbG9nIH0gZnJvbSAnLi4vLi4vYXBwcy9yb2xsLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdQYXJzZXIgfSBmcm9tICcuLi8uLi9hcHBzL3BhcnNlci5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi8uLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IFNhbkNoZWNrQ2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgQWN0b3JTaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN05QQ1NoZWV0IGV4dGVuZHMgQ29DN0FjdG9yU2hlZXQge1xuICAvKipcbiAgICogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEFjdG9yIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICAvLyBUT0RPIDogZG8gd2UgbmVlZCB0aGF0ID9cbiAgICBkYXRhLmFsbG93Rm9ybXVsYSA9IHRydWVcbiAgICBkYXRhLmRpc3BsYXlGb3JtdWxhID0gdGhpcy5hY3Rvci5nZXRBY3RvckZsYWcoJ2Rpc3BsYXlGb3JtdWxhJylcbiAgICBpZiAoZGF0YS5kaXNwbGF5Rm9ybXVsYSA9PT0gdW5kZWZpbmVkKSBkYXRhLmRpc3BsYXlGb3JtdWxhID0gZmFsc2VcbiAgICAvLyBhd2FpdCB0aGlzLmFjdG9yLmNyZWF0dXJlSW5pdCgpO1xuICAgIGRhdGEuaGFzU2FuID0gZGF0YS5kYXRhLmF0dHJpYnMuc2FuLnZhbHVlICE9PSBudWxsXG4gICAgZGF0YS5oYXNNcCA9IGRhdGEuZGF0YS5hdHRyaWJzLm1wLnZhbHVlICE9PSBudWxsXG4gICAgZGF0YS5oYXNMdWNrID0gZGF0YS5kYXRhLmF0dHJpYnMubGNrLnZhbHVlICE9PSBudWxsXG5cbiAgICBkYXRhLmlzQ3JlYXR1cmUgPSBmYWxzZVxuXG4gICAgZGF0YS5zaG93SW52ZW50b3J5SXRlbXMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEuaXRlbXNCeVR5cGUsICdpdGVtJykgfHxcbiAgICAgICFkYXRhLmRhdGEuZmxhZ3MubG9ja2VkXG4gICAgZGF0YS5zaG93SW52ZW50b3J5Qm9va3MgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEuaXRlbXNCeVR5cGUsICdib29rJykgfHxcbiAgICAgICFkYXRhLmRhdGEuZmxhZ3MubG9ja2VkXG4gICAgZGF0YS5zaG93SW52ZW50b3J5U3BlbGxzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLml0ZW1zQnlUeXBlLCAnc3BlbGwnKSB8fFxuICAgICAgIWRhdGEuZGF0YS5mbGFncy5sb2NrZWRcbiAgICBkYXRhLnNob3dJbnZlbnRvcnlUYWxlbnRzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLml0ZW1zQnlUeXBlLCAndGFsZW50JykgfHxcbiAgICAgICghZGF0YS5kYXRhLmZsYWdzLmxvY2tlZCAmJiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZVRhbGVudHMnKSlcbiAgICBkYXRhLnNob3dJbnZlbnRvcnlTdGF0dXNlcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YS5pdGVtc0J5VHlwZSwgJ3N0YXR1cycpIHx8XG4gICAgICAhZGF0YS5kYXRhLmZsYWdzLmxvY2tlZFxuICAgIGRhdGEuc2hvd0ludmVudG9yeVdlYXBvbnMgPSBmYWxzZVxuICAgIGRhdGEuaGFzSW52ZW50b3J5ID1cbiAgICAgIGRhdGEuc2hvd0ludmVudG9yeUl0ZW1zIHx8XG4gICAgICBkYXRhLnNob3dJbnZlbnRvcnlCb29rcyB8fFxuICAgICAgZGF0YS5zaG93SW52ZW50b3J5U3BlbGxzIHx8XG4gICAgICBkYXRhLnNob3dJbnZlbnRvcnlUYWxlbnRzIHx8XG4gICAgICBkYXRhLnNob3dJbnZlbnRvcnlTdGF0dXNlcyB8fFxuICAgICAgZGF0YS5zaG93SW52ZW50b3J5V2VhcG9uc1xuXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sLmZpbmQoJy5yb2xsLXNhbicpLmNsaWNrKHRoaXMuX29uU2FuQ2hlY2suYmluZCh0aGlzKSlcbiAgICBpZiAodGhpcy5hY3Rvci5pc093bmVyKSB7XG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCdbbmFtZT1cImRhdGEuYXR0cmlicy5ocC52YWx1ZVwiXScpXG4gICAgICAgIC5jaGFuZ2UoZXZlbnQgPT4gdGhpcy5hY3Rvci5zZXRIZWFsdGhTdGF0dXNNYW51YWxseShldmVudCkpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uU2FuQ2hlY2sgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmIChcbiAgICAgICF0aGlzLmFjdG9yLmRhdGEuZGF0YS5zcGVjaWFsLnNhbkxvc3MuY2hlY2tQYXNzZWQgJiZcbiAgICAgICF0aGlzLmFjdG9yLmRhdGEuZGF0YS5zcGVjaWFsLnNhbkxvc3MuY2hlY2tGYWlsbGVkXG4gICAgKSB7XG4gICAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oJ05vIHNhbml0eSBsb3NzIHZhbHVlJyk7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKFxuICAgICAgKGV2ZW50Lm1ldGFLZXkgfHxcbiAgICAgICAgZXZlbnQuY3RybEtleSB8fFxuICAgICAgICBldmVudC5rZXlDb2RlID09PSA5MSB8fFxuICAgICAgICBldmVudC5rZXlDb2RlID09PSAyMjQpICYmXG4gICAgICBnYW1lLnVzZXIuaXNHTVxuICAgICkge1xuICAgICAgbGV0IGRpZmZpY3VsdHksIG1vZGlmaWVyXG4gICAgICBpZiAoIWV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUoe1xuICAgICAgICAgIGRpc2FibGVGbGF0RGljZU1vZGlmaWVyOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICAgIG1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXG4gICAgICAgICAgZGlmZmljdWx0eSA9IE51bWJlcih1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgbGlua0RhdGEgPSB7XG4gICAgICAgIGNoZWNrOiAnc2FubG9zcycsXG4gICAgICAgIHNhbk1pbjogdGhpcy5hY3Rvci5kYXRhLmRhdGEuc3BlY2lhbC5zYW5Mb3NzLmNoZWNrUGFzc2VkLFxuICAgICAgICBzYW5NYXg6IHRoaXMuYWN0b3IuZGF0YS5kYXRhLnNwZWNpYWwuc2FuTG9zcy5jaGVja0ZhaWxsZWQsXG4gICAgICAgIHNhblJlYXNvbjogdGhpcy5hY3Rvci5kYXRhLmRhdGEuaW5mb3MudHlwZT8ubGVuZ3RoXG4gICAgICAgICAgPyB0aGlzLmFjdG9yLmRhdGEuZGF0YS5pbmZvcy50eXBlXG4gICAgICAgICAgOiB0aGlzLmFjdG9yLm5hbWUsXG4gICAgICAgIHRva2VuS2V5OiB0aGlzLmFjdG9yLmFjdG9yS2V5XG4gICAgICB9XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSA9PT0gJ2JsaW5kcm9sbCcpIHtcbiAgICAgICAgbGlua0RhdGEuYmxpbmQgPSB0cnVlXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIG1vZGlmaWVyICE9PSAndW5kZWZpbmVkJykgbGlua0RhdGEubW9kaWZpZXIgPSBtb2RpZmllclxuICAgICAgaWYgKHR5cGVvZiBkaWZmaWN1bHR5ICE9PSAndW5kZWZpbmVkJykgbGlua0RhdGEuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICAgIGNvbnN0IGxpbmsgPSBDb0M3UGFyc2VyLmNyZWF0ZUNvQzdMaW5rKGxpbmtEYXRhKVxuICAgICAgaWYgKGxpbmspIHtcbiAgICAgICAgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NZXNzYWdlQ2hlY2tSZXF1ZXN0ZWRXYWl0Jywge1xuICAgICAgICAgICAgY2hlY2s6IGxpbmtcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNhbkRhdGEgPSB7XG4gICAgICAgIHNhbk1heDogdGhpcy5hY3Rvci5zYW5Mb3NzQ2hlY2tGYWlsbGVkLFxuICAgICAgICBzYW5NaW46IHRoaXMuYWN0b3Iuc2FuTG9zc0NoZWNrUGFzc2VkLFxuICAgICAgICBzYW5SZWFzb246IHRoaXMuYWN0b3IuZGF0YS5kYXRhLmluZm9zLnR5cGU/Lmxlbmd0aFxuICAgICAgICAgID8gdGhpcy5hY3Rvci5kYXRhLmRhdGEuaW5mb3MudHlwZVxuICAgICAgICAgIDogdGhpcy5hY3Rvci5uYW1lLFxuICAgICAgICB0b2tlbktleTogdGhpcy5hY3Rvci5hY3RvcktleVxuICAgICAgfVxuICAgICAgU2FuQ2hlY2tDYXJkLmNoZWNrVGFyZ2V0cyhzYW5EYXRhLCBldmVudC5zaGlmdEtleSlcbiAgICB9XG4gIH1cblxuICBvbkNsb3NlU2hlZXQgKCkge1xuICAgIHRoaXMuYWN0b3IudW5zZXRBY3RvckZsYWcoJ2Rpc3BsYXlGb3JtdWxhJylcbiAgICBzdXBlci5vbkNsb3NlU2hlZXQoKVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIEFjdG9yIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ2FjdG9yJywgJ25wYyddLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5pdGVtJywgZHJvcFNlbGVjdG9yOiBudWxsIH1dLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9ucGMtc2hlZXQuaHRtbCcsXG4gICAgICB3aWR0aDogNTgwLFxuICAgICAgcmVzaXphYmxlOiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBJbXBsZW1lbnQgdGhlIF91cGRhdGVPYmplY3QgbWV0aG9kIGFzIHJlcXVpcmVkIGJ5IHRoZSBwYXJlbnQgY2xhc3Mgc3BlY1xuICAgKiBUaGlzIGRlZmluZXMgaG93IHRvIHVwZGF0ZSB0aGUgc3ViamVjdCBvZiB0aGUgZm9ybSB3aGVuIHRoZSBmb3JtIGlzIHN1Ym1pdHRlZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0KSB7XG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2hhcmFjdGVyaXN0aWMtc2NvcmUnKSkge1xuICAgICAgICAgIHRoaXMuYWN0b3Iuc2V0Q2hhcmFjdGVyaXN0aWMoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWUsXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzdXBlci5fdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSlcbiAgfVxuXG4gIHN0YXRpYyBmb3JjZUF1dG8gKGFwcCwgaHRtbCkge1xuICAgIGNvbnN0IGNlbGwgPSBodG1sLmZpbmQoJy5wYW5uZWwuZXhwYW5kZWQucmVzaXplZGVkaXRvcicpXG4gICAgaWYgKGNlbGwubGVuZ3RoKSB7XG4gICAgICBjZWxsLmhlaWdodChcbiAgICAgICAgTWF0aC5tYXgoMjAwLCAoaHRtbC5oZWlnaHQoKSAtIGNlbGwucG9zaXRpb24oKS50b3AgLSA4KSAvIGNlbGwubGVuZ3RoKSArXG4gICAgICAgICAgJ3B4J1xuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIHNldFBvc2l0aW9uIChhKSB7XG4gICAgc3VwZXIuc2V0UG9zaXRpb24oYSlcbiAgICBDb0M3TlBDU2hlZXQuZm9yY2VBdXRvKGEsIHRoaXMuX2VsZW1lbnQpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBtZXJnZU9iamVjdCAqL1xuaW1wb3J0IHsgQ29DN05QQ1NoZWV0IH0gZnJvbSAnLi9ucGMtc2hlZXQuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBBY3RvclNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3Q3JlYXR1cmVTaGVldCBleHRlbmRzIENvQzdOUENTaGVldCB7XG4gIC8qKlxuICAgKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgQWN0b3Igc2hlZXRcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcbiAgICovXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcbiAgICBkYXRhLmlzQ3JlYXR1cmUgPSB0cnVlXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgQWN0b3IgU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ2FjdG9yJywgJ25wYycsICdjcmVhdHVyZSddXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIEZvcm1BcHBsaWNhdGlvbiwgZ2FtZSwgbWVyZ2VPYmplY3QgKi9cbmV4cG9ydCBjbGFzcyBDb0M3Q3JlYXRlTXl0aG9zRW5jb3VudGVyIGV4dGVuZHMgRm9ybUFwcGxpY2F0aW9uIHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnXSxcbiAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5TG9zc1R5cGVEaWFsb2dUaXRsZScpLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2FuaXR5LWxvc3MtdHlwZS5oYnMnLFxuICAgICAgaGVpZ2h0OiAnYXV0bydcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuICAgIGRhdGEuaXNJbW11bml0eSA9IGRhdGEub2JqZWN0LnR5cGUgPT09ICdpbW11bml0eSdcbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBodG1sLmZpbmQoJy5maWVsZF90eXBlJykuY2hhbmdlKHRoaXMuX29uU2VsZWN0Q2hhbmdlLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuZGlhbG9nLWJ1dHRvbicpLmNsaWNrKHRoaXMuX29uQnV0dG9uQ2xpY2suYmluZCh0aGlzKSlcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICB9XG5cbiAgX29uQnV0dG9uQ2xpY2sgKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5idXR0b24gPT09ICdhZGQnKSB7XG4gICAgICBjb25zdCBodG1sID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCcud2luZG93LWNvbnRlbnQnKVxuICAgICAgY29uc3QgdHlwZSA9IGh0bWwuZmluZCgnLmZpZWxkX3R5cGUnKS52YWwoKVxuICAgICAgY29uc3QgbmFtZSA9IGh0bWwuZmluZCgnLmZpZWxkX25hbWUnKS52YWwoKVxuICAgICAgY29uc3QgdmFsdWUgPSBwYXJzZUludChodG1sLmZpbmQoJy5maWVsZF92YWx1ZScpLnZhbCgpKVxuICAgICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50cyA9XG4gICAgICAgIHRoaXMub2JqZWN0LmFjdG9yLmRhdGEuZGF0YS5zYW5pdHlMb3NzRXZlbnRzID8/IFtdXG4gICAgICBzYW5pdHlMb3NzRXZlbnRzLnB1c2goe1xuICAgICAgICB0eXBlOiBuYW1lLFxuICAgICAgICB0b3RhbExvc3M6IHZhbHVlLFxuICAgICAgICBpbW11bml0eTogdHlwZSA9PT0gJ2ltbXVuaXR5J1xuICAgICAgfSlcbiAgICAgIHNhbml0eUxvc3NFdmVudHMuc29ydChmdW5jdGlvbiAobGVmdCwgcmlnaHQpIHtcbiAgICAgICAgcmV0dXJuIGxlZnQudHlwZS5sb2NhbGVDb21wYXJlKHJpZ2h0LnR5cGUpXG4gICAgICB9KVxuICAgICAgdGhpcy5vYmplY3QuYWN0b3IudXBkYXRlKHsgJ2RhdGEuc2FuaXR5TG9zc0V2ZW50cyc6IHNhbml0eUxvc3NFdmVudHMgfSlcbiAgICB9XG4gICAgdGhpcy5jbG9zZSgpXG4gIH1cblxuICBfb25TZWxlY3RDaGFuZ2UgKGV2ZW50KSB7XG4gICAgY29uc3QgaHRtbCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLndpbmRvdy1jb250ZW50JylcbiAgICB0aGlzLm9iamVjdC5uYW1lID0gaHRtbC5maW5kKCcuZmllbGRfbmFtZScpLnZhbCgpXG4gICAgdGhpcy5vYmplY3QudHlwZSA9IGh0bWwuZmluZCgnLmZpZWxkX3R5cGUnKS52YWwoKVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHt9XG59XG4iLCIvKiBnbG9iYWwgJCwgRm9udEZhY2UsIGdhbWUsIG1lcmdlT2JqZWN0LCB1aSAqL1xuaW1wb3J0IHsgQ29DN0FjdG9yU2hlZXQgfSBmcm9tICcuL2Jhc2UuanMnXG5pbXBvcnQgeyBDb0M3Q3JlYXRlTXl0aG9zRW5jb3VudGVyIH0gZnJvbSAnLi4vLi4vYXBwcy9jcmVhdGUtbXl0aG9zLWVuY291bnRlcnMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q2hhcmFjdGVyU2hlZXQgZXh0ZW5kcyBDb0M3QWN0b3JTaGVldCB7XG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBpZiAodGhpcy5jb25zdHJ1Y3Rvci5uYW1lID09PSAnQ29DN0NoYXJhY3RlclNoZWV0Jykge1xuICAgICAgaWYgKCF0aGlzLnN1bW1hcml6ZWQpIHRoaXMuc3VtbWFyaXplZCA9IGZhbHNlXG4gICAgICBsZXQgYnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICAgIGJ1dHRvbnMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBsYWJlbDogdGhpcy5zdW1tYXJpemVkXG4gICAgICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NYXhpbWl6ZScpXG4gICAgICAgICAgICA6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TdW1tYXJpemUnKSxcbiAgICAgICAgICBjbGFzczogJ3Rlc3QtZXh0cmEtaWNvbicsXG4gICAgICAgICAgaWNvbjogdGhpcy5zdW1tYXJpemVkXG4gICAgICAgICAgICA/ICdmYXMgZmEtd2luZG93LW1heGltaXplJ1xuICAgICAgICAgICAgOiAnZmFzIGZhLXdpbmRvdy1taW5pbWl6ZScsXG4gICAgICAgICAgb25jbGljazogZXZlbnQgPT4gdGhpcy50b2dnbGVTaGVldE1vZGUoZXZlbnQpXG4gICAgICAgIH1cbiAgICAgIF0uY29uY2F0KGJ1dHRvbnMpXG4gICAgICByZXR1cm4gYnV0dG9uc1xuICAgIH1cbiAgICByZXR1cm4gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlU2hlZXRNb2RlIChldmVudCkge1xuICAgIHRoaXMuc3VtbWFyaXplZCA9ICF0aGlzLnN1bW1hcml6ZWRcbiAgICBhd2FpdCB0aGlzLmNsb3NlKClcbiAgICBjb25zdCBvcHRpb25zID0gdGhpcy5zdW1tYXJpemVkXG4gICAgICA/IHtcbiAgICAgICAgY2xhc3NlczogWydjb2M3JywgJ2FjdG9yJywgJ2NoYXJhY3RlcicsICdzdW1tYXJpemVkJ10sXG4gICAgICAgIGhlaWdodDogMjAwLFxuICAgICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgICB3aWR0aDogNzAwXG4gICAgICB9XG4gICAgICA6IENvQzdDaGFyYWN0ZXJTaGVldC5kZWZhdWx0T3B0aW9uc1xuICAgIGF3YWl0IHRoaXMucmVuZGVyKHRydWUsIG9wdGlvbnMpXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG4gICAgaWYgKFxuICAgICAgdGhpcy5pc0VkaXRhYmxlICYmXG4gICAgICB0eXBlb2YgdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ3NraWxsTGlzdE1vZGUnKSA9PT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0RmxhZygnQ29DNycsICdza2lsbExpc3RNb2RlJywgZmFsc2UpXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHRoaXMuaXNFZGl0YWJsZSAmJlxuICAgICAgdHlwZW9mIHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbFNob3dVbmNvbW1vbicpID09PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRGbGFnKCdDb0M3JywgJ3NraWxsU2hvd1VuY29tbW9uJywgdHJ1ZSlcbiAgICB9XG4gICAgZGF0YS5za2lsbExpc3RNb2RlVmFsdWUgPVxuICAgICAgdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ3NraWxsTGlzdE1vZGUnKSA/PyBmYWxzZVxuICAgIGRhdGEuc2tpbGxTaG93VW5jb21tb24gPVxuICAgICAgdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ3NraWxsU2hvd1VuY29tbW9uJykgPz8gdHJ1ZVxuICAgIGRhdGEuc2hvd0ljb25zT25seSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Nob3dJY29uc09ubHknKVxuXG4gICAgaWYgKHRoaXMuYWN0b3Iub2NjdXBhdGlvbikge1xuICAgICAgZGF0YS5kYXRhLmluZm9zLm9jY3VwYXRpb24gPSB0aGlzLmFjdG9yLm9jY3VwYXRpb24ubmFtZVxuICAgICAgZGF0YS5kYXRhLmluZm9zLm9jY3VwYXRpb25TZXQgPSB0cnVlXG4gICAgfSBlbHNlIGRhdGEuZGF0YS5pbmZvcy5vY2N1cGF0aW9uU2V0ID0gZmFsc2VcblxuICAgIGlmICh0aGlzLmFjdG9yLmFyY2hldHlwZSkge1xuICAgICAgZGF0YS5kYXRhLmluZm9zLmFyY2hldHlwZSA9IHRoaXMuYWN0b3IuYXJjaGV0eXBlLm5hbWVcbiAgICAgIGRhdGEuZGF0YS5pbmZvcy5hcmNoZXR5cGVTZXQgPSB0cnVlXG4gICAgfSBlbHNlIGRhdGEuZGF0YS5pbmZvcy5hcmNoZXR5cGVTZXQgPSBmYWxzZVxuXG4gICAgZGF0YS50b3RhbEV4cGVyaWVuY2UgPSB0aGlzLmFjdG9yLmV4cGVyaWVuY2VQb2ludHNcbiAgICBkYXRhLnRvdGFsT2NjdXBhdGlvbiA9IHRoaXMuYWN0b3Iub2NjdXBhdGlvblBvaW50c1NwZW50XG4gICAgZGF0YS5pbnZhbGlkT2NjdXBhdGlvblBvaW50cyA9XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5vY2N1cGF0aW9uUG9pbnRzU3BlbnQpICE9PVxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3IuZGF0YS5kYXRhLmRldmVsb3BtZW50Py5vY2N1cGF0aW9uKVxuICAgIGRhdGEudG90YWxBcmNoZXR5cGUgPSB0aGlzLmFjdG9yLmFyY2hldHlwZVBvaW50c1NwZW50XG4gICAgZGF0YS5pbnZhbGlkQXJjaGV0eXBlUG9pbnRzID1cbiAgICAgIE51bWJlcih0aGlzLmFjdG9yLmFyY2hldHlwZVBvaW50c1NwZW50KSAhPT1cbiAgICAgIE51bWJlcih0aGlzLmFjdG9yLmRhdGEuZGF0YS5kZXZlbG9wbWVudD8uYXJjaGV0eXBlKVxuICAgIGRhdGEudG90YWxQZXJzb25hbCA9IHRoaXMuYWN0b3IucGVyc29uYWxQb2ludHNTcGVudFxuICAgIGRhdGEuaW52YWxpZFBlcnNvbmFsUG9pbnRzID1cbiAgICAgIE51bWJlcih0aGlzLmFjdG9yLnBlcnNvbmFsUG9pbnRzU3BlbnQpICE9PVxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3IuZGF0YS5kYXRhLmRldmVsb3BtZW50Py5wZXJzb25hbClcbiAgICBkYXRhLmNyZWRpdFJhdGluZ01heCA9IE51bWJlcihcbiAgICAgIHRoaXMuYWN0b3Iub2NjdXBhdGlvbj8uZGF0YS5kYXRhLmNyZWRpdFJhdGluZy5tYXhcbiAgICApXG4gICAgZGF0YS5jcmVkaXRSYXRpbmdNaW4gPSBOdW1iZXIoXG4gICAgICB0aGlzLmFjdG9yLm9jY3VwYXRpb24/LmRhdGEuZGF0YS5jcmVkaXRSYXRpbmcubWluXG4gICAgKVxuICAgIGRhdGEuaW52YWxpZENyZWRpdFJhdGluZyA9XG4gICAgICB0aGlzLmFjdG9yLmNyZWRpdFJhdGluZ1NraWxsPy5kYXRhLmRhdGEuYWRqdXN0bWVudHM/Lm9jY3VwYXRpb24gPlxuICAgICAgICBkYXRhLmNyZWRpdFJhdGluZ01heCB8fFxuICAgICAgdGhpcy5hY3Rvci5jcmVkaXRSYXRpbmdTa2lsbD8uZGF0YS5kYXRhLmFkanVzdG1lbnRzPy5vY2N1cGF0aW9uIDxcbiAgICAgICAgZGF0YS5jcmVkaXRSYXRpbmdNaW5cbiAgICBkYXRhLnB1bHBUYWxlbnRDb3VudCA9IGRhdGEuaXRlbXNCeVR5cGUudGFsZW50Py5sZW5ndGhcbiAgICAgID8gZGF0YS5pdGVtc0J5VHlwZS50YWxlbnQ/Lmxlbmd0aFxuICAgICAgOiAwXG4gICAgZGF0YS5taW5QdWxwVGFsZW50cyA9IHRoaXMuYWN0b3IuYXJjaGV0eXBlPy5kYXRhLmRhdGEudGFsZW50c1xuICAgICAgPyB0aGlzLmFjdG9yLmFyY2hldHlwZT8uZGF0YS5kYXRhLnRhbGVudHNcbiAgICAgIDogMFxuICAgIGRhdGEuaW52YWxpZFB1bHBUYWxlbnRzID0gZGF0YS5wdWxwVGFsZW50Q291bnQgPCBkYXRhLm1pblB1bHBUYWxlbnRzXG5cbiAgICBkYXRhLmhhc0RldmVsb3BtZW50UGhhc2UgPSB0aGlzLmFjdG9yLmhhc0RldmVsb3BtZW50UGhhc2VcblxuICAgIGRhdGEuYWxsb3dEZXZlbG9wbWVudCA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcpXG4gICAgZGF0YS5hbGxvd0NoYXJDcmVhdGlvbiA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnKVxuICAgIGRhdGEuZGV2ZWxvcG1lbnRSb2xsRm9yTHVjayA9IGdhbWUuc2V0dGluZ3MuZ2V0KFxuICAgICAgJ0NvQzcnLFxuICAgICAgJ2RldmVsb3BtZW50Um9sbEZvckx1Y2snXG4gICAgKVxuICAgIGRhdGEuc2hvd0RldlBhbm5lbCA9IGRhdGEuYWxsb3dEZXZlbG9wbWVudCB8fCBkYXRhLmFsbG93Q2hhckNyZWF0aW9uXG5cbiAgICBkYXRhLm1hbnVhbENyZWRpdCA9IHRoaXMuYWN0b3IuZ2V0QWN0b3JGbGFnKCdtYW51YWxDcmVkaXQnKVxuICAgIGlmICghZGF0YS5tYW51YWxDcmVkaXQpIHtcbiAgICAgIGRhdGEuY3JlZGl0ID0ge31cbiAgICAgIGxldCBmYWN0b3JcbiAgICAgIGxldCBtb25ldGFyeVN5bWJvbFxuICAgICAgaWYgKCFkYXRhLmRhdGEuY3JlZGl0KSB7XG4gICAgICAgIGZhY3RvciA9IDFcbiAgICAgICAgbW9uZXRhcnlTeW1ib2wgPSAnJCdcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZhY3RvciA9IHBhcnNlSW50KGRhdGEuZGF0YS5jcmVkaXQubXVsdGlwbGllcilcbiAgICAgICAgICA/IHBhcnNlSW50KGRhdGEuZGF0YS5jcmVkaXQubXVsdGlwbGllcilcbiAgICAgICAgICA6IDFcbiAgICAgICAgbW9uZXRhcnlTeW1ib2wgPSBkYXRhLmRhdGEuY3JlZGl0Lm1vbmV0YXJ5U3ltYm9sXG4gICAgICAgICAgPyBkYXRhLmRhdGEuY3JlZGl0Lm1vbmV0YXJ5U3ltYm9sXG4gICAgICAgICAgOiAnJCdcbiAgICAgIH1cblxuICAgICAgZGF0YS5jcmVkaXQuc3BlbmRpbmdMZXZlbCA9IGAke21vbmV0YXJ5U3ltYm9sfSR7XG4gICAgICAgIHRoaXMuYWN0b3Iuc3BlbmRpbmdMZXZlbCAqIGZhY3RvclxuICAgICAgfWBcbiAgICAgIGRhdGEuY3JlZGl0LmFzc2V0cyA9IGAke21vbmV0YXJ5U3ltYm9sfSR7dGhpcy5hY3Rvci5hc3NldHMgKiBmYWN0b3J9YFxuICAgICAgZGF0YS5jcmVkaXQuY2FzaCA9IGAke21vbmV0YXJ5U3ltYm9sfSR7dGhpcy5hY3Rvci5jYXNoICogZmFjdG9yfWBcbiAgICB9XG5cbiAgICBkYXRhLm9uZUJsb2NrQmFja1N0b3J5ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb25lQmxvY2tCYWNrc3RvcnknKVxuXG4gICAgZGF0YS5zdW1tYXJpemVkID0gdGhpcy5zdW1tYXJpemVkICYmICFkYXRhLnBlcm1pc3Npb25MaW1pdGVkXG4gICAgZGF0YS5za2lsbExpc3QgPSBbXVxuICAgIGxldCBwcmV2aW91c1NwZWMgPSAnJ1xuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgZGF0YS5za2lsbHMpIHtcbiAgICAgIGlmIChkYXRhLnNraWxsU2hvd1VuY29tbW9uIHx8ICFza2lsbC5kYXRhLnByb3BlcnRpZXMucmFyaXR5KSB7XG4gICAgICAgIGlmIChza2lsbC5kYXRhLnByb3BlcnRpZXMuc3BlY2lhbCkge1xuICAgICAgICAgIGlmIChwcmV2aW91c1NwZWMgIT09IHNraWxsLmRhdGEuc3BlY2lhbGl6YXRpb24pIHtcbiAgICAgICAgICAgIHByZXZpb3VzU3BlYyA9IHNraWxsLmRhdGEuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIGRhdGEuc2tpbGxMaXN0LnB1c2goe1xuICAgICAgICAgICAgICBpc1NwZWNpYWxpemF0aW9uOiB0cnVlLFxuICAgICAgICAgICAgICBuYW1lOiBza2lsbC5kYXRhLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkYXRhLnNraWxsTGlzdC5wdXNoKHNraWxsKVxuICAgICAgfVxuICAgIH1cbiAgICBkYXRhLnNraWxsc0J5VmFsdWUgPSBbLi4uZGF0YS5za2lsbHNdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBiLmRhdGEudmFsdWUgLSBhLmRhdGEudmFsdWVcbiAgICB9KVxuICAgIGRhdGEudG9wU2tpbGxzID0gWy4uLmRhdGEuc2tpbGxzQnlWYWx1ZV0uc2xpY2UoMCwgMTQpXG4gICAgZGF0YS5za2lsbHNCeVZhbHVlID0gZGF0YS5za2lsbHNCeVZhbHVlLmZpbHRlcihcbiAgICAgIHNraWxsID0+IGRhdGEuc2tpbGxTaG93VW5jb21tb24gfHwgIXNraWxsLmRhdGEucHJvcGVydGllcy5yYXJpdHlcbiAgICApXG4gICAgZGF0YS50b3BXZWFwb25zID0gWy4uLmRhdGEubWVsZWVXcG4sIC4uLmRhdGEucmFuZ2VXcG5dXG4gICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICByZXR1cm4gYS5kYXRhLnNraWxsLm1haW4/LnZhbHVlIC0gYi5kYXRhLnNraWxsLm1haW4/LnZhbHVlXG4gICAgICB9KVxuICAgICAgLnJldmVyc2UoKVxuICAgICAgLnNsaWNlKDAsIDMpXG4gICAgZGF0YS5kaXNwbGF5UGxheWVyTmFtZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KFxuICAgICAgJ0NvQzcnLFxuICAgICAgJ2Rpc3BsYXlQbGF5ZXJOYW1lT25TaGVldCdcbiAgICApXG4gICAgaWYgKGRhdGEuZGlzcGxheVBsYXllck5hbWUgJiYgIWRhdGEuZGF0YS5pbmZvcy5wbGF5ZXJuYW1lKSB7XG4gICAgICBjb25zdCB1c2VyID0gdGhpcy5hY3Rvci5jaGFyYWN0ZXJVc2VyXG4gICAgICBpZiAodXNlcikge1xuICAgICAgICBkYXRhLmRhdGEuaW5mb3MucGxheWVybmFtZSA9IHVzZXIubmFtZVxuICAgICAgfVxuICAgIH1cblxuICAgIGRhdGEuc2tpbGxMaXN0RW1wdHkgPSBkYXRhLnNraWxscy5sZW5ndGggPT09IDBcblxuICAgIGRhdGEuc2hvd0ludmVudG9yeUl0ZW1zID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLml0ZW1zQnlUeXBlLCAnaXRlbScpIHx8XG4gICAgICAhZGF0YS5kYXRhLmZsYWdzLmxvY2tlZFxuICAgIGRhdGEuc2hvd0ludmVudG9yeUJvb2tzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLml0ZW1zQnlUeXBlLCAnYm9vaycpIHx8XG4gICAgICAhZGF0YS5kYXRhLmZsYWdzLmxvY2tlZFxuICAgIGRhdGEuc2hvd0ludmVudG9yeVNwZWxscyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YS5pdGVtc0J5VHlwZSwgJ3NwZWxsJykgfHxcbiAgICAgICFkYXRhLmRhdGEuZmxhZ3MubG9ja2VkXG4gICAgZGF0YS5zaG93SW52ZW50b3J5VGFsZW50cyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YS5pdGVtc0J5VHlwZSwgJ3RhbGVudCcpIHx8XG4gICAgICAoIWRhdGEuZGF0YS5mbGFncy5sb2NrZWQgJiYgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVUYWxlbnRzJykpXG4gICAgZGF0YS5zaG93SW52ZW50b3J5U3RhdHVzZXMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEuaXRlbXNCeVR5cGUsICdzdGF0dXMnKSB8fFxuICAgICAgIWRhdGEuZGF0YS5mbGFncy5sb2NrZWRcblxuICAgIGRhdGEuaGFzSW52ZW50b3J5ID1cbiAgICAgIGRhdGEuc2hvd0ludmVudG9yeUl0ZW1zIHx8XG4gICAgICBkYXRhLnNob3dJbnZlbnRvcnlCb29rcyB8fFxuICAgICAgZGF0YS5zaG93SW52ZW50b3J5U3BlbGxzIHx8XG4gICAgICBkYXRhLnNob3dJbnZlbnRvcnlUYWxlbnRzIHx8XG4gICAgICBkYXRhLnNob3dJbnZlbnRvcnlTdGF0dXNlcyB8fFxuICAgICAgZGF0YS5zaG93SW52ZW50b3J5V2VhcG9uc1xuXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgNWUgQWN0b3IgU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0VjInLCAnYWN0b3InLCAnY2hhcmFjdGVyJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL2NoYXJhY3Rlci9pbmRleC5odG1sJyxcbiAgICAgIHdpZHRoOiA2ODcsXG4gICAgICBoZWlnaHQ6IDYyMyxcbiAgICAgIHJlc2l6YWJsZTogdHJ1ZSxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuaXRlbScsIGRyb3BTZWxlY3RvcjogbnVsbCB9XSxcbiAgICAgIHNjcm9sbFk6IFsnLnJpZ2h0LXBhbmVsIC50YWInXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdza2lsbHMnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaWYgKHRoaXMuYWN0b3IuaXNPd25lcikge1xuICAgICAgLy8gTU9ESUY6IDAuOC54IG93bmVyIGRlcHJlY2F0ZWQgID0+IGlzT3duZXJcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5za2lsbC1uYW1lLnJvbGxhYmxlLmZsYWdnZWQ0ZGV2JylcbiAgICAgICAgLmNsaWNrKGFzeW5jIGV2ZW50ID0+IHRoaXMuX29uU2tpbGxEZXYoZXZlbnQpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLnJlc2V0LW9jY3VwYXRpb24nKVxuICAgICAgICAuY2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5hY3Rvci5yZXNldE9jY3VwYXRpb24oKSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5yZXNldC1hcmNoZXR5cGUnKVxuICAgICAgICAuY2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5hY3Rvci5yZXNldEFyY2hldHlwZSgpKVxuICAgICAgaHRtbC5maW5kKCcub3Blbi1pdGVtJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtRGV0YWlscyhldmVudCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCdbbmFtZT1cImRhdGEuYXR0cmlicy5ocC52YWx1ZVwiXScpXG4gICAgICAgIC5jaGFuZ2UoZXZlbnQgPT4gdGhpcy5hY3Rvci5zZXRIZWFsdGhTdGF0dXNNYW51YWxseShldmVudCkpXG4gICAgICBodG1sLmZpbmQoJy50b2dnbGUtbGlzdC1tb2RlJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgICB0aGlzLnRvZ2dsZVNraWxsTGlzdE1vZGUoZXZlbnQpXG4gICAgICB9KVxuICAgICAgaHRtbC5maW5kKCcudG9nZ2xlLXVuY29tbW9uLW1vZGUnKS5jbGljayhldmVudCA9PiB7XG4gICAgICAgIHRoaXMudG9nZ2xlU2tpbGxVbmNvbW1vbk1vZGUoZXZlbnQpXG4gICAgICB9KVxuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIGh0bWxcbiAgICAgICAgICAuZmluZCgnLnNhbml0eS1sb3NzLXR5cGUtYWRkJylcbiAgICAgICAgICAuY2xpY2sodGhpcy5fb25BZGRTYW5pdHlMb3NzUmVhc29uLmJpbmQodGhpcykpXG4gICAgICAgIGh0bWxcbiAgICAgICAgICAuZmluZCgnLnNhbml0eS1sb3NzLXR5cGUtZGVsZXRlJylcbiAgICAgICAgICAuY2xpY2sodGhpcy5fb25EZWxldGVTYW5pdHlMb3NzUmVhc29uLmJpbmQodGhpcykpXG4gICAgICAgIGh0bWxcbiAgICAgICAgICAuZmluZCgnLnRvZ2dsZS1rZWVwZXItZmxhZ3MnKVxuICAgICAgICAgIC5jbGljayh0aGlzLl9vblRvZ2dsZUtlZXBlckZsYWdzLmJpbmQodGhpcykpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX29uVG9nZ2xlS2VlcGVyRmxhZ3MgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWcpIHtcbiAgICAgIGNhc2UgJ215dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldEZsYWcoXG4gICAgICAgICAgJ0NvQzcnLFxuICAgICAgICAgICdteXRob3NJbnNhbml0eUV4cGVyaWVuY2VkJyxcbiAgICAgICAgICAhdGhpcy5hY3Rvci5teXRob3NJbnNhbml0eUV4cGVyaWVuY2VkXG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ215dGhvc0hhcmRlbmVkJzpcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRGbGFnKCdDb0M3JywgJ215dGhvc0hhcmRlbmVkJywgIXRoaXMuYWN0b3IubXl0aG9zSGFyZGVuZWQpXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uQWRkU2FuaXR5TG9zc1JlYXNvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgbmV3IENvQzdDcmVhdGVNeXRob3NFbmNvdW50ZXIoXG4gICAgICB7XG4gICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yLFxuICAgICAgICB0eXBlOiBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudHlwZVxuICAgICAgfSxcbiAgICAgIHt9XG4gICAgKS5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIF9vbkRlbGV0ZVNhbml0eUxvc3NSZWFzb24gKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IG9mZnNldCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLmZsZXhyb3cnKS5kYXRhKCdvZmZzZXQnKVxuICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudHMgPSB0aGlzLmFjdG9yLmRhdGEuZGF0YS5zYW5pdHlMb3NzRXZlbnRzID8/IFtdXG4gICAgc2FuaXR5TG9zc0V2ZW50cy5zcGxpY2Uob2Zmc2V0LCAxKVxuICAgIHNhbml0eUxvc3NFdmVudHMuc29ydChmdW5jdGlvbiAobGVmdCwgcmlnaHQpIHtcbiAgICAgIHJldHVybiBsZWZ0LnR5cGUubG9jYWxlQ29tcGFyZShyaWdodC50eXBlKVxuICAgIH0pXG4gICAgdGhpcy5hY3Rvci51cGRhdGUoeyAnZGF0YS5zYW5pdHlMb3NzRXZlbnRzJzogc2FuaXR5TG9zc0V2ZW50cyB9KVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlU2tpbGxMaXN0TW9kZSAoZXZlbnQpIHtcbiAgICBhd2FpdCB0aGlzLmFjdG9yLnNldEZsYWcoXG4gICAgICAnQ29DNycsXG4gICAgICAnc2tpbGxMaXN0TW9kZScsXG4gICAgICAhdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ3NraWxsTGlzdE1vZGUnKVxuICAgIClcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZVNraWxsVW5jb21tb25Nb2RlIChldmVudCkge1xuICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0RmxhZyhcbiAgICAgICdDb0M3JyxcbiAgICAgICdza2lsbFNob3dVbmNvbW1vbicsXG4gICAgICAhdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ3NraWxsU2hvd1VuY29tbW9uJylcbiAgICApXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25Ta2lsbERldiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgIGF3YWl0IHRoaXMuYWN0b3IuZGV2ZWxvcFNraWxsKHNraWxsSWQsIGV2ZW50LnNoaWZ0S2V5KVxuICB9XG5cbiAgX29uSXRlbURldGFpbHMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHR5cGUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudHlwZVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yW3R5cGVdXG4gICAgaWYgKGl0ZW0pIGl0ZW0uc2hlZXQucmVuZGVyKHRydWUpXG4gIH1cblxuICBzdGF0aWMgcmVuZGVyU2hlZXQgKHNoZWV0KSB7XG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ292ZXJyaWRlU2hlZXRBcnR3b3JrJykpIHtcbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgJy0tbWFpbi1zaGVldC1iZycsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZCcpXG4gICAgICAgIClcbiAgICAgICAgLy8gY29uc3QgYm9yZGVySW1hZ2UgPSBzaGVldC5lbGVtZW50LmZpbmQoJ2Zvcm0nKS5jc3MoJ2JvcmRlci1pbWFnZScpO1xuICAgICAgICAvLyBzaGVldC5lbGVtZW50LmZpbmQoJ2Zvcm0nKS5jc3MoJ2JvcmRlci1pbWFnZScsICcnKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmRUeXBlJykgIT09ICdzbGljZSdcbiAgICAgICAgKSB7XG4gICAgICAgICAgbGV0IHN0eWxlU2hlZXQsIGNzc1J1bGVJbmRleFxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG9jdW1lbnQuc3R5bGVTaGVldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5zdHlsZVNoZWV0c1tpXS5ocmVmPy5lbmRzV2l0aCgnY29jN2cuY3NzJykpIHtcbiAgICAgICAgICAgICAgc3R5bGVTaGVldCA9IGRvY3VtZW50LnN0eWxlU2hlZXRzW2ldXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHN0eWxlU2hlZXQpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3R5bGVTaGVldC5ydWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgc3R5bGVTaGVldC5ydWxlc1tpXS5zZWxlY3RvclRleHQgPT09ICcuc2hlZXRWMi5jaGFyYWN0ZXIgZm9ybSdcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY3NzUnVsZUluZGV4ID0gaVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNzc1J1bGVJbmRleCkge1xuICAgICAgICAgICAgY29uc3QgQ1NTU3R5bGUgPSBzdHlsZVNoZWV0LnJ1bGVzW2Nzc1J1bGVJbmRleF0uc3R5bGVcbiAgICAgICAgICAgIENTU1N0eWxlLnJlbW92ZVByb3BlcnR5KCdib3JkZXItaW1hZ2UnKVxuICAgICAgICAgICAgQ1NTU3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICAgICAgICAgICdiYWNrZ3JvdW5kJyxcbiAgICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZCcpXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBzd2l0Y2ggKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmRUeXBlJykpIHtcbiAgICAgICAgICAgICAgY2FzZSAnYXV0byc6XG4gICAgICAgICAgICAgICAgQ1NTU3R5bGUuc2V0UHJvcGVydHkoJ2JhY2tncm91bmQtc2l6ZScsICdhdXRvJylcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICBjYXNlICdjb250YWluJzpcbiAgICAgICAgICAgICAgICBDU1NTdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZC1zaXplJywgJ2NvbnRhaW4nKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIGNhc2UgJ2NvdmVyJzpcbiAgICAgICAgICAgICAgICBDU1NTdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZC1zaXplJywgJ2NvdmVyJylcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIENTU1N0eWxlLnNldFByb3BlcnR5KCdiYWNrZ3JvdW5kLXNpemUnLCAnYXV0bycpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmQnKS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAnbnVsbCdcbiAgICAgICkge1xuICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAnLS1tYWluLXNoZWV0LWJnJyxcbiAgICAgICAgICBcInVybCggJy4vYXNzZXRzL2ltYWdlcy92b2lkLndlYnAnKVwiXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtPdGhlclNoZWV0QmFja2dyb3VuZCcpKSB7XG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxuICAgICAgICAgICctLW90aGVyLXNoZWV0LWJnJyxcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmQnKVxuICAgICAgICApXG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBnYW1lLnNldHRpbmdzXG4gICAgICAgICAgLmdldCgnQ29DNycsICdhcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmQnKVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpID09PSAnbnVsbCdcbiAgICAgICkge1xuICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAnLS1vdGhlci1zaGVldC1iZycsXG4gICAgICAgICAgXCJ1cmwoICcuL2Fzc2V0cy9pbWFnZXMvdm9pZC53ZWJwJylcIlxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrU2hlZXRJbWFnZScpKSB7XG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxuICAgICAgICAgICctLW1haW4tc2hlZXQtaW1hZ2UnLFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtTaGVldEltYWdlJylcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya1NoZWV0SW1hZ2UnKS50b0xvd2VyQ2FzZSgpID09PSAnbnVsbCdcbiAgICAgICkge1xuICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAnLS1tYWluLXNoZWV0LWltYWdlJyxcbiAgICAgICAgICBcInVybCggJy4vYXNzZXRzL2ltYWdlcy92b2lkLndlYnAnKVwiXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtGcm9udENvbG9yJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgJy0tbWFpbi1zaGVldC1mcm9udC1jb2xvcicsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0Zyb250Q29sb3InKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0JhY2tncm91bmRDb2xvcicpKSB7XG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxuICAgICAgICAgICctLW1haW4tc2hlZXQtYmFjay1jb2xvcicsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0JhY2tncm91bmRDb2xvcicpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrSW50ZXJhY3RpdmVDb2xvcicpKSB7XG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxuICAgICAgICAgICctLW1haW4tc2hlZXQtaW50ZXJhY3RpdmUtY29sb3InLFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtJbnRlcmFjdGl2ZUNvbG9yJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKCFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrRml4ZWRTa2lsbExlbmd0aCcpKSB7XG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKCctLXNraWxsLWxlbmd0aCcsICdhdXRvJylcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoJy0tc2tpbGwtc3BlY2lhbGl6YXRpb24tbGVuZ3RoJywgJ2F1dG8nKVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250JykpIHtcbiAgICAgICAgY29uc3QgY3VzdG9tU2hlZXRGb250ID0gbmV3IEZvbnRGYWNlKFxuICAgICAgICAgICdjdXN0b21TaGVldEZvbnQnLFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtNYWluRm9udCcpXG4gICAgICAgIClcbiAgICAgICAgY3VzdG9tU2hlZXRGb250XG4gICAgICAgICAgLmxvYWQoKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChsb2FkZWRGYWNlKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5mb250cy5hZGQobG9hZGVkRmFjZSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyb3IpXG4gICAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtNYWluRm9udEJvbGQnKSkge1xuICAgICAgICBjb25zdCBjdXN0b21TaGVldEN1cnNpdmVGb250ID0gbmV3IEZvbnRGYWNlKFxuICAgICAgICAgICdjdXN0b21TaGVldEZvbnQnLFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtNYWluRm9udEJvbGQnKSxcbiAgICAgICAgICB7IHdlaWdodDogJ2JvbGQnIH1cbiAgICAgICAgKVxuICAgICAgICBjdXN0b21TaGVldEN1cnNpdmVGb250XG4gICAgICAgICAgLmxvYWQoKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChsb2FkZWRGYWNlKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5mb250cy5hZGQobG9hZGVkRmFjZSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyb3IpXG4gICAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtNYWluRm9udFNpemUnKSkge1xuICAgICAgICBjb25zdCBzaXplID0gYCR7Z2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250U2l6ZScpfXB4YFxuICAgICAgICBpZiAoc2l6ZSAhPT0gJCgnOnJvb3QnKS5jc3MoJ2ZvbnQtc2l6ZScpKSB7XG4gICAgICAgICAgJCgnOnJvb3QnKS5jc3MoJ2ZvbnQtc2l6ZScsIHNpemUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBnYW1lICovXG5cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4vY2hlY2suanMnXG5leHBvcnQgY2xhc3MgQ29DN0NvbWJhdCB7XG4gIHN0YXRpYyByZW5kZXJDb21iYXRUcmFja2VyIChhcHAsIGh0bWwsIGRhdGEpIHtcbiAgICBjb25zdCBjdXJyZW50Q29tYmF0ID0gZGF0YS5jb21iYXRzW2RhdGEuY3VycmVudEluZGV4IC0gMV1cbiAgICBpZiAoIWN1cnJlbnRDb21iYXQpIHJldHVyblxuXG4gICAgLy8gVE9ETyA6IFNpIGxlIGNvbWJhdCBlc3QgZGVqYSBkZWJ1dMOpIGF2YW50IGNoYXJnZW1lbnQgbGEgZm9uY3Rpb24gZCdpbml0aWF0aXZlIHBvaW50ZSB2ZXJzIGwnYW5jaWVubmUuXG4gICAgLy8gbGEgZm9uY3Rpb24gYXR0cmlidcOpZSBlc3QgZGF0YS5jb21iYXQucm9sbEluaXRpYXRpdmVcbiAgICBodG1sLmZpbmQoJy5jb21iYXRhbnQnKS5lYWNoKChpLCBlbCkgPT4ge1xuICAgICAgLy8gaWYoIGdhbWUuY29tYmF0LnN0YXJ0ZWQpe1xuXG4gICAgICBjb25zdCBjb21iSWQgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29tYmF0YW50LWlkJylcbiAgICAgIGNvbnN0IGNvbWJhdGFudENvbnRyb2xzRGl2ID0gZWwucXVlcnlTZWxlY3RvcignLmNvbWJhdGFudC1jb250cm9scycpXG4gICAgICAvLyBjb25zdCBjb21iYXRhbnQgPSBnYW1lLmNvbWJhdC5nZXRDb21iYXRhbnQoY29tYklkKTtcbiAgICAgIGNvbnN0IGNvbWJhdGFudCA9IGN1cnJlbnRDb21iYXQuZGF0YS5jb21iYXRhbnRzLmdldChjb21iSWQpXG5cbiAgICAgIGlmIChjb21iYXRhbnQuZ2V0RmxhZygnQ29DNycsICdoYXNHdW4nKSkge1xuICAgICAgICAkKGNvbWJhdGFudENvbnRyb2xzRGl2KS5wcmVwZW5kKFxuICAgICAgICAgIGA8YSBjbGFzcz1cImNvbWJhdGFudC1jb250cm9sIGFjdGl2ZSBhZGQtaW5pdFwiIHRpdGxlPVwiJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAnQ29DNy5QdXRHdW5Bd2F5J1xuICAgICAgICAgICl9XCIgZGF0YS1jb250cm9sPVwiZHJhd0d1blwiPjxpIGNsYXNzPVwiZ2FtZS1pY29uIGdhbWUtaWNvbi1yZXZvbHZlclwiPjwvaT48L2E+YFxuICAgICAgICApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKGNvbWJhdGFudENvbnRyb2xzRGl2KS5wcmVwZW5kKFxuICAgICAgICAgIGA8YSBjbGFzcz1cImNvbWJhdGFudC1jb250cm9sIGFkZC1pbml0XCIgdGl0bGU9XCIke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICdDb0M3LkRyYXdHdW4nXG4gICAgICAgICAgKX1cIiBkYXRhLWNvbnRyb2w9XCJkcmF3R3VuXCI+PGkgY2xhc3M9XCJnYW1lLWljb24gZ2FtZS1pY29uLXJldm9sdmVyXCI+PC9pPjwvYT5gXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaW5pdGlhdGl2ZVJ1bGUnKSA9PT0gJ29wdGlvbmFsJyAmJlxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5SW5pdEFzVGV4dCcpXG4gICAgICApIHtcbiAgICAgICAgaWYgKGNvbWJhdGFudC5pbml0aWF0aXZlKSB7XG4gICAgICAgICAgY29uc3QgdG9rZW5Jbml0aWF0aXZlID0gZWwucXVlcnlTZWxlY3RvcignLnRva2VuLWluaXRpYXRpdmUnKVxuICAgICAgICAgIGNvbnN0IGluaXRpYXRpdmVUZXN0ID0gdG9rZW5Jbml0aWF0aXZlLnF1ZXJ5U2VsZWN0b3IoJy5pbml0aWF0aXZlJylcbiAgICAgICAgICBjb25zdCByb2xsID1cbiAgICAgICAgICAgIDEwMCAqIGNvbWJhdGFudC5pbml0aWF0aXZlIC0gMTAwICogTWF0aC5mbG9vcihjb21iYXRhbnQuaW5pdGlhdGl2ZSlcbiAgICAgICAgICBzd2l0Y2ggKE1hdGguZmxvb3IoY29tYmF0YW50LmluaXRpYXRpdmUpKSB7XG4gICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgnZnVtYmxlJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZ1bWJsZScpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LnRpdGxlID0gcm9sbFxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmU6XG4gICAgICAgICAgICAgIHRva2VuSW5pdGlhdGl2ZS5jbGFzc0xpc3QuYWRkKCdmYWlsdXJlJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZhaWx1cmUnKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgncmVndWxhci1zdWNjZXNzJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LlJvbGxEaWZmaWN1bHR5UmVndWxhcidcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgnaGFyZC1zdWNjZXNzJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LlJvbGxEaWZmaWN1bHR5SGFyZCdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgnZXh0cmVtZS1zdWNjZXNzJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LlJvbGxEaWZmaWN1bHR5RXh0cmVtZSdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgICAgICAgdG9rZW5Jbml0aWF0aXZlLmNsYXNzTGlzdC5hZGQoJ2NyaXRpY2FsJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LlJvbGxEaWZmaWN1bHR5Q3JpdGljYWwnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QudGl0bGUgPSByb2xsXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNvbWJhdGFudC5pbml0aWF0aXZlIDwgMCkge1xuICAgICAgICBjb25zdCBoNCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy50b2tlbi1uYW1lJykucXVlcnlTZWxlY3RvcignaDQnKVxuICAgICAgICBjb25zdCBzcGFuID0gZWwucXVlcnlTZWxlY3Rvcignc3Bhbi5pbml0aWF0aXZlJylcbiAgICAgICAgaDQuc3R5bGUuZm9udFdlaWdodCA9ICc5MDAnXG4gICAgICAgIGg0LnN0eWxlLnRleHRTaGFkb3cgPSAnMXB4IDFweCA0cHggZGFya3JlZCdcbiAgICAgICAgc3Bhbi5zdHlsZS5mb250V2VpZ2h0ID0gJzkwMCdcbiAgICAgICAgc3Bhbi5zdHlsZS50ZXh0U2hhZG93ID0gJzFweCAxcHggNHB4IGRhcmtyZWQnXG5cbiAgICAgICAgZWwuc3R5bGUuY29sb3IgPSAnZGFya3JlZCdcbiAgICAgICAgZWwuc3R5bGUuYmFja2dyb3VuZCA9ICdibGFjaydcbiAgICAgICAgZWwuc3R5bGUuZm9udFdlaWdodCA9ICc5MDAnXG4gICAgICB9XG4gICAgfSlcbiAgICBodG1sLmZpbmQoJy5hZGQtaW5pdCcpLmNsaWNrKGV2ZW50ID0+IENvQzdDb21iYXQuX29uVG9nZ2xlR3VuKGV2ZW50KSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25Ub2dnbGVHdW4gKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgY29uc3QgYnRuID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxpID0gYnRuLmNsb3Nlc3QoJy5jb21iYXRhbnQnKVxuICAgIGNvbnN0IGMgPSBhd2FpdCBnYW1lLmNvbWJhdC5jb21iYXRhbnRzLmdldChsaS5kYXRhc2V0LmNvbWJhdGFudElkKVxuICAgIGlmIChjLmFjdG9yLmlzT3duZXIpIHtcbiAgICAgIGlmIChjLmdldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJykpIHtcbiAgICAgICAgYXdhaXQgYy5zZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicsIGZhbHNlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgYy5zZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicsIHRydWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbmV3SW5pdCA9IGF3YWl0IGMuYWN0b3Iucm9sbEluaXRpYXRpdmUoISFjLmdldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJykpXG4gICAgaWYgKGMuZ2V0RmxhZygnQ29DNycsICdoYXNHdW4nKSkge1xuICAgICAgaWYgKGMuaW5pdGlhdGl2ZSA8IG5ld0luaXQpIGdhbWUuY29tYmF0LnNldEluaXRpYXRpdmUoYy5pZCwgbmV3SW5pdClcbiAgICB9IGVsc2UgZ2FtZS5jb21iYXQuc2V0SW5pdGlhdGl2ZShjLmlkLCBuZXdJbml0KVxuICB9XG59XG5cbi8qKlxuICogUm9sbCBpbml0aWF0aXZlIGZvciBvbmUgb3IgbXVsdGlwbGUgQ29tYmF0YW50cyB3aXRoaW4gdGhlIENvbWJhdCBlbnRpdHlcbiAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBpZHMgICAgIEEgQ29tYmF0YW50IGlkIG9yIEFycmF5IG9mIGlkcyBmb3Igd2hpY2ggdG8gcm9sbFxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zPXt9XSAgICAgQWRkaXRpb25hbCBvcHRpb25zIHdoaWNoIG1vZGlmeSBob3cgaW5pdGlhdGl2ZSByb2xscyBhcmUgY3JlYXRlZCBvciBwcmVzZW50ZWQuXG4gKiBAcGFyYW0ge3N0cmluZ3xudWxsfSBbb3B0aW9ucy5mb3JtdWxhXSAgICAgICAgIEEgbm9uLWRlZmF1bHQgaW5pdGlhdGl2ZSBmb3JtdWxhIHRvIHJvbGwuIE90aGVyd2lzZSB0aGUgc3lzdGVtIGRlZmF1bHQgaXMgdXNlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudXBkYXRlVHVybj10cnVlXSAgICAgVXBkYXRlIHRoZSBDb21iYXQgdHVybiBhZnRlciBhZGRpbmcgbmV3IGluaXRpYXRpdmUgc2NvcmVzIHRvIGtlZXAgdGhlIHR1cm4gb24gdGhlIHNhbWUgQ29tYmF0YW50LlxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zLm1lc3NhZ2VPcHRpb25zPXt9XSAgICBBZGRpdGlvbmFsIG9wdGlvbnMgd2l0aCB3aGljaCB0byBjdXN0b21pemUgY3JlYXRlZCBDaGF0IE1lc3NhZ2VzXG4gKiBAcmV0dXJuIHtQcm9taXNlPENvbWJhdD59ICAgICAgICBBIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgdG8gdGhlIHVwZGF0ZWQgQ29tYmF0IGVudGl0eSBvbmNlIHVwZGF0ZXMgYXJlIGNvbXBsZXRlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcm9sbEluaXRpYXRpdmUgKFxuICBpZHMsXG4gIHsgZm9ybXVsYSA9IG51bGwsIHVwZGF0ZVR1cm4gPSB0cnVlLCBtZXNzYWdlT3B0aW9ucyA9IHt9IH0gPSB7fVxuKSB7XG4gIC8vIFN0cnVjdHVyZSBpbnB1dCBkYXRhXG4gIGlkcyA9IHR5cGVvZiBpZHMgPT09ICdzdHJpbmcnID8gW2lkc10gOiBpZHNcbiAgY29uc3QgY3VycmVudElkID0gdGhpcy5jb21iYXRhbnQuaWRcblxuICAvLyBJdGVyYXRlIG92ZXIgQ29tYmF0YW50cywgcGVyZm9ybWluZyBhbiBpbml0aWF0aXZlIHJvbGwgZm9yIGVhY2hcbiAgY29uc3QgdXBkYXRlcyA9IFtdXG4gIGZvciAoY29uc3QgWywgaWRdIG9mIGlkcy5lbnRyaWVzKCkpIHtcbiAgICAvLyBHZXQgQ29tYmF0YW50IGRhdGEgKG5vbi1zdHJpY3RseSlcbiAgICBjb25zdCBjb21iYXRhbnQgPSB0aGlzLmNvbWJhdGFudHMuZ2V0KGlkKVxuICAgIGlmICghY29tYmF0YW50Py5pc093bmVyKSByZXR1cm4gbnVsbFxuXG4gICAgLy8gUHJvZHVjZSBhbiBpbml0aWF0aXZlIHJvbGwgZm9yIHRoZSBDb21iYXRhbnRcbiAgICBjb25zdCByb2xsID0gYXdhaXQgY29tYmF0YW50LmFjdG9yLnJvbGxJbml0aWF0aXZlKFxuICAgICAgISFjb21iYXRhbnQuZ2V0RmxhZygnQ29DNycsICdoYXNHdW4nKVxuICAgIClcbiAgICB1cGRhdGVzLnB1c2goeyBfaWQ6IGlkLCBpbml0aWF0aXZlOiByb2xsIH0pXG4gIH1cbiAgaWYgKCF1cGRhdGVzLmxlbmd0aCkgcmV0dXJuIHRoaXNcblxuICAvLyBVcGRhdGUgbXVsdGlwbGUgY29tYmF0YW50c1xuICBhd2FpdCB0aGlzLnVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdDb21iYXRhbnQnLCB1cGRhdGVzKVxuXG4gIC8vIEVuc3VyZSB0aGUgdHVybiBvcmRlciByZW1haW5zIHdpdGggdGhlIHNhbWUgY29tYmF0YW50XG4gIGlmICh1cGRhdGVUdXJuKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyB0dXJuOiB0aGlzLnR1cm5zLmZpbmRJbmRleCh0ID0+IHQuaWQgPT09IGN1cnJlbnRJZCkgfSlcbiAgfVxuXG4gIHJldHVybiB0aGlzXG59XG4iLCIvKiBnbG9iYWwgQ09ORklHLCBEaWFsb2csIGV4cGFuZE9iamVjdCwgZm91bmRyeSwgZ2FtZSwgaXNOZXdlclZlcnNpb24sIG1lcmdlT2JqZWN0LCB1aSAqL1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuL2l0ZW1zL2l0ZW0uanMnXG5cbmV4cG9ydCBjbGFzcyBVcGRhdGVyIHtcbiAgc3RhdGljIGFzeW5jIGNoZWNrRm9yVXBkYXRlICgpIHtcbiAgICB0aGlzLnN5c3RlbVVwZGF0ZVZlcnNpb24gPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzeXN0ZW1VcGRhdGVWZXJzaW9uJylcbiAgICAgID8gU3RyaW5nKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N5c3RlbVVwZGF0ZVZlcnNpb24nKSlcbiAgICAgIDogJzAnXG5cbiAgICBjb25zdCBydW5NaWdyYXRlID0gaXNOZXdlclZlcnNpb24oXG4gICAgICBnYW1lLnN5c3RlbS5kYXRhLnZlcnNpb24sXG4gICAgICB0aGlzLnN5c3RlbVVwZGF0ZVZlcnNpb25cbiAgICApXG4gICAgdGhpcy51cGRhdGVkTW9kdWxlcyA9XG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzeXN0ZW1VcGRhdGVkTW9kdWxlVmVyc2lvbicpIHx8IHt9XG4gICAgdGhpcy5jdXJyZW50TW9kdWxlcyA9IHt9XG4gICAgZm9yIChjb25zdCBwYWNrIG9mIGdhbWUucGFja3MpIHtcbiAgICAgIGlmIChcbiAgICAgICAgIVsnQ29DNycsICd3b3JsZCddLmluY2x1ZGVzKFxuICAgICAgICAgIHBhY2subWV0YWRhdGEucGFja2FnZSB8fCBwYWNrLm1ldGFkYXRhLnBhY2thZ2VOYW1lXG4gICAgICAgICkgJiZcbiAgICAgICAgWydBY3RvcicsICdJdGVtJywgJ1NjZW5lJ10uaW5jbHVkZXMocGFjay5tZXRhZGF0YS50eXBlKVxuICAgICAgKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFxuICAgICAgICAgICAgdGhpcy5jdXJyZW50TW9kdWxlcyxcbiAgICAgICAgICAgIHBhY2subWV0YWRhdGEucGFja2FnZSB8fCBwYWNrLm1ldGFkYXRhLnBhY2thZ2VOYW1lXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICAvLyBPbmx5IGNoZWNrIGVhY2ggcGFja2FnZSBvbmNlXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChcbiAgICAgICAgICAgICAgdGhpcy51cGRhdGVkTW9kdWxlcyxcbiAgICAgICAgICAgICAgcGFjay5tZXRhZGF0YS5wYWNrYWdlIHx8IHBhY2subWV0YWRhdGEucGFja2FnZU5hbWVcbiAgICAgICAgICAgICkgfHxcbiAgICAgICAgICAgIFN0cmluZyhcbiAgICAgICAgICAgICAgdGhpcy51cGRhdGVkTW9kdWxlc1tcbiAgICAgICAgICAgICAgICBwYWNrLm1ldGFkYXRhLnBhY2thZ2UgfHwgcGFjay5tZXRhZGF0YS5wYWNrYWdlTmFtZVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICApICE9PVxuICAgICAgICAgICAgICBTdHJpbmcoXG4gICAgICAgICAgICAgICAgZ2FtZS5tb2R1bGVzLmdldChcbiAgICAgICAgICAgICAgICAgIHBhY2subWV0YWRhdGEucGFja2FnZSB8fCBwYWNrLm1ldGFkYXRhLnBhY2thZ2VOYW1lXG4gICAgICAgICAgICAgICAgKS5kYXRhLnZlcnNpb25cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgLy8gUGFja2FnZSBoYXMgbm90IGJlZW4gdXBkYXRlZCBiZWZvcmUgb3IgdGhlIHZlcnNpb24gbnVtYmVyIGhhcyBjaGFuZ2VkXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRNb2R1bGVzW1xuICAgICAgICAgICAgICBwYWNrLm1ldGFkYXRhLnBhY2thZ2UgfHwgcGFjay5tZXRhZGF0YS5wYWNrYWdlTmFtZVxuICAgICAgICAgICAgXSA9IGdhbWUubW9kdWxlcy5nZXQoXG4gICAgICAgICAgICAgIHBhY2subWV0YWRhdGEucGFja2FnZSB8fCBwYWNrLm1ldGFkYXRhLnBhY2thZ2VOYW1lXG4gICAgICAgICAgICApLmRhdGEudmVyc2lvblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocnVuTWlncmF0ZSB8fCBPYmplY3Qua2V5cyh0aGlzLmN1cnJlbnRNb2R1bGVzKS5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgbmV3IERpYWxvZyh7XG4gICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLlRpdGxlJyksXG4gICAgICAgICAgY29udGVudDogZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuY3VycmVudE1vZHVsZXMpLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgICA/ICdDb0M3Lk1pZ3JhdGUuTWVzc2FnZSdcbiAgICAgICAgICAgICAgOiAnQ29DNy5NaWdyYXRlLldpdGhNb2R1bGVzTWVzc2FnZScsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHZlcnNpb246IGdhbWUuc3lzdGVtLmRhdGEudmVyc2lvbixcbiAgICAgICAgICAgICAgbW9kdWxlczpcbiAgICAgICAgICAgICAgICAnPHVsPjxsaT4nICtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmN1cnJlbnRNb2R1bGVzKVxuICAgICAgICAgICAgICAgICAgLm1hcChtb2QgPT4gZ2FtZS5tb2R1bGVzLmdldChtb2QpLmRhdGEubmFtZSlcbiAgICAgICAgICAgICAgICAgIC5qb2luKCc8L2xpPjxsaT4nKSArXG4gICAgICAgICAgICAgICAgJzwvbGk+PC91bD4nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKSxcbiAgICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgICB1cGRhdGU6IHtcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLkJ1dHRvblVwZGF0ZScpLFxuICAgICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4gVXBkYXRlci51cGRhdGUoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNraXA6IHtcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLkJ1dHRvblNraXAnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSkucmVuZGVyKHRydWUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgRGlhbG9nKHtcbiAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuVGl0bGUnKSxcbiAgICAgICAgICBjb250ZW50OiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuR01SZXF1aXJlZCcsIHtcbiAgICAgICAgICAgIHZlcnNpb246IGdhbWUuc3lzdGVtLmRhdGEudmVyc2lvblxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICAgIE9LOiB7XG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5CdXR0b25Pa2F5JylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pLnJlbmRlcih0cnVlKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGUgKCkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlRG9jdW1lbnRzKClcblxuICAgIC8vIE1pZ3JhdGUgU2V0dGluZ3MgaWYgUHVscCBSdWxlcyBpcyBlbmFibGVkIHR1cm4gb24gYWxsIHJ1bGVzXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlcycpKSB7XG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZURvdWJsZU1heEhlYWx0aCcsIHRydWUpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2snLCB0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVBcmNoZXR5cGUnLCB0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVPcmdhbml6YXRpb24nLCB0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVUYWxlbnRzJywgdHJ1ZSlcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlRmFzdGVyUmVjb3ZlcnknLCB0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVJZ25vcmVNYWpvcldvdW5kcycsIHRydWUpXG4gICAgfVxuXG4gICAgY29uc3Qgc2V0dGluZ3MgPSBtZXJnZU9iamVjdCh0aGlzLnVwZGF0ZWRNb2R1bGVzIHx8IHt9LCB0aGlzLmN1cnJlbnRNb2R1bGVzKVxuICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3N5c3RlbVVwZGF0ZWRNb2R1bGVWZXJzaW9uJywgc2V0dGluZ3MpXG4gICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlVmVyc2lvbicsIGdhbWUuc3lzdGVtLmRhdGEudmVyc2lvbilcblxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuQ29tcGxldGUnKSwge1xuICAgICAgcGVybWFuZW50OiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVEb2N1bWVudHMgKCkge1xuICAgIC8vIE1pZ3JhdGUgV29ybGQgQWN0b3JzXG4gICAgZm9yIChjb25zdCBhY3RvciBvZiBnYW1lLmFjdG9ycy5jb250ZW50cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHRoaXMubWlncmF0ZUFjdG9yRGF0YShhY3Rvci50b09iamVjdCgpKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNPYmplY3RFbXB0eSh1cGRhdGVEYXRhKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgQWN0b3IgZG9jdW1lbnQgJHthY3Rvci5uYW1lfWApXG4gICAgICAgICAgYXdhaXQgYWN0b3IudXBkYXRlKHVwZGF0ZURhdGEsIHsgZW5mb3JjZVR5cGVzOiBmYWxzZSB9KVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgZXJyLm1lc3NhZ2UgPSBgRmFpbGVkIENvQzcgc3lzdGVtIG1pZ3JhdGlvbiBmb3IgQWN0b3IgJHthY3Rvci5uYW1lfTogJHtlcnIubWVzc2FnZX1gXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyLm1lc3NhZ2UsIHsgcGVybWFuZW50OiB0cnVlIH0pXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1pZ3JhdGUgV29ybGQgSXRlbXNcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZ2FtZS5pdGVtcy5jb250ZW50cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZUl0ZW1EYXRhKGl0ZW0udG9PYmplY3QoKSlcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzT2JqZWN0RW1wdHkodXBkYXRlRGF0YSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgTWlncmF0aW5nIEl0ZW0gZG9jdW1lbnQgJHtpdGVtLm5hbWV9YClcbiAgICAgICAgICBhd2FpdCBpdGVtLnVwZGF0ZSh1cGRhdGVEYXRhLCB7IGVuZm9yY2VUeXBlczogZmFsc2UgfSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGVyci5tZXNzYWdlID0gYEZhaWxlZCBDb0M3IHN5c3RlbSBtaWdyYXRpb24gZm9yIEl0ZW0gJHtpdGVtLm5hbWV9OiAke2Vyci5tZXNzYWdlfWBcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnIubWVzc2FnZSwgeyBwZXJtYW5lbnQ6IHRydWUgfSlcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWlncmF0ZSBXb3JsZCBUYWJsZXNcbiAgICBmb3IgKGNvbnN0IHRhYmxlIG9mIGdhbWUudGFibGVzLmNvbnRlbnRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlVGFibGVEYXRhKHRhYmxlLnRvT2JqZWN0KCkpXG4gICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc09iamVjdEVtcHR5KHVwZGF0ZURhdGEpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYE1pZ3JhdGluZyBUYWJsZSBkb2N1bWVudCAke3RhYmxlLm5hbWV9YClcbiAgICAgICAgICBhd2FpdCB0YWJsZS51cGRhdGUodXBkYXRlRGF0YSwgeyBlbmZvcmNlVHlwZXM6IGZhbHNlIH0pXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBlcnIubWVzc2FnZSA9IGBGYWlsZWQgQ29DNyBzeXN0ZW0gbWlncmF0aW9uIGZvciBUYWJsZSAke3RhYmxlLm5hbWV9OiAke2Vyci5tZXNzYWdlfWBcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnIubWVzc2FnZSwgeyBwZXJtYW5lbnQ6IHRydWUgfSlcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWlncmF0ZSBNYWNyb3NcbiAgICBmb3IgKGNvbnN0IG1hY3JvIG9mIGdhbWUubWFjcm9zLmNvbnRlbnRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlTWFjcm9EYXRhKG1hY3JvLnRvT2JqZWN0KCkpXG4gICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc09iamVjdEVtcHR5KHVwZGF0ZURhdGEpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYE1pZ3JhdGluZyBNYWNybyBkb2N1bWVudCAke21hY3JvLm5hbWV9YClcbiAgICAgICAgICBhd2FpdCBtYWNyby51cGRhdGUodXBkYXRlRGF0YSwgeyBlbmZvcmNlVHlwZXM6IGZhbHNlIH0pXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBlcnIubWVzc2FnZSA9IGBGYWlsZWQgQ29DNyBzeXN0ZW0gbWlncmF0aW9uIGZvciBUYWJsZSAke21hY3JvLm5hbWV9OiAke2Vyci5tZXNzYWdlfWBcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnIubWVzc2FnZSwgeyBwZXJtYW5lbnQ6IHRydWUgfSlcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWlncmF0ZSBTY2VuZXMgW1Rva2VuXSBBY3RvcnNcbiAgICBmb3IgKGNvbnN0IHNjZW5lIG9mIGdhbWUuc2NlbmVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlU2NlbmVEYXRhKHNjZW5lLmRhdGEpXG4gICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc09iamVjdEVtcHR5KHVwZGF0ZURhdGEpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYE1pZ3JhdGluZyBTY2VuZSBkb2N1bWVudCAke3NjZW5lLm5hbWV9YClcbiAgICAgICAgICBhd2FpdCBzY2VuZS51cGRhdGUodXBkYXRlRGF0YSwgeyBlbmZvcmNlVHlwZXM6IGZhbHNlIH0pXG4gICAgICAgIH1cbiAgICAgICAgc2NlbmUudG9rZW5zLmZvckVhY2godCA9PiAodC5fYWN0b3IgPSBudWxsKSlcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBlcnIubWVzc2FnZSA9IGBGYWlsZWQgQ29DNyBzeXN0ZW0gbWlncmF0aW9uIGZvciBTY2VuZSAke3NjZW5lLm5hbWV9OiAke2Vyci5tZXNzYWdlfWBcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnIubWVzc2FnZSwgeyBwZXJtYW5lbnQ6IHRydWUgfSlcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWlncmF0ZSBXb3JsZCBDb21wZW5kaXVtIFBhY2tzXG4gICAgZm9yIChjb25zdCBwYWNrIG9mIGdhbWUucGFja3MpIHtcbiAgICAgIGlmIChcbiAgICAgICAgKHBhY2subWV0YWRhdGEucGFja2FnZSB8fCBwYWNrLm1ldGFkYXRhLnBhY2thZ2VOYW1lKSAhPT0gJ0NvQzcnICYmXG4gICAgICAgIFsnQWN0b3InLCAnSXRlbScsICdNYWNybycsICdSb2xsVGFibGUnLCAnU2NlbmUnXS5pbmNsdWRlcyhcbiAgICAgICAgICBwYWNrLm1ldGFkYXRhLnR5cGVcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIGF3YWl0IFVwZGF0ZXIubWlncmF0ZUNvbXBlbmRpdW1EYXRhKHBhY2spXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIG1pZ3JhdGVBY3RvckRhdGEgKGFjdG9yKSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG5cbiAgICAvLyBVcGRhdGUgV29ybGQgQWN0b3JcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JDaGFyYWN0ZXJTYW5pdHkoYWN0b3IsIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUFjdG9yQXJ0d29yayhhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JLZWVwZXJOb3RlcyhhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JOcGNDcmVhdHVyZShhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JTdGF0dXNFZmZlY3RBY3RpdmUoYWN0b3IsIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUFjdG9yU2FuTG9zc1JlYXNvbnMoYWN0b3IsIHVwZGF0ZURhdGEpXG5cbiAgICAvLyBNaWdyYXRlIFdvcmxkIEFjdG9yIEl0ZW1zXG4gICAgaWYgKGFjdG9yLml0ZW1zKSB7XG4gICAgICBjb25zdCBpdGVtcyA9IGFjdG9yLml0ZW1zLnJlZHVjZSgoYXJyLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IGl0ZW1EYXRhID1cbiAgICAgICAgICBpIGluc3RhbmNlb2YgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzcyA/IGkudG9PYmplY3QoKSA6IGlcbiAgICAgICAgY29uc3QgaXRlbVVwZGF0ZSA9IFVwZGF0ZXIubWlncmF0ZUl0ZW1EYXRhKGl0ZW1EYXRhKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNPYmplY3RFbXB0eShpdGVtVXBkYXRlKSkge1xuICAgICAgICAgIGl0ZW1VcGRhdGUuX2lkID0gaXRlbURhdGEuX2lkXG4gICAgICAgICAgYXJyLnB1c2goZXhwYW5kT2JqZWN0KGl0ZW1VcGRhdGUpKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJcbiAgICAgIH0sIFtdKVxuICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdXBkYXRlRGF0YS5pdGVtcyA9IGl0ZW1zXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBtaWdyYXRlQ29tcGVuZGl1bURhdGEgKHBhY2spIHtcbiAgICBjb25zdCBkb2N1bWVudFR5cGUgPSBwYWNrLm1ldGFkYXRhLnR5cGVcbiAgICBpZiAoXG4gICAgICAhWydBY3RvcicsICdJdGVtJywgJ01hY3JvJywgJ1JvbGxUYWJsZScsICdTY2VuZSddLmluY2x1ZGVzKGRvY3VtZW50VHlwZSlcbiAgICApIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIFVubG9jayB0aGUgcGFjayBmb3IgZWRpdGluZ1xuICAgIGNvbnN0IHdhc0xvY2tlZCA9IHBhY2subG9ja2VkXG4gICAgYXdhaXQgcGFjay5jb25maWd1cmUoeyBsb2NrZWQ6IGZhbHNlIH0pXG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgcGFjay5taWdyYXRlKClcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIC8vIFRoaXMgZXJyb3JzIG9uIHYxMFxuICAgIH1cbiAgICBjb25zdCBkb2N1bWVudHMgPSBhd2FpdCBwYWNrLmdldERvY3VtZW50cygpXG5cbiAgICAvLyBJdGVyYXRlIG92ZXIgY29tcGVuZGl1bSBlbnRyaWVzIC0gYXBwbHlpbmcgZmluZS10dW5lZCBtaWdyYXRpb24gZnVuY3Rpb25zXG4gICAgZm9yIChjb25zdCBkb2Mgb2YgZG9jdW1lbnRzKSB7XG4gICAgICBsZXQgdXBkYXRlRGF0YSA9IHt9XG4gICAgICB0cnkge1xuICAgICAgICBzd2l0Y2ggKGRvY3VtZW50VHlwZSkge1xuICAgICAgICAgIGNhc2UgJ0FjdG9yJzpcbiAgICAgICAgICAgIHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVBY3RvckRhdGEoZG9jLnRvT2JqZWN0KCkpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ0l0ZW0nOlxuICAgICAgICAgICAgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZUl0ZW1EYXRhKGRvYy50b09iamVjdCgpKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdNYWNybyc6XG4gICAgICAgICAgICB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlTWFjcm9EYXRhKGRvYy50b09iamVjdCgpKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdSb2xsVGFibGUnOlxuICAgICAgICAgICAgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZVRhYmxlRGF0YShkb2MudG9PYmplY3QoKSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnU2NlbmUnOlxuICAgICAgICAgICAgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZVNjZW5lRGF0YShkb2MuZGF0YSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgLy8gU2F2ZSB0aGUgZW50cnksIGlmIGRhdGEgd2FzIGNoYW5nZWRcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzT2JqZWN0RW1wdHkodXBkYXRlRGF0YSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBNaWdyYXRlZCAke2RvY3VtZW50VHlwZX0gZG9jdW1lbnQgJHtkb2MubmFtZX0gaW4gQ29tcGVuZGl1bSAke3BhY2suY29sbGVjdGlvbn1gXG4gICAgICAgICAgKVxuICAgICAgICAgIGF3YWl0IGRvYy51cGRhdGUodXBkYXRlRGF0YSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGVyci5tZXNzYWdlID0gYEZhaWxlZCBDb0M3IHN5c3RlbSBtaWdyYXRpb24gZm9yIGRvY3VtZW50ICR7ZG9jLm5hbWV9IGluIHBhY2sgJHtwYWNrLmNvbGxlY3Rpb259OiAke2Vyci5tZXNzYWdlfWBcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnIubWVzc2FnZSwgeyBwZXJtYW5lbnQ6IHRydWUgfSlcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQXBwbHkgdGhlIG9yaWdpbmFsIGxvY2tlZCBzdGF0dXMgZm9yIHRoZSBwYWNrXG4gICAgYXdhaXQgcGFjay5jb25maWd1cmUoeyBsb2NrZWQ6IHdhc0xvY2tlZCB9KVxuICB9XG5cbiAgc3RhdGljIG1pZ3JhdGVJdGVtRGF0YSAoaXRlbSkge1xuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fVxuXG4gICAgLy8gVXBkYXRlIFdvcmxkIEl0ZW1cbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUV4cGVyaWVuY2UoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUFydHdvcmsoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUJvb2tBdXRvbWF0ZWQoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUtlZXBlck5vdGVzKGl0ZW0sIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1TcGVsbEF1dG9tYXRlZChpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtS2VlcGVyTm90ZXNNZXJnZShpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtU2V0dXBFcmFzKGl0ZW0sIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW12MTAoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUJvb2tVbml0cyhpdGVtLCB1cGRhdGVEYXRhKVxuXG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBtaWdyYXRlTWFjcm9EYXRhICh0YWJsZSkge1xuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fVxuXG4gICAgLy8gVXBkYXRlIFdvcmxkIEFjdG9yXG4gICAgVXBkYXRlci5fbWlncmF0ZU1hY3JvQXJ0d29yayh0YWJsZSwgdXBkYXRlRGF0YSlcblxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgbWlncmF0ZVRhYmxlRGF0YSAodGFibGUpIHtcbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cblxuICAgIC8vIFVwZGF0ZSBXb3JsZCBBY3RvclxuICAgIFVwZGF0ZXIuX21pZ3JhdGVUYWJsZUFydHdvcmsodGFibGUsIHVwZGF0ZURhdGEpXG5cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIG1pZ3JhdGVTY2VuZURhdGEgKHNjZW5lKSB7XG4gICAgY29uc3QgdG9rZW5zID0gc2NlbmUudG9rZW5zLm1hcCh0b2tlbiA9PiB7XG4gICAgICBjb25zdCB0ID0gdG9rZW4udG9PYmplY3QoKVxuICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG4gICAgICBVcGRhdGVyLl9taWdyYXRlVG9rZW5BcnR3b3JrKHQsIHVwZGF0ZURhdGEpXG4gICAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlRGF0YSkubGVuZ3RoKSB7XG4gICAgICAgIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QodCwgdXBkYXRlRGF0YSlcbiAgICAgIH1cbiAgICAgIGlmICghdC5hY3RvcklkIHx8IHQuYWN0b3JMaW5rKSB7XG4gICAgICAgIHQuYWN0b3JEYXRhID0ge31cbiAgICAgIH0gZWxzZSBpZiAoIWdhbWUuYWN0b3JzLmhhcyh0LmFjdG9ySWQpKSB7XG4gICAgICAgIHQuYWN0b3JJZCA9IG51bGxcbiAgICAgICAgdC5hY3RvckRhdGEgPSB7fVxuICAgICAgfSBlbHNlIGlmICghdC5hY3RvckxpbmspIHtcbiAgICAgICAgY29uc3QgYWN0b3JEYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodC5hY3RvckRhdGEpXG4gICAgICAgIGFjdG9yRGF0YS50eXBlID0gdG9rZW4uYWN0b3I/LnR5cGVcbiAgICAgICAgY29uc3QgdXBkYXRlID0gVXBkYXRlci5taWdyYXRlQWN0b3JEYXRhKGFjdG9yRGF0YSlcbiAgICAgICAgO1snaXRlbXMnLCAnZWZmZWN0cyddLmZvckVhY2goZW1iZWRkZWROYW1lID0+IHtcbiAgICAgICAgICBpZiAoIXVwZGF0ZVtlbWJlZGRlZE5hbWVdPy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCB1cGRhdGVzID0gbmV3IE1hcCh1cGRhdGVbZW1iZWRkZWROYW1lXS5tYXAodSA9PiBbdS5faWQsIHVdKSlcbiAgICAgICAgICB0LmFjdG9yRGF0YVtlbWJlZGRlZE5hbWVdLmZvckVhY2gob3JpZ2luYWwgPT4ge1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlID0gdXBkYXRlcy5nZXQob3JpZ2luYWwuX2lkKVxuICAgICAgICAgICAgaWYgKHVwZGF0ZSkgbWVyZ2VPYmplY3Qob3JpZ2luYWwsIHVwZGF0ZSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIGRlbGV0ZSB1cGRhdGVbZW1iZWRkZWROYW1lXVxuICAgICAgICB9KVxuICAgICAgICBtZXJnZU9iamVjdCh0LmFjdG9yRGF0YSwgdXBkYXRlKVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRcbiAgICB9KVxuICAgIHJldHVybiB7IHRva2VucyB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtS2VlcGVyTm90ZXMgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoXG4gICAgICBbXG4gICAgICAgICdhcmNoZXR5cGUnLFxuICAgICAgICAnY2hhc2UnLFxuICAgICAgICAnaXRlbScsXG4gICAgICAgICdvY2N1cGF0aW9uJyxcbiAgICAgICAgJ3NldHVwJyxcbiAgICAgICAgJ3NraWxsJyxcbiAgICAgICAgJ3NwZWxsJyxcbiAgICAgICAgJ3N0YXR1cycsXG4gICAgICAgICd0YWxlbnQnLFxuICAgICAgICAnd2VhcG9uJ1xuICAgICAgXS5pbmNsdWRlcyhpdGVtLnR5cGUpXG4gICAgKSB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uZGF0YS5kZXNjcmlwdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5kZXNjcmlwdGlvbiddID0ge1xuICAgICAgICAgIHZhbHVlOiBpdGVtLmRhdGEuZGVzY3JpcHRpb24sXG4gICAgICAgICAga2VlcGVyOiAnJ1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBpdGVtLmRhdGEuZGVzY3JpcHRpb24gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZGVzY3JpcHRpb24nXSA9IHtcbiAgICAgICAgICB2YWx1ZTogJycsXG4gICAgICAgICAga2VlcGVyOiAnJ1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBpdGVtLmRhdGEuZGVzY3JpcHRpb24ua2VlcGVyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmRlc2NyaXB0aW9uLmtlZXBlciddID0gJydcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1FeHBlcmllbmNlIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgaWYgKHR5cGVvZiBpdGVtLmRhdGEuYWRqdXN0bWVudHM/LmV4cGVyaWVuY2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuYWRqdXN0bWVudHMuZXhwZXJpZW5jZSddID0gMFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbUFydHdvcmsgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBsZXQgaW1hZ2UgPSBTdHJpbmcoaXRlbS5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgdXBkYXRlRGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICB9XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NldHVwJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5kYXRhLml0ZW1zKSkge1xuICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnZGF0YS5pdGVtcyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5pdGVtcyddID0gaXRlbS5kYXRhLml0ZW1zXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuaXRlbXMnXVtrXS5pbWcgPVxuICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ29jY3VwYXRpb24nKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLmRhdGEuc2tpbGxzKSkge1xuICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnZGF0YS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuc2tpbGxzJ10gPSBpdGVtLmRhdGEuc2tpbGxzXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuc2tpbGxzJ11ba10uaW1nID1cbiAgICAgICAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IFtvLCBnXSBvZiBPYmplY3QuZW50cmllcyhpdGVtLmRhdGEuZ3JvdXBzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhnLnNraWxscykpIHtcbiAgICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ2RhdGEuZ3JvdXBzJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZ3JvdXBzJ10gPSBpdGVtLmRhdGEuZ3JvdXBzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmdyb3VwcyddW29dLnNraWxsc1trXS5pbWcgPVxuICAgICAgICAgICAgICAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ2Jvb2snKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLmRhdGEuc3BlbGxzKSkge1xuICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnZGF0YS5zcGVsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuc3BlbGxzJ10gPSBpdGVtLmRhdGEuc3BlbGxzXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuc3BlbGxzJ11ba10uaW1nID1cbiAgICAgICAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdhcmNoZXR5cGUnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLmRhdGEuc2tpbGxzKSkge1xuICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnZGF0YS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuc2tpbGxzJ10gPSBpdGVtLmRhdGEuc2tpbGxzXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuc2tpbGxzJ11ba10uaW1nID1cbiAgICAgICAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtU3BlbGxBdXRvbWF0ZWQgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoaXRlbS50eXBlID09PSAnc3BlbGwnICYmIHR5cGVvZiBpdGVtLmRhdGEuY29zdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuY2FzdGluZ1RpbWUnXSA9IGl0ZW0uZGF0YS5jYXN0aW5nVGltZSB8fCAnJ1xuICAgICAgdXBkYXRlRGF0YVsnZGF0YS5jb3N0cy5oaXRQb2ludHMnXSA9IGl0ZW0uZGF0YS5jb3N0LmhwIHx8IDBcbiAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuY29zdHMubWFnaWNQb2ludHMnXSA9IGl0ZW0uZGF0YS5jb3N0Lm1wIHx8IDBcbiAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuY29zdHMuc2FuaXR5J10gPSBpdGVtLmRhdGEuY29zdC5zYW4gfHwgMFxuICAgICAgdXBkYXRlRGF0YVsnZGF0YS5jb3N0cy5wb3dlciddID0gaXRlbS5kYXRhLmNvc3QucG93IHx8IDBcbiAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuY29zdHMub3RoZXJzJ10gPSAnJ1xuXG4gICAgICB1cGRhdGVEYXRhWydkYXRhLi09Y29zdCddID0gbnVsbFxuICAgICAgdXBkYXRlRGF0YVsnZGF0YS5kZXNjcmlwdGlvbi4tPXVuaWRlbnRpZmllZCddID0gbnVsbFxuICAgICAgdXBkYXRlRGF0YVsnZGF0YS5kZXNjcmlwdGlvbi4tPW5vdGVzJ10gPSBudWxsXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEJvb2sgYXV0b21hdGlvbiB3YXMgaW5jcmVhc2VkIGluIDAuNi41XG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtIERvY3VtZW50IGRhdGEgZXhwcmVzc2VkIGFzIGEgcGxhaW4gb2JqZWN0XG4gICAqIEBwYXJhbSB7anNvbn0gdXBkYXRlRGF0YSBEaWZmZXJlbnRpYWwgdXBkYXRlIGRhdGEgd2hpY2ggbW9kaWZpZXMgdGhlIGV4aXN0aW5nIHZhbHVlcyBvZiB0aGlzIGRvY3VtZW50IGRhdGFcbiAgICogQHJldHVybnMge2pzb259IERpZmZlcmVudGlhbCB1cGRhdGUgZGF0YSB3aGljaCBtb2RpZmllcyB0aGUgZXhpc3RpbmcgdmFsdWVzIG9mIHRoaXMgZG9jdW1lbnQgZGF0YVxuICAgKi9cbiAgc3RhdGljIF9taWdyYXRlSXRlbUJvb2tBdXRvbWF0ZWQgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoaXRlbS50eXBlID09PSAnYm9vaycpIHtcbiAgICAgIC8qKiBJZiBib29rIHN0aWxsIGhhcyB0aGUgZGF0YS5kZXNjcmlwdGlvbi51bmlkZW50aWZpZWQga2V5IHRoZW4gcnVuIG1pZ3JhdGUgb24gaXQgKi9cbiAgICAgIGlmICh0eXBlb2YgaXRlbS5kYXRhLmRlc2NyaXB0aW9uLnVuaWRlbnRpZmllZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLyoqIEZpZWxkcyBjaGFuZ2VkIGZyb20gbnVsbCBkZWZhdWx0IHRvIGVtcHR5IHN0cmluZyAqL1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmF1dGhvciddID0gaXRlbS5kYXRhLmF1dGhvciB8fCAnJ1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmRhdGUnXSA9IGl0ZW0uZGF0YS5kYXRlIHx8ICcnXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEubGFuZ3VhZ2UnXSA9IGl0ZW0uZGF0YS5sYW5ndWFnZSB8fCAnJ1xuICAgICAgICAvKiogRmllbGRzIGNoYW5nZWQgZnJvbSBudWxsL3N0cmluZyBkZWZhdWx0cyB0byBpbnRlZ2VyIHRvIDAgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5zYW5pdHlMb3NzJ10gPSBpdGVtLmRhdGEuc2FuTG9zcyB8fCAwXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEubXl0aG9zUmF0aW5nJ10gPSBOdW1iZXIoaXRlbS5kYXRhLm15dGhvc1JhdGluZykgfHwgMFxuICAgICAgICAvKiogUmVuYW1lZC9tb3ZlZCBmaWVsZHMgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5jb250ZW50J10gPSBpdGVtLmRhdGEuZGVzY3JpcHRpb24udW5pZGVudGlmaWVkXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZGVzY3JpcHRpb24ua2VlcGVyJ10gPSBpdGVtLmRhdGEuZGVzY3JpcHRpb24ubm90ZXNcbiAgICAgICAgLyoqIE5ldyBmaWVsZHMgc2V0IGRlZmF1bHQgdmFsdWVzICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZGlmZmljdWx0eUxldmVsJ10gPSAncmVndWxhcidcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5mdWxsU3R1ZGllcyddID0gMFxuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmluaXRpYWxSZWFkaW5nJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmtlZXBlck5vdGVzJ10gPSAnJ1xuICAgICAgICAvKiogTW92ZSBhbmQgcmVuYW1lIGdhaW4gZmllbGRzIHRvIGdhaW5zLCBkZWZhdWx0IE5hTiB2YWx1ZXMgdG8gMCAqL1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmdhaW5zLmN0aHVsaHVNeXRob3MuaW5pdGlhbCddID1cbiAgICAgICAgICBOdW1iZXIoaXRlbS5kYXRhLmdhaW4uY3RodWxodU15dGhvcy5DTUkpIHx8IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5nYWlucy5jdGh1bGh1TXl0aG9zLmZpbmFsJ10gPVxuICAgICAgICAgIE51bWJlcihpdGVtLmRhdGEuZ2Fpbi5jdGh1bGh1TXl0aG9zLkNNRikgfHwgMFxuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmdhaW5zLm9jY3VsdCddID0gTnVtYmVyKGl0ZW0uZGF0YS5nYWluLm9jY3VsdCkgfHwgMFxuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmdhaW5zLm90aGVycyddID0gW11cbiAgICAgICAgLyoqIE5ldyBzdHVkeSBmaWVsZCBkZWZhdWx0IG5lY2Vzc2FyeSB0byBpbnRlZ2VyIG9mIHdlZWtzU3R1ZHlUaW1lIG9yIDAgaWYgbm90IHNldCAqL1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLnN0dWR5J10gPSB7XG4gICAgICAgICAgbmVjZXNzYXJ5OiBOdW1iZXIoaXRlbS5kYXRhLndlZWtzU3R1ZHlUaW1lKSB8fCAwLFxuICAgICAgICAgIHByb2dyZXNzOiAwLFxuICAgICAgICAgIHVuaXRzOiAnQ29DNy53ZWVrcydcbiAgICAgICAgfVxuICAgICAgICAvKiogUmVtb3ZlIG9sZCBrZXlzICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuLT1zYW5Mb3NzJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuLT13ZWVrc1N0dWR5VGltZSddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLi09Z2FpbiddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmRlc2NyaXB0aW9uLi09dW5pZGVudGlmaWVkJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZGVzY3JpcHRpb24uLT1ub3RlcyddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmdhaW5zLi09b3RoZXInXSA9IG51bGxcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS4tPXByb3BlcnRpZXMnXSA9IG51bGxcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS4tPWZsYWdzJ10gPSBudWxsXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtQm9va1VuaXRzIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2Jvb2snKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBpdGVtLmRhdGEuc3R1ZHkubmVjZXNzYXJ5ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICB0eXBlb2YgaXRlbS5kYXRhLnN0dWR5LnVuaXRzID09PSAndW5kZWZpbmVkJ1xuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuc3R1ZHkudW5pdHMnXSA9ICdDb0M3LndlZWtzJ1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1LZWVwZXJOb3Rlc01lcmdlIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NwZWxsJyB8fCBpdGVtLnR5cGUgPT09ICdib29rJykge1xuICAgICAgaWYgKHR5cGVvZiBpdGVtLmRhdGEubm90ZXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaXRlbS5kYXRhLmRlc2NyaXB0aW9uLmtlZXBlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmRlc2NyaXB0aW9uLmtlZXBlciddID1cbiAgICAgICAgICAgIGl0ZW0uZGF0YS5kZXNjcmlwdGlvbi5rZWVwZXIgKyBpdGVtLmRhdGEubm90ZXNcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmRlc2NyaXB0aW9uLmtlZXBlciddID0gaXRlbS5kYXRhLm5vdGVzXG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS4tPW5vdGVzJ10gPSBudWxsXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uZGF0YS5rZWVwZXJOb3RlcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydkYXRhLmRlc2NyaXB0aW9uLmtlZXBlciddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZGVzY3JpcHRpb24ua2VlcGVyJ10gPVxuICAgICAgICAgICAgaXRlbS5kYXRhLmtlZXBlck5vdGVzICsgdXBkYXRlRGF0YVsnZGF0YS5kZXNjcmlwdGlvbi5rZWVwZXInXVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZGVzY3JpcHRpb24ua2VlcGVyJ10gPSBpdGVtLmRhdGEua2VlcGVyTm90ZXNcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLi09a2VlcGVyTm90ZXMnXSA9IG51bGxcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtdjEwIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKFxuICAgICAgaXRlbS50eXBlID09PSAnc2tpbGwnICYmXG4gICAgICAodHlwZW9mIGl0ZW0uZGF0YS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IGl0ZW0uZGF0YS5za2lsbE5hbWUgPT09ICcnKVxuICAgICkge1xuICAgICAgdXBkYXRlRGF0YS5uYW1lID0gaXRlbS5uYW1lXG4gICAgICAvLyBVcGRhdGUgUG9saXNoIGRvZGdlIHRyYW5zbGF0aW9uIGZyb20gVW5pa2kgdG8gVW5payB0byBtYXRjaCB1cGRhdGUgdG8gbGFuZy9wbC5qc29uXG4gICAgICBpZiAodXBkYXRlRGF0YS5uYW1lID09PSAnVW5pa2knKSB7XG4gICAgICAgIHVwZGF0ZURhdGEubmFtZSA9ICdVbmlrJ1xuICAgICAgfVxuICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgICB1cGRhdGVEYXRhLm5hbWUsXG4gICAgICAgIHR5cGVvZiBpdGVtLmRhdGEuc3BlY2lhbGl6YXRpb24/Lmdyb3VwID09PSAnc3RyaW5nJ1xuICAgICAgICAgID8gaXRlbS5kYXRhLnNwZWNpYWxpemF0aW9uLmdyb3VwXG4gICAgICAgICAgOiBpdGVtLmRhdGEuc3BlY2lhbGl6YXRpb25cbiAgICAgIClcbiAgICAgIHVwZGF0ZURhdGEubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuc2tpbGxOYW1lJ10gPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuc3BlY2lhbGl6YXRpb24nXSA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdzZXR1cCcpIHtcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uZGF0YS5pdGVtcykpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHYudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICh0eXBlb2Ygdi5kYXRhLnNraWxsTmFtZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdi5kYXRhLnNraWxsTmFtZSA9PT0gJycpXG4gICAgICAgICkge1xuICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnZGF0YS5pdGVtcyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5pdGVtcyddID0gaXRlbS5kYXRhLml0ZW1zXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuaXRlbXMnXVtrXS5uYW1lID0gdi5uYW1lXG4gICAgICAgICAgaWYgKHVwZGF0ZURhdGFbJ2RhdGEuaXRlbXMnXVtrXS5uYW1lID09PSAnVW5pa2knKSB7XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLml0ZW1zJ11ba10ubmFtZSA9ICdVbmlrJ1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLml0ZW1zJ11ba10ubmFtZSxcbiAgICAgICAgICAgIHR5cGVvZiB2LmRhdGEuc3BlY2lhbGl6YXRpb24/Lmdyb3VwID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICA/IHYuZGF0YS5zcGVjaWFsaXphdGlvbi5ncm91cFxuICAgICAgICAgICAgICA6IHYuZGF0YS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgIClcbiAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLml0ZW1zJ11ba10ubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLml0ZW1zJ11ba10uZGF0YS5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLml0ZW1zJ11ba10uZGF0YS5zcGVjaWFsaXphdGlvbiA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ29jY3VwYXRpb24nKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLmRhdGEuc2tpbGxzKSkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdi50eXBlID09PSAnc2tpbGwnICYmXG4gICAgICAgICAgKHR5cGVvZiB2LmRhdGEuc2tpbGxOYW1lID09PSAndW5kZWZpbmVkJyB8fCB2LmRhdGEuc2tpbGxOYW1lID09PSAnJylcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydkYXRhLnNraWxscyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5za2lsbHMnXSA9IGl0ZW0uZGF0YS5za2lsbHNcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5za2lsbHMnXVtrXS5uYW1lID0gdi5uYW1lXG4gICAgICAgICAgaWYgKHVwZGF0ZURhdGFbJ2RhdGEuc2tpbGxzJ11ba10ubmFtZSA9PT0gJ1VuaWtpJykge1xuICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5za2lsbHMnXVtrXS5uYW1lID0gJ1VuaWsnXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuc2tpbGxzJ11ba10ubmFtZSxcbiAgICAgICAgICAgIHR5cGVvZiB2LmRhdGEuc3BlY2lhbGl6YXRpb24/Lmdyb3VwID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICA/IHYuZGF0YS5zcGVjaWFsaXphdGlvbi5ncm91cFxuICAgICAgICAgICAgICA6IHYuZGF0YS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgIClcbiAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLnNraWxscyddW2tdLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5za2lsbHMnXVtrXS5kYXRhLnNraWxsTmFtZSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuc2tpbGxzJ11ba10uZGF0YS5zcGVjaWFsaXphdGlvbiA9XG4gICAgICAgICAgICBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IFtvLCBnXSBvZiBPYmplY3QuZW50cmllcyhpdGVtLmRhdGEuZ3JvdXBzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhnLnNraWxscykpIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB2LnR5cGUgPT09ICdza2lsbCcgJiZcbiAgICAgICAgICAgICh0eXBlb2Ygdi5kYXRhLnNraWxsTmFtZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdi5kYXRhLnNraWxsTmFtZSA9PT0gJycpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ2RhdGEuZ3JvdXBzJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZ3JvdXBzJ10gPSBpdGVtLmRhdGEuZ3JvdXBzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmdyb3VwcyddW29dLnNraWxsc1trXS5uYW1lID0gdi5uYW1lXG4gICAgICAgICAgICBpZiAodXBkYXRlRGF0YVsnZGF0YS5ncm91cHMnXVtvXS5za2lsbHNba10ubmFtZSA9PT0gJ1VuaWtpJykge1xuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmdyb3VwcyddW29dLnNraWxsc1trXS5uYW1lID0gJ1VuaWsnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZ3JvdXBzJ11bb10uc2tpbGxzW2tdLm5hbWUsXG4gICAgICAgICAgICAgIHR5cGVvZiB2LmRhdGEuc3BlY2lhbGl6YXRpb24/Lmdyb3VwID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgID8gdi5kYXRhLnNwZWNpYWxpemF0aW9uLmdyb3VwXG4gICAgICAgICAgICAgICAgOiB2LmRhdGEuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZ3JvdXBzJ11bb10uc2tpbGxzW2tdLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmdyb3VwcyddW29dLnNraWxsc1trXS5kYXRhLnNraWxsTmFtZSA9XG4gICAgICAgICAgICAgIHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5ncm91cHMnXVtvXS5za2lsbHNba10uZGF0YS5zcGVjaWFsaXphdGlvbiA9XG4gICAgICAgICAgICAgIHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdhcmNoZXR5cGUnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLmRhdGEuc2tpbGxzKSkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdi50eXBlID09PSAnc2tpbGwnICYmXG4gICAgICAgICAgKHR5cGVvZiB2LmRhdGEuc2tpbGxOYW1lID09PSAndW5kZWZpbmVkJyB8fCB2LmRhdGEuc2tpbGxOYW1lID09PSAnJylcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydkYXRhLnNraWxscyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5za2lsbHMnXSA9IGl0ZW0uZGF0YS5za2lsbHNcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5za2lsbHMnXVtrXS5uYW1lID0gdi5uYW1lXG4gICAgICAgICAgaWYgKHVwZGF0ZURhdGFbJ2RhdGEuc2tpbGxzJ11ba10ubmFtZSA9PT0gJ1VuaWtpJykge1xuICAgICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5za2lsbHMnXVtrXS5uYW1lID0gJ1VuaWsnXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuc2tpbGxzJ11ba10ubmFtZSxcbiAgICAgICAgICAgIHR5cGVvZiB2LmRhdGEuc3BlY2lhbGl6YXRpb24/Lmdyb3VwID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICA/IHYuZGF0YS5zcGVjaWFsaXphdGlvbi5ncm91cFxuICAgICAgICAgICAgICA6IHYuZGF0YS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgIClcbiAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLnNraWxscyddW2tdLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5za2lsbHMnXVtrXS5kYXRhLnNraWxsTmFtZSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuc2tpbGxzJ11ba10uZGF0YS5zcGVjaWFsaXphdGlvbiA9XG4gICAgICAgICAgICBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbVNldHVwRXJhcyAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChpdGVtLnR5cGUgPT09ICdzZXR1cCcpIHtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uZGF0YS5lcmFzKSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlLnNlbGVjdGVkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZXJhcy4nICsga2V5XSA9IHZhbHVlLnNlbGVjdGVkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3RvckFydHdvcmsgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgbGV0IGltYWdlID0gU3RyaW5nKGFjdG9yLmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICBpZiAoXG4gICAgICB0eXBlb2YgYWN0b3IudG9rZW4gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgYWN0b3IudG9rZW4uaW1nICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgaW1hZ2UgPSBTdHJpbmcoYWN0b3IudG9rZW4uaW1nKS5tYXRjaChcbiAgICAgICAgL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS9cbiAgICAgIClcbiAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICB1cGRhdGVEYXRhWyd0b2tlbi5pbWcnXSA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGFjdG9yLmVmZmVjdHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhhY3Rvci5lZmZlY3RzKSkge1xuICAgICAgICBpbWFnZSA9IFN0cmluZyh2Lmljb24pLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgICAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGEuZWZmZWN0cyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVwZGF0ZURhdGEuZWZmZWN0cyA9IGFjdG9yLmVmZmVjdHNcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBkYXRlRGF0YS5lZmZlY3RzW2tdLmljb24gPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlQWN0b3JLZWVwZXJOb3RlcyAoYWN0b3IsIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoWydjaGFyYWN0ZXInLCAnbnBjJywgJ2NyZWF0dXJlJ10uaW5jbHVkZXMoYWN0b3IudHlwZSkpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLmRhdGEgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIHR5cGVvZiBhY3Rvci5kYXRhLmRlc2NyaXB0aW9uID09PSAndW5kZWZpbmVkJ1xuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuZGVzY3JpcHRpb24nXSA9IHtcbiAgICAgICAgICBrZWVwZXI6ICcnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yU2FuTG9zc1JlYXNvbnMgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKFxuICAgICAgYWN0b3IudHlwZSA9PT0gJ2NoYXJhY3RlcicgJiZcbiAgICAgIHR5cGVvZiBhY3Rvci5kYXRhPy5lbmNvdW50ZXJlZENyZWF0dXJlcyAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGNvbnN0IGdyb3VwcyA9IHt9XG4gICAgICBmb3IgKGNvbnN0IHNhbml0eUxvc3NFdmVudCBvZiBhY3Rvci5kYXRhLmVuY291bnRlcmVkQ3JlYXR1cmVzKSB7XG4gICAgICAgIGlmIChzYW5pdHlMb3NzRXZlbnQudG90YWxMb3NzID4gMCkge1xuICAgICAgICAgIGdyb3Vwc1tzYW5pdHlMb3NzRXZlbnQubmFtZV0gPSBNYXRoLm1heChcbiAgICAgICAgICAgIGdyb3Vwc1tzYW5pdHlMb3NzRXZlbnQubmFtZV0gPz8gMCxcbiAgICAgICAgICAgIHNhbml0eUxvc3NFdmVudC50b3RhbExvc3NcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudHMgPSBbXVxuICAgICAgZm9yIChjb25zdCBuYW1lIGluIGdyb3Vwcykge1xuICAgICAgICBzYW5pdHlMb3NzRXZlbnRzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IG5hbWUsXG4gICAgICAgICAgdG90YWxMb3NzOiBncm91cHNbbmFtZV0sXG4gICAgICAgICAgaW1tdW5pdHk6IGZhbHNlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICB1cGRhdGVEYXRhWydkYXRhLnNhbml0eUxvc3NFdmVudHMnXSA9IHNhbml0eUxvc3NFdmVudHNcbiAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuLT1lbmNvdW50ZXJlZENyZWF0dXJlcyddID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yU3RhdHVzRWZmZWN0QWN0aXZlIChhY3RvciwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyhhY3Rvci50eXBlKSkge1xuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3IuZGF0YSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgKHR5cGVvZiBhY3Rvci5kYXRhLnN0YXR1cyAhPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICB0eXBlb2YgYWN0b3IuZGF0YS5jb25kaXRpb25zID09PSAndW5kZWZpbmVkJylcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmNvbmRpdGlvbnMuY3JpdGljYWxXb3VuZHMudmFsdWUnXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuY29uZGl0aW9ucy51bmNvbnNjaW91cy52YWx1ZSddID0gZmFsc2VcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5jb25kaXRpb25zLmR5aW5nLnZhbHVlJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmNvbmRpdGlvbnMuZGVhZC52YWx1ZSddID0gZmFsc2VcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5jb25kaXRpb25zLnByb25lLnZhbHVlJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmNvbmRpdGlvbnMudGVtcG9JbnNhbmUudmFsdWUnXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuY29uZGl0aW9ucy5pbmRlZkluc2FuZS52YWx1ZSddID0gZmFsc2VcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5kYXRhLnN0YXR1cz8uY3JpdGljYWxXb3VuZHMudmFsdWUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgYWN0b3IuZGF0YS5zdGF0dXM/LmNyaXRpY2FsV291bmRzLnZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuY29uZGl0aW9ucy5jcml0aWNhbFdvdW5kcy52YWx1ZSddID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3IuZGF0YS5zdGF0dXM/LnVuY29uc2Npb3VzLnZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGFjdG9yLmRhdGEuc3RhdHVzPy51bmNvbnNjaW91cy52YWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmNvbmRpdGlvbnMudW5jb25zY2lvdXMudmFsdWUnXSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLmRhdGEuc3RhdHVzPy5keWluZy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBhY3Rvci5kYXRhLnN0YXR1cz8uZHlpbmcudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5jb25kaXRpb25zLmR5aW5nLnZhbHVlJ10gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5kYXRhLnN0YXR1cz8uZGVhZC52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBhY3Rvci5kYXRhLnN0YXR1cz8uZGVhZC52YWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmNvbmRpdGlvbnMuZGVhZC52YWx1ZSddID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3IuZGF0YS5zdGF0dXM/LnByb25lLnZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGFjdG9yLmRhdGEuc3RhdHVzPy5wcm9uZS52YWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmNvbmRpdGlvbnMucHJvbmUudmFsdWUnXSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLmRhdGEuc3RhdHVzPy50ZW1wb0luc2FuZS52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBhY3Rvci5kYXRhLnN0YXR1cz8udGVtcG9JbnNhbmUudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5jb25kaXRpb25zLnRlbXBvSW5zYW5lLnZhbHVlJ10gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5kYXRhLnN0YXR1cz8uaW5kZWZJbnNhbmUudmFsdWUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgYWN0b3IuZGF0YS5zdGF0dXM/LmluZGVmSW5zYW5lLnZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuY29uZGl0aW9ucy5pbmRlZkluc2FuZS52YWx1ZSddID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgYWN0b3IuZWZmZWN0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBlZmZlY3RzID0gYWN0b3IuZWZmZWN0c1xuICAgICAgICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcbiAgICAgICAgICBmb3IgKGxldCBpID0gMCwgaW0gPSBlZmZlY3RzLmxlbmd0aDsgaSA8IGltOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGVmZmVjdCA9IGVmZmVjdHNbaV1cbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gZWZmZWN0Lmljb24ubWF0Y2goXG4gICAgICAgICAgICAgIC9cXC8oaGFuZ2luZy1zcGlkZXJ8dGVudGFjbGVzLXNrdWxsfGFybS1zbGluZ3xoZWFydC1iZWF0c3x0b21ic3RvbmV8a25vY2tlZC1vdXQtc3RhcnN8ZmFsbGluZ3xza3VsbHx1bmNvbnNjaW91cylcXC4vXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBpZiAobWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgbGV0IHN0YXR1c0lkID0gJydcbiAgICAgICAgICAgICAgc3dpdGNoIChtYXRjaFsxXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hhbmdpbmctc3BpZGVyJzpcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ3RlbXBvSW5zYW5lJ1xuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICd0ZW50YWNsZXMtc2t1bGwnOlxuICAgICAgICAgICAgICAgICAgc3RhdHVzSWQgPSAnaW5kZWZJbnNhbmUnXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2FybS1zbGluZyc6XG4gICAgICAgICAgICAgICAgICBzdGF0dXNJZCA9ICdjcml0aWNhbFdvdW5kcydcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAnaGVhcnQtYmVhdHMnOlxuICAgICAgICAgICAgICAgICAgc3RhdHVzSWQgPSAnZHlpbmcnXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RvbWJzdG9uZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnc2t1bGwnOlxuICAgICAgICAgICAgICAgICAgc3RhdHVzSWQgPSAnZGVhZCdcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAna25vY2tlZC1vdXQtc3RhcnMnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3VuY29uc2Npb3VzJzpcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ3VuY29uc2Npb3VzJ1xuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdmYWxsaW5nJzpcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ3Byb25lJ1xuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoc3RhdHVzSWQgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1cGRhdGVEYXRhW2BkYXRhLmNvbmRpdGlvbnMuJHtzdGF0dXNJZH0udmFsdWVgXSkge1xuICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YVtgZGF0YS5jb25kaXRpb25zLiR7c3RhdHVzSWR9LnZhbHVlYF0gPSB0cnVlXG4gICAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZWZmZWN0LmZsYWdzLmNvcmU/LnN0YXR1c0lkICE9PSBzdGF0dXNJZCkge1xuICAgICAgICAgICAgICAgICAgZWZmZWN0c1tpXSA9IG1lcmdlT2JqZWN0KGVmZmVjdCwge1xuICAgICAgICAgICAgICAgICAgICBmbGFnczoge1xuICAgICAgICAgICAgICAgICAgICAgIGNvcmU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c0lkOiBzdGF0dXNJZFxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgICAgICB1cGRhdGVEYXRhLmVmZmVjdHMgPSBlZmZlY3RzXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuLT1zdGF0dXMnXSA9IG51bGxcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yTnBjQ3JlYXR1cmUgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKFsnbnBjJ10uaW5jbHVkZXMoYWN0b3IudHlwZSkgJiYgdHlwZW9mIGFjdG9yLmRhdGEgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodHlwZW9mIGFjdG9yLmRhdGEuc3BlY2lhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5zcGVjaWFsJ10gPSB7XG4gICAgICAgICAgY2hlY2tQYXNzZWQ6IG51bGwsXG4gICAgICAgICAgY2hlY2tGYWlsbGVkOiBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgYWN0b3IuZGF0YS5hdHRhY2tzUGVyUm91bmQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuYXR0YWNrc1BlclJvdW5kJ10gPSAxXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3RvckNoYXJhY3RlclNhbml0eSAoYWN0b3IsIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoXG4gICAgICBhY3Rvci50eXBlID09PSAnY2hhcmFjdGVyJyAmJlxuICAgICAgdHlwZW9mIGFjdG9yLmRhdGE/LmF0dHJpYnM/LnNhbiAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGNvbnN0IG9uZUZpZnRoU2FuaXR5ID0gTWF0aC5jZWlsKGFjdG9yLmRhdGEuYXR0cmlicy5zYW4udmFsdWUgLyA1KVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3IuZGF0YS5hdHRyaWJzLnNhbi5kYWlseUxvc3MgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLmRhdGEuYXR0cmlicy5zYW4uZGFpbHlMb3NzID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5hdHRyaWJzLnNhbi5kYWlseUxvc3MnXSA9IDBcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLmRhdGEuYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHkgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLmRhdGEuYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHkgPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmF0dHJpYnMuc2FuLm9uZUZpZnRoU2FuaXR5J10gPSAnIC8gJyArIG9uZUZpZnRoU2FuaXR5XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5kYXRhLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3IuZGF0YS5hdHRyaWJzLnNhbi5kYWlseUxvc3MgPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyddID0gMFxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3IuZGF0YS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3IuZGF0YS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbCA9PT0gbnVsbCB8fFxuICAgICAgICB0eXBlb2YgYWN0b3IuZGF0YS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbC52YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3IuZGF0YS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbC52YWx1ZSA9PT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwudmFsdWUnXSA9IDBcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLmRhdGEuaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLmRhdGEuaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwgPT09IG51bGwgfHxcbiAgICAgICAgdHlwZW9mIGFjdG9yLmRhdGEuaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwubWF4ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5kYXRhLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLm1heCA9PT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwubWF4J10gPSBvbmVGaWZ0aFNhbml0eVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBhY3Rvci5kYXRhLmF0dHJpYnMubXAgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3IuZGF0YS5hdHRyaWJzLm1wLnZhbHVlID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgIGFjdG9yLmRhdGEuYXR0cmlicy5tcC52YWx1ZSA9PT0gbnVsbFxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhLmF0dHJpYnMubXAudmFsdWUnXSA9IG9uZUZpZnRoU2FuaXR5XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5kYXRhLmF0dHJpYnMubXAubWF4ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgIGFjdG9yLmRhdGEuYXR0cmlicy5tcC5tYXggPT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5hdHRyaWJzLm1wLm1heCddID0gb25lRmlmdGhTYW5pdHlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3IuZGF0YS5ub3RlcyA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3IuZGF0YS5ub3RlcyA9PT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEubm90ZXMnXSA9ICcnXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVNYWNyb0FydHdvcmsgKHRhYmxlLCB1cGRhdGVEYXRhKSB7XG4gICAgY29uc3QgaW1hZ2UgPSBTdHJpbmcodGFibGUuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgIHVwZGF0ZURhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVUYWJsZUFydHdvcmsgKHRhYmxlLCB1cGRhdGVEYXRhKSB7XG4gICAgbGV0IGltYWdlID0gU3RyaW5nKHRhYmxlLmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyh0YWJsZS5yZXN1bHRzKSkge1xuICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YS5yZXN1bHRzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHVwZGF0ZURhdGEucmVzdWx0cyA9IHRhYmxlLnJlc3VsdHNcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVEYXRhLnJlc3VsdHNba10uaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVUb2tlbkFydHdvcmsgKHRva2VuLCB1cGRhdGVEYXRhKSB7XG4gICAgY29uc3QgaW1hZ2UgPSBTdHJpbmcodG9rZW4uaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgIHVwZGF0ZURhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lICovXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuLyoqXG4gKiBuYW1lQ2hhcmFjdGVycyBsaXN0IG9mIGNoYXJhY3RlcnMgdGhhdCBjYW4gYmUgcGFydCBvZiBhIFtdIGZvciBjaGFyYWN0ZXIsIHNraWxsLCBvciB3ZWFwb24gbmFtZXMgdXNlZCBpbiBicmFja2V0IGV4cHJlc3Npb24uXG4gKlxuICogXCJrZXlzLjxsYW5ndWFnZT4uZGVzY3JpcHRpb25cIiBsYW5nIGtleSB0byBzaG93IGluIHRoZSBsYW5ndWFnZSBzZWxlY3Rpb24gZGlhbG9nIGJveC5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmRiTm9uZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSBubyBEYW1hZ2UgQm9udXMgZS5nLiBEQjogXCJkYk5vbmVcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmFybW9yTm9uZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSBubyBBcm1vdXIgQm9udXMgZS5nLiBBcm1vcjogXCJhcm1vck5vbmVcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmF0dGFja3NQZXJSb3VuZE5vbmVcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgbm8gYXR0YWNrcyBlLmcuIEF0dGFja3MgUGVyIFJvdW5kOiBcImF0dGFja3NQZXJSb3VuZE5vbmVcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNhbkxvc3NOb25lXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIG5vIHNhbml0eSBsb3NzIGUuZy4gU0FOIGxvc3M6IFwic2FuTG9zc05vbmVcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmZ1bGxkYlwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSBkYW1hZ2UgYm9udXMgaW4gYXR0cmlidXRlcyBhbmQgd2VhcG9uIGRhbWFnZSBlLmcuIERCOiBcImZ1bGxkYlwiIC8gV2VhcG9uIDUwJSAoMjUvMTApLCBkYW1hZ2UgMUQ2ICsgXCJmdWxsZGJcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmhhbGZkYlwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSBoYWxmIGRhbWFnZSBib251cyBpbiB3ZWFwb24gZGFtYWdlIGUuZy4gV2VhcG9uIDUwJSAoMjUvMTApLCBkYW1hZ2UgMUQ2ICsgXCJoYWxmZGJcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNlY3Rpb25Db21iYXRzXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIHRoZSBzdGFydCBvZiB0aGUgY29tYmF0IC8gd2VhcG9uIHNlY3Rpb24gb2YgdGV4dC5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+Lm5ld0NvbWJhdEhlYWRlclwiIElmIHRoZXJlIGlzIG5vIGNvbWJhdCAvIHdlYXBvbiBzZWN0aW9uLCBhZGQgdGhpcyBzZWN0aW9uIHdlcmUgaXQgcHJvYmFibHkgaXMsIHRoaXMgbmVlZHMgdG8gbWF0Y2hlZCBieSBcImtleXMuPGxhbmd1YWdlPi5zZWN0aW9uQ29tYmF0c1wiLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uc2VjdGlvblNraWxsc1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSB0aGUgc3RhcnQgb2YgdGhlIHNraWxscyBzZWN0aW9uIG9mIHRleHQuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5zZWN0aW9uTGFuZ2F1Z2VzXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIHRoZSBzdGFydCBvZiB0aGUgbGFuZ3VhZ2VzIHNlY3Rpb24gb2YgdGV4dC5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNlY3Rpb25TcGVsbHNcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgdGhlIHN0YXJ0IG9mIHRoZSBzcGVsbHMgc2VjdGlvbiBvZiB0ZXh0LlxuICogXCJrZXlzLjxsYW5ndWFnZT4uaGFuZGd1blwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gd2VhcG9uIG5hbWUgaXMgYSBoYW5kZ3VuIHR5cGUuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5yaWZsZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gd2VhcG9uIG5hbWUgaXMgYSByaWZsZSB0eXBlLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uc21iXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiB3ZWFwb24gbmFtZSBpcyBhIHN1Ym1hY2hpbmUgZ3VuIHR5cGUuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5tYWNoaW5lR3VuXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiB3ZWFwb24gbmFtZSBpcyBhIG1hY2hpbmUgZ3VuIHR5cGUuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5sYXVuY2hlZFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gd2VhcG9uIG5hbWUgaXMgYSBsYXVuY2hlZCB0eXBlLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uZXhhbXBsZVwiIFN0cmluZyB0aGF0IHNob3VsZCBzaG93IGFzIGEgcGxhY2Vob2xkZXIgZXhhbXBsZS5cbiAqXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmFnZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgYWdlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGFnZT4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+Lm9jY3VwYXRpb25cIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIG9jY3VwYXRpb24sIG5hbWVkIGNhcHR1cmluZyBncm91cCA8b2NjdXBhdGlvbj4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnN0clwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgc3RyZW5ndGggY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8c3RyPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uY29uXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb25zdGl0dXRpb24gY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8Y29uPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uc2l6XCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBzaXplIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPHNpej4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmludFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgaW50ZWxsaWdlbmNlIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGludD4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnBvd1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgcG93ZXIgY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8cG93Pi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uZGV4XCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBkZXh0ZXJpdHkgY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8ZGV4Pi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uYXBwXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBhcHBlYXJhbmNlIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGFwcD4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmVkdVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgZWR1Y2F0aW9uIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGVkdT4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnNhblwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgc2FuaXR5IHBvaW50cyBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8c2FuPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uaHBcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGhpdCBwb2ludHMgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGhwPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ubXBcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIG1hZ2ljIHBvaW50cyBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8bXA+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5kYlwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgZGFtYWdlIGJvbnVzIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxkYj4gaWYgbWF0Y2hpbmcgXCJrZXlzLjxsYW5ndWFnZT4uZGJOb25lXCIgdGhlbiAwLlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5idWlsZFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgYnVpbGQgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGJ1aWxkPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uYXJtb3JcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGRhbWFnZSBib251cyBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8ZGI+IGlmIG1hdGNoaW5nIFwia2V5cy48bGFuZ3VhZ2U+LmFybW9yTm9uZVwiIHRoZW4gMC5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ubW92XCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBtb3ZlbWVudCByYXRlIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxtb3Y+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5sY2tcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGx1Y2sgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGxjaz4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmF0dGFja3NQZXJSb3VuZFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgYXR0YWNrcyBwZXIgcm91bmQsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8YXR0YWNrc1BlclJvdW5kPiBpZiBtYXRjaGluZyBcImtleXMuPGxhbmd1YWdlPi5hdHRhY2tzUGVyUm91bmROb25lXCIgdGhlbiAwLlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5zYW5Mb3NzXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBzYW4gbG9zcyBtaW4vbWF4LCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPHNhbkxvc3M+IGlmIG1hdGNoaW5nIFwia2V5cy48bGFuZ3VhZ2U+LnNhbkxvc3NOb25lXCIgdGhlbiBub25lLlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi53ZWFwb25cIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbWJhdCBzZWN0aW9uLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgd2VhcG9uIDxuYW1lPiwgb3B0aW9uYWwgPHBlcmNlbnRhZ2U+LCBhbmQgPGRhbWFnZT4uIERhbWFnZSBjYW4gY29udGFpbiBcImtleXMuPGxhbmd1YWdlPi5mdWxsZGJcIiBhbmQgXCJrZXlzLjxsYW5ndWFnZT4uaGFsZmRiXCIuXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LndlYXBvbkRvZGdlXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiBkb2RnZSBza2lsbCwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxuYW1lPiBhbmQgPHBlcmNlbnRhZ2U+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5za2lsbFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgc2tpbGwgc2VjdGlvbiBza2lsbCBuYW1lLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPG5hbWU+IGFuZCA8cGVyY2VudGFnZT4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+Lmd1ZXNzU3RhcnRDb21iYXRcIiBSZWd1bGFyIGV4cHJlc3Npb24gaWYgdGhlcmUgaXMgbm8gY29tYmF0IHNlY3Rpb24gZmluZCB0aGVzZSBhcmUgbGlrZWx5IHRvIGJlIHRoZSBmaXJzdCB3ZWFwb24gbmFtZSwgXCJrZXlzLjxsYW5ndWFnZT4ubmV3Q29tYmF0SGVhZGVyXCIgaXMgdGhlbiBhZGRlZCBiZWZvcmUgaXQgdG8gZ2V0IHRoZSBncm91cHNcbiAqXG4gKiBUaGVzZSBzaG91bGQgbm90IGJlIGVkaXRlZCBhcyB0aGV5IHNob3VsZCB3b3JrIGFzIGlzXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+Lm5hbWVcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIG5hbWUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8bmFtZT4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnNlY3Rpb25zXCIgUmVndWxhciBleHByZXNzaW9uIHRvIHNwbGl0IHRleHQgaW50byBjb21iYXQsIHNraWxsLCBsYW5ndWFnZSwgYW5kIHNwZWxscyBzZWN0aW9uXG4gKlxuICogSWYgdGhlcmUgaXMgbmV3IGZ1bmN0aW9uYWxpdHkgY2hlY2sgZm9yIHRoaXMgc3RyaW5nIGluIHRoZSB0cmFuc2xhdGlvbnMgLyBrZXlzIGZvciB5b3VyIGxhbmd1YWdlIFwiTkVXIEtFWSBCRUxPVyAtIFRSQU5TTEFUSU9OIFJFUVVJUkVEXCJcbiAqL1xuY29uc3QgbmFtZUNoYXJhY3RlcnMgPVxuICAnXFxcXHUzMDAwXFxcXHUzNDAwLVxcXFx1NERCRlxcXFx1NEUwMC1cXFxcdTlGRkZcXFxcd1xcXFwoXFxcXClcXFxcLVxcXFwvJlwiXFwnJyArXG4gIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoXG4gICAgJ2HMgWXMgWnMgW/MgcOgw6jDrMOyw7nDgMOIw4zDksOZw6HDqcOtw7PDusO9w4HDicONw5PDmsOdw6LDqsOuw7TDu8OCw4rDjsOUw5vDo8Oxw7XDg8SAw5HDlcOkw6vDr8O2w7zDv8OEw4vDj8OWw5zFuMOgw6jDp8OHw5/DmMO4w4XDpcOGw6bFk+KAnOKAncKrwrvEhcSHxJnFgsWEw7PFm8W6xbzEhMSGxJjFgcWDw5PFmsW5xbsnXG4gIClcblxuY29uc3Qga2V5cyA9IHtcbiAgZW46IHtcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuRW5nbGlzaCcsXG4gICAgZGJOb25lOiAnbm9uZScsXG4gICAgYXJtb3JOb25lOiAnbm9uZScsXG4gICAgYXR0YWNrc1BlclJvdW5kTm9uZTogJ25vbmUnLFxuICAgIHNhbkxvc3NOb25lOiAnbm9uZScsXG4gICAgZnVsbGRiOiAnKCcgKyAnRGFtYWdlIEJvbnVzfERCJyArICcpJyxcbiAgICBoYWxmZGI6ICcoJyArICfCvXxoYWxmJyArICcpJyxcbiAgICBzZWN0aW9uQ29tYmF0czogJ1xcbig/OicgKyAnY29tYmF0fGZpZ2h0aW5nIGF0dGFja3MnICsgJylbOlxcbl0nLFxuICAgIG5ld0NvbWJhdEhlYWRlcjogJ1xcbicgKyAnQ29tYmF0JyArICdcXG4nLFxuICAgIHNlY3Rpb25Ta2lsbHM6ICdcXG4oPzonICsgJ3NraWxscycgKyAnKD86XFxcXHMqXFxcXChbXlxcXFwpXStcXFxcKSk/KVs6XFxuXScsXG4gICAgc2VjdGlvbkxhbmdhdWdlczogJ1xcbig/OicgKyAnbGFuZ3VhZ2VzJyArICcpWzpcXG5dJyxcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdzcGVsbHMnICsgJylbOlxcbl0nLFxuICAgIGhhbmRndW46XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICcgR3VufFJldm9sdmVyfFBpc3RvbHxIYW5kZ3VufERlcnJpbmdlcnxCZXJldHRhfEx1Z2VyfERlc2VydCBFYWdsZXwgXFxcXC4zOCcgK1xuICAgICAgJyknLFxuICAgIHJpZmxlOlxuICAgICAgJyg/PHR5cGU+JyArICdSaWZsZXxTaG90Z3VufENhcmJpbmV8R2F1Z2UgfExlZS1FbmZpZWxkfEVsZXBoYW50JyArICcpJyxcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnU3VibWFjaGluZSBHdW58VGhvbXBzb24nICsgJyknLFxuICAgIG1hY2hpbmVHdW46ICcoPzx0eXBlPicgKyAnQnJvd25pbmd8Vmlja2VycycgKyAnKScsXG4gICAgbGF1bmNoZWQ6ICcoPzx0eXBlPicgKyAnTW9sb3RvdnxHcmVuYWRlfER5bmFtaXRlJyArICcpJyxcbiAgICBleGFtcGxlOlxuICAgICAgJ0V4YW1wbGUgQ2hhcmFjdGVyLCBhZ2UgMjdcXG5TVFIgNzUgQ09OIDYwIFNJWiA4MCBERVggNzAgQVBQIDYwIElOVCA4MFxcblBPVyA1MCBFRFUgODUgU0FOIDU1IEhQIDE0IERCOiAxRDRcXG5CdWlsZDogMSBNb3ZlOiA3IE1QOiAxMCBMdWNrOiA0MCBBcm1vcjogMVxcbkF0dGFja3MgcGVyIHJvdW5kOiAzIFNBTiBsb3NzOiAxZDQvMWQ4XFxuQ29tYmF0XFxuQml0ZSA1MCUgKDI1LzEwKSwgZGFtYWdlIDFENlxcbkJyYXdsIDMwJSAoMTUvNiksIGRhbWFnZSAxRDNcXG5EZXJyaW5nZXIgNDAlICgyMC84KSwgZGFtYWdlIDFEOCsxXFxuRG9kZ2UgNTAlICgyNS8xMClcXG5Ta2lsbHNcXG5BbmltYWwgSGFuZGxpbmcgNTUlLCBDaGFybSAzMCUsIEZpcnN0IEFpZCAyNSUsIERpc2d1aXNlIDIwJSxcXG5MaXN0ZW4gNTAlLCBNZWRpY2luZSA0NSUsIFBlcnN1YWRlIDI1JSwgUHN5Y2hvbG9neSA3NSUsXFxuU2NpZW5jZSAoQXN0cm9ub215KSA5MCUsIFNjaWVuY2UgKEJvdGFueSkgMzUlLCBTY2llbmNlIChab29sb2d5KSAxMCUsXFxuU3BvdCBIaWRkZW4gMzUlLCBTdGVhbHRoIDEwJVxcbkxhbmd1YWdlczogRW5nbGlzaCA4MCUsIEVrbG8gNSUuXFxuU3BlbGxzOiBTdW1tb24gTlBDLCBEaXNwZWwgTlBDLidcbiAgfSxcbiAgZGU6IHtcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuR2VybWFuJyxcbiAgICBkYk5vbmU6ICdub25lJyxcbiAgICBhcm1vck5vbmU6ICdub25lJyxcbiAgICBhdHRhY2tzUGVyUm91bmROb25lOiAnbm9uZScsXG4gICAgc2FuTG9zc05vbmU6ICdub25lJyxcbiAgICBkaWNlU2hvcnQ6ICd3fGQnLFxuICAgIGZ1bGxkYjogJygnICsgJ1NjaGFkZW5zYm9udXN8U2InICsgJyknLFxuICAgIGhhbGZkYjogJygnICsgJ8K9fDEvMiBTY2hhZGVuc2JvbnVzfFNiLzInICsgJyknLFxuICAgIHNlY3Rpb25Db21iYXRzOiAnXFxuKD86JyArICdLYW1wZnxBbmdyaWZmOnxBTkdSSUZGRScgKyAnKVs6XFxuXScsXG4gICAgbmV3Q29tYmF0SGVhZGVyOiAnXFxuJyArICdLYW1wZicgKyAnXFxuJyxcbiAgICBzZWN0aW9uU2tpbGxzOiAnXFxuKD86JyArICdGZXJ0aWdrZWl0ZW4nICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ1NwcmFjaGVuJyArICcpWzpcXG5dJyxcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdaYXViZXInICsgJylbOlxcbl0nLFxuICAgIGhhbmRndW46XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICcgR3VufFJldm9sdmVyfFBpc3RvbGV8SGFuZGd1bnxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8IFxcXFwuMzgnICtcbiAgICAgICcpJyxcbiAgICByaWZsZTpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ0dld2VocnxTY2hyb3RmbGludGV8Q2FyYWJpbmVyfEthcmFiaW5lcnxHYXVnZSB8TGVlLUVuZmllbGR8RWxlZmFudGVuJyArXG4gICAgICAnKScsXG4gICAgc21iOiAnKD88dHlwZT4nICsgJ1N1Ym1hY2hpbmUgR3VufFRob21wc29uJyArICcpJyxcbiAgICBtYWNoaW5lR3VuOiAnKD88dHlwZT4nICsgJ0Jyb3duaW5nfFZpY2tlcnMnICsgJyknLFxuICAgIGxhdW5jaGVkOiAnKD88dHlwZT4nICsgJ01vbG90b3Z8R3JhbmF0ZXxEeW5hbWl0JyArICcpJyxcbiAgICBleGFtcGxlOlxuICAgICAgJ1Zvcm5hbWUgTmFjaG5hbWVcXG5BbHRlcjogMjlcXG5CZXJ1ZjogRWluIEJlcnVmXFxuU1QgNTBcXG5NQSA2MFxcbktPIDYwXFxuR0UgNjBcXG5HUiA1NVxcbkVSIDY1XFxuSU4gODBcXG5CSSA4NVxcblRyZWZmZXJwdW5rdGU6IDExXFxuR2Vpc3RpZ2UgU3RhYmlsaXTDpHQ6IDYwXFxuU2NoYWRlbnNib251czogMFxcblN0YXR1cjogMFxcbk1hZ2llcHVua3RlOiAxMlxcbkJld2VndW5nc3dlaXRlOiA4XFxuXFxuS2FtcGZcXG5BbmdyaWZmZTogMVxcbkhhbmRnZW1lbmdlIDMwJSAoMTUvNiksIFNjaGFkZW4gMUQzXFxuTWVzc2VyIDMwJSAoMTUvNiksIFNjaGFkZW4gMUQ0XFxuQXVzd2VpY2hlbiAzMCUgKDE1LzYpXFxuXFxuRmVydGlna2VpdGVuOiBBbnRocm9wb2xvZ2llIDcwJSAoMzUvMTQpLCBBcmNow6RvbG9naWUgMzAlICgxNS82KSwgQmlibGlvdGhla3NudXR6dW5nIDUwJSAoMjUvMTApLCBFcnN0ZSBIaWxmZSA1MCUgKDI1LzEwKSwgRmluYW56a3JhZnQgNDAlICgyMC84KSwgR2VzY2hpY2h0ZSA2MCUgKDMwLzEyKSwgS2xldHRlcm4gNTAlICgyNS8xMClcXG5cXG5TcHJhY2hlbjogRW5nbGlzY2ggODUlICg0Mi8xNyk7IERldXRzY2ggNDUlICgyMi85KSwgTGF0ZWluIDQ1JSAoMjIvOSknXG4gIH0sXG4gIHBsOiB7XG4gICAgZGVzY3JpcHRpb246ICdDb0M3LlBvbGlzaCcsXG4gICAgZGJOb25lOiAnYnJhaycsXG4gICAgYXJtb3JOb25lOiAnYnJhaycsXG4gICAgYXR0YWNrc1BlclJvdW5kTm9uZTogJ2JyYWsnLFxuICAgIHNhbkxvc3NOb25lOiAnYnJhaycsXG4gICAgZGljZVNob3J0OiAna3xkJyxcbiAgICBmdWxsZGI6ICcoJyArICdNb2R5ZmlrYXRvciBPYnJhxbxlxYR8TU8nICsgJyknLFxuICAgIGhhbGZkYjogJygnICsgJ8K9fDEvMiBNT3xNTy8yJyArICcpJyxcbiAgICBzZWN0aW9uQ29tYmF0czogJ1xcbig/OicgKyAnV2Fsa2F8QXRha2knICsgJylbOlxcbl0nLFxuICAgIG5ld0NvbWJhdEhlYWRlcjogJ1xcbicgKyAnV2Fsa2EnICsgJ1xcbicsXG4gICAgc2VjdGlvblNraWxsczogJ1xcbig/OicgKyAnVW1pZWrEmXRub8WbY2knICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ0rEmXp5a2knICsgJylbOlxcbl0nLFxuICAgIHNlY3Rpb25TcGVsbHM6ICdcXG4oPzonICsgJ1pha2zEmWNpYScgKyAnKVs6XFxuXScsXG4gICAgaGFuZGd1bjpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJyBQaXN0b2xldHxSZXdvbHdlcnxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8IFxcXFwuMzgnICtcbiAgICAgICcpJyxcbiAgICByaWZsZTpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ0thcmFiaW58U3RyemVsYmF8V2lhdHLDs3drYXxHYXJhbmR8R2F1Z2UgfExlZS1FbmZpZWxkfFN0cnplbGJhIG5hIHPFgm9uaWUnICtcbiAgICAgICcpJyxcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnUGlzdG9sZXQgbWFzenlub3d5fFRob21wc29uJyArICcpJyxcbiAgICBtYWNoaW5lR3VuOiAnKD88dHlwZT4nICsgJ0Jyb3duaW5nfFZpY2tlcnMnICsgJyknLFxuICAgIGxhdW5jaGVkOiAnKD88dHlwZT4nICsgJ01vxYJvdG93YXxHcmFuYXR8TGFza2EgZHluYW1pdHV8RHluYW1pdCcgKyAnKScsXG4gICAgZXhhbXBsZTpcbiAgICAgICdQcnp5a8WCYWRvd2EgcG9zdGHEhywgMjcgbGF0XFxuQmlibGlvdGVrYXJ6XFxuUyA3NSBLT04gNjAgQkMgODAgWlIgNzAgV1lHIDYwIElOVCA4MFxcbk1PQyA1MCBXWUsgODUgUCA1NSBQVyAxNCBNTzogMUQ0XFxuS3J6ZXBhOiAxIFJ1Y2g6IDcgUE06IDEwIFN6Y3rEmcWbY2llOiA0MCBQYW5jZXJ6OiAxXFxuQXRha2kgdyBydW5kemllOiAzIFV0cmF0YSBQb2N6eXRhbG5vxZtjaTogMUs0LzFLOFxcbldhbGthXFxuVWdyeXppZW5pZSA1MCUgKDI1LzEwKSwgb2JyYcW8ZW5pYSAxSzZcXG5XYWxrYSAzMCUgKDE1LzYpLCBvYnJhxbxlbmlhIDFLM1xcbkRlcnJpbmdlciA0MCUgKDIwLzgpLCBvYnJhxbxlbmlhIDFLOCsxXFxuVW5payA1MCUgKDI1LzEwKVxcblVtaWVqxJl0bm/Fm2NpXFxuVHJlc3VyYSBad2llcnrEhXQgNTUlLCBVcm9rIE9zb2Jpc3R5IDMwJSwgUGllcndzemEgUG9tb2MgMjUlLCBVa3J5d2FuaWUgMjAlLFxcbk5hc8WCdWNoaXdhbmllIDUwJSwgTWVkeWN5bmEgNDUlLCBQcnpla29ueXdhbmllIDI1JSwgUHN5Y2hvbG9naWEgNzUlLFxcbk5hdWthIChBc3Ryb25vbWlhKSA5MCUsIE5hdWthIChCb3RhbmlrYSkgMzUlLCBOYXVrYSAoWm9vbG9naWEpIDEwJSxcXG5TcG9zdHJ6ZWdhd2N6b8WbxIcgMzUlLCBVa3J5d2FuaWUgMTAlXFxuSsSZenlraTogQW5naWVsc2tpIDgwJSwgRWtsbyA1JS5cXG5aYWtsxJljaWE6IFByenl6d2FuaWUgTlBDLCBPZGVzxYJhbmllIE5QQy4nXG4gIH0sXG4gIGZyOiB7XG4gICAgZGVzY3JpcHRpb246ICdDb0M3LkZyZW5jaCcsXG4gICAgZGJOb25lOiAnQWN1bmUnLFxuICAgIGFybW9yTm9uZTogJyg/OkFjdW5lfGF1Y3VuZSknLFxuICAgIGF0dGFja3NQZXJSb3VuZE5vbmU6ICdBY3VuZScsXG4gICAgc2FuTG9zc05vbmU6ICdBY3VuZScsXG4gICAgZnVsbGRiOiAnKCcgKyAnQkR8Qm9udXMgYXV4IGRvbW1hZ2VzfEltcGFjdHxJbXAnICsgJyknLFxuICAgIGhhbGZkYjogJygnICsgJ8K9fDEvMiBJbXB8SW1wLzInICsgJyknLFxuICAgIHNlY3Rpb25Db21iYXRzOiAnXFxuKD86JyArICdDb21iYXR8QXJtZXN8QXR0YXF1ZXMnICsgJylbOlxcbl0nLFxuICAgIG5ld0NvbWJhdEhlYWRlcjogJ1xcbicgKyAnQ29tYmF0JyArICdcXG4nLFxuICAgIHNlY3Rpb25Ta2lsbHM6ICdcXG4oPzonICsgJ0NvbXDDqXRlbmNlcycgKyAnKD86XFxcXHMqXFxcXChbXlxcXFwpXStcXFxcKSk/KVs6XFxuXScsXG4gICAgc2VjdGlvbkxhbmdhdWdlczogJ1xcbig/OicgKyAnTGFuZ3Vlcz8nICsgJylcXFxccypbOlxcbl0nLFxuICAgIHNlY3Rpb25TcGVsbHM6ICdcXG4oPzonICsgJ1NvcnRpbMOoZ2VzXFxcXHMqfFNvcnRzJyArICcpWzpcXG5dJyxcbiAgICBoYW5kZ3VuOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnUmV2b2x2ZXJ8UGlzdG9sZXR8RGVycmluZ2VyfEJlcmV0dGF8THVnZXJ8RGVzZXJ0IEVhZ2xlfCBcXFxcLjM4JyArXG4gICAgICAnKScsXG4gICAgcmlmbGU6ICcoPzx0eXBlPicgKyAnQ2FyYWJpbmV8TGVlLUVuZmllbGR8RnVzaWwnICsgJyknLFxuICAgIHNtYjogJyg/PHR5cGU+JyArICdTTUd8VGhvbXBzb24nICsgJyknLFxuICAgIG1hY2hpbmVHdW46ICcoPzx0eXBlPicgKyAnQnJvd25pbmd8Vmlja2Vyc3xNaXRyYWlsbGV1c2UnICsgJyknLFxuICAgIGxhdW5jaGVkOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnQm9vbWVyYW5nIGRlIGd1ZXJyZXxKYXZlbGluZXxQaWVycmV8U2h1cmlrZW58QsOidG9uIGRlIGR5bmFtaXRlfENvY2t0YWlsIE1vbG90b3Z8R3JlbmFkZSDDoCBtYWlufE1vbG90b3Z8R3JlbmFkZXxEeW5hbWl0ZScgK1xuICAgICAgJyknLFxuICAgIGV4YW1wbGU6XG4gICAgICAnRXhhbXBsZSBDaGFyYWN0ZXIsIDI3IGFuc1xcbkZPUiA3NSBDT04gNjAgVEFJIDgwIERFWCA3MCBBUFAgNjAgSU5UIDgwXFxuUE9VIDUwIMOJRFUgODUgU0FOIDU1IFBWIDE0IEJEOiAxRDRcXG5DYXJydXJlOiAxIE12dDogNyBQTTogMTAgQ2hhbmNlOiA0MCBBcm11cmU6IDFcXG5BdHRhcXVlcyBwYXIgcm91bmQgMyBQZXJ0ZSBkZSBTQU46IDFkNC8xZDhcXG5BdHRhcXVlc1xcbkJpdGUgNTAlICgyNS8xMCksIGRvbW1hZ2UgMUQ2XFxuQnJhd2wgMzAlICgxNS82KSwgZG9tbWFnZSAxRDNcXG5EZXJyaW5nZXIgNDAlICgyMC84KSwgZG9tbWFnZSAxRDgrMVxcbkVzcXVpdmVyIDUwJSAoMjUvMTApXFxuQ29tcMOpdGVuY2VzXFxuQW5pbWFsIEhhbmRsaW5nIDU1JSwgQ2hhcm0gMzAlLCBGaXJzdCBBaWQgMjUlLCBEaXNndWlzZSAyMCUsXFxuTGlzdGVuIDUwJSwgTWVkaWNpbmUgNDUlLCBQZXJzdWFkZSAyNSUsIFBzeWNob2xvZ3kgNzUlLFxcblNjaWVuY2UgKEFzdHJvbm9teSkgOTAlLCBTY2llbmNlIChCb3RhbnkpIDM1JSwgU2NpZW5jZSAoWm9vbG9neSkgMTAlLFxcblNwb3QgSGlkZGVuIDM1JSwgU3RlYWx0aCAxMCVcXG5MYW5ndWU6IEVuZ2xpc2ggODAlLCBFa2xvIDUlLlxcblNvcnRpbMOoZ2VzOiBTdW1tb24gTlBDLCBEaXNwZWwgTlBDLidcbiAgfSxcbiAgZXM6IHtcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuU3BhbmlzaCcsXG4gICAgZGJOb25lOiAnbmluZ3VuYScsXG4gICAgYXJtb3JOb25lOiAnbmluZ3VuYScsXG4gICAgYXR0YWNrc1BlclJvdW5kTm9uZTogJ25pbmd1bm8nLFxuICAgIHNhbkxvc3NOb25lOiAnbm8nLFxuICAgIGZ1bGxkYjogJygnICsgJ0JEfGJkfGJvbmlmaWNhY2nDs24gZGUgZGHDsW8nICsgJyknLFxuICAgIGhhbGZkYjogJygnICsgJ8K9fG1lZGlvIGRhw7FvfG1pdGFkfGRhw7FvIGEgbGEgbWl0YWQnICsgJyknLFxuICAgIHNlY3Rpb25Db21iYXRzOiAnXFxuKD86JyArICdDb21iYXRlfEFybWFzJyArICcpWzpcXG5dJyxcbiAgICBuZXdDb21iYXRIZWFkZXI6ICdcXG4nICsgJ0NvbWJhdGUnICsgJ1xcbicsXG4gICAgc2VjdGlvblNraWxsczogJ1xcbig/OicgKyAnSGFiaWxpZGFkZXMnICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ0lkaW9tYXN8TGVuZ3VhamVzfExlbmd1YXMnICsgJylbOlxcbl0nLFxuICAgIHNlY3Rpb25TcGVsbHM6ICdcXG4oPzonICsgJ0Nvbmp1cm9zfEhlY2hpem9zJyArICcpWzpcXG5dJyxcbiAgICBoYW5kZ3VuOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnUmV2b2x2ZXJ8UGlzdG9sYXxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8IFxcXFwuMzgnICtcbiAgICAgICcpJyxcbiAgICByaWZsZTpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ1JpZmxlfENhcmFiaW5hfExlZS1FbmZpZWxkfENhemEgRWxlZmFudGVzfEZ1c2lsfEVzY29wZXRhfEdhbGdhfFJlY29ydGFkYScgK1xuICAgICAgJyknLFxuICAgIHNtYjogJyg/PHR5cGU+JyArICdTdWJmdXNpbHxUaG9tcHNvbicgKyAnKScsXG4gICAgbWFjaGluZUd1bjogJyg/PHR5cGU+JyArICdCcm93bmluZ3xWaWNrZXJzfEFtZXRyYWxsYWRvcmEnICsgJyknLFxuICAgIGxhdW5jaGVkOiAnKD88dHlwZT4nICsgJ01vbG90b3Z8R3JhbmFkYXxEaW5hbWl0YScgKyAnKScsXG4gICAgZXhhbXBsZTpcbiAgICAgICdFeGFtcGxlIENoYXJhY3RlciwgMjcgYcOxb3NcXG5GVUUgNzUgQ09OIDYwIFRBTSA4MCBERVMgNzAgQVBBIDYwIElOVCA4MFxcblBPRCA1MCBFRFUgODUgQ09SIDU1IFBWIDE0IEJEOiAxRDRcXG5Db3JwdWxlbmNpYTogMSBNb3ZpbWllbnRvOiA3IFBNOiAxMCBTdWVydGU6IDQwIEFybWFkdXJhOiAxXFxuTsO6bWVybyBkZSBBdGFxdWVzIDMgUMOpcmRpZGEgZGUgY29yZHVyYTogMWQ0LzFkOFxcbkNvbWJhdGVcXG5CaXRlIDUwJSAoMjUvMTApLCBkYcOxbyAxRDZcXG5CcmF3bCAzMCUgKDE1LzYpLCBkYcOxbyAxRDNcXG5EZXJyaW5nZXIgNDAlICgyMC84KSwgZGHDsW8gMUQ4KzFcXG5Fc3F1aXZhciA1MCUgKDI1LzEwKVxcbkhhYmlsaWRhZGVzXFxuQW5pbWFsIEhhbmRsaW5nIDU1JSwgQ2hhcm0gMzAlLCBGaXJzdCBBaWQgMjUlLCBEaXNndWlzZSAyMCUsXFxuTGlzdGVuIDUwJSwgTWVkaWNpbmUgNDUlLCBQZXJzdWFkZSAyNSUsIFBzeWNob2xvZ3kgNzUlLFxcblNjaWVuY2UgKEFzdHJvbm9teSkgOTAlLCBTY2llbmNlIChCb3RhbnkpIDM1JSwgU2NpZW5jZSAoWm9vbG9neSkgMTAlLFxcblNwb3QgSGlkZGVuIDM1JSwgU3RlYWx0aCAxMCVcXG5JZGlvbWFzOiBFbmdsaXNoIDgwJSwgRWtsbyA1JS5cXG5Db25qdXJvczogU3VtbW9uIE5QQywgRGlzcGVsIE5QQy4nXG4gIH0sXG4gICd6aC1UVyc6IHtcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuVHJhZGl0aW9uYWxDaGluZXNlJyxcbiAgICBkYk5vbmU6ICdub25lJyxcbiAgICBhcm1vck5vbmU6ICdub25lJyxcbiAgICBhdHRhY2tzUGVyUm91bmROb25lOiAnbm9uZScsXG4gICAgc2FuTG9zc05vbmU6ICdub25lJyxcbiAgICBmdWxsZGI6ICcoJyArICdEYW1hZ2UgQm9udXN8REJ85YK35a6z5Yqg5YC8JyArICcpJyxcbiAgICAvKiBORVcgS0VZIEJFTE9XIC0gVFJBTlNMQVRJT04gUkVRVUlSRUQgKi9cbiAgICBoYWxmZGI6ICcoJyArICfCvXxoYWxmJyArICcpJyxcbiAgICBzZWN0aW9uQ29tYmF0czpcbiAgICAgICdcXG4oPzonICsgJ2NvbWJhdHxmaWdodGluZyBhdHRhY2tzfOaIsOmspeaKgOiDvXzmiLDprKXliJfooah85q2m5ZmoJyArICcpWzpcXG5dJyxcbiAgICBuZXdDb21iYXRIZWFkZXI6ICdcXG4nICsgJ0NvbWJhdCcgKyAnXFxuJyxcbiAgICBzZWN0aW9uU2tpbGxzOlxuICAgICAgJ1xcbig/OicgKyAnKD86U2tpbGxzfOaKgOiDveWIl+ihqCknICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ0xhbmd1YWdlc3zoqp7oqIAnICsgJylbOlxcbl0nLFxuICAgIHNlY3Rpb25TcGVsbHM6ICdcXG4oPzonICsgJ3NwZWxsc3zlkpLmlofliJfooah85ZKS5paHJyArICcpWzpcXG5dJyxcbiAgICBoYW5kZ3VuOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnIOmBgueZvOanjXxcXFxcLjIy55+t5Y+j6Ieq5YuV5omL5qeNfFxcXFwuMjXnn63lj6PmiYvmp40o5Zau566hKXxcXFxcLjMy5oiWN1xcXFwuNjVtbeW3pui8quaJi+anjXxcXFxcLjMy5oiWN1xcXFwuNjVtbeiHquWLleaJi+anjXxcXFxcLjM1NyBNYWdudW3lt6bovKrmiYvmp418XFxcXC4zOOaIljltbeW3pui8quaJi+anjXxcXFxcLjM46Ieq5YuV5omL5qeNfOiynembt+WhlE05fOagvOa0m+WFizE3fDltbeiHquWLleaJi+anjXzpra/moLxQMDh8XFxcXC40MeW3pui8quaJi+anjXxcXFxcLjQ06aas5qC85Y2X5bem6Lyq5omL5qeNfFxcXFwuNDXlt6bovKrmiYvmp418XFxcXC40NeiHquWLleaJi+anjXzmspnmvKDkuYvpt7l8R3VufFJldm9sdmVyfFBpc3RvbHxIYW5kZ3VufERlcnJpbmdlcnxCZXJldHRhfEx1Z2VyfERlc2VydCBFYWdsZXwgXFxcXC4zOCcgK1xuICAgICAgJyknLFxuICAgIHJpZmxlOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAn5q2l5qeNfOWNoeizk+anjXzljYroh6rli5XmraXmp41854216LGh5qeNfFJpZmxlfFNob3RndW58Q2FyYmluZXxHYXVnZSB8TGVlLUVuZmllbGR8RWxlcGhhbnQnICtcbiAgICAgICcpJyxcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnU3VibWFjaGluZSBHdW58VGhvbXBzb2586KGd6YuS5qeNJyArICcpJyxcbiAgICBtYWNoaW5lR3VuOiAnKD88dHlwZT4nICsgJ0Jyb3duaW5nfFZpY2tlcnN85qmf5qeNJyArICcpJyxcbiAgICBsYXVuY2hlZDogJyg/PHR5cGU+JyArICdNb2xvdG92fEdyZW5hZGV8RHluYW1pdGXniIbngrjnial85omL5qa05b2IfOmHjeatpuWZqCcgKyAnKScsXG4gICAgZXhhbXBsZTpcbiAgICAgICfnpLrnr4Top5LoibIsIOW5tOm9oSAyN1xcbuWKm+mHjyA3NSDpq5Tos6ogNjAg6auU5Z6LIDgwIOaVj+aNtyA3MCDlpJboso4gNjAg5pm65YqbIDgwXFxu5oSP5b+XIDUwIOaVmeiCsiA4NSBTQU4gNTUgSFAgMTQgREI6IDFENFxcbumrlOagvDogMSBNb3ZlOiA3IE1QOiAxMCDlubjpgYs6IDQwIOitt+eUsjogMVxcbuaUu+aTiuasoeaVuDogMyDnkIbmmbrllqrlpLE6IDFkNC8xZDhcXG7miLDprKXliJfooahcXG7lkqwgNTAlICgyNS8xMCksIOWCt+WusyAxRDZcXG7nqbrmiYsgMzAlICgxNS82KSwg5YK35a6zIDFEM1xcbuaJi+anjSA0MCUgKDIwLzgpLCDlgrflrrMgMUQ4KzFcXG7ploPpgb8gNTAlICgyNS8xMClcXG7mioDog73liJfooahcXG7li5XnianpprTppIogNTUlLCDlj5bmgoUgMzAlLCDmgKXmlZEgMjUlLCDmvZvooYwgMjAlLFxcbuiBhuiBvSA1MCUsIOiXpeWtuCA0NSUsIOeyvuelnuWIhuaekCAyNSUsIOW/g+eQhuWtuCA3NSUsXFxu56eR5a24ICjlj7jms5Xnp5HlrbgpIDkwJSwg56eR5a24ICjlr4bnorzlrbgpIDM1JSwgXFxu5YG15p+lIDM1JSwg5Zas6KOdIDEwJVxcbuiqnuiogDog57K16KqeIDgwJSwg6K6A5ZSHIDUlLlxcbuWSkuaWhzog5Y+s5ZaaIE5QQywg5oyH5o+uIE5QQy4nXG4gIH1cbn1cblxuY29uc3QgdHJhbnNsYXRpb25zID0ge1xuICBlbjoge1xuICAgIGFnZTogJyg/PCFbYS16XSknICsgJ2FnZScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGFnZT5cXFxcZCspWyxcXFxcc10qJyxcbiAgICBvY2N1cGF0aW9uOlxuICAgICAgJ1ssXFxcXHNdKicgKyAnT2NjdXBhdGlvbicgKyAnKFxcXFxzKjopP1xcXFxzKyg/PG9jY3VwYXRpb24+LispWyxcXFxcc1xcbl0qJyxcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdTVFInICsgJyhcXFxccyo6KT9cXFxccyooPzxzdHI+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBjb246ICcoPzwhW2Etel0pJyArICdDT04nICsgJyhcXFxccyo6KT9cXFxccyooPzxjb24+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzaXo6ICcoPzwhW2Etel0pJyArICdTSVonICsgJyhcXFxccyo6KT9cXFxccyooPzxzaXo+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTlQnICsgJyhcXFxccyo6KT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBwb3c6ICcoPzwhW2Etel0pJyArICdQT1cnICsgJyhcXFxccyo6KT9cXFxccyooPzxwb3c+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkZXg6ICcoPzwhW2Etel0pJyArICdERVgnICsgJyhcXFxccyo6KT9cXFxccyooPzxkZXg+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdBUFAnICsgJyhcXFxccyo6KT9cXFxccyooPzxhcHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBlZHU6ICcoPzwhW2Etel0pJyArICdFRFUnICsgJyhcXFxccyo6KT9cXFxccyooPzxlZHU+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzYW46XG4gICAgICAnKD88IVthLXpdKSg/OicgKyAnU0FOfFNhbml0eScgKyAnKShcXFxccyo6KT9cXFxccyooPzxzYW4+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBocDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArICdIUHxIaXQgcG9pbnRzJyArICcpKFxcXFxzKjopP1xcXFxzKig/PGhwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgbXA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ01QfE1hZ2ljIHBvaW50cycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkYjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICBrZXlzLmVuLmZ1bGxkYiArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxkYj5bKy1dP1xcXFxkKyg/OmRcXFxcZCt8RFxcXFxkKyk/fCcgK1xuICAgICAga2V5cy5lbi5kYk5vbmUgK1xuICAgICAgJylbLFxcXFxzXFxuXSonLFxuICAgIGJ1aWxkOiAnKD88IVthLXpdKScgKyAnQnVpbGQnICsgJyhcXFxccyo6KT9cXFxccysoPzxidWlsZD5bKy1dP1xcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGFybW9yOlxuICAgICAgJyg/PCFbYS16XSknICtcbiAgICAgICdBcm1vcicgK1xuICAgICAgJyhcXFxccyo6KT9cXFxccysoPzxhcm1vcj4nICtcbiAgICAgIGtleXMuZW4uYXJtb3JOb25lICtcbiAgICAgICd8XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbW92OiAnKD88IVthLXpdKScgKyAnTW92ZScgKyAnKFxcXFxzKjopP1xcXFxzKig/PG1vdj5cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBsY2s6ICcoPzwhW2Etel0pJyArICdMdWNrJyArICcoXFxcXHMqOik/XFxcXHMrKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXR0YWNrc1BlclJvdW5kOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdBdHRhY2tzIHBlciByb3VuZHwjIEF0dGFja3MnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGF0dGFja3NQZXJSb3VuZD4nICtcbiAgICAgIGtleXMuZW4uYXR0YWNrc1BlclJvdW5kTm9uZSArXG4gICAgICAnfFxcXFxkKyg/IWQpKVssXFxcXHNcXG5dKicsXG4gICAgc2FuTG9zczpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnU2FuaXR5IGxvc3N8U0FOIGxvc3MnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PHNhbkxvc3M+JyArXG4gICAgICBrZXlzLmVuLnNhbkxvc3NOb25lICtcbiAgICAgICd8XFxcXGREP1srXFxcXGRdKlxcXFwvXFxcXGREP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxuICAgIHdlYXBvbjpcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSspKFxcXFwqKiw/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUsPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKVxcXFxzKiw/KT8pPyhcXFxccyonICtcbiAgICAgICdkYW1hZ2UnICtcbiAgICAgICcpP1xcXFxzKyg/PGRhbWFnZT4oOj8oOj9cXFxcZCtkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXG4gICAgICBrZXlzLmVuLmZ1bGxkYiArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lbi5oYWxmZGIgK1xuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2QpP1xcXFxkKykqKSspXFxcXCk/JyxcbiAgICB3ZWFwb25Eb2RnZTpcbiAgICAgICcoPzxuYW1lPicgK1xuICAgICAgJ0RvZGdlJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylcXFxcKT9cXFxccyolKD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpKT8nLFxuICAgIC8vIFNraWxsIHNob3VsZCBub3QgYmUgbmFtZWQgXCJUaGUgcGxheWVyIGhhc1wiIC8gXCJidXQgdGhleSByZWdlbmVyYXRlXCIgcmVxdWlyZWQgZm9yIFwiQSBDb2xkIEZpcmUgV2l0aGluXCJcbiAgICBza2lsbDpcbiAgICAgICdeKD88bmFtZT5bOlxcXFwqLlxcXFxzJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSsoPzwhJyArXG4gICAgICAnVGhlIHBsYXllciBoYXN8YnV0IHRoZXkgcmVnZW5lcmF0ZScgK1xuICAgICAgJykpXFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspW15kXSU/XFxcXCk/KFxcXFxzKlxcXFwoXFxcXGQrL1xcXFxkK1xcXFwpKT9bXFxcXC4sXT9cXFxccyonLFxuICAgIGd1ZXNzU3RhcnRDb21iYXQ6ICcoXnwoPzwhLClcXG4pKCcgKyAnRmlnaHRpbmd8RmlyZWFybXN8QnJhd2x8Qml0ZScgKyAnKScsXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXG4gICAgc2VjdGlvbnM6XG4gICAgICAnKCcgK1xuICAgICAga2V5cy5lbi5zZWN0aW9uQ29tYmF0cyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lbi5zZWN0aW9uU2tpbGxzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVuLnNlY3Rpb25MYW5nYXVnZXMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZW4uc2VjdGlvblNwZWxscyArXG4gICAgICAnKSdcbiAgfSxcbiAgZGU6IHtcbiAgICBhZ2U6ICcoPzwhW2Etel0pJyArICdBbHRlcicgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGFnZT5cXFxcZCspWyxcXFxcc10qJyxcbiAgICBvY2N1cGF0aW9uOiAnWyxcXFxcc10qJyArICdCZXJ1ZicgKyAnKFxcXFxzKjopP1xcXFxzKyg/PG9jY3VwYXRpb24+LispWyxcXFxcc1xcbl0qJyxcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdTVCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PHN0cj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGNvbjogJyg/PCFbYS16XSknICsgJ0tPJyArICcoXFxcXHMqOik/XFxcXHMqKD88Y29uPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnR1InICsgJyhcXFxccyo6KT9cXFxccyooPzxzaXo+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGludD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHBvdzogJyg/PCFbYS16XSknICsgJ01BJyArICcoXFxcXHMqOik/XFxcXHMqKD88cG93PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGV4OiAnKD88IVthLXpdKScgKyAnR0UnICsgJyhcXFxccyo6KT9cXFxccyooPzxkZXg+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdFUicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFwcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ0JJJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZWR1PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2FuOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdnU3xTVEF8R2Vpc3RpZ2UgU3RhYmlsaXTDpHQnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PHNhbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGhwOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdUUHxUcmVmZmVycHVua3RlJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxocD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIG1wOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdNUHxNYWdpZXB1bmt0ZScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkYjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICBrZXlzLmRlLmZ1bGxkYiArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxkYj5bKy1dP1xcXFxkKyg/OmRcXFxcZCt8RHxXXFxcXGQrKT98JyArXG4gICAgICBrZXlzLmRlLmRiTm9uZSArXG4gICAgICAnKVssXFxcXHNcXG5dKicsXG4gICAgYnVpbGQ6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1N0YXR1cnxTdGF0LicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88YnVpbGQ+WystXT9cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBhcm1vcjpcbiAgICAgICcoPzwhW2Etel0pJyArXG4gICAgICAnUGFuemVydW5nJyArXG4gICAgICAnKFxcXFxzKjopP1xcXFxzKyg/PGFybW9yPicgK1xuICAgICAga2V5cy5kZS5hcm1vck5vbmUgK1xuICAgICAgJ3xcXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBtb3Y6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ0JXfEJld2VndW5nc3dlaXRlJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxtb3Y+XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbGNrOiAnKD88IVthLXpdKScgKyAnR2zDvGNrJyArICcoXFxcXHMqOik/XFxcXHMrKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXR0YWNrc1BlclJvdW5kOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdBbmdyaWZmZSBwcm8gUnVuZGV8QW5ncmlmZmV8UHJvIFJ1bmRlJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxhdHRhY2tzUGVyUm91bmQ+JyArXG4gICAgICBrZXlzLmRlLmF0dGFja3NQZXJSb3VuZE5vbmUgK1xuICAgICAgJ3xcXFxcZCsoPyFkKSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbkxvc3M6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1N0YWJpbGl0w6R0c3Zlcmx1c3QnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PHNhbkxvc3M+JyArXG4gICAgICBrZXlzLmRlLnNhbkxvc3NOb25lICtcbiAgICAgICd8XFxcXGRbRFddP1srXFxcXGRdKlxcXFwvXFxcXGRbRFddP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxuICAgIHdlYXBvbjpcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSspKFxcXFwqKiw/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUsPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKVxcXFxzKiw/KT8pPyhcXFxccyonICtcbiAgICAgICdTY2hhZGVuJyArXG4gICAgICAnKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQrd3xkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXG4gICAgICBrZXlzLmRlLmZ1bGxkYiArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5kZS5oYWxmZGIgK1xuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2R8dyk/XFxcXGQrKSopKylcXFxcKT8nLFxuICAgIHdlYXBvbkRvZGdlOlxuICAgICAgJyg/PG5hbWU+JyArXG4gICAgICAnQXVzd2VpY2hlbicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspXFxcXCk/XFxcXHMqJSg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKSk/JyxcbiAgICAvLyBTa2lsbCBzaG91bGQgbm90IGJlIG5hbWVkIFwiVGhlIHBsYXllciBoYXNcIiAvIFwiYnV0IHRoZXkgcmVnZW5lcmF0ZVwiIHJlcXVpcmVkIGZvciBcIkEgQ29sZCBGaXJlIFdpdGhpblwiXG4gICAgc2tpbGw6XG4gICAgICAnXig/PG5hbWU+WzpcXFxcKi5cXFxccycgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKD88IScgK1xuICAgICAgJ1RoZSBwbGF5ZXIgaGFzfGJ1dCB0aGV5IHJlZ2VuZXJhdGUnICtcbiAgICAgICcpKVxcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVteZF0lP1xcXFwpPyhcXFxccypcXFxcKFxcXFxkKy9cXFxcZCtcXFxcKSk/W1xcXFwuLDtdP1xcXFxzKicsXG4gICAgZ3Vlc3NTdGFydENvbWJhdDpcbiAgICAgICcoXnwoPzwhLClcXG4pKCcgK1xuICAgICAgJ0FuZ3JpZmZlfEhhbmRnZW1lbmdlfE5haGthbXBmfEZhdXN0ZmV1ZXJ3YWZmZXxCZWnDn2VuJyArXG4gICAgICAnKScsXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXG4gICAgc2VjdGlvbnM6XG4gICAgICAnKCcgK1xuICAgICAga2V5cy5kZS5zZWN0aW9uQ29tYmF0cyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5kZS5zZWN0aW9uU2tpbGxzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmRlLnNlY3Rpb25MYW5nYXVnZXMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZGUuc2VjdGlvblNwZWxscyArXG4gICAgICAnKSdcbiAgfSxcbiAgcGw6IHtcbiAgICBhZ2U6ICcoPzxhZ2U+XFxcXGQrKScgKyAnXFxcXHMrKD86JyArICdsYXRhfGxhdHxyb2snICsgJylbLFxcXFxzXSonLFxuICAgIG9jY3VwYXRpb246ICdbLFxcXFxzXSonICsgJ1phd8OzZCcgKyAnKFxcXFxzKjopP1xcXFxzKyg/PG9jY3VwYXRpb24+LispWyxcXFxcc1xcbl0qJyxcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdTJyArICcoXFxcXHMqOik/XFxcXHMqKD88c3RyPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgY29uOiAnKD88IVthLXpdKScgKyAnS09OJyArICcoXFxcXHMqOik/XFxcXHMqKD88Y29uPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnQkMnICsgJyhcXFxccyo6KT9cXFxccyooPzxzaXo+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTlQnICsgJyhcXFxccyo6KT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBwb3c6ICcoPzwhW2Etel0pJyArICdNT0MnICsgJyhcXFxccyo6KT9cXFxccyooPzxwb3c+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkZXg6ICcoPzwhW2Etel0pJyArICdaUicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGRleD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGFwcDogJyg/PCFbYS16XSknICsgJ1dZRycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFwcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ1dZSycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGVkdT5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUHxQb2N6eXRhbG5vxZvEhycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaHA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BXfFB1bmt0eSBXeXRyenltYcWCb8WbY2knICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PGhwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgbXA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BNfFB1bmt0eSBNYWdpaScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkYjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICBrZXlzLnBsLmZ1bGxkYiArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxkYj5bKy1dP1xcXFxkKyg/OmRcXFxcZCt8RHxLXFxcXGQrKT98JyArXG4gICAgICBrZXlzLnBsLmRiTm9uZSArXG4gICAgICAnKVssXFxcXHNcXG5dKicsXG4gICAgYnVpbGQ6ICcoPzwhW2Etel0pJyArICdLcnplcGEnICsgJyhcXFxccyo6KT9cXFxccysoPzxidWlsZD5bKy1dP1xcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGFybW9yOlxuICAgICAgJyg/PCFbYS16XSknICtcbiAgICAgICdQYW5jZXJ6JyArXG4gICAgICAnKFxcXFxzKjopP1xcXFxzKyg/PGFybW9yPicgK1xuICAgICAga2V5cy5wbC5hcm1vck5vbmUgK1xuICAgICAgJ3xcXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBtb3Y6ICcoPzwhW2Etel0pJyArICdSdWNoJyArICcoXFxcXHMqOik/XFxcXHMqKD88bW92PlxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGxjazogJyg/PCFbYS16XSknICsgJ1N6Y3rEmcWbY2llJyArICcoXFxcXHMqOik/XFxcXHMrKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXR0YWNrc1BlclJvdW5kOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdBdGFraSB3IHJ1bmR6aWV8IyBBdGFraScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88YXR0YWNrc1BlclJvdW5kPicgK1xuICAgICAga2V5cy5wbC5hdHRhY2tzUGVyUm91bmROb25lICtcbiAgICAgICd8XFxcXGQrKD8hZCkpWyxcXFxcc1xcbl0qJyxcbiAgICBzYW5Mb3NzOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdVdHJhdGEgUG9jenl0YWxub8WbY2l8dXRyYXRhIFAnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PHNhbkxvc3M+JyArXG4gICAgICBrZXlzLnBsLnNhbkxvc3NOb25lICtcbiAgICAgICd8XFxcXGRbREtdP1srXFxcXGRdKlxcXFwvXFxcXGRbREtdP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxuICAgIHdlYXBvbjpcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSspKFxcXFwqKiw/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUsPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKVxcXFxzKiw/KT8pPyhcXFxccyonICtcbiAgICAgICdvYnJhxbxlbmlhJyArXG4gICAgICAnKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQra3xkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXG4gICAgICBrZXlzLnBsLmZ1bGxkYiArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5wbC5oYWxmZGIgK1xuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2QpP1xcXFxkKykqKSspXFxcXCk/JyxcbiAgICB3ZWFwb25Eb2RnZTpcbiAgICAgICcoPzxuYW1lPicgK1xuICAgICAgJ1VuaWsnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVxcXFwpP1xcXFxzKiUoPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXCkpPycsXG4gICAgLy8gU2tpbGwgc2hvdWxkIG5vdCBiZSBuYW1lZCBcIlRoZSBwbGF5ZXIgaGFzXCIgLyBcImJ1dCB0aGV5IHJlZ2VuZXJhdGVcIiByZXF1aXJlZCBmb3IgXCJBIENvbGQgRmlyZSBXaXRoaW5cIlxuICAgIHNraWxsOlxuICAgICAgJ14oPzxuYW1lPls6XFxcXCouXFxcXHMnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKyg/PCEnICtcbiAgICAgICdUaGUgcGxheWVyIGhhc3xidXQgdGhleSByZWdlbmVyYXRlJyArXG4gICAgICAnKSlcXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylbXmRdJT9cXFxcKT8oXFxcXHMqXFxcXChcXFxcZCsvXFxcXGQrXFxcXCkpP1tcXFxcLixdP1xcXFxzKicsXG4gICAgZ3Vlc3NTdGFydENvbWJhdDpcbiAgICAgICcoXnwoPzwhLClcXG4pKCcgKyAnV2Fsa2F8QnJvxYQgUGFsbmF8QmlqYXR5a2F8VWdyeXppZW5pZScgKyAnKScsXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXG4gICAgc2VjdGlvbnM6XG4gICAgICAnKCcgK1xuICAgICAga2V5cy5wbC5zZWN0aW9uQ29tYmF0cyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5wbC5zZWN0aW9uU2tpbGxzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLnBsLnNlY3Rpb25MYW5nYXVnZXMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMucGwuc2VjdGlvblNwZWxscyArXG4gICAgICAnKSdcbiAgfSxcbiAgZnI6IHtcbiAgICBhZ2U6ICcoPzxhZ2U+XFxcXGQrKVxcXFxzKicgKyAnYW5zJyArICcoPyFbYS16XSlbLFxcXFxzXSonLFxuICAgIG9jY3VwYXRpb246XG4gICAgICAnWyxcXFxcc10qJyArICdPY2N1cGF0aW9uJyArICcoXFxcXHMqOik/XFxcXHMrKD88b2NjdXBhdGlvbj4uKylbLFxcXFxzXFxuXSonLFxuICAgIHN0cjogJyg/PCFbYS16XSknICsgJ0ZPUicgKyAnKFxcXFxzKjopP1xcXFxzKig/PHN0cj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGNvbjogJyg/PCFbYS16XSknICsgJ0NPTicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGNvbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNpejogJyg/PCFbYS16XSknICsgJ1RBSScgKyAnKFxcXFxzKjopP1xcXFxzKig/PHNpej5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGludDogJyg/PCFbYS16XSknICsgJ0lOVCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGludD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHBvdzogJyg/PCFbYS16XSknICsgJ1BPVScgKyAnKFxcXFxzKjopP1xcXFxzKig/PHBvdz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRleDogJyg/PCFbYS16XSknICsgJ0RFWCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGRleD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGFwcDogJyg/PCFbYS16XSknICsgJ0FQUCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFwcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ8OJRFUnICsgJyhcXFxccyo6KT9cXFxccyooPzxlZHU+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzYW46XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1NBTnxTYW50w6kgTWVudGFsZScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaHA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BWfFBvaW50cyBkZSB2aWUnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PGhwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgbXA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BNfFBvaW50cyBkZSBtYWdpZScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkYjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICBrZXlzLmZyLmZ1bGxkYiArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxkYj5bKy1dP1xcXFxkKyg/OmRcXFxcZCt8RFxcXFxkKyk/fCcgK1xuICAgICAga2V5cy5mci5kYk5vbmUgK1xuICAgICAgJylbLFxcXFxzXFxuXSonLFxuICAgIGJ1aWxkOlxuICAgICAgJyg/PCFbYS16XSknICsgJ0NhcnJ1cmUnICsgJyhcXFxccyo6KT9cXFxccysoPzxidWlsZD5bKy1dP1xcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGFybW9yOlxuICAgICAgJyg/PCFbYS16XSknICtcbiAgICAgICdBcm11cmV8UHJvdGVjdGlvbicgK1xuICAgICAgJyhcXFxccyo6KT9cXFxccysoPzxhcm1vcj4nICtcbiAgICAgIGtleXMuZnIuYXJtb3JOb25lICtcbiAgICAgICd8XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbW92OlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdNdnR8TW91dmVtZW50fETDqXBsYWNlbWVudCcgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bW92PlxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGxjazogJyg/PCFbYS16XSknICsgJ0NoYW5jZScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGxjaz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGF0dGFja3NQZXJSb3VuZDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnQXR0YXF1ZXMgcGFyIHJvdW5kJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxhdHRhY2tzUGVyUm91bmQ+JyArXG4gICAgICBrZXlzLmZyLmF0dGFja3NQZXJSb3VuZE5vbmUgK1xuICAgICAgJ3xcXFxcZCsoPyFkKSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbkxvc3M6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BlcnRlIGRlIFNhbnTDqSBtZW50YWxlfFBlcnRlIGRlIFNBTicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88c2FuTG9zcz4nICtcbiAgICAgIGtleXMuZnIuc2FuTG9zc05vbmUgK1xuICAgICAgJ3xcXFxcZEQ/WytcXFxcZF0qXFxcXC9cXFxcZEQ/WytcXFxcZF0qKVssXFxcXHNcXG5dKicsXG4gICAgd2VhcG9uOlxuICAgICAgJyhefFxcXFxuKSg/PG5hbWU+Wy5cXFxcdCAnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKykoXFxcXCoqLD9cXFxccyt8XFxcXCopKD86XFxcXCh8KD88cGVyY2VudGFnZT5cXFxcZCspJSw/KD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpXFxcXHMqLD8pPyk/KFxcXFxzKig/OicgK1xuICAgICAgJ2RvbW1hZ2V8ZMOpZ8OidHMnICtcbiAgICAgICcpKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQrZCk/XFxcXGQrKFxcXFxzKi9cXFxccyp8XFxcXHMqWystXVxcXFxzKig/OicgK1xuICAgICAga2V5cy5mci5mdWxsZGIgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZnIuaGFsZmRiICtcbiAgICAgICcpXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooOj9cXFxcZCtkKT9cXFxcZCspKikrKVxcXFwpPycsXG4gICAgd2VhcG9uRG9kZ2U6XG4gICAgICAnKD88bmFtZT4nICtcbiAgICAgICdFc3F1aXZlcj8nICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVxcXFwpP1xcXFxzKiUoPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXCkpPycsXG4gICAgc2tpbGw6XG4gICAgICAnXig/PG5hbWU+WzpcXFxcKi5cXFxccycgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKD88IScgK1xuICAgICAgJ1RoZSBwbGF5ZXIgaGFzfGJ1dCB0aGV5IHJlZ2VuZXJhdGUnICtcbiAgICAgICcpKVxcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVteZF0lP1xcXFwpPyhcXFxccypcXFxcKFxcXFxkKy9cXFxcZCtcXFxcKSk/W1xcXFwuLF0/XFxcXHMqJyxcbiAgICBndWVzc1N0YXJ0Q29tYmF0OlxuICAgICAgJyhefCg/PCEsKVxcbikoJyArICdBdSBjb250YWN0fMOAIGRpc3RhbmNlfENvbWJhdCByYXBwcm9jaMOpfEJpdGUnICsgJyknLFxuICAgIG5hbWU6ICdeKD88bmFtZT5bXFxcXC5cXFxccycgKyBuYW1lQ2hhcmFjdGVycyArICddKylbLFxcXFxzXFxuXSsnLFxuICAgIHNlY3Rpb25zOlxuICAgICAgJygnICtcbiAgICAgIGtleXMuZnIuc2VjdGlvbkNvbWJhdHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZnIuc2VjdGlvblNraWxscyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5mci5zZWN0aW9uTGFuZ2F1Z2VzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmZyLnNlY3Rpb25TcGVsbHMgK1xuICAgICAgJyknXG4gIH0sXG4gIGVzOiB7XG4gICAgYWdlOiAnKD88YWdlPlxcXFxkKylcXFxccyonICsgJ2Fbw7HDkV1vcycgKyAnKD8hW2Etel0pWyxcXFxcc10qJyxcbiAgICBvY2N1cGF0aW9uOlxuICAgICAgJ1ssXFxcXHNdKicgKyAnT2N1cGFjacOzbicgKyAnKFxcXFxzKjopP1xcXFxzKyg/PG9jY3VwYXRpb24+LispWyxcXFxcc1xcbl0qJyxcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdGVUUnICsgJyhcXFxccyo6KT9cXFxccyooPzxzdHI+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBjb246ICcoPzwhW2Etel0pJyArICdDT04nICsgJyhcXFxccyo6KT9cXFxccyooPzxjb24+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzaXo6ICcoPzwhW2Etel0pJyArICdUQU0nICsgJyhcXFxccyo6KT9cXFxccyooPzxzaXo+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTlQnICsgJyhcXFxccyo6KT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBwb3c6ICcoPzwhW2Etel0pJyArICdQT0QnICsgJyhcXFxccyo6KT9cXFxccyooPzxwb3c+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkZXg6ICcoPzwhW2Etel0pJyArICdERVMnICsgJyhcXFxccyo6KT9cXFxccyooPzxkZXg+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdBUEEnICsgJyhcXFxccyo6KT9cXFxccyooPzxhcHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBlZHU6ICcoPzwhW2Etel0pJyArICdFRFUnICsgJyhcXFxccyo6KT9cXFxccyooPzxlZHU+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzYW46XG4gICAgICAnKD88IVthLXpdKSg/OicgKyAnQ09SfENvcmR1cmEnICsgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaHA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BWfFB1bnRvcyBkZSB2aWRhfFBcXFxcLiA/VlxcXFwuJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxocD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIG1wOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQTXxQdW50b3MgTcOhZ2ljb3N8UHVudG9zIGRlIE1hZ2lhJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxtcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRiOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgIGtleXMuZXMuZnVsbGRiICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGRiPlsrLV0/XFxcXGQrKD86ZFxcXFxkK3xEXFxcXGQrKT98JyArXG4gICAgICBrZXlzLmVzLmRiTm9uZSArXG4gICAgICAnKVssXFxcXHNcXG5dKicsXG4gICAgYnVpbGQ6XG4gICAgICAnKD88IVthLXpdKScgKyAnQ29ycHVsZW5jaWEnICsgJyhcXFxccyo6KT9cXFxccysoPzxidWlsZD5bKy1dP1xcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGFybW9yOlxuICAgICAgJyg/PCFbYS16XSknICtcbiAgICAgICdBcm1hZHVyYScgK1xuICAgICAgJyhcXFxccyo6KT9cXFxccysoPzxhcm1vcj4nICtcbiAgICAgIGtleXMuZXMuYXJtb3JOb25lICtcbiAgICAgICd8XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbW92OiAnKD88IVthLXpdKScgKyAnTW92aW1pZW50bycgKyAnKFxcXFxzKjopP1xcXFxzKig/PG1vdj5cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBsY2s6ICcoPzwhW2Etel0pJyArICdTdWVydGUnICsgJyhcXFxccyo6KT9cXFxccysoPzxsY2s+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhdHRhY2tzUGVyUm91bmQ6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ07Dum1lcm8gZGUgQXRhcXVlcycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88YXR0YWNrc1BlclJvdW5kPicgK1xuICAgICAga2V5cy5lcy5hdHRhY2tzUGVyUm91bmROb25lICtcbiAgICAgICd8XFxcXGQrKD8hZCkpWyxcXFxcc1xcbl0qJyxcbiAgICBzYW5Mb3NzOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQw6lyZGlkYSBkZSBjb3JkdXJhfFDDqXJkaWRhIGRlIENPUicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88c2FuTG9zcz4nICtcbiAgICAgIGtleXMuZXMuc2FuTG9zc05vbmUgK1xuICAgICAgJ3xcXFxcZEQ/WytcXFxcZF0qXFxcXC9cXFxcZEQ/WytcXFxcZF0qKVssXFxcXHNcXG5dKicsXG4gICAgd2VhcG9uOlxuICAgICAgJyhefFxcXFxuKSg/PG5hbWU+Wy5cXFxcdCAnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKykoXFxcXCoqLD9cXFxccyt8XFxcXCopKD86XFxcXCh8KD88cGVyY2VudGFnZT5cXFxcZCspJSw/KD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpXFxcXHMqLD8pPyk/KFxcXFxzKicgK1xuICAgICAgJ2Rhw7FvJyArXG4gICAgICAnKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQrZCk/XFxcXGQrKFxcXFxzKi9cXFxccyp8XFxcXHMqWystXVxcXFxzKig/OicgK1xuICAgICAga2V5cy5lcy5mdWxsZGIgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZXMuaGFsZmRiICtcbiAgICAgICcpXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooOj9cXFxcZCtkKT9cXFxcZCspKikrKVxcXFwpPycsXG4gICAgd2VhcG9uRG9kZ2U6XG4gICAgICAnKD88bmFtZT4nICtcbiAgICAgICdFc3F1aXZhcicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspXFxcXCk/XFxcXHMqJSg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKSk/JyxcbiAgICBza2lsbDpcbiAgICAgICdeKD88bmFtZT5bOlxcXFwqLlxcXFxzJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSsoPzwhJyArXG4gICAgICAnVGhlIHBsYXllciBoYXN8YnV0IHRoZXkgcmVnZW5lcmF0ZScgK1xuICAgICAgJykpXFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspW15kXSU/XFxcXCk/KFxcXFxzKlxcXFwoXFxcXGQrL1xcXFxkK1xcXFwpKT9bXFxcXC4sXT9cXFxccyonLFxuICAgIGd1ZXNzU3RhcnRDb21iYXQ6XG4gICAgICAnKF58KD88ISwpXFxuKSgnICsgJ0NvbWJhdGlyfEFybWFzIGRlIGZ1ZWdvfEJyYXdsfEJpdGUnICsgJyknLFxuICAgIG5hbWU6ICdeKD88bmFtZT5bXFxcXC5cXFxccycgKyBuYW1lQ2hhcmFjdGVycyArICddKylbLFxcXFxzXFxuXSsnLFxuICAgIHNlY3Rpb25zOlxuICAgICAgJygnICtcbiAgICAgIGtleXMuZXMuc2VjdGlvbkNvbWJhdHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZXMuc2VjdGlvblNraWxscyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lcy5zZWN0aW9uTGFuZ2F1Z2VzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVzLnNlY3Rpb25TcGVsbHMgK1xuICAgICAgJyknXG4gIH0sXG4gICd6aC1UVyc6IHtcbiAgICBhZ2U6ICcoPzwhW2Etel0pJyArICdhZ2V85bm06b2hJyArICcoXFxcXHMqOik/XFxcXHMqKD88YWdlPlxcXFxkKylbLFxcXFxzXSonLFxuICAgIC8qIE5FVyBLRVkgQkVMT1cgLSBUUkFOU0xBVElPTiBSRVFVSVJFRCAqL1xuICAgIG9jY3VwYXRpb246XG4gICAgICAnWyxcXFxcc10qJyArICdPY2N1cGF0aW9uJyArICcoXFxcXHMqOik/XFxcXHMrKD88b2NjdXBhdGlvbj4uKylbLFxcXFxzXFxuXSonLFxuICAgIHN0cjogJyg/PCFbYS16XSknICsgJ1NUUnzlipvph48nICsgJyhcXFxccyo6KT9cXFxccyooPzxzdHI+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBjb246ICcoPzwhW2Etel0pJyArICdDT0586auU6LOqJyArICcoXFxcXHMqOik/XFxcXHMqKD88Y29uPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnU0lafOmrlOWeiycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHNpej5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGludDogJyg/PCFbYS16XSknICsgJ0lOVHzmmbrlipsnICsgJyhcXFxccyo6KT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBwb3c6ICcoPzwhW2Etel0pJyArICdQT1d85oSP5b+XJyArICcoXFxcXHMqOik/XFxcXHMqKD88cG93PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGV4OiAnKD88IVthLXpdKScgKyAnREVYfOaVj+aNtycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGRleD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGFwcDogJyg/PCFbYS16XSknICsgJ0FQUHzlpJboso4nICsgJyhcXFxccyo6KT9cXFxccyooPzxhcHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBlZHU6ICcoPzwhW2Etel0pJyArICdFRFV85pWZ6IKyJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZWR1PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2FuOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdTQU58U2FuaXR5fOeQhuaZuicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaHA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ0hQfEhpdCBwb2ludHN855Sf5ZG9JyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxocD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIG1wOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdNUHxNYWdpYyBwb2ludHMnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PG1wPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGI6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAga2V5c1snemgtVFcnXS5mdWxsZGIgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88ZGI+WystXT9cXFxcZCsoPzpkXFxcXGQrfERcXFxcZCspP3wnICtcbiAgICAgIGtleXNbJ3poLVRXJ10uZGJOb25lICtcbiAgICAgICcpWyxcXFxcc1xcbl0qJyxcbiAgICBidWlsZDpcbiAgICAgICcoPzwhW2Etel0pJyArICdCdWlsZHzpq5TmoLwnICsgJyhcXFxccyo6KT9cXFxccyooPzxidWlsZD5bKy1dP1xcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGFybW9yOlxuICAgICAgJyg/PCFbYS16XSknICtcbiAgICAgICdBcm1vcnzorbfnlLInICtcbiAgICAgICcoXFxcXHMqOik/XFxcXHMqKD88YXJtb3I+JyArXG4gICAgICBrZXlzWyd6aC1UVyddLmFybW9yTm9uZSArXG4gICAgICAnfFxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIG1vdjogJyg/PCFbYS16XSknICsgJ01vdmUnICsgJyhcXFxccyo6KT9cXFxccyooPzxtb3Y+XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbGNrOiAnKD88IVthLXpdKScgKyAnTHVja3zlubjpgYsnICsgJyhcXFxccyo6KT9cXFxccyooPzxsY2s+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhdHRhY2tzUGVyUm91bmQ6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ0F0dGFja3MgcGVyIHJvdW5kfCMgQXR0YWNrc3zmlLvmk4rmrKHmlbh8IyDmlLvmk4onICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PGF0dGFja3NQZXJSb3VuZD4nICtcbiAgICAgIGtleXNbJ3poLVRXJ10uYXR0YWNrc1BlclJvdW5kTm9uZSArXG4gICAgICAnfFxcXFxkKyg/IWQpKVssXFxcXHNcXG5dKicsXG4gICAgc2FuTG9zczpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnU2FuaXR5IGxvc3N8U0FOIGxvc3N855CG5pm65Zaq5aSxfFNBTuWAvOaQjeWksXxTQU7lgLzllqrlpLF85omjU0FOJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxzYW5Mb3NzPicgK1xuICAgICAga2V5c1snemgtVFcnXS5zYW5Mb3NzTm9uZSArXG4gICAgICAnfFxcXFxkRD9bK1xcXFxkXSpcXFxcL1xcXFxkRD9bK1xcXFxkXSopWyxcXFxcc1xcbl0qJyxcbiAgICB3ZWFwb246XG4gICAgICAnKF58XFxcXG4pKD88bmFtZT5bLlxcXFx0ICcgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKShcXFxcKiosP1xcXFxzK3xcXFxcKikoPzpcXFxcKHwoPzxwZXJjZW50YWdlPlxcXFxkKyklLD8oPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXClcXFxccyosPyk/KT8oXFxcXHMqKD86JyArXG4gICAgICAnZGFtYWdlfOWCt+WusycgK1xuICAgICAgJykpP1xcXFxzKyg/PGRhbWFnZT4oOj8oOj9cXFxcZCtkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXG4gICAgICBrZXlzWyd6aC1UVyddLmZ1bGxkYiArXG4gICAgICAnfCcgK1xuICAgICAga2V5c1snemgtVFcnXS5oYWxmZGIgK1xuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2QpP1xcXFxkKykqKSspXFxcXCk/JyxcbiAgICB3ZWFwb25Eb2RnZTpcbiAgICAgICcoPzxuYW1lPicgK1xuICAgICAgJ0RvZGdlfOmWg+mBv3zploPourInICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVxcXFwpP1xcXFxzKiU/KD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpKT8nLFxuICAgIHNraWxsOlxuICAgICAgJ14oPzxuYW1lPls6XFxcXCouXFxcXHMnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKyg/PCEnICtcbiAgICAgICdUaGUgcGxheWVyIGhhc3xidXQgdGhleSByZWdlbmVyYXRlJyArXG4gICAgICAnKSlcXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylbXmRdJT9cXFxcKT8oXFxcXHMqXFxcXChcXFxcZCsvXFxcXGQrXFxcXCkpP1tcXFxcLixdP1xcXFxzKicsXG4gICAgZ3Vlc3NTdGFydENvbWJhdDogJyhefCg/PCEsKVxcbikoJyArICfov5HmiLDmioDog7185bCE5pOK5oqA6IO9fEJyYXdsfEJpdGUnICsgJyknLFxuICAgIG5hbWU6ICdeKD88bmFtZT5bXFxcXC5cXFxccycgKyBuYW1lQ2hhcmFjdGVycyArICddKylbLFxcXFxzXFxuXSsnLFxuICAgIHNlY3Rpb25zOlxuICAgICAgJygnICtcbiAgICAgIGtleXNbJ3poLVRXJ10uc2VjdGlvbkNvbWJhdHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXNbJ3poLVRXJ10uc2VjdGlvblNraWxscyArXG4gICAgICAnfCcgK1xuICAgICAga2V5c1snemgtVFcnXS5zZWN0aW9uTGFuZ2F1Z2VzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzWyd6aC1UVyddLnNlY3Rpb25TcGVsbHMgK1xuICAgICAgJyknXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvQzdBY3RvckltcG9ydGVyUmVnRXhwIHtcbiAgc3RhdGljIGNoZWNrTGFuZ3VhZ2UgKGxhbmcgPSBudWxsKSB7XG4gICAgaWYgKCFsYW5nKSB7XG4gICAgICBsYW5nID0gZ2FtZS5pMThuLmxhbmdcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0cmFuc2xhdGlvbnNbbGFuZ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBsYW5nID0gJ2VuJ1xuICAgIH1cbiAgICByZXR1cm4gbGFuZ1xuICB9XG5cbiAgc3RhdGljIGdldEV4YW1wbGVUZXh0IChsYW5nKSB7XG4gICAgbGV0IGV4YW1wbGUgPSBrZXlzLmVuLmV4YW1wbGVcbiAgICBpZiAodHlwZW9mIGtleXNbbGFuZ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBleGFtcGxlID0ga2V5c1tsYW5nXS5leGFtcGxlXG4gICAgfVxuICAgIHJldHVybiBleGFtcGxlXG4gIH1cblxuICBzdGF0aWMgZ2V0VHJhbnNsYXRpb25zICgpIHtcbiAgICBjb25zdCBvdXRwdXQgPSB7fVxuICAgIGZvciAoY29uc3Qga2V5IGluIGtleXMpIHtcbiAgICAgIG91dHB1dFtrZXldID0ga2V5c1trZXldLmRlc2NyaXB0aW9uXG4gICAgfVxuICAgIHJldHVybiBvdXRwdXRcbiAgfVxuXG4gIHN0YXRpYyBnZXRLZXlzIChsYW5nKSB7XG4gICAgcmV0dXJuIGtleXNbbGFuZ10gfHwga2V5cy5lblxuICB9XG5cbiAgc3RhdGljIGdldFJlZ3VsYXJFeHByZXNzaW9ucyAobGFuZykge1xuICAgIHJldHVybiB0cmFuc2xhdGlvbnNbbGFuZ10gfHwgdHJhbnNsYXRpb25zLmVuXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBBY3RvciwgQ09ORklHLCBkdXBsaWNhdGUsIEZvbGRlciwgZ2FtZSwgdWkgKi9cbmltcG9ydCB7IENvQzdBY3RvckltcG9ydGVyUmVnRXhwIH0gZnJvbSAnLi9hY3Rvci1pbXBvcnRlci1yZWdleHAuanMnXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbXMvaXRlbS5qcydcblxuLyoqXG4gKiBDb0M3QWN0b3JJbXBvcnRlciBoZWxwZXIgY2xhc3MgdG8gaW1wb3J0IGFuIEFjdG9yIGZyb20gdGhlIHJhdyB0ZXh0IGRlc2NyaXB0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgQ29DN0FjdG9ySW1wb3J0ZXIge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5wYXJzZWQgPSB7fVxuICAgIHRoaXMuaXRlbUxvY2F0aW9ucyA9ICcnXG4gIH1cblxuICBzdGF0aWMgZ2V0IGFzTnVtYmVyICgpIHtcbiAgICByZXR1cm4gJ24nXG4gIH1cblxuICBzdGF0aWMgZ2V0IGFzU3RyaW5nICgpIHtcbiAgICByZXR1cm4gJ3MnXG4gIH1cblxuICAvKipcbiAgICogZ2V0UmVnRXgsIGdldCBSZWdFeHAgb2JqZWN0IGlmIG5vdCBjdXJyZW50bHkgYSBSZWdFeHAgb2JqZWN0XG4gICAqIEBwYXJhbSB7TWl4ZWR9IHJlZ2V4IFJlZ0V4cCBvciBzdHJpbmdcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1vZGlmaWVycyBpZiBzdHJpbmcgd2FzIHN1cHBsaWVkIGluIHJlZ2V4IGxpc3Qgb2YgbW9kaWZpZXJzIHRvIGFkZCB0byB0aGUgUmVnRXhwXG4gICAqIEByZXR1cm5zIHtSZWdFeHB9XG4gICAqL1xuICBnZXRSZWdFeCAocmVnZXgsIG1vZGlmaWVycyA9ICdpdScpIHtcbiAgICBpZiAocmVnZXguY29uc3RydWN0b3I/Lm5hbWUgPT09ICdSZWdFeHAnKSB7XG4gICAgICByZXR1cm4gcmVnZXhcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAocmVnZXgsIG1vZGlmaWVycylcbiAgfVxuXG4gIC8qKlxuICAgKiBjbGVhblN0cmluZywgcmVtb3ZlcyBuZXcgbGluZSBhbmQgY2FycmllciByZXR1cm4gY2hhcmFjdGVyIGFuZCBsYXRlcmFsIHNwYWNlcyBmcm9tIGEgc3RyaW5nXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzIHRoZSBzdHJpbmcgdG8gY2xlYW5cbiAgICogQHJldHVybnMge1N0cmluZ30gdGhlIGNsZWFuZWQgc3RyaW5nXG4gICAqL1xuICBjbGVhblN0cmluZyAocykge1xuICAgIHJldHVybiBzXG4gICAgICAucmVwbGFjZSgvKFxcbnxcXHIpL2csICcgJylcbiAgICAgIC5yZXBsYWNlKC9eXFxzKi8sICcnKVxuICAgICAgLnJlcGxhY2UoL1xccypcXC4/XFxzKlxcLj8kLywgJycpXG4gIH1cblxuICAvKipcbiAgICogdHJhbnNsYXRlUm9sbCwgdHJhbnNsYXRlcyBsYW5ndWFnZSBzcGVjaWZpYyBzaG9ydGZvcm0gb2YgZGljZSAoRCkgaW4gcm9sbHNcbiAgICogRXhhbXBsZSBmb3IgR2VybWFuIHJvbGxzOiAxVzQgPT4gMUQ0LlxuICAgKiBEaWNlIHNob3J0Zm9ybSBpcyBjb25maWd1cmVkIHVzaW5nIGtleXMuZGljZVNob3J0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzIHRoZSByb2xsIHRvIGJlIHRyYW5zbGF0ZWRcbiAgICogQHJldHVybnMge1N0cmluZ30gdGhlIHRyYW5zbGF0ZWQgcm9sbFxuICAgKi9cbiAgdHJhbnNsYXRlUm9sbCAocykge1xuICAgIGlmICh0eXBlb2YgcyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiBzXG4gICAgaWYgKHR5cGVvZiB0aGlzLmtleXMuZGljZVNob3J0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3QgcmVnRXggPSBuZXcgUmVnRXhwKFxuICAgICAgICAnKD88bjE+XFxcXGQrKScgKyB0aGlzLmtleXMuZGljZVNob3J0ICsgJyg/PG4yPlxcXFxkKyknLFxuICAgICAgICAnaXVnJ1xuICAgICAgKVxuICAgICAgcmV0dXJuIHMucmVwbGFjZShyZWdFeCwgJyQ8bjE+RCQ8bjI+JylcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHNcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogdG9IVE1MLCBjb252ZXJ0cyBhIHN0cmluZyB0byBIVE1MIHN0cmlwaW5nIG91dCBlbXB0eSBsaW5lcyBvciBsaW5lcyB0aGF0IGNvbnRhaW4ganVzdCAsIG9yIC5cbiAgICogQHBhcmFtIHtTdHJpbmd9IHMgdGhlIHN0cmluZyB0byBjb252ZXJ0XG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IHRoZSBIVE1MIG9yIGFuIGVtcHR5IHN0cmluZ1xuICAgKi9cbiAgdG9IVE1MIChzKSB7XG4gICAgaWYgKHMudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuICcnXG4gICAgfVxuICAgIHMgPSBzXG4gICAgICAudHJpbSgpXG4gICAgICAuc3BsaXQoJ1xcbicpXG4gICAgICAubWFwKHRleHQgPT4gdGV4dC50cmltKCkucmVwbGFjZSgvXlssLlxcc10rJC8sICcnKSlcbiAgICAgIC5maWx0ZXIodGV4dCA9PiB0ZXh0KVxuICAgICAgLmpvaW4oJzwvcD48cD4nKVxuICAgIGlmIChzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuICcnXG4gICAgfVxuICAgIHJldHVybiAnPHA+JyArIHMgKyAnPC9wPidcbiAgfVxuXG4gIC8qKlxuICAgKiBjaGVjayBleHBlY3RzIGEga2V5IGZyb20gdGhpcy5yZWdFeCB3aWxsIGF0dGVtcHQgdG8gbWF0Y2ggdGhlIHRleHRcbiAgICogQHBhcmFtIHtTdHJpbmd9IHJlZ0V4S2V5IGtleSBpbiB0aGlzLnJlZ0V4XG4gICAqIEBwYXJhbSB7SlNPTn1cbiAgICogLSByZW1vdmVGcm9tVGV4dCByZW1vdmUgZnJvbSB0aGlzLnRleHRcbiAgICogLSBzYXZlS2V5cyBhZGQgZ3JvdXAga2V5cyB0byB0aGlzLnBhcnNlZFxuICAgKiAtIHR5cGUgSWYgYWRkaW5nIHdpdGggc2F2ZUtleXMgc2V0IHR5cGUgKENvQzdBY3RvckltcG9ydGVyLmFzU3RyaW5nIC8gQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIpXG4gICAqIC0gdGV4dCBJZiBzZXQgdXNlIHRoaXMgaW5zdGVhZCBvZiB0aGlzLnRleHRcbiAgICogLSByZXF1aXJlZEdyb3VwIElmIG5vdCBmYWxzZSByZXF1aXJlIHNwZWNpZmllZCBrZXkgaW4gUmVnRXhwIGdyb3Vwc1xuICAgKiBAcmV0dXJucyB7RmFsc2V9L3tKU09OIGdyb3VwcyAnJyBpcyBtYXRjaGVkIHN0cmluZ31cbiAgICovXG4gIGNoZWNrIChcbiAgICByZWdFeEtleSxcbiAgICB7XG4gICAgICByZW1vdmVGcm9tVGV4dCA9IHRydWUsXG4gICAgICBzYXZlS2V5cyA9IHRydWUsXG4gICAgICB0eXBlID0gQ29DN0FjdG9ySW1wb3J0ZXIuYXNTdHJpbmcsXG4gICAgICB0ZXh0ID0gZmFsc2UsXG4gICAgICByZXF1aXJlZEdyb3VwID0gZmFsc2VcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgbGV0IG91dHB1dCA9IGZhbHNlXG4gICAgbGV0IHJlZ0V4cCA9IGZhbHNlXG4gICAgaWYgKHR5cGVvZiB0aGlzLnJlZ0V4W3JlZ0V4S2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJlZ0V4cCA9IHRoaXMuZ2V0UmVnRXgodGhpcy5yZWdFeFtyZWdFeEtleV0pXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5rZXlzW3JlZ0V4S2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJlZ0V4cCA9IHRoaXMuZ2V0UmVnRXgodGhpcy5rZXlzW3JlZ0V4S2V5XSlcbiAgICB9XG4gICAgaWYgKHJlZ0V4cCAhPT0gZmFsc2UpIHtcbiAgICAgIGlmICh0ZXh0ID09PSBmYWxzZSkge1xuICAgICAgICB0ZXh0ID0gdGhpcy50ZXh0XG4gICAgICB9XG4gICAgICBjb25zdCBjaGVjayA9IHJlZ0V4cC5leGVjKHRleHQpXG4gICAgICBsZXQgdmFsdWUgPSBudWxsXG4gICAgICBpZiAoXG4gICAgICAgIGNoZWNrICE9PSBudWxsICYmXG4gICAgICAgIChyZXF1aXJlZEdyb3VwID09PSBmYWxzZSB8fFxuICAgICAgICAgIHR5cGVvZiAoY2hlY2suZ3JvdXBzIHx8IHt9KVtyZXF1aXJlZEdyb3VwXSAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgICApIHtcbiAgICAgICAgb3V0cHV0ID0gY2hlY2suZ3JvdXBzIHx8IHt9XG4gICAgICAgIGlmIChyZW1vdmVGcm9tVGV4dCkge1xuICAgICAgICAgIHRoaXMudGV4dCA9IHRoaXMudGV4dC5yZXBsYWNlKGNoZWNrWzBdLnRyaW0oKSwgJ1xcbicpLnRyaW0oKVxuICAgICAgICB9XG4gICAgICAgIGlmIChzYXZlS2V5cykge1xuICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGNoZWNrLmdyb3VwcykpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIENvQzdBY3RvckltcG9ydGVyLmFzU3RyaW5nOlxuICAgICAgICAgICAgICAgIHRoaXMucGFyc2VkW2tleV0gPSBTdHJpbmcoY2hlY2suZ3JvdXBzW2tleV0pLnJlcGxhY2UoJ1xcbicsICcgJylcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICBjYXNlIENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyOlxuICAgICAgICAgICAgICAgIHZhbHVlID0gTnVtYmVyKGNoZWNrLmdyb3Vwc1trZXldKVxuICAgICAgICAgICAgICAgIGlmICghaXNOYU4odmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZFtrZXldID0gTnVtYmVyKGNoZWNrLmdyb3Vwc1trZXldKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvdXRwdXRbJy1zb3VyY2UnXSA9IGNoZWNrWzBdXG4gICAgICAgIG91dHB1dFsnLWluZGV4J10gPSBjaGVjay5pbmRleFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0XG4gIH1cblxuICAvKipcbiAgICogcHJvY2Vzc0NvbWJhdCBleHRyYWN0cyBjb21iYXQgLyBkb2RnZSBpbmZvcm1hdGlvbiBmcm9tIGEgc3Vic2VjdGlvbiBvZiB0ZXh0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IHRoZSByYXcgdGV4dCBvZiB0aGUgY29tYmF0IHNlY3Rpb25cbiAgICogQHJldHVybnMgdm9pZFxuICAgKi9cbiAgcHJvY2Vzc0NvbWJhdCAodGV4dCkge1xuICAgIGlmICh0ZXh0LnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5sb2coJ2NvbWJhdCB0ZXh0JywgdGV4dClcbiAgICB9XG4gICAgbGV0IHdlYXBvblxuICAgIGxldCBkb2RnZVxuICAgIGxldCBuZXdsaW5lXG4gICAgbGV0IGxhc3RQZXJjZW50ID0gZmFsc2VcbiAgICBsZXQgbWF4TG9vcHMgPSA0MFxuICAgIGRvIHtcbiAgICAgIG1heExvb3BzLS1cbiAgICAgIHRleHQgPSB0ZXh0LnRyaW0oKVxuICAgICAgaWYgKFxuICAgICAgICAoZG9kZ2UgPSB0aGlzLmNoZWNrKCd3ZWFwb25Eb2RnZScsIHsgc2F2ZUtleXM6IGZhbHNlLCB0ZXh0OiB0ZXh0IH0pKVxuICAgICAgKSB7XG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoZG9kZ2VbJy1zb3VyY2UnXSwgJ1xcbicpXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wYXJzZWQuc2tpbGxzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRoaXMucGFyc2VkLnNraWxscyA9IFtdXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJzZWQuc2tpbGxzLnB1c2goe1xuICAgICAgICAgIG5hbWU6IHRoaXMuY2xlYW5TdHJpbmcoZG9kZ2UubmFtZSksXG4gICAgICAgICAgdmFsdWU6IE51bWJlcihkb2RnZS5wZXJjZW50YWdlKSxcbiAgICAgICAgICBwdXNoOiBmYWxzZVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgKHdlYXBvbiA9IHRoaXMuY2hlY2soJ3dlYXBvbicsIHtcbiAgICAgICAgICBzYXZlS2V5czogZmFsc2UsXG4gICAgICAgICAgdGV4dDogdGV4dCxcbiAgICAgICAgICByZXF1aXJlZEdyb3VwOiBsYXN0UGVyY2VudCA9PT0gZmFsc2UgPyAncGVyY2VudGFnZScgOiBmYWxzZVxuICAgICAgICB9KSlcbiAgICAgICkge1xuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKHdlYXBvblsnLXNvdXJjZSddLCAnXFxuJylcbiAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMuY2xlYW5TdHJpbmcod2VhcG9uLm5hbWUgfHwgJycpXG4gICAgICAgIGxldCBkYW1hZ2UgPSB0aGlzLnRyYW5zbGF0ZVJvbGwodGhpcy5jbGVhblN0cmluZyh3ZWFwb24uZGFtYWdlIHx8ICcnKSlcbiAgICAgICAgY29uc3QgaXNSYW5nZWQgPSAhIShcbiAgICAgICAgICB0aGlzLmNoZWNrKCdoYW5kZ3VuJywge1xuICAgICAgICAgICAgdGV4dDogbmFtZSxcbiAgICAgICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgICAgIHNhdmVLZXlzOiBmYWxzZVxuICAgICAgICAgIH0pIHx8XG4gICAgICAgICAgdGhpcy5jaGVjaygncmlmbGUnLCB7XG4gICAgICAgICAgICB0ZXh0OiBuYW1lLFxuICAgICAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlLFxuICAgICAgICAgICAgc2F2ZUtleXM6IGZhbHNlXG4gICAgICAgICAgfSkgfHxcbiAgICAgICAgICB0aGlzLmNoZWNrKCdzbWInLCB7XG4gICAgICAgICAgICB0ZXh0OiBuYW1lLFxuICAgICAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlLFxuICAgICAgICAgICAgc2F2ZUtleXM6IGZhbHNlXG4gICAgICAgICAgfSkgfHxcbiAgICAgICAgICB0aGlzLmNoZWNrKCdtYWNoaW5lR3VuJywge1xuICAgICAgICAgICAgdGV4dDogbmFtZSxcbiAgICAgICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgICAgIHNhdmVLZXlzOiBmYWxzZVxuICAgICAgICAgIH0pIHx8XG4gICAgICAgICAgdGhpcy5jaGVjaygnbGF1bmNoZWQnLCB7XG4gICAgICAgICAgICB0ZXh0OiBuYW1lLFxuICAgICAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlLFxuICAgICAgICAgICAgc2F2ZUtleXM6IGZhbHNlXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgd2VhcG9uLnBlcmNlbnRhZ2UgIT09IG51bGwgJiZcbiAgICAgICAgICB0eXBlb2Ygd2VhcG9uLnBlcmNlbnRhZ2UgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIGxhc3RQZXJjZW50ID0gTnVtYmVyKHdlYXBvbi5wZXJjZW50YWdlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxhc3RQZXJjZW50ID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGxldCBmb3VuZFxuICAgICAgICBsZXQgYWhkYiA9IGZhbHNlXG4gICAgICAgIGxldCBhZGRiID0gZmFsc2VcbiAgICAgICAgZG8ge1xuICAgICAgICAgIGZvdW5kID0gdGhpcy5nZXRSZWdFeChcbiAgICAgICAgICAgICdcXFxccypbKy1dP1xcXFxzKignICtcbiAgICAgICAgICAgICAgdGhpcy5rZXlzLmhhbGZkYiArXG4gICAgICAgICAgICAgICcpXFxcXHMqKCcgK1xuICAgICAgICAgICAgICB0aGlzLmtleXMuZnVsbGRiICtcbiAgICAgICAgICAgICAgJyk/Wy0rXT9cXFxccyooJyArXG4gICAgICAgICAgICAgIHRoaXMucGFyc2VkLmRiLnJlcGxhY2UoL15bLStdLywgJycpICtcbiAgICAgICAgICAgICAgJyk/J1xuICAgICAgICAgICkuZXhlYyhkYW1hZ2UpXG4gICAgICAgICAgaWYgKGZvdW5kKSB7XG4gICAgICAgICAgICBhaGRiID0gdHJ1ZVxuICAgICAgICAgICAgZGFtYWdlID0gZGFtYWdlLnJlcGxhY2UoZm91bmRbMF0sICcnKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3VuZCA9IHRoaXMuZ2V0UmVnRXgoXG4gICAgICAgICAgICAgICdcXFxccypbKy1dP1xcXFxzKignICtcbiAgICAgICAgICAgICAgICB0aGlzLmtleXMuZnVsbGRiICtcbiAgICAgICAgICAgICAgICAnKVxcXFxzKlstK10/XFxcXHMqKCcgK1xuICAgICAgICAgICAgICAgIHRoaXMucGFyc2VkLmRiLnJlcGxhY2UoL15bLStdLywgJycpICtcbiAgICAgICAgICAgICAgICAnKT8nXG4gICAgICAgICAgICApLmV4ZWMoZGFtYWdlKVxuICAgICAgICAgICAgaWYgKGZvdW5kKSB7XG4gICAgICAgICAgICAgIGFkZGIgPSB0cnVlXG4gICAgICAgICAgICAgIGRhbWFnZSA9IGRhbWFnZS5yZXBsYWNlKGZvdW5kWzBdLCAnJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKGZvdW5kKVxuICAgICAgICBjb25zdCBkYW1hZ2VzID0gZGFtYWdlLnNwbGl0KCcvJylcbiAgICAgICAgY29uc3QgaXNTaG90Z3VuID0gZGFtYWdlcy5sZW5ndGggPT09IDNcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgIHR5cGU6ICd3ZWFwb24nLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHNraWxsOiB7XG4gICAgICAgICAgICAgIGlkOiBsYXN0UGVyY2VudFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHt9LFxuICAgICAgICAgICAgcmFuZ2U6IHtcbiAgICAgICAgICAgICAgbm9ybWFsOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGlzU2hvdGd1biA/IDEwIDogMCxcbiAgICAgICAgICAgICAgICBkYW1hZ2U6IGRhbWFnZXNbMF1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgbG9uZzoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBpc1Nob3RndW4gPyAyMCA6IDAsXG4gICAgICAgICAgICAgICAgZGFtYWdlOiBpc1Nob3RndW4gPyBkYW1hZ2VzWzFdIDogJydcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZXh0cmVtZToge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBpc1Nob3RndW4gPyA1MCA6IDAsXG4gICAgICAgICAgICAgICAgZGFtYWdlOiBpc1Nob3RndW4gPyBkYW1hZ2VzWzJdIDogJydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgc29tZSBvZiB0aGUgcHJvcGVydGllc1xuICAgICAgICBkYXRhLmRhdGEucHJvcGVydGllcy5zaG90Z3VuID0gaXNTaG90Z3VuXG4gICAgICAgIGRhdGEuZGF0YS5wcm9wZXJ0aWVzLnJuZ2QgPSBpc1JhbmdlZCB8fCBpc1Nob3RndW5cbiAgICAgICAgZGF0YS5kYXRhLnByb3BlcnRpZXMubWVsZWUgPSAhZGF0YS5kYXRhLnByb3BlcnRpZXMucm5nZFxuICAgICAgICBkYXRhLmRhdGEucHJvcGVydGllcy5haGRiID0gYWhkYlxuICAgICAgICBkYXRhLmRhdGEucHJvcGVydGllcy5hZGRiID0gYWRkYlxuICAgICAgICBpZiAodHlwZW9mIHRoaXMucGFyc2VkLmF0dGFja3MgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5wYXJzZWQuYXR0YWNrcyA9IFtdXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJzZWQuYXR0YWNrcy5wdXNoKGRhdGEpXG4gICAgICB9IGVsc2UgaWYgKChuZXdsaW5lID0gdGV4dC5tYXRjaCgvXiguKylcXG4vKSkpIHtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShuZXdsaW5lWzBdLCAnXFxuJylcbiAgICAgIH0gZWxzZSBpZiAoKG5ld2xpbmUgPSB0ZXh0Lm1hdGNoKC9eW15cXG5dKyQvKSkpIHtcbiAgICAgICAgdGV4dCA9ICcnXG4gICAgICB9XG4gICAgfSB3aGlsZSAobWF4TG9vcHMgPiAwICYmICghIXdlYXBvbiB8fCAhIWRvZGdlIHx8ICEhdGV4dCkpXG4gICAgaWYgKG1heExvb3BzID09PSAwKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICdVbmV4cGVjdGVkIHdlYXBvbnMgdGV4dCwgcGxlYXNlIHJhaXNlIGEgYnVnIHJlcG9ydCB3aXRoIHRoZSB0ZXh0IHlvdSBhcmUgYXR0ZW1wdGluZyB0byBpbXBvcnQnXG4gICAgICApXG4gICAgICBjb25zb2xlLmRlYnVnKCdVbmV4cGVjdGVkIHdlYXBvbnM6JywgdGV4dClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogcHJvY2Vzc1NraWxscyBleHRyYWN0cyBza2lsbHMgLyBsYW5ndWFnZSBpbmZvcm1hdGlvbiBmcm9tIGEgc3Vic2VjdGlvbiBvZiB0ZXh0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IHRoZSByYXcgdGV4dCBvZiB0aGUgc2tpbGxzIC8gbGFuZ3VhZ2Ugc2VjdGlvblxuICAgKiBAcmV0dXJucyB2b2lkXG4gICAqL1xuICBwcm9jZXNzU2tpbGxzICh0ZXh0LCBrZXkgPSAnc2tpbGxzJykge1xuICAgIGlmICh0ZXh0LnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBicmVha3MgPSB0ZXh0LnNwbGl0KC9cXC5cXHI/XFxuLylcbiAgICBpZiAoYnJlYWtzLmxlbmd0aCA+IDEpIHtcbiAgICAgIHRleHQgPSBicmVha3NbMF1cbiAgICB9XG4gICAgbGV0IHNraWxsXG4gICAgbGV0IG1heExvb3BzID0gNDBcbiAgICBkbyB7XG4gICAgICBtYXhMb29wcy0tXG4gICAgICB0ZXh0ID0gdGV4dC50cmltKClcbiAgICAgIHNraWxsID0gdGhpcy5jaGVjaygnc2tpbGwnLCB7IHNhdmVLZXlzOiBmYWxzZSwgdGV4dDogdGV4dCB9KVxuICAgICAgaWYgKHNraWxsKSB7XG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2Uoc2tpbGxbJy1zb3VyY2UnXSwgJ1xcbicpXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wYXJzZWRba2V5XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLnBhcnNlZFtrZXldID0gW11cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhcnNlZFtrZXldLnB1c2goe1xuICAgICAgICAgIG5hbWU6IHRoaXMuY2xlYW5TdHJpbmcoc2tpbGwubmFtZSksXG4gICAgICAgICAgdmFsdWU6IE51bWJlcihza2lsbC5wZXJjZW50YWdlKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gd2hpbGUgKG1heExvb3BzID4gMCAmJiBza2lsbClcbiAgICBpZiAobWF4TG9vcHMgPT09IDApIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgJ1VuZXhwZWN0ZWQgc2tpbGxzIHRleHQsIHBsZWFzZSByYWlzZSBhIGJ1ZyByZXBvcnQgd2l0aCB0aGUgdGV4dCB5b3UgYXJlIGF0dGVtcHRpbmcgdG8gaW1wb3J0J1xuICAgICAgKVxuICAgICAgY29uc29sZS5kZWJ1ZygnVW5leHBlY3RlZCBza2lsbHM6JywgdGV4dClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogcHJvY2Vzc1NwZWxscyBleHRyYWN0cyBzcGVsbCBpbmZvcm1hdGlvbiBmcm9tIGEgc3Vic2VjdGlvbiBvZiB0ZXh0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IHRoZSByYXcgdGV4dCBvZiB0aGUgc3BlbGwgc2VjdGlvblxuICAgKiBAcmV0dXJucyB2b2lkXG4gICAqL1xuICBwcm9jZXNzU3BlbGxzICh0ZXh0KSB7XG4gICAgaWYgKHRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGJyZWFrcyA9IHRleHQuc3BsaXQoL1xcLlxccj9cXG4vKVxuICAgIGlmIChicmVha3MubGVuZ3RoID4gMSkge1xuICAgICAgdGV4dCA9IGJyZWFrc1swXVxuICAgIH1cbiAgICBjb25zdCBzcGVsbHNBcnIgPSB0ZXh0LnJlcGxhY2UoLyhbXFxuXFxyXSspL2csICcgJykuc3BsaXQoLyg/PCFcXChbXildKyksLylcbiAgICB0aGlzLnRleHQgPSB0aGlzLnRleHQucmVwbGFjZSh0ZXh0LnRyaW0oKSwgJ1xcbicpXG4gICAgZm9yIChjb25zdCBzcGVsbCBvZiBzcGVsbHNBcnIpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5wYXJzZWQuc3BlbGxzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLnBhcnNlZC5zcGVsbHMgPSBbXVxuICAgICAgfVxuICAgICAgdGhpcy5wYXJzZWQuc3BlbGxzLnB1c2godGhpcy5jbGVhblN0cmluZyhzcGVsbCkpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHBhcnNlQ2hhcmFjdGVyIGV4dHJhY3RzIGluZm9ybWF0aW9uIGZyb20gdGhlIHJhdyB0ZXh0IGRlc2NyaXB0aW9uIG9mIGFuIGVudGl0eSAoTlBDIG9yIENyZWF0dXJlKVxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCB0aGUgcmF3IHRleHQgb2YgdGhlIGVudGl0eVxuICAgKiBAcmV0dXJucyBleHRyYWN0ZWREYXRhIG9iamVjdCB3aXRoIHRoZSBlbnRpdHkgZGF0YVxuICAgKi9cbiAgYXN5bmMgcGFyc2VDaGFyYWN0ZXIgKHRleHQpIHtcbiAgICAvLyBSZXBsYWNlIFwiRW4gRGFzaFwiIGFuZCBcIkVtIERhc2hcIiBkYXNoZXMgd2l0aCAtIGFuZCBcIlJpZ2h0IFNpbmdsZSBRdW90YXRpb24gTWFya1wiIHdpdGggJ1xuICAgIHRoaXMudGV4dCA9IFN0cmluZyh0ZXh0KVxuICAgICAgLnRyaW0oKVxuICAgICAgLnJlcGxhY2UoL1xcdTIwMTN8XFx1MjAxNHxcXHUyMjEyL2csICctJylcbiAgICAgIC5yZXBsYWNlKC9cXHUyMDE5L2csIFwiJ1wiKVxuICAgICAgLnJlcGxhY2UoL1tcXHVkYmMwLVxcdWRiZmVdW1xcdWRjMDAtXFx1ZGZmZl0vZywgJycpXG4gICAgLy8gRWFybGllc3QgY2hhcmFjdGVyIHRoYXQgaGFzIGJlZW4gdXNlZCwgdG8gd29yayBvdXQgdGhlIGhlYWRlclxuICAgIGxldCBtaW4gPSB0aGlzLnRleHQubGVuZ3RoXG4gICAgLy8gU1RSLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGxldCBjaGVjayA9IHRoaXMuY2hlY2soJ3N0cicsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlbXG4gICAgICAnLWluZGV4J1xuICAgIF1cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gQ09OLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnY29uJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gU0laLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnc2l6JywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gSU5ULCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnaW50JywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gUE9XLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygncG93JywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gREVYLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnZGV4JywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gQVBQLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnYXBwJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gRURVLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnZWR1JywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gU0FOLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnc2FuJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gSFAsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdocCcsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlbJy1pbmRleCddXG4gICAgaWYgKCFpc05hTihjaGVjaykpIHtcbiAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgY2hlY2spXG4gICAgfVxuICAgIC8vIE1QLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnbXAnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBXb3JrIG91dCB0aGUgaGVhZGVyIGJhc2VkIG9uIHByZXZpb3VzIG1pbmltdW0gbWF0Y2hlZCBjaGFyYWN0ZXJcbiAgICBsZXQgaGVhZGVyXG4gICAgaWYgKG1pbiA+IDApIHtcbiAgICAgIGhlYWRlciA9IHRoaXMudGV4dC5zdWJzdHIoMCwgbWluKVxuICAgICAgLy8gR2V0IG5hbWUgZnJvbSBoZWFkZXJcbiAgICAgIGNoZWNrID0gdGhpcy5jaGVjaygnbmFtZScsIHsgdGV4dDogaGVhZGVyIH0pXG4gICAgICBpZiAoY2hlY2sgPT09IGZhbHNlKSB7XG4gICAgICAgIC8vIElmIG5vdCBmb3VuZCB1c2UgZGVmYXVsdCBOUEMgbmFtZVxuICAgICAgICB0aGlzLnBhcnNlZC5uYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkltcG9ydGVkVW5uYW1lZENoYXJhY3RlcicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSZW1vdmUgbmFtZSBmcm9tIGhlYWRlclxuICAgICAgICBoZWFkZXIgPSBoZWFkZXIucmVwbGFjZShjaGVja1snLXNvdXJjZSddLCAnXFxuJylcbiAgICAgIH1cbiAgICAgIC8vIEdldCBhZ2UgZnJvbSBoZWFkZXJcbiAgICAgIGNoZWNrID0gdGhpcy5jaGVjaygnYWdlJywgeyB0ZXh0OiBoZWFkZXIgfSlcbiAgICAgIGlmIChjaGVjayAhPT0gZmFsc2UpIHtcbiAgICAgICAgLy8gSWYgZm91bmQgcmVtb3ZlIGFnZSBmcm9tIGhlYWRlclxuICAgICAgICBoZWFkZXIgPSBoZWFkZXIucmVwbGFjZShjaGVja1snLXNvdXJjZSddLCAnXFxuJylcbiAgICAgIH1cbiAgICAgIC8vIEdldCBvY2N1cGF0aW9uIGZyb20gaGVhZGVyXG4gICAgICBpZiAoIXRoaXMuY2hlY2soJ29jY3VwYXRpb24nLCB7IHRleHQ6IGhlYWRlciB9KSAmJiBoZWFkZXIudHJpbSgpICE9PSAnJykge1xuICAgICAgICAvLyBJZiBvY2N1cGF0aW9uIGlzIG5vdCBmb3VuZCBidXQgdGhlcmUgaXMgYSBoZWFkZXIgc2V0IHRoZSBvY2N1cGF0aW9uIHRvIHRoZSByZW1haW5pbmcgaGVhZGVyXG4gICAgICAgIGxldCBvY2N1cGF0aW9uID0gaGVhZGVyXG4gICAgICAgIGlmIChoZWFkZXIuaW5kZXhPZignLicpID4gLTEpIHtcbiAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBhIGZ1bGwgc3RvcCBqdXN0IHVzZSB0aGUgZmlyc3QgcGFydCBvZiB0aGUgaGVhZGVyIGFzIHRoZSBvY2N1cGF0aW9uXG4gICAgICAgICAgb2NjdXBhdGlvbiA9IGhlYWRlci5zdWJzdHIoMCwgaGVhZGVyLmluZGV4T2YoJy4nKSArIDEpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJzZWQub2NjdXBhdGlvbiA9IG9jY3VwYXRpb25cbiAgICAgICAgICAucmVwbGFjZSgvKFtcXG5cXHJdKykvZywgJyAnKVxuICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAucmVwbGFjZSgvLCQvLCAnJylcbiAgICAgICAgdGhpcy50ZXh0ID0gdGhpcy50ZXh0LnJlcGxhY2Uob2NjdXBhdGlvbi50cmltKCksICdcXG4nKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGVyZSBpcyBubyBoZWFkZXIgc2V0IGRlZmF1bHQgTlBDIG5hbWVcbiAgICAgIHRoaXMucGFyc2VkLm5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW1wb3J0ZWRVbm5hbWVkQ2hhcmFjdGVyJylcbiAgICB9XG4gICAgLy8gSWYgdGhlcmUgaXMgYW4gb2NjdXBhdGlvbiBidXQgbm8gYWdlIGNoZWNrIGlmIHRoZSBvY2N1cGF0aW9uIHN0YXJ0cyBudW1iZXIgc3BsaXQgYWdlIGFuZCBvY2N1cGF0aW9uXG4gICAgaWYgKFxuICAgICAgdHlwZW9mIHRoaXMucGFyc2VkLm9jY3VwYXRpb24gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgdGhpcy5wYXJzZWQuYWdlID09PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgY29uc3Qgb2NjdXBhdGlvbkFnZSA9IHRoaXMucGFyc2VkLm9jY3VwYXRpb24ubWF0Y2goXG4gICAgICAgIC9eKD88YWdlPlxcZCspLCg/PG9jY3VwYXRpb24+LispJC9cbiAgICAgIClcbiAgICAgIGlmIChvY2N1cGF0aW9uQWdlKSB7XG4gICAgICAgIHRoaXMucGFyc2VkLmFnZSA9IG9jY3VwYXRpb25BZ2UuZ3JvdXBzLmFnZVxuICAgICAgICB0aGlzLnBhcnNlZC5vY2N1cGF0aW9uID0gb2NjdXBhdGlvbkFnZS5ncm91cHMub2NjdXBhdGlvbi50cmltKClcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gR2V0IGRhbWFnZSBib251cywgaWYgbm90IGZvdW5kIG9yIG5vbmUgc2V0IHRvIDBcbiAgICBpZiAoXG4gICAgICAhdGhpcy5jaGVjaygnZGInKSB8fFxuICAgICAgdGhpcy5jaGVjaygnZGJOb25lJywge1xuICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgIHNhdmVLZXlzOiBmYWxzZSxcbiAgICAgICAgdGV4dDogdGhpcy5wYXJzZWQuZGJcbiAgICAgIH0pXG4gICAgKSB7XG4gICAgICB0aGlzLnBhcnNlZC5kYiA9ICcwJ1xuICAgIH1cbiAgICB0aGlzLnBhcnNlZC5kYiA9IHRoaXMudHJhbnNsYXRlUm9sbCh0aGlzLnBhcnNlZC5kYilcbiAgICAvLyBHZXQgYnVpbGRcbiAgICB0aGlzLmNoZWNrKCdidWlsZCcpXG4gICAgLy8gR2V0IGFybW9yLCBpZiBub3QgZm91bmQgb3Igbm9uZSBzZXQgdG8gMFxuICAgIGlmIChcbiAgICAgICF0aGlzLmNoZWNrKCdhcm1vcicpIHx8XG4gICAgICB0aGlzLmNoZWNrKCdhcm1vck5vbmUnLCB7XG4gICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgc2F2ZUtleXM6IGZhbHNlLFxuICAgICAgICB0ZXh0OiB0aGlzLnBhcnNlZC5hcm1vclxuICAgICAgfSlcbiAgICApIHtcbiAgICAgIHRoaXMucGFyc2VkLmFybW9yID0gJzAnXG4gICAgfVxuICAgIC8vIEdldCBtb3ZlbWVudFxuICAgIHRoaXMuY2hlY2soJ21vdicsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlcbiAgICAvLyBHZXQgbHVja1xuICAgIHRoaXMuY2hlY2soJ2xjaycsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlcbiAgICAvLyBHZXQgc2FuaXR5IGxvc3NcbiAgICB0aGlzLmNoZWNrKCdzYW5Mb3NzJylcbiAgICB0aGlzLnBhcnNlZC5zYW5Mb3NzID0gdGhpcy50cmFuc2xhdGVSb2xsKHRoaXMucGFyc2VkLnNhbkxvc3MpXG4gICAgLy8gR2V0IGF0dGFja3MgcGVyIHJvdW5kLCBpZiBub3QgZm91bmQgb3Igbm9uZSBzZXQgdG8gMFxuICAgIGlmIChcbiAgICAgIHRoaXMuY2hlY2soJ2F0dGFja3NQZXJSb3VuZCcpICYmXG4gICAgICB0aGlzLmNoZWNrKCdhdHRhY2tzUGVyUm91bmROb25lJywge1xuICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgIHNhdmVLZXlzOiBmYWxzZSxcbiAgICAgICAgdGV4dDogdGhpcy5wYXJzZWQuYXR0YWNrc1BlclJvdW5kXG4gICAgICB9KVxuICAgICkge1xuICAgICAgdGhpcy5wYXJzZWQuYXR0YWNrc1BlclJvdW5kID0gJzAnXG4gICAgfVxuICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgY29tYmF0IHNlY3Rpb25cbiAgICB0aGlzLnRleHQgPSAnXFxuJyArIHRoaXMudGV4dFxuICAgIGxldCBzZWN0aW9ucyA9IHRoaXMuZ2V0UmVnRXgoJygnICsgdGhpcy5rZXlzLnNlY3Rpb25Db21iYXRzICsgJyknLCAnaScpXG4gICAgaWYgKHRoaXMudGV4dC5tYXRjaChzZWN0aW9ucykgPT09IG51bGwpIHtcbiAgICAgIC8vIElmIHRoZXJlIGlzIG5vIGNvbWJhdCBzZWN0aW9uIGd1ZXNzIHdoZXJlIGl0IHN0YXJ0c1xuICAgICAgc2VjdGlvbnMgPSB0aGlzLmNoZWNrKCdndWVzc1N0YXJ0Q29tYmF0Jywge1xuICAgICAgICBzYXZlS2V5czogZmFsc2UsXG4gICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZVxuICAgICAgfSlcbiAgICAgIGlmIChzZWN0aW9ucykge1xuICAgICAgICAvLyBBZGQgYSBoZWFkZXIgdG8gdGhlIHN0YXJ0IG9mIHRoZSBjb21iYXQgc2VjdGlvblxuICAgICAgICB0aGlzLnRleHQgPSBbXG4gICAgICAgICAgdGhpcy50ZXh0LnNsaWNlKDAsIHNlY3Rpb25zWyctaW5kZXgnXSksXG4gICAgICAgICAgdGhpcy5rZXlzLm5ld0NvbWJhdEhlYWRlcixcbiAgICAgICAgICB0aGlzLnRleHQuc2xpY2Uoc2VjdGlvbnNbJy1pbmRleCddKVxuICAgICAgICBdLmpvaW4oJycpXG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNwbGl0IHRoZSBzZWN0aW9ucyBDb21iYXQsIFNraWxscywgTGFuZ3VhZ2VzLCBhbmQgU3BlbGxzXG4gICAgY29uc3QgcmVnRXhwU2VjdGlvbnMgPSB0aGlzLmdldFJlZ0V4KHRoaXMucmVnRXguc2VjdGlvbnMsICdpJylcbiAgICBzZWN0aW9ucyA9IHRoaXMudGV4dC5zcGxpdChyZWdFeHBTZWN0aW9ucylcbiAgICBpZiAoc2VjdGlvbnMgIT09IG51bGwpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBpbSA9IHNlY3Rpb25zLmxlbmd0aDsgaSA8IGltOyBpKyspIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHNlY3Rpb25zW2ldLm1hdGNoKFxuICAgICAgICAgICAgdGhpcy5nZXRSZWdFeCgnKCcgKyB0aGlzLmtleXMuc2VjdGlvbkNvbWJhdHMgKyAnKScsICdpJylcbiAgICAgICAgICApICE9PSBudWxsICYmXG4gICAgICAgICAgdHlwZW9mIHNlY3Rpb25zW2kgKyAxXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gSWYgc2VjdGlvbiBpcyBjb21iYXRcbiAgICAgICAgICB0aGlzLnRleHQgPSAoJ1xcbicgKyB0aGlzLnRleHQgKyAnXFxuJylcbiAgICAgICAgICAgIC5yZXBsYWNlKHNlY3Rpb25zW2ldLCAnXFxuJylcbiAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICB0aGlzLnByb2Nlc3NDb21iYXQoc2VjdGlvbnNbaSArIDFdKVxuICAgICAgICAgIGkrK1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIHNlY3Rpb25zW2ldLm1hdGNoKFxuICAgICAgICAgICAgdGhpcy5nZXRSZWdFeCgnKCcgKyB0aGlzLmtleXMuc2VjdGlvblNraWxscyArICcpJywgJ2knKVxuICAgICAgICAgICkgIT09IG51bGwgJiZcbiAgICAgICAgICB0eXBlb2Ygc2VjdGlvbnNbaSArIDFdICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICAvLyBJZiBzZWN0aW9uIGlzIHNraWxsc1xuICAgICAgICAgIHRoaXMudGV4dCA9ICgnXFxuJyArIHRoaXMudGV4dCArICdcXG4nKVxuICAgICAgICAgICAgLnJlcGxhY2Uoc2VjdGlvbnNbaV0sICdcXG4nKVxuICAgICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIHRoaXMucHJvY2Vzc1NraWxscyhzZWN0aW9uc1tpICsgMV0pXG4gICAgICAgICAgaSsrXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgc2VjdGlvbnNbaV0ubWF0Y2goXG4gICAgICAgICAgICB0aGlzLmdldFJlZ0V4KCcoJyArIHRoaXMua2V5cy5zZWN0aW9uTGFuZ2F1Z2VzICsgJyknLCAnaScpXG4gICAgICAgICAgKSAhPT0gbnVsbCAmJlxuICAgICAgICAgIHR5cGVvZiBzZWN0aW9uc1tpICsgMV0gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIElmIHNlY3Rpb24gaXMgbGFuZ3VhZ2VzXG4gICAgICAgICAgdGhpcy50ZXh0ID0gKCdcXG4nICsgdGhpcy50ZXh0ICsgJ1xcbicpXG4gICAgICAgICAgICAucmVwbGFjZShzZWN0aW9uc1tpXSwgJ1xcbicpXG4gICAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgdGhpcy5wcm9jZXNzU2tpbGxzKHNlY3Rpb25zW2kgKyAxXSwgJ2xhbmd1YWdlcycpXG4gICAgICAgICAgaSsrXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgc2VjdGlvbnNbaV0ubWF0Y2goXG4gICAgICAgICAgICB0aGlzLmdldFJlZ0V4KCcoJyArIHRoaXMua2V5cy5zZWN0aW9uU3BlbGxzICsgJyknLCAnaScpXG4gICAgICAgICAgKSAhPT0gbnVsbCAmJlxuICAgICAgICAgIHR5cGVvZiBzZWN0aW9uc1tpICsgMV0gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIElmIHNlY3Rpb24gaXMgc3BlbGxzXG4gICAgICAgICAgdGhpcy50ZXh0ID0gKCdcXG4nICsgdGhpcy50ZXh0ICsgJ1xcbicpXG4gICAgICAgICAgICAucmVwbGFjZShzZWN0aW9uc1tpXSwgJ1xcbicpXG4gICAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgdGhpcy5wcm9jZXNzU3BlbGxzKHNlY3Rpb25zW2kgKyAxXSlcbiAgICAgICAgICBpKytcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBBbnkgcmVtYWluaW5nIHRleHQgYWRkIHRvIEdNIG5vdGVzIHNvIHlvdSBjYW4gZWFzaWx5IHNlZSBpZiB0aGVyZSBhcmUgYW55IG9idmlvdXMgaXNzdWUgb3IganVzdCBnZW5lcmFsIG5vdGVzXG4gICAgdGhpcy5wYXJzZWQuZ21ub3RlcyA9IHRoaXMudG9IVE1MKHRoaXMudGV4dClcbiAgICByZXR1cm4gdGhpcy5wYXJzZWRcbiAgfVxuXG4gIGRpc2FibGVBdHRyaWJBdXRvIChrZXksIGF0dHJpYlZhbHVlLCBjaGVjaywgdXBkYXRlRGF0YSkge1xuICAgIGNvbnN0IHZhbHVlID0gTWF0aC5tYXgoMCwgTnVtYmVyKGF0dHJpYlZhbHVlKSlcbiAgICBpZiAodmFsdWUgIT09IE51bWJlcihjaGVjaykpIHtcbiAgICAgIHVwZGF0ZURhdGFbYGRhdGEuYXR0cmlicy4ke2tleX0uYXV0b2BdID0gZmFsc2VcbiAgICAgIHVwZGF0ZURhdGFbYGRhdGEuYXR0cmlicy4ke2tleX0udmFsdWVgXSA9IHZhbHVlXG4gICAgICBpZiAoa2V5ID09PSAnYnVpbGQnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbYGRhdGEuYXR0cmlicy4ke2tleX0uY3VycmVudGBdID0gdmFsdWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVwZGF0ZURhdGFbYGRhdGEuYXR0cmlicy4ke2tleX0ubWF4YF0gPSB2YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBlbnRpdHkgKGBucGNgIG9yIGBjcmVhdHVyZWApIGZyb20gdGhlIG9iamVjdCB3aXRoIHRoZSBhbHJlYWR5IHBhcnNlZCBlbnRpdHkgZGF0YVxuICAgKiBAcGFyYW0ge09iamVjdH0gY2hhcmFjdGVyRGF0YSBvYmplY3Qgd2l0aCB0aGUgZGF0YSBleHRyYWN0ZWQgZnJvbSB0aGUgY2hhcmFjdGVyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBlbnRpdHlUeXBlU3RyaW5nIGVudGl0eSB0eXBlIG9idGFpbmVkIGZyb20gdGhlIHVzZXIgaW5wdXRcbiAgICogQHJldHVybnMge0FjdG9yfSB0aGUgY3JlYXRlZCBmb3VuZHJ5IGBBY3RvcmBcbiAgICovXG4gIGFzeW5jIGNyZWF0ZUVudGl0eSAoY2hhcmFjdGVyRGF0YSwgZW50aXR5VHlwZSkge1xuICAgIGNvbnN0IGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciA9XG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZUltcG9ydENoYXJhY3RlcnNGb2xkZXJJZk5vdEV4aXN0cygpXG4gICAgaWYgKGVudGl0eVR5cGUgIT09ICducGMnKSB7XG4gICAgICBlbnRpdHlUeXBlID0gJ2NyZWF0dXJlJ1xuICAgIH1cbiAgICBjb25zdCBhY3RvckRhdGEgPSB7XG4gICAgICBuYW1lOiBjaGFyYWN0ZXJEYXRhLm5hbWUsXG4gICAgICB0eXBlOiBlbnRpdHlUeXBlLFxuICAgICAgZm9sZGVyOiBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIuaWQsXG4gICAgICBkYXRhOiBjaGFyYWN0ZXJEYXRhLmFjdG9yXG4gICAgfVxuICAgIGNvbnN0IG5wYyA9IGF3YWl0IEFjdG9yLmNyZWF0ZShhY3RvckRhdGEpXG4gICAgYXdhaXQgbnBjLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgY2hhcmFjdGVyRGF0YS5pdGVtcywge1xuICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgfSlcbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cbiAgICBsZXQgdmFsdWUgPSAwXG4gICAgaWYgKHR5cGVvZiBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMuaHA/LnZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5kaXNhYmxlQXR0cmliQXV0byhcbiAgICAgICAgJ2hwJyxcbiAgICAgICAgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLmhwLnZhbHVlLFxuICAgICAgICBucGMuaHBNYXgsXG4gICAgICAgIHVwZGF0ZURhdGFcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMubXA/LnZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5kaXNhYmxlQXR0cmliQXV0byhcbiAgICAgICAgJ21wJyxcbiAgICAgICAgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLm1wLnZhbHVlLFxuICAgICAgICBucGMubXBNYXgsXG4gICAgICAgIHVwZGF0ZURhdGFcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMubW92Py52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUF0dHJpYkF1dG8oXG4gICAgICAgICdtb3YnLFxuICAgICAgICBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMubW92LnZhbHVlLFxuICAgICAgICBucGMubW92LFxuICAgICAgICB1cGRhdGVEYXRhXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLmJ1aWxkPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUF0dHJpYkF1dG8oXG4gICAgICAgICdidWlsZCcsXG4gICAgICAgIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5idWlsZC52YWx1ZSxcbiAgICAgICAgbnBjLmJ1aWxkLFxuICAgICAgICB1cGRhdGVEYXRhXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLmRiPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhbHVlID0gU3RyaW5nKGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5kYi52YWx1ZSkucmVwbGFjZSgvXlxcK1xccyovLCAnJylcbiAgICAgIGlmICh2YWx1ZSAhPT0gU3RyaW5nKG5wYy5kYikpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnZGF0YS5hdHRyaWJzLmRiLmF1dG8nXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEuYXR0cmlicy5kYi52YWx1ZSddID0gdmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKE9iamVjdC5rZXlzKHVwZGF0ZURhdGEpLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ3VwZGF0ZURhdGE6JywgdXBkYXRlRGF0YSlcbiAgICAgIH1cbiAgICAgIGF3YWl0IG5wYy51cGRhdGUodXBkYXRlRGF0YSlcbiAgICB9XG4gICAgY29uc3QgdXBkYXRlSXRlbURhdGEgPSBbXVxuICAgIGxldCBsYXN0V2VhcG9uU2tpbGwgPSBudWxsXG4gICAgZm9yIChjb25zdCBwYWlyIG9mIHRoaXMud2VhcG9uU2tpbGxzKSB7XG4gICAgICBpZiAocGFpclswXSAhPT0gZmFsc2UpIHtcbiAgICAgICAgbGFzdFdlYXBvblNraWxsID0gbnBjLml0ZW1zLmZpbHRlcihcbiAgICAgICAgICBpID0+XG4gICAgICAgICAgICBpLm5hbWUgPT09IHBhaXJbMF0ubmFtZSAmJlxuICAgICAgICAgICAgaS50eXBlID09PSAnc2tpbGwnICYmXG4gICAgICAgICAgICBOdW1iZXIoaS5kYXRhLmRhdGEudmFsdWUpID09PSBOdW1iZXIocGFpclswXS5kYXRhLnZhbHVlKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBjb25zdCB3ZWFwb24gPSBucGMuaXRlbXMuZmlsdGVyKFxuICAgICAgICBpID0+XG4gICAgICAgICAgaS5uYW1lID09PSBwYWlyWzFdLm5hbWUgJiZcbiAgICAgICAgICBpLnR5cGUgPT09ICd3ZWFwb24nICYmXG4gICAgICAgICAgaS5kYXRhLmRhdGEucmFuZ2Uubm9ybWFsLmRhbWFnZSA9PT0gcGFpclsxXS5kYXRhLnJhbmdlLm5vcm1hbC5kYW1hZ2VcbiAgICAgIClcbiAgICAgIGlmIChsYXN0V2VhcG9uU2tpbGxbMF0gJiYgd2VhcG9uWzBdKSB7XG4gICAgICAgIHVwZGF0ZUl0ZW1EYXRhLnB1c2goe1xuICAgICAgICAgIF9pZDogd2VhcG9uWzBdLmlkLFxuICAgICAgICAgICdkYXRhLnNraWxsLm1haW4uaWQnOiBsYXN0V2VhcG9uU2tpbGxbMF0uaWQsXG4gICAgICAgICAgJ2RhdGEuc2tpbGwubWFpbi5uYW1lJzogbGFzdFdlYXBvblNraWxsWzBdLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHVwZGF0ZUl0ZW1EYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ3VwZGF0ZUl0ZW1EYXRhOicsIHVwZGF0ZUl0ZW1EYXRhKVxuICAgICAgfVxuICAgICAgYXdhaXQgbnBjLnVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgdXBkYXRlSXRlbURhdGEpXG4gICAgfVxuICAgIHJldHVybiBucGNcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgZm9sZGVyIG9uIHRoZSBhY3RvcnMgdGFiIGNhbGxlZCBcIkltcG9ydGVkIENoYXJhY3RlcnNcIiBpZiB0aGUgZm9sZGVyIGRvZXNuJ3QgZXhpc3QuXG4gICAqIEByZXR1cm5zIHtGb2xkZXJ9IHRoZSBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXJcbiAgICovXG4gIGFzeW5jIGNyZWF0ZUltcG9ydENoYXJhY3RlcnNGb2xkZXJJZk5vdEV4aXN0cyAoKSB7XG4gICAgbGV0IGZvbGRlck5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyJylcbiAgICBpZiAoZm9sZGVyTmFtZSA9PT0gJ0NvQzcuSW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyJykge1xuICAgICAgZm9sZGVyTmFtZSA9ICdJbXBvcnRlZCBjaGFyYWN0ZXJzJ1xuICAgIH1cbiAgICBsZXQgaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyID0gZ2FtZS5mb2xkZXJzLmZpbmQoXG4gICAgICBlbnRyeSA9PiBlbnRyeS5kYXRhLm5hbWUgPT09IGZvbGRlck5hbWUgJiYgZW50cnkuZGF0YS50eXBlID09PSAnQWN0b3InXG4gICAgKVxuICAgIGlmIChcbiAgICAgIGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciA9PT0gbnVsbCB8fFxuICAgICAgdHlwZW9mIGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciA9PT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIC8vIENyZWF0ZSB0aGUgZm9sZGVyXG4gICAgICBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPSBhd2FpdCBGb2xkZXIuY3JlYXRlKHtcbiAgICAgICAgbmFtZTogZm9sZGVyTmFtZSxcbiAgICAgICAgdHlwZTogJ0FjdG9yJyxcbiAgICAgICAgcGFyZW50OiBudWxsXG4gICAgICB9KVxuICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JlYXRlZEltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlcicpXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXJcbiAgfVxuXG4gIC8qKlxuICAgKiBhY3RvckRhdGEsIGNvbnZlcnQgcGFyc2VDaGFyYWN0ZXIgZGF0YSBpbnRvIEFjdG9yIGRhdGFcbiAgICogQHBhcmFtIHtPYmplY3R9IHBjIG9iamVjdCB3aXRoIHRoZSBkYXRhIGV4dHJhY3RlZCBmcm9tIHRoZSBjaGFyYWN0ZXIgYXMgcmV0dXJuZWQgZnJvbSBgcGFyc2VDaGFyYWN0ZXJgXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IGZvcm1hdHRlZCBBY3RvciBkYXRhXG4gICAqL1xuICBhY3RvckRhdGEgKHBjKSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIGNoYXJhY3RlcmlzdGljczoge30sXG4gICAgICBhdHRyaWJzOiB7fSxcbiAgICAgIGluZm9zOiB7fSxcbiAgICAgIHNwZWNpYWw6IHt9LFxuICAgICAgZGVzY3JpcHRpb246IHtcbiAgICAgICAga2VlcGVyOiAnJ1xuICAgICAgfSxcbiAgICAgIGZsYWdzOiB7XG4gICAgICAgIGxvY2tlZDogZmFsc2UsXG4gICAgICAgIGRpc3BsYXlGb3JtdWxhOiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbXG4gICAgICAnc3RyJyxcbiAgICAgICdjb24nLFxuICAgICAgJ3NpeicsXG4gICAgICAnZGV4JyxcbiAgICAgICdhcHAnLFxuICAgICAgJ2ludCcsXG4gICAgICAncG93JyxcbiAgICAgICdlZHUnXG4gICAgXSkge1xuICAgICAgaWYgKHR5cGVvZiBwY1trZXldICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBkYXRhLmNoYXJhY3RlcmlzdGljc1trZXldID0ge1xuICAgICAgICAgIHZhbHVlOiBOdW1iZXIocGNba2V5XSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbJ3NhbicsICdtb3YnLCAnYnVpbGQnLCAnYXJtb3InLCAnbGNrJywgJ2hwJywgJ21wJ10pIHtcbiAgICAgIGlmICh0eXBlb2YgcGNba2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZGF0YS5hdHRyaWJzW2tleV0gPSB7XG4gICAgICAgICAgdmFsdWU6IE51bWJlcihwY1trZXldKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcGMuZGIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmF0dHJpYnMuZGIgPSB7XG4gICAgICAgIHZhbHVlOiBwYy5kYlxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbJ2FnZScsICdvY2N1cGF0aW9uJ10pIHtcbiAgICAgIGlmICh0eXBlb2YgcGNba2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZGF0YS5pbmZvc1trZXldID0gcGNba2V5XVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIHBjLnNhbkxvc3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCBbcGFzc2VkLCBmYWlsZWRdID0gcGMuc2FuTG9zcy5zcGxpdCgnLycpXG4gICAgICBkYXRhLnNwZWNpYWwuc2FuTG9zcyA9IHtcbiAgICAgICAgY2hlY2tQYXNzZWQ6IHBhc3NlZCxcbiAgICAgICAgY2hlY2tGYWlsbGVkOiBmYWlsZWRcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwYy5hdHRhY2tzUGVyUm91bmQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLnNwZWNpYWwuYXR0YWNrc1BlclJvdW5kID0gTnVtYmVyKHBjLmF0dGFja3NQZXJSb3VuZClcbiAgICB9XG4gICAgZGF0YS5kZXNjcmlwdGlvbi5rZWVwZXIgPSBwYy5nbW5vdGVzXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ2FjdG9yRGF0YTonLCBkYXRhKVxuICAgIH1cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgLyoqXG4gICAqIGd1ZXNzSXRlbSwgdHJ5IGFuZCBmaW5kIHRoZSBpdGVtIGluIHRoZSBsb2NhdGlvbnMgZGVmaW5lZCBpbiB0aGlzLml0ZW1Mb2NhdGlvbnMgaSA9IEl0ZW0gRGlyZWN0b3J5LCB3ID0gV29ybGQgQ29tcGVuZGl1bXMsIG0gPSBNb2R1bGUgQ29tcGVuZGl1bXMsIHMgPSBTeXN0ZW0gQ29tcGVuZGl1bXNcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgSXRlbSB0eXBlIHRvIGZpbmRcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgTmFtZSBvZiBpdGVtIHRvIGZpbmRcbiAgICogQHBhcmFtIHtPYmplY3R9IGNvbWJhdCBudWxsIChkZWZhdWx0KS4gSWYgYm9vbGVhbiBjb21iYXQgcHJvcGVydHkgb2Ygc2tpbGwgbXVzdCBtYXRjaFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBmb3JtYXR0ZWQgQWN0b3IgZGF0YSBJdGVtIG9yIG51bGxcbiAgICovXG4gIGFzeW5jIGd1ZXNzSXRlbSAodHlwZSwgbmFtZSwgeyBjb21iYXQgPSBudWxsIH0gPSB7fSkge1xuICAgIG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKClcbiAgICBsZXQgZXhpc3RpbmcgPSBudWxsXG4gICAgZm9yIChsZXQgbyA9IDAsIG9NID0gdGhpcy5pdGVtTG9jYXRpb25zLmxlbmd0aDsgbyA8IG9NOyBvKyspIHtcbiAgICAgIHN3aXRjaCAodGhpcy5pdGVtTG9jYXRpb25zLnN1YnN0cihvLCAxKSkge1xuICAgICAgICBjYXNlICdpJzpcbiAgICAgICAgICBleGlzdGluZyA9IGdhbWUuaXRlbXMuZmluZChcbiAgICAgICAgICAgIGl0ZW0gPT5cbiAgICAgICAgICAgICAgaXRlbS5kYXRhLnR5cGUgPT09IHR5cGUgJiZcbiAgICAgICAgICAgICAgaXRlbS5kYXRhLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSAmJlxuICAgICAgICAgICAgICAoY29tYmF0ID09PSBudWxsIHx8IGl0ZW0uZGF0YS5wcm9wZXJ0aWVzLmNvbWJhdCA9PT0gY29tYmF0KVxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICd3JzpcbiAgICAgICAgY2FzZSAnbSc6XG4gICAgICAgIGNhc2UgJ3MnOlxuICAgICAgICAgIGZvciAoY29uc3QgcGFjayBvZiBnYW1lLnBhY2tzKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIHBhY2subWV0YWRhdGEuZW50aXR5ID09PSAnSXRlbScgJiZcbiAgICAgICAgICAgICAgKCh0aGlzLml0ZW1Mb2NhdGlvbnNbb10gPT09ICd3JyAmJlxuICAgICAgICAgICAgICAgIHBhY2subWV0YWRhdGEucGFja2FnZSA9PT0gJ3dvcmxkJykgfHxcbiAgICAgICAgICAgICAgICAodGhpcy5pdGVtTG9jYXRpb25zW29dID09PSAnUycgJiZcbiAgICAgICAgICAgICAgICAgIHBhY2subWV0YWRhdGEucGFja2FnZSA9PT0gJ0NvQzcnKSB8fFxuICAgICAgICAgICAgICAgICh0aGlzLml0ZW1Mb2NhdGlvbnNbb10gPT09ICdzJyAmJlxuICAgICAgICAgICAgICAgICAgIVsnd29ybGQnLCAnQ29DNyddLmluY2x1ZGVzKHBhY2subWV0YWRhdGEucGFja2FnZSkpKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRvY3VtZW50cyA9IGF3YWl0IHBhY2suZ2V0RG9jdW1lbnRzKClcbiAgICAgICAgICAgICAgZXhpc3RpbmcgPSBkb2N1bWVudHMuZmluZChcbiAgICAgICAgICAgICAgICBpdGVtID0+XG4gICAgICAgICAgICAgICAgICBpdGVtLmRhdGEudHlwZSA9PT0gdHlwZSAmJlxuICAgICAgICAgICAgICAgICAgaXRlbS5kYXRhLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSAmJlxuICAgICAgICAgICAgICAgICAgKGNvbWJhdCA9PT0gbnVsbCB8fCBpdGVtLmRhdGEucHJvcGVydGllcy5jb21iYXQgPT09IGNvbWJhdClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBpdGVtc0RhdGEsIGNvbnZlcnQgcGFyc2VDaGFyYWN0ZXIgZGF0YSBpbnRvIEFjdG9yIGl0ZW0gZGF0YVxuICAgKiBAcGFyYW0ge09iamVjdH0gcGMgb2JqZWN0IHdpdGggdGhlIGRhdGEgZXh0cmFjdGVkIGZyb20gdGhlIGNoYXJhY3RlciBhcyByZXR1cm5lZCBmcm9tIGBwYXJzZUNoYXJhY3RlcmBcbiAgICogQHJldHVybnMge09iamVjdH0gZm9ybWF0dGVkIEFjdG9yIGRhdGFcbiAgICovXG4gIGFzeW5jIGl0ZW1zRGF0YSAocGMpIHtcbiAgICBjb25zdCBpdGVtcyA9IFtdXG4gICAgdGhpcy53ZWFwb25Ta2lsbHMgPSBbXVxuICAgIC8vIFdlYXBvbiBza2lsbHNcbiAgICBpZiAodHlwZW9mIHBjLmF0dGFja3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IGF0dGFjayBvZiBwYy5hdHRhY2tzKSB7XG4gICAgICAgIGxldCBza2lsbCA9IGZhbHNlXG4gICAgICAgIGlmIChhdHRhY2suZGF0YT8uc2tpbGw/LmlkICE9PSB0cnVlKSB7XG4gICAgICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLndlYXBvblNraWxsKGF0dGFjaylcbiAgICAgICAgICBpdGVtcy5wdXNoKHNraWxsKVxuICAgICAgICB9XG4gICAgICAgIGF0dGFjay5kYXRhLnNraWxsLmlkID0gbnVsbFxuICAgICAgICBpdGVtcy5wdXNoKGF0dGFjaylcbiAgICAgICAgdGhpcy53ZWFwb25Ta2lsbHMucHVzaChbc2tpbGwsIGF0dGFja10pXG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNraWxsc1xuICAgIGlmICh0eXBlb2YgcGMuc2tpbGxzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCBza2lsbCBvZiBwYy5za2lsbHMpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCB0aGlzLmd1ZXNzSXRlbSgnc2tpbGwnLCBza2lsbC5uYW1lKVxuICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGNsb25lZCA9IGV4aXN0aW5nLnRvT2JqZWN0KClcbiAgICAgICAgICBjbG9uZWQuZGF0YS5iYXNlID0gc2tpbGwudmFsdWVcbiAgICAgICAgICBpZiAodHlwZW9mIHNraWxsLnB1c2ggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjbG9uZWQuZGF0YS5wcm9wZXJ0aWVzLnB1c2ggPSBza2lsbC5wdXNoXG4gICAgICAgICAgfVxuICAgICAgICAgIGl0ZW1zLnB1c2goZHVwbGljYXRlKGNsb25lZCkpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHt9XG4gICAgICAgICAgaWYgKHR5cGVvZiBza2lsbC5wdXNoICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgb3B0aW9ucy5wdXNoID0gc2tpbGwucHVzaFxuICAgICAgICAgIH1cbiAgICAgICAgICBpdGVtcy5wdXNoKENvQ0FjdG9yLmVtcHR5U2tpbGwoc2tpbGwubmFtZSwgc2tpbGwudmFsdWUsIG9wdGlvbnMpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIExhbmd1YWdlc1xuICAgIGlmICh0eXBlb2YgcGMubGFuZ3VhZ2VzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCBza2lsbCBvZiBwYy5sYW5ndWFnZXMpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCB0aGlzLmd1ZXNzSXRlbSgnc2tpbGwnLCBza2lsbC5uYW1lKVxuICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGNsb25lZCA9IGV4aXN0aW5nLnRvT2JqZWN0KClcbiAgICAgICAgICBjbG9uZWQuZGF0YS5iYXNlID0gc2tpbGwudmFsdWVcbiAgICAgICAgICBpdGVtcy5wdXNoKGR1cGxpY2F0ZShjbG9uZWQpKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1zLnB1c2goXG4gICAgICAgICAgICBDb0NBY3Rvci5lbXB0eVNraWxsKHNraWxsLm5hbWUsIHNraWxsLnZhbHVlLCB7XG4gICAgICAgICAgICAgIGltZzogQ29DN0l0ZW0uaWNvbkxhbmd1YWdlLFxuICAgICAgICAgICAgICBzcGVjaWFsaXphdGlvbjogJ0xhbmd1YWdlJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gU3BlbGxzXG4gICAgaWYgKHR5cGVvZiBwYy5zcGVsbHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IG5hbWUgb2YgcGMuc3BlbGxzKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgdGhpcy5ndWVzc0l0ZW0oJ3NwZWxsJywgbmFtZSlcbiAgICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBjbG9uZWQgPSBleGlzdGluZy50b09iamVjdCgpXG4gICAgICAgICAgaXRlbXMucHVzaChkdXBsaWNhdGUoY2xvbmVkKSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtcy5wdXNoKENvQ0FjdG9yLmVtcHR5U3BlbGwobmFtZSkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGl0ZW1zXG4gIH1cblxuICAvKiogd2VhcG9uU2tpbGwgdHJpZXMgdG8gZ3Vlc3Mgd2hhdCBraW5kIG9mIHdlYXBvbiBza2lsbCB0byB1c2UgZm9yIHdlYXBvbiBmcm9tIGl0J3MgbmFtZVxuICAgKiBAcGFyYW0gd2VhcG9uOiBKU09OLCB3ZWFwb24gZGF0YVxuICAgKi9cbiAgYXN5bmMgd2VhcG9uU2tpbGwgKHdlYXBvbikge1xuICAgIGxldCBza2lsbCA9IG51bGxcbiAgICBpZiAodGhpcy5nZXRSZWdFeCgnaGFuZGd1bicpLmV4ZWMod2VhcG9uLm5hbWUpKSB7XG4gICAgICBza2lsbCA9IGF3YWl0IHRoaXMuZ3Vlc3NJdGVtKCdza2lsbCcsICdIYW5kZ3VuJywgeyBjb21iYXQ6IHRydWUgfSlcbiAgICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoYCR7d2VhcG9uLm5hbWV9IHVzZXMgSGFuZGd1biBza2lsbDogJHtza2lsbH1gKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5nZXRSZWdFeCgncmlmbGUnKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnUmlmbGUvU2hvdGd1bicsIHsgY29tYmF0OiB0cnVlIH0pXG4gICAgICBpZiAoIXNraWxsKSB7XG4gICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5ndWVzc0l0ZW0oJ3NraWxsJywgJ1JpZmxlJywgeyBjb21iYXQ6IHRydWUgfSlcbiAgICAgICAgaWYgKCFza2lsbCkge1xuICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5ndWVzc0l0ZW0oJ3NraWxsJywgJ1Nob3RndW4nLCB7IGNvbWJhdDogdHJ1ZSB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgICBjb25zb2xlLmRlYnVnKGAke3dlYXBvbi5uYW1lfSB1c2VzIFJpZmxlIHNraWxsOiAke3NraWxsfWApXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmdldFJlZ0V4KCdzbWInKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnU3VibWFjaGluZSBHdW4nLCB7IGNvbWJhdDogdHJ1ZSB9KVxuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb24ubmFtZX0gdXNlcyBTdWJtYWNoaW5lIEd1biBza2lsbDogJHtza2lsbH1gKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5nZXRSZWdFeCgnbWFjaGluZUd1bicpLmV4ZWMod2VhcG9uLm5hbWUpKSB7XG4gICAgICBza2lsbCA9IGF3YWl0IHRoaXMuZ3Vlc3NJdGVtKCdza2lsbCcsICdNYWNoaW5lIEd1bicsIHsgY29tYmF0OiB0cnVlIH0pXG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgICBjb25zb2xlLmRlYnVnKGAke3dlYXBvbi5uYW1lfSB1c2VzIE1hY2hpbmUgR3VuIHNraWxsOiAke3NraWxsfWApXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmdldFJlZ0V4KCdsYXVuY2hlZCcpLmV4ZWMod2VhcG9uLm5hbWUpKSB7XG4gICAgICBza2lsbCA9IGF3YWl0IHRoaXMuZ3Vlc3NJdGVtKCdza2lsbCcsICdMYXVuY2gnLCB7IGNvbWJhdDogdHJ1ZSB9KVxuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb24ubmFtZX0gdXNlcyBMYXVuY2ggc2tpbGw6ICR7c2tpbGx9YClcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHNraWxsICE9PSBudWxsICYmIHR5cGVvZiBza2lsbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHNraWxsQ2xvbmUgPSBza2lsbC5jbG9uZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB2YWx1ZTogd2VhcG9uLmRhdGE/LnNraWxsPy5pZFxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgcmV0dXJuIHNraWxsQ2xvbmVcbiAgICB9XG4gICAgY29uc3QgZmlyZWFybXMgPSB3ZWFwb24uZGF0YT8ucHJvcGVydGllcz8ucm5nZFxuICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgIHdlYXBvbi5uYW1lLFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICBmaXJlYXJtc1xuICAgICAgICAgID8gJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICA6ICdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgKVxuICAgIClcbiAgICBjb25zdCBuZXdTa2lsbCA9IHtcbiAgICAgIHR5cGU6ICdza2lsbCcsXG4gICAgICBuYW1lOiBwYXJ0cy5uYW1lLFxuICAgICAgZGF0YToge1xuICAgICAgICBza2lsbE5hbWU6IHBhcnRzLnNraWxsTmFtZSxcbiAgICAgICAgc3BlY2lhbGl6YXRpb246IHBhcnRzLnNwZWNpYWxpemF0aW9uLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgc3BlY2lhbDogdHJ1ZSxcbiAgICAgICAgICBmaWdodGluZzogIWZpcmVhcm1zLFxuICAgICAgICAgIGZpcmVhcm06IGZpcmVhcm1zLFxuICAgICAgICAgIGNvbWJhdDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBiYXNlOiB3ZWFwb24uZGF0YT8uc2tpbGw/LmlkLFxuICAgICAgICB2YWx1ZTogd2VhcG9uLmRhdGE/LnNraWxsPy5pZFxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZyhcbiAgICAgICAgYFdlYXBvbiBza2lsbCBub3QgZm91bmQgZm9yICR7d2VhcG9uLm5hbWV9LCBjcmVhdGluZyBhIG5ldyBvbmVgLFxuICAgICAgICBuZXdTa2lsbFxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gbmV3U2tpbGxcbiAgfVxuXG4gIC8qKlxuICAgKiBuZWVkc0NvbnZlcnNpb24gZG9lcyBhbiBldmFsdWF0aW9uIHRvIHNlZSBpZiB0aGUgZ2l2ZW4gbnBjIG5lZWRzIHRvIGJlIGNvbnZlcnRlZCB0byA3dGggRWRpdGlvblxuICAgKiBSZXR1cm5zIGBmYWxzZWAgd2hlbiBhbnkgb2YgdGhlIENoYXJhY3RlcmlzdGljcyB2YWx1ZSBpdCdzIGFib3ZlIDI5XG4gICAqL1xuICBuZWVkc0NvbnZlcnNpb24gKG5wYykge1xuICAgIGxldCBuZWVkc0NvbnZlcnNpb25SZXN1bHQgPSB0cnVlXG4gICAgZm9yIChjb25zdCBrZXkgb2YgW1xuICAgICAgJ3N0cicsXG4gICAgICAnY29uJyxcbiAgICAgICdzaXonLFxuICAgICAgJ2RleCcsXG4gICAgICAnYXBwJyxcbiAgICAgICdpbnQnLFxuICAgICAgJ3BvdycsXG4gICAgICAnZWR1J1xuICAgIF0pIHtcbiAgICAgIGlmICh0eXBlb2YgbnBjW2tleV0gIT09ICd1bmRlZmluZWQnICYmIG5wY1trZXldID4gMzApIHtcbiAgICAgICAgbmVlZHNDb252ZXJzaW9uUmVzdWx0ID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ25lZWRzQ29udmVyc2lvbjonLCBuZWVkc0NvbnZlcnNpb25SZXN1bHQpXG4gICAgfVxuICAgIHJldHVybiBuZWVkc0NvbnZlcnNpb25SZXN1bHRcbiAgfVxuXG4gIC8qKlxuICAgKiBjcmVhdGVBY3RvciBtYWluIG1ldGhvZCB0byBjcmVhdGUgYW4gYEFjdG9yYCBmcm9tIGEgZ2l2ZSB1c2VyIGlucHV0LCB0YWtlcyBvbiBhY2NvdW50IHRoZSBsYW5nLCBlbnRpdHkgdHlwZSxcbiAgICogdGhlIGNvbnZlcnQgdG8gNyBFZGl0aW9uIGZsYWcsIGFuZCB0aGUgcmF3IGVudGl0eSBkYXRhLlxuICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRzIGlucHV0cyBmcm9tIHRoZSBmb3JtIHRvIGNyZWF0ZSBhbiBBY3RvclxuICAgKiBAcmV0dXJucyB7QWN0b3J9IHRoZSBmb3VuZHJ5IGBBY3RvcmAgZnJvbSB0aGUgZ2l2ZW4gYGlucHV0YCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBjcmVhdGVBY3RvciAoaW5wdXRzKSB7XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ2NyZWF0ZUFjdG9yOicsIGlucHV0cylcbiAgICB9XG4gICAgY29uc3QgbGFuZyA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmNoZWNrTGFuZ3VhZ2UoaW5wdXRzLmxhbmcpXG4gICAgdGhpcy5rZXlzID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuZ2V0S2V5cyhsYW5nKVxuICAgIHRoaXMucmVnRXggPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5nZXRSZWd1bGFyRXhwcmVzc2lvbnMobGFuZylcbiAgICB0aGlzLml0ZW1Mb2NhdGlvbnMgPSBpbnB1dHMuc291cmNlXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ1JlZ3VsYXIgRXhwcmVzc2lvbnM6JywgbGFuZywgdGhpcy5rZXlzLCB0aGlzLnJlZ0V4KVxuICAgIH1cbiAgICBsZXQgY2hhcmFjdGVyID0gYXdhaXQgdGhpcy5wYXJzZUNoYXJhY3RlcihpbnB1dHMudGV4dClcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygncGFyc2VDaGFyYWN0ZXI6JywgY2hhcmFjdGVyKVxuICAgIH1cbiAgICBpZiAoXG4gICAgICAoaW5wdXRzLmNvbnZlcnRGcm9tNkUgPT09ICdjb2MtZ3Vlc3MnICYmXG4gICAgICAgIHRoaXMubmVlZHNDb252ZXJzaW9uKGNoYXJhY3RlcikpIHx8XG4gICAgICBpbnB1dHMuY29udmVydEZyb202RSA9PT0gJ2NvYy1jb252ZXJ0J1xuICAgICkge1xuICAgICAgY2hhcmFjdGVyID0gYXdhaXQgdGhpcy5jb252ZXJ0N0UoY2hhcmFjdGVyKVxuICAgIH1cbiAgICBjb25zdCBjaGFyYWN0ZXJEYXRhID0ge1xuICAgICAgbmFtZTogY2hhcmFjdGVyLm5hbWUsXG4gICAgICBhY3RvcjogdGhpcy5hY3RvckRhdGEoY2hhcmFjdGVyKSxcbiAgICAgIGl0ZW1zOiBhd2FpdCB0aGlzLml0ZW1zRGF0YShjaGFyYWN0ZXIpXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBpbnB1dHMudGVzdE1vZGUgIT09ICd1bmRlZmluZWQnICYmIGlucHV0cy50ZXN0TW9kZSA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuIGNoYXJhY3RlckRhdGFcbiAgICB9XG4gICAgY29uc3QgbnBjID0gYXdhaXQgdGhpcy5jcmVhdGVFbnRpdHkoY2hhcmFjdGVyRGF0YSwgaW5wdXRzLmVudGl0eSlcbiAgICByZXR1cm4gbnBjXG4gIH1cblxuICAvKipcbiAgICogY29udmVydDdFIENvbnZlcnRzIHRoZSBnaXZlbiBlbnRpdHkgZnJvbSA2IGVkaXRpb24gdG8gNyBlZGl0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0aGUgZW50aXR5IG9iamVjdCBhcyBvYnRhaW5lZCBmcm9tIGBwYXJzZUNoYXJhY3RlcmBcbiAgICogQHJldHVybiB0aGUgc2FtZSBvYmplY3QgYnV0IHdpdGggdXBkYXRlZCBjaGFyYWN0ZXJpc3RpY3MgZm9yIDcgZWRpdGlvblxuICAgKi9cbiAgYXN5bmMgY29udmVydDdFIChjcmVhdHVyZSkge1xuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdDb252ZXJ0aW5nIG5wYycsIGNyZWF0dXJlKVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbJ3N0cicsICdjb24nLCAnc2l6JywgJ2RleCcsICdhcHAnLCAnaW50JywgJ3BvdyddKSB7XG4gICAgICBpZiAodHlwZW9mIGNyZWF0dXJlW2tleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNyZWF0dXJlW2tleV0gKj0gNVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNyZWF0dXJlLmVkdSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChjcmVhdHVyZS5lZHUgPD0gMTgpIHtcbiAgICAgICAgY3JlYXR1cmUuZWR1ICo9IDVcbiAgICAgIH0gZWxzZSBpZiAoY3JlYXR1cmUuZWR1IDw9IDI2KSB7XG4gICAgICAgIGNyZWF0dXJlLmVkdSA9IGNyZWF0dXJlLmVkdSArIDkwIC0gMThcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNyZWF0dXJlLmVkdSA+PTI4XG4gICAgICAgIGNyZWF0dXJlLmVkdSA9IDk5XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY3JlYXR1cmUuZGIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoY3JlYXR1cmUuZGIgPT09ICctMWQ0Jykge1xuICAgICAgICBjcmVhdHVyZS5kYiA9IC0xXG4gICAgICB9IGVsc2UgaWYgKGNyZWF0dXJlLmRiID09PSAnLTFkNicpIHtcbiAgICAgICAgY3JlYXR1cmUuZGIgPSAtMlxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygnY29udmVydDdFOiAnLCBjcmVhdHVyZSlcbiAgICB9XG4gICAgcmV0dXJuIGNyZWF0dXJlXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDT05GSUcsIERpYWxvZywgZ2FtZSwgSG9va3MsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuXG5pbXBvcnQgeyBDb0M3QWN0b3JJbXBvcnRlciB9IGZyb20gJy4vYWN0b3ItaW1wb3J0ZXIuanMnXG5pbXBvcnQgeyBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cCB9IGZyb20gJy4vYWN0b3ItaW1wb3J0ZXItcmVnZXhwLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdBY3RvckltcG9ydGVyRGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCdvcHRpb25bdmFsdWU9JyArIGdhbWUuaTE4bi5sYW5nICsgJ10nKVxuICAgICAgLmF0dHIoJ3NlbGVjdGVkJywgJ3NlbGVjdGVkJylcbiAgICBodG1sXG4gICAgICAuZmluZCgnI2NvYy1lbnRpdHktbGFuZycpXG4gICAgICAub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICQoJyNjb2MtcGFzdGVkLWNoYXJhY3Rlci1kYXRhJykucHJvcChcbiAgICAgICAgICAncGxhY2Vob2xkZXInLFxuICAgICAgICAgIENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmdldEV4YW1wbGVUZXh0KCQodGhpcykudmFsKCkpXG4gICAgICAgIClcbiAgICAgIH0pXG4gICAgICAudHJpZ2dlcignY2hhbmdlJylcbiAgICBodG1sLmZpbmQoJyNjb2MtcGFzdGVkLWNoYXJhY3Rlci1kYXRhJykub24oJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGNvbnN0IGNoYXJhY3RlcnNUb29FeHRlbmRlZCA9ICQodGhpcylcbiAgICAgICAgLnZhbCgpXG4gICAgICAgIC5tYXRjaCgvW1xcdWRiYzAtXFx1ZGJmZV1bXFx1ZGMwMC1cXHVkZmZmXS8pXG4gICAgICBjb25zdCBwcm9tcHQgPSAkKCcjY29jLXByb21wdCcpXG4gICAgICBpZiAoY2hhcmFjdGVyc1Rvb0V4dGVuZGVkKSB7XG4gICAgICAgIHByb21wdFxuICAgICAgICAgIC5odG1sKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UZXh0RmllbGRJbnZhbGlkQ2hhcmFjdGVycycpKVxuICAgICAgICAgIC5hZGRDbGFzcygnZXJyb3InKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvbXB0XG4gICAgICAgICAgLmh0bWwoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBhc3RlVGhlRGF0YUJlbG93JykpXG4gICAgICAgICAgLnJlbW92ZUNsYXNzKCdlcnJvcicpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcmV0dXJucyBnZXRJbnB1dHMgZXh0cmFjdHMgdGhlIGRhdGEgZnJvbSB0aGUgaW5wdXQgZmllbGRzIGFuZFxuICAgKiBhZGRzIGEgYC5gIGF0IHRoZSBlbmQgaWYgaXQncyBub3QgYWxyZWFkeSB0aGVyZS5cbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXRJbnB1dHMgKCkge1xuICAgIGNvbnN0IGlucHV0cyA9IHt9XG4gICAgaW5wdXRzLmVudGl0eSA9ICQoJyNjb2MtZW50aXR5LXR5cGUnKS52YWwoKS50cmltKClcbiAgICBpbnB1dHMuY29udmVydEZyb202RSA9ICQoJyNjb2MtY29udmVydC02RScpLnZhbCgpLnRyaW0oKVxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdlbnRpdHkgdHlwZTonLCBpbnB1dHMuZW50aXR5KVxuICAgIH1cbiAgICBpbnB1dHMubGFuZyA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmNoZWNrTGFuZ3VhZ2UoXG4gICAgICAkKCcjY29jLWVudGl0eS1sYW5nJykudmFsKCkudHJpbSgpXG4gICAgKVxuICAgIGlucHV0cy5zb3VyY2UgPSAkKCcjc291cmNlJykudmFsKCkudHJpbSgpXG4gICAgbGV0IHRleHQgPSAkKCcjY29jLXBhc3RlZC1jaGFyYWN0ZXItZGF0YScpLnZhbCgpLnRyaW0oKVxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdyZWNlaXZlZCB0ZXh0JywgJyMjJyArIHRleHQgKyAnIyMnKVxuICAgIH1cbiAgICBpZiAodGV4dFt0ZXh0Lmxlbmd0aF0gIT09ICcuJykge1xuICAgICAgdGV4dCArPSAnLicgLy8gQWRkIGEgZG90IGEgdGhlIGVuZCB0byBoZWxwIHRoZSByZWdleCBmaW5kIHRoZSBlbmRcbiAgICB9XG4gICAgaW5wdXRzLnRleHQgPSB0ZXh0XG4gICAgcmV0dXJuIGlucHV0c1xuICB9XG5cbiAgLyoqXG4gICAqIGltcG9ydEFjdG9yIGltcG9ydHMgYW4gQWN0b3IgdXNpbmcgdGhlIGRpYWxvZyBkYXRhXG4gICAqIEBwYXJhbSB7aHRtbH0gaHRtbFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGltcG9ydEFjdG9yIChodG1sKSB7XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ2h0bWwnLCBodG1sKVxuICAgIH1cbiAgICBjb25zdCBpbnB1dHMgPSBhd2FpdCBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZy5nZXRJbnB1dHMoKVxuICAgIGNvbnN0IGFjdG9yID0gbmV3IENvQzdBY3RvckltcG9ydGVyKClcbiAgICBjb25zdCBjcmVhdGVkQWN0b3IgPSBhd2FpdCBhY3Rvci5jcmVhdGVBY3RvcihpbnB1dHMpXG4gICAgLy8gQWN0b3IgY3JlYXRlZCwgTm90aWZ5IHRoZSB1c2VyIGFuZCBzaG93IHRoZSBzaGVldC5cbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygnY3JlYXRlZEFjdG9yOicsIGNyZWF0ZWRBY3RvcilcbiAgICB9XG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgJ0NyZWF0ZWQgJyArXG4gICAgICAgIGNyZWF0ZWRBY3Rvci5kYXRhPy50eXBlPy50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgJzogJyArXG4gICAgICAgIGNyZWF0ZWRBY3Rvci5kYXRhPy5uYW1lXG4gICAgKVxuICAgIGF3YWl0IGNyZWF0ZWRBY3Rvci5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAvLyBjb25zdCB1cGRhdGVkID0gYXdhaXQgVXBkYXRlci51cGRhdGVBY3RvcihucGMpXG4gICAgLy8gY29uc29sZS5kZWJ1ZygndXBkYXRlZDonLCB1cGRhdGVkKVxuICB9XG5cbiAgc3VibWl0IChidXR0b24pIHtcbiAgICBpZiAoYnV0dG9uLmNzc0NsYXNzID09PSAnZ2V0RXhhbXBsZU5vdycpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5nZXRFeGFtcGxlVGV4dChcbiAgICAgICAgJCgnI2NvYy1lbnRpdHktbGFuZyA6c2VsZWN0ZWQnKS52YWwoKVxuICAgICAgKVxuICAgICAgQ29DN1V0aWxpdGllcy5jb3B5VG9DbGlwYm9hcmQoY29udGVudCkudGhlbigoKSA9PiB7XG4gICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmluZm8oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvcGllZCcpKVxuICAgICAgfSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoXG4gICAgICAkKCcjY29jLXBhc3RlZC1jaGFyYWN0ZXItZGF0YScpLnZhbCgpLnRyaW0oKSAhPT0gJycgfHxcbiAgICAgICFidXR0b24uY2FsbGJhY2tcbiAgICApIHtcbiAgICAgIHN1cGVyLnN1Ym1pdChidXR0b24pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGNyZWF0ZSBpdCdzIHRoZSBkZWZhdWx0IHdlYiB0byBjcmF0ZSB0aGUgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2dcbiAgICogQHBhcmFtIHt9IGRhdGEgY2FuIGluY2x1ZGUgYSBgdGl0bGVgIGZvciB0aGUgZGlhbG9nLlxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSA9IHt9KSB7XG4gICAgZGF0YS5sYW5ndWFnZXMgPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5nZXRUcmFuc2xhdGlvbnMoKVxuICAgIGRhdGEubGFuZ3VhZ2UgPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5jaGVja0xhbmd1YWdlKG51bGwpXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9hY3Rvci1pbXBvcnRlci5odG1sJyxcbiAgICAgIGRhdGFcbiAgICApXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IENvQzdBY3RvckltcG9ydGVyRGlhbG9nKFxuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICAgIGltcG9ydDoge1xuICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtZmlsZS1pbXBvcnRcIj48L2k+JyxcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbXBvcnQnKSxcbiAgICAgICAgICAgICAgY2FsbGJhY2s6IENvQzdBY3RvckltcG9ydGVyRGlhbG9nLmltcG9ydEFjdG9yXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0RXhhbXBsZU5vdzoge1xuICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtaW5mby1jaXJjbGVcIj48L2k+JyxcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5nZXRUaGVFeGFtcGxlJylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBubzoge1xuICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtdGltZXNcIj48L2k+JyxcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DYW5jZWwnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnYWN0b3ItaW1wb3J0ZXInXSxcbiAgICAgICAgICB3aWR0aDogNjAwXG4gICAgICAgIH1cbiAgICAgIClcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG5cbkhvb2tzLm9uY2UoJ3JlYWR5JywgKCkgPT4ge1xuICBpZiAoZ2FtZS5tb2R1bGVzLmdldCgnQ29DNy1JbXBvcnRlci1UZXN0cycpPy5hY3RpdmUpIHtcbiAgICB3aW5kb3cuQ29DN0FjdG9ySW1wb3J0ZXIgPSBDb0M3QWN0b3JJbXBvcnRlclxuICB9XG59KVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgZm91bmRyeSwgZ2FtZSwgUGxhY2VhYmxlc0xheWVyICovXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4vY2hhdC5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IENvQzdBY3RvckltcG9ydGVyRGlhbG9nIH0gZnJvbSAnLi9hcHBzL2FjdG9yLWltcG9ydGVyLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdMaW5rQ3JlYXRpb25EaWFsb2cgfSBmcm9tICcuL2FwcHMvbGluay1jcmVhdGlvbi1kaWFsb2cuanMnXG5cbmNsYXNzIENvQzdNZW51TGF5ZXIgZXh0ZW5kcyBQbGFjZWFibGVzTGF5ZXIge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgc3VwZXIoKVxuICAgIHRoaXMub2JqZWN0cyA9IHt9XG4gIH1cblxuICBzdGF0aWMgZ2V0IGxheWVyT3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIubGF5ZXJPcHRpb25zLCB7XG4gICAgICBuYW1lOiAnY29jN21lbnUnLFxuICAgICAgekluZGV4OiA2MFxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgZ2V0IGRvY3VtZW50TmFtZSAoKSB7XG4gICAgcmV0dXJuICdUb2tlbidcbiAgfVxuXG4gIGdldCBwbGFjZWFibGVzICgpIHtcbiAgICByZXR1cm4gW11cbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29DN01lbnUge1xuICBzdGF0aWMgZ2V0QnV0dG9ucyAoY29udHJvbHMpIHtcbiAgICBjYW52YXMuY29jN2dtdG9vbHMgPSBuZXcgQ29DN01lbnVMYXllcigpXG4gICAgY29uc3QgaXNHTSA9IGdhbWUudXNlci5pc0dNXG4gICAgY29udHJvbHMucHVzaCh7XG4gICAgICBuYW1lOiAnY29jN21lbnUnLFxuICAgICAgdGl0bGU6ICdDb0M3LkdtVG9vbHMnLFxuICAgICAgbGF5ZXI6ICdjb2M3Z210b29scycsXG4gICAgICBpY29uOiAnZ2FtZS1pY29uIGdhbWUtaWNvbi10ZW50YWNsZS1zdHJpa2UnLFxuICAgICAgdmlzaWJsZTogaXNHTSxcbiAgICAgIHRvb2xzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0b2dnbGU6IHRydWUsXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS1hbmdsZS1kb3VibGUtdXAnLFxuICAgICAgICAgIG5hbWU6ICdkZXZwaGFzZScsXG4gICAgICAgICAgYWN0aXZlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZXZlbG9wbWVudEVuYWJsZWQnKSxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuRGV2UGhhc2UnLFxuICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jIHRvZ2dsZSA9PiBhd2FpdCBDb0M3VXRpbGl0aWVzLnRvZ2dsZURldlBoYXNlKHRvZ2dsZSlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZmFzIGZhLXVzZXItZWRpdCcsXG4gICAgICAgICAgbmFtZTogJ2NoYXJjcmVhdGUnLFxuICAgICAgICAgIGFjdGl2ZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcpLFxuICAgICAgICAgIHRpdGxlOiAnQ29DNy5DaGFyQ3JlYXRpb25Nb2RlJyxcbiAgICAgICAgICBvbkNsaWNrOiBhc3luYyB0b2dnbGUgPT5cbiAgICAgICAgICAgIGF3YWl0IENvQzdVdGlsaXRpZXMudG9nZ2xlQ2hhckNyZWF0aW9uKHRvZ2dsZSlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZmFzIGZhLXVzZXItcGx1cycsXG4gICAgICAgICAgbmFtZTogJ2FjdG9yLWltcG9ydCcsXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LkFjdG9ySW1wb3J0ZXInLFxuICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jICgpID0+XG4gICAgICAgICAgICBhd2FpdCBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZy5jcmVhdGUoe1xuICAgICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdG9ySW1wb3J0ZXInKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZmFzIGZhLWNlcnRpZmljYXRlJyxcbiAgICAgICAgICBjbGFzczogJ3hwX3RvZ2dsZScsXG4gICAgICAgICAgbmFtZTogJ3hwdG9nZ2xlJyxcbiAgICAgICAgICBhY3RpdmU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3hwRW5hYmxlZCcpLFxuICAgICAgICAgIHRpdGxlOiAnQ29DNy50b2dnbGVYUCcsXG4gICAgICAgICAgb25DbGljazogYXN5bmMgdG9nZ2xlID0+IGF3YWl0IENvQzdVdGlsaXRpZXMudG9nZ2xlWFBHYWluKHRvZ2dsZSlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZ2FtZS1pY29uIGdhbWUtaWNvbi1jYXJkLWpva2VyJyxcbiAgICAgICAgICBuYW1lOiAnZmFrZXJvbGwnLFxuICAgICAgICAgIHRpdGxlOiAnQ29DNy5GYWtlUm9sbCcsXG4gICAgICAgICAgb25DbGljazogQ29DN0NoYXQuZmFrZVJvbGxNZXNzYWdlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBidXR0b246IHRydWUsXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS1tb29uJyxcbiAgICAgICAgICBuYW1lOiAnc3RhcnRyZXN0JyxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuc3RhcnRSZXN0JyxcbiAgICAgICAgICBvbkNsaWNrOiBhc3luYyAoKSA9PiBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldFRhcmdldCgpXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIHJlbmRlckNvbnRyb2xzIChhcHAsIGh0bWwsIGRhdGEpIHtcbiAgICBjb25zdCBpc0dNID0gZ2FtZS51c2VyLmlzR01cbiAgICBjb25zdCBrZWVwZXJNZW51ID0gaHRtbC5maW5kKCcuZ2FtZS1pY29uLXRlbnRhY2xlLXN0cmlrZScpLnBhcmVudCgpXG4gICAga2VlcGVyTWVudS5hZGRDbGFzcygnY29jNy1tZW51JylcbiAgICBpZiAoaXNHTSkge1xuICAgICAga2VlcGVyTWVudS5hZnRlcihcbiAgICAgICAgJzxsaSBjbGFzcz1cInNjZW5lLWNvbnRyb2wgY29jNy1tZW51IGNvYzctY3JlYXRlLWxpbmtcIiB0aXRsZT1cIicgK1xuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DcmVhdGVMaW5rJykgK1xuICAgICAgICAgICdcIj48aSBjbGFzcz1cImZhcyBmYS1saW5rXCI+PC9pPjwvbGk+J1xuICAgICAgKVxuICAgIH1cbiAgICBrZWVwZXJNZW51LmFmdGVyKFxuICAgICAgJzxsaSBjbGFzcz1cInNjZW5lLWNvbnRyb2wgY29jNy1tZW51IGNvYzctZGljZS1yb2xsXCIgdGl0bGU9XCInICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGxEaWNlJykgK1xuICAgICAgICAnXCI+PGkgY2xhc3M9XCJnYW1lLWljb24gZ2FtZS1pY29uLWQxMFwiPjwvaT48L2xpPidcbiAgICApXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5jb2M3LW1lbnUuY29jNy1kaWNlLXJvbGwnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IENvQzdVdGlsaXRpZXMucm9sbERpY2UoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuY29jNy1tZW51LmNvYzctY3JlYXRlLWxpbmsnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IENvQzdMaW5rQ3JlYXRpb25EaWFsb2cuY3JlYXRlKGV2ZW50KSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIHVpICovXG5cbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdMaW5rIH0gZnJvbSAnLi9saW5rLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NhbnZhcyB7XG4gIHN0YXRpYyBnZXQgQ09DN19UWVBFU19TVVBQT1JURUQgKCkge1xuICAgIHJldHVybiBbJ2xpbmsnXVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIG9uRHJvcFNvbWV0aGluZyAoY2FudmFzLCBpdGVtKSB7XG4gICAgaWYgKFxuICAgICAgaXRlbS5Db0M3VHlwZSAmJlxuICAgICAgQ29DN0NhbnZhcy5DT0M3X1RZUEVTX1NVUFBPUlRFRC5pbmNsdWRlcyhpdGVtLkNvQzdUeXBlKVxuICAgICkge1xuICAgICAgY29uc3QgZ3JpZFNpemUgPSBjYW52YXMuc2NlbmUuZGF0YS5ncmlkXG4gICAgICBjb25zdCB4ID0gaXRlbS54IC0gZ3JpZFNpemUgLyAyXG4gICAgICBjb25zdCB5ID0gaXRlbS55IC0gZ3JpZFNpemUgLyAyXG4gICAgICBjb25zdCBoZWlnaHQgPSBncmlkU2l6ZVxuICAgICAgY29uc3Qgd2lkdGggPSBncmlkU2l6ZVxuICAgICAgbGV0IGRyb3BUYXJnZXRUb2tlbnMgPSBjYW52YXMudG9rZW5zLnBsYWNlYWJsZXMuZmlsdGVyKG9iaiA9PiB7XG4gICAgICAgIGNvbnN0IGMgPSBvYmouY2VudGVyXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgTnVtYmVyLmJldHdlZW4oYy54LCB4LCB4ICsgd2lkdGgpICYmXG4gICAgICAgICAgTnVtYmVyLmJldHdlZW4oYy55LCB5LCB5ICsgaGVpZ2h0KVxuICAgICAgICApXG4gICAgICB9KSAvLyBGaW5kIGRyb3AgdGFyZ2V0LlxuICAgICAgaWYgKCFkcm9wVGFyZ2V0VG9rZW5zLmxlbmd0aCkgZHJvcFRhcmdldFRva2VucyA9IGNhbnZhcy50b2tlbnMuY29udHJvbGxlZCAvLyBJZiBubyB0YXJnZXQgd2hpc3BlciB0byBzZWxlY3RlZCB0b2tlblxuICAgICAgc3dpdGNoIChpdGVtLkNvQzdUeXBlKSB7XG4gICAgICAgIGNhc2UgJ2xpbmsnOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBhd2FpdCBDb0M3TGluay5mcm9tRGF0YShpdGVtKVxuICAgICAgICAgICAgaWYgKCFsaW5rLmxpbmspIHtcbiAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignSW52YWxpZCBsaW5rJylcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0ge31cbiAgICAgICAgICAgIG9wdGlvbi5zcGVha2VyID0ge1xuICAgICAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFkcm9wVGFyZ2V0VG9rZW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICBjb25zdCB3aGlzcGVyVGFyZ2V0cyA9IGdhbWUudXNlcnMucGxheWVycy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgdSA9PiAhIXUuY2hhcmFjdGVyXG4gICAgICAgICAgICAgICkgLy8gVXNlciB3aXRoIGF0IGxlYXN0IGEgY2hhcmFjdGVyXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgdSBvZiB3aGlzcGVyVGFyZ2V0cykge1xuICAgICAgICAgICAgICAgIG9wdGlvbi53aGlzcGVyID0gW3VdXG4gICAgICAgICAgICAgICAgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKFxuICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWVzc2FnZVRhcmdldENoZWNrUmVxdWVzdGVkJywge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB1LmNoYXJhY3Rlci5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBjaGVjazogbGluay5saW5rXG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgIG9wdGlvblxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGRyb3BUYXJnZXRUb2tlbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAodC5hY3Rvci5oYXNQbGF5ZXJPd25lcikge1xuICAgICAgICAgICAgICAgICAgb3B0aW9uLndoaXNwZXIgPSB0LmFjdG9yLm93bmVyc1xuICAgICAgICAgICAgICAgICAgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKFxuICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VUYXJnZXRDaGVja1JlcXVlc3RlZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0LmFjdG9yLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgY2hlY2s6IGxpbmsubGlua1xuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgZ2FtZSwgU2V0dGluZ3MgKi9cblxuZXhwb3J0IGNsYXNzIENvQzdTZXR0aW5nc0RpcmVjdG9yeSBleHRlbmRzIFNldHRpbmdzIHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnI3NldHRpbmdzLWdhbWUnKVxuICAgICAgICAuYXBwZW5kKFxuICAgICAgICAgICc8YnV0dG9uIGNsYXNzPVwidHJpZ2dlci1kYXRhLW1pZ3JhdGlvblwiPjxpIGNsYXNzPVwiZmFzIGZhLXdyZW5jaFwiPjwvaT4gJyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UcmlnZ2VyQnV0dG9uJykgK1xuICAgICAgICAgICAgJzwvYnV0dG9uPidcbiAgICAgICAgKVxuICAgICAgaHRtbC5maW5kKCcudHJpZ2dlci1kYXRhLW1pZ3JhdGlvbicpLmNsaWNrKCgpID0+IHtcbiAgICAgICAgbmV3IERpYWxvZyhcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuVHJpZ2dlclRpdGxlJyksXG4gICAgICAgICAgICBjb250ZW50OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UcmlnZ2VyQ29udGVudHMnKSxcbiAgICAgICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICAgICAgbWlncmF0ZToge1xuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT4nLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UcmlnZ2VyUmVzdGFydCcpLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdzeXN0ZW1VcGRhdGVWZXJzaW9uJywgMClcbiAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgY2xvc2U6IHtcbiAgICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtYmFuXCI+PC9pPicsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ2FuY2VsJyksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHt9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWZhdWx0OiAnY2xvc2UnXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7fVxuICAgICAgICApLnJlbmRlcih0cnVlKVxuICAgICAgfSlcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDb21wZW5kaXVtRGlyZWN0b3J5LCBEaWFsb2csIGdhbWUgKi9cblxuZXhwb3J0IGNsYXNzIENvQzdDb21wZW5kaXVtRGlyZWN0b3J5IGV4dGVuZHMgQ29tcGVuZGl1bURpcmVjdG9yeSB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBsZXQgdHJhbnNsYXRlZCA9IGZhbHNlXG4gICAgaWYgKGdhbWUuaTE4bi5sYW5nID09PSAnZW4nKSB7XG4gICAgICB0cmFuc2xhdGVkID0gdHJ1ZVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGdhbWUuYmFiZWxlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCB2IG9mIE9iamVjdC52YWx1ZXMoZ2FtZS5iYWJlbGUubW9kdWxlcykpIHtcbiAgICAgICAgaWYgKHYubGFuZyA9PT0gZ2FtZS5pMThuLmxhbmcpIHtcbiAgICAgICAgICB0cmFuc2xhdGVkID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdHJhbnNsYXRlZCkge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnZm9vdGVyLmRpcmVjdG9yeS1mb290ZXInKVxuICAgICAgICAuYXBwZW5kKFxuICAgICAgICAgICc8YSBjbGFzcz1cImNvbXBlbmRpdW0tdHJhbnNsYXRpb25cIiB0aXRsZT1cIicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlVGl0bGUnKSArXG4gICAgICAgICAgICAnXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVUaXRsZScpICtcbiAgICAgICAgICAgICc8L2E+J1xuICAgICAgICApXG4gICAgICBodG1sLmZpbmQoJy5jb21wZW5kaXVtLXRyYW5zbGF0aW9uJykuY2xpY2soKCkgPT4ge1xuICAgICAgICBjb25zdCBtZXNzYWdlID1cbiAgICAgICAgICAnPHA+JyArXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlV2FybmluZycpICtcbiAgICAgICAgICAnPC9wPicgK1xuICAgICAgICAgICc8cD4nICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVJbnN0YWxsQmFiZWxlJykgK1xuICAgICAgICAgICc8L3A+JyArXG4gICAgICAgICAgJzxwPicgK1xuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZUluc3RhbGxUcmFuc2xhdGlvbicpICtcbiAgICAgICAgICAnPC9wPicgK1xuICAgICAgICAgICc8cD4nICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVFbmFibGVUcmFuc2xhdGlvbicpICtcbiAgICAgICAgICAnPC9wPicgK1xuICAgICAgICAgICc8cD4nICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVOb1RyYW5zbGF0aW9uJykgK1xuICAgICAgICAgICc8L3A+J1xuICAgICAgICBuZXcgRGlhbG9nKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVUaXRsZScpLFxuICAgICAgICAgICAgY29udGVudDogbWVzc2FnZSxcbiAgICAgICAgICAgIGJ1dHRvbnM6IHt9LFxuICAgICAgICAgICAgZGVmYXVsdDogJ2Nsb3NlJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAge31cbiAgICAgICAgKS5yZW5kZXIodHJ1ZSlcbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQWN0b3JEaXJlY3RvcnksIGdhbWUgKi9cbmltcG9ydCB7IENvQzdBY3RvckltcG9ydGVyRGlhbG9nIH0gZnJvbSAnLi9hcHBzL2FjdG9yLWltcG9ydGVyLWRpYWxvZy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdBY3RvckRpcmVjdG9yeSBleHRlbmRzIEFjdG9yRGlyZWN0b3J5IHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCdmb290ZXIuZGlyZWN0b3J5LWZvb3RlcicpXG4gICAgICAuYXBwZW5kKFxuICAgICAgICAnPGEgY2xhc3M9XCJhY3Rvci1pbXBvcnRcIj4nICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWN0b3JJbXBvcnRlcicpICtcbiAgICAgICAgICAnPC9hPidcbiAgICAgIClcbiAgICBodG1sLmZpbmQoJy5hY3Rvci1pbXBvcnQnKS5jbGljaygoKSA9PiB7XG4gICAgICBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZy5jcmVhdGUoe1xuICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdG9ySW1wb3J0ZXInKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIERpYWxvZywgZ2FtZSwgbWVyZ2VPYmplY3QsIFJvbGwsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuaW1wb3J0IHsgU2FuQ2hlY2tDYXJkIH0gZnJvbSAnLi4vLi4vY2hhdC9jYXJkcy9zYW4tY2hlY2suanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3U3BlbGwgZXh0ZW5kcyBDb0M3SXRlbSB7XG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvcGVudGFncmFtLXJvc2Uuc3ZnJ1xuICAgIH1cbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHRcbiAgfVxuXG4gIGFzeW5jIGNhc3QgKCkge1xuICAgIGlmICghdGhpcy5pc093bmVkKSB7XG4gICAgICAvKiogVGhpcyBpcyBub3Qgb3duZWQgYnkgYW55IEFjdG9yICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90T3duZWQnKSlcbiAgICB9XG4gICAgY29uc3QgY29zdHMgPSB0aGlzLmRhdGEuZGF0YS5jb3N0c1xuICAgIGNvbnN0IGxvc3NlcyA9IFtdXG4gICAgbGV0IGNvbnZlcnRTdXJwbHVzSW50b0hpdFBvaW50c1xuICAgIGNvc3RzLm1hZ2ljUG9pbnRzID0gQ29DN1V0aWxpdGllcy5pc0Zvcm11bGEoY29zdHMubWFnaWNQb2ludHMpXG4gICAgICA/IChhd2FpdCBuZXcgUm9sbChjb3N0cy5tYWdpY1BvaW50cykucm9sbCh7IGFzeW5jOiB0cnVlIH0pKS50b3RhbFxuICAgICAgOiBwYXJzZUludChjb3N0cy5tYWdpY1BvaW50cylcbiAgICBpZiAoXG4gICAgICBjb3N0cy5tYWdpY1BvaW50cyAmJlxuICAgICAgY29zdHMubWFnaWNQb2ludHMgPiB0aGlzLmFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzLm1wLnZhbHVlXG4gICAgKSB7XG4gICAgICBjb252ZXJ0U3VycGx1c0ludG9IaXRQb2ludHMgPSBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgY29uc3QgY29udmVydGVkSGl0UG9pbnRzID1cbiAgICAgICAgICBjb3N0cy5tYWdpY1BvaW50cyAtIHRoaXMuYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWVcbiAgICAgICAgY29uc3QgY29udmVydGVkTWFnaWNQb2ludHMgPSBjb3N0cy5tYWdpY1BvaW50cyAtIGNvbnZlcnRlZEhpdFBvaW50c1xuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgIHRpdGxlOiAnICcsXG4gICAgICAgICAgY29udGVudDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ob3RFbm91Z2hNYWdpY1BvaW50cycsIHtcbiAgICAgICAgICAgIGFjdG9yTWFnaWNQb2ludHM6IHRoaXMuYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUsXG4gICAgICAgICAgICBjb252ZXJ0ZWRIaXRQb2ludHMsXG4gICAgICAgICAgICBjb252ZXJ0ZWRNYWdpY1BvaW50cyxcbiAgICAgICAgICAgIG9yaWdpbmFsTWFnaWNQb2ludHM6IGNvc3RzLm1hZ2ljUG9pbnRzLFxuICAgICAgICAgICAgc3BlbGw6IHRoaXMubmFtZVxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICAgIGNhbmNlbDoge1xuICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtdGltZXNcIj48L2k+JyxcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DYW5jZWwnKSxcbiAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb2NlZWQ6IHtcbiAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicsXG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUHJvY2VlZCcpLFxuICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvc3RzLmhpdFBvaW50cyA9IGNvbnZlcnRlZEhpdFBvaW50c1xuICAgICAgICAgICAgICAgIGNvc3RzLm1hZ2ljUG9pbnRzID0gY29udmVydGVkTWFnaWNQb2ludHNcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZWZhdWx0OiAnY2FuY2VsJyxcbiAgICAgICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJ11cbiAgICAgICAgfVxuICAgICAgICBuZXcgRGlhbG9nKGRhdGEpLnJlbmRlcih0cnVlKVxuICAgICAgfSlcbiAgICAgIGlmICghY29udmVydFN1cnBsdXNJbnRvSGl0UG9pbnRzKSByZXR1cm5cbiAgICB9XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY29zdHMpKSB7XG4gICAgICBpZiAoIXZhbHVlIHx8IE51bWJlcih2YWx1ZSkgPT09IDApIGNvbnRpbnVlXG4gICAgICBsb3NzZXMucHVzaChhd2FpdCB0aGlzLnJlc29sdmVMb3NzZXMoa2V5LCB2YWx1ZSkpXG4gICAgfVxuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvc3BlbGwvY2hhdC5odG1sJ1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdGhpcy5kYXRhLmRhdGEuZGVzY3JpcHRpb24udmFsdWVcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHsgZGVzY3JpcHRpb24sIGxvc3NlcyB9KVxuICAgIHJldHVybiBhd2FpdCBDaGF0TWVzc2FnZS5jcmVhdGUoe1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcih7IGFjdG9yOiB0aGlzLmFjdG9yIH0pLFxuICAgICAgZmxhdm9yOiB0aGlzLm5hbWUsXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIHJlc29sdmVMb3NzZXMgKGNoYXJhY3RlcmlzdGljLCB2YWx1ZSkge1xuICAgIGxldCBjaGFyYWN0ZXJpc3RpY05hbWVcbiAgICBsZXQgbG9zc1xuICAgIGlmIChDb0M3VXRpbGl0aWVzLmlzRm9ybXVsYSh2YWx1ZSkpIHtcbiAgICAgIGxvc3MgPSAoYXdhaXQgbmV3IFJvbGwodmFsdWUpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcbiAgICB9IGVsc2Uge1xuICAgICAgbG9zcyA9IHBhcnNlSW50KHZhbHVlKVxuICAgIH1cbiAgICBjb25zdCBhY3RvckRhdGEgPSB0aGlzLmFjdG9yLmRhdGEuZGF0YVxuICAgIHN3aXRjaCAoY2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgIGNhc2UgJ2hpdFBvaW50cyc6XG4gICAgICAgIGNoYXJhY3RlcmlzdGljTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IaXRQb2ludHMnKVxuICAgICAgICB0aGlzLmFjdG9yLmRlYWxEYW1hZ2UobG9zcywgeyBpZ25vcmVBcm1vcjogdHJ1ZSB9KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnc2FuaXR5JzpcbiAgICAgICAgY2hhcmFjdGVyaXN0aWNOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eVBvaW50cycpXG4gICAgICAgIHRoaXMuZ3JhbnRTYW5pdHlMb3NzKGxvc3MpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdtYWdpY1BvaW50cyc6XG4gICAgICAgIGNoYXJhY3RlcmlzdGljTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NYWdpY1BvaW50cycpXG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0TXAoYWN0b3JEYXRhLmF0dHJpYnMubXAudmFsdWUgLSBsb3NzKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAncG93ZXInOlxuICAgICAgICBjaGFyYWN0ZXJpc3RpY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5Qb3dlcicpXG4gICAgICAgIHRoaXMuYWN0b3IudXBkYXRlKHtcbiAgICAgICAgICAnZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlJzpcbiAgICAgICAgICAgIGFjdG9yRGF0YS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlIC0gbG9zc1xuICAgICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4geyBjaGFyYWN0ZXJpc3RpY05hbWUsIGxvc3MgfVxuICB9XG5cbiAgLyoqIEJ5cGFzcyB0aGUgU2FuaXR5IGNoZWNrIGFuZCBqdXN0IHJvbGwgdGhlIGRhbWFnZSAqL1xuICBhc3luYyBncmFudFNhbml0eUxvc3MgKHZhbHVlKSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSBTYW5DaGVja0NhcmQudGVtcGxhdGVcbiAgICBsZXQgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB7fSlcbiAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoeyBhY3RvcjogdGhpcy5hY3RvciB9KSxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DYXN0aW5nU3BlbGwnLCB7XG4gICAgICAgIHNwZWxsOiB0aGlzLm5hbWVcbiAgICAgIH0pLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH0pXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IG1lc3NhZ2UuZ2V0SFRNTCgpXG4gICAgaWYgKHR5cGVvZiBjYXJkLmxlbmd0aCAhPT0gJ3VuZGVmaW5lZCcgJiYgY2FyZC5sZW5ndGggPT09IDEpIHtcbiAgICAgIGNvbnN0IHNhbml0eUxvc3MgPSB2YWx1ZVxuICAgICAgaHRtbCA9IGNhcmQuZmluZCgnLmNoYXQtY2FyZCcpWzBdXG4gICAgICBodG1sLmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKFxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuaWQsXG4gICAgICAgICAgZmFzdEZvcndhcmQ6IGZhbHNlLFxuICAgICAgICAgIHNhbkRhdGE6IHtcbiAgICAgICAgICAgIHNhbk1pbjogc2FuaXR5TG9zcyxcbiAgICAgICAgICAgIHNhbk1heDogc2FuaXR5TG9zc1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIGNvbnN0IHNhbml0eUNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGh0bWwpXG4gICAgICBhd2FpdCBzYW5pdHlDaGVjay5ieXBhc3NSb2xsU2FuKClcbiAgICAgIGF3YWl0IHNhbml0eUNoZWNrLnJvbGxTYW5Mb3NzKClcbiAgICAgIHNhbml0eUNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGUgKGRhdGEsIGNvbnRleHQpIHtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgdGhpcy5jb250ZXh0LnBhcmVudCAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiB0aGlzLmNvbnRleHQuYm9va0lkICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgbGV0IGl0ZW1cbiAgICAgIGxldCBib29rXG4gICAgICAvLyBsZXQgc3BlbGxEYXRhXG4gICAgICBpZiAodGhpcy5jb250ZXh0LnBhcmVudCA9PT0gbnVsbCkge1xuICAgICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQodGhpcy5jb250ZXh0LmJvb2tJZClcbiAgICAgICAgYm9vayA9IGl0ZW0udG9PYmplY3QoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYm9vayA9IHRoaXMuY29udGV4dC5wYXJlbnQuaXRlbXMuZ2V0KHRoaXMuY29udGV4dC5ib29rSWQpLnRvT2JqZWN0KClcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwLCBpbSA9IGJvb2suZGF0YS5zcGVsbHMubGVuZ3RoOyBpIDwgaW07IGkrKykge1xuICAgICAgICBpZiAoYm9vay5kYXRhLnNwZWxsc1tpXS5faWQgPT09IHRoaXMuaWQpIHtcbiAgICAgICAgICBib29rLmRhdGEuc3BlbGxzW2ldID0gbWVyZ2VPYmplY3QoYm9vay5kYXRhLnNwZWxsc1tpXSwgZGF0YSlcbiAgICAgICAgICAvLyBzcGVsbERhdGEgPSBib29rLmRhdGEuc3BlbGxzW2ldXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmNvbnRleHQucGFyZW50ID09PSBudWxsKSB7XG4gICAgICAgIGF3YWl0IGl0ZW0udXBkYXRlKHtcbiAgICAgICAgICAnZGF0YS5zcGVsbHMnOiBib29rLmRhdGEuc3BlbGxzXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuc2hlZXQub2JqZWN0ID0gbmV3IENvQzdTcGVsbChcbiAgICAgICAgICBib29rLmRhdGEuc3BlbGxzLmZpbmQoc3BlbGwgPT4gc3BlbGwuX2lkID09PSB0aGlzLmlkKSxcbiAgICAgICAgICB0aGlzLmNvbnRleHRcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5jb250ZXh0LnBhcmVudC51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtib29rXSlcbiAgICAgICAgdGhpcy5zaGVldC5vYmplY3QgPSBuZXcgQ29DN1NwZWxsKFxuICAgICAgICAgIGJvb2suZGF0YS5zcGVsbHMuZmluZChzcGVsbCA9PiBzcGVsbC5faWQgPT09IHRoaXMuaWQpLFxuICAgICAgICAgIHRoaXMuY29udGV4dFxuICAgICAgICApXG4gICAgICB9XG4gICAgICB0aGlzLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgIH0gZWxzZSB7XG4gICAgICBzdXBlci51cGRhdGUoZGF0YSwgY29udGV4dClcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgZHVwbGljYXRlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCwgdWkgKi9cblxuaW1wb3J0IHsgU2FuQ2hlY2tDYXJkIH0gZnJvbSAnLi4vLi4vY2hhdC9jYXJkcy9zYW4tY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbS5qcydcbmltcG9ydCB7IENvQzdTcGVsbCB9IGZyb20gJy4uL3NwZWxsL2RhdGEuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Qm9vayBleHRlbmRzIENvQzdJdGVtIHtcbiAgY29uc3RydWN0b3IgKGRhdGEsIGNvbnRleHQpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEuaW1nID09PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9zZWNyZXQtYm9vay5zdmcnXG4gICAgfVxuICAgIHN1cGVyKGRhdGEsIGNvbnRleHQpXG4gIH1cblxuICAvKiogQ29udmVydCB0aGUgZGlmZmljdWx0eSBvbiB0aGUgc2VsZWN0IGVsZW1lbnQgdG8gYSBmb3JtYXQgYWNjZXB0ZWQgKi9cbiAgc3RhdGljIGNvbnZlcnREaWZmaWN1bHR5IChkaWZmaWN1bHR5KSB7XG4gICAgc3dpdGNoIChkaWZmaWN1bHR5KSB7XG4gICAgICBjYXNlICdoYXJkJzpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZFxuICAgICAgY2FzZSAnZXh0cmVtZSc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWVcbiAgICAgIGNhc2UgJ2NyaXRpY2FsJzpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWxcbiAgICAgIGNhc2UgJ3VucmVhZGFibGUnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5pbXBvc3NpYmxlXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZvciB0aGUgZnV0dXJlOiBhZGQgYWR2YW5jZWQgcnVsZXMgZm9yIGxlYXJuaW5nIHNwZWxscywgcGcuIDE3NlxuICAgKiBAcGFyYW0gW3tEb2N1bWVudH1dIHNwZWxsc1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBhZGRTcGVsbHMgKHNwZWxscykge1xuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLmRhdGEuZGF0YS5zcGVsbHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuZGF0YS5kYXRhLnNwZWxscylcbiAgICAgIDogW11cbiAgICBmb3IgKGNvbnN0IHNwZWxsIG9mIHNwZWxscykge1xuICAgICAgY29sbGVjdGlvbi5wdXNoKHNwZWxsKVxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5zcGVsbHMnOiBjb2xsZWN0aW9uIH0pXG4gIH1cblxuICBhc3luYyBzcGVsbERldGFpbCAoaW5kZXgpIHtcbiAgICBjb25zdCBpc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YS5kYXRhLnNwZWxsc1tpbmRleF1cbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmFjdG9yID8gdGhpcy5hY3RvciA6IG51bGxcbiAgICBjb25zdCBzcGVsbCA9IG5ldyBDb0M3U3BlbGwoZGF0YSwgeyBwYXJlbnQsIGJvb2tJZDogdGhpcy5pZCB9KVxuICAgIGlmIChpc0tlZXBlciB8fCBzcGVsbC5kYXRhLmRhdGEubGVhcm5lZCkge1xuICAgICAgcmV0dXJuIGF3YWl0IHNwZWxsLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGFsbCB0aGUgbG9naWMgaW52b2x2aW5nIHRoZSBhdHRlbXB0IG9mIGluaXRpYWwgcmVhZGluZ1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQHNlZSBsaXN0ZW4gQHNlZSBncmFudEluaXRpYWxSZWFkaW5nXG4gICAqL1xuICBhc3luYyBhdHRlbXB0SW5pdGlhbFJlYWRpbmcgKCkge1xuICAgIC8qKiBDb252ZXJ0cyB0aGUgZGlmZmljdWx0eSB2YWx1ZSB0byBzb21ldGhpbmcgYWNjZXB0ZWQgYnkgQ29DN0NoZWNrICovXG4gICAgY29uc3QgZGlmZmljdWx0eSA9IENvQzdCb29rLmNvbnZlcnREaWZmaWN1bHR5KFxuICAgICAgdGhpcy5kYXRhLmRhdGEuZGlmZmljdWx0eUxldmVsXG4gICAgKVxuICAgIGNvbnN0IGxhbmd1YWdlID0gdGhpcy5kYXRhLmRhdGEubGFuZ3VhZ2VcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3I/LmdldFNraWxsc0J5TmFtZShsYW5ndWFnZSlcbiAgICBpZiAoIXNraWxsKSB7XG4gICAgICAvKiogVGhpcyBpcyBub3Qgb3duZWQgYnkgYW55IEFjdG9yICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90T3duZWQnKSlcbiAgICB9IGVsc2UgaWYgKHNraWxsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLyoqXG4gICAgICAgKiBUaGUgQWN0b3Igd2hvIG93bnMgdGhpcyBkb2VzIG5vdCBoYXZlIHRoZSBza2lsbCBvZlxuICAgICAgICogdGhlIGxhbmd1YWdlIGluIHdoaWNoIGl0IHdhcyB3cml0dGVuXG4gICAgICAgKi9cbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlVua25vd25MYW5ndWFnZScsIHsgYWN0b3I6IHRoaXMuYWN0b3IubmFtZSB9KVxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgY2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yXG4gICAgICBjaGVjay5za2lsbCA9IHNraWxsWzBdLmlkXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgICAgY2hlY2sucGFyZW50ID0gdGhpcy51dWlkXG4gICAgICBjaGVjay5jb250ZXh0ID0gJ0lOSVRJQUxfUkVBRElORydcbiAgICAgIGNoZWNrLmZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVhZEF0dGVtcHQnLCB7XG4gICAgICAgIGJvb2s6IHRoaXMubmFtZSxcbiAgICAgICAgbGFuZ3VhZ2UsXG4gICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGF0YS5kYXRhLmRpZmZpY3VsdHlMZXZlbFxuICAgICAgfSlcbiAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgcmV0dXJuIGF3YWl0IGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEl0cyBpcyBjYWxsZWQgZXZlcnkgdGltZSB0aGUgdXNlciBpbnRlcmFjdHMgaW4gc29tZSB3YXkgd2l0aCBwcm9ncmVzcyBiYXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGUgJ3Jlc2V0JyB8fCAnaW5jcmVhc2UnIHx8ICdkZWNyZWFzZSdcbiAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIGp1c3Qgc28gdGhhdCBwcm9ncmVzcyBpcyBub3QgZ3JlYXRlciB0aGFuIG5lY2Vzc2FyeVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBjaGFuZ2VQcm9ncmVzcyAobW9kZSwgdmFsdWUpIHtcbiAgICBpZiAoIXRoaXMuaXNPd25lZCAmJiBtb2RlICE9PSAncmVzZXQnKSB7XG4gICAgICAvKiogVGhpcyBpcyBub3Qgb3duZWQgYnkgYW55IEFjdG9yICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90T3duZWQnKSlcbiAgICB9XG4gICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5pbml0aWFsUmVhZGluZyAmJiBtb2RlICE9PSAncmVzZXQnKSB7XG4gICAgICAvKiogQWN0b3IgZGlkIG5vdCBwZXJmb3JtZWQgYW4gaW5pdGlhbCByZWFkaW5nIGZpcnN0ICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Jbml0aWFsUmVhZGluZ05lZWRlZCcsIHtcbiAgICAgICAgICBhY3RvcjogdGhpcy5hY3Rvci5uYW1lLFxuICAgICAgICAgIGJvb2s6IHRoaXMubmFtZVxuICAgICAgICB9KVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLnR5cGUubXl0aG9zICYmIG1vZGUgIT09ICdyZXNldCcpIHtcbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RNeXRob3NUb21lJykpXG4gICAgfVxuICAgIGNvbnN0IG5lY2Vzc2FyeSA9IHRoaXMuZGF0YS5kYXRhLnN0dWR5Lm5lY2Vzc2FyeVxuICAgIGxldCBmdWxsU3R1ZHkgPSB0aGlzLmRhdGEuZGF0YS5mdWxsU3R1ZHlcbiAgICBsZXQgcHJvZ3Jlc3MgPSB0aGlzLmRhdGEuZGF0YS5zdHVkeS5wcm9ncmVzc1xuICAgIGlmIChpc05hTihwcm9ncmVzcykpIHtcbiAgICAgIC8qKiBJdCBzZWVtcyBhIGxpdHRsZSBpbXBvc3NpYmxlLCBidXQgeW91IG5ldmVyIGtub3cgKi9cbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdkYXRhLnN0dWR5LnByb2dyZXNzJzogMFxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKHZhbHVlICYmIHByb2dyZXNzID4gdmFsdWUpIHtcbiAgICAgIC8qKlxuICAgICAgICogUHJvZ3Jlc3MgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIHZhbHVlIGVudGVyZWQgYnkgdXNlciBhcyBuZWNlc3NhcnksXG4gICAgICAgKiByZXNldCBwcm9ncmVzcyB0byBiZSBlcXVhbCBuZWNlc3NhcnkgYW5kIGNvbXBsZXRlIGZ1bGwgc3R1ZHlcbiAgICAgICAqL1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnZGF0YS5mdWxsU3R1ZHknOiArK2Z1bGxTdHVkeSxcbiAgICAgICAgJ2RhdGEuc3R1ZHkucHJvZ3Jlc3MnOiB2YWx1ZVxuICAgICAgfSlcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbXBsZXRlRnVsbFN0dWR5KClcbiAgICB9XG4gICAgaWYgKG1vZGUgPT09ICdpbmNyZWFzZScgJiYgcHJvZ3Jlc3MgPCBuZWNlc3NhcnkpIHtcbiAgICAgIC8qKiBVc2VyIGNsaWNrZWQgb24gcGx1cyBpY29uIHRvIGluY3JlYXNlIHByb2dyZXNzICovXG4gICAgICBpZiAoKGF3YWl0IHRoaXMuY2hlY2tFeGhhdXN0aW9uKCkpICE9PSBmYWxzZSkgcmV0dXJuXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdkYXRhLnN0dWR5LnByb2dyZXNzJzogKytwcm9ncmVzc1xuICAgICAgfSlcbiAgICAgIGlmIChwcm9ncmVzcyA9PT0gbmVjZXNzYXJ5KSB7XG4gICAgICAgIC8qKiBDb21wbGV0ZSBmdWxsIHN0dWR5IGlmIHByb2dyZXNzIGlzIGVxdWFsIG5lY2Vzc2FyeSAqL1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdkYXRhLmZ1bGxTdHVkeSc6ICsrZnVsbFN0dWR5IH0pXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdyYW50RnVsbFN0dWR5KClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdkZWNyZWFzZScgJiYgcHJvZ3Jlc3MgPiAwKSB7XG4gICAgICAvKiogVXNlciBjbGlja2VkIG9uIG1pbnVzIGljb24gdG8gZGVjcmVhc2UgcHJvZ3Jlc3MgKi9cbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdkYXRhLnN0dWR5LnByb2dyZXNzJzogLS1wcm9ncmVzc1xuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBjaGVja0V4aGF1c3Rpb24gKCkge1xuICAgIGNvbnN0IGFjdG9yTXl0aG9zVmFsdWUgPSB0aGlzLmFjdG9yPy5jdGh1bGh1TXl0aG9zXG4gICAgY29uc3QgbXl0aG9zUmF0aW5nID0gdGhpcy5kYXRhLmRhdGEubXl0aG9zUmF0aW5nXG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmluaXRpYWxSZWFkaW5nKSB7XG4gICAgICBpZiAoYWN0b3JNeXRob3NWYWx1ZSA+PSBteXRob3NSYXRpbmcpIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAgICdkYXRhLnN0dWR5LnByb2dyZXNzJzogdGhpcy5kYXRhLmRhdGEuc3R1ZHkubmVjZXNzYXJ5XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Cb29rSGFzTm90aGluZ01vcmVUb1RlYWNoJywge1xuICAgICAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3IubmFtZSxcbiAgICAgICAgICAgIGJvb2s6IHRoaXMubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIH0gZWxzZSByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICBhc3luYyBncmFudEZ1bGxTdHVkeSAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuZGF0YS50eXBlLm15dGhvcykgcmV0dXJuXG4gICAgaWYgKChhd2FpdCB0aGlzLmNoZWNrRXhoYXVzdGlvbigpKSAhPT0gZmFsc2UpIHJldHVyblxuICAgIGNvbnN0IGFjdG9yTXl0aG9zVmFsdWUgPSB0aGlzLmFjdG9yLmN0aHVsaHVNeXRob3NcbiAgICBjb25zdCBkZXZlbG9wbWVudHMgPSBbXVxuICAgIGNvbnN0IG15dGhvc1JhdGluZyA9IHRoaXMuZGF0YS5kYXRhLm15dGhvc1JhdGluZ1xuICAgIGxldCBteXRob3NGaW5hbCA9IHRoaXMuZGF0YS5kYXRhLmdhaW5zLmN0aHVsaHVNeXRob3MuZmluYWxcbiAgICBpZiAoYWN0b3JNeXRob3NWYWx1ZSArIG15dGhvc0ZpbmFsID4gbXl0aG9zUmF0aW5nKSB7XG4gICAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDw9IG15dGhvc0ZpbmFsOyBpbmRleCsrKSB7XG4gICAgICAgIGlmIChhY3Rvck15dGhvc1ZhbHVlICsgbXl0aG9zRmluYWwgLSBpbmRleCA8PSBteXRob3NSYXRpbmcpIHtcbiAgICAgICAgICBteXRob3NGaW5hbCAtPSBpbmRleFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSByZWFkZXIgYXV0b21hdGljYWxseSBnYWlucyBhIHNraWxsIHRpY2sgZm9yIHRoZVxuICAgICAqIGxhbmd1YWdlIGluIHdoaWNoIHRoZSBib29rIGlzIHdyaXR0ZW5cbiAgICAgKi9cbiAgICBkZXZlbG9wbWVudHMucHVzaChcbiAgICAgIHtcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkN0aHVsaHVNeXRob3NOYW1lJyksXG4gICAgICAgIGdhaW46IHBhcnNlSW50KG15dGhvc0ZpbmFsKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogdGhpcy5kYXRhLmRhdGEubGFuZ3VhZ2UsXG4gICAgICAgIGdhaW46ICdkZXZlbG9wbWVudCdcbiAgICAgIH1cbiAgICApXG4gICAgYXdhaXQgdGhpcy5ncmFudFNraWxsRGV2ZWxvcG1lbnQoZGV2ZWxvcG1lbnRzKVxuICAgIGF3YWl0IHRoaXMucm9sbFNhbml0eUxvc3MoKVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAnZGF0YS5mdWxsU3R1ZGllcyc6ICsrdGhpcy5kYXRhLmRhdGEuZnVsbFN0dWRpZXNcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIGdyYW50SW5pdGlhbFJlYWRpbmcgKCkge1xuICAgIC8qKiBJZiBpbml0aWFsIHJlYWRpbmcgaGFzIGFscmVhZHkgYmVlbiBkb25lIHRoZXJlIGlzIG5vdGhpbmcgdG8gZG8gaGVyZSAqL1xuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5pbml0aWFsUmVhZGluZykgcmV0dXJuXG4gICAgY29uc3QgZGV2ZWxvcG1lbnRzID0gW11cbiAgICBjb25zdCBteXRob3MgPSB7XG4gICAgICBnYWluczogdGhpcy5kYXRhLmRhdGEuZ2FpbnMuY3RodWxodU15dGhvcy5pbml0aWFsLFxuICAgICAgdHlwZTogdGhpcy5kYXRhLmRhdGEudHlwZS5teXRob3NcbiAgICB9XG4gICAgY29uc3Qgb2NjdWx0ID0ge1xuICAgICAgZ2FpbnM6IHRoaXMuZGF0YS5kYXRhLmdhaW5zLm9jY3VsdCxcbiAgICAgIHR5cGU6IHRoaXMuZGF0YS5kYXRhLnR5cGUub2NjdWx0XG4gICAgfVxuICAgIGNvbnN0IG90aGVyID0ge1xuICAgICAgZ2FpbnM6IHRoaXMuZGF0YS5kYXRhLmdhaW5zLm90aGVycyxcbiAgICAgIHR5cGU6IHRoaXMuZGF0YS5kYXRhLnR5cGUub3RoZXJcbiAgICB9XG4gICAgaWYgKG15dGhvcy50eXBlICYmIG15dGhvcy5nYWlucykge1xuICAgICAgZGV2ZWxvcG1lbnRzLnB1c2goe1xuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3RodWxodU15dGhvc05hbWUnKSxcbiAgICAgICAgZ2FpbjogcGFyc2VJbnQobXl0aG9zLmdhaW5zKVxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKG9jY3VsdC50eXBlICYmIG9jY3VsdC5nYWlucykge1xuICAgICAgZGV2ZWxvcG1lbnRzLnB1c2goe1xuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT2NjdWx0JyksXG4gICAgICAgIGdhaW46IHBhcnNlSW50KG9jY3VsdC5nYWlucylcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmIChvdGhlci50eXBlKSB7XG4gICAgICBmb3IgKGNvbnN0IHNraWxsIG9mIG90aGVyLmdhaW5zKSB7XG4gICAgICAgIGNvbnN0IHBhdHRlcm4gPSBza2lsbC5uYW1lLm1hdGNoKC9eKC4rKSBcXCgoLispXFwpJC8pXG4gICAgICAgIC8qKiBTYW5pdGl6YXRpb24gdG8gZGVhbCB3aXRoIHNwZWNpYWxpemF0aW9ucyAqL1xuICAgICAgICBpZiAocGF0dGVybikge1xuICAgICAgICAgIHNraWxsLnNwZWNpYWxpemF0aW9uID0gcGF0dGVyblsxXVxuICAgICAgICAgIHNraWxsLm5hbWUgPSBwYXR0ZXJuWzJdXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNraWxsLnZhbHVlICE9PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgc2tpbGwudmFsdWUgPSAoXG4gICAgICAgICAgICBhd2FpdCBuZXcgUm9sbChza2lsbC52YWx1ZSkucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgKS50b3RhbFxuICAgICAgICB9XG4gICAgICAgIGlmIChza2lsbC52YWx1ZSkge1xuICAgICAgICAgIGRldmVsb3BtZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IHNraWxsLm5hbWUsXG4gICAgICAgICAgICBnYWluOiBza2lsbC52YWx1ZSxcbiAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uOiBza2lsbC5zcGVjaWFsaXphdGlvblxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgdGhpcy5ncmFudFNraWxsRGV2ZWxvcG1lbnQoZGV2ZWxvcG1lbnRzKVxuICAgIGlmICgobXl0aG9zLnR5cGUgfHwgb2NjdWx0LnR5cGUpICYmIHRoaXMuZGF0YS5kYXRhLnNhbml0eUxvc3MpIHtcbiAgICAgIGF3YWl0IHRoaXMucm9sbFNhbml0eUxvc3MoKVxuICAgIH1cbiAgICAvKiogTWFyayBpbml0aWFsIHJlYWRpbmcgYXMgY29tcGxldGUgKi9cbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5pbml0aWFsUmVhZGluZyc6IHRydWUgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0l0ZW19IHNwZWxsbGVhcm5lZCBUaGUgc3BlbGwgdGhhdCB3YXMgbGVhcm5lZCBzdWNjZXNzZnVsbHkgZnJvbSBib29rXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBhc3luYyBncmFudFNwZWxsTGVhcm5pbmcgKHNwZWxsbGVhcm5lZCkge1xuICAgIGZvciAoY29uc3Qgc3BlbGwgb2YgdGhpcy5kYXRhLmRhdGEuc3BlbGxzKSB7XG4gICAgICBpZiAoc3BlbGwuX2lkID09PSBzcGVsbGxlYXJuZWQuX2lkKSB7XG4gICAgICAgIHNwZWxsLmRhdGEubGVhcm5lZCA9IHRydWVcbiAgICAgICAgLy8gRG9lcyB0aGUgYWN0b3IgYWxyZWFkeSBoYXMgYSBzcGVsbCBvZiB0aGF0IG5hbWU/IFRoZW4gZG8gbm90IGFkZCB0aGUgc3BlbGxcbiAgICAgICAgY29uc3QgZXhpc3RpbmdTcGVsbCA9IGF3YWl0IHRoaXMuYWN0b3IuaXRlbXMuZmluZChcbiAgICAgICAgICBpdGVtID0+XG4gICAgICAgICAgICBpdGVtLmRhdGEudHlwZSA9PT0gJ3NwZWxsJyAmJiBpdGVtLmRhdGEubmFtZSA9PT0gc3BlbGxsZWFybmVkLm5hbWVcbiAgICAgICAgKVxuICAgICAgICBpZiAoIWV4aXN0aW5nU3BlbGwpIHtcbiAgICAgICAgICBzcGVsbGxlYXJuZWQuZGF0YS5sZWFybmVkID0gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU3BlbGxBbHJlYWR5TGVhcm5lZCcsIHtcbiAgICAgICAgICAgICAgc3BlbGw6IHNwZWxsbGVhcm5lZC5uYW1lLFxuICAgICAgICAgICAgICBib29rOiB0aGlzLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNhdmUgc3BlbGwgbGlzdCBvZiBib29rXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5zcGVsbHMnOiB0aGlzLmRhdGEuZGF0YS5zcGVsbHMgfSlcbiAgICAvLyBBZGQgbGVhcm5lZCBzcGVsbCB0byBhY3RvclxuICAgIGlmIChzcGVsbGxlYXJuZWQuZGF0YS5sZWFybmVkKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU3BlbGxTdWNjZXNzZnVsbHlMZWFybmVkJywge1xuICAgICAgICAgIHNwZWxsOiBzcGVsbGxlYXJuZWQubmFtZSxcbiAgICAgICAgICBib29rOiB0aGlzLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIGF3YWl0IHRoaXMuYWN0b3IuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbXG4gICAgICAgIGR1cGxpY2F0ZShzcGVsbGxlYXJuZWQpXG4gICAgICBdKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWNlaXZlcyBhbiBBcnJheSBvZiBza2lsbHMgYW5kIGhhbmRsZXMgYWxsIHRoZSBsb2dpYyB0byBkZXZlbG9wIHRoZW1cbiAgICogQHBhcmFtIHtBcnJheX0gZGV2ZWxvcG1lbnRzIEBzZWUgZ3JhbnRJbml0aWFsUmVhZGluZ1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBncmFudFNraWxsRGV2ZWxvcG1lbnQgKGRldmVsb3BtZW50cykge1xuICAgIGlmIChkZXZlbG9wbWVudHMubGVuZ3RoID09PSAwKSByZXR1cm5cbiAgICBmb3IgKGNvbnN0IGRldmVsb3BtZW50IG9mIGRldmVsb3BtZW50cykge1xuICAgICAgLyoqIFRlc3QgaWYgdGhlIHZhbHVlIGlzIGdyZWF0ZXIgdGhhbiB6ZXJvICovXG4gICAgICBpZiAoIWRldmVsb3BtZW50LmdhaW4pIGNvbnRpbnVlXG4gICAgICBsZXQgc2tpbGwgPSBhd2FpdCB0aGlzLmFjdG9yLmdldFNraWxsc0J5TmFtZShkZXZlbG9wbWVudC5uYW1lKVxuICAgICAgLyoqIFRoZSBBY3RvciBkb2VzIG5vdCBvd24gdGhpcyBza2lsbCwgY3JlYXRlIGEgbmV3IG9uZVxuICAgICAgICogRmlyc3QsIGNoZWNrIGlmIHRoZXJlIGlzIGFueSBza2lsbCBpbiB0aGUgZ2FtZSB3aXRoIHRoZSBzYW1lIG5hbWVcbiAgICAgICAqIEluIHRoZSBsYXN0IGFsdGVybmF0aXZlIGp1c3QgY3JlYXRlIGEgbmV3IGdlbmVyaWMgc2tpbGxcbiAgICAgICAqL1xuICAgICAgaWYgKHNraWxsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zdCBleGlzdGluZ1NraWxsID0gYXdhaXQgZ2FtZS5pdGVtcy5maW5kKFxuICAgICAgICAgIGl0ZW0gPT5cbiAgICAgICAgICAgIGl0ZW0uZGF0YS50eXBlID09PSAnc2tpbGwnICYmIGl0ZW0uZGF0YS5uYW1lID09PSBkZXZlbG9wbWVudC5uYW1lXG4gICAgICAgIClcbiAgICAgICAgaWYgKGV4aXN0aW5nU2tpbGwpIHtcbiAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuYWN0b3IuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbXG4gICAgICAgICAgICBkdXBsaWNhdGUoZXhpc3RpbmdTa2lsbClcbiAgICAgICAgICBdKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5hY3Rvci5jcmVhdGVTa2lsbChkZXZlbG9wbWVudC5uYW1lLCAwKVxuICAgICAgICAgIGlmIChkZXZlbG9wbWVudC5zcGVjaWFsaXphdGlvbikge1xuICAgICAgICAgICAgYXdhaXQgc2tpbGxbMF0udXBkYXRlKHtcbiAgICAgICAgICAgICAgJ2RhdGEucHJvcGVydGllcy5zcGVjaWFsJzogdHJ1ZSxcbiAgICAgICAgICAgICAgJ2RhdGEuc3BlY2lhbGl6YXRpb24nOiBkZXZlbG9wbWVudC5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHNraWxsID0gc2tpbGxbMF1cbiAgICAgIGlmIChkZXZlbG9wbWVudC5nYWluID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgIC8qKiBTaW1wbHkgbWFyayB0aGUgc2tpbGwgZm9yIGRldmVsb3BtZW50ICovXG4gICAgICAgIGF3YWl0IHNraWxsLmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRoZSByZWNlaXZlZCB2YWx1ZSBnYWluZWQgaXMgbnVtZXJpYywgZW5zdXJlIHRoYXQgdGhlIGFtb3VudFxuICAgICAgICAgKiB3aWxsIG5vdCBleGNlZWQgdGhlIG1heGltdW0gdmFsdWUgb2YgOTlcbiAgICAgICAgICovXG4gICAgICAgIGlmIChza2lsbC52YWx1ZSArIGRldmVsb3BtZW50LmdhaW4gPiA5OSkge1xuICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMTsgaW5kZXggPD0gZGV2ZWxvcG1lbnQuZ2FpbjsgaW5kZXgrKykge1xuICAgICAgICAgICAgaWYgKHNraWxsLnZhbHVlICsgZGV2ZWxvcG1lbnQuZ2FpbiAtIGluZGV4IDw9IDk5KSB7XG4gICAgICAgICAgICAgIGRldmVsb3BtZW50LmdhaW4gLT0gaW5kZXhcbiAgICAgICAgICAgICAgYXdhaXQgc2tpbGwuaW5jcmVhc2VFeHBlcmllbmNlKGRldmVsb3BtZW50LmdhaW4pXG4gICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHNraWxsLmluY3JlYXNlRXhwZXJpZW5jZShkZXZlbG9wbWVudC5nYWluKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zaG93RGV2ZWxvcG1lbnRzVGFibGUoZGV2ZWxvcG1lbnRzKVxuICB9XG5cbiAgLyoqXG4gICAqIFN1YnNlcXVlbnQgcGVyaW9kcyBvZiBmdWxsIHN0dWR5IG1heSBiZSB1bmRlcnRha2VuLCB0aGUgZGlmZmVyZW5jZSBiZWluZ1xuICAgKiB0aGF0IGVhY2ggc3R1ZHkgd2lsbCB0YWtlIHR3aWNlIGFzIGxvbmcgYXMgdGhlIHByZXZpb3VzIG9uZVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZS48RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgcmVkb0Z1bGxTdHVkeSAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnZGF0YS5zdHVkeS5wcm9ncmVzcyc6IDAgfSlcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ2RhdGEuc3R1ZHkubmVjZXNzYXJ5JzogdGhpcy5kYXRhLmRhdGEuc3R1ZHkubmVjZXNzYXJ5ICogMlxuICAgIH0pXG4gIH1cblxuICAvKiogQnlwYXNzIHRoZSBTYW5pdHkgY2hlY2sgYW5kIGp1c3Qgcm9sbCB0aGUgZGFtYWdlICovXG4gIGFzeW5jIHJvbGxTYW5pdHlMb3NzICgpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZGF0YS5kYXRhLnNhbml0eUxvc3NcbiAgICBpZiAoIXZhbHVlIHx8IHZhbHVlID09PSAnJykgcmV0dXJuXG4gICAgY29uc3QgdGVtcGxhdGUgPSBTYW5DaGVja0NhcmQudGVtcGxhdGVcbiAgICBsZXQgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB7fSlcbiAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoeyBhY3RvcjogdGhpcy5hY3RvciB9KSxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWFkaW5nTXl0aG9zVG9tZScsIHtcbiAgICAgICAgYm9vazogdGhpcy5uYW1lXG4gICAgICB9KSxcbiAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICB9KVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBtZXNzYWdlLmdldEhUTUwoKVxuICAgIGlmICh0eXBlb2YgY2FyZC5sZW5ndGggIT09ICd1bmRlZmluZWQnICYmIGNhcmQubGVuZ3RoID09PSAxKSB7XG4gICAgICBjb25zdCBzYW5pdHlMb3NzID0gKGF3YWl0IG5ldyBSb2xsKHZhbHVlKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgICBodG1sID0gY2FyZC5maW5kKCcuY2hhdC1jYXJkJylbMF1cbiAgICAgIGh0bWwuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUoXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5pZCxcbiAgICAgICAgICBmYXN0Rm9yd2FyZDogZmFsc2UsXG4gICAgICAgICAgc2FuRGF0YToge1xuICAgICAgICAgICAgc2FuTWluOiBzYW5pdHlMb3NzLFxuICAgICAgICAgICAgc2FuTWF4OiBzYW5pdHlMb3NzXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgY29uc3Qgc2FuaXR5Q2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoaHRtbClcbiAgICAgIGF3YWl0IHNhbml0eUNoZWNrLmJ5cGFzc1JvbGxTYW4oKVxuICAgICAgYXdhaXQgc2FuaXR5Q2hlY2sucm9sbFNhbkxvc3MoKVxuICAgICAgc2FuaXR5Q2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IGEgdGFibGUgaW4gdGhlIGNoYXQgd2l0aCBhbGwgc2tpbGwgZGV2ZWxvcG1lbnRzIG9idGFpbmVkXG4gICAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gZGV2ZWxvcG1lbnRzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gY3JlYXRlIENoYXRNZXNzYWdlXG4gICAqL1xuICBhc3luYyBzaG93RGV2ZWxvcG1lbnRzVGFibGUgKGRldmVsb3BtZW50cykge1xuICAgIC8qKiBQcmVwYXJlIHRoZSBBcnJheSBkYXRhIHRvIGJlIHNob3duIHRvIHRoZSBlbmQgdXNlciBpbiBjaGF0ICovXG4gICAgZm9yIChjb25zdCBkZXZlbG9wbWVudCBvZiBkZXZlbG9wbWVudHMpIHtcbiAgICAgIGlmIChkZXZlbG9wbWVudC5zcGVjaWFsaXphdGlvbikge1xuICAgICAgICBkZXZlbG9wbWVudC5uYW1lID0gYCR7ZGV2ZWxvcG1lbnQuc3BlY2lhbGl6YXRpb259ICgke2RldmVsb3BtZW50Lm5hbWV9KWBcbiAgICAgIH1cbiAgICAgIGlmIChkZXZlbG9wbWVudC5nYWluID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgIGRldmVsb3BtZW50LmdhaW4gPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWFya2VkRm9yRGV2ZWxvcG1lbnQnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGV2ZWxvcG1lbnQuZ2FpbiA9IGArJHtkZXZlbG9wbWVudC5nYWlufSAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAnQ29DNy5Qb2ludHMnXG4gICAgICAgICl9YFxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2Jvb2svZGV2ZWxvcG1lbnQuaHRtbCdcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHsgZGV2ZWxvcG1lbnRzIH0pXG4gICAgcmV0dXJuIGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZSh7XG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHsgYWN0b3I6IHRoaXMuYWN0b3IgfSksXG4gICAgICBmbGF2b3I6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuR2FpbnNGb3JSZWFkaW5nJywgeyBib29rOiB0aGlzLm5hbWUgfSksXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGF0dGVtcHRTcGVsbExlYXJuaW5nIChpZCkge1xuICAgIGlmICghdGhpcy5pc093bmVkKSB7XG4gICAgICAvKiogVGhpcyBpcyBub3Qgb3duZWQgYnkgYW55IEFjdG9yICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90T3duZWQnKSlcbiAgICB9XG4gICAgaWYgKCF0aGlzLmRhdGEuZGF0YS5pbml0aWFsUmVhZGluZykge1xuICAgICAgLyoqIEFjdG9yIGRpZCBub3QgcGVyZm9ybWVkIGFuIGluaXRpYWwgcmVhZGluZyBmaXJzdCAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5pdGlhbFJlYWRpbmdOZWVkZWQnLCB7XG4gICAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3IubmFtZSxcbiAgICAgICAgICBib29rOiB0aGlzLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICB9XG4gICAgY29uc3Qgc3BlbGwgPSB0aGlzLmRhdGEuZGF0YS5zcGVsbHMuZmluZChzcGVsbCA9PiB7XG4gICAgICByZXR1cm4gc3BlbGwuX2lkID09PSBpZFxuICAgIH0pXG4gICAgaWYgKHNwZWxsKSB7XG4gICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgY2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkXG4gICAgICBjaGVjay5wYXJlbnQgPSB0aGlzLnV1aWRcbiAgICAgIGNoZWNrLmZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTGVhcm5TcGVsbEF0dGVtcHQnLCB7XG4gICAgICAgIGJvb2s6IHRoaXMubmFtZSxcbiAgICAgICAgc3BlbGw6IHNwZWxsLm5hbWVcbiAgICAgIH0pXG4gICAgICBjaGVjay5jb250ZXh0ID0gJ1NQRUxMX0xFQVJOSU5HJ1xuICAgICAgY2hlY2suc3BlbGwgPSBzcGVsbFxuICAgICAgYXdhaXQgY2hlY2sucm9sbENoYXJhY3RlcmlzdGljKCdpbnQnKVxuICAgICAgYXdhaXQgY2hlY2sudG9NZXNzYWdlKClcbiAgICB9XG4gIH1cblxuICAvKiogTGlzdGVuIHRvIGNoYW5nZXMgb24gdGhlIGNoZWNrIGNhcmQgKi9cbiAgYXN5bmMgdXBkYXRlUm9sbCAocm9sbCkge1xuICAgIGNvbnN0IGNoZWNrID0gQ29DN0NoZWNrLmZyb21Sb2xsU3RyaW5nKHJvbGwpXG5cbiAgICAvKiogV2lsbCBrbm93IGlmIHVzZXIgcHVzaCB0aGUgcm9sbCBvciBzcGVuZCBMdWNrICovXG4gICAgaWYgKGNoZWNrLnBhc3NlZCkge1xuICAgICAgaWYgKGNoZWNrLmNvbnRleHQgPT09ICdJTklUSUFMX1JFQURJTkcnKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdyYW50SW5pdGlhbFJlYWRpbmcoKVxuICAgICAgfSBlbHNlIGlmIChjaGVjay5jb250ZXh0ID09PSAnU1BFTExfTEVBUk5JTkcnKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdyYW50U3BlbGxMZWFybmluZyhjaGVjay5zcGVsbClcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEaWNlVGVybSAqL1xuXG5leHBvcnQgY2xhc3MgQ29DN0RlY2FkZXJEaWUgZXh0ZW5kcyBEaWNlVGVybSB7XG4gIGNvbnN0cnVjdG9yICh0ZXJtRGF0YSkge1xuICAgIHN1cGVyKHRlcm1EYXRhKVxuICAgIHRoaXMuZmFjZXMgPSAxMFxuICB9XG5cbiAgZ2V0IHRvdGFsICgpIHtcbiAgICBjb25zdCB0b3RhbCA9IHN1cGVyLnRvdGFsXG4gICAgcmV0dXJuIHRvdGFsID09PSAxMCA/IDAgOiB0b3RhbCAqIDEwXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAvKiogQG92ZXJyaWRlICovXG4gIHN0YXRpYyBnZXQgREVOT01JTkFUSU9OICgpIHtcbiAgICByZXR1cm4gJ3QnXG4gIH1cbn1cbiIsImltcG9ydCB7IENvQzdEZWNhZGVyRGllIH0gZnJvbSAnLi9kZWNhZGVyLWRpZS5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdEZWNhZGVyRGllT3RoZXIgZXh0ZW5kcyBDb0M3RGVjYWRlckRpZSB7XG4gIHN0YXRpYyBnZXQgREVOT01JTkFUSU9OICgpIHtcbiAgICByZXR1cm4gJ28nXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDT05GSUcsIEZvcm1BcHBsaWNhdGlvbiwgZ2FtZSwgbWVyZ2VPYmplY3QgKi9cbmNvbnN0IFNFVFRJTkdTID0ge1xuICBwdWxwUnVsZXM6IHtcbiAgICBuYW1lOiAnJyxcbiAgICBoaW50OiAnJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgaW5pdGlhdGl2ZVJ1bGU6IHtcbiAgICBuYW1lOiAnU0VUVElOR1MuSW5pdGlhdGl2ZVJ1bGUnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5Jbml0aWF0aXZlUnVsZUhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogJ2Jhc2ljJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczoge1xuICAgICAgYmFzaWM6ICdTRVRUSU5HUy5Jbml0aWF0aXZlUnVsZUJhc2ljJyxcbiAgICAgIG9wdGlvbmFsOiAnU0VUVElOR1MuSW5pdGlhdGl2ZVJ1bGVPcHRpb25hbCdcbiAgICB9LFxuICAgIG9uQ2hhbmdlOiBydWxlID0+IF9zZXRJbml0aWF0aXZlT3B0aW9ucyhydWxlKVxuICB9LFxuICBkZXZlbG9wbWVudFJvbGxGb3JMdWNrOiB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLmRldmVsb3BtZW50Um9sbEZvckx1Y2snLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5kZXZlbG9wbWVudFJvbGxGb3JMdWNrSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHB1bHBSdWxlRG91YmxlTWF4SGVhbHRoOiB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkRvdWJsZU1heEhlYWx0aC5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuRG91YmxlTWF4SGVhbHRoLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2s6IHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuRGV2ZWxvcG1lbnRSb2xsTHVjay5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuRGV2ZWxvcG1lbnRSb2xsTHVjay5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgcHVscFJ1bGVBcmNoZXR5cGU6IHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuQXJjaGV0eXBlLk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5BcmNoZXR5cGUuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHB1bHBSdWxlT3JnYW5pemF0aW9uOiB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLk9yZ2FuaXphdGlvbi5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuT3JnYW5pemF0aW9uLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBwdWxwUnVsZVRhbGVudHM6IHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuVGFsZW50cy5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuVGFsZW50cy5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgcHVscFJ1bGVGYXN0ZXJSZWNvdmVyeToge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5GYXN0ZXJSZWNvdmVyeS5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuRmFzdGVyUmVjb3ZlcnkuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHB1bHBSdWxlSWdub3JlTWFqb3JXb3VuZHM6IHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuSWdub3JlTWFqb3JXb3VuZHMuTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLklnbm9yZU1ham9yV291bmRzLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBvcHBvc2VkUm9sbFRpZUJyZWFrZXI6IHtcbiAgICBuYW1lOiAnU0VUVElOR1MuT3Bwb3NlZFJvbGxUaWVCcmVha2VyJyxcbiAgICBoaW50OiAnU0VUVElOR1MuT3Bwb3NlZFJvbGxUaWVCcmVha2VySGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH1cbn1cblxuZnVuY3Rpb24gX3NldEluaXRpYXRpdmVPcHRpb25zIChydWxlKSB7XG4gIGxldCBkZWNpbWFscyA9IDBcbiAgc3dpdGNoIChydWxlKSB7XG4gICAgY2FzZSAnb3B0aW9uYWwnOlxuICAgICAgZGVjaW1hbHMgPSAyXG4gICAgICBicmVha1xuICAgIGNhc2UgJ2Jhc2ljJzpcbiAgICAgIGRlY2ltYWxzID0gMFxuICAgICAgYnJlYWtcbiAgfVxuICBDT05GSUcuQ29tYmF0LmluaXRpYXRpdmUgPSB7XG4gICAgZm9ybXVsYTogbnVsbCxcbiAgICBkZWNpbWFsczogZGVjaW1hbHNcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29DN0dhbWVSdWxlU2V0dGluZ3MgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIHRpdGxlOiAnU0VUVElOR1MuVGl0bGVSdWxlcycsXG4gICAgICBpZDogJ3J1bGVzLXNldHRpbmdzJyxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9zeXN0ZW0vcnVsZS1zZXR0aW5ncy5odG1sJyxcbiAgICAgIHdpZHRoOiA1NTAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJyxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IHRydWVcbiAgICB9KVxuICB9XG5cbiAgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHt9XG4gICAgY29uc3QgcHVscFJ1bGVzID0ge1xuICAgICAgdHJ1ZTogZmFsc2UsXG4gICAgICBmYWxzZTogZmFsc2VcbiAgICB9XG4gICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoU0VUVElOR1MpKSB7XG4gICAgICBvcHRpb25zW2tdID0ge1xuICAgICAgICB2YWx1ZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCBrKSxcbiAgICAgICAgc2V0dGluZzogdlxuICAgICAgfVxuICAgICAgaWYgKGsubWF0Y2goL15wdWxwUnVsZS57Mix9JC8pKSB7XG4gICAgICAgIHB1bHBSdWxlc1tvcHRpb25zW2tdLnZhbHVlXSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgb3B0aW9ucy5wdWxwU2VsZWN0aW9uID0gcHVscFJ1bGVzLnRydWVcbiAgICAgID8gcHVscFJ1bGVzLmZhbHNlXG4gICAgICAgID8gJ3NvbWUnXG4gICAgICAgIDogJ2FsbCdcbiAgICAgIDogJ25vbmUnXG4gICAgcmV0dXJuIG9wdGlvbnNcbiAgfVxuXG4gIHN0YXRpYyByZWdpc3RlclNldHRpbmdzICgpIHtcbiAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhTRVRUSU5HUykpIHtcbiAgICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCBrLCB2KVxuICAgIH1cbiAgICBfc2V0SW5pdGlhdGl2ZU9wdGlvbnMoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaW5pdGlhdGl2ZVJ1bGUnKSlcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sXG4gICAgICAuZmluZCgnI3B1bHBSdWxlc1NlbGVjdCcpXG4gICAgICAub24oJ2NoYW5nZScsIGV2ZW50ID0+IHRoaXMub25DaGFuZ2VQdWxwU2VsZWN0KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnaW5wdXQucHVscFJ1bGVzU2VsZWN0W3R5cGU9Y2hlY2tib3hdJylcbiAgICAgIC5vbignY2xpY2snLCBldmVudCA9PiB0aGlzLm9uQ2xpY2tQdWxwKGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnYnV0dG9uW25hbWU9cmVzZXRdJylcbiAgICAgIC5vbignY2xpY2snLCBldmVudCA9PiB0aGlzLm9uUmVzZXREZWZhdWx0cyhldmVudCkpXG4gIH1cblxuICBvbkNoYW5nZVB1bHBTZWxlY3QgKGV2ZW50KSB7XG4gICAgY29uc3QgdmFsID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS52YWwoKVxuICAgIGlmICh2YWwgPT09ICdub25lJyB8fCB2YWwgPT09ICdhbGwnKSB7XG4gICAgICAkKCcjcnVsZXMtc2V0dGluZ3MnKVxuICAgICAgICAuZmluZCgnaW5wdXQucHVscFJ1bGVzU2VsZWN0W3R5cGU9Y2hlY2tib3hdJylcbiAgICAgICAgLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gJCh0aGlzKVxuICAgICAgICAgIGlmICh2YWwgPT09ICdub25lJykge1xuICAgICAgICAgICAgY2hlY2tib3gucHJvcCgnY2hlY2tlZCcsIGZhbHNlKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGVja2JveC5wcm9wKCdjaGVja2VkJywgdHJ1ZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgb25DbGlja1B1bHAgKGV2ZW50KSB7XG4gICAgY29uc3QgcHVscFJ1bGVzID0ge1xuICAgICAgdHJ1ZTogZmFsc2UsXG4gICAgICBmYWxzZTogZmFsc2VcbiAgICB9XG4gICAgJCgnI3J1bGVzLXNldHRpbmdzJylcbiAgICAgIC5maW5kKCdpbnB1dC5wdWxwUnVsZXNTZWxlY3RbdHlwZT1jaGVja2JveF0nKVxuICAgICAgLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBjaGVja2JveCA9ICQodGhpcylcbiAgICAgICAgaWYgKGNoZWNrYm94LnByb3AoJ2NoZWNrZWQnKSkge1xuICAgICAgICAgIHB1bHBSdWxlcy50cnVlID0gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHB1bHBSdWxlcy5mYWxzZSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAkKCcjcHVscFJ1bGVzU2VsZWN0JykudmFsKFxuICAgICAgcHVscFJ1bGVzLnRydWUgPyAocHVscFJ1bGVzLmZhbHNlID8gJ3NvbWUnIDogJ2FsbCcpIDogJ25vbmUnXG4gICAgKVxuICB9XG5cbiAgYXN5bmMgb25SZXNldERlZmF1bHRzIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBmb3IgYXdhaXQgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhTRVRUSU5HUykpIHtcbiAgICAgIGF3YWl0IGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3Jywgaywgdj8uZGVmYXVsdClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyKClcbiAgfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBkYXRhKSB7XG4gICAgY29uc3QgcHVscFJ1bGVzID0ge1xuICAgICAgdHJ1ZTogZmFsc2UsXG4gICAgICBmYWxzZTogZmFsc2VcbiAgICB9XG4gICAgZm9yIGF3YWl0IChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoU0VUVElOR1MpKSB7XG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsIGtleSwgZGF0YVtrZXldKVxuICAgICAgaWYgKGtleS5tYXRjaCgvXnB1bHBSdWxlLnsyLH0kLykpIHtcbiAgICAgICAgcHVscFJ1bGVzW2RhdGFba2V5XV0gPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlcycsIHB1bHBSdWxlcy50cnVlICYmICFwdWxwUnVsZXMuZmFsc2UpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBkdXBsaWNhdGUsIGV4cGFuZE9iamVjdCwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCAqL1xuXG4vLyBpbXBvcnQgIHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcyc7XG4vLyBpbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uLy4uL2FjdG9ycy9hY3Rvci5qcyc7XG5cbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbS5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdBcmNoZXR5cGVTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcbiAgICogQHBhcmFtIGh0bWwge0hUTUx9ICAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxuICAgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyBvbmx5IG5lZWRlZCBpZiB0aGUgc2hlZXQgaXMgZWRpdGFibGVcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0gLml0ZW0tbmFtZSBoNCcpXG4gICAgICAuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtU3VtbWFyeShldmVudCwgJ3NraWxscycpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbS1kZWxldGUnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbURlbGV0ZShldmVudCwgJ3NraWxscycpKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQsIHR5cGUgPSAnc2tpbGwnLCBjb2xsZWN0aW9uTmFtZSA9ICdza2lsbHMnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsICdJdGVtJylcblxuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLml0ZW0uZGF0YS5kYXRhW2NvbGxlY3Rpb25OYW1lXVxuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YVtjb2xsZWN0aW9uTmFtZV0pXG4gICAgICA6IFtdXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGFMaXN0KSB7XG4gICAgICBpZiAoIWl0ZW0gfHwgIWl0ZW0uZGF0YSkgY29udGludWVcbiAgICAgIGlmICghW3R5cGVdLmluY2x1ZGVzKGl0ZW0uZGF0YS50eXBlKSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgICAgaWYgKCFDb0M3SXRlbS5pc0FueVNwZWMoaXRlbSkpIHtcbiAgICAgICAgaWYgKGNvbGxlY3Rpb24uZmluZChlbCA9PiBlbC5uYW1lID09PSBpdGVtLmRhdGEubmFtZSkpIHtcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbGxlY3Rpb24ucHVzaChkdXBsaWNhdGUoaXRlbS5kYXRhKSlcbiAgICB9XG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgZGF0YS4ke2NvbGxlY3Rpb25OYW1lfWBdOiBjb2xsZWN0aW9uIH0pXG4gIH1cblxuICBfb25JdGVtU3VtbWFyeSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW0uZGF0YS5kYXRhW2NvbGxlY3Rpb25OYW1lXS5maW5kKHMgPT4ge1xuICAgICAgcmV0dXJuIHMuX2lkID09PSBsaS5kYXRhKCdpdGVtLWlkJylcbiAgICB9KVxuICAgIGNvbnN0IGNoYXREYXRhID0gaXRlbS5kYXRhLmRlc2NyaXB0aW9uXG5cbiAgICAvLyBUb2dnbGUgc3VtbWFyeVxuICAgIGlmIChsaS5oYXNDbGFzcygnZXhwYW5kZWQnKSkge1xuICAgICAgY29uc3Qgc3VtbWFyeSA9IGxpLmNoaWxkcmVuKCcuaXRlbS1zdW1tYXJ5JylcbiAgICAgIHN1bW1hcnkuc2xpZGVVcCgyMDAsICgpID0+IHN1bW1hcnkucmVtb3ZlKCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRpdiA9ICQoYDxkaXYgY2xhc3M9XCJpdGVtLXN1bW1hcnlcIj4ke2NoYXREYXRhLnZhbHVlfTwvZGl2PmApXG4gICAgICBjb25zdCBwcm9wcyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXByb3BlcnRpZXNcIj48L2Rpdj4nKVxuICAgICAgLy8gZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLnByb3BlcnRpZXMpIHsgcHJvcHMuYXBwZW5kKGA8c3BhbiBjbGFzcz1cInRhZ1wiPiR7cH08L3NwYW4+YCkgfVxuICAgICAgZGl2LmFwcGVuZChwcm9wcylcbiAgICAgIGxpLmFwcGVuZChkaXYuaGlkZSgpKVxuICAgICAgZGl2LnNsaWRlRG93bigyMDApXG4gICAgfVxuICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gIH1cblxuICBhc3luYyBfb25JdGVtRGVsZXRlIChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgY29uc3QgaXRlbUluZGV4ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpLmRhdGEoJ2l0ZW0taWQnKVxuICAgIGlmIChpdGVtSW5kZXgpIGF3YWl0IHRoaXMucmVtb3ZlSXRlbShpdGVtSW5kZXgsIGNvbGxlY3Rpb25OYW1lKVxuICB9XG5cbiAgYXN5bmMgcmVtb3ZlSXRlbSAoaXRlbUlkLCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBjb25zdCBpdGVtSW5kZXggPSB0aGlzLml0ZW0uZGF0YS5kYXRhW2NvbGxlY3Rpb25OYW1lXS5maW5kSW5kZXgocyA9PiB7XG4gICAgICByZXR1cm4gcy5faWQgPT09IGl0ZW1JZFxuICAgIH0pXG4gICAgaWYgKGl0ZW1JbmRleCA+IC0xKSB7XG4gICAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLmRhdGEuZGF0YVtjb2xsZWN0aW9uTmFtZV1cbiAgICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YVtjb2xsZWN0aW9uTmFtZV0pXG4gICAgICAgIDogW11cbiAgICAgIGNvbGxlY3Rpb24uc3BsaWNlKGl0ZW1JbmRleCwgMSlcbiAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyBbYGRhdGEuJHtjb2xsZWN0aW9uTmFtZX1gXTogY29sbGVjdGlvbiB9KVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ29jY3VwYXRpb24nXSxcbiAgICAgIHdpZHRoOiA1MjAsXG4gICAgICBoZWlnaHQ6IDQ4MCxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuaXRlbScgfV0sXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvYXJjaGV0eXBlLmh0bWwnXG4gIH1cblxuICBfb25EcmFnU3RhcnQgKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuaXRlbS5kYXRhLmRhdGEuc2tpbGxzLmZpbmQocyA9PiB7XG4gICAgICByZXR1cm4gcy5faWQgPT09IGxpLmRhdGFzZXQuaXRlbUlkXG4gICAgfSlcblxuICAgIGNvbnN0IGRyYWdEYXRhID0geyB0eXBlOiAnSXRlbScsIGRhdGE6IHNraWxsIH1cbiAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRyYWdEYXRhKSlcbiAgfVxuXG4gIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIC8qKiBNT0RJRjogMC44LnggKiovXG4gICAgY29uc3QgaXRlbURhdGEgPSBkYXRhLmRhdGFcbiAgICBkYXRhLmRhdGEgPSBpdGVtRGF0YS5kYXRhIC8vIE1PRElGOiAwLjgueCBkYXRhLmRhdGFcbiAgICAvKioqKioqKioqKioqKioqKiovXG5cbiAgICBkYXRhLmlzT3duZWQgPSB0aGlzLml0ZW0uaXNPd25lZFxuXG4gICAgY29uc3QgY29yZUNoYXJhY3RlcmlzdGljcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCBzZWxlY3RlZF0gb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICBkYXRhLmRhdGEuY29yZUNoYXJhY3RlcmlzdGljc1xuICAgICkpIHtcbiAgICAgIGlmIChzZWxlY3RlZCkge1xuICAgICAgICBjb25zdCBjaGFyYWNOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKGBDSEFSQUMuJHtrZXkudG9VcHBlckNhc2UoKX1gKVxuICAgICAgICBjb3JlQ2hhcmFjdGVyaXN0aWNzLnB1c2goY2hhcmFjTmFtZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBkYXRhLnNraWxsTGlzdEVtcHR5ID0gZGF0YS5kYXRhLnNraWxscy5sZW5ndGggPT09IDBcblxuICAgIGRhdGEuZGF0YS5za2lsbHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgcmV0dXJuIGEubmFtZVxuICAgICAgICAudG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgICAubG9jYWxlQ29tcGFyZShiLm5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKSlcbiAgICB9KVxuXG4gICAgZGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzU3RyaW5nID0gJydcbiAgICBjb25zdCBvclN0cmluZyA9IGAgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT3InKX0gYFxuICAgIGlmIChjb3JlQ2hhcmFjdGVyaXN0aWNzLmxlbmd0aCkge1xuICAgICAgZGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzU3RyaW5nICs9IGNvcmVDaGFyYWN0ZXJpc3RpY3Muam9pbihvclN0cmluZylcbiAgICB9XG5cbiAgICBkYXRhLml0ZW1Qcm9wZXJ0aWVzID0gW11cblxuICAgIGRhdGEuaXRlbVByb3BlcnRpZXMucHVzaChcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QdWxwVGFsZW50cycpfTogJHtkYXRhLmRhdGEudGFsZW50c31gXG4gICAgKVxuICAgIGRhdGEuaXRlbVByb3BlcnRpZXMucHVzaChcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Cb251c1BvaW50cycpfTogJHtkYXRhLmRhdGEuYm9udXNQb2ludHN9YFxuICAgIClcblxuICAgIC8vIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmRhdGEudHlwZSkpIHtcbiAgICAvLyAgIGlmKCB2YWx1ZSkgZGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKCBDT0M3Lm9jY3VwYXRpb25Qcm9wZXJ0aWVzW2tleV0/Q09DNy5vY2N1cGF0aW9uUHJvcGVydGllc1trZXldOm51bGwpO1xuICAgIC8vIH1cblxuICAgIGRhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICAvLyBUT0RPOiBUaGlzIGNhbiBiZSByZW1vdmVkIG9uY2UgMC43LnggaXMgcmVsZWFzZSBjaGFubmVsXG4gICAgaWYgKCFmb3JtRGF0YS5kYXRhKSBmb3JtRGF0YSA9IGV4cGFuZE9iamVjdChmb3JtRGF0YSlcblxuICAgIGlmIChmb3JtRGF0YS5kYXRhLmdyb3Vwcykge1xuICAgICAgZm9ybURhdGEuZGF0YS5ncm91cHMgPSBPYmplY3QudmFsdWVzKGZvcm1EYXRhLmRhdGE/Lmdyb3VwcyB8fCB7fSlcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLml0ZW0uZGF0YS5kYXRhLmdyb3Vwcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgZm9ybURhdGEuZGF0YS5ncm91cHNbaW5kZXhdLnNraWxscyA9IGR1cGxpY2F0ZShcbiAgICAgICAgICB0aGlzLml0ZW0uZGF0YS5kYXRhLmdyb3Vwc1tpbmRleF0uc2tpbGxzXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzdXBlci5fdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGR1cGxpY2F0ZSwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCAqL1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdCb29rU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9ib29rL21haW4uaHRtbCcsXG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnaXRlbScsICdib29rJ10sXG4gICAgICB3aWR0aDogNTAwLFxuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5zcGVsbHMnLCBkcm9wU2VsZWN0b3I6IG51bGwgfV0sXG4gICAgICBzY3JvbGxZOiBbJy5ib2R5J10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBzdXBlci5nZXREYXRhKClcbiAgICBjb25zdCBpdGVtRGF0YSA9IGRhdGEuZGF0YVxuICAgIGRhdGEuZGF0YSA9IGl0ZW1EYXRhLmRhdGFcbiAgICBkYXRhLmluaXRpYWxSZWFkaW5nID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5pbml0aWFsUmVhZGluZ1xuICAgIGRhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIGRhdGEuaXNPd25lciA9IHRoaXMuaXRlbS5pc093bmVyXG4gICAgZGF0YS5zcGVsbHNMZWFybmVkID0gdGhpcy5zcGVsbHNMZWFybmVkXG4gICAgZGF0YS5leGhhdXN0ZWQgPSAoYXdhaXQgdGhpcy5pdGVtLmNoZWNrRXhoYXVzdGlvbigpKSAhPT0gZmFsc2VcbiAgICBkYXRhLnN0dWR5Q29tcGxldGVkID1cbiAgICAgIHRoaXMuaXRlbS5kYXRhLmRhdGEuc3R1ZHkucHJvZ3Jlc3MgPT09IHRoaXMuaXRlbS5kYXRhLmRhdGEuc3R1ZHkubmVjZXNzYXJ5XG5cbiAgICBkYXRhLnNwZWxsTGlzdEVtcHR5ID0gZGF0YS5kYXRhLnNwZWxscy5sZW5ndGggPT09IDBcblxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBnZXQgc3BlbGxzTGVhcm5lZCAoKSB7XG4gICAgbGV0IGFtb3VudCA9IDBcbiAgICBjb25zdCBzcGVsbHMgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLnNwZWxsc1xuICAgIGZvciAoY29uc3Qgc3BlbGwgb2Ygc3BlbGxzKSB7XG4gICAgICBpZiAoc3BlbGwuZGF0YS5sZWFybmVkKSBhbW91bnQrK1xuICAgIH1cbiAgICByZXR1cm4gYCR7YW1vdW50fSAvICR7c3BlbGxzLmxlbmd0aH1gXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5maW5kKCcjYXR0ZW1wdC1pbml0aWFsLXJlYWRpbmcnKS5jbGljayhldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICB0aGlzLml0ZW0uYXR0ZW1wdEluaXRpYWxSZWFkaW5nKClcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLmRlbGV0ZS1zcGVsbCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uRGVsZXRlKGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy5lZGl0LXNwZWxsJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25TcGVsbERldGFpbChldmVudCkpXG4gICAgaHRtbC5maW5kKCcuc3BlbGwtbmFtZScpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uU3BlbGxEZXRhaWwoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnLnRlYWNoLXNwZWxsJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgY29uc3QgaWQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJ2xpJykuZGF0YSgnaWQnKVxuICAgICAgdGhpcy5pdGVtLmF0dGVtcHRTcGVsbExlYXJuaW5nKGlkKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCdbbmFtZT1cImRhdGEuc3R1ZHkubmVjZXNzYXJ5XCJdJykuY2hhbmdlKGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgIHRoaXMuaXRlbS5jaGFuZ2VQcm9ncmVzcygncmVzZXQnLCB2YWx1ZSlcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnI2luY3JlYXNlLXByb2dyZXNzJykuY2xpY2soKCkgPT4ge1xuICAgICAgdGhpcy5pdGVtLmNoYW5nZVByb2dyZXNzKCdpbmNyZWFzZScpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJyNkZWNyZWFzZS1wcm9ncmVzcycpLmNsaWNrKCgpID0+IHtcbiAgICAgIHRoaXMuaXRlbS5jaGFuZ2VQcm9ncmVzcygnZGVjcmVhc2UnKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcuYWRkLW90aGVyLWdhaW5zJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgdGhpcy5tb2RpZnlPdGhlcnNHYWlucyhldmVudCwgJ2FkZCcpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJy5jaGFuZ2Utb3RoZXItZ2FpbnMnKS5jaGFuZ2UoZXZlbnQgPT4ge1xuICAgICAgdGhpcy5tb2RpZnlPdGhlcnNHYWlucyhldmVudCwgJ2NoYW5nZScpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJyNyZWRvLWZ1bGwtc3R1ZHknKS5jbGljaygoKSA9PiB7XG4gICAgICB0aGlzLml0ZW0ucmVkb0Z1bGxTdHVkeSgpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJy5yZW1vdmUtb3RoZXItZ2FpbnMnKS5jbGljayhldmVudCA9PiB7XG4gICAgICB0aGlzLm1vZGlmeU90aGVyc0dhaW5zKGV2ZW50LCAncmVtb3ZlJylcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLm9wdGlvbicpLmNsaWNrKGV2ZW50ID0+IHRoaXMubW9kaWZ5VHlwZShldmVudCkpXG4gIH1cblxuICBhc3luYyBfb25TcGVsbERldGFpbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgZWxlbWVudCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICAvKiogQHNlZSBkYXRhLWluZGV4IHByb3BlcnR5IG9uIHRlbXBsYXRlICovXG4gICAgY29uc3QgaW5kZXggPSBlbGVtZW50LnBhcmVudHMoJ2xpJykuZGF0YSgnaW5kZXgnKVxuICAgIHJldHVybiBhd2FpdCB0aGlzLml0ZW0uc3BlbGxEZXRhaWwoaW5kZXgpXG4gIH1cblxuICAvKipcbiAgICogSXQgaXMgY2FsbGVkIGV2ZXJ5IHRpbWUgdGhlIHVzZXIgZGVsZXRlIGEgc3BlbGwgb24gdGhlIHNoZWV0XG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBfb25EZWxldGUgKGV2ZW50KSB7XG4gICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkgcmV0dXJuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGVsZW1lbnQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgLyoqIEBzZWUgZGF0YS1pbmRleCBwcm9wZXJ0eSBvbiB0ZW1wbGF0ZSAqL1xuICAgIGNvbnN0IGluZGV4ID0gZWxlbWVudC5wYXJlbnRzKCdsaScpLmRhdGEoJ2luZGV4JylcbiAgICAvKiogQWx3YXlzIGhhcyB0byBiZSBAdHlwZSB7QXJyYXl9ICovXG4gICAgY29uc3Qgc3BlbGxzID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5zcGVsbHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEuc3BlbGxzKVxuICAgICAgOiBbXVxuICAgIGlmIChpbmRleCA+PSAwKSBzcGVsbHMuc3BsaWNlKGluZGV4LCAxKVxuICAgIHJldHVybiBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEuc3BlbGxzJzogc3BlbGxzIH0pXG4gIH1cblxuICAvKipcbiAgICogSXQgaXMgY2FsbGVkIGV2ZXJ5IHRpbWUgdGhlIHVzZXIgZHJhZ3MgYW4gaXRlbSB0byB0aGUgc2hlZXRcbiAgICogRmlsdGVycyBvbmx5ICdzcGVsbCcgaXRlbXMgYW5kIGluc2VydHMgdGhlbSBpbiBhIEB0eXBlIHtBcnJheX1cbiAgICogQHBhcmFtIHtqUXVlcnl9IGV2ZW50IEBzZWUgYWN0aXZhdGVMaXN0ZW5lcnNcbiAgICogQHJldHVybnMge1Byb21pc2UuPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50LCB0eXBlID0gJ3NwZWxsJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAvKiogUHJldmVudHMgcHJvcGFnYXRpb24gb2YgdGhlIHNhbWUgZXZlbnQgZnJvbSBiZWluZyBjYWxsZWQgKi9cbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCAnSXRlbScpXG5cbiAgICBjb25zdCBzcGVsbHMgPSBbXVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhTGlzdCkge1xuICAgICAgaWYgKCFpdGVtIHx8ICFbJ3NraWxsJywgJ3NwZWxsJ10uaW5jbHVkZXMoaXRlbS5kYXRhLnR5cGUpKSBjb250aW51ZVxuICAgICAgaWYgKGl0ZW0uZGF0YS50eXBlID09PSAnc3BlbGwnKSB7XG4gICAgICAgIHNwZWxscy5wdXNoKGl0ZW0uZGF0YSlcbiAgICAgIH0gZWxzZSBpZiAoaXRlbS5kYXRhLnR5cGUgPT09ICdza2lsbCcgJiYgdGhpcy5pdGVtLmRhdGEuZGF0YS50eXBlLm90aGVyKSB7XG4gICAgICAgIHRoaXMubW9kaWZ5T3RoZXJzR2FpbnMobnVsbCwgJ2FkZCcsIHsgbmFtZTogaXRlbS5uYW1lIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuaXRlbS5hZGRTcGVsbHMoc3BlbGxzKVxuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSB0aGUgY2hlY2tib3hlcyBmb3IgdHlwZSB3aGVuIHVzZXIgY2xpY2tzIG9uIHRoZSBjb3JyZXNwb25kaW5nXG4gICAqIGxhYmVsLCBub3Qgc3VyZSBpZiB0aGlzIHdvcmtzIG9uIGVuZ2luZXMgb3RoZXIgdGhhbiBWOFxuICAgKiBAcGFyYW0ge2pRdWVyeX0gZXZlbnQgQHNlZSBhY3RpdmF0ZUxpc3RlbmVyc1xuICAgKiBAcmV0dXJucyB7alF1ZXJ5LkV2ZW50fSBjbGlja1xuICAgKi9cbiAgbW9kaWZ5VHlwZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLyoqIFByZXZlbnRzIHByb3BhZ2F0aW9uIG9mIHRoZSBzYW1lIGV2ZW50IGZyb20gYmVpbmcgY2FsbGVkICovXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBjb25zdCB0b2dnbGVTd2l0Y2ggPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgcmV0dXJuIHRvZ2dsZVN3aXRjaC5wcmV2KCkudHJpZ2dlcignY2xpY2snKVxuICB9XG5cbiAgLyoqXG4gICAqIE1vZGlmeSBJdGVtIGRhdGEgYmFzZWQgb24gdXNlciBpbnRlcmFjdGlvbnMgd2l0aCB0aGUgb3RoZXIgc2tpbGxcbiAgICogZ2FpbnMgdGFibGUgb24gZGV0YWlscyB0YWIgb24gdGhpcyBzaGVldFxuICAgKiBAcGFyYW0ge2pRdWVyeX0gZXZlbnQgQHNlZSBhY3RpdmF0ZUxpc3RlbmVyc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZSAnYWRkJyB8fCAnY2hhbmdlJyB8fCAncmVtb3ZlJ1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBtb2RpZnlPdGhlcnNHYWlucyAoZXZlbnQsIG1vZGUsIG9wdGlvbnMgPSB7fSkge1xuICAgIC8qKiBObyBuZWVkIHRvIGNoZWNrIGlmIHVzZXIgaXMgR00gYmVjYXVzZSBvbmx5IHRoZXkgY2FuIHNlZSBkZXRhaWxzIHRhYiAqL1xuICAgIGxldCBpbmRleCA9IG51bGxcbiAgICBsZXQgZWxlbWVudCA9IG51bGxcbiAgICBpZiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIGVsZW1lbnQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgICAvKiogQHNlZSBkYXRhLWluZGV4IHByb3BlcnR5IG9uIHRlbXBsYXRlICovXG4gICAgICBpbmRleCA9IGVsZW1lbnQucGFyZW50cygndHInKS5kYXRhKCdpbmRleCcpXG4gICAgICAvKiogQWx3YXlzIGhhcyB0byBiZSBAdHlwZSB7QXJyYXl9ICovXG4gICAgfVxuICAgIGNvbnN0IHNraWxscyA9IHRoaXMuaXRlbS5kYXRhLmRhdGEuZ2FpbnMub3RoZXJzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLmdhaW5zLm90aGVycylcbiAgICAgIDogW11cbiAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgIGNhc2UgJ2FkZCc6XG4gICAgICAgIC8qKiBVc2VyIGNsaWNrZWQgb24gcGx1cyBpY29uIHRvIGFkZCBhIG5ldyBza2lsbCBvbiBvdGhlciBnYWlucyB0YWJsZSAqL1xuICAgICAgICBza2lsbHMucHVzaCh7XG4gICAgICAgICAgLyoqIG5ldyBza2lsbCAqL1xuICAgICAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSB8fCBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTmV3U2tpbGxOYW1lJyksXG4gICAgICAgICAgLyoqIGRldmVsb3BtZW50IGJ5IGRlZmF1bHQsIHZhbHVlIGNhbiBhbHNvIGJlIDFkNiBvciAxZDEwICovXG4gICAgICAgICAgdmFsdWU6ICdkZXZlbG9wbWVudCdcbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2NoYW5nZSc6XG4gICAgICAgIC8qKiBVc2VyIGNoYW5nZWQgbmFtZSAoaW5wdXQpIG9yIHZhbHVlIChzZWxlY3QpIG9mIGEgc2tpbGwgb24gdGFibGUgKi9cbiAgICAgICAgc2tpbGxzW2luZGV4XSA9IHtcbiAgICAgICAgICBuYW1lOiBlbGVtZW50LmlzKCdpbnB1dCcpID8gZWxlbWVudC52YWwoKSA6IHNraWxsc1tpbmRleF0ubmFtZSxcbiAgICAgICAgICB2YWx1ZTogZWxlbWVudC5pcygnc2VsZWN0JykgPyBlbGVtZW50LnZhbCgpIDogc2tpbGxzW2luZGV4XS52YWx1ZVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdyZW1vdmUnOlxuICAgICAgICAvKiogVXNlciBjbGlja2VkIG9uIG1pbnVzIGljb24gdG8gcmVtb3ZlIGEgc2tpbGwgb24gb3RoZXIgZ2FpbnMgdGFibGUgKi9cbiAgICAgICAgaWYgKGluZGV4ID49IDApIHNraWxscy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEuZ2FpbnMub3RoZXJzJzogc2tpbGxzIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBBY3RvclNoZWV0LCBDT05TVCwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgbWVyZ2VPYmplY3QgKi9cbmltcG9ydCB7IENvQzdQYXJzZXIgfSBmcm9tICcuLi8uLi9hcHBzL3BhcnNlci5qcydcbmV4cG9ydCBjbGFzcyBDb0M3Q29udGFpbmVyU2hlZXQgZXh0ZW5kcyBBY3RvclNoZWV0IHtcbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSA1ZSBBY3RvciBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnYWN0b3InLCAnc3RvcmFnZSddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9zdG9yYWdlLXNoZWV0Lmh0bWwnLFxuICAgICAgd2lkdGg6IDY3MixcbiAgICAgIGhlaWdodDogNzY1LFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5pdGVtJywgZHJvcFNlbGVjdG9yOiBudWxsIH1dLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2JyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2l0ZW1zJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3BGb2xkZXIgKGV2ZW50LCBkYXRhKSB7XG4gICAgaWYgKCF0aGlzLmFjdG9yLmlzT3duZXIpIHJldHVybiBbXVxuICAgIGlmIChkYXRhLmRvY3VtZW50TmFtZSAhPT0gJ0l0ZW0nKSByZXR1cm4gW11cbiAgICBjb25zdCBmb2xkZXIgPSBnYW1lLmZvbGRlcnMuZ2V0KGRhdGEuaWQpXG4gICAgaWYgKCFmb2xkZXIpIHJldHVybiBbXVxuICAgIGNvbnN0IGl0ZW1zID0gZm9sZGVyLmNvbnRlbnRzXG4gICAgICAuZmlsdGVyKGl0ZW0gPT4gWydib29rJywgJ2l0ZW0nLCAnc3BlbGwnLCAnd2VhcG9uJ10uaW5jbHVkZXMoaXRlbS50eXBlKSlcbiAgICAgIC5tYXAoaXRlbSA9PiBpdGVtLnRvSlNPTigpKVxuICAgIGlmIChpdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICBhd2FpdCB0aGlzLmFjdG9yLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgaXRlbXMpXG4gICAgfVxuICB9XG5cbiAgb25DbG9zZVNoZWV0ICgpIHt9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGRhdGEuZGF0YVxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgc2hlZXREYXRhLmVkaXRhYmxlID0gdGhpcy5pc0VkaXRhYmxlXG5cbiAgICBzaGVldERhdGEuaXRlbXNCeVR5cGUgPSB7fVxuICAgIGlmIChkYXRhLml0ZW1zKSB7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGF0YS5pdGVtcykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChcbiAgICAgICAgICAgIHNoZWV0RGF0YS5pdGVtc0J5VHlwZSxcbiAgICAgICAgICAgIGl0ZW0udHlwZVxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlW2l0ZW0udHlwZV0gPSBbXVxuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5pdGVtc0J5VHlwZVtpdGVtLnR5cGVdLnB1c2goaXRlbSlcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgaXRlbVR5cGUgaW4gc2hlZXREYXRhLml0ZW1zQnlUeXBlKSB7XG4gICAgICAgIHNoZWV0RGF0YS5pdGVtc0J5VHlwZVtpdGVtVHlwZV0uc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgIHJldHVybiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgc2hlZXREYXRhLmFsbG93VW5sb2NrID1cbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3BsYXllclVubG9ja1NoZWV0TW9kZScpID09PSAnYWx3YXlzJyB8fFxuICAgICAgZ2FtZS51c2VyLmlzR01cblxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ2l0ZW0nKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ2Jvb2snKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdzcGVsbCcpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuZmxhZ3MubG9ja2VkXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlUYWxlbnRzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICd0YWxlbnQnKSB8fFxuICAgICAgKCFzaGVldERhdGEuZGF0YS5mbGFncy5sb2NrZWQgJiZcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVUYWxlbnRzJykpXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlXZWFwb25zID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICd3ZWFwb24nKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLmZsYWdzLmxvY2tlZFxuXG4gICAgc2hlZXREYXRhLmhhc0ludmVudG9yeSA9XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUl0ZW1zIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUJvb2tzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlUYWxlbnRzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVdlYXBvbnNcblxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWwuZmluZCgnLml0ZW0tZWRpdCcpLmNsaWNrKGV2ID0+IHtcbiAgICAgIGNvbnN0IGxpID0gJChldi5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJykpXG4gICAgICBpdGVtLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5pbnZlbnRvcnktaGVhZGVyJykuY2xpY2sodGhpcy5fb25JbnZlbnRvcnlIZWFkZXIuYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnLml0ZW0tdHJhZGUnKS5jbGljayh0aGlzLl9vblRyYWRlSXRlbS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnNob3ctZGV0YWlsJykuY2xpY2sodGhpcy5fb25JdGVtU3VtbWFyeS5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCcuaXRlbS1kZWxldGUnKS5jbGljayhhc3luYyBldiA9PiB7XG4gICAgICBjb25zdCBsaSA9ICQoZXYuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgICAgY29uc3QgaXRlbVRvRGVsZXRlID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJyksIHtcbiAgICAgICAgc3RyaWN0OiB0cnVlXG4gICAgICB9KVxuICAgICAgYXdhaXQgaXRlbVRvRGVsZXRlLmRlbGV0ZSgpXG4gICAgICBsaS5zbGlkZVVwKDIwMCwgKCkgPT4gdGhpcy5yZW5kZXIoZmFsc2UpKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5hZGQtaXRlbScpLmNsaWNrKGV2ID0+IHtcbiAgICAgIHN3aXRjaCAoZXYuY3VycmVudFRhcmdldC5kYXRhc2V0LnR5cGUpIHtcbiAgICAgICAgY2FzZSAnYm9vayc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eUJvb2soZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnaXRlbSc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eUl0ZW0oZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnc2tpbGwnOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlTa2lsbChldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdzcGVsbCc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eVNwZWxsKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3dlYXBvbic6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eVdlYXBvbihldilcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5sb2NrJykuY2xpY2sodGhpcy5fb25Mb2NrQ2xpY2tlZC5iaW5kKHRoaXMpKVxuICB9XG5cbiAgYXN5bmMgX29uTG9ja0NsaWNrZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGlzTG9ja2VkID0gdGhpcy5hY3Rvci5sb2NrZWRcbiAgICB0aGlzLmFjdG9yLmxvY2tlZCA9ICFpc0xvY2tlZFxuICB9XG5cbiAgYXN5bmMgX29uVHJhZGVJdGVtIChldmVudCkge1xuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW1JZCcpKVxuICAgIGxldCBjb250ZW50ID0gJzxwPicgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZVNlbGVjdFVzZXJUb0dpdmVUbycpXG4gICAgY29uc3QgbWVzc2FnZSA9IHtcbiAgICAgIGFjdG9yRnJvbTogdGhpcy5hY3Rvci5pZCxcbiAgICAgIHNjZW5lOiBudWxsLFxuICAgICAgYWN0b3JUbzogdGhpcy5hY3Rvci5pZCxcbiAgICAgIGl0ZW06IGl0ZW0uaWRcbiAgICB9XG4gICAgaWYgKHRoaXMudG9rZW4/LmFjdG9yKSB7XG4gICAgICBtZXNzYWdlLmFjdG9yRnJvbSA9IHRoaXMudG9rZW4uaWRcbiAgICAgIG1lc3NhZ2Uuc2NlbmUgPSB0aGlzLnRva2VuLnBhcmVudC5pZFxuICAgIH1cbiAgICBjb25zdCBhY3RvcnMgPSBnYW1lLmFjdG9ycy5maWx0ZXIoZSA9PiB7XG4gICAgICBpZiAoIVsnY2hhcmFjdGVyJywgJ25wYycsICdjcmVhdHVyZScsICdjb250YWluZXInXS5pbmNsdWRlcyhlLnR5cGUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYWN0b3IuaWQgPT09IGUuaWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBsZXQgdmlzaWJsZSA9IGZhbHNlXG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhlLmRhdGEucGVybWlzc2lvbikpIHtcbiAgICAgICAgaWYgKGsgPT09ICdkZWZhdWx0JyB8fCBrID09PSBnYW1lLnVzZXIuaWQpIHtcbiAgICAgICAgICB2aXNpYmxlID1cbiAgICAgICAgICAgIHZpc2libGUgfHxcbiAgICAgICAgICAgIHYgIT09XG4gICAgICAgICAgICAgIChDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTIHx8IENPTlNULkVOVElUWV9QRVJNSVNTSU9OUykuTk9ORVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdmlzaWJsZVxuICAgIH0pXG4gICAgY29udGVudCA9IGNvbnRlbnQgKyAnPGZvcm0gaWQ9XCJzZWxlY3Rmb3JtXCI+PHNlbGVjdCBuYW1lPVwidXNlclwiPidcbiAgICBmb3IgKGNvbnN0IGFjdG9yIG9mIGFjdG9ycykge1xuICAgICAgY29udGVudCA9XG4gICAgICAgIGNvbnRlbnQgKyAnPG9wdGlvbiB2YWx1ZT1cIicgKyBhY3Rvci5pZCArICdcIj4nICsgYWN0b3IubmFtZSArICc8L29wdGlvbj4nXG4gICAgfVxuICAgIGNvbnRlbnQgPSBjb250ZW50ICsgJzwvc2VsZWN0PjwvZm9ybT48L3A+J1xuICAgIGF3YWl0IERpYWxvZy5wcm9tcHQoe1xuICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlVGl0bGVTZWxlY3RVc2VyVG9HaXZlVG8nKSxcbiAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICBjYWxsYmFjazogaHRtbCA9PiB7XG4gICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3NlbGVjdGZvcm0nKSlcbiAgICAgICAgZm9yIChjb25zdCBbbmFtZSwgdmFsdWVdIG9mIGZvcm1EYXRhKSB7XG4gICAgICAgICAgaWYgKG5hbWUgPT09ICd1c2VyJykge1xuICAgICAgICAgICAgbWVzc2FnZS5hY3RvclRvID0gdmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIGF3YWl0IGdhbWUuQ29DN3NvY2tldC5leGVjdXRlQXNHTSgnZ210cmFkZWl0ZW10bycsIG1lc3NhZ2UpXG4gIH1cblxuICBfb25JdGVtU3VtbWFyeSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbS1pZCcpKVxuICAgIGNvbnN0IGNoYXREYXRhID0gaXRlbS5nZXRDaGF0RGF0YSh7IHNlY3JldHM6IHRoaXMuYWN0b3IuaXNPd25lciB9KVxuXG4gICAgLy8gVG9nZ2xlIHN1bW1hcnlcbiAgICBpZiAobGkuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBsaS5jaGlsZHJlbignLml0ZW0tc3VtbWFyeScpXG4gICAgICBzdW1tYXJ5LnNsaWRlVXAoMjAwLCAoKSA9PiBzdW1tYXJ5LnJlbW92ZSgpKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkaXYgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1zdW1tYXJ5XCI+PC9kaXY+JylcblxuICAgICAgY29uc3QgbGFiZWxzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tbGFiZWxzXCI+PC9kaXY+JylcbiAgICAgIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5sYWJlbHMpIHtcbiAgICAgICAgbGFiZWxzLmFwcGVuZChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cIml0ZW0tbGFiZWxcIj48c3BhbiBjbGFzcz1cImxhYmVsLW5hbWVcIj4ke3AubmFtZX0gOjwvc3Bhbj48c3BhbiBjbGFzcz1cImxhYmVsLXZhbHVlXCI+JHtwLnZhbHVlfTwvc3Bhbj48L2Rpdj5gXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGRpdi5hcHBlbmQobGFiZWxzKVxuXG4gICAgICBkaXYuYXBwZW5kKFxuICAgICAgICAkKGA8ZGl2IGNsYXNzPVwiaXRlbS1kZXNjcmlwdGlvblwiPiR7Y2hhdERhdGEuZGVzY3JpcHRpb24udmFsdWV9PC9kaXY+YClcbiAgICAgIClcblxuICAgICAgaWYgKGl0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXM/LnNwY2wpIHtcbiAgICAgICAgY29uc3Qgc3BlY2lhbERpdiA9ICQoXG4gICAgICAgICAgYDxkaXYgY2xhc3M9XCJpdGVtLXNwZWNpYWxcIj4ke2NoYXREYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWx9PC9kaXY+YFxuICAgICAgICApXG4gICAgICAgIGRpdi5hcHBlbmQoc3BlY2lhbERpdilcbiAgICAgIH1cblxuICAgICAgY29uc3QgcHJvcHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1wcm9wZXJ0aWVzXCI+PC9kaXY+JylcbiAgICAgIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgIHByb3BzLmFwcGVuZChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cInRhZyBpdGVtLXByb3BlcnR5XCI+JHtnYW1lLmkxOG4ubG9jYWxpemUocCl9PC9kaXY+YFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBkaXYuYXBwZW5kKHByb3BzKVxuXG4gICAgICBsaS5hcHBlbmQoZGl2LmhpZGUoKSlcbiAgICAgIENvQzdQYXJzZXIuYmluZEV2ZW50c0hhbmRsZXIoZGl2KVxuICAgICAgZGl2LnNsaWRlRG93bigyMDApXG4gICAgfVxuICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gICAgLy8gJChldmVudC5jdXJyZW50VGFyZ2V0KS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKTtcbiAgfVxuXG4gIF9vbkludmVudG9yeUhlYWRlciAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgJChldmVudC5jdXJyZW50VGFyZ2V0KS5zaWJsaW5ncygnbGknKS5zbGlkZVRvZ2dsZSgyMDApXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBEaWFsb2csIERyYWdEcm9wLCBkdXBsaWNhdGUsIGV4cGFuZE9iamVjdCwgZmxhdHRlbk9iamVjdCwgRm9ybURhdGFFeHRlbmRlZCwgZm91bmRyeSwgZ2FtZSwgZ2V0VHlwZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCwgdWkgKi9cblxuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi8uLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4uLy4uL2NoYXQuanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDaGFzZVNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgLy8gY29uc3RydWN0b3IoIC4uLmFyZ3MpIHtcbiAgLy8gIHN1cGVyKCAuLi5hcmdzKTtcbiAgLy8gfVxuXG4gIHN0YXRpYyBnZXQgZmxhZ3MgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGFydGVkOiAnc3RhcnRlZCdcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIFNpbXBsZSBJdGVtIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICBjb25zdCBvcHRpb25zID0gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldFYyJywgJ2l0ZW0nLCAnY2hhc2UnXSxcbiAgICAgIHdpZHRoOiA1NTAsXG4gICAgICBoZWlnaHQ6IDUwMCxcbiAgICAgIHJlc2l6YWJsZTogdHJ1ZSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdwYXJ0aWNpcGFudHMnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuXG4gICAgcmV0dXJuIG9wdGlvbnNcblxuICAgIC8vIGNsb3NlT25TdWJtaXQ6IGZhbHNlLFxuICAgIC8vIHN1Ym1pdE9uQ2xvc2U6IHRydWUsXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvY2hhc2UuaHRtbCdcbiAgfVxuXG4gIHN0YXRpYyBnZXQgdHlwZSAoKSB7XG4gICAgcmV0dXJuICdjb2M3Q2hhc2VTaGVldCdcbiAgfVxuXG4gIC8vIC8qKiBAb3ZlcnJpZGUgKi9cbiAgLy8gYXN5bmMgcmVuZGVyKGZvcmNlLCBvcHRpb25zKSB7XG4gIC8vICAgcmV0dXJuIHN1cGVyLnJlbmRlcihmb3JjZSwgb3B0aW9ucyk7XG4gIC8vIH1cblxuICAvKiogQG92ZXJyaWRlICovXG5cbiAgZ2V0RGF0YSAob3B0aW9ucyA9IHt9KSB7XG4gICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4cGVyaW1lbnRhbEZlYXR1cmVzV2FybmluZycpXG4gICAgKVxuICAgIGNvbnN0IGRhdGEgPSBzdXBlci5nZXREYXRhKG9wdGlvbnMpXG4gICAgLy8gaWYoIHRoaXMuc3RhcnRlZCkgb3B0aW9ucy50YWJzWzBdLmluaXRpYWwgPSAnc2V0dXAnXG4gICAgaWYgKHRoaXMuc3RhcnRlZCkgdGhpcy5fdGFic1swXS5hY3RpdmUgPSAnc2V0dXAnXG5cbiAgICAvKiogTU9ESUY6IDAuOC54ICoqL1xuICAgIGNvbnN0IGl0ZW1EYXRhID0gZGF0YS5kYXRhXG4gICAgZGF0YS5kYXRhID0gaXRlbURhdGEuZGF0YSAvLyBNT0RJRjogMC44LnggZGF0YS5kYXRhXG4gICAgLyoqKioqKioqKioqKioqKioqL1xuXG4gICAgZGF0YS5wYXJ0aWNpcGFudHMgPSB0aGlzLnBhcnRpY2lwYW50c1xuICAgIGRhdGEucHJleXMgPSB0aGlzLnByZXlzXG4gICAgZGF0YS5jaGFzZXJzID0gdGhpcy5jaGFzZXJzXG5cbiAgICAvLyBkYXRhLmJ5RGV4ID0gZHVwbGljYXRlKGRhdGEucGFydGljaXBhbnRzKS5zb3J0KChhLCBiKSA9PiBhLmRleCAtIGIuZGV4KVxuXG4gICAgZGF0YS5wcmV5c01pbk1vdiA9IGRhdGEucHJleXMubGVuZ3RoXG4gICAgICA/IGRhdGEucHJleXMucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PlxuICAgICAgICBwcmV2LmFkanVzdGVkTW92IDwgY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50XG4gICAgICApLmFkanVzdGVkTW92XG4gICAgICA6IC0xXG5cbiAgICBkYXRhLnByZXlzTWF4TW92ID0gZGF0YS5wcmV5cy5sZW5ndGhcbiAgICAgID8gZGF0YS5wcmV5cy5yZWR1Y2UoKHByZXYsIGN1cnJlbnQpID0+XG4gICAgICAgIHByZXYuYWRqdXN0ZWRNb3YgPiBjdXJyZW50LmFkanVzdGVkTW92ID8gcHJldiA6IGN1cnJlbnRcbiAgICAgICkuYWRqdXN0ZWRNb3ZcbiAgICAgIDogLTFcblxuICAgIGRhdGEuY2hhc2Vyc01pbk1vdiA9IGRhdGEuY2hhc2Vycy5sZW5ndGhcbiAgICAgID8gZGF0YS5jaGFzZXJzLnJlZHVjZSgocHJldiwgY3VycmVudCkgPT5cbiAgICAgICAgcHJldi5hZGp1c3RlZE1vdiA8IGN1cnJlbnQuYWRqdXN0ZWRNb3YgPyBwcmV2IDogY3VycmVudFxuICAgICAgKS5hZGp1c3RlZE1vdlxuICAgICAgOiAtMVxuXG4gICAgZGF0YS5jaGFzZXJzTWF4TW92ID0gZGF0YS5jaGFzZXJzLmxlbmd0aFxuICAgICAgPyBkYXRhLmNoYXNlcnMucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PlxuICAgICAgICBwcmV2LmFkanVzdGVkTW92ID4gY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50XG4gICAgICApLmFkanVzdGVkTW92XG4gICAgICA6IC0xXG5cbiAgICBkYXRhLmNoYXNlcnMuZm9yRWFjaChwID0+IHtcbiAgICAgIGlmIChwLmFkanVzdGVkTW92IDwgZGF0YS5wcmV5c01pbk1vdikgcC50b29TbG93KClcbiAgICAgIGVsc2UgcC5pbmNsdWRlSW5DaGFzZSgpXG4gICAgICBwLmZhc3Rlc3QgPSBwLmFkanVzdGVkTW92ID09PSBkYXRhLmNoYXNlcnNNYXhNb3ZcbiAgICAgIHAuc2xvd2VzdCA9IHAuYWRqdXN0ZWRNb3YgPT09IGRhdGEuY2hhc2Vyc01pbk1vdlxuICAgIH0pXG5cbiAgICBkYXRhLnByZXlzLmZvckVhY2gocCA9PiB7XG4gICAgICBpZiAocC5hZGp1c3RlZE1vdiA+IGRhdGEuY2hhc2Vyc01heE1vdikgcC5lc2NhcGVkKClcbiAgICAgIGVsc2UgcC5pbmNsdWRlSW5DaGFzZSgpXG4gICAgICBwLmZhc3Rlc3QgPSBwLmFkanVzdGVkTW92ID09PSBkYXRhLnByZXlzTWF4TW92XG4gICAgICBwLnNsb3dlc3QgPSBwLmFkanVzdGVkTW92ID09PSBkYXRhLnByZXlzTWluTW92XG4gICAgfSlcblxuICAgIGRhdGEubG9jYXRpb25zID0gdGhpcy5sb2NhdGlvbnNcbiAgICBkYXRhLmFsbEhhdmVWYWxpZE1vdiA9IHRoaXMuYWxsSGF2ZVZhbGlkTW92XG4gICAgZGF0YS5hY3RpdmVMb2NhdGlvbiA9IHRoaXMuYWN0aXZlTG9jYXRpb25cbiAgICBkYXRhLnByZXZpb3VzTG9jYXRpb24gPSB0aGlzLnByZXZpb3VzTG9jYXRpb25cbiAgICBkYXRhLm5leHRMb2NhdGlvbiA9IHRoaXMubmV4dExvY2F0aW9uXG4gICAgZGF0YS5zdGFydGVkID0gdGhpcy5zdGFydGVkXG4gICAgZGF0YS5kYXRhTGlzdENoZWNrT3B0aW9ucyA9IHRoaXMuYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzXG5cbiAgICBkYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgZ2V0IHBhcnRpY2lwYW50cyAoKSB7XG4gICAgY29uc3QgcExpc3QgPSBbXVxuICAgIHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XG4gICAgICBwTGlzdC5wdXNoKG5ldyBfcGFydGljaXBhbnQocCkpXG4gICAgICBwLmluZGV4ID0gcExpc3QubGVuZ3RoIC0gMVxuICAgIH0pXG4gICAgcExpc3Quc29ydCgoYSwgYikgPT4gYS5hZGp1c3RlZE1vdiAtIGIuYWRqdXN0ZWRNb3YpXG4gICAgcmV0dXJuIHBMaXN0XG4gICAgLy8gcmV0dXJuIHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzXG4gIH1cblxuICBnZXQgYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzICgpIHtcbiAgICBjb25zdCBsaXN0ID0gW11cbiAgICBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKS5mb3JFYWNoKGMgPT5cbiAgICAgIGxpc3QucHVzaChcbiAgICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoYXJhY3RlcmlzdGljcycpfSAoJHtjLnNob3J0TmFtZX0pYFxuICAgICAgKVxuICAgIClcbiAgICBsaXN0LnB1c2goXG4gICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXR0cmlidXRlJyl9ICgke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgJ0NvQzcuTHVjaydcbiAgICAgICl9KWBcbiAgICApXG4gICAgbGlzdC5wdXNoKFxuICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkF0dHJpYnV0ZScpfSAoJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICdDb0M3LlNBTidcbiAgICAgICl9KWBcbiAgICApXG5cbiAgICBpZiAodHlwZW9mIGdhbWUuQ29DNy5za2lsbExpc3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBnYW1lLkNvQzcuc2tpbGxMaXN0LmZvckVhY2gocyA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAhbGlzdC5pbmNsdWRlcyhzLm5hbWUpICYmXG4gICAgICAgICAgIXMubmFtZVxuICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgIC5pbmNsdWRlcyhcbiAgICAgICAgICAgICAgYCgke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BbnlTcGVjTmFtZScpfSlgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgbGlzdC5wdXNoKHMubmFtZSlcbiAgICAgICAgfVxuICAgICAgfSkgLy8gVE9ETzogUmVtb3ZlID8/XG4gICAgfVxuICAgIHRoaXMucGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XG4gICAgICBpZiAocC5hY3Rvcikge1xuICAgICAgICBwLmFjdG9yLnNraWxscy5mb3JFYWNoKHMgPT4ge1xuICAgICAgICAgIGlmICghbGlzdC5pbmNsdWRlcyhzLm5hbWUpKSBsaXN0LnB1c2gocy5uYW1lKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIGxpc3Quc29ydChJbnRsLkNvbGxhdG9yKCkuY29tcGFyZSlcbiAgfVxuXG4gIGdldCBwcmV5cyAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMucGFydGljaXBhbnRzXG4gICAgICAgIC5maWx0ZXIocCA9PiAhcC5pc0NoYXNlciAmJiBwLmlzVmFsaWQpXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLmFkanVzdGVkTW92IC0gYi5hZGp1c3RlZE1vdikgfHwgW11cbiAgICApXG4gIH1cblxuICBnZXQgY2hhc2VycyAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMucGFydGljaXBhbnRzXG4gICAgICAgIC5maWx0ZXIocCA9PiBwLmlzQ2hhc2VyICYmIHAuaXNWYWxpZClcbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEuYWRqdXN0ZWRNb3YgLSBiLmFkanVzdGVkTW92KSB8fCBbXVxuICAgIClcbiAgfVxuXG4gIGZpbmRNaW5Nb3YgKGxpc3QpIHtcbiAgICBpZiAoIWxpc3Q/Lmxlbmd0aCkgcmV0dXJuIC0xXG4gICAgcmV0dXJuIGxpc3QucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PlxuICAgICAgcHJldi5hZGp1c3RlZE1vdiA8IGN1cnJlbnQuYWRqdXN0ZWRNb3YgPyBwcmV2IDogY3VycmVudFxuICAgICkuYWRqdXN0ZWRNb3ZcbiAgfVxuXG4gIGZpbmRNYXhNb3YgKGxpc3QpIHtcbiAgICBpZiAoIWxpc3Q/Lmxlbmd0aCkgcmV0dXJuIC0xXG4gICAgcmV0dXJuIGxpc3QucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PlxuICAgICAgcHJldi5hZGp1c3RlZE1vdiA+IGN1cnJlbnQuYWRqdXN0ZWRNb3YgPyBwcmV2IDogY3VycmVudFxuICAgICkuYWRqdXN0ZWRNb3ZcbiAgfVxuXG4gIHByb2Nlc3NMb2NhdGlvbnMgKGxvY2F0aW9ucykge1xuICAgIGlmICghbG9jYXRpb25zPy5sZW5ndGgpIHJldHVyblxuICAgIGxvY2F0aW9uc1swXS5maXJzdCA9IHRydWVcblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBsb2NhdGlvbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBjb25zdCBjbGFzc2VzID0gW11cbiAgICAgIGNvbnN0IGxvY2F0aW9uID0gbG9jYXRpb25zW2luZGV4XVxuICAgICAgaWYgKCFsb2NhdGlvbi5uYW1lKSBjbGFzc2VzLnB1c2goJ2VtcHR5JylcbiAgICAgIGlmIChsb2NhdGlvbi5hY3RpdmUpIGNsYXNzZXMucHVzaCgnYWN0aXZlJylcbiAgICAgIGlmIChsb2NhdGlvbi5pbml0ICYmICF0aGlzLnN0YXJ0ZWQpIGNsYXNzZXMucHVzaCgnaW5pdCcpXG4gICAgICBsb2NhdGlvbi5jc3NDbGFzc2VzID0gY2xhc3Nlcy5qb2luKCcgJylcbiAgICB9XG5cbiAgICBpZiAobG9jYXRpb25zLmxlbmd0aCA+IDEpIGxvY2F0aW9uc1tsb2NhdGlvbnMubGVuZ3RoIC0gMV0ubGFzdCA9IHRydWVcblxuICAgIGxvY2F0aW9ucy5mb3JFYWNoKGwgPT4ge1xuICAgICAgaWYgKGwucGFydGljaXBhbnRzICYmIGwucGFydGljaXBhbnRzLmxlbmd0aCkge1xuICAgICAgICAvLyB1aS5ub3RpZmljYXRpb25zLmVycm9yKGBMZW5ndGggOiAke2wucGFydGljaXBhbnRzLmxlbmd0aH1gKVxuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbC5wYXJ0aWNpcGFudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBlbGVtID0gbC5wYXJ0aWNpcGFudHNbaV0gLy8gSW5pdCB0cmFjayA9IG9ubHkgdXVpZCwgdXBkYXRlIGxvY2F0aW9uIGxpc3QgY2hhbmdlIGZvciB1dWlkXG5cbiAgICAgICAgICAvLyB1aS5ub3RpZmljYXRpb25zLmVycm9yKGBUeXBlIDogJHt0eXBlb2YgZWxlbX1gKVxuICAgICAgICAgIGxldCBwXG4gICAgICAgICAgaWYgKHR5cGVvZiBlbGVtID09PSAnc3RyaW5nJyB8fCBlbGVtIGluc3RhbmNlb2YgU3RyaW5nKSB7XG4gICAgICAgICAgICBwID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHMuZmluZChwID0+IGVsZW0gPT09IHAudXVpZCkgLy8gUmV0cmlldmUgcGFydGljaXBhbnQgZGF0YSBmcm9tIGxpc3QuXG4gICAgICAgICAgfSBlbHNlIGlmIChlbGVtLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdfcGFydGljaXBhbnQnKSB7XG4gICAgICAgICAgICBwID0gdW5kZWZpbmVkIC8vIHBhcnRpY2lwYW50IGlzIGFscmVhZHkgcHJvY2Vzc2VkLlxuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKCdQYXJ0aWNpcGFudCB3YXMgYWxyZWFkeSBwcm9jZXNzZWQuJylcbiAgICAgICAgICB9IGVsc2UgcCA9IHVuZGVmaW5lZFxuXG4gICAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gcCkge1xuICAgICAgICAgICAgbC5wYXJ0aWNpcGFudHNbaV0gPSBuZXcgX3BhcnRpY2lwYW50KHApIC8vIHJlcGxhY2UgdXVpZCB3aXRoIF9wYXJ0aWNpcGFudFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBwYXJ0aWNpcGFudHMucHVzaCggbnVsbClcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICdVbmRlZmluZWQgcGF0aWNpcGFudCB3aGlsZSBwcm9jZXNzaW5nIHBhcnRpY2lwYW50cyBhcnJheSdcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbC5wYXJ0aWNpcGFudHMuc29ydChzb3J0QnlSb2xlQW5kRGV4KSAvLyBUT0RPIDogdGVzdCBpZiBzb3J0aW5nIHdvcmtzXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGdldCBsb2NhdGlvbnMgKCkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IHRoaXMuc3RhcnRlZFxuICAgICAgPyB0aGlzLml0ZW0uZGF0YS5kYXRhLmxvY2F0aW9ucy5saXN0XG4gICAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEubG9jYXRpb25zLmxpc3QpXG4gICAgICAgIDogW11cbiAgICAgIDogdGhpcy5pbml0VHJhY2tcbiAgICB0aGlzLnByb2Nlc3NMb2NhdGlvbnMobG9jYXRpb25zKVxuICAgIHJldHVybiBsb2NhdGlvbnNcbiAgfVxuXG4gIGdldCBpbml0VHJhY2sgKCkge1xuICAgIGlmIChcbiAgICAgICF0aGlzLml0ZW0uZGF0YS5kYXRhLmxvY2F0aW9ucy5saXN0IHx8XG4gICAgICB0aGlzLml0ZW0uZGF0YS5kYXRhLmxvY2F0aW9ucy5saXN0Lmxlbmd0aCA9PT0gMFxuICAgICkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IFtdIC8vICEhISEhISEgbG9jYXRpb25zIHZzIGluaXQgbG9jYXRpb25zICEhIVxuXG4gICAgY29uc3QgaW5pdCA9IHRoaXMuc3RhcnRpbmdMaW5lXG4gICAgbGV0IGxvY2F0aW9uc0luZGV4U3RhcnQsIGluaXRJbmRleFN0YXJ0LCBsb2NhdGlvbnNMZW5ndGhcbiAgICBpZiAoaW5pdC5sZW5ndGggPD0gMCkge1xuICAgICAgbG9jYXRpb25zSW5kZXhTdGFydCA9IDBcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXRlbS5kYXRhLmRhdGEuc3RhcnRpbmdJbmRleCA+PSBpbml0Lmxlbmd0aCkge1xuICAgICAgbG9jYXRpb25zSW5kZXhTdGFydCA9IDBcbiAgICB9IGVsc2UgbG9jYXRpb25zSW5kZXhTdGFydCA9IGluaXQubGVuZ3RoIC0gdGhpcy5pdGVtLmRhdGEuZGF0YS5zdGFydGluZ0luZGV4XG5cbiAgICBpZiAodGhpcy5pdGVtLmRhdGEuZGF0YS5zdGFydGluZ0luZGV4IDw9IDApIGluaXRJbmRleFN0YXJ0ID0gMFxuICAgIGVsc2UgaWYgKHRoaXMuaXRlbS5kYXRhLmRhdGEuc3RhcnRpbmdJbmRleCA8PSBpbml0Lmxlbmd0aCkge1xuICAgICAgaW5pdEluZGV4U3RhcnQgPSAwXG4gICAgfSBlbHNlIGluaXRJbmRleFN0YXJ0ID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5zdGFydGluZ0luZGV4IC0gaW5pdC5sZW5ndGhcblxuICAgIGlmIChsb2NhdGlvbnNJbmRleFN0YXJ0ID09PSAwKSB7XG4gICAgICBsb2NhdGlvbnNMZW5ndGggPSB0aGlzLml0ZW0uZGF0YS5kYXRhLmxvY2F0aW9ucy5saXN0Lmxlbmd0aFxuICAgIH0gZWxzZSB7XG4gICAgICBsb2NhdGlvbnNMZW5ndGggPVxuICAgICAgICB0aGlzLml0ZW0uZGF0YS5kYXRhLmxvY2F0aW9ucy5saXN0Lmxlbmd0aCArIGxvY2F0aW9uc0luZGV4U3RhcnRcbiAgICB9XG5cbiAgICBpZiAoaW5pdC5sZW5ndGggIT09IDApIHtcbiAgICAgIGlmICh0aGlzLml0ZW0uZGF0YS5kYXRhLnN0YXJ0aW5nSW5kZXggPCAwKSB7XG4gICAgICAgIGZvciAoXG4gICAgICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgICAgICBpbmRleCA8IE1hdGguYWJzKHRoaXMuaXRlbS5kYXRhLmRhdGEuc3RhcnRpbmdJbmRleCk7XG4gICAgICAgICAgaW5kZXgrK1xuICAgICAgICApIHtcbiAgICAgICAgICBpbml0LnB1c2goe1xuICAgICAgICAgICAgdXVpZDogdGhpcy5nZW5lcmF0ZU5ld1V1aWQoKSxcbiAgICAgICAgICAgIGluaXQ6IHRydWUsXG4gICAgICAgICAgICBwYXJ0aWNpcGFudHM6IFtdXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGNoYXNlTG9jYXRpb25zID0gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEubG9jYXRpb25zKVxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBsb2NhdGlvbnNMZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGxldCBsb2NhdGlvbiA9IHt9XG4gICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSBbXVxuICAgICAgaWYgKFxuICAgICAgICBpbmRleCA+PSBsb2NhdGlvbnNJbmRleFN0YXJ0ICYmXG4gICAgICAgIGluZGV4IC0gbG9jYXRpb25zSW5kZXhTdGFydCA8IGNoYXNlTG9jYXRpb25zLmxpc3QubGVuZ3RoXG4gICAgICApIHtcbiAgICAgICAgbG9jYXRpb24gPSBkdXBsaWNhdGUoY2hhc2VMb2NhdGlvbnMubGlzdFtpbmRleCAtIGxvY2F0aW9uc0luZGV4U3RhcnRdKVxuICAgICAgICBsb2NhdGlvbi5pbml0ID0gZmFsc2VcbiAgICAgICAgaWYgKHR5cGVvZiBsb2NhdGlvbi5wYXJ0aWNpcGFudHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgbG9jYXRpb24ucGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XG4gICAgICAgICAgICBpZiAocCAhPT0gbnVsbCkgcGFydGljaXBhbnRzLnB1c2gocClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaW5kZXggPj0gaW5pdEluZGV4U3RhcnQgJiYgaW5kZXggLSBpbml0SW5kZXhTdGFydCA8IGluaXQubGVuZ3RoKSB7XG4gICAgICAgIG1lcmdlT2JqZWN0KGxvY2F0aW9uLCBpbml0W2luZGV4IC0gaW5pdEluZGV4U3RhcnRdLCB7XG4gICAgICAgICAgb3ZlcndyaXRlOiBmYWxzZVxuICAgICAgICB9KVxuXG4gICAgICAgIGlmICh0eXBlb2YgaW5pdFtpbmRleCAtIGluaXRJbmRleFN0YXJ0XS5wYXJ0aWNpcGFudHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaW5pdFtpbmRleCAtIGluaXRJbmRleFN0YXJ0XS5wYXJ0aWNpcGFudHMuZm9yRWFjaChwID0+IHtcbiAgICAgICAgICAgIGlmIChwICE9PSBudWxsKSBwYXJ0aWNpcGFudHMucHVzaChwKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBsb2NhdGlvbi5wYXJ0aWNpcGFudHMgPSBwYXJ0aWNpcGFudHNcbiAgICAgIH1cbiAgICAgIGxvY2F0aW9uLmZpcnN0ID0gZmFsc2VcbiAgICAgIGxvY2F0aW9uLmVuZCA9IGZhbHNlXG4gICAgICBsb2NhdGlvbnMucHVzaChsb2NhdGlvbilcbiAgICB9XG5cbiAgICByZXR1cm4gbG9jYXRpb25zXG4gIH1cblxuICBnZXQgYWN0aXZlTG9jYXRpb24gKCkge1xuICAgIGlmICghdGhpcy5sb2NhdGlvbnMpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5sb2NhdGlvbnMuZmluZChsID0+IGwuYWN0aXZlKVxuICB9XG5cbiAgZ2V0IHByZXZpb3VzTG9jYXRpb24gKCkge1xuICAgIGlmICghdGhpcy5sb2NhdGlvbnMpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBhY3RpdmVJbmRleCA9IHRoaXMubG9jYXRpb25zLmZpbmRJbmRleChsID0+IGwuYWN0aXZlKVxuICAgIGlmIChhY3RpdmVJbmRleCA9PT0gLTEpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoYWN0aXZlSW5kZXggPT09IDApIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5sb2NhdGlvbnNbYWN0aXZlSW5kZXggLSAxXVxuICB9XG5cbiAgZ2V0IG5leHRMb2NhdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmxvY2F0aW9ucykgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGFjdGl2ZUluZGV4ID0gdGhpcy5sb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbC5hY3RpdmUpXG4gICAgaWYgKGFjdGl2ZUluZGV4ID09PSAtMSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmIChhY3RpdmVJbmRleCA9PT0gdGhpcy5sb2NhdGlvbnMubGVuZ3RoIC0gMSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLmxvY2F0aW9uc1thY3RpdmVJbmRleCArIDFdXG4gIH1cblxuICBnZXQgYWxsSGF2ZVZhbGlkTW92ICgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJ0aWNpcGFudHMuZXZlcnkoZSA9PiBlLmhhc1ZhbGlkTW92KVxuICB9XG5cbiAgZ2V0IGFsbEhhdmVTcGVlZFJvbGwgKCkge1xuICAgIHJldHVybiB0aGlzLnBhcnRpY2lwYW50cy5ldmVyeShwID0+IHAuc3BlZWRDaGVjaz8ucm9sbGVkKVxuICB9XG5cbiAgZ2V0IHN0YXJ0ZWQgKCkge1xuICAgIHJldHVybiB0aGlzLml0ZW0uZ2V0RmxhZygnQ29DNycsIENvQzdDaGFzZVNoZWV0LmZsYWdzLnN0YXJ0ZWQpXG4gIH1cblxuICBhc3luYyBjdXRUb1RoZUNoYXNlICgpIHtcbiAgICBpZiAoIXRoaXMuYWxsSGF2ZVNwZWVkUm9sbCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKCdTcGVlZCByb2xsIG1pc3NpbmcnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh0aGlzLmFsbEhhdmVWYWxpZE1vdikge1xuICAgICAgLy8gVE9ETyA6IENoZWNrIGZvciBzcGVlZCByb2xsID8/XG5cbiAgICAgIC8vIENhbGN1bGF0ZSBtb3ZlbWVudCBhY3Rpb25zXG4gICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLnBhcnRpY2lwYW50c1xuICAgICAgY29uc3QgbWluTW92ID0gdGhpcy5maW5kTWluTW92KHBhcnRpY2lwYW50cylcbiAgICAgIHBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgICBwLmRhdGEubW92ZW1lbnRBY3Rpb24gPSAxICsgKHAuYWRqdXN0ZWRNb3YgLSBtaW5Nb3YpXG4gICAgICB9KVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzKVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KHRoaXMubG9jYXRpb25zKVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnNldEZsYWcoJ0NvQzcnLCBDb0M3Q2hhc2VTaGVldC5mbGFncy5zdGFydGVkLCB0cnVlKVxuICAgIH1cbiAgfVxuXG4gIGdldCBzdGFydGluZ0xpbmUgKCkge1xuICAgIC8vIEdldCBwcmV5cyBhbmQgY2hlY2sgZm9yIGVzY2FwZWRcbiAgICBjb25zdCBwcmV5cyA9IHRoaXMuaXRlbS5kYXRhLmRhdGEuaW5jbHVkZUVzY2FwZWRcbiAgICAgID8gdGhpcy5wcmV5c1xuICAgICAgOiB0aGlzLnByZXlzPy5maWx0ZXIocCA9PiAhcC5kYXRhLmVzY2FwZWQpXG4gICAgLy8gR2V0IGNoYXNlcnNcbiAgICBjb25zdCBjaGFzZXJzID0gdGhpcy5jaGFzZXJzXG5cbiAgICAvLyBJZiBubyBwcmV5IG9yIG5vIGNoYXNzZXJcbiAgICAvLyBpZiAoMCA9PSBjaGFzZXJzLmxlbmd0aCkge1xuICAgIC8vICAgdWkubm90aWZpY2F0aW9ucy53YXJuKCdObyBjaGFzZXJzJylcbiAgICAvLyAgIHJldHVybiB1bmRlZmluZWRcbiAgICAvLyB9XG4gICAgLy8gaWYgKDAgPT0gcHJleXMubGVuZ3RoKSB7XG4gICAgLy8gICB1aS5ub3RpZmljYXRpb25zLndhcm4oJ05vIHByZXlzJylcbiAgICAvLyAgIHJldHVybiB1bmRlZmluZWRcbiAgICAvLyB9XG5cbiAgICAvLyBCdWlsZCBzdGFydGluZyB0cmFja1xuICAgIGNvbnN0IHRyYWNrID0gW11cblxuICAgIGNvbnN0IGNoYXNlcnNNaW5Nb3YgPSB0aGlzLmZpbmRNaW5Nb3YoY2hhc2VycylcbiAgICBjb25zdCBjaGFzZXJzTWF4TW92ID0gdGhpcy5maW5kTWF4TW92KGNoYXNlcnMpXG4gICAgY29uc3QgcHJleXNNaW5Nb3YgPSB0aGlzLmZpbmRNaW5Nb3YocHJleXMpXG4gICAgY29uc3QgcHJleXNNYXhNb3YgPSB0aGlzLmZpbmRNYXhNb3YocHJleXMpXG5cbiAgICBpZiAoY2hhc2Vyc01pbk1vdiAhPT0gLTEgJiYgY2hhc2Vyc01heE1vdiAhPT0gLTEpIHtcbiAgICAgIC8vIEFkZCBjaGFzZXJzIHRvIHRoZSB0cmFjay5cbiAgICAgIGZvciAobGV0IG1vdiA9IGNoYXNlcnNNaW5Nb3Y7IG1vdiA8PSBjaGFzZXJzTWF4TW92OyBtb3YrKykge1xuICAgICAgICAvLyBGaW5kIGFsbCB3aXRoIHRoYXQgbW92XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0ge1xuICAgICAgICAgIHV1aWQ6IHRoaXMuZ2VuZXJhdGVOZXdVdWlkKCksXG4gICAgICAgICAgaW5pdDogdHJ1ZSxcbiAgICAgICAgICBwYXJ0aWNpcGFudHM6IFtdXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYXRpb25QYXJ0aWNpcGFudHNMaXN0ID0gY2hhc2Vyc1xuICAgICAgICAgIC5maWx0ZXIocCA9PiBtb3YgPT09IHAuYWRqdXN0ZWRNb3YpXG4gICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEuZGV4IC0gYi5kZXgpXG4gICAgICAgIGxvY2F0aW9uUGFydGljaXBhbnRzTGlzdC5mb3JFYWNoKHAgPT5cbiAgICAgICAgICBsb2NhdGlvbi5wYXJ0aWNpcGFudHMucHVzaChwLnV1aWQpXG4gICAgICAgIClcbiAgICAgICAgdHJhY2sucHVzaChsb2NhdGlvbilcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHNwYWNlIGJldHdlZW4gY2hhc2VycyBhbmQgcHJleXMuXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5pdGVtLmRhdGEuZGF0YS5zdGFydGluZ1JhbmdlOyBpbmRleCsrKSB7XG4gICAgICAgIHRyYWNrLnB1c2goe1xuICAgICAgICAgIHV1aWQ6IHRoaXMuZ2VuZXJhdGVOZXdVdWlkKCksXG4gICAgICAgICAgaW5pdDogdHJ1ZSxcbiAgICAgICAgICBwYXJ0aWNpcGFudHM6IFtdXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHByZXlzTWluTW92ICE9PSAtMSAmJiBwcmV5c01heE1vdiAhPT0gLTEpIHtcbiAgICAgIC8vIEFkZCBwcmV5cyB0byB0aGUgdHJhY2suXG4gICAgICBmb3IgKGxldCBtb3YgPSBwcmV5c01pbk1vdjsgbW92IDw9IHByZXlzTWF4TW92OyBtb3YrKykge1xuICAgICAgICAvLyBGaW5kIGFsbCB3aXRoIHRoYXQgbW92XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0ge1xuICAgICAgICAgIHV1aWQ6IHRoaXMuZ2VuZXJhdGVOZXdVdWlkKCksXG4gICAgICAgICAgaW5pdDogdHJ1ZSxcbiAgICAgICAgICBwYXJ0aWNpcGFudHM6IFtdXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYXRpb25QYXJ0aWNpcGFudHNMaXN0ID0gcHJleXNcbiAgICAgICAgICAuZmlsdGVyKHAgPT4gbW92ID09PSBwLmFkanVzdGVkTW92KVxuICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLmRleCAtIGIuZGV4KVxuICAgICAgICBsb2NhdGlvblBhcnRpY2lwYW50c0xpc3QuZm9yRWFjaChwID0+XG4gICAgICAgICAgbG9jYXRpb24ucGFydGljaXBhbnRzLnB1c2gocC51dWlkKVxuICAgICAgICApXG4gICAgICAgIHRyYWNrLnB1c2gobG9jYXRpb24pXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRyYWNrXG4gIH1cblxuICBnZW5lcmF0ZU5ld1V1aWQgKCkge1xuICAgIGxldCB1bmlxdWUgPSBmYWxzZVxuICAgIGxldCB1dWlkXG4gICAgd2hpbGUgKCF1bmlxdWUpIHtcbiAgICAgIHV1aWQgPSBmb3VuZHJ5LnV0aWxzLnJhbmRvbUlEKDE2KVxuICAgICAgdW5pcXVlID1cbiAgICAgICAgdGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHMuZmlsdGVyKHAgPT4gcC51dWlkID09PSB1dWlkKS5sZW5ndGggPT09XG4gICAgICAgICAgMCAmJlxuICAgICAgICB0aGlzLml0ZW0uZGF0YS5kYXRhLmxvY2F0aW9ucy5saXN0LmZpbHRlcihwID0+IHAudXVpZCA9PT0gdXVpZClcbiAgICAgICAgICAubGVuZ3RoID09PSAwXG4gICAgfVxuXG4gICAgcmV0dXJuIHV1aWRcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgLy8gaHRtbC5maW5kKCcudHJhY2snKS5yZWFkeShhc3luYyBodG1sID0+IGF3YWl0IHRoaXMuX29uU2hlZXRSZWFkeShodG1sKSlcblxuICAgIGh0bWwub24oJ2RibGNsaWNrJywgJy5vcGVuLWFjdG9yJywgQ29DN0NoYXQuX29uT3BlbkFjdG9yLmJpbmQodGhpcykpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLnBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJhZ2VudGVyJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnRW50ZXJQYXJ0aWNpcGFudChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdvdmVyJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnRW50ZXJQYXJ0aWNpcGFudChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdsZWF2ZScsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0xlYXZlUGFydGljaXBhbnQoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcm9wJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnTGVhdmVQYXJ0aWNpcGFudChldmVudCkpXG5cbiAgICBodG1sLmZpbmQoJy5wLXNpZGUnKS5jbGljayh0aGlzLl9vbkNoYW5nZVNpZGUuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5kZWxldGUtcGFydGljaXBhbnQnKS5jbGljayh0aGlzLl9vbkRlbGV0ZVBhcnRpY2lwYW50LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcucmVzZXQtcm9sbCcpLmNsaWNrKHRoaXMuX29uUmVzZXRSb2xsLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuZGVsZXRlLWRyaXZlcicpLmNsaWNrKHRoaXMuX29uRGVsZXRlRHJpdmVyLmJpbmQodGhpcykpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLm5ldy1wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdlbnRlcicsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0VudGVyUGFydGljaXBhbnQoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcubmV3LXBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJhZ292ZXInLCBldmVudCA9PiB0aGlzLl9vbkRyYWdFbnRlclBhcnRpY2lwYW50KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLm5ldy1wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdsZWF2ZScsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0xlYXZlUGFydGljaXBhbnQoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcubmV3LXBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJvcCcsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0xlYXZlUGFydGljaXBhbnQoZXZlbnQpKVxuXG4gICAgaHRtbC5maW5kKCcuYWRkLXNpZ24nKS5jbGljayh0aGlzLl9vbkFkZFBhcnRpY2lwYW50LmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5yb2xsLXBhcnRpY2lwYW50JykuY2xpY2sodGhpcy5fb25Sb2xsUGFydGljaXBhbnQuYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnLmJ1dHRvbicpLmNsaWNrKHRoaXMuX29uQnV0dG9uQ2xpY2suYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnLm5hbWUtY29udGFpbmVyJykuY2xpY2sodGhpcy5fb25Mb2NhdGlvbkNsaWNrLmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5vYnN0YWNsZS10eXBlJykuY2xpY2sodGhpcy5fb25PYnN0YWNsZVR5cGVDbGljay5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLm9ic3RhY2xlLXRvZ2dsZScpLmNsaWNrKHRoaXMuX29uT2JzdGFjbGVUb2dnbGVDbGljay5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnRvZ2dsZScpLmNsaWNrKHRoaXMuX29uVG9nZ2xlLmJpbmQodGhpcykpXG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudERyYWdEcm9wID0gbmV3IERyYWdEcm9wKHtcbiAgICAgIGRyb3BTZWxlY3RvcjogJy5wYXJ0aWNpcGFudCcsXG4gICAgICBjYWxsYmFja3M6IHsgZHJvcDogdGhpcy5fb25Ecm9wUGFydGljaXBhbnQuYmluZCh0aGlzKSB9XG4gICAgfSlcbiAgICBwYXJ0aWNpcGFudERyYWdEcm9wLmJpbmQoaHRtbFswXSlcblxuICAgIGNvbnN0IG5ld1BhcnRpY2lwYW50RHJhZ0Ryb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xuICAgICAgZHJvcFNlbGVjdG9yOiAnLm5ldy1wYXJ0aWNpcGFudCcsXG4gICAgICBjYWxsYmFja3M6IHsgZHJvcDogdGhpcy5fb25BZGRQYXJ0aWNpcGFudC5iaW5kKHRoaXMpIH1cbiAgICB9KVxuICAgIG5ld1BhcnRpY2lwYW50RHJhZ0Ryb3AuYmluZChodG1sWzBdKVxuXG4gICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgY29uc3QgY2hhc2VQYXJ0aWNpcGFudERyYWdwRHJvcCA9IG5ldyBEcmFnRHJvcCh7XG4gICAgICAgIGRyYWdTZWxlY3RvcjogJy5jaGFzZS1wYXJ0aWNpcGFudCcsXG4gICAgICAgIGRyb3BTZWxlY3RvcjogJy5jaGFzZS1sb2NhdGlvbicsXG4gICAgICAgIHBlcm1pc3Npb25zOiB7XG4gICAgICAgICAgZHJhZ3N0YXJ0OiB0aGlzLl9jYW5DaGFzZVBhcnRpY2lwYW50RHJhZ1N0YXJ0LmJpbmQodGhpcyksXG4gICAgICAgICAgZHJvcDogdGhpcy5fY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wLmJpbmQodGhpcylcbiAgICAgICAgfSxcbiAgICAgICAgY2FsbGJhY2tzOiB7XG4gICAgICAgICAgZHJhZ3N0YXJ0OiB0aGlzLl9vbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQuYmluZCh0aGlzKSxcbiAgICAgICAgICBkcm9wOiB0aGlzLl9vbkNoYXNlUGFydGljaXBhbnREcmFnRHJvcC5iaW5kKHRoaXMpLFxuICAgICAgICAgIGRyYWdvdmVyOiB0aGlzLl9vbkRyYWdFbnRlci5iaW5kKHRoaXMpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBjaGFzZVBhcnRpY2lwYW50RHJhZ3BEcm9wLmJpbmQoaHRtbFswXSlcblxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmNoYXNlLWxvY2F0aW9uJylcbiAgICAgICAgLm9uKCdkcmFnbGVhdmUnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZShldmVudCkpXG4gICAgfVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyogIEZvcm0gU3VibWlzc2lvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKiogQG92ZXJyaWRlICovXG4gIF9nZXRTdWJtaXREYXRhICh1cGRhdGVEYXRhID0ge30pIHtcbiAgICAvLyBDcmVhdGUgdGhlIGV4cGFuZGVkIHVwZGF0ZSBkYXRhIG9iamVjdFxuICAgIGNvbnN0IGZkID0gbmV3IEZvcm1EYXRhRXh0ZW5kZWQodGhpcy5mb3JtLCB7IGVkaXRvcnM6IHRoaXMuZWRpdG9ycyB9KVxuICAgIGxldCBkYXRhID0gZmQudG9PYmplY3QoKVxuICAgIGlmICh1cGRhdGVEYXRhKSBkYXRhID0gbWVyZ2VPYmplY3QoZGF0YSwgdXBkYXRlRGF0YSlcbiAgICBlbHNlIGRhdGEgPSBleHBhbmRPYmplY3QoZGF0YSlcblxuICAgIC8vIENoZWNrIHRoYXQgc3RhcnRpbmcgcG9zaXRpb24gaXMgbm90IG91dHNpZGUgb2YgY2hhc2UgcmFuZ2UuXG4gICAgaWYgKFxuICAgICAgdGhpcy5pdGVtLmRhdGEuZGF0YS5sb2NhdGlvbnM/Lmxpc3Q/Lmxlbmd0aCAmJlxuICAgICAgZGF0YS5kYXRhLnN0YXJ0aW5nSW5kZXggPiB0aGlzLml0ZW0uZGF0YS5kYXRhLmxvY2F0aW9ucy5saXN0Lmxlbmd0aFxuICAgICkge1xuICAgICAgZGF0YS5kYXRhLnN0YXJ0aW5nSW5kZXggPSB0aGlzLml0ZW0uZGF0YS5kYXRhLmxvY2F0aW9ucy5saXN0Lmxlbmd0aFxuICAgIH1cblxuICAgIGlmIChkYXRhLmRhdGEucGFydGljaXBhbnRzKSB7XG4gICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHMpXG4gICAgICAvLyBIYW5kbGUgcGFydGljaXBhbnRzIGFycmF5XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmRhdGEucGFydGljaXBhbnRzKSkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHBhcnRpY2lwYW50cy5maW5kSW5kZXgocCA9PiBwLnV1aWQgPT09IGspXG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ1BhcnRpY2lwYW50IHRhYmxlIGNvcnJ1cHRlZCcpXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGNvbnN0IG9yaWdpbmFsID0gcGFydGljaXBhbnRzW2luZGV4XVxuICAgICAgICAgIGNvbnN0IGNsZWFuZWQgPSBjbGVhbih2KVxuICAgICAgICAgIG1lcmdlT2JqZWN0KG9yaWdpbmFsLCBjbGVhbmVkKVxuICAgICAgICAgIHBhcnRpY2lwYW50c1tpbmRleF0gPSBvcmlnaW5hbFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGRhdGEuZGF0YS5wYXJ0aWNpcGFudHMgPSBwYXJ0aWNpcGFudHNcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5sb2NhdGlvbnMpIHtcbiAgICAgIGNvbnN0IGxvY2F0aW9ucyA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLmxvY2F0aW9ucy5saXN0KVxuICAgICAgLy8gSGFuZGxlIGxvY2F0aW9ucyBsaXN0XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmxvY2F0aW9ucykpIHtcbiAgICAgICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsLnV1aWQgPT09IGtleSlcbiAgICAgICAgaWYgKGxvY2F0aW9uSW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignTG9jYXRpb25zIHRhYmxlIGNvcnJ1cHRlZCcpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgb3JpZ2luYWxMb2NhdGlvbiA9IGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XVxuICAgICAgICAgIGNvbnN0IGNsZWFuZWQgPSBjbGVhbih2YWx1ZSlcbiAgICAgICAgICBtZXJnZU9iamVjdChvcmlnaW5hbExvY2F0aW9uLCBjbGVhbmVkKVxuICAgICAgICAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XSA9IG9yaWdpbmFsTG9jYXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBkZWxldGUgZGF0YS5sb2NhdGlvbnNcbiAgICAgIGRhdGEuZGF0YS5sb2NhdGlvbnMgPSB7IGxpc3Q6IGxvY2F0aW9ucyB9XG4gICAgfVxuICAgIC8vIGNvbnN0IHBhcnRpY2lwYW50cyA9IGRhdGEuZGF0YT8ucGFydGljaXBhbnRzO1xuICAgIC8vIGlmKCBwYXJ0aWNpcGFudHMpIGRhdGEuZGF0YS5wYXJ0aWNpcGFudHMgPSBPYmplY3QudmFsdWVzKCBwYXJ0aWNpcGFudHMpLm1hcCggcCA9PiBjbGVhbihwKSk7XG5cbiAgICAvLyBSZXR1cm4gdGhlIGZsYXR0ZW5lZCBzdWJtaXNzaW9uIGRhdGFcbiAgICByZXR1cm4gZmxhdHRlbk9iamVjdChkYXRhKVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICAvLyBhc3luYyBfb25TdWJtaXQoLi4uYXJncykge1xuICAvLyAgYXdhaXQgc3VwZXIuX29uU3VibWl0KC4uLmFyZ3MpO1xuICAvLyB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IG92ZXJyaWRlID0gdGFyZ2V0Py5kYXRhc2V0Py5vdmVycmlkZSA9PT0gJ3RydWUnXG4gICAgaWYgKG92ZXJyaWRlKSB7XG4gICAgICBjb25zdCBbLCB0eXBlLCB1dWlkLCBzdWJUeXBlLCBkYXRhXSA9IHRhcmdldC5uYW1lLnNwbGl0KCcuJylcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlID09PSAncGFydGljaXBhbnRzJyAmJlxuICAgICAgICAhaXNOYU4oaW5kZXgpICYmXG4gICAgICAgIHN1YlR5cGUgPT09ICdzcGVlZC1jaGVjaydcbiAgICAgICkge1xuICAgICAgICBpZiAoZGF0YSA9PT0gJ25hbWUnKSB7XG4gICAgICAgICAgLy8gQ2hhbmdpbmcgbmFtZSB3aWxsIHJlbW92ZSBhbGwgb3RoZXIgcmVmICFcbiAgICAgICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLnBhcnRpY2lwYW50c1xuICAgICAgICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHMpXG4gICAgICAgICAgICA6IFtdXG4gICAgICAgICAgaWYgKHBhcnRpY2lwYW50c1tpbmRleF0uc3BlZWRDaGVjaykge1xuICAgICAgICAgICAgZGVsZXRlIHBhcnRpY2lwYW50c1tpbmRleF0uc3BlZWRDaGVjay5pZFxuICAgICAgICAgICAgZGVsZXRlIHBhcnRpY2lwYW50c1tpbmRleF0uc3BlZWRDaGVjay50eXBlXG4gICAgICAgICAgfSBlbHNlIHBhcnRpY2lwYW50c1tpbmRleF0uc3BlZWRDaGVjayA9IHt9XG4gICAgICAgICAgcGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrLm5hbWUgPSB0YXJnZXQudmFsdWVcbiAgICAgICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXG4gIH1cblxuICBzdGF0aWMgLyoqIGFzeW5jICovIHNldFNjcm9sbCAoYXBwLCBodG1sLCBkYXRhKSB7XG4gICAgY29uc3QgdHJhY2sgPSBodG1sLmZpbmQoJy50cmFjaycpXG4gICAgaWYgKCF0cmFjay5sZW5ndGgpIHJldHVyblxuICAgIGNvbnN0IGVsZW1lbnQgPSAkKHRyYWNrKS5maW5kKCcuYWN0aXZlJylcbiAgICBpZiAoIWVsZW1lbnQubGVuZ3RoKSByZXR1cm5cblxuICAgIGNvbnN0IG9yaWdpbmFsUG9zaXRpb24gPSBkYXRhLmRhdGEudHJhY2tTY3JvbGxQb3NpdGlvblxuXG4gICAgY29uc3QgZWxlbWVudGxlZnQgPSBlbGVtZW50WzBdLm9mZnNldExlZnRcbiAgICBjb25zdCBkaXZXaWR0aCA9IHRyYWNrWzBdLmNsaWVudFdpZHRoXG4gICAgbGV0IGVsZW1lbnRDZW50ZXJSZWxhdGl2ZUxlZnQgPSBlbGVtZW50bGVmdCAtIGRpdldpZHRoIC8gMlxuICAgIGlmIChlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0IDwgMCkgZWxlbWVudENlbnRlclJlbGF0aXZlTGVmdCA9IDBcblxuICAgIGNvbnN0IHRyYWNrRWxlbWVudCA9IHRyYWNrWzBdXG5cbiAgICBpZiAob3JpZ2luYWxQb3NpdGlvbiAhPT0gLTEpIHtcbiAgICAgIHRyYWNrRWxlbWVudC5zY3JvbGxUbyh7XG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgbGVmdDogb3JpZ2luYWxQb3NpdGlvbixcbiAgICAgICAgYmVoYXZpb3I6ICdpbnN0YW50J1xuICAgICAgfSlcbiAgICB9XG5cbiAgICB0cmFja0VsZW1lbnQuc2Nyb2xsVG8oe1xuICAgICAgdG9wOiAwLFxuICAgICAgbGVmdDogZWxlbWVudENlbnRlclJlbGF0aXZlTGVmdCxcbiAgICAgIGJlaGF2aW9yOiAnc21vb3RoJ1xuICAgIH0pXG5cbiAgICAvLyBhd2FpdCBhcHAuaXRlbS51cGRhdGUoeyAnZGF0YS50cmFja1Njcm9sbFBvc2l0aW9uJzogZWxlbWVudENlbnRlclJlbGF0aXZlTGVmdCB9KVxuICB9XG5cbiAgc3RhdGljIG9uQ2xvc2UgKGFwcCwgaHRtbCkge1xuICAgIGFwcC5pdGVtLnVwZGF0ZSh7ICdkYXRhLnRyYWNrU2Nyb2xsUG9zaXRpb24nOiAtMSB9KVxuICB9XG5cbiAgLy8gYXN5bmMgX29uU2hlZXRSZWFkeSAoaHRtbCkge1xuICAvLyAgIGNvbnN0IHRyYWNrID0gaHRtbC5maW5kKCcudHJhY2snKVxuICAvLyAgIGNvbnN0IGVsZW1lbnQgPSAkKHRyYWNrKS5maW5kKCcuYWN0aXZlJylcblxuICAvLyAgIGNvbnN0IGVsZW1lbnRsZWZ0ID0gZWxlbWVudFswXS5vZmZzZXRMZWZ0XG4gIC8vICAgY29uc3QgZGl2V2lkdGggPSB0cmFja1swXS5jbGllbnRXaWR0aFxuICAvLyAgIGxldCBlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0ID0gZWxlbWVudGxlZnQgLSBkaXZXaWR0aCAvIDJcbiAgLy8gICBpZiAoZWxlbWVudENlbnRlclJlbGF0aXZlTGVmdCA8IDApIGVsZW1lbnRDZW50ZXJSZWxhdGl2ZUxlZnQgPSAwXG5cbiAgLy8gICBjb25zdCBzY3JvbGxQb3NpdGlvbiA9IHRoaXMuaXRlbS5kYXRhLmRhdGEudHJhY2tTY3JvbGxQb3NpdGlvblxuICAvLyAgIGlmICghdHJhY2subGVuZ3RoKSByZXR1cm5cbiAgLy8gICBpZiAoIXNjcm9sbFBvc2l0aW9uKSByZXR1cm5cbiAgLy8gICBjb25zdCB0cmFja0VsZW1lbnQgPSB0cmFja1swXVxuICAvLyAgIHRyYWNrRWxlbWVudC5zY3JvbGxUbyh7XG4gIC8vICAgICB0b3A6IDAsXG4gIC8vICAgICBsZWZ0OiBlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0LFxuICAvLyAgICAgYmVoYXZpb3I6ICdpbnN0YW50J1xuICAvLyAgIH0pXG5cbiAgLy8gICAvL1RPRE8gOiBjb3VsZGQgdXNlIHBhcmVudC5vZmZzZXRUb3AgZXQgY2hpbGQub2Zmc2V0VG9wIHRvIGNlbnRlciB0aGUgYWN0aXZlIGVsZW1lbnRcblxuICAvLyAgIC8vIGNvbnN0IGFjdGl2ZSA9IGh0bWwuZmluZCgnLm5hbWUtY29udGFpbmVyLmFjdGl2ZScpXG4gIC8vICAgLy8gaWYoIGFjdGl2ZSl7XG4gIC8vICAgLy8gICBjb25zdCBlbGVtZW50ID0gYWN0aXZlWzBdXG4gIC8vICAgLy8gICBlbGVtZW50LnNjcm9sbEludG9WaWV3KHtiZWhhdmlvcjogXCJzbW9vdGhcIiwgYmxvY2s6IFwiZW5kXCIsIGlubGluZTogXCJjZW50ZXJcIn0pXG4gIC8vICAgLy8gZWxlbWVudC5zY3JvbGxJbnRvVmlldyhmYWxzZSlcbiAgLy8gICAvLyB9XG4gIC8vICAgLy8gfSlcbiAgLy8gfVxuXG4gIGZpbmRQYXJ0aWNpcGFudEluZGV4ICh1dWlkKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzLmZpbmRJbmRleChwID0+IHAudXVpZCA9PT0gdXVpZClcbiAgfVxuXG4gIGZpbmRMb2NhdGlvbkluZGV4ICh1dWlkKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbS5kYXRhLmRhdGEubG9jYXRpb25zLmxpc3QuZmluZEluZGV4KHAgPT4gcC51dWlkID09PSB1dWlkKVxuICB9XG5cbiAgZmluZEluZGV4IChsaXN0LCB1dWlkKSB7XG4gICAgcmV0dXJuIGxpc3QuZmluZEluZGV4KHAgPT4gcC51dWlkID09PSB1dWlkKVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlTG9jYXRpb25zTGlzdCAobGlzdCkge1xuICAgIC8vIFJlbW92ZSBhbGwgdW5uZWNlc3NhcnkgaXRlbXMgKGNzc0NsYXNzLCApXG4gICAgY29uc3QgdXBkYXRlZExpc3QgPSBkdXBsaWNhdGUobGlzdClcbiAgICB1cGRhdGVkTGlzdC5mb3JFYWNoKGwgPT4ge1xuICAgICAgLy8gZGVsZXRlIGwuYWN0aXZlXG4gICAgICBkZWxldGUgbC5jc3NDbGFzc2VzXG4gICAgICBkZWxldGUgbC5maXJzdFxuICAgICAgZGVsZXRlIGwubGFzdFxuICAgICAgZGVsZXRlIGwuZW5kXG4gICAgICBpZiAobC5wYXJ0aWNpcGFudHMgJiYgbC5wYXJ0aWNpcGFudHMubGVuZ3RoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbC5wYXJ0aWNpcGFudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAobC5wYXJ0aWNpcGFudHNbaV0uZGF0YT8udXVpZCkge1xuICAgICAgICAgICAgbC5wYXJ0aWNpcGFudHNbaV0gPSBsLnBhcnRpY2lwYW50c1tpXS5kYXRhLnV1aWRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5sb2NhdGlvbnMubGlzdCc6IHVwZGF0ZWRMaXN0IH0pXG4gIH1cblxuICBhc3luYyB1cGRhdGVQYXJ0aWNpcGFudHMgKGxpc3QpIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIGxpc3QuZm9yRWFjaChwID0+IHtcbiAgICAgIGxldCBkYXRhXG4gICAgICBpZiAocC5jb25zdHJ1Y3Rvci5uYW1lID09PSAnX3BhcnRpY2lwYW50Jykge1xuICAgICAgICBkYXRhID0gcC5kYXRhXG4gICAgICB9IGVsc2UgZGF0YSA9IHBcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kSW5kZXgocGFydGljaXBhbnRzRGF0YSwgZGF0YS51dWlkKVxuICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICBwYXJ0aWNpcGFudHNEYXRhLnB1c2goZGF0YSlcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKCdQYXJ0aWNpcGFudCBkYXRhIG1pc3NpbmcnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFydGljaXBhbnRzRGF0YVtpbmRleF0gPSBkYXRhXG4gICAgICB9XG4gICAgfSlcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzRGF0YSB9KVxuICB9XG5cbiAgYXN5bmMgX29uVG9nZ2xlIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAvLyBjb25zdCBsb2NhdGlvbkVsZW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnLmxvY2F0aW9uLm9ic3RhY2xlJylcbiAgICAvLyBjb25zdCB1dWlkID0gbG9jYXRpb25FbGVtZW50LmRhdGFzZXQudXVpZFxuICAgIC8vIGNvbnN0IGxvY2F0aW9ucyA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLmxvY2F0aW9ucy5saXN0KVxuICAgIC8vIGNvbnN0IGxvY2F0aW9uSW5kZXggPSB0aGlzLmZpbmRJbmRleChsb2NhdGlvbnMsIHV1aWQpXG4gICAgY29uc3QgdG9nZ2xlID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgndG9nZ2xlJylcbiAgICBjb25zdCBkYXRhID0gZXhwYW5kT2JqZWN0KHtcbiAgICAgIFt0b2dnbGVdOiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc3dpdGNoZWQtb24nKVxuICAgIH0pXG4gICAgaWYgKGRhdGEubG9jYXRpb25zKSB7XG4gICAgICBjb25zdCBsb2NhdGlvbnMgPSBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YS5sb2NhdGlvbnMubGlzdClcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEubG9jYXRpb25zKSkge1xuICAgICAgICBjb25zdCBsb2NhdGlvbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+IGwudXVpZCA9PT0ga2V5KVxuICAgICAgICBpZiAobG9jYXRpb25JbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdMb2NhdGlvbnMgdGFibGUgY29ycnVwdGVkJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBvcmlnaW5hbExvY2F0aW9uID0gbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdXG4gICAgICAgICAgY29uc3QgY2xlYW5lZCA9IGNsZWFuKHZhbHVlKVxuICAgICAgICAgIG1lcmdlT2JqZWN0KG9yaWdpbmFsTG9jYXRpb24sIGNsZWFuZWQpXG4gICAgICAgICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdID0gb3JpZ2luYWxMb2NhdGlvblxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbk9ic3RhY2xlVG9nZ2xlQ2xpY2sgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxvY2F0aW9uRWxlbWVudCA9IHRhcmdldC5jbG9zZXN0KCcubG9jYXRpb24ub2JzdGFjbGUnKVxuICAgIGNvbnN0IHV1aWQgPSBsb2NhdGlvbkVsZW1lbnQuZGF0YXNldC51dWlkXG4gICAgY29uc3QgbG9jYXRpb25zID0gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEubG9jYXRpb25zLmxpc3QpXG4gICAgY29uc3QgbG9jYXRpb25JbmRleCA9IHRoaXMuZmluZEluZGV4KGxvY2F0aW9ucywgdXVpZClcbiAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGUgPSAhbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlXG4gICAgaWYgKCFsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzKSB7XG4gICAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzID0ge1xuICAgICAgICBiYXJyaWVyOiB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXG4gIH1cblxuICBhc3luYyBfb25PYnN0YWNsZVR5cGVDbGljayAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgbG9jYXRpb25FbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5sb2NhdGlvbi5vYnN0YWNsZScpXG4gICAgY29uc3QgdXVpZCA9IGxvY2F0aW9uRWxlbWVudC5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YS5sb2NhdGlvbnMubGlzdClcbiAgICBjb25zdCBsb2NhdGlvbkluZGV4ID0gdGhpcy5maW5kSW5kZXgobG9jYXRpb25zLCB1dWlkKVxuICAgIGlmICghbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscykge1xuICAgICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscyA9IHt9XG4gICAgfVxuICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiYXJyaWVyJykpIHtcbiAgICAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMuYmFycmllciA9XG4gICAgICAgICFsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzLmJhcnJpZXJcbiAgICAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMuaGF6YXJkID1cbiAgICAgICAgIWxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMuYmFycmllclxuICAgIH0gZWxzZSBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaGF6YXJkJykpIHtcbiAgICAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMuaGF6YXJkID1cbiAgICAgICAgIWxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMuaGF6YXJkXG4gICAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzLmJhcnJpZXIgPVxuICAgICAgICAhbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscy5oYXphcmRcbiAgICB9XG4gICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcbiAgfVxuXG4gIGFzeW5jIF9vbkxvY2F0aW9uQ2xpY2sgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHRyYWNrID0gdGFyZ2V0LmNsb3Nlc3QoJy50cmFjaycpXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnRyYWNrU2Nyb2xsUG9zaXRpb24nOiB0cmFjay5zY3JvbGxMZWZ0IH0pXG4gICAgY29uc3QgYWN0aXZlID0gdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJylcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YS5sb2NhdGlvbnMubGlzdClcbiAgICBsb2NhdGlvbnMuZm9yRWFjaChsID0+IChsLmFjdGl2ZSA9IGZhbHNlKSlcbiAgICBjb25zdCBsb2NhdGlvbkVsZW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnLmNoYXNlLWxvY2F0aW9uJylcbiAgICBjb25zdCB1dWlkID0gbG9jYXRpb25FbGVtZW50LmRhdGFzZXQudXVpZFxuICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSB0aGlzLmZpbmRJbmRleChsb2NhdGlvbnMsIHV1aWQpXG4gICAgaWYgKGxvY2F0aW9uSW5kZXggIT09IC0xKSB7XG4gICAgICBpZiAoIWFjdGl2ZSkgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLmFjdGl2ZSA9IHRydWVcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uQnV0dG9uQ2xpY2sgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGFjdGlvbiA9IHRhcmdldC5kYXRhc2V0Py5hY3Rpb25cbiAgICBpZiAoIWFjdGlvbikgcmV0dXJuXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ2luaXQnOlxuICAgICAgICBpZiAoXG4gICAgICAgICAgIWlzTmFOKHRoaXMuaXRlbS5kYXRhLmRhdGEubG9jYXRpb25zLnRvdGFsKSAmJlxuICAgICAgICAgIHRoaXMuaXRlbS5kYXRhLmRhdGEubG9jYXRpb25zLnRvdGFsID4gMFxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBsb2NhdGlvbnMgPSBBcnJheS5hcHBseShcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBBcnJheSh0aGlzLml0ZW0uZGF0YS5kYXRhLmxvY2F0aW9ucy50b3RhbClcbiAgICAgICAgICApLm1hcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4geyB1dWlkOiBmb3VuZHJ5LnV0aWxzLnJhbmRvbUlEKDE2KSB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICBsb2NhdGlvbnNbMF0ubmFtZSA9ICdTdGFydCdcbiAgICAgICAgICBpZiAobG9jYXRpb25zLmxlbmd0aCA+IDEpIGxvY2F0aW9uc1tsb2NhdGlvbnMubGVuZ3RoIC0gMV0ubmFtZSA9ICdFbmQnXG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdyZXNldCc6XG4gICAgICAgIERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvbmZpcm1SZXNldENoYXNlJyl9YCxcbiAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29uZmlybVJlc2V0Q2hhc2VIaW50Jyl9PC9wPmAsXG4gICAgICAgICAgeWVzOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QoW10pXG4gICAgICAgICAgICBhd2FpdCB0aGlzLml0ZW0udW5zZXRGbGFnKCdDb0M3JywgQ29DN0NoYXNlU2hlZXQuZmxhZ3Muc3RhcnRlZClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ2N1dDJjaGFzZSc6XG4gICAgICAgIERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvbmZpcm1DdXQyQ2hhc2UnKX1gLFxuICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db25maXJtQ3V0MkNoYXNlSGludCcpfTwvcD5gLFxuICAgICAgICAgIHllczogKCkgPT4gdGhpcy5jdXRUb1RoZUNoYXNlKClcbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAncmVzdGFydCc6XG4gICAgICAgIERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvbmZpcm1SZXN0YXJ0Q2hhc2UnKX1gLFxuICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICdDb0M3LkNvbmZpcm1SZXN0YXJ0Q2hhc2VIaW50J1xuICAgICAgICAgICl9PC9wPmAsXG4gICAgICAgICAgeWVzOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsb2NhdGlvbnMgPSB0aGlzLmxvY2F0aW9ucy5maWx0ZXIobCA9PiAhbC5pbml0KVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2NhdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uc1tpXS5wYXJ0aWNpcGFudHMpIGxvY2F0aW9uc1tpXS5wYXJ0aWNpcGFudHMgPSBbXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaXRlbS51bnNldEZsYWcoJ0NvQzcnLCBDb0M3Q2hhc2VTaGVldC5mbGFncy5zdGFydGVkKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBfY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdTdGFydCAoc2VsZWN0b3IpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBfY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wIChzZWxlY3Rvcikge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGFzeW5jIF9vbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQgKGRyYWdFdmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGRyYWdFdmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgZHJhZ0RhdGEgPSB7IHV1aWQ6IHRhcmdldC5kYXRhc2V0LnV1aWQgfVxuICAgIGRyYWdFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRyYWdEYXRhKSlcbiAgfVxuXG4gIGFzeW5jIF9vbkNoYXNlUGFydGljaXBhbnREcmFnRHJvcCAoZHJhZ0V2ZW50KSB7XG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKCdEcm9wcGVkJylcbiAgICB0aGlzLl9vbkRyYWdMZWF2ZShkcmFnRXZlbnQpXG5cbiAgICBjb25zdCB0YXJnZXQgPSBkcmFnRXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxvY2F0aW9uVXVpZCA9IHRhcmdldC5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBkYXRhU3RyaW5nID0gZHJhZ0V2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShkYXRhU3RyaW5nKVxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgIGBkcmFnZ2VkIHBhcnRpY3BhbnQgJHtkYXRhLnV1aWR9IG9udG8gbG9jYXRpb24gJHtsb2NhdGlvblV1aWR9YFxuICAgIClcbiAgICBhd2FpdCB0aGlzLm1vdmVQYXJ0aWNpcGFudChkYXRhLnV1aWQsIGxvY2F0aW9uVXVpZClcbiAgfVxuXG4gIF9vbkRyYWdPdmVyIChkcmFnRXZlbnQpIHtcbiAgICB0aGlzLl9vbkRyYWdFbnRlcihkcmFnRXZlbnQpXG4gIH1cblxuICBfb25EcmFnRW50ZXIgKGRyYWdFdmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGRyYWdFdmVudC5jdXJyZW50VGFyZ2V0XG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2RyYWctb3ZlcicpXG4gIH1cblxuICBfb25EcmFnTGVhdmUgKGRyYWdFdmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGRyYWdFdmVudC5jdXJyZW50VGFyZ2V0XG4gICAgaWYgKHR5cGVvZiB0YXJnZXQuY2xhc3NMaXN0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWctb3ZlcicpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcFBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCB1dWlkID0gdGFyZ2V0LmRhdGFzZXQ/LnV1aWRcbiAgICBjb25zdCBkYXRhU3RyaW5nID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKVxuICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpXG4gICAgYXdhaXQgdGhpcy5hbHRlclBhcnRpY2lwYW50KGRhdGEsIHV1aWQpXG4gIH1cblxuICBhc3luYyBfb25BZGRQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBsZXQgZGF0YSA9IHt9XG4gICAgaWYgKGV2ZW50LmRhdGFUcmFuc2Zlcikge1xuICAgICAgY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcbiAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpXG4gICAgfVxuICAgIGF3YWl0IHRoaXMuYWRkUGFydGljaXBhbnQoZGF0YSlcbiAgfVxuXG4gIGFzeW5jIF9vblJvbGxQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgcGFydGljaXBhbnRFbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5wYXJ0aWNpcGFudCcpXG4gICAgY29uc3QgdXVpZCA9IHBhcnRpY2lwYW50RWxlbWVudC5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLnBhcnRpY2lwYW50c1xuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IG5ldyBfcGFydGljaXBhbnQocGFydGljaXBhbnRzW2luZGV4XSlcbiAgICBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWZTZXQpIHtcbiAgICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgIHJvbGwucGFyZW50ID0gdGhpcy5pdGVtLnV1aWRcbiAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbGVkID0gdHJ1ZVxuICAgICAgcGFydGljaXBhbnQuZGF0YS5yb2xsVXVpZCA9IHJvbGwudXVpZFxuICAgICAgcm9sbC5hY3RvciA9IHBhcnRpY2lwYW50LmFjdG9yLmFjdG9yS2V5XG4gICAgICBpZiAoIWV2ZW50LnNoaWZ0S2V5ICYmIHBhcnRpY2lwYW50LmFjdG9yLnBsYXllcikge1xuICAgICAgICByb2xsLnN0YW5kYnkgPSB0cnVlXG4gICAgICAgIHJvbGwuc3RhbmRieVRleHQgPSAnQ29DNy5DaGFzZSdcbiAgICAgICAgcm9sbC5zdGFuZGJ5UmlnaHRJY29uID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvcnVubmluZy1zb2xpZC5zdmcnXG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLmlzQ2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgYXdhaXQgcm9sbC5yb2xsQ2hhcmFjdGVyaXN0aWMocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWYua2V5KVxuICAgICAgICBhd2FpdCByb2xsLnRvTWVzc2FnZSgpXG4gICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgIH0gZWxzZSBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc1NraWxsKSB7XG4gICAgICAgIHJvbGwuc2tpbGwgPSBwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZlxuICAgICAgICBhd2FpdCByb2xsLnJvbGwoKVxuICAgICAgICBhd2FpdCByb2xsLnRvTWVzc2FnZSgpXG4gICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgIH0gZWxzZSBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc0F0dHJpYnV0ZSkge1xuICAgICAgICBhd2FpdCByb2xsLnJvbGxBdHRyaWJ1dGUocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWYua2V5KVxuICAgICAgICBhd2FpdCByb2xsLnRvTWVzc2FnZSgpXG4gICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suc2NvcmUpIHtcbiAgICAgIGNvbnN0IHJvbGxEYXRhID0ge1xuICAgICAgICByYXdWYWx1ZTogcGFydGljaXBhbnQuc3BlZWRDaGVjay5zY29yZSxcbiAgICAgICAgZGlzcGxheU5hbWU6IHBhcnRpY2lwYW50LnNwZWVkQ2hlY2submFtZSxcbiAgICAgICAgYWN0b3JOYW1lOiBwYXJ0aWNpcGFudC5uYW1lID8gcGFydGljaXBhbnQubmFtZSA6IHVuZGVmaW5lZFxuICAgICAgfVxuICAgICAgaWYgKHBhcnRpY2lwYW50Lmhhc0FjdG9yKSByb2xsRGF0YS5hY3RvciA9IHBhcnRpY2lwYW50LmFjdG9yLmFjdG9yS2V5XG4gICAgICBjb25zdCByb2xsID0gQ29DN0NoZWNrLmNyZWF0ZShyb2xsRGF0YSlcbiAgICAgIHJvbGwucGFyZW50ID0gdGhpcy5pdGVtLnV1aWRcbiAgICAgIGF3YWl0IHJvbGwucm9sbCgpXG4gICAgICBhd2FpdCByb2xsLnRvTWVzc2FnZSgpXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhLnJvbGxlZCA9IHRydWVcbiAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbFV1aWQgPSByb2xsLnV1aWRcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gIH1cblxuICBfb25EcmFnRW50ZXJQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2RyYWctb3ZlcicpXG4gIH1cblxuICBfb25EcmFnTGVhdmVQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWctb3ZlcicpXG4gIH1cblxuICBhc3luYyBfb25DaGFuZ2VTaWRlIChldmVudCkge1xuICAgIC8vIGNvbnN0IHRlc3QgPSBhd2FpdCBmcm9tVXVpZCggJ1NjZW5lLndoN1NMdXZJT3BjUXliOFMuVG9rZW4ubkNkb0N5b2l1ZHRqck5rdScpO1xuICAgIC8vIGNvbnN0IGl0ZW1UZXN0ID0gYXdhaXQgZnJvbVV1aWQoICdJdGVtLnBsSUVtTlJQNk83UHZlTnYucm9sbC5xMnNBenNIdDRGc3FzZGZEJyk7XG5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0YXJnZXQuY2xvc2VzdCgnLnBhcnRpY2lwYW50JylcbiAgICBjb25zdCB1dWlkID0gcGFydGljaXBhbnQuZGF0YXNldC51dWlkXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRQYXJ0aWNpcGFudEluZGV4KHV1aWQpXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIHBhcnRpY2lwYW50c1tpbmRleF0uY2hhc2VyID0gIXBhcnRpY2lwYW50c1tpbmRleF0uY2hhc2VyXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgYXN5bmMgX29uRGVsZXRlRHJpdmVyIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBkcml2ZXIgPSB0YXJnZXQuY2xvc2VzdCgnLmRyaXZlcicpXG4gICAgY29uc3QgdXVpZCA9IGRyaXZlci5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLnBhcnRpY2lwYW50c1xuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSBwYXJ0aWNpcGFudHNbaW5kZXhdXG4gICAgZGVsZXRlIHBhcnRpY2lwYW50LmFjdG9yS2V5XG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgYXN5bmMgX29uRGVsZXRlUGFydGljaXBhbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5wYXJ0aWNpcGFudCcpXG4gICAgY29uc3QgdXVpZCA9IHBhcnRpY2lwYW50LmRhdGFzZXQudXVpZFxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBwYXJ0aWNpcGFudHMuc3BsaWNlKGluZGV4LCAxKVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIGFzeW5jIF9vblJlc2V0Um9sbCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0YXJnZXQuY2xvc2VzdCgnLnBhcnRpY2lwYW50JylcbiAgICBjb25zdCB1dWlkID0gcGFydGljaXBhbnQuZGF0YXNldC51dWlkXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRQYXJ0aWNpcGFudEluZGV4KHV1aWQpXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIGRlbGV0ZSBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmdcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gIH1cblxuICBhc3luYyBhbHRlclBhcnRpY2lwYW50IChkYXRhLCB1dWlkKSB7XG4gICAgY29uc3QgYWN0b3JLZXkgPVxuICAgICAgZGF0YS5zY2VuZUlkICYmIGRhdGEudG9rZW5JZFxuICAgICAgICA/IGAke2RhdGEuc2NlbmVJZH0uJHtkYXRhLnRva2VuSWR9YFxuICAgICAgICA6IGRhdGEudHlwZSA9PT0gJ0FjdG9yJ1xuICAgICAgICAgID8gZGF0YS5pZFxuICAgICAgICAgIDogZGF0YS5hY3RvcklkIHx8IGRhdGEuYWN0b3JLZXlcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHt9XG4gICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSlcbiAgICBpZiAoYWN0b3IpIHtcbiAgICAgIGlmIChhY3Rvci5kYXRhLnR5cGUgPT09ICd2ZWhpY2xlJykgcGFydGljaXBhbnQudmVoaWNsZUtleSA9IGFjdG9yS2V5XG4gICAgICBlbHNlIHBhcnRpY2lwYW50LmFjdG9yS2V5ID0gYWN0b3JLZXlcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGRhdGEudHlwZT8udG9Mb3dlckNhc2UoKSkge1xuICAgICAgY2FzZSAnYWN0b3InOlxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnaXRlbSc6XG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgaWQ6IGRhdGEuZGF0YT8uX2lkIHx8IGRhdGEuaWQsXG4gICAgICAgICAgdHlwZTogJ2l0ZW0nXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2NoYXJhY3RlcmlzdGljJzpcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogZGF0YS5uYW1lLFxuICAgICAgICAgIHR5cGU6ICdjaGFyYWN0ZXJpc3RpYydcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnYXR0cmlidXRlJzpcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogZGF0YS5uYW1lLFxuICAgICAgICAgIHR5cGU6ICdhdHRyaWJ1dGUnXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICAvLyBUT0RPOkNoZWNrIGZvciBzcGVlZCBjaGVjaywgaWYgbm9uZSBhZGQgc3BlZWRjaGVja1xuICAgIC8vIHNwZWVkQ2hlY2sgPSB7XG4gICAgLy8gICBpZDogJ3N0cidcbiAgICAvLyAgIHR5cGU6ICdjaGFyYWN0ZXJpc3RpYydcbiAgICAvLyB9XG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgIGNvbnN0IG9sZFBhcnRpY2lwYW50ID0gcGFydGljaXBhbnRzW2luZGV4XVxuICAgIGlmIChvbGRQYXJ0aWNpcGFudC5tb3YpIGRlbGV0ZSBvbGRQYXJ0aWNpcGFudC5tb3ZcbiAgICBtZXJnZU9iamVjdChvbGRQYXJ0aWNpcGFudCwgcGFydGljaXBhbnQpXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgYXN5bmMgYWRkUGFydGljaXBhbnQgKGRhdGEpIHtcbiAgICBjb25zdCBhY3RvcktleSA9XG4gICAgICBkYXRhLnNjZW5lSWQgJiYgZGF0YS50b2tlbklkXG4gICAgICAgID8gYCR7ZGF0YS5zY2VuZUlkfS4ke2RhdGEudG9rZW5JZH1gXG4gICAgICAgIDogZGF0YS5hY3RvcklkIHx8IGRhdGEuYWN0b3JLZXkgfHwgZGF0YS5pZFxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0ge31cbiAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGFjdG9yS2V5KVxuICAgIGlmIChhY3Rvcikge1xuICAgICAgaWYgKGFjdG9yLmRhdGEudHlwZSA9PT0gJ3ZlaGljbGUnKSBwYXJ0aWNpcGFudC52ZWhpY2xlS2V5ID0gYWN0b3JLZXlcbiAgICAgIGVsc2UgcGFydGljaXBhbnQuYWN0b3JLZXkgPSBhY3RvcktleVxuICAgIH1cblxuICAgIC8vIGNvbnN0IHBhcnRpY2lwYW50ID0ge1xuICAgIC8vICBhY3RvcktleSA6IChkYXRhLnNjZW5lSWQgJiYgZGF0YS50b2tlbklkKT9gJHtkYXRhLnNjZW5lSWR9LiR7ZGF0YS50b2tlbklkfWA6ZGF0YS5hY3RvcklkfHxkYXRhLmFjdG9yS2V5fHxkYXRhLmlkXG4gICAgLy8gfTtcbiAgICAvLyBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KCBwYXJ0aWNpcGFudC5hY3RvcktleSk7XG4gICAgLy8gaWYoICFhY3RvcikgZGVsZXRlIHBhcnRpY2lwYW50LmFjdG9yS2V5O1xuXG4gICAgc3dpdGNoIChkYXRhLnR5cGU/LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgJ2FjdG9yJzpcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICBpZiAoZGF0YS5pZCkge1xuICAgICAgICAgIGNvbnN0IGl0ZW0gPSBnYW1lLml0ZW1zLmdldChkYXRhLmlkKVxuICAgICAgICAgIGlmIChpdGVtPy5kYXRhPy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgaWQ6IGRhdGEuZGF0YT8uX2lkIHx8IGRhdGEuaWQsXG4gICAgICAgICAgdHlwZTogJ2l0ZW0nXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2NoYXJhY3RlcmlzdGljJzpcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogZGF0YS5uYW1lLFxuICAgICAgICAgIHR5cGU6ICdjaGFyYWN0ZXJpc3RpYydcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnYXR0cmlidXRlJzpcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogZGF0YS5uYW1lLFxuICAgICAgICAgIHR5cGU6ICdhdHRyaWJ1dGUnXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICAvLyBUT0RPOkNoZWNrIGZvciBzcGVlZCBjaGVjaywgaWYgbm9uZSBhZGQgc3BlZWRjaGVjayBjb24gbm9uIHZlaGljdWxlLCBkcml2ZSBhdXRvIGZvciB2ZWhpY3VsZVxuICAgIC8vIHNwZWVkQ2hlY2sgPSB7XG4gICAgLy8gICBpZDogJ2NvbidcbiAgICAvLyAgIHR5cGU6ICdjaGFyYWN0ZXJpc3RpYydcbiAgICAvLyB9XG5cbiAgICBpZiAoIXBhcnRpY2lwYW50LnNwZWVkQ2hlY2spIHtcbiAgICAgIGlmICghdGhpcy5pdGVtLmRhdGEuZGF0YS52ZWhpY3VsZSkge1xuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiAnY29uJyxcbiAgICAgICAgICB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkNvbnN0aXR1dGlvbicpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgdHlwZTogJ2l0ZW0nLFxuICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ecml2ZUF1dG9Ta2lsbE5hbWUnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cblxuICAgIGxldCB1bmlxdWUgPSBmYWxzZVxuICAgIHdoaWxlICghdW5pcXVlKSB7XG4gICAgICBwYXJ0aWNpcGFudC51dWlkID0gZm91bmRyeS51dGlscy5yYW5kb21JRCgxNilcbiAgICAgIHVuaXF1ZSA9XG4gICAgICAgIHBhcnRpY2lwYW50cy5maWx0ZXIocCA9PiBwLnV1aWQgPT09IHBhcnRpY2lwYW50LnV1aWQpLmxlbmd0aCA9PT0gMFxuICAgIH1cblxuICAgIHBhcnRpY2lwYW50cy5wdXNoKHBhcnRpY2lwYW50KVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVJvbGwgKHJvbGxTdHJpbmcpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGNvbnN0IHJvbGwgPSBDb0M3Q2hlY2suZnJvbVJvbGxTdHJpbmcocm9sbFN0cmluZylcbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzXG4gICAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEucGFydGljaXBhbnRzKVxuICAgICAgICA6IFtdXG4gICAgICBjb25zdCBpbmRleCA9IHBhcnRpY2lwYW50cy5maW5kSW5kZXgocCA9PiBwLnJvbGxVdWlkID09PSByb2xsLnV1aWQpXG4gICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgZGF0YTogcm9sbFN0cmluZyxcbiAgICAgICAgdHlwZTogJ2ludm9rZScsXG4gICAgICAgIG1ldGhvZDogJ3VwZGF0ZVJvbGwnLFxuICAgICAgICBpdGVtOiB0aGlzLml0ZW0udXVpZFxuICAgICAgfVxuICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIG1vdmVQYXJ0aWNpcGFudCAocGFydGljaXBhbnRVdWlkLCBsb2NhdGlvblV1aWQpIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YS5sb2NhdGlvbnMubGlzdClcblxuICAgIC8vIEZpbmQgZGVzdGluYXRpb24gbG9jYXRpb24uXG4gICAgY29uc3QgZGVzdGluYXRpb24gPSBsb2NhdGlvbnMuZmluZChsID0+IGxvY2F0aW9uVXVpZCA9PT0gbC51dWlkKVxuICAgIGlmICghZGVzdGluYXRpb24pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIGBGYWlsZWQgdG8gbW92ZSAke3BhcnRpY2lwYW50VXVpZH0uIExvY2F0aW9uICR7bG9jYXRpb25VdWlkfSB1bmtub3duYFxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gRmluZCBvcmlnaW4gbG9jYXRpb25cbiAgICBjb25zdCBvcmlnaW4gPSBsb2NhdGlvbnMuZmluZChsID0+XG4gICAgICBsLnBhcnRpY2lwYW50cz8uaW5jbHVkZXMocGFydGljaXBhbnRVdWlkKVxuICAgIClcbiAgICAvLyBpZiAobC5wYXJ0aWNpcGFudHMpIHtcbiAgICAvLyAgIGlmICgtMSAhPSBsLnBhcnRpY2lwYW50cy5maW5kSW5kZXgocCA9PiBwYXJ0aWNpcGFudFV1aWQgPT0gcC51dWlkIHx8IHAgPT0gcGFydGljaXBhbnRVdWlkKSlcbiAgICAvLyAgICAgcmV0dXJuIHRydWVcbiAgICAvLyB9XG4gICAgLy8gcmV0dXJuIGZhbHNlXG4gICAgLy8gfSlcbiAgICBpZiAoIW9yaWdpbikge1xuICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGZpbmQgJHtwYXJ0aWNpcGFudFV1aWR9IGluIGxvY2F0aW9uc2ApXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoIWRlc3RpbmF0aW9uLnBhcnRpY2lwYW50cykgZGVzdGluYXRpb24ucGFydGljaXBhbnRzID0gW11cbiAgICBkZXN0aW5hdGlvbi5wYXJ0aWNpcGFudHMucHVzaChwYXJ0aWNpcGFudFV1aWQpXG4gICAgLy8gZGVzdGluYXRpb24ucGFydGljaXBhbnRzLnNvcnQoc29ydEJ5Um9sZUFuZERleClcblxuICAgIGNvbnN0IG9sZFBhcnRpY2lwYW50c0xpc3QgPSBvcmlnaW4ucGFydGljaXBhbnRzLmZpbHRlcihcbiAgICAgIHAgPT4gcGFydGljaXBhbnRVdWlkICE9PSBwXG4gICAgKVxuICAgIG9yaWdpbi5wYXJ0aWNpcGFudHMgPSBvbGRQYXJ0aWNpcGFudHNMaXN0XG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzb3J0QnlSb2xlQW5kRGV4IChhLCBiKSB7XG4gIC8vIFB1dCBjaGFzZXJzIGZpcnN0XG4gIGlmIChiLmNoYXNlciAmJiAhYS5jaGFzZXIpIHJldHVybiAxXG4gIGlmIChhLmNoYXNlciAmJiAhYi5jaGFzZXIpIHJldHVybiAtMVxuICAvLyBJZiBzYW1ldHlwZSBzb3J0IGJ5IGRleFxuICByZXR1cm4gYS5kZXggLSBiLmRleFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYW4gKG9iaikge1xuICBmb3IgKGNvbnN0IHByb3BOYW1lIGluIG9iaikge1xuICAgIGNvbnN0IHRwID0gZ2V0VHlwZShvYmpbcHJvcE5hbWVdKVxuICAgIGlmICh0cCA9PT0gJ09iamVjdCcpIHtcbiAgICAgIG9ialtwcm9wTmFtZV0gPSBjbGVhbihvYmpbcHJvcE5hbWVdKVxuICAgIH1cblxuICAgIGlmICh0cCA9PT0gJ09iamVjdCcgJiYgIU9iamVjdC5lbnRyaWVzKG9ialtwcm9wTmFtZV0pLmxlbmd0aCkge1xuICAgICAgb2JqW3Byb3BOYW1lXSA9IG51bGxcbiAgICB9IGVsc2UgaWYgKHRwID09PSAnc3RyaW5nJyAmJiAhb2JqW3Byb3BOYW1lXS5sZW5ndGgpIHtcbiAgICAgIG9ialtwcm9wTmFtZV0gPSBudWxsXG4gICAgfSBlbHNlIGlmICh0cCA9PT0gJ3N0cmluZycgJiYgIWlzTmFOKE51bWJlcihvYmpbcHJvcE5hbWVdKSkpIHtcbiAgICAgIG9ialtwcm9wTmFtZV0gPSBOdW1iZXIob2JqW3Byb3BOYW1lXSlcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9ialxufVxuXG5leHBvcnQgY2xhc3MgX3BhcnRpY2lwYW50IHtcbiAgY29uc3RydWN0b3IgKGRhdGEgPSB7fSkge1xuICAgIHRoaXMuZGF0YSA9IGRhdGFcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLl9hY3Rvcikge1xuICAgICAgdGhpcy5fYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmRhdGEuYWN0b3JLZXkpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9hY3RvclxuICB9XG5cbiAgZ2V0IGlzQWN0b3IgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0FjdG9yIHx8IHRoaXMuaGFzVmVoaWNsZVxuICB9XG5cbiAgZ2V0IGtleSAoKSB7XG4gICAgaWYgKHRoaXMuaGFzVmVoaWNsZSkgcmV0dXJuIHRoaXMudmVoaWNsZS5hY3RvcktleVxuICAgIGlmICh0aGlzLmhhc0FjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5hY3RvcktleVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBpY29uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNBY3Rvcikge1xuICAgICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3F1ZXN0aW9uLWNpcmNsZS1yZWd1bGFyLnN2ZydcbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzVmVoaWNsZSkgcmV0dXJuIHRoaXMudmVoaWNsZS5pbWdcbiAgICBpZiAodGhpcy5oYXNBY3RvcikgcmV0dXJuIHRoaXMuYWN0b3IuaW1nXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGRyaXZlciAoKSB7XG4gICAgaWYgKCF0aGlzLl9kcml2ZXIpIHtcbiAgICAgIHRoaXMuX2RyaXZlciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuZGF0YS5hY3RvcktleSlcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2RyaXZlclxuICB9XG5cbiAgZ2V0IHZlaGljbGUgKCkge1xuICAgIGlmICh0aGlzLmRhdGEudmVoaWNsZUtleSkge1xuICAgICAgdGhpcy5fdmVoaWNsZSA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuZGF0YS52ZWhpY2xlS2V5KVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdmVoaWNsZVxuICB9XG5cbiAgZ2V0IGhhc0FjdG9yICgpIHtcbiAgICByZXR1cm4gISF0aGlzLmFjdG9yXG4gIH1cblxuICBnZXQgaGFzVmVoaWNsZSAoKSB7XG4gICAgcmV0dXJuICEhdGhpcy52ZWhpY2xlXG4gIH1cblxuICBnZXQgbmFtZSAoKSB7XG4gICAgaWYgKHRoaXMuaGFzVmVoaWNsZSkgcmV0dXJuIHRoaXMudmVoaWNsZS5uYW1lXG4gICAgaWYgKHRoaXMuaGFzQWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLm5hbWVcbiAgICByZXR1cm4gdGhpcy5kYXRhLm5hbWUgfHwgdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgbW92ICgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5tb3YpIHtcbiAgICAgIGlmICh0aGlzLmhhc1ZlaGljbGUpIHRoaXMuZGF0YS5tb3YgPSB0aGlzLnZlaGljbGUubW92XG4gICAgICBlbHNlIGlmICh0aGlzLmhhc0FjdG9yKSB0aGlzLmRhdGEubW92ID0gdGhpcy5hY3Rvci5tb3ZcbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLm1vdikge1xuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5kYXRhLm1vdikpKSB0aGlzLmRhdGEuaGFzVmFsaWRNb3YgPSB0cnVlXG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5kYXRhLmhhc1ZhbGlkTW92ID0gZmFsc2VcbiAgICAgICAgdGhpcy5kYXRhLm1vdiA9IHVuZGVmaW5lZFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmRhdGEubW92XG4gIH1cblxuICBnZXQgdXVpZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS51dWlkXG4gIH1cblxuICBnZXQgZGV4ICgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5kZXgpIHtcbiAgICAgIGlmICh0aGlzLmhhc1ZlaGljbGUgJiYgdGhpcy5oYXNEcml2ZXIpIHtcbiAgICAgICAgdGhpcy5kYXRhLmRleCA9IHRoaXMuZHJpdmVyLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWVcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5oYXNBY3Rvcikge1xuICAgICAgICB0aGlzLmRhdGEuZGV4ID0gdGhpcy5hY3Rvci5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS5kZXgpIHtcbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuZGF0YS5kZXgpKSkgdGhpcy5kYXRhLmhhc1ZhbGlkRGV4ID0gdHJ1ZVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMuZGF0YS5oYXNWYWxpZERleCA9IGZhbHNlXG4gICAgICAgIHRoaXMuZGF0YS5kZXggPSAwXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZGF0YS5kZXhcbiAgfVxuXG4gIGdldCBpc0NoYXNlciAoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5kYXRhLmNoYXNlclxuICB9XG5cbiAgZ2V0IGlzVmFsaWQgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc1ZhbGlkRGV4ICYmIHRoaXMuaGFzVmFsaWRNb3ZcbiAgfVxuXG4gIGdldCBoYXNWYWxpZERleCAoKSB7XG4gICAgcmV0dXJuICFpc05hTihOdW1iZXIodGhpcy5kYXRhLmRleCkpXG4gIH1cblxuICBnZXQgaGFzVmFsaWRNb3YgKCkge1xuICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHRoaXMuZGF0YS5tb3YpKVxuICB9XG5cbiAgZ2V0IGhhc0RyaXZlciAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzVmVoaWNsZSAmJiB0aGlzLmhhc0FjdG9yXG4gIH1cblxuICBnZXQgbW92QWRqdXN0bWVudCAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5yb2xsRGF0YVN0cmluZykge1xuICAgICAgY29uc3Qgcm9sbCA9IENvQzdDaGVjay5mcm9tUm9sbFN0cmluZyh0aGlzLmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZylcbiAgICAgIGlmIChyb2xsKSB7XG4gICAgICAgIGlmICghcm9sbC5zdGFuZGJ5KSB7XG4gICAgICAgICAgaWYgKHJvbGwuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSkgcmV0dXJuIDFcbiAgICAgICAgICBlbHNlIGlmIChyb2xsLmZhaWxlZCkgcmV0dXJuIC0xXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIGdldCBhZGp1c3RlZE1vdiAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLm1vdiA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoaXNOYU4oTnVtYmVyKHRoaXMubW92KSkpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gTnVtYmVyKHRoaXMubW92KSArIHRoaXMubW92QWRqdXN0bWVudFxuICB9XG5cbiAgZ2V0IGhhc01vdkFkanVzdG1lbnQgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0JvbnVzTW92IHx8IHRoaXMuaGFzTWFsdXNNb3ZcbiAgfVxuXG4gIGdldCBoYXNCb251c01vdiAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5tb3ZBZGp1c3RtZW50ID4gMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBoYXNNYWx1c01vdiAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5tb3ZBZGp1c3RtZW50IDwgMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8vIGdldCBvcHRpb25zKCl7XG4gIC8vICByZXR1cm4ge1xuICAvLyAgICBleGNsdWRlOiBbXSxcbiAgLy8gICAgZXhjbHVkZVN0YXJ0V2l0aDogJ18nXG4gIC8vICB9O1xuICAvLyB9XG5cbiAgLy8gZ2V0IGRhdGFTdHJpbmcoKXtcbiAgLy8gIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLCAoa2V5LHZhbHVlKT0+e1xuICAvLyAgICBpZiggbnVsbCA9PT0gdmFsdWUpIHJldHVybiB1bmRlZmluZWQ7XG4gIC8vICAgIGlmKCB0aGlzLm9wdGlvbnMuZXhjbHVkZT8uaW5jbHVkZXMoa2V5KSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgLy8gICAgaWYoIGtleS5zdGFydHNXaXRoKHRoaXMub3B0aW9ucy5leGNsdWRlU3RhcnRXaXRoKSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgLy8gICAgcmV0dXJuIHZhbHVlO1xuICAvLyAgfSk7XG4gIC8vIH1cblxuICB0b29TbG93ICgpIHtcbiAgICB0aGlzLmRhdGEuZXhjbHVkZWQgPSB0cnVlXG4gIH1cblxuICBpbmNsdWRlSW5DaGFzZSAoKSB7XG4gICAgdGhpcy5kYXRhLmV4Y2x1ZGVkID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuZXNjYXBlZCA9IGZhbHNlXG4gIH1cblxuICBlc2NhcGVkICgpIHtcbiAgICB0aGlzLmRhdGEuZXNjYXBlZCA9IHRydWVcbiAgfVxuXG4gIHNldCBzbG93ZXN0ICh4KSB7XG4gICAgdGhpcy5kYXRhLnNsb3dlc3QgPSB4XG4gIH1cblxuICBnZXQgc2xvd2VzdCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5zbG93ZXN0XG4gIH1cblxuICBzZXQgZmFzdGVzdCAoeCkge1xuICAgIHRoaXMuZGF0YS5mYXN0ZXN0ID0geFxuICB9XG5cbiAgZ2V0IGZhc3Rlc3QgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEuZmFzdGVzdFxuICB9XG5cbiAgc2V0IG1vdmVtZW50QWN0aW9uICh4KSB7XG4gICAgdGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uID0geFxuICB9XG5cbiAgZ2V0IG1vdmVtZW50QWN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uXG4gIH1cblxuICBnZXQgY3NzQ2xhc3MgKCkge1xuICAgIGNvbnN0IGNzc0NsYXNzZXMgPSBbXVxuICAgIGlmICh0aGlzLmlzQ2hhc2VyKSBjc3NDbGFzc2VzLnB1c2goJ2NoYXNlcicpXG4gICAgZWxzZSBjc3NDbGFzc2VzLnB1c2goJ3ByZXknKVxuICAgIGlmICh0aGlzLmRhdGEuZXhjbHVkZWQpIGNzc0NsYXNzZXMucHVzaCgnZXhjbHVkZWQnLCAndG9vX3Nsb3cnKVxuICAgIGlmICh0aGlzLmRhdGEuZXNjYXBlZCkgY3NzQ2xhc3Nlcy5wdXNoKCdlc2NhcGVkJylcbiAgICBpZiAodGhpcy5kYXRhLmZhc3Rlc3QpIGNzc0NsYXNzZXMucHVzaCgnZmFzdGVzdCcpXG4gICAgaWYgKHRoaXMuZGF0YS5zbG93ZXN0KSBjc3NDbGFzc2VzLnB1c2goJ3Nsb3dlc3QnKVxuICAgIHJldHVybiBjc3NDbGFzc2VzLmpvaW4oJyAnKVxuICB9XG5cbiAgZ2V0IHNwZWVkQ2hlY2sgKCkge1xuICAgIGNvbnN0IGNoZWNrID0ge31cbiAgICBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/Lm5hbWUpIGNoZWNrLm5hbWUgPSB0aGlzLmRhdGEuc3BlZWRDaGVjay5uYW1lXG4gICAgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5zY29yZSkgY2hlY2suc2NvcmUgPSB0aGlzLmRhdGEuc3BlZWRDaGVjay5zY29yZVxuICAgIGNoZWNrLmNzc0NsYXNzZXMgPSAnJ1xuICAgIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8ucm9sbERhdGFTdHJpbmcpIHtcbiAgICAgIGNoZWNrLnJvbGwgPSBDb0M3Q2hlY2suZnJvbVJvbGxTdHJpbmcodGhpcy5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcpXG4gICAgICBpZiAoY2hlY2sucm9sbCkge1xuICAgICAgICBpZiAoIWNoZWNrLnJvbGwuc3RhbmRieSB8fCBjaGVjay5yb2xsLmhhc0NhcmQpIHtcbiAgICAgICAgICBjaGVjay5yb2xsZWQgPSB0cnVlXG4gICAgICAgICAgY2hlY2suaW5saW5lUm9sbCA9IGNoZWNrLnJvbGwuaW5saW5lQ2hlY2sub3V0ZXJIVE1MXG4gICAgICAgICAgY2hlY2suY3NzQ2xhc3NlcyArPSAncm9sbGVkJ1xuICAgICAgICAgIGlmICghY2hlY2sucm9sbC5zdGFuZGJ5KSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sucm9sbC5zdWNjZXNzTGV2ZWwgPj0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lKSB7XG4gICAgICAgICAgICAgIGNoZWNrLm1vZGlmaWVyQ3NzID0gJ3VwZ3JhZGUnXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNoZWNrLnJvbGwuZmFpbGVkKSBjaGVjay5tb2RpZmllckNzcyA9ICdkb3duZ3JhZGUnXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIGNoZWNrLnJvbGwuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSB8fFxuICAgICAgICAgICAgICBjaGVjay5yb2xsLmZhaWxlZFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNoZWNrLmhhc01vZGlmaWVyID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5oYXNBY3Rvcikge1xuICAgICAgY2hlY2sub3B0aW9ucyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IGMgb2YgWydjb24nXSkge1xuICAgICAgICBjb25zdCBjaGFyYWN0ZXJpc2l0YyA9IHRoaXMuYWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWMoYylcbiAgICAgICAgaWYgKGNoYXJhY3RlcmlzaXRjPy52YWx1ZSkgY2hlY2sub3B0aW9ucy5wdXNoKGNoYXJhY3RlcmlzaXRjLmxhYmVsKVxuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IHMgb2YgdGhpcy5hY3Rvci5kcml2ZVNraWxscykge1xuICAgICAgICBjaGVjay5vcHRpb25zLnB1c2gocy5uYW1lKVxuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IHMgb2YgdGhpcy5hY3Rvci5waWxvdFNraWxscykge1xuICAgICAgICBjaGVjay5vcHRpb25zLnB1c2gocy5uYW1lKVxuICAgICAgfVxuICAgICAgY2hlY2suaGFzT3B0aW9ucyA9ICEhY2hlY2sub3B0aW9ucy5sZW5ndGhcblxuICAgICAgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5pZCkge1xuICAgICAgICBsZXQgaXRlbSA9IHRoaXMuYWN0b3IuZmluZCh0aGlzLmRhdGEuc3BlZWRDaGVjay5pZClcbiAgICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgICAgY29uc3QgZ2FtZUl0ZW0gPSBnYW1lLml0ZW1zLmdldCh0aGlzLmRhdGEuc3BlZWRDaGVjay5pZClcbiAgICAgICAgICBpZiAoZ2FtZUl0ZW0pIGl0ZW0gPSB0aGlzLmFjdG9yLmZpbmQoZ2FtZUl0ZW0ubmFtZSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2l0ZW0nICYmIGl0ZW0udmFsdWUuZGF0YT8udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgICAgY2hlY2sucmVmID0gaXRlbS52YWx1ZVxuICAgICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0udmFsdWUubmFtZVxuICAgICAgICAgICAgY2hlY2sudHlwZSA9ICdza2lsbCdcbiAgICAgICAgICAgIGNoZWNrLmlzU2tpbGwgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5yZWZTZXQgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0udmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2NoYXJhY3RlcmlzdGljJykge1xuICAgICAgICAgICAgY2hlY2sucmVmID0gaXRlbS52YWx1ZVxuICAgICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0udmFsdWUubGFiZWxcbiAgICAgICAgICAgIGNoZWNrLnR5cGUgPSAnY2hhcmFjdGVyaXN0aWMnXG4gICAgICAgICAgICBjaGVjay5pc0NoYXJhY3RlcmlzdGljID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2sucmVmU2V0ID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLnZhbHVlLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdhdHRyaWJ1dGUnKSB7XG4gICAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5sYWJlbFxuICAgICAgICAgICAgY2hlY2sudHlwZSA9ICdhdHRyaWJ1dGUnXG4gICAgICAgICAgICBjaGVjay5pc0F0dHJpYnV0ZSA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnJlZlNldCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS52YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8ubmFtZSkge1xuICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5maW5kKHRoaXMuZGF0YS5zcGVlZENoZWNrLm5hbWUpXG4gICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2l0ZW0nICYmIGl0ZW0udmFsdWUuZGF0YT8udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgICAgY2hlY2sucmVmID0gaXRlbS52YWx1ZVxuICAgICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0udmFsdWUubmFtZVxuICAgICAgICAgICAgY2hlY2sudHlwZSA9ICdza2lsbCdcbiAgICAgICAgICAgIGNoZWNrLmlzU2tpbGwgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5yZWZTZXQgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0udmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2NoYXJhY3RlcmlzdGljJykge1xuICAgICAgICAgICAgY2hlY2sucmVmID0gaXRlbS52YWx1ZVxuICAgICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0udmFsdWUubGFiZWxcbiAgICAgICAgICAgIGNoZWNrLnR5cGUgPSAnY2hhcmFjdGVyaXN0aWMnXG4gICAgICAgICAgICBjaGVjay5pc0NoYXJhY3RlcmlzdGljID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2sucmVmU2V0ID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLnZhbHVlLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdhdHRyaWJ1dGUnKSB7XG4gICAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5sYWJlbFxuICAgICAgICAgICAgY2hlY2sudHlwZSA9ICdhdHRyaWJ1dGUnXG4gICAgICAgICAgICBjaGVjay5pc0F0dHJpYnV0ZSA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnJlZlNldCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS52YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/LmlkKSB7XG4gICAgICBjb25zdCBpdGVtID0gZ2FtZS5pdGVtcy5nZXQodGhpcy5kYXRhLnNwZWVkQ2hlY2suaWQpXG4gICAgICBpZiAoaXRlbSkge1xuICAgICAgICBpZiAoaXRlbS5kYXRhPy50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgY2hlY2sucmVmID0gaXRlbVxuICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLm5hbWVcbiAgICAgICAgICBjaGVjay50eXBlID0gJ3NraWxsJ1xuICAgICAgICAgIGNoZWNrLmlzU2tpbGwgPSB0cnVlXG4gICAgICAgICAgY2hlY2sucmVmU2V0ID0gZmFsc2VcbiAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0uYmFzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFjaGVjay5yb2xsZWQgJiYgIWNoZWNrLnNjb3JlKSBjaGVjay5jc3NDbGFzc2VzICs9ICcgaW52YWxpZCdcbiAgICBjaGVjay5pc1ZhbGlkID0gY2hlY2sucm9sbGVkICYmICFpc05hTihjaGVjay5zY29yZSlcblxuICAgIHJldHVybiBjaGVja1xuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCAqL1xuXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3SXRlbVNoZWV0VjIgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICBjb25zdHJ1Y3RvciAoLi4uYXJncykge1xuICAgIHN1cGVyKC4uLmFyZ3MpXG4gICAgdGhpcy5fc2hlZXRUYWIgPSAnaXRlbXMnXG4gIH1cblxuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIFNpbXBsZSBJdGVtIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldFYyJywgJ2l0ZW0nXSxcbiAgICAgIHdpZHRoOiAyOTAsXG4gICAgICBoZWlnaHQ6IDMyNixcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvaXRlbS1zaGVldFYyLmh0bWwnXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBnZXREYXRhIChvcHRpb25zID0ge30pIHtcbiAgICAvLyB0aGlzLml0ZW0uY2hlY2tTa2lsbFByb3BlcnRpZXMoKTtcbiAgICBjb25zdCBkYXRhID0gc3VwZXIuZ2V0RGF0YShvcHRpb25zKVxuXG4gICAgLyoqIE1PRElGOiAwLjgueCAqKi9cbiAgICBjb25zdCBpdGVtRGF0YSA9IGRhdGEuZGF0YVxuICAgIGRhdGEuZGF0YSA9IGl0ZW1EYXRhLmRhdGEgLy8gTU9ESUY6IDAuOC54IGRhdGEuZGF0YVxuICAgIC8qKioqKioqKioqKioqKioqKi9cblxuICAgIGRhdGEuaGFzT3duZXIgPSB0aGlzLml0ZW0uYWN0b3IgIT09IG51bGxcblxuICAgIGlmICh0aGlzLml0ZW0uZGF0YS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICBkYXRhLl9wcm9wZXJ0aWVzID0gW11cbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuc2tpbGxQcm9wZXJ0aWVzKSkge1xuICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IHt9XG4gICAgICAgIHByb3BlcnR5LmlkID0ga2V5XG4gICAgICAgIHByb3BlcnR5Lm5hbWUgPSB2YWx1ZVxuICAgICAgICBwcm9wZXJ0eS5pc0VuYWJsZWQgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXNba2V5XSA9PT0gdHJ1ZVxuICAgICAgICBkYXRhLl9wcm9wZXJ0aWVzLnB1c2gocHJvcGVydHkpXG4gICAgICB9XG5cbiAgICAgIGRhdGEuX2VyYXMgPSBbXVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5lcmFzKSkge1xuICAgICAgICBjb25zdCBlcmEgPSB7fVxuICAgICAgICBlcmEuaWQgPSBrZXlcbiAgICAgICAgZXJhLm5hbWUgPSB2YWx1ZVxuICAgICAgICBlcmEuaXNFbmFibGVkID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5lcmFzW2tleV0gPT09IHRydWVcbiAgICAgICAgZGF0YS5fZXJhcy5wdXNoKGVyYSlcbiAgICAgIH1cblxuICAgICAgZGF0YS5pc1NwZWNpYWxpemVkID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLnNwZWNpYWxcbiAgICAgIGRhdGEuY2FuTW9kaWZ5U3BlYyA9XG4gICAgICAgICF0aGlzLml0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXMuZmlyZWFybSAmJlxuICAgICAgICAhdGhpcy5pdGVtLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmZpZ2h0aW5nXG4gICAgfVxuXG4gICAgZGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vbkNsaWNrVG9nZ2xlLmJpbmQodGhpcykpXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIGFzeW5jIF9vbkNsaWNrVG9nZ2xlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBwcm9wZXJ0eUlkID1cbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRvZ2dsZS1zd2l0Y2gnKS5kYXRhc2V0LnByb3BlcnR5XG4gICAgYXdhaXQgdGhpcy5pdGVtLnRvZ2dsZVByb3BlcnR5KFxuICAgICAgcHJvcGVydHlJZCxcbiAgICAgIGV2ZW50Lm1ldGFLZXkgfHxcbiAgICAgICAgZXZlbnQuY3RybEtleSB8fFxuICAgICAgICBldmVudC5rZXlDb2RlID09PSA5MSB8fFxuICAgICAgICBldmVudC5rZXlDb2RlID09PSAyMjRcbiAgICApXG4gIH1cblxuICAvLyBhc3luYyBfb25DbGlja0F0dHJpYnV0ZUNvbnRyb2woZXZlbnQpIHtcbiAgLy8gICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAvLyAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuICAvLyAgIGNvbnN0IGFjdGlvbiA9IGEuZGF0YXNldC5hY3Rpb247XG4gIC8vICAgY29uc3QgYXR0cnMgPSB0aGlzLm9iamVjdC5kYXRhLmRhdGEuYXR0cmlidXRlcztcbiAgLy8gICBjb25zdCBmb3JtID0gdGhpcy5mb3JtO1xuXG4gIC8vICAgLy8gQWRkIG5ldyBhdHRyaWJ1dGVcbiAgLy8gICBpZiAoYWN0aW9uID09PSBcImNyZWF0ZVwiKSB7XG4gIC8vICAgICBjb25zdCBuayA9IE9iamVjdC5rZXlzKGF0dHJzKS5sZW5ndGggKyAxO1xuICAvLyAgICAgbGV0IG5ld0tleSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIC8vICAgICBuZXdLZXkuaW5uZXJIVE1MID0gYDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJkYXRhLmF0dHJpYnV0ZXMuYXR0ciR7bmt9LmtleVwiIHZhbHVlPVwiYXR0ciR7bmt9XCIvPmA7XG4gIC8vICAgICBuZXdLZXkgPSBuZXdLZXkuY2hpbGRyZW5bMF07XG4gIC8vICAgICBmb3JtLmFwcGVuZENoaWxkKG5ld0tleSk7XG4gIC8vICAgICBhd2FpdCB0aGlzLl9vblN1Ym1pdChldmVudCk7XG4gIC8vICAgfVxuXG4gIC8vICAgLy8gUmVtb3ZlIGV4aXN0aW5nIGF0dHJpYnV0ZVxuICAvLyAgIGVsc2UgaWYgKGFjdGlvbiA9PT0gXCJkZWxldGVcIikge1xuICAvLyAgICAgY29uc3QgbGkgPSBhLmNsb3Nlc3QoXCIuYXR0cmlidXRlXCIpO1xuICAvLyAgICAgbGkucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChsaSk7XG4gIC8vICAgICBhd2FpdCB0aGlzLl9vblN1Ym1pdChldmVudCk7XG4gIC8vICAgfVxuICAvLyB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogSW1wbGVtZW50IHRoZSBfdXBkYXRlT2JqZWN0IG1ldGhvZCBhcyByZXF1aXJlZCBieSB0aGUgcGFyZW50IGNsYXNzIHNwZWNcbiAgICogVGhpcyBkZWZpbmVzIGhvdyB0byB1cGRhdGUgdGhlIHN1YmplY3Qgb2YgdGhlIGZvcm0gd2hlbiB0aGUgZm9ybSBpcyBzdWJtaXR0ZWRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIC8vIF91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKSB7XG4gIC8vICAgLy8gSGFuZGxlIHRoZSBmcmVlLWZvcm0gYXR0cmlidXRlcyBsaXN0XG4gIC8vICAgY29uc3QgZm9yZCA9IGV4cGFuZE9iamVjdChmb3JtRGF0YSk7XG4gIC8vICAgY29uc3QgZm9ybUF0dHJzID0gZXhwYW5kT2JqZWN0KGZvcm1EYXRhKS5kYXRhLmF0dHJpYnV0ZXMgfHwge307XG4gIC8vICAgY29uc3QgYXR0cmlidXRlcyA9IE9iamVjdC52YWx1ZXMoZm9ybUF0dHJzKS5yZWR1Y2UoKG9iaiwgdikgPT4ge1xuICAvLyAgICAgbGV0IGsgPSB2W1wia2V5XCJdLnRyaW0oKTtcbiAgLy8gICAgIGlmICgvW1xcc1xcLl0vLnRlc3QoaykpIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKFwiQXR0cmlidXRlIGtleXMgbWF5IG5vdCBjb250YWluIHNwYWNlcyBvciBwZXJpb2RzXCIpO1xuICAvLyAgICAgZGVsZXRlIHZbXCJrZXlcIl07XG4gIC8vICAgICBvYmpba10gPSB2O1xuICAvLyAgICAgcmV0dXJuIG9iajtcbiAgLy8gICB9LCB7fSk7XG5cbiAgLy8gICAvLyBSZW1vdmUgYXR0cmlidXRlcyB3aGljaCBhcmUgbm8gbG9uZ2VyIHVzZWRcbiAgLy8gICBmb3IgKGxldCBrIG9mIE9iamVjdC5rZXlzKHRoaXMub2JqZWN0LmRhdGEuZGF0YS5hdHRyaWJ1dGVzKSkge1xuICAvLyAgICAgaWYgKCFhdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGspKSBhdHRyaWJ1dGVzW2AtPSR7a31gXSA9IG51bGw7XG4gIC8vICAgfVxuXG4gIC8vICAgLy8gUmUtY29tYmluZSBmb3JtRGF0YVxuICAvLyAgIGZvcm1EYXRhID0gT2JqZWN0LmVudHJpZXMoZm9ybURhdGEpLmZpbHRlcihlID0+ICFlWzBdLnN0YXJ0c1dpdGgoXCJkYXRhLmF0dHJpYnV0ZXNcIikpLnJlZHVjZSgob2JqLCBlKSA9PiB7XG4gIC8vICAgICBvYmpbZVswXV0gPSBlWzFdO1xuICAvLyAgICAgcmV0dXJuIG9iajtcbiAgLy8gICB9LCB7IF9pZDogdGhpcy5vYmplY3QuX2lkLCBcImRhdGEuYXR0cmlidXRlc1wiOiBhdHRyaWJ1dGVzIH0pO1xuXG4gIC8vICAgLy8gVXBkYXRlIHRoZSBJdGVtXG4gIC8vICAgcmV0dXJuIHRoaXMub2JqZWN0LnVwZGF0ZShmb3JtRGF0YSk7XG4gIC8vIH1cbn1cbiIsIi8qIGdsb2JhbCBtZXJnZU9iamVjdCAqL1xuXG5pbXBvcnQgeyBDb0M3SXRlbVNoZWV0VjIgfSBmcm9tICcuL2l0ZW0tc2hlZXRWMi5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN0l0ZW1TaGVldCBleHRlbmRzIENvQzdJdGVtU2hlZXRWMiB7XG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgU2ltcGxlIEl0ZW0gU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgd2lkdGg6IDUyMCxcbiAgICAgIGhlaWdodDogNTA2XG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIERyYWdEcm9wLCBkdXBsaWNhdGUsIGV4cGFuZE9iamVjdCwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCAqL1xuXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcbi8vIGltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vLi4vYWN0b3JzL2FjdG9yLmpzJztcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN09jY3VwYXRpb25TaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcbiAgICogQHBhcmFtIGh0bWwge0hUTUx9ICAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxuICAgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyBvbmx5IG5lZWRlZCBpZiB0aGUgc2hlZXQgaXMgZWRpdGFibGVcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0gLml0ZW0tbmFtZSBoNCcpXG4gICAgICAuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtU3VtbWFyeShldmVudCwgJ3NraWxscycpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbS1kZWxldGUnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbURlbGV0ZShldmVudCwgJ3NraWxscycpKVxuXG4gICAgaHRtbC5maW5kKCcuZ3JvdXAtaXRlbS1kZWxldGUnKS5jbGljayh0aGlzLl9vbkdyb3VwSXRlbURlbGV0ZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmdyb3VwLWNvbnRyb2wnKS5jbGljayh0aGlzLl9vbkdyb3VwQ29udHJvbC5iaW5kKHRoaXMpKVxuXG4gICAgY29uc3QgZHJhZ0Ryb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xuICAgICAgZHJvcFNlbGVjdG9yOiAnLmRyb3BwYWJsZScsXG4gICAgICBjYWxsYmFja3M6IHsgZHJvcDogdGhpcy5fb25Ecm9wLmJpbmQodGhpcykgfVxuICAgIH0pXG4gICAgZHJhZ0Ryb3AuYmluZChodG1sWzBdKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQsIHR5cGUgPSAnc2tpbGwnLCBjb2xsZWN0aW9uTmFtZSA9ICdza2lsbHMnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBvcHRpb25hbFNraWxsID1cbiAgICAgIGV2ZW50Py5jdXJyZW50VGFyZ2V0Py5jbGFzc0xpc3Q/LmNvbnRhaW5zKCdvcHRpb25hbC1za2lsbHMnKVxuICAgIGNvbnN0IG9sID0gZXZlbnQ/LmN1cnJlbnRUYXJnZXQ/LmNsb3Nlc3QoJ29sJylcbiAgICBjb25zdCBpbmRleCA9IG9sPy5kYXRhc2V0Py5ncm91cFxuXG4gICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCAnSXRlbScpXG5cbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLmRhdGEuZGF0YVtjb2xsZWN0aW9uTmFtZV1cbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGFbY29sbGVjdGlvbk5hbWVdKVxuICAgICAgOiBbXVxuICAgIGNvbnN0IGdyb3VwcyA9IHRoaXMuaXRlbS5kYXRhLmRhdGEuZ3JvdXBzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLmdyb3VwcylcbiAgICAgIDogW11cblxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhTGlzdCkge1xuICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLmRhdGEpIGNvbnRpbnVlXG4gICAgICBpZiAoIVt0eXBlXS5pbmNsdWRlcyhpdGVtLmRhdGEudHlwZSkpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbmFsU2tpbGwpIHtcbiAgICAgICAgaWYgKCFDb0M3SXRlbS5pc0FueVNwZWMoaXRlbSkpIHtcbiAgICAgICAgICAvLyBHZW5lcmljIHNwZWNpYWxpemF0aW9uIGNhbiBiZSBpbmNsdWRlZCBtYW55IHRpbWVzXG4gICAgICAgICAgaWYgKGNvbGxlY3Rpb24uZmluZChlbCA9PiBlbC5uYW1lID09PSBpdGVtLmRhdGEubmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlIC8vIElmIHNraWxsIGlzIGFscmVhZHkgaW4gbWFpbiBkb24ndCBhZGQgaXRcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGdyb3Vwc1tpbmRleF0uc2tpbGxzLmZpbmQoZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5uYW1lKSkge1xuICAgICAgICAgICAgY29udGludWUgLy8gSWYgc2tpbGwgaXMgYWxyZWFkeSBpbiBncm91cCBkb24ndCBhZGQgaXRcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBncm91cHNbaW5kZXhdLnNraWxscyA9IGdyb3Vwc1tpbmRleF0uc2tpbGxzLmNvbmNhdChbaXRlbS5kYXRhXSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pKSB7XG4gICAgICAgICAgLy8gR2VuZXJpYyBzcGVjaWFsaXphdGlvbiBjYW4gYmUgaW5jbHVkZWQgbWFueSB0aW1lc1xuICAgICAgICAgIGlmIChjb2xsZWN0aW9uLmZpbmQoZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5kYXRhLm5hbWUpKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3JvdXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgc2FtZSBza2lsbCBpcyBpbiBvbmUgb2YgdGhlIGdyb3VwIHJlbW92ZSBpdCBmcm9tIHRoZSBncm91cHNcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gZ3JvdXBzW2ldLnNraWxscy5maW5kSW5kZXgoXG4gICAgICAgICAgICAgIGVsID0+IGVsLm5hbWUgPT09IGl0ZW0uZGF0YS5uYW1lXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgIGdyb3Vwc1tpXS5za2lsbHMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb2xsZWN0aW9uLnB1c2goZHVwbGljYXRlKGl0ZW0uZGF0YSkpXG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5ncm91cHMnOiBncm91cHMgfSlcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgW2BkYXRhLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcbiAgfVxuXG4gIGFzeW5jIF9vbkdyb3VwQ29udHJvbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcblxuICAgIC8vIEFkZCBuZXcgZGFtYWdlIGNvbXBvbmVudFxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnYWRkLWdyb3VwJykpIHtcbiAgICAgIGF3YWl0IHRoaXMuX29uU3VibWl0KGV2ZW50KSAvLyBTdWJtaXQgYW55IHVuc2F2ZWQgY2hhbmdlc1xuICAgICAgY29uc3QgZ3JvdXBzID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5ncm91cHNcbiAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoe1xuICAgICAgICAnZGF0YS5ncm91cHMnOiBncm91cHMuY29uY2F0KFt7IG9wdGlvbnM6IDAsIHNraWxsczogW10gfV0pXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygncmVtb3ZlLWdyb3VwJykpIHtcbiAgICAgIGF3YWl0IHRoaXMuX29uU3VibWl0KGV2ZW50KSAvLyBTdWJtaXQgYW55IHVuc2F2ZWQgY2hhbmdlc1xuICAgICAgY29uc3QgZ3JvdXBzID0gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEuZ3JvdXBzKVxuICAgICAgY29uc3Qgb2wgPSBhLmNsb3Nlc3QoJy5pdGVtLWxpc3QuZ3JvdXAnKVxuICAgICAgZ3JvdXBzLnNwbGljZShOdW1iZXIob2wuZGF0YXNldC5ncm91cCksIDEpXG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEuZ3JvdXBzJzogZ3JvdXBzIH0pXG4gICAgfVxuICB9XG5cbiAgX29uSXRlbVN1bW1hcnkgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5pdGVtLmRhdGEuZGF0YVtjb2xsZWN0aW9uTmFtZV0uZmluZChzID0+IHtcbiAgICAgIHJldHVybiBzLl9pZCA9PT0gbGkuZGF0YSgnaXRlbS1pZCcpXG4gICAgfSlcbiAgICBjb25zdCBjaGF0RGF0YSA9IGl0ZW0uZGF0YS5kZXNjcmlwdGlvblxuXG4gICAgLy8gVG9nZ2xlIHN1bW1hcnlcbiAgICBpZiAobGkuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBsaS5jaGlsZHJlbignLml0ZW0tc3VtbWFyeScpXG4gICAgICBzdW1tYXJ5LnNsaWRlVXAoMjAwLCAoKSA9PiBzdW1tYXJ5LnJlbW92ZSgpKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkaXYgPSAkKGA8ZGl2IGNsYXNzPVwiaXRlbS1zdW1tYXJ5XCI+JHtjaGF0RGF0YS52YWx1ZX08L2Rpdj5gKVxuICAgICAgY29uc3QgcHJvcHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1wcm9wZXJ0aWVzXCI+PC9kaXY+JylcbiAgICAgIC8vIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5wcm9wZXJ0aWVzKSB7IHByb3BzLmFwcGVuZChgPHNwYW4gY2xhc3M9XCJ0YWdcIj4ke3B9PC9zcGFuPmApIH1cbiAgICAgIGRpdi5hcHBlbmQocHJvcHMpXG4gICAgICBsaS5hcHBlbmQoZGl2LmhpZGUoKSlcbiAgICAgIGRpdi5zbGlkZURvd24oMjAwKVxuICAgIH1cbiAgICBsaS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKVxuICB9XG5cbiAgYXN5bmMgX29uSXRlbURlbGV0ZSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGNvbnN0IGl0ZW1JbmRleCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKS5kYXRhKCdpdGVtLWlkJylcbiAgICBpZiAoaXRlbUluZGV4KSBhd2FpdCB0aGlzLnJlbW92ZUl0ZW0oaXRlbUluZGV4LCBjb2xsZWN0aW9uTmFtZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkdyb3VwSXRlbURlbGV0ZSAoZXZlbnQpIHtcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxpID0gYS5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3Qgb2wgPSBsaS5jbG9zZXN0KCcuaXRlbS1saXN0Lmdyb3VwJylcbiAgICBjb25zdCBncm91cHMgPSBkdXBsaWNhdGUodGhpcy5pdGVtLmRhdGEuZGF0YS5ncm91cHMpXG4gICAgZ3JvdXBzW051bWJlcihvbC5kYXRhc2V0Lmdyb3VwKV0uc2tpbGxzLnNwbGljZShcbiAgICAgIE51bWJlcihsaS5kYXRhc2V0Lml0ZW1JbmRleCksXG4gICAgICAxXG4gICAgKVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5ncm91cHMnOiBncm91cHMgfSlcbiAgfVxuXG4gIGFzeW5jIHJlbW92ZUl0ZW0gKGl0ZW1JZCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgY29uc3QgaXRlbUluZGV4ID0gdGhpcy5pdGVtLmRhdGEuZGF0YVtjb2xsZWN0aW9uTmFtZV0uZmluZEluZGV4KHMgPT4ge1xuICAgICAgcmV0dXJuIHMuX2lkID09PSBpdGVtSWRcbiAgICB9KVxuICAgIGlmIChpdGVtSW5kZXggPiAtMSkge1xuICAgICAgY29uc3QgY29sbGVjdGlvbiA9IHRoaXMuaXRlbS5kYXRhLmRhdGFbY29sbGVjdGlvbk5hbWVdXG4gICAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGFbY29sbGVjdGlvbk5hbWVdKVxuICAgICAgICA6IFtdXG4gICAgICBjb2xsZWN0aW9uLnNwbGljZShpdGVtSW5kZXgsIDEpXG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgW2BkYXRhLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdvY2N1cGF0aW9uJ10sXG4gICAgICB3aWR0aDogNTIwLFxuICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nIH1dLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL29jY3VwYXRpb24uaHRtbCdcbiAgfVxuXG4gIF9vbkRyYWdTdGFydCAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IHNraWxsID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5za2lsbHMuZmluZChzID0+IHtcbiAgICAgIHJldHVybiBzLl9pZCA9PT0gbGkuZGF0YXNldC5pdGVtSWRcbiAgICB9KVxuXG4gICAgY29uc3QgZHJhZ0RhdGEgPSB7IHR5cGU6ICdJdGVtJywgZGF0YTogc2tpbGwgfVxuICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZHJhZ0RhdGEpKVxuICB9XG5cbiAgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3QgZGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgLyoqIE1PRElGOiAwLjgueCAqKi9cbiAgICBjb25zdCBpdGVtRGF0YSA9IGRhdGEuZGF0YVxuICAgIGRhdGEuZGF0YSA9IGl0ZW1EYXRhLmRhdGEgLy8gTU9ESUY6IDAuOC54IGRhdGEuZGF0YVxuICAgIC8qKioqKioqKioqKioqKioqKi9cblxuICAgIGRhdGEuaXNPd25lZCA9IHRoaXMuaXRlbS5pc093bmVkXG5cbiAgICBjb25zdCBvcHRpb25uYWwgPSBbXVxuICAgIGNvbnN0IG1hbmRhdG9yeSA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCBjYXJhY10gb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICBkYXRhLmRhdGEub2NjdXBhdGlvblNraWxsUG9pbnRzXG4gICAgKSkge1xuICAgICAgaWYgKGNhcmFjLm11bHRpcGxpZXIpIHtcbiAgICAgICAgY29uc3QgY2FyYWNOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKGBDSEFSQUMuJHtrZXkudG9VcHBlckNhc2UoKX1gKVxuICAgICAgICBpZiAoY2FyYWMuc2VsZWN0ZWQgJiYgY2FyYWMub3B0aW9uYWwpIHtcbiAgICAgICAgICBvcHRpb25uYWwucHVzaChgJHtjYXJhY05hbWV9eCR7Y2FyYWMubXVsdGlwbGllcn1gKVxuICAgICAgICB9XG4gICAgICAgIGlmIChjYXJhYy5zZWxlY3RlZCAmJiAhY2FyYWMub3B0aW9uYWwpIHtcbiAgICAgICAgICBtYW5kYXRvcnkucHVzaChgJHtjYXJhY05hbWV9eCR7Y2FyYWMubXVsdGlwbGllcn1gKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZGF0YS5za2lsbExpc3RFbXB0eSA9IGRhdGEuZGF0YS5za2lsbHMubGVuZ3RoID09PSAwXG5cbiAgICBkYXRhLmRhdGEuc2tpbGxzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBhLm5hbWVcbiAgICAgICAgLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICAgICAgLmxvY2FsZUNvbXBhcmUoYi5uYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkpXG4gICAgfSlcblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBkYXRhLmRhdGEuZ3JvdXBzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgZGF0YS5kYXRhLmdyb3Vwc1tpbmRleF0uaXNFbXB0eSA9XG4gICAgICAgIGRhdGEuZGF0YS5ncm91cHNbaW5kZXhdLnNraWxscy5sZW5ndGggPT09IDBcblxuICAgICAgZGF0YS5kYXRhLmdyb3Vwc1tpbmRleF0uc2tpbGxzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgcmV0dXJuIGEubmFtZVxuICAgICAgICAgIC50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICAgICAgLmxvY2FsZUNvbXBhcmUoYi5uYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkpXG4gICAgICB9KVxuICAgIH1cblxuICAgIGRhdGEub2NjdXBhdGlvblBvaW50c1N0cmluZyA9ICcnXG4gICAgY29uc3Qgb3JTdHJpbmcgPSBgICR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk9yJyl9IGBcbiAgICBpZiAobWFuZGF0b3J5Lmxlbmd0aCkgZGF0YS5vY2N1cGF0aW9uUG9pbnRzU3RyaW5nICs9IG1hbmRhdG9yeS5qb2luKCcgKyAnKVxuICAgIGlmIChvcHRpb25uYWwubGVuZ3RoICYmIG1hbmRhdG9yeS5sZW5ndGgpIHtcbiAgICAgIGRhdGEub2NjdXBhdGlvblBvaW50c1N0cmluZyArPSBgICsgKCR7b3B0aW9ubmFsLmpvaW4ob3JTdHJpbmcpfSlgXG4gICAgfVxuICAgIGlmIChvcHRpb25uYWwubGVuZ3RoICYmICFtYW5kYXRvcnkubGVuZ3RoKSB7XG4gICAgICBkYXRhLm9jY3VwYXRpb25Qb2ludHNTdHJpbmcgKz0gb3B0aW9ubmFsLmpvaW4ob3JTdHJpbmcpXG4gICAgfVxuXG4gICAgZGF0YS5pdGVtUHJvcGVydGllcyA9IFtdXG5cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmRhdGEudHlwZSkpIHtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICBkYXRhLml0ZW1Qcm9wZXJ0aWVzLnB1c2goXG4gICAgICAgICAgQ09DNy5vY2N1cGF0aW9uUHJvcGVydGllc1trZXldID8gQ09DNy5vY2N1cGF0aW9uUHJvcGVydGllc1trZXldIDogbnVsbFxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgZGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIC8vIFRPRE86IFRoaXMgY2FuIGJlIHJlbW92ZWQgb25jZSAwLjcueCBpcyByZWxlYXNlIGNoYW5uZWxcbiAgICBpZiAoIWZvcm1EYXRhLmRhdGEpIGZvcm1EYXRhID0gZXhwYW5kT2JqZWN0KGZvcm1EYXRhKVxuXG4gICAgaWYgKGZvcm1EYXRhLmRhdGEuZ3JvdXBzKSB7XG4gICAgICBmb3JtRGF0YS5kYXRhLmdyb3VwcyA9IE9iamVjdC52YWx1ZXMoZm9ybURhdGEuZGF0YT8uZ3JvdXBzIHx8IHt9KVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuaXRlbS5kYXRhLmRhdGEuZ3JvdXBzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBmb3JtRGF0YS5kYXRhLmdyb3Vwc1tpbmRleF0uc2tpbGxzID0gZHVwbGljYXRlKFxuICAgICAgICAgIHRoaXMuaXRlbS5kYXRhLmRhdGEuZ3JvdXBzW2luZGV4XS5za2lsbHNcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZHVwbGljYXRlLCBleHBhbmRPYmplY3QsIGdhbWUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QgKi9cblxuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbS5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG4vLyBpbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnO1xuLy8gaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi8uLi9hY3RvcnMvYWN0b3IuanMnO1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3U2V0dXBTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcbiAgICogQHBhcmFtIGh0bWwge0hUTUx9ICAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxuICAgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5pdGVtIC5pdGVtLW5hbWUgaDQnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbVN1bW1hcnkoZXZlbnQsICdpdGVtcycpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0tZGVsZXRlJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtRGVsZXRlKGV2ZW50LCAnaXRlbXMnKSlcbiAgICBodG1sLmZpbmQoJy5hZGQtYmlvJykuY2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5fb25BZGRCaW8oKSlcbiAgICBodG1sLmZpbmQoJy5yZW1vdmUtc2VjdGlvbicpLmNsaWNrKHRoaXMuX29uUmVtb3ZlU2VjdGlvbi5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vbkNsaWNrVG9nZ2xlLmJpbmQodGhpcykpXG5cbiAgICAvLyBodG1sLmZpbmQoJy5pdGVtLWVkaXQnKS5jbGljayhhc3luYyBldiA9PiB7XG4gICAgLy8gICBjb25zdCBsaSA9ICQoZXYuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKTtcbiAgICAvLyAgIGNvbnN0IGl0ZW1EYXRhID0gdGhpcy5nZXRJdGVtKGxpLmRhdGEoJ2l0ZW1JZCcpLCAnc2tpbGxzJyk7XG4gICAgLy8gICBkZWxldGUgaXRlbURhdGEuX2lkO1xuICAgIC8vICAgZGVsZXRlIGl0ZW1EYXRhLmZvbGRlcjtcbiAgICAvLyAgIGNvbnN0IGl0ZW0gPSBuZXcgQ29DN0l0ZW0oaXRlbURhdGEpO1xuICAgIC8vICAgYXdhaXQgaXRlbS5zaGVldC5yZW5kZXIodHJ1ZSk7IC8vbWFyY2hlIHBhcyAhIVxuICAgIC8vIH0pO1xuICB9XG5cbiAgYXN5bmMgX29uQ2xpY2tUb2dnbGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHByb3BlcnR5SWQgPVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcudG9nZ2xlLXN3aXRjaCcpLmRhdGFzZXQucHJvcGVydHlcbiAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlUHJvcGVydHkoXG4gICAgICBwcm9wZXJ0eUlkLFxuICAgICAgZXZlbnQubWV0YUtleSB8fFxuICAgICAgICBldmVudC5jdHJsS2V5IHx8XG4gICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDkxIHx8XG4gICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDIyNFxuICAgIClcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgIGNvbnN0IGRhdGFMaXN0ID0gYXdhaXQgQ29DN1V0aWxpdGllcy5nZXREYXRhRnJvbURyb3BFdmVudChldmVudCwgJ0l0ZW0nKVxuXG4gICAgY29uc3QgY29sbGVjdGlvbiA9IHRoaXMuaXRlbS5kYXRhLmRhdGFbY29sbGVjdGlvbk5hbWVdXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhW2NvbGxlY3Rpb25OYW1lXSlcbiAgICAgIDogW11cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGF0YUxpc3QpIHtcbiAgICAgIGlmICghaXRlbSB8fCAhaXRlbS5kYXRhKSBjb250aW51ZVxuICAgICAgaWYgKFxuICAgICAgICAhWydpdGVtJywgJ3dlYXBvbicsICdza2lsbCcsICdib29rJywgJ3NwZWxsJ10uaW5jbHVkZXMoaXRlbS5kYXRhLnR5cGUpXG4gICAgICApIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgaWYgKCFDb0M3SXRlbS5pc0FueVNwZWMoaXRlbSkpIHtcbiAgICAgICAgaWYgKGNvbGxlY3Rpb24uZmluZChlbCA9PiBlbC5uYW1lID09PSBpdGVtLmRhdGEubmFtZSkpIHtcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbGxlY3Rpb24ucHVzaChkdXBsaWNhdGUoaXRlbS5kYXRhKSlcbiAgICB9XG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgZGF0YS4ke2NvbGxlY3Rpb25OYW1lfWBdOiBjb2xsZWN0aW9uIH0pXG4gIH1cblxuICBhc3luYyBfb25SZW1vdmVTZWN0aW9uIChldmVudCkge1xuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgZGl2ID0gYS5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgYmlvID0gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGEuYmlvU2VjdGlvbnMpXG4gICAgYmlvLnNwbGljZShOdW1iZXIoZGl2LmRhdGFzZXQuaW5kZXgpLCAxKVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5iaW9TZWN0aW9ucyc6IGJpbyB9KVxuICB9XG5cbiAgYXN5bmMgX29uQWRkQmlvICgpIHtcbiAgICBjb25zdCBiaW8gPSB0aGlzLml0ZW0uZGF0YS5kYXRhLmJpb1NlY3Rpb25zXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLmJpb1NlY3Rpb25zKVxuICAgICAgOiBbXVxuICAgIGJpby5wdXNoKG51bGwpXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLmJpb1NlY3Rpb25zJzogYmlvIH0pXG4gIH1cblxuICBfb25JdGVtU3VtbWFyeSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW0uZGF0YS5kYXRhW2NvbGxlY3Rpb25OYW1lXS5maW5kKHMgPT4ge1xuICAgICAgcmV0dXJuIHMuX2lkID09PSBsaS5kYXRhKCdpdGVtLWlkJylcbiAgICB9KVxuICAgIGNvbnN0IGNoYXREYXRhID0gaXRlbS5kYXRhLmRlc2NyaXB0aW9uXG5cbiAgICAvLyBUb2dnbGUgc3VtbWFyeVxuICAgIGlmIChsaS5oYXNDbGFzcygnZXhwYW5kZWQnKSkge1xuICAgICAgY29uc3Qgc3VtbWFyeSA9IGxpLmNoaWxkcmVuKCcuaXRlbS1zdW1tYXJ5JylcbiAgICAgIHN1bW1hcnkuc2xpZGVVcCgyMDAsICgpID0+IHN1bW1hcnkucmVtb3ZlKCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRpdiA9ICQoYDxkaXYgY2xhc3M9XCJpdGVtLXN1bW1hcnlcIj4ke2NoYXREYXRhLnZhbHVlfTwvZGl2PmApXG4gICAgICBjb25zdCBwcm9wcyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXByb3BlcnRpZXNcIj48L2Rpdj4nKVxuICAgICAgLy8gZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLnByb3BlcnRpZXMpIHsgcHJvcHMuYXBwZW5kKGA8c3BhbiBjbGFzcz1cInRhZ1wiPiR7cH08L3NwYW4+YCkgfVxuICAgICAgZGl2LmFwcGVuZChwcm9wcylcbiAgICAgIGxpLmFwcGVuZChkaXYuaGlkZSgpKVxuICAgICAgZGl2LnNsaWRlRG93bigyMDApXG4gICAgfVxuICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gIH1cblxuICBhc3luYyBfb25JdGVtRGVsZXRlIChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgY29uc3QgaXRlbUluZGV4ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpLmRhdGEoJ2l0ZW0taWQnKVxuICAgIGlmIChpdGVtSW5kZXgpIGF3YWl0IHRoaXMucmVtb3ZlSXRlbShpdGVtSW5kZXgsIGNvbGxlY3Rpb25OYW1lKVxuICB9XG5cbiAgZ2V0SXRlbSAoaXRlbUlkLCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtLmRhdGEuZGF0YVtjb2xsZWN0aW9uTmFtZV0uZmluZChzID0+IHtcbiAgICAgIHJldHVybiBzLl9pZCA9PT0gaXRlbUlkXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIHJlbW92ZUl0ZW0gKGl0ZW1JZCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgY29uc3QgaXRlbUluZGV4ID0gdGhpcy5pdGVtLmRhdGEuZGF0YVtjb2xsZWN0aW9uTmFtZV0uZmluZEluZGV4KHMgPT4ge1xuICAgICAgcmV0dXJuIHMuX2lkID09PSBpdGVtSWRcbiAgICB9KVxuICAgIGlmIChpdGVtSW5kZXggPiAtMSkge1xuICAgICAgY29uc3QgY29sbGVjdGlvbiA9IHRoaXMuaXRlbS5kYXRhLmRhdGFbY29sbGVjdGlvbk5hbWVdXG4gICAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5kYXRhLmRhdGFbY29sbGVjdGlvbk5hbWVdKVxuICAgICAgICA6IFtdXG4gICAgICBjb2xsZWN0aW9uLnNwbGljZShpdGVtSW5kZXgsIDEpXG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgW2BkYXRhLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdzZXR1cCddLFxuICAgICAgd2lkdGg6IDUyMCxcbiAgICAgIGhlaWdodDogNTMwLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5pdGVtJyB9XSxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9zZXR1cC5odG1sJ1xuICB9XG5cbiAgX29uRHJhZ1N0YXJ0IChldmVudCkge1xuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLml0ZW1zLmZpbmQocyA9PiB7XG4gICAgICByZXR1cm4gcy5faWQgPT09IGxpLmRhdGFzZXQuaXRlbUlkXG4gICAgfSlcblxuICAgIGNvbnN0IGRyYWdEYXRhID0geyB0eXBlOiAnSXRlbScsIGRhdGE6IHNraWxsIH1cbiAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRyYWdEYXRhKSlcbiAgfVxuXG4gIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIGRhdGEuaXNPd25lZCA9IHRoaXMuaXRlbS5pc093bmVkXG5cbiAgICAvKiogTU9ESUY6IDAuOC54ICoqL1xuICAgIGNvbnN0IGl0ZW1EYXRhID0gZGF0YS5kYXRhXG4gICAgZGF0YS5kYXRhID0gaXRlbURhdGEuZGF0YSAvLyBNT0RJRjogMC44LnggZGF0YS5kYXRhXG4gICAgLyoqKioqKioqKioqKioqKioqL1xuXG4gICAgLy8gZGF0YS5kYXRhLml0ZW1zID0gZHVwbGljYXRlKCBkYXRhLmRhdGEuc2tpbGxzKTtcbiAgICAvLyB0aGlzLml0ZW0udXBkYXRlKCB7IFsnZGF0YS5pdGVtcyddIDogZHVwbGljYXRlKCBkYXRhLmRhdGEuc2tpbGxzKX0pO1xuXG4gICAgZGF0YS5za2lsbHMgPSBkYXRhLmRhdGEuaXRlbXMuZmlsdGVyKGl0ID0+IGl0LnR5cGUgPT09ICdza2lsbCcpXG4gICAgZGF0YS5vdGhlckl0ZW1zID0gZGF0YS5kYXRhLml0ZW1zLmZpbHRlcihpdCA9PiBpdC50eXBlICE9PSAnc2tpbGwnKVxuXG4gICAgZGF0YS5za2lsbExpc3RFbXB0eSA9IGRhdGEuc2tpbGxzLmxlbmd0aCA9PT0gMFxuICAgIGRhdGEuaXRlbXNMaXN0RW1wdHkgPSBkYXRhLm90aGVySXRlbXMubGVuZ3RoID09PSAwXG5cbiAgICBkYXRhLnNraWxscy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYS5uYW1lXG4gICAgICAgIC50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICAgIC5sb2NhbGVDb21wYXJlKGIubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpKVxuICAgIH0pXG5cbiAgICBkYXRhLmVyYXMgPSB7fVxuICAgIGRhdGEuaXRlbVByb3BlcnRpZXMgPSBbXVxuXG4gICAgZGF0YS5fZXJhcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5lcmFzKSkge1xuICAgICAgY29uc3QgZXJhID0ge31cbiAgICAgIGVyYS5pZCA9IGtleVxuICAgICAgZXJhLm5hbWUgPSB2YWx1ZVxuICAgICAgZXJhLmlzRW5hYmxlZCA9IHRoaXMuaXRlbS5kYXRhLmRhdGEuZXJhc1trZXldID09PSB0cnVlXG4gICAgICBkYXRhLl9lcmFzLnB1c2goZXJhKVxuICAgIH1cblxuICAgIGRhdGEub25lQmxvY2tCYWNrU3RvcnkgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvbmVCbG9ja0JhY2tzdG9yeScpXG5cbiAgICBkYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgLy8gVE9ETzogVGhpcyBjYW4gYmUgcmVtb3ZlZCBvbmNlIDAuNy54IGlzIHJlbGVhc2UgY2hhbm5lbFxuICAgIGlmICghZm9ybURhdGEuZGF0YSkgZm9ybURhdGEgPSBleHBhbmRPYmplY3QoZm9ybURhdGEpXG5cbiAgICBpZiAoZm9ybURhdGEuZGF0YS5iaW9TZWN0aW9ucykge1xuICAgICAgZm9ybURhdGEuZGF0YS5iaW9TZWN0aW9ucyA9IE9iamVjdC52YWx1ZXMoXG4gICAgICAgIGZvcm1EYXRhLmRhdGE/LmJpb1NlY3Rpb25zIHx8IFtdXG4gICAgICApXG4gICAgICAvLyBmb3IobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLml0ZW0uZGF0YS5kYXRhLmJpb1NlY3Rpb25zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgLy8gICBmb3JtRGF0YS5kYXRhLmJpb1NlY3Rpb25zW2luZGV4XSA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uZGF0YS5kYXRhLmJpb1NlY3Rpb25zW2luZGV4XSk7XG4gICAgICAvLyB9XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQ/Lm5hbWUgPT09ICdkYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMuZW5hYmxlZCcpIHtcbiAgICAgIGZvcm1EYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnJvbGxzLmVuYWJsZWQgPSAhZXZlbnQuY3VycmVudFRhcmdldC5jaGVja2VkXG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQ/Lm5hbWUgPT09ICdkYXRhLmNoYXJhY3RlcmlzdGljcy5yb2xscy5lbmFibGVkJykge1xuICAgICAgZm9ybURhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQgPVxuICAgICAgICAhZXZlbnQuY3VycmVudFRhcmdldC5jaGVja2VkXG4gICAgfVxuXG4gICAgc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBJdGVtU2hlZXQsIG1lcmdlT2JqZWN0ICovXG5cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdTa2lsbFNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgY29uc3RydWN0b3IgKC4uLmFyZ3MpIHtcbiAgICBzdXBlciguLi5hcmdzKVxuICAgIHRoaXMuX3NoZWV0VGFiID0gJ2l0ZW1zJ1xuICB9XG5cbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSBTaW1wbGUgSXRlbSBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnaXRlbSddLFxuICAgICAgd2lkdGg6IDUyMCxcbiAgICAgIGhlaWdodDogNDgwLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiBgc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy8ke3RoaXMuaXRlbS5kYXRhLnR5cGV9LXNoZWV0Lmh0bWxgXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBnZXREYXRhICgpIHtcbiAgICAvLyB0aGlzLml0ZW0uY2hlY2tTa2lsbFByb3BlcnRpZXMoKTtcbiAgICBjb25zdCBkYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICAvKiogTU9ESUY6IDAuOC54ICoqL1xuICAgIGNvbnN0IGl0ZW1EYXRhID0gZGF0YS5kYXRhXG4gICAgZGF0YS5kYXRhID0gaXRlbURhdGEuZGF0YSAvLyBNT0RJRjogMC44LnggZGF0YS5kYXRhXG4gICAgLyoqKioqKioqKioqKioqKioqL1xuXG4gICAgZGF0YS5oYXNPd25lciA9IHRoaXMuaXRlbS5hY3RvciAhPT0gbnVsbFxuXG4gICAgaWYgKHRoaXMuaXRlbS5kYXRhLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgIGRhdGEuX3Byb3BlcnRpZXMgPSBbXVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5za2lsbFByb3BlcnRpZXMpKSB7XG4gICAgICAgIGNvbnN0IHByb3BlcnR5ID0ge31cbiAgICAgICAgcHJvcGVydHkuaWQgPSBrZXlcbiAgICAgICAgcHJvcGVydHkubmFtZSA9IHZhbHVlXG4gICAgICAgIHByb3BlcnR5LmlzRW5hYmxlZCA9IHRoaXMuaXRlbS5kYXRhLmRhdGEucHJvcGVydGllc1trZXldID09PSB0cnVlXG4gICAgICAgIGRhdGEuX3Byb3BlcnRpZXMucHVzaChwcm9wZXJ0eSlcbiAgICAgIH1cblxuICAgICAgZGF0YS5fZXJhcyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmVyYXMpKSB7XG4gICAgICAgIGNvbnN0IGVyYSA9IHt9XG4gICAgICAgIGVyYS5pZCA9IGtleVxuICAgICAgICBlcmEubmFtZSA9IHZhbHVlXG4gICAgICAgIGVyYS5pc0VuYWJsZWQgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLmVyYXNba2V5XSA9PT0gdHJ1ZVxuICAgICAgICBkYXRhLl9lcmFzLnB1c2goZXJhKVxuICAgICAgfVxuXG4gICAgICBkYXRhLmlzU3BlY2lhbGl6ZWQgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXMuc3BlY2lhbFxuICAgICAgZGF0YS5jYW5Nb2RpZnlTcGVjID1cbiAgICAgICAgIXRoaXMuaXRlbS5kYXRhLmRhdGEucHJvcGVydGllcy5maXJlYXJtICYmXG4gICAgICAgICF0aGlzLml0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXMuZmlnaHRpbmdcbiAgICB9XG5cbiAgICBkYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbC5maW5kKCcudG9nZ2xlLXN3aXRjaCcpLmNsaWNrKHRoaXMuX29uQ2xpY2tUb2dnbGUuYmluZCh0aGlzKSlcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgYXN5bmMgX29uQ2xpY2tUb2dnbGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHByb3BlcnR5SWQgPVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcudG9nZ2xlLXN3aXRjaCcpLmRhdGFzZXQucHJvcGVydHlcbiAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlUHJvcGVydHkoXG4gICAgICBwcm9wZXJ0eUlkLFxuICAgICAgZXZlbnQubWV0YUtleSB8fFxuICAgICAgICBldmVudC5jdHJsS2V5IHx8XG4gICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDkxIHx8XG4gICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDIyNFxuICAgIClcbiAgfVxuXG4gIC8vIGFzeW5jIF9vbkNsaWNrQXR0cmlidXRlQ29udHJvbChldmVudCkge1xuICAvLyAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIC8vICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gIC8vICAgY29uc3QgYWN0aW9uID0gYS5kYXRhc2V0LmFjdGlvbjtcbiAgLy8gICBjb25zdCBhdHRycyA9IHRoaXMub2JqZWN0LmRhdGEuZGF0YS5hdHRyaWJ1dGVzO1xuICAvLyAgIGNvbnN0IGZvcm0gPSB0aGlzLmZvcm07XG5cbiAgLy8gICAvLyBBZGQgbmV3IGF0dHJpYnV0ZVxuICAvLyAgIGlmIChhY3Rpb24gPT09IFwiY3JlYXRlXCIpIHtcbiAgLy8gICAgIGNvbnN0IG5rID0gT2JqZWN0LmtleXMoYXR0cnMpLmxlbmd0aCArIDE7XG4gIC8vICAgICBsZXQgbmV3S2V5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgLy8gICAgIG5ld0tleS5pbm5lckhUTUwgPSBgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImRhdGEuYXR0cmlidXRlcy5hdHRyJHtua30ua2V5XCIgdmFsdWU9XCJhdHRyJHtua31cIi8+YDtcbiAgLy8gICAgIG5ld0tleSA9IG5ld0tleS5jaGlsZHJlblswXTtcbiAgLy8gICAgIGZvcm0uYXBwZW5kQ2hpbGQobmV3S2V5KTtcbiAgLy8gICAgIGF3YWl0IHRoaXMuX29uU3VibWl0KGV2ZW50KTtcbiAgLy8gICB9XG5cbiAgLy8gICAvLyBSZW1vdmUgZXhpc3RpbmcgYXR0cmlidXRlXG4gIC8vICAgZWxzZSBpZiAoYWN0aW9uID09PSBcImRlbGV0ZVwiKSB7XG4gIC8vICAgICBjb25zdCBsaSA9IGEuY2xvc2VzdChcIi5hdHRyaWJ1dGVcIik7XG4gIC8vICAgICBsaS5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGxpKTtcbiAgLy8gICAgIGF3YWl0IHRoaXMuX29uU3VibWl0KGV2ZW50KTtcbiAgLy8gICB9XG4gIC8vIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBJbXBsZW1lbnQgdGhlIF91cGRhdGVPYmplY3QgbWV0aG9kIGFzIHJlcXVpcmVkIGJ5IHRoZSBwYXJlbnQgY2xhc3Mgc3BlY1xuICAgKiBUaGlzIGRlZmluZXMgaG93IHRvIHVwZGF0ZSB0aGUgc3ViamVjdCBvZiB0aGUgZm9ybSB3aGVuIHRoZSBmb3JtIGlzIHN1Ym1pdHRlZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgLy8gX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpIHtcbiAgLy8gICAvLyBIYW5kbGUgdGhlIGZyZWUtZm9ybSBhdHRyaWJ1dGVzIGxpc3RcbiAgLy8gICBjb25zdCBmb3JkID0gZXhwYW5kT2JqZWN0KGZvcm1EYXRhKTtcbiAgLy8gICBjb25zdCBmb3JtQXR0cnMgPSBleHBhbmRPYmplY3QoZm9ybURhdGEpLmRhdGEuYXR0cmlidXRlcyB8fCB7fTtcbiAgLy8gICBjb25zdCBhdHRyaWJ1dGVzID0gT2JqZWN0LnZhbHVlcyhmb3JtQXR0cnMpLnJlZHVjZSgob2JqLCB2KSA9PiB7XG4gIC8vICAgICBsZXQgayA9IHZbXCJrZXlcIl0udHJpbSgpO1xuICAvLyAgICAgaWYgKC9bXFxzXFwuXS8udGVzdChrKSkgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXCJBdHRyaWJ1dGUga2V5cyBtYXkgbm90IGNvbnRhaW4gc3BhY2VzIG9yIHBlcmlvZHNcIik7XG4gIC8vICAgICBkZWxldGUgdltcImtleVwiXTtcbiAgLy8gICAgIG9ialtrXSA9IHY7XG4gIC8vICAgICByZXR1cm4gb2JqO1xuICAvLyAgIH0sIHt9KTtcblxuICAvLyAgIC8vIFJlbW92ZSBhdHRyaWJ1dGVzIHdoaWNoIGFyZSBubyBsb25nZXIgdXNlZFxuICAvLyAgIGZvciAobGV0IGsgb2YgT2JqZWN0LmtleXModGhpcy5vYmplY3QuZGF0YS5kYXRhLmF0dHJpYnV0ZXMpKSB7XG4gIC8vICAgICBpZiAoIWF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoaykpIGF0dHJpYnV0ZXNbYC09JHtrfWBdID0gbnVsbDtcbiAgLy8gICB9XG5cbiAgLy8gICAvLyBSZS1jb21iaW5lIGZvcm1EYXRhXG4gIC8vICAgZm9ybURhdGEgPSBPYmplY3QuZW50cmllcyhmb3JtRGF0YSkuZmlsdGVyKGUgPT4gIWVbMF0uc3RhcnRzV2l0aChcImRhdGEuYXR0cmlidXRlc1wiKSkucmVkdWNlKChvYmosIGUpID0+IHtcbiAgLy8gICAgIG9ialtlWzBdXSA9IGVbMV07XG4gIC8vICAgICByZXR1cm4gb2JqO1xuICAvLyAgIH0sIHsgX2lkOiB0aGlzLm9iamVjdC5faWQsIFwiZGF0YS5hdHRyaWJ1dGVzXCI6IGF0dHJpYnV0ZXMgfSk7XG5cbiAgLy8gICAvLyBVcGRhdGUgdGhlIEl0ZW1cbiAgLy8gICByZXR1cm4gdGhpcy5vYmplY3QudXBkYXRlKGZvcm1EYXRhKTtcbiAgLy8gfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGNvbnN0IHNraWxsTmFtZSA9XG4gICAgICBmb3JtRGF0YVsnZGF0YS5za2lsbE5hbWUnXSB8fCB0aGlzLml0ZW0uZGF0YS5kYXRhLnNraWxsTmFtZVxuICAgIGlmICh0aGlzLml0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXM/LnNwZWNpYWwpIHtcbiAgICAgIGNvbnN0IHNwZWNpYWxpemF0aW9uID1cbiAgICAgICAgZm9ybURhdGFbJ2RhdGEuc3BlY2lhbGl6YXRpb24nXSB8fCB0aGlzLml0ZW0uZGF0YS5kYXRhLnNwZWNpYWxpemF0aW9uXG4gICAgICBmb3JtRGF0YS5uYW1lID0gc3BlY2lhbGl6YXRpb24gKyAnICgnICsgc2tpbGxOYW1lICsgJyknXG4gICAgfSBlbHNlIHtcbiAgICAgIGZvcm1EYXRhLm5hbWUgPSBza2lsbE5hbWVcbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCAqL1xuXG5leHBvcnQgY2xhc3MgQ29DN1NwZWxsU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9zcGVsbC9tYWluLmh0bWwnLFxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2l0ZW0nLCAnc3BlbGwnXSxcbiAgICAgIHdpZHRoOiA1MDAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJyxcbiAgICAgIHJlc2l6YWJsZTogZmFsc2UsXG4gICAgICBzY3JvbGxZOiBbJy5ib2R5J10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBzdXBlci5nZXREYXRhKClcbiAgICBjb25zdCBpdGVtRGF0YSA9IGRhdGEuZGF0YVxuICAgIGRhdGEuZGF0YSA9IGl0ZW1EYXRhLmRhdGFcbiAgICBkYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICBkYXRhLmlzT3duZXIgPSB0aGlzLml0ZW0uaXNPd25lclxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5maW5kKCcub3B0aW9uJykuY2xpY2soZXZlbnQgPT4gdGhpcy5tb2RpZnlUeXBlKGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJyNjYXN0LXNwZWxsJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgdGhpcy5pdGVtLmNhc3QoKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlIHRoZSBjaGVja2JveGVzIGZvciB0eXBlIHdoZW4gdXNlciBjbGlja3Mgb24gdGhlIGNvcnJlc3BvbmRpbmdcbiAgICogbGFiZWwsIG5vdCBzdXJlIGlmIHRoaXMgd29ya3Mgb24gZW5naW5lcyBvdGhlciB0aGFuIFY4XG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXG4gICAqIEByZXR1cm5zIHtqUXVlcnkuRXZlbnR9IGNsaWNrXG4gICAqL1xuICBtb2RpZnlUeXBlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAvKiogUHJldmVudHMgcHJvcGFnYXRpb24gb2YgdGhlIHNhbWUgZXZlbnQgZnJvbSBiZWluZyBjYWxsZWQgKi9cbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGNvbnN0IHRvZ2dsZVN3aXRjaCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICByZXR1cm4gdG9nZ2xlU3dpdGNoLnByZXYoKS50cmlnZ2VyKCdjbGljaycpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBJdGVtU2hlZXQsIG1lcmdlT2JqZWN0ICovXG5cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG4vLyBpbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uLy4uL2FjdG9ycy9hY3Rvci5qcyc7XG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdTdGF0dXNTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKlxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnc3RhdHVzJ10sXG4gICAgICB3aWR0aDogNTIwLFxuICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9zdGF0dXMuaHRtbCdcbiAgfVxuXG4gIC8qIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBnZXREYXRhICgpIHtcbiAgICAvLyB0aGlzLml0ZW0uY2hlY2tTa2lsbFByb3BlcnRpZXMoKTtcbiAgICBjb25zdCBkYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICAvKiogTU9ESUY6IDAuOC54ICoqL1xuICAgIGNvbnN0IGl0ZW1EYXRhID0gZGF0YS5kYXRhXG4gICAgZGF0YS5kYXRhID0gaXRlbURhdGEuZGF0YSAvLyBNT0RJRjogMC44LnggZGF0YS5kYXRhXG4gICAgLyoqKioqKioqKioqKioqKioqL1xuXG4gICAgZGF0YS5pdGVtUHJvcGVydGllcyA9IFtdXG5cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmRhdGEudHlwZSkpIHtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICBkYXRhLml0ZW1Qcm9wZXJ0aWVzLnB1c2goXG4gICAgICAgICAgQ09DNy5zdGF0dXNUeXBlW2tleV0gPyBDT0M3LnN0YXR1c1R5cGVba2V5XSA6IG51bGxcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIGRhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHJldHVybiBkYXRhXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBJdGVtU2hlZXQsIG1lcmdlT2JqZWN0ICovXG5cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG4vLyBpbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uLy4uL2FjdG9ycy9hY3Rvci5qcyc7XG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdUYWxlbnRTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKlxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAndGFsZW50J10sXG4gICAgICB3aWR0aDogNTIwLFxuICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy90YWxlbnQuaHRtbCdcbiAgfVxuXG4gIC8qIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBnZXREYXRhICgpIHtcbiAgICAvLyB0aGlzLml0ZW0uY2hlY2tTa2lsbFByb3BlcnRpZXMoKTtcbiAgICBjb25zdCBkYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICAvKiogTU9ESUY6IDAuOC54ICoqL1xuICAgIGNvbnN0IGl0ZW1EYXRhID0gZGF0YS5kYXRhXG4gICAgZGF0YS5kYXRhID0gaXRlbURhdGEuZGF0YSAvLyBNT0RJRjogMC44LnggZGF0YS5kYXRhXG4gICAgLyoqKioqKioqKioqKioqKioqL1xuXG4gICAgZGF0YS5pdGVtUHJvcGVydGllcyA9IFtdXG5cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmRhdGEudHlwZSkpIHtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICBkYXRhLml0ZW1Qcm9wZXJ0aWVzLnB1c2goXG4gICAgICAgICAgQ09DNy50YWxlbnRUeXBlW2tleV0gPyBDT0M3LnRhbGVudFR5cGVba2V5XSA6IG51bGxcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIGRhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHJldHVybiBkYXRhXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBkdXBsaWNhdGUsIGV4cGFuZE9iamVjdCwgZmxhdHRlbk9iamVjdCwgRm9ybURhdGFFeHRlbmRlZCwgZ2FtZSwgbWVyZ2VPYmplY3QsIHVpICovXG5cbmltcG9ydCB7IENvQzdBY3RvclNoZWV0IH0gZnJvbSAnLi9iYXNlLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1ZlaGljbGVTaGVldCBleHRlbmRzIENvQzdBY3RvclNoZWV0IHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXRWMicsICdhY3RvcicsICdpdGVtJywgJ3ZlaGljbGUnXSxcbiAgICAgIHdpZHRoOiA1MjAsXG4gICAgICBoZWlnaHQ6IDQyMCxcbiAgICAgIHJlc2l6YWJsZTogdHJ1ZSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvdmVoaWNsZS5odG1sJyxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuYWN0b3InLCBkcm9wU2VsZWN0b3I6ICcuZHJvcFpvbmUnIH1dLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2JyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHBlcmltZW50YWxGZWF0dXJlc1dhcm5pbmcnKVxuICAgIClcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBkYXRhLnByb3BlcnRpZXMgPSBbXVxuICAgIGlmICh0aGlzLmFjdG9yLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmFybWVkKSB7XG4gICAgICBkYXRhLnByb3BlcnRpZXMucHVzaChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXJtZWRWZWhpY2xlJykpXG4gICAgfVxuICAgIGRhdGEuYWN0b3IgPSB0aGlzLmFjdG9yXG5cbiAgICBjb25zdCBleHBhbmRlZCA9IHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdleHBhbmRlZCcpXG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gZXhwYW5kZWQpIGRhdGEuZXhwYW5kZWQgPSB0cnVlXG4gICAgZWxzZSBkYXRhLmV4cGFuZGVkID0gZXhwYW5kZWRcbiAgICBpZiAoZGF0YS5leHBhbmRlZCkge1xuICAgICAgZGF0YS5vcHRpb25zLmhlaWdodCA9IDQyMFxuICAgIH0gZWxzZSBkYXRhLm9wdGlvbnMuaGVpZ2h0ID0gJ2F1dG8nXG5cbiAgICAvLyBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5kYXRhLnR5cGUpKSB7XG4gICAgLy8gICBpZiggdmFsdWUpIGRhdGEuaXRlbVByb3BlcnRpZXMucHVzaCggQ09DNy5ib29rVHlwZVtrZXldP0NPQzcuYm9va1R5cGVba2V5XTpudWxsKTtcbiAgICAvLyB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sLmZpbmQoJy5hZGQtYXJtb3InKS5jbGljayhhc3luYyAoKSA9PiBhd2FpdCB0aGlzLl9vbkFkZEFybW9yKCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5yZW1vdmUtYXJtb3InKVxuICAgICAgLmNsaWNrKGFzeW5jIGV2ZW50ID0+IGF3YWl0IHRoaXMuX29uUmVtb3ZlQXJtb3IoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnLmV4cGFuZC1idXR0b24nKS5jbGljayh0aGlzLl9vblRvZ2dsZUV4cGFuZC5iaW5kKHRoaXMpKVxuICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyBvbmx5IG5lZWRlZCBpZiB0aGUgc2hlZXQgaXMgZWRpdGFibGVcbiAgICAvLyBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuO1xuICAgIC8vIGh0bWwub24oJ2Ryb3AnLCAoZXZlbnQpID0+IHRoaXMuX29uRHJvcChldmVudCkpO1xuICAgIC8vIGh0bWwuZmluZCgnLnNwZWxsIC5zcGVsbC1uYW1lIGg0JykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25TcGVsbFN1bW1hcnkoZXZlbnQpKTtcbiAgICAvLyBodG1sLmZpbmQoJy5pdGVtLWRlbGV0ZScpLmNsaWNrKHRoaXMuX29uU3BlbGxEZWxldGUuYmluZCh0aGlzKSk7XG4gIH1cblxuICBhc3luYyBfb25Ub2dnbGVFeHBhbmQgKCkge1xuICAgIGNvbnN0IGV4cGFuZGVkID0gdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ2V4cGFuZGVkJylcbiAgICBpZiAoZXhwYW5kZWQpIHtcbiAgICAgIHRoaXMub2xkU2l6ZSA9IHRoaXMucG9zaXRpb24uaGVpZ2h0XG4gICAgICB0aGlzLnBvc2l0aW9uLmhlaWdodCA9ICdhdXRvJyAvLyBSZXNldCB0aGUgc3RvcmVkIHBvc2l0aW9uIHRvIGZvcmNlIHRvIHJlY2FsY3VsYXRlIHdpbmRvdyBzaXplIFRPRE86IFN0b3JlIHByZXZpb3VzIHBvc2l0aW9uIHRvIHJlc3RvcmUgaXQgaW5zdGVhZCBvZiBhdXRvXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucG9zaXRpb24uaGVpZ2h0ID0gdGhpcy5vbGRTaXplIHx8IDQyMCAvLyBSZXNldCB0aGUgc3RvcmVkIHBvc2l0aW9uIHRvIGZvcmNlIHRvIHJlY2FsY3VsYXRlIHdpbmRvdyBzaXplIFRPRE86IFN0b3JlIHByZXZpb3VzIHBvc2l0aW9uIHRvIHJlc3RvcmUgaXQgaW5zdGVhZCBvZiBhdXRvXG4gICAgfVxuICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0RmxhZygnQ29DNycsICdleHBhbmRlZCcsICFleHBhbmRlZClcbiAgfVxuXG4gIGFzeW5jIF9vbkFkZEFybW9yICgpIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBkdXBsaWNhdGUoXG4gICAgICB0aGlzLmFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucyB8fCBbXVxuICAgIClcbiAgICBsb2NhdGlvbnMucHVzaCh7IG5hbWU6IG51bGwsIHZhbHVlOiBudWxsIH0pXG4gICAgYXdhaXQgdGhpcy5hY3Rvci51cGRhdGUoeyAnZGF0YS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucyc6IGxvY2F0aW9ucyB9KVxuICB9XG5cbiAgYXN5bmMgX29uUmVtb3ZlQXJtb3IgKGV2ZW50KSB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxvY2F0aW9uID0gYnV0dG9uLmNsb3Nlc3QoJy5hcm1vcicpXG4gICAgY29uc3QgaW5kZXggPSBsb2NhdGlvbi5kYXRhc2V0LmluZGV4XG4gICAgY29uc3QgbG9jYXRpb25zID0gZHVwbGljYXRlKFxuICAgICAgdGhpcy5hY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5hcm1vci5sb2NhdGlvbnMgfHwgbnVsbFxuICAgIClcbiAgICBpZiAoIWxvY2F0aW9ucykgcmV0dXJuXG4gICAgbG9jYXRpb25zLnNwbGljZShpbmRleCwgMSlcbiAgICBhd2FpdCB0aGlzLmFjdG9yLnVwZGF0ZSh7ICdkYXRhLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zJzogbG9jYXRpb25zIH0pXG4gIH1cblxuICBvbkNsb3NlU2hlZXQgKCkge1xuICAgIHN1cGVyLm9uQ2xvc2VTaGVldCgpXG4gICAgLy8gdGhpcy5hY3Rvci5sb2NrZWQgPSB0cnVlO1xuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyogIEZvcm0gU3VibWlzc2lvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKiogQG92ZXJyaWRlICovXG4gIF9nZXRTdWJtaXREYXRhICh1cGRhdGVEYXRhID0ge30pIHtcbiAgICAvLyBDcmVhdGUgdGhlIGV4cGFuZGVkIHVwZGF0ZSBkYXRhIG9iamVjdFxuICAgIGNvbnN0IGZkID0gbmV3IEZvcm1EYXRhRXh0ZW5kZWQodGhpcy5mb3JtLCB7IGVkaXRvcnM6IHRoaXMuZWRpdG9ycyB9KVxuICAgIGxldCBkYXRhID0gZmQudG9PYmplY3QoKVxuICAgIGlmICh1cGRhdGVEYXRhKSBkYXRhID0gbWVyZ2VPYmplY3QoZGF0YSwgdXBkYXRlRGF0YSlcbiAgICBlbHNlIGRhdGEgPSBleHBhbmRPYmplY3QoZGF0YSlcblxuICAgIC8vIEhhbmRsZSBBcm1vciBhcnJheVxuICAgIGlmIChkYXRhLmRhdGEuYXR0cmlicy5hcm1vcj8ubG9jYWxpemVkKSB7XG4gICAgICBjb25zdCBhcm1vciA9IGRhdGEuZGF0YT8uYXR0cmlicy5hcm1vclxuICAgICAgaWYgKGFybW9yKSB7XG4gICAgICAgIGFybW9yLmxvY2F0aW9ucyA9IE9iamVjdC52YWx1ZXMoXG4gICAgICAgICAgYXJtb3I/LmxvY2F0aW9ucyB8fCB0aGlzLmFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucyB8fCB7fVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBmbGF0dGVuZWQgc3VibWlzc2lvbiBkYXRhXG4gICAgcmV0dXJuIGZsYXR0ZW5PYmplY3QoZGF0YSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QgKi9cblxuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vLi4vYWN0b3JzL2FjdG9yLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3V2VhcG9uU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICpcbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ2l0ZW0nXSxcbiAgICAgIHdpZHRoOiA1MjAsXG4gICAgICBoZWlnaHQ6IDQ4MCxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LXRhYnMnLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnc2tpbGxzJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICBjb25zdCBwYXRoID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMnXG4gICAgcmV0dXJuIGAke3BhdGh9L3dlYXBvbi1zaGVldC5odG1sYFxuICB9XG5cbiAgLyoqXG4gICAqIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBnZXREYXRhICgpIHtcbiAgICBjb25zdCBkYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG4gICAgZGF0YS5kdHlwZXMgPSBbJ1N0cmluZycsICdOdW1iZXInLCAnQm9vbGVhbiddXG4gICAgLyoqIE1PRElGIDAuOC54ICovXG4gICAgY29uc3QgaXRlbURhdGEgPSBkYXRhLmRhdGFcbiAgICBkYXRhLmRhdGEgPSBpdGVtRGF0YS5kYXRhIC8vIE1PRElGOiAwLjgueCBkYXRhLmRhdGFcbiAgICAvKiogTU9ESUYgMC44LnggKi9cblxuICAgIGRhdGEuaGFzT3duZXIgPSB0aGlzLml0ZW0uYWN0b3IgIT0gbnVsbFxuICAgIGlmIChkYXRhLmhhc093bmVyKSBkYXRhLmFjdG9yS2V5ID0gdGhpcy5pdGVtLmFjdG9yLmFjdG9yS2V5XG5cbiAgICBkYXRhLmNvbWJhdFNraWxsID0gW11cbiAgICBpZiAoZGF0YS5oYXNPd25lcikge1xuICAgICAgZGF0YS5maXJlYXJtU2tpbGxzID0gdGhpcy5hY3Rvci5maXJlYXJtU2tpbGxzXG4gICAgICBkYXRhLmZpZ2h0aW5nU2tpbGxzID0gdGhpcy5hY3Rvci5maWdodGluZ1NraWxsc1xuICAgICAgZGF0YS5jb21iYXRTa2lsbCA9IHRoaXMuaXRlbS5hY3Rvci5pdGVtcy5maWx0ZXIoaXRlbSA9PiB7XG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICBpZiAoaXRlbS5kYXRhLmRhdGEucHJvcGVydGllcy5jb21iYXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSlcblxuICAgICAgZGF0YS5jb21iYXRTa2lsbC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIHJldHVybiBhLm5hbWVcbiAgICAgICAgICAudG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgICAgIC5sb2NhbGVDb21wYXJlKGIubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBkYXRhLl9wcm9wZXJ0aWVzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LndlYXBvblByb3BlcnRpZXMpKSB7XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IHt9XG4gICAgICBwcm9wZXJ0eS5pZCA9IGtleVxuICAgICAgcHJvcGVydHkubmFtZSA9IHZhbHVlXG4gICAgICBwcm9wZXJ0eS5pc0VuYWJsZWQgPSB0aGlzLml0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXNba2V5XSA9PT0gdHJ1ZVxuICAgICAgZGF0YS5fcHJvcGVydGllcy5wdXNoKHByb3BlcnR5KVxuICAgIH1cblxuICAgIGlmICghdGhpcy5pdGVtLmRhdGEuZGF0YS5wcmljZSkgdGhpcy5pdGVtLmRhdGEuZGF0YS5wcmljZSA9IHt9XG5cbiAgICBkYXRhLl9lcmFzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmVyYXMpKSB7XG4gICAgICBjb25zdCBlcmEgPSB7fVxuICAgICAgaWYgKCF0aGlzLml0ZW0uZGF0YS5kYXRhLnByaWNlW2tleV0pIHRoaXMuaXRlbS5kYXRhLmRhdGEucHJpY2Vba2V5XSA9IDBcbiAgICAgIGVyYS5wcmljZSA9IHRoaXMuaXRlbS5kYXRhLmRhdGEucHJpY2Vba2V5XVxuICAgICAgZXJhLmlkID0ga2V5XG4gICAgICBlcmEubmFtZSA9IHZhbHVlXG4gICAgICBlcmEuaXNFbmFibGVkID0gdGhpcy5pdGVtLmRhdGEuZGF0YS5lcmFzW2tleV0gPT09IHRydWVcbiAgICAgIGRhdGEuX2VyYXMucHVzaChlcmEpXG4gICAgfVxuICAgIGRhdGEudXNlc0FsdGVybmF0ZVNraWxsID1cbiAgICAgIHRoaXMuaXRlbS5kYXRhLmRhdGEucHJvcGVydGllcy5hdXRvID09PSB0cnVlIHx8XG4gICAgICB0aGlzLml0ZW0uZGF0YS5kYXRhLnByb3BlcnRpZXMuYnJzdCA9PT0gdHJ1ZSB8fFxuICAgICAgdGhpcy5pdGVtLmRhdGEuZGF0YS5wcm9wZXJ0aWVzLnRocm93biA9PT0gdHJ1ZVxuXG4gICAgZGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vbkNsaWNrVG9nZ2xlLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcud2VhcG9uLXByb3BlcnR5JykuY2xpY2sodGhpcy5fb25Qcm9wZXJ0eUNsaWNrLmJpbmQodGhpcykpXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKi9cbiAgYXN5bmMgX29uQ2xpY2tUb2dnbGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHByb3BlcnR5SWQgPVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcudG9nZ2xlLXN3aXRjaCcpLmRhdGFzZXQucHJvcGVydHlcbiAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlUHJvcGVydHkoXG4gICAgICBwcm9wZXJ0eUlkLFxuICAgICAgZXZlbnQubWV0YUtleSB8fFxuICAgICAgICBldmVudC5jdHJsS2V5IHx8XG4gICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDkxIHx8XG4gICAgICAgIGV2ZW50LmtleUNvZGUgPT09IDIyNFxuICAgIClcbiAgfVxuXG4gIGFzeW5jIF9vblByb3BlcnR5Q2xpY2sgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHByb3BlcnR5ID1cbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLndlYXBvbi1wcm9wZXJ0eScpLmRhdGFzZXQucHJvcGVydHlcbiAgICBjb25zdCB3ZWFwb25JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLndlYXBvbicpLmRhdGFzZXQuaXRlbUlkXG4gICAgY29uc3QgYWN0b3JLZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy53ZWFwb24nKS5kYXRhc2V0LmFjdG9yS2V5XG4gICAgbGV0IHdlYXBvbiA9IG51bGxcbiAgICBpZiAoYWN0b3JLZXkpIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gQ29DQWN0b3IuZ2V0QWN0b3JGcm9tS2V5KGFjdG9yS2V5KVxuICAgICAgd2VhcG9uID0gYWN0b3IuaXRlbXMuZ2V0KHdlYXBvbklkKVxuICAgIH0gZWxzZSB7XG4gICAgICB3ZWFwb24gPSBnYW1lLml0ZW1zLmdldCh3ZWFwb25JZClcbiAgICB9XG4gICAgYXdhaXQgd2VhcG9uLnRvZ2dsZVByb3BlcnR5KHByb3BlcnR5KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZ2FtZSwgSG9va3MgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5cbmFzeW5jIGZ1bmN0aW9uIHBlcmZvcm1GaWx0ZXIgKGUpIHtcbiAgY29uc3QgYXBwSWQgPSBlLmN1cnJlbnRUYXJnZXQubmFtZS5yZXBsYWNlKC9eY29jN1teMC05XSsoXFxkKykkLywgJyQxJylcbiAgY29uc3QgYXBwID0gJCgnI2FwcC0nICsgYXBwSWQpXG4gIGNvbnN0IHR5cGUgPSBhcHAuZmluZCgnc2VsZWN0W25hbWU9Y29jN3R5cGUnICsgYXBwSWQgKyAnXScpLnZhbCgpXG4gIGNvbnN0IG5hbWUgPSBhcHAuZmluZCgnaW5wdXRbbmFtZT1jb2M3bmFtZScgKyBhcHBJZCArICddJykudmFsKClcbiAgY29uc3QgZXJhRWxlbWVudCA9IGFwcC5maW5kKCdzZWxlY3RbbmFtZT1jb2M3ZXJhJyArIGFwcElkICsgJ10nKVxuICBsZXQgZXJhID0gJydcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnc2V0dXAnOlxuICAgIGNhc2UgJ3NraWxsJzpcbiAgICBjYXNlICd3ZWFwb24nOlxuICAgICAgZXJhRWxlbWVudC5jbG9zZXN0KCdkaXYuZXJhX3NlbGVjdCcpLnNob3coKVxuICAgICAgZXJhID0gZXJhRWxlbWVudC52YWwoKVxuICAgICAgYnJlYWtcbiAgICBkZWZhdWx0OlxuICAgICAgZXJhRWxlbWVudC5jbG9zZXN0KCdkaXYuZXJhX3NlbGVjdCcpLmhpZGUoKVxuICB9XG4gIGNvbnN0IGl0ZW1zID0gYXdhaXQgZ2FtZS5wYWNrcy5nZXQoYXBwLmRhdGEoJ3BhY2tJZCcpKT8uZ2V0RG9jdW1lbnRzKClcbiAgaWYgKHR5cGVvZiBpdGVtcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm5cbiAgfVxuICBjb25zdCBzaG93ID0gW11cbiAgY29uc3QgbmFtZUZpbHRlciA9IG5ldyBSZWdFeHAoUmVnRXhwLmVzY2FwZShuYW1lKSwgJ2knKVxuICBmb3IgKGNvbnN0IFssIGl0ZW1dIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW1zKSkge1xuICAgIGxldCBmaWx0ZXIgPSB0cnVlXG4gICAgaWYgKGZpbHRlciAmJiBuYW1lICE9PSAnJykge1xuICAgICAgZmlsdGVyID0gaXRlbS5uYW1lLm1hdGNoKG5hbWVGaWx0ZXIpXG4gICAgfVxuICAgIGlmIChmaWx0ZXIgJiYgdHlwZSAhPT0gJycpIHtcbiAgICAgIGZpbHRlciA9IGl0ZW0udHlwZSA9PT0gdHlwZVxuICAgIH1cbiAgICBpZiAoZmlsdGVyICYmIGVyYSAhPT0gJycpIHtcbiAgICAgIGlmIChcbiAgICAgICAgaXRlbS5kYXRhLmRhdGEuZXJhc1tlcmFdID09PSBmYWxzZSB8fFxuICAgICAgICBpdGVtLmRhdGEuZGF0YS5lcmFzW2VyYV0gPT09IHRydWVcbiAgICAgICkge1xuICAgICAgICBmaWx0ZXIgPSBpdGVtLmRhdGEuZGF0YS5lcmFzW2VyYV1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpbHRlciA9IGl0ZW0uZGF0YS5kYXRhLmVyYXNbZXJhXT8uc2VsZWN0ZWQgPz8gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZpbHRlcikge1xuICAgICAgc2hvdy5wdXNoKGl0ZW0uaWQpXG4gICAgfVxuICB9XG4gIGFwcC5maW5kKCdvbC5kaXJlY3RvcnktbGlzdCBsaScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9IHNob3cuaW5jbHVkZXModGhpcy5kYXRhc2V0LmRvY3VtZW50SWQpXG4gICAgICA/ICdmbGV4J1xuICAgICAgOiAnbm9uZSdcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBlbmRpdW1GaWx0ZXIgKCkge1xuICBIb29rcy5vbigncmVuZGVyQ29tcGVuZGl1bScsIGFzeW5jIChhcHAsIGh0bWwsIGRhdGEpID0+IHtcbiAgICBpZiAoYXBwLmNvbGxlY3Rpb24uZG9jdW1lbnROYW1lID09PSAnSXRlbScpIHtcbiAgICAgIGNvbnN0IHR5cGVzID0gWy4uLm5ldyBTZXQoZGF0YS5pbmRleC5tYXAoaXRlbSA9PiBpdGVtLnR5cGUpKV1cbiAgICAgIGNvbnN0IHNlbGVjdCA9IFtdXG4gICAgICBzZWxlY3QucHVzaChcbiAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJcIj4nICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFsbCcpICsgJzwvb3B0aW9uPidcbiAgICAgIClcbiAgICAgIGlmICh0eXBlcy5pbmNsdWRlcygnYXJjaGV0eXBlJykpIHtcbiAgICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJhcmNoZXR5cGVcIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5BcmNoZXR5cGUnKSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodHlwZXMuaW5jbHVkZXMoJ2Jvb2snKSkge1xuICAgICAgICBzZWxlY3QucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cImJvb2tcIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5Cb29rJykgK1xuICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdpdGVtJykpIHtcbiAgICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJpdGVtXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuSXRlbScpICtcbiAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlcy5pbmNsdWRlcygnb2NjdXBhdGlvbicpKSB7XG4gICAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwib2NjdXBhdGlvblwiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLk9jY3VwYXRpb24nKSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodHlwZXMuaW5jbHVkZXMoJ3NldHVwJykpIHtcbiAgICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJzZXR1cFwiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlNldHVwJykgK1xuICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdza2lsbCcpKSB7XG4gICAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwic2tpbGxcIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5Ta2lsbCcpICtcbiAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlcy5pbmNsdWRlcygnc3BlbGwnKSkge1xuICAgICAgICBzZWxlY3QucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cInNwZWxsXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuU3BlbGwnKSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodHlwZXMuaW5jbHVkZXMoJ3N0YXR1cycpKSB7XG4gICAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwic3RhdHVzXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuU3RhdHVzJykgK1xuICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCd0YWxlbnQnKSkge1xuICAgICAgICBzZWxlY3QucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cInRhbGVudFwiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlRhbGVudCcpICtcbiAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlcy5pbmNsdWRlcygnd2VhcG9uJykpIHtcbiAgICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJ3ZWFwb25cIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5XZWFwb24nKSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBjb25zdCBlcmFzID0gW11cbiAgICAgIGVyYXMucHVzaChcbiAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJcIj4nICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFsbCcpICsgJzwvb3B0aW9uPidcbiAgICAgIClcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykpIHtcbiAgICAgICAgZXJhcy5wdXNoKFxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwiJyArXG4gICAgICAgICAgICBrZXkgK1xuICAgICAgICAgICAgJ1wiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBodG1sLmRhdGEoJ3BhY2tJZCcsIGFwcC5tZXRhZGF0YS5wYWNrYWdlICsgJy4nICsgYXBwLm1ldGFkYXRhLm5hbWUpXG4gICAgICBodG1sLmZpbmQoJ2hlYWRlci5kaXJlY3RvcnktaGVhZGVyJykucmVtb3ZlKClcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJ2Rpdi5jb21wZW5kaXVtLmRpcmVjdG9yeScpXG4gICAgICAgIC5iZWZvcmUoXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJjb21wZW5kaXVtZmlsdGVyXCI+PGRpdiBjbGFzcz1cImZsZXhyb3dcIj48aSBjbGFzcz1cImZhcyBmYS1sYXllci1ncm91cFwiPjwvaT48c2VsZWN0IG5hbWU9XCJjb2M3dHlwZScgK1xuICAgICAgICAgICAgYXBwLmFwcElkICtcbiAgICAgICAgICAgICdcIiBzdHlsZT1cIlwiPicgK1xuICAgICAgICAgICAgc2VsZWN0LmpvaW4oJycpICtcbiAgICAgICAgICAgICc8L3NlbGVjdD48L2Rpdj48ZGl2IGNsYXNzPVwiZmxleHJvd1wiPjxpIGNsYXNzPVwiZmFzIGZhLXNlYXJjaFwiPjwvaT48aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwiY29jN25hbWUnICtcbiAgICAgICAgICAgIGFwcC5hcHBJZCArXG4gICAgICAgICAgICAnXCIgcGxhY2Vob2xkZXI9XCInICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnRklMRVMuU2VhcmNoJykgK1xuICAgICAgICAgICAgJ1wiIGF1dG9jb21wbGV0ZT1cIm9mZlwiPjwvZGl2PjxkaXYgY2xhc3M9XCJmbGV4cm93IGVyYV9zZWxlY3RcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPjxpIGNsYXNzPVwiZmFzIGZhLWxheWVyLWdyb3VwXCI+PC9pPjxzZWxlY3QgbmFtZT1cImNvYzdlcmEnICtcbiAgICAgICAgICAgIGFwcC5hcHBJZCArXG4gICAgICAgICAgICAnXCIgc3R5bGU9XCJcIj4nICtcbiAgICAgICAgICAgIGVyYXMuam9pbignJykgK1xuICAgICAgICAgICAgJzwvc2VsZWN0PjwvZGl2PjwvZGl2PidcbiAgICAgICAgKVxuICAgICAgaHRtbC5maW5kKCdzZWxlY3QnKS5jaGFuZ2UocGVyZm9ybUZpbHRlci5iaW5kKHRoaXMpKVxuICAgICAgaHRtbC5maW5kKCdpbnB1dCcpLmtleXVwKHBlcmZvcm1GaWx0ZXIuYmluZCh0aGlzKSlcbiAgICB9XG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgSG9va3MgKi9cbmltcG9ydCB7IGNvbmZpZ3VyZURvY3VtZW50cyB9IGZyb20gJy4uL3NjcmlwdHMvY29uZmlndXJlLWRvY3VtZW50cy5qcydcbmltcG9ydCB7IHByZWxvYWRIYW5kbGViYXJzVGVtcGxhdGVzIH0gZnJvbSAnLi4vc2NyaXB0cy9sb2FkLXRlbXBsYXRlcy5qcydcbmltcG9ydCB7IHJlZ2lzdGVyU2V0dGluZ3MgfSBmcm9tICcuLi9zY3JpcHRzL3JlZ2lzdGVyLXNldHRpbmdzLmpzJ1xuaW1wb3J0IHsgcmVnaXN0ZXJTaGVldHMgfSBmcm9tICcuLi9zY3JpcHRzL3JlZ2lzdGVyLXNoZWV0cy5qcydcbmltcG9ydCB7IGhhbmRsZWJhcnNIZWxwZXIgfSBmcm9tICcuLi9zY3JpcHRzL2hhbmRsZWJhcnMtaGVscGVyLmpzJ1xuaW1wb3J0IHsgY29tcGVuZGl1bUZpbHRlciB9IGZyb20gJy4uL3NjcmlwdHMvY29tcGVuZGl1bS1maWx0ZXIuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbmNlKCdpbml0JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbmZpZ3VyZURvY3VtZW50cygpXG4gICAgcHJlbG9hZEhhbmRsZWJhcnNUZW1wbGF0ZXMoKVxuICAgIHJlZ2lzdGVyU2V0dGluZ3MoKVxuICAgIHJlZ2lzdGVyU2hlZXRzKClcbiAgICBoYW5kbGViYXJzSGVscGVyKClcbiAgICBjb21wZW5kaXVtRmlsdGVyKClcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBDT05GSUcgKi9cblxuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3Qm9vayB9IGZyb20gJy4uL2l0ZW1zL2Jvb2svZGF0YS5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IENvQzdTcGVsbCB9IGZyb20gJy4uL2l0ZW1zL3NwZWxsL2RhdGEuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBjb25maWd1cmVEb2N1bWVudHMgKCkge1xuICBDT05GSUcuQWN0b3IuZG9jdW1lbnRDbGFzcyA9IENvQ0FjdG9yXG4gIENPTkZJRy5BY3Rvci5kb2N1bWVudENsYXNzZXMgPSB7fVxuICBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzID0gQ29DN0l0ZW1cbiAgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzc2VzID0ge1xuICAgIGJvb2s6IENvQzdCb29rLFxuICAgIHNwZWxsOiBDb0M3U3BlbGxcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGxvYWRUZW1wbGF0ZXMgKi9cblxuLyoqXG4gKiBEZWZpbmUgYSBzZXQgb2YgdGVtcGxhdGUgcGF0aHMgdG8gcHJlLWxvYWRcbiAqIFByZS1sb2FkZWQgdGVtcGxhdGVzIGFyZSBjb21waWxlZCBhbmQgY2FjaGVkIGZvciBmYXN0IGFjY2VzcyB3aGVuIHJlbmRlcmluZ1xuICogQHJldHVybiB7UHJvbWlzZX1cbiAqL1xuZXhwb3J0IGNvbnN0IHByZWxvYWRIYW5kbGViYXJzVGVtcGxhdGVzID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICAvKiogRGVmaW5lIHRlbXBsYXRlIHBhdGhzIHRvIGxvYWQgKi9cbiAgY29uc3QgdGVtcGxhdGVQYXRocyA9IFtcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvbnBjLXNraWxscy5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvbnBjLWNvbWJhdC5odG1sJyxcblxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1pbnZlbnRvcnkuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLWludmVudG9yeS1pdGVtcy5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3ItYmFja2dyb3VuZC5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3ItbXl0aG9zLWVub3VudGVycy5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1rZWVwZXItbXl0aG9zLWVub3VudGVycy5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1za2lsbHMtdjIuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLXdlYXBvbnMtdjIuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2NoYXJhY3Rlci1kZXZlbG9wbWVudC12Mi5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvZGV2ZWxvcG1lbnQtY29udHJvbHMuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL3ZpdGFscy5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvY29tYmF0Lmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9jaGFyYWN0ZXItc2hlZXQtdjIuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL2NoYXJhY3Rlci9zdW1tYXJ5Lmh0bWwnLFxuXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvYm9vay9kZXRhaWxzLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3NwZWxsL2RldGFpbHMuaHRtbCdcbiAgXVxuXG4gIC8qKiBMb2FkIHRoZSB0ZW1wbGF0ZSBwYXJ0cyAqL1xuICByZXR1cm4gbG9hZFRlbXBsYXRlcyh0ZW1wbGF0ZVBhdGhzKVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRywgZ2FtZSAqL1xuaW1wb3J0IHsgQ29DN0RlY2FkZXJEaWUgfSBmcm9tICcuLi9hcHBzL2RlY2FkZXItZGllLmpzJ1xuaW1wb3J0IHsgQ29DN0RlY2FkZXJEaWVPdGhlciB9IGZyb20gJy4uL2FwcHMvZGVjYWRlci1kaWUtb3RoZXIuanMnXG5pbXBvcnQgeyBDb0M3R2FtZVJ1bGVTZXR0aW5ncyB9IGZyb20gJy4vZ2FtZS1ydWxlcy5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyU2V0dGluZ3MgKCkge1xuICAvKipcbiAgICogUnVsZXNcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXJNZW51KCdDb0M3JywgJ2dhbWVSdWxlcycsIHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5SdWxlcy5OYW1lJyxcbiAgICBsYWJlbDogJ0NvQzcuU2V0dGluZ3MuUnVsZXMuTGFiZWwnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlJ1bGVzLkhpbnQnLFxuICAgIGljb246ICdmYXMgZmEtYm9vaycsXG4gICAgdHlwZTogQ29DN0dhbWVSdWxlU2V0dGluZ3MsXG4gICAgcmVzdHJpY3RlZDogdHJ1ZVxuICB9KVxuICBDb0M3R2FtZVJ1bGVTZXR0aW5ncy5yZWdpc3RlclNldHRpbmdzKClcblxuICAvKipcbiAgICogSW5pdGlhdGl2ZVxuICAgKi9cbiAgLyoqIFNldCBkaXNwbGF5aW5nIGRpY2VzIGZvciBpbml0IHJvbGwgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNwbGF5SW5pdERpY2VzJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5kaXNwbGF5SW5pdERpY2VzJyxcbiAgICBoaW50OiAnU0VUVElOR1MuZGlzcGxheUluaXREaWNlc0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIFNldCBkaXNwbGF5aW5nIGRpY2VzIGZvciBpbml0IHJvbGwgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNwbGF5SW5pdEFzVGV4dCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuZGlzcGxheUluaXRBc1RleHQnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5kaXNwbGF5SW5pdEFzVGV4dEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcblxuICAvKipcbiAgICogUm9sbCBjdXN0b21pc2Fpb25zXG4gICAqL1xuICAvKiogU3RhbmRieSByb2xscyBtYWRlIGJ5IEdNIGZyb20gcGxheWVyIHNoZWV0ICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuU3RhbmJ5R01Sb2xscycsXG4gICAgaGludDogJ1NFVFRJTkdTLlN0YW5ieUdNUm9sbHNIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBBbGxvdyB1c2FnZSBvZiBhIGZsYXQgZGljZSBtb2RpZmllciAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FsbG93RmxhdERpY2VNb2RpZmllcicsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQWxsb3dGbGF0RGljZU1vZGlmaWVyJyxcbiAgICBoaW50OiAnU0VUVElOR1MuQWxsb3dGbGF0RGljZU1vZGlmaWVySGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIEFsbG93IHVzYWdlIG9mIGEgZmxhdCB0aHJlc2hvbGQgbW9kaWZpZXIgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcicsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5BbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllckhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGVmYXVsdENoZWNrRGlmZmljdWx0eScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRGVmYXVsdERpZmZpY3VsdHknLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5EZWZhdWx0RGlmZmljdWx0eUhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAncmVndWxhcicsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IHtcbiAgICAgIHJlZ3VsYXI6ICdTRVRUSU5HUy5DaGVja0RpZmZpY3VsdHlSZWd1bGFyJyxcbiAgICAgIHVua25vd246ICdTRVRUSU5HUy5DaGVja0RpZmZpY3VsdHlVbmtub3duJ1xuICAgIH1cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzZWxmUm9sbFdoaXNwZXJUYXJnZXQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlNlbGZSb2xsV2hpc3BlclRhcmdldCcsXG4gICAgaGludDogJ1NFVFRJTkdTLlNlbGZSb2xsV2hpc3BlclRhcmdldEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnZXZlcnlvbmUnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB7XG4gICAgICBub2JvZHk6ICdTRVRUSU5HUy5Eb05vdEFkdmlzZScsXG4gICAgICBvd25lcnM6ICdTRVRUSU5HUy5BZHZpc2VPd25lcnNPbmx5JyxcbiAgICAgIGV2ZXJ5b25lOiAnU0VUVElOR1MuQWR2aXNlQWxsUGxheWVyJ1xuICAgIH1cbiAgfSlcblxuICAvKipcbiAgICogQ2hhdCBDYXJkc1xuICAgKi9cbiAgLyoqIFNldCB0aGUgbmVlZCB0byBkaXNwbGF5IGFjdG9yIGltYWdlIG9uIGNoYXQgY2FyZHMgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNwbGF5QWN0b3JPbkNhcmQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRpc3BsYXlBY3Rvck9uQ2FyZCcsXG4gICAgaGludDogJ1NFVFRJTkdTLkRpc3BsYXlBY3Rvck9uQ2FyZEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWwnLFxuICAgIHNjb3BlOiAnY2xpZW50JyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcGxheVJlc3VsdFR5cGUnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRpc3BsYXlSZXN1bHRUeXBlJyxcbiAgICBzY29wZTogJ2NsaWVudCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIFNldCB0aGUgdXNlIG9mIHRva2VuIGluc3RlYWQgb2YgcG9ydHJhaXRzICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAndXNlVG9rZW4nLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlVzZVRva2VuJyxcbiAgICBoaW50OiAnU0VUVElOR1MuVXNlVG9rZW5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuXG4gIC8qKlxuICAgKiBTY2VuZSBTZXR0aW5nc1xuICAgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdlbmFibGVTdGF0dXNJY29ucycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRW5hYmxlU3RhdHVzSWNvbnMnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5FbmFibGVTdGF0dXNJY29uc0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IHRydWVcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdncmlkU3BhY2VzJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5SZXN0cmljdEdyaWRTcGFjZXMnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5SZXN0cmljdEdyaWRTcGFjZXNIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3RhbmNlRWxldmF0aW9uJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5DaGVja0VsZXZhdGlvbicsXG4gICAgaGludDogJ1NFVFRJTkdTLkNoZWNrRWxldmF0aW9uSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuXG4gIC8qKlxuICAgKiBHYW1lIEFydHdvcmsgU2V0dGluZ3NcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnb3ZlcnJpZGVHYW1lQXJ0d29yaycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuT3ZlcnJpZGVHYW1lQXJ0d29yaycsXG4gICAgaGludDogJ1NFVFRJTkdTLk92ZXJyaWRlR2FtZUFydHdvcmtIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb3ZlcnJpZGVHYW1lQXJ0d29yaycpKSB7XG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnRQYXVzZUltYWdlJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydFBhdXNlSW1hZ2UnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydFBhdXNlSW1hZ2VIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvdGltZS10cmFwLnN2ZycsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0UGF1c2VUZXh0Jywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydFBhdXNlVGV4dCcsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0UGF1c2VUZXh0SGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICdUaGUgQmxpbmQgSWRpb3QgR29kIGlzIGRyZWFtaW5nLi4uJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogU2hlZXQgc2V0dGluZ3NcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcGxheVBsYXllck5hbWVPblNoZWV0Jywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5kaXNwbGF5UGxheWVyTmFtZU9uU2hlZXQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAndG9vbFRpcERlbGF5Jywge1xuICAgIG5hbWU6ICdDb0M3LnRvb2xUaXBEZWxheScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IDIwMDAsXG4gICAgdHlwZTogTnVtYmVyXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc2hvd0ljb25zT25seScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1Muc2hvd0ljb25zT25seScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIEFsbG93IHBsYXllciB0byB1bmxvY2sgdGhlIHNoZWV0IG91dHNpZGUgb2YgY3JlYXRpb24gbW9kZSAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3BsYXllclVubG9ja1NoZWV0TW9kZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuUGxheWVyVW5sb2NrU2hlZXRNb2RlJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogJ2Fsd2F5cycsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IHtcbiAgICAgIGFsd2F5czogJ1NFVFRJTkdTLkFsd2F5c0VkaXRhYmxlJyxcbiAgICAgIGNyZWF0aW9uOiAnU0VUVElOR1MuQ3JlYXRpb25Nb2RlT25seScsXG4gICAgICBuZXZlcjogJ1NFVFRJTkdTLk5ldmVyRWRpdGFibGUnXG4gICAgfVxuICB9KVxuICAvKiogQWxsb3cgcGxheWVyIHRvIG1vZGlmeSBzdGF0dXMgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzdGF0dXNQbGF5ZXJFZGl0YWJsZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuU3RhdHVzUGxheWVyRWRpdGFibGUnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5TdGF0dXNQbGF5ZXJFZGl0YWJsZUhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdvbmVCbG9ja0JhY2tzdG9yeScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuT25lQmxvY2tCYWNrU3RvcnknLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5PbmVCbG9ja0JhY2tTdG9yeUhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnb3ZlcnJpZGVTaGVldEFydHdvcmsnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLk92ZXJyaWRlU2hlZXRBcnR3b3JrJyxcbiAgICBoaW50OiAnU0VUVElOR1MuT3ZlcnJpZGVTaGVldEFydHdvcmtIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb3ZlcnJpZGVTaGVldEFydHdvcmsnKSkge1xuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZCcsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnRXb3JrU2hlZXRCYWNrZ3JvdW5kJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnRXb3JrU2hlZXRCYWNrZ3JvdW5kSGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6IFwidXJsKCcuL2Fzc2V0cy9pbWFnZXMvYmFja2dyb3VuZC53ZWJwJykgNCByZXBlYXRcIixcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kVHlwZScsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnRXb3JrU2hlZXRCYWNrZ3JvdW5kVHlwZScsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICdzbGljZScsXG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBjaG9pY2VzOiB7XG4gICAgICAgIHNsaWNlOiAnU0VUVElOR1MuQmFja2dyb3VuZFNsaWNlJyxcbiAgICAgICAgYXV0bzogJ1NFVFRJTkdTLkJhY2tncm91bmRBdXRvJyxcbiAgICAgICAgY29udGFpbjogJ1NFVFRJTkdTLkJhY2tncm91bmRDb250YWluJyxcbiAgICAgICAgY292ZXI6ICdTRVRUSU5HUy5CYWNrZ3JvdW5kQ292ZXInXG4gICAgICB9XG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydFdvcmtPdGhlclNoZWV0QmFja2dyb3VuZCcsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmQnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydFdvcmtPdGhlclNoZWV0QmFja2dyb3VuZEhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiBcInVybCggJy4vYXNzZXRzL2ltYWdlcy9iYWNrZ3JvdW5kLndlYnAnKVwiLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtTaGVldEltYWdlJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtTaGVldEltYWdlJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnR3b3JrU2hlZXRJbWFnZUhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiBcInVybCgnLi9hc3NldHMvaW1hZ2VzL3RlbnRhY2xlcy53ZWJwJylcIixcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrRnJvbnRDb2xvcicsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrRnJvbnRDb2xvcicsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0d29ya0Zyb250Q29sb3JIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJ3JnYmEoNDMsNTUsODMsMSknLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtCYWNrZ3JvdW5kQ29sb3InLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya0JhY2tncm91bmRDb2xvcicsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0d29ya0JhY2tncm91bmRDb2xvckhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAncmdiYSgxMDMsMTEsMTEsMSknLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtJbnRlcmFjdGl2ZUNvbG9yJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtJbnRlcmFjdGl2ZUNvbG9yJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnR3b3JrSW50ZXJhY3RpdmVDb2xvckhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAncmdiYSgxMDMsMTEsMTEsMSknLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtGaXhlZFNraWxsTGVuZ3RoJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtGaXhlZFNraWxsTGVuZ3RoJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnR3b3JrRml4ZWRTa2lsbExlbmd0aEhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiB0cnVlLFxuICAgICAgdHlwZTogQm9vbGVhblxuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrTWFpbkZvbnQnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya01haW5Gb250JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJycsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250Qm9sZCcsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrTWFpbkZvbnRCb2xkJyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJycsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250U2l6ZScsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrTWFpbkZvbnRTaXplJyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogMTYsXG4gICAgICB0eXBlOiBOdW1iZXJcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFdlYXBvbnNcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcmVnYXJkVXNlUGVyUm91bmQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRpc3JlZ2FyZFVzZVBlclJvdW5kJyxcbiAgICBoaW50OiAnU0VUVElOR1MuRGlzcmVnYXJkVXNlUGVyUm91bmRIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3JlZ2FyZEFtbW8nLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRpc3JlZ2FyZEFtbW8nLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5EaXNyZWdhcmRBbW1vSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcblxuICAvKipcbiAgICogRGljZSBTbyBOaWNlXG4gICAqL1xuICBpZiAoZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZSkge1xuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc3luY0RpY2UzZCcsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5TeW5jRGljZTNEJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5TeW5jRGljZTNESGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgICB0eXBlOiBCb29sZWFuXG4gICAgfSlcbiAgICBjb25zdCBbdmVyc2lvbl0gPSBnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uZGF0YS52ZXJzaW9uLnNwbGl0KCcuJylcbiAgICBpZiAoIWlzTmFOKE51bWJlcih2ZXJzaW9uKSkgJiYgTnVtYmVyKHZlcnNpb24pID49IDMpIHtcbiAgICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAndGVuRGllQm9udXMnLCB7XG4gICAgICAgIG5hbWU6ICdTRVRUSU5HUy5UZW5EaWVCb251cycsXG4gICAgICAgIGhpbnQ6ICdTRVRUSU5HUy5UZW5EaWVCb251c0hpbnQnLFxuICAgICAgICBzY29wZTogJ2NsaWVudCcsXG4gICAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ2Jyb256ZScsXG4gICAgICAgIHR5cGU6IFN0cmluZ1xuICAgICAgfSlcbiAgICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAndGVuRGllUGVuYWx0eScsIHtcbiAgICAgICAgbmFtZTogJ1NFVFRJTkdTLlRlbkRpZVBlbmFsdHknLFxuICAgICAgICBoaW50OiAnU0VUVElOR1MuVGVuRGllUGVuYWx0eUhpbnQnLFxuICAgICAgICBzY29wZTogJ2NsaWVudCcsXG4gICAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ2Jsb29kbW9vbicsXG4gICAgICAgIHR5cGU6IFN0cmluZ1xuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGV2ZWxvcGVyIGFuZCBkZWJ1ZyBzZXR0aW5nc1xuICAgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkZWJ1Z21vZGUnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRlYnVnTW9kZScsXG4gICAgaGludDogJ1NFVFRJTkdTLkRlYnVnTW9kZUhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZXhwZXJpbWVudGFsRmVhdHVyZXMnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlNob3dFeHBlcmltZW50YWxGZWF0dXJlcycsXG4gICAgaGludDogJ1NFVFRJTkdTLlNob3dFeHBlcmltZW50YWxGZWF0dXJlc0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIC8qKlxuICAgKiBPdGhlciBzZXR0aW5nc1xuICAgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkZXZlbG9wbWVudEVuYWJsZWQnLCB7XG4gICAgbmFtZTogJ0RldiBwaGFzZWQgYWxsb3dlZCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIC8qKiBGZWF0OiB3ZWxjb21lIG1lc3NhZ2UgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzaG93V2VsY29tZU1lc3NhZ2UnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLnNob3dXZWxjb21lTWVzc2FnZScsXG4gICAgaGludDogJ1NFVFRJTkdTLnNob3dXZWxjb21lTWVzc2FnZScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJywge1xuICAgIG5hbWU6ICdDaGFyIGNyZWF0aW9uIGFsbG93ZWQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3N5c3RlbVVwZGF0ZVZlcnNpb24nLCB7XG4gICAgbmFtZTogJ1N5c3RlbSB1cGRhdGUgdmVyc2lvbicsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogZ2FtZS5zeXN0ZW0uZGF0YS52ZXJzaW9uXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlZE1vZHVsZVZlcnNpb24nLCB7XG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiB7fVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3hwRW5hYmxlZCcsIHtcbiAgICBuYW1lOiAnRW5hYmxlIFhQIGdhaW4nLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH0pXG4gIC8qKiBTZXQgYW4gaW5pdGlhdGl2ZSBmb3JtdWxhIGZvciB0aGUgc3lzdGVtICovXG4gIENPTkZJRy5Db21iYXQuaW5pdGlhdGl2ZSA9IHtcbiAgICBmb3JtdWxhOiAnQGNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUnLFxuICAgIGRlY2ltYWxzOiA0XG4gIH1cbiAgQ09ORklHLmRlYnVnLmhvb2tzID0gISFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZWJ1Z21vZGUnKVxuICBDT05GSUcuRGljZS50ZXJtcy50ID0gQ29DN0RlY2FkZXJEaWVcbiAgQ09ORklHLkRpY2UudGVybXMubyA9IENvQzdEZWNhZGVyRGllT3RoZXJcbn1cbiIsIi8qIGdsb2JhbCBBY3RvcnMsIEFjdG9yU2hlZXQsIEl0ZW1zLCBJdGVtU2hlZXQgKi9cblxuaW1wb3J0IHsgQ29DN0FyY2hldHlwZVNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL2FyY2hldHlwZS5qcydcbmltcG9ydCB7IENvQzdCb29rU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9ib29rL3NoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXJhY3RlclNoZWV0IH0gZnJvbSAnLi4vYWN0b3JzL3NoZWV0cy9jaGFyYWN0ZXIuanMnXG5pbXBvcnQgeyBDb0M3Q29udGFpbmVyU2hlZXQgfSBmcm9tICcuLi9hY3RvcnMvc2hlZXRzL2NvbnRhaW5lci5qcydcbmltcG9ydCB7IENvQzdDaGFzZVNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL2NoYXNlLmpzJ1xuaW1wb3J0IHsgQ29DN0NyZWF0dXJlU2hlZXQgfSBmcm9tICcuLi9hY3RvcnMvc2hlZXRzL2NyZWF0dXJlLXNoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW1TaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9pdGVtLXNoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW1TaGVldFYyIH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL2l0ZW0tc2hlZXRWMi5qcydcbmltcG9ydCB7IENvQzdOUENTaGVldCB9IGZyb20gJy4uL2FjdG9ycy9zaGVldHMvbnBjLXNoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN09jY3VwYXRpb25TaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9vY2N1cGF0aW9uLmpzJ1xuaW1wb3J0IHsgQ29DN1NldHVwU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvc2V0dXAuanMnXG5pbXBvcnQgeyBDb0M3U2tpbGxTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9za2lsbC5qcydcbmltcG9ydCB7IENvQzdTcGVsbFNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc3BlbGwvc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3U3RhdHVzU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvc3RhdHVzLmpzJ1xuaW1wb3J0IHsgQ29DN1RhbGVudFNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL3RhbGVudC5qcydcbmltcG9ydCB7IENvQzdWZWhpY2xlU2hlZXQgfSBmcm9tICcuLi9hY3RvcnMvc2hlZXRzL3ZlaGljbGUuanMnXG5pbXBvcnQgeyBDb0M3V2VhcG9uU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvd2VhcG9uLXNoZWV0LmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJTaGVldHMgKCkge1xuICBBY3RvcnMudW5yZWdpc3RlclNoZWV0KCdjb3JlJywgQWN0b3JTaGVldClcbiAgQWN0b3JzLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3TlBDU2hlZXQsIHtcbiAgICB0eXBlczogWyducGMnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBBY3RvcnMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdWZWhpY2xlU2hlZXQsIHtcbiAgICB0eXBlczogWyd2ZWhpY2xlJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgQWN0b3JzLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3Q3JlYXR1cmVTaGVldCwge1xuICAgIHR5cGVzOiBbJ2NyZWF0dXJlJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgQWN0b3JzLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3Q29udGFpbmVyU2hlZXQsIHtcbiAgICB0eXBlczogWydjb250YWluZXInXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBBY3RvcnMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdDaGFyYWN0ZXJTaGVldCwge1xuICAgIHR5cGVzOiBbJ2NoYXJhY3RlciddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnVucmVnaXN0ZXJTaGVldCgnY29yZScsIEl0ZW1TaGVldClcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTa2lsbFNoZWV0LCB7XG4gICAgdHlwZXM6IFsnc2tpbGwnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1dlYXBvblNoZWV0LCB7XG4gICAgdHlwZXM6IFsnd2VhcG9uJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdCb29rU2hlZXQsIHtcbiAgICB0eXBlczogWydib29rJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTcGVsbFNoZWV0LCB7XG4gICAgdHlwZXM6IFsnc3BlbGwnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1RhbGVudFNoZWV0LCB7XG4gICAgdHlwZXM6IFsndGFsZW50J10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTdGF0dXNTaGVldCwge1xuICAgIHR5cGVzOiBbJ3N0YXR1cyddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3T2NjdXBhdGlvblNoZWV0LCB7XG4gICAgdHlwZXM6IFsnb2NjdXBhdGlvbiddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3QXJjaGV0eXBlU2hlZXQsIHtcbiAgICB0eXBlczogWydhcmNoZXR5cGUnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1NldHVwU2hlZXQsIHtcbiAgICB0eXBlczogWydzZXR1cCddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3Q2hhc2VTaGVldCwge1xuICAgIHR5cGVzOiBbJ2NoYXNlJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdJdGVtU2hlZXQsIHsgdHlwZXM6IFsnaXRlbSddIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3SXRlbVNoZWV0VjIsIHtcbiAgICB0eXBlczogWydpdGVtJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBIYW5kbGViYXJzICovXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vY2hhdC9oZWxwZXIuanMnXG5cbmV4cG9ydCBjb25zdCBoYW5kbGViYXJzSGVscGVyID0gZnVuY3Rpb24gKCkge1xuICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdyb2xsQWN0b3JJbWcnLCBmdW5jdGlvbiAoYWN0b3JLZXkpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleShhY3RvcktleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9KVxufVxuIiwiLyogZ2xvYmFsIGdhbWUgKi9cbmV4cG9ydCBjbGFzcyBDb0M3RGVjYWRlckRTTkZhY2VzIHtcbiAgY29uc3RydXRvciAoKSB7XG4gICAgdGhpcy5zZWxlY3RlZCA9ICcnXG4gIH1cblxuICBzZXRGYWNlcyAoKSB7XG4gICAgbGV0IHNlbGVjdGVkID0gZ2FtZS51c2VyLmdldEZsYWcoJ2RpY2Utc28tbmljZScsICdhcHBlYXJhbmNlJyk/Lmdsb2JhbFxuICAgICAgLnN5c3RlbVxuICAgIGlmIChzZWxlY3RlZCAhPT0gdGhpcy5zZWxlY3RlZCkge1xuICAgICAgbGV0IGRhdGFcbiAgICAgIGxldCBkZXN0aW5hdGlvblxuICAgICAgbGV0IHNvdXJjZURpZSA9IGdhbWUuZGljZTNkLkRpY2VGYWN0b3J5LnN5c3RlbXNbc2VsZWN0ZWRdPy5kaWNlLmZpbmQoXG4gICAgICAgIGQgPT4gZC50eXBlID09PSAnZDEwMCdcbiAgICAgIClcbiAgICAgIGlmICh0eXBlb2Ygc291cmNlRGllID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzb3VyY2VEaWUgPSBnYW1lLmRpY2UzZC5EaWNlRmFjdG9yeS5zeXN0ZW1zLnN0YW5kYXJkLmRpY2UuZmluZChcbiAgICAgICAgICBkID0+IGQudHlwZSA9PT0gJ2QxMDAnXG4gICAgICAgIClcbiAgICAgICAgc2VsZWN0ZWQgPSAnc3RhbmRhcmQnXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHNvdXJjZURpZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZGVzdGluYXRpb24gPSBnYW1lLmRpY2UzZC5EaWNlRmFjdG9yeS5zeXN0ZW1zLnN0YW5kYXJkLmRpY2UuZmluZEluZGV4KFxuICAgICAgICAgIGQgPT4gZC50eXBlID09PSAnZHQnXG4gICAgICAgIClcbiAgICAgICAgZGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIHNvdXJjZURpZSlcbiAgICAgICAgZGF0YS50eXBlID0gJ2R0J1xuICAgICAgICBnYW1lLmRpY2UzZC5EaWNlRmFjdG9yeS5zeXN0ZW1zLnN0YW5kYXJkLmRpY2VbZGVzdGluYXRpb25dID1cbiAgICAgICAgICBPYmplY3QuYXNzaWduKHNvdXJjZURpZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIGRhdGEpXG4gICAgICB9XG4gICAgICB0aGlzLnNlbGVjdGVkID0gc2VsZWN0ZWRcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBnYW1lICovXG5leHBvcnQgY2xhc3MgQ29DN1Rvb2x0aXBzIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMuVG9vbFRpcEhvdmVyID0gbnVsbFxuICAgIHRoaXMudG9vbFRpcFRpbWVyID0gbnVsbFxuICB9XG5cbiAgZGlzcGxheVRvb2xUaXAgKHRvb2xUaXApIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuVG9vbFRpcEhvdmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3QgYm91bmRzID0gdGhpcy5Ub29sVGlwSG92ZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgIGlmICghaXNOYU4oYm91bmRzLmxlZnQgfHwgJycpICYmICFpc05hTihib3VuZHMudG9wIHx8ICcnKSkge1xuICAgICAgICBsZXQgbGVmdCA9IGJvdW5kcy5sZWZ0XG4gICAgICAgIGxldCB0b3AgPSBib3VuZHMudG9wXG4gICAgICAgIGNvbnN0IGhlaWdodFRleHQgPSAkKHRoaXMuVG9vbFRpcEhvdmVyKS5vdXRlckhlaWdodCgpXG4gICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJoZWxwLXRvb2x0aXBcIj4nICsgdG9vbFRpcCArICc8L2Rpdj4nKVxuICAgICAgICBjb25zdCB0aXAgPSAkKCcjaGVscC10b29sdGlwJylcbiAgICAgICAgY29uc3QgaGVpZ2h0VGlwID0gdGlwLm91dGVySGVpZ2h0KClcbiAgICAgICAgY29uc3Qgd2lkdGhUaXAgPSB0aXAub3V0ZXJXaWR0aCgpXG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgPCBoZWlnaHRUZXh0ICogMS41ICsgaGVpZ2h0VGlwICsgdG9wKSB7XG4gICAgICAgICAgdG9wID0gdG9wIC0gaGVpZ2h0VGlwXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG9wID0gdG9wICsgaGVpZ2h0VGV4dCAqIDEuNVxuICAgICAgICB9XG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IHdpZHRoVGlwICsgbGVmdCkge1xuICAgICAgICAgIGxlZnQgPSB3aW5kb3cuaW5uZXJXaWR0aCAtIHdpZHRoVGlwXG4gICAgICAgIH1cbiAgICAgICAgdGlwLmNzcyh7XG4gICAgICAgICAgbGVmdDogbGVmdCArICdweCcsXG4gICAgICAgICAgdG9wOiB0b3AgKyAncHgnXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdG9vbFRpcExlYXZlIChldmVudCkge1xuICAgIGlmIChnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIGNsZWFyVGltZW91dChnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIpXG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBudWxsXG4gICAgICAkKCcjaGVscC10b29sdGlwJykucmVtb3ZlKClcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIEluaXQgZnJvbSAnLi9pbml0LmpzJ1xuaW1wb3J0ICogYXMgRGljZVNvTmljZVJlYWR5IGZyb20gJy4vZGljZS1zby1uaWNlLXJlYWR5LmpzJ1xuaW1wb3J0ICogYXMgRGljZVNvTmljZVJvbGxTdGFydCBmcm9tICcuL2RpY2Utc28tbmljZS1yb2xsLXN0YXJ0LmpzJ1xuaW1wb3J0ICogYXMgUmVhZHkgZnJvbSAnLi9yZWFkeS5qcydcbmltcG9ydCAqIGFzIFJlbmRlckFjdG9yU2hlZXQgZnJvbSAnLi9yZW5kZXItYWN0b3Itc2hlZXQuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJDaGF0TWVzc2FnZSBmcm9tICcuL3JlbmRlci1jaGF0LW1lc3NhZ2UuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJEaWFsb2cgZnJvbSAnLi9yZW5kZXItZGlhbG9nLmpzJ1xuaW1wb3J0ICogYXMgUmVuZGVySXRlbVNoZWV0IGZyb20gJy4vcmVuZGVyLWl0ZW0tc2hlZXQuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJQYXVzZSBmcm9tICcuL3JlbmRlci1wYXVzZS5qcydcblxuZXhwb3J0IGNvbnN0IENvQzdIb29rcyA9IHtcbiAgbGlzdGVuICgpIHtcbiAgICBJbml0Lmxpc3RlbigpXG4gICAgUmVhZHkubGlzdGVuKClcbiAgICBSZW5kZXJBY3RvclNoZWV0Lmxpc3RlbigpXG4gICAgUmVuZGVyQ2hhdE1lc3NhZ2UubGlzdGVuKClcbiAgICBSZW5kZXJEaWFsb2cubGlzdGVuKClcbiAgICBSZW5kZXJJdGVtU2hlZXQubGlzdGVuKClcbiAgICBSZW5kZXJQYXVzZS5saXN0ZW4oKVxuICAgIERpY2VTb05pY2VSZWFkeS5saXN0ZW4oKVxuICAgIERpY2VTb05pY2VSb2xsU3RhcnQubGlzdGVuKClcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIEhvb2tzICovXG5pbXBvcnQgeyBDb0M3VG9vbHRpcHMgfSBmcm9tICcuLi9hcHBzL3Rvb2x0aXBzLmpzJ1xuXG4vLyBpbXBvcnQgeyBDb0M3V2VsY29tZU1lc3NhZ2UgfSBmcm9tICcuLi9hcHBzL3dlbGNvbWUtbWVzc2FnZS5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uY2UoJ3JlYWR5JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdDYWxsIG9mIEN0aHVsaHUgN3RoIEVkaXRpb24gfCBSZWFkeScpXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Nob3dXZWxjb21lTWVzc2FnZScpICYmIGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAvKiogVGhpcyB3aWxsIHByb21wdCB0aGUgd2VsY29tZSBtZXNzYWdlIHdoZW4gaXQgaXMgIGZpbmlzaGVkICovXG4gICAgICAvLyBhd2FpdCBDb0M3V2VsY29tZU1lc3NhZ2UuY3JlYXRlKClcbiAgICB9XG4gICAgZ2FtZS5Db0M3VG9vbHRpcHMgPSBuZXcgQ29DN1Rvb2x0aXBzKClcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBIb29rcyAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlckFjdG9yU2hlZXQnLCBhc3luYyAoZGF0YSwgaHRtbCwgb3B0aW9ucykgPT4ge30pXG59XG4iLCIvKiBnbG9iYWwgSG9va3MgKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdyZW5kZXJDaGF0TWVzc2FnZScsICgpID0+IHt9KVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIEhvb2tzICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlckRpYWxvZycsIChkaWFsb2csIGh0bWwpID0+IHtcbiAgICBjb25zdCBmb3JtID0gaHRtbC5maW5kKCdmb3JtJylcbiAgICBpZiAoZm9ybS5pcygnI2RvY3VtZW50LWNyZWF0ZScpICYmIGZvcm0uZmluZCgnc2VsZWN0JykubGVuZ3RoICE9PSAwKSB7XG4gICAgICBjb25zdCBlbnRpdHlDcmVhdGVTZWxlY3RUYWcgPSBmb3JtLmZpbmQoXCJbbmFtZT0ndHlwZSddXCIpXG4gICAgICBjb25zdCBlbnRpdHlTb3J0ZWRMaXN0ID0gW11cbiAgICAgIGNvbnN0IHNob3dFeHBlcmltZW50YWwgPSAhIWdhbWUuc2V0dGluZ3MuZ2V0KFxuICAgICAgICAnQ29DNycsXG4gICAgICAgICdleHBlcmltZW50YWxGZWF0dXJlcydcbiAgICAgIClcbiAgICAgIGVudGl0eUNyZWF0ZVNlbGVjdFRhZy5jaGlsZHJlbigpLmVhY2goKG8sIGVudGl0eU9wdGlvbikgPT4ge1xuICAgICAgICBjb25zdCBrZXkgPSBlbnRpdHlPcHRpb24udGV4dENvbnRlbnQ/LmNhcGl0YWxpemUoKVxuICAgICAgICBpZiAoZ2FtZS5pMThuLmhhcyhgQ29DNy5FbnRpdGllcy4ke2tleX1gKSkge1xuICAgICAgICAgIGVudGl0eU9wdGlvbi50ZXh0Q29udGVudCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShgQ29DNy5FbnRpdGllcy4ke2tleX1gKVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICBzaG93RXhwZXJpbWVudGFsIHx8XG4gICAgICAgICAgIVsnY2hhc2UnLCAndmVoaWNsZSddLmluY2x1ZGVzKGVudGl0eU9wdGlvbi52YWx1ZSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgZW50aXR5U29ydGVkTGlzdC5wdXNoKGVudGl0eU9wdGlvbilcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGVudGl0eUNyZWF0ZVNlbGVjdFRhZy5lbXB0eSgpXG4gICAgICBlbnRpdHlDcmVhdGVTZWxlY3RUYWcuYXBwZW5kKFxuICAgICAgICBlbnRpdHlTb3J0ZWRMaXN0LnNvcnQoKGZpcnN0LCBzZWNvbmQpID0+XG4gICAgICAgICAgZmlyc3QuaW5uZXJUZXh0LmxvY2FsZUNvbXBhcmUoc2Vjb25kLmlubmVyVGV4dClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICAgaWYgKGVudGl0eUNyZWF0ZVNlbGVjdFRhZy52YWwoKSA9PT0gJ2FjdG9yJykge1xuICAgICAgICBlbnRpdHlDcmVhdGVTZWxlY3RUYWcudmFsKCdjaGFyYWN0ZXInKVxuICAgICAgfSBlbHNlIGlmIChlbnRpdHlDcmVhdGVTZWxlY3RUYWcudmFsKCkgPT09ICdib29rJykge1xuICAgICAgICBlbnRpdHlDcmVhdGVTZWxlY3RUYWcudmFsKCdpdGVtJylcbiAgICAgIH1cbiAgICB9XG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgSG9va3MgKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdyZW5kZXJJdGVtU2hlZXQnLCBhc3luYyAoZGF0YSwgaHRtbCwgb3B0aW9ucykgPT4ge30pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSG9va3MgKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdyZW5kZXJQYXVzZScsIGFzeW5jIChkYXRhLCBodG1sLCBvcHRpb25zKSA9PiB7XG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ292ZXJyaWRlR2FtZUFydHdvcmsnKSkge1xuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFBhdXNlSW1hZ2UnKS50b0xvd2VyQ2FzZSgpID09PSAnbnVsbCcpIHtcbiAgICAgICAgaHRtbC5maW5kKCdpbWcnKS5yZW1vdmUoKVxuICAgICAgfVxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFBhdXNlSW1hZ2UnKSAhPT0gJycpIHtcbiAgICAgICAgaHRtbC5maW5kKCdpbWcnKS5hdHRyKCdzcmMnLCBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRQYXVzZUltYWdlJykpXG4gICAgICB9XG5cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRQYXVzZVRleHQnKSAhPT0gJycpIHtcbiAgICAgICAgaHRtbC5maW5kKCdoMycpLmh0bWwoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0UGF1c2VUZXh0JykpXG4gICAgICB9XG4gICAgfVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIEhvb2tzICovXG5pbXBvcnQgeyBDb0M3RGVjYWRlckRTTkZhY2VzIH0gZnJvbSAnLi4vYXBwcy9kZWNhZGVyLWRzbi1mYWNlcy5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uY2UoJ2RpY2VTb05pY2VSZWFkeScsIGRpY2UzZCA9PiB7XG4gICAgZGljZTNkLmFkZERpY2VQcmVzZXQoe1xuICAgICAgdHlwZTogJ2R0JyxcbiAgICAgIGxhYmVsczogWycxMCcsICcyMCcsICczMCcsICc0MCcsICc1MCcsICc2MCcsICc3MCcsICc4MCcsICc5MCcsICcwMCddLFxuICAgICAgZm9udFNjYWxlOiAwLjc1LFxuICAgICAgc3lzdGVtOiAnc3RhbmRhcmQnXG4gICAgfSlcbiAgICBkaWNlM2QuYWRkRGljZVByZXNldCh7XG4gICAgICB0eXBlOiAnZG8nLFxuICAgICAgbGFiZWxzOiBbJzEwJywgJzIwJywgJzMwJywgJzQwJywgJzUwJywgJzYwJywgJzcwJywgJzgwJywgJzkwJywgJzAwJ10sXG4gICAgICBmb250U2NhbGU6IDAuNzUsXG4gICAgICBzeXN0ZW06ICdzdGFuZGFyZCdcbiAgICB9KVxuICAgIGdhbWUuQ29DN0RlY2FkZXJEU05GYWNlcyA9IG5ldyBDb0M3RGVjYWRlckRTTkZhY2VzKClcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBIb29rcyAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdkaWNlU29OaWNlUm9sbFN0YXJ0JywgZGljZTNkID0+IHtcbiAgICBnYW1lLkNvQzdEZWNhZGVyRFNORmFjZXMuc2V0RmFjZXMoKVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIHNvY2tldGxpYiwgdWkgKi9cbmltcG9ydCB7IENvQzdNZWxlZVRhcmdldCB9IGZyb20gJy4uL2NoYXQvY29tYmF0L21lbGVlLXRhcmdldC5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIENvQzdTb2NrZXQgKCkge1xuICBnYW1lLkNvQzdzb2NrZXQgPSBzb2NrZXRsaWIucmVnaXN0ZXJTeXN0ZW0oJ0NvQzcnKVxuICBnYW1lLkNvQzdzb2NrZXQucmVnaXN0ZXIoJ2dtY3JlYXRlbWVzc2FnZWFzJywgZ21jcmVhdGVtZXNzYWdlYXMpXG4gIGdhbWUuQ29DN3NvY2tldC5yZWdpc3RlcignZ210cmFkZWl0ZW10bycsIGdtdHJhZGVpdGVtdG8pXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdtY3JlYXRlbWVzc2FnZWFzIChkYXRhKSB7XG4gIGNvbnN0IG1lbGVlVGFyZ2V0ID0gbmV3IENvQzdNZWxlZVRhcmdldChcbiAgICBkYXRhLnRhcmdldEtleSxcbiAgICBkYXRhLm1lc3NhZ2VJZCxcbiAgICBkYXRhLmZhc3RGb3J3YXJkXG4gIClcbiAgbWVsZWVUYXJnZXQuaW5pdGlhdG9yS2V5ID0gZGF0YS5hY3RvcktleVxuICBjb25zdCBtZXNzYWdlID0gYXdhaXQgbWVsZWVUYXJnZXQuY3JlYXRlQ2hhdENhcmQoKVxuICByZXR1cm4gbWVzc2FnZVxufVxuXG5hc3luYyBmdW5jdGlvbiBnbXRyYWRlaXRlbXRvIChkYXRhKSB7XG4gIHRyeSB7XG4gICAgbGV0IGFjdG9yXG4gICAgaWYgKGRhdGEuc2NlbmUpIHtcbiAgICAgIGFjdG9yID0gZ2FtZS5zY2VuZXMuZ2V0KGRhdGEuc2NlbmUpLnRva2Vucy5nZXQoZGF0YS5hY3RvckZyb20pLmFjdG9yXG4gICAgfSBlbHNlIHtcbiAgICAgIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KGRhdGEuYWN0b3JGcm9tKVxuICAgIH1cbiAgICBjb25zdCBpdGVtID0gYWN0b3IuaXRlbXMuZ2V0KGRhdGEuaXRlbSlcbiAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgZ2FtZS5hY3RvcnNcbiAgICAgIC5nZXQoZGF0YS5hY3RvclRvKVxuICAgICAgLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2l0ZW0udG9KU09OKCldKVxuICAgIGlmIChjcmVhdGVkKSB7XG4gICAgICBhY3Rvci5kZWxldGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtpdGVtLmlkXSlcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGUpXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgcmV0dXJuIHRydWVcbn1cbiIsIi8qIGdsb2JhbCAkLCBDb21iYXQsIENPTkZJRywgQ09OU1QsIGZyb21VdWlkLCBnYW1lLCBIb29rcywgaXNOZXdlclZlcnNpb24sIHRpbnlNQ0UgKi9cbmltcG9ydCB7IENvQzdOUENTaGVldCB9IGZyb20gJy4vYWN0b3JzL3NoZWV0cy9ucGMtc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3Q3JlYXR1cmVTaGVldCB9IGZyb20gJy4vYWN0b3JzL3NoZWV0cy9jcmVhdHVyZS1zaGVldC5qcydcbmltcG9ydCB7IENvQzdDaGFyYWN0ZXJTaGVldCB9IGZyb20gJy4vYWN0b3JzL3NoZWV0cy9jaGFyYWN0ZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4vY2hhdC5qcydcbmltcG9ydCB7IENvQzdDb21iYXQsIHJvbGxJbml0aWF0aXZlIH0gZnJvbSAnLi9jb21iYXQuanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi9jb25maWcuanMnXG5pbXBvcnQgeyBVcGRhdGVyIH0gZnJvbSAnLi91cGRhdGVyLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgQ29DN1BhcnNlciB9IGZyb20gJy4vYXBwcy9wYXJzZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN01lbnUgfSBmcm9tICcuL21lbnUuanMnXG5pbXBvcnQgeyBPcHBvc2VkQ2hlY2tDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL29wcG9zZWQtcm9sbC5qcydcbmltcG9ydCB7IENvbWJpbmVkQ2hlY2tDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL2NvbWJpbmVkLXJvbGwuanMnXG5pbXBvcnQgeyBEYW1hZ2VDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL2RhbWFnZS5qcydcbmltcG9ydCB7IENvQzdDYW52YXMgfSBmcm9tICcuL2FwcHMvY2FudmFzLmpzJ1xuaW1wb3J0IHsgQ29DN1NldHRpbmdzRGlyZWN0b3J5IH0gZnJvbSAnLi9zZXR0aW5ncy1kaXJlY3RvcnkuanMnXG5pbXBvcnQgeyBDb0M3Q29tcGVuZGl1bURpcmVjdG9yeSB9IGZyb20gJy4vY29tcGVuZGl1bS1kaXJlY3RvcnkuanMnXG5pbXBvcnQgeyBDb0M3QWN0b3JEaXJlY3RvcnkgfSBmcm9tICcuL2FjdG9yLWRpcmVjdG9yeS5qcydcbmltcG9ydCB7IENvQzdIb29rcyB9IGZyb20gJy4vaG9va3MvaW5kZXguanMnXG5pbXBvcnQgKiBhcyBEaWNlQm90IGZyb20gJy4vZGljZWJvdC5qcydcbmltcG9ydCAnLi4vc3R5bGVzL3N5c3RlbS9pbmRleC5sZXNzJ1xuaW1wb3J0IHsgQ29DN0NoYXNlU2hlZXQgfSBmcm9tICcuL2l0ZW1zL3NoZWV0cy9jaGFzZS5qcydcbmltcG9ydCB7IENvQzdTb2NrZXQgfSBmcm9tICcuL2hvb2tzL3NvY2tldC5qcydcbmltcG9ydCB7IERyb3BBY3RvclNoZWV0RGF0YSB9IGZyb20gJy4vaG9va3MvZHJvcC1hY3Rvci1zaGVldC1kYXRhLmpzJ1xuaW1wb3J0IHsgVGVzdENhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvdGVzdC5qcydcbmltcG9ydCB7IGluaXRFQ0MgfSBmcm9tICcuL2NvbW1vbi9jaGF0Y2FyZGxpYi9zcmMvY2hhdGNhcmRsaWIuanMnXG5cbmlmIChDT05TVC5DT01QQVRJQklMSVRZX01PREVTICYmICFpc05ld2VyVmVyc2lvbihnYW1lLnZlcnNpb24sICcxMC4yNjInKSkge1xuICAvLyBoaWRlIGNvbXBhdGliaWxpdHkgd2FybmluZ3Mgd2hpbGUgc3RpbGwgaW4gdGVzdGluZyB2MTAgYW5kIHN1cHBvcnRpbmcgdjlcbiAgQ09ORklHLmNvbXBhdGliaWxpdHkubW9kZSA9IENPTlNULkNPTVBBVElCSUxJVFlfTU9ERVMuU0lMRU5UXG59XG5cbkhvb2tzLm9uKCdyZW5kZXJTZXR0aW5nc0NvbmZpZycsIChhcHAsIGh0bWwsIG9wdGlvbnMpID0+IHtcbiAgY29uc3Qgc3lzdGVtVGFiID0gJChhcHAuZm9ybSkuZmluZCgnLnRhYltkYXRhLXRhYj1zeXN0ZW1dJylcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuZGlzcGxheUluaXREaWNlc10nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlSW5pdGlhdGl2ZScpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuc3RhbmJ5R01Sb2xsc10nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlUm9sbCcpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuZGlzcGxheUFjdG9yT25DYXJkXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVDaGF0Q2FyZHMnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLmVuYWJsZVN0YXR1c0ljb25zXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVTY2VuZScpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwub3ZlcnJpZGVHYW1lQXJ0d29ya10nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlR2FtZUFydHdvcmsnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLmRpc3BsYXlQbGF5ZXJOYW1lT25TaGVldF0nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlU2hlZXQnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLmRpc3JlZ2FyZFVzZVBlclJvdW5kXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVXZWFwb24nKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLnN5bmNEaWNlM2RdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZURpY2VTb05pY2UnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLmRlYnVnbW9kZV0nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlRGV2ZWxvcGVyRGVidWcnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdzZWxlY3RbbmFtZT1Db0M3XFxcXC5ib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVSb2xsVGFibGUnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG59KVxuXG5Ib29rcy5vbmNlKCdpbml0JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICBnYW1lLkNvQzcgPSB7XG4gICAgbWFjcm9zOiB7XG4gICAgICBza2lsbENoZWNrOiBDb0M3VXRpbGl0aWVzLnNraWxsQ2hlY2tNYWNybyxcbiAgICAgIHdlYXBvbkNoZWNrOiBDb0M3VXRpbGl0aWVzLndlYXBvbkNoZWNrTWFjcm8sXG4gICAgICBjaGVjazogQ29DN1V0aWxpdGllcy5jaGVja01hY3JvXG4gICAgfSxcbiAgICBjYXJkczoge1xuICAgICAgRGFtYWdlQ2FyZDogRGFtYWdlQ2FyZFxuICAgIH1cbiAgfVxuICBDb21iYXQucHJvdG90eXBlLnJvbGxJbml0aWF0aXZlID0gcm9sbEluaXRpYXRpdmVcbn0pXG5cbmluaXRFQ0MoVGVzdENhcmQpIC8vIFRPIEJFIFJFTU9WRUQgRk9SIFBST0RcblxuSG9va3Mub24oJ3JlbmRlckNvbWJhdFRyYWNrZXInLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICBDb0M3Q29tYmF0LnJlbmRlckNvbWJhdFRyYWNrZXIoYXBwLCBodG1sLCBkYXRhKVxuKVxuXG5EaWNlQm90Lmxpc3RlbigpXG5Db0M3SG9va3MubGlzdGVuKClcblxuSG9va3Mub25jZSgnc29ja2V0bGliLnJlYWR5JywgQ29DN1NvY2tldClcblxuSG9va3Mub25jZSgnc2V0dXAnLCBmdW5jdGlvbiAoKSB7XG4gIC8vIExvY2FsaXplIENPTkZJRyBvYmplY3RzIG9uY2UgdXAtZnJvbnRcbiAgY29uc3QgdG9Mb2NhbGl6ZSA9IFtcbiAgICAnc3BlbGxQcm9wZXJ0aWVzJyxcbiAgICAnYm9va1R5cGUnLFxuICAgICd0YWxlbnRUeXBlJyxcbiAgICAnb2NjdXBhdGlvblByb3BlcnRpZXMnLFxuICAgICdzdGF0dXNUeXBlJ1xuICBdXG5cbiAgZm9yIChjb25zdCBvIG9mIHRvTG9jYWxpemUpIHtcbiAgICBjb25zdCBsb2NhbGl6ZWQgPSBPYmplY3QuZW50cmllcyhDT0M3W29dKS5tYXAoZSA9PiB7XG4gICAgICByZXR1cm4gW2VbMF0sIGdhbWUuaTE4bi5sb2NhbGl6ZShlWzFdKV1cbiAgICB9KVxuICAgIENPQzdbb10gPSBsb2NhbGl6ZWQucmVkdWNlKChvYmosIGUpID0+IHtcbiAgICAgIG9ialtlWzBdXSA9IGVbMV1cbiAgICAgIHJldHVybiBvYmpcbiAgICB9LCB7fSlcbiAgfVxuXG4gIGxldCBlZmZlY3RJbmRleCA9IENPTkZJRy5zdGF0dXNFZmZlY3RzLmZpbmRJbmRleChcbiAgICB0ID0+IHQuaWQgPT09IENPQzcuc3RhdHVzLmRlYWRcbiAgKVxuICBpZiAoZWZmZWN0SW5kZXggIT09IC0xKSB7XG4gICAgQ09ORklHLnN0YXR1c0VmZmVjdHNbZWZmZWN0SW5kZXhdLmljb24gPVxuICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvdG9tYnN0b25lLnN2ZydcbiAgfVxuICBlZmZlY3RJbmRleCA9IENPTkZJRy5zdGF0dXNFZmZlY3RzLmZpbmRJbmRleChcbiAgICB0ID0+IHQuaWQgPT09IENPQzcuc3RhdHVzLnVuY29uc2Npb3VzXG4gIClcbiAgaWYgKGVmZmVjdEluZGV4ICE9PSAtMSkge1xuICAgIENPTkZJRy5zdGF0dXNFZmZlY3RzW2VmZmVjdEluZGV4XS5pY29uID1cbiAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2tub2NrZWQtb3V0LXN0YXJzLnN2ZydcbiAgfVxuICBDT05GSUcuc3RhdHVzRWZmZWN0cy51bnNoaWZ0KFxuICAgIHtcbiAgICAgIGlkOiBDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSxcbiAgICAgIGxhYmVsOiAnQ29DNy5Cb3V0T2ZNYWRuZXNzTmFtZScsXG4gICAgICBpY29uOiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9oYW5naW5nLXNwaWRlci5zdmcnXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmUsXG4gICAgICBsYWJlbDogJ0NvQzcuSW5zYW5pdHlOYW1lJyxcbiAgICAgIGljb246ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3RlbnRhY2xlcy1za3VsbC5zdmcnXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMsXG4gICAgICBsYWJlbDogJ0NvQzcuQ3JpdGljYWxXb3VuZHMnLFxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvYXJtLXNsaW5nLnN2ZydcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBDT0M3LnN0YXR1cy5keWluZyxcbiAgICAgIGxhYmVsOiAnQ29DNy5EeWluZycsXG4gICAgICBpY29uOiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9oZWFydC1iZWF0cy5zdmcnXG4gICAgfVxuICApXG59KVxuXG5Ib29rcy5vbignY3JlYXRlQWN0aXZlRWZmZWN0JywgKGRhdGEsIG9wdGlvbnMsIHVzZXJJZCkgPT4ge1xuICBpZiAoXG4gICAgZ2FtZS51c2VySWQgPT09IHVzZXJJZCAmJlxuICAgIHR5cGVvZiBkYXRhLmRhdGEuZmxhZ3MuY29yZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICB0eXBlb2YgZGF0YS5kYXRhLmZsYWdzLmNvcmUuc3RhdHVzSWQgIT09ICd1bmRlZmluZWQnXG4gICkge1xuICAgIHN3aXRjaCAoZGF0YS5kYXRhLmZsYWdzLmNvcmUuc3RhdHVzSWQpIHtcbiAgICAgIGNhc2UgQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmU6XG4gICAgICBjYXNlIENPQzcuc3RhdHVzLnVuY29uc2Npb3VzOlxuICAgICAgY2FzZSBDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kczpcbiAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZHlpbmc6XG4gICAgICBjYXNlIENPQzcuc3RhdHVzLnByb25lOlxuICAgICAgY2FzZSBDT0M3LnN0YXR1cy5kZWFkOlxuICAgICAgICBkYXRhLnBhcmVudC5zZXRDb25kaXRpb24oZGF0YS5kYXRhLmZsYWdzLmNvcmUuc3RhdHVzSWQsIHtcbiAgICAgICAgICBmb3JjZVZhbHVlOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgcmVhbFRpbWUgPSBkYXRhLmRhdGEuZmxhZ3MuQ29DNz8ucmVhbFRpbWVcbiAgICAgICAgICBsZXQgZHVyYXRpb24gPSBudWxsXG4gICAgICAgICAgaWYgKHJlYWxUaW1lID09PSB0cnVlKSB7XG4gICAgICAgICAgICBkdXJhdGlvbiA9IGRhdGEuZGF0YS5kdXJhdGlvbj8ucm91bmRzXG4gICAgICAgICAgfSBlbHNlIGlmIChyZWFsVGltZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGR1cmF0aW9uID0gZGF0YS5kYXRhLmR1cmF0aW9uPy5zZWNvbmRzXG4gICAgICAgICAgICBpZiAoIWlzTmFOKGR1cmF0aW9uKSkge1xuICAgICAgICAgICAgICBkdXJhdGlvbiA9IE1hdGguZmxvb3IoZHVyYXRpb24gLyAzNjAwKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBkYXRhLnBhcmVudC5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUsIHtcbiAgICAgICAgICAgIGZvcmNlVmFsdWU6IHRydWUsXG4gICAgICAgICAgICByZWFsVGltZTogcmVhbFRpbWUsXG4gICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb25cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG59KVxuXG5Ib29rcy5vbignZGVsZXRlQWN0aXZlRWZmZWN0JywgKGRhdGEsIG9wdGlvbnMsIHVzZXJJZCkgPT4ge1xuICBpZiAoXG4gICAgZ2FtZS51c2VySWQgPT09IHVzZXJJZCAmJlxuICAgIHR5cGVvZiBkYXRhLmRhdGEuZmxhZ3MuY29yZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICB0eXBlb2YgZGF0YS5kYXRhLmZsYWdzLmNvcmUuc3RhdHVzSWQgIT09ICd1bmRlZmluZWQnXG4gICkge1xuICAgIHN3aXRjaCAoZGF0YS5kYXRhLmZsYWdzLmNvcmUuc3RhdHVzSWQpIHtcbiAgICAgIGNhc2UgQ09DNy5zdGF0dXMudGVtcG9JbnNhbmU6XG4gICAgICBjYXNlIENPQzcuc3RhdHVzLmluZGVmSW5zYW5lOlxuICAgICAgY2FzZSBDT0M3LnN0YXR1cy51bmNvbnNjaW91czpcbiAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XG4gICAgICBjYXNlIENPQzcuc3RhdHVzLmR5aW5nOlxuICAgICAgY2FzZSBDT0M3LnN0YXR1cy5wcm9uZTpcbiAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgZGF0YS5wYXJlbnQudW5zZXRDb25kaXRpb24oZGF0YS5kYXRhLmZsYWdzLmNvcmUuc3RhdHVzSWQsIHtcbiAgICAgICAgICBmb3JjZVZhbHVlOiB0cnVlXG4gICAgICAgIH0pXG4gICAgfVxuICB9XG59KVxuXG5Ib29rcy5vbignaG90YmFyRHJvcCcsIGFzeW5jIChiYXIsIGRhdGEsIHNsb3QpID0+XG4gIENvQzdVdGlsaXRpZXMuY3JlYXRlTWFjcm8oYmFyLCBkYXRhLCBzbG90KVxuKVxuXG5Ib29rcy5vbigncmVuZGVyQ2hhdExvZycsIChhcHAsIGh0bWwsIGRhdGEpID0+XG4gIENvQzdDaGF0LmNoYXRMaXN0ZW5lcnMoYXBwLCBodG1sLCBkYXRhKVxuKVxuSG9va3Mub24oJ3JlbmRlckNoYXRNZXNzYWdlJywgKGFwcCwgaHRtbCwgZGF0YSkgPT5cbiAgQ29DN0NoYXQucmVuZGVyTWVzc2FnZUhvb2soYXBwLCBodG1sLCBkYXRhKVxuKVxuSG9va3Mub24oJ3VwZGF0ZUNoYXRNZXNzYWdlJywgKGNoYXRNZXNzYWdlLCBjaGF0RGF0YSwgZGlmZiwgc3BlYWtlcikgPT5cbiAgQ29DN0NoYXQub25VcGRhdGVDaGF0TWVzc2FnZShjaGF0TWVzc2FnZSwgY2hhdERhdGEsIGRpZmYsIHNwZWFrZXIpXG4pXG5cbkhvb2tzLm9uKCdyZWFkeScsIGFzeW5jICgpID0+IHtcbiAgYXdhaXQgVXBkYXRlci5jaGVja0ZvclVwZGF0ZSgpXG5cbiAgLy8gZ2FtZS5Db0M3Lm1lbnVzID0gbmV3IENvQzdNZW51KCk7XG5cbiAgYWN0aXZhdGVHbG9iYWxMaXN0ZW5lcigpXG5cbiAgLy8gc2V0R2xvYmFsQ3NzVmFyKClcblxuICBjb25maWd1cmVUaW55TUNFKClcblxuICBnYW1lLkNvQzcuc2tpbGxMaXN0ID0gYXdhaXQgZ2FtZS5wYWNrcy5nZXQoJ0NvQzcuc2tpbGxzJyk/LmdldERvY3VtZW50cygpXG5cbiAgZ2FtZS5zb2NrZXQub24oJ3N5c3RlbS5Db0M3JywgYXN5bmMgZGF0YSA9PiB7XG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ3VwZGF0ZUNoYXInKSBDb0M3VXRpbGl0aWVzLnVwZGF0ZUNoYXJTaGVldHMoKVxuXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBpZiAoT3Bwb3NlZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnLnR5cGUgPT09IGRhdGEudHlwZSkge1xuICAgICAgICBPcHBvc2VkQ2hlY2tDYXJkLmRpc3BhdGNoKGRhdGEpXG4gICAgICB9XG5cbiAgICAgIGlmIChDb21iaW5lZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnLnR5cGUgPT09IGRhdGEudHlwZSkge1xuICAgICAgICBDb21iaW5lZENoZWNrQ2FyZC5kaXNwYXRjaChkYXRhKVxuICAgICAgfVxuXG4gICAgICBpZiAoZGF0YS50eXBlID09PSAnaW52b2tlJykge1xuICAgICAgICBjb25zdCBpdGVtID0gYXdhaXQgZnJvbVV1aWQoZGF0YS5pdGVtKVxuICAgICAgICBpdGVtW2RhdGEubWV0aG9kXShkYXRhLmRhdGEpXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIC8vIFwiU0VUVElOR1MuQm91dE9mTWFkbmVzc1Bob2JpYXNJbmRleFwiOiBcIlBob2JpYXMgaW5kZXhcIixcbiAgLy8gXCJTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4SGludFwiOiBcIlRoZSBpbmRleCAocm9sbCByZXN1bHQpIHRoYXQgd2lsbCB0cmlnZ2VyIGEgcm9sbCBpbiB0aGUgcGhvYmlhcyB0YWJsZVwiLFxuICAvLyBcIlNFVFRJTkdTLkJvdXRPZk1hZG5lc3NNYW5pYXNJbmRleFwiOiBcIk1hbmlhcyBpbmRleFwiLFxuICAvLyBcIlNFVFRJTkdTLkJvdXRPZk1hZG5lc3NNYW5pYXNJbmRleEhpbnRcIjogXCJUaGUgaW5kZXggKHJvbGwgcmVzdWx0KSB0aGF0IHdpbGwgdHJpZ2dlciBhIHJvbGwgaW4gdGhlIG1hbmlhcyB0YWJsZVwiLFxuICAvLyBcIlNFVFRJTkdTLlNhbXBsZVBob2JpYXNUYWJsZVwiOiBcIlNhbXBsZSBwaG9iaWFzIHRhYmxlXCIsXG4gIC8vIFwiU0VUVElOR1MuU2FtcGxlTWFuaWFzVGFibGVcIjogXCJTYW1wbGUgTWFuaWFzIHRhYmxlXCIsXG5cbiAgZnVuY3Rpb24gX3RhYmxlU2V0dGluZ3NDaGFuZ2VkICh0YWJsZSwgaWQpIHtcbiAgICBpZiAoaWQgPT09ICdub25lJykgZ2FtZS5Db0M3LnRhYmxlc1t0YWJsZV0gPSBudWxsXG4gICAgZWxzZSBnYW1lLkNvQzcudGFibGVzW3RhYmxlXSA9IGdhbWUudGFibGVzLmdldChpZClcbiAgfVxuXG4gIC8vIGZ1bmN0aW9uIF90YWJsZUluZGV4Q2hhbmdlZCggdGFibGUsIGluZGV4KXtcbiAgLy8gIGdhbWUuQ29DNy50YWJsZXNbdGFibGVdPWluZGV4O1xuICAvLyB9XG5cbiAgY29uc3QgdGFibGVDaG9pY2UgPSB7IG5vbmU6ICdTRVRUSU5HUy5MZXRLZWVwZXJEZWNpZGUnIH1cbiAgZm9yIChjb25zdCB0IG9mIGdhbWUudGFibGVzKSB7XG4gICAgdGFibGVDaG9pY2VbdC5kYXRhLl9pZF0gPSB0LmRhdGEubmFtZVxuICB9XG5cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogJ25vbmUnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB0YWJsZUNob2ljZSxcbiAgICBvbkNoYW5nZTogaWQgPT4gX3RhYmxlU2V0dGluZ3NDaGFuZ2VkKCdib3V0T2ZNYWRuZXNzX1N1bW1hcnknLCBpZClcbiAgfSlcblxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NSZWFsVGltZVRhYmxlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUmVhbFRpbWVUYWJsZScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdub25lJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczogdGFibGVDaG9pY2UsXG4gICAgb25DaGFuZ2U6IGlkID0+IF90YWJsZVNldHRpbmdzQ2hhbmdlZCgnYm91dE9mTWFkbmVzc19SZWFsVGltZScsIGlkKVxuICB9KVxuXG4gIC8vIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1Bob2JpYXNJbmRleCcse1xuICAvLyAgbmFtZTogJ1NFVFRJTkdTLkJvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXgnLFxuICAvLyAgaGludDogJ1NFVFRJTkdTLkJvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXhIaW50JyxcbiAgLy8gIHNjb3BlOiAnd29ybGQnLFxuICAvLyAgY29uZmlnOiB0cnVlLFxuICAvLyAgZGVmYXVsdDogOSxcbiAgLy8gIHR5cGU6IE51bWJlcixcbiAgLy8gIG9uQ2hhbmdlOiAgaWQgPT4gX3RhYmxlSW5kZXhDaGFuZ2VkKCAncGhvYmlhc0luZGV4JywgaWQpXG4gIC8vIH0pO1xuXG4gIC8vIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc01hbmlhc0luZGV4Jyx7XG4gIC8vICBuYW1lOiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc01hbmlhc0luZGV4JyxcbiAgLy8gIGhpbnQ6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzTWFuaWFzSW5kZXhIaW50JyxcbiAgLy8gIHNjb3BlOiAnd29ybGQnLFxuICAvLyAgY29uZmlnOiB0cnVlLFxuICAvLyAgZGVmYXVsdDogMTAsXG4gIC8vICB0eXBlOiBOdW1iZXIsXG4gIC8vICBvbkNoYW5nZTogIGlkID0+IF90YWJsZUluZGV4Q2hhbmdlZCggJ21hbmlhc0luZGV4JywgaWQpXG4gIC8vIH0pO1xuXG4gIC8vIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc2FtcGxlUGhvYmlhc1RhYmxlJyx7XG4gIC8vICBuYW1lOiAnU0VUVElOR1MuU2FtcGxlUGhvYmlhc1RhYmxlJyxcbiAgLy8gIHNjb3BlOiAnd29ybGQnLFxuICAvLyAgY29uZmlnOiB0cnVlLFxuICAvLyAgZGVmYXVsdDogJ25vbmUnLFxuICAvLyAgdHlwZTogU3RyaW5nLFxuICAvLyAgY2hvaWNlczogdGFibGVDaG9pY2UsXG4gIC8vICBvbkNoYW5nZTogIGlkID0+IF90YWJsZVNldHRpbmdzQ2hhbmdlZCggJ3Bob2JpYXMnLCBpZClcbiAgLy8gfSk7XG5cbiAgLy8gZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzYW1wbGVNYW5pYXNUYWJsZScse1xuICAvLyAgbmFtZTogJ1NFVFRJTkdTLlNhbXBsZU1hbmlhc1RhYmxlJyxcbiAgLy8gIHNjb3BlOiAnd29ybGQnLFxuICAvLyAgY29uZmlnOiB0cnVlLFxuICAvLyAgZGVmYXVsdDogJ25vbmUnLFxuICAvLyAgdHlwZTogU3RyaW5nLFxuICAvLyAgY2hvaWNlczogdGFibGVDaG9pY2UsXG4gIC8vICBvbkNoYW5nZTogIGlkID0+IF90YWJsZVNldHRpbmdzQ2hhbmdlZCggJ21hbmlhcycsIGlkKVxuICAvLyB9KTtcblxuICBnYW1lLkNvQzcudGFibGVzID0ge1xuICAgIGJvdXRPZk1hZG5lc3NfU3VtbWFyeTpcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NTdW1tYXJ5VGFibGUnKSA9PT0gJ25vbmUnXG4gICAgICAgID8gbnVsbFxuICAgICAgICA6IGdhbWUudGFibGVzLmdldChcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJylcbiAgICAgICAgKSxcbiAgICBib3V0T2ZNYWRuZXNzX1JlYWxUaW1lOlxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnKSA9PT0gJ25vbmUnXG4gICAgICAgID8gbnVsbFxuICAgICAgICA6IGdhbWUudGFibGVzLmdldChcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzUmVhbFRpbWVUYWJsZScpXG4gICAgICAgIClcbiAgICAvLyBtYW5pYXNJbmRleDogZ2Uuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXgnKSxcbiAgICAvLyBwaG9iaWFzSW5kZXg6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NNYW5pYXNJbmRleCcpLFxuICAgIC8vIHBob2JpYXM6ICgnbm9uZScgPT0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2FtcGxlUGhvYmlhc1RhYmxlJykpP251bGw6Z2FtZS50YWJsZXMuZ2V0KGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3NhbXBsZVBob2JpYXNUYWJsZScpKSxcbiAgICAvLyBtYW5pYXM6ICgnbm9uZScgPT0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2FtcGxlTWFuaWFzVGFibGUnKSk/bnVsbDpnYW1lLnRhYmxlcy5nZXQoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2FtcGxlTWFuaWFzVGFibGUnKSksXG4gIH1cbn0pXG5cbi8vIEhvb2tzLm9uKCdwcmVDcmVhdGVBY3RvcicsIChjcmVhdGVEYXRhKSA9PiBDb0NBY3Rvci5pbml0VG9rZW4oIGNyZWF0ZURhdGEpKTtcblxuSG9va3Mub24oXG4gICdyZW5kZXJDb0M3Q2hhc2VTaGVldCcsXG4gIC8qKiBhc3luYyAqLyAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICAgIC8qKiBhd2FpdCAqLyBDb0M3Q2hhc2VTaGVldC5zZXRTY3JvbGwoYXBwLCBodG1sLCBkYXRhKVxuKVxuXG5Ib29rcy5vbignY2xvc2VDb0M3Q2hhc2VTaGVldCcsIChhcHAsIGh0bWwpID0+XG4gIENvQzdDaGFzZVNoZWV0Lm9uQ2xvc2UoYXBwLCBodG1sKVxuKVxuXG4vLyBDYWxsZWQgb24gY2xvc2luZyBhIGNoYXJhY3RlciBzaGVldCB0byBsb2NrIGl0IG9uIGdldHRpbmcgaXQgdG8gZGlzcGxheSB2YWx1ZXNcbkhvb2tzLm9uKCdjbG9zZUFjdG9yU2hlZXQnLCBjaGFyYWN0ZXJTaGVldCA9PiBjaGFyYWN0ZXJTaGVldC5vbkNsb3NlU2hlZXQoKSlcbkhvb2tzLm9uKCdyZW5kZXJDb0M3Q3JlYXR1cmVTaGVldCcsIChhcHAsIGh0bWwsIGRhdGEpID0+XG4gIENvQzdDcmVhdHVyZVNoZWV0LmZvcmNlQXV0byhhcHAsIGh0bWwsIGRhdGEpXG4pXG5Ib29rcy5vbigncmVuZGVyQ29DN05QQ1NoZWV0JywgKGFwcCwgaHRtbCwgZGF0YSkgPT5cbiAgQ29DN05QQ1NoZWV0LmZvcmNlQXV0byhhcHAsIGh0bWwsIGRhdGEpXG4pXG4vLyBIb29rcy5vbigndXBkYXRlQWN0b3InLCAoYWN0b3IsIGRhdGFVcGRhdGUpID0+IENvQ0FjdG9yLnVwZGF0ZUFjdG9yKCBhY3RvciwgZGF0YVVwZGF0ZSkpO1xuLy8gSG9va3Mub24oJ3VwZGF0ZVRva2VuJywgKHNjZW5lLCB0b2tlbiwgZGF0YVVwZGF0ZSkgPT4gQ29DQWN0b3IudXBkYXRlVG9rZW4oIHNjZW5lLCB0b2tlbiwgZGF0YVVwZGF0ZSkpO1xuXG5Ib29rcy5vbignY2hhdE1lc3NhZ2UnLCBDb0M3VXRpbGl0aWVzLlBhcnNlQ2hhdEVudHJ5KVxuLy8gSG9va3Mub24oJ3ByZUNyZWF0ZVRva2VuJywgKCBzY2VuZSwgYWN0b3IsIG9wdGlvbnMsIGlkKSA9PiBDb0NBY3Rvci5wcmVDcmVhdGVUb2tlbiggc2NlbmUsIGFjdG9yLCBvcHRpb25zLCBpZCkpXG4vLyBIb29rcy5vbignY3JlYXRlVG9rZW4nLCAoIHNjZW5lLCBhY3Rvciwgb3B0aW9ucywgaWQpID0+IENvQ0FjdG9yLnByZUNyZWF0ZVRva2VuKCBzY2VuZSwgYWN0b3IsIG9wdGlvbnMsIGlkKSlcbi8vIEhvb2tzLm9uKFwicmVuZGVyQ2hhdExvZ1wiLCAoYXBwLCBodG1sLCBkYXRhKSA9PiBDb0M3SXRlbS5jaGF0TGlzdGVuZXJzKGh0bWwpKTtcblxuSG9va3Mub24oJ2dldFNjZW5lQ29udHJvbEJ1dHRvbnMnLCAoLyogY29udHJvbHMgKi8pID0+IHtcbiAgLy8gaWYoIGdhbWUudXNlci5pc0dNKXtcbiAgLy8gIGxldCBncm91cCA9IGNvbnRyb2xzLmZpbmQoYiA9PiBiLm5hbWUgPT0gJ3Rva2VuJyk7XG4gIC8vICBncm91cC50b29scy5wdXNoKHtcbiAgLy8gICAgdG9nZ2xlOiB0cnVlLFxuICAvLyAgICBpY29uIDogJ2ZhcyBmYS1hbmdsZS1kb3VibGUtdXAnLFxuICAvLyAgICBuYW1lOiAnZGV2cGhhc2UnLFxuICAvLyAgICBhY3RpdmU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcpLFxuICAvLyAgICB0aXRsZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJyk/IGdhbWUuaTE4bi5sb2NhbGl6ZSggJ0NvQzcuRGV2UGhhc2VFbmFibGVkJyk6IGdhbWUuaTE4bi5sb2NhbGl6ZSggJ0NvQzcuRGV2UGhhc2VEaXNhYmxlZCcpLFxuICAvLyAgICBvbkNsaWNrIDphc3luYyAoKSA9PiBhd2FpdCBDb0M3VXRpbGl0aWVzLnRvZ2dsZURldlBoYXNlKClcbiAgLy8gIH0pO1xuICAvLyAgZ3JvdXAudG9vbHMucHVzaCh7XG4gIC8vICAgIHRvZ2dsZTogdHJ1ZSxcbiAgLy8gICAgaWNvbiA6ICdmYXMgZmFzIGZhLXVzZXItZWRpdCcsXG4gIC8vICAgIG5hbWU6ICdjaGFyY3JlYXRlJyxcbiAgLy8gICAgYWN0aXZlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJyksXG4gIC8vICAgIHRpdGxlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJyk/IGdhbWUuaTE4bi5sb2NhbGl6ZSggJ0NvQzcuQ2hhckNyZWF0aW9uRW5hYmxlZCcpOiBnYW1lLmkxOG4ubG9jYWxpemUoICdDb0M3LkNoYXJDcmVhdGlvbkRpc2FibGVkJyksXG4gIC8vICAgIG9uQ2xpY2sgOmFzeW5jICgpID0+IGF3YWl0IENvQzdVdGlsaXRpZXMudG9nZ2xlQ2hhckNyZWF0aW9uKClcbiAgLy8gIH0pO1xuICAvLyB9XG59KVxuXG4vLyBIb29rcy5vbigncmVuZGVyU2NlbmVDb250cm9scycsICgpID0+IENvQzdVdGlsaXRpZXMudXBkYXRlQ2hhclNoZWV0cygpKTtcbi8vIEhvb2tzLm9uKCdyZW5kZXJTY2VuZU5hdmlnYXRpb24nLCAoKSA9PiBDb0M3VXRpbGl0aWVzLnVwZGF0ZUNoYXJTaGVldHMoKSk7XG5Ib29rcy5vbigncmVuZGVySXRlbVNoZWV0JywgQ29DN1BhcnNlci5QYXJzZVNoZWV0Q29udGVudClcbkhvb2tzLm9uKCdyZW5kZXJKb3VybmFsU2hlZXQnLCBDb0M3UGFyc2VyLlBhcnNlU2hlZXRDb250ZW50KVxuSG9va3Mub24oJ3JlbmRlckFjdG9yU2hlZXQnLCBDb0M3UGFyc2VyLlBhcnNlU2hlZXRDb250ZW50KVxuLy8gQ2hhdCBjb21tYW5kIHByb2Nlc3Npbmdcbi8vIEhvb2tzLm9uKCdwcmVDcmVhdGVDaGF0TWVzc2FnZScsIENvQzdQYXJzZXIuUGFyc2VNZXNzYWdlKTtcbi8vIEhvb2tzLm9uKCdjcmVhdGVDaGF0TWVzc2FnZScsIENvQzdDaGF0LmNyZWF0ZUNoYXRNZXNzYWdlSG9vayk7XG5Ib29rcy5vbigncmVuZGVyQ2hhdE1lc3NhZ2UnLCAoYXBwLCBodG1sLCBkYXRhKSA9PiB7XG4gIENvQzdDaGF0LnJlbmRlckNoYXRNZXNzYWdlSG9vayhhcHAsIGh0bWwsIGRhdGEpXG4gIENvQzdQYXJzZXIuUGFyc2VNZXNzYWdlKGFwcCwgaHRtbCwgZGF0YSlcbn0pXG4vLyBTaGVldCBjc3Mgb3B0aW9uc1xuLy8gSG9va3Mub24oJ3JlbmRlckNvQzdDaGFyYWN0ZXJTaGVldCcsIENvQzdDaGFyYWN0ZXJTaGVldC5yZW5kZXJTaGVldCk7XG5Ib29rcy5vbigncmVuZGVyQWN0b3JTaGVldCcsIENvQzdDaGFyYWN0ZXJTaGVldC5yZW5kZXJTaGVldClcbkhvb2tzLm9uKCdyZW5kZXJJdGVtU2hlZXQnLCBDb0M3Q2hhcmFjdGVyU2hlZXQucmVuZGVyU2hlZXQpXG5cbi8vIEhvb2tzLm9uKCdkcm9wQ2FudmFzRGF0YScsIENvQzdQYXJzZXIub25Ecm9wU29tZXRoaW5nKTtcbkhvb2tzLm9uKCdnZXRTY2VuZUNvbnRyb2xCdXR0b25zJywgQ29DN01lbnUuZ2V0QnV0dG9ucylcbkhvb2tzLm9uKCdyZW5kZXJTY2VuZUNvbnRyb2xzJywgQ29DN01lbnUucmVuZGVyQ29udHJvbHMpXG5cbkhvb2tzLm9uKCdkcm9wQ2FudmFzRGF0YScsIENvQzdDYW52YXMub25Ecm9wU29tZXRoaW5nKVxuXG5Ib29rcy5vbignZHJvcEFjdG9yU2hlZXREYXRhJywgRHJvcEFjdG9yU2hlZXREYXRhKVxuXG5mdW5jdGlvbiBhY3RpdmF0ZUdsb2JhbExpc3RlbmVyICgpIHtcbiAgY29uc3QgYm9keSA9ICQoJ2JvZHknKVxuICBib2R5Lm9uKCdjbGljaycsICdhLmNvYzctaW5saW5lLWNoZWNrJywgQ29DN0NoZWNrLl9vbkNsaWNrSW5saW5lUm9sbClcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgX29uTGVmdENsaWNrKVxufVxuXG4vKipcbiAqIENvbmZpZ3VyYXRpb24gb2YgVGlueU1DRSBlZGl0b3JcbiAqL1xuZnVuY3Rpb24gY29uZmlndXJlVGlueU1DRSAoKSB7XG4gIC8vIEFkZCBvbiBkcm9wIGV2ZW50IHRvIHRpbnlNQ0UgdG8gaGVuZGxlIHRoZSBsaW5rcyBkcm9wXG4gIHRpbnlNQ0UuUGx1Z2luTWFuYWdlci5hZGQoJ0NvQzdfRWRpdG9yX09uRHJvcCcsIGZ1bmN0aW9uIChlZGl0b3IpIHtcbiAgICBlZGl0b3Iub24oJ2Ryb3AnLCBldmVudCA9PiBDb0M3UGFyc2VyLm9uRWRpdG9yRHJvcChldmVudCwgZWRpdG9yKSlcbiAgfSlcblxuICAvLyBBZGQgY3VzdG9tIHBsdWdpbnMgdG8gbGlzdCBvZiBwbHVnaW5zLlxuICAvLyBDT05GSUcuVGlueU1DRS5wbHVnaW5zID0gYENvQzdfRWRpdG9yX09uSW5pdCBDb0M3X0VkaXRvcl9PbkRyb3AgJHtDT05GSUcuVGlueU1DRS5wbHVnaW5zfWBcbiAgQ09ORklHLlRpbnlNQ0UucGx1Z2lucyA9IGBDb0M3X0VkaXRvcl9PbkRyb3AgJHtDT05GSUcuVGlueU1DRS5wbHVnaW5zfWBcbiAgLy9cbiAgLy8gIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAvLyAgICAvLyBEZWZpbmUgY3NzIGFuZCBtZW51IGZvciBrZWVwZXIgb25seSBibG9ja3NcbiAgLy8gICAgQ09ORklHLlRpbnlNQ0UuY29udGVudF9jc3MucHVzaCgnL3N5c3RlbXMvQ29DNy9hc3NldHMvbWNlLmNzcycpXG4gIC8vICAgIENPTkZJRy5UaW55TUNFLnN0eWxlX2Zvcm1hdHMucHVzaCh7XG4gIC8vICAgICAgdGl0bGU6ICdDb0M3JyxcbiAgLy8gICAgICBpdGVtczogW1xuICAvLyAgICAgICAge1xuICAvLyAgICAgICAgICB0aXRsZTogJ0tlZXBlciBPbmx5JyxcbiAgLy8gICAgICAgICAgYmxvY2s6ICdzZWN0aW9uJyxcbiAgLy8gICAgICAgICAgY2xhc3NlczogJ2tlZXBlci1vbmx5JyxcbiAgLy8gICAgICAgICAgd3JhcHBlcjogdHJ1ZVxuICAvLyAgICAgICAgfVxuICAvLyAgICAgIF1cbiAgLy8gICAgfSlcbiAgLy8gIH0gZWxzZSB7XG4gIC8vICAgIC8vIFByZXZlbnQgcGxheWVyIHRvIGVkaXQgYW5kIHZpZXcgc291cmNlIGNvZGUgaWYgc2V0dGluZ3MgaXMgZGlzYWJsZWRcbiAgLy8gICAgaWYgKCFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdlbmFibGVQbGF5ZXJTb3VyY2VDb2RlJykpXG4gIC8vICAgICAgQ09ORklHLlRpbnlNQ0UudG9vbGJhciA9IENPTkZJRy5UaW55TUNFLnRvb2xiYXIucmVwbGFjZSgnIGNvZGUnLCAnJylcbiAgLy8gICAgLy8gSGlkZSBrZWVwZXIgb25seSBibG9ja3MgdG8gcGxheWVyc1xuICAvLyAgICBDT05GSUcuVGlueU1DRS5jb250ZW50X3N0eWxlID0gJy5rZWVwZXItb25seSB7ZGlzcGxheTogbm9uZX0nXG4gIC8vICB9XG59XG5cbmZ1bmN0aW9uIF9vbkxlZnRDbGljayAoZXZlbnQpIHtcbiAgcmV0dXJuIGV2ZW50LnNoaWZ0S2V5XG59XG5cbkNPTkZJRy51aS5zZXR0aW5ncyA9IENvQzdTZXR0aW5nc0RpcmVjdG9yeVxuQ09ORklHLnVpLmNvbXBlbmRpdW0gPSBDb0M3Q29tcGVuZGl1bURpcmVjdG9yeVxuQ09ORklHLnVpLmFjdG9ycyA9IENvQzdBY3RvckRpcmVjdG9yeVxuIiwiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBnYW1lLCBIb29rcywgUm9sbCwgdWkgKi9cblxuLyoqXG4gKkNhbGxvZkN0aHVsaHUoN3RoRWQuKSBEZWZpbmUgeW91ciBvd24gY29tbWFuZHNcbiAqSGVyZSwgd2UgcmVjZWl2ZSB0aGUgY2hhdCBNZXNzYWdlcyBhbmQgZGV0ZXJtaW5lIGVhY2ggY29tbWFuZC5cbiAqWy9DQ11EZWZpbmUgYSBjb21tYW5kIHRvIGp1ZGdlIGEgbm9ybWFsIGRpY2UuXG4gKlsvQ0JSXSBDb21tYW5kIHRvIGRlZmluZSB0aGUgZGVjaXNpb24gb24gY29tYmluYXRpb24gcm9sbHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbignY2hhdE1lc3NhZ2UnLCAoaHRtbCwgY29udGVudCkgPT4ge1xuICAgIC8vIEknbSBjdXJyZW50bHkgdXNpbmcgaXQgZm9yIHRlc3RpbmcgYm9udXMgZGljZS5cbiAgICBpZiAoY29udGVudC5tYXRjaCgvXlxcLyhjYnJ8Y2MpL2kpKSB7XG4gICAgICAvLyBFeHRyYWN0aW5nIG51bWJlcnMgZnJvbSBjb21iaW5hdGlvbiByb2xsc1xuICAgICAgY29uc3QgY29tbWFuZHMgPSBjb250ZW50Lm1hdGNoKC8oXFxkKykvZylcbiAgICAgIGlmIChjb21tYW5kcykge1xuICAgICAgICBuZXcgUm9sbCgnMWQxMDAnKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkudGhlbihyID0+IHtcbiAgICAgICAgICBjb25zdCBzID0gci5yZXN1bHRcbiAgICAgICAgICBjb25zdCByZXMgPSBjb21tYW5kc1xuICAgICAgICAgICAgLm1hcChtID0+IHtcbiAgICAgICAgICAgICAgbGV0IHJlcyA9ICcnXG4gICAgICAgICAgICAgIGlmIChzIDw9IDEpIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgICAgICAgICBlbHNlIGlmIChzID49IDEwMCkgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZ1bWJsZScpXG4gICAgICAgICAgICAgIGVsc2UgaWYgKHMgPD0gbSAvIDUpIHtcbiAgICAgICAgICAgICAgICByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHMgPD0gbSAvIDIpIHtcbiAgICAgICAgICAgICAgICByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHMgPD0gbSkgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgICAgICAgICAgZWxzZSBpZiAocyA+PSA5Nikge1xuICAgICAgICAgICAgICAgIGlmIChtIDwgNTApIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GdW1ibGUnKVxuICAgICAgICAgICAgICAgIGVsc2UgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZhaWx1cmUnKVxuICAgICAgICAgICAgICB9IGVsc2UgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZhaWx1cmUnKVxuICAgICAgICAgICAgICAvLyBSZWNvcmQgdGhlIGZpcnN0IHJlc3VsdHMuXG4gICAgICAgICAgICAgIHJlcyArPSAnICcgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVmFsdWUnKSArICcgJyArIG1cbiAgICAgICAgICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5qb2luKCcgLyAnKVxuICAgICAgICAgIHIudG9NZXNzYWdlKHtcbiAgICAgICAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKSxcbiAgICAgICAgICAgIGZsYXZvcjogcmVzXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0luY29ycmVjdCB1c2FnZSBvZiBjb21tYW5kJylcbiAgICAgIH1cbiAgICAgIC8vIHJldHVybiB0byBhdm9pZCBlcnJvcnMgaW4gdGhlIGNvbW1hbmQuXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSAqL1xuZXhwb3J0IGZ1bmN0aW9uIERyb3BBY3RvclNoZWV0RGF0YSAoYWN0b3IsIHNoZWV0LCBkYXRhKSB7XG4gIGlmIChkYXRhLnR5cGUgPT09ICdJdGVtJyAmJiBkYXRhLmFjdG9ySWQpIHtcbiAgICBpZiAoYWN0b3IuZGF0YS5faWQgPT09IGRhdGEuYWN0b3JJZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGxldCBhY3RvckZyb20gPSBudWxsXG4gICAgaWYgKGRhdGEuc2NlbmVJZCAmJiBkYXRhLnRva2VuSWQpIHtcbiAgICAgIGFjdG9yRnJvbSA9IGdhbWUuc2NlbmVzLmdldChkYXRhLnNjZW5lSWQpLnRva2Vucy5nZXQoZGF0YS50b2tlbklkKS5hY3RvclxuICAgIH0gZWxzZSB7XG4gICAgICBhY3RvckZyb20gPSBnYW1lLmFjdG9ycy5nZXQoZGF0YS5hY3RvcklkKVxuICAgIH1cbiAgICBzd2l0Y2ggKGFjdG9yLmRhdGEudHlwZSkge1xuICAgICAgY2FzZSAnY2hhcmFjdGVyJzpcbiAgICAgIGNhc2UgJ25wYyc6XG4gICAgICBjYXNlICdjcmVhdHVyZSc6XG4gICAgICAgIGlmICghWydjaGFzZSddLmluY2x1ZGVzKGRhdGEuZGF0YS50eXBlKSkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICd2ZWhpY2xlJzpcbiAgICAgICAgcmV0dXJuXG4gICAgICBjYXNlICdjb250YWluZXInOlxuICAgICAgICBpZiAoIVsnYm9vaycsICdpdGVtJywgJ3NwZWxsJywgJ3dlYXBvbiddLmluY2x1ZGVzKGRhdGEuZGF0YS50eXBlKSkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChhY3RvckZyb20pIHtcbiAgICAgIGFjdG9yRnJvbS5kZWxldGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhLmRhdGEuX2lkXSlcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJDb0M3RGljZSIsInN0YXRpYyIsIm1vZGlmIiwicm9sbE1vZGUiLCJoaWRlRGljZSIsImFsdGVybmF0aXZlRGljZSIsImdhbWUiLCJtb2R1bGVzIiwiZ2V0IiwiYWN0aXZlIiwic2V0dGluZ3MiLCJyb2xsIiwiUm9sbCIsInJlcGVhdCIsIk1hdGgiLCJhYnMiLCJhc3luYyIsInJlc3VsdCIsInVuaXQiLCJ0b3RhbCIsInJlc3VsdHMiLCJ0ZW5zIiwiZCIsImRpY2UiLCJDT05GSUciLCJEaWNlIiwidGVybXMiLCJ0IiwicHVzaCIsImluY2x1ZGVzIiwibWF4IiwiZmlsdGVyIiwibGVuZ3RoIiwibWluIiwic3luY0RpY2UiLCJjaGF0RGF0YSIsIndoaXNwZXIiLCJibGluZCIsIkNoYXRNZXNzYWdlIiwiYXBwbHlSb2xsTW9kZSIsImRpY2UzZCIsInNob3dGb3JSb2xsIiwidXNlciIsIm9wdGlvbnMiLCJwb29sIiwia2V5cyIsIk9iamVjdCIsIm1hcCIsInYiLCJwYXJzZUludCIsInBlbmFsdHlEaWNlIiwiYm9udXNEaWNlIiwiaGFzRFNOIiwiam9pbiIsImdyb3VwcyIsImJhc2VEaWUiLCJiYXNlU2V0Iiwib3V0cHV0Iiwia2V5IiwibW9kaWZpZXIiLCJvZmZzZXQiLCJDT0M3IiwiY3JlYXRlSW5saW5lUm9sbCIsImRhdGEiLCJjbHMiLCJkYXRhc2V0IiwidGl0bGUiLCJmb3JtdWxhIiwiZXNjYXBlIiwiSlNPTiIsInN0cmluZ2lmeSIsImVyciIsImEiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJrIiwiZW50cmllcyIsImlubmVySFRNTCIsImlzQ3RybEtleSIsImV2ZW50IiwibWV0YUtleSIsImN0cmxLZXkiLCJrZXlDb2RlIiwiZXJhcyIsIm52Y3QiLCJkcmthIiwiZGR0cyIsImdsaXQiLCJwdWxwIiwibWRybiIsImNoYXJhY3RlcmlzdGljcyIsInN0ciIsImNvbiIsInNpeiIsImRleCIsImFwcCIsImludCIsInBvdyIsImVkdSIsInNraWxsUHJvcGVydGllcyIsIm5vYWRqdXN0bWVudHMiLCJub3hwZ2FpbiIsInNwZWNpYWwiLCJyYXJpdHkiLCJjb21iYXQiLCJmaWdodGluZyIsImZpcmVhcm0iLCJ3ZWFwb25Qcm9wZXJ0aWVzIiwibWVsZWUiLCJybmdkIiwibW52ciIsInRocm93biIsInNob3RndW4iLCJkYnJsIiwiaW1wbCIsImJyc3QiLCJhdXRvIiwiYWhkYiIsImFkZGIiLCJzbG50Iiwic3BjbCIsIm1vbnQiLCJibHN0Iiwic3R1biIsInJhcmUiLCJidXJuIiwic3BlbGxQcm9wZXJ0aWVzIiwiY2FsbCIsImRpc21pc3MiLCJjb250YWN0Iiwic3VtbW9uIiwiYmluZCIsImVuY2hhbnRtZW50IiwiZ2F0ZSIsImJvb2tUeXBlIiwibXl0aG9zIiwib2NjdWx0Iiwib3RoZXIiLCJ0YWxlbnRUeXBlIiwicGh5c2ljYWwiLCJtZW50YWwiLCJtaXNjZWxsYW5lb3VzIiwiYmFzaWMiLCJpbnNhbmUiLCJzdGF0dXNUeXBlIiwibWFuaWEiLCJwaG9iaWEiLCJvY2N1cGF0aW9uUHJvcGVydGllcyIsImNsYXNzaWMiLCJsb3ZlY3JhZnRpYW4iLCJtb2Rlcm4iLCJhY3RvciIsImFjdG9yc2hlZXQiLCJzdGF0dXMiLCJ0ZW1wb0luc2FuZSIsImluZGVmSW5zYW5lIiwidW5jb25zY2lvdXMiLCJjcml0aWNhbFdvdW5kcyIsImR5aW5nIiwicHJvbmUiLCJkZWFkIiwibmV3Qm9va05hbWUiLCJuZXdTa2lsbE5hbWUiLCJuZXdTcGVsbE5hbWUiLCJuZXdJdGVtTmFtZSIsIm5ld1dlYXBvbk5hbWUiLCJjcmVhdHVyZUZpZ2h0aW5nU2tpbGwiLCJkb2RnZVNraWxsTmFtZSIsImNyZWRpdFJhdGluZ1NraWxsTmFtZSIsIkN0aHVsaHVNeXRob3NOYW1lIiwiZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUiLCJmaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lIiwiY29tYmF0Q2FyZHMiLCJmaWdodEJhY2siLCJkb2RnZSIsIm1hbmV1dmVyIiwibm9SZXNwb25zZSIsImNoYXRIZWxwZXIiLCJzdHJpbmciLCJyZXBsYWNlIiwidG9VcHBlckNhc2UiLCJtZXNzYWdlIiwibWVzc2FnZURhdGEiLCJmbGF2b3IiLCJzcGVha2VyIiwiZ2V0U3BlYWtlciIsInR5cGUiLCJDT05TVCIsIkNIQVRfTUVTU0FHRV9UWVBFUyIsIldISVNQRVIiLCJST0xMIiwiRElDRV9ST0xMX01PREVTIiwiU0VMRiIsImlkIiwiY29udGVudCIsImNyZWF0ZSIsInRoZW4iLCJtc2ciLCJ0b0xvd2VyQ2FzZSIsInNjZW5lSWQiLCJ0b2tlbklkIiwic3BsaXQiLCJhY3RvcnMiLCJ0b2tlbnMiLCJnZXRUb2tlbkZyb21LZXkiLCJhY3RvcktleSIsImdldEFjdG9yRnJvbUtleSIsInRva2VuIiwic2NlbmUiLCJuYW1lIiwiYWxpYXMiLCJvYmplY3QiLCJlbGVtZW50Iiwib2JqZWN0TmFtZSIsInByb3AiLCJzdGFydHNXaXRoIiwiYXR0YWNoT2JqZWN0VG9FbGVtZW50IiwiZGVzZXJpYWxpemUiLCJvYmoiLCJ2YWx1ZSIsInMiLCJzbGljZSIsIm9ialByb3AiLCJpbmRleE9mIiwib2JqTmFtZSIsInN1YnN0cmluZyIsIk51bWJlciIsInRvU3RyaW5nIiwidG9rZW5Eb2MiLCJzY2VuZXMiLCJ0b2tlbkRhdGEiLCJnZXRFbWJlZGRlZERvY3VtZW50IiwiVG9rZW4iLCJkdXBsaWNhdGUiLCJnZXRBY3RvclRva2VuIiwiaW1nIiwidGV4dHVyZSIsInNyYyIsInN0YXJ0VG9rZW4iLCJlbmRUb2tlbiIsImNlbnRlciIsImRpc3RhbmNlIiwiZ3JpZFVuaXQiLCJjYW52YXMiLCJncmlkVW5pdHMiLCJyYXkiLCJSYXkiLCJzZWdtZW50IiwiZ3JpZCIsIm1lYXN1cmVEaXN0YW5jZXMiLCJncmlkU3BhY2VzIiwiZWxldmF0aW9uIiwic3FydCIsInVpIiwibm90aWZpY2F0aW9ucyIsIndhcm4iLCJpMThuIiwibG9jYWxpemUiLCJDb0M3Um9sbCIsImNhcmQiLCJyb2xsRGl2IiwicXVlcnlTZWxlY3RvciIsImdldE9iamVjdEZyb21FbGVtZW50IiwicmVzdWx0VHlwZSIsInRoaXMiLCJzdWNjZXNzTGV2ZWwiLCJDb0M3Q2hlY2siLCJyZWd1bGFyIiwiZm9ybWF0IiwiaGFyZCIsImV4dHJlbWUiLCJjcml0aWNhbCIsImZ1bWJsZSIsImZhaWx1cmUiLCJpdGVtIiwiaXRlbUlkIiwiaXRlbXMiLCJza2lsbCIsInNraWxsSWQiLCJzaG93RGljZVJvbGwiLCJkaWNlUmVzdWx0cyIsImRpZVJlc3VsdCIsImRpY2VzIiwiZGljZURhdGEiLCJzaG93IiwiaGFzQm9udXMiLCJkaWNlTW9kaWZpZXIiLCJib251cyIsImJvbnVzVHlwZSIsInRlbkRpY2UiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZGllIiwic2VsZWN0ZWQiLCJpc01heCIsImlzTWluIiwidW5pdERpZSIsImluY3JlYXNlU3VjY2VzcyIsImlzbCIsIm5ld1N1Y2Nlc0xldmVsIiwibHVja05lZWRlZCIsImx1Y2tOZWVkZWRUeHQiLCJsdWNrTmVlZGVkVmFsdWUiLCJjaGVjayIsInJvbGxUeXBlIiwic2lkZSIsImFjdGlvbiIsInJlZk1lc3NhZ2VJZCIsInJlZmVyZW5jZU1lc3NhZ2VJZCIsImRpZmZpY3VsdHkiLCJkaWNlTW9kIiwicmF3VmFsdWUiLCJpc0Z1bWJsZSIsImlzQ3JpdGljYWwiLCJjaGFyYWN0ZXJpc3RpYyIsInRva2VuS2V5IiwiaXNUb2tlbiIsImFjdG9ySWQiLCJodG1sRWxlbWVudCIsImdldEZyb21DaGVjayIsImF0dGFjaFRvRWxlbWVudCIsIkNvQzdEYW1hZ2UiLCJkYW1hZ2VTdHJpbmciLCJkYW1hZ2UiLCJyb2xscyIsInIiLCJDaGF0Q2FyZEFjdG9yIiwiY29uc3RydWN0b3IiLCJmYXN0Rm9yd2FyZCIsImRpc3BsYXlBY3Rvck9uQ2FyZCIsImlzQmxpbmQiLCJ1bmRlZmluZWQiLCJfaXNCbGluZCIsIngiLCJfcm9sbE1vZGUiLCJ3ZWFwb24iLCJ0YXJnZXRlZFRva2VucyIsInRhcmdldHMiLCJ0YXJnZXQiLCJ0YXJnZXRUb2tlbiIsInRhcmdldEFjdG9yIiwiX3RhcmdldFRva2VuIiwiX3RhcmdldEtleSIsInBvcCIsIl90YXJnZXRBY3RvciIsInRhcmdldEtleSIsImhhc1RhcmdldCIsInNraWxscyIsImdldFdlYXBvblNraWxscyIsInRhcmdldEltZyIsImdldEFjdG9ySW1nRnJvbUtleSIsInRhcmdldE5hbWUiLCJhY3RvckltZyIsInNwZWFrZXJEYXRhIiwiZ2V0V2hpc3BlclJlY2lwaWVudHMiLCJyZXBsYWNlciIsIkpTT05Sb2xsRGF0YSIsIlNhbkNoZWNrQ2FyZCIsInNhbkRhdGEiLCJzdXBlciIsIkJvb2xlYW4iLCJzYW5SZWFzb24iLCJpc05hTiIsInNhbk1vZGlmaWVyIiwic2FuRGlmZmljdWx0eSIsInN0YXRlIiwiZGlmZmljdWx0eUxldmVsIiwic2FuTG9zc1NvdXJjZSIsImludm9sdW50YXJ5QWN0aW9uIiwic2FuUm9sbGVkIiwic2FuQ2hlY2siLCJpc0ZhaWx1cmUiLCJzYW5Mb3NzRm9ybXVsYSIsInNhbk1heCIsImZhaWxlZCIsInNhbk1pbiIsInBhc3NlZCIsInNhbkxvc3RUb1JlYXNvbiIsIm1heFBvc3NpYmxlU2FuTG9zcyIsIm1heExvc3NUb1NhblJlYXNvbiIsIm1heFNhbkxvc3MiLCJldmFsdWF0ZSIsIm1heGltaXplIiwic2FuTG9zc1JlYXNvbkVuY291bnRlcmVkIiwiZmlyc3RFbmNvdW50ZXIiLCJteXRob3NJbnNhbml0eUV4cGVyaWVuY2VkIiwiaXNBY3Rvckxvb3NpbmdTYW4iLCJoYXNUZW1wb0luc2FuZSIsImltbXVuZVRvQ3JlYXR1cmUiLCJib3V0RHVyYXRpb25UZXh0IiwiYm91dER1cmF0aW9uIiwiYm91dFJlYWxUaW1lIiwiYm91dFN1bW1hcnkiLCJ5b3VHYWluQ3RodWxodU15dGhvc1N0cmluZyIsIm15dGhvc0dhaW4iLCJrZWVwQ3JlYXR1cmVTYW5EYXRhIiwiZmluaXNoIiwiYXBwbHlTYW5Mb3NzIiwiYm91dFJlc3VsdCIsImVudGVyQm91dE9mTWFkbmVzcyIsImJvdXRPZk1hZG5lc3NSZXNvbHZlZCIsImJvdXRPZk1hZG5lc3NPdmVyIiwidHJpZ2dlckluc2FuaXR5IiwidW5zZXRDb25kaXRpb24iLCJjdGh1bGh1TXl0aG9zQXdhcmRlZCIsImFtb3VudEdhaW5lZCIsImV4cGVyaWVuY2VGaXJzdE15dGhvc0luc2FuaXR5IiwiY3RodWxodU15dGhvc1NraWxsIiwib2xkVmFsdWUiLCJhZGp1c3RtZW50cyIsImV4cGVyaWVuY2UiLCJ1cGRhdGUiLCJpc0J5cGFzc2VkIiwiYXR0cmlidXRlIiwiX3BlcmZvcm0iLCJmb3JjZURTTiIsImludm9sdW50YXJ5QWN0aW9uUGVyZm9ybWVkIiwic2FuTG9zc1JvbGxlZCIsImlnbm9yZVNhbkNoZWNrIiwic2FuTG9zcyIsImxpbWl0ZWRMb3NzVG9DcmVhdHVyZSIsIm1pbmltaXplIiwiaW1tdW5lQWxyZWFkeUluQm91dCIsInNhbkxvc3NBcHBsaWVkIiwiaW50Um9sbGVkIiwiaW5zYW5pdHkiLCJzYW5Mb3NzUm9sbCIsInNob3dSb2xsRGljZTNkIiwibG9vc2VTYW4iLCJhY3Rvckxvc3RTYW4iLCJzYW4iLCJwZXJtYW5lbnRseUluc2FuZSIsImhhc0luZGVmSW5zYW5lIiwic2hha2VuIiwiaW5zYW5pdHlUYWJsZVJvbGxlZCIsIm9uZUZpZnRoU2FuaXR5IiwiYXR0cmlicyIsImRhaWx5U2FuTG9zcyIsInRlbXBvcmFyeUluc2FuZSIsImluZGVmaW5pdGVseUluc2FuZSIsIm1lbW9yeVJlcHJlc3NlZCIsImludENoZWNrIiwiaW50RGlmZmljdWx0eSIsImludE1vZGlmaWVyIiwiYWxyZWFkeUluc2FuZSIsInNldENvbmRpdGlvbiIsInNldFJlYXNvblNhbkxvc3MiLCJfX2lubGluZVNhbkNoZWNrIiwiaW5saW5lQ2hlY2siLCJvdXRlckhUTUwiLCJfX2lubGluZVNhbkxvc3NSb2xsIiwiX19pbmxpbmVJbnRDaGVjayIsImh0bWwiLCJyZW5kZXJUZW1wbGF0ZSIsInRlbXBsYXRlIiwiaHRtbENhcmRFbGVtZW50IiwiJCIsInBhcnNlSFRNTCIsImNoYXRNZXNzYWdlIiwibWVzc2FnZXMiLCJtZXNzYWdlSWQiLCJjaGF0IiwidXBkYXRlTWVzc2FnZSIsImFyZ3MiLCJjaGF0Q2FyZCIsInNheSIsImh0bWxDYXJkIiwiZ2V0RnJvbUNhcmQiLCJzYW5DaGVja0NhcmREYXRhIiwicGFyc2UiLCJ1bmVzY2FwZSIsInNhbkNoZWNrQ2FyZCIsImFzc2lnbiIsImNsb3Nlc3QiLCJmcm9tRGF0YSIsIkNvQzdVdGlsaXRpZXMiLCJ2YWxpZGF0ZSIsIm1hdGNoIiwic2V0VGltZW91dCIsIl9FeGVjQ29tbWFuZCIsInRocmVzaG9sZCIsImZsYXREaWNlTW9kaWZpZXIiLCJmbGF0VGhyZXNob2xkTW9kaWZpZXIiLCJlc2NhcGVkIiwiYXNrIiwidGhyZXNob2xkU3RyIiwiZGlmZmljdWx0eVN0ciIsImNvbnZlcnREaWZmaWN1bHR5IiwiZGlhbG9nT3B0aW9ucyIsImFza1ZhbHVlIiwidXNhZ2UiLCJSb2xsRGlhbG9nIiwidG9NZXNzYWdlIiwiaW5mb3MiLCJhY3RvclN0cmluZyIsInZhbHVlcyIsImZpbmQiLCJjaGFyIiwiY2hhcktleSIsInNob3J0IiwibGFiZWwiLCJzeXN0ZW0iLCJBY3RvciIsInRlbXBsYXRlcyIsIlN0cmluZyIsInVua25vd24iLCJwcmV2ZW50RGVmYXVsdCIsInNraWxsQ2hlY2siLCJzaGlmdEtleSIsImJhc2VBY3RvciIsImdldERvY3VtZW50Q2xhc3MiLCJ0b0pTT04iLCJwYXJlbnQiLCJ3ZWFwb25DaGVjayIsInJvbGxEaWNlIiwiYmFyIiwic2xvdCIsIm9yaWdpbiIsImNvbW1hbmQiLCJwYWNrTmFtZSIsInBhY2siLCJwYWNrcyIsIm1ldGFkYXRhIiwiZW50aXR5IiwiZ2V0RG9jdW1lbnQiLCJDb0M3SXRlbSIsImlzQW55U3BlYyIsIm1hY3JvIiwibWFjcm9zIiwiY29udGVudHMiLCJtIiwiTWFjcm8iLCJhc3NpZ25Ib3RiYXJNYWNybyIsInRvZ2dsZSIsInNldCIsImluZm8iLCJzb2NrZXQiLCJlbWl0IiwidXBkYXRlQ2hhclNoZWV0cyIsIkhvb2tzIiwidXNlcnMiLCJjaGVja09wdGlvbnMiLCJwbGF5ZXJUb2tlbklkcyIsInUiLCJjaGFyYWN0ZXIiLCJzZWxlY3RlZFBsYXllcklkcyIsImNvbnRyb2xsZWQiLCJmb3JFYWNoIiwiY2hlY2tlZCIsIkRpYWxvZyIsImJ1dHRvbnMiLCJjYWxsYmFjayIsImFsbCIsInN0YXJ0UmVzdCIsInJlbmRlciIsImNoYXRDb250ZW50IiwicXVpY2tIZWFsZXIiLCJpc0NyaXRpY2FsV291bmRzIiwiaGFzQ29uZGl0aW9uU3RhdHVzIiwiZGFpbHlTYW5pdHlMb3NzIiwiZGFpbHlMb3NzIiwiaHBWYWx1ZSIsImhwIiwiaHBNYXgiLCJmbG9vciIsIm1wVmFsdWUiLCJtcCIsIm1wTWF4IiwiaGVhbEFtb3VudCIsIm51bWJlciIsImhvdXJzIiwibWFnaWNBbW91bnQiLCJjZWlsIiwiT1RIRVIiLCJpc0dNIiwidGsiLCJzaGVldCIsInJlbmRlcmVkIiwiaXNPd25lciIsImVudGl0eVR5cGUiLCJvcmlnaW5hbEV2ZW50IiwiZGF0YUxpc3QiLCJkYXRhVHJhbnNmZXIiLCJnZXREYXRhIiwiZG9jdW1lbnROYW1lIiwiZm9sZGVyIiwiZm9sZGVycyIsInRleHQiLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJ3aW5kb3ciLCJpc1NlY3VyZUNvbnRleHQiLCJ3cml0ZVRleHQiLCJ0ZXh0QXJlYSIsInN0eWxlIiwicG9zaXRpb24iLCJsZWZ0IiwidG9wIiwiYm9keSIsImFwcGVuZENoaWxkIiwiZm9jdXMiLCJzZWxlY3QiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImV4ZWNDb21tYW5kIiwiRXJyb3IiLCJyZW1vdmUiLCJjYXRjaCIsImVycm9yIiwibGVuIiwicVN0cmluZyIsImN1cnJlbnQiLCJpIiwiY2hhckF0IiwiY2hhckNvZGVBdCIsImoiLCJDb0M3Q29uQ2hlY2siLCJkZW55UHVzaCIsIl9hY3RvcklkIiwiaXNTdWNjZXNzIiwiaXNSb2xsZWQiLCJjb25DaGVjayIsImh0bWxDaGVjayIsImdldEZyb21FbGVtZW50Iiwicm9sbENvbiIsInJlcGxhY2VXaXRoIiwiZ2V0Q2hlY2tFbGVtZW50IiwiaGlkZURpY2VSZXN1bHQiLCJzdGF5QWxpdmUiLCJhcHBsaWVkIiwiU2tpbGxTZWxlY3REaWFsb2ciLCJhY3RpdmF0ZUxpc3RlbmVycyIsImNsaWNrIiwiX29uU2VsZWN0U2tpbGxDbGlja2VkIiwibGkiLCJjdXJyZW50VGFyZ2V0IiwiaW5kZXgiLCJkaXNwbGF5IiwiYWRkZWQiLCJpbm5lclRleHQiLCJvcHRpb25zQ291bnQiLCJjbG9zZSIsImNsYXNzZXMiLCJQb2ludFNlbGVjdERpYWxvZyIsIl9vblNlbGVjdENoYXJhY3RlcmlzdGljIiwiX29uQnV0dG9uQ2xpY2tlZCIsIml0ZW1MaXN0Iiwib3B0aW9uYWwiLCJ0b2dnbGVDbGFzcyIsIm11bHRpcGxpZXIiLCJyZXNvbHZlZCIsImNvbnRhaW5zIiwiQ2hhcmFjU2VsZWN0RGlhbG9nIiwiQ2hhcmFjUm9sbERpYWxvZyIsInJvbGxlZCIsIm9uIiwiX29uQ2hhbmdlSW5wdXQiLCJfb25TdWJtaXQiLCJfb25Sb2xsQ2hhcmFjdGVyaXN0aWMiLCJfb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljIiwiX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyIsIl9vblJlc2V0Q2hhcmFjdGVyaXN0aWMiLCJfb25CdXR0b24iLCJjaGFyYWNLZXkiLCJyb2xsQ2hhcmFjdGVyaXN0aWMiLCJpbmNyZWFzZUNoYXJhY3RlcmlzdGljIiwiZGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyIsInJlc2V0Q2hhcmFjdGVyaXN0aWMiLCJjaGVja1RvdGFsIiwiaW5wdXQiLCJfZWxlbWVudCIsImxpc3QiLCJwb2ludHMiLCJ2YWxpZGF0aW9uIiwiZW5hYmxlZCIsImVsIiwicG9pbnRzV2FybmluZyIsIlNraWxsU3BlY1NlbGVjdERpYWxvZyIsInNwZWNpYWxpemF0aW9uTmFtZSIsImJhc2VWYWx1ZSIsImhhc1NraWxscyIsImJhc2UiLCJmb3JtRGF0YSIsImRsZyIsInNwZWNpYWxpemF0aW9uIiwiRm9ybURhdGEiLCJkZWZhdWx0IiwiQ29DN01lbGVlUmVzb2x0aW9uIiwiaW5pdGlhdG9yTWVzc2FnZSIsInRhcmdldE1lc3NhZ2UiLCJDb0M3TWVsZWVUYXJnZXQiLCJnZXRGcm9tTWVzc2FnZUlkIiwiaW5pdGlhdG9yIiwiQ29DN01lbGVlSW5pdGlhdG9yIiwiaW5pdGlhdG9yVG9rZW4iLCJyZXN1bHRTdHJpbmciLCJyb2xsRGFtYWdlIiwid2lubmVyIiwid2lubmVySW1nIiwid2lubmVyVGl0bGUiLCJsb29zZXIiLCJjcml0aWNhbERhbWFnZSIsImRvY3VtbWVudCIsInBhcmVudE1lc3NhZ2VJZCIsImluaXRpYXRvcktleSIsIm91dG51bWJlcmVkIiwic3VycHJpc2VkIiwiYXV0b1N1Y2Nlc3MiLCJhZHZhbnRhZ2UiLCJkaXNhZHZhbnRhZ2UiLCJkb2RnaW5nIiwibm90UmVzcG9uZGluZyIsImZpZ2h0aW5nQmFjayIsIm1hbmV1dmVyaW5nIiwiYWN0aW9uU2VsZWN0ZWQiLCJfaW5pdGlhdG9yS2V5IiwiX2luaXRpYXRvciIsIm1lbGVlSW5pdGlhdG9yIiwicHVibGlzaFVwZGF0ZSIsImZsYWciLCJjYW1lbEZsYWciLCJoeXBoZW5Ub0NhbWVsQ2FzZSIsInRvZ2dsZUZsYWciLCJ1cGRhdGVDaGF0Q2FyZCIsImZsYWdOYW1lIiwib3duZXJzIiwiZ21zIiwicGVybWlzc2lvbiIsIkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMiLCJFTlRJVFlfUEVSTUlTU0lPTlMiLCJPV05FUiIsInByb21wdCIsIndlYXBvbklkIiwicHVibGlzaCIsImlzVW5rb253biIsInJlc29sdXRpb25DYXJkIiwicmVzb2x1dGlvbk1lc3NhZ2UiLCJwcmVDcmVhdGVNZXNzYWdlIiwicm9sbEljb25zIiwicm9sbENvbG9yIiwicm9sbFRpdGxlIiwic3VjY2VzcyIsInVwZ3JhZGVSb2xsIiwibHVja0Ftb3VudCIsIm5ld1N1Y2Nlc3NMZXZlbCIsIm9sZENhcmQiLCJzcGVuZEx1Y2siLCJsdWNrU3BlbnQiLCJwcm9jZXNzZWQiLCJkaWNlUm9sbHMiLCJyZXN1bERldGFpbHMiLCJkaWNlVG90YWwiLCJDb0M3Q2hhdCIsIkNvQzdSYW5nZUluaXRpYXRvciIsImNvdmVyIiwidGFyZ2V0Q2FyZCIsInNpbmdsZVNob3QiLCJtdWx0aXBsZVNob3RzIiwiYnVyc3QiLCJmdWxsQXV0byIsImFpbWVkIiwidG90YWxCdWxsZXRzRmlyZWQiLCJfdGFyZ2V0cyIsIkNvQzdSYW5nZVRhcmdldCIsInByb3BlcnRpZXMiLCJnZXREaXN0YW5jZSIsInJvdW5kZWREaXN0YW5jZSIsInJvdW5kIiwiZGlzdGFuY2VVbml0IiwiZGlzdEluWWQiLCJ0b1lhcmRzIiwicG9pbnRCbGFua1JhbmdlIiwiYmFzZVJhbmdlIiwibG9uZ1JhbmdlIiwiZXh0cmVtZVJhbmdlIiwib3V0T2ZSYW5nZSIsIm1haW5XZWFwb25Ta2lsbCIsIm1haW4iLCJhdXRvV2VhcG9uU2tpbGwiLCJhbHRlcm5hdGl2IiwiYXV0b0ZpcmUiLCJtdWx0aVRhcmdldCIsImFpbWluZyIsIl9haW1pbmciLCJnZXRBY3RvckZsYWciLCJhY3RpdmVUYXJnZXQiLCJzaG90cyIsIl9zaG90cyIsImN1cnJlbnRTaG90UmFuayIsImFjdGl2ZVRhcmdldFNob3REaWZmaWN1bHR5Iiwic2hvdERpZmZpY3VsdHkiLCJiIiwiZGlkQW55U2hvdEhpdCIsImFueUhpdCIsInN1Y2Nlc3NmdWxIaXRzIiwiaGl0cyIsImhpdCIsInNob3QiLCJzaG90RmlyZWQiLCJ0b3RhbEFtbW8iLCJnZXRCdWxsZXRMZWZ0IiwibWF4U2hvdHMiLCJ1c2VzUGVyUm91bmQiLCJpZ25vcmVBbW1vIiwiaWdub3JlVXNlc1BlclJvdW5kIiwib3V0T2ZBbW1vIiwib3V0T2ZTaG90cyIsInZvbGxleVNpemUiLCJfdm9sbGV5U2l6ZSIsInNpemUiLCJpc1ZvbGxleU1pblNpemUiLCJpc1ZvbGxleU1heFNpemUiLCJnZXRUYXJnZXRGcm9tS2V5IiwiY2FsY1RhcmdldHNEaWZmaWN1bHR5IiwicmFuZ2UiLCJub3JtYWwiLCJsb25nIiwiZGlmZmljdWx0eU5hbWUiLCJyZWxvYWQiLCJpbXBvc3NpYmxlIiwibGV2ZWwiLCJhZGRTaG90QXRDdXJyZW50VGFyZ2V0IiwiYWN0b3JOYW1lIiwiYnVsbGV0c1Nob3QiLCJ0cmFuc2l0QnVsbGV0cyIsImJ1bGxldHNTaG90VHJhbnNpdCIsInRyYW5zaXQiLCJidWxsZXRMZWZ0IiwicHJldmlvdXNTaG90Iiwid2VhcG9uTWFsZnVuY3Rpb24iLCJzaG9vdEF0VGFyZ2V0Iiwic2hvb3RCdWxsZXRzIiwiaGFzTWFsZnVuY3Rpb24iLCJidWxsZXRGaXJlZCIsImRldGFpbHMiLCJjaGFuZ2VWb2xsZXlTaXplIiwicGFzc1JvbGwiLCJyb2xsSW5kZXgiLCJ1cGdyYWRlaW5kZXgiLCJpbmNyZWFzZWRTdWNjZXNzIiwicmFuZ2VJbml0aWF0b3IiLCJjYXJkVGFyZ2V0cyIsImNhcmRTaG90cyIsImRhbWFnZVJvbGxzIiwiZHIiLCJkYW1hZ2VSb2xsIiwiaCIsImRhbWFnZUZvcm11bGEiLCJkYW1hZ2VEaWUiLCJnZXRNYWluRGllIiwibWF4RGFtYWdlIiwiY3JpdGljYWxEYW1hZ2VGb3JtdWxhIiwiaW1wYWxlIiwiY3JpdGljYWxEYW1hZ2VEaWUiLCJpbXBhbGluZ1Nob3RzIiwic3VjY2Vzc2Z1bFNob3RzIiwiZGVhbHQiLCJkYW1hZ2VSb2xsZWQiLCJkSW5kZXgiLCJ0b3RhbFRha2VuIiwidG90YWxBYnNvcmJlZCIsInJJbmRleCIsImRlYWx0QW1vdW50IiwiZGVhbERhbWFnZSIsInRha2VuIiwiYWJzb3JiZWQiLCJhcm1vciIsImRhbWFnZURlYWx0IiwiaW5NZWxlZSIsImJpZyIsIl9iaWciLCJidWlsZCIsInNtYWxsIiwiX3NtYWxsIiwiaXNGYXN0IiwibW92IiwiZmFzdCIsIl9mYXN0IiwiX2FjdG9yIiwiX3Rva2VuIiwic2l6ZVRleHQiLCJzaXplTGFiZWwiLCJJbnRlcmFjdGl2ZUNoYXRDYXJkIiwiX29wdGlvbnMiLCJtZXJnZU9iamVjdCIsImRlZmF1bHRPcHRpb25zIiwiY3NzQ2xhc3NlcyIsIm9wdGlvbm5hbENoYXREYXRhIiwiZGF0YVN0cmluZyIsImNhcmRDbGFzcyIsImNvbXB1dGUiLCJjbG9zZWQiLCJzZXRGbGFnIiwiX29uVG9nZ2xlIiwiX29uS2V5IiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsIkNvQzciLCJjYXJkcyIsImZyb21IVE1MQ2FyZEVsZW1lbnQiLCJ0eXBlZENhcmQiLCJhc3NpZ25PYmplY3QiLCJfdXBkYXRlIiwiZm9ybXMiLCJ1cGRhdGVzIiwiZm9ybSIsIkZvcm1EYXRhRXh0ZW5kZWQiLCJ0b09iamVjdCIsImRpZmZPYmplY3QiLCJleHBhbmRPYmplY3QiLCJfbWVzc2FnZSIsIl9tZXNzYWdlSWQiLCJleGNsdWRlIiwiZXhjbHVkZVN0YXJ0V2l0aCIsImZyb21NZXNzYWdlIiwiY2FyZEVsZW1lbnQiLCJjYXJkRGF0YSIsInVuc2V0RmxhZyIsImlzVGFyZ2V0T3duZXIiLCJEYW1hZ2VDYXJkIiwiY29uY2F0IiwiX2ltcGFsZSIsImlzRGFtYWdlRm9ybXVsYSIsImlzRGFtYWdlTnVtYmVyIiwiaXNBcm1vckZvcnVsYSIsInRvdGFsRGFtYWdlU3RyaW5nIiwiaWdub3JlQXJtb3IiLCJub0RhbWFnZSIsImhhcmRyb2xsZWQiLCJkYW1hZ2VJbmZsaWN0ZWQiLCJfaHRtbElubGluZVJvbGwiLCJfaHRtbFJvbGwiLCJyb2xsQXJtb3IiLCJzZWxlY3RlZFBsYXllcnMiLCJvbmUiLCJpY29uIiwiY29uZmlybURhbWFnZSIsInR3byIsImluY2x1ZXMiLCJkYiIsInJvbGxTdHJpbmciLCJfYXJtb3IiLCJSb2xsQ2FyZCIsImdldEh0bWxSb2xsIiwic3BhbiIsImZyb21NZXNzYWdlSWQiLCJjb2xsZWN0aW9uIiwiZGVmYXVsdENvbmZpZyIsImdldEZsYWciLCJ0aW1lc3RhbXAiLCJEYXRlIiwicHJvY2VzcyIsImNvbmZpZyIsImZsYWdzIiwidXBkYXRlUm9sbCIsImZyb21HTSIsInJhbmsiLCJhZGRSb2xsRGF0YSIsImFkZFJvbGwiLCJyZW1vdmVSb2xsIiwic3BsaWNlIiwid2lubmVycyIsImxvb3NlcnMiLCJoYXNXaW5uZXIiLCJPcHBvc2VkQ2hlY2tDYXJkIiwiX29uQ2xpY2siLCJhdHRhY2tlclJvbGwiLCJhdHRhY2tlciIsImRlZmVuZGVyUm9sbCIsImRlZmVuZGVyIiwiZGVmZW5kZXJJc0RvZGdpbmciLCJkb2RnZVNraWxsIiwiYWR2YW50YWdlQXR0YWNrZXIiLCJfYWEiLCJ3aW5uZXJSb2xsc0RhbWFnZSIsIl9hZCIsImFkdmFudGFnZURlZmVuZGVyIiwiaXNUaWUiLCJ3aW5uZXJDb3VudCIsIm5lZWRzVGllQnJlYWtlciIsImNvdW50IiwiaXNBdHRhY2tNYW5ldXZlciIsInJlc3VsdFRleHQiLCJjbG9zZUNhcmQiLCJkYW1hZ2VDaGF0Q2FyZCIsImlzRXh0cmVtZVN1Y2Nlc3MiLCJhbHRlciIsInNvcnQiLCJ0aWUiLCJtb2RpZmllZFJlc3VsdCIsIndpbkNvdW50IiwiQ29tYmluZWRDaGVja0NhcmQiLCJzdWNjZXNzQ291bnQiLCJtYWluQWN0b3JLZXkiLCJhbnkiLCJjaGVja0dNSW5pdGlhdG9yIiwiX3JvbGwiLCJzaWxlbnQiLCJoaWRlU3VjY2VzcyIsImFzc2lnblJvbGwiLCJjb21iaW5lZFJvbGwiLCJBdWRpb0hlbHBlciIsInBsYXkiLCJzb3VuZHMiLCJDSEFUX0NPQzdfTUVTU0FHRSIsInBsYXllcnMiLCJHTVNlbGZSb2xsIiwicmVtb3ZlV2lzcGVyVGFyZ2V0cyIsImZha2VSb2xsIiwiX29uQ2hhdENhcmRBY3Rpb24iLCJfb25DaGF0Q2FyZFRvZ2dsZUNvbnRlbnQiLCJfb25DaGF0Q2FyZFJhZGlvU3dpdGNoIiwiX29uQ2hhdENhcmRUb2dnbGVTd2l0Y2giLCJfb25DaGF0Q2FyZFZvbGxleVNpemUiLCJfb25Ecm9wRG93bkVsZW1lbnRTZWxlY3RlZCIsIl9vblRvZ2dsZVNlbGVjdGVkIiwiX29uVGFyZ2V0U2VsZWN0IiwiX29uT3BlbkFjdG9yIiwiQ29DN1BhcnNlciIsIl9vbkNoZWNrIiwiX29uRHJhZ0NvQzdMaW5rIiwiX29uSW5saW5lIiwiYmluZExpc3Rlcm5lcnMiLCJzY3JvbGxCb3R0b20iLCJjaGVja1JldmVhbGVkIiwicmV2ZWFsQ2hlY2siLCJiaW5kTGlzdGVuZXJzIiwicmVtb3ZlQ2xhc3MiLCJtb3VzZWxlYXZlIiwiZGVmZW5kYW50SWQiLCJpbml0aWF0b3JJZCIsInVwZGF0ZUNvbWJhdENhcmRUYXJnZXQiLCJ1c2VyT25seSIsImdldEF0dHJpYnV0ZSIsImdtT25seSIsInpvbmUiLCJ1c2VyVmlzaWJsZU9ubHkiLCJlbGVtIiwiZ21WaXNpYmxlT25seSIsIm93bmVyVmlzaWJsZU9ubHkiLCJfZ2V0QWN0b3JGcm9tS2V5IiwiX2dldENoYXRDYXJkQWN0b3IiLCJwYXJlbnRFbGVtZW50Iiwib3duZXJPbmx5IiwiZ21TZWxlY3RPbmx5IiwiYWN0aW9uVHlwZVN0cmluZyIsInRhcmdldHNTZWxlY3RvciIsImJvcmRlciIsInRhcmdldFRvRGlzcGxheSIsInVwZGF0ZVNlbGVjdGVkIiwiZHJvcERvd25Cb3hlcyIsImRwZG5Cb3giLCJzZWxlY3RlZEJveCIsImJ1dHRvbiIsImFjdGlvblR5cGUiLCJkZWZlbmRlckNob2ljZSIsInNraWxsVmFsdWUiLCJza2lsbE5hbWUiLCJpdGVtTmFtZSIsIndlYXBvbk5hbWUiLCJfY29sbGFwc2VJbmxpbmVSZXN1bHQiLCJfZXhwYW5kSW5saW5lUmVzdWx0Iiwib3B0aW9uTGlzdCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJwcm9wZXJ0eSIsInJhbmdlQ2FyZCIsInVwZGF0ZUNhcmRTd2l0Y2giLCJvd25uZXIiLCJnZXRUb2tlbiIsIm1lc3NJZCIsIm9yaWdpbk1lc3NhZ2UiLCJtZWxlZUNhcmQiLCJyb2xsUmVzdWx0IiwidXBncmFkZUluZGV4IiwiZm9yY2VQYXNzIiwidXBncmFkZUNoZWNrIiwiZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlciIsIm5ld0NhcmQiLCJjbG9uZU5vZGUiLCJwdXNoZWRSb2xsIiwiZGVmZW5kZXJLZXkiLCJnZXRBY3RvckZyb21Ub2tlbiIsInJlc3BvbnNlVHlwZSIsInBlcmZvcm1Ta2lsbENoZWNrIiwicHVibGlzaENoZWNrUmVzdWx0IiwicHVibGlzaE5vUmVwb25zZVJlc3VsdCIsImRlYWxlciIsInJlc29sdmVDYXJkIiwiYW1vdW50IiwiYXBwZW5kIiwiZm9yY2VGYWlsIiwiaW5jcmVhc2VTdWNjZXNzTGV2ZWwiLCJkZWNyZWFzZVN1Y2Nlc3NMZXZlbCIsImNvbXB1dGVDaGVjayIsIm1ha2VQdWJsaWMiLCJzdGFuZGJ5IiwiZm9yY2VSb2xsIiwiZmxhZ0ZvckRldmVsb3BlbWVudCIsImNsZWFyU2FuTG9zc1JlYXNvbiIsInJvbGxTYW4iLCJhZHZhbmNlU3RhdGUiLCJyb2xsU2FuTG9zcyIsInJvbGxJbnQiLCJDb0M3c29ja2V0IiwiZXhlY3V0ZUFzR00iLCJfaWQiLCJyb2xsRGFtYWdlQnV0dG9uIiwiQ29DQWN0b3IiLCJpbml0aWFsaXplIiwiY3JlYXR1cmVJbml0IiwidmlzaW9uIiwiZGltU2lnaHQiLCJicmlnaHRTaWdodCIsImFjdG9yTGluayIsImRpc3Bvc2l0aW9uIiwib3ZlcndyaXRlIiwiY2hlY2tVbmRlZmluZWRBdXRvIiwicmV0dXJuRGF0YSIsInNob3J0TmFtZSIsImNyZWF0ZURhdGEiLCJnZXRUZW1wb0luc2FuZUR1cmF0aW9uVGV4dCIsImhhc0NvbmRpdGlvblZhbHVlIiwicG9ydHJhaXQiLCJyZWFsVGltZSIsImR1cmF0aW9uIiwiYm91dE9mTWFkbmVzc1RhYmxlSWQiLCJkZXNjcmlwdGlvbiIsImJvdXRPZk1hZG5lc3NUYWJsZSIsInRhYmxlcyIsInRhYmxlUm9sbCIsIlRBQkxFX1JFU1VMVF9UWVBFUyIsIkRPQ1VNRU5UIiwicmVzdWx0SWQiLCJUZXh0RWRpdG9yIiwiZW5yaWNoSFRNTCIsImNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzIiwiVEVYVCIsInBhcnRzIiwiZ2V0TmFtZVBhcnRzU3BlYyIsInNob3dTaGVldCIsImVtcHR5U2tpbGwiLCJyZW5kZXJTaGVldCIsImZpcmVhcm1zIiwic2tpbGxEYXRhIiwicGVyc29uYWwiLCJvY2N1cGF0aW9uIiwiYXJjaGV0eXBlIiwiZ2V0U2tpbGxzQnlOYW1lIiwiYXR0YWNrIiwid3BuVHlwZSIsImNyZWF0ZWRBdHRhY2siLCJjb25zb2xlIiwic2V0QWN0b3JGbGFnIiwicXVhbnRpdHkiLCJnZXRJdGVtSWRCeU5hbWUiLCJjcmVhdGVCb29rIiwiY3JlYXRlU3BlbGwiLCJlbXB0eVNwZWxsIiwiY3JlYXRlU2tpbGwiLCJjcmVhdGVJdGVtIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJiaW8iLCJiaW9ncmFwaHkiLCJhcmVhTmFtZSIsImVtYmVkZGVkTmFtZSIsImRhdGFBcnJheSIsInByb2Nlc3NlZERhdGFBcnJheSIsImJhc2VDYWxjdWxhdGVkIiwiY2FsY3VsYXRlQmFzZSIsInBhcnNlQ2hhcmFjdGVyaXN0aWNzIiwic2tpbGxMaXN0IiwidG9Mb2NhbGVMb3dlckNhc2UiLCJleGlzdGluZ0l0ZW0iLCJzZXRJdGVtRmxhZyIsImdldE5hbWVXaXRob3V0U3BlYyIsIm1haW5Ta2lsbCIsImNyZWF0ZVdlYXBvblNraWxsIiwic2Vjb25kU2tpbGwiLCJlbmFibGVDaGFyYWN0ZXJpc2l0aWNzIiwiZ2V0Q2hhcmFjdGVyaXN0aWMiLCJsdWNrIiwidXBkYXRlRGF0YSIsIml0Iiwib3RoZXJzSXRlbXMiLCJhZGRVbmlxdWVJdGVtcyIsImFkZEl0ZW1zIiwiYmFja3N0b3J5Iiwic2VjdGlvbk5hbWUiLCJiaW9TZWN0aW9ucyIsImNyZWF0ZUJpb1NlY3Rpb24iLCJyZXNldEFyY2hldHlwZSIsImNvbmZpcm0iLCJ5ZXMiLCJkZWZhdWx0WWVzIiwiY29yZUNoYXJhYyIsImVudHJ5IiwiY29yZUNoYXJhY3RlcmlzdGljcyIsImNoYXJhYyIsImNoYXJEaWFsb2dEYXRhIiwiY29yZUNoYXJhY3RlcmlzdGljc0Zvcm11bGEiLCJyZXNldE9jY3VwYXRpb24iLCJwb2ludHNEaWFsb2dEYXRhIiwib2NjdXBhdGlvblNraWxsUG9pbnRzIiwib3B0aW9uYWxDaGFyIiwiZGlhbG9nRGF0YSIsInNraWxsQ291bnQiLCJtZXJnZWQiLCJtZXJnZU9wdGlvbmFsU2tpbGxzIiwiY3JlZGl0UmF0aW5nU2tpbGwiLCJjcmVkaXRSYXRpbmciLCJhcmNoZXR5cGVQb2ludHMiLCJvY2N1cGF0aW9uUG9pbnRzIiwicGVyc29uYWxQb2ludHMiLCJnZXRJdGVtc0J5TmFtZSIsInBhcnNlRm9ybXVsYSIsInBhcnNlZEZvcm11bGEiLCJwYXJzZWQiLCJnZXRQcm9wZXJ0eSIsImNoYXJOYW1lIiwiYXR0cmliTmFtZSIsImxjayIsImVyYXNlT2xkIiwib2NjdXBhdGlvblNraWxsIiwiZ2V0SXRlbUZsYWciLCJ1bnNldEl0ZW1GbGFnIiwiZGVsZXRlIiwiYXJjaGV0eXBlU2tpbGwiLCJzZXRMdWNrIiwiZ2V0UmVhc29uU2FuTG9zcyIsInNhbml0eUxvc3NFdmVudHMiLCJ0b3RhbExvc3MiLCJpbW11bml0eSIsImZpbmRJbmRleCIsInJpZ2h0IiwibG9jYWxlQ29tcGFyZSIsInNhbk1heEZvcm11bGEiLCJzYW5pdHlMb3NzRXZlbnQiLCJzZXRTYW4iLCJjaGVja1Bhc3NlZCIsInNhbkxvc3NDaGVja1Bhc3NlZCIsInNhbkxvc3NDaGVja0ZhaWxsZWQiLCJjaGVja0ZhaWxsZWQiLCJzYW5Mb3NzTWF4Iiwic2FuTG9zc01pbiIsImN0aHVsaHVNeXRob3MiLCJvY2N1cGF0aW9uUG9pbnRzU3BlbnQiLCJhcmNoZXR5cGVQb2ludHNTcGVudCIsImJvbnVzUG9pbnRzIiwiZXhwZXJpZW5jZVBvaW50cyIsInBlcnNvbmFsUG9pbnRzU3BlbnQiLCJoYXNEZXZlbG9wbWVudFBoYXNlIiwiZGV2ZWxvcGVtZW50Iiwib25seVJ1bk9uY2VQZXJTZXNzaW9uIiwibG9zcyIsImF0dHJpYiIsInVwZGF0ZWRLZXkiLCJzZXRBdHRyaWJBdXRvIiwic3VtIiwiTU9WIiwiYWdlIiwibG9ja2VkIiwiZ2V0SXRlbXNGcm9tTmFtZSIsImZsYWdWYWx1ZSIsImF0dHJpYnV0ZU5hbWUiLCJtaXNzaW5nIiwicm9sbEF0dHJpYnV0ZSIsImNoYXJhY3RlcmlzdGljTmFtZSIsImRpc3BsYXlOYW1lIiwiX3Jhd1ZhbHVlIiwidXBkYXRlVmFsdWUiLCJ3ZWFwb25EYXRhIiwid2VhcG9ucyIsImNyZWF0ZUNoYXRDYXJkIiwiaGFzR3VuIiwiZGVueUx1Y2siLCJkZW55QmxpbmRUYW1wZXJpbmciLCJ1c2VzQWx0ZXJuYXRpdmVTa2lsbCIsIm1hdGNoZXMiLCJleGVjIiwiYXR0cmliS2V5IiwiYXR0ciIsInBpbG90U2tpbGxzIiwiZHJpdmVTa2lsbHMiLCJyZXBvcnRDaGFyYWN0ZWRyaXRpY3NWYWx1ZSIsImF2ZXJhZ2UiLCJjaGFyVmFsdWUiLCJza2lsbHNSb2xsZWQiLCJkZXZlbG9wZW1lbnRGbGFnIiwiRGllIiwiZmFjZXMiLCJhdWdtZW50Iiwic2tpbGxNYXN0ZXJpbmdNZXNzYWdlIiwiYXVnbWVudERpZSIsImF1Z21lbnRTQU5EaWUiLCJzYW5HYWluZWQiLCJzYW5HYWluZWRNZXNzYWdlIiwiZGVidWciLCJzY29yZSIsImluY3JlYXNlRXhwZXJpZW5jZSIsInVuZmxhZ0ZvckRldmVsb3BlbWVudCIsImNoYW5nZWQiLCJjcmVhdGVNZXNzYWdlIiwiY3VycmVudEx1Y2siLCJwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2siLCJoaWdoZXJUaGFuQ3VycmVudEx1Y2siLCJhdWdtZW50Um9sbCIsImF1Z21lbnRWYWx1ZSIsImNvbmRpdGlvbk5hbWUiLCJjb25kaXRpb25WYWx1ZSIsImNvbmRpdGlvbnMiLCJmaWVsZCIsImZvcmNlVmFsdWUiLCJlZmZlY3RzIiwiZWZmZWN0IiwiY29yZSIsInN0YXR1c0lkIiwiY3VzdG9tIiwib3ZlcmxheSIsInJvdW5kcyIsInNlY29uZHMiLCJzdGF0dXNFZmZlY3RzIiwiZWZmZWN0RGF0YSIsImRpc2FibGVkIiwidXBkYXRlRW1iZWRkZWREb2N1bWVudHMiLCJmaWVsZHMiLCJqdXN0VGhpcyIsImRlbGV0ZUVtYmVkZGVkRG9jdW1lbnRzIiwiY291bnRlciIsImZpZ2h0aW5nU2tpbGxzIiwiY2xvc2VDb21iYXRXZWFwb25zIiwid2VhcG9uTGlzdCIsImZpcmVhcm1Ta2lsbHMiLCJDTSIsIm15dGhvc0hhcmRlbmVkIiwiQ1IiLCJzcGVuZGluZ0xldmVsIiwiY2FzaCIsImFzc2V0cyIsInRlc3RVc2VyUGVybWlzc2lvbiIsInBsYXllciIsImNoYXJhY3RlclVzZXIiLCJoZWFsdGhCZWZvcmUiLCJkZWZhdWx0VmFsdWUiLCJoZWFsdGhBZnRlciIsImRhbWFnZVRha2VuIiwic2V0SHAiLCJhcm1vckRhdGEiLCJncm9zc0RhbWFnZSIsImFybW9yVmFsdWUiLCJpc0Zvcm11bGEiLCJuZXREYW1hZ2UiLCJoYXNNYWpvcldvdW5kIiwibWFqb3JXb3VuZCIsIkNvQzdMaW5rIiwiX2xpbmtEYXRhIiwiTElOS19UWVBFIiwiQ0hFQ0siLCJDSEVDS19UWVBFIiwiU0tJTEwiLCJsaW5rRGF0YSIsIkNvQzdMaW5rQ3JlYXRpb25EaWFsb2ciLCJhdHRyaWJ1dGVzIiwiZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uIiwiZSIsImxpbmsiLCJzZXREYXRhIiwiVFlQRV9LRVlXT1JEIiwiQ0hBUkFDX0tFWVdPUkQiLCJBVFRSSUJfS0VZV09SRCIsIlNLSUxMX0tFWVdPUkQiLCJTQU5MT1NTIiwiSVRFTSIsIkNIQVJBQ1RFUklTVElDIiwiQVRUUklCVVRFIiwiaXNDaGVjayIsImlzIiwiaXNTYW5sb3NzIiwic2FubG9zcyIsImlzSXRlbSIsInZhbGlkSXRlbSIsImZyb21Db21wZW5kaXVtIiwiZnJvbURpcmVjdG9yeSIsIl9pdGVtIiwiaGFzUGxheWVyT3duZXIiLCJmZXRjaEl0ZW0iLCJjaGFyYWN0ZXJpc3RpY0tleSIsImF0dHJpYnV0ZUtleSIsImZvcmNlTW9kaWZpZXJzIiwiaGFzTGFiZWwiLCJoYXNJY29uIiwiY2hlY2tUeXBlIiwiRm9ybUFwcGxpY2F0aW9uIiwiZHJhZ0Ryb3AiLCJkcmFnU2VsZWN0b3IiLCJkcm9wU2VsZWN0b3IiLCJjbG9zZU9uU3VibWl0Iiwic3VibWl0T25DbG9zZSIsInN1Ym1pdE9uQ2hhbmdlIiwid2lkdGgiLCJoZWlnaHQiLCJjaG9pY2VzIiwiYWxsb3dDdXN0b20iLCJtaW5pbXVtIiwibWF4aW11bSIsImZyb21HYW1lIiwiYXNrSWQiLCJhc2tQYWNrIiwiaXNTZXRGcm9tR2FtZSIsInNlbGVjdGVkRGlmZmljdWx0eSIsImxpbmtUeXBlIiwic2VsZWN0ZWRDaGVja1R5cGUiLCJfb25DbGlja1N1Ym1pdCIsIkNvQzdUeXBlIiwidXBkYXRlRnJvbUxpbmsiLCJjb3B5VG9DbGlwYm9hcmQiLCJvcHRpb24iLCJncm91cCIsImdyb3VwTmFtZSIsImZvcm1EYXRhRXgiLCJkaWZmRGF0YSIsImVkaXRvciIsInN0b3BQcm9wYWdhdGlvbiIsImRpc2FibGVGbGF0RGljZU1vZGlmaWVyIiwiY3JlYXRlQ29DN0xpbmsiLCJpbnNlcnRDb250ZW50IiwiaXNDb250ZW50VmlzaWJsZSIsInBhcnNlZENvbnRlbnQiLCJ3YWxrIiwiY3JlYXRlVHJlZVdhbGtlciIsIk5vZGVGaWx0ZXIiLCJTSE9XX1RFWFQiLCJuZXh0Tm9kZSIsImN1cnJlbnROb2RlIiwiX2dldFRleHROb2RlcyIsInJneCIsIlJlZ0V4cCIsIl9yZXBsYWNlVGV4dENvbnRlbnQiLCJfY3JlYXRlTGluayIsImxpbmtJY29uIiwidGFnIiwibWF0Y2hBbGwiLCJBcnJheSIsImZyb20iLCJkaWZmaWN1bHR5U3RyaW5nIiwiaHVtYW5OYW1lIiwiZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyIsImRyYWdnYWJsZSIsImNoYXJhY3RlcmlzdGljQ2hlY2siLCJhdHRyaWJ1dGVDaGVjayIsImdldFNwZWFrZXJBY3RvciIsIkl0ZW0iLCJjb250ZXh0IiwiZG9jdW1lbnRDbGFzc2VzIiwiZXh0ZW5kZWQiLCJpY29uTGFuZ3VhZ2UiLCJtYWxmdW5jdGlvbiIsInByb3BlcnR5SWQiLCJvdmVycmlkZSIsImNoZWNrZWRQcm9wcyIsIm1lbGVlV2VhcG9uIiwicHJvcE5hbWUiLCJwcm9wVmFsdWUiLCJoYXNQcm9wZXJ0eSIsImlzSW5jbHVkZWRJblNldCIsInNwZWNOYW1lUmVnZXgiLCJxdW90ZVJlZ0V4cCIsImVyYXNlQWRqdXN0bWVudCIsIm1heFVzZXNQZXJSb3VuZCIsIm11bHRpU2hvdCIsInVzZXNQZXJSb3VuZFN0cmluZyIsIl9iYXNlIiwiZGVsdGEiLCJleHAiLCJhbW1vIiwic2V0QnVsbGV0cyIsIm1heEJ1bGxldCIsImJ1bGxldHMiLCJtYXhCdWxsZXRzIiwicmVkdWNlIiwibmV3QXJyYXkiLCJnZXRDaGF0RGF0YSIsImh0bWxPcHRpb25zIiwibGFiZWxzIiwicHJvcHMiLCJmbiIsInAiLCJfd2VhcG9uQ2hhdERhdGEiLCJza2lsbExhYmVsIiwiZm91bmQiLCJjYW5CZVB1c2hlZCIsImlzRG9kZ2UiLCJwdXNoaW5nIiwiaXNVbmtub3duIiwiY2FyZFR5cGUiLCJ1dWlkIiwiX3V1aWQiLCJmb3VuZHJ5IiwidXRpbHMiLCJyYW5kb21JRCIsImhhc0NhcmQiLCJyYXdWYWx1ZVN0cmluZyIsImNyaXRpY2FsVGhyZXNob2xkIiwicmVndWxhclRocmVzaG9sZCIsImhhcmRUaHJlc2hvbGQiLCJleHRyZW1lVGhyZXNob2xkIiwiZnVtYmxlVGhyZXNob2xkIiwic3VjY2VzVGhyZXNob2xkIiwiX21vZGlmaWVkUmVzdWx0IiwibW9kaWZpZWQiLCJmbGF0RGljZU1vZGlmaWVyU3RyaW5nIiwiaXNTaW1wbGVSb2xsIiwiaGFzUGVuYWx0eSIsImhhc01vZGlmaWVyIiwiX2RpY2VNb2RpZmllciIsImZ1bGxOYW1lIiwiX2RpZmZpY3VsdHkiLCJvbGRDaGVjayIsInN1Y2Nlc3NMZXZlbEljb25zIiwidW5rbm93bkRpZmZpY3VsdHkiLCJpY29ucyIsInN1Y2Nlc3NIaW50IiwiY3NzQ2xhc3MiLCJoaW50IiwiZmFpbHVyZUhpbnQiLCJnbURpZmZpY3VsdHlDcml0aWNhbCIsImdtRGlmZmljdWx0eUV4dHJlbWUiLCJnbURpZmZpY3VsdHlIYXJkIiwiZ21EaWZmaWN1bHR5UmVndWxhciIsIl9za2lsbCIsIl9nZXRJdGVtRnJvbUlkIiwiaXNEdW1teSIsIndlYXBvbkFsdFNraWxsIiwiZGlzcGxheVJlc3VsdFR5cGUiLCJkaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWwiLCJkaXNwbGF5Qm90aFN1Y2Nlc3NMZXZlbCIsImRvbnREaXNwbGF5U3VjY2Vzc0xldmVsIiwiaW1hZ2UiLCJnZXRMaW5rRWxlbWVudCIsInZhbCIsInRlblJlc3VsdCIsInRlbk9ubHlPbmVEaWUiLCJpc1ZhbHVlIiwiaXNDaGFyYWN0aXJpc3RpYyIsImlzU2tpbGwiLCJpc0F0dHJpYnV0ZSIsInN1Y2Nlc3NSZXF1aXJlZCIsIm1hbGZ1bmN0aW9uVHh0IiwidG9nZ2xlSXRlbUZsYWciLCJoYXNFbm91Z2hMdWNrIiwibmV4dExldmVsIiwibHVja1RvU3BlbmQiLCJjYW5JbmNyZWFzZVN1Y2Nlc3MiLCJjYW5Bd2FyZEV4cGVyaWVuY2UiLCJmb3JjZWQiLCJmcm9tVXVpZCIsIkpTT05Sb2xsU3RyaW5nIiwiY3NzQ2xhc3NMaXN0IiwicGxheWVyQ3NzQ2xhc3MiLCJmb3JjZWRTdWNjZXNzIiwiZm9yY2VkRmFpbHVyZSIsInRvdGFsTHVja1NwZW50Iiwic2hpZnQiLCJyZW1vdmVVcGdyYWRlcyIsImZvcmNlU3VjY2Vzc0xldmVsIiwiX2ZvcmNlQ2hlY2siLCJoaWdoIiwibG93IiwicmFuZG9tIiwidW5pdFRvdGFsIiwidGVuVG90YWwiLCJoYXNFbm91Z2giLCJ0ZW4iLCJmbGFnZ2VkRm9yRGV2ZWxvcG1lbnQiLCJfZmxhdm9yIiwiX2NvbnRleHQiLCJwYXJlbnRVdWlkIiwicmF3dmFsdWUiLCJ0b29sdGlwSGVhZGVyIiwib3JpZ2luYWxTcGVha2VyIiwibmV3Q29udGVudCIsImh0bWxNZXNzYWdlIiwicm9sbFJlc3VsdEVsZW1lbnQiLCJ0b29sdGlwIiwicm9sbFRvb2xUaXAiLCJjIiwiY2xhc3MiLCJmYWNlIiwidGlwIiwiY2hpbGRyZW4iLCJwYSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInB0IiwiaW5uZXJXaWR0aCIsInkiLCJpbm5lckhlaWdodCIsInppIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInpJbmRleCIsImlzTnVtZXJpYyIsIlNhbkRhdGFEaWFsb2ciLCJfdG9nZ2xlSW5wdXQiLCJWYWxpZGF0ZSIsIkNvQzdDaGF0TWVzc2FnZSIsIlJPTExfVFlQRV9BVFRSSUJVVEUiLCJST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMiLCJST0xMX1RZUEVfQ09NQkFUIiwiUk9MTF9UWVBFX1NLSUxMIiwiQ0FSRF9UWVBFX0NPTUJJTkVEIiwiQ0FSRF9UWVBFX0dST1VQIiwiQ0FSRF9UWVBFX05PUk1BTCIsIkNBUkRfVFlQRV9PUFBPU0VEIiwiQ0FSRF9UWVBFX1NBTl9DSEVDSyIsImFsdEtleSIsImlzQ29tYmF0IiwiZGlzYWJsZUZsYXRUaHJlc2hvbGRNb2RpZmllciIsIm5vcm1hbGl6ZVJlcXVlc3QiLCJjcmVhdGVMaW5rIiwiY3JlYXRlUm9sbCIsInJ1blJvbGwiLCJmcm9tTGlua0RhdGEiLCJwcm9tcHRMYWJlbCIsImRpc3BhdGNoIiwidW5rbm93bkRpZmZpY3VsdHlEZWZhdWx0IiwiYWxsb3dGbGF0RGljZU1vZGlmaWVyIiwiYWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXIiLCJjYXJkVHlwZXMiLCJFQ0NfQ0xBU1MiLCJQRVJNSVNTSU9OX1RZUEUiLCJTVEFURSIsImFkdmlzZSIsIkVuaGFuY2VkQ2hhdENhcmRMaWIiLCJ0eXBlcyIsIk1hcCIsImVuaGFuY2VkQ2hhdENhcmRzTGliIiwiY2FyZENvbnN0cnVjdG9ycyIsImNhcmRDb25zdHJ1Y3RvciIsIkVuaGFuY2VkQ2hhdENhcmQiLCJfZGF0YSIsIm9vYyIsImNzcyIsImRlZXBDbG9uZSIsImF0dGFjaE9iamVjdCIsIm9iamVjdERhdGFTdHJpbmciLCJlY2NDbGFzcyIsIl9vbkNoYW5nZSIsImVhY2giLCJzZXRWaXNpYmlsaXR5Iiwic2V0UGVybWlzc2lvbiIsInNldFN0YXRlIiwic2V0UmFkaW9TdGF0ZSIsInNwbGl0ZWQiLCJlY2NWaXNpYmlsaXR5IiwiaGFzUGVybSIsImVjY1Blcm1pc3Npb25zIiwicmVzdHJpY3RlZFRvIiwicGVybWlzc2lvbnNBcnJheSIsIndoaXRlTGlzdCIsImlzQXV0aG9yIiwiaHRtbWxDYXJkIiwiY2FyZENsYXNzTmFtZSIsIkNhcmRDbGFzcyIsIlRlc3RDYXJkIiwibXlTZWxlY3RPcHRpb25zIiwiQ29DN0FjdG9yU2hlZXQiLCJBY3RvclNoZWV0IiwiYWN0b3JEYXRhIiwiZWRpdGFibGUiLCJpc0VkaXRhYmxlIiwiaXRlbXNCeVR5cGUiLCJjb21iYXRTa2lsbHMiLCJyYW5nZVdwbiIsIm1lbGVlV3BuIiwiYWN0b3JGbGFncyIsInBlcm1pc3Npb25MaW1pdGVkIiwiTElNSVRFRCIsImFsb3dVbmxvY2siLCJwZXJzb25hbERlc2NyaXB0aW9uIiwic2V4IiwicmVzaWRlbmNlIiwiYmlydGhwbGFjZSIsIm9yZ2FuaXphdGlvbiIsInBsYXllcm5hbWUiLCJtYW51YWxDcmVkaXQiLCJjcmVkaXQiLCJtb25ldGFyeVN5bWJvbCIsInNwZW50IiwiYXNzZXRzRGV0YWlscyIsImRldmVsb3BtZW50IiwicHVscFJ1bGVBcmNoZXR5cGUiLCJwdWxwUnVsZU9yZ2FuaXphdGlvbiIsImlzRGVhZCIsImlzRHlpbmciLCJpdGVtVG9VcGRhdGUiLCJhc3luY0Jhc2UiLCJ1cGRhdGVkRXhwIiwiaXRlbVR5cGUiLCJub3JtYWxpemUiLCJtZWxlZVNraWxscyIsInJhbmdlU2tpbGxzIiwiY2J0U2tpbGxzIiwidXNlc0FsdGVybmF0ZVNraWxsIiwic2tpbGxTZXQiLCJfcHJvcGVydGllcyIsImhhc0VtcHR5VmFsdWVXaXRoRm9ybXVsYSIsImNvbXBlbmRpdW0iLCJpc0ZpcnN0IiwiaXNMYXN0IiwiaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwiLCJzaG93SW52ZW50b3J5SXRlbXMiLCJzaG93SW52ZW50b3J5Qm9va3MiLCJzaG93SW52ZW50b3J5U3BlbGxzIiwic2hvd0ludmVudG9yeVRhbGVudHMiLCJzaG93SW52ZW50b3J5U3RhdHVzZXMiLCJzaG93SW52ZW50b3J5V2VhcG9ucyIsImhhc0NvbmRpdGlvbnMiLCJjb25kaXRpb24iLCJvbkNsb3NlU2hlZXQiLCJfb25EcmFnQ2hhcmFjdGVyaXN0aWMiLCJfb25EcmFnQXR0cmlidXRlIiwiX29uRHJhZ1NhbkNoZWNrIiwiY29udGV4dG1lbnUiLCJfb25PcHBvc2VkUm9sbCIsIl9vblJvbGxDaGFyYWN0ZXJpdGljVGVzdCIsIl9vblJvbGxTa2lsbFRlc3QiLCJfb25Sb2xsQXR0cmliVGVzdCIsIl9vbkxvY2tDbGlja2VkIiwiX29uRmxhZ0NsaWNrZWQiLCJfb25Gb3JtdWxhQ2xpY2tlZCIsIl9vblJvbGxDaGFyYWN0ZXJpdGljc1ZhbHVlIiwiX29uQXZlcmFnZUNoYXJhY3Rlcml0aWNzVmFsdWUiLCJfb25BdXRvVG9nZ2xlIiwiX29uUmVzZXRDb3VudGVyIiwiX29uQ29uZGl0aW9uVG9nZ2xlIiwiaGVhbCIsInJldml2ZSIsImNoZWNrRm9yRGVhdGgiLCJfb25JdGVtUm9sbCIsIl9vbldlYXBvblJvbGwiLCJfb25XZWFwb25Ta2lsbFJvbGwiLCJfb25SZWxvYWRXZWFwb24iLCJfb25BZGRBbW8iLCJkYmxjbGljayIsIl90b2dnbGVSZWFkT25seSIsIl9vbldlYXBvbkRhbWFnZSIsIl9vbkludmVudG9yeUhlYWRlciIsIl9vblNlY3Rpb25IZWFkZXIiLCJ3aGVlbElucHV0cyIsIndoZWVsSW5wdXQiLCJhZGRFdmVudExpc3RlbmVyIiwiX29uV2hlZWwiLCJwYXNzaXZlIiwiX29uSXRlbVN1bW1hcnkiLCJfb25JdGVtUG9wdXAiLCJfb25SZW5kZXJJdGVtU2hlZXQiLCJldiIsInBhcmVudHMiLCJpdGVtVG9EZWxldGUiLCJzdHJpY3QiLCJzbGlkZVVwIiwiY3JlYXRlRW1wdHlCb29rIiwiY3JlYXRlRW1wdHlJdGVtIiwiY3JlYXRlRW1wdHlTa2lsbCIsImNyZWF0ZUVtcHR5U3BlbGwiLCJjcmVhdGVFbXB0eVdlYXBvbiIsIl9vblRyYWRlSXRlbSIsImRlbGV0ZUJpb1NlY3Rpb24iLCJtb3ZlQmlvU2VjdGlvblVwIiwibW92ZUJpb1NlY3Rpb25Eb3duIiwiZGV2ZWxvcGVtZW50UGhhc2UiLCJkZXRhaWwiLCJkZXZlbG9wTHVjayIsImRpc2FibGUiLCJtb3VzZWVudGVyIiwidG9vbFRpcFNraWxsRW50ZXIiLCJDb0M3VG9vbHRpcHMiLCJ0b29sVGlwTGVhdmUiLCJ0b29sVGlwQ2hhcmFjdGVyaXN0aWNFbnRlciIsInRvb2xUaXBBdHRyaWJ1dGVFbnRlciIsInRvb2xUaXBBdXRvRW50ZXIiLCJ0b29sVGlwRmxhZ0ZvckRldmVsb3BtZW50IiwiZGVsYXkiLCJUb29sVGlwSG92ZXIiLCJ0b29sVGlwVGltZXIiLCJ0b29sVGlwIiwiZGlzcGxheVRvb2xUaXAiLCJjaGFySWQiLCJhdHRyaWJ1dGVJZCIsImFjdG9yRnJvbSIsImFjdG9yVG8iLCJ2aXNpYmxlIiwiTk9ORSIsImJveCIsIl9vbkRyb3AiLCJ0b2dnbGVDb25kaXRpb24iLCJzZXRPbmVGaWZ0aFNhbml0eSIsInJlc2V0Q291bnRlciIsInRvZ2dsZUF0dHJpYkF1dG8iLCJ0b2dnbGVQcm9wZXJ0eSIsInJvbGxDaGFyYWN0ZXJpc3RpY3NWYWx1ZSIsImF2ZXJhZ2VDaGFyYWN0ZXJpc3RpY3NWYWx1ZSIsImlzTG9ja2VkIiwidG9nZ2xlQWN0b3JGbGFnIiwiZGVsdGFZIiwic2V0TXAiLCJyZWFkT25seSIsInNlY3JldHMiLCJoYXNDbGFzcyIsInN1bW1hcnkiLCJkaXYiLCJzcGVjaWFsRGl2IiwiaGlkZSIsImJpbmRFdmVudHNIYW5kbGVyIiwic2xpZGVEb3duIiwic2VjdGlvbiIsInBhbm5lbENsYXNzIiwicGFubmVsIiwic2libGluZ3MiLCJwb3B1cFNraWxsIiwiZW5yaWNoZWRWYWx1ZSIsInNjcm9sbFkiLCJwcm9jZWVkV2l0aG91dFRhcmdldCIsImNhbmNlbCIsInByb2NlZWQiLCJhZGRCdWxsZXQiLCJ0cmlnZ2VyIiwidGVzdCIsInJvbGxGb3JtdWxhIiwiY3JlZGl0VmFsdWUiLCJ1cGRhdGVUZXh0QXJlYSIsInVwZGF0ZUJpb1ZhbHVlIiwidXBkYXRlQmlvVGl0bGUiLCJzZWxlY3RlZEluZGV4IiwiQ29DN05QQ1NoZWV0IiwiYWxsb3dGb3JtdWxhIiwiZGlzcGxheUZvcm11bGEiLCJoYXNTYW4iLCJoYXNNcCIsImhhc0x1Y2siLCJpc0NyZWF0dXJlIiwiaGFzSW52ZW50b3J5IiwiX29uU2FuQ2hlY2siLCJjaGFuZ2UiLCJzZXRIZWFsdGhTdGF0dXNNYW51YWxseSIsImNoZWNrVGFyZ2V0cyIsInVuc2V0QWN0b3JGbGFnIiwicmVzaXphYmxlIiwiX3VwZGF0ZU9iamVjdCIsInNldENoYXJhY3RlcmlzdGljIiwiY2VsbCIsInNldFBvc2l0aW9uIiwiZm9yY2VBdXRvIiwiQ29DN0NyZWF0dXJlU2hlZXQiLCJDb0M3Q3JlYXRlTXl0aG9zRW5jb3VudGVyIiwiaXNJbW11bml0eSIsIl9vblNlbGVjdENoYW5nZSIsIl9vbkJ1dHRvbkNsaWNrIiwiQ29DN0NoYXJhY3RlclNoZWV0IiwiX2dldEhlYWRlckJ1dHRvbnMiLCJzdW1tYXJpemVkIiwib25jbGljayIsInRvZ2dsZVNoZWV0TW9kZSIsInNraWxsTGlzdE1vZGVWYWx1ZSIsInNraWxsU2hvd1VuY29tbW9uIiwic2hvd0ljb25zT25seSIsIm9jY3VwYXRpb25TZXQiLCJhcmNoZXR5cGVTZXQiLCJ0b3RhbEV4cGVyaWVuY2UiLCJ0b3RhbE9jY3VwYXRpb24iLCJpbnZhbGlkT2NjdXBhdGlvblBvaW50cyIsInRvdGFsQXJjaGV0eXBlIiwiaW52YWxpZEFyY2hldHlwZVBvaW50cyIsInRvdGFsUGVyc29uYWwiLCJpbnZhbGlkUGVyc29uYWxQb2ludHMiLCJjcmVkaXRSYXRpbmdNYXgiLCJjcmVkaXRSYXRpbmdNaW4iLCJpbnZhbGlkQ3JlZGl0UmF0aW5nIiwicHVscFRhbGVudENvdW50IiwidGFsZW50IiwibWluUHVscFRhbGVudHMiLCJ0YWxlbnRzIiwiaW52YWxpZFB1bHBUYWxlbnRzIiwiYWxsb3dEZXZlbG9wbWVudCIsImFsbG93Q2hhckNyZWF0aW9uIiwiZGV2ZWxvcG1lbnRSb2xsRm9yTHVjayIsInNob3dEZXZQYW5uZWwiLCJmYWN0b3IiLCJvbmVCbG9ja0JhY2tTdG9yeSIsInByZXZpb3VzU3BlYyIsImlzU3BlY2lhbGl6YXRpb24iLCJza2lsbHNCeVZhbHVlIiwidG9wU2tpbGxzIiwidG9wV2VhcG9ucyIsInJldmVyc2UiLCJkaXNwbGF5UGxheWVyTmFtZSIsInNraWxsTGlzdEVtcHR5IiwidGFicyIsIm5hdlNlbGVjdG9yIiwiY29udGVudFNlbGVjdG9yIiwiaW5pdGlhbCIsIl9vblNraWxsRGV2IiwiX29uSXRlbURldGFpbHMiLCJ0b2dnbGVTa2lsbExpc3RNb2RlIiwidG9nZ2xlU2tpbGxVbmNvbW1vbk1vZGUiLCJfb25BZGRTYW5pdHlMb3NzUmVhc29uIiwiX29uRGVsZXRlU2FuaXR5TG9zc1JlYXNvbiIsIl9vblRvZ2dsZUtlZXBlckZsYWdzIiwiZGV2ZWxvcFNraWxsIiwic3R5bGVTaGVldCIsImNzc1J1bGVJbmRleCIsInN0eWxlU2hlZXRzIiwiaHJlZiIsImVuZHNXaXRoIiwicnVsZXMiLCJzZWxlY3RvclRleHQiLCJDU1NTdHlsZSIsInJlbW92ZVByb3BlcnR5Iiwic2V0UHJvcGVydHkiLCJGb250RmFjZSIsImxvYWQiLCJsb2FkZWRGYWNlIiwiZm9udHMiLCJ3ZWlnaHQiLCJDb0M3Q29tYmF0IiwiY3VycmVudENvbWJhdCIsImNvbWJhdHMiLCJjdXJyZW50SW5kZXgiLCJjb21iSWQiLCJjb21iYXRhbnRDb250cm9sc0RpdiIsImNvbWJhdGFudCIsImNvbWJhdGFudHMiLCJwcmVwZW5kIiwiaW5pdGlhdGl2ZSIsInRva2VuSW5pdGlhdGl2ZSIsImluaXRpYXRpdmVUZXN0IiwiaDQiLCJmb250V2VpZ2h0IiwidGV4dFNoYWRvdyIsImNvbG9yIiwiYmFja2dyb3VuZCIsIl9vblRvZ2dsZUd1biIsImNvbWJhdGFudElkIiwibmV3SW5pdCIsInJvbGxJbml0aWF0aXZlIiwic2V0SW5pdGlhdGl2ZSIsImlkcyIsImN1cnJlbnRJZCIsInVwZGF0ZVR1cm4iLCJ0dXJuIiwidHVybnMiLCJVcGRhdGVyIiwic3lzdGVtVXBkYXRlVmVyc2lvbiIsInJ1bk1pZ3JhdGUiLCJpc05ld2VyVmVyc2lvbiIsInZlcnNpb24iLCJ1cGRhdGVkTW9kdWxlcyIsImN1cnJlbnRNb2R1bGVzIiwicGFja2FnZSIsInBhY2thZ2VOYW1lIiwibW9kIiwic2tpcCIsIk9LIiwidXBkYXRlRG9jdW1lbnRzIiwicGVybWFuZW50IiwibWlncmF0ZUFjdG9yRGF0YSIsImlzT2JqZWN0RW1wdHkiLCJsb2ciLCJlbmZvcmNlVHlwZXMiLCJtaWdyYXRlSXRlbURhdGEiLCJ0YWJsZSIsIm1pZ3JhdGVUYWJsZURhdGEiLCJtaWdyYXRlTWFjcm9EYXRhIiwibWlncmF0ZVNjZW5lRGF0YSIsIm1pZ3JhdGVDb21wZW5kaXVtRGF0YSIsIl9taWdyYXRlQWN0b3JDaGFyYWN0ZXJTYW5pdHkiLCJfbWlncmF0ZUFjdG9yQXJ0d29yayIsIl9taWdyYXRlQWN0b3JLZWVwZXJOb3RlcyIsIl9taWdyYXRlQWN0b3JOcGNDcmVhdHVyZSIsIl9taWdyYXRlQWN0b3JTdGF0dXNFZmZlY3RBY3RpdmUiLCJfbWlncmF0ZUFjdG9yU2FuTG9zc1JlYXNvbnMiLCJhcnIiLCJpdGVtRGF0YSIsImRvY3VtZW50Q2xhc3MiLCJpdGVtVXBkYXRlIiwiZG9jdW1lbnRUeXBlIiwid2FzTG9ja2VkIiwiY29uZmlndXJlIiwibWlncmF0ZSIsImRvY3VtZW50cyIsImdldERvY3VtZW50cyIsImRvYyIsIl9taWdyYXRlSXRlbUV4cGVyaWVuY2UiLCJfbWlncmF0ZUl0ZW1BcnR3b3JrIiwiX21pZ3JhdGVJdGVtQm9va0F1dG9tYXRlZCIsIl9taWdyYXRlSXRlbUtlZXBlck5vdGVzIiwiX21pZ3JhdGVJdGVtU3BlbGxBdXRvbWF0ZWQiLCJfbWlncmF0ZUl0ZW1LZWVwZXJOb3Rlc01lcmdlIiwiX21pZ3JhdGVJdGVtU2V0dXBFcmFzIiwiX21pZ3JhdGVJdGVtdjEwIiwiX21pZ3JhdGVJdGVtQm9va1VuaXRzIiwiX21pZ3JhdGVNYWNyb0FydHdvcmsiLCJfbWlncmF0ZVRhYmxlQXJ0d29yayIsIl9taWdyYXRlVG9rZW5BcnR3b3JrIiwiaGFzIiwib3JpZ2luYWwiLCJrZWVwZXIiLCJvIiwiZyIsInNwZWxscyIsImNvc3QiLCJjYXN0aW5nVGltZSIsInVuaWRlbnRpZmllZCIsImF1dGhvciIsImRhdGUiLCJsYW5ndWFnZSIsIm15dGhvc1JhdGluZyIsIm5vdGVzIiwiZ2FpbiIsIkNNSSIsIkNNRiIsIm5lY2Vzc2FyeSIsIndlZWtzU3R1ZHlUaW1lIiwicHJvZ3Jlc3MiLCJ1bml0cyIsInN0dWR5Iiwia2VlcGVyTm90ZXMiLCJlbmNvdW50ZXJlZENyZWF0dXJlcyIsImltIiwiYXR0YWNrc1BlclJvdW5kIiwibmFtZUNoYXJhY3RlcnMiLCJlbiIsImRiTm9uZSIsImFybW9yTm9uZSIsImF0dGFja3NQZXJSb3VuZE5vbmUiLCJzYW5Mb3NzTm9uZSIsImZ1bGxkYiIsImhhbGZkYiIsInNlY3Rpb25Db21iYXRzIiwibmV3Q29tYmF0SGVhZGVyIiwic2VjdGlvblNraWxscyIsInNlY3Rpb25MYW5nYXVnZXMiLCJzZWN0aW9uU3BlbGxzIiwiaGFuZGd1biIsInJpZmxlIiwic21iIiwibWFjaGluZUd1biIsImxhdW5jaGVkIiwiZXhhbXBsZSIsImRlIiwiZGljZVNob3J0IiwicGwiLCJmciIsImVzIiwidHJhbnNsYXRpb25zIiwid2VhcG9uRG9kZ2UiLCJndWVzc1N0YXJ0Q29tYmF0Iiwic2VjdGlvbnMiLCJDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cCIsImxhbmciLCJDb0M3QWN0b3JJbXBvcnRlciIsIml0ZW1Mb2NhdGlvbnMiLCJhc051bWJlciIsImFzU3RyaW5nIiwiZ2V0UmVnRXgiLCJyZWdleCIsIm1vZGlmaWVycyIsImNsZWFuU3RyaW5nIiwidHJhbnNsYXRlUm9sbCIsInJlZ0V4IiwidG9IVE1MIiwidHJpbSIsInJlZ0V4S2V5IiwicmVnRXhwIiwicmVxdWlyZWRHcm91cCIsInJlbW92ZUZyb21UZXh0Iiwic2F2ZUtleXMiLCJwcm9jZXNzQ29tYmF0IiwibmV3bGluZSIsIkNvQzdJbXBvcnRlciIsImxhc3RQZXJjZW50IiwibWF4TG9vcHMiLCJwZXJjZW50YWdlIiwiaXNSYW5nZWQiLCJkYW1hZ2VzIiwiaXNTaG90Z3VuIiwiYXR0YWNrcyIsInByb2Nlc3NTa2lsbHMiLCJicmVha3MiLCJwcm9jZXNzU3BlbGxzIiwic3BlbGxzQXJyIiwic3BlbGwiLCJoZWFkZXIiLCJzdWJzdHIiLCJvY2N1cGF0aW9uQWdlIiwicmVnRXhwU2VjdGlvbnMiLCJnbW5vdGVzIiwiZGlzYWJsZUF0dHJpYkF1dG8iLCJhdHRyaWJWYWx1ZSIsImNoYXJhY3RlckRhdGEiLCJpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIiLCJjcmVhdGVJbXBvcnRDaGFyYWN0ZXJzRm9sZGVySWZOb3RFeGlzdHMiLCJucGMiLCJ1cGRhdGVJdGVtRGF0YSIsImxhc3RXZWFwb25Ta2lsbCIsInBhaXIiLCJ3ZWFwb25Ta2lsbHMiLCJmb2xkZXJOYW1lIiwiRm9sZGVyIiwicGMiLCJleGlzdGluZyIsIm9NIiwid2VhcG9uU2tpbGwiLCJndWVzc0l0ZW0iLCJjbG9uZWQiLCJsYW5ndWFnZXMiLCJjbG9uZSIsIm5ld1NraWxsIiwibmVlZHNDb252ZXJzaW9uIiwibmVlZHNDb252ZXJzaW9uUmVzdWx0IiwiaW5wdXRzIiwiY2hlY2tMYW5ndWFnZSIsImdldEtleXMiLCJnZXRSZWd1bGFyRXhwcmVzc2lvbnMiLCJzb3VyY2UiLCJwYXJzZUNoYXJhY3RlciIsImNvbnZlcnRGcm9tNkUiLCJjb252ZXJ0N0UiLCJpdGVtc0RhdGEiLCJ0ZXN0TW9kZSIsImNyZWF0ZUVudGl0eSIsImNyZWF0dXJlIiwiQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2ciLCJnZXRFeGFtcGxlVGV4dCIsImNoYXJhY3RlcnNUb29FeHRlbmRlZCIsImFkZENsYXNzIiwiZ2V0SW5wdXRzIiwiY3JlYXRlZEFjdG9yIiwiY3JlYXRlQWN0b3IiLCJzdWJtaXQiLCJnZXRUcmFuc2xhdGlvbnMiLCJpbXBvcnQiLCJpbXBvcnRBY3RvciIsImdldEV4YW1wbGVOb3ciLCJubyIsIm9uY2UiLCJDb0M3TWVudUxheWVyIiwiUGxhY2VhYmxlc0xheWVyIiwib2JqZWN0cyIsImxheWVyT3B0aW9ucyIsInBsYWNlYWJsZXMiLCJDb0M3TWVudSIsImNvbnRyb2xzIiwiY29jN2dtdG9vbHMiLCJsYXllciIsInRvb2xzIiwib25DbGljayIsInRvZ2dsZURldlBoYXNlIiwidG9nZ2xlQ2hhckNyZWF0aW9uIiwidG9nZ2xlWFBHYWluIiwiZmFrZVJvbGxNZXNzYWdlIiwiZ2V0VGFyZ2V0Iiwia2VlcGVyTWVudSIsImFmdGVyIiwiQ29DN0NhbnZhcyIsIkNPQzdfVFlQRVNfU1VQUE9SVEVEIiwiZ3JpZFNpemUiLCJkcm9wVGFyZ2V0VG9rZW5zIiwiYmV0d2VlbiIsIndoaXNwZXJUYXJnZXRzIiwiQ29DN1NldHRpbmdzRGlyZWN0b3J5IiwiU2V0dGluZ3MiLCJsb2NhdGlvbiIsIkNvQzdDb21wZW5kaXVtRGlyZWN0b3J5IiwiQ29tcGVuZGl1bURpcmVjdG9yeSIsInRyYW5zbGF0ZWQiLCJiYWJlbGUiLCJDb0M3QWN0b3JEaXJlY3RvcnkiLCJBY3RvckRpcmVjdG9yeSIsIkNvQzdTcGVsbCIsImlzT3duZWQiLCJjb3N0cyIsImxvc3NlcyIsImNvbnZlcnRTdXJwbHVzSW50b0hpdFBvaW50cyIsIm1hZ2ljUG9pbnRzIiwiY29udmVydGVkSGl0UG9pbnRzIiwiY29udmVydGVkTWFnaWNQb2ludHMiLCJhY3Rvck1hZ2ljUG9pbnRzIiwib3JpZ2luYWxNYWdpY1BvaW50cyIsImhpdFBvaW50cyIsInJlc29sdmVMb3NzZXMiLCJncmFudFNhbml0eUxvc3MiLCJnZXRIVE1MIiwic2FuaXR5TG9zcyIsInNhbml0eUNoZWNrIiwiYnlwYXNzUm9sbFNhbiIsImJvb2tJZCIsImJvb2siLCJDb0M3Qm9vayIsImlzS2VlcGVyIiwibGVhcm5lZCIsIm1vZGUiLCJpbml0aWFsUmVhZGluZyIsImZ1bGxTdHVkeSIsImNvbXBsZXRlRnVsbFN0dWR5IiwiY2hlY2tFeGhhdXN0aW9uIiwiZ3JhbnRGdWxsU3R1ZHkiLCJhY3Rvck15dGhvc1ZhbHVlIiwiZGV2ZWxvcG1lbnRzIiwibXl0aG9zRmluYWwiLCJnYWlucyIsImZpbmFsIiwiZ3JhbnRTa2lsbERldmVsb3BtZW50Iiwicm9sbFNhbml0eUxvc3MiLCJmdWxsU3R1ZGllcyIsIm90aGVycyIsInBhdHRlcm4iLCJzcGVsbGxlYXJuZWQiLCJleGlzdGluZ1NraWxsIiwic2hvd0RldmVsb3BtZW50c1RhYmxlIiwiZnJvbVJvbGxTdHJpbmciLCJncmFudEluaXRpYWxSZWFkaW5nIiwiZ3JhbnRTcGVsbExlYXJuaW5nIiwiQ29DN0RlY2FkZXJEaWUiLCJEaWNlVGVybSIsInRlcm1EYXRhIiwiREVOT01JTkFUSU9OIiwiQ29DN0RlY2FkZXJEaWVPdGhlciIsIlNFVFRJTkdTIiwicHVscFJ1bGVzIiwic2NvcGUiLCJpbml0aWF0aXZlUnVsZSIsIm9uQ2hhbmdlIiwicnVsZSIsIl9zZXRJbml0aWF0aXZlT3B0aW9ucyIsInB1bHBSdWxlRG91YmxlTWF4SGVhbHRoIiwicHVscFJ1bGVUYWxlbnRzIiwicHVscFJ1bGVGYXN0ZXJSZWNvdmVyeSIsInB1bHBSdWxlSWdub3JlTWFqb3JXb3VuZHMiLCJvcHBvc2VkUm9sbFRpZUJyZWFrZXIiLCJkZWNpbWFscyIsIkNvbWJhdCIsIkNvQzdHYW1lUnVsZVNldHRpbmdzIiwidHJ1ZSIsImZhbHNlIiwic2V0dGluZyIsInB1bHBTZWxlY3Rpb24iLCJyZWdpc3RlciIsIm9uQ2hhbmdlUHVscFNlbGVjdCIsIm9uQ2xpY2tQdWxwIiwib25SZXNldERlZmF1bHRzIiwiY2hlY2tib3giLCJDb0M3QXJjaGV0eXBlU2hlZXQiLCJJdGVtU2hlZXQiLCJfb25JdGVtRGVsZXRlIiwiY29sbGVjdGlvbk5hbWUiLCJnZXREYXRhRnJvbURyb3BFdmVudCIsIml0ZW1JbmRleCIsInJlbW92ZUl0ZW0iLCJfb25EcmFnU3RhcnQiLCJkcmFnRGF0YSIsImNoYXJhY05hbWUiLCJjb3JlQ2hhcmFjdGVyaXN0aWNzU3RyaW5nIiwib3JTdHJpbmciLCJpdGVtUHJvcGVydGllcyIsIkNvQzdCb29rU2hlZXQiLCJzcGVsbHNMZWFybmVkIiwiZXhoYXVzdGVkIiwic3R1ZHlDb21wbGV0ZWQiLCJzcGVsbExpc3RFbXB0eSIsImF0dGVtcHRJbml0aWFsUmVhZGluZyIsIl9vbkRlbGV0ZSIsIl9vblNwZWxsRGV0YWlsIiwiYXR0ZW1wdFNwZWxsTGVhcm5pbmciLCJjaGFuZ2VQcm9ncmVzcyIsIm1vZGlmeU90aGVyc0dhaW5zIiwicmVkb0Z1bGxTdHVkeSIsIm1vZGlmeVR5cGUiLCJzcGVsbERldGFpbCIsImFkZFNwZWxscyIsInByZXYiLCJDb0M3Q29udGFpbmVyU2hlZXQiLCJzaGVldERhdGEiLCJhbGxvd1VubG9jayIsInNsaWRlVG9nZ2xlIiwiQ29DN0NoYXNlU2hlZXQiLCJzdGFydGVkIiwiX3RhYnMiLCJwYXJ0aWNpcGFudHMiLCJwcmV5cyIsImNoYXNlcnMiLCJwcmV5c01pbk1vdiIsImFkanVzdGVkTW92IiwicHJleXNNYXhNb3YiLCJjaGFzZXJzTWluTW92IiwiY2hhc2Vyc01heE1vdiIsInRvb1Nsb3ciLCJpbmNsdWRlSW5DaGFzZSIsImZhc3Rlc3QiLCJzbG93ZXN0IiwibG9jYXRpb25zIiwiYWxsSGF2ZVZhbGlkTW92IiwiYWN0aXZlTG9jYXRpb24iLCJwcmV2aW91c0xvY2F0aW9uIiwibmV4dExvY2F0aW9uIiwiZGF0YUxpc3RDaGVja09wdGlvbnMiLCJhbGxTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3MiLCJwTGlzdCIsIl9wYXJ0aWNpcGFudCIsIkludGwiLCJDb2xsYXRvciIsImNvbXBhcmUiLCJpc0NoYXNlciIsImlzVmFsaWQiLCJmaW5kTWluTW92IiwiZmluZE1heE1vdiIsInByb2Nlc3NMb2NhdGlvbnMiLCJmaXJzdCIsImluaXQiLCJsYXN0IiwibCIsInNvcnRCeVJvbGVBbmREZXgiLCJpbml0VHJhY2siLCJzdGFydGluZ0xpbmUiLCJsb2NhdGlvbnNJbmRleFN0YXJ0IiwiaW5pdEluZGV4U3RhcnQiLCJsb2NhdGlvbnNMZW5ndGgiLCJzdGFydGluZ0luZGV4IiwiZ2VuZXJhdGVOZXdVdWlkIiwiY2hhc2VMb2NhdGlvbnMiLCJlbmQiLCJhY3RpdmVJbmRleCIsImV2ZXJ5IiwiaGFzVmFsaWRNb3YiLCJhbGxIYXZlU3BlZWRSb2xsIiwic3BlZWRDaGVjayIsIm1pbk1vdiIsIm1vdmVtZW50QWN0aW9uIiwidXBkYXRlUGFydGljaXBhbnRzIiwidXBkYXRlTG9jYXRpb25zTGlzdCIsImluY2x1ZGVFc2NhcGVkIiwidHJhY2siLCJzdGFydGluZ1JhbmdlIiwidW5pcXVlIiwiX29uRHJhZ0VudGVyUGFydGljaXBhbnQiLCJfb25EcmFnTGVhdmVQYXJ0aWNpcGFudCIsIl9vbkNoYW5nZVNpZGUiLCJfb25EZWxldGVQYXJ0aWNpcGFudCIsIl9vblJlc2V0Um9sbCIsIl9vbkRlbGV0ZURyaXZlciIsIl9vbkFkZFBhcnRpY2lwYW50IiwiX29uUm9sbFBhcnRpY2lwYW50IiwiX29uTG9jYXRpb25DbGljayIsIl9vbk9ic3RhY2xlVHlwZUNsaWNrIiwiX29uT2JzdGFjbGVUb2dnbGVDbGljayIsIkRyYWdEcm9wIiwiY2FsbGJhY2tzIiwiZHJvcCIsIl9vbkRyb3BQYXJ0aWNpcGFudCIsInBlcm1pc3Npb25zIiwiZHJhZ3N0YXJ0IiwiX2NhbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQiLCJfY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wIiwiX29uQ2hhc2VQYXJ0aWNpcGFudERyYWdTdGFydCIsIl9vbkNoYXNlUGFydGljaXBhbnREcmFnRHJvcCIsImRyYWdvdmVyIiwiX29uRHJhZ0VudGVyIiwiX29uRHJhZ0xlYXZlIiwiX2dldFN1Ym1pdERhdGEiLCJlZGl0b3JzIiwiY2xlYW5lZCIsImNsZWFuIiwibG9jYXRpb25JbmRleCIsIm9yaWdpbmFsTG9jYXRpb24iLCJmbGF0dGVuT2JqZWN0Iiwic3ViVHlwZSIsImZpbmRQYXJ0aWNpcGFudEluZGV4Iiwib3JpZ2luYWxQb3NpdGlvbiIsInRyYWNrU2Nyb2xsUG9zaXRpb24iLCJlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0Iiwib2Zmc2V0TGVmdCIsImNsaWVudFdpZHRoIiwidHJhY2tFbGVtZW50Iiwic2Nyb2xsVG8iLCJiZWhhdmlvciIsImZpbmRMb2NhdGlvbkluZGV4IiwidXBkYXRlZExpc3QiLCJwYXJ0aWNpcGFudHNEYXRhIiwib2JzdGFjbGUiLCJvYnN0YWNsZURldGFpbHMiLCJiYXJyaWVyIiwiaGF6YXJkIiwic2Nyb2xsTGVmdCIsImFwcGx5IiwiY3V0VG9UaGVDaGFzZSIsInNlbGVjdG9yIiwiZHJhZ0V2ZW50IiwibG9jYXRpb25VdWlkIiwibW92ZVBhcnRpY2lwYW50IiwiX29uRHJhZ092ZXIiLCJhbHRlclBhcnRpY2lwYW50IiwiYWRkUGFydGljaXBhbnQiLCJwYXJ0aWNpcGFudCIsInJlZlNldCIsInJvbGxVdWlkIiwic3RhbmRieVRleHQiLCJzdGFuZGJ5UmlnaHRJY29uIiwiaXNDaGFyYWN0ZXJpc3RpYyIsInJlZiIsInJvbGxEYXRhU3RyaW5nIiwicm9sbERhdGEiLCJoYXNBY3RvciIsImNoYXNlciIsInZlaGljbGVLZXkiLCJvbGRQYXJ0aWNpcGFudCIsInZlaGljdWxlIiwibWV0aG9kIiwicGFydGljaXBhbnRVdWlkIiwiZGVzdGluYXRpb24iLCJvbGRQYXJ0aWNpcGFudHNMaXN0IiwidHAiLCJnZXRUeXBlIiwiaXNBY3RvciIsImhhc1ZlaGljbGUiLCJ2ZWhpY2xlIiwiZHJpdmVyIiwiX2RyaXZlciIsIl92ZWhpY2xlIiwiaGFzRHJpdmVyIiwiaGFzVmFsaWREZXgiLCJtb3ZBZGp1c3RtZW50IiwiaGFzTW92QWRqdXN0bWVudCIsImhhc0JvbnVzTW92IiwiaGFzTWFsdXNNb3YiLCJleGNsdWRlZCIsImlubGluZVJvbGwiLCJtb2RpZmllckNzcyIsImNoYXJhY3RlcmlzaXRjIiwiaGFzT3B0aW9ucyIsImdhbWVJdGVtIiwiQ29DN0l0ZW1TaGVldFYyIiwiX3NoZWV0VGFiIiwiaGFzT3duZXIiLCJpc0VuYWJsZWQiLCJfZXJhcyIsImVyYSIsImlzU3BlY2lhbGl6ZWQiLCJjYW5Nb2RpZnlTcGVjIiwiX29uQ2xpY2tUb2dnbGUiLCJDb0M3SXRlbVNoZWV0IiwiQ29DN09jY3VwYXRpb25TaGVldCIsIl9vbkdyb3VwSXRlbURlbGV0ZSIsIl9vbkdyb3VwQ29udHJvbCIsIm9wdGlvbmFsU2tpbGwiLCJvbCIsIm9wdGlvbm5hbCIsIm1hbmRhdG9yeSIsImNhcmFjIiwiY2FyYWNOYW1lIiwiaXNFbXB0eSIsIm9jY3VwYXRpb25Qb2ludHNTdHJpbmciLCJDb0M3U2V0dXBTaGVldCIsIl9vbkFkZEJpbyIsIl9vblJlbW92ZVNlY3Rpb24iLCJnZXRJdGVtIiwib3RoZXJJdGVtcyIsIml0ZW1zTGlzdEVtcHR5IiwiQ29DN1NraWxsU2hlZXQiLCJDb0M3U3BlbGxTaGVldCIsImNhc3QiLCJDb0M3U3RhdHVzU2hlZXQiLCJDb0M3VGFsZW50U2hlZXQiLCJDb0M3VmVoaWNsZVNoZWV0IiwiYXJtZWQiLCJleHBhbmRlZCIsIl9vbkFkZEFybW9yIiwiX29uUmVtb3ZlQXJtb3IiLCJfb25Ub2dnbGVFeHBhbmQiLCJvbGRTaXplIiwibG9jYWxpemVkIiwiQ29DN1dlYXBvblNoZWV0IiwiZHR5cGVzIiwiY29tYmF0U2tpbGwiLCJwcmljZSIsIl9vblByb3BlcnR5Q2xpY2siLCJwZXJmb3JtRmlsdGVyIiwiYXBwSWQiLCJlcmFFbGVtZW50IiwibmFtZUZpbHRlciIsImRvY3VtZW50SWQiLCJsaXN0ZW4iLCJsb2FkVGVtcGxhdGVzIiwicHJlbG9hZEhhbmRsZWJhcnNUZW1wbGF0ZXMiLCJyZWdpc3Rlck1lbnUiLCJyZXN0cmljdGVkIiwicmVnaXN0ZXJTZXR0aW5ncyIsIm5vYm9keSIsImV2ZXJ5b25lIiwiYWx3YXlzIiwiY3JlYXRpb24iLCJuZXZlciIsImNvbnRhaW4iLCJob29rcyIsIkFjdG9ycyIsInVucmVnaXN0ZXJTaGVldCIsInJlZ2lzdGVyU2hlZXQiLCJtYWtlRGVmYXVsdCIsIkl0ZW1zIiwiSGFuZGxlYmFycyIsInJlZ2lzdGVySGVscGVyIiwiU2V0IiwiYmVmb3JlIiwia2V5dXAiLCJjb21wZW5kaXVtRmlsdGVyIiwiQ29DN0RlY2FkZXJEU05GYWNlcyIsImNvbnN0cnV0b3IiLCJzZXRGYWNlcyIsImdsb2JhbCIsInNvdXJjZURpZSIsIkRpY2VGYWN0b3J5Iiwic3lzdGVtcyIsInN0YW5kYXJkIiwiYm91bmRzIiwiaGVpZ2h0VGV4dCIsIm91dGVySGVpZ2h0IiwiaGVpZ2h0VGlwIiwid2lkdGhUaXAiLCJvdXRlcldpZHRoIiwiY2xlYXJUaW1lb3V0IiwiQ29DN0hvb2tzIiwiZGlhbG9nIiwiZW50aXR5Q3JlYXRlU2VsZWN0VGFnIiwiZW50aXR5U29ydGVkTGlzdCIsInNob3dFeHBlcmltZW50YWwiLCJlbnRpdHlPcHRpb24iLCJ0ZXh0Q29udGVudCIsImNhcGl0YWxpemUiLCJlbXB0eSIsInNlY29uZCIsImFkZERpY2VQcmVzZXQiLCJmb250U2NhbGUiLCJnbWNyZWF0ZW1lc3NhZ2VhcyIsIm1lbGVlVGFyZ2V0IiwiZ210cmFkZWl0ZW10byIsIl9vbkxlZnRDbGljayIsIkNPTVBBVElCSUxJVFlfTU9ERVMiLCJjb21wYXRpYmlsaXR5IiwiU0lMRU5UIiwic3lzdGVtVGFiIiwic2tpbGxDaGVja01hY3JvIiwid2VhcG9uQ2hlY2tNYWNybyIsImNoZWNrTWFjcm8iLCJjYXJkY2xhc3MiLCJpbmplY3RDU1MiLCJzb2NrZXRsaWIiLCJyZWdpc3RlclN5c3RlbSIsImluaXRFQ0MiLCJyZW5kZXJDb21iYXRUcmFja2VyIiwiY29tbWFuZHMiLCJyZXMiLCJ0b0xvY2FsaXplIiwiZWZmZWN0SW5kZXgiLCJ1bnNoaWZ0IiwidXNlcklkIiwiY3JlYXRlTWFjcm8iLCJjaGF0TGlzdGVuZXJzIiwicmVuZGVyTWVzc2FnZUhvb2siLCJkaWZmIiwib25VcGRhdGVDaGF0TWVzc2FnZSIsIl90YWJsZVNldHRpbmdzQ2hhbmdlZCIsImNoZWNrRm9yVXBkYXRlIiwiX29uQ2xpY2tJbmxpbmVSb2xsIiwidGlueU1DRSIsIlBsdWdpbk1hbmFnZXIiLCJvbkVkaXRvckRyb3AiLCJUaW55TUNFIiwicGx1Z2lucyIsInRhYmxlQ2hvaWNlIiwibm9uZSIsImJvdXRPZk1hZG5lc3NfU3VtbWFyeSIsImJvdXRPZk1hZG5lc3NfUmVhbFRpbWUiLCJzZXRTY3JvbGwiLCJvbkNsb3NlIiwiY2hhcmFjdGVyU2hlZXQiLCJQYXJzZUNoYXRFbnRyeSIsIlBhcnNlU2hlZXRDb250ZW50IiwicmVuZGVyQ2hhdE1lc3NhZ2VIb29rIiwiUGFyc2VNZXNzYWdlIiwiZ2V0QnV0dG9ucyIsInJlbmRlckNvbnRyb2xzIiwib25Ecm9wU29tZXRoaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==